From java-user-return-35244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 00:52:17 2008
Return-Path: <java-user-return-35244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4318 invoked from network); 1 Aug 2008 00:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 00:52:17 -0000
Received: (qmail 44852 invoked by uid 500); 1 Aug 2008 00:52:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44822 invoked by uid 500); 1 Aug 2008 00:52:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44811 invoked by uid 99); 1 Aug 2008 00:52:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 17:52:09 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 00:51:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOirr-0006qs-6n
	for java-user@lucene.apache.org; Thu, 31 Jul 2008 17:51:39 -0700
Message-ID: <18766343.post@talk.nabble.com>
Date: Thu, 31 Jul 2008 17:51:39 -0700 (PDT)
From: Wojtek212 <wojtekg212@gmail.com>
To: java-user@lucene.apache.org
Subject: FileNotFoundException during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: wojtekg212@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I'm sometimes receiving FileNotFoundExceptions during indexing.

java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_3p.fnm (No such
file or directory)
	at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:245)
	at java.lang.Thread.run(Thread.java:595)
Caused by: com.test.search.IndexingException: java.io.FileNotFoundException:
/tmp/content/3615.0-3618.0/_3p.fnm (No such file or directory)
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:293)
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:199)
	at com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java:250)
	at com.testsearch.impl.lucene.IndexManager.reindex(IndexManager.java:301)
	at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:239)
	... 1 more
Caused by: java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_3p.fnm
(No such file or directory)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
	at
org.apache.lucene.store.FSIndexInput$Descriptor.<init>(FSDirectory.java:497)
	at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:522)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:434)
	at
org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:204)
	at
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:169)
	at
org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:153)
	at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1601)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:900)
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:282)

I have a class with few methods of reindexing, adding and deleting.
Everything is synchronized. Here is the example:

public class IndexManager {

   private final Object lock = new Object();

   private final Analyzer analyzer;

   private final FileProxy index;

   IndexManager(FileProxy index,
                      boolean create) throws IndexingException {
       this.analyzer = new TestAnalyzer();
       this.index = index;
       if (!create && !index.exists()) {
           create = true;
       }

       IndexWriter writer = null;
       try {
           // this checks the directory is unlocked
           writer = createIndexWriter(create);
       } catch (IOException e) {
           throw new IndexingException(e);
       } finally {
           if (writer != null) {
               try {
                   writer.close();
               } catch (IOException e) {
                   LOGGER.error("Cannot close index writer", e);
               }
           }
       }
   }

   public void reindex(Document[] documents) throws IndexingException {
       synchronized (lock) {
           removeDocuments(documents);
           String[] ids = new String[documents.length];
           for (int i = 0; i < documents.length; i++) {
               ids[i] = documents[i].getDocumentID();
           }
           addDocuments(documents);
       }
   }

   private IndexWriter createIndexWriter() throws IOException {
       return createIndexWriter(false);
   }

   private IndexWriter createIndexWriter(boolean create) throws IOException
{

       Directory directory = FileProxyDirectory.getDirectory(index, create);
       if (IndexReader.isLocked(directory)) {
           IndexReader.unlock(directory);
       }
       return new IndexWriter(directory,analyzer,create);
   }

   public void addDocuments(Document[] documents)
           throws IndexingException {
       synchronized (lock) {
           IndexWriter indexWriter = null;
           try {
               try {
                   indexWriter =  createIndexWriter();
                   for (int i = 0; i < documents.length; i++) {
                       // add a document ID for future management
                       if (documents[i].getDocumentID() == null) {
                           String msg = EXCEPTION_LOCALIZER.format(
                                   "document-id-not-set");
                           LOGGER.error(msg);
                           throw new IndexingException(msg);
                       }
                       LuceneDocument luceneDoc = (LuceneDocument)
documents[i];
                      
indexWriter.addDocument(luceneDoc.getBackingDocument());
                   }
               } finally {
                   if (indexWriter != null) {
                       try {
                           indexWriter.close();
                       } catch (IOException e) {
                           LOGGER.error("Cannot close index writer", e);
                       }
                   }
               }
           } catch (IOException e) {
               throw new IndexingException(e);
           }
       }
   }

   public boolean[] removeDocuments(String[] documentIDs) throws
IndexingException {
       boolean[] results = new boolean[documentIDs.length];

       // Batching the removal of a group of documents is more efficient due
       // to the requirement of closing the reader
       synchronized (lock) {
           try {
               IndexWriter indexWriter = null;
               try {
                   indexWriter = createIndexWriter();
                   for (int i = 0; i < documentIDs.length; i++) {
                       Term term = new Term(SearchConstants.DOCUMENT_ID,
                               documentIDs[i]);

                       indexWriter.deleteDocuments(term);
                       results[i] = true;
                   }
                   indexWriter.optimize();
               } finally {
                   if (indexWriter != null) {
                       try {
                           indexWriter.close();
                       } catch (IOException e) {
                           LOGGER.error("Cannot close index writer", e);
                       }
                   }
               }
           } catch (IOException e) {
               throw new IndexingException(e);
           }
       }
       return results;
   }

}

This class is used by many threads. Some of them can add
documents, some can delete and reindex. After any operation IndexWriter is
closed.
I'm using lucene 2.1.0 but even after upgrade to 2.3.2 there is still the
exception.
I don't use searching during indexing but the exception occurs. Does anybody
have idea what can be a reason?
-- 
View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18766343.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 01:13:32 2008
Return-Path: <java-user-return-35245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20434 invoked from network); 1 Aug 2008 01:13:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 01:13:32 -0000
Received: (qmail 58003 invoked by uid 500); 1 Aug 2008 01:13:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57966 invoked by uid 500); 1 Aug 2008 01:13:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57955 invoked by uid 99); 1 Aug 2008 01:13:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 18:13:24 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 01:12:27 +0000
Received: by wr-out-0506.google.com with SMTP id c30so771438wra.21
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 18:12:51 -0700 (PDT)
Received: by 10.90.97.18 with SMTP id u18mr13667586agb.75.1217553171723;
        Thu, 31 Jul 2008 18:12:51 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 44sm603411hsa.9.2008.07.31.18.12.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 31 Jul 2008 18:12:51 -0700 (PDT)
Message-Id: <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18766343.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: FileNotFoundException during indexing
Date: Thu, 31 Jul 2008 21:12:50 -0400
References: <18766343.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you only creating one instance of IndexManager and then sharing  
that instance across all threads?

Can you put some logging/printing where you call IndexReader.unLock,  
to see how often that's happening?  That method is dangerous because  
if you unlock a still-active IndexWriter it leads to exactly this kind  
of exception.

Mike

Wojtek212 wrote:

>
> Hi,
> I'm sometimes receiving FileNotFoundExceptions during indexing.
>
> java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_3p.fnm  
> (No such
> file or directory)
> 	at
> com.test.vcssearch.DefaultServiceIndexer 
> $2.run(DefaultServiceIndexer.java:245)
> 	at java.lang.Thread.run(Thread.java:595)
> Caused by: com.test.search.IndexingException:  
> java.io.FileNotFoundException:
> /tmp/content/3615.0-3618.0/_3p.fnm (No such file or directory)
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 293)
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 199)
> 	at  
> com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java: 
> 250)
> 	at  
> com.testsearch.impl.lucene.IndexManager.reindex(IndexManager.java:301)
> 	at
> com.test.vcssearch.DefaultServiceIndexer 
> $2.run(DefaultServiceIndexer.java:239)
> 	... 1 more
> Caused by: java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/ 
> _3p.fnm
> (No such file or directory)
> 	at java.io.RandomAccessFile.open(Native Method)
> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> 	at
> org.apache.lucene.store.FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:497)
> 	at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:522)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 434)
> 	at
> org 
> .apache 
> .lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:204)
> 	at
> org 
> .apache 
> .lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:169)
> 	at
> org 
> .apache 
> .lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:153)
> 	at  
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java: 
> 1601)
> 	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:900)
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 282)
>
> I have a class with few methods of reindexing, adding and deleting.
> Everything is synchronized. Here is the example:
>
> public class IndexManager {
>
>   private final Object lock = new Object();
>
>   private final Analyzer analyzer;
>
>   private final FileProxy index;
>
>   IndexManager(FileProxy index,
>                      boolean create) throws IndexingException {
>       this.analyzer = new TestAnalyzer();
>       this.index = index;
>       if (!create && !index.exists()) {
>           create = true;
>       }
>
>       IndexWriter writer = null;
>       try {
>           // this checks the directory is unlocked
>           writer = createIndexWriter(create);
>       } catch (IOException e) {
>           throw new IndexingException(e);
>       } finally {
>           if (writer != null) {
>               try {
>                   writer.close();
>               } catch (IOException e) {
>                   LOGGER.error("Cannot close index writer", e);
>               }
>           }
>       }
>   }
>
>   public void reindex(Document[] documents) throws IndexingException {
>       synchronized (lock) {
>           removeDocuments(documents);
>           String[] ids = new String[documents.length];
>           for (int i = 0; i < documents.length; i++) {
>               ids[i] = documents[i].getDocumentID();
>           }
>           addDocuments(documents);
>       }
>   }
>
>   private IndexWriter createIndexWriter() throws IOException {
>       return createIndexWriter(false);
>   }
>
>   private IndexWriter createIndexWriter(boolean create) throws  
> IOException
> {
>
>       Directory directory = FileProxyDirectory.getDirectory(index,  
> create);
>       if (IndexReader.isLocked(directory)) {
>           IndexReader.unlock(directory);
>       }
>       return new IndexWriter(directory,analyzer,create);
>   }
>
>   public void addDocuments(Document[] documents)
>           throws IndexingException {
>       synchronized (lock) {
>           IndexWriter indexWriter = null;
>           try {
>               try {
>                   indexWriter =  createIndexWriter();
>                   for (int i = 0; i < documents.length; i++) {
>                       // add a document ID for future management
>                       if (documents[i].getDocumentID() == null) {
>                           String msg = EXCEPTION_LOCALIZER.format(
>                                   "document-id-not-set");
>                           LOGGER.error(msg);
>                           throw new IndexingException(msg);
>                       }
>                       LuceneDocument luceneDoc = (LuceneDocument)
> documents[i];
>
> indexWriter.addDocument(luceneDoc.getBackingDocument());
>                   }
>               } finally {
>                   if (indexWriter != null) {
>                       try {
>                           indexWriter.close();
>                       } catch (IOException e) {
>                           LOGGER.error("Cannot close index writer",  
> e);
>                       }
>                   }
>               }
>           } catch (IOException e) {
>               throw new IndexingException(e);
>           }
>       }
>   }
>
>   public boolean[] removeDocuments(String[] documentIDs) throws
> IndexingException {
>       boolean[] results = new boolean[documentIDs.length];
>
>       // Batching the removal of a group of documents is more  
> efficient due
>       // to the requirement of closing the reader
>       synchronized (lock) {
>           try {
>               IndexWriter indexWriter = null;
>               try {
>                   indexWriter = createIndexWriter();
>                   for (int i = 0; i < documentIDs.length; i++) {
>                       Term term = new  
> Term(SearchConstants.DOCUMENT_ID,
>                               documentIDs[i]);
>
>                       indexWriter.deleteDocuments(term);
>                       results[i] = true;
>                   }
>                   indexWriter.optimize();
>               } finally {
>                   if (indexWriter != null) {
>                       try {
>                           indexWriter.close();
>                       } catch (IOException e) {
>                           LOGGER.error("Cannot close index writer",  
> e);
>                       }
>                   }
>               }
>           } catch (IOException e) {
>               throw new IndexingException(e);
>           }
>       }
>       return results;
>   }
>
> }
>
> This class is used by many threads. Some of them can add
> documents, some can delete and reindex. After any operation  
> IndexWriter is
> closed.
> I'm using lucene 2.1.0 but even after upgrade to 2.3.2 there is  
> still the
> exception.
> I don't use searching during indexing but the exception occurs. Does  
> anybody
> have idea what can be a reason?
> -- 
> View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18766343.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 02:10:46 2008
Return-Path: <java-user-return-35246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97014 invoked from network); 1 Aug 2008 02:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 02:10:46 -0000
Received: (qmail 84796 invoked by uid 500); 1 Aug 2008 02:10:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84761 invoked by uid 500); 1 Aug 2008 02:10:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84749 invoked by uid 99); 1 Aug 2008 02:10:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 19:10:38 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of collinmc@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 02:09:40 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m7126uaX008605
	for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 22:06:56 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m7126ua4230756
	for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 22:06:56 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m7126uKO001364
	for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 22:06:56 -0400
Received: from d01ml063.pok.ibm.com (d01ml063.pok.ibm.com [9.56.228.130])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m7126uCk001361
	for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 22:06:56 -0400
In-Reply-To: <1217437399.46058.ezmlm@lucene.apache.org>
References: <1217437399.46058.ezmlm@lucene.apache.org>
Subject: SpanRegexQuery
X-KeepSent: 170EF58A:06476DE2-85257498:000B3B69;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.0.1 HF105 April 10, 2008
Message-ID: <OF170EF58A.06476DE2-ON85257498.000B3B69-85257498.000BB1CF@us.ibm.com>
From: Christopher M Collins <collinmc@us.ibm.com>
Date: Thu, 31 Jul 2008 22:06:55 -0400
X-MIMETrack: Serialize by Router on D01ML063/01/M/IBM(Release 8.0.1|February 07, 2008) at
 07/31/2008 22:06:56
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=0ABBFE0BDF98BDF98f9e8a93df938690918c0ABBFE0BDF98BDF9"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=0ABBFE0BDF98BDF98f9e8a93df938690918c0ABBFE0BDF98BDF9
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable


Hello,

I'm trying to use SpanRegexQuery as one of the clauses in my SpanQuery.=

When I give it a regex like: "L[a-z]+ing" and do a rewrite on the final=

query I get terms like "Labinger" and "Lackonsingh" along with the expe=
cted
terms "Labeling", "Lacing", etc.  It's as if the regex is treated as a
"find()" and not a "match()" in Java.  Is there a way to make it behave=

like a full match, and not a prefix regex?

Thanks!

Christopher

______________________________________________________________
Christopher Collins \ http://www.cs.utoronto.ca/~ccollins
Department of Computer Science \ University of Toronto
Collaborative User Experience Group \ IBM Research=

--0__=0ABBFE0BDF98BDF98f9e8a93df938690918c0ABBFE0BDF98BDF9--


From java-user-return-35247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 02:28:29 2008
Return-Path: <java-user-return-35247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5358 invoked from network); 1 Aug 2008 02:28:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 02:28:29 -0000
Received: (qmail 90280 invoked by uid 500); 1 Aug 2008 02:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90249 invoked by uid 500); 1 Aug 2008 02:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90238 invoked by uid 99); 1 Aug 2008 02:28:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 19:28:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 02:27:28 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 50FD54ED88E
	for <java-user@lucene.apache.org>; Fri,  1 Aug 2008 12:26:55 +1000 (EST)
Message-ID: <48927497.1020208@nuix.com>
Date: Fri, 01 Aug 2008 12:27:35 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SpanRegexQuery
References: <1217437399.46058.ezmlm@lucene.apache.org> <OF170EF58A.06476DE2-ON85257498.000B3B69-85257498.000BB1CF@us.ibm.com>
In-Reply-To: <OF170EF58A.06476DE2-ON85257498.000B3B69-85257498.000BB1CF@us.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Christopher M Collins wrote:
> Hello,
> 
> I'm trying to use SpanRegexQuery as one of the clauses in my SpanQuery.
> When I give it a regex like: "L[a-z]+ing" and do a rewrite on the final
> query I get terms like "Labinger" and "Lackonsingh" along with the expected
> terms "Labeling", "Lacing", etc.  It's as if the regex is treated as a
> "find()" and not a "match()" in Java.  Is there a way to make it behave
> like a full match, and not a prefix regex?

Have you tried appending $ onto the end of it?  I think we noticed the 
same issue with regex queries here and had to apply a workaround of that 
sort.

Daniel


-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 05:46:28 2008
Return-Path: <java-user-return-35248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31072 invoked from network); 1 Aug 2008 05:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 05:46:26 -0000
Received: (qmail 11068 invoked by uid 500); 1 Aug 2008 05:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11033 invoked by uid 500); 1 Aug 2008 05:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11022 invoked by uid 99); 1 Aug 2008 05:46:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 22:46:19 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.64] (HELO smtp111.mail.mud.yahoo.com) (209.191.84.64)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Aug 2008 05:45:21 +0000
Received: (qmail 53716 invoked from network); 1 Aug 2008 05:44:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=3822cHZ5QHFcRIQzLW5tXg7PClwkXq0TQ5431PRP8h6LvrDWmtDC5HjokmHyi6p4TgkK3lIoK7IO2o8i4PRtmLxVUUrfh+B/DTr36hEOz3RXAwb/NWsmXGJaugjN1Pyd9sQyCOoa0Pg+tXjk4lGIM+L2o2vd3Vxn8oHdWFU1x2c=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp111.mail.mud.yahoo.com with SMTP; 1 Aug 2008 05:44:45 -0000
X-YMail-OSG: fCJUzykVM1nB.OyaW.OEPkFyii0eMP4BcNMx9toz9kDz7kLjRzpWme3w7URfEsD.pPMSCr2sLAzoYbnlZP6glpTVPRvpZV1iqEd3P7MpwXcFfwYcPwGXJIWS4.v4s0CC1FZWFj7ul1lg1qaK9jkxhGGb
X-Yahoo-Newman-Property: ymail-3
Message-ID: <020901c8f399$b4104490$610cc30a@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com> <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com> <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org> <18750334.post@talk.nabble.com> <151B185F-C80F-4320-903F-2A1FF49EA3F2@apache.org> <01a501c8f304$d1d70e90$610cc30a@sv.us.sonicwall.com> <18754258.post@talk.nabble.com> <32dca9ed0807310746t2d414517i77cbd28cf755070c@mail.gmail.com>
Subject: Re: Using lucene as a database... good idea or bad idea?
Date: Fri, 1 Aug 2008 11:14:40 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Andy and Karsten.

----- Original Message ----- 
From: "Andy Liu" <andyliu1227@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, July 31, 2008 8:16 PM
Subject: Re: Using lucene as a database... good idea or bad idea?


> If essentially all you need is key-value storage, Berkeley DB for Java 
> works
> well.  Lookup by ID is fast, can iterate through documents, supports
> secondary keys, updates, etc.
>
> Lucene would work relatively well for this, although inserting documents
> might not be as fast, because segments need to be merged and data ends up
> getting copied over again at certain points.  So if you're running a batch
> process with a lot of inserts, you might get better throughput with BDB as
> opposed to Lucene, but, of course, benchmark to confirm ;)
>
> Andy
>
> On Thu, Jul 31, 2008 at 9:12 AM, Karsten F.
> <karsten-lucene@fiz-technik.de>wrote:
>
>>
>> Hi Ganesh,
>>
>> in this Thread nobody said, that lucene is a good storage server.
>> Only "it could be used as storage server" (Grant: Connect data storage 
>> with
>> simple, fast lookup and Lucene..)
>>
>> I don't now about automatic rentention.
>> But for the rest in your list of features I suggest to take a deep look 
>> to
>>  - Jackrabbit (Standard jcr jsr170 implemention, I like the webDAV 
>> support)
>>  - dSpace (real working content repository software, with good 
>> permissions
>> management)
>>
>> Both use lucene for searching
>>
>> Best regards
>>    Karsten
>>
>>
>> Ganesh - yahoo wrote:
>> >
>> > which one will be the best to use as storage server. Lucene or
>> Jackrabbit.
>> >
>> > My requirement is to provide support to
>> > 1) Archive the documents
>> > 2) Do full text search on the documents.
>> > 3) Do backup the index store and archive store. [periodical basis]
>> > 4) Remove the documents after certain period [rentention policy]
>> >
>> > Whether Lucene could be used as archival store. Most of them in this
>> > mailing
>> > list said 'yes'. If so going for separate database to archive the data
>> and
>> > separate database to index it, will be better option or one database to
>> be
>> > used as archive and index.
>> >
>> > One more idea from this list is to use Jackrabbit / JDBM / My SQL to
>> > archive
>> > the data. Which will be the best?
>> >
>> > I am in desiging phase and i have time to explore and prototype any 
>> > other
>> > products. Please do suggest me a good one.
>> >
>> > Regards
>> > Ganesh
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18754258.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 07:39:27 2008
Return-Path: <java-user-return-35249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89450 invoked from network); 1 Aug 2008 07:39:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 07:39:25 -0000
Received: (qmail 83495 invoked by uid 500); 1 Aug 2008 07:39:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83458 invoked by uid 500); 1 Aug 2008 07:39:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83447 invoked by uid 99); 1 Aug 2008 07:39:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 00:39:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:38:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOpDr-00033o-NW
	for java-user@lucene.apache.org; Fri, 01 Aug 2008 00:38:47 -0700
Message-ID: <18769652.post@talk.nabble.com>
Date: Fri, 1 Aug 2008 00:38:47 -0700 (PDT)
From: Wojtek212 <wojtekg212@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException during indexing
In-Reply-To: <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: wojtekg212@gmail.com
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike,
I'm sharing one instance of IndexManager across all threads and as I've
noticed only this one is used during indexing.

I'm unlocking before every indexing operation to make sure it would be
possible.
When IndexWriter is closed I assume it releases the lock and finishes its
work.
Does IndexWriter executes some threads and doesn't wait when they are
finished?
It's the only one situation I can imagine that there 2 IndexWriters...


-- 
View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18769652.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 09:43:29 2008
Return-Path: <java-user-return-35250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65654 invoked from network); 1 Aug 2008 09:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 09:43:29 -0000
Received: (qmail 8314 invoked by uid 500); 1 Aug 2008 09:43:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8278 invoked by uid 500); 1 Aug 2008 09:43:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8267 invoked by uid 99); 1 Aug 2008 09:43:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 02:43:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 09:42:27 +0000
Received: by wr-out-0506.google.com with SMTP id c30so877589wra.21
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 02:42:35 -0700 (PDT)
Received: by 10.90.83.2 with SMTP id g2mr7552822agb.60.1217583755190;
        Fri, 01 Aug 2008 02:42:35 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm1149248hsx.1.2008.08.01.02.42.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 01 Aug 2008 02:42:34 -0700 (PDT)
Message-Id: <AE1ADB7E-6831-470B-B57E-1933B0E80EC0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18769652.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: FileNotFoundException during indexing
Date: Fri, 1 Aug 2008 05:42:33 -0400
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com> <18769652.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Wojtek212 wrote:

>
> Hi Mike,
> I'm sharing one instance of IndexManager across all threads and as  
> I've
> noticed only this one is used during indexing.

OK, maybe triple check this -- because that's the only way in your  
code I can see 2 IWs being live at once.

> I'm unlocking before every indexing operation to make sure it would be
> possible.

This is what makes me nervous (and why I suggest you print every time  
IndexReader.isLocked returns true, to be 100% sure it's not being  
called).

You should only very very rarely (after a JVM crash, or, if the JVM  
exits but you didn't close your IndexWriter) actually need to use  
IndexReader.unLock, and if you call it when you shouldn't (because  
another IW is in fact still "live"), disaster ensues.

> When IndexWriter is closed I assume it releases the lock and  
> finishes its
> work.
> Does IndexWriter executes some threads and doesn't wait when they are
> finished?
> It's the only one situation I can imagine that there 2 IndexWriters...

Before close() returns it finishes all threads and releases the lock.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 09:46:23 2008
Return-Path: <java-user-return-35251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68002 invoked from network); 1 Aug 2008 09:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 09:46:22 -0000
Received: (qmail 13885 invoked by uid 500); 1 Aug 2008 09:46:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13275 invoked by uid 500); 1 Aug 2008 09:46:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13264 invoked by uid 99); 1 Aug 2008 09:46:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 02:46:15 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 09:45:17 +0000
Received: by an-out-0708.google.com with SMTP id c37so1025184anc.49
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 02:45:43 -0700 (PDT)
Received: by 10.100.240.17 with SMTP id n17mr16045186anh.49.1217583943053;
        Fri, 01 Aug 2008 02:45:43 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm1791710wrl.41.2008.08.01.02.45.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 01 Aug 2008 02:45:42 -0700 (PDT)
Message-Id: <D7FAE9FD-190D-455F-9FB6-A55B4C8F0A8B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18769652.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: FileNotFoundException during indexing
Date: Fri, 1 Aug 2008 05:45:40 -0400
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com> <18769652.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Another option is to switch to native locks (dir.setLockFactory(new  
NativeFSLockFactory()), at which point you will never have to call  
IndexReader.unLock because native locks are always properly released  
by the OS when the JVM exits/crashes.

If on switching to native locks, and removing the call to  
IndexReader.unlock, you see IndexWriter.open hitting  
LockObtainFailedException, then that means somehow you are trying to  
open two live writers on the same index.

Mike

Wojtek212 wrote:

>
> Hi Mike,
> I'm sharing one instance of IndexManager across all threads and as  
> I've
> noticed only this one is used during indexing.
>
> I'm unlocking before every indexing operation to make sure it would be
> possible.
> When IndexWriter is closed I assume it releases the lock and  
> finishes its
> work.
> Does IndexWriter executes some threads and doesn't wait when they are
> finished?
> It's the only one situation I can imagine that there 2 IndexWriters...
>
>
> -- 
> View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18769652.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 10:24:48 2008
Return-Path: <java-user-return-35252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87984 invoked from network); 1 Aug 2008 10:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 10:24:48 -0000
Received: (qmail 49218 invoked by uid 500); 1 Aug 2008 10:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49182 invoked by uid 500); 1 Aug 2008 10:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49171 invoked by uid 99); 1 Aug 2008 10:24:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 03:24:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 10:23:45 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3066330EFC17; Fri,  1 Aug 2008 04:24:11 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-189-9.dyn.embarqhsd.net [69.68.189.9])
	by ehatchersolutions.com (Postfix) with ESMTP id BA00630EFC16
	for <java-user@lucene.apache.org>; Fri,  1 Aug 2008 04:24:06 -0600 (MDT)
Message-Id: <23491908-9522-41F8-8F1F-3BD64C581494@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <OF170EF58A.06476DE2-ON85257498.000B3B69-85257498.000BB1CF@us.ibm.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: SpanRegexQuery
Date: Fri, 1 Aug 2008 06:24:05 -0400
References: <1217437399.46058.ezmlm@lucene.apache.org> <OF170EF58A.06476DE2-ON85257498.000B3B69-85257498.000BB1CF@us.ibm.com>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Jul 31, 2008, at 10:06 PM, Christopher M Collins wrote:
> I'm trying to use SpanRegexQuery as one of the clauses in my  
> SpanQuery.
> When I give it a regex like: "L[a-z]+ing" and do a rewrite on the  
> final
> query I get terms like "Labinger" and "Lackonsingh" along with the  
> expected
> terms "Labeling", "Lacing", etc.  It's as if the regex is treated as a
> "find()" and not a "match()" in Java.  Is there a way to make it  
> behave
> like a full match, and not a prefix regex?

There are two implementations of the regex engine built into  
SpanRegexQuery, one using Java's java.util.regex, the other using  
Jakarta Regexp.  The default implementation is java.util.regex, which  
matches like this:

   pattern.matcher(string).lookingAt()

And Jakarta Regexp matches like this:

   regexp.match(string)

I'm not sure myself the differences in these two without doing some  
tests, but certainly they should, ahem, match in at least the  
expectation of whether there is an implied ^string$ or not.  But at a  
quick glance the respective javadocs, it does seem like the  
java.util.regex implementation should be using  
pattern.matcher(string).matches() instead.  lookingAt() always starts  
at the beginning, so there is an implied ^string effect, but not so  
with the akarta Regexp implementation.

As Daniel mentioned, putting a $ at the end should do the trick, and  
seems to me that it really should be necessary... but so should ^ in  
front if you want it to start at the beginning and not match anywhere  
in the string.

Changing JavaUtilRegexCapabilities to use matches() seems like the  
right thing to do, but that'd break backwards compatibility.  *ugh*

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 11:47:15 2008
Return-Path: <java-user-return-35253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26604 invoked from network); 1 Aug 2008 11:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 11:47:15 -0000
Received: (qmail 28104 invoked by uid 500); 1 Aug 2008 11:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28062 invoked by uid 500); 1 Aug 2008 11:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28051 invoked by uid 99); 1 Aug 2008 11:47:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 04:47:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 11:46:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOt5h-00041a-Dm
	for java-user@lucene.apache.org; Fri, 01 Aug 2008 04:46:37 -0700
Message-ID: <18772749.post@talk.nabble.com>
Date: Fri, 1 Aug 2008 04:46:37 -0700 (PDT)
From: Wojtek212 <wojtekg212@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException during indexing
In-Reply-To: <D7FAE9FD-190D-455F-9FB6-A55B4C8F0A8B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: wojtekg212@gmail.com
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com> <18769652.post@talk.nabble.com> <D7FAE9FD-190D-455F-9FB6-A55B4C8F0A8B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I've checked unlock ant it is not called until exception occurs.

BTW, I' ve tried to use FSDirectorectory with NativeFSLockFactory and I
didn't get
LockObtainFailedException. I removed also this part making unlocking
(IndexReader.unlock).

The exception is:
Exception in thread "Thread-95"
org.apache.lucene.index.MergePolicy$MergeException:
java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_5.cfs (No such
file or directory)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
Caused by: java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_5.cfs
(No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
        at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
        at
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
        at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:277)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)
Exception in thread "Thread-82" java.lang.RuntimeException:
com.testt.search.IndexingException: java.io.IOException: background merge
hit exception: _5:c27 _6:c1 into _7 [optimize]
        at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:245)
        at java.lang.Thread.run(Thread.java:595)
Caused by: com.test.search.IndexingException: java.io.IOException:
background merge hit exception: _5:c27 _6:c1 into _7 [optimize]
        at
com.test.search.impl.lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java:324)
        at
com.test.search.impl.lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java:208)
        at
com.test.search.impl.lucene.LuceneIndexManager.reindex(LuceneIndexManager.java:271)
        at
com.test.search.impl.lucene.LuceneIndexManager.reindex(LuceneIndexManager.java:332)
        at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:239)
        ... 1 more
Caused by: java.io.IOException: background merge hit exception: _5:c27 _6:c1
into _7 [optimize]
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1787)
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1727)
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1707)
        at
com.test.search.impl.lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java:310)
        ... 5 more
Caused by: java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_5.cfs
(No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
        at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
        at
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
        at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:277)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)


So if the LockObtainFailedException doesn't occur may I assume that there
are not 2 indexers writing at the same time? Mike, what do you think? 
Above test was made on lucene 2.3.2.
-- 
View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18772749.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 11:47:37 2008
Return-Path: <java-user-return-35254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26850 invoked from network); 1 Aug 2008 11:47:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 11:47:37 -0000
Received: (qmail 30039 invoked by uid 500); 1 Aug 2008 11:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30015 invoked by uid 500); 1 Aug 2008 11:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30004 invoked by uid 99); 1 Aug 2008 11:47:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 04:47:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 11:46:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOt64-00042s-NO
	for java-user@lucene.apache.org; Fri, 01 Aug 2008 04:47:00 -0700
Message-ID: <18772749.post@talk.nabble.com>
Date: Fri, 1 Aug 2008 04:47:00 -0700 (PDT)
From: Wojtek212 <wojtekg212@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException during indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: wojtekg212@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I've checked unlock and it is not called until exception occurs.

BTW, I' ve tried to use FSDirectorectory with NativeFSLockFactory and I
didn't get
LockObtainFailedException. I removed also this part making unlocking
(IndexReader.unlock).

The exception is:
Exception in thread "Thread-95"
org.apache.lucene.index.MergePolicy$MergeException:
java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_5.cfs (No such
file or directory)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
Caused by: java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_5.cfs
(No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
        at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
        at
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
        at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:277)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)
Exception in thread "Thread-82" java.lang.RuntimeException:
com.testt.search.IndexingException: java.io.IOException: background merge
hit exception: _5:c27 _6:c1 into _7 [optimize]
        at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:245)
        at java.lang.Thread.run(Thread.java:595)
Caused by: com.test.search.IndexingException: java.io.IOException:
background merge hit exception: _5:c27 _6:c1 into _7 [optimize]
        at
com.test.search.impl.lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java:324)
        at
com.test.search.impl.lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java:208)
        at
com.test.search.impl.lucene.LuceneIndexManager.reindex(LuceneIndexManager.java:271)
        at
com.test.search.impl.lucene.LuceneIndexManager.reindex(LuceneIndexManager.java:332)
        at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:239)
        ... 1 more
Caused by: java.io.IOException: background merge hit exception: _5:c27 _6:c1
into _7 [optimize]
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1787)
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1727)
        at
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1707)
        at
com.test.search.impl.lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java:310)
        ... 5 more
Caused by: java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_5.cfs
(No such file or directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
        at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
        at
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
        at
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
        at
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:277)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
        at
org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
        at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)


So if the LockObtainFailedException doesn't occur may I assume that there
are not 2 indexers writing at the same time? Mike, what do you think? 
Above test was made on lucene 2.3.2.
-- 
View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18772749.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 12:36:54 2008
Return-Path: <java-user-return-35255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64176 invoked from network); 1 Aug 2008 12:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 12:36:54 -0000
Received: (qmail 1177 invoked by uid 500); 1 Aug 2008 12:36:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1152 invoked by uid 500); 1 Aug 2008 12:36:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1141 invoked by uid 99); 1 Aug 2008 12:36:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 05:36:46 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 12:35:49 +0000
Received: by an-out-0708.google.com with SMTP id c37so1121023anc.49
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 05:35:58 -0700 (PDT)
Received: by 10.100.3.4 with SMTP id 4mr11527189anc.4.1217594154277;
        Fri, 01 Aug 2008 05:35:54 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm2141863wrh.24.2008.08.01.05.35.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 01 Aug 2008 05:35:53 -0700 (PDT)
Message-Id: <BA2E10E5-A24D-4003-9F4F-72805BB1F8B1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18772749.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: FileNotFoundException during indexing
Date: Fri, 1 Aug 2008 08:35:51 -0400
References: <18772749.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm OK.  I would stick with the NativeFSLockFactory, and never call  
IndexReader.unlock.

Can you call IndexWriter.setInfoStream, and then post the resulting  
log?  It may provide clues of what's happening.

Also, if you can narrow this to a small test case that shows the  
exception, that'd be very helpful.

Mike

Wojtek212 wrote:

>
> I've checked unlock and it is not called until exception occurs.
>
> BTW, I' ve tried to use FSDirectorectory with NativeFSLockFactory  
> and I
> didn't get
> LockObtainFailedException. I removed also this part making unlocking
> (IndexReader.unlock).
>
> The exception is:
> Exception in thread "Thread-95"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_5.cfs (No  
> such
> file or directory)
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:271)
> Caused by: java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/ 
> _5.cfs
> (No such file or directory)
>        at java.io.RandomAccessFile.open(Native Method)
>        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>        at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
>        at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java:536)
>        at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>        at
> org 
> .apache 
> .lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
>        at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
> 277)
>        at  
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>        at  
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>        at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
>        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java: 
> 2968)
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:240)
> Exception in thread "Thread-82" java.lang.RuntimeException:
> com.testt.search.IndexingException: java.io.IOException: background  
> merge
> hit exception: _5:c27 _6:c1 into _7 [optimize]
>        at
> com.test.vcssearch.DefaultServiceIndexer 
> $2.run(DefaultServiceIndexer.java:245)
>        at java.lang.Thread.run(Thread.java:595)
> Caused by: com.test.search.IndexingException: java.io.IOException:
> background merge hit exception: _5:c27 _6:c1 into _7 [optimize]
>        at
> com 
> .test 
> .search 
> .impl 
> .lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java: 
> 324)
>        at
> com 
> .test 
> .search 
> .impl 
> .lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java: 
> 208)
>        at
> com 
> .test 
> .search 
> .impl.lucene.LuceneIndexManager.reindex(LuceneIndexManager.java:271)
>        at
> com 
> .test 
> .search 
> .impl.lucene.LuceneIndexManager.reindex(LuceneIndexManager.java:332)
>        at
> com.test.vcssearch.DefaultServiceIndexer 
> $2.run(DefaultServiceIndexer.java:239)
>        ... 1 more
> Caused by: java.io.IOException: background merge hit exception:  
> _5:c27 _6:c1
> into _7 [optimize]
>        at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1787)
>        at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1727)
>        at
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1707)
>        at
> com 
> .test 
> .search 
> .impl 
> .lucene.LuceneIndexManager.removeDocuments(LuceneIndexManager.java: 
> 310)
>        ... 5 more
> Caused by: java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/ 
> _5.cfs
> (No such file or directory)
>        at java.io.RandomAccessFile.open(Native Method)
>        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>        at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
>        at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java:536)
>        at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
>        at
> org 
> .apache 
> .lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
>        at
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
> 277)
>        at  
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>        at  
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>        at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3263)
>        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java: 
> 2968)
>        at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>
>
> So if the LockObtainFailedException doesn't occur may I assume that  
> there
> are not 2 indexers writing at the same time? Mike, what do you think?
> Above test was made on lucene 2.3.2.
> -- 
> View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18772749.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 12:59:08 2008
Return-Path: <java-user-return-35256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76991 invoked from network); 1 Aug 2008 12:59:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 12:59:08 -0000
Received: (qmail 21850 invoked by uid 500); 1 Aug 2008 12:59:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21823 invoked by uid 500); 1 Aug 2008 12:59:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21812 invoked by uid 99); 1 Aug 2008 12:59:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 05:59:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 12:58:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOuDG-0006oC-V8
	for java-user@lucene.apache.org; Fri, 01 Aug 2008 05:58:30 -0700
Message-ID: <18773824.post@talk.nabble.com>
Date: Fri, 1 Aug 2008 05:58:30 -0700 (PDT)
From: Wojtek212 <wojtekg212@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException during indexing
In-Reply-To: <BA2E10E5-A24D-4003-9F4F-72805BB1F8B1@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: wojtekg212@gmail.com
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com> <18769652.post@talk.nabble.com> <D7FAE9FD-190D-455F-9FB6-A55B4C8F0A8B@mikemccandless.com> <18772749.post@talk.nabble.com> <BA2E10E5-A24D-4003-9F4F-72805BB1F8B1@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


The strange thing is that when I use only FSDirectory with
SimpleFSLockFactory I don't see any exception (or I couldn't reproduce the
problem). FSDirectory with NativeFSLockFactory doesn't work as well as my
implementation of Directory and Lock (based on java.nio).

Hmmm, I don't see the reason of such behaviour...
-- 
View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18773824.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 13:33:39 2008
Return-Path: <java-user-return-35257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99057 invoked from network); 1 Aug 2008 13:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 13:33:39 -0000
Received: (qmail 58179 invoked by uid 500); 1 Aug 2008 13:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58149 invoked by uid 500); 1 Aug 2008 13:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58137 invoked by uid 99); 1 Aug 2008 13:33:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 06:33:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 13:32:36 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 1 Aug 2008 09:33:02 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 1 Aug 2008 09:33:01 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: getting started
Date: Fri, 1 Aug 2008 09:28:58 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000B_01C8F3B9.06F18510"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acjz2o14uSmAsbUbQ1qpIKkWJiCJew==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010203.4893108D.0056,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 01 Aug 2008 13:33:01.0466 (UTC) FILETIME=[1E787FA0:01C8F3DB]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000B_01C8F3B9.06F18510
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Just trying to grasp the concept.

 

I want to search a text file where each line is a separate item to be
searched.  When text it entered by the user, I want to return all the lines
in which that text appears.

For example, if the text file has:

I like apples.

I went to the store.

I bought an apple.

 

If the user searches "apple", I want it to return the first and third
sentences.

 

Is each sentence a Token?  Is the user input going to be a QueryParser?  How
should I read in the file so that each line of text is a token to search?

 

Thanks in advance.

 

 

 

Brittany Jacobs

Java Developer

JBManagement, Inc.

12 Christopher Way, Suite 103

Eatontown, NJ 07724

ph: 732-542-9200 ext. 229

fax: 732-380-0678

email:  <mailto:bjacobs@jbmanagement.com> bjacobs@jbmanagement.com

 


------=_NextPart_000_000B_01C8F3B9.06F18510--



From java-user-return-35258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 13:51:02 2008
Return-Path: <java-user-return-35258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13090 invoked from network); 1 Aug 2008 13:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 13:51:02 -0000
Received: (qmail 89035 invoked by uid 500); 1 Aug 2008 13:50:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88997 invoked by uid 500); 1 Aug 2008 13:50:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88986 invoked by uid 99); 1 Aug 2008 13:50:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 06:50:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 13:49:47 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 1 Aug 2008 09:48:57 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 1 Aug 2008 09:48:56 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: getting started
Date: Fri, 1 Aug 2008 09:44:54 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001A_01C8F3BB.40EA4CF0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acjz3MeqjAEGDhJkTd2dmeONuPYtUw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGEn8Llz00000827@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010205.48931448.01B9,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 01 Aug 2008 13:48:56.0891 (UTC) FILETIME=[57F2C8B0:01C8F3DD]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_001A_01C8F3BB.40EA4CF0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Just trying to grasp the concept.

 

I want to search a text file where each line is a separate item to be
searched.  When text it entered by the user, I want to return all the lines
in which that text appears.

For example, if the text file has:

I like apples.

I went to the store.

I bought an apple.

 

If the user searches "apple", I want it to return the first and third
sentences.

 

Is each sentence a Token?  Is the user input going to be a QueryParser?  How
should I read in the file so that each line of text is a token to search?

 

Thanks in advance.

 


------=_NextPart_000_001A_01C8F3BB.40EA4CF0--



From java-user-return-35259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 13:53:08 2008
Return-Path: <java-user-return-35259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14809 invoked from network); 1 Aug 2008 13:53:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 13:53:08 -0000
Received: (qmail 91717 invoked by uid 500); 1 Aug 2008 13:53:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91680 invoked by uid 500); 1 Aug 2008 13:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91657 invoked by uid 99); 1 Aug 2008 13:53:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 06:53:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 13:52:05 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1069028rvb.5
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 06:51:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=l0jCZ17NbMYHYWY9ubTWkNIW/htKxxa/Is50IBUgAzI=;
        b=AGwXPOsaoM5ZLp9OkSKWqkXRyt0qYgGftO09S2vOrJB8fRz61tWWn7NkNpBa3nD4L+
         ABV/YTfPUufW5AIcC6yE7y9zp7ZGz6pcl7w48h7efePxn9MM57qCffFiiwYNHpwBUnG6
         WPukhSgm8GWnyD/tna+kOOh2atFi+ljwaykD8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=NtCdHuOj+J9/RwN6TLu20SEXPz9546NAIbN7xDncI7ww32tHlqFTC6x0zsgpB8jNi0
         sCa9jn/K02Grf9o7TVdGQVlOgvseD52qla0CBahUXquPZsSIvNlEn2V1ONVdyPA+vPnw
         AYMWCLolNsOcMF9pEzGB839BAOqd+qwbWnxqM=
Received: by 10.141.152.8 with SMTP id e8mr5959863rvo.19.1217598666119;
        Fri, 01 Aug 2008 06:51:06 -0700 (PDT)
Received: by 10.141.115.19 with HTTP; Fri, 1 Aug 2008 06:51:06 -0700 (PDT)
Message-ID: <8c4e68610808010651i6477d09fn418a1993ac2efa68@mail.gmail.com>
Date: Fri, 1 Aug 2008 14:51:06 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getting started
In-Reply-To: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
X-Virus-Checked: Checked by ClamAV on apache.org

Each sentence will be a document.  Read the file a line at a time and
make each line a separate document.

The user input will be a word, or words, which you can pass through a
QueryParser to get a Query which can be used to search the index, and
which will return matching documents i.e. sentences.


Lucene in Action is strongly recommended.  Somewhat out of date but
all the core concepts are still valid.


--
Ian.


On Fri, Aug 1, 2008 at 2:28 PM, Brittany Jacobs
<bjacobs@jbmanagement.com> wrote:
> Just trying to grasp the concept.
>
>
>
> I want to search a text file where each line is a separate item to be
> searched.  When text it entered by the user, I want to return all the lines
> in which that text appears.
>
> For example, if the text file has:
>
> I like apples.
>
> I went to the store.
>
> I bought an apple.
>
>
>
> If the user searches "apple", I want it to return the first and third
> sentences.
>
>
>
> Is each sentence a Token?  Is the user input going to be a QueryParser?  How
> should I read in the file so that each line of text is a token to search?
>
>
>
> Thanks in advance.
>
>
>
>
>
>
>
> Brittany Jacobs
>
> Java Developer
>
> JBManagement, Inc.
>
> 12 Christopher Way, Suite 103
>
> Eatontown, NJ 07724
>
> ph: 732-542-9200 ext. 229
>
> fax: 732-380-0678
>
> email:  <mailto:bjacobs@jbmanagement.com> bjacobs@jbmanagement.com
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 13:54:56 2008
Return-Path: <java-user-return-35260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16864 invoked from network); 1 Aug 2008 13:54:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 13:54:56 -0000
Received: (qmail 97730 invoked by uid 500); 1 Aug 2008 13:54:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97700 invoked by uid 500); 1 Aug 2008 13:54:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97689 invoked by uid 99); 1 Aug 2008 13:54:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 06:54:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.18.197.228] (HELO web01-nyc.clicvu.com) (69.18.197.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 13:53:53 +0000
Received: from [192.168.0.11] by web01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <java-user@lucene.apache.org>;
          Fri, 1 Aug 2008 09:53:31 -0400
Received: by wf-out-1314.google.com with SMTP id 23so977295wfg.30
        for <java-user@lucene.apache.org                                                                                                                                                                                                                                    >; Fri, 01 Aug 2008 06:51:56 -0700 (PDT)
Received: by 10.142.52.9 with SMTP id z9mr3748994wfz.258.1217598716503;
        Fri, 01 Aug 2008 06:51:56 -0700 (PDT)
Received: by 10.142.140.16 with HTTP; Fri, 1 Aug 2008 06:51:56 -0700 (PDT)
Message-ID: <454006f50808010651m68360f04u868630158446a696@mail.gmail.com>
Date: Fri, 1 Aug 2008 09:51:56 -0400
From: roy-lucene-user@xemaps.com
To: java-user@lucene.apache.org                                                                                                                                                                                                                                    
Subject: Re: getting started
In-Reply-To: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4247_23828511.1217598716499"
References: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4247_23828511.1217598716499
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Brittany,

I think the easiest thing for you to do is make each line a Document.  You
might want a FileName and LineNumber field on top of a "Text" field, this
way if you need to gather all the lines of your File back together again you
can do a search on the FileName.

So in your case:

Document 1
  FileName: [the file]
  LineNumber: 1
  Text: I like apples
Document 2
  ...etc

Regards,
Roy

On Fri, Aug 1, 2008 at 9:28 AM, Brittany Jacobs <bjacobs@jbmanagement.com>wrote:

> Just trying to grasp the concept.
>
>
>
> I want to search a text file where each line is a separate item to be
> searched.  When text it entered by the user, I want to return all the lines
> in which that text appears.
>
> For example, if the text file has:
>
> I like apples.
>
> I went to the store.
>
> I bought an apple.
>
>
>
> If the user searches "apple", I want it to return the first and third
> sentences.
>
>
>
> Is each sentence a Token?  Is the user input going to be a QueryParser?
>  How
> should I read in the file so that each line of text is a token to search?
>
>
>
> Thanks in advance.
>
>
>
>
>
>
>
> Brittany Jacobs
>
> Java Developer
>
> JBManagement, Inc.
>
> 12 Christopher Way, Suite 103
>
> Eatontown, NJ 07724
>
> ph: 732-542-9200 ext. 229
>
> fax: 732-380-0678
>
> email:  <mailto:bjacobs@jbmanagement.com> bjacobs@jbmanagement.com
>
>
>
>

------=_Part_4247_23828511.1217598716499--

From java-user-return-35261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 13:57:25 2008
Return-Path: <java-user-return-35261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18957 invoked from network); 1 Aug 2008 13:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 13:57:25 -0000
Received: (qmail 4063 invoked by uid 500); 1 Aug 2008 13:57:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3815 invoked by uid 500); 1 Aug 2008 13:57:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3804 invoked by uid 99); 1 Aug 2008 13:57:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 06:57:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 13:56:22 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 1 Aug 2008 09:55:01 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 1 Aug 2008 09:55:00 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: RE: getting started
Date: Fri, 1 Aug 2008 09:50:58 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acjz3fCZPpQArOYnR/ax6DYdNImtiAAAFphw
In-Reply-To: <8c4e68610808010651i6477d09fn418a1993ac2efa68@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGENMjiG00000828@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010209.489315B4.0088,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 01 Aug 2008 13:55:00.0710 (UTC) FILETIME=[30CD2860:01C8F3DE]
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you so much!


-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com] 
Sent: Friday, August 01, 2008 9:51 AM
To: java-user@lucene.apache.org
Subject: Re: getting started

Each sentence will be a document.  Read the file a line at a time and
make each line a separate document.

The user input will be a word, or words, which you can pass through a
QueryParser to get a Query which can be used to search the index, and
which will return matching documents i.e. sentences.


Lucene in Action is strongly recommended.  Somewhat out of date but
all the core concepts are still valid.


--
Ian.


On Fri, Aug 1, 2008 at 2:28 PM, Brittany Jacobs
<bjacobs@jbmanagement.com> wrote:
> Just trying to grasp the concept.
>
>
>
> I want to search a text file where each line is a separate item to be
> searched.  When text it entered by the user, I want to return all the
lines
> in which that text appears.
>
> For example, if the text file has:
>
> I like apples.
>
> I went to the store.
>
> I bought an apple.
>
>
>
> If the user searches "apple", I want it to return the first and third
> sentences.
>
>
>
> Is each sentence a Token?  Is the user input going to be a QueryParser?
How
> should I read in the file so that each line of text is a token to search?
>
>
>
> Thanks in advance.
>
>
>
>
>
>
>
> Brittany Jacobs
>
> Java Developer
>
> JBManagement, Inc.
>
> 12 Christopher Way, Suite 103
>
> Eatontown, NJ 07724
>
> ph: 732-542-9200 ext. 229
>
> fax: 732-380-0678
>
> email:  <mailto:bjacobs@jbmanagement.com> bjacobs@jbmanagement.com
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 14:01:07 2008
Return-Path: <java-user-return-35262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22511 invoked from network); 1 Aug 2008 14:01:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 14:01:07 -0000
Received: (qmail 11138 invoked by uid 500); 1 Aug 2008 14:00:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11119 invoked by uid 500); 1 Aug 2008 14:00:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11108 invoked by uid 99); 1 Aug 2008 14:00:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:00:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:00:03 +0000
Received: by nf-out-0910.google.com with SMTP id g16so369559nfd.15
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 06:59:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KMhR8Z0Fv13zNKlDnKdpDi4TFWfxFQTWHrqyJ4znKxU=;
        b=H13jD6LQjoR/GuR2t5/qLasFi7xEKPUxh6ZWvHjEJ1qqczSV1dmMoMXDQGnr/vx/Yq
         xJZAzddOV4ZxtNnJZAhUf5wJdPgXrZsjJZrKWFPLJ2YI/8FTolx6ZbFMLisMnP2c5jhS
         BRH4AiDzycHxN6Zo9iH7eo8MBfp/wcZNBKKLM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uD1WQZI9Alev5n+rAkjwW62pZzKaA8IUacMx6eVSSXMfBIi83+5589LDOqhvWEOXpm
         yi+MfqrTRuWwPshN9BVis1bmpLodo1TuG8BCVUtE8/0I7q84/yv7xNvta8irFkTD/KiS
         f2k9olNkMIAK3jAlNmaW7CedpWv1OWZkoCv5o=
Received: by 10.210.61.8 with SMTP id j8mr8554851eba.123.1217599194037;
        Fri, 01 Aug 2008 06:59:54 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Fri, 1 Aug 2008 06:59:53 -0700 (PDT)
Message-ID: <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
Date: Fri, 1 Aug 2008 19:29:53 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getting started
In-Reply-To: <454006f50808010651m68360f04u868630158446a696@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16668_21899946.1217599194021"
References: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
	 <454006f50808010651m68360f04u868630158446a696@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16668_21899946.1217599194021
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why should each line be a Document ? If there is a single document having
each line as a Field, then the search would result in a single Document as a
'hit' not the individual lines matching it. Is this right ?

Nagesh

On Fri, Aug 1, 2008 at 7:21 PM, <roy-lucene-user@xemaps.com> wrote:

> Hello Brittany,
>
> I think the easiest thing for you to do is make each line a Document.  You
> might want a FileName and LineNumber field on top of a "Text" field, this
> way if you need to gather all the lines of your File back together again
> you
> can do a search on the FileName.
>
> So in your case:
>
> Document 1
>  FileName: [the file]
>  LineNumber: 1
>  Text: I like apples
> Document 2
>  ...etc
>
> Regards,
> Roy
>
> On Fri, Aug 1, 2008 at 9:28 AM, Brittany Jacobs <bjacobs@jbmanagement.com
> >wrote:
>
> > Just trying to grasp the concept.
> >
> >
> >
> > I want to search a text file where each line is a separate item to be
> > searched.  When text it entered by the user, I want to return all the
> lines
> > in which that text appears.
> >
> > For example, if the text file has:
> >
> > I like apples.
> >
> > I went to the store.
> >
> > I bought an apple.
> >
> >
> >
> > If the user searches "apple", I want it to return the first and third
> > sentences.
> >
> >
> >
> > Is each sentence a Token?  Is the user input going to be a QueryParser?
> >  How
> > should I read in the file so that each line of text is a token to search?
> >
> >
> >
> > Thanks in advance.
> >
> >
> >
> >
> >
> >
> >
> > Brittany Jacobs
> >
> > Java Developer
> >
> > JBManagement, Inc.
> >
> > 12 Christopher Way, Suite 103
> >
> > Eatontown, NJ 07724
> >
> > ph: 732-542-9200 ext. 229
> >
> > fax: 732-380-0678
> >
> > email:  <mailto:bjacobs@jbmanagement.com> bjacobs@jbmanagement.com
> >
> >
> >
> >
>

------=_Part_16668_21899946.1217599194021--

From java-user-return-35263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 14:14:24 2008
Return-Path: <java-user-return-35263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32690 invoked from network); 1 Aug 2008 14:14:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 14:14:24 -0000
Received: (qmail 46780 invoked by uid 500); 1 Aug 2008 14:14:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46757 invoked by uid 500); 1 Aug 2008 14:14:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46746 invoked by uid 99); 1 Aug 2008 14:14:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:14:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:13:22 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1078568rvb.5
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 07:13:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=zJZ2LlyHByAFSQcyP2BbUyxoRf/0cDMrGoj04iOCesE=;
        b=F/pu+A8QP2qfUdi9U4AkVNqMVupwIPiQkJU+6TfntQCv1SBLUEXOOS7tMtE8h+9gug
         rbOqP7+z6XLEbVJYNPyi8//7f4BzREKlhMCjFhgwrUbZiXXXNJDL3XdUEVVDURq4g+pg
         XTqD0nLZB6HqCeYVG4e41EvzVmfekIJO6xbQQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WI9Gt/mTXyFIxJ010Kt7YNglkjOOf7VNApU7mseB55dKw5qtNn7v1Ps3FPvdOZkJM2
         4VQKiPaIMtOTTHWWfBc7MPWG3M3N3FNVTa81SPEGJjHAzAYLHjs2TDN7TuZ1tgv91k8d
         y7lvv8VxxL9NAJIKQnKAG2FsyGGWkyVtSe8p0=
Received: by 10.141.123.4 with SMTP id a4mr5965187rvn.172.1217600012023;
        Fri, 01 Aug 2008 07:13:32 -0700 (PDT)
Received: by 10.141.115.19 with HTTP; Fri, 1 Aug 2008 07:13:31 -0700 (PDT)
Message-ID: <8c4e68610808010713p51dc1f4ei34957ef339ea28fb@mail.gmail.com>
Date: Fri, 1 Aug 2008 15:13:31 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getting started
In-Reply-To: <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
	 <454006f50808010651m68360f04u868630158446a696@mail.gmail.com>
	 <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

WWVzLCB0aGF0IGlzIGNvcnJlY3QuCgoKLS0KSWFuLgoKCk9uIEZyaSwgQXVnIDEsIDIwMDggYXQg
Mjo1OSBQTSwg4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjeCyruCyo+Cz
jeCyryAoTmFnZXNoIFMpCjxuYWdlc2hibG9yZUBnbWFpbC5jb20+IHdyb3RlOgo+IFdoeSBzaG91
bGQgZWFjaCBsaW5lIGJlIGEgRG9jdW1lbnQgPyBJZiB0aGVyZSBpcyBhIHNpbmdsZSBkb2N1bWVu
dCBoYXZpbmcKPiBlYWNoIGxpbmUgYXMgYSBGaWVsZCwgdGhlbiB0aGUgc2VhcmNoIHdvdWxkIHJl
c3VsdCBpbiBhIHNpbmdsZSBEb2N1bWVudCBhcyBhCj4gJ2hpdCcgbm90IHRoZSBpbmRpdmlkdWFs
IGxpbmVzIG1hdGNoaW5nIGl0LiBJcyB0aGlzIHJpZ2h0ID8KPgo+IE5hZ2VzaAo+Cj4gT24gRnJp
LCBBdWcgMSwgMjAwOCBhdCA3OjIxIFBNLCA8cm95LWx1Y2VuZS11c2VyQHhlbWFwcy5jb20+IHdy
b3RlOgo+Cj4+IEhlbGxvIEJyaXR0YW55LAo+Pgo+PiBJIHRoaW5rIHRoZSBlYXNpZXN0IHRoaW5n
IGZvciB5b3UgdG8gZG8gaXMgbWFrZSBlYWNoIGxpbmUgYSBEb2N1bWVudC4gIFlvdQo+PiBtaWdo
dCB3YW50IGEgRmlsZU5hbWUgYW5kIExpbmVOdW1iZXIgZmllbGQgb24gdG9wIG9mIGEgIlRleHQi
IGZpZWxkLCB0aGlzCj4+IHdheSBpZiB5b3UgbmVlZCB0byBnYXRoZXIgYWxsIHRoZSBsaW5lcyBv
ZiB5b3VyIEZpbGUgYmFjayB0b2dldGhlciBhZ2Fpbgo+PiB5b3UKPj4gY2FuIGRvIGEgc2VhcmNo
IG9uIHRoZSBGaWxlTmFtZS4KPj4KPj4gU28gaW4geW91ciBjYXNlOgo+Pgo+PiBEb2N1bWVudCAx
Cj4+ICBGaWxlTmFtZTogW3RoZSBmaWxlXQo+PiAgTGluZU51bWJlcjogMQo+PiAgVGV4dDogSSBs
aWtlIGFwcGxlcwo+PiBEb2N1bWVudCAyCj4+ICAuLi5ldGMKPj4KPj4gUmVnYXJkcywKPj4gUm95
Cj4+Cj4+IE9uIEZyaSwgQXVnIDEsIDIwMDggYXQgOToyOCBBTSwgQnJpdHRhbnkgSmFjb2JzIDxi
amFjb2JzQGpibWFuYWdlbWVudC5jb20KPj4gPndyb3RlOgo+Pgo+PiA+IEp1c3QgdHJ5aW5nIHRv
IGdyYXNwIHRoZSBjb25jZXB0Lgo+PiA+Cj4+ID4KPj4gPgo+PiA+IEkgd2FudCB0byBzZWFyY2gg
YSB0ZXh0IGZpbGUgd2hlcmUgZWFjaCBsaW5lIGlzIGEgc2VwYXJhdGUgaXRlbSB0byBiZQo+PiA+
IHNlYXJjaGVkLiAgV2hlbiB0ZXh0IGl0IGVudGVyZWQgYnkgdGhlIHVzZXIsIEkgd2FudCB0byBy
ZXR1cm4gYWxsIHRoZQo+PiBsaW5lcwo+PiA+IGluIHdoaWNoIHRoYXQgdGV4dCBhcHBlYXJzLgo+
PiA+Cj4+ID4gRm9yIGV4YW1wbGUsIGlmIHRoZSB0ZXh0IGZpbGUgaGFzOgo+PiA+Cj4+ID4gSSBs
aWtlIGFwcGxlcy4KPj4gPgo+PiA+IEkgd2VudCB0byB0aGUgc3RvcmUuCj4+ID4KPj4gPiBJIGJv
dWdodCBhbiBhcHBsZS4KPj4gPgo+PiA+Cj4+ID4KPj4gPiBJZiB0aGUgdXNlciBzZWFyY2hlcyAi
YXBwbGUiLCBJIHdhbnQgaXQgdG8gcmV0dXJuIHRoZSBmaXJzdCBhbmQgdGhpcmQKPj4gPiBzZW50
ZW5jZXMuCj4+ID4KPj4gPgo+PiA+Cj4+ID4gSXMgZWFjaCBzZW50ZW5jZSBhIFRva2VuPyAgSXMg
dGhlIHVzZXIgaW5wdXQgZ29pbmcgdG8gYmUgYSBRdWVyeVBhcnNlcj8KPj4gPiAgSG93Cj4+ID4g
c2hvdWxkIEkgcmVhZCBpbiB0aGUgZmlsZSBzbyB0aGF0IGVhY2ggbGluZSBvZiB0ZXh0IGlzIGEg
dG9rZW4gdG8gc2VhcmNoPwo+PiA+Cj4+ID4KPj4gPgo+PiA+IFRoYW5rcyBpbiBhZHZhbmNlLgo+
PiA+Cj4+ID4KPj4gPgo+PiA+Cj4+ID4KPj4gPgo+PiA+Cj4+ID4gQnJpdHRhbnkgSmFjb2JzCj4+
ID4KPj4gPiBKYXZhIERldmVsb3Blcgo+PiA+Cj4+ID4gSkJNYW5hZ2VtZW50LCBJbmMuCj4+ID4K
Pj4gPiAxMiBDaHJpc3RvcGhlciBXYXksIFN1aXRlIDEwMwo+PiA+Cj4+ID4gRWF0b250b3duLCBO
SiAwNzcyNAo+PiA+Cj4+ID4gcGg6IDczMi01NDItOTIwMCBleHQuIDIyOQo+PiA+Cj4+ID4gZmF4
OiA3MzItMzgwLTA2NzgKPj4gPgo+PiA+IGVtYWlsOiAgPG1haWx0bzpiamFjb2JzQGpibWFuYWdl
bWVudC5jb20+IGJqYWNvYnNAamJtYW5hZ2VtZW50LmNvbQo+PiA+Cj4+ID4KPj4gPgo+PiA+Cj4+
Cj4K


From java-user-return-35264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 14:14:53 2008
Return-Path: <java-user-return-35264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32962 invoked from network); 1 Aug 2008 14:14:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 14:14:53 -0000
Received: (qmail 48784 invoked by uid 500); 1 Aug 2008 14:14:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48759 invoked by uid 500); 1 Aug 2008 14:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48748 invoked by uid 99); 1 Aug 2008 14:14:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:14:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:13:50 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 1 Aug 2008 10:13:55 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 1 Aug 2008 10:13:54 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: RE: getting started
Date: Fri, 1 Aug 2008 10:09:52 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acjz3wu50eDR5ew2S2G9btY/GkJ9qAAATARQ
In-Reply-To: <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGECHOzy0000082b@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010208.48931A22.0125,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 01 Aug 2008 14:13:54.0826 (UTC) FILETIME=[D4C986A0:01C8F3E0]
X-Virus-Checked: Checked by ClamAV on apache.org

What is the web address you are seeing this message on?

Brittany Jacobs
Java Developer
JBManagement, Inc.
12 Christopher Way, Suite 103
Eatontown, NJ 07724
ph: 732-542-9200 ext. 229
fax: 732-380-0678
email: bjacobs@jbmanagement.com

-----Original Message-----
From: =E0=B2=A8=E0=B2=BE=E0=B2=97=E0=B3=87=E0=B2=B6=E0=B3=8D =
=E0=B2=B8=E0=B3=81=E0=B2=AC=E0=B3=8D=E0=B2=B0=E0=B2=B9=E0=B3=8D=E0=B2=AE=E0=
=B2=A3=E0=B3=8D=E0=B2=AF (Nagesh S) [mailto:nageshblore@gmail.com]=20
Sent: Friday, August 01, 2008 10:00 AM
To: java-user@lucene.apache.org
Subject: Re: getting started

Why should each line be a Document ? If there is a single document =
having
each line as a Field, then the search would result in a single Document =
as a
'hit' not the individual lines matching it. Is this right ?

Nagesh

On Fri, Aug 1, 2008 at 7:21 PM, <roy-lucene-user@xemaps.com> wrote:

> Hello Brittany,
>
> I think the easiest thing for you to do is make each line a Document.  =
You
> might want a FileName and LineNumber field on top of a "Text" field, =
this
> way if you need to gather all the lines of your File back together =
again
> you
> can do a search on the FileName.
>
> So in your case:
>
> Document 1
>  FileName: [the file]
>  LineNumber: 1
>  Text: I like apples
> Document 2
>  ...etc
>
> Regards,
> Roy
>
> On Fri, Aug 1, 2008 at 9:28 AM, Brittany Jacobs =
<bjacobs@jbmanagement.com
> >wrote:
>
> > Just trying to grasp the concept.
> >
> >
> >
> > I want to search a text file where each line is a separate item to =
be
> > searched.  When text it entered by the user, I want to return all =
the
> lines
> > in which that text appears.
> >
> > For example, if the text file has:
> >
> > I like apples.
> >
> > I went to the store.
> >
> > I bought an apple.
> >
> >
> >
> > If the user searches "apple", I want it to return the first and =
third
> > sentences.
> >
> >
> >
> > Is each sentence a Token?  Is the user input going to be a =
QueryParser?
> >  How
> > should I read in the file so that each line of text is a token to =
search?
> >
> >
> >
> > Thanks in advance.
> >
> >
> >
> >
> >
> >
> >
> > Brittany Jacobs
> >
> > Java Developer
> >
> > JBManagement, Inc.
> >
> > 12 Christopher Way, Suite 103
> >
> > Eatontown, NJ 07724
> >
> > ph: 732-542-9200 ext. 229
> >
> > fax: 732-380-0678
> >
> > email:  <mailto:bjacobs@jbmanagement.com> bjacobs@jbmanagement.com
> >
> >
> >
> >
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 14:15:15 2008
Return-Path: <java-user-return-35265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33207 invoked from network); 1 Aug 2008 14:15:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 14:15:14 -0000
Received: (qmail 50587 invoked by uid 500); 1 Aug 2008 14:15:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50557 invoked by uid 500); 1 Aug 2008 14:15:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50546 invoked by uid 99); 1 Aug 2008 14:15:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:15:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:14:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOvOv-0001kL-SE
	for java-user@lucene.apache.org; Fri, 01 Aug 2008 07:14:37 -0700
Message-ID: <18775247.post@talk.nabble.com>
Date: Fri, 1 Aug 2008 07:14:37 -0700 (PDT)
From: richa <richa.sud@techblue.co.uk>
To: java-user@lucene.apache.org
Subject: Lucene search Format
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: richa.sud@techblue.co.uk
X-Virus-Checked: Checked by ClamAV on apache.org


Hi!!

I'm abst new to Lucene.
I'm trying to create a query using Lucene search to get the correct
reference for a folder.
The query is fine if it has to go to the parent folder. But if i try to
reach to the child folder, it throws an error.
For example
Query query = new Query(Constants.QUERY_LANG_LUCENE,
PATH:\"/app:company_home/app:user_homes\"");
 This gets me the reference for the parent folder.

However, i'm not able to reach to any user defined folder.  I tried various
combinations
like  PATH:\"/app:company_home/app:user_homes/app:userfolder\""
or
 PATH:\"/app:company_home/app:user_homes/cm:userfolder""
or
 PATH:\"/app:company_home/app:user_homes:/cm:userfolder""

I'm sorry if i'm not able to make any sense.

Any help is really appreciated.

Thanks,
Richa 
-- 
View this message in context: http://www.nabble.com/Lucene-search-Format-tp18775247p18775247.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 14:16:28 2008
Return-Path: <java-user-return-35266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33705 invoked from network); 1 Aug 2008 14:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 14:16:27 -0000
Received: (qmail 53278 invoked by uid 500); 1 Aug 2008 14:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53251 invoked by uid 500); 1 Aug 2008 14:16:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53240 invoked by uid 99); 1 Aug 2008 14:16:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:16:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:15:25 +0000
Received: by nf-out-0910.google.com with SMTP id g16so375446nfd.15
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 07:15:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XSGpkumbmHUr/aNyAjS54mNZDx1iritqbAbrWeAJJeY=;
        b=hlp762/B4awq04JHTWcXzhJ8Xgawu/A4Dx5CO5fXLpYwtmp5Ay+CmmgKkHvMzt5M4a
         o25Wmnku/gojedc+nk8BHzilkSRX+JJammriWqhcvMl18VfEvLZuOsAQJzvGIMyAitMd
         eI5xal2kERC3kVxi/58L2WPh2BjzsCY1EMCcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=budHt6nmYmgFBQvwAUz+RWttATLwPp4llgBojRd5RdiOHjaj+zHcqAg2eg06602IZ/
         K0NLTeRIWiFuqLT8Vmy4qMGTPbsKl3Kt+upF4cYHozGLhqIJVvXc/84OorBV9ZOj2yYn
         LwfeH4Y5Di3HviTZohoYMeznZ2AD36h4xJMuA=
Received: by 10.210.110.5 with SMTP id i5mr3929131ebc.166.1217600133470;
        Fri, 01 Aug 2008 07:15:33 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Fri, 1 Aug 2008 07:15:33 -0700 (PDT)
Message-ID: <59a485a30808010715i31b588dfhbfdbc0aa25f67430@mail.gmail.com>
Date: Fri, 1 Aug 2008 19:45:33 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getting started
In-Reply-To: <8c4e68610808010713p51dc1f4ei34957ef339ea28fb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16853_1346823.1217600133442"
References: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
	 <454006f50808010651m68360f04u868630158446a696@mail.gmail.com>
	 <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
	 <8c4e68610808010713p51dc1f4ei34957ef339ea28fb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16853_1346823.1217600133442
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzLCBJYW4gIQoKT24gRnJpLCBBdWcgMSwgMjAwOCBhdCA3OjQzIFBNLCBJYW4gTGVhIDxp
YW4ubGVhQGdtYWlsLmNvbT4gd3JvdGU6Cgo+IFllcywgdGhhdCBpcyBjb3JyZWN0Lgo+Cj4KPiAt
LQo+IElhbi4KPgo+Cj4gT24gRnJpLCBBdWcgMSwgMjAwOCBhdCAyOjU5IFBNLCDgsqjgsr7gspfg
s4fgsrbgs40g4LK44LOB4LKs4LON4LKw4LK54LON4LKu4LKj4LON4LKvIChOYWdlc2ggUykKPiA8
bmFnZXNoYmxvcmVAZ21haWwuY29tPiB3cm90ZToKPiA+IFdoeSBzaG91bGQgZWFjaCBsaW5lIGJl
IGEgRG9jdW1lbnQgPyBJZiB0aGVyZSBpcyBhIHNpbmdsZSBkb2N1bWVudCBoYXZpbmcKPiA+IGVh
Y2ggbGluZSBhcyBhIEZpZWxkLCB0aGVuIHRoZSBzZWFyY2ggd291bGQgcmVzdWx0IGluIGEgc2lu
Z2xlIERvY3VtZW50Cj4gYXMgYQo+ID4gJ2hpdCcgbm90IHRoZSBpbmRpdmlkdWFsIGxpbmVzIG1h
dGNoaW5nIGl0LiBJcyB0aGlzIHJpZ2h0ID8KPiA+Cj4gPiBOYWdlc2gKPiA+Cj4gPiBPbiBGcmks
IEF1ZyAxLCAyMDA4IGF0IDc6MjEgUE0sIDxyb3ktbHVjZW5lLXVzZXJAeGVtYXBzLmNvbT4gd3Jv
dGU6Cj4gPgo+ID4+IEhlbGxvIEJyaXR0YW55LAo+ID4+Cj4gPj4gSSB0aGluayB0aGUgZWFzaWVz
dCB0aGluZyBmb3IgeW91IHRvIGRvIGlzIG1ha2UgZWFjaCBsaW5lIGEgRG9jdW1lbnQuCj4gIFlv
dQo+ID4+IG1pZ2h0IHdhbnQgYSBGaWxlTmFtZSBhbmQgTGluZU51bWJlciBmaWVsZCBvbiB0b3Ag
b2YgYSAiVGV4dCIgZmllbGQsCj4gdGhpcwo+ID4+IHdheSBpZiB5b3UgbmVlZCB0byBnYXRoZXIg
YWxsIHRoZSBsaW5lcyBvZiB5b3VyIEZpbGUgYmFjayB0b2dldGhlciBhZ2Fpbgo+ID4+IHlvdQo+
ID4+IGNhbiBkbyBhIHNlYXJjaCBvbiB0aGUgRmlsZU5hbWUuCj4gPj4KPiA+PiBTbyBpbiB5b3Vy
IGNhc2U6Cj4gPj4KPiA+PiBEb2N1bWVudCAxCj4gPj4gIEZpbGVOYW1lOiBbdGhlIGZpbGVdCj4g
Pj4gIExpbmVOdW1iZXI6IDEKPiA+PiAgVGV4dDogSSBsaWtlIGFwcGxlcwo+ID4+IERvY3VtZW50
IDIKPiA+PiAgLi4uZXRjCj4gPj4KPiA+PiBSZWdhcmRzLAo+ID4+IFJveQo+ID4+Cj4gPj4gT24g
RnJpLCBBdWcgMSwgMjAwOCBhdCA5OjI4IEFNLCBCcml0dGFueSBKYWNvYnMgPAo+IGJqYWNvYnNA
amJtYW5hZ2VtZW50LmNvbQo+ID4+ID53cm90ZToKPiA+Pgo+ID4+ID4gSnVzdCB0cnlpbmcgdG8g
Z3Jhc3AgdGhlIGNvbmNlcHQuCj4gPj4gPgo+ID4+ID4KPiA+PiA+Cj4gPj4gPiBJIHdhbnQgdG8g
c2VhcmNoIGEgdGV4dCBmaWxlIHdoZXJlIGVhY2ggbGluZSBpcyBhIHNlcGFyYXRlIGl0ZW0gdG8g
YmUKPiA+PiA+IHNlYXJjaGVkLiAgV2hlbiB0ZXh0IGl0IGVudGVyZWQgYnkgdGhlIHVzZXIsIEkg
d2FudCB0byByZXR1cm4gYWxsIHRoZQo+ID4+IGxpbmVzCj4gPj4gPiBpbiB3aGljaCB0aGF0IHRl
eHQgYXBwZWFycy4KPiA+PiA+Cj4gPj4gPiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRleHQgZmlsZSBo
YXM6Cj4gPj4gPgo+ID4+ID4gSSBsaWtlIGFwcGxlcy4KPiA+PiA+Cj4gPj4gPiBJIHdlbnQgdG8g
dGhlIHN0b3JlLgo+ID4+ID4KPiA+PiA+IEkgYm91Z2h0IGFuIGFwcGxlLgo+ID4+ID4KPiA+PiA+
Cj4gPj4gPgo+ID4+ID4gSWYgdGhlIHVzZXIgc2VhcmNoZXMgImFwcGxlIiwgSSB3YW50IGl0IHRv
IHJldHVybiB0aGUgZmlyc3QgYW5kIHRoaXJkCj4gPj4gPiBzZW50ZW5jZXMuCj4gPj4gPgo+ID4+
ID4KPiA+PiA+Cj4gPj4gPiBJcyBlYWNoIHNlbnRlbmNlIGEgVG9rZW4/ICBJcyB0aGUgdXNlciBp
bnB1dCBnb2luZyB0byBiZSBhCj4gUXVlcnlQYXJzZXI/Cj4gPj4gPiAgSG93Cj4gPj4gPiBzaG91
bGQgSSByZWFkIGluIHRoZSBmaWxlIHNvIHRoYXQgZWFjaCBsaW5lIG9mIHRleHQgaXMgYSB0b2tl
biB0bwo+IHNlYXJjaD8KPiA+PiA+Cj4gPj4gPgo+ID4+ID4KPiA+PiA+IFRoYW5rcyBpbiBhZHZh
bmNlLgo+ID4+ID4KPiA+PiA+Cj4gPj4gPgo+ID4+ID4KPiA+PiA+Cj4gPj4gPgo+ID4+ID4KPiA+
PiA+IEJyaXR0YW55IEphY29icwo+ID4+ID4KPiA+PiA+IEphdmEgRGV2ZWxvcGVyCj4gPj4gPgo+
ID4+ID4gSkJNYW5hZ2VtZW50LCBJbmMuCj4gPj4gPgo+ID4+ID4gMTIgQ2hyaXN0b3BoZXIgV2F5
LCBTdWl0ZSAxMDMKPiA+PiA+Cj4gPj4gPiBFYXRvbnRvd24sIE5KIDA3NzI0Cj4gPj4gPgo+ID4+
ID4gcGg6IDczMi01NDItOTIwMCBleHQuIDIyOQo+ID4+ID4KPiA+PiA+IGZheDogNzMyLTM4MC0w
Njc4Cj4gPj4gPgo+ID4+ID4gZW1haWw6ICA8bWFpbHRvOmJqYWNvYnNAamJtYW5hZ2VtZW50LmNv
bT4gYmphY29ic0BqYm1hbmFnZW1lbnQuY29tCj4gPj4gPgo+ID4+ID4KPiA+PiA+Cj4gPj4gPgo+
ID4+Cj4gPgo+Cg==
------=_Part_16853_1346823.1217600133442--

From java-user-return-35267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 14:17:55 2008
Return-Path: <java-user-return-35267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34551 invoked from network); 1 Aug 2008 14:17:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 14:17:55 -0000
Received: (qmail 57949 invoked by uid 500); 1 Aug 2008 14:17:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57914 invoked by uid 500); 1 Aug 2008 14:17:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57902 invoked by uid 99); 1 Aug 2008 14:17:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:17:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 66.249.90.176 as permitted sender)
Received: from [66.249.90.176] (HELO ik-out-1112.google.com) (66.249.90.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:16:53 +0000
Received: by ik-out-1112.google.com with SMTP id c28so1104214ika.5
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 07:17:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=l7JlEjT+k8zZVZi1WUgflaeNUwdBVs2+EtVg+We6l4c=;
        b=j02zOzEaD+APzxJI28Cz+YT6ckxU6pqOLmgQ3brrCJx0O8WXnfXO88H+9EULbLG6R4
         ckarVL6aAemz98z71iLC2IZN0AfvzJ1aSjdxDqwXAICinA4c0mzZOqIG/0BDyIoIEKnW
         msE9L3Nz+k819Ph/qLPvUkh5KpWFmerKDbpjA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jtKVb8ucfJPkXQOUdk4a4JLLjhOTN3V7GnJmdzTyEHLrDFU+ZX8y4FG1Er+cm/6EG/
         ggMHuIXWDAVyfsLYJsvpW9ejGSGX/Eo7VHLUexDFAfZzIDzeNaju+bT9+e6jcbTlS7uw
         th9fMVAwlnjRXEelBCfjOLjEBv+8HMQeK0pOs=
Received: by 10.210.73.12 with SMTP id v12mr12729501eba.101.1217600238051;
        Fri, 01 Aug 2008 07:17:18 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Fri, 1 Aug 2008 07:17:17 -0700 (PDT)
Message-ID: <59a485a30808010717u7b44cee2mf5a59b109ae6415c@mail.gmail.com>
Date: Fri, 1 Aug 2008 19:47:17 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getting started
In-Reply-To: <59a485a30808010715i31b588dfhbfdbc0aa25f67430@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16880_2628548.1217600238040"
References: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
	 <454006f50808010651m68360f04u868630158446a696@mail.gmail.com>
	 <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
	 <8c4e68610808010713p51dc1f4ei34957ef339ea28fb@mail.gmail.com>
	 <59a485a30808010715i31b588dfhbfdbc0aa25f67430@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16880_2628548.1217600238040
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgQnJpdHRhbnksCiJXaGF0IGlzIHRoZSB3ZWIgYWRkcmVzcyB5b3UgYXJlIHNlZWluZyB0aGlz
IG1lc3NhZ2Ugb24/IgpNZSA/IEkgYW0gbm90IHN1cmUsIEkgZm9sbG93ZWQgdGhlIHF1ZXN0aW9u
LgoKTmFnZXNoCgpPbiBGcmksIEF1ZyAxLCAyMDA4IGF0IDc6NDUgUE0sIOCyqOCyvuCyl+Czh+Cy
tuCzjSDgsrjgs4Hgsqzgs43gsrDgsrngs43gsq7gsqPgs43gsq8gKE5hZ2VzaCBTKSA8Cm5hZ2Vz
aGJsb3JlQGdtYWlsLmNvbT4gd3JvdGU6Cgo+IFRoYW5rcywgSWFuICEKPgo+Cj4gT24gRnJpLCBB
dWcgMSwgMjAwOCBhdCA3OjQzIFBNLCBJYW4gTGVhIDxpYW4ubGVhQGdtYWlsLmNvbT4gd3JvdGU6
Cj4KPj4gWWVzLCB0aGF0IGlzIGNvcnJlY3QuCj4+Cj4+Cj4+IC0tCj4+IElhbi4KPj4KPj4KPj4g
T24gRnJpLCBBdWcgMSwgMjAwOCBhdCAyOjU5IFBNLCDgsqjgsr7gspfgs4fgsrbgs40g4LK44LOB
4LKs4LON4LKw4LK54LON4LKu4LKj4LON4LKvIChOYWdlc2ggUykKPj4gPG5hZ2VzaGJsb3JlQGdt
YWlsLmNvbT4gd3JvdGU6Cj4+ID4gV2h5IHNob3VsZCBlYWNoIGxpbmUgYmUgYSBEb2N1bWVudCA/
IElmIHRoZXJlIGlzIGEgc2luZ2xlIGRvY3VtZW50Cj4+IGhhdmluZwo+PiA+IGVhY2ggbGluZSBh
cyBhIEZpZWxkLCB0aGVuIHRoZSBzZWFyY2ggd291bGQgcmVzdWx0IGluIGEgc2luZ2xlIERvY3Vt
ZW50Cj4+IGFzIGEKPj4gPiAnaGl0JyBub3QgdGhlIGluZGl2aWR1YWwgbGluZXMgbWF0Y2hpbmcg
aXQuIElzIHRoaXMgcmlnaHQgPwo+PiA+Cj4+ID4gTmFnZXNoCj4+ID4KPj4gPiBPbiBGcmksIEF1
ZyAxLCAyMDA4IGF0IDc6MjEgUE0sIDxyb3ktbHVjZW5lLXVzZXJAeGVtYXBzLmNvbT4gd3JvdGU6
Cj4+ID4KPj4gPj4gSGVsbG8gQnJpdHRhbnksCj4+ID4+Cj4+ID4+IEkgdGhpbmsgdGhlIGVhc2ll
c3QgdGhpbmcgZm9yIHlvdSB0byBkbyBpcyBtYWtlIGVhY2ggbGluZSBhIERvY3VtZW50Lgo+PiAg
WW91Cj4+ID4+IG1pZ2h0IHdhbnQgYSBGaWxlTmFtZSBhbmQgTGluZU51bWJlciBmaWVsZCBvbiB0
b3Agb2YgYSAiVGV4dCIgZmllbGQsCj4+IHRoaXMKPj4gPj4gd2F5IGlmIHlvdSBuZWVkIHRvIGdh
dGhlciBhbGwgdGhlIGxpbmVzIG9mIHlvdXIgRmlsZSBiYWNrIHRvZ2V0aGVyCj4+IGFnYWluCj4+
ID4+IHlvdQo+PiA+PiBjYW4gZG8gYSBzZWFyY2ggb24gdGhlIEZpbGVOYW1lLgo+PiA+Pgo+PiA+
PiBTbyBpbiB5b3VyIGNhc2U6Cj4+ID4+Cj4+ID4+IERvY3VtZW50IDEKPj4gPj4gIEZpbGVOYW1l
OiBbdGhlIGZpbGVdCj4+ID4+ICBMaW5lTnVtYmVyOiAxCj4+ID4+ICBUZXh0OiBJIGxpa2UgYXBw
bGVzCj4+ID4+IERvY3VtZW50IDIKPj4gPj4gIC4uLmV0Ywo+PiA+Pgo+PiA+PiBSZWdhcmRzLAo+
PiA+PiBSb3kKPj4gPj4KPj4gPj4gT24gRnJpLCBBdWcgMSwgMjAwOCBhdCA5OjI4IEFNLCBCcml0
dGFueSBKYWNvYnMgPAo+PiBiamFjb2JzQGpibWFuYWdlbWVudC5jb20KPj4gPj4gPndyb3RlOgo+
PiA+Pgo+PiA+PiA+IEp1c3QgdHJ5aW5nIHRvIGdyYXNwIHRoZSBjb25jZXB0Lgo+PiA+PiA+Cj4+
ID4+ID4KPj4gPj4gPgo+PiA+PiA+IEkgd2FudCB0byBzZWFyY2ggYSB0ZXh0IGZpbGUgd2hlcmUg
ZWFjaCBsaW5lIGlzIGEgc2VwYXJhdGUgaXRlbSB0byBiZQo+PiA+PiA+IHNlYXJjaGVkLiAgV2hl
biB0ZXh0IGl0IGVudGVyZWQgYnkgdGhlIHVzZXIsIEkgd2FudCB0byByZXR1cm4gYWxsIHRoZQo+
PiA+PiBsaW5lcwo+PiA+PiA+IGluIHdoaWNoIHRoYXQgdGV4dCBhcHBlYXJzLgo+PiA+PiA+Cj4+
ID4+ID4gRm9yIGV4YW1wbGUsIGlmIHRoZSB0ZXh0IGZpbGUgaGFzOgo+PiA+PiA+Cj4+ID4+ID4g
SSBsaWtlIGFwcGxlcy4KPj4gPj4gPgo+PiA+PiA+IEkgd2VudCB0byB0aGUgc3RvcmUuCj4+ID4+
ID4KPj4gPj4gPiBJIGJvdWdodCBhbiBhcHBsZS4KPj4gPj4gPgo+PiA+PiA+Cj4+ID4+ID4KPj4g
Pj4gPiBJZiB0aGUgdXNlciBzZWFyY2hlcyAiYXBwbGUiLCBJIHdhbnQgaXQgdG8gcmV0dXJuIHRo
ZSBmaXJzdCBhbmQgdGhpcmQKPj4gPj4gPiBzZW50ZW5jZXMuCj4+ID4+ID4KPj4gPj4gPgo+PiA+
PiA+Cj4+ID4+ID4gSXMgZWFjaCBzZW50ZW5jZSBhIFRva2VuPyAgSXMgdGhlIHVzZXIgaW5wdXQg
Z29pbmcgdG8gYmUgYQo+PiBRdWVyeVBhcnNlcj8KPj4gPj4gPiAgSG93Cj4+ID4+ID4gc2hvdWxk
IEkgcmVhZCBpbiB0aGUgZmlsZSBzbyB0aGF0IGVhY2ggbGluZSBvZiB0ZXh0IGlzIGEgdG9rZW4g
dG8KPj4gc2VhcmNoPwo+PiA+PiA+Cj4+ID4+ID4KPj4gPj4gPgo+PiA+PiA+IFRoYW5rcyBpbiBh
ZHZhbmNlLgo+PiA+PiA+Cj4+ID4+ID4KPj4gPj4gPgo+PiA+PiA+Cj4+ID4+ID4KPj4gPj4gPgo+
PiA+PiA+Cj4+ID4+ID4gQnJpdHRhbnkgSmFjb2JzCj4+ID4+ID4KPj4gPj4gPiBKYXZhIERldmVs
b3Blcgo+PiA+PiA+Cj4+ID4+ID4gSkJNYW5hZ2VtZW50LCBJbmMuCj4+ID4+ID4KPj4gPj4gPiAx
MiBDaHJpc3RvcGhlciBXYXksIFN1aXRlIDEwMwo+PiA+PiA+Cj4+ID4+ID4gRWF0b250b3duLCBO
SiAwNzcyNAo+PiA+PiA+Cj4+ID4+ID4gcGg6IDczMi01NDItOTIwMCBleHQuIDIyOQo+PiA+PiA+
Cj4+ID4+ID4gZmF4OiA3MzItMzgwLTA2NzgKPj4gPj4gPgo+PiA+PiA+IGVtYWlsOiAgPG1haWx0
bzpiamFjb2JzQGpibWFuYWdlbWVudC5jb20+IGJqYWNvYnNAamJtYW5hZ2VtZW50LmNvbQo+PiA+
PiA+Cj4+ID4+ID4KPj4gPj4gPgo+PiA+PiA+Cj4+ID4+Cj4+ID4KPj4KPgo+Cg==
------=_Part_16880_2628548.1217600238040--

From java-user-return-35268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 14:18:35 2008
Return-Path: <java-user-return-35268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35158 invoked from network); 1 Aug 2008 14:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 14:18:35 -0000
Received: (qmail 60441 invoked by uid 500); 1 Aug 2008 14:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60392 invoked by uid 500); 1 Aug 2008 14:18:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60352 invoked by uid 99); 1 Aug 2008 14:18:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:18:26 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:17:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOvS8-0001u4-AR
	for java-user@lucene.apache.org; Fri, 01 Aug 2008 07:17:56 -0700
Message-ID: <18775319.post@talk.nabble.com>
Date: Fri, 1 Aug 2008 07:17:56 -0700 (PDT)
From: Wojtek212 <wojtekg212@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException during indexing
In-Reply-To: <18773824.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: wojtekg212@gmail.com
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com> <18769652.post@talk.nabble.com> <D7FAE9FD-190D-455F-9FB6-A55B4C8F0A8B@mikemccandless.com> <18772749.post@talk.nabble.com> <BA2E10E5-A24D-4003-9F4F-72805BB1F8B1@mikemccandless.com> <18773824.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Here is Lucene log with first exceptions that occured (FSDirectory with
NativeFSLockFactory).

IFD [Thread-79]: setInfoStream
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1a00d25
IW 4 [Thread-79]: setInfoStream:
dir=org.apache.lucene.store.FSDirectory@/tmp/content/3615.0-3618.0
autoCommit=true
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@bf033a
mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@6cf504
ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
maxFieldLength=10000 index=_1:c28 _2:c1
IW 4 [Thread-79]: optimize: index now _1:c28 _2:c1
IW 4 [Thread-79]:   flush: segment=null docStoreSegment=null
docStoreOffset=0 flushDocs=false flushDeletes=true flushDocStores=false
numDocs=0 numBufDelTerms=1
IW 4 [Thread-79]:   index before flush _1:c28 _2:c1
IW 4 [Thread-79]: flush 1 buffered deleted terms and 0 deleted docIDs on 2
segments.
IW 4 [Thread-79]: checkpoint: wrote segments file "segments_9"
IFD [Thread-79]: now checkpoint "segments_9" [2 segments ; isCommit = true]
IFD [Thread-79]: deleteCommits: now remove commit "segments_8"
IFD [Thread-79]: delete "segments_8"
IW 4 [Thread-79]: LMP: findMerges: 2 segments
IW 4 [Thread-79]: LMP:   level -1.0 to 4.1957335: 2 segments
IW 4 [Thread-79]: CMS: now merge
IW 4 [Thread-79]: CMS:   index: _1:c28 _2:c1
IW 4 [Thread-79]: CMS:   no more merges pending; now return
IW 4 [Thread-79]: add merge to pendingMerges: _1:c28 _2:c1 [optimize] [total
1 pending]
IW 4 [Thread-79]: CMS: now merge
IW 4 [Thread-79]: CMS:   index: _1:c28 _2:c1
IW 4 [Thread-79]: CMS:   consider merge _1:c28 _2:c1 into _3 [optimize]
IW 2 [Thread-80]: CMS:   merge thread: done
IW 4 [Thread-79]: CMS:     launch new thread [Thread-82]
IW 4 [Thread-79]: CMS:   no more merges pending; now return
IW 4 [Thread-82]: CMS:   merge thread: start
IW 4 [Thread-82]: now merge
  merge=_1:c28 _2:c1 into _3 [optimize]
  index=_1:c28 _2:c1
IW 4 [Thread-82]: merging _1:c28 _2:c1 into _3 [optimize]
IW 4 [Thread-82]: merge: total 28 docs
IW 4 [Thread-82]: commitMerge: _1:c28 _2:c1 into _3 [optimize]
IW 4 [Thread-82]: commitMerge _1:c28 _2:c1 into _3 [optimize]
IW 4 [Thread-82]: checkpoint: wrote segments file "segments_a"
IFD [Thread-82]: now checkpoint "segments_a" [1 segments ; isCommit = true]
IFD [Thread-82]: deleteCommits: now remove commit "segments_9"
IFD [Thread-82]: delete "segments_9"
IFD [Thread-82]: delete "_1.cfs"
IFD [Thread-82]: delete "_1_1.del"
IFD [Thread-82]: delete "_2.cfs"
IW 4 [Thread-82]: checkpoint: wrote segments file "segments_b"
IFD [Thread-82]: now checkpoint "segments_b" [1 segments ; isCommit = true]
IFD [Thread-82]: deleteCommits: now remove commit "segments_a"
IFD [Thread-82]: delete "segments_a"
IFD [Thread-82]: delete "_3.fnm"
IFD [Thread-82]: delete "_3.frq"
IFD [Thread-82]: delete "_3.prx"
IFD [Thread-82]: delete "_3.tis"
IFD [Thread-82]: delete "_3.tii"
IFD [Thread-82]: delete "_3.nrm"
IFD [Thread-82]: delete "_3.fdx"
IFD [Thread-82]: delete "_3.fdt"
IW 4 [Thread-82]: CMS:   merge thread: done
IW 4 [Thread-79]: now flush at close
IW 4 [Thread-79]:   flush: segment=null docStoreSegment=null
docStoreOffset=0 flushDocs=false flushDeletes=false flushDocStores=false
numDocs=0 numBufDelTerms=0
IW 4 [Thread-79]:   index before flush _3:c28
IW 4 [Thread-79]: CMS: now merge
IW 4 [Thread-79]: CMS:   index: _3:c28
IW 4 [Thread-79]: CMS:   no more merges pending; now return
IW 4 [Thread-79]: at close: _3:c28
IFD [Thread-79]: setInfoStream
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@dd0e8a
IW 5 [Thread-79]: setInfoStream:
dir=org.apache.lucene.store.FSDirectory@/tmp/content/3615.0-3618.0
autoCommit=true
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@e5a644
mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@106cc42
ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
maxFieldLength=10000 index=_3:c28
IW 5 [Thread-79]: now flush at close
IW 5 [Thread-79]:   flush: segment=_4 docStoreSegment=_4 docStoreOffset=0
flushDocs=true flushDeletes=false flushDocStores=true numDocs=1
numBufDelTerms=0
IW 5 [Thread-79]:   index before flush _3:c28

flush postings as segment _4 numDocs=1

closeDocStore: 2 files to flush to segment _4 numDocs=1
  oldRAMSize=81920 newFlushedSize=847 docs/MB=1,237.988 new/old=1.034%
IW 5 [Thread-79]: checkpoint: wrote segments file "segments_c"
IFD [Thread-79]: now checkpoint "segments_c" [2 segments ; isCommit = true]
IFD [Thread-79]: deleteCommits: now remove commit "segments_b"
IFD [Thread-79]: delete "segments_b"
IW 5 [Thread-79]: checkpoint: wrote segments file "segments_d"
IFD [Thread-79]: now checkpoint "segments_d" [2 segments ; isCommit = true]
IFD [Thread-79]: deleteCommits: now remove commit "segments_c"
IFD [Thread-79]: delete "segments_c"
IFD [Thread-79]: delete "_4.fnm"
IFD [Thread-79]: delete "_4.frq"
IFD [Thread-79]: delete "_4.prx"
IFD [Thread-79]: delete "_4.tis"
IFD [Thread-79]: delete "_4.tii"
IFD [Thread-79]: delete "_4.nrm"
IFD [Thread-79]: delete "_4.fdx"
IFD [Thread-79]: delete "_4.fdt"
IW 5 [Thread-79]: LMP: findMerges: 2 segments
IW 5 [Thread-79]: LMP:   level -1.0 to 4.197694: 2 segments
IW 5 [Thread-79]: CMS: now merge
IW 5 [Thread-79]: CMS:   index: _3:c28 _4:c1
IW 5 [Thread-79]: CMS:   no more merges pending; now return
IW 5 [Thread-79]: CMS: now merge
IW 5 [Thread-79]: CMS:   index: _3:c28 _4:c1
IW 5 [Thread-79]: CMS:   no more merges pending; now return
IW 5 [Thread-79]: at close: _3:c28 _4:c1
IFD [Thread-85]: setInfoStream
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1498cd
IW 6 [Thread-85]: setInfoStream:
dir=org.apache.lucene.store.FSDirectory@/tmp/content/3615.0-3618.0
autoCommit=true
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@3be7e8
mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@f64915
ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
maxFieldLength=10000 index=_3:c28 _4:c1
IW 6 [Thread-85]: optimize: index now _3:c28 _4:c1
IW 6 [Thread-85]:   flush: segment=null docStoreSegment=null
docStoreOffset=0 flushDocs=false flushDeletes=true flushDocStores=false
numDocs=0 numBufDelTerms=1
IW 6 [Thread-85]:   index before flush _3:c28 _4:c1
IW 6 [Thread-85]: flush 1 buffered deleted terms and 0 deleted docIDs on 2
segments.
IW 6 [Thread-85]: checkpoint: wrote segments file "segments_e"
IFD [Thread-85]: now checkpoint "segments_e" [2 segments ; isCommit = true]
IFD [Thread-85]: deleteCommits: now remove commit "segments_d"
IFD [Thread-85]: delete "segments_d"
IW 6 [Thread-85]: LMP: findMerges: 2 segments
IW 6 [Thread-85]: LMP:   level -1.0 to 4.1980243: 2 segments
IW 6 [Thread-85]: CMS: now merge
IW 6 [Thread-85]: CMS:   index: _3:c28 _4:c1
IW 6 [Thread-85]: CMS:   no more merges pending; now return
IW 6 [Thread-85]: add merge to pendingMerges: _3:c28 _4:c1 [optimize] [total
1 pending]
IW 6 [Thread-85]: CMS: now merge
IW 6 [Thread-85]: CMS:   index: _3:c28 _4:c1
IW 6 [Thread-85]: CMS:   consider merge _3:c28 _4:c1 into _5 [optimize]
IW 6 [Thread-85]: CMS:     launch new thread [Thread-89]
IW 6 [Thread-85]: CMS:   no more merges pending; now return
IW 6 [Thread-89]: CMS:   merge thread: start
IW 6 [Thread-89]: now merge
  merge=_3:c28 _4:c1 into _5 [optimize]
  index=_3:c28 _4:c1
IW 6 [Thread-89]: merging _3:c28 _4:c1 into _5 [optimize]
IW 6 [Thread-89]: merge: total 28 docs
IW 42 [Thread-86]: optimize: index now _3:c28 _4:c1
IW 42 [Thread-86]:   flush: segment=null docStoreSegment=null
docStoreOffset=0 flushDocs=false flushDeletes=true flushDocStores=false
numDocs=0 numBufDelTerms=1
IW 42 [Thread-86]:   index before flush _3:c28 _4:c1
IW 42 [Thread-86]: flush 1 buffered deleted terms and 0 deleted docIDs on 2
segments.
IW 42 [Thread-86]: checkpoint: wrote segments file "segments_f"
IFD [Thread-86]: now checkpoint "segments_f" [2 segments ; isCommit = true]
IFD [Thread-86]: deleteCommits: now remove commit "segments_e"
IFD [Thread-86]: delete "segments_e"
IFD [Thread-86]: delete "_3_1.del"
IW 42 [Thread-86]: LMP: findMerges: 2 segments
IW 42 [Thread-86]: LMP:   level -1.0 to 4.1980243: 2 segments
IW 42 [Thread-86]: CMS: now merge
IW 42 [Thread-86]: CMS:   index: _3:c28 _4:c1
IW 42 [Thread-86]: CMS:   no more merges pending; now return
IW 42 [Thread-86]: add merge to pendingMerges: _3:c28 _4:c1 [optimize]
[total 1 pending]
IW 42 [Thread-86]: CMS: now merge
IW 42 [Thread-86]: CMS:   index: _3:c28 _4:c1
IW 42 [Thread-86]: CMS:   consider merge _3:c28 _4:c1 into _5 [optimize]
IW 6 [Thread-89]: commitMerge: _3:c28 _4:c1 into _5 [optimize]
IW 6 [Thread-89]: commitMerge _3:c28 _4:c1 into _5 [optimize]
IW 6 [Thread-89]: hit exception creating merged deletes file
IFD [Thread-89]: refresh [prefix=_5]: removing newly created unreferenced
file "_5.nrm"
IFD [Thread-89]: delete "_5.nrm"
IW 6 [Thread-89]: hit exception during merge
Exception in thread "Thread-89"
org.apache.lucene.index.MergePolicy$MergeException:
java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_3_1.del (No such
file or directory)
	at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:271)
Caused by: java.io.FileNotFoundException:
/tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
	at org.apache.lucene.util.BitVector.<init>(BitVector.java:180)
	at org.apache.lucene.index.IndexWriter.commitMerge(IndexWriter.java:2827)
	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3295)
	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
	at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)
IW 42 [Thread-86]: CMS:     launch new thread [Thread-93]
IW 6 [Thread-85]: now flush at close
IW 6 [Thread-85]:   flush: segment=null docStoreSegment=null
docStoreOffset=0 flushDocs=false flushDeletes=false flushDocStores=false
numDocs=0 numBufDelTerms=0
IW 6 [Thread-85]:   index before flush _3:c28 _4:c1
IW 6 [Thread-85]: CMS: now merge
IW 6 [Thread-85]: CMS:   index: _3:c28 _4:c1
IW 6 [Thread-85]: CMS:   no more merges pending; now return
IW 6 [Thread-85]: close: wrote segments file "segments_f"
IFD [Thread-85]: now checkpoint "segments_f" [2 segments ; isCommit = true]
IFD [Thread-85]: deleteCommits: now remove commit "segments_e"
IFD [Thread-85]: delete "segments_e"
IW 6 [Thread-85]: at close: _3:c28 _4:c1
IFD [Thread-81]: setInfoStream
deletionPolicy=org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1ddcef0
IW 7 [Thread-81]: setInfoStream:
dir=org.apache.lucene.store.FSDirectory@/tmp/content/3615.0-3618.0
autoCommit=true
mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@13d2d11
mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@159e0c2
ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
maxFieldLength=10000 index=_3:c28 _4:c1
IW 7 [Thread-81]: optimize: index now _3:c28 _4:c1
IW 7 [Thread-81]:   flush: segment=null docStoreSegment=null
docStoreOffset=0 flushDocs=false flushDeletes=true flushDocStores=false
numDocs=0 numBufDelTerms=1
IW 7 [Thread-81]:   index before flush _3:c28 _4:c1
IW 7 [Thread-81]: flush 1 buffered deleted terms and 0 deleted docIDs on 2
segments.
IW 7 [Thread-81]: hit exception flushing segment null
IFD [Thread-81]: now checkpoint "segments_f" [2 segments ; isCommit = false]
IW 7 [Thread-81]: now flush at close
IW 7 [Thread-81]:   flush: segment=null docStoreSegment=null
docStoreOffset=0 flushDocs=false flushDeletes=true flushDocStores=false
numDocs=0 numBufDelTerms=1
IW 7 [Thread-81]:   index before flush _3:c28 _4:c1
IW 7 [Thread-81]: flush 1 buffered deleted terms and 0 deleted docIDs on 2
segments.
IW 7 [Thread-81]: hit exception flushing segment null
IFD [Thread-81]: now checkpoint "segments_f" [2 segments ; isCommit = false]
IW 7 [Thread-81]: hit exception while closing
Exception in thread "Thread-85" java.lang.RuntimeException:
com.test.search.IndexingException: java.io.IOException: background merge hit
exception: _3:c28 _4:c1 into _5 [optimize]
	at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:245)
	at java.lang.Thread.run(Thread.java:595)
Caused by: com.test.search.IndexingException: java.io.IOException:
background merge hit exception: _3:c28 _4:c1 into _5 [optimize]
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:332)
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:216)
	at com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java:279)
	at com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java:340)
	at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:239)
	... 1 more
Caused by: java.io.IOException: background merge hit exception: _3:c28 _4:c1
into _5 [optimize]
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1787)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1727)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1707)
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:318)
	... 5 more
Caused by: java.io.FileNotFoundException:
/tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
	at org.apache.lucene.util.BitVector.<init>(BitVector.java:180)
	at org.apache.lucene.index.IndexWriter.commitMerge(IndexWriter.java:2827)
	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3295)
	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
	at
org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:240)
IW 42 [Thread-86]: CMS:   no more merges pending; now return
Exception in thread "Thread-81" java.lang.RuntimeException:
com.test.search.IndexingException: java.io.FileNotFoundException:
/tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
	at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:245)
	at java.lang.Thread.run(Thread.java:595)
Caused by: com.test.search.IndexingException: java.io.FileNotFoundException:
/tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:332)
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:216)
	at com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java:279)
	at com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java:340)
	at
com.test.vcssearch.DefaultServiceIndexer$2.run(DefaultServiceIndexer.java:239)
	... 1 more
Caused by: java.io.FileNotFoundException:
/tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:506)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:536)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
	at org.apache.lucene.util.BitVector.<init>(BitVector.java:180)
	at
org.apache.lucene.index.SegmentReader.loadDeletedDocs(SegmentReader.java:352)
	at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:319)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:205)
	at org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java:3441)
	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2638)
	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2523)
	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2509)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1744)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1727)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1707)
	at
com.test.search.impl.lucene.IndexManager.removeDocuments(IndexManager.java:318)
	... 5 more

-- 
View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18775319.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 14:29:58 2008
Return-Path: <java-user-return-35269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43739 invoked from network); 1 Aug 2008 14:29:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 14:29:58 -0000
Received: (qmail 80398 invoked by uid 500); 1 Aug 2008 14:29:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80369 invoked by uid 500); 1 Aug 2008 14:29:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80358 invoked by uid 99); 1 Aug 2008 14:29:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 07:29:52 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:28:55 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1085046rvb.5
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 07:29:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=tFoOqejLqmX108fLSo+kB+v9brTg9KSDtnJ0q+USatA=;
        b=djSyJx0pKKn8EPw8cmhV4vqHTbWxhMUgK3p13eA1KO+YfAGxMec3qXlWy642J/EAqO
         XPZHfnggkPDwVq8HG09h0JksMFolDEGyyRAgZr+eVUFcR6su8ghUUDcmI3kwaAyfMhHd
         ZRXiQICE4i6GqJD4fpdxvbNc/8yeu8DrVC6F0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=XyGBMdpVQvSpMd9E76b9jAeNBGkAMRdB0jkyGLCS6Pk4IpjAlJS2Z22ywFMzsLct3/
         uV7xHDmzeYK4mziMKFhztToYYx+SfgGH1rabXTY2gcGVOI154iXfZyIygWNc8D5XmeR9
         teDXtv5FwI8/YT6Hdngai9YSHftCELX4GXNZ8=
Received: by 10.140.133.10 with SMTP id g10mr5970509rvd.170.1217600961220;
        Fri, 01 Aug 2008 07:29:21 -0700 (PDT)
Received: by 10.140.158.5 with HTTP; Fri, 1 Aug 2008 07:29:21 -0700 (PDT)
Message-ID: <8c4e68610808010729i8e4496i7a89b4a2703b6d0f@mail.gmail.com>
Date: Fri, 1 Aug 2008 15:29:21 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search Format
In-Reply-To: <18775247.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18775247.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

How are you analyzing the PATH, at indexing and search time?  They
need to be the same.
You've got plenty of quotes, some escaped, and other delimiters in there.

It should probably be stored and searched untokenized, without the quotes.


--
Ian.


On Fri, Aug 1, 2008 at 3:14 PM, richa <richa.sud@techblue.co.uk> wrote:
>
> Hi!!
>
> I'm abst new to Lucene.
> I'm trying to create a query using Lucene search to get the correct
> reference for a folder.
> The query is fine if it has to go to the parent folder. But if i try to
> reach to the child folder, it throws an error.
> For example
> Query query = new Query(Constants.QUERY_LANG_LUCENE,
> PATH:\"/app:company_home/app:user_homes\"");
>  This gets me the reference for the parent folder.
>
> However, i'm not able to reach to any user defined folder.  I tried various
> combinations
> like  PATH:\"/app:company_home/app:user_homes/app:userfolder\""
> or
>  PATH:\"/app:company_home/app:user_homes/cm:userfolder""
> or
>  PATH:\"/app:company_home/app:user_homes:/cm:userfolder""
>
> I'm sorry if i'm not able to make any sense.
>
> Any help is really appreciated.
>
> Thanks,
> Richa
> --
> View this message in context: http://www.nabble.com/Lucene-search-Format-tp18775247p18775247.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 16:13:15 2008
Return-Path: <java-user-return-35270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16923 invoked from network); 1 Aug 2008 16:13:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 16:13:15 -0000
Received: (qmail 5693 invoked by uid 500); 1 Aug 2008 16:13:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5664 invoked by uid 500); 1 Aug 2008 16:13:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5653 invoked by uid 99); 1 Aug 2008 16:13:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 09:13:07 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 16:12:09 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1023958wra.21
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 09:12:33 -0700 (PDT)
Received: by 10.90.31.8 with SMTP id e8mr6096299age.1.1217607153150;
        Fri, 01 Aug 2008 09:12:33 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b45sm1719937hsa.6.2008.08.01.09.12.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 01 Aug 2008 09:12:32 -0700 (PDT)
Message-Id: <0BEB3678-FE29-4BDA-9E3D-A07C126AAB03@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18775319.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: FileNotFoundException during indexing
Date: Fri, 1 Aug 2008 12:12:31 -0400
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com> <18769652.post@talk.nabble.com> <D7FAE9FD-190D-455F-9FB6-A55B4C8F0A8B@mikemccandless.com> <18772749.post@talk.nabble.com> <BA2E10E5-A24D-4003-9F4F-72805BB1F8B1@mikemccandless.com> <18773824.post@talk.nabble.com> <18775319.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


 From this log I can see you do in fact have two IndexWriters open at  
the same time (see how IW 6 and IW 42 have intermingled log lines  
right before the exception).

Are you sure you're not still unlocking the index?  Without unlocking  
the index, and if you're using either Simple or NativeFSLockFactory  
then the 2nd IndexWriter should have hit LockObtainFailedException.

Are you certain only one instance of your LuceneIndexManager class  
exists at once?

Mike

On Aug 1, 2008, at 10:17 AM, Wojtek212 wrote:

>
> Here is Lucene log with first exceptions that occured (FSDirectory  
> with
> NativeFSLockFactory).
>
> IFD [Thread-79]: setInfoStream
> deletionPolicy 
> =org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1a00d25
> IW 4 [Thread-79]: setInfoStream:
> dir=org.apache.lucene.store.FSDirectory@/tmp/content/3615.0-3618.0
> autoCommit=true
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@bf033a
> mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@6cf504
> ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
> maxFieldLength=10000 index=_1:c28 _2:c1
> IW 4 [Thread-79]: optimize: index now _1:c28 _2:c1
> IW 4 [Thread-79]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0 flushDocs=false flushDeletes=true  
> flushDocStores=false
> numDocs=0 numBufDelTerms=1
> IW 4 [Thread-79]:   index before flush _1:c28 _2:c1
> IW 4 [Thread-79]: flush 1 buffered deleted terms and 0 deleted  
> docIDs on 2
> segments.
> IW 4 [Thread-79]: checkpoint: wrote segments file "segments_9"
> IFD [Thread-79]: now checkpoint "segments_9" [2 segments ; isCommit  
> = true]
> IFD [Thread-79]: deleteCommits: now remove commit "segments_8"
> IFD [Thread-79]: delete "segments_8"
> IW 4 [Thread-79]: LMP: findMerges: 2 segments
> IW 4 [Thread-79]: LMP:   level -1.0 to 4.1957335: 2 segments
> IW 4 [Thread-79]: CMS: now merge
> IW 4 [Thread-79]: CMS:   index: _1:c28 _2:c1
> IW 4 [Thread-79]: CMS:   no more merges pending; now return
> IW 4 [Thread-79]: add merge to pendingMerges: _1:c28 _2:c1  
> [optimize] [total
> 1 pending]
> IW 4 [Thread-79]: CMS: now merge
> IW 4 [Thread-79]: CMS:   index: _1:c28 _2:c1
> IW 4 [Thread-79]: CMS:   consider merge _1:c28 _2:c1 into _3  
> [optimize]
> IW 2 [Thread-80]: CMS:   merge thread: done
> IW 4 [Thread-79]: CMS:     launch new thread [Thread-82]
> IW 4 [Thread-79]: CMS:   no more merges pending; now return
> IW 4 [Thread-82]: CMS:   merge thread: start
> IW 4 [Thread-82]: now merge
>  merge=_1:c28 _2:c1 into _3 [optimize]
>  index=_1:c28 _2:c1
> IW 4 [Thread-82]: merging _1:c28 _2:c1 into _3 [optimize]
> IW 4 [Thread-82]: merge: total 28 docs
> IW 4 [Thread-82]: commitMerge: _1:c28 _2:c1 into _3 [optimize]
> IW 4 [Thread-82]: commitMerge _1:c28 _2:c1 into _3 [optimize]
> IW 4 [Thread-82]: checkpoint: wrote segments file "segments_a"
> IFD [Thread-82]: now checkpoint "segments_a" [1 segments ; isCommit  
> = true]
> IFD [Thread-82]: deleteCommits: now remove commit "segments_9"
> IFD [Thread-82]: delete "segments_9"
> IFD [Thread-82]: delete "_1.cfs"
> IFD [Thread-82]: delete "_1_1.del"
> IFD [Thread-82]: delete "_2.cfs"
> IW 4 [Thread-82]: checkpoint: wrote segments file "segments_b"
> IFD [Thread-82]: now checkpoint "segments_b" [1 segments ; isCommit  
> = true]
> IFD [Thread-82]: deleteCommits: now remove commit "segments_a"
> IFD [Thread-82]: delete "segments_a"
> IFD [Thread-82]: delete "_3.fnm"
> IFD [Thread-82]: delete "_3.frq"
> IFD [Thread-82]: delete "_3.prx"
> IFD [Thread-82]: delete "_3.tis"
> IFD [Thread-82]: delete "_3.tii"
> IFD [Thread-82]: delete "_3.nrm"
> IFD [Thread-82]: delete "_3.fdx"
> IFD [Thread-82]: delete "_3.fdt"
> IW 4 [Thread-82]: CMS:   merge thread: done
> IW 4 [Thread-79]: now flush at close
> IW 4 [Thread-79]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0 flushDocs=false flushDeletes=false  
> flushDocStores=false
> numDocs=0 numBufDelTerms=0
> IW 4 [Thread-79]:   index before flush _3:c28
> IW 4 [Thread-79]: CMS: now merge
> IW 4 [Thread-79]: CMS:   index: _3:c28
> IW 4 [Thread-79]: CMS:   no more merges pending; now return
> IW 4 [Thread-79]: at close: _3:c28
> IFD [Thread-79]: setInfoStream
> deletionPolicy 
> =org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@dd0e8a
> IW 5 [Thread-79]: setInfoStream:
> dir=org.apache.lucene.store.FSDirectory@/tmp/content/3615.0-3618.0
> autoCommit=true
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@e5a644
> mergeScheduler 
> =org.apache.lucene.index.ConcurrentMergeScheduler@106cc42
> ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
> maxFieldLength=10000 index=_3:c28
> IW 5 [Thread-79]: now flush at close
> IW 5 [Thread-79]:   flush: segment=_4 docStoreSegment=_4  
> docStoreOffset=0
> flushDocs=true flushDeletes=false flushDocStores=true numDocs=1
> numBufDelTerms=0
> IW 5 [Thread-79]:   index before flush _3:c28
>
> flush postings as segment _4 numDocs=1
>
> closeDocStore: 2 files to flush to segment _4 numDocs=1
>  oldRAMSize=81920 newFlushedSize=847 docs/MB=1,237.988 new/old=1.034%
> IW 5 [Thread-79]: checkpoint: wrote segments file "segments_c"
> IFD [Thread-79]: now checkpoint "segments_c" [2 segments ; isCommit  
> = true]
> IFD [Thread-79]: deleteCommits: now remove commit "segments_b"
> IFD [Thread-79]: delete "segments_b"
> IW 5 [Thread-79]: checkpoint: wrote segments file "segments_d"
> IFD [Thread-79]: now checkpoint "segments_d" [2 segments ; isCommit  
> = true]
> IFD [Thread-79]: deleteCommits: now remove commit "segments_c"
> IFD [Thread-79]: delete "segments_c"
> IFD [Thread-79]: delete "_4.fnm"
> IFD [Thread-79]: delete "_4.frq"
> IFD [Thread-79]: delete "_4.prx"
> IFD [Thread-79]: delete "_4.tis"
> IFD [Thread-79]: delete "_4.tii"
> IFD [Thread-79]: delete "_4.nrm"
> IFD [Thread-79]: delete "_4.fdx"
> IFD [Thread-79]: delete "_4.fdt"
> IW 5 [Thread-79]: LMP: findMerges: 2 segments
> IW 5 [Thread-79]: LMP:   level -1.0 to 4.197694: 2 segments
> IW 5 [Thread-79]: CMS: now merge
> IW 5 [Thread-79]: CMS:   index: _3:c28 _4:c1
> IW 5 [Thread-79]: CMS:   no more merges pending; now return
> IW 5 [Thread-79]: CMS: now merge
> IW 5 [Thread-79]: CMS:   index: _3:c28 _4:c1
> IW 5 [Thread-79]: CMS:   no more merges pending; now return
> IW 5 [Thread-79]: at close: _3:c28 _4:c1
> IFD [Thread-85]: setInfoStream
> deletionPolicy 
> =org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1498cd
> IW 6 [Thread-85]: setInfoStream:
> dir=org.apache.lucene.store.FSDirectory@/tmp/content/3615.0-3618.0
> autoCommit=true
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@3be7e8
> mergeScheduler=org.apache.lucene.index.ConcurrentMergeScheduler@f64915
> ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
> maxFieldLength=10000 index=_3:c28 _4:c1
> IW 6 [Thread-85]: optimize: index now _3:c28 _4:c1
> IW 6 [Thread-85]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0 flushDocs=false flushDeletes=true  
> flushDocStores=false
> numDocs=0 numBufDelTerms=1
> IW 6 [Thread-85]:   index before flush _3:c28 _4:c1
> IW 6 [Thread-85]: flush 1 buffered deleted terms and 0 deleted  
> docIDs on 2
> segments.
> IW 6 [Thread-85]: checkpoint: wrote segments file "segments_e"
> IFD [Thread-85]: now checkpoint "segments_e" [2 segments ; isCommit  
> = true]
> IFD [Thread-85]: deleteCommits: now remove commit "segments_d"
> IFD [Thread-85]: delete "segments_d"
> IW 6 [Thread-85]: LMP: findMerges: 2 segments
> IW 6 [Thread-85]: LMP:   level -1.0 to 4.1980243: 2 segments
> IW 6 [Thread-85]: CMS: now merge
> IW 6 [Thread-85]: CMS:   index: _3:c28 _4:c1
> IW 6 [Thread-85]: CMS:   no more merges pending; now return
> IW 6 [Thread-85]: add merge to pendingMerges: _3:c28 _4:c1  
> [optimize] [total
> 1 pending]
> IW 6 [Thread-85]: CMS: now merge
> IW 6 [Thread-85]: CMS:   index: _3:c28 _4:c1
> IW 6 [Thread-85]: CMS:   consider merge _3:c28 _4:c1 into _5  
> [optimize]
> IW 6 [Thread-85]: CMS:     launch new thread [Thread-89]
> IW 6 [Thread-85]: CMS:   no more merges pending; now return
> IW 6 [Thread-89]: CMS:   merge thread: start
> IW 6 [Thread-89]: now merge
>  merge=_3:c28 _4:c1 into _5 [optimize]
>  index=_3:c28 _4:c1
> IW 6 [Thread-89]: merging _3:c28 _4:c1 into _5 [optimize]
> IW 6 [Thread-89]: merge: total 28 docs
> IW 42 [Thread-86]: optimize: index now _3:c28 _4:c1
> IW 42 [Thread-86]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0 flushDocs=false flushDeletes=true  
> flushDocStores=false
> numDocs=0 numBufDelTerms=1
> IW 42 [Thread-86]:   index before flush _3:c28 _4:c1
> IW 42 [Thread-86]: flush 1 buffered deleted terms and 0 deleted  
> docIDs on 2
> segments.
> IW 42 [Thread-86]: checkpoint: wrote segments file "segments_f"
> IFD [Thread-86]: now checkpoint "segments_f" [2 segments ; isCommit  
> = true]
> IFD [Thread-86]: deleteCommits: now remove commit "segments_e"
> IFD [Thread-86]: delete "segments_e"
> IFD [Thread-86]: delete "_3_1.del"
> IW 42 [Thread-86]: LMP: findMerges: 2 segments
> IW 42 [Thread-86]: LMP:   level -1.0 to 4.1980243: 2 segments
> IW 42 [Thread-86]: CMS: now merge
> IW 42 [Thread-86]: CMS:   index: _3:c28 _4:c1
> IW 42 [Thread-86]: CMS:   no more merges pending; now return
> IW 42 [Thread-86]: add merge to pendingMerges: _3:c28 _4:c1 [optimize]
> [total 1 pending]
> IW 42 [Thread-86]: CMS: now merge
> IW 42 [Thread-86]: CMS:   index: _3:c28 _4:c1
> IW 42 [Thread-86]: CMS:   consider merge _3:c28 _4:c1 into _5  
> [optimize]
> IW 6 [Thread-89]: commitMerge: _3:c28 _4:c1 into _5 [optimize]
> IW 6 [Thread-89]: commitMerge _3:c28 _4:c1 into _5 [optimize]
> IW 6 [Thread-89]: hit exception creating merged deletes file
> IFD [Thread-89]: refresh [prefix=_5]: removing newly created  
> unreferenced
> file "_5.nrm"
> IFD [Thread-89]: delete "_5.nrm"
> IW 6 [Thread-89]: hit exception during merge
> Exception in thread "Thread-89"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.io.FileNotFoundException: /tmp/content/3615.0-3618.0/_3_1.del  
> (No such
> file or directory)
> 	at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:271)
> Caused by: java.io.FileNotFoundException:
> /tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
> 	at java.io.RandomAccessFile.open(Native Method)
> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> 	at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
> 	at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java:536)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 445)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 440)
> 	at org.apache.lucene.util.BitVector.<init>(BitVector.java:180)
> 	at org.apache.lucene.index.IndexWriter.commitMerge(IndexWriter.java: 
> 2827)
> 	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java: 
> 3295)
> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
> 	at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:240)
> IW 42 [Thread-86]: CMS:     launch new thread [Thread-93]
> IW 6 [Thread-85]: now flush at close
> IW 6 [Thread-85]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0 flushDocs=false flushDeletes=false  
> flushDocStores=false
> numDocs=0 numBufDelTerms=0
> IW 6 [Thread-85]:   index before flush _3:c28 _4:c1
> IW 6 [Thread-85]: CMS: now merge
> IW 6 [Thread-85]: CMS:   index: _3:c28 _4:c1
> IW 6 [Thread-85]: CMS:   no more merges pending; now return
> IW 6 [Thread-85]: close: wrote segments file "segments_f"
> IFD [Thread-85]: now checkpoint "segments_f" [2 segments ; isCommit  
> = true]
> IFD [Thread-85]: deleteCommits: now remove commit "segments_e"
> IFD [Thread-85]: delete "segments_e"
> IW 6 [Thread-85]: at close: _3:c28 _4:c1
> IFD [Thread-81]: setInfoStream
> deletionPolicy 
> =org.apache.lucene.index.KeepOnlyLastCommitDeletionPolicy@1ddcef0
> IW 7 [Thread-81]: setInfoStream:
> dir=org.apache.lucene.store.FSDirectory@/tmp/content/3615.0-3618.0
> autoCommit=true
> mergePolicy=org.apache.lucene.index.LogByteSizeMergePolicy@13d2d11
> mergeScheduler 
> =org.apache.lucene.index.ConcurrentMergeScheduler@159e0c2
> ramBufferSizeMB=16.0 maxBuffereDocs=-1 maxBuffereDeleteTerms=-1
> maxFieldLength=10000 index=_3:c28 _4:c1
> IW 7 [Thread-81]: optimize: index now _3:c28 _4:c1
> IW 7 [Thread-81]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0 flushDocs=false flushDeletes=true  
> flushDocStores=false
> numDocs=0 numBufDelTerms=1
> IW 7 [Thread-81]:   index before flush _3:c28 _4:c1
> IW 7 [Thread-81]: flush 1 buffered deleted terms and 0 deleted  
> docIDs on 2
> segments.
> IW 7 [Thread-81]: hit exception flushing segment null
> IFD [Thread-81]: now checkpoint "segments_f" [2 segments ; isCommit  
> = false]
> IW 7 [Thread-81]: now flush at close
> IW 7 [Thread-81]:   flush: segment=null docStoreSegment=null
> docStoreOffset=0 flushDocs=false flushDeletes=true  
> flushDocStores=false
> numDocs=0 numBufDelTerms=1
> IW 7 [Thread-81]:   index before flush _3:c28 _4:c1
> IW 7 [Thread-81]: flush 1 buffered deleted terms and 0 deleted  
> docIDs on 2
> segments.
> IW 7 [Thread-81]: hit exception flushing segment null
> IFD [Thread-81]: now checkpoint "segments_f" [2 segments ; isCommit  
> = false]
> IW 7 [Thread-81]: hit exception while closing
> Exception in thread "Thread-85" java.lang.RuntimeException:
> com.test.search.IndexingException: java.io.IOException: background  
> merge hit
> exception: _3:c28 _4:c1 into _5 [optimize]
> 	at
> com.test.vcssearch.DefaultServiceIndexer 
> $2.run(DefaultServiceIndexer.java:245)
> 	at java.lang.Thread.run(Thread.java:595)
> Caused by: com.test.search.IndexingException: java.io.IOException:
> background merge hit exception: _3:c28 _4:c1 into _5 [optimize]
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 332)
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 216)
> 	at  
> com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java: 
> 279)
> 	at  
> com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java: 
> 340)
> 	at
> com.test.vcssearch.DefaultServiceIndexer 
> $2.run(DefaultServiceIndexer.java:239)
> 	... 1 more
> Caused by: java.io.IOException: background merge hit exception:  
> _3:c28 _4:c1
> into _5 [optimize]
> 	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java: 
> 1787)
> 	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java: 
> 1727)
> 	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java: 
> 1707)
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 318)
> 	... 5 more
> Caused by: java.io.FileNotFoundException:
> /tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
> 	at java.io.RandomAccessFile.open(Native Method)
> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> 	at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
> 	at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java:536)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 445)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 440)
> 	at org.apache.lucene.util.BitVector.<init>(BitVector.java:180)
> 	at org.apache.lucene.index.IndexWriter.commitMerge(IndexWriter.java: 
> 2827)
> 	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java: 
> 3295)
> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
> 	at
> org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:240)
> IW 42 [Thread-86]: CMS:   no more merges pending; now return
> Exception in thread "Thread-81" java.lang.RuntimeException:
> com.test.search.IndexingException: java.io.FileNotFoundException:
> /tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
> 	at
> com.test.vcssearch.DefaultServiceIndexer 
> $2.run(DefaultServiceIndexer.java:245)
> 	at java.lang.Thread.run(Thread.java:595)
> Caused by: com.test.search.IndexingException:  
> java.io.FileNotFoundException:
> /tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 332)
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 216)
> 	at  
> com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java: 
> 279)
> 	at  
> com.test.search.impl.lucene.IndexManager.reindex(IndexManager.java: 
> 340)
> 	at
> com.test.vcssearch.DefaultServiceIndexer 
> $2.run(DefaultServiceIndexer.java:239)
> 	... 1 more
> Caused by: java.io.FileNotFoundException:
> /tmp/content/3615.0-3618.0/_3_1.del (No such file or directory)
> 	at java.io.RandomAccessFile.open(Native Method)
> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> 	at
> org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
> 	at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java:536)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 445)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 440)
> 	at org.apache.lucene.util.BitVector.<init>(BitVector.java:180)
> 	at
> org 
> .apache 
> .lucene.index.SegmentReader.loadDeletedDocs(SegmentReader.java:352)
> 	at  
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
> 319)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:205)
> 	at  
> org.apache.lucene.index.IndexWriter.applyDeletes(IndexWriter.java: 
> 3441)
> 	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2638)
> 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2523)
> 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2509)
> 	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java: 
> 1744)
> 	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java: 
> 1727)
> 	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java: 
> 1707)
> 	at
> com 
> .test 
> .search.impl.lucene.IndexManager.removeDocuments(IndexManager.java: 
> 318)
> 	... 5 more
>
> -- 
> View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18775319.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 17:06:07 2008
Return-Path: <java-user-return-35271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48200 invoked from network); 1 Aug 2008 17:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 17:06:07 -0000
Received: (qmail 8618 invoked by uid 500); 1 Aug 2008 17:05:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8589 invoked by uid 500); 1 Aug 2008 17:05:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8578 invoked by uid 99); 1 Aug 2008 17:05:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 10:05:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.91.155] (HELO web37508.mail.mud.yahoo.com) (209.191.91.155)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Aug 2008 17:05:03 +0000
Received: (qmail 77008 invoked by uid 60001); 1 Aug 2008 17:04:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=JOBvlQ29uR8AdxWCVfjlAEtChCzC4LzHfnUxNTmI+KUuigJngdSqdugQHlo1RaPD5k2E5BZfOlfoRYKeKmsi8nhMfeuGb1EcTFqTvCm8CYBfqZWnDveHFoqg4hyPS58NsIpie39c5AeXAlKW1VcNU4YXhnyl5dH4IJxEIQkik6Y=;
Received: from [161.139.100.102] by web37508.mail.mud.yahoo.com via HTTP; Fri, 01 Aug 2008 10:04:27 PDT
X-Mailer: YahooMailWebService/0.7.218
Date: Fri, 1 Aug 2008 10:04:27 -0700 (PDT)
From: Siti Rochimah <siti_r@yahoo.com>
Reply-To: siti_r@yahoo.com
Subject: query API for program-generated query (please help..)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <460263.76661.qm@web37508.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm a new user for Lucene.

I would like to make search-engine program with program-generated query rather than user-input query. If anyone knows how to make a query API for this purpose, please share the code...
Thanks.

siti_r


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 17:53:24 2008
Return-Path: <java-user-return-35272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80684 invoked from network); 1 Aug 2008 17:53:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 17:53:24 -0000
Received: (qmail 77568 invoked by uid 500); 1 Aug 2008 17:53:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76599 invoked by uid 500); 1 Aug 2008 17:53:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76588 invoked by uid 99); 1 Aug 2008 17:53:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 10:53:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Aug 2008 17:52:18 +0000
Received: (qmail 50370 invoked by uid 60001); 1 Aug 2008 17:51:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=hrkD9+n9Psa1Ai4CC97BI292T+1Al44j9R/IeFZIQWbHARdOqnjYfa+3gLbGzPpPKb9IaQSLymAlKdxEGn2Z6Wgl2qrQlu+miOO5FTvBjZN+m0W6McerE4wg2n9uCNhLVVwDGeMMIIWxFKbgwH0y7kZPx01rEAxs6LxbuvuC90w=;
Received: from [167.206.188.3] by web50311.mail.re2.yahoo.com via HTTP; Fri, 01 Aug 2008 10:51:43 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Fri, 1 Aug 2008 10:51:43 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: query API for program-generated query (please help..)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <40047.49681.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

It could be enough to simply combine both queries into a single query string and pass that on as the query to the IndexSearcher.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Siti Rochimah <siti_r@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Friday, August 1, 2008 1:04:27 PM
> Subject: query API for program-generated query (please help..)
> 
> Hi,
> 
> I'm a new user for Lucene.
> 
> I would like to make search-engine program with program-generated query rather 
> than user-input query. If anyone knows how to make a query API for this purpose, 
> please share the code...
> Thanks.
> 
> siti_r
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 18:48:28 2008
Return-Path: <java-user-return-35273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24135 invoked from network); 1 Aug 2008 18:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 18:48:28 -0000
Received: (qmail 25462 invoked by uid 500); 1 Aug 2008 18:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25428 invoked by uid 500); 1 Aug 2008 18:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25412 invoked by uid 99); 1 Aug 2008 18:48:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 11:48:21 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 18:47:24 +0000
Received: by fk-out-0910.google.com with SMTP id 18so977460fkq.5
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 11:47:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PWKo5IlYi6OidkhoRKWNVScOJ0a594JS/pE5BryyRQQ=;
        b=cKZFUfgVQXfv+rZcmcwGiV2r8qIQzKGzeYZkGnhlyJ0HW3Q6rfqpWRi0Svx82QP0yn
         8W++J5+i0d9wRAnEohrrBhi3Y6s8F187g4p2ul3ahjxH0gYSvIsYNpIzh3Eo1zi2iRB/
         u7eA6X1oZ9tWswj/vxahEn1Oi3dPi1OkErdI0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=cQwSZb7Xv048buuFDU69M28s5fR6LoiLS71OuUBB9UW0R4fj45Mxk2d7/NEyWajTei
         DyXpyacPd9Ov/C4FzPydNh59M2aO3VxIeOZ2/VFPrCivHNA7idZEdXYLc/yYO9PBCA0l
         xdpZ9m1EuNHKKrn7wP7Nl0AuzluVgAegYoL8M=
Received: by 10.125.74.20 with SMTP id b20mr568253mkl.64.1217616451241;
        Fri, 01 Aug 2008 11:47:31 -0700 (PDT)
Received: by 10.125.162.6 with HTTP; Fri, 1 Aug 2008 11:47:31 -0700 (PDT)
Message-ID: <867513fe0808011147o49cb3fd6hf5f2a0cc13186b5b@mail.gmail.com>
Date: Sat, 2 Aug 2008 00:17:31 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search Format
In-Reply-To: <18775247.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7122_20496416.1217616451230"
References: <18775247.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7122_20496416.1217616451230
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Perhaps we could help you with the query formation in case you make your
case a little clear viz. how do you index and what do you search for?

--
Anshum
Naukri Labs!

On Fri, Aug 1, 2008 at 7:44 PM, richa <richa.sud@techblue.co.uk> wrote:

>
> Hi!!
>
> I'm abst new to Lucene.
> I'm trying to create a query using Lucene search to get the correct
> reference for a folder.
> The query is fine if it has to go to the parent folder. But if i try to
> reach to the child folder, it throws an error.
> For example
> Query query = new Query(Constants.QUERY_LANG_LUCENE,
> PATH:\"/app:company_home/app:user_homes\"");
>  This gets me the reference for the parent folder.
>
> However, i'm not able to reach to any user defined folder.  I tried various
> combinations
> like  PATH:\"/app:company_home/app:user_homes/app:userfolder\""
> or
>  PATH:\"/app:company_home/app:user_homes/cm:userfolder""
> or
>  PATH:\"/app:company_home/app:user_homes:/cm:userfolder""
>
> I'm sorry if i'm not able to make any sense.
>
> Any help is really appreciated.
>
> Thanks,
> Richa
> --
> View this message in context:
> http://www.nabble.com/Lucene-search-Format-tp18775247p18775247.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_7122_20496416.1217616451230--

From java-user-return-35274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 18:51:47 2008
Return-Path: <java-user-return-35274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26375 invoked from network); 1 Aug 2008 18:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 18:51:47 -0000
Received: (qmail 28725 invoked by uid 500); 1 Aug 2008 18:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28695 invoked by uid 500); 1 Aug 2008 18:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28684 invoked by uid 99); 1 Aug 2008 18:51:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 11:51:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 18:50:45 +0000
Received: by fg-out-1718.google.com with SMTP id l27so677684fgb.27
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 11:51:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=1hVH+vL89UVPDLOyqaPEUPsi1BhpGqJ6xT4ES7z14HI=;
        b=dvyjp7NV2aalIAejMtbEvbXRs+Jbyhk8d/S1BuY9bFTxgxpmQtXuNkcYgfdctXq1yi
         7wQdUMStqcoO+yR1yknqrUWInE1PkfRiYxH0UZk7FWdISw2K+L+50N+tR9pT4RSOsYbM
         HoHUw8egsNfjkPl7jzQiqwufrA7BcpHODEwPA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=P7WlWA9A+/hoNXMavhWjbuJchYF0I4VP8sz5DckwYdkjVHJ8ctzFScykSHuPzlRhro
         VOhLw/mnxpV15r8MnLwXj2k+GLvOFJ75C2+EJ/EaO18iYBHJyO+eQ9Q3H+JdVGo83XpX
         Thp1Sx+K1sJmN2k5i57U5VNMjSPNYsFl9R3/k=
Received: by 10.125.100.8 with SMTP id c8mr562485mkm.135.1217616670362;
        Fri, 01 Aug 2008 11:51:10 -0700 (PDT)
Received: by 10.125.162.6 with HTTP; Fri, 1 Aug 2008 11:51:10 -0700 (PDT)
Message-ID: <867513fe0808011151y22634e76q5e8050d705b14789@mail.gmail.com>
Date: Sat, 2 Aug 2008 00:21:10 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The best strategy to "How store multiple fields of same document"
In-Reply-To: <op.ue5xbqa72ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7157_4875821.1217616670255"
References: <op.ue5uu0ot2ic4zu@sj-desktop>
	 <359a92830807310750n4f98ffb7k2d6f9ec46a7872bb@mail.gmail.com>
	 <op.ue5xbqa72ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7157_4875821.1217616670255
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Sergey,
With that kind of a dimension I guess you could work with multiple fields. I
have tried it over a score of fields for over 10 million documents. Works
fine if implemented neatly.
Is there more that you would be doing other than vanilla search?
--
Anshum Gupta
Naukri Labs!

On Thu, Jul 31, 2008 at 8:59 PM, Sergey Kabashnyuk <ksmmlist@gmail.com>wrote:

> Thank you Erick.
>
> I'm talking about more then 10,000 documents and 95% less then 10 fields.
> Maximum number of fields per document is unlimited.
> But in practice it's no more the 20.
>
>
> I'm interesting: does Lucene have any internal optimization,
> which depend of the fields count or fields size, as database do?
> I mean to determinate position of row X in index:
>
> positionX = sum(fieldsize[1]+...fieldsize[i])*(X-1)
>
>
> Sergey Kabashnyuk
> eXo Platform SAS
>
>
> I'd go with option 1 unless and until you could demonstrate performance
>> problems. Speaking of which, you'd get a more informed answer if you
>> provided a bit more data, like how many fields are we talking, how many
>> documents, etc. If you're indexing 10,000 documents, go with the simplest.
>> If you're indexing 1,000,000,000 documents, more thought is required <G>..
>> Do you expect 3 fields/doc or 30,000 fields/doc?
>>
>> But the reason I'd go with <1> is that your second option has some issues.
>> 1> how to tokenize? You'll probably have to write a custom one or risk
>>    getting tokens "name" "value" rather than "name@value".
>> 2> Forming queries is, I believe, equally complex in both cases, so
>>    choose the conceptually simplest one. Let's say you have
>>    to search on foo1:val1  and foo2:val2. In the first case this is
>>    simple +foo1:val1 +foo2:val2. For your second case, you get
>>    +bigfield:foo1@val1 + bigfield:foo2@val2. There's not much
>>    difference between the two.
>> 3> Back to my initial comment about resource usage: we don't
>>    have enough data to answer whether it makes any difference.
>>    But even if we did, you'd find the response a variation of
>>    "you'll have to try it and see" since there are so many
>>    variables.
>>
>> But I'll repeat that I always go with the simplest approach unless and
>> until I'm certain there's a problem...
>>
>> Best
>> Erick
>>
>> On Thu, Jul 31, 2008 at 10:36 AM, Sergey Kabashnyuk <ksmmlist@gmail.com
>> >wrote:
>>
>> The best strategy.
>>>
>>> Hello.
>>> I want to ask you opinion about to "How
>>> store multiple fields of same document".
>>>
>>> I see now two possibility's.
>>> 1. Multiple fields in document
>>> 2. One filed: for example named PROPERTIES, with multiple instances.
>>>  And values combined with name for example "name@value"
>>>
>>> What choice the best for search speed and resource usage?
>>>
>>> Thanks.
>>>
>>> Sergey Kabashnyuk
>>> eXo Platform SAS
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_7157_4875821.1217616670255--

From java-user-return-35275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 21:14:40 2008
Return-Path: <java-user-return-35275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4339 invoked from network); 1 Aug 2008 21:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 21:14:39 -0000
Received: (qmail 79095 invoked by uid 500); 1 Aug 2008 21:14:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79065 invoked by uid 500); 1 Aug 2008 21:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79054 invoked by uid 99); 1 Aug 2008 21:14:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:14:32 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 21:13:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1259471rvb.5
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 14:14:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=pEIHlf1BI6Bjgqk9XeMVOApAN60ReiBXUjUoXfjH74A=;
        b=vRzef5oJo+D4N4viJAjDXz8eP9OmllTZKi9AU+vCN+75dTbEfehPEiRVPfBl5oXAW5
         tWmRcojCm+NhT0PPr7VMHtQ6C/Dd9VcdL09oFPZAh0HNdrmzHv8FoD0K/d0zEgOFnr01
         7JgBXtzjQPoqqogaUU/CunwHlud6XCyhvUit4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZHttUth6Vot1+ow66ozN+LdYUW8wJ4q/25f3Pv/gW9wenj3YaDPBZ4Sq230Zfl91MY
         jVfmMDcj9y8TXVbdMDEg2OrIXMt4jlUD8VzAcCXvw9zq6wnqIieQqkC2gHjb07qBngfH
         zyxeN2nDsKoncuu/jqbeFQPvGPUjGOUKYP+Ms=
Received: by 10.140.164.6 with SMTP id m6mr6179778rve.208.1217625242661;
        Fri, 01 Aug 2008 14:14:02 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Fri, 1 Aug 2008 14:14:02 -0700 (PDT)
Message-ID: <1bcb7c7f0808011414s596b30a4hb21638426b35edc5@mail.gmail.com>
Date: Sat, 2 Aug 2008 00:14:02 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: deleting documents with doc id
In-Reply-To: <18679168.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14407_12419944.1217625242659"
References: <1bcb7c7f0807231308v22b80e9fpa5147ca20fc470e3@mail.gmail.com>
	 <55B38F3C-C416-42FD-855D-19DBC03D3D57@gmail.com>
	 <1bcb7c7f0807261117k6cf8e1a3l872b151db0e890b7@mail.gmail.com>
	 <18679168.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14407_12419944.1217625242659
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

from what I understand:
there is a deleteDocuments by a term array method?


I was asking if there was a side effect of deleting from indexReader that i
get from an indexsearcher and not the writer.

Best.

On Sun, Jul 27, 2008 at 9:44 PM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> Hi,
>
> only to be sure:
> You know IndexModifier.deleteDocument(int)?
> It is deprecated, because you should use
> IndexWriter.deleteDocuments(Term[]).
>
> What do you mean with "index is committed".
> If you mean "optimize()" the document number will change (so there is a
> side-effect;-)
>
> best regards
>  Karsten
>
>
> cambazz wrote:
> >
> > hello,
> >
> > the thing is:
> >
> > I got a indexwriter and indexsearcher.
> >
> > I do a indexsearcher.getIndexReader.delete(int id)
> >
> > would not that cause problems? there is not a way to delete from
> > indexwriter, and I think i will cause a lock issue deleting from
> > indexsearcher.
> >
> > best,
> > -C.B.
> >
> --
> View this message in context:
> http://www.nabble.com/deleting-documents-with-doc-id-tp18619372p18679168.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14407_12419944.1217625242659--

From java-user-return-35276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 21:18:09 2008
Return-Path: <java-user-return-35276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5216 invoked from network); 1 Aug 2008 21:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 21:18:09 -0000
Received: (qmail 82852 invoked by uid 500); 1 Aug 2008 21:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82812 invoked by uid 500); 1 Aug 2008 21:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82801 invoked by uid 99); 1 Aug 2008 21:18:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 14:18:02 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 21:17:06 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1260800rvb.5
        for <java-user@lucene.apache.org>; Fri, 01 Aug 2008 14:17:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=rHCcxeBCH45S9tEVOs9yvpLPXS+37kcVIZj7p/biyko=;
        b=x4uEZP2g6WxI8zJwyckC0P3TJDsKEYmPo9UEULdOym1ecp+442K2a63LoZY0DRMvRh
         H/eNWHl0Wim3dXqeTTp98tY05aysMJ1LMVAecQCKpuUtK0XknMZTcttTaxxfa8ZMyRMT
         h2XkfNa24ZQjIOwjEGhvCBawyN+4Gg7BJCiXY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uFu7AuzFI89P2RRcxyRE3yZ3zBrvNt2nL4eYVTi5M9BSintFsD+fi6gClRjWBFB7kS
         yDqky9tCtGhm9GQPlSFvhLxXTAcUDJcjJUm2MnwgQm+VNNbhugcBXZQtOu6wlvKTRfy2
         nGEreGkGkPUytOg+0TOnAW59DaCyHv1WoPAZw=
Received: by 10.141.35.21 with SMTP id n21mr6178673rvj.115.1217625435767;
        Fri, 01 Aug 2008 14:17:15 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Fri, 1 Aug 2008 14:17:15 -0700 (PDT)
Message-ID: <1bcb7c7f0808011417l6013bd30n4d0d9d2f1f3ccf95@mail.gmail.com>
Date: Sat, 2 Aug 2008 00:17:15 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: deleting documents with doc id
In-Reply-To: <1bcb7c7f0808011414s596b30a4hb21638426b35edc5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14435_7339246.1217625435774"
References: <1bcb7c7f0807231308v22b80e9fpa5147ca20fc470e3@mail.gmail.com>
	 <55B38F3C-C416-42FD-855D-19DBC03D3D57@gmail.com>
	 <1bcb7c7f0807261117k6cf8e1a3l872b151db0e890b7@mail.gmail.com>
	 <18679168.post@talk.nabble.com>
	 <1bcb7c7f0808011414s596b30a4hb21638426b35edc5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14435_7339246.1217625435774
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well just checked the api, the deleteDocuments(term[]) method deletes any
document containing any of the terms.

I think I will go to the trunk version.

best.
-c.a.

On Sat, Aug 2, 2008 at 12:14 AM, Cam Bazz <cambazz@gmail.com> wrote:

>
> from what I understand:
> there is a deleteDocuments by a term array method?
>
>
> I was asking if there was a side effect of deleting from indexReader that i
> get from an indexsearcher and not the writer.
>
> Best.
>
>
> On Sun, Jul 27, 2008 at 9:44 PM, Karsten F. <karsten-lucene@fiz-technik.de
> > wrote:
>
>>
>> Hi,
>>
>> only to be sure:
>> You know IndexModifier.deleteDocument(int)?
>> It is deprecated, because you should use
>> IndexWriter.deleteDocuments(Term[]).
>>
>> What do you mean with "index is committed".
>> If you mean "optimize()" the document number will change (so there is a
>> side-effect;-)
>>
>> best regards
>>  Karsten
>>
>>
>> cambazz wrote:
>> >
>> > hello,
>> >
>> > the thing is:
>> >
>> > I got a indexwriter and indexsearcher.
>> >
>> > I do a indexsearcher.getIndexReader.delete(int id)
>> >
>> > would not that cause problems? there is not a way to delete from
>> > indexwriter, and I think i will cause a lock issue deleting from
>> > indexsearcher.
>> >
>> > best,
>> > -C.B.
>> >
>> --
>> View this message in context:
>> http://www.nabble.com/deleting-documents-with-doc-id-tp18619372p18679168.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_14435_7339246.1217625435774--

From java-user-return-35277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 01 22:24:31 2008
Return-Path: <java-user-return-35277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49241 invoked from network); 1 Aug 2008 22:24:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2008 22:24:31 -0000
Received: (qmail 62631 invoked by uid 500); 1 Aug 2008 22:24:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62600 invoked by uid 500); 1 Aug 2008 22:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62585 invoked by uid 99); 1 Aug 2008 22:24:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 15:24:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.18.197.228] (HELO web01-nyc.clicvu.com) (69.18.197.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 22:23:28 +0000
Received: from [192.168.0.11] by web01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <java-user@lucene.apache.org>;
          Fri, 1 Aug 2008 18:25:26 -0400
Received: by wf-out-1314.google.com with SMTP id 23so1157081wfg.30
        for <java-user@lucene.apache.org                                                                                                                                                                                                                                    >; Fri, 01 Aug 2008 15:23:51 -0700 (PDT)
Received: by 10.142.11.2 with SMTP id 2mr3935477wfk.72.1217629431553;
        Fri, 01 Aug 2008 15:23:51 -0700 (PDT)
Received: by 10.142.140.16 with HTTP; Fri, 1 Aug 2008 15:23:51 -0700 (PDT)
Message-ID: <454006f50808011523r557be148w48f88a0838084089@mail.gmail.com>
Date: Fri, 1 Aug 2008 18:23:51 -0400
From: roy-lucene-user@xemaps.com
To: java-user@lucene.apache.org                                                                                                                                                                                                                                    
Subject: Re: getting started
In-Reply-To: <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10280_5119534.1217629431556"
References: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
	 <454006f50808010651m68360f04u868630158446a696@mail.gmail.com>
	 <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10280_5119534.1217629431556
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhdCBjZXJ0YWlubHkgd29ya3MgaWYgdGhlIGludGVudCBpcyB0byBncmFiIHRoZSBlbnRpcmUg
ZmlsZS4gICBJZiBhbGwgeW91CndhbnQgaXMgdGhhdCBwYXJ0aWN1bGFyIGxpbmUgdG8gYmUgcmV0
dXJuZWQgaW4gdGhlIHNlYXJjaCB0aGVuIHRoYXQncyBub3QKZ29pbmcgdG8gd29yay4KCkxldCdz
IHNheSB0aGUgZmlsZXMgd2FzIG1hZGUgdXAgb2YgYSBtaWxsaW9uIGxpbmVzIGFuZCB0aGUgdGV4
dCB3YXMgc3RvcmVkCmluIHRoZSBpbmRleCAoSSBrbm93LCBhYnN1cmQpLgoKV2hlbiBncmFiYmlu
ZyB0aGUgRG9jdW1lbnQgZnJvbSBhIHNlYXJjaCwgeW91IGRvbid0IG5lY2Vzc2FyaWx5IHdhbnQg
dG8gZ3JhYgphbGwgdGhlIGxpbmVzLgoKQWxzbyB3aGVuIHlvdSBnZXQgdGhlIGRvY3VtZW50LCBo
b3cgZG8geW91IGtub3cgd2hpY2ggRmllbGQgY29udGFpbmVkIHRoZQpsaW5lIHlvdSB3YW50ZWQ/
CgpSb3kKCk9uIEZyaSwgQXVnIDEsIDIwMDggYXQgOTo1OSBBTSwg4LKo4LK+4LKX4LOH4LK24LON
IOCyuOCzgeCyrOCzjeCysOCyueCzjeCyruCyo+CzjeCyryAoTmFnZXNoIFMpIDwKbmFnZXNoYmxv
cmVAZ21haWwuY29tPiB3cm90ZToKCj4KPiBXaHkgc2hvdWxkIGVhY2ggbGluZSBiZSBhIERvY3Vt
ZW50ID8gSWYgdGhlcmUgaXMgYSBzaW5nbGUgZG9jdW1lbnQgaGF2aW5nCj4gZWFjaCBsaW5lIGFz
IGEgRmllbGQsIHRoZW4gdGhlIHNlYXJjaCB3b3VsZCByZXN1bHQgaW4gYSBzaW5nbGUgRG9jdW1l
bnQgYXMKPiBhCj4gJ2hpdCcgbm90IHRoZSBpbmRpdmlkdWFsIGxpbmVzIG1hdGNoaW5nIGl0LiBJ
cyB0aGlzIHJpZ2h0ID8KPgo+IE5hZ2VzaAo+Cj4gT24gRnJpLCBBdWcgMSwgMjAwOCBhdCA3OjIx
IFBNLCA8cm95LWx1Y2VuZS11c2VyQHhlbWFwcy5jb20+IHdyb3RlOgo+Cj4gPiBIZWxsbyBCcml0
dGFueSwKPiA+Cj4gPiBJIHRoaW5rIHRoZSBlYXNpZXN0IHRoaW5nIGZvciB5b3UgdG8gZG8gaXMg
bWFrZSBlYWNoIGxpbmUgYSBEb2N1bWVudC4KPiAgWW91Cj4gPiBtaWdodCB3YW50IGEgRmlsZU5h
bWUgYW5kIExpbmVOdW1iZXIgZmllbGQgb24gdG9wIG9mIGEgIlRleHQiIGZpZWxkLCB0aGlzCj4g
PiB3YXkgaWYgeW91IG5lZWQgdG8gZ2F0aGVyIGFsbCB0aGUgbGluZXMgb2YgeW91ciBGaWxlIGJh
Y2sgdG9nZXRoZXIgYWdhaW4KPiA+IHlvdQo+ID4gY2FuIGRvIGEgc2VhcmNoIG9uIHRoZSBGaWxl
TmFtZS4KPiA+Cj4gPiBTbyBpbiB5b3VyIGNhc2U6Cj4gPgo+ID4gRG9jdW1lbnQgMQo+ID4gIEZp
bGVOYW1lOiBbdGhlIGZpbGVdCj4gPiAgTGluZU51bWJlcjogMQo+ID4gIFRleHQ6IEkgbGlrZSBh
cHBsZXMKPiA+IERvY3VtZW50IDIKPiA+ICAuLi5ldGMKPiA+Cj4gPiBSZWdhcmRzLAo+ID4gUm95
Cj4gPgo+ID4gT24gRnJpLCBBdWcgMSwgMjAwOCBhdCA5OjI4IEFNLCBCcml0dGFueSBKYWNvYnMg
PAo+IGJqYWNvYnNAamJtYW5hZ2VtZW50LmNvbQo+ID4gPndyb3RlOgo+ID4KPiA+ID4gSnVzdCB0
cnlpbmcgdG8gZ3Jhc3AgdGhlIGNvbmNlcHQuCj4gPiA+Cj4gPiA+Cj4gPiA+Cj4gPiA+IEkgd2Fu
dCB0byBzZWFyY2ggYSB0ZXh0IGZpbGUgd2hlcmUgZWFjaCBsaW5lIGlzIGEgc2VwYXJhdGUgaXRl
bSB0byBiZQo+ID4gPiBzZWFyY2hlZC4gIFdoZW4gdGV4dCBpdCBlbnRlcmVkIGJ5IHRoZSB1c2Vy
LCBJIHdhbnQgdG8gcmV0dXJuIGFsbCB0aGUKPiA+IGxpbmVzCj4gPiA+IGluIHdoaWNoIHRoYXQg
dGV4dCBhcHBlYXJzLgo+ID4gPgo+ID4gPiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRleHQgZmlsZSBo
YXM6Cj4gPiA+Cj4gPiA+IEkgbGlrZSBhcHBsZXMuCj4gPiA+Cj4gPiA+IEkgd2VudCB0byB0aGUg
c3RvcmUuCj4gPiA+Cj4gPiA+IEkgYm91Z2h0IGFuIGFwcGxlLgo+ID4gPgo+ID4gPgo+ID4gPgo+
ID4gPiBJZiB0aGUgdXNlciBzZWFyY2hlcyAiYXBwbGUiLCBJIHdhbnQgaXQgdG8gcmV0dXJuIHRo
ZSBmaXJzdCBhbmQgdGhpcmQKPiA+ID4gc2VudGVuY2VzLgo+ID4gPgo+ID4gPgo+ID4gPgo+ID4g
PiBJcyBlYWNoIHNlbnRlbmNlIGEgVG9rZW4/ICBJcyB0aGUgdXNlciBpbnB1dCBnb2luZyB0byBi
ZSBhIFF1ZXJ5UGFyc2VyPwo+ID4gPiAgSG93Cj4gPiA+IHNob3VsZCBJIHJlYWQgaW4gdGhlIGZp
bGUgc28gdGhhdCBlYWNoIGxpbmUgb2YgdGV4dCBpcyBhIHRva2VuIHRvCj4gc2VhcmNoPwo+ID4g
Pgo+ID4gPgo+ID4gPgo+ID4gPiBUaGFua3MgaW4gYWR2YW5jZS4KPiA+ID4KPiA+ID4KPiA+ID4K
PiA+ID4KPiA+ID4KPiA+ID4KPiA+ID4KPiA+ID4gQnJpdHRhbnkgSmFjb2JzCj4gPiA+Cj4gPiA+
IEphdmEgRGV2ZWxvcGVyCj4gPiA+Cj4gPiA+IEpCTWFuYWdlbWVudCwgSW5jLgo+ID4gPgo+ID4g
PiAxMiBDaHJpc3RvcGhlciBXYXksIFN1aXRlIDEwMwo+ID4gPgo+ID4gPiBFYXRvbnRvd24sIE5K
IDA3NzI0Cj4gPiA+Cj4gPiA+IHBoOiA3MzItNTQyLTkyMDAgZXh0LiAyMjkKPiA+ID4KPiA+ID4g
ZmF4OiA3MzItMzgwLTA2NzgKPiA+ID4KPiA+ID4gZW1haWw6ICA8bWFpbHRvOmJqYWNvYnNAamJt
YW5hZ2VtZW50LmNvbT4gYmphY29ic0BqYm1hbmFnZW1lbnQuY29tCj4gPiA+Cj4gPiA+Cj4gPiA+
Cj4gPiA+Cj4gPgo+Cg==
------=_Part_10280_5119534.1217629431556--

From java-user-return-35278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 02 05:14:18 2008
Return-Path: <java-user-return-35278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23179 invoked from network); 2 Aug 2008 05:14:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2008 05:14:18 -0000
Received: (qmail 72506 invoked by uid 500); 2 Aug 2008 05:14:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72481 invoked by uid 500); 2 Aug 2008 05:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72470 invoked by uid 99); 2 Aug 2008 05:14:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Aug 2008 22:14:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Aug 2008 05:13:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KP9Qy-0007r7-JZ
	for java-user@lucene.apache.org; Fri, 01 Aug 2008 22:13:40 -0700
Message-ID: <18786232.post@talk.nabble.com>
Date: Fri, 1 Aug 2008 22:13:40 -0700 (PDT)
From: richa <richa.sud@techblue.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Lucene search Format
In-Reply-To: <867513fe0808011147o49cb3fd6hf5f2a0cc13186b5b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: richa.sud@techblue.co.uk
References: <18775247.post@talk.nabble.com> <867513fe0808011147o49cb3fd6hf5f2a0cc13186b5b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Anshum,

Thanks for the reply.

I managed to reach to the user folder by the following query :
"PATH:\"/app:company_home/app:user_homes/cm:userfolder\""
It is the string parameter that i'm passing and it does stored the file in
the userfolder.

Thanx
Richa



Anshum-2 wrote:
> 
> Perhaps we could help you with the query formation in case you make your
> case a little clear viz. how do you index and what do you search for?
> 
> --
> Anshum
> Naukri Labs!
> 
> On Fri, Aug 1, 2008 at 7:44 PM, richa <richa.sud@techblue.co.uk> wrote:
> 
>>
>> Hi!!
>>
>> I'm abst new to Lucene.
>> I'm trying to create a query using Lucene search to get the correct
>> reference for a folder.
>> The query is fine if it has to go to the parent folder. But if i try to
>> reach to the child folder, it throws an error.
>> For example
>> Query query = new Query(Constants.QUERY_LANG_LUCENE,
>> PATH:\"/app:company_home/app:user_homes\"");
>>  This gets me the reference for the parent folder.
>>
>> However, i'm not able to reach to any user defined folder.  I tried
>> various
>> combinations
>> like  PATH:\"/app:company_home/app:user_homes/app:userfolder\""
>> or
>>  PATH:\"/app:company_home/app:user_homes/cm:userfolder""
>> or
>>  PATH:\"/app:company_home/app:user_homes:/cm:userfolder""
>>
>> I'm sorry if i'm not able to make any sense.
>>
>> Any help is really appreciated.
>>
>> Thanks,
>> Richa
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-search-Format-tp18775247p18775247.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-search-Format-tp18775247p18786232.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 02 17:35:39 2008
Return-Path: <java-user-return-35279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45275 invoked from network); 2 Aug 2008 17:35:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2008 17:35:39 -0000
Received: (qmail 53711 invoked by uid 500); 2 Aug 2008 17:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53536 invoked by uid 500); 2 Aug 2008 17:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53525 invoked by uid 99); 2 Aug 2008 17:35:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Aug 2008 10:35:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Aug 2008 17:34:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1537998rvb.5
        for <java-user@lucene.apache.org>; Sat, 02 Aug 2008 10:35:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8Yqgah5IYDLdgYfDpKuxX5rvwMMUkXKrffE73+CeB10=;
        b=xjfEWmEs5zheKSwfowQdGAblw+uaNB8yaFxWfFPye+xekDiOlowiFPHwt8/drtMFeH
         mpZY/n5GEWVH18e+KL81Nywvvda8mrosOUHqYhKImizXU4lmrAg32L3xZchYJN64Vyw7
         9AFPfo28lodT2o6Z8x4b0qC/0Gt7wcCD98d3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BHiJWBPJP2+IpQVYvSA7B8tXvMakzjl5QsNZZFBYMT80gIVw0zySfcTLZFfRE2LQ0E
         Xs568QWkKNGQOUBq1QZo5lDsAOuSUYoRGu5mrxoWZIgP7mhwXOR6EpwzfIPG9So/fVkP
         +sN5fxCm4p+GqovJvm785A73jrMzPUsKdGkPM=
Received: by 10.141.142.15 with SMTP id u15mr6635599rvn.171.1217698502880;
        Sat, 02 Aug 2008 10:35:02 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Sat, 2 Aug 2008 10:35:02 -0700 (PDT)
Message-ID: <359a92830808021035y70015eb8ica70ce5248092a2e@mail.gmail.com>
Date: Sat, 2 Aug 2008 13:35:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, siti_r@yahoo.com
Subject: Re: query API for program-generated query (please help..)
In-Reply-To: <460263.76661.qm@web37508.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17067_18274649.1217698502878"
References: <460263.76661.qm@web37508.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17067_18274649.1217698502878
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you looked at BooleanQuery?

Best
Erick

On Fri, Aug 1, 2008 at 1:04 PM, Siti Rochimah <siti_r@yahoo.com> wrote:

> Hi,
>
> I'm a new user for Lucene.
>
> I would like to make search-engine program with program-generated query
> rather than user-input query. If anyone knows how to make a query API for
> this purpose, please share the code...
> Thanks.
>
> siti_r
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17067_18274649.1217698502878--

From java-user-return-35280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 02 17:46:20 2008
Return-Path: <java-user-return-35280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51225 invoked from network); 2 Aug 2008 17:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2008 17:46:19 -0000
Received: (qmail 61447 invoked by uid 500); 2 Aug 2008 17:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61412 invoked by uid 500); 2 Aug 2008 17:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61401 invoked by uid 99); 2 Aug 2008 17:46:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Aug 2008 10:46:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Aug 2008 17:45:17 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1540780rvb.5
        for <java-user@lucene.apache.org>; Sat, 02 Aug 2008 10:45:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=hqNXqew1arWDPcApPX26BUcjIsjijxwovzp4cLPYOLE=;
        b=t+e+YHCJoxHykNr6+AVbzXvjmOTNNVSeKALEsL+hlaZOi0KCkQLYhE/GjZHQYr0dM8
         js8p7/w8S9CAcUuxcTiDKLbuQyHMNonxQdeNLLD9e1w0axjEefOXCe25h8tS0dONGJaC
         PJQmSJiOuI7JK6bOlKaN6JB1rV0jEs9YMnwhQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wk+8qvbWqZ97oPMLpa6rRbFWJ7VLSm06+B5XJKdGmJjw44+W1iZeI0x4hbY/APqM1R
         9Bg+A37/twzM96mWoNbAOdnKrJUJXeHbViIMv2lX+cqT4H4rtL0srTDsz2ww2sI164wY
         Lgv05k+UMPbWKSBJRHmBr3bgzjwqmirLU218k=
Received: by 10.141.123.4 with SMTP id a4mr6638194rvn.172.1217699143932;
        Sat, 02 Aug 2008 10:45:43 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Sat, 2 Aug 2008 10:45:43 -0700 (PDT)
Message-ID: <359a92830808021045g1b09d7d9o2f209ad9c99c5eef@mail.gmail.com>
Date: Sat, 2 Aug 2008 13:45:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: getting started
In-Reply-To: <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17106_11712390.1217699143934"
References: <JB_VA_EXCHANGEC81Tb00000822@Jb_va_exchange.jbmanage.corp>
	 <454006f50808010651m68360f04u868630158446a696@mail.gmail.com>
	 <59a485a30808010659r6aa6a233hd7555e4226b090e8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17106_11712390.1217699143934
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

V2VsbCwgdGhpcyBjb3VsZCBnZXQgdG8gYmUgYSByZWFsbHkgdWdseSBxdWVyeS4gTGV0J3Mgc2F5
IHlvdSBoYXZlIDEwIGxpbmVzLgpUaGVuIHRoZQpkb2Mgd291bGQgaGF2ZSAxMCBkaWZmZXJlbnQg
ZmllbGRzPyAoImxpbmUxIiwgImxpbmUyIiBldGMuKT8gVGhlbiB0byBzZWFyY2gKaXQKeW91IGhh
dmUgdG8gaGF2ZSBhbiBvciBjbGF1c2UgYWNyb3NzIGFsbCBmaWVsZHMuIEFuZCBhIGZpbGUgd2l0
aCAxMDAsMDAwCmxpbmVzIHdvdWxkIGJlCmEgMTAwLDAwMCB0ZXJtIHF1ZXJ5Li4uLi4uIE9yIEkg
bWlzdW5kZXJzdGFuZCB5b3UgY29tcGxldGVseS4KCkNhbGxpbmcgZG9jLmFkZCB3aXRoIHRoZSAq
c2FtZSogZmllbGQgKHNheSAidGV4dCIpIGlzIGEgcG9zc2liaWxpdHksCmVzcGVjaWFsbHkgaWYg
eW91CnByb3ZpZGUgeW91ciBvd24gdG9rZW5pemVyIHRoYXQgcmV0dXJucyBhIGxhcmdlIGluY3Jl
bWVudCBnYXAsIHNheSAxMDAwLgpUaGlzIG9mZnNldApnZXRzIGFkZGVkIHRvIGVhY2ggY2FsbCB0
byBkb2MuYWRkIG9uIGEgZmllbGQuIFNvIHNheSB5b3UgaGF2ZSAxMCBsaW5lcywKZWFjaCB3aXRo
IDUgdG9rZW5zLgpUaGUgZmlyc3QgdG9rZW4gb2YgZWFjaCBsaW5lIHdvdWxkIGJlIGF0IG9mZnNl
dHMKMCwgMTUsIDMwLCA0NS4uLgoKWW91IGhhdmUgYSBjb3VwbGUgb2YgY2hvaWNlcyBoZXJlLiBT
YXkgeW91IGNhbiBndWFyYW50ZWUgdGhhdCBubyBsaW5lIHdpbGwKYmUgbG9uZ2VyIHRoYW4gMTAw
IHRlcm1zLgpFYWNoIGxpbmUgY291bGQgYmVnaW4gb24gYW4gZXZlbiAxMDAgb2Zmc2V0IChhc3N1
bWluZyB5b3UncmUgbm90IGluZGV4aW5nCnNvbWV0aGluZyB3aXRoIG1hbnkgbWlsbGlvbnMKb2Yg
bGluZXMpLiBOb3csIHRvIGZpbmQgdGhlIGxpbmUgeW91IGp1c3QgZGl2aWRlIHRoZSBvZmZzZXQg
YnkgMTAwLgoKQW5vdGhlciBwb3NzaWJpbGl0eSBpcyB0byBrZWVwIGEgZmllbGQgaW4gdGhlIGRv
Y3VtZW50IHRoYXQgY29ycmVsYXRlcwpvZmZzZXRzIHRvIGxpbmVzIGFuZCByZWFkIHRoYXQKaW4g
d2hlbiB5b3UgbmVlZCB0by4KCkl0IGFsbCBkZXBlbmRzIHVwb24gd2hhdCB0aGUgcHVycG9zZSBv
ZiBuZWVkaW5nIHRvIGtlZXAgdHJhY2sgb2YgbGluZXMuIElmCml0J3MgZm9yIGEgc2luZ2xlIGRv
Y3VtZW50LAp0aGlzIGtpbmQgb2YgdGhpbmcgY2FuIHdvcmsuIEJ1dCBpZiB5b3Ugd2FudCBsaW5l
IGluZm9ybWF0aW9uIGZvciBhbGwgdGhlCmhpdHMsIGl0IGNvdWxkIGJlIHRvbyBleHBlbnNpdmUu
CgpUaGUgaW5jcmVtZW50IGdhcCB3aWxsIHBsYXkgaW50ZXJlc3RpbmcgZ2FtZXMgd2l0aCBTcGFu
IHF1ZXJpZXMgKG9yIHNsb3AgaW4KcGhyYXNlIHF1ZXJpZXMpLiBJZiB5b3UgbmVlZApwcm94aW1p
dHkgdG8gc3BhbiBsaW5lcywgdGhpcyBzY2hlbWUgbmVlZHMgc29tZSBtb2RpZmljYXRpb24uIFNh
eSBJIHdhbnQKaGl0cyB3aGVuICJmaXJzdG5hbWUiIGlzIHdpdGhpbiAxMAp0ZXJtcyBvZiAibGFz
dG5hbWUiLiBXZWxsLCBpZiB5b3UgaGF2ZSBhIGxhcmdlIGluY3JlbWVudCBnYXAgdGhpcyB3b24n
dAp3b3JrLgoKU28gaXQgd291bGQgYmUgYSBnb29kIHRoaW5nIHRvIHRlbGwgdXMgYSBiaXQgbW9y
ZSBhYm91dCB3aHkgeW91IHdhbnQgdG8KZGlzdGluZ3Vpc2ggbGluZXMgdG8gZ2V0CmJldHRlciBh
ZHZpY2UgPEc+LgoKQmVzdApFcmljawoKT24gRnJpLCBBdWcgMSwgMjAwOCBhdCA5OjU5IEFNLCDg
sqjgsr7gspfgs4fgsrbgs40g4LK44LOB4LKs4LON4LKw4LK54LON4LKu4LKj4LON4LKvIChOYWdl
c2ggUykgPApuYWdlc2hibG9yZUBnbWFpbC5jb20+IHdyb3RlOgoKPiBXaHkgc2hvdWxkIGVhY2gg
bGluZSBiZSBhIERvY3VtZW50ID8gSWYgdGhlcmUgaXMgYSBzaW5nbGUgZG9jdW1lbnQgaGF2aW5n
Cj4gZWFjaCBsaW5lIGFzIGEgRmllbGQsIHRoZW4gdGhlIHNlYXJjaCB3b3VsZCByZXN1bHQgaW4g
YSBzaW5nbGUgRG9jdW1lbnQgYXMKPiBhCj4gJ2hpdCcgbm90IHRoZSBpbmRpdmlkdWFsIGxpbmVz
IG1hdGNoaW5nIGl0LiBJcyB0aGlzIHJpZ2h0ID8KPgo+IE5hZ2VzaAo+Cj4gT24gRnJpLCBBdWcg
MSwgMjAwOCBhdCA3OjIxIFBNLCA8cm95LWx1Y2VuZS11c2VyQHhlbWFwcy5jb20+IHdyb3RlOgo+
Cj4gPiBIZWxsbyBCcml0dGFueSwKPiA+Cj4gPiBJIHRoaW5rIHRoZSBlYXNpZXN0IHRoaW5nIGZv
ciB5b3UgdG8gZG8gaXMgbWFrZSBlYWNoIGxpbmUgYSBEb2N1bWVudC4KPiAgWW91Cj4gPiBtaWdo
dCB3YW50IGEgRmlsZU5hbWUgYW5kIExpbmVOdW1iZXIgZmllbGQgb24gdG9wIG9mIGEgIlRleHQi
IGZpZWxkLCB0aGlzCj4gPiB3YXkgaWYgeW91IG5lZWQgdG8gZ2F0aGVyIGFsbCB0aGUgbGluZXMg
b2YgeW91ciBGaWxlIGJhY2sgdG9nZXRoZXIgYWdhaW4KPiA+IHlvdQo+ID4gY2FuIGRvIGEgc2Vh
cmNoIG9uIHRoZSBGaWxlTmFtZS4KPiA+Cj4gPiBTbyBpbiB5b3VyIGNhc2U6Cj4gPgo+ID4gRG9j
dW1lbnQgMQo+ID4gIEZpbGVOYW1lOiBbdGhlIGZpbGVdCj4gPiAgTGluZU51bWJlcjogMQo+ID4g
IFRleHQ6IEkgbGlrZSBhcHBsZXMKPiA+IERvY3VtZW50IDIKPiA+ICAuLi5ldGMKPiA+Cj4gPiBS
ZWdhcmRzLAo+ID4gUm95Cj4gPgo+ID4gT24gRnJpLCBBdWcgMSwgMjAwOCBhdCA5OjI4IEFNLCBC
cml0dGFueSBKYWNvYnMgPAo+IGJqYWNvYnNAamJtYW5hZ2VtZW50LmNvbQo+ID4gPndyb3RlOgo+
ID4KPiA+ID4gSnVzdCB0cnlpbmcgdG8gZ3Jhc3AgdGhlIGNvbmNlcHQuCj4gPiA+Cj4gPiA+Cj4g
PiA+Cj4gPiA+IEkgd2FudCB0byBzZWFyY2ggYSB0ZXh0IGZpbGUgd2hlcmUgZWFjaCBsaW5lIGlz
IGEgc2VwYXJhdGUgaXRlbSB0byBiZQo+ID4gPiBzZWFyY2hlZC4gIFdoZW4gdGV4dCBpdCBlbnRl
cmVkIGJ5IHRoZSB1c2VyLCBJIHdhbnQgdG8gcmV0dXJuIGFsbCB0aGUKPiA+IGxpbmVzCj4gPiA+
IGluIHdoaWNoIHRoYXQgdGV4dCBhcHBlYXJzLgo+ID4gPgo+ID4gPiBGb3IgZXhhbXBsZSwgaWYg
dGhlIHRleHQgZmlsZSBoYXM6Cj4gPiA+Cj4gPiA+IEkgbGlrZSBhcHBsZXMuCj4gPiA+Cj4gPiA+
IEkgd2VudCB0byB0aGUgc3RvcmUuCj4gPiA+Cj4gPiA+IEkgYm91Z2h0IGFuIGFwcGxlLgo+ID4g
Pgo+ID4gPgo+ID4gPgo+ID4gPiBJZiB0aGUgdXNlciBzZWFyY2hlcyAiYXBwbGUiLCBJIHdhbnQg
aXQgdG8gcmV0dXJuIHRoZSBmaXJzdCBhbmQgdGhpcmQKPiA+ID4gc2VudGVuY2VzLgo+ID4gPgo+
ID4gPgo+ID4gPgo+ID4gPiBJcyBlYWNoIHNlbnRlbmNlIGEgVG9rZW4/ICBJcyB0aGUgdXNlciBp
bnB1dCBnb2luZyB0byBiZSBhIFF1ZXJ5UGFyc2VyPwo+ID4gPiAgSG93Cj4gPiA+IHNob3VsZCBJ
IHJlYWQgaW4gdGhlIGZpbGUgc28gdGhhdCBlYWNoIGxpbmUgb2YgdGV4dCBpcyBhIHRva2VuIHRv
Cj4gc2VhcmNoPwo+ID4gPgo+ID4gPgo+ID4gPgo+ID4gPiBUaGFua3MgaW4gYWR2YW5jZS4KPiA+
ID4KPiA+ID4KPiA+ID4KPiA+ID4KPiA+ID4KPiA+ID4KPiA+ID4KPiA+ID4gQnJpdHRhbnkgSmFj
b2JzCj4gPiA+Cj4gPiA+IEphdmEgRGV2ZWxvcGVyCj4gPiA+Cj4gPiA+IEpCTWFuYWdlbWVudCwg
SW5jLgo+ID4gPgo+ID4gPiAxMiBDaHJpc3RvcGhlciBXYXksIFN1aXRlIDEwMwo+ID4gPgo+ID4g
PiBFYXRvbnRvd24sIE5KIDA3NzI0Cj4gPiA+Cj4gPiA+IHBoOiA3MzItNTQyLTkyMDAgZXh0LiAy
MjkKPiA+ID4KPiA+ID4gZmF4OiA3MzItMzgwLTA2NzgKPiA+ID4KPiA+ID4gZW1haWw6ICA8bWFp
bHRvOmJqYWNvYnNAamJtYW5hZ2VtZW50LmNvbT4gYmphY29ic0BqYm1hbmFnZW1lbnQuY29tCj4g
PiA+Cj4gPiA+Cj4gPiA+Cj4gPiA+Cj4gPgo+Cg==
------=_Part_17106_11712390.1217699143934--

From java-user-return-35281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 02 17:54:28 2008
Return-Path: <java-user-return-35281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58259 invoked from network); 2 Aug 2008 17:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2008 17:54:28 -0000
Received: (qmail 66707 invoked by uid 500); 2 Aug 2008 17:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66676 invoked by uid 500); 2 Aug 2008 17:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66665 invoked by uid 99); 2 Aug 2008 17:54:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Aug 2008 10:54:21 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Aug 2008 17:53:24 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1542917rvb.5
        for <java-user@lucene.apache.org>; Sat, 02 Aug 2008 10:53:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mTdyFl7xm3SH91mH5FoCLDUVNeGgYknpnI4DIHgjcfw=;
        b=cSbRmnjyU4yuVDKBNDJOqaKnuhHQCRA8AxseVCFT3RNVII1m/HVK8674hGl98QavPT
         QxpwaI3BGd6mtVLL7hGeA+ZsNBNHoWggAAmHqgZSCCx0ufCxyqZSKwkvztcpnUB+h4BS
         tcPnPDkekcldXniuaXTjAcWPjJfiw0u/qh8X4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LQehZIKVs4HEjPsRmSJWeJKYqTv/ZyKt4tfgfy2c3NAH7A16PnXaDujfTPXb6qxG2B
         TfwGMVsUWTAVIzZuFdeOdZgHmveVRVmJF2B2vHvXsCqJt6w1PsExNNCH4C5bUw2bognW
         5Ya3frursCKX5gzE0Z7ATQHh6XYl6VgavEMUo=
Received: by 10.141.206.13 with SMTP id i13mr6642944rvq.100.1217699614582;
        Sat, 02 Aug 2008 10:53:34 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Sat, 2 Aug 2008 10:53:34 -0700 (PDT)
Message-ID: <359a92830808021053m698b05b5leeb493ce9baafab0@mail.gmail.com>
Date: Sat, 2 Aug 2008 13:53:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search Format
In-Reply-To: <18786232.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17165_23935745.1217699614588"
References: <18775247.post@talk.nabble.com>
	 <867513fe0808011147o49cb3fd6hf5f2a0cc13186b5b@mail.gmail.com>
	 <18786232.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17165_23935745.1217699614588
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you're missing the point of the request for more info. What
analyzer do you use at index time? Query time? Do you have any
idea what tokens are actually indexed (try using Luke).

StandardAnalyzer will split your tokens out a lot of different ways, and
you can get things that *look* like matches, especially in a small
test environment.

You may still have to do some escaping, but until you know what
tokens have been indexed you're flying blind.

Best
Erick

On Sat, Aug 2, 2008 at 1:13 AM, richa <richa.sud@techblue.co.uk> wrote:

>
> Dear Anshum,
>
> Thanks for the reply.
>
> I managed to reach to the user folder by the following query :
> "PATH:\"/app:company_home/app:user_homes/cm:userfolder\""
> It is the string parameter that i'm passing and it does stored the file in
> the userfolder.
>
> Thanx
> Richa
>
>
>
> Anshum-2 wrote:
> >
> > Perhaps we could help you with the query formation in case you make your
> > case a little clear viz. how do you index and what do you search for?
> >
> > --
> > Anshum
> > Naukri Labs!
> >
> > On Fri, Aug 1, 2008 at 7:44 PM, richa <richa.sud@techblue.co.uk> wrote:
> >
> >>
> >> Hi!!
> >>
> >> I'm abst new to Lucene.
> >> I'm trying to create a query using Lucene search to get the correct
> >> reference for a folder.
> >> The query is fine if it has to go to the parent folder. But if i try to
> >> reach to the child folder, it throws an error.
> >> For example
> >> Query query = new Query(Constants.QUERY_LANG_LUCENE,
> >> PATH:\"/app:company_home/app:user_homes\"");
> >>  This gets me the reference for the parent folder.
> >>
> >> However, i'm not able to reach to any user defined folder.  I tried
> >> various
> >> combinations
> >> like  PATH:\"/app:company_home/app:user_homes/app:userfolder\""
> >> or
> >>  PATH:\"/app:company_home/app:user_homes/cm:userfolder""
> >> or
> >>  PATH:\"/app:company_home/app:user_homes:/cm:userfolder""
> >>
> >> I'm sorry if i'm not able to make any sense.
> >>
> >> Any help is really appreciated.
> >>
> >> Thanks,
> >> Richa
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Lucene-search-Format-tp18775247p18775247.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > --
> > The facts expressed here belong to everybody, the opinions to me.
> > The distinction is yours to draw............
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Lucene-search-Format-tp18775247p18786232.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17165_23935745.1217699614588--

From java-user-return-35282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 03 08:05:47 2008
Return-Path: <java-user-return-35282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16236 invoked from network); 3 Aug 2008 08:05:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2008 08:05:47 -0000
Received: (qmail 88631 invoked by uid 500); 3 Aug 2008 08:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88595 invoked by uid 500); 3 Aug 2008 08:05:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88584 invoked by uid 99); 3 Aug 2008 08:05:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 01:05:39 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 08:04:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KPYaT-0002Q8-8r
	for java-user@lucene.apache.org; Sun, 03 Aug 2008 01:05:09 -0700
Message-ID: <18796641.post@talk.nabble.com>
Date: Sun, 3 Aug 2008 01:05:09 -0700 (PDT)
From: Wojtek212 <wojtekg212@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException during indexing
In-Reply-To: <0BEB3678-FE29-4BDA-9E3D-A07C126AAB03@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: wojtekg212@gmail.com
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com> <18769652.post@talk.nabble.com> <D7FAE9FD-190D-455F-9FB6-A55B4C8F0A8B@mikemccandless.com> <18772749.post@talk.nabble.com> <BA2E10E5-A24D-4003-9F4F-72805BB1F8B1@mikemccandless.com> <18773824.post@talk.nabble.com> <18775319.post@talk.nabble.com> <0BEB3678-FE29-4BDA-9E3D-A07C126AAB03@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike,
You were right I had 2 IndexWriters. I've checked again and it turned out I
had 2 IndexManagers loaded by  2 different classloaders, so even if stored
it in static Map, it didn't help.

Anyway thanks for help. But I have last question. Is it correct if I use
IndexSearcher during wrking IndexWriter? Or should these operations be
synchronized?
-- 
View this message in context: http://www.nabble.com/FileNotFoundException-during-indexing-tp18766343p18796641.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 03 09:10:27 2008
Return-Path: <java-user-return-35283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72817 invoked from network); 3 Aug 2008 09:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2008 09:10:27 -0000
Received: (qmail 21824 invoked by uid 500); 3 Aug 2008 09:10:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21777 invoked by uid 500); 3 Aug 2008 09:10:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21766 invoked by uid 99); 3 Aug 2008 09:10:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 02:10:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.91.153] (HELO web37506.mail.mud.yahoo.com) (209.191.91.153)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 03 Aug 2008 09:09:24 +0000
Received: (qmail 63885 invoked by uid 60001); 3 Aug 2008 09:08:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=dSsxB1aoBusnktEl5bRzrb/hBJfa1OdhvOeu+F979gyL2G8bPfrr7mXSz0em8u/8VAjq8XIpFzlpG7dBVtTpUmf4GViCpSB+Ze703E+zANdjffQzmqy5r23cGCTkDsbwnv1jSqpg/B49aLOJMZ+/Fz2Tkrn0jXMrGk8q8HJnBOE=;
Received: from [161.139.100.66] by web37506.mail.mud.yahoo.com via HTTP; Sun, 03 Aug 2008 02:08:45 PDT
X-Mailer: YahooMailWebService/0.7.218
Date: Sun, 3 Aug 2008 02:08:45 -0700 (PDT)
From: Siti Rochimah <siti_r@yahoo.com>
Reply-To: siti_r@yahoo.com
Subject: Re: query API for program-generated query (please help..)
To: java-user@lucene.apache.org
In-Reply-To: <359a92830808021035y70015eb8ica70ce5248092a2e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <361235.63039.qm@web37506.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

yes, I have...
but, as far as I know.. to make a boolean query, we also have to make it by inputting a boolean expressions from the command line. 

All I want to do is making the query from textual file. I read file content, placing it in a string variable and passing it to the parser. 
But, in my experience, this variable is always detected as a null variable by the parser, even if the variable is containing some texts (can be displayed by system.out.printf().

This is messages that I have found from Lucene documentations:

"Although Lucene provides the ability to create your own queries through its API, it also provides a rich query language through the Query Parser, a lexer which interprets a string into a Lucene Query using JavaCC.
...
Before choosing to use the provided Query Parser, please consider the following:
1. If you are programmatically generating a query string and then parsing it with the query parser then you should seriously consider building your queries directly with the query API. In other words, the query parser is designed for human-entered text, not for program-generated text."


That's why I am searching for this kind of API...




--- On Sun, 8/3/08, Erick Erickson <erickerickson@gmail.com> wrote:

> From: Erick Erickson <erickerickson@gmail.com>
> Subject: Re: query API for program-generated query (please help..)
> To: java-user@lucene.apache.org, siti_r@yahoo.com
> Date: Sunday, August 3, 2008, 12:35 AM
> Have you looked at BooleanQuery?
> 
> Best
> Erick
> 
> On Fri, Aug 1, 2008 at 1:04 PM, Siti Rochimah
> <siti_r@yahoo.com> wrote:
> 
> > Hi,
> >
> > I'm a new user for Lucene.
> >
> > I would like to make search-engine program with
> program-generated query
> > rather than user-input query. If anyone knows how to
> make a query API for
> > this purpose, please share the code...
> > Thanks.
> >
> > siti_r
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 03 09:33:58 2008
Return-Path: <java-user-return-35284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81637 invoked from network); 3 Aug 2008 09:33:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2008 09:33:58 -0000
Received: (qmail 31829 invoked by uid 500); 3 Aug 2008 09:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31789 invoked by uid 500); 3 Aug 2008 09:33:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31778 invoked by uid 99); 3 Aug 2008 09:33:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 02:33:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 09:32:53 +0000
Received: by wx-out-0506.google.com with SMTP id h29so378843wxd.20
        for <java-user@lucene.apache.org>; Sun, 03 Aug 2008 02:33:18 -0700 (PDT)
Received: by 10.70.25.1 with SMTP id 1mr16078417wxy.75.1217755998326;
        Sun, 03 Aug 2008 02:33:18 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 31sm4700195wri.14.2008.08.03.02.33.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 03 Aug 2008 02:33:17 -0700 (PDT)
Message-Id: <79A33749-522B-408A-83AB-A6B32D01A448@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18796641.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: FileNotFoundException during indexing
Date: Sun, 3 Aug 2008 05:33:17 -0400
References: <18766343.post@talk.nabble.com> <B1E9BBA5-F5E1-4B9F-A6B8-A66D3B879D3A@mikemccandless.com> <18769652.post@talk.nabble.com> <D7FAE9FD-190D-455F-9FB6-A55B4C8F0A8B@mikemccandless.com> <18772749.post@talk.nabble.com> <BA2E10E5-A24D-4003-9F4F-72805BB1F8B1@mikemccandless.com> <18773824.post@talk.nabble.com> <18775319.post@talk.nabble.com> <0BEB3678-FE29-4BDA-9E3D-A07C126AAB03@mikemccandless.com> <18796641.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Wojtek212 wrote:

> You were right I had 2 IndexWriters. I've checked again and it  
> turned out I
> had 2 IndexManagers loaded by  2 different classloaders, so even if  
> stored
> it in static Map, it didn't help.

Phew!  That's tricky (two different classloaders).  Good sleuthing

> Anyway thanks for help.

You're welcome!

> But I have last question. Is it correct if I use
> IndexSearcher during wrking IndexWriter? Or should these operations be
> synchronized?

It's fine to use these two at once.  IndexSearcher will search the  
point-in-time snapshot as of when it was opened, so it will see none  
of the changes done by IndexWriter until you reopen it.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 03 09:52:57 2008
Return-Path: <java-user-return-35285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89968 invoked from network); 3 Aug 2008 09:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2008 09:52:57 -0000
Received: (qmail 38300 invoked by uid 500); 3 Aug 2008 09:52:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38255 invoked by uid 500); 3 Aug 2008 09:52:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38244 invoked by uid 99); 3 Aug 2008 09:52:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 02:52:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.91.149] (HELO web37502.mail.mud.yahoo.com) (209.191.91.149)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 03 Aug 2008 09:51:50 +0000
Received: (qmail 96474 invoked by uid 60001); 3 Aug 2008 09:51:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=YF0wcHfZFRHOPl+Kw5zfzhgT0e2RSxTVHMXrJVeLdVRyy9LLqReKcQM4Oa8beG0evZP8dD1/5cMyp6lNIg1qSskYL53eYLnYCfKWFg0+Wx3cWmlOF3cSkFqzKn6eSNIzUUW/EOoadYaRbrPasbNt4RKV2lN34jyWSQ1JuDzEIGA=;
Received: from [161.139.100.66] by web37502.mail.mud.yahoo.com via HTTP; Sun, 03 Aug 2008 02:51:15 PDT
X-Mailer: YahooMailWebService/0.7.218
Date: Sun, 3 Aug 2008 02:51:15 -0700 (PDT)
From: Siti Rochimah <siti_r@yahoo.com>
Reply-To: siti_r@yahoo.com
Subject: Re: query API for program-generated query (please help..)
To: java-user@lucene.apache.org
In-Reply-To: <40047.49681.qm@web50311.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <435453.94919.qm@web37502.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, it could be, I'm sure, I have tried...
But, I don't want to input anything from the command line.
I am using Jswing GUI in my program so inputting from command line will 'disturb' the program 'look-and-feel'....
I just want to read text file content as a query and passing it through the parser.. but it always failed.

Or... is there other any techniques that I can implement...???



--- On Sat, 8/2/08, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:

> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> Subject: Re: query API for program-generated query (please help..)
> To: java-user@lucene.apache.org
> Date: Saturday, August 2, 2008, 12:51 AM
> Hi,
> 
> It could be enough to simply combine both queries into a
> single query string and pass that on as the query to the
> IndexSearcher.
> 
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> 
> ----- Original Message ----
> > From: Siti Rochimah <siti_r@yahoo.com>
> > To: java-user@lucene.apache.org
> > Sent: Friday, August 1, 2008 1:04:27 PM
> > Subject: query API for program-generated query (please
> help..)
> > 
> > Hi,
> > 
> > I'm a new user for Lucene.
> > 
> > I would like to make search-engine program with
> program-generated query rather 
> > than user-input query. If anyone knows how to make a
> query API for this purpose, 
> > please share the code...
> > Thanks.
> > 
> > siti_r
> > 
> > 
> >       
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 03 12:50:05 2008
Return-Path: <java-user-return-35286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71023 invoked from network); 3 Aug 2008 12:50:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2008 12:50:05 -0000
Received: (qmail 11477 invoked by uid 500); 3 Aug 2008 12:49:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11445 invoked by uid 500); 3 Aug 2008 12:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11434 invoked by uid 99); 3 Aug 2008 12:49:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 05:49:57 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 12:49:00 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1468654fkq.5
        for <java-user@lucene.apache.org>; Sun, 03 Aug 2008 05:49:22 -0700 (PDT)
Received: by 10.125.80.1 with SMTP id h1mr659667mkl.125.1217767761996;
        Sun, 03 Aug 2008 05:49:21 -0700 (PDT)
Received: by 10.125.77.17 with HTTP; Sun, 3 Aug 2008 05:49:21 -0700 (PDT)
Message-ID: <7e536b1f0808030549u437646eegb4ff9c0cb66e86f1@mail.gmail.com>
Date: Sun, 3 Aug 2008 14:49:21 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <85d3c3b60807301344w22729a1ci7f3f5073d30b0bc1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14962_23729895.1217767761998"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <85d3c3b60807301344w22729a1ci7f3f5073d30b0bc1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14962_23729895.1217767761998
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Don't use JDBM if you want a BTree it is too slow... Been there.

Use Xindice's Filer class: org.apache.xindice.core.filer.Filer and
instantiate a org.apache.xindice.core.filer.BTreeFiler which is a whole lot
faster.

JDBM and Xindice are comparable in reading speed but surely not in writing.

Check out my implementation of the BTree:
http://dev.tailsweep.com/svn/abstractcache/trunk/src/main/java/org/tailsweep/abstractcache/disk/xindice/TreeCache.java

Kindly

//Marcus



On Wed, Jul 30, 2008 at 10:44 PM, Jason Rutherglen <
jason.rutherglen@gmail.com> wrote:

> A possible open source solution using a page based database would be to
> store the documents in http://jdbm.sourceforge.net/ which offers BTree,
> Hash, and raw page based access.  One would use a primary key type of
> persistent ID to lookup the document data from JDBM.
>
> Would be a good Lucene project to implement and I think a good solution for
> Ocean LUCENE-1313.  Storing documents in Lucene is fine but for a realtime
> search index with many documents being deleted a lot of garbage builds up.
> Frequent merging of documents files becomes IO intensive.
>
> Of course one issue with JDBM which I am not sure other SQL page based
> systems do is load individual fields directly from disk rather than load
> the
> entire page into RAM first, then load the pages. Maybe it does not matter.
>
> On Mon, Jul 28, 2008 at 9:53 PM, John Evans <john@jpevans.com> wrote:
>
> > Hi All,
> >
> > I have successfully used Lucene in the "tradtiional" way to provide
> > full-text search for various websites.  Now I am tasked with developing a
> > data-store to back a web crawler.  The crawler can be configured to
> > retrieve
> > arbitrary fields from arbitrary pages, so the result is that each
> document
> > may have a random assortment of fields.  It seems like Lucene may be a
> > natural fit for this scenario since you can obviously add arbitrary
> fields
> > to each document and you can store the actually data in the database.
> I've
> > done some research to make sure that it would meet all of our individual
> > requirements (that we can iterate over documents, update (delete/replace)
> > documents, etc.) and everything looks good.  I've also seen a couple of
> > references around the net to other people trying similar things...
> however,
> > I know it's not meant to be used this way, so I thought I would post here
> > and ask for guidance?  Has anyone done something similar?  Is there any
> > specific reason to think this is a bad idea?
> >
> > The one thing that I am least certain about his how well it will scale.
>  We
> > may reach the point where we have tens of millions of documents and a
> high
> > percentage of those documents may be relatively large (10k-50k each).  We
> > actually would NOT be expecting/needing Lucene's normal extreme fast text
> > search times for this, but we would need reasonable times for adding new
> > documents to the index, retrieving documents by ID (for iterating over
> all
> > documents), optimizing the index after a series of changes, etc.
> >
> > Any advice/input/theories anyone can contribute would be greatly
> > appreciated.
> >
> > Thanks,
> > -
> > John
> >
>



-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_14962_23729895.1217767761998--

From java-user-return-35287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 03 13:24:22 2008
Return-Path: <java-user-return-35287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84364 invoked from network); 3 Aug 2008 13:24:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2008 13:24:21 -0000
Received: (qmail 30758 invoked by uid 500); 3 Aug 2008 13:24:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30725 invoked by uid 500); 3 Aug 2008 13:24:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30714 invoked by uid 99); 3 Aug 2008 13:24:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 06:24:15 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 13:23:17 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1475946fkq.5
        for <java-user@lucene.apache.org>; Sun, 03 Aug 2008 06:23:42 -0700 (PDT)
Received: by 10.125.68.6 with SMTP id v6mr658003mkk.119.1217769821967;
        Sun, 03 Aug 2008 06:23:41 -0700 (PDT)
Received: by 10.125.77.17 with HTTP; Sun, 3 Aug 2008 06:23:41 -0700 (PDT)
Message-ID: <7e536b1f0808030623w5ea4e0b7w3566d5571988d0ca@mail.gmail.com>
Date: Sun, 3 Aug 2008 15:23:41 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <32dca9ed0807310746t2d414517i77cbd28cf755070c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15066_16797091.1217769821959"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
	 <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
	 <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
	 <18750334.post@talk.nabble.com>
	 <151B185F-C80F-4320-903F-2A1FF49EA3F2@apache.org>
	 <01a501c8f304$d1d70e90$610cc30a@sv.us.sonicwall.com>
	 <18754258.post@talk.nabble.com>
	 <32dca9ed0807310746t2d414517i77cbd28cf755070c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15066_16797091.1217769821959
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi.

I have actually created a solution where I use Lucene as Tuple (key/value)
storage. It was surprisingly fast and it has more balanced read/write
performance compared to BTrees but I think it is a little slower in
retrieving value per key than a Tree.

Look here for hints:
http://dev.tailsweep.com/svn/abstractcache/trunk/src/main/java/org/tailsweep/abstractcache/disk/lucene/LuceneCache.java

Kindly

//Marcus



On Thu, Jul 31, 2008 at 4:46 PM, Andy Liu <andyliu1227@gmail.com> wrote:

> If essentially all you need is key-value storage, Berkeley DB for Java
> works
> well.  Lookup by ID is fast, can iterate through documents, supports
> secondary keys, updates, etc.
>
> Lucene would work relatively well for this, although inserting documents
> might not be as fast, because segments need to be merged and data ends up
> getting copied over again at certain points.  So if you're running a batch
> process with a lot of inserts, you might get better throughput with BDB as
> opposed to Lucene, but, of course, benchmark to confirm ;)
>
> Andy
>
> On Thu, Jul 31, 2008 at 9:12 AM, Karsten F.
> <karsten-lucene@fiz-technik.de>wrote:
>
> >
> > Hi Ganesh,
> >
> > in this Thread nobody said, that lucene is a good storage server.
> > Only "it could be used as storage server" (Grant: Connect data storage
> with
> > simple, fast lookup and Lucene..)
> >
> > I don't now about automatic rentention.
> > But for the rest in your list of features I suggest to take a deep look
> to
> >  - Jackrabbit (Standard jcr jsr170 implemention, I like the webDAV
> support)
> >  - dSpace (real working content repository software, with good
> permissions
> > management)
> >
> > Both use lucene for searching
> >
> > Best regards
> >    Karsten
> >
> >
> > Ganesh - yahoo wrote:
> > >
> > > which one will be the best to use as storage server. Lucene or
> > Jackrabbit.
> > >
> > > My requirement is to provide support to
> > > 1) Archive the documents
> > > 2) Do full text search on the documents.
> > > 3) Do backup the index store and archive store. [periodical basis]
> > > 4) Remove the documents after certain period [rentention policy]
> > >
> > > Whether Lucene could be used as archival store. Most of them in this
> > > mailing
> > > list said 'yes'. If so going for separate database to archive the data
> > and
> > > separate database to index it, will be better option or one database to
> > be
> > > used as archive and index.
> > >
> > > One more idea from this list is to use Jackrabbit / JDBM / My SQL to
> > > archive
> > > the data. Which will be the best?
> > >
> > > I am in desiging phase and i have time to explore and prototype any
> other
> > > products. Please do suggest me a good one.
> > >
> > > Regards
> > > Ganesh
> > >
> > >
> > >
> >
> > --
> > View this message in context:
> >
> http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18754258.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_15066_16797091.1217769821959--

From java-user-return-35288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 03 15:08:41 2008
Return-Path: <java-user-return-35288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15258 invoked from network); 3 Aug 2008 15:08:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2008 15:08:41 -0000
Received: (qmail 89788 invoked by uid 500); 3 Aug 2008 15:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89759 invoked by uid 500); 3 Aug 2008 15:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89747 invoked by uid 99); 3 Aug 2008 15:08:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 08:08:34 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 15:07:36 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1495982fkq.5
        for <java-user@lucene.apache.org>; Sun, 03 Aug 2008 08:07:43 -0700 (PDT)
Received: by 10.125.106.1 with SMTP id i1mr661196mkm.9.1217776063392;
        Sun, 03 Aug 2008 08:07:43 -0700 (PDT)
Received: by 10.125.77.17 with HTTP; Sun, 3 Aug 2008 08:07:43 -0700 (PDT)
Message-ID: <7e536b1f0808030807m26968ccsfc83ba5bcdc94735@mail.gmail.com>
Date: Sun, 3 Aug 2008 17:07:43 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <020901c8f399$b4104490$610cc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15855_7645145.1217776063378"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
	 <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
	 <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
	 <18750334.post@talk.nabble.com>
	 <151B185F-C80F-4320-903F-2A1FF49EA3F2@apache.org>
	 <01a501c8f304$d1d70e90$610cc30a@sv.us.sonicwall.com>
	 <18754258.post@talk.nabble.com>
	 <32dca9ed0807310746t2d414517i77cbd28cf755070c@mail.gmail.com>
	 <020901c8f399$b4104490$610cc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15855_7645145.1217776063378
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

And for the heck of it I implemented a berkeleydb "java.util.Map" storage as
well.

http://dev.tailsweep.com/svn/abstractcache/trunk/src/main/java/org/tailsweep/abstractcache/disk/sleepycat/BerkelyDbCache.java

Kindly

//Marcus

On Fri, Aug 1, 2008 at 7:44 AM, Ganesh - yahoo <emailgane@yahoo.co.in>wrote:

> Thanks Andy and Karsten.
>
> ----- Original Message ----- From: "Andy Liu" <andyliu1227@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, July 31, 2008 8:16 PM
> Subject: Re: Using lucene as a database... good idea or bad idea?
>
>
>
>  If essentially all you need is key-value storage, Berkeley DB for Java
>> works
>> well.  Lookup by ID is fast, can iterate through documents, supports
>> secondary keys, updates, etc.
>>
>> Lucene would work relatively well for this, although inserting documents
>> might not be as fast, because segments need to be merged and data ends up
>> getting copied over again at certain points.  So if you're running a batch
>> process with a lot of inserts, you might get better throughput with BDB as
>> opposed to Lucene, but, of course, benchmark to confirm ;)
>>
>> Andy
>>
>> On Thu, Jul 31, 2008 at 9:12 AM, Karsten F.
>> <karsten-lucene@fiz-technik.de>wrote:
>>
>>
>>> Hi Ganesh,
>>>
>>> in this Thread nobody said, that lucene is a good storage server.
>>> Only "it could be used as storage server" (Grant: Connect data storage
>>> with
>>> simple, fast lookup and Lucene..)
>>>
>>> I don't now about automatic rentention.
>>> But for the rest in your list of features I suggest to take a deep look
>>> to
>>>  - Jackrabbit (Standard jcr jsr170 implemention, I like the webDAV
>>> support)
>>>  - dSpace (real working content repository software, with good
>>> permissions
>>> management)
>>>
>>> Both use lucene for searching
>>>
>>> Best regards
>>>   Karsten
>>>
>>>
>>> Ganesh - yahoo wrote:
>>> >
>>> > which one will be the best to use as storage server. Lucene or
>>> Jackrabbit.
>>> >
>>> > My requirement is to provide support to
>>> > 1) Archive the documents
>>> > 2) Do full text search on the documents.
>>> > 3) Do backup the index store and archive store. [periodical basis]
>>> > 4) Remove the documents after certain period [rentention policy]
>>> >
>>> > Whether Lucene could be used as archival store. Most of them in this
>>> > mailing
>>> > list said 'yes'. If so going for separate database to archive the data
>>> and
>>> > separate database to index it, will be better option or one database to
>>> be
>>> > used as archive and index.
>>> >
>>> > One more idea from this list is to use Jackrabbit / JDBM / My SQL to
>>> > archive
>>> > the data. Which will be the best?
>>> >
>>> > I am in desiging phase and i have time to explore and prototype any >
>>> other
>>> > products. Please do suggest me a good one.
>>> >
>>> > Regards
>>> > Ganesh
>>> >
>>> >
>>> >
>>>
>>> --
>>> View this message in context:
>>>
>>> http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18754258.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_15855_7645145.1217776063378--

From java-user-return-35289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 03 15:09:19 2008
Return-Path: <java-user-return-35289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15422 invoked from network); 3 Aug 2008 15:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2008 15:09:18 -0000
Received: (qmail 91487 invoked by uid 500); 3 Aug 2008 15:09:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91458 invoked by uid 500); 3 Aug 2008 15:09:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91447 invoked by uid 99); 3 Aug 2008 15:09:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 08:09:11 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 209.85.128.184 is neither permitted nor denied by domain of marcus.herou@tailsweep.com)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Aug 2008 15:08:14 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1495982fkq.5
        for <java-user@lucene.apache.org>; Sun, 03 Aug 2008 08:08:40 -0700 (PDT)
Received: by 10.125.125.6 with SMTP id c6mr660009mkn.108.1217776120457;
        Sun, 03 Aug 2008 08:08:40 -0700 (PDT)
Received: by 10.125.77.17 with HTTP; Sun, 3 Aug 2008 08:08:40 -0700 (PDT)
Message-ID: <7e536b1f0808030808l48d60973ya5f9ac770b0d0d3c@mail.gmail.com>
Date: Sun, 3 Aug 2008 17:08:40 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <7e536b1f0808030807m26968ccsfc83ba5bcdc94735@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15861_21279337.1217776120460"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
	 <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
	 <18750334.post@talk.nabble.com>
	 <151B185F-C80F-4320-903F-2A1FF49EA3F2@apache.org>
	 <01a501c8f304$d1d70e90$610cc30a@sv.us.sonicwall.com>
	 <18754258.post@talk.nabble.com>
	 <32dca9ed0807310746t2d414517i77cbd28cf755070c@mail.gmail.com>
	 <020901c8f399$b4104490$610cc30a@sv.us.sonicwall.com>
	 <7e536b1f0808030807m26968ccsfc83ba5bcdc94735@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15861_21279337.1217776120460
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ah well some test classes could be appropriate:
http://dev.tailsweep.com/svn/abstractcache/trunk/src/test/java/org/tailsweep/abstractcache/test/

On Sun, Aug 3, 2008 at 5:07 PM, Marcus Herou <marcus.herou@tailsweep.com>wrote:

> And for the heck of it I implemented a berkeleydb "java.util.Map" storage
> as well.
>
>
> http://dev.tailsweep.com/svn/abstractcache/trunk/src/main/java/org/tailsweep/abstractcache/disk/sleepycat/BerkelyDbCache.java
>
> Kindly
>
> //Marcus
>
>
> On Fri, Aug 1, 2008 at 7:44 AM, Ganesh - yahoo <emailgane@yahoo.co.in>wrote:
>
>> Thanks Andy and Karsten.
>>
>> ----- Original Message ----- From: "Andy Liu" <andyliu1227@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Thursday, July 31, 2008 8:16 PM
>> Subject: Re: Using lucene as a database... good idea or bad idea?
>>
>>
>>
>>  If essentially all you need is key-value storage, Berkeley DB for Java
>>> works
>>> well.  Lookup by ID is fast, can iterate through documents, supports
>>> secondary keys, updates, etc.
>>>
>>> Lucene would work relatively well for this, although inserting documents
>>> might not be as fast, because segments need to be merged and data ends up
>>> getting copied over again at certain points.  So if you're running a
>>> batch
>>> process with a lot of inserts, you might get better throughput with BDB
>>> as
>>> opposed to Lucene, but, of course, benchmark to confirm ;)
>>>
>>> Andy
>>>
>>> On Thu, Jul 31, 2008 at 9:12 AM, Karsten F.
>>> <karsten-lucene@fiz-technik.de>wrote:
>>>
>>>
>>>> Hi Ganesh,
>>>>
>>>> in this Thread nobody said, that lucene is a good storage server.
>>>> Only "it could be used as storage server" (Grant: Connect data storage
>>>> with
>>>> simple, fast lookup and Lucene..)
>>>>
>>>> I don't now about automatic rentention.
>>>> But for the rest in your list of features I suggest to take a deep look
>>>> to
>>>>  - Jackrabbit (Standard jcr jsr170 implemention, I like the webDAV
>>>> support)
>>>>  - dSpace (real working content repository software, with good
>>>> permissions
>>>> management)
>>>>
>>>> Both use lucene for searching
>>>>
>>>> Best regards
>>>>   Karsten
>>>>
>>>>
>>>> Ganesh - yahoo wrote:
>>>> >
>>>> > which one will be the best to use as storage server. Lucene or
>>>> Jackrabbit.
>>>> >
>>>> > My requirement is to provide support to
>>>> > 1) Archive the documents
>>>> > 2) Do full text search on the documents.
>>>> > 3) Do backup the index store and archive store. [periodical basis]
>>>> > 4) Remove the documents after certain period [rentention policy]
>>>> >
>>>> > Whether Lucene could be used as archival store. Most of them in this
>>>> > mailing
>>>> > list said 'yes'. If so going for separate database to archive the data
>>>> and
>>>> > separate database to index it, will be better option or one database
>>>> to
>>>> be
>>>> > used as archive and index.
>>>> >
>>>> > One more idea from this list is to use Jackrabbit / JDBM / My SQL to
>>>> > archive
>>>> > the data. Which will be the best?
>>>> >
>>>> > I am in desiging phase and i have time to explore and prototype any >
>>>> other
>>>> > products. Please do suggest me a good one.
>>>> >
>>>> > Regards
>>>> > Ganesh
>>>> >
>>>> >
>>>> >
>>>>
>>>> --
>>>> View this message in context:
>>>>
>>>> http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18754258.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Marcus Herou CTO and co-founder Tailsweep AB
> +46702561312
> marcus.herou@tailsweep.com
> http://www.tailsweep.com/
> http://blogg.tailsweep.com/
>



-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_15861_21279337.1217776120460--

From java-user-return-35290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 07:49:08 2008
Return-Path: <java-user-return-35290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85776 invoked from network); 4 Aug 2008 07:49:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 07:49:08 -0000
Received: (qmail 12229 invoked by uid 500); 4 Aug 2008 07:49:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12195 invoked by uid 500); 4 Aug 2008 07:49:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12184 invoked by uid 99); 4 Aug 2008 07:49:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 00:49:01 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 07:48:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KPunu-0001ka-PS
	for java-user@lucene.apache.org; Mon, 04 Aug 2008 00:48:30 -0700
Message-ID: <18807014.post@talk.nabble.com>
Date: Mon, 4 Aug 2008 00:48:30 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: how to get  all unique  documents based on keyword feild
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi ALL,

First thnx for spending time to read the message.
Am using MatchAllDocsQuery to get all the documents .
But i need documents that are  unique based on keyword .
in my document keyword feild  had values like 1,2,2,3,4,5,5,5,5 so on.....
so the result i need is only 1,2,3,4,5 so on ... unique
but MatchAllDocsQuery will get all documents 1,2,3,4,5

Do i have any class ,where i will get  unique documents based on keyword.
-- 
View this message in context: http://www.nabble.com/how-to-get--all-unique--documents-based-on-keyword-feild-tp18807014p18807014.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 10:06:26 2008
Return-Path: <java-user-return-35291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47411 invoked from network); 4 Aug 2008 10:06:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 10:06:25 -0000
Received: (qmail 40754 invoked by uid 500); 4 Aug 2008 10:06:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40733 invoked by uid 500); 4 Aug 2008 10:06:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40721 invoked by uid 99); 4 Aug 2008 10:06:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 03:06:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 10:05:22 +0000
Received: by yw-out-2324.google.com with SMTP id 3so943677ywj.5
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 03:05:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=iJaQbPv5XfL7jlsMJWTWyLGmjmC3DiCgZd+cIKcHQPw=;
        b=tmnstKlWAjhPjxjjtuz8cpuWEXphkSysKdWuuVCIrpA6YQfpKoiGjKVMl3OhPwiSA4
         5eRTzJ+vbnYVuC0mV2rga+/v0CuMu7W6brhnBJeJtpU9ungrROhFq6jw0GX6xmkozdN8
         eIP3TV1BjXJlQiMY+NHbBmZ4ELdjKN4vr0FR0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=iMToQAPXrrAcH6VqfFeIpHLLFtSzJVmGngXiRzR86drRGgAoW9DlPQJYHplrXiJIXB
         ps1KA8pxP+mlMGz8wlcz2n8mNN2smYaJp+DI3zvdo0z90EXPXnK9bbX/akYdl2m5RCfr
         ygIMzImvgysgAUslx6x5J2IflpO8Tu8jcBqvk=
Received: by 10.151.149.14 with SMTP id b14mr1011751ybo.236.1217844349072;
        Mon, 04 Aug 2008 03:05:49 -0700 (PDT)
Received: by 10.151.84.16 with HTTP; Mon, 4 Aug 2008 03:05:48 -0700 (PDT)
Message-ID: <5816fbdd0808040305h33563ed5rd275e833ac3993dc@mail.gmail.com>
Date: Mon, 4 Aug 2008 15:35:48 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: escaping special characters
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11453_12761055.1217844348893"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11453_12761055.1217844348893
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I followed the following procedure to escape special characteres.

String escapedKeywords = QueryParser.escape(keywords);
Query query = new QueryParser("content", new
StandardAnalyzer()).parse(escapedKeywords);

this works with most of the special characters like * and ~ except \ . I
can't do a search for a keyword like "ho\w" and get results.
am I doing anything wrong here.


Thanks,
Kalani
-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_11453_12761055.1217844348893--

From java-user-return-35292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 10:42:55 2008
Return-Path: <java-user-return-35292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62916 invoked from network); 4 Aug 2008 10:42:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 10:42:52 -0000
Received: (qmail 93379 invoked by uid 500); 4 Aug 2008 10:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92334 invoked by uid 500); 4 Aug 2008 10:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92321 invoked by uid 99); 4 Aug 2008 10:42:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 03:42:40 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 10:41:44 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2105008rvb.5
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 03:41:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=BiixScCwi+aqxAs83nDygUuUpkZMXUzCi7qJlf/Q7hM=;
        b=eS81MnKwiksoxnbRtffi0RArqEViW2d/dbcDNQfWWdjSfMuSqtt8KJLngndeLEcwjw
         mr14N+YA/qkaXfHwTFfNlWy6GfsVJIuOQt6OQeNS8wJX0Nh+gyO+QzZw3SJ/KY68WLeR
         RLBM0jcpj/dIzni36XFxD9d+T2QG+0PaDaCpo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Yl1KJu/G727spo17+ubv+Wt9tKyPmV1ijE4xaY4R9I4EDjMEY+8PD3Xsv5rJSZQcGr
         aJwEHpiqNtmEof86Bme4ZBNcUoD1Nq5moz04rdKGPhZfeuIUgOrNMvgjA36MlIqH8GAT
         tNDqY0vjGg9nw19Ytow6WFNUXHawEYxwE4Cw8=
Received: by 10.141.35.21 with SMTP id n21mr7467095rvj.115.1217846514697;
        Mon, 04 Aug 2008 03:41:54 -0700 (PDT)
Received: by 10.140.158.5 with HTTP; Mon, 4 Aug 2008 03:41:54 -0700 (PDT)
Message-ID: <8c4e68610808040341i634e8535ob7e2ab8d54f92aec@mail.gmail.com>
Date: Mon, 4 Aug 2008 11:41:54 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to get all unique documents based on keyword feild
In-Reply-To: <18807014.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18807014.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like a thread from a few weeks ago.
http://www.gossamer-threads.com/lists/lucene/java-user/63141

DuplicateFilter may be what you're looking for.


--
Ian.



On Mon, Aug 4, 2008 at 8:48 AM, sandyg <gaddamsandeeps@gmail.com> wrote:
>
> Hi ALL,
>
> First thnx for spending time to read the message.
> Am using MatchAllDocsQuery to get all the documents .
> But i need documents that are  unique based on keyword .
> in my document keyword feild  had values like 1,2,2,3,4,5,5,5,5 so on.....
> so the result i need is only 1,2,3,4,5 so on ... unique
> but MatchAllDocsQuery will get all documents 1,2,3,4,5
>
> Do i have any class ,where i will get  unique documents based on keyword.
> --
> View this message in context: http://www.nabble.com/how-to-get--all-unique--documents-based-on-keyword-feild-tp18807014p18807014.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 11:41:01 2008
Return-Path: <java-user-return-35293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90431 invoked from network); 4 Aug 2008 11:41:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 11:41:01 -0000
Received: (qmail 59516 invoked by uid 500); 4 Aug 2008 11:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59481 invoked by uid 500); 4 Aug 2008 11:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59470 invoked by uid 99); 4 Aug 2008 11:40:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 04:40:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wysiecki@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 11:39:55 +0000
Received: by ug-out-1314.google.com with SMTP id h3so639385ugf.29
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 04:40:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:content-transfer-encoding
         :content-disposition:x-google-sender-auth;
        bh=CzAFLPYtGFYvlxbj2KyJ1awLNsGSSr9Jxwxni4qVKus=;
        b=Pb9WY7Yl0BVFJQFjp4NND3PedDBAqv0uQP1f//9u20ZkuEmNOpxKWoF0ShTC+8CNcs
         6rGoH0FDWued5QuRT12jmI3Q68fHbIHWKDazNg5KezRCfJd+haIB2879Uu2TYmrEmEeK
         lNLALl4eYXtz5moVpvH9llUzN4vb8yLokf17Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=xJcMJTxFa8Q817lhgTgVbYlFx5Sff3rmiTEaacVAb5twmn6ldKL1sewQmd+1haQKvj
         kpVHsIKLWSx43oPcAdvwrv1XwTpS9yQpK2Wx1C0OR38FkcpVeVEEYeNLi9B8v8LTmgMY
         PSq8zzIRI1FX7n+q2eJSW7PtwbhZeDe7BXr3k=
Received: by 10.125.124.10 with SMTP id b10mr713811mkn.31.1217850003508;
        Mon, 04 Aug 2008 04:40:03 -0700 (PDT)
Received: by 10.125.128.2 with HTTP; Mon, 4 Aug 2008 04:40:03 -0700 (PDT)
Message-ID: <b0f78250808040440s5b4bc515i4ac3fc4c739f9232@mail.gmail.com>
Date: Mon, 4 Aug 2008 13:40:03 +0200
From: "Martin vWysiecki" <wysiecki@aspedia.de>
Sender: wysiecki@gmail.com
To: java-user@lucene.apache.org
Subject: Get BestFrequentKeywords
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Google-Sender-Auth: 61a20ce93411d18e
X-Virus-Checked: Checked by ClamAV on apache.org

Hello to all,

Thanks for help in advance.

Example docs:

1,"car, volvo, dealer, tyres"
2,"car, mercedes, dealer, tyres"
3,"car, renault, export, tyres"

So, if i look for "car", so i would like to get, except normal
results, a list of most frequent terms in result set.
This would be in my example:

tyres, dealer

tyres 3x
dealer 2x


How can i do that?

THX


--=20
 mit freundlichen Gr=FC=DFen

Martin von Wysiecki
software development

aspedia GmbH
Ro=DFlauer Weg 5
D-68309 Mannheim
Telefon +49 (0) 621 - 71600 33
Telefax +49 (0) 621 - 71600 10
wysiecki@aspedia.de

Gesch=E4ftsf=FChrung:
Steffen K=FCnster, Christoph Goldschmitt
Amtsgericht Mannheim HRB 9942
www.aspedia.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 12:46:14 2008
Return-Path: <java-user-return-35294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32616 invoked from network); 4 Aug 2008 12:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 12:46:13 -0000
Received: (qmail 27382 invoked by uid 500); 4 Aug 2008 12:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27343 invoked by uid 500); 4 Aug 2008 12:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27332 invoked by uid 99); 4 Aug 2008 12:46:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 05:46:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 12:45:07 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 47EC77FA8
	for <java-user@lucene.apache.org>; Mon,  4 Aug 2008 05:45:03 -0700 (PDT)
Message-Id: <D21DF676-2470-4157-B66A-555A69A59B86@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <b0f78250808040440s5b4bc515i4ac3fc4c739f9232@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Get BestFrequentKeywords
Date: Mon, 4 Aug 2008 08:45:00 -0400
References: <b0f78250808040440s5b4bc515i4ac3fc4c739f9232@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Look into adding Term Vectors to your fields, which will store the =20
term frequency by document.  Then you can use the TermVectorMapper to =20=

load them sorted by frequency across all the documents in your set.



-Grant

On Aug 4, 2008, at 7:40 AM, Martin vWysiecki wrote:

> Hello to all,
>
> Thanks for help in advance.
>
> Example docs:
>
> 1,"car, volvo, dealer, tyres"
> 2,"car, mercedes, dealer, tyres"
> 3,"car, renault, export, tyres"
>
> So, if i look for "car", so i would like to get, except normal
> results, a list of most frequent terms in result set.
> This would be in my example:
>
> tyres, dealer
>
> tyres 3x
> dealer 2x
>
>
> How can i do that?
>
> THX
>
>
> --=20
> mit freundlichen Gr=FC=DFen
>
> Martin von Wysiecki
> software development
>
> aspedia GmbH
> Ro=DFlauer Weg 5
> D-68309 Mannheim
> Telefon +49 (0) 621 - 71600 33
> Telefax +49 (0) 621 - 71600 10
> wysiecki@aspedia.de
>
> Gesch=E4ftsf=FChrung:
> Steffen K=FCnster, Christoph Goldschmitt
> Amtsgericht Mannheim HRB 9942
> www.aspedia.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 16:30:05 2008
Return-Path: <java-user-return-35295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63489 invoked from network); 4 Aug 2008 16:30:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 16:30:04 -0000
Received: (qmail 70998 invoked by uid 500); 4 Aug 2008 16:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70967 invoked by uid 500); 4 Aug 2008 16:29:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70956 invoked by uid 99); 4 Aug 2008 16:29:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 09:29:56 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of collinmc@us.ibm.com designates 32.97.182.142 as permitted sender)
Received: from [32.97.182.142] (HELO e2.ny.us.ibm.com) (32.97.182.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 16:28:59 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e2.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m74GTKPa030571
	for <java-user@lucene.apache.org>; Mon, 4 Aug 2008 12:29:20 -0400
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m74GTK8O226846
	for <java-user@lucene.apache.org>; Mon, 4 Aug 2008 12:29:20 -0400
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m74GTK4w029335
	for <java-user@lucene.apache.org>; Mon, 4 Aug 2008 12:29:20 -0400
Received: from d01ml063.pok.ibm.com (d01ml063.pok.ibm.com [9.56.228.130])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m74GTKxh029329
	for <java-user@lucene.apache.org>; Mon, 4 Aug 2008 12:29:20 -0400
In-Reply-To: <1217598654.89040.ezmlm@lucene.apache.org>
References: <1217598654.89040.ezmlm@lucene.apache.org>
Subject: SpanRegexQuery
X-KeepSent: 5BABE4A1:ABC94614-8525749B:005A14E4;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.0.1 HF105 April 10, 2008
Message-ID: <OF5BABE4A1.ABC94614-ON8525749B.005A14E4-8525749B.005AA70E@us.ibm.com>
From: Christopher M Collins <collinmc@us.ibm.com>
Date: Mon, 4 Aug 2008 12:29:18 -0400
X-MIMETrack: Serialize by Router on D01ML063/01/M/IBM(Release 8.0.1|February 07, 2008) at
 08/04/2008 12:29:20
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=0ABBFE08DFC992748f9e8a93df938690918c0ABBFE08DFC99274"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=0ABBFE08DFC992748f9e8a93df938690918c0ABBFE08DFC99274
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable


Thanks for the responses!  Just adding $ at the end of the query text
worked, but I agree the java regex implementation should probably use
matches() instead of lookingAt().  But, making such a change may have a=

huge adverse affect on existing implementations, so I'll just append $ =
to
queries.

Chris=

--0__=0ABBFE08DFC992748f9e8a93df938690918c0ABBFE08DFC99274--


From java-user-return-35296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 17:23:49 2008
Return-Path: <java-user-return-35296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2015 invoked from network); 4 Aug 2008 17:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 17:23:49 -0000
Received: (qmail 41981 invoked by uid 500); 4 Aug 2008 17:23:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41955 invoked by uid 500); 4 Aug 2008 17:23:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41944 invoked by uid 99); 4 Aug 2008 17:23:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 10:23:41 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 17:22:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQ3m3-0006hE-LS
	for java-user@lucene.apache.org; Mon, 04 Aug 2008 10:23:11 -0700
Message-ID: <18815733.post@talk.nabble.com>
Date: Mon, 4 Aug 2008 10:23:11 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Range search between two different fields.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a search which needs to find dates which are specified in two
different fields. 

For an example:

I have a Java object with a date field that starts the time something
started and another that specifies the time that something ended.

I need to do a date search that the range is specified between the start and
the end.

Thanks
-- 
View this message in context: http://www.nabble.com/Range-search-between-two-different-fields.-tp18815733p18815733.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 18:35:41 2008
Return-Path: <java-user-return-35297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60435 invoked from network); 4 Aug 2008 18:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 18:35:41 -0000
Received: (qmail 23119 invoked by uid 500); 4 Aug 2008 18:35:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23090 invoked by uid 500); 4 Aug 2008 18:35:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23079 invoked by uid 99); 4 Aug 2008 18:35:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 11:35:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 18:34:37 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Mon, 4 Aug 2008 14:34:40 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 4 Aug 2008 14:34:40 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: RE: getting started
Date: Mon, 4 Aug 2008 14:30:33 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <359a92830808021045g1b09d7d9o2f209ad9c99c5eef@mail.gmail.com>
Thread-Index: Acj0x6vqbvYL3mFhSMe8yngsiPQ5HgBlzOHg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGEAOeIi00000a5e@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010204.48974BC0.0036,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 04 Aug 2008 18:34:40.0188 (UTC) FILETIME=[C1638FC0:01C8F660]
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, say each line is an address.  So the text file would look like:
123 Water St. Somerville, GA 12345
456 Easy St. Hope, CA 45676
34 Ocean Blvd. Staten Island, NY 93843

The file would have hundreds of thousands of addresses.

So the user would type "34, St" in the search box and press a "Search" =
button.
In the table below the search box, the first and third record from the =
addresses above would be displayed because they both have a "34" =
somewhere in them, and they both have a "St" somewhere in them.

So the table would show:
123 Water St. Somerville, GA 12345
34 Ocean Blvd. Staten Island, NY 93843

because they match both criteria as pointed out here:
123 Water "St". Somerville, GA 12"34"5
"34" Ocean Blvd. "St"aten Island, NY 93843


Thanks.
Brittany=20



Well, this could get to be a really ugly query. Let's say you have 10 =
lines.
Then the
doc would have 10 different fields? ("line1", "line2" etc.)? Then to =
search
it
you have to have an or clause across all fields. And a file with 100,000
lines would be
a 100,000 term query...... Or I misunderstand you completely.

Calling doc.add with the *same* field (say "text") is a possibility,
especially if you
provide your own tokenizer that returns a large increment gap, say 1000.
This offset
gets added to each call to doc.add on a field. So say you have 10 lines,
each with 5 tokens.
The first token of each line would be at offsets
0, 15, 30, 45...

You have a couple of choices here. Say you can guarantee that no line =
will
be longer than 100 terms.
Each line could begin on an even 100 offset (assuming you're not =
indexing
something with many millions
of lines). Now, to find the line you just divide the offset by 100.

Another possibility is to keep a field in the document that correlates
offsets to lines and read that
in when you need to.

It all depends upon what the purpose of needing to keep track of lines. =
If
it's for a single document,
this kind of thing can work. But if you want line information for all =
the
hits, it could be too expensive.

The increment gap will play interesting games with Span queries (or slop =
in
phrase queries). If you need
proximity to span lines, this scheme needs some modification. Say I want
hits when "firstname" is within 10
terms of "lastname". Well, if you have a large increment gap this won't
work.

So it would be a good thing to tell us a bit more about why you want to
distinguish lines to get
better advice <G>.

Best
Erick

On Fri, Aug 1, 2008 at 9:59 AM, =
=E0=B2=A8=E0=B2=BE=E0=B2=97=E0=B3=87=E0=B2=B6=E0=B3=8D =
=E0=B2=B8=E0=B3=81=E0=B2=AC=E0=B3=8D=E0=B2=B0=E0=B2=B9=E0=B3=8D=E0=B2=AE=E0=
=B2=A3=E0=B3=8D=E0=B2=AF (Nagesh S) <
nageshblore@gmail.com> wrote:

> Why should each line be a Document ? If there is a single document =
having
> each line as a Field, then the search would result in a single =
Document as
> a
> 'hit' not the individual lines matching it. Is this right ?
>
> Nagesh
>
> On Fri, Aug 1, 2008 at 7:21 PM, <roy-lucene-user@xemaps.com> wrote:
>
> > Hello Brittany,
> >
> > I think the easiest thing for you to do is make each line a =
Document.
>  You
> > might want a FileName and LineNumber field on top of a "Text" field, =
this
> > way if you need to gather all the lines of your File back together =
again
> > you
> > can do a search on the FileName.
> >
> > So in your case:
> >
> > Document 1
> >  FileName: [the file]
> >  LineNumber: 1
> >  Text: I like apples
> > Document 2
> >  ...etc
> >
> > Regards,
> > Roy
> >
> > On Fri, Aug 1, 2008 at 9:28 AM, Brittany Jacobs <
> bjacobs@jbmanagement.com
> > >wrote:
> >
> > > Just trying to grasp the concept.
> > >
> > >
> > >
> > > I want to search a text file where each line is a separate item to =
be
> > > searched.  When text it entered by the user, I want to return all =
the
> > lines
> > > in which that text appears.
> > >
> > > For example, if the text file has:
> > >
> > > I like apples.
> > >
> > > I went to the store.
> > >
> > > I bought an apple.
> > >
> > >
> > >
> > > If the user searches "apple", I want it to return the first and =
third
> > > sentences.
> > >
> > >
> > >
> > > Is each sentence a Token?  Is the user input going to be a =
QueryParser?
> > >  How
> > > should I read in the file so that each line of text is a token to
> search?
> > >
> > >
> > >
> > > Thanks in advance.
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > Brittany Jacobs
> > >
> > > Java Developer
> > >
> > > JBManagement, Inc.
> > >
> > > 12 Christopher Way, Suite 103
> > >
> > > Eatontown, NJ 07724
> > >
> > > ph: 732-542-9200 ext. 229
> > >
> > > fax: 732-380-0678
> > >
> > > email:  <mailto:bjacobs@jbmanagement.com> bjacobs@jbmanagement.com
> > >
> > >
> > >
> > >
> >
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 19:26:23 2008
Return-Path: <java-user-return-35298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91562 invoked from network); 4 Aug 2008 19:26:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 19:26:23 -0000
Received: (qmail 521 invoked by uid 500); 4 Aug 2008 19:26:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 487 invoked by uid 500); 4 Aug 2008 19:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 470 invoked by uid 99); 4 Aug 2008 19:26:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 12:26:16 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 19:25:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2319894rvb.5
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 12:25:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ucXNmavY6WJW/QNgF0uGWm9tMfIXRcreXBX1U99WBWg=;
        b=R+2l81x78M9uALYLebFua9ki1zS9LUihX6ph0HBZpn9kz5XPBqu343NIu1RNzgFoOF
         xK2KXyuSpQNc8a2ODZjNO2Lz59bTbRivrmgm/6E+Nq8375p8Mu3DdH4stUkkkSObJo1+
         y+dsT7Hiqi1WvDNt3a8A0GEMd+SsVHbwCScUo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QzzcQNER753q6VQpZLSijIFCjhRfl7DlPRrCnmF+8xF5g1odhBH66VPXjlRvPZQ5b9
         bxAbSZQa9BiaclPSSfEMpdJdKjtiqtjqT6VyhDyErI8ok4i4ekXIlEaVyCi8E1WYaGAW
         DgY/0LAsPJJitmeolsXqfC/fHQA0XzmmdjvDA=
Received: by 10.140.135.19 with SMTP id i19mr7725255rvd.70.1217877930077;
        Mon, 04 Aug 2008 12:25:30 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Mon, 4 Aug 2008 12:25:30 -0700 (PDT)
Message-ID: <359a92830808041225s6a7061bag81e615555ea7bbaa@mail.gmail.com>
Date: Mon, 4 Aug 2008 15:25:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Range search between two different fields.
In-Reply-To: <18815733.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41722_20950584.1217877930062"
References: <18815733.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41722_20950584.1217877930062
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Could you explain your problem a bit more? It's completely unclear
to me what java objects have to do with searching a lucene index.

If you're extracting data from some java objects somewhere to
insert in an index, then it's up to you to index them such that you
can extract the information in a way that does you the most good.



Best
Erick

On Mon, Aug 4, 2008 at 1:23 PM, samd <sdoyle_2@yahoo.com> wrote:

>
> I have a search which needs to find dates which are specified in two
> different fields.
>
> For an example:
>
> I have a Java object with a date field that starts the time something
> started and another that specifies the time that something ended.
>
> I need to do a date search that the range is specified between the start
> and
> the end.
>
> Thanks
> --
> View this message in context:
> http://www.nabble.com/Range-search-between-two-different-fields.-tp18815733p18815733.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_41722_20950584.1217877930062--

From java-user-return-35299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 20:11:35 2008
Return-Path: <java-user-return-35299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25268 invoked from network); 4 Aug 2008 20:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 20:11:33 -0000
Received: (qmail 66397 invoked by uid 500); 4 Aug 2008 20:11:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66364 invoked by uid 500); 4 Aug 2008 20:11:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66343 invoked by uid 99); 4 Aug 2008 20:11:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 13:11:23 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 20:10:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQ6OK-0005Hc-1x
	for java-user@lucene.apache.org; Mon, 04 Aug 2008 13:10:52 -0700
Message-ID: <18818781.post@talk.nabble.com>
Date: Mon, 4 Aug 2008 13:10:52 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Range search between two different fields.
In-Reply-To: <359a92830808041225s6a7061bag81e615555ea7bbaa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <18815733.post@talk.nabble.com> <359a92830808041225s6a7061bag81e615555ea7bbaa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the feedback and the quick response. The problem was a result of
unclear requirements fortunately I do not have to specify the range to be
between two different fields.



Erick Erickson wrote:
> 
> Could you explain your problem a bit more? It's completely unclear
> to me what java objects have to do with searching a lucene index.
> 
> If you're extracting data from some java objects somewhere to
> insert in an index, then it's up to you to index them such that you
> can extract the information in a way that does you the most good.
> 
> 
> 
> Best
> Erick
> 
> On Mon, Aug 4, 2008 at 1:23 PM, samd <sdoyle_2@yahoo.com> wrote:
> 
>>
>> I have a search which needs to find dates which are specified in two
>> different fields.
>>
>> For an example:
>>
>> I have a Java object with a date field that starts the time something
>> started and another that specifies the time that something ended.
>>
>> I need to do a date search that the range is specified between the start
>> and
>> the end.
>>
>> Thanks
>> --
>> View this message in context:
>> http://www.nabble.com/Range-search-between-two-different-fields.-tp18815733p18815733.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Range-search-between-two-different-fields.-tp18815733p18818781.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 23:29:22 2008
Return-Path: <java-user-return-35300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39854 invoked from network); 4 Aug 2008 23:29:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 23:29:22 -0000
Received: (qmail 76829 invoked by uid 500); 4 Aug 2008 23:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76797 invoked by uid 500); 4 Aug 2008 23:29:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76786 invoked by uid 99); 4 Aug 2008 23:29:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 16:29:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 23:28:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2422886rvb.5
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 16:28:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=CXwAuw3FeTbsgFosZskf9zJnJJLfnz72ZyQTdKzrtnk=;
        b=HsPt8dl3tPTfHUJusqNcYOPPddoyeganc/46T7gfGa3XCQVTjH3XTp+86AWfsmR+dt
         m5h1IdYeeUeqE5LCHuoS3rQ5NabHoIcp+6IbJP+/3OIGzoKMLpd1rLsiq+7HzuE+uuVW
         ddi+2/JV6o0A1zVSG/FCVEwVnug1bz1IRPe0E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WncZsOm9hhRwzrT1fvrK91Oxb6wZcJw4FRrNTMIGKxv/rva0Fxw9BduyucO6JZ797z
         N7K3KZKMUpuDBeOlGV0bXCnbhcNaPS3silE2Jb2QRLfSMOeniZj3MxdeHJz4z7EKxzrb
         y6ro3ZiPL/2hPOS6nL4ahVj9CufgyzhvvAqu4=
Received: by 10.141.96.21 with SMTP id y21mr7825481rvl.132.1217892527526;
        Mon, 04 Aug 2008 16:28:47 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Mon, 4 Aug 2008 16:28:47 -0700 (PDT)
Message-ID: <1bcb7c7f0808041628j113df63gc067bdd9f27382ba@mail.gmail.com>
Date: Tue, 5 Aug 2008 02:28:47 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: next release
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48605_35905.1217892527519"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48605_35905.1217892527519
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,

is there any date for the 2.3.3 release?

best,
-C.B.

------=_Part_48605_35905.1217892527519--

From java-user-return-35301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 04 23:34:38 2008
Return-Path: <java-user-return-35301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42821 invoked from network); 4 Aug 2008 23:34:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2008 23:34:38 -0000
Received: (qmail 80867 invoked by uid 500); 4 Aug 2008 23:34:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80837 invoked by uid 500); 4 Aug 2008 23:34:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80826 invoked by uid 99); 4 Aug 2008 23:34:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 16:34:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 23:33:35 +0000
Received: by an-out-0708.google.com with SMTP id c37so2485136anc.49
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 16:33:44 -0700 (PDT)
Received: by 10.100.131.3 with SMTP id e3mr531542and.59.1217892824286;
        Mon, 04 Aug 2008 16:33:44 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id d38sm7087769and.20.2008.08.04.16.33.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 04 Aug 2008 16:33:43 -0700 (PDT)
Message-Id: <D8E7D3CC-69AD-436E-9622-8028EB41542E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0808041628j113df63gc067bdd9f27382ba@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: next release
Date: Mon, 4 Aug 2008 19:33:42 -0400
References: <1bcb7c7f0808041628j113df63gc067bdd9f27382ba@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Alas, not yet -- at least it hasn't been discussed yet.

Mike

Cam Bazz wrote:

> hello,
>
> is there any date for the 2.3.3 release?
>
> best,
> -C.B.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 00:05:28 2008
Return-Path: <java-user-return-35302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63794 invoked from network); 5 Aug 2008 00:05:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 00:05:27 -0000
Received: (qmail 97193 invoked by uid 500); 5 Aug 2008 00:05:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97160 invoked by uid 500); 5 Aug 2008 00:05:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97149 invoked by uid 99); 5 Aug 2008 00:05:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 17:05:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 00:04:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2435784rvb.5
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 17:04:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RDF6+MfPjUa0nb/o6BchHXTP0S3XcMfEexRyzk0bp8A=;
        b=OgNMxFPDMeIi4R8cek179ILTDZQRTC1QZ8LfvdXNE9jwSaWoMhuzqFktQHC+Z1MSXC
         8rG/F30SOjhx1Oxy+G0zskeqBtadFFmKroremClleGWCtkzvOtlrU6YkF/x4c6yVMMKw
         x5CZEkytN16xvNnk4x7i8yhDmHTPOfXsY7rvA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=PT1VvqNxGxD38IOOhbVupLWz7YlsB4tM/ENC8wmMHYqdrl81TY5u+3tb4BWRf/fdug
         Srgh/1IPFHiqC4fkqcpB/ie2xVZ7I3evJdh/LKjroNPavaa+7XlbSNZ/Hv906x3yMsP9
         S0Rrk0Y27OmvZK8maqiinexuihviA8JyhoDUw=
Received: by 10.140.199.3 with SMTP id w3mr7842396rvf.16.1217894691791;
        Mon, 04 Aug 2008 17:04:51 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Mon, 4 Aug 2008 17:04:51 -0700 (PDT)
Message-ID: <1bcb7c7f0808041704v7cace0b3tb3f499f86a476ac9@mail.gmail.com>
Date: Tue, 5 Aug 2008 03:04:51 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: next release
In-Reply-To: <D8E7D3CC-69AD-436E-9622-8028EB41542E@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48839_3304849.1217894691781"
References: <1bcb7c7f0808041628j113df63gc067bdd9f27382ba@mail.gmail.com>
	 <D8E7D3CC-69AD-436E-9622-8028EB41542E@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48839_3304849.1217894691781
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am still in trouble deleting documents.

Appearently - when an indexwriter and searcher is open at the same directory
- you can not delete documents with ids.

to delete documents with ids you need to access indexreader which is only
accessible tru the indexsearcher, thus resulting in a lock exception.

Best,
-C.B.

On Tue, Aug 5, 2008 at 2:33 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Alas, not yet -- at least it hasn't been discussed yet.
>
> Mike
>
>
> Cam Bazz wrote:
>
>  hello,
>>
>> is there any date for the 2.3.3 release?
>>
>> best,
>> -C.B.
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_48839_3304849.1217894691781--

From java-user-return-35303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 00:46:27 2008
Return-Path: <java-user-return-35303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98752 invoked from network); 5 Aug 2008 00:46:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 00:46:27 -0000
Received: (qmail 41062 invoked by uid 500); 5 Aug 2008 00:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41031 invoked by uid 500); 5 Aug 2008 00:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41020 invoked by uid 99); 5 Aug 2008 00:46:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 17:46:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 00:45:22 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2200184wra.21
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 17:45:31 -0700 (PDT)
Received: by 10.90.73.5 with SMTP id v5mr478662aga.43.1217897131474;
        Mon, 04 Aug 2008 17:45:31 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 74sm8023132wra.12.2008.08.04.17.45.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 04 Aug 2008 17:45:31 -0700 (PDT)
Message-Id: <CD229456-6A41-4173-A278-3D29EED0DC26@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0808041704v7cace0b3tb3f499f86a476ac9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: next release
Date: Mon, 4 Aug 2008 20:45:30 -0400
References: <1bcb7c7f0808041628j113df63gc067bdd9f27382ba@mail.gmail.com> <D8E7D3CC-69AD-436E-9622-8028EB41542E@mikemccandless.com> <1bcb7c7f0808041704v7cace0b3tb3f499f86a476ac9@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Cam Bazz wrote:

> I am still in trouble deleting documents.

OK but 2.3.3 isn't going to help you here -- it doesn't change  
anything about deletion of docs.

> Appearently - when an indexwriter and searcher is open at the same  
> directory
> - you can not delete documents with ids.

If you need to delete by doc id, this is true.  You must close your  
IndexWriter before attempting the delete from an IndexReader, and vice/ 
versa.

Can you delete by query instead?  That you can do from IndexWriter.

Mike



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 00:50:48 2008
Return-Path: <java-user-return-35304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3320 invoked from network); 5 Aug 2008 00:50:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 00:50:48 -0000
Received: (qmail 44356 invoked by uid 500); 5 Aug 2008 00:50:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44329 invoked by uid 500); 5 Aug 2008 00:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44318 invoked by uid 99); 5 Aug 2008 00:50:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 17:50:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 00:49:46 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2450979rvb.5
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 17:50:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=oggTHxhFJ/oCCFLvkkxSF70tkZLKx1YISoT0PMMavTA=;
        b=bAXclTsQlWfsAjISikf8jvfb1eLOp7R7lRRazdr33QnxbTP6/kCQWCvM8Sz+A0vPCL
         ILKiRXzZXAhu/GqcpikqUUDsmmfaS7Nsb0tCcLK0jUOatSCUYQW5rgbUIO4YfLrfttSt
         ojeqRyQQ4slU1cWJ4VKSy8XkVrfAOD26espSQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bxXfG2dtOKd3CY4I33J4KXWJQ6ori8VrTUu5dM1ZG8NQsVShky/pCFTDN1SYuRSyWL
         I/zPC7NXRfN6bO5/VK2ifsPNyENPp11h/FJrnY0mrEsMLEO/VQx2PFko6ZCz0MuKQx5L
         maSW0kC4h/LdOvApCj6Mv3XI+lJWUmT6KfGPs=
Received: by 10.141.129.14 with SMTP id g14mr7853896rvn.50.1217897413342;
        Mon, 04 Aug 2008 17:50:13 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Mon, 4 Aug 2008 17:50:13 -0700 (PDT)
Message-ID: <1bcb7c7f0808041750s7b6e7860ud4ad054276e1a518@mail.gmail.com>
Date: Tue, 5 Aug 2008 03:50:13 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: next release
In-Reply-To: <CD229456-6A41-4173-A278-3D29EED0DC26@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49352_9865016.1217897413347"
References: <1bcb7c7f0808041628j113df63gc067bdd9f27382ba@mail.gmail.com>
	 <D8E7D3CC-69AD-436E-9622-8028EB41542E@mikemccandless.com>
	 <1bcb7c7f0808041704v7cace0b3tb3f499f86a476ac9@mail.gmail.com>
	 <CD229456-6A41-4173-A278-3D29EED0DC26@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49352_9865016.1217897413347
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes, thats why I asked any news for release of 2.3.3.

I will be using it in a production environment and a little paranoid about
using the trunk.

I have been waiting for this delete by query for a long time.

Best,
-C.B.

On Tue, Aug 5, 2008 at 3:45 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Cam Bazz wrote:
>
>  I am still in trouble deleting documents.
>>
>
> OK but 2.3.3 isn't going to help you here -- it doesn't change anything
> about deletion of docs.
>
>  Appearently - when an indexwriter and searcher is open at the same
>> directory
>> - you can not delete documents with ids.
>>
>
> If you need to delete by doc id, this is true.  You must close your
> IndexWriter before attempting the delete from an IndexReader, and
> vice/versa.
>
> Can you delete by query instead?  That you can do from IndexWriter.
>
> Mike
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49352_9865016.1217897413347--

From java-user-return-35305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 02:34:53 2008
Return-Path: <java-user-return-35305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4101 invoked from network); 5 Aug 2008 02:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 02:34:53 -0000
Received: (qmail 5502 invoked by uid 500); 5 Aug 2008 02:34:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5466 invoked by uid 500); 5 Aug 2008 02:34:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5455 invoked by uid 99); 5 Aug 2008 02:34:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 19:34:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.165.102.83] (HELO web15803.mail.cnb.yahoo.com) (202.165.102.83)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Aug 2008 02:33:47 +0000
Received: (qmail 53789 invoked by uid 60001); 5 Aug 2008 02:34:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=MFB90+/flBj9xjEa9geTNB0mWQbMN9T6YFdzXaL25kGxKlO2AXRNKcuY4qJ/00ms32YM4C5MzYJvG6QujqvuuGYXNQzEMTSfDSSHZBq6D/x3dHP6glc5HPpw+xXI1fdU/C4nXWQhFHfrTCCFPtiFhp/It8HkSJh+STKO2JspJxo=;
Received: from [122.225.11.210] by web15803.mail.cnb.yahoo.com via HTTP; Tue, 05 Aug 2008 10:34:12 CST
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 5 Aug 2008 10:34:12 +0800 (CST)
From: xh sun <wysunxiaohua@yahoo.com.cn>
Subject: failed to open an indexer after about 20 queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1123773171-1217903652=:53517"
Message-ID: <379013.53517.qm@web15803.mail.cnb.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1123773171-1217903652=:53517
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,=0AThe indexer can't be opened after about 20 queries in linux system, b=
ut it is fine if the index is in windows=A0 system. The indexer is the same=
 in both systems.=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0 reader =3D IndexReader.open=
(indexName);=A0=A0=A0 //failed after about 20 queries=0A=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 searcher =3D new IndexSearcher(reader);=A0 =0A=A0=0AThe reader an=
d search have been closed after each query. Is there any special configurat=
ion for the index in linux system? =0AAppreicate your help very much.=0ABR,=
=0AShawn=0A=0A=0A      
--0-1123773171-1217903652=:53517--

From java-user-return-35306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 02:57:19 2008
Return-Path: <java-user-return-35306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18811 invoked from network); 5 Aug 2008 02:57:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 02:57:19 -0000
Received: (qmail 17853 invoked by uid 500); 5 Aug 2008 02:57:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17816 invoked by uid 500); 5 Aug 2008 02:57:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17805 invoked by uid 99); 5 Aug 2008 02:57:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 19:57:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 02:56:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 9FECA286BCA
	for <java-user@lucene.apache.org>; Mon,  4 Aug 2008 20:56:42 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 29264-04 for <java-user@lucene.apache.org>;
	Mon, 4 Aug 2008 20:56:40 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id C28E4286BFF
	for <java-user@lucene.apache.org>; Mon,  4 Aug 2008 20:56:40 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <379013.53517.qm@web15803.mail.cnb.yahoo.com>
Subject: RE: failed to open an indexer after about 20 queries
Date: Mon, 4 Aug 2008 20:56:17 -0600
Message-ID: <5895A9F81455469A9379009E1A3349B7@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <379013.53517.qm@web15803.mail.cnb.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: Acj2o+MVATY+jd2JSMSd227gBKK30wAAr8Ig
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Xh,

We need to see a little more code her. Are you reopening the reader for =
each
query? If so are you closing it each time?=20

We need more information.

John G.

-----Original Message-----
From: xh sun [mailto:wysunxiaohua@yahoo.com.cn]=20
Sent: Monday, August 04, 2008 8:34 PM
To: java-user@lucene.apache.org
Subject: failed to open an indexer after about 20 queries

Hi,
The indexer can't be opened after about 20 queries in linux system, but =
it
is fine if the index is in windows=A0 system. The indexer is the same in =
both
systems.
=A0=A0=A0=A0=A0=A0=A0=A0=A0 reader =3D =
IndexReader.open(indexName);=A0=A0=A0 //failed after about 20
queries
=A0=A0=A0=A0=A0=A0=A0=A0=A0 searcher =3D new IndexSearcher(reader);=A0=20
=A0
The reader and search have been closed after each query. Is there any
special configuration for the index in linux system?=20
Appreicate your help very much.
BR,
Shawn


     =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 02:59:37 2008
Return-Path: <java-user-return-35307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21573 invoked from network); 5 Aug 2008 02:59:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 02:59:36 -0000
Received: (qmail 21029 invoked by uid 500); 5 Aug 2008 02:59:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21001 invoked by uid 500); 5 Aug 2008 02:59:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20990 invoked by uid 99); 5 Aug 2008 02:59:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 19:59:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 02:58:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 56748286BEA
	for <java-user@lucene.apache.org>; Mon,  4 Aug 2008 20:58:20 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 29206-07 for <java-user@lucene.apache.org>;
	Mon, 4 Aug 2008 20:58:18 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 8D713286C0D
	for <java-user@lucene.apache.org>; Mon,  4 Aug 2008 20:58:18 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <379013.53517.qm@web15803.mail.cnb.yahoo.com>
Subject: RE: failed to open an indexer after about 20 queries
Date: Mon, 4 Aug 2008 20:58:00 -0600
Message-ID: <A89AC1ECDCF84CDA8DFD344C044AE052@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <379013.53517.qm@web15803.mail.cnb.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: Acj2o+MVATY+jd2JSMSd227gBKK30wAAv5wg
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Xh,

Sorry about those questions. I received two copies of your email. The =
first
was corrupt.

We still need to see more code. No there isn't any special config =
necessary.

John G.

-----Original Message-----
From: xh sun [mailto:wysunxiaohua@yahoo.com.cn]=20
Sent: Monday, August 04, 2008 8:34 PM
To: java-user@lucene.apache.org
Subject: failed to open an indexer after about 20 queries

Hi,
The indexer can't be opened after about 20 queries in linux system, but =
it
is fine if the index is in windows=A0 system. The indexer is the same in =
both
systems.
=A0=A0=A0=A0=A0=A0=A0=A0=A0 reader =3D =
IndexReader.open(indexName);=A0=A0=A0 //failed after about 20
queries
=A0=A0=A0=A0=A0=A0=A0=A0=A0 searcher =3D new IndexSearcher(reader);=A0=20
=A0
The reader and search have been closed after each query. Is there any
special configuration for the index in linux system?=20
Appreicate your help very much.
BR,
Shawn


     =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 04:35:31 2008
Return-Path: <java-user-return-35308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75020 invoked from network); 5 Aug 2008 04:35:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 04:35:31 -0000
Received: (qmail 90942 invoked by uid 500); 5 Aug 2008 04:35:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90914 invoked by uid 500); 5 Aug 2008 04:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90903 invoked by uid 99); 5 Aug 2008 04:35:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 21:35:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 04:34:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQEG4-0005Z9-Sg
	for java-user@lucene.apache.org; Mon, 04 Aug 2008 21:34:52 -0700
Message-ID: <18824451.post@talk.nabble.com>
Date: Mon, 4 Aug 2008 21:34:52 -0700 (PDT)
From: SoupErman <michaelharray@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene excluding 'not' from search terms
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: michaelharray@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


As in the subject title, it seems the word 'not' is being excluded from my
searches. Note the lowercase, it isn't being treated as the boolean operator
'NOT'. For example, given the query "sticks not stones", it parses it as
"+keywords:stick +keywords:stone". Whereas if I use the query "sticks NOT
stones", it parses it as "+keywords:stick -keywords:stone".

Is there a config file or something that lets you set terms to
exclude/include? I'm using the Lucene/Solr combination. I've looked through
the docs and code as much as I can and can't figure out why that particular
term 'not' is being dropped.

Any help is greatly appreciated :)
-- 
View this message in context: http://www.nabble.com/Lucene-excluding-%27not%27-from-search-terms-tp18824451p18824451.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 05:20:27 2008
Return-Path: <java-user-return-35309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96437 invoked from network); 5 Aug 2008 05:20:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 05:20:27 -0000
Received: (qmail 7978 invoked by uid 500); 5 Aug 2008 05:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7944 invoked by uid 500); 5 Aug 2008 05:20:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7933 invoked by uid 99); 5 Aug 2008 05:20:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Aug 2008 22:20:20 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 05:19:24 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2236918wfc.20
        for <java-user@lucene.apache.org>; Mon, 04 Aug 2008 22:19:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=rAQnvhRQ5bPTysK0gWhmCdStLxivmV3PbZnlRwdXdHI=;
        b=OzmGDMGqYAGxaQyc1DrQ7vgzBYs5APRiBeayq5JxALiJWYsCCZqWfOFYczNl9pi54e
         YZ8xNaiQ7DjJ4yQ5zbIgVRrbCoAgZKpmgpvi969qHD6IaIgHN4lTlg/OU6dqDl7GQl9z
         71YB600biUHo0pUqME9u0VbL4W9ruS52WTlXk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Z2+j+4Q5hsZz+m8JHAyPO9O+ldgQHq+T7cGqmvyIbYB/kCyENpd/dcmpVSJQB4u3h0
         EgA1CVjYD33pqCS5Qots2rPzHMNEUdla1yQdReQgROfcdvtTWh08RTl1sRnU+3v0sjOG
         PyjWUC/+tXUdQ3O3unpAHIQI3Dwks0FDkM2UQ=
Received: by 10.142.251.9 with SMTP id y9mr5276898wfh.46.1217913590549;
        Mon, 04 Aug 2008 22:19:50 -0700 (PDT)
Received: by 10.142.164.6 with HTTP; Mon, 4 Aug 2008 22:19:50 -0700 (PDT)
Message-ID: <5816fbdd0808042219o8a7197fk493f87236703dff1@mail.gmail.com>
Date: Tue, 5 Aug 2008 10:49:50 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene excluding 'not' from search terms
In-Reply-To: <18824451.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_570_15166176.1217913590542"
References: <18824451.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_570_15166176.1217913590542
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I guess it is with your analyzer.  What is the analyzer you are using? If it
is StandardAnalyzer it drops words like "a", "the", etc. You can use the
SimpleAnalyzer
and check.

(I am not very sure because I am also new to Lucene :)



On Tue, Aug 5, 2008 at 10:04 AM, SoupErman <michaelharray@gmail.com> wrote:

>
> As in the subject title, it seems the word 'not' is being excluded from my
> searches. Note the lowercase, it isn't being treated as the boolean
> operator
> 'NOT'. For example, given the query "sticks not stones", it parses it as
> "+keywords:stick +keywords:stone". Whereas if I use the query "sticks NOT
> stones", it parses it as "+keywords:stick -keywords:stone".
>
> Is there a config file or something that lets you set terms to
> exclude/include? I'm using the Lucene/Solr combination. I've looked through
> the docs and code as much as I can and can't figure out why that particular
> term 'not' is being dropped.
>
> Any help is greatly appreciated :)
> --
> View this message in context:
> http://www.nabble.com/Lucene-excluding-%27not%27-from-search-terms-tp18824451p18824451.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_570_15166176.1217913590542--

From java-user-return-35310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 07:00:55 2008
Return-Path: <java-user-return-35310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44680 invoked from network); 5 Aug 2008 07:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 07:00:55 -0000
Received: (qmail 91110 invoked by uid 500); 5 Aug 2008 07:00:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91073 invoked by uid 500); 5 Aug 2008 07:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91062 invoked by uid 99); 5 Aug 2008 07:00:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 00:00:46 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 06:59:50 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2156342fkq.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 00:00:15 -0700 (PDT)
Received: by 10.125.121.14 with SMTP id y14mr30841mkm.174.1217919615444;
        Tue, 05 Aug 2008 00:00:15 -0700 (PDT)
Received: by 10.125.77.17 with HTTP; Tue, 5 Aug 2008 00:00:15 -0700 (PDT)
Message-ID: <7e536b1f0808050000j36dbe19fp91f2a7290ace14bd@mail.gmail.com>
Date: Tue, 5 Aug 2008 09:00:15 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Re: failed to open an indexer after about 20 queries
In-Reply-To: <A89AC1ECDCF84CDA8DFD344C044AE052@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1814_736609.1217919615456"
References: <379013.53517.qm@web15803.mail.cnb.yahoo.com>
	 <A89AC1ECDCF84CDA8DFD344C044AE052@desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1814_736609.1217919615456
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi.

And some exception stacktrace would be nice as well.

Kindly

//Marcus

On Tue, Aug 5, 2008 at 4:58 AM, John Griffin <jgriffin@thebluezone.net>wrote:

> Xh,
>
> Sorry about those questions. I received two copies of your email. The first
> was corrupt.
>
> We still need to see more code. No there isn't any special config
> necessary.
>
> John G.
>
> -----Original Message-----
> From: xh sun [mailto:wysunxiaohua@yahoo.com.cn]
> Sent: Monday, August 04, 2008 8:34 PM
> To: java-user@lucene.apache.org
> Subject: failed to open an indexer after about 20 queries
>
> Hi,
> The indexer can't be opened after about 20 queries in linux system, but it
> is fine if the index is in windows  system. The indexer is the same in both
> systems.
>           reader = IndexReader.open(indexName);    //failed after about 20
> queries
>           searcher = new IndexSearcher(reader);
>
> The reader and search have been closed after each query. Is there any
> special configuration for the index in linux system?
> Appreicate your help very much.
> BR,
> Shawn
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_1814_736609.1217919615456--

From java-user-return-35311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 07:42:16 2008
Return-Path: <java-user-return-35311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63208 invoked from network); 5 Aug 2008 07:42:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 07:42:16 -0000
Received: (qmail 38134 invoked by uid 500); 5 Aug 2008 07:42:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37087 invoked by uid 500); 5 Aug 2008 07:41:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37068 invoked by uid 99); 5 Aug 2008 07:41:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 00:41:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.86.235.61] (HELO mail.graphit.nl) (195.86.235.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 07:41:04 +0000
X-Spam-Level: 
Received: from [192.168.72.94] ([192.168.72.94])
	(authenticated user nico.krijnen@graphit.nl)
	by mail.graphit.nl
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for java-user@lucene.apache.org;
	Tue, 5 Aug 2008 09:40:13 +0200
Message-Id: <978C57B6-667F-4EA0-9B47-F3A56E0777EC@dutchsoftware.com>
From: Nico Krijnen <nico@dutchsoftware.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: folder path prefix filtering
Date: Tue, 5 Aug 2008 09:40:13 +0200
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.0 required=4.0
	tests=AWL: 0.125,BAYES_00: -1.665,CUSTOM_RULE_FROM: ALLOW,
	TOTAL_SCORE: -1.540

Hello,

Need some help with prefix filtering...
We ran into the max clause count problem with our usage of the  
wildcard query. Essentially what we are trying to do is:

One of the fields in our index contains a 'path' representing a file  
system location. For example:

/folder A/subfolder/document 1.pdf
/folder B/image 1.jpg
/folder B/image 2.jpg
/folder B2/image 3.jpg
/folder C/image 4.jpg

We have a security layer in our application that filters results based  
on the users permissions. These permissions (VIEW, EDIT, ...) can be  
set on 'folder paths'. To filter the results we build a bool query  
with a wildcard (or prefix) query for each folder for which the user  
has VIEW permissions, for example:

/folder A/subfolder/*
/folder B/*
/folder B2/*

This does exactly what we want to, but because a wildcard query is  
rewritten to term queries it fails when there are more then 1024  
documents below a folder (max clause count of rewritten bool query).  
After all, each document has a different (untokenized) term value for  
the 'path' field.

After searching the web we found some alternative methods, for example  
by using a PrefixFilter wrapped in a CachingWrapperFilter instead of a  
query. Before we start implementing I'd like to check if anyone here  
may have some more experience with queries like this or may have a  
better suggestion on how to approach this?

Kind regards,
Nico Krijnen



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 07:53:58 2008
Return-Path: <java-user-return-35312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68216 invoked from network); 5 Aug 2008 07:53:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 07:53:56 -0000
Received: (qmail 57202 invoked by uid 500); 5 Aug 2008 07:53:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56298 invoked by uid 500); 5 Aug 2008 07:53:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56287 invoked by uid 99); 5 Aug 2008 07:53:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 00:53:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.165.102.86] (HELO web15806.mail.cnb.yahoo.com) (202.165.102.86)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Aug 2008 07:52:50 +0000
Received: (qmail 29215 invoked by uid 60001); 5 Aug 2008 07:52:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.cn;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=SmKsS6gasa8/hkF8X57kfcVCSLd3NKpyBFtf6MTPhIEoaS6VWAAP70k55U3Ti1GMivdaTLipP/1tYX7iQjGJnOmNTw3J6gZf5scDSscv41tsnzlL2dXdbSdmgdn4F8/0VOk6YSww85tcU01kv81VlKbegeYjSwr/eeXx4B41ge0=;
Received: from [122.225.11.254] by web15806.mail.cnb.yahoo.com via HTTP; Tue, 05 Aug 2008 15:52:15 CST
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 5 Aug 2008 15:52:15 +0800 (CST)
From: xh sun <wysunxiaohua@yahoo.com.cn>
Subject: Re: failed to open an indexer after about 20 queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-333654184-1217922735=:28927"
Message-ID: <508175.28927.qm@web15806.mail.cnb.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-333654184-1217922735=:28927
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks, John and Marcus.</DIV>=0ABelow is the related code in jsp file, and=
 the stacktrace is null even it failed to open the index.=0A=A0=A0=A0=A0=A0=
=A0 =0A=A0=A0=A0=A0=A0=A0=A0 try =0A=A0=A0=A0=A0=A0=A0=A0 {=0A=A0=A0=A0=A0=
=A0=A0=A0=A0=A0 out.print("To open index");=A0=A0=A0=A0=A0=A0=A0 =0A=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 reader =3D IndexReader.open(indexName);=A0 =0A=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 out.print("have opened the index");=0A=A0=A0=A0=A0=A0=
=A0=A0=A0=A0 indexsize=3Dreader.numDocs();=A0=A0=A0=A0=A0 =0A=A0=A0=A0=A0=
=A0=A0=A0=A0=A0 searcher =3D new IndexSearcher(reader);=A0=A0 =0A=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0 =0A=A0=A0=A0=A0=A0=A0=A0 } =0A=A0=A0=A0=A0=A0=A0=A0 catch (Exception=
 e) =0A=A0=A0=A0=A0=A0=A0=A0 { =0A=A0=A0=A0=A0=A0=A0=A0 e.printStackTrace()=
;=0A=A0=A0=A0=A0=A0=A0=A0 error =3D true;=A0 =0A=A0=A0=A0=A0=A0=A0=A0 }=0A.=
....=0A=A0 if (reader !=3D null)=0A=A0=A0=A0 reader.close();=0A=A0 if (sear=
cher !=3D null)=0A=A0=A0=A0 searcher.close();=A0=A0=A0 =0A=A0=A0=A0 =0ABR,=
=0AShawn=0A=0A=0A=0A----- Original Message ----=0AFrom: Marcus Herou <marcu=
s.herou@tailsweep.com>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, A=
ugust 5, 2008 3:00:15 PM=0ASubject: Re: failed to open an indexer after abo=
ut 20 queries=0A=0AHi.=0A=0AAnd some exception stacktrace would be nice as =
well.=0A=0AKindly=0A=0A//Marcus=0A=0AOn Tue, Aug 5, 2008 at 4:58 AM, John G=
riffin <jgriffin@thebluezone.net>wrote:=0A=0A> Xh,=0A>=0A> Sorry about thos=
e questions. I received two copies of your email. The first=0A> was corrupt=
.=0A>=0A> We still need to see more code. No there isn't any special config=
=0A> necessary.=0A>=0A> John G.=0A>=0A> -----Original Message-----=0A> From=
: xh sun [mailto:wysunxiaohua@yahoo.com.cn]=0A> Sent: Monday, August 04, 20=
08 8:34 PM=0A> To: java-user@lucene.apache.org=0A> Subject: failed to open =
an indexer after about 20 queries=0A>=0A> Hi,=0A> The indexer can't be open=
ed after about 20 queries in linux system, but it=0A> is fine if the index =
is in windows=A0 system. The indexer is the same in both=0A> systems.=0A>=
=A0 =A0 =A0 =A0 =A0 reader =3D IndexReader.open(indexName);=A0 =A0 //failed=
 after about 20=0A> queries=0A>=A0 =A0 =A0 =A0 =A0 searcher =3D new IndexSe=
archer(reader);=0A>=0A> The reader and search have been closed after each q=
uery. Is there any=0A> special configuration for the index in linux system?=
=0A> Appreicate your help very much.=0A> BR,=0A> Shawn=0A>=0A>=0A>=0A>=0A>=
=0A> ---------------------------------------------------------------------=
=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> Fo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=
=0A=0A-- =0AMarcus Herou CTO and co-founder Tailsweep AB=0A+46702561312=0Am=
arcus.herou@tailsweep.com=0Ahttp://www.tailsweep.com/=0Ahttp://blogg.tailsw=
eep.com/=0A=0A=0A=0A      
--0-333654184-1217922735=:28927--

From java-user-return-35313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 09:11:52 2008
Return-Path: <java-user-return-35313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 982 invoked from network); 5 Aug 2008 09:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 09:11:52 -0000
Received: (qmail 52430 invoked by uid 500); 5 Aug 2008 09:11:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52396 invoked by uid 500); 5 Aug 2008 09:11:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52385 invoked by uid 99); 5 Aug 2008 09:11:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 02:11:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 09:10:48 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1181345ywj.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 02:11:03 -0700 (PDT)
Received: by 10.151.155.9 with SMTP id h9mr1082452ybo.8.1217927463305;
        Tue, 05 Aug 2008 02:11:03 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm1665647yxg.6.2008.08.05.02.11.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 05 Aug 2008 02:11:02 -0700 (PDT)
Message-Id: <4870E438-97E2-4EE7-8D61-F6FB5040543E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0808041750s7b6e7860ud4ad054276e1a518@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: next release
Date: Tue, 5 Aug 2008 05:11:02 -0400
References: <1bcb7c7f0808041628j113df63gc067bdd9f27382ba@mail.gmail.com> <D8E7D3CC-69AD-436E-9622-8028EB41542E@mikemccandless.com> <1bcb7c7f0808041704v7cace0b3tb3f499f86a476ac9@mail.gmail.com> <CD229456-6A41-4173-A278-3D29EED0DC26@mikemccandless.com> <1bcb7c7f0808041750s7b6e7860ud4ad054276e1a518@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Cam Bazz wrote:

> yes, thats why I asked any news for release of 2.3.3.

Ahh, OK, but: 2.3.3 won't have deletion by query because it's just  
another point release after 2.3.2.  Ie it will only have bug fixes  
specifically backported from the trunk.

2.4 is the next release off the trunk (that will have deletion by  
query).

> I will be using it in a production environment and a little paranoid  
> about
> using the trunk.

Understood!

> I have been waiting for this delete by query for a long time.

Well if you could try out the trunk (not in production) and see if  
it's working for you, raise any issues you hit, etc, that'd help us  
make sure it's working right...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 09:12:26 2008
Return-Path: <java-user-return-35314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1181 invoked from network); 5 Aug 2008 09:12:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 09:12:25 -0000
Received: (qmail 54482 invoked by uid 500); 5 Aug 2008 09:12:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54452 invoked by uid 500); 5 Aug 2008 09:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54441 invoked by uid 99); 5 Aug 2008 09:12:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 02:12:18 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 09:11:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQIa4-0006Rz-Cv
	for java-user@lucene.apache.org; Tue, 05 Aug 2008 02:11:48 -0700
Message-ID: <18827325.post@talk.nabble.com>
Date: Tue, 5 Aug 2008 02:11:48 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: folder path prefix filtering
In-Reply-To: <978C57B6-667F-4EA0-9B47-F3A56E0777EC@dutchsoftware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <978C57B6-667F-4EA0-9B47-F3A56E0777EC@dutchsoftware.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Nico Krijnen,

I think it is ok, to store a filter for each user-session im memory.
And I think that a cached filter is the correct approach for permissions.
(extra memory usage = one bit for each user and each document)

Hopefully someone with more experience will also answer your question.

But I want to ask the obvious question:

Is your permission-policy really on each file, or only on the top-most
folders?
Can't you store only the relevant path in an extra lucene field and set the
maximum of query-terms to e.g. 2048 ?
 
Best regards
  Karsten


Nico Krijnen-2 wrote:
> 
> Hello,
> 
> Need some help with prefix filtering...
> 
> After searching the web we found some alternative methods, for example  
> by using a PrefixFilter wrapped in a CachingWrapperFilter instead of a  
> query. Before we start implementing I'd like to check if anyone here  
> may have some more experience with queries like this or may have a  
> better suggestion on how to approach this?
> 
> Kind regards,
> Nico Krijnen
> 

-- 
View this message in context: http://www.nabble.com/folder-path-prefix-filtering-tp18826094p18827325.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 10:37:54 2008
Return-Path: <java-user-return-35315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38977 invoked from network); 5 Aug 2008 10:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 10:37:54 -0000
Received: (qmail 63365 invoked by uid 500); 5 Aug 2008 10:37:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63311 invoked by uid 500); 5 Aug 2008 10:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63292 invoked by uid 99); 5 Aug 2008 10:37:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 03:37:43 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FUZZY_CPILL,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 10:36:46 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id A4CC3129B3A
	for <java-user@lucene.apache.org>; Tue,  5 Aug 2008 03:37:12 -0700 (PDT)
Message-Id: <1432CA51-55AB-4880-8FF3-CCA62C5CB699@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <508175.28927.qm@web15806.mail.cnb.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: failed to open an indexer after about 20 queries
Date: Tue, 5 Aug 2008 06:37:11 -0400
References: <508175.28927.qm@web15806.mail.cnb.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

You say the stack trace is null, does that mean you are getting an  
NullPointerEx. or that you aren't getting any exception but the reader  
is still null?  Are you sure indexName isn't changing?

Also, it's not very good to open up the Searcher/Reader for every  
query anyway, not that solves this problem.

On Aug 5, 2008, at 3:52 AM, xh sun wrote:

> Thanks, John and Marcus.</DIV>
> Below is the related code in jsp file, and the stacktrace is null  
> even it failed to open the index.
>
>         try
>         {
>           out.print("To open index");
>           reader = IndexReader.open(indexName);
>           out.print("have opened the index");
>           indexsize=reader.numDocs();
>           searcher = new IndexSearcher(reader);
>
>         }
>         catch (Exception e)
>         {
>         e.printStackTrace();
>         error = true;
>         }
> .....
>   if (reader != null)
>     reader.close();
>   if (searcher != null)
>     searcher.close();
>
> BR,
> Shawn
>
>
>
> ----- Original Message ----
> From: Marcus Herou <marcus.herou@tailsweep.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 5, 2008 3:00:15 PM
> Subject: Re: failed to open an indexer after about 20 queries
>
> Hi.
>
> And some exception stacktrace would be nice as well.
>
> Kindly
>
> //Marcus
>
> On Tue, Aug 5, 2008 at 4:58 AM, John Griffin  
> <jgriffin@thebluezone.net>wrote:
>
>> Xh,
>>
>> Sorry about those questions. I received two copies of your email.  
>> The first
>> was corrupt.
>>
>> We still need to see more code. No there isn't any special config
>> necessary.
>>
>> John G.
>>
>> -----Original Message-----
>> From: xh sun [mailto:wysunxiaohua@yahoo.com.cn]
>> Sent: Monday, August 04, 2008 8:34 PM
>> To: java-user@lucene.apache.org
>> Subject: failed to open an indexer after about 20 queries
>>
>> Hi,
>> The indexer can't be opened after about 20 queries in linux system,  
>> but it
>> is fine if the index is in windows  system. The indexer is the same  
>> in both
>> systems.
>>           reader = IndexReader.open(indexName);    //failed after  
>> about 20
>> queries
>>           searcher = new IndexSearcher(reader);
>>
>> The reader and search have been closed after each query. Is there any
>> special configuration for the index in linux system?
>> Appreicate your help very much.
>> BR,
>> Shawn
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Marcus Herou CTO and co-founder Tailsweep AB
> +46702561312
> marcus.herou@tailsweep.com
> http://www.tailsweep.com/
> http://blogg.tailsweep.com/
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 10:54:40 2008
Return-Path: <java-user-return-35316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47149 invoked from network); 5 Aug 2008 10:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 10:54:40 -0000
Received: (qmail 83500 invoked by uid 500); 5 Aug 2008 10:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83465 invoked by uid 500); 5 Aug 2008 10:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83454 invoked by uid 99); 5 Aug 2008 10:54:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 03:54:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 10:53:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQKAz-0001Z8-Qf
	for java-user@lucene.apache.org; Tue, 05 Aug 2008 03:54:01 -0700
Message-ID: <18828735.post@talk.nabble.com>
Date: Tue, 5 Aug 2008 03:54:01 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to get all unique documents based on keyword feild
In-Reply-To: <8c4e68610808040341i634e8535ob7e2ab8d54f92aec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <18807014.post@talk.nabble.com> <8c4e68610808040341i634e8535ob7e2ab8d54f92aec@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Ian,
Tnx for the reply .
But i have already duplicate records and the issue is not for controlling 
duplicate documents, but when i retreive documents
 i should get unique documents based on keyword feild.


Ian Lea wrote:
> 
> Sounds like a thread from a few weeks ago.
> http://www.gossamer-threads.com/lists/lucene/java-user/63141
> 
> DuplicateFilter may be what you're looking for.
> 
> 
> --
> Ian.
> 
> 
> 
> On Mon, Aug 4, 2008 at 8:48 AM, sandyg <gaddamsandeeps@gmail.com> wrote:
>>
>> Hi ALL,
>>
>> First thnx for spending time to read the message.
>> Am using MatchAllDocsQuery to get all the documents .
>> But i need documents that are  unique based on keyword .
>> in my document keyword feild  had values like 1,2,2,3,4,5,5,5,5 so
>> on.....
>> so the result i need is only 1,2,3,4,5 so on ... unique
>> but MatchAllDocsQuery will get all documents 1,2,3,4,5
>>
>> Do i have any class ,where i will get  unique documents based on keyword.
>> --
>> View this message in context:
>> http://www.nabble.com/how-to-get--all-unique--documents-based-on-keyword-feild-tp18807014p18807014.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-get--all-unique--documents-based-on-keyword-feild-tp18807014p18828735.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 12:34:52 2008
Return-Path: <java-user-return-35317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2501 invoked from network); 5 Aug 2008 12:34:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 12:34:52 -0000
Received: (qmail 6766 invoked by uid 500); 5 Aug 2008 12:34:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6689 invoked by uid 500); 5 Aug 2008 12:34:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6672 invoked by uid 99); 5 Aug 2008 12:34:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 05:34:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 12:33:49 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 7BFF2190E2C;
	Tue,  5 Aug 2008 05:34:14 -0700 (PDT)
Message-Id: <4048432F-9D05-408F-8F5C-B8D1D4DA2F1E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org, general@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: [IMPORTANT] Fieldable and LUCENE-1349
Date: Tue, 5 Aug 2008 08:34:13 -0400
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Per https://issues.apache.org/jira/browse/LUCENE-1349, we have made an  
exception to Lucene's backward compatibility rules and marked  
Fieldable as "changeable", namely meaning we will allow, on a case-by- 
case basis, changes to the interface, meaning anyone who implements  
there own Fieldable (which we suspect is very, very few people) may  
have to make code changes when upgrading within a minor version.  More  
than likely, Fieldable will be deprecated and changed for 3.0 (when we  
get there.)

This is noted prominently in CHANGES.txt and on the interface.  Sorry  
for the inconvenience.

Thanks,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 12:38:22 2008
Return-Path: <java-user-return-35318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3783 invoked from network); 5 Aug 2008 12:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 12:38:22 -0000
Received: (qmail 12111 invoked by uid 500); 5 Aug 2008 12:38:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12073 invoked by uid 500); 5 Aug 2008 12:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12062 invoked by uid 99); 5 Aug 2008 12:38:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 05:38:15 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.215] (HELO smtp105.mail.mud.yahoo.com) (209.191.85.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Aug 2008 12:37:17 +0000
Received: (qmail 78735 invoked from network); 5 Aug 2008 12:36:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=o9Vci/KEPh8kR3xWGj/tldR8WafyaJ1IcFx/HB2JY7G5Q2suQO3dBEBcCCuGJ/Ma8dG+Ps96PpW+N8qQJfHM0h+AcShCRMvbCPRszyeofH5qp8hspnvMJF1dSWcQ6zGn11HyP7tLnQDwJqhPeml+n1pRrecfIIS8j8iagUCvfEM=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp105.mail.mud.yahoo.com with SMTP; 5 Aug 2008 12:36:41 -0000
X-YMail-OSG: stRBYrwVM1l_t7sJUBccfnAvS83t1rvip70fhRXwtRyhVFl5v79ULBzy8JgkYW4IYliyuFm0ZYtpG9zRLpBe13OKuXEU3U7R3zM3OW3I1A--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <02a701c8f6f7$e91b3ad0$610cc30a@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Per user data store
Date: Tue, 5 Aug 2008 18:06:36 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_02A3_01C8F726.003C9F50"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_02A3_01C8F726.003C9F50
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello all,

Documents coressponding to multiple users are to be indexed. Each user =
is going to search only his documents. Only Administrator could search =
all users data.

Is it good to have one database for each User or to have only one =
database for all Users? Which will be better?=20

My opinion is to have one database for all users and to have field =
'Username'. Using this field data will get filtered out and the search =
results will be served to the User. In this approach, whether Username =
should be part of boolean query or TermFilter will be the better =
approach?

One more technical question: Username field will have repeated entry of =
the user names. Whether the space for this field will be consumped for =
every document / record or the data will be tokenzied and a pointer to =
the document will be stored.

Regards
Ganesh   
------=_NextPart_000_02A3_01C8F726.003C9F50--

Send instant messages to your online friends http://in.messenger.yahoo.com 

From java-user-return-35319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 13:32:30 2008
Return-Path: <java-user-return-35319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30570 invoked from network); 5 Aug 2008 13:32:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 13:32:30 -0000
Received: (qmail 3701 invoked by uid 500); 5 Aug 2008 13:32:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3142 invoked by uid 500); 5 Aug 2008 13:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3131 invoked by uid 99); 5 Aug 2008 13:32:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 06:32:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 13:31:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2695339rvb.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 06:31:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=eNwMiN0L16pIi7MKdyrslFFaluJNcG1vxGSLyj7gcto=;
        b=GCc06uQGh43fkalCLyfY3xzfLam3grWSfH7EvJ1IwJR4uI6/CYa+02bOI+pLDd2t2n
         TeHbP4ByUZQztmIlS1zsbhqaJZhiKKCVSlCatm1CzRHy7OaS0PKzDg9jNbjdKpO5YYcf
         n6K6vHneo9eX07pxbt3alUAuIdiWJugvnO8A8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pa/VXK0Ema1yHt1QdQLpfOg4ZVRu72x/wkIeMUGSCqLIW6LQOHd46cXhgvnxgO+CYU
         HYP3AlUS5kov4QTjPcl9z6Jfs47w18Yq2LwMW1TXoJqkYy5Yx9zs0U5qLMcbg4QnIOKR
         PS4YXimk8BSA2eH0k6CrdJHyEG4/DOjIKLqKo=
Received: by 10.141.105.18 with SMTP id h18mr8200900rvm.207.1217943097142;
        Tue, 05 Aug 2008 06:31:37 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Tue, 5 Aug 2008 06:31:37 -0700 (PDT)
Message-ID: <359a92830808050631s47d16d33kbf1ac97f029c7101@mail.gmail.com>
Date: Tue, 5 Aug 2008 09:31:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: folder path prefix filtering
In-Reply-To: <978C57B6-667F-4EA0-9B47-F3A56E0777EC@dutchsoftware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51808_23477119.1217943097129"
References: <978C57B6-667F-4EA0-9B47-F3A56E0777EC@dutchsoftware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51808_23477119.1217943097129
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This situation is pretty much the kind of thing PrefixFilters
were written for, so I'd certainly try those first, with or
without caching. I was surprised at how fast filters
get constructed, so I'd just try it and take a few measurements.

Best
Erick

On Tue, Aug 5, 2008 at 3:40 AM, Nico Krijnen <nico@dutchsoftware.com> wrote:

> Hello,
>
> Need some help with prefix filtering...
> We ran into the max clause count problem with our usage of the wildcard
> query. Essentially what we are trying to do is:
>
> One of the fields in our index contains a 'path' representing a file system
> location. For example:
>
> /folder A/subfolder/document 1.pdf
> /folder B/image 1.jpg
> /folder B/image 2.jpg
> /folder B2/image 3.jpg
> /folder C/image 4.jpg
>
> We have a security layer in our application that filters results based on
> the users permissions. These permissions (VIEW, EDIT, ...) can be set on
> 'folder paths'. To filter the results we build a bool query with a wildcard
> (or prefix) query for each folder for which the user has VIEW permissions,
> for example:
>
> /folder A/subfolder/*
> /folder B/*
> /folder B2/*
>
> This does exactly what we want to, but because a wildcard query is
> rewritten to term queries it fails when there are more then 1024 documents
> below a folder (max clause count of rewritten bool query). After all, each
> document has a different (untokenized) term value for the 'path' field.
>
> After searching the web we found some alternative methods, for example by
> using a PrefixFilter wrapped in a CachingWrapperFilter instead of a query.
> Before we start implementing I'd like to check if anyone here may have some
> more experience with queries like this or may have a better suggestion on
> how to approach this?
>
> Kind regards,
> Nico Krijnen
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_51808_23477119.1217943097129--

From java-user-return-35320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 13:40:58 2008
Return-Path: <java-user-return-35320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36194 invoked from network); 5 Aug 2008 13:40:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 13:40:58 -0000
Received: (qmail 27212 invoked by uid 500); 5 Aug 2008 13:40:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27180 invoked by uid 500); 5 Aug 2008 13:40:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27166 invoked by uid 99); 5 Aug 2008 13:40:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 06:40:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 13:39:53 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2699117rvb.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 06:40:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=aUz9nT/gRKZLrVLeEqK93CgOXsPEFgrbKA+21AuHMo4=;
        b=T021erFYsdo/ZmoUj4heIeAVCo+KVpyyO1ZWe5FIziAPwaIFc2FZ6yVQ2pFHHNt1m9
         8UrcMP3aT4/eE8a0gHgSKGZiTy/ydzDjRlsDNoFqidJ0O5y388ov9m2Fardw7NnAoZHR
         nCxeA8bphqi+WuEnfUN+3pjqNRKmMP/DnYnBw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fIqwdbuCclZ8XXMZFbhhEl+EFcQmwnhcXc3MAqzpRFTyqcmnaMKenNlPJws0sWT33b
         J5+HUPmvjB9mvPm4vGXozimhq4bMGHJrHh/B6O+X4jko5keQkdZIukpeZ1jFbpFJdkmh
         VLcJ5BGgmx5NqhvUOXMS2Tn0QKxDD22PGj940=
Received: by 10.141.170.9 with SMTP id x9mr8202758rvo.90.1217943603769;
        Tue, 05 Aug 2008 06:40:03 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Tue, 5 Aug 2008 06:40:03 -0700 (PDT)
Message-ID: <359a92830808050640u6e43e06axeb4e383aff6f4b05@mail.gmail.com>
Date: Tue, 5 Aug 2008 09:40:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Per user data store
In-Reply-To: <02a701c8f6f7$e91b3ad0$610cc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51885_31721068.1217943603763"
References: <02a701c8f6f7$e91b3ad0$610cc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51885_31721068.1217943603763
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd start out with one index, if for no other reason
than keeping track of one index for each user would
be a royal pain in the neck. You haven't told us
how many users or documents you expect,
so that's just a guess. There's one answer perhaps
if you wind up with a 10M index, another if it's 10T.....

Filtering on the username is a fine idea, although
I'd also start by just ANDing in the username to
the query to start. Then measure your resonse
time. Note that the first time you open a reader, the
response will be slow so measure queries 2-n
instead.

I don't know the guts of Lucene, but my indexes do NOT
grow linearly with the data. After a very few docs, adding,
say, 1M of data does not cause the data to grow by 1M (or
even close to that) for fields that are NOT stored. I've
learned to just trust that the very bright people who work
on Lucene have "done the right thing" <G>...

Best
Erick

On Tue, Aug 5, 2008 at 8:36 AM, Ganesh - yahoo <emailgane@yahoo.co.in>wrote:

> Hello all,
>
> Documents coressponding to multiple users are to be indexed. Each user is
> going to search only his documents. Only Administrator could search all
> users data.
>
> Is it good to have one database for each User or to have only one database
> for all Users? Which will be better?
>
> My opinion is to have one database for all users and to have field
> 'Username'. Using this field data will get filtered out and the search
> results will be served to the User. In this approach, whether Username
> should be part of boolean query or TermFilter will be the better approach?
>
> One more technical question: Username field will have repeated entry of the
> user names. Whether the space for this field will be consumped for every
> document / record or the data will be tokenzied and a pointer to the
> document will be stored.
>
> Regards
> Ganesh

------=_Part_51885_31721068.1217943603763--

From java-user-return-35321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 13:45:07 2008
Return-Path: <java-user-return-35321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37932 invoked from network); 5 Aug 2008 13:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 13:45:06 -0000
Received: (qmail 35908 invoked by uid 500); 5 Aug 2008 13:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35636 invoked by uid 500); 5 Aug 2008 13:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35625 invoked by uid 99); 5 Aug 2008 13:44:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 06:44:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.86.235.61] (HELO mail.graphit.nl) (195.86.235.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 13:44:03 +0000
X-Spam-Level: 
Received: from [192.168.72.94] ([192.168.72.94])
	(authenticated user nico.krijnen@graphit.nl)
	by mail.graphit.nl
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for java-user@lucene.apache.org;
	Tue, 5 Aug 2008 15:44:25 +0200
Message-Id: <F25C53E2-6096-4189-9D08-CA8FF9A26B82@dutchsoftware.com>
From: Nico Krijnen <nico@dutchsoftware.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830808050631s47d16d33kbf1ac97f029c7101@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: folder path prefix filtering
Date: Tue, 5 Aug 2008 15:44:25 +0200
References: <978C57B6-667F-4EA0-9B47-F3A56E0777EC@dutchsoftware.com> <359a92830808050631s47d16d33kbf1ac97f029c7101@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.0 required=4.0
	tests=AWL: 0.029,BAYES_00: -1.665,CUSTOM_RULE_FROM: ALLOW,
	TOTAL_SCORE: -1.636

Thanks for the replies,

We'll try the filters then, possibly with cache if required for  
performance.

@Karsten: We did think about simplifying permissions to just top-level  
folders, which is probably suitable for 80% of our clients. If the  
filter is too slow we may have to. In that case it gets a lot simpler:  
we can add an extra field for what we call "zone" and use just a term  
query, no need for a prefix or wildcard anymor, and thus no more max  
clause count errors.

Kind regards,
Nico Krijnen

On 5 aug 2008, at 15:31, Erick Erickson wrote:

> This situation is pretty much the kind of thing PrefixFilters
> were written for, so I'd certainly try those first, with or
> without caching. I was surprised at how fast filters
> get constructed, so I'd just try it and take a few measurements.
>
> Best
> Erick
>

On 5 aug 2008, at 11:11, Karsten F. wrote:

>
> Hi Nico Krijnen,
>
> I think it is ok, to store a filter for each user-session im memory.
> And I think that a cached filter is the correct approach for  
> permissions.
> (extra memory usage = one bit for each user and each document)
>
> Hopefully someone with more experience will also answer your question.
>
> But I want to ask the obvious question:
>
> Is your permission-policy really on each file, or only on the top-most
> folders?
> Can't you store only the relevant path in an extra lucene field and  
> set the
> maximum of query-terms to e.g. 2048 ?
>
> Best regards
>  Karsten

> On Tue, Aug 5, 2008 at 3:40 AM, Nico Krijnen  
> <nico@dutchsoftware.com> wrote:
>
>> Hello,
>>
>> Need some help with prefix filtering...
>> We ran into the max clause count problem with our usage of the  
>> wildcard
>> query. Essentially what we are trying to do is:
>>
>> One of the fields in our index contains a 'path' representing a  
>> file system
>> location. For example:
>>
>> /folder A/subfolder/document 1.pdf
>> /folder B/image 1.jpg
>> /folder B/image 2.jpg
>> /folder B2/image 3.jpg
>> /folder C/image 4.jpg
>>
>> We have a security layer in our application that filters results  
>> based on
>> the users permissions. These permissions (VIEW, EDIT, ...) can be  
>> set on
>> 'folder paths'. To filter the results we build a bool query with a  
>> wildcard
>> (or prefix) query for each folder for which the user has VIEW  
>> permissions,
>> for example:
>>
>> /folder A/subfolder/*
>> /folder B/*
>> /folder B2/*
>>
>> This does exactly what we want to, but because a wildcard query is
>> rewritten to term queries it fails when there are more then 1024  
>> documents
>> below a folder (max clause count of rewritten bool query). After  
>> all, each
>> document has a different (untokenized) term value for the 'path'  
>> field.
>>
>> After searching the web we found some alternative methods, for  
>> example by
>> using a PrefixFilter wrapped in a CachingWrapperFilter instead of a  
>> query.
>> Before we start implementing I'd like to check if anyone here may  
>> have some
>> more experience with queries like this or may have a better  
>> suggestion on
>> how to approach this?
>>
>> Kind regards,
>> Nico Krijnen
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 14:54:26 2008
Return-Path: <java-user-return-35322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83578 invoked from network); 5 Aug 2008 14:54:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 14:54:26 -0000
Received: (qmail 68037 invoked by uid 500); 5 Aug 2008 14:54:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68005 invoked by uid 500); 5 Aug 2008 14:54:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67994 invoked by uid 99); 5 Aug 2008 14:54:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 07:54:18 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 14:53:23 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: folder path prefix filtering
Date: Tue, 5 Aug 2008 10:50:29 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59E9B@SUEXCL-02.ad.syr.edu>
In-Reply-To: <F25C53E2-6096-4189-9D08-CA8FF9A26B82@dutchsoftware.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: folder path prefix filtering
Thread-Index: Acj3AXxcXRjQOiGmTrOMTdTCnjSE/QAB0kEA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Nico,

On 08/05/2008 at 9:44 AM, Nico Krijnen wrote:
> On 5 aug 2008, at 11:11, Karsten F. wrote:
> > Can't you store only the relevant path in an extra lucene
> > field and set the maximum of query-terms to e.g. 2048 ?
>
> @Karsten: We did think about simplifying permissions to just top-level
> folders, which is probably suitable for 80% of our clients. If the
> filter is too slow we may have to. In that case it gets a lot simpler:
> we can add an extra field for what we call "zone" and use just a term
> query, no need for a prefix or wildcard anymor, and thus no more max
> clause count errors.

Are aware that BooleanQuery.setMaxClauseCount() will raise the max =
clause count for Wildcard/PrefixQuery's?:

<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/Boolean=
Query.html#setMaxClauseCount(int)>

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 14:55:44 2008
Return-Path: <java-user-return-35323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84948 invoked from network); 5 Aug 2008 14:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 14:55:41 -0000
Received: (qmail 71167 invoked by uid 500); 5 Aug 2008 14:55:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70867 invoked by uid 500); 5 Aug 2008 14:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70856 invoked by uid 99); 5 Aug 2008 14:55:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 07:55:34 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 14:54:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2732329rvb.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 07:55:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Ub6R+9cwq+INIQrb/9FXNDZ4sXovrEvlM59cL8Z3acY=;
        b=f56MvaJDp8Ru3FRFz8DtitXRrE+t7OLC5/9X7PWYRfZ0HaGszhNsSiulF5Engug2Xy
         JcNreE8iwlFAwScoa9DeMr21d2MjZ+bc9PRKK9U6u7AMsHAajA4aKhg/iAfs1TXPbvlD
         Y9/xRtHMR82z4g5jamcCGoClPm03e5OOUEea4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=K6Rx3cKYfaWDQ5a+SIj5XlPevo+WwoAwjkAA/2ueOFk3kQ8sejfku1ugnvPzT6z++i
         0e9Q+H3jC1u6/t/x5XpaJFWNGOSC+2y4Jpc/Y003rRSfm6JynuCMzD7V/3vfrbgkEIzc
         +FYybHZ1Nll8p7bVRepVAdv7VKW3XQPGqASv4=
Received: by 10.141.194.11 with SMTP id w11mr8247603rvp.228.1217948103824;
        Tue, 05 Aug 2008 07:55:03 -0700 (PDT)
Received: by 10.140.158.5 with HTTP; Tue, 5 Aug 2008 07:55:03 -0700 (PDT)
Message-ID: <8c4e68610808050755s6e1d7319w4d4101094398e47f@mail.gmail.com>
Date: Tue, 5 Aug 2008 15:55:03 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to get all unique documents based on keyword feild
In-Reply-To: <18828735.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18807014.post@talk.nabble.com>
	 <8c4e68610808040341i634e8535ob7e2ab8d54f92aec@mail.gmail.com>
	 <18828735.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I've never used it, but from my reading of the thread referenced
below, that is exactly what DuplicateFilter does: remove duplicates at
query i.e. retrieval time, based on whatever you tell it.


--
Ian.


On Tue, Aug 5, 2008 at 11:54 AM, sandyg <gaddamsandeeps@gmail.com> wrote:
>
> Hi Ian,
> Tnx for the reply .
> But i have already duplicate records and the issue is not for controlling
> duplicate documents, but when i retreive documents
>  i should get unique documents based on keyword feild.
>
>
> Ian Lea wrote:
>>
>> Sounds like a thread from a few weeks ago.
>> http://www.gossamer-threads.com/lists/lucene/java-user/63141
>>
>> DuplicateFilter may be what you're looking for.
>>
>>
>> --
>> Ian.
>>
>>
>>
>> On Mon, Aug 4, 2008 at 8:48 AM, sandyg <gaddamsandeeps@gmail.com> wrote:
>>>
>>> Hi ALL,
>>>
>>> First thnx for spending time to read the message.
>>> Am using MatchAllDocsQuery to get all the documents .
>>> But i need documents that are  unique based on keyword .
>>> in my document keyword feild  had values like 1,2,2,3,4,5,5,5,5 so
>>> on.....
>>> so the result i need is only 1,2,3,4,5 so on ... unique
>>> but MatchAllDocsQuery will get all documents 1,2,3,4,5
>>>
>>> Do i have any class ,where i will get  unique documents based on keyword.
>>> --
>>> View this message in context:
>>> http://www.nabble.com/how-to-get--all-unique--documents-based-on-keyword-feild-tp18807014p18807014.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/how-to-get--all-unique--documents-based-on-keyword-feild-tp18807014p18828735.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 15:03:11 2008
Return-Path: <java-user-return-35324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94287 invoked from network); 5 Aug 2008 15:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 15:03:11 -0000
Received: (qmail 96161 invoked by uid 500); 5 Aug 2008 15:03:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95453 invoked by uid 500); 5 Aug 2008 15:03:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95442 invoked by uid 99); 5 Aug 2008 15:03:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 08:03:03 -0700
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [150.228.40.129] (HELO post1.merrillcorp.com) (150.228.40.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 15:02:06 +0000
Received: from relay2.stp.mrll.com (relay.stp.mrll.com [150.228.20.19])
	by post1.merrillcorp.com (8.13.1/8.13.1/P2.8) with ESMTP id m75F1W9B021520
	for <java-user@lucene.apache.org>; Tue, 5 Aug 2008 10:01:32 -0500
Received: from EVS02.adminsys.mrll.com (stp2pmc01b.adminsys.mrll.com [150.228.20.42])
	by relay2.stp.mrll.com (8.13.1/8.13.1/R1.13) with ESMTP id m75F1WcR014398
	for <java-user@lucene.apache.org>; Tue, 5 Aug 2008 10:01:32 -0500
Received: from 66.237.172.251 ([66.237.172.251]) by EVS02.adminsys.mrll.com ([150.228.20.47]) via Exchange Front-End Server webmail.merrillcorp.com ([172.30.19.181]) with Microsoft Exchange Server HTTP-DAV ;
 Tue,  5 Aug 2008 15:01:31 +0000
Received: from workstation29 by webmail.merrillcorp.com; 05 Aug 2008 11:01:31 -0400
Subject: Term Based Meta Data
From: Martin Owens <martin.owens@merrillcorp.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Date: Tue, 05 Aug 2008 11:01:30 -0400
Message-Id: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Users,

I'm working on a project which attempts to store data that comes from an
OCR process which describes the pixel co-ordinates of each term in the
document. It's used for hit highlighting.

What I would like to do is store this co-ordinate information alongside
the terms. I know there is existing meta data stored per term (Word
Offset and Char Offsets) the problem is that If I create a separate
index and try and use the word offset or char offsets not only is it
slower but it doesn't match because of the way the terms are processed
both inside of lucene and the OCR program.

So, is it possible to store the data alongside the terms in lucene and
then recall them when doing certain searches? and how much custom code
needs to be written to do it?

Best Regards, Martin Owens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 16:57:55 2008
Return-Path: <java-user-return-35325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65362 invoked from network); 5 Aug 2008 16:57:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 16:57:55 -0000
Received: (qmail 54407 invoked by uid 500); 5 Aug 2008 16:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54380 invoked by uid 500); 5 Aug 2008 16:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54368 invoked by uid 99); 5 Aug 2008 16:57:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 09:57:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 16:56:51 +0000
Received: by an-out-0708.google.com with SMTP id c37so2895464anc.49
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 09:57:00 -0700 (PDT)
Received: by 10.100.143.12 with SMTP id q12mr1811680and.24.1217955419957;
        Tue, 05 Aug 2008 09:56:59 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 45sm13961242wri.34.2008.08.05.09.56.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 05 Aug 2008 09:56:40 -0700 (PDT)
Message-Id: <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Term Based Meta Data
Date: Tue, 5 Aug 2008 12:56:20 -0400
References: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I think you could use payloads (= arbitrary/opaque byte[]) for this?

You can attach a payload to each term occurrence during tokenization  
(indexing), and then retrieve the payload during searching.

Mike

Martin Owens wrote:

> Hello Users,
>
> I'm working on a project which attempts to store data that comes  
> from an
> OCR process which describes the pixel co-ordinates of each term in the
> document. It's used for hit highlighting.
>
> What I would like to do is store this co-ordinate information  
> alongside
> the terms. I know there is existing meta data stored per term (Word
> Offset and Char Offsets) the problem is that If I create a separate
> index and try and use the word offset or char offsets not only is it
> slower but it doesn't match because of the way the terms are processed
> both inside of lucene and the OCR program.
>
> So, is it possible to store the data alongside the terms in lucene and
> then recall them when doing certain searches? and how much custom code
> needs to be written to do it?
>
> Best Regards, Martin Owens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 17:15:35 2008
Return-Path: <java-user-return-35326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70989 invoked from network); 5 Aug 2008 17:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 17:15:34 -0000
Received: (qmail 83556 invoked by uid 500); 5 Aug 2008 17:15:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83080 invoked by uid 500); 5 Aug 2008 17:15:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83069 invoked by uid 99); 5 Aug 2008 17:15:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 10:15:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of williams.tricia@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 17:14:30 +0000
Received: by wx-out-0506.google.com with SMTP id h29so640471wxd.20
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 10:14:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=76i3uQFgh+ZM2JMgZ3raORcYQ+gHi3IxbA9CCON6vGc=;
        b=kT2PANykvZBcOa8xnPsE6gLiQyp17Bj10JhK4/ZZGvHyU2kbE8YD+eRv3D8YE8/VVB
         Ji0TI4TPTqjQ0fEKi4/JHfVwjHY51I4n9V17CTMKRCl4mZ1D9xc88vk0rUlSVJq0U4Mn
         2vjqL7iMlnSMujJ+GbA3VEWXNLPKle9J8XPJk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=pU3hG3SJ9+AJ2Lzwodj0BxqHV9uJU82EQqcX17g5IRM7i69syTaNqJnIrcDoUC6ei/
         EK6P1oC7zmuexg9CqO0Lo/zW4C2DdU+LPlJN5V5yIBEjNNF9ybWl/m7MbQ8IUqIhNVgy
         qpQZTFpzZaRrHyy7XfJQiuEyqNxGELL0wwZng=
Received: by 10.70.67.17 with SMTP id p17mr1528634wxa.56.1217956480007;
        Tue, 05 Aug 2008 10:14:40 -0700 (PDT)
Received: from ?192.168.1.115? ( [66.222.161.155])
        by mx.google.com with ESMTPS id i15sm10644196wxd.7.2008.08.05.10.14.32
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 05 Aug 2008 10:14:37 -0700 (PDT)
Message-ID: <48988A70.6030903@gmail.com>
Date: Tue, 05 Aug 2008 11:14:24 -0600
From: Tricia Williams <williams.tricia@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Term Based Meta Data
References: <1217948491.6917.32.camel@workstation29.ws.lextranet.com> <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>
In-Reply-To: <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Martin,

    Take a look at what I've done with SOLR-380 
(https://issues.apache.org/jira/browse/SOLR-380). It might solve your 
problem, or at least give you a good starting point.

Tricia

Michael McCandless wrote:
>
> I think you could use payloads (= arbitrary/opaque byte[]) for this?
>
> You can attach a payload to each term occurrence during tokenization 
> (indexing), and then retrieve the payload during searching.
>
> Mike
>
> Martin Owens wrote:
>
>> Hello Users,
>>
>> I'm working on a project which attempts to store data that comes from an
>> OCR process which describes the pixel co-ordinates of each term in the
>> document. It's used for hit highlighting.
>>
>> What I would like to do is store this co-ordinate information alongside
>> the terms. I know there is existing meta data stored per term (Word
>> Offset and Char Offsets) the problem is that If I create a separate
>> index and try and use the word offset or char offsets not only is it
>> slower but it doesn't match because of the way the terms are processed
>> both inside of lucene and the OCR program.
>>
>> So, is it possible to store the data alongside the terms in lucene and
>> then recall them when doing certain searches? and how much custom code
>> needs to be written to do it?
>>
>> Best Regards, Martin Owens
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 18:10:35 2008
Return-Path: <java-user-return-35327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3753 invoked from network); 5 Aug 2008 18:10:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 18:10:35 -0000
Received: (qmail 51084 invoked by uid 500); 5 Aug 2008 18:10:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51051 invoked by uid 500); 5 Aug 2008 18:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51038 invoked by uid 99); 5 Aug 2008 18:10:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 11:10:26 -0700
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [150.228.43.65] (HELO post2.merrillcorp.com) (150.228.43.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 18:09:29 +0000
Received: from relay1.stp.mrll.com (relay1.stp.mrll.com [150.228.20.20])
	by post2.merrillcorp.com (8.13.1/8.13.1/P2.8) with ESMTP id m75I9tkq024345
	for <java-user@lucene.apache.org>; Tue, 5 Aug 2008 13:09:55 -0500
Received: from EVS02.adminsys.mrll.com (stp2pmc01b.adminsys.mrll.com [150.228.20.42])
	by relay1.stp.mrll.com (8.13.1/8.13.1/R1.13) with ESMTP id m75I9s2B013810
	for <java-user@lucene.apache.org>; Tue, 5 Aug 2008 13:09:54 -0500
Received: from 66.237.172.251 ([66.237.172.251]) by EVS02.adminsys.mrll.com ([150.228.20.47]) via Exchange Front-End Server webmail.merrillcorp.com ([172.30.19.181]) with Microsoft Exchange Server HTTP-DAV ;
 Tue,  5 Aug 2008 18:09:53 +0000
Received: from workstation29 by webmail.merrillcorp.com; 05 Aug 2008 14:09:53 -0400
Subject: Re: Term Based Meta Data
From: Martin Owens <martin.owens@merrillcorp.com>
To: java-user@lucene.apache.org
In-Reply-To: <48988A70.6030903@gmail.com>
References: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>
	 <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>
	 <48988A70.6030903@gmail.com>
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Date: Tue, 05 Aug 2008 14:09:53 -0400
Message-Id: <1217959793.6917.41.camel@workstation29.ws.lextranet.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you very much, I'm using Solr so it's very relivent to me. Even
though the indexing is being done by a smaller RMI method (since Solr
doesn't support streaming of very large files and has term limits) but
all the searching is done through solr.

Thanks again,

Best Regards, Martin Owens

On Tue, 2008-08-05 at 11:14 -0600, Tricia Williams wrote:
> Hi Martin,
> 
>     Take a look at what I've done with SOLR-380 
> (https://issues.apache.org/jira/browse/SOLR-380). It might solve your 
> problem, or at least give you a good starting point.
> 
> Tricia
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 19:15:10 2008
Return-Path: <java-user-return-35328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67058 invoked from network); 5 Aug 2008 19:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 19:15:10 -0000
Received: (qmail 30942 invoked by uid 500); 5 Aug 2008 19:15:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30900 invoked by uid 500); 5 Aug 2008 19:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30889 invoked by uid 99); 5 Aug 2008 19:15:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 12:15:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 19:14:07 +0000
Received: by yx-out-2324.google.com with SMTP id 3so219275yxj.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 12:14:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=XwV1dCVWBpeZsI5gIUygo5tRW9gD19l2EWxdxkERwpQ=;
        b=mbhDwMn9HjsS8VyNt6+CMAp9QcadvmYeVZZgaHDhYO39gab5ExKQ8mZA1c06Ni32p0
         T3KacYK4KnYitoS0zyHzrRCgnwE/NsT2eJqjoUY4OrjdcBvpPvRsF33I4fEuaebzekLw
         +ieXSNsY51ivg2iTD7c7y7rzDBP5d38aPf83s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=uzPOfH7nKZK9LDAM69ns8O/rd43ZT4EiE4K7Et3C9QiupRvLxAktbMK4HKCGaqGHtw
         ejDPK3Hhpu364pABr+Lr332xMsOylghkrQ2utX2gjOOBk891A7nalonQ3IlMWTOMqsqy
         3ck1kNQ2nk1p69DIFfGuKNLFfN1+Q3fNettcc=
Received: by 10.150.58.1 with SMTP id g1mr1948641yba.85.1217963673988;
        Tue, 05 Aug 2008 12:14:33 -0700 (PDT)
Received: by 10.151.98.15 with HTTP; Tue, 5 Aug 2008 12:14:33 -0700 (PDT)
Message-ID: <efd1bd310808051214s2703d6a1rb80e7fa46f268fca@mail.gmail.com>
Date: Tue, 5 Aug 2008 12:14:33 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Sorting
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there!

I'm new to Lucene, so forgive any misconceptions on my part.

I created an Index and now I want to search on it based on a field.
The field is a String field and Field.Store.YES and
Field.Index.TOKENIZED. No problems with the search.

Now, I wanted to sort the results, and according to the Sort javadoc
the field "should not be tokenized". But I decided to try it anyway,
and it worked. However, the results showed that the tokens were
sorted, not the full string in the field.

Just to make myself more clear, here's an example. Let's say I have
these strings indexed:

"North Carolina"
"British Columbia"
"Canada"

Now I search (with sort) for the token 'c*'

The result I get is (sorted by the token found):

1) Canada
2) North Carolina
3) British Columbia

The result I wanted was (sorted by the whole String)"

1) British Columbia
2) Canada
3) North Carolina

Is there a way to do this?


Another option would be to sort the index itself, since this field is
the only field that we'd be searching on. But I'm just guessing here,
cause I have no idea if this is possible at all!

Thanks,


Andre

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 19:39:27 2008
Return-Path: <java-user-return-35329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91524 invoked from network); 5 Aug 2008 19:39:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 19:39:27 -0000
Received: (qmail 59782 invoked by uid 500); 5 Aug 2008 19:39:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59750 invoked by uid 500); 5 Aug 2008 19:39:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59739 invoked by uid 99); 5 Aug 2008 19:39:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 12:39:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 19:38:24 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2557964wra.21
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 12:38:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=Ijnazu0RrHjhfgxHn8EL1hX5YEXOn1rtGwBHrhi9HPQ=;
        b=nPJyr2nJdnmzrylRBLvZAu4G+X8BCXM1NQ/LDRZSxvzf0bgDxq+rp+OtR+Y1/Ox5sO
         e+2C3DN0GuzA3ro7Eg1r1fdNKDgAdLwUVYR/WRE4OL7Sg0WPS7sxwl+mKlQoIootKJXu
         zq4Ns4pMIaFHajAVb38m5R2XTvLgBFVN60F6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=eNxkvzsKqASHooO+j7bjkPynNnaGL52Zgd3BROm38/DJq0OmGoOzZ1xKHcHcQhMFZU
         bjqT/6hG1Znm8fCs0f7bMaheCUN1axyCnEdApLmOgzdvZ9UGHFG59lshEXSHFuIyaHr7
         1U7HjWtXOf8zmd2DNgyr/3njM5JxjIQwVwKeA=
Received: by 10.90.115.17 with SMTP id n17mr1895338agc.31.1217965114439;
        Tue, 05 Aug 2008 12:38:34 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 36sm12849628agc.9.2008.08.05.12.38.33
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 05 Aug 2008 12:38:33 -0700 (PDT)
Message-ID: <4898AC39.7050403@gmail.com>
Date: Tue, 05 Aug 2008 15:38:33 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting
References: <efd1bd310808051214s2703d6a1rb80e7fa46f268fca@mail.gmail.com>
In-Reply-To: <efd1bd310808051214s2703d6a1rb80e7fa46f268fca@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Andre,

The reason the javadoc says the field should not be tokenized stems from 
the issue you point out. What you want to do is possible of course, but 
making the Lucene code change would complicate a process that can be 
quite memory and cpu intensive on large collections. Done right, it 
might make a good patch though.

A compromise that you can make outside of the Lucene code is to index a 
separate field with the same contents but untokenized. Sorting on this 
field instead, Lucene will treat "North Carolina" as one token and sort 
as you'd expect. The downside to this approach is that you will have to 
juggle the two fields in the future.

- Mark

Andre Rubin wrote:
> Hi there!
>
> I'm new to Lucene, so forgive any misconceptions on my part.
>
> I created an Index and now I want to search on it based on a field.
> The field is a String field and Field.Store.YES and
> Field.Index.TOKENIZED. No problems with the search.
>
> Now, I wanted to sort the results, and according to the Sort javadoc
> the field "should not be tokenized". But I decided to try it anyway,
> and it worked. However, the results showed that the tokens were
> sorted, not the full string in the field.
>
> Just to make myself more clear, here's an example. Let's say I have
> these strings indexed:
>
> "North Carolina"
> "British Columbia"
> "Canada"
>
> Now I search (with sort) for the token 'c*'
>
> The result I get is (sorted by the token found):
>
> 1) Canada
> 2) North Carolina
> 3) British Columbia
>
> The result I wanted was (sorted by the whole String)"
>
> 1) British Columbia
> 2) Canada
> 3) North Carolina
>
> Is there a way to do this?
>
>
> Another option would be to sort the index itself, since this field is
> the only field that we'd be searching on. But I'm just guessing here,
> cause I have no idea if this is possible at all!
>
> Thanks,
>
>
> Andre
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 19:53:03 2008
Return-Path: <java-user-return-35330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2611 invoked from network); 5 Aug 2008 19:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 19:53:03 -0000
Received: (qmail 79586 invoked by uid 500); 5 Aug 2008 19:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79543 invoked by uid 500); 5 Aug 2008 19:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79532 invoked by uid 99); 5 Aug 2008 19:52:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 12:52:55 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 19:52:00 +0000
In-Reply-To: <4898AC39.7050403@gmail.com>
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: Re: Sorting
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OFE331F672.DF85FB85-ON8625749C.006CCF47-8625749C.006D2641@nasi.com>
From: Robert.Hastings@ancept.com
Date: Tue, 5 Aug 2008 14:51:41 -0500
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 08/05/2008
 14:52:10,
	Serialize complete at 08/05/2008 14:52:10
Content-Type: multipart/alternative; boundary="=_alternative 006D263F8625749C_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006D263F8625749C_=
Content-Type: text/plain; charset="US-ASCII"

This is what I did and it works fine.  My untokenized fields where named: 
"__AMSUNTOK__" + fieldName.
Where fieldName was the name of the tokenized field.


Bob Hastings
Ancept Inc.




Mark Miller <markrmiller@gmail.com> 
08/05/2008 02:38 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: Sorting






Hey Andre,

The reason the javadoc says the field should not be tokenized stems from 
the issue you point out. What you want to do is possible of course, but 
making the Lucene code change would complicate a process that can be 
quite memory and cpu intensive on large collections. Done right, it 
might make a good patch though.

A compromise that you can make outside of the Lucene code is to index a 
separate field with the same contents but untokenized. Sorting on this 
field instead, Lucene will treat "North Carolina" as one token and sort 
as you'd expect. The downside to this approach is that you will have to 
juggle the two fields in the future.

- Mark

Andre Rubin wrote:
> Hi there!
>
> I'm new to Lucene, so forgive any misconceptions on my part.
>
> I created an Index and now I want to search on it based on a field.
> The field is a String field and Field.Store.YES and
> Field.Index.TOKENIZED. No problems with the search.
>
> Now, I wanted to sort the results, and according to the Sort javadoc
> the field "should not be tokenized". But I decided to try it anyway,
> and it worked. However, the results showed that the tokens were
> sorted, not the full string in the field.
>
> Just to make myself more clear, here's an example. Let's say I have
> these strings indexed:
>
> "North Carolina"
> "British Columbia"
> "Canada"
>
> Now I search (with sort) for the token 'c*'
>
> The result I get is (sorted by the token found):
>
> 1) Canada
> 2) North Carolina
> 3) British Columbia
>
> The result I wanted was (sorted by the whole String)"
>
> 1) British Columbia
> 2) Canada
> 3) North Carolina
>
> Is there a way to do this?
>
>
> Another option would be to sort the index itself, since this field is
> the only field that we'd be searching on. But I'm just guessing here,
> cause I have no idea if this is possible at all!
>
> Thanks,
>
>
> Andre
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--=_alternative 006D263F8625749C_=--

From java-user-return-35331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 20:12:41 2008
Return-Path: <java-user-return-35331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20443 invoked from network); 5 Aug 2008 20:12:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 20:12:41 -0000
Received: (qmail 9480 invoked by uid 500); 5 Aug 2008 20:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9200 invoked by uid 500); 5 Aug 2008 20:12:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9189 invoked by uid 99); 5 Aug 2008 20:12:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 13:12:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 20:11:37 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1308734ywj.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 13:12:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=8KHilv/Kx8wAyb3BD6agaUXid63lKvIs6q+BGFCKLFc=;
        b=U2XbQWuSSxQhG2NyV9tUbbQmGTs1WvU0yniJcgIVfS+hEue9oob6P9u0ucexXWd0ok
         gYxDB5BRGBnJbiMwd0rjWtbANCBWdoxvhiz/H6Y1CY/ekwCipbNKtX0O8hO2r07tuR3c
         YPAXULVlJ/rrjbTuTog3EqXx9pOfs8meLLgmw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=hDNjvOLp3Lt3WactTcdB/zZ2Kx0rbrthhbR8MG9iHHiA+LUfUsZAf5Bvc8yqVYyHNL
         UH/KsK+0Dc9yIMoFrcTgXI0RVTP5p8bzydmGoqykmXI5AEWb8tyRiNJUsdM60Rep9Flo
         wq4JaQ9V1xNXSeyC4YBuq4Y9AgQ3l6lS5LLGQ=
Received: by 10.151.11.17 with SMTP id o17mr2055551ybi.27.1217967124069;
        Tue, 05 Aug 2008 13:12:04 -0700 (PDT)
Received: by 10.151.98.15 with HTTP; Tue, 5 Aug 2008 13:12:04 -0700 (PDT)
Message-ID: <efd1bd310808051312x4a27f60di4eaa60813f52c2b2@mail.gmail.com>
Date: Tue, 5 Aug 2008 13:12:04 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting
In-Reply-To: <OFE331F672.DF85FB85-ON8625749C.006CCF47-8625749C.006D2641@nasi.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4898AC39.7050403@gmail.com>
	 <OFE331F672.DF85FB85-ON8625749C.006CCF47-8625749C.006D2641@nasi.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like a good alternative. But how do I perform the search on the
tokenized filed and sort on the un_tokenized one?

Thanks,


Andre

On Tue, Aug 5, 2008 at 12:51 PM,  <Robert.Hastings@ancept.com> wrote:
> This is what I did and it works fine.  My untokenized fields where named:
> "__AMSUNTOK__" + fieldName.
> Where fieldName was the name of the tokenized field.
>
>
> Bob Hastings
> Ancept Inc.
>
>
>
>
> Mark Miller <markrmiller@gmail.com>
> 08/05/2008 02:38 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Sorting
>
>
>
>
>
>
> Hey Andre,
>
> The reason the javadoc says the field should not be tokenized stems from
> the issue you point out. What you want to do is possible of course, but
> making the Lucene code change would complicate a process that can be
> quite memory and cpu intensive on large collections. Done right, it
> might make a good patch though.
>
> A compromise that you can make outside of the Lucene code is to index a
> separate field with the same contents but untokenized. Sorting on this
> field instead, Lucene will treat "North Carolina" as one token and sort
> as you'd expect. The downside to this approach is that you will have to
> juggle the two fields in the future.
>
> - Mark
>
> Andre Rubin wrote:
>> Hi there!
>>
>> I'm new to Lucene, so forgive any misconceptions on my part.
>>
>> I created an Index and now I want to search on it based on a field.
>> The field is a String field and Field.Store.YES and
>> Field.Index.TOKENIZED. No problems with the search.
>>
>> Now, I wanted to sort the results, and according to the Sort javadoc
>> the field "should not be tokenized". But I decided to try it anyway,
>> and it worked. However, the results showed that the tokens were
>> sorted, not the full string in the field.
>>
>> Just to make myself more clear, here's an example. Let's say I have
>> these strings indexed:
>>
>> "North Carolina"
>> "British Columbia"
>> "Canada"
>>
>> Now I search (with sort) for the token 'c*'
>>
>> The result I get is (sorted by the token found):
>>
>> 1) Canada
>> 2) North Carolina
>> 3) British Columbia
>>
>> The result I wanted was (sorted by the whole String)"
>>
>> 1) British Columbia
>> 2) Canada
>> 3) North Carolina
>>
>> Is there a way to do this?
>>
>>
>> Another option would be to sort the index itself, since this field is
>> the only field that we'd be searching on. But I'm just guessing here,
>> cause I have no idea if this is possible at all!
>>
>> Thanks,
>>
>>
>> Andre
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 20:19:35 2008
Return-Path: <java-user-return-35332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24739 invoked from network); 5 Aug 2008 20:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 20:19:35 -0000
Received: (qmail 17918 invoked by uid 500); 5 Aug 2008 20:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17885 invoked by uid 500); 5 Aug 2008 20:19:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17874 invoked by uid 99); 5 Aug 2008 20:19:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 13:19:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 20:18:32 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2874469rvb.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 13:18:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=wccf4jYd6WFXTrDKhXh51PgQAAjEpA6laBE6ko/5k7Y=;
        b=ojZuGpzbS+8jzEBgOlYequHtuUYGBCUYqtLrL68wd4hK1s+kphNqKcQa8ZCt0WUolQ
         f6idmeEbBS8BfZmqTxtKM/ZNZFcrnakQnWEXN7AyIJdnGvVkqjornrMMhscf3bcKff0P
         rb8LZn8BIrniEuddJeUavrb0MAKjlJBIMb9Jw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=EnWsePEHTWC3hgLhB7Q8LNNGvbR7b8zPAKoRVKwnaC1d8jh37JkrqhuAv8kpyoz+ZH
         YrWLIZhCjf0mixVzqAWPu1fkW2JM/D+JmvdVMBYzbY/oYm2pI37OTkeJwVZtznJOCvw9
         Z8ZQrJIy7YphErBdHooX6P8WwQxzw1e7LVErQ=
Received: by 10.141.169.11 with SMTP id w11mr8436299rvo.76.1217967539114;
        Tue, 05 Aug 2008 13:18:59 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Tue, 5 Aug 2008 13:18:59 -0700 (PDT)
Message-ID: <359a92830808051318t45f35883ya1fb3cb0a08391df@mail.gmail.com>
Date: Tue, 5 Aug 2008 16:18:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting
In-Reply-To: <efd1bd310808051312x4a27f60di4eaa60813f52c2b2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56882_31257982.1217967539107"
References: <4898AC39.7050403@gmail.com>
	 <OFE331F672.DF85FB85-ON8625749C.006CCF47-8625749C.006D2641@nasi.com>
	 <efd1bd310808051312x4a27f60di4eaa60813f52c2b2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_56882_31257982.1217967539107
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Your sort object has no relation to your query in terms of fields. You can
search on anything you want, but construct your Sort object with your
untokenized field.

Best
Erick

On Tue, Aug 5, 2008 at 4:12 PM, Andre Rubin <andre.rubin@gmail.com> wrote:

> Sounds like a good alternative. But how do I perform the search on the
> tokenized filed and sort on the un_tokenized one?
>
> Thanks,
>
>
> Andre
>
> On Tue, Aug 5, 2008 at 12:51 PM,  <Robert.Hastings@ancept.com> wrote:
> > This is what I did and it works fine.  My untokenized fields where named:
> > "__AMSUNTOK__" + fieldName.
> > Where fieldName was the name of the tokenized field.
> >
> >
> > Bob Hastings
> > Ancept Inc.
> >
> >
> >
> >
> > Mark Miller <markrmiller@gmail.com>
> > 08/05/2008 02:38 PM
> > Please respond to
> > java-user@lucene.apache.org
> >
> >
> > To
> > java-user@lucene.apache.org
> > cc
> >
> > Subject
> > Re: Sorting
> >
> >
> >
> >
> >
> >
> > Hey Andre,
> >
> > The reason the javadoc says the field should not be tokenized stems from
> > the issue you point out. What you want to do is possible of course, but
> > making the Lucene code change would complicate a process that can be
> > quite memory and cpu intensive on large collections. Done right, it
> > might make a good patch though.
> >
> > A compromise that you can make outside of the Lucene code is to index a
> > separate field with the same contents but untokenized. Sorting on this
> > field instead, Lucene will treat "North Carolina" as one token and sort
> > as you'd expect. The downside to this approach is that you will have to
> > juggle the two fields in the future.
> >
> > - Mark
> >
> > Andre Rubin wrote:
> >> Hi there!
> >>
> >> I'm new to Lucene, so forgive any misconceptions on my part.
> >>
> >> I created an Index and now I want to search on it based on a field.
> >> The field is a String field and Field.Store.YES and
> >> Field.Index.TOKENIZED. No problems with the search.
> >>
> >> Now, I wanted to sort the results, and according to the Sort javadoc
> >> the field "should not be tokenized". But I decided to try it anyway,
> >> and it worked. However, the results showed that the tokens were
> >> sorted, not the full string in the field.
> >>
> >> Just to make myself more clear, here's an example. Let's say I have
> >> these strings indexed:
> >>
> >> "North Carolina"
> >> "British Columbia"
> >> "Canada"
> >>
> >> Now I search (with sort) for the token 'c*'
> >>
> >> The result I get is (sorted by the token found):
> >>
> >> 1) Canada
> >> 2) North Carolina
> >> 3) British Columbia
> >>
> >> The result I wanted was (sorted by the whole String)"
> >>
> >> 1) British Columbia
> >> 2) Canada
> >> 3) North Carolina
> >>
> >> Is there a way to do this?
> >>
> >>
> >> Another option would be to sort the index itself, since this field is
> >> the only field that we'd be searching on. But I'm just guessing here,
> >> cause I have no idea if this is possible at all!
> >>
> >> Thanks,
> >>
> >>
> >> Andre
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_56882_31257982.1217967539107--

From java-user-return-35333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 20:36:46 2008
Return-Path: <java-user-return-35333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38894 invoked from network); 5 Aug 2008 20:36:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 20:36:45 -0000
Received: (qmail 48612 invoked by uid 500); 5 Aug 2008 20:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48563 invoked by uid 500); 5 Aug 2008 20:36:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48526 invoked by uid 99); 5 Aug 2008 20:36:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 13:36:33 -0700
X-ASF-Spam-Status: No, hits=-6.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.152.239.220] (HELO l4dupmt4.hewitt.com) (204.152.239.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 20:35:36 +0000
Received: from linkap13.hewitt.com (linkap13.hewitt.com [10.64.63.9])
	by l4dupmt4.hewitt.com (8.13.4/8.13.4) with ESMTP id m75KXH96031465
	for <java-user@lucene.apache.org>; Tue, 5 Aug 2008 15:36:02 -0500 (CDT)
Received: from [10.20.63.62] by linkap13.hewitt.com with ESMTP (
 Tumbleweed MMS SMTP Relay); Tue, 05 Aug 2008 15:35:44 -0500
X-Server-Uuid: 00C1C84A-C61B-441D-AFFB-A60DA65DD480
To: java-user@lucene.apache.org
Subject: Paging & Sorting
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF1DD75A51.37D70058-ON8625749C.0070393B-8625749C.00711F50@hewitt.com>
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
Date: Tue, 5 Aug 2008 15:35:42 -0500
X-HANotesOU: Gurgaon
X-HASecureMessage: 0
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6FP2|October 17, 2007) at 08/05/2008 03:35:45
 PM, Serialize complete at 08/05/2008 03:35:45 PM
X-WSS-ID: 6486662A27819382074-02-01
Content-Type: multipart/alternative;
 boundary="=_alternative 00711F488625749C_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00711F488625749C_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi,

I need first 100 documents in a sorted order lets say sorted on the 
document id and there are more then 50K documents in the index. My search 
query is matching all those 50K documents. Is there any way to get only 
first 100 documents that too in a sorted order of document id. I mean 
Lucene will only give out those 100 documents?

Many Thx!



The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient is strictly prohibited. All messages sent to and from this e-mail address may be monitored as permitted by applicable law and regulations to ensure compliance with our internal policies and to protect our business. E-mails are not secure and cannot be guaranteed to be error free as they can be intercepted, amended, lost or destroyed, or contain viruses. You are deemed to have accepted these risks if you communicate with us by e-mail. 



--=_alternative 00711F488625749C_=--


From java-user-return-35334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 21:17:14 2008
Return-Path: <java-user-return-35334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65324 invoked from network); 5 Aug 2008 21:17:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 21:17:14 -0000
Received: (qmail 2682 invoked by uid 500); 5 Aug 2008 21:17:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2498 invoked by uid 500); 5 Aug 2008 21:17:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2480 invoked by uid 99); 5 Aug 2008 21:17:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 14:17:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 21:16:11 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2899719rvb.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 14:16:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=GJpLsp7x/hpn95HEBX9DR1Z6pZLHC/t9kQucaVeFfpo=;
        b=m2Vle/m3thxIFomfIyXOGNyk0LqaMqv3H0SFDl3sf9cFlG2B5VsViSpN5tBoBBKq7G
         AUtImJIJhpnrTmH+7th/cEBqwqIecoFjjBH8AnrGKQ7YFF809kGXKHPbAgSk9fe6YRZ7
         EhsvEcNI2PgQ9E8JZcUrMtYX25bNd1pmtgyMc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OARRlpO28igEBTrM9+e8m5TJi/80NWokYno0usBLPr04olj7QRrn8WmzQ39CM+ZlTH
         d4aWTwXKyKMkTuAXvwIfcWGRw0j4EIisSRaAbzp/fyd5K1UYNONr9yCmbDy0yKOE6mzd
         QOD5hozZ01xIczw2vown1nRiN1+evLzN9Pw0c=
Received: by 10.141.162.16 with SMTP id p16mr8454547rvo.243.1217970998024;
        Tue, 05 Aug 2008 14:16:38 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Tue, 5 Aug 2008 14:16:38 -0700 (PDT)
Message-ID: <359a92830808051416o64ec88ffi3ae3c1c7179ac246@mail.gmail.com>
Date: Tue, 5 Aug 2008 17:16:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Paging & Sorting
In-Reply-To: <OF1DD75A51.37D70058-ON8625749C.0070393B-8625749C.00711F50@hewitt.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57475_3022583.1217970998030"
References: <OF1DD75A51.37D70058-ON8625749C.0070393B-8625749C.00711F50@hewitt.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57475_3022583.1217970998030
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, just iterate over the first 100 entries in your Hits object
(or topdocs).

If you're asking how to ignore 49,900 of your documents (that
is, not even consider them at all), you're asking the impossible
because you can't know whether to ignore those other docs
unless you sort them first.

If you're asking if you can get the 100 most relevant docs and
then sort only those, then you should look at FieldSortedHitQueue.
What you'd do is feed the top 100 documents into an instance
of FieldSortedHit queue then read traverse the queue.

If none of this applies, could you explain in a bit more detail?

Best
Erick

On Tue, Aug 5, 2008 at 4:35 PM, Neeraj Gupta <neeraj.gupta.2@hewitt.com>wrote:

> Hi,
>
> I need first 100 documents in a sorted order lets say sorted on the
> document id and there are more then 50K documents in the index. My search
> query is matching all those 50K documents. Is there any way to get only
> first 100 documents that too in a sorted order of document id. I mean
> Lucene will only give out those 100 documents?
>
> Many Thx!
>
>
>
> The information contained in this e-mail and any accompanying documents may
> contain information that is confidential or otherwise protected from
> disclosure. If you are not the intended recipient of this message, or if
> this message has been addressed to you in error, please immediately alert
> the sender by reply e-mail and then delete this message, including any
> attachments. Any dissemination, distribution or other use of the contents of
> this message by anyone other than the intended recipient is strictly
> prohibited. All messages sent to and from this e-mail address may be
> monitored as permitted by applicable law and regulations to ensure
> compliance with our internal policies and to protect our business. E-mails
> are not secure and cannot be guaranteed to be error free as they can be
> intercepted, amended, lost or destroyed, or contain viruses. You are deemed
> to have accepted these risks if you communicate with us by e-mail.
>
>
>

------=_Part_57475_3022583.1217970998030--

From java-user-return-35335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 22:06:08 2008
Return-Path: <java-user-return-35335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12708 invoked from network); 5 Aug 2008 22:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 22:06:08 -0000
Received: (qmail 78446 invoked by uid 500); 5 Aug 2008 22:06:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78408 invoked by uid 500); 5 Aug 2008 22:06:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78397 invoked by uid 99); 5 Aug 2008 22:06:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 15:06:00 -0700
X-ASF-Spam-Status: No, hits=-6.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.152.239.220] (HELO l4dupmt4.hewitt.com) (204.152.239.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 22:05:05 +0000
Received: from linkap13.hewitt.com (linkap13.hewitt.com [10.64.63.9])
	by l4dupmt4.hewitt.com (8.13.4/8.13.4) with ESMTP id m75M4XiJ014410
	for <java-user@lucene.apache.org>; Tue, 5 Aug 2008 17:05:31 -0500 (CDT)
Received: from [10.20.63.62] by linkap13.hewitt.com with ESMTP (
 Tumbleweed MMS SMTP Relay); Tue, 05 Aug 2008 17:03:18 -0500
X-Server-Uuid: 00C1C84A-C61B-441D-AFFB-A60DA65DD480
In-Reply-To: <359a92830808051416o64ec88ffi3ae3c1c7179ac246@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Paging & Sorting
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OFA538075E.6B322D53-ON8625749C.00783311-8625749C.00792465@hewitt.com>
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
Date: Tue, 5 Aug 2008 17:03:18 -0500
X-HANotesOU: Gurgaon
X-HASecureMessage: 0
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6FP2|October 17, 2007) at 08/05/2008 05:03:19
 PM, Serialize complete at 08/05/2008 05:03:19 PM
X-WSS-ID: 648611AC27819420377-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 0079245B8625749C_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0079245B8625749C_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Thank  you for the reply, As you said

Sure, just iterate over the first 100 entries in your Hits object

It means before Iteration Lucene has already spent time and memory in 
finding all the 50k documents and sorting them, then i will retrieve 100 
documents. Hence it is costing me a search for 50k documents + sorting of 
these 50k matching documents + retrieval of first 100 documents.. Right?

But what i want is the way, to get the same result as per the above 
process but with not costing me to search and sort all 50K matching 
documents. is this possible?

Many Thx!
-Neeraj



"Erick Erickson" <erickerickson@gmail.com> 

08/05/2008 04:16 PM
Please respond to
java-user@lucene.apache.org



To
java-user@lucene.apache.org
cc

Subject
Re: Paging & Sorting






Sure, just iterate over the first 100 entries in your Hits object
(or topdocs).

If you're asking how to ignore 49,900 of your documents (that
is, not even consider them at all), you're asking the impossible
because you can't know whether to ignore those other docs
unless you sort them first.

If you're asking if you can get the 100 most relevant docs and
then sort only those, then you should look at FieldSortedHitQueue.
What you'd do is feed the top 100 documents into an instance
of FieldSortedHit queue then read traverse the queue.

If none of this applies, could you explain in a bit more detail?

Best
Erick

On Tue, Aug 5, 2008 at 4:35 PM, Neeraj Gupta 
<neeraj.gupta.2@hewitt.com>wrote:

> Hi,
>
> I need first 100 documents in a sorted order lets say sorted on the
> document id and there are more then 50K documents in the index. My 
search
> query is matching all those 50K documents. Is there any way to get only
> first 100 documents that too in a sorted order of document id. I mean
> Lucene will only give out those 100 documents?
>
> Many Thx!
>
>
>
> The information contained in this e-mail and any accompanying documents 
may
> contain information that is confidential or otherwise protected from
> disclosure. If you are not the intended recipient of this message, or if
> this message has been addressed to you in error, please immediately 
alert
> the sender by reply e-mail and then delete this message, including any
> attachments. Any dissemination, distribution or other use of the 
contents of
> this message by anyone other than the intended recipient is strictly
> prohibited. All messages sent to and from this e-mail address may be
> monitored as permitted by applicable law and regulations to ensure
> compliance with our internal policies and to protect our business. 
E-mails
> are not secure and cannot be guaranteed to be error free as they can be
> intercepted, amended, lost or destroyed, or contain viruses. You are 
deemed
> to have accepted these risks if you communicate with us by e-mail.
>
>
>





The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient is strictly prohibited. All messages sent to and from this e-mail address may be monitored as permitted by applicable law and regulations to ensure compliance with our internal policies and to protect our business. E-mails are not secure and cannot be guaranteed to be error free as they can be intercepted, amended, lost or destroyed, or contain viruses. You are deemed to have accepted these risks if you communicate with us by e-mail. 



--=_alternative 0079245B8625749C_=--


From java-user-return-35336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 22:49:52 2008
Return-Path: <java-user-return-35336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68606 invoked from network); 5 Aug 2008 22:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 22:49:52 -0000
Received: (qmail 42300 invoked by uid 500); 5 Aug 2008 22:49:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42273 invoked by uid 500); 5 Aug 2008 22:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42255 invoked by uid 99); 5 Aug 2008 22:49:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 15:49:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 22:48:48 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2940982rvb.5
        for <java-user@lucene.apache.org>; Tue, 05 Aug 2008 15:48:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=LwHwc0XWkhf0rlDvMQMzNlzti+ITV31Qm5PAlr53yX4=;
        b=bKTrlRvDnHdqKGE99DGRJO8SG2SBOpwJbcK/FZ6XPc025KOHHD+RiY3Cxvr/frn8AZ
         Xx9+WmR/LiW5Dqg0JveNg7I3zTZgM5mjoO/7pYWlZ0HBTGfxSUOAKjwVyURipxrzOBic
         XXhiYMlKJPd7uIcVd7rGjus0ucdgnAgfYHsfQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=qyEjwRGSssJFpq0zuP7R5hm8dl4L9OdvCLItPvvipYl2fvG//ij+5ukemqzLU/Tlh1
         hX0dSmLK12L59/57MM5fI5zJUol/suZcchGQXlkZ9iERHeZy6PzMut9qs61Fuq1+zath
         7ej0uW2PhhbTS2Ki8D2+5dRzF4na4AYTyv9qQ=
Received: by 10.140.201.8 with SMTP id y8mr8517226rvf.28.1217976538856;
        Tue, 05 Aug 2008 15:48:58 -0700 (PDT)
Received: by 10.140.172.6 with HTTP; Tue, 5 Aug 2008 15:48:58 -0700 (PDT)
Message-ID: <c68e39170808051548l203d595ew19f32945438e4c6c@mail.gmail.com>
Date: Tue, 5 Aug 2008 18:48:58 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Paging & Sorting
In-Reply-To: <OFA538075E.6B322D53-ON8625749C.00783311-8625749C.00792465@hewitt.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <359a92830808051416o64ec88ffi3ae3c1c7179ac246@mail.gmail.com>
	 <OFA538075E.6B322D53-ON8625749C.00783311-8625749C.00792465@hewitt.com>
X-Google-Sender-Auth: b9aa501dca3c253b
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Aug 5, 2008 at 6:03 PM, Neeraj Gupta <neeraj.gupta.2@hewitt.com> wrote:
> It means before Iteration Lucene has already spent time and memory in
> finding all the 50k documents and sorting them

Lucene uses a priority queue to only sort the top results, not all
matching results.
To more precisely specify the top "n" docs, see the expert level
search methods that return TopDocs.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 05 23:25:00 2008
Return-Path: <java-user-return-35337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91684 invoked from network); 5 Aug 2008 23:25:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2008 23:25:00 -0000
Received: (qmail 85029 invoked by uid 500); 5 Aug 2008 23:24:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84996 invoked by uid 500); 5 Aug 2008 23:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84972 invoked by uid 99); 5 Aug 2008 23:24:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 16:24:52 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Aug 2008 23:23:57 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m75NMEWp020013
	for <java-user@lucene.apache.org>; Wed, 6 Aug 2008 02:22:14 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m!y41020; 6 Aug 2008 02:22:00 +0300
Message-ID: <4898E0A1.2070107@teamware.com>
Date: Wed, 06 Aug 2008 09:22:09 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Per user data store
References: <02a701c8f6f7$e91b3ad0$610cc30a@sv.us.sonicwall.com>
In-Reply-To: <02a701c8f6f7$e91b3ad0$610cc30a@sv.us.sonicwall.com>
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 06 Aug 2008 02:22:14 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Ganesh - yahoo wrote:
> Hello all,
> 
> Documents coressponding to multiple users are to be indexed. Each user is
> going to search only his documents. Only Administrator could search all users
> data.
> 
> Is it good to have one database for each User or to have only one database
> for all Users? Which will be better?

I created a hybrid approach that supported 1..n databases based on a hash of the 
user's user Id.  This was to allow for the situation where a single database 
would not scale - at the time there was not good information about Lucene's 
performance with large data sets.

In practice, we are now using a single database with data for all users.  There 
is an 'ownerId' field with the unique user Id in every document.

 > My opinion is to have one database for all users and to have field
 > 'Username'. Using this field data will get filtered out and the search
 > results will be served to the User. In this approach, whether Username should
 > be part of boolean query or TermFilter will be the better approach?

The ownerId is used as a cached filter rather than always added to the query, so 
that only that user's documents influence the score.  If it is part of the 
query, the complete document set for other users will influence the hits for 
this user.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 08:31:42 2008
Return-Path: <java-user-return-35338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75401 invoked from network); 6 Aug 2008 08:31:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 08:31:42 -0000
Received: (qmail 67594 invoked by uid 500); 6 Aug 2008 08:31:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67568 invoked by uid 500); 6 Aug 2008 08:31:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67378 invoked by uid 99); 6 Aug 2008 08:31:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 01:31:33 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 08:30:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQeQB-0007Y4-ES
	for java-user@lucene.apache.org; Wed, 06 Aug 2008 01:31:03 -0700
Message-ID: <18846581.post@talk.nabble.com>
Date: Wed, 6 Aug 2008 01:31:03 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Per user data store
In-Reply-To: <359a92830808050640u6e43e06axeb4e383aff6f4b05@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <02a701c8f6f7$e91b3ad0$610cc30a@sv.us.sonicwall.com> <359a92830808050640u6e43e06axeb4e383aff6f4b05@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I want to agree with the advice of using only one index.

And I want to add two reasons:
1. Sorting and caching are working with the lucene-document-numbers.
In case of lucene "warming up" means that a lot of int-Arrays and bitsets
are stored in main memory.
If you using different MultiReader for each user all caching is also
seperately.

2. you should think about what happened, if you get new users:
Most possible you will get a user "with the same permissions as XY".
So you don't want to copy a index-file or insert a new value in an existing
document-field.
But you can easly copy the filter of an existing user.
(Which also means that I suggest not to use a field "userids with
read-permission". It is better to decouple userids and index).

But this reasons are only good for my thinking of amount of users, ratio of
deleting and adding documents and period of valid documents. 

So I again agree with Erick, that you should tell more about your use case.

Best regards

  Karsten 


Erick Erickson wrote:
> 
> I'd start out with one index, if for no other reason
> than keeping track of one index for each user would
> be a royal pain in the neck. You haven't told us
> how many users or documents you expect,
> so that's just a guess. There's one answer perhaps
> if you wind up with a 10M index, another if it's 10T.....
> 
> Filtering on the username is a fine idea, although
> I'd also start by just ANDing in the username to
> the query to start. Then measure your resonse
> time. Note that the first time you open a reader, the
> response will be slow so measure queries 2-n
> instead.
> 
> I don't know the guts of Lucene, but my indexes do NOT
> grow linearly with the data. After a very few docs, adding,
> say, 1M of data does not cause the data to grow by 1M (or
> even close to that) for fields that are NOT stored. I've
> learned to just trust that the very bright people who work
> on Lucene have "done the right thing" <G>...
> 
> Best
> Erick
> 

-- 
View this message in context: http://www.nabble.com/Per-user-data-store-tp18830202p18846581.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 10:36:13 2008
Return-Path: <java-user-return-35339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68323 invoked from network); 6 Aug 2008 10:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 10:36:13 -0000
Received: (qmail 51323 invoked by uid 500); 6 Aug 2008 10:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50991 invoked by uid 500); 6 Aug 2008 10:36:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50980 invoked by uid 99); 6 Aug 2008 10:36:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 03:36:02 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 10:35:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQgMf-0003qR-2V
	for java-user@lucene.apache.org; Wed, 06 Aug 2008 03:35:33 -0700
Message-ID: <18848522.post@talk.nabble.com>
Date: Wed, 6 Aug 2008 03:35:33 -0700 (PDT)
From: Christophe from paris <zlink_fr@yahoo.fr>
To: java-user@lucene.apache.org
Subject: search with accent not match
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: zlink_fr@yahoo.fr
X-Virus-Checked: Checked by ClamAV on apache.org


Hello

I'm use FrenchAnalyzer for index=20

IndexWriter writer =3D new IndexWriter(pathOfIndex, new FrenchAnalyzer(),
true);
Document =3D new Document();
doc.add(new
Field("TXT_CHARACT_VALUE",word.toLowerCase(),Field.Store.YES,Field.Index.TO=
KENIZED));
writer.addDocument(doc);

And search

IndexReader reader =3D IndexReader.open(pathOfIndex);=09=09=09
Searcher searcher =3D new IndexSearcher(reader);
Analyzer analyzer =3D new FrenchAnalyzer();=09=09=09=09=09=09
QueryParser parser =3D new QueryParser(field, analyzer);=09=09=09=09=09
Query query =3D parser.parse(motRecherche);
Hits hits =3D searcher.search(query);

in my document i have the word "lumiere" and "lumi=C3=A8re"

when i search lumi=C3=A8re only document match lumi=C3=A8re but "lumiere" i=
s not
return

and if search "lumiere" the result is lumiere, lumieres ,lumi=C3=A9re,lumi=
=C3=A9res
but not lumi=C3=A8re

for a total match i must search "lumiere OR limi=C3=A8ez"
but is not the best solution=20
--=20
View this message in context: http://www.nabble.com/search-with-accent-not-=
match-tp18848522p18848522.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 10:36:45 2008
Return-Path: <java-user-return-35340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68681 invoked from network); 6 Aug 2008 10:36:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 10:36:44 -0000
Received: (qmail 54437 invoked by uid 500); 6 Aug 2008 10:36:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54416 invoked by uid 500); 6 Aug 2008 10:36:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54405 invoked by uid 99); 6 Aug 2008 10:36:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 03:36:35 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 10:35:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQgNC-0003rR-6i
	for java-user@lucene.apache.org; Wed, 06 Aug 2008 03:36:06 -0700
Message-ID: <18848522.post@talk.nabble.com>
Date: Wed, 6 Aug 2008 03:36:06 -0700 (PDT)
From: Christophe from paris <zlink_fr@yahoo.fr>
To: java-user@lucene.apache.org
Subject: search with accent not match
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: zlink_fr@yahoo.fr
X-Virus-Checked: Checked by ClamAV on apache.org


Hello

I'm use FrenchAnalyzer for index=20

IndexWriter writer =3D new IndexWriter(pathOfIndex, new FrenchAnalyzer(),
true);
Document =3D new Document();
doc.add(new
Field("TXT_CHARACT_VALUE",word.toLowerCase(),Field.Store.YES,Field.Index.TO=
KENIZED));
writer.addDocument(doc);

And search

IndexReader reader =3D IndexReader.open(pathOfIndex);=09=09=09
Searcher searcher =3D new IndexSearcher(reader);
Analyzer analyzer =3D new FrenchAnalyzer();=09=09=09=09=09=09
QueryParser parser =3D new QueryParser(field, analyzer);=09=09=09=09=09
Query query =3D parser.parse(motRecherche);
Hits hits =3D searcher.search(query);

in my document i have the word "lumiere" and "lumi=C3=A8re"

when i search lumi=C3=A8re only document match lumi=C3=A8re but "lumiere" i=
s not
return

and if search "lumiere" the result is lumiere, lumieres ,lumi=C3=A9re,lumi=
=C3=A9res
but not lumi=C3=A8re

for a total match i must search "lumiere OR limi=C3=A8re"
but is not the best solution=20
--=20
View this message in context: http://www.nabble.com/search-with-accent-not-=
match-tp18848522p18848522.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 12:28:11 2008
Return-Path: <java-user-return-35341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38746 invoked from network); 6 Aug 2008 12:28:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 12:28:11 -0000
Received: (qmail 14958 invoked by uid 500); 6 Aug 2008 12:28:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14620 invoked by uid 500); 6 Aug 2008 12:28:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14609 invoked by uid 99); 6 Aug 2008 12:28:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 05:28:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 12:27:07 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2846065wra.21
        for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 05:27:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=jesDC7BhW4afqDYmcVpNk7iOO/c7FQ0luPSGdbrntZs=;
        b=diRk1Stp0dw288CPB41gjnag+KvGuiKtWwgFgIokkUlCJbdg2Dsgu1CLHy6TdVMPFp
         HSk9PrXUuVpO3Djs5E0bZs7aMCUt7HT441IZUg6arjbMbi42CIBAmvh7tihxjJVFVCoT
         Y0rhPOxUo0jtWm67G08M1IWRrtlrbuE5dKEuM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Tl6+D/Ud19jZH8jSQHCN7IZu/7ZgwXfZkH8J97hpbpJSZDwnHcthEI97RGar3Oonib
         +fO1PgeNgm6uxJQ5AsC0MRdDmjCA5Bv4JH6PQqYAFF/5RjUXv72X9YHg4gVvFxUsp0Nd
         wlSnHNqx6MhxLGpwiQ7GeLjWACPpUNmBOBIqQ=
Received: by 10.90.86.10 with SMTP id j10mr3104797agb.77.1218025637334;
        Wed, 06 Aug 2008 05:27:17 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 38sm748914aga.4.2008.08.06.05.27.16
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 06 Aug 2008 05:27:16 -0700 (PDT)
Message-ID: <489998A6.7040005@gmail.com>
Date: Wed, 06 Aug 2008 08:27:18 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search with accent not match
References: <18848522.post@talk.nabble.com>
In-Reply-To: <18848522.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Check out org.apache.lucene.analysis.ISOLatin1AccentFilter

It will strip diacritics - just be sure to use it at index time and 
query time to get what you want. Also, you will no longer be able to 
differentiate between the two in your searching (rarely that important 
in my opinion, but others certainly disagree).

- Mark

Christophe from paris wrote:
> Hello
>
> I'm use FrenchAnalyzer for index 
>
> IndexWriter writer = new IndexWriter(pathOfIndex, new FrenchAnalyzer(),
> true);
> Document = new Document();
> doc.add(new
> Field("TXT_CHARACT_VALUE",word.toLowerCase(),Field.Store.YES,Field.Index.TOKENIZED));
> writer.addDocument(doc);
>
> And search
>
> IndexReader reader = IndexReader.open(pathOfIndex);			
> Searcher searcher = new IndexSearcher(reader);
> Analyzer analyzer = new FrenchAnalyzer();						
> QueryParser parser = new QueryParser(field, analyzer);					
> Query query = parser.parse(motRecherche);
> Hits hits = searcher.search(query);
>
> in my document i have the word "lumiere" and "lumire"
>
> when i search lumire only document match lumire but "lumiere" is not
> return
>
> and if search "lumiere" the result is lumiere, lumieres ,lumire,lumires
> but not lumire
>
> for a total match i must search "lumiere OR limire"
> but is not the best solution 
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 12:56:51 2008
Return-Path: <java-user-return-35342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58884 invoked from network); 6 Aug 2008 12:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 12:56:51 -0000
Received: (qmail 61024 invoked by uid 500); 6 Aug 2008 12:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60988 invoked by uid 500); 6 Aug 2008 12:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60977 invoked by uid 99); 6 Aug 2008 12:56:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 05:56:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 12:55:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQiYn-0000cD-74
	for java-user@lucene.apache.org; Wed, 06 Aug 2008 05:56:13 -0700
Message-ID: <18850615.post@talk.nabble.com>
Date: Wed, 6 Aug 2008 05:56:13 -0700 (PDT)
From: Christophe from paris <zlink_fr@yahoo.fr>
To: java-user@lucene.apache.org
Subject: Re: search with accent not match
In-Reply-To: <489998A6.7040005@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: zlink_fr@yahoo.fr
References: <18848522.post@talk.nabble.com> <489998A6.7040005@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Actualy in my FrenchAnalyser=20

i have :

 TokenStream result =3D new StandardTokenizer(reader);
    result =3D new StandardFilter(result);
    result =3D new StopFilter(result, stoptable);
    result =3D new FrenchStemFilter(result, excltable);
    result =3D new LowerCaseFilter(result);


I can use ISOLatin1AccentFilter in this Class for indexing ans search ?
And it is the case where ?


markrmiller wrote:
>=20
> Check out org.apache.lucene.analysis.ISOLatin1AccentFilter
>=20
> It will strip diacritics - just be sure to use it at index time and=20
> query time to get what you want. Also, you will no longer be able to=20
> differentiate between the two in your searching (rarely that important=20
> in my opinion, but others certainly disagree).
>=20
> - Mark
>=20
> Christophe from paris wrote:
>> Hello
>>
>> I'm use FrenchAnalyzer for index=20
>>
>> IndexWriter writer =3D new IndexWriter(pathOfIndex, new FrenchAnalyzer()=
,
>> true);
>> Document =3D new Document();
>> doc.add(new
>> Field("TXT_CHARACT_VALUE",word.toLowerCase(),Field.Store.YES,Field.Index=
.TOKENIZED));
>> writer.addDocument(doc);
>>
>> And search
>>
>> IndexReader reader =3D IndexReader.open(pathOfIndex);=09=09=09
>> Searcher searcher =3D new IndexSearcher(reader);
>> Analyzer analyzer =3D new FrenchAnalyzer();=09=09=09=09=09=09
>> QueryParser parser =3D new QueryParser(field, analyzer);=09=09=09=09=09
>> Query query =3D parser.parse(motRecherche);
>> Hits hits =3D searcher.search(query);
>>
>> in my document i have the word "lumiere" and "lumi=C3=A8re"
>>
>> when i search lumi=C3=A8re only document match lumi=C3=A8re but "lumiere=
" is not
>> return
>>
>> and if search "lumiere" the result is lumiere, lumieres ,lumi=C3=A9re,lu=
mi=C3=A9res
>> but not lumi=C3=A8re
>>
>> for a total match i must search "lumiere OR limi=C3=A8re"
>> but is not the best solution=20
>>  =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/search-with-accent-not-=
match-tp18848522p18850615.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 13:30:39 2008
Return-Path: <java-user-return-35343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83959 invoked from network); 6 Aug 2008 13:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 13:30:39 -0000
Received: (qmail 10971 invoked by uid 500); 6 Aug 2008 13:30:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10667 invoked by uid 500); 6 Aug 2008 13:30:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10656 invoked by uid 99); 6 Aug 2008 13:30:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 06:30:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 13:29:34 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2872392wra.21
        for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 06:30:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=TxmWWyjo26+jg3+jBv9uyRgsvlRCu97VlqODScdSmrU=;
        b=UuLYha6wkRAsUpx3j/8RGo9XIP726DNJNlKLclhiE/OiDVjy4wQ8yUEwwQt5PJXScw
         1FmFxzgFb5gz6Axfmmjb+sj3XKFkH1hWZHrl8AEvWANMDzOp/WfxRuE3DB2PC4azdR15
         sn3C9ZfCFxiDyi6NtZRxdHdtjY/zG8aCc5tZg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=PNxIPqtuLtxD1cNNdPPvBTN/CztePAOZ4M3pNQD+ljR9jEMJ0Iyf3zjriuVCX8enZd
         RVG1BVuGifL2DbURc/HDsdfXnJ7kgou6D9Ywk387ieQ/I7N6o+hdwb4xFRPo0ZDyg+h6
         Sd6xGIm6z8bCGrTOsvAAq+IjrYA+XWSLFhJ0U=
Received: by 10.90.104.20 with SMTP id b20mr3211228agc.63.1218029400723;
        Wed, 06 Aug 2008 06:30:00 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 1sm2957460agb.20.2008.08.06.06.29.59
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 06 Aug 2008 06:30:00 -0700 (PDT)
Message-ID: <4899A759.7000903@gmail.com>
Date: Wed, 06 Aug 2008 09:30:01 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: search with accent not match
References: <18848522.post@talk.nabble.com> <489998A6.7040005@gmail.com> <18850615.post@talk.nabble.com>
In-Reply-To: <18850615.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

You certainly can - just create your own Analyzer starting with a copy 
of the French one you are using.

Then you just plug in the filter in the order you want it applied:

result = new ISOLatin1AccentFilter(result);

You have to decide for yourself where it will come - if you put it 
before the stopword step, more stops words might be removed than if it 
was after - that type of thing usually comes down to individual 
requirements/filter limitations. If your stopword list has diacriticals 
and you run the accent filter before applying the stopword list, some 
expected stopwords will never be removed...etc.


Christophe from paris wrote:
> Actualy in my FrenchAnalyser 
>
> i have :
>
>  TokenStream result = new StandardTokenizer(reader);
>     result = new StandardFilter(result);
>     result = new StopFilter(result, stoptable);
>     result = new FrenchStemFilter(result, excltable);
>     result = new LowerCaseFilter(result);
>
>
> I can use ISOLatin1AccentFilter in this Class for indexing ans search ?
> And it is the case where ?
>
>
> markrmiller wrote:
>   
>> Check out org.apache.lucene.analysis.ISOLatin1AccentFilter
>>
>> It will strip diacritics - just be sure to use it at index time and 
>> query time to get what you want. Also, you will no longer be able to 
>> differentiate between the two in your searching (rarely that important 
>> in my opinion, but others certainly disagree).
>>
>> - Mark
>>
>> Christophe from paris wrote:
>>     
>>> Hello
>>>
>>> I'm use FrenchAnalyzer for index 
>>>
>>> IndexWriter writer = new IndexWriter(pathOfIndex, new FrenchAnalyzer(),
>>> true);
>>> Document = new Document();
>>> doc.add(new
>>> Field("TXT_CHARACT_VALUE",word.toLowerCase(),Field.Store.YES,Field.Index.TOKENIZED));
>>> writer.addDocument(doc);
>>>
>>> And search
>>>
>>> IndexReader reader = IndexReader.open(pathOfIndex);			
>>> Searcher searcher = new IndexSearcher(reader);
>>> Analyzer analyzer = new FrenchAnalyzer();						
>>> QueryParser parser = new QueryParser(field, analyzer);					
>>> Query query = parser.parse(motRecherche);
>>> Hits hits = searcher.search(query);
>>>
>>> in my document i have the word "lumiere" and "lumire"
>>>
>>> when i search lumire only document match lumire but "lumiere" is not
>>> return
>>>
>>> and if search "lumiere" the result is lumiere, lumieres ,lumire,lumires
>>> but not lumire
>>>
>>> for a total match i must search "lumiere OR limire"
>>> but is not the best solution 
>>>   
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 18:07:55 2008
Return-Path: <java-user-return-35344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4700 invoked from network); 6 Aug 2008 18:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 18:07:55 -0000
Received: (qmail 84814 invoked by uid 500); 6 Aug 2008 18:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84779 invoked by uid 500); 6 Aug 2008 18:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84768 invoked by uid 99); 6 Aug 2008 18:07:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 11:07:47 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=FUZZY_CPILL,HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 18:06:49 +0000
Received: by yx-out-2324.google.com with SMTP id 3so20360yxj.5
        for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 11:07:14 -0700 (PDT)
Received: by 10.151.153.19 with SMTP id f19mr3803600ybo.116.1218046034583;
        Wed, 06 Aug 2008 11:07:14 -0700 (PDT)
Received: by 10.151.141.17 with HTTP; Wed, 6 Aug 2008 11:07:14 -0700 (PDT)
Message-ID: <7e536b1f0808061107ob4cd3d5t8bb5f298106a3b59@mail.gmail.com>
Date: Wed, 6 Aug 2008 20:07:14 +0200
From: "Marcus Herou" <marcus.herou@tailsweep.com>
To: java-user@lucene.apache.org
Subject: Re: failed to open an indexer after about 20 queries
In-Reply-To: <1432CA51-55AB-4880-8FF3-CCA62C5CB699@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8861_31080777.1218046034579"
References: <508175.28927.qm@web15806.mail.cnb.yahoo.com>
	 <1432CA51-55AB-4880-8FF3-CCA62C5CB699@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8861_31080777.1218046034579
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

And I'm sure you have a construct like:

try
{
   reader = open()
}
finally
{
 if(reader != null)
   reader.close()
}

right ?

As Grant says should you hold the reader open as long as possible since it
caches a lot of stuff.
Look at a SearcherCache:
http://dev.tailsweep.com/svn/core-lucene/trunk/src/main/java/com/tailsweep/core/lucene/SearcherCache.javawhich
someone provided on the list long time ago.

This will not solve your problem though...

Kindly

//Marcus



On Tue, Aug 5, 2008 at 12:37 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> You say the stack trace is null, does that mean you are getting an
> NullPointerEx. or that you aren't getting any exception but the reader is
> still null?  Are you sure indexName isn't changing?
>
> Also, it's not very good to open up the Searcher/Reader for every query
> anyway, not that solves this problem.
>
>
> On Aug 5, 2008, at 3:52 AM, xh sun wrote:
>
>  Thanks, John and Marcus.</DIV>
>> Below is the related code in jsp file, and the stacktrace is null even it
>> failed to open the index.
>>
>>        try
>>        {
>>          out.print("To open index");
>>          reader = IndexReader.open(indexName);
>>          out.print("have opened the index");
>>          indexsize=reader.numDocs();
>>          searcher = new IndexSearcher(reader);
>>
>>        }
>>        catch (Exception e)
>>        {
>>        e.printStackTrace();
>>        error = true;
>>        }
>> .....
>>  if (reader != null)
>>    reader.close();
>>  if (searcher != null)
>>    searcher.close();
>>
>> BR,
>> Shawn
>>
>>
>>
>> ----- Original Message ----
>> From: Marcus Herou <marcus.herou@tailsweep.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, August 5, 2008 3:00:15 PM
>> Subject: Re: failed to open an indexer after about 20 queries
>>
>> Hi.
>>
>> And some exception stacktrace would be nice as well.
>>
>> Kindly
>>
>> //Marcus
>>
>> On Tue, Aug 5, 2008 at 4:58 AM, John Griffin <jgriffin@thebluezone.net
>> >wrote:
>>
>>  Xh,
>>>
>>> Sorry about those questions. I received two copies of your email. The
>>> first
>>> was corrupt.
>>>
>>> We still need to see more code. No there isn't any special config
>>> necessary.
>>>
>>> John G.
>>>
>>> -----Original Message-----
>>> From: xh sun [mailto:wysunxiaohua@yahoo.com.cn]
>>> Sent: Monday, August 04, 2008 8:34 PM
>>> To: java-user@lucene.apache.org
>>> Subject: failed to open an indexer after about 20 queries
>>>
>>> Hi,
>>> The indexer can't be opened after about 20 queries in linux system, but
>>> it
>>> is fine if the index is in windows  system. The indexer is the same in
>>> both
>>> systems.
>>>          reader = IndexReader.open(indexName);    //failed after about 20
>>> queries
>>>          searcher = new IndexSearcher(reader);
>>>
>>> The reader and search have been closed after each query. Is there any
>>> special configuration for the index in linux system?
>>> Appreicate your help very much.
>>> BR,
>>> Shawn
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --
>> Marcus Herou CTO and co-founder Tailsweep AB
>> +46702561312
>> marcus.herou@tailsweep.com
>> http://www.tailsweep.com/
>> http://blogg.tailsweep.com/
>>
>>
>>
>>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcus Herou CTO and co-founder Tailsweep AB
+46702561312
marcus.herou@tailsweep.com
http://www.tailsweep.com/
http://blogg.tailsweep.com/

------=_Part_8861_31080777.1218046034579--

From java-user-return-35345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 18:15:34 2008
Return-Path: <java-user-return-35345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7716 invoked from network); 6 Aug 2008 18:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 18:15:34 -0000
Received: (qmail 2651 invoked by uid 500); 6 Aug 2008 18:15:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2624 invoked by uid 500); 6 Aug 2008 18:15:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2613 invoked by uid 99); 6 Aug 2008 18:15:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 11:15:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.49.25.15] (HELO mail.crossview.com) (65.49.25.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 18:14:31 +0000
Received: from cv-exchange02.crossview.inc ([10.250.250.14]) by
 cv-exchangehub.crossview.inc ([10.250.250.15]) with mapi; Wed, 6 Aug 2008
 11:14:56 -0700
From: Alex Wang <awang@crossview.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Alex Wang <awang@crossview.com>
Date: Wed, 6 Aug 2008 11:14:56 -0700
Subject: Urgent Help Please:  "Resource Tempararily Unavailable"
Thread-Topic: Urgent Help Please:  "Resource Tempararily Unavailable"
Thread-Index: Acj38FRzB2RUa27cRmuW2FTfUWWVCw==
Message-ID: <41636CE6C874E144AD623FB97DD0D1070D2167B381@cv-exchange02.crossview.inc>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_41636CE6C874E144AD623FB97DD0D1070D2167B381cvexchange02c_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_41636CE6C874E144AD623FB97DD0D1070D2167B381cvexchange02c_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi Everyone,

We have an application built using Lucene 1.9. The app allows incremental u=
pdating to the index while other users are searching the same index. Today,=
 some search suddenly returns nothing when we know it should return some hi=
ts. This does not happen all the time. Sometimes the search succeeded. When=
 checking the logs, I found the following error during searching:

Parameter[0]: java.io.IOException: Resource temporarily unavailable


When this error occurred, there were 2 other users deleting documents from =
the same index. The deletions seemed to succeed, but the search failed.

I have no clue what could have caused such error.  Unfortunately there is n=
o further info in the logs. Can someone please shed some light on this? Tha=
nks.
Alex


--_000_41636CE6C874E144AD623FB97DD0D1070D2167B381cvexchange02c_--

From java-user-return-35346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 18:20:16 2008
Return-Path: <java-user-return-35346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17844 invoked from network); 6 Aug 2008 18:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 18:20:16 -0000
Received: (qmail 16419 invoked by uid 500); 6 Aug 2008 18:20:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16385 invoked by uid 500); 6 Aug 2008 18:20:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16371 invoked by uid 99); 6 Aug 2008 18:20:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 11:20:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.49.25.15] (HELO mail.crossview.com) (65.49.25.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 18:19:12 +0000
Received: from cv-exchange02.crossview.inc ([10.250.250.14]) by
 cv-exchangehub.crossview.inc ([10.250.250.15]) with mapi; Wed, 6 Aug 2008
 11:19:18 -0700
From: Alex Wang <awang@crossview.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 6 Aug 2008 11:19:16 -0700
Subject: Urgent Help Please: "Resource temporarily unavailable"
Thread-Topic: Urgent Help Please: "Resource temporarily unavailable"
Thread-Index: Acj38O9zqTqqAZ7QRCS9MYGf3YI49g==
Message-ID: <41636CE6C874E144AD623FB97DD0D1070D2167B384@cv-exchange02.crossview.inc>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_41636CE6C874E144AD623FB97DD0D1070D2167B384cvexchange02c_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_41636CE6C874E144AD623FB97DD0D1070D2167B384cvexchange02c_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi Everyone,

We have an application built using Lucene 1.9. The app allows incremental u=
pdating to the index while other users are searching the same index. Today,=
 some search suddenly returns nothing when we know it should return some hi=
ts. This does not happen all the time. Sometimes the search succeeded. When=
 checking the logs, I found the following error during searching:

Parameter[0]: java.io.IOException: Resource temporarily unavailable


When this error occurred, there were 2 other users deleting documents from =
the same index. The deletions seemed to succeed, but the search failed.

I have no clue what could have caused such error.  Unfortunately there is n=
o further info in the logs. Can someone please shed some light on this? Tha=
nks.


Alex



--_000_41636CE6C874E144AD623FB97DD0D1070D2167B384cvexchange02c_--

From java-user-return-35347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 18:42:57 2008
Return-Path: <java-user-return-35347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40011 invoked from network); 6 Aug 2008 18:42:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 18:42:57 -0000
Received: (qmail 61074 invoked by uid 500); 6 Aug 2008 18:42:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61045 invoked by uid 500); 6 Aug 2008 18:42:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61032 invoked by uid 99); 6 Aug 2008 18:42:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 11:42:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 18:41:53 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id D188921406
	for <java-user@lucene.apache.org>; Wed,  6 Aug 2008 11:41:48 -0700 (PDT)
Message-Id: <BDDB7984-B017-45B6-BF9C-71275F4E35BA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <41636CE6C874E144AD623FB97DD0D1070D2167B384@cv-exchange02.crossview.inc>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Urgent Help Please: "Resource temporarily unavailable"
Date: Wed, 6 Aug 2008 14:41:47 -0400
References: <41636CE6C874E144AD623FB97DD0D1070D2167B384@cv-exchange02.crossview.inc>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

What's the full exception?  We don't even know that the exception is  
in Lucene from what you've described.  So, w/o more info, it will be  
pretty hard to help, but if I had to guess, it sounds like you've got  
some threading problems, but who knows.

Also, no need to send the exact same email 5 minutes apart.

On Aug 6, 2008, at 2:19 PM, Alex Wang wrote:

>
> Hi Everyone,
>
> We have an application built using Lucene 1.9. The app allows  
> incremental updating to the index while other users are searching  
> the same index. Today, some search suddenly returns nothing when we  
> know it should return some hits. This does not happen all the time.  
> Sometimes the search succeeded. When checking the logs, I found the  
> following error during searching:
>
> Parameter[0]: java.io.IOException: Resource temporarily unavailable
>
>
> When this error occurred, there were 2 other users deleting  
> documents from the same index. The deletions seemed to succeed, but  
> the search failed.
>
> I have no clue what could have caused such error.  Unfortunately  
> there is no further info in the logs. Can someone please shed some  
> light on this? Thanks.
>
>
> Alex
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 19:07:35 2008
Return-Path: <java-user-return-35348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58051 invoked from network); 6 Aug 2008 19:07:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 19:07:34 -0000
Received: (qmail 97505 invoked by uid 500); 6 Aug 2008 19:07:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97462 invoked by uid 500); 6 Aug 2008 19:07:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97451 invoked by uid 99); 6 Aug 2008 19:07:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 12:07:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.49.25.15] (HELO mail.crossview.com) (65.49.25.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 19:06:30 +0000
Received: from cv-exchange02.crossview.inc ([10.250.250.14]) by
 cv-exchangehub.crossview.inc ([10.250.250.15]) with mapi; Wed, 6 Aug 2008
 12:06:35 -0700
From: Alex Wang <awang@crossview.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 6 Aug 2008 12:06:33 -0700
Subject: RE: Urgent Help Please: "Resource temporarily unavailable"
Thread-Topic: Urgent Help Please: "Resource temporarily unavailable"
Thread-Index: Acj39DtgQKzsEY+5SnihmFwSNDbobAAAVuGQ
Message-ID: <41636CE6C874E144AD623FB97DD0D1070D2167B3BE@cv-exchange02.crossview.inc>
In-Reply-To: <BDDB7984-B017-45B6-BF9C-71275F4E35BA@apache.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry about the double posting. After sending the first email I got a deliv=
ery failure notice from support@magentanews.com. I resent it just to be sur=
e.

Unfornately there is no stack trace in the log. The error object was passed=
 to log4j.error(...), but no stack trace was printed out.

I thought both IndexReader and IndexWriter are thread safe. Beside, I have =
no explicit multi-threading in our own code.

Thanks again!

****************************************************
Alex Wang
CrossView Inc.
Office: 416-281-6888
Email: awang@crossview.com
Web:   http://www.crossview.com
****************************************************


This message may contain confidential and/or privileged information. If you=
 are not the addressee or authorized to receive this for the addressee, you=
 must not use, copy, disclose, or take any action based on this message or =
any information herein. If you have received this message in error, please =
advise the sender immediately by reply e-mail and delete this message. Than=
k you for your cooperation.


>-----Original Message-----
>From: Grant Ingersoll [mailto:gsingers@apache.org]
>Sent: Wednesday, August 06, 2008 2:42 PM
>To: java-user@lucene.apache.org
>Subject: Re: Urgent Help Please: "Resource temporarily unavailable"
>
>What's the full exception?  We don't even know that the exception is
>in Lucene from what you've described.  So, w/o more info, it will be
>pretty hard to help, but if I had to guess, it sounds like you've got
>some threading problems, but who knows.
>
>Also, no need to send the exact same email 5 minutes apart.
>
>On Aug 6, 2008, at 2:19 PM, Alex Wang wrote:
>
>>
>> Hi Everyone,
>>
>> We have an application built using Lucene 1.9. The app allows
>> incremental updating to the index while other users are searching
>> the same index. Today, some search suddenly returns nothing when we
>> know it should return some hits. This does not happen all the time.
>> Sometimes the search succeeded. When checking the logs, I found the
>> following error during searching:
>>
>> Parameter[0]: java.io.IOException: Resource temporarily unavailable
>>
>>
>> When this error occurred, there were 2 other users deleting
>> documents from the same index. The deletions seemed to succeed, but
>> the search failed.
>>
>> I have no clue what could have caused such error.  Unfortunately
>> there is no further info in the logs. Can someone please shed some
>> light on this? Thanks.
>>
>>
>> Alex
>>
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 19:43:44 2008
Return-Path: <java-user-return-35349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85639 invoked from network); 6 Aug 2008 19:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 19:43:44 -0000
Received: (qmail 45001 invoked by uid 500); 6 Aug 2008 19:43:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44977 invoked by uid 500); 6 Aug 2008 19:43:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44966 invoked by uid 99); 6 Aug 2008 19:43:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 12:43:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 19:42:40 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 526878817C
	for <java-user@lucene.apache.org>; Wed,  6 Aug 2008 12:42:34 -0700 (PDT)
Message-Id: <E62A42B4-5041-481D-A5FC-D4883031AC2D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <41636CE6C874E144AD623FB97DD0D1070D2167B3BE@cv-exchange02.crossview.inc>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Urgent Help Please: "Resource temporarily unavailable"
Date: Wed, 6 Aug 2008 15:42:33 -0400
References: <41636CE6C874E144AD623FB97DD0D1070D2167B3BE@cv-exchange02.crossview.inc>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 6, 2008, at 3:06 PM, Alex Wang wrote:

> Sorry about the double posting. After sending the first email I got  
> a delivery failure notice from support@magentanews.com. I resent it  
> just to be sure.
>
> Unfornately there is no stack trace in the log. The error object was  
> passed to log4j.error(...), but no stack trace was printed out.
>
> I thought both IndexReader and IndexWriter are thread safe. Beside,  
> I have no explicit multi-threading in our own code.

They are thread-safe.  Not really sure what else to go on.  Sorry.

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 20:17:39 2008
Return-Path: <java-user-return-35350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6542 invoked from network); 6 Aug 2008 20:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 20:17:39 -0000
Received: (qmail 91370 invoked by uid 500); 6 Aug 2008 20:17:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91175 invoked by uid 500); 6 Aug 2008 20:17:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91103 invoked by uid 99); 6 Aug 2008 20:17:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 13:17:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 20:16:28 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Wed, 6 Aug 2008 16:16:54 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 6 Aug 2008 16:16:53 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: LineDocMaker usage
Date: Wed, 6 Aug 2008 16:12:42 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001A_01C8F7DF.41BDBAE0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
thread-index: Acj4AMiHwGNgvYKfT8aTli7RFNosPQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGEc1o8y00000c35@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A01020A.489A06B6.0061,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 06 Aug 2008 20:16:53.0968 (UTC) FILETIME=[5E3B9D00:01C8F801]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_001A_01C8F7DF.41BDBAE0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello, I am new to all this.  I need to read in a text file and have each
line in the file be a document.

The LineDocMaker seems to be intended for this purpose.  But I can't figure
out how to read the data into it.

Any examples would be greatly appreciated.

 


------=_NextPart_000_001A_01C8F7DF.41BDBAE0--



From java-user-return-35351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 21:13:28 2008
Return-Path: <java-user-return-35351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37760 invoked from network); 6 Aug 2008 21:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 21:13:27 -0000
Received: (qmail 57556 invoked by uid 500); 6 Aug 2008 21:13:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57525 invoked by uid 500); 6 Aug 2008 21:13:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57514 invoked by uid 99); 6 Aug 2008 21:13:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 14:13:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 21:12:22 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m76L5KY11438
	for <java-user@lucene.apache.org>; Wed, 6 Aug 2008 14:05:20 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008080614052008964
 for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 14:05:20 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1KQqC8-0000Sg-00
	for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 14:05:20 -0700
Message-ID: <489A1210.1090805@ai.sri.com>
Date: Wed, 06 Aug 2008 14:05:20 -0700
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: CustomScoreQuery and BooleanQuery
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
The new addition of the class CustomScoreQuery is very useful and 
powerful in customizing the score of one query using the indexed field 
values.
Another feature that I am looking for in Lucene is the ability to 
combine the scores of multiple (sub)queries in a way different from the 
BooleanQuery. BoostingQuery is one such attempt but it's not very 
flexible (e.g. the damping is independent of the scores of sub queries).
Does anyone know any other existing examples similar to CustomScoreQuery 
but deal with multiple sub queries?

Thanks!

Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 21:22:19 2008
Return-Path: <java-user-return-35352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42030 invoked from network); 6 Aug 2008 21:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 21:22:18 -0000
Received: (qmail 76611 invoked by uid 500); 6 Aug 2008 21:22:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76577 invoked by uid 500); 6 Aug 2008 21:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76566 invoked by uid 99); 6 Aug 2008 21:22:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 14:22:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 21:21:15 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 69FA771C41F; Wed,  6 Aug 2008 14:21:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 658C271C385
	for <java-user@lucene.apache.org>; Wed,  6 Aug 2008 14:21:42 -0700 (PDT)
Date: Wed, 6 Aug 2008 14:21:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Re-Search Hits
In-Reply-To: <2A4AE147-955A-49E6-B176-C518BF7569B8@gmail.com>
Message-ID: <Pine.LNX.4.62.0808061418290.16726@radix.cryptio.net>
References: <2A4AE147-955A-49E6-B176-C518BF7569B8@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: for performance reasons I cache Hits for a certain Query in memcached, for
: things like pageination etc. My question right now is if it is possible to
: re-search such a cached Hits sets. That would be great for features like
: live-learch and so on. Does Lucene support that?

You can hang on to a Hits object as long as you want -- provided you don't 
close the search that created it -- but i really doubt caching it in 
something like memcached is going to work the way you expect, Hits 
instances keep a refrence to the IndexSearcher that created them so they 
can fetch additional documents as needed ... you will most likely 
encounter strange errors if you do this.

it's typically "fast enough" to just reissue the search, and if it's not 
then you need a better data structure to put in yourcache then Hits -- one 
that you very explicitly populate with however much data you expect to 
need.  (think of Hits like an Iterator that pre-fetches and internally 
caches some of the items it needs, but if you exhaust those first few 
items, the Iterator needs to keep getting the rest)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 21:47:16 2008
Return-Path: <java-user-return-35353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60458 invoked from network); 6 Aug 2008 21:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 21:47:16 -0000
Received: (qmail 5194 invoked by uid 500); 6 Aug 2008 21:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4754 invoked by uid 500); 6 Aug 2008 21:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4743 invoked by uid 99); 6 Aug 2008 21:47:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 14:47:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 21:46:13 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 4C75571C408; Wed,  6 Aug 2008 14:46:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 48B7671C3FF
	for <java-user@lucene.apache.org>; Wed,  6 Aug 2008 14:46:10 -0700 (PDT)
Date: Wed, 6 Aug 2008 14:46:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Document path in lucene index
In-Reply-To: <18651668.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0808061444030.24310@radix.cryptio.net>
References: <18651668.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I can print the index terms but I don't know if there is any possibilites to
: print the coressbonds paths, i can just print the docid, but i need to print
: the paths as it is possible in searcher (query).

If you index or store the path in a field, then you can get it back out -- 
for the type of look you've got bellow, i would suggest indexing the path 
untokenized and then usingthe FieldCache to get the value of each path for 
each doc...

: IndexReader ir = IndexReader.open(index); 
: TermEnum termEnum = ir.terms(); 
: while (termEnum.next()) { 
:                         TermDocs dok = ir.termDocs(); 
:                         dok.seek(termEnum); 
:                         while (dok.next()) { 
:  System.out.println(indexTerm+"          "+dok.freq()+"        "+dok.doc());               
:                  } 


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 21:52:16 2008
Return-Path: <java-user-return-35354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65140 invoked from network); 6 Aug 2008 21:52:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 21:52:16 -0000
Received: (qmail 16773 invoked by uid 500); 6 Aug 2008 21:52:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16322 invoked by uid 500); 6 Aug 2008 21:52:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16311 invoked by uid 99); 6 Aug 2008 21:52:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 14:52:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 21:51:13 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 2973D71C415; Wed,  6 Aug 2008 14:51:41 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 26C1C71C408
	for <java-user@lucene.apache.org>; Wed,  6 Aug 2008 14:51:41 -0700 (PDT)
Date: Wed, 6 Aug 2008 14:51:41 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Strict Ordering of Boosted results?
In-Reply-To: <1217104665.28219.10.camel@nuraku>
Message-ID: <Pine.LNX.4.62.0808061446440.24310@radix.cryptio.net>
References: <1217104665.28219.10.camel@nuraku>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: word: termA^10.0   word: termB^2.0
: 
: I want ALL termA results (ordered by score) to come before ANY termB
: results (also ordered by score). Is there a way to do this in the query
: syntax? Or is this simple multiple queries?

the syntax lets you specify the query boost on each clause, but those 
boost are just one factor in determining score -- the TF, IDF, and index 
time boosts (include length  norm) also come into play -- you can 
eliminate them by customizing your Similaity class.

that will get you *close* to what you want, but you still have to worry 
about hte possibility that doc will match termB, termC, etc.. but not 
termA ... the scores from all of those other terms added up might be 
higher then the score from a doc that matches termA -- but there is a 
solution tothis too: instead of a BooleanQuery you can use a 
DisjunctionMaxQuery with the tiebreaker value set to 0, which means that 
even if multiple clauses match only the one with the highest score will 
contribute to the document score -- since you've eliminated TF, IDF, and 
index time boosts, that will mean only your query boosts will matter.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 21:55:57 2008
Return-Path: <java-user-return-35355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68696 invoked from network); 6 Aug 2008 21:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 21:55:57 -0000
Received: (qmail 23617 invoked by uid 500); 6 Aug 2008 21:55:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23580 invoked by uid 500); 6 Aug 2008 21:55:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23569 invoked by uid 99); 6 Aug 2008 21:55:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 14:55:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 21:54:54 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id E985B71C416; Wed,  6 Aug 2008 14:54:19 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D6CD071C415
	for <java-user@lucene.apache.org>; Wed,  6 Aug 2008 14:54:19 -0700 (PDT)
Date: Wed, 6 Aug 2008 14:54:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to get unique values for field1 where search is on field2?
In-Reply-To: <21e234c60807280453k25562d66jbbe15a4155f93cdd@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0808061453030.24310@radix.cryptio.net>
References: <21e234c60807280453k25562d66jbbe15a4155f93cdd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


What you are describing sounds an awful lot lik you wantto "facet" on the 
Author field ... if you search the mailing list archives you'll find quite 
a bit of discussion on various approaches to this problem.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 22:28:00 2008
Return-Path: <java-user-return-35356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84099 invoked from network); 6 Aug 2008 22:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 22:28:00 -0000
Received: (qmail 63199 invoked by uid 500); 6 Aug 2008 22:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63165 invoked by uid 500); 6 Aug 2008 22:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63154 invoked by uid 99); 6 Aug 2008 22:27:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 15:27:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 22:26:55 +0000
Received: by wr-out-0506.google.com with SMTP id c30so157086wra.21
        for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 15:27:03 -0700 (PDT)
Received: by 10.90.83.18 with SMTP id g18mr3861750agb.76.1218061623379;
        Wed, 06 Aug 2008 15:27:03 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm4187557agc.29.2008.08.06.15.27.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 06 Aug 2008 15:27:02 -0700 (PDT)
Message-Id: <52B9F641-58A7-484B-9681-71F6A55A4CB8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <JB_VA_EXCHANGEc1o8y00000c35@Jb_va_exchange.jbmanage.corp>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: LineDocMaker usage
Date: Wed, 6 Aug 2008 18:27:01 -0400
References: <JB_VA_EXCHANGEc1o8y00000c35@Jb_va_exchange.jbmanage.corp>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


The format is:

     title <TAB> date <TAB> body <NEWLINE>

But this is normally only used to create documents as part of an  
algorithm that you run under contrib/benchmark.

Mike

On Aug 6, 2008, at 4:12 PM, Brittany Jacobs wrote:

> Hello, I am new to all this.  I need to read in a text file and have  
> each
> line in the file be a document.
>
> The LineDocMaker seems to be intended for this purpose.  But I can't  
> figure
> out how to read the data into it.
>
> Any examples would be greatly appreciated.
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 23:06:52 2008
Return-Path: <java-user-return-35357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13017 invoked from network); 6 Aug 2008 23:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 23:06:52 -0000
Received: (qmail 99238 invoked by uid 500); 6 Aug 2008 23:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99209 invoked by uid 500); 6 Aug 2008 23:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99198 invoked by uid 99); 6 Aug 2008 23:06:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 16:06:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 23:05:49 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 78F6071C469; Wed,  6 Aug 2008 16:05:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 62F6271C459
	for <java-user@lucene.apache.org>; Wed,  6 Aug 2008 16:05:46 -0700 (PDT)
Date: Wed, 6 Aug 2008 16:05:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: escaping special characters
In-Reply-To: <5816fbdd0808040305h33563ed5rd275e833ac3993dc@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0808061601040.24310@radix.cryptio.net>
References: <5816fbdd0808040305h33563ed5rd275e833ac3993dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: String escapedKeywords = QueryParser.escape(keywords);
: Query query = new QueryParser("content", new
: StandardAnalyzer()).parse(escapedKeywords);
: 
: this works with most of the special characters like * and ~ except \ . I
: can't do a search for a keyword like "ho\w" and get results.
: am I doing anything wrong here.

QueryParser.escape will in fact escape a backslash, but keep in mind 
StandardAnalyzer splits on backslash so that may be what's confusing you.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 06 23:46:21 2008
Return-Path: <java-user-return-35358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35644 invoked from network); 6 Aug 2008 23:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2008 23:46:21 -0000
Received: (qmail 44192 invoked by uid 500); 6 Aug 2008 23:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43208 invoked by uid 500); 6 Aug 2008 23:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43196 invoked by uid 99); 6 Aug 2008 23:46:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 16:46:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.49.25.15] (HELO mail.crossview.com) (65.49.25.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 23:45:17 +0000
Received: from cv-exchange02.crossview.inc ([10.250.250.14]) by
 cv-exchangehub.crossview.inc ([10.250.250.15]) with mapi; Wed, 6 Aug 2008
 16:45:21 -0700
From: Alex Wang <awang@crossview.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 6 Aug 2008 16:45:18 -0700
Subject: Lucene Concurrency Issue
Thread-Topic: Lucene Concurrency Issue
Thread-Index: Acj4Hnu7k+rAo9uQSXeUlaPdNi6EXw==
Message-ID: <41636CE6C874E144AD623FB97DD0D1070D2167B47B@cv-exchange02.crossview.inc>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_41636CE6C874E144AD623FB97DD0D1070D2167B47Bcvexchange02c_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_41636CE6C874E144AD623FB97DD0D1070D2167B47Bcvexchange02c_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi all,

To allow mutilple users concurrently add, delete docs and at the same time =
search the same index, what should I watch out for in terms of initing inde=
xreader, indexwriter and indexsearcher?

My application is getting various IOException (seek failed, permission deni=
ed, etc...) when concurrent add/delete/search happens. Is there any general=
 guidelines that you can share? Thanks in advance!

Alex

--_000_41636CE6C874E144AD623FB97DD0D1070D2167B47Bcvexchange02c_--

From java-user-return-35359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 00:17:00 2008
Return-Path: <java-user-return-35359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55210 invoked from network); 7 Aug 2008 00:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 00:17:00 -0000
Received: (qmail 61771 invoked by uid 500); 7 Aug 2008 00:16:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61739 invoked by uid 500); 7 Aug 2008 00:16:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61728 invoked by uid 99); 7 Aug 2008 00:16:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 17:16:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 00:15:56 +0000
Received: by wr-out-0506.google.com with SMTP id c30so188472wra.21
        for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 17:16:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=/5+lfyB7P2d5uR2W9YR+Kn8OY/IHIqIVeGLS2h+W3pA=;
        b=dB1MUYjVmrDDbQnkSvrmaiMjG6dfIYgoADsLIpnqoHVemhhKysJSKhNpY47j3wVYGA
         j4F5Y1h7SpFsdg4gbi6RNHjw2lxNaLozjSdobEW3YHj4LN0om5oSfQw+njl3UkDB7y8o
         Nvq9KA+5pINdAxpiU2NWwuC4NFemSfAfDfXZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Axiw5XzG7nLKCqqmNpFUkWvTSkTYEcsLyxvtDv95Bf4JhLE3pVckLCAwhAkGMn6SpY
         SZRE2p5YQY/ye0zJ3KmCCvaOpqcbZeeCX+L1uaHa/lPWQKTF5fB5vuje3AcQdGzIdMIN
         j9zTpYFxaylKGmJAWXLW9bapehSBG+jtUBfP8=
Received: by 10.90.50.5 with SMTP id x5mr1831312agx.120.1218068165951;
        Wed, 06 Aug 2008 17:16:05 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 38sm15985333agd.18.2008.08.06.17.16.04
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 06 Aug 2008 17:16:05 -0700 (PDT)
Message-ID: <489A3ECA.40802@gmail.com>
Date: Wed, 06 Aug 2008 20:16:10 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Concurrency Issue
References: <41636CE6C874E144AD623FB97DD0D1070D2167B47B@cv-exchange02.crossview.inc>
In-Reply-To: <41636CE6C874E144AD623FB97DD0D1070D2167B47B@cv-exchange02.crossview.inc>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Do a little research to learn the rules and you will figure out how to 
make those classes cooperate. You might start by looking at LUCENE-1026, 
which is a simple set of classes that allows for what you want. You can 
use it, use it to make your own, or even look at its father issue - the 
original LuceneIndexAccessor. (I might actually have updated code to 
LUCENE-1026 lying around - ill put it up soon if I do)

That will get you there quick and simple. If you have big plans in the 
future though, you might be better off checking out solr or embedded solr.

- Mark

Alex Wang wrote:
> Hi all,
>
> To allow mutilple users concurrently add, delete docs and at the same time search the same index, what should I watch out for in terms of initing indexreader, indexwriter and indexsearcher?
>
> My application is getting various IOException (seek failed, permission denied, etc...) when concurrent add/delete/search happens. Is there any general guidelines that you can share? Thanks in advance!
>
> Alex
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 00:40:03 2008
Return-Path: <java-user-return-35360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76123 invoked from network); 7 Aug 2008 00:40:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 00:40:03 -0000
Received: (qmail 82100 invoked by uid 500); 7 Aug 2008 00:39:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82067 invoked by uid 500); 7 Aug 2008 00:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82052 invoked by uid 99); 7 Aug 2008 00:39:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 17:39:55 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 00:38:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQtXJ-00031c-GL
	for java-user@lucene.apache.org; Wed, 06 Aug 2008 17:39:25 -0700
Message-ID: <18862037.post@talk.nabble.com>
Date: Wed, 6 Aug 2008 17:39:25 -0700 (PDT)
From: yanyanzeng <luckyyanyan888@hotmail.com>
To: java-user@lucene.apache.org
Subject: bad index by batch indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: luckyyanyan888@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
    I am building a search engine for text transcript documents from the
database of an enterprise messaging system,  and have designed a batch
processing job to incrementally build the index,because the database from
production is around huge, around 10G. 
   Now I am still testing in DEV environment, and have been puzzled by this
problem for a couple of days.  
If I build the index in one setting(because DEV database is very very
small),  the index is correct because I can get hits for my queries,  also, 
what luke shows looks fine,  4800 documents, 450 terms.
However, if I test building using my batch processing job,  I do get the
index which looks fine, but, when I search, it already returns 0 hits.  I
checked with Luke, which shows there are 5200 documents, 0 terms .
There is no exception or runtime error or anything abnormal during indexing
or searching,  I am really at a loss. 
The only difference between the two is that:   in the one setting approach, 
the whole index is built using the same indexwriter object.
in the batch approach,  an indexwriter object is opened per batch and closed
when the batch is finished. 
But,  I  think I have taken care of it by  
               IndexWriter  writer = new IndexWriter(FSDir, Analyser,
!FSdir.exists) 
 
Since lucene is designed for adding to exisiting index when the 3rd
parameter is false,   I do not understand where it went wrong.  
Should I have kept one singleton instance of the writer  until  all
documents in the database are processed, rather than opening &closing one
for each batch?     Or,  should I have kept a single instance of analyser?  
This does not seem necessary, but I really can not figure out where it went
wrong, and how come this strange behavior:  520 documents but 0 terms. 

I would be very grateful if anyone could advise.  THanks very much.

yanyan


-- 
View this message in context: http://www.nabble.com/bad-index-by-batch-indexing-tp18862037p18862037.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 02:08:59 2008
Return-Path: <java-user-return-35361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32396 invoked from network); 7 Aug 2008 02:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 02:08:59 -0000
Received: (qmail 45058 invoked by uid 500); 7 Aug 2008 02:08:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44037 invoked by uid 500); 7 Aug 2008 02:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44018 invoked by uid 99); 7 Aug 2008 02:08:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 19:08:52 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 02:07:54 +0000
Received: by rv-out-0506.google.com with SMTP id f6so264881rvb.5
        for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 19:08:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JKRYVLe1sAWwhXBftm/OAAerdgIEB++Ds4e8hAkc9gM=;
        b=JpAiYh9wEo9UVpQQTsjPWS5P43gBCKzaGKSVTtFoAzPDQRyX/5C/Is8CjvyyLiJEfu
         FvyjAoCjHb3zwX2gRSG29QGBl158bPLSaG8w+Wo1s9N3IQvTiXOvi7Vg6vreQ/49t8jF
         q0V9iiMhDiA+Qy4pN9Y+yg28sZ8rpTbTq4o6Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rP95HGNQZXChMlDOyvu0DVeK1ng2evPhL2Zq55s2HqIhYU/SIIsK/pxZiyPueM4C4u
         ha5ENIE7Yapboa0gcSmc1wV049M2fMORSgQBMxAwfZrpw6nyhTFrKmNpC2m6hTz8dnxy
         GqlSgPSK9HMfQ9HwGSuOV2IyzyzEXoeMU5au8=
Received: by 10.141.177.10 with SMTP id e10mr417882rvp.112.1218074901868;
        Wed, 06 Aug 2008 19:08:21 -0700 (PDT)
Received: by 10.141.202.13 with HTTP; Wed, 6 Aug 2008 19:08:21 -0700 (PDT)
Message-ID: <867513fe0808061908l3d784151tdad52b91c48976fa@mail.gmail.com>
Date: Thu, 7 Aug 2008 07:38:21 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: bad index by batch indexing
In-Reply-To: <18862037.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14736_15941142.1218074901810"
References: <18862037.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14736_15941142.1218074901810
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This really seems like an issue the batching mechanism (one of those errors
which seem trivial on discovery :) ). I work with batched indexing and it
works absolutely fine on data that is a lot higher in magnitude. You could
try calling the indexwriter without the 3rd argument and see if it helps.
Also, which version of lucene are you using?

--
Anshum
http://ai-cafe.blogspot.com

On Thu, Aug 7, 2008 at 6:09 AM, yanyanzeng <luckyyanyan888@hotmail.com>wrote:

>
> Hi,
>    I am building a search engine for text transcript documents from the
> database of an enterprise messaging system,  and have designed a batch
> processing job to incrementally build the index,because the database from
> production is around huge, around 10G.
>   Now I am still testing in DEV environment, and have been puzzled by this
> problem for a couple of days.
> If I build the index in one setting(because DEV database is very very
> small),  the index is correct because I can get hits for my queries,  also,
> what luke shows looks fine,  4800 documents, 450 terms.
> However, if I test building using my batch processing job,  I do get the
> index which looks fine, but, when I search, it already returns 0 hits.  I
> checked with Luke, which shows there are 5200 documents, 0 terms .
> There is no exception or runtime error or anything abnormal during indexing
> or searching,  I am really at a loss.
> The only difference between the two is that:   in the one setting approach,
> the whole index is built using the same indexwriter object.
> in the batch approach,  an indexwriter object is opened per batch and
> closed
> when the batch is finished.
> But,  I  think I have taken care of it by
>               IndexWriter  writer = new IndexWriter(FSDir, Analyser,
> !FSdir.exists)
>
> Since lucene is designed for adding to exisiting index when the 3rd
> parameter is false,   I do not understand where it went wrong.
> Should I have kept one singleton instance of the writer  until  all
> documents in the database are processed, rather than opening &closing one
> for each batch?     Or,  should I have kept a single instance of analyser?
> This does not seem necessary, but I really can not figure out where it went
> wrong, and how come this strange behavior:  520 documents but 0 terms.
>
> I would be very grateful if anyone could advise.  THanks very much.
>
> yanyan
>
>
> --
> View this message in context:
> http://www.nabble.com/bad-index-by-batch-indexing-tp18862037p18862037.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_14736_15941142.1218074901810--

From java-user-return-35362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 02:15:22 2008
Return-Path: <java-user-return-35362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35349 invoked from network); 7 Aug 2008 02:15:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 02:15:22 -0000
Received: (qmail 47906 invoked by uid 500); 7 Aug 2008 02:15:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47866 invoked by uid 500); 7 Aug 2008 02:15:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47855 invoked by uid 99); 7 Aug 2008 02:15:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 19:15:14 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 02:14:16 +0000
Received: by wr-out-0506.google.com with SMTP id c30so221887wra.21
        for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 19:14:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=rzE0qEPOwnDHG9qusMmy3c7hGwu5h5mq2rdS7P4OnsU=;
        b=IqxdWVf46PgkNmjWUgTjNXQz5xMVvbeWPeD0e1ntiHkxD2iOcu5SxkVE5jlofdj3Z3
         RppTV12u7Wzw6aRhAOLMvAj79+0uzwlSjpH7Awnh6ydbX9hwutyGBODaEosssz+Fyb4y
         FlyIq/jOY2yNezAf6EGvz/hF+jvwKStb5sxe4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=u4mVZJ58DuXYeCb8/kQZdQzRX3sUynYSPR3AboxEjCSOCkPGjARfxLw1mMERTNMN9r
         6kzdPOaWmzzGI+Mt1PukWGbxtdezgNqymeOgDdTFwKEItHskMmEHN55J3L20v1nHnbHC
         /rMsBcTxJ791IRkgtuCBWvosQXdtko+ETa8KM=
Received: by 10.90.67.10 with SMTP id p10mr4141058aga.64.1218075265750;
        Wed, 06 Aug 2008 19:14:25 -0700 (PDT)
Received: from ?192.168.1.106? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 20sm4956691agd.35.2008.08.06.19.14.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 06 Aug 2008 19:14:25 -0700 (PDT)
Message-Id: <8015EDA5-943C-4596-892D-8810CD2DA1F1@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18862037.post@talk.nabble.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5B108)
Mime-Version: 1.0 (iPhone Mail 5B108)
Subject: Re: bad index by batch indexing
Date: Wed, 6 Aug 2008 22:14:03 -0400
References: <18862037.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Only one Writer should be active on an index at any given time. You  
don't want to batch unless you need to see the docs in the index as  
you build it. - it's slower overall. You can add from multiple threads  
at the same time, but use the same Writer.

Sent from my iPhone

On Aug 6, 2008, at 8:39 PM, yanyanzeng <luckyyanyan888@hotmail.com>  
wrote:

>
> Hi,
>    I am building a search engine for text transcript documents from  
> the
> database of an enterprise messaging system,  and have designed a batch
> processing job to incrementally build the index,because the database  
> from
> production is around huge, around 10G.
>   Now I am still testing in DEV environment, and have been puzzled  
> by this
> problem for a couple of days.
> If I build the index in one setting(because DEV database is very very
> small),  the index is correct because I can get hits for my  
> queries,  also,
> what luke shows looks fine,  4800 documents, 450 terms.
> However, if I test building using my batch processing job,  I do get  
> the
> index which looks fine, but, when I search, it already returns 0  
> hits.  I
> checked with Luke, which shows there are 5200 documents, 0 terms .
> There is no exception or runtime error or anything abnormal during  
> indexing
> or searching,  I am really at a loss.
> The only difference between the two is that:   in the one setting  
> approach,
> the whole index is built using the same indexwriter object.
> in the batch approach,  an indexwriter object is opened per batch  
> and closed
> when the batch is finished.
> But,  I  think I have taken care of it by
>               IndexWriter  writer = new IndexWriter(FSDir, Analyser,
> !FSdir.exists)
>
> Since lucene is designed for adding to exisiting index when the 3rd
> parameter is false,   I do not understand where it went wrong.
> Should I have kept one singleton instance of the writer  until  all
> documents in the database are processed, rather than opening  
> &closing one
> for each batch?     Or,  should I have kept a single instance of  
> analyser?
> This does not seem necessary, but I really can not figure out where  
> it went
> wrong, and how come this strange behavior:  520 documents but 0 terms.
>
> I would be very grateful if anyone could advise.  THanks very much.
>
> yanyan
>
>
> -- 
> View this message in context: http://www.nabble.com/bad-index-by-batch-indexing-tp18862037p18862037.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 02:31:19 2008
Return-Path: <java-user-return-35363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41887 invoked from network); 7 Aug 2008 02:31:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 02:31:19 -0000
Received: (qmail 59393 invoked by uid 500); 7 Aug 2008 02:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59365 invoked by uid 500); 7 Aug 2008 02:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59354 invoked by uid 99); 7 Aug 2008 02:31:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 19:31:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 02:30:15 +0000
Received: by rv-out-0506.google.com with SMTP id f6so275172rvb.5
        for <java-user@lucene.apache.org>; Wed, 06 Aug 2008 19:30:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vhglg4u1DODRqtkDk/H6w+hXvgIZgyk8ZCmxvm+VV9o=;
        b=eAwXxj6kKEo4Rz4+mqrIb+yFYrMnnYi9k0OU5ZuDDPyJc3KEq1MleeK0szysE5Wnd5
         vNZV10AKQXjiGHL8KkXX/uL/CSfYb/MZWT8ZtBLHObvdj+4mx6eUMh6lEImN0liLgfOL
         +ftGyeln+kk55v6PIWnoNZveDAKiDhAuDAOnw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fICOo2rpp7PRVlLpCw/LhBuTzznNs4q6VW5R2yBr/UXtlK2HwENf35mUQ/XOSq+MPw
         2WmFPlV7C/s24oBfEEiJ5yEXrMn3uIqSXg0kY0NRWPzcN5hV6mbQ4y9vSasxI/993Qq2
         aOodU2Rh3R9A8S/AtxEs9Hb8f2HrBktexM7Io=
Received: by 10.141.123.4 with SMTP id a4mr421551rvn.172.1218076225474;
        Wed, 06 Aug 2008 19:30:25 -0700 (PDT)
Received: by 10.141.202.13 with HTTP; Wed, 6 Aug 2008 19:30:25 -0700 (PDT)
Message-ID: <867513fe0808061930ra0edeafg5e288b7c2ecf2542@mail.gmail.com>
Date: Thu, 7 Aug 2008 08:00:25 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LineDocMaker usage
In-Reply-To: <JB_VA_EXCHANGEc1o8y00000c35@Jb_va_exchange.jbmanage.corp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14838_31532751.1218076225414"
References: <JB_VA_EXCHANGEc1o8y00000c35@Jb_va_exchange.jbmanage.corp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14838_31532751.1218076225414
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
How about just opening a file and parsing through it while adding doing a
doc.add on each newline? That should be pretty straight and simple.
Just writing the snippet here, though this might have issues as didnt try to
compile it.

    IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
true);

    FileInputStream fstream = new FileInputStream("textfile.txt");
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    while ((strLine = br.readLine()) != null)   {
        Document doc = new Document();
            doc.add(new Field("filename",
f.getCanonicalPath(),Field.Store.YES,Field.Index.TOKENIZED));
            doc.add(new Field("filename",
strLine,Field.Store.YES,Field.Index.TOKENIZED));//DEPENDING UPON HOW YOU
WANT TO INDEX IT
            writer.addDocument(doc);
    }
    in.close();
    writer.close();


Also, I have tokenized the content and stored it so that it could be
fetched, you might just want to have a ref key instead of storing the
entrire content though. Upto you for implementation.

--
Anshum
http://ai-cafe.blogspot.com



On Thu, Aug 7, 2008 at 1:42 AM, Brittany Jacobs <bjacobs@jbmanagement.com>wrote:

> Hello, I am new to all this.  I need to read in a text file and have each
> line in the file be a document.
>
> The LineDocMaker seems to be intended for this purpose.  But I can't figure
> out how to read the data into it.
>
> Any examples would be greatly appreciated.
>
>
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_14838_31532751.1218076225414--

From java-user-return-35364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 03:47:44 2008
Return-Path: <java-user-return-35364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71032 invoked from network); 7 Aug 2008 03:47:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 03:47:44 -0000
Received: (qmail 12180 invoked by uid 500); 7 Aug 2008 03:47:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12154 invoked by uid 500); 7 Aug 2008 03:47:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12143 invoked by uid 99); 7 Aug 2008 03:47:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 20:47:36 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 03:46:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KQwSw-0000NW-QZ
	for java-user@lucene.apache.org; Wed, 06 Aug 2008 20:47:06 -0700
Message-ID: <18863533.post@talk.nabble.com>
Date: Wed, 6 Aug 2008 20:47:06 -0700 (PDT)
From: yanyanzeng <luckyyanyan888@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: bad index by batch indexing
In-Reply-To: <867513fe0808061908l3d784151tdad52b91c48976fa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: luckyyanyan888@hotmail.com
References: <18862037.post@talk.nabble.com> <867513fe0808061908l3d784151tdad52b91c48976fa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hi, thank you very much for your reply.  I am using the latest version,
lucene 2.3.2.   I will try using two arguments and post my result later.

yanyan




Anshum-2 wrote:
> 
> This really seems like an issue the batching mechanism (one of those
> errors
> which seem trivial on discovery :) ). I work with batched indexing and it
> works absolutely fine on data that is a lot higher in magnitude. You could
> try calling the indexwriter without the 3rd argument and see if it helps.
> Also, which version of lucene are you using?
> 
> --
> Anshum
> http://ai-cafe.blogspot.com
> 
> On Thu, Aug 7, 2008 at 6:09 AM, yanyanzeng
> <luckyyanyan888@hotmail.com>wrote:
> 
>>
>> Hi,
>>    I am building a search engine for text transcript documents from the
>> database of an enterprise messaging system,  and have designed a batch
>> processing job to incrementally build the index,because the database from
>> production is around huge, around 10G.
>>   Now I am still testing in DEV environment, and have been puzzled by
>> this
>> problem for a couple of days.
>> If I build the index in one setting(because DEV database is very very
>> small),  the index is correct because I can get hits for my queries, 
>> also,
>> what luke shows looks fine,  4800 documents, 450 terms.
>> However, if I test building using my batch processing job,  I do get the
>> index which looks fine, but, when I search, it already returns 0 hits.  I
>> checked with Luke, which shows there are 5200 documents, 0 terms .
>> There is no exception or runtime error or anything abnormal during
>> indexing
>> or searching,  I am really at a loss.
>> The only difference between the two is that:   in the one setting
>> approach,
>> the whole index is built using the same indexwriter object.
>> in the batch approach,  an indexwriter object is opened per batch and
>> closed
>> when the batch is finished.
>> But,  I  think I have taken care of it by
>>               IndexWriter  writer = new IndexWriter(FSDir, Analyser,
>> !FSdir.exists)
>>
>> Since lucene is designed for adding to exisiting index when the 3rd
>> parameter is false,   I do not understand where it went wrong.
>> Should I have kept one singleton instance of the writer  until  all
>> documents in the database are processed, rather than opening &closing one
>> for each batch?     Or,  should I have kept a single instance of
>> analyser?
>> This does not seem necessary, but I really can not figure out where it
>> went
>> wrong, and how come this strange behavior:  520 documents but 0 terms.
>>
>> I would be very grateful if anyone could advise.  THanks very much.
>>
>> yanyan
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/bad-index-by-batch-indexing-tp18862037p18862037.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............
> 
> 

-- 
View this message in context: http://www.nabble.com/bad-index-by-batch-indexing-tp18862037p18863533.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 04:36:32 2008
Return-Path: <java-user-return-35365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88906 invoked from network); 7 Aug 2008 04:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 04:36:32 -0000
Received: (qmail 43228 invoked by uid 500); 7 Aug 2008 04:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43180 invoked by uid 500); 7 Aug 2008 04:36:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43169 invoked by uid 99); 7 Aug 2008 04:36:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Aug 2008 21:36:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.104 as permitted sender)
Received: from [216.46.96.104] (HELO smtp12.atl.equifax.com) (216.46.96.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 04:35:27 +0000
Received: from postoffice21.equifax.com (unknown [192.168.4.42])
	by smtp12.atl.equifax.com (Postfix) with ESMTP id 7C6C13703
	for <java-user@lucene.apache.org>; Thu,  7 Aug 2008 00:27:38 -0400 (EDT)
Received: from wetcisdlppsmtp1.eis.equifax.com (wetcisdlppsmtp1.fin.equifax.com [172.18.152.141])
	by postoffice21.equifax.com (Symantec Mail Security) with SMTP id F126F558002
	for <java-user@lucene.apache.org>; Thu,  7 Aug 2008 00:34:15 -0400 (EDT)
X-AuditID: c0a8042a-a8f10bb000000b62-84-489a7b47afd7
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice21.equifax.com (Symantec Mail Security) with ESMTP id ABD10558003
	for <java-user@lucene.apache.org>; Thu,  7 Aug 2008 00:34:15 -0400 (EDT)
In-Reply-To: <Pine.LNX.4.62.0808061601040.24310@radix.cryptio.net>
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: Re: escaping special characters
Message-ID: <OFBB2BE60C.829AFAA7-ON8525749E.00192324-8525749E.00193574@fin.equifax.com>
Date: Thu, 7 Aug 2008 00:35:10 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 0019356E8525749E_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
X-Disclaimed: 1915
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0019356E8525749E_=
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

can i escape built in lucene keywords like OR, AND aswell?

Regards,=20
Aravind R Yarram
=20





Chris Hostetter <hossman=5Flucene@fucit.org>=20
08/06/2008 07:05 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: escaping special characters







: String escapedKeywords =3D QueryParser.escape(keywords);
: Query query =3D new QueryParser("content", new
: StandardAnalyzer()).parse(escapedKeywords);
:=20
: this works with most of the special characters like * and ~ except \ . I
: can't do a search for a keyword like "ho\w" and get results.
: am I doing anything wrong here.

QueryParser.escape will in fact escape a backslash, but keep in mind=20
StandardAnalyzer splits on backslash so that may be what's confusing you.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message contains information from Equifax Inc. which may be confidenti=
al and privileged.  If you are not an intended recipient, please refrain fr=
om any disclosure, copying, distribution or use of this information and not=
e that such actions are prohibited.  If you have received this transmission=
 in error, please notify by e-mail postmaster@equifax.com.

--=_alternative 0019356E8525749E_=--

From java-user-return-35366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 08:45:26 2008
Return-Path: <java-user-return-35366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83388 invoked from network); 7 Aug 2008 08:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 08:45:25 -0000
Received: (qmail 75676 invoked by uid 500); 7 Aug 2008 08:45:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75638 invoked by uid 500); 7 Aug 2008 08:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75627 invoked by uid 99); 7 Aug 2008 08:45:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 01:45:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.128] (HELO web28108.mail.ukl.yahoo.com) (217.146.182.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Aug 2008 08:44:18 +0000
Received: (qmail 63350 invoked by uid 60001); 7 Aug 2008 08:44:43 -0000
Received: from [212.99.51.254] by web28108.mail.ukl.yahoo.com via HTTP; Thu, 07 Aug 2008 08:44:43 GMT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Thu, 7 Aug 2008 08:44:43 +0000 (GMT)
From: renou oki <yodapoubelle@yahoo.fr>
Subject: Stop search process when a given number of hits is reached
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-882613347-1218098683=:62278"
Message-ID: <676258.62278.qm@web28108.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-882613347-1218098683=:62278
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hello=0A=0AIs there a way to stop the search process when a given number of=
 hits is reached?=0A=0AI have a counter feature which displays how many doc=
s match a query. =0AThis counter is blocked; I mean that if there are more =
than 500 docs, it will just display "more than 500".=0AI don't care about t=
he exact amount of docs matched by the query, the order of the hits or what=
ever...=0AWhat I want is to stop the search process when it reaches at leas=
t 500 hits in order to improve performance... =0A(I want an average search =
time in about 50 - 100 ms)=0A=0AI experimented with the following methods :=
=0AFor the same query:=0Awith search(Query query, Filter filter, Sort sort)=
  hits=3D157691 docs in searchingTime=3D2514 ms=0Awith search(Query query, =
Filter filter, int n) (with n =3D 50)  TopDocs totalHits 157691 in searchin=
gTime=3D 2360 ms=0A =0AFor another query:=0AWith search(Query query, Filter=
 filter, Sort sort) hits=3D1208 docs in searchingTime=3D750 ms=0AWith searc=
h(Query query, Filter filter, int n) (with n =3D 50) TopDocs totalHits 1208=
 in searchingTime=3D 718 ms=0A=0AFor another query:=0AWith search(Query que=
ry, Filter filter, Sort sort) hits=3D16174 cv(s) searchingTime=3D1297 ms=0A=
With search(Query query, Filter filter, int n) (with n =3D 50) TopDocs tota=
lHits 16174 in searchingTime=3D 1219 ms=0A=0AAccording to this results, rep=
lacing the first method by the other has no effect on either the search =0A=
time or total number of hits returned=0A=0AAlso the lucene version used now=
 is 1.9.1 (but i work on the evolution to 2.3.2)=0A=0A=0AThanks a lot=0A(So=
rry for my bad English ... you will easily guess, I=E2=80=99m French ;)=0A=
=0A=0A=0A      ____________________________________________________________=
_________________ =0AEnvoyez avec Yahoo! Mail. Une boite mail plus intellig=
ente http://mail.yahoo.fr
--0-882613347-1218098683=:62278--

From java-user-return-35367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 09:03:30 2008
Return-Path: <java-user-return-35367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97098 invoked from network); 7 Aug 2008 09:03:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 09:03:29 -0000
Received: (qmail 97296 invoked by uid 500); 7 Aug 2008 09:03:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97265 invoked by uid 500); 7 Aug 2008 09:03:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97254 invoked by uid 99); 7 Aug 2008 09:03:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 02:03:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 09:02:26 +0000
Received: by wx-out-0506.google.com with SMTP id h29so73892wxd.20
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 02:02:35 -0700 (PDT)
Received: by 10.70.49.9 with SMTP id w9mr4176250wxw.55.1218099754395;
        Thu, 07 Aug 2008 02:02:34 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h8sm15931243wxd.11.2008.08.07.02.02.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 07 Aug 2008 02:02:33 -0700 (PDT)
Message-Id: <CD5C1F2B-7238-45C9-8070-9C8BCB62F544@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <867513fe0808061930ra0edeafg5e288b7c2ecf2542@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: LineDocMaker usage
Date: Thu, 7 Aug 2008 05:02:32 -0400
References: <JB_VA_EXCHANGEc1o8y00000c35@Jb_va_exchange.jbmanage.corp> <867513fe0808061930ra0edeafg5e288b7c2ecf2542@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, since the docs are so regular from a line file, to gain indexing  
throughput you can re-use the Document & Field instances, and inside  
the while loop just use Field.setValue(...) to change the value per  
document.

Mike

Anshum wrote:

> Hi,
> How about just opening a file and parsing through it while adding  
> doing a
> doc.add on each newline? That should be pretty straight and simple.
> Just writing the snippet here, though this might have issues as  
> didnt try to
> compile it.
>
>    IndexWriter writer = new IndexWriter(indexDir, new  
> StandardAnalyzer(),
> true);
>
>    FileInputStream fstream = new FileInputStream("textfile.txt");
>    DataInputStream in = new DataInputStream(fstream);
>    BufferedReader br = new BufferedReader(new InputStreamReader(in));
>    String strLine;
>    while ((strLine = br.readLine()) != null)   {
>        Document doc = new Document();
>            doc.add(new Field("filename",
> f.getCanonicalPath(),Field.Store.YES,Field.Index.TOKENIZED));
>            doc.add(new Field("filename",
> strLine,Field.Store.YES,Field.Index.TOKENIZED));//DEPENDING UPON HOW  
> YOU
> WANT TO INDEX IT
>            writer.addDocument(doc);
>    }
>    in.close();
>    writer.close();
>
>
> Also, I have tokenized the content and stored it so that it could be
> fetched, you might just want to have a ref key instead of storing the
> entrire content though. Upto you for implementation.
>
> --
> Anshum
> http://ai-cafe.blogspot.com
>
>
>
> On Thu, Aug 7, 2008 at 1:42 AM, Brittany Jacobs <bjacobs@jbmanagement.com 
> >wrote:
>
>> Hello, I am new to all this.  I need to read in a text file and  
>> have each
>> line in the file be a document.
>>
>> The LineDocMaker seems to be intended for this purpose.  But I  
>> can't figure
>> out how to read the data into it.
>>
>> Any examples would be greatly appreciated.
>>
>>
>>
>>
>
>
> -- 
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 10:09:39 2008
Return-Path: <java-user-return-35368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33683 invoked from network); 7 Aug 2008 10:09:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 10:09:39 -0000
Received: (qmail 71633 invoked by uid 500); 7 Aug 2008 10:09:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71608 invoked by uid 500); 7 Aug 2008 10:09:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71594 invoked by uid 99); 7 Aug 2008 10:09:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 03:09:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 10:08:33 +0000
Received: by fg-out-1718.google.com with SMTP id l27so230731fgb.27
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 03:08:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=symi5Prc1w+LT4Ll2RokLY6Gyt9tESztt63VVnCFEUM=;
        b=s0nncWClSyzX9uKsKonLG7eztDd6Y0RSFEg6EqvzOmBvdig4kzL2hIhVvF+OAMQdZ5
         FuytP/2f3ksIoduZ4EVQUd3o0isJorqlB6DHlupeqSD2zGHrxXL2HgeiiK1t2rN5w2gZ
         ZuJ9/D4Ahz8TMFFq0WnE8IoaBYYoAjmNnmFsM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Z7UTMr43rgp/O0Ycd7jmD+uMGlMKeRDTaNww7Lhj7AskEgTaNYL7aY3F/MjcuLDaLw
         Cbg0ln/brPQIFDER9ZMnPehAt7cR2wlR4U1TS0P1AdIP/2TpRAU2PScNavoyPs2GBE+O
         4mTx321pd+EZsYSaN3y6VyRZIWHzUIJc6Hvig=
Received: by 10.86.72.15 with SMTP id u15mr1584770fga.22.1218103739575;
        Thu, 07 Aug 2008 03:08:59 -0700 (PDT)
Received: by 10.86.4.7 with HTTP; Thu, 7 Aug 2008 03:08:59 -0700 (PDT)
Message-ID: <e05f0fd10808070308r2162aee8tc2a5da990dc1bba9@mail.gmail.com>
Date: Thu, 7 Aug 2008 13:08:59 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CustomScoreQuery and BooleanQuery
In-Reply-To: <489A1210.1090805@ai.sri.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_63526_20662345.1218103739422"
References: <489A1210.1090805@ai.sri.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_63526_20662345.1218103739422
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When combining any sub queries, a scorer has at least two things to decide:
which docs to match, and once matched, how to score. Boolean Queries applies
specific logics for this, and some queries allow some control of the way to
score. For current CustomScoreQuery things are more straightforward - the
single sub-query dictates which docs match, the VSQs are expected to provide
a score for any doc matched by the SQ, and the CSQ then combines the score,
in a way that can be customized.

Can you provide more details on your use case? Perhaps it can be answered
with existing Lucene mechanisms.

Doron

Jay wrote:

> Hi,
> The new addition of the class CustomScoreQuery is very useful and powerful
> in customizing the score of one query using the indexed field values.
> Another feature that I am looking for in Lucene is the ability to combine
> the scores of multiple (sub)queries in a way different from the
> BooleanQuery. BoostingQuery is one such attempt but it's not very flexible
> (e.g. the damping is independent of the scores of sub queries).
> Does anyone know any other existing examples similar to CustomScoreQuery
> but deal with multiple sub queries?
>
> Thanks!
>
> Jay
>

------=_Part_63526_20662345.1218103739422--

From java-user-return-35369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 12:16:19 2008
Return-Path: <java-user-return-35369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4296 invoked from network); 7 Aug 2008 12:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 12:16:17 -0000
Received: (qmail 47602 invoked by uid 500); 7 Aug 2008 12:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47576 invoked by uid 500); 7 Aug 2008 12:16:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47565 invoked by uid 99); 7 Aug 2008 12:16:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 05:16:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 12:15:11 +0000
Received: by fg-out-1718.google.com with SMTP id l27so258985fgb.27
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 05:15:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fWzggCbMZhFeEsnVzH77OOfxTK9B6DNtQyKApjCqrxc=;
        b=Z8TrWs+rdt7XBaJ5gIt7+V8MS8VKgPfOfkytI0Fm8itzaWJrc+EWd6VuKgkmoJuAB9
         BzlpUYQea2bWyn2MSAss+Jw/FlJUYh6HlSSS569n9zId3dL3ckxx0uGj9R2jH7J8BQYa
         zXtor4tKckfnAslYxPsTvR0KyZ/D8qw03qYqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=d8ZnL/6Z59st9S4OlwTmSvXZJG8gAm+T2qj9Q0aEG7+chyG9nEhCLSVqCEkupaCD/s
         V3YQncxowmoEUhXOvqogcHmUyXqwn4tgJfJo+28LL0zw+g9x7E+bK5jAHOMGscVWdv9h
         rc+fteyTJMXo8Qvl93bDqWxIP24m8qt4h0oYs=
Received: by 10.86.59.2 with SMTP id h2mr1651672fga.40.1218111337381;
        Thu, 07 Aug 2008 05:15:37 -0700 (PDT)
Received: by 10.86.4.7 with HTTP; Thu, 7 Aug 2008 05:15:37 -0700 (PDT)
Message-ID: <e05f0fd10808070515h69b8cc46p230dbb2a9bad76bb@mail.gmail.com>
Date: Thu, 7 Aug 2008 15:15:37 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Stop search process when a given number of hits is reached
In-Reply-To: <676258.62278.qm@web28108.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64987_28796288.1218111337396"
References: <676258.62278.qm@web28108.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64987_28796288.1218111337396
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Nothing built in that I'm aware of will do this, but it can be done by
searching with your own HitCollector.
There is a related feature - stop search after a specified time - using
TimeLimitedCollector.
It is not released yet, see issue LUCENE-997.
In short, the collector's collect() method is invoked in the search process
for each matching document.
Once 500 docs were collected, your collector can cause the search to stop by
throwing an exception.
Upon catching the exception you know that 500 docs were collected.

Doron

On Thu, Aug 7, 2008 at 11:44 AM, renou oki <yodapoubelle@yahoo.fr> wrote:

> Hello
>
> Is there a way to stop the search process when a given number of hits is
> reached?
>
> I have a counter feature which displays how many docs match a query.
> This counter is blocked; I mean that if there are more than 500 docs, it
> will just display "more than 500".
> I don't care about the exact amount of docs matched by the query, the order
> of the hits or whatever...
> What I want is to stop the search process when it reaches at least 500 hits
> in order to improve performance...
> (I want an average search time in about 50 - 100 ms)
>
> I experimented with the following methods :
> For the same query:
> with search(Query query, Filter filter, Sort sort)  hits=157691 docs in
> searchingTime=2514 ms
> with search(Query query, Filter filter, int n) (with n = 50)  TopDocs
> totalHits 157691 in searchingTime= 2360 ms
>
> For another query:
> With search(Query query, Filter filter, Sort sort) hits=1208 docs in
> searchingTime=750 ms
> With search(Query query, Filter filter, int n) (with n = 50) TopDocs
> totalHits 1208 in searchingTime= 718 ms
>
> For another query:
> With search(Query query, Filter filter, Sort sort) hits=16174 cv(s)
> searchingTime=1297 ms
> With search(Query query, Filter filter, int n) (with n = 50) TopDocs
> totalHits 16174 in searchingTime= 1219 ms
>
> According to this results, replacing the first method by the other has no
> effect on either the search
> time or total number of hits returned
>
> Also the lucene version used now is 1.9.1 (but i work on the evolution to
> 2.3.2)
>
>
> Thanks a lot
> (Sorry for my bad English ... you will easily guess, I'm French ;)
>
>
>
>
>  _____________________________________________________________________________
> Envoyez avec Yahoo! Mail. Une boite mail plus intelligente
> http://mail.yahoo.fr
>

------=_Part_64987_28796288.1218111337396--

From java-user-return-35370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 12:27:43 2008
Return-Path: <java-user-return-35370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16409 invoked from network); 7 Aug 2008 12:27:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 12:27:43 -0000
Received: (qmail 63168 invoked by uid 500); 7 Aug 2008 12:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62913 invoked by uid 500); 7 Aug 2008 12:27:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62902 invoked by uid 99); 7 Aug 2008 12:27:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 05:27:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 12:26:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KR4a7-0001DD-SR
	for java-user@lucene.apache.org; Thu, 07 Aug 2008 05:27:03 -0700
Message-ID: <18869247.post@talk.nabble.com>
Date: Thu, 7 Aug 2008 05:27:03 -0700 (PDT)
From: Christophe from paris <zlink_fr@yahoo.fr>
To: java-user@lucene.apache.org
Subject: Re: search with accent not match
In-Reply-To: <4899A759.7000903@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: zlink_fr@yahoo.fr
References: <18848522.post@talk.nabble.com> <489998A6.7040005@gmail.com> <18850615.post@talk.nabble.com> <4899A759.7000903@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes  markrmiller,the order is important
then=20

 TokenStream result =3D new StandardTokenizer(reader);
    result =3D new StandardFilter(result); =20
    result =3D new StopFilter(result, stoptable);   =20
    result =3D new ISOLatin1AccentFilter(result);
    result =3D new FrenchStemFilter(result, excltable);
    result =3D new LowerCaseFilter(result);

And finaly with ISOLatin1AccentFilter the result is good :)

tanks you.

Now go the polish search ^^


markrmiller wrote:
>=20
> You certainly can - just create your own Analyzer starting with a copy=20
> of the French one you are using.
>=20
> Then you just plug in the filter in the order you want it applied:
>=20
> result =3D new ISOLatin1AccentFilter(result);
>=20
> You have to decide for yourself where it will come - if you put it=20
> before the stopword step, more stops words might be removed than if it=20
> was after - that type of thing usually comes down to individual=20
> requirements/filter limitations. If your stopword list has diacriticals=
=20
> and you run the accent filter before applying the stopword list, some=20
> expected stopwords will never be removed...etc.
>=20
>=20
> Christophe from paris wrote:
>> Actualy in my FrenchAnalyser=20
>>
>> i have :
>>
>>  TokenStream result =3D new StandardTokenizer(reader);
>>     result =3D new StandardFilter(result);
>>     result =3D new StopFilter(result, stoptable);
>>     result =3D new FrenchStemFilter(result, excltable);
>>     result =3D new LowerCaseFilter(result);
>>
>>
>> I can use ISOLatin1AccentFilter in this Class for indexing ans search ?
>> And it is the case where ?
>>
>>
>> markrmiller wrote:
>>  =20
>>> Check out org.apache.lucene.analysis.ISOLatin1AccentFilter
>>>
>>> It will strip diacritics - just be sure to use it at index time and=20
>>> query time to get what you want. Also, you will no longer be able to=20
>>> differentiate between the two in your searching (rarely that important=
=20
>>> in my opinion, but others certainly disagree).
>>>
>>> - Mark
>>>
>>> Christophe from paris wrote:
>>>    =20
>>>> Hello
>>>>
>>>> I'm use FrenchAnalyzer for index=20
>>>>
>>>> IndexWriter writer =3D new IndexWriter(pathOfIndex, new FrenchAnalyzer=
(),
>>>> true);
>>>> Document =3D new Document();
>>>> doc.add(new
>>>> Field("TXT_CHARACT_VALUE",word.toLowerCase(),Field.Store.YES,Field.Ind=
ex.TOKENIZED));
>>>> writer.addDocument(doc);
>>>>
>>>> And search
>>>>
>>>> IndexReader reader =3D IndexReader.open(pathOfIndex);=09=09=09
>>>> Searcher searcher =3D new IndexSearcher(reader);
>>>> Analyzer analyzer =3D new FrenchAnalyzer();=09=09=09=09=09=09
>>>> QueryParser parser =3D new QueryParser(field, analyzer);=09=09=09=09=
=09
>>>> Query query =3D parser.parse(motRecherche);
>>>> Hits hits =3D searcher.search(query);
>>>>
>>>> in my document i have the word "lumiere" and "lumi=C3=A8re"
>>>>
>>>> when i search lumi=C3=A8re only document match lumi=C3=A8re but "lumie=
re" is not
>>>> return
>>>>
>>>> and if search "lumiere" the result is lumiere, lumieres
>>>> ,lumi=C3=A9re,lumi=C3=A9res
>>>> but not lumi=C3=A8re
>>>>
>>>> for a total match i must search "lumiere OR limi=C3=A8re"
>>>> but is not the best solution=20
>>>>  =20
>>>>      =20
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>    =20
>>
>>  =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/search-with-accent-not-=
match-tp18848522p18869247.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 12:30:20 2008
Return-Path: <java-user-return-35371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17495 invoked from network); 7 Aug 2008 12:30:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 12:30:19 -0000
Received: (qmail 69994 invoked by uid 500); 7 Aug 2008 12:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69963 invoked by uid 500); 7 Aug 2008 12:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69952 invoked by uid 99); 7 Aug 2008 12:30:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 05:30:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 12:29:11 +0000
Received: from [192.168.1.101] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m77CTiN17372
	for <java-user@lucene.apache.org>; Thu, 7 Aug 2008 07:29:44 -0500
Message-ID: <489AEAAB.4060904@getopt.org>
Date: Thu, 07 Aug 2008 14:29:31 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Stop search process when a given number of hits is reached
References: <676258.62278.qm@web28108.mail.ukl.yahoo.com> <e05f0fd10808070515h69b8cc46p230dbb2a9bad76bb@mail.gmail.com>
In-Reply-To: <e05f0fd10808070515h69b8cc46p230dbb2a9bad76bb@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> Nothing built in that I'm aware of will do this, but it can be done by
> searching with your own HitCollector.
> There is a related feature - stop search after a specified time - using
> TimeLimitedCollector.
> It is not released yet, see issue LUCENE-997.
> In short, the collector's collect() method is invoked in the search process
> for each matching document.
> Once 500 docs were collected, your collector can cause the search to stop by
> throwing an exception.
> Upon catching the exception you know that 500 docs were collected.

Two additional comments:

* the topN results from such incomplete search may be way off, if there 
were some high scoring documents somewhere beyond the limit.

* if you know that there are more important and less important documents 
in your corpus, and their relative weight is independent of the query 
(e.g. PageRank-type score), then you can restructure your index so that 
postings belonging to highly-scoring documents come first on the posting 
lists - this way you have a better chance to collect highly relevant 
documents first, even though the search is incomplete. You can find an 
implementation of this concept in Nutch 
(org.apache.nutch.indexer.IndexSorter).

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 12:47:18 2008
Return-Path: <java-user-return-35372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25606 invoked from network); 7 Aug 2008 12:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 12:47:18 -0000
Received: (qmail 94989 invoked by uid 500); 7 Aug 2008 12:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94956 invoked by uid 500); 7 Aug 2008 12:47:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94939 invoked by uid 99); 7 Aug 2008 12:47:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 05:47:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 12:46:15 +0000
Received: by rv-out-0506.google.com with SMTP id f6so599236rvb.5
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 05:46:25 -0700 (PDT)
Received: by 10.140.185.1 with SMTP id i1mr704364rvf.102.1218113185659;
        Thu, 07 Aug 2008 05:46:25 -0700 (PDT)
Received: by 10.141.83.4 with HTTP; Thu, 7 Aug 2008 05:46:25 -0700 (PDT)
Message-ID: <1f8734680808070546q6d36cbe8m6687b70f7782d6df@mail.gmail.com>
Date: Thu, 7 Aug 2008 14:46:25 +0200
From: "Michael Zehrer" <zehrer@zepan.org>
Sender: michael@zepan.net
To: java-user@lucene.apache.org
Subject: Efficient delete
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 32effa63ecd5a470
X-Virus-Checked: Checked by ClamAV on apache.org

Dear List,

I have a rather big index around 20gb. My documents have a unique id
that I store in in an untokenized field.

Using an IndexReader I delete documents by term using the id. The
applications tries to batch as many delete operations as possible for
this.

The applications runs on a 8Core Machine with 1GB heapsize for the
JVM. Each delete takes about 3sec to complete. I have a lot of Updates
during a day so this takes a lot of time and in effect this is too
slow.

Is there anything I can do to speed things up a little?

Best,

Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 13:18:53 2008
Return-Path: <java-user-return-35373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38558 invoked from network); 7 Aug 2008 13:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 13:18:53 -0000
Received: (qmail 33257 invoked by uid 500); 7 Aug 2008 13:18:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33216 invoked by uid 500); 7 Aug 2008 13:18:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33205 invoked by uid 99); 7 Aug 2008 13:18:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 06:18:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 13:17:47 +0000
Received: by fg-out-1718.google.com with SMTP id l27so276176fgb.27
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 06:18:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:content-transfer-encoding:message-id
         :user-agent;
        bh=YcRME9t2r+lRhTAxvnoneYEFNP/xw6zDbHuc7xK9waQ=;
        b=xeCbrgsAo6EoA67N5RFIqSlGgdUOvacwCJmUSoo8XtA8HTfzyOtWdX9jUqYHRs90qV
         BY4TLyc41glUuQneQTKV2lq18nEkGDokyo3o11Q7JFInsjnEaB86zEpYOnvtOF2oQQgB
         Yc+wOddQAC5WBVOkEBNOaCSihvknpjGWsPDik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version
         :content-transfer-encoding:message-id:user-agent;
        b=wgSkit3GHyf+f1Fa79lsxYbtksP92KWM3VYysCq3QOa2oaHFBpo+/hDRIF7cYUt4fs
         Z/v8tcv/nCZy19uSm+VuPYflVcZE10ybPmpMpTLL5FBUdEhc6HMSIXopS030FYnQk5Y6
         FfodHpWKnBpX6DczbnD8TfLnBFSj67BiOfoaQ=
Received: by 10.86.59.18 with SMTP id h18mr1722159fga.4.1218115093619;
        Thu, 07 Aug 2008 06:18:13 -0700 (PDT)
Received: from sj-desktop ( [92.112.165.218])
        by mx.google.com with ESMTPS id l19sm4493600fgb.7.2008.08.07.06.18.09
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 07 Aug 2008 06:18:12 -0700 (PDT)
Date: Thu, 07 Aug 2008 16:18:02 +0300
To: "Lucene user list" <java-user@lucene.apache.org>
Subject: Tree search
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Message-ID: <op.ufipoulb2ic4zu@sj-desktop>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello
I have 	such  document   structure
doc1
      id       - 1
      parentid - 0
      name  -    state
doc2
      id       - 2
      parentid - 1
      name     - department
doc3
      id       - 3
      parentid - 2
      name      Boston
doc4
      id       - 4
      parentid - 2
      name      Opera
doc5
      id        5
      parentid  1
      name     - Chicago
doc6
      id       - 6
      parentid - 4
      name      November

All document a linked by parentid = id  of parent document.
By this link can be retrieved the full path of document,
for example:
doc3-/state/department/Boston
Doc5 - /state/Chicago


I want to implement search by path
1. Same path, for example: /state/department/Boston  return doc3
2. Child of the path,  for example: /state/department  return doc3,doc4
3. All childs of the path for example: /state/department - return  
doc3,doc4,doc6

I need to advice how the best way it can be implemented?

Moving  is very often operation and storing full path can cost with
additional unwanted operations and therefore it's not a desirable solution

Sergey Kabashnyuk
eXo Platform SAS

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 14:07:31 2008
Return-Path: <java-user-return-35374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57847 invoked from network); 7 Aug 2008 14:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 14:07:31 -0000
Received: (qmail 96675 invoked by uid 500); 7 Aug 2008 14:07:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96352 invoked by uid 500); 7 Aug 2008 14:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96341 invoked by uid 99); 7 Aug 2008 14:07:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 07:07:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 14:06:28 +0000
Received: by yx-out-2324.google.com with SMTP id 3so88200yxj.5
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 07:06:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ywzkshGYlqjp0T6R1Id6yQu8Av6is2xj5KUKcyaENOU=;
        b=qiqOIBg2AAD4mGIYsmtgkG+PZhe1mfKQ7o+SFEh66FXMRr4Qoo7iXj9pLSQU4PeXam
         izuUArqW6ikJLJ+ikpjsEOgy9s0GGXh7ImJCA3N+lK5bsdgrEG5S0uXqhBmz9b8Vmgxc
         H0zi894xA1IdAW+BsOhHnYpWo14OePTZz6zw0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=s9KSV4fbTbuRjNklNqrK+Z1IotyLfyjOq1ZkXf8I5w+q9cVDhprxReh/AdtbqUljmA
         3E0y2pOAfrdxk8vB4wqZJyEnxN0LNdr1fz86tJH0Qwn1fS6mQSsmPY/rJuFtXGmQnPik
         4NafWyexEj5yiNWWYGReru8SO2zG7kx0KtpFo=
Received: by 10.150.197.8 with SMTP id u8mr155673ybf.99.1218117998175;
        Thu, 07 Aug 2008 07:06:38 -0700 (PDT)
Received: by 10.151.109.6 with HTTP; Thu, 7 Aug 2008 07:06:38 -0700 (PDT)
Message-ID: <85d3c3b60808070706k4a52cfdesf00a8c5afc2fb08f@mail.gmail.com>
Date: Thu, 7 Aug 2008 10:06:38 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Concurrency Issue
In-Reply-To: <41636CE6C874E144AD623FB97DD0D1070D2167B47B@cv-exchange02.crossview.inc>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19996_3781318.1218117998175"
References: <41636CE6C874E144AD623FB97DD0D1070D2167B47B@cv-exchange02.crossview.inc>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19996_3781318.1218117998175
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The contrib realtime search patch enables the functionality you described.
https://issues.apache.org/jira/browse/LUCENE-1313

On Wed, Aug 6, 2008 at 7:45 PM, Alex Wang <awang@crossview.com> wrote:

>
> Hi all,
>
> To allow mutilple users concurrently add, delete docs and at the same time
> search the same index, what should I watch out for in terms of initing
> indexreader, indexwriter and indexsearcher?
>
> My application is getting various IOException (seek failed, permission
> denied, etc...) when concurrent add/delete/search happens. Is there any
> general guidelines that you can share? Thanks in advance!
>
> Alex
>

------=_Part_19996_3781318.1218117998175--

From java-user-return-35375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 14:19:04 2008
Return-Path: <java-user-return-35375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61856 invoked from network); 7 Aug 2008 14:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 14:19:03 -0000
Received: (qmail 10323 invoked by uid 500); 7 Aug 2008 14:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9836 invoked by uid 500); 7 Aug 2008 14:18:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9825 invoked by uid 99); 7 Aug 2008 14:18:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 07:18:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 14:17:59 +0000
Received: by rv-out-0506.google.com with SMTP id f6so647474rvb.5
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 07:18:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=dX1FDxWMaI5JdfWqPVztO9kwkx0H7uqAba/DetaubYY=;
        b=EIkKKZhKOY8NyCsJ/gWtPOrbWxEUpxamyh11TqFVZp1iIGTligcbpLImV2KgFLDIMb
         72kxSTD8TTsr5G5LfoJ8LTLBoXjxqhurXpSZVvdqZ3+70S16Ep2VHVOOu4Ko/kHmvp8m
         oniNLHtRHs2rQT6x6UL0akw+llTL2om5M7syo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=tKjR4TtOL98J5ltAskBsL4LuiFPiGFsc8ew5fzwGzGrf1ctlb+YR+MVShFE8rudJu+
         nTI0gwABoazHLpestyaMHm9IpTYJ6X1MYmm2E7JnC6jd/aUcZa9belxPpJWul/E7Sr3R
         XaiyM900WSA5uLh59zVmD7FEuDyuoNxKgT2yQ=
Received: by 10.141.129.14 with SMTP id g14mr751309rvn.56.1218118706811;
        Thu, 07 Aug 2008 07:18:26 -0700 (PDT)
Received: by 10.140.178.11 with HTTP; Thu, 7 Aug 2008 07:18:26 -0700 (PDT)
Message-ID: <5e76f3840808070718u1edbb6a5q5e40690719e82d5@mail.gmail.com>
Date: Thu, 7 Aug 2008 10:18:26 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Tree search
In-Reply-To: <op.ufipoulb2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <op.ufipoulb2ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlcmUgYXJlIGEgbnVtYmVyIG9mIHdheXMgdG8gZG8gdGhpcy4gSGVyZSBpcyBvbmU6Ckxvc2Ug
dGhlIHBhcmVudGlkIGZpZWxkICh1bmxlc3MgeW91IGhhdmUgb3RoZXIgcmVhc29ucyB0byBrZWVw
IGl0KS4KQWRkIGEgZmllbGQgZnVsbE5hbWUsIGFuZCBhIGZpZWxkIGNhbGxlZCBkZXB0aCA6Cgpk
b2MxCmZ1bGxOYW1lOiBzdGF0ZQpkZXB0aDogMAoKZG9jMgpmdWxsTmFtZTogc3RhdGUvZGVwYXJ0
bWVudApkZXB0aDoxCgpkb2MzCmZ1bGxOYW1lOiBzdGF0ZS9kZXBhcnRtZW50L0Jvc3RvbgpkZXB0
aDogMgoKZG9jNApmdWxsTmFtZTogc3RhdGUvZGVwYXJ0bWVudC9PcGVyYQpkZXB0aDogMgoKZG9j
NApmdWxsTmFtZTogc3RhdGUvQ2hpY2FnbwpkZXB0aDogMQoKZG9jNgpmdWxsTmFtZTogc3RhdGUv
ZGVwYXJ0bWVudC9PcGVyYS9Ob3ZlbWJlcgpkZXB0aDogMwoKPiAxLiBTYW1lIHBhdGgsIGZvciBl
eGFtcGxlOiAvc3RhdGUvZGVwYXJ0bWVudC9Cb3N0b24g4oCTIHJldHVybiBkb2MzCnF1ZXJ5OiBm
dWxsTmFtZTorL3N0YXRlL2RlcGFydG1lbnQvQm9zdG9uCgo+IDIuIENoaWxkIG9mIHRoZSBwYXRo
LCAgZm9yIGV4YW1wbGU6IC9zdGF0ZS9kZXBhcnRtZW50IOKAkyByZXR1cm4gZG9jMyxkb2M0CnF1
ZXJ5OiBmdWxsTmFtZTorL3N0YXRlL2RlcGFydG1lbnQgZGVwdGg6KyIxIgoKPiAzLiBBbGwgY2hp
bGRzIG9mIHRoZSBwYXRoIGZvciBleGFtcGxlOiAvc3RhdGUvZGVwYXJ0bWVudCAtIHJldHVybiBk
b2MzLGRvYzQsZG9jNgpxdWVyeTogZnVsbE5hbWU6Ky9zdGF0ZS9kZXBhcnRtZW50LwoKSXMgdGhp
cyB3aGF0IHlvdSBuZWVkPwpEZXBlbmRpbmcgb24geW91ciB1c2UgY2FzZXMsIHRoZXJlIG1heSBi
ZSBiZXR0ZXIgd2F5cyBvZiBpbXBsZW1lbnRpbmcgdGhpcy4KCkFzIHRoaXMgaXMgbm90IGEgcmVs
YXRpb25hbCBkYiwgd2UgYXJlIG5vdCBjb25jZXJuZWQgKGhvcGVmdWxseSkgd2l0aAp0aGUgcmVw
bGljYXRlZCBpbmZvcm1hdGlvbiBpbiB0aGUgZnVsbE5hbWUgZmllbGQuCgp0aGFua3MsCgpHbGVu
CgoyMDA4LzgvNyBTZXJnZXkgS2FiYXNobnl1ayA8a3NtbWxpc3RAZ21haWwuY29tPjoKPiBIZWxs
bwo+IEkgaGF2ZSAgc3VjaCAgZG9jdW1lbnQgICBzdHJ1Y3R1cmUKPiBkb2MxCj4gICAgIGlkICAg
ICAgIC0gMQo+ICAgICBwYXJlbnRpZCAtIDAKPiAgICAgbmFtZSAgLSAgICBzdGF0ZQo+IGRvYzIK
PiAgICAgaWQgICAgICAgLSAyCj4gICAgIHBhcmVudGlkIC0gMQo+ICAgICBuYW1lICAgICAtIGRl
cGFydG1lbnQKPiBkb2MzCj4gICAgIGlkICAgICAgIC0gMwo+ICAgICBwYXJlbnRpZCAtIDIKPiAg
ICAgbmFtZSAgICAg4oCTIEJvc3Rvbgo+IGRvYzQKPiAgICAgaWQgICAgICAgLSA0Cj4gICAgIHBh
cmVudGlkIC0gMgo+ICAgICBuYW1lICAgICDigJMgT3BlcmEKPiBkb2M1Cj4gICAgIGlkICAgICAg
IOKAkyA1Cj4gICAgIHBhcmVudGlkIOKAkyAxCj4gICAgIG5hbWUgICAgIC0gQ2hpY2Fnbwo+IGRv
YzYKPiAgICAgaWQgICAgICAgLSA2Cj4gICAgIHBhcmVudGlkIC0gNAo+ICAgICBuYW1lICAgICDi
gJMgTm92ZW1iZXIKPgo+IEFsbCBkb2N1bWVudCBhIGxpbmtlZCBieSBwYXJlbnRpZCA9IGlkIOKA
kyBvZiBwYXJlbnQgZG9jdW1lbnQuCj4gQnkgdGhpcyBsaW5rIGNhbiBiZSByZXRyaWV2ZWQgdGhl
IGZ1bGwgcGF0aCBvZiBkb2N1bWVudCwKPiBmb3IgZXhhbXBsZToKPiBkb2MzLS9zdGF0ZS9kZXBh
cnRtZW50L0Jvc3Rvbgo+IERvYzUgLSAvc3RhdGUvQ2hpY2Fnbwo+Cj4KPiBJIHdhbnQgdG8gaW1w
bGVtZW50IHNlYXJjaCBieSBwYXRoCj4gMS4gU2FtZSBwYXRoLCBmb3IgZXhhbXBsZTogL3N0YXRl
L2RlcGFydG1lbnQvQm9zdG9uIOKAkyByZXR1cm4gZG9jMwo+IDIuIENoaWxkIG9mIHRoZSBwYXRo
LCAgZm9yIGV4YW1wbGU6IC9zdGF0ZS9kZXBhcnRtZW50IOKAkyByZXR1cm4gZG9jMyxkb2M0Cj4g
My4gQWxsIGNoaWxkcyBvZiB0aGUgcGF0aCBmb3IgZXhhbXBsZTogL3N0YXRlL2RlcGFydG1lbnQg
LSByZXR1cm4KPiBkb2MzLGRvYzQsZG9jNgo+Cj4gSSBuZWVkIHRvIGFkdmljZSBob3cgdGhlIGJl
c3Qgd2F5IGl0IGNhbiBiZSBpbXBsZW1lbnRlZD8KPgo+IE1vdmluZyAgaXMgdmVyeSBvZnRlbiBv
cGVyYXRpb24gYW5kIHN0b3JpbmcgZnVsbCBwYXRoIGNhbiBjb3N0IHdpdGgKPiBhZGRpdGlvbmFs
IHVud2FudGVkIG9wZXJhdGlvbnMgYW5kIHRoZXJlZm9yZSBpdCdzIG5vdCBhIGRlc2lyYWJsZSBz
b2x1dGlvbgo+Cj4gU2VyZ2V5IEthYmFzaG55dWsKPiBlWG8gUGxhdGZvcm0gU0FTCj4KPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVA
bHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZh
LXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4KCgoKLS0gCgotCg==


From java-user-return-35376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 14:38:08 2008
Return-Path: <java-user-return-35376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69768 invoked from network); 7 Aug 2008 14:38:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 14:38:08 -0000
Received: (qmail 38718 invoked by uid 500); 7 Aug 2008 14:38:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38688 invoked by uid 500); 7 Aug 2008 14:38:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38671 invoked by uid 99); 7 Aug 2008 14:38:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 07:38:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 14:37:02 +0000
Received: by fg-out-1718.google.com with SMTP id l27so298421fgb.27
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 07:37:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:references:content-transfer-encoding
         :message-id:in-reply-to:user-agent;
        bh=nJ0xjHnBqAnLqlbQUxnJszGaw4x9UGakOj5Bx+x40tk=;
        b=tVh7AY6aZLdtX7ZzyVMiiZLIcjQQTXqgGSz4fODQWMlX4H1dvs2mXBULMrTmgOdFXb
         y9pwo7MGoCC3awtorUrElVUbWeC4hs0RTlI1pdAQis2xHaAaspRWD2gj+fDZaR3HJVGI
         zRalraAeFOJ/fVKwwL2Hn5Eu3Hie1YrWIAZ18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version:references
         :content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=rkBBvnOpXlqZxHZIsw5Fx+yDE9tKhXdwEuZM1ZU06h21tTrzemiDwBb2cJRQzb3cgQ
         98lgnPy1CK5uprZ8JAG7cDT3IqiCemwNOzsJf5ud2VUDpSJHjemt/1EelzfFWz8WeViw
         qC4DOV93FVAnXcphbPm7GbJaXrNwD2n2tqus8=
Received: by 10.86.96.18 with SMTP id t18mr1732848fgb.78.1218119831495;
        Thu, 07 Aug 2008 07:37:11 -0700 (PDT)
Received: from sj-desktop ( [92.112.165.218])
        by mx.google.com with ESMTPS id l19sm4574639fgb.7.2008.08.07.07.37.01
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 07 Aug 2008 07:37:05 -0700 (PDT)
Date: Thu, 07 Aug 2008 17:36:51 +0300
To: java-user@lucene.apache.org
Subject: Re: Tree search
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <op.ufipoulb2ic4zu@sj-desktop>
 <5e76f3840808070718u1edbb6a5q5e40690719e82d5@mail.gmail.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.ufitjpyj2ic4zu@sj-desktop>
In-Reply-To: <5e76f3840808070718u1edbb6a5q5e40690719e82d5@mail.gmail.com>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for you reply Glen

But I saw this solution before.

And as  I said before, moving  is very often operation and storing
full path can cost additional unwanted operations and therefore
it's not a desirable solution.

Sergey Kabashnyuk
eXo Platform SAS

> There are a number of ways to do this. Here is one:
> Lose the parentid field (unless you have other reasons to keep it).
> Add a field fullName, and a field called depth :
>
> doc1
> fullName: state
> depth: 0
>
> doc2
> fullName: state/department
> depth:1
>
> doc3
> fullName: state/department/Boston
> depth: 2
>
> doc4
> fullName: state/department/Opera
> depth: 2
>
> doc4
> fullName: state/Chicago
> depth: 1
>
> doc6
> fullName: state/department/Opera/November
> depth: 3
>
>> 1. Same path, for example: /state/department/Boston  return doc3
> query: fullName:+/state/department/Boston
>
>> 2. Child of the path,  for example: /state/department  return doc3,doc4
> query: fullName:+/state/department depth:+"1"
>
>> 3. All childs of the path for example: /state/department - return  
>> doc3,doc4,doc6
> query: fullName:+/state/department/
>
> Is this what you need?
> Depending on your use cases, there may be better ways of implementing  
> this.
>
> As this is not a relational db, we are not concerned (hopefully) with
> the replicated information in the fullName field.
>
> thanks,
>
> Glen
>
> 2008/8/7 Sergey Kabashnyuk <ksmmlist@gmail.com>:
>> Hello
>> I have  such  document   structure
>> doc1
>>     id       - 1
>>     parentid - 0
>>     name  -    state
>> doc2
>>     id       - 2
>>     parentid - 1
>>     name     - department
>> doc3
>>     id       - 3
>>     parentid - 2
>>     name      Boston
>> doc4
>>     id       - 4
>>     parentid - 2
>>     name      Opera
>> doc5
>>     id        5
>>     parentid  1
>>     name     - Chicago
>> doc6
>>     id       - 6
>>     parentid - 4
>>     name      November
>>
>> All document a linked by parentid = id  of parent document.
>> By this link can be retrieved the full path of document,
>> for example:
>> doc3-/state/department/Boston
>> Doc5 - /state/Chicago
>>
>>
>> I want to implement search by path
>> 1. Same path, for example: /state/department/Boston  return doc3
>> 2. Child of the path,  for example: /state/department  return doc3,doc4
>> 3. All childs of the path for example: /state/department - return
>> doc3,doc4,doc6
>>
>> I need to advice how the best way it can be implemented?
>>
>> Moving  is very often operation and storing full path can cost with
>> additional unwanted operations and therefore it's not a desirable  
>> solution
>>
>> Sergey Kabashnyuk
>> eXo Platform SAS
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 14:38:20 2008
Return-Path: <java-user-return-35377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69833 invoked from network); 7 Aug 2008 14:38:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 14:38:20 -0000
Received: (qmail 40350 invoked by uid 500); 7 Aug 2008 14:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40314 invoked by uid 500); 7 Aug 2008 14:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40300 invoked by uid 99); 7 Aug 2008 14:38:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 07:38:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.49.25.15] (HELO mail.crossview.com) (65.49.25.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 14:37:17 +0000
Received: from cv-exchange02.crossview.inc ([10.250.250.14]) by
 cv-exchangehub.crossview.inc ([10.250.250.15]) with mapi; Thu, 7 Aug 2008
 07:37:21 -0700
From: Alex Wang <awang@crossview.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 7 Aug 2008 07:37:18 -0700
Subject: RE: Lucene Concurrency Issue
Thread-Topic: Lucene Concurrency Issue
Thread-Index: Acj4luU8OsRYbWflQie8NCT7tdZbxgAA5CfA
Message-ID: <41636CE6C874E144AD623FB97DD0D1070D2167B57A@cv-exchange02.crossview.inc>
In-Reply-To: <85d3c3b60808070706k4a52cfdesf00a8c5afc2fb08f@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mark and Jason for your responses and your contrib to Lucene. I will=
 try to dig into them and incorporate the ideas into my app. Thanks again!

Alex


>-----Original Message-----
>From: Jason Rutherglen [mailto:jason.rutherglen@gmail.com]
>Sent: Thursday, August 07, 2008 10:07 AM
>To: java-user@lucene.apache.org
>Subject: Re: Lucene Concurrency Issue
>
>The contrib realtime search patch enables the functionality you described.
>https://issues.apache.org/jira/browse/LUCENE-1313
>
>On Wed, Aug 6, 2008 at 7:45 PM, Alex Wang <awang@crossview.com> wrote:
>
>>
>> Hi all,
>>
>> To allow mutilple users concurrently add, delete docs and at the same
>time
>> search the same index, what should I watch out for in terms of initing
>> indexreader, indexwriter and indexsearcher?
>>
>> My application is getting various IOException (seek failed, permission
>> denied, etc...) when concurrent add/delete/search happens. Is there any
>> general guidelines that you can share? Thanks in advance!
>>
>> Alex
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 15:54:17 2008
Return-Path: <java-user-return-35378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12943 invoked from network); 7 Aug 2008 15:54:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 15:54:17 -0000
Received: (qmail 64109 invoked by uid 500); 7 Aug 2008 15:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64080 invoked by uid 500); 7 Aug 2008 15:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64069 invoked by uid 99); 7 Aug 2008 15:54:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 08:54:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 15:53:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KR7o4-0001JG-5r
	for java-user@lucene.apache.org; Thu, 07 Aug 2008 08:53:40 -0700
Message-ID: <18873665.post@talk.nabble.com>
Date: Thu, 7 Aug 2008 08:53:40 -0700 (PDT)
From: DanaWhite <philrymek@comcast.net>
To: java-user@lucene.apache.org
Subject: Searching an Index on Another Machine
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: philrymek@comcast.net
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I have two machines on the same network, but I want to use one machine to
search an index located on the file system of the other machine.

Any ideas on how to achieve this?

Thanks
Dana
-- 
View this message in context: http://www.nabble.com/Searching-an-Index-on-Another-Machine-tp18873665p18873665.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 16:00:09 2008
Return-Path: <java-user-return-35379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14358 invoked from network); 7 Aug 2008 16:00:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 16:00:09 -0000
Received: (qmail 70411 invoked by uid 500); 7 Aug 2008 16:00:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69901 invoked by uid 500); 7 Aug 2008 16:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69889 invoked by uid 99); 7 Aug 2008 16:00:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 09:00:02 -0700
X-ASF-Spam-Status: No, hits=-6.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [204.152.235.220] (HELO l98upmt3.hewitt.com) (204.152.235.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 15:59:06 +0000
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98upmt3.hewitt.com (8.13.4/8.13.4) with ESMTP id m77FvjpG012359
	for <java-user@lucene.apache.org>; Thu, 7 Aug 2008 10:59:33 -0500 (CDT)
Received: from [10.20.63.62] by linkap11.hewitt.com with ESMTP (
 Tumbleweed MMS SMTP Relay); Thu, 07 Aug 2008 10:57:14 -0500
X-Server-Uuid: 1ECD4F55-CEAB-4214-8D4D-33C434273253
In-Reply-To: <OFA538075E.6B322D53-ON8625749C.00783311-8625749C.00792465@hewitt.com>
To: java-user@lucene.apache.org
Subject: Re: Paging & Sorting
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OFFB91CF40.B1B39F5D-ON8625749E.00576DE8-8625749E.0057A072@hewitt.com>
From: "Neeraj Gupta" <neeraj.gupta.2@hewitt.com>
Date: Thu, 7 Aug 2008 10:57:12 -0500
X-HANotesOU: Gurgaon
X-HASecureMessage: 0
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.6FP2|October 17, 2007) at 08/07/2008 10:57:14
 AM, Serialize complete at 08/07/2008 10:57:14 AM
X-WSS-ID: 6485C4D02SG24428765-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 0057A0668625749E_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0057A0668625749E_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

A Gentle Reminder! Any Solution around this problem?

Regards
-Neeraj




Thank  you for the reply, As you said

Sure, just iterate over the first 100 entries in your Hits object

It means before Iteration Lucene has already spent time and memory in 
finding all the 50k documents and sorting them, then i will retrieve 100 
documents. Hence it is costing me a search for 50k documents + sorting of 
these 50k matching documents + retrieval of first 100 documents.. Right?

But what i want is the way, to get the same result as per the above 
process but with not costing me to search and sort all 50K matching 
documents. is this possible?

Many Thx!
-Neeraj



"Erick Erickson" <erickerickson@gmail.com> 

08/05/2008 04:16 PM
Please respond to
java-user@lucene.apache.org



To
java-user@lucene.apache.org
cc

Subject
Re: Paging & Sorting






Sure, just iterate over the first 100 entries in your Hits object
(or topdocs).

If you're asking how to ignore 49,900 of your documents (that
is, not even consider them at all), you're asking the impossible
because you can't know whether to ignore those other docs
unless you sort them first.

If you're asking if you can get the 100 most relevant docs and
then sort only those, then you should look at FieldSortedHitQueue.
What you'd do is feed the top 100 documents into an instance
of FieldSortedHit queue then read traverse the queue.

If none of this applies, could you explain in a bit more detail?

Best
Erick

On Tue, Aug 5, 2008 at 4:35 PM, Neeraj Gupta 
<neeraj.gupta.2@hewitt.com>wrote:

> Hi,
>
> I need first 100 documents in a sorted order lets say sorted on the
> document id and there are more then 50K documents in the index. My 
search
> query is matching all those 50K documents. Is there any way to get only
> first 100 documents that too in a sorted order of document id. I mean
> Lucene will only give out those 100 documents?
>
> Many Thx!









The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient is strictly prohibited. All messages sent to and from this e-mail address may be monitored as permitted by applicable law and regulations to ensure compliance with our internal policies and to protect our business. E-mails are not secure and cannot be guaranteed to be error free as they can be intercepted, amended, lost or destroyed, or contain viruses. You are deemed to have accepted these risks if you communicate with us by e-mail. 



--=_alternative 0057A0668625749E_=--


From java-user-return-35380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 16:09:12 2008
Return-Path: <java-user-return-35380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16536 invoked from network); 7 Aug 2008 16:09:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 16:09:12 -0000
Received: (qmail 79194 invoked by uid 500); 7 Aug 2008 16:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79163 invoked by uid 500); 7 Aug 2008 16:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79152 invoked by uid 99); 7 Aug 2008 16:09:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 09:09:04 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 16:08:06 +0000
Received: by nf-out-0910.google.com with SMTP id g16so193599nfd.15
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 09:08:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=/1wDDLRB5vqrkJZ8Cf3P1rBmR/DbPPJpmYIC8aEGw8g=;
        b=cjS1vIhH0Q1avsoazM2xaV1hiFS7JlLFHv1kaOE5y+OT5nDyvbkkRW1u43PZciPaCg
         VPNZBqVs5WNcz8fZyrj6SJVMuuiwEx1Tgvp/WGlfaC52RCVpWxQlKfD3sZ8VuJUD8uzW
         V0IeZsRYtkfNWAjXPewVSmMWz/066bSWghqzs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=NyIBy7g8N1Zh1oj1h0HCgmAZrmeD8p4Q5PKJxX0MUo9HBBqX2Z1xd/eKRfT3HOL79r
         fVL1VIeoiL4G5ScZCn0q/9KAMvGxwdH9wVC4JAfJ113FAaFVi0MLOOJlAN5b2J1D4xiy
         /ArDT5jxJhM+hVTU+csOpb9Ggqu3p4cXSHBUk=
Received: by 10.210.119.5 with SMTP id r5mr4216997ebc.17.1218125313138;
        Thu, 07 Aug 2008 09:08:33 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Thu, 7 Aug 2008 09:08:33 -0700 (PDT)
Message-ID: <59a485a30808070908i417de1edl2761c047c2156214@mail.gmail.com>
Date: Thu, 7 Aug 2008 21:38:33 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching an Index on Another Machine
In-Reply-To: <18873665.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18873665.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I guess the starting point would be to have the IndexSearcher to take
a URI as the path to index (I don't think such a constructor exists)
than the ones currently available. This might also call for some
security policy to be in place to restrict access.

Otherwise, J2EE perhaps ?

Good question !

On 8/7/08, DanaWhite <philrymek@comcast.net> wrote:
>
> Hello,
>
> I have two machines on the same network, but I want to use one machine to
> search an index located on the file system of the other machine.
>
> Any ideas on how to achieve this?
>
> Thanks
> Dana
> --
> View this message in context:
> http://www.nabble.com/Searching-an-Index-on-Another-Machine-tp18873665p18873665.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 16:36:20 2008
Return-Path: <java-user-return-35381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24514 invoked from network); 7 Aug 2008 16:36:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 16:36:20 -0000
Received: (qmail 20417 invoked by uid 500); 7 Aug 2008 16:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20378 invoked by uid 500); 7 Aug 2008 16:36:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20367 invoked by uid 99); 7 Aug 2008 16:36:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 09:36:12 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 16:35:15 +0000
Received: by wf-out-1314.google.com with SMTP id 28so433518wfc.20
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 09:35:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=TYAPOzdhqie2OMzR/eronxGjWfgD3kX9oSRY+ly5JAw=;
        b=nPup5yn8jg2tAubV41kRBckDdm9NFVGf/g7f8iBglGUzUUbfNi9Ytk+cLTrLXaKzMh
         UBwTGxgUZ3T1Mr22bNMmjMxG2XXqrQlnIaQhNkgU9zb/B0lTAToZN8PwVjl/wnKQHGS9
         rn5ufbqm6TO6Dto2b+sSnszWczVfXiXqqwffo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Wz0ago7xKu01xYo9uAfZSPZ/hanZOF7Ec/MIFrM0FN+AFss3dkPmTVDvR7rzMSIA67
         Kq7lREwwWdXy9VDb5S4n4eNGsqvPG4WdE7IJ1r+xfsQyd70YJlQevnmaJ/7EIT8hVyDD
         7XmrD/l0KH3JhsMPo1plJCcniqvRST9/XVREM=
Received: by 10.143.155.7 with SMTP id h7mr548834wfo.16.1218126926305;
        Thu, 07 Aug 2008 09:35:26 -0700 (PDT)
Received: by 10.143.29.10 with HTTP; Thu, 7 Aug 2008 09:35:26 -0700 (PDT)
Message-ID: <11975c90808070935gad501f8m6ee7d4f95971ad50@mail.gmail.com>
Date: Thu, 7 Aug 2008 20:35:26 +0400
From: "Alexander Aristov" <alexander.aristov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching an Index on Another Machine
In-Reply-To: <18873665.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50233_22299395.1218126926290"
References: <18873665.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50233_22299395.1218126926290
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

Mount the file system of that machine to another one as a network share. But
I don;t think it would be optimal.

Alexander

2008/8/7 DanaWhite <philrymek@comcast.net>

>
> Hello,
>
> I have two machines on the same network, but I want to use one machine to
> search an index located on the file system of the other machine.
>
> Any ideas on how to achieve this?
>
> Thanks
> Dana
> --
> View this message in context:
> http://www.nabble.com/Searching-an-Index-on-Another-Machine-tp18873665p18873665.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best Regards
Alexander Aristov

------=_Part_50233_22299395.1218126926290--

From java-user-return-35382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 16:38:10 2008
Return-Path: <java-user-return-35382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25885 invoked from network); 7 Aug 2008 16:38:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 16:38:09 -0000
Received: (qmail 24273 invoked by uid 500); 7 Aug 2008 16:38:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24234 invoked by uid 500); 7 Aug 2008 16:38:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24223 invoked by uid 99); 7 Aug 2008 16:38:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 09:38:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 16:37:07 +0000
Received: by py-out-1112.google.com with SMTP id z74so376216pyg.9
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 09:37:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=86s7pVomI2jRWzpcjb4V1GDQCY8OUK2UNgN4wrwW9yM=;
        b=IUNWJXLooRltZf08IpTuc6jqEqYI0Tt9rjPyoZpmWTzcjMh/xtjBHVP16c0ySuaBMe
         RLqhghB8BqlOUG8cOESXa3zcAMO9nOVz0cV2Qx0vNh2DCBhwEJnAPmfuc6bOt8vCWYHa
         IwdtjXYyoXc0sLHn1ceGYiZqwWfSgTJakBGSE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=s1ODAbhm0nEYsQftEU3EZhej6W7zjyrsLFSAf0jdfyLnSyuQLWrBkB2WAAOO2UaKZN
         0cPMhJq/G8/Lu5S8qzcfBd+p3uZwhKMmMbKaBcLTFiNQu8DLH8VnOrzG9c/mXAb1XpFE
         TaSVyLH3Fr7ybii2OjBwB3CJf5s5NvHBqUKwo=
Received: by 10.141.29.18 with SMTP id g18mr790238rvj.298.1218127036348;
        Thu, 07 Aug 2008 09:37:16 -0700 (PDT)
Received: by 10.140.172.6 with HTTP; Thu, 7 Aug 2008 09:37:16 -0700 (PDT)
Message-ID: <c68e39170808070937p7f7a2a8fo2607f232392b35e7@mail.gmail.com>
Date: Thu, 7 Aug 2008 12:37:16 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Paging & Sorting
In-Reply-To: <OFFB91CF40.B1B39F5D-ON8625749E.00576DE8-8625749E.0057A072@hewitt.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <OFA538075E.6B322D53-ON8625749C.00783311-8625749C.00792465@hewitt.com>
	 <OFFB91CF40.B1B39F5D-ON8625749E.00576DE8-8625749E.0057A072@hewitt.com>
X-Google-Sender-Auth: d409c62bdadfc748
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Aug 7, 2008 at 11:57 AM, Neeraj Gupta <neeraj.gupta.2@hewitt.com> wrote:
> A Gentle Reminder! Any Solution around this problem?

Lucky you, it's already been solved :-)

Seriously though, I think you are making some incorrect assumptions
about how Lucene works.  Lucene does not retrieve all 50K documents...
but it does *score* those documents and only keeps track of the top
ones (by id), and then only retrieves the whole document for only
those you ask for.

-Yonik

> Regards
> -Neeraj
>
>
>
>
> Thank  you for the reply, As you said
>
> Sure, just iterate over the first 100 entries in your Hits object
>
> It means before Iteration Lucene has already spent time and memory in
> finding all the 50k documents and sorting them, then i will retrieve 100
> documents. Hence it is costing me a search for 50k documents + sorting of
> these 50k matching documents + retrieval of first 100 documents.. Right?
>
> But what i want is the way, to get the same result as per the above
> process but with not costing me to search and sort all 50K matching
> documents. is this possible?
>
> Many Thx!
> -Neeraj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 17:01:51 2008
Return-Path: <java-user-return-35383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31609 invoked from network); 7 Aug 2008 17:01:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 17:01:50 -0000
Received: (qmail 49793 invoked by uid 500); 7 Aug 2008 17:01:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49764 invoked by uid 500); 7 Aug 2008 17:01:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49753 invoked by uid 99); 7 Aug 2008 17:01:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 10:01:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.128] (HELO web28108.mail.ukl.yahoo.com) (217.146.182.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Aug 2008 17:00:43 +0000
Received: (qmail 97115 invoked by uid 60001); 7 Aug 2008 17:00:08 -0000
Received: from [212.99.51.254] by web28108.mail.ukl.yahoo.com via HTTP; Thu, 07 Aug 2008 17:00:08 GMT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Thu, 7 Aug 2008 17:00:08 +0000 (GMT)
From: renou oki <yodapoubelle@yahoo.fr>
Subject: Re : Stop search process when a given number of hits is reached
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-968986539-1218128408=:95954"
Message-ID: <801741.95954.qm@web28108.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-968986539-1218128408=:95954
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Thanks a lot for your responses...=0A=0AI have tried the HitCollector and t=
hrow an exception when the limit of hits is reached...=0AIt works fine and =
the search time is really reduce when there is a lot of docs which are matc=
hing the query...=0A=0AI did that :=0A=0Apublic class CountCollector extend=
s HitCollector{=0A    public int cpt;=0A    private int _maxHit;=0A    publ=
ic CountCollector(int maxHit)=0A    {=0A        cpt =3D 0;=0A        _maxHi=
t =3D maxHit=0A    }=0A    public void collect(int arg0, float arg1) =0A   =
 {=0A        cpt++;=0A        if (cpt > _max_Hit)=0A        {=0A           =
 throw new LimitIsReachedException();=0A        }=0A    }=0A}=0A=0AWith a s=
imple try catch, I catch the exception, and display "cpt" (the counter)...=
=0A=0ABest regards=0A=0A=0A=0A=0A=0A----- Message d'origine ----=0ADe : And=
rzej Bialecki <ab@getopt.org>=0A=C3=80 : java-user@lucene.apache.org=0AEnvo=
y=C3=A9 le : Jeudi, 7 Ao=C3=BBt 2008, 14h29mn 31s=0AObjet : Re: Stop search=
 process when a given number of hits is reached=0A=0ADoron Cohen wrote:=0A>=
 Nothing built in that I'm aware of will do this, but it can be done by=0A>=
 searching with your own HitCollector.=0A> There is a related feature - sto=
p search after a specified time - using=0A> TimeLimitedCollector.=0A> It is=
 not released yet, see issue LUCENE-997.=0A> In short, the collector's coll=
ect() method is invoked in the search process=0A> for each matching documen=
t.=0A> Once 500 docs were collected, your collector can cause the search to=
 stop by=0A> throwing an exception.=0A> Upon catching the exception you kno=
w that 500 docs were collected.=0A=0ATwo additional comments:=0A=0A* the to=
pN results from such incomplete search may be way off, if there =0Awere som=
e high scoring documents somewhere beyond the limit.=0A=0A* if you know tha=
t there are more important and less important documents =0Ain your corpus, =
and their relative weight is independent of the query =0A(e.g. PageRank-typ=
e score), then you can restructure your index so that =0Apostings belonging=
 to highly-scoring documents come first on the posting =0Alists - this way =
you have a better chance to collect highly relevant =0Adocuments first, eve=
n though the search is incomplete. You can find an =0Aimplementation of thi=
s concept in Nutch =0A(org.apache.nutch.indexer.IndexSorter).=0A=0A-- =0ABe=
st regards,=0AAndrzej Bialecki     <><=0A  ___. ___ ___ ___ _ _   _________=
_________________________=0A[__ || __|__/|__||\/|  Information Retrieval, S=
emantic Web=0A___|||__||  \|  ||  |  Embedded Unix, System Integration=0Aht=
tp://www.sigram.com  Contact: info at sigram dot com=0A=0A=0A--------------=
-------------------------------------------------------=0ATo unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e=
-mail: java-user-help@lucene.apache.org=0A=0A=0A      _____________________=
________________________________________________________ =0AEnvoyez avec Ya=
hoo! Mail. Une boite mail plus intelligente http://mail.yahoo.fr
--0-968986539-1218128408=:95954--

From java-user-return-35384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 19:49:09 2008
Return-Path: <java-user-return-35384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4352 invoked from network); 7 Aug 2008 19:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 19:49:09 -0000
Received: (qmail 13752 invoked by uid 500); 7 Aug 2008 19:49:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13722 invoked by uid 500); 7 Aug 2008 19:49:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13708 invoked by uid 99); 7 Aug 2008 19:49:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 12:49:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 19:48:05 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Thu, 7 Aug 2008 15:45:51 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 7 Aug 2008 15:44:53 -0400
Subject: updating existing field values
Thread-Topic: updating existing field values
Thread-Index: Acj4xg/Adp4SJ7liQAeaRhR3L7qxLA==
Message-ID: <36B4EF9511887240A973A93E7878B0560A079FD108@US1-IIEX1.IICORP.DOM>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_36B4EF9511887240A973A93E7878B0560A079FD108US1IIEX1IICOR_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_36B4EF9511887240A973A93E7878B0560A079FD108US1IIEX1IICOR_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Given an existing index, is there any way to update the value of a particul=
ar field across all documents, without deleting/re-indexing documents?  For=
 instance, if I have a date field, and I need to offset all dates based on =
change to stored time zone (subtract 12 hours from each value).  The sort o=
rder of field values would not change, and the postings should not need to =
change, only values of fields.  I do not believe there is any API to do it,=
 but is there some lower level way to do it (modifying files manually)?  I =
only ask because I have a large index and I don't want to re-index all docu=
ments.

--_000_36B4EF9511887240A973A93E7878B0560A079FD108US1IIEX1IICOR_--

From java-user-return-35385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 20:52:22 2008
Return-Path: <java-user-return-35385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38134 invoked from network); 7 Aug 2008 20:52:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 20:52:21 -0000
Received: (qmail 18041 invoked by uid 500); 7 Aug 2008 20:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18005 invoked by uid 500); 7 Aug 2008 20:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17994 invoked by uid 99); 7 Aug 2008 20:52:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 13:52:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 20:51:15 +0000
Received: from [192.168.1.101] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m77KpvR17569
	for <java-user@lucene.apache.org>; Thu, 7 Aug 2008 15:51:57 -0500
Message-ID: <489B6058.4000800@getopt.org>
Date: Thu, 07 Aug 2008 22:51:36 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: updating existing field values
References: <36B4EF9511887240A973A93E7878B0560A079FD108@US1-IIEX1.IICORP.DOM>
In-Reply-To: <36B4EF9511887240A973A93E7878B0560A079FD108@US1-IIEX1.IICORP.DOM>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Robert Stewart wrote:
> Given an existing index, is there any way to update the value of a
> particular field across all documents, without deleting/re-indexing
> documents?  For instance, if I have a date field, and I need to
> offset all dates based on change to stored time zone (subtract 12
> hours from each value).  The sort order of field values would not
> change, and the postings should not need to change, only values of
> fields.  I do not believe there is any API to do it, but is there
> some lower level way to do it (modifying files manually)?  I only ask
> because I have a large index and I don't want to re-index all
> documents.


Perhaps you could do this using FilterIndexReader implementation, i.e. 
wrap your original index within this filter and then invoke 
IndexWriter.addIndexes(IndexReader[]). If you override 
FilterIndexReader.document(int, FieldSelector), which retrieves the 
stored fields of a document, then you can change the values of stored 
fields only, just before they are added to the new index. Note that this 
works ONLY for non-indexed fields that are stored (i.e. Store.YES, 
Index.NO) - if a field is both stored and indexed then you need to 
modify the postings too, which requires overriding other methods.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 07 22:27:42 2008
Return-Path: <java-user-return-35386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89058 invoked from network); 7 Aug 2008 22:27:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2008 22:27:41 -0000
Received: (qmail 57881 invoked by uid 500); 7 Aug 2008 22:27:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57844 invoked by uid 500); 7 Aug 2008 22:27:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57833 invoked by uid 99); 7 Aug 2008 22:27:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 15:27:33 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 22:26:34 +0000
Received: by wr-out-0506.google.com with SMTP id c30so643381wra.21
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 15:26:59 -0700 (PDT)
Received: by 10.90.83.18 with SMTP id g18mr5647875agb.76.1218148019701;
        Thu, 07 Aug 2008 15:26:59 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 36sm574067aga.10.2008.08.07.15.26.58
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 07 Aug 2008 15:26:59 -0700 (PDT)
Message-Id: <734753BF-D110-43ED-B1CE-A3AE80F3655A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <489B6058.4000800@getopt.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: updating existing field values
Date: Thu, 7 Aug 2008 18:26:58 -0400
References: <36B4EF9511887240A973A93E7878B0560A079FD108@US1-IIEX1.IICORP.DOM> <489B6058.4000800@getopt.org>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It's also possible to create your own code that uses FieldsReader and  
FieldsWriter (both in org.apache.lucene.index) directly to create new  
fdx/fdt files, with the date fixed on each document.  You'd have to  
enumerate over all segments in your index, create a FieldsReader  
instance on each, create a FieldsWriter writing to a new segment name,  
iterate through the docs fixing your date, calling  
FieldsWriter.writeField per field then flushDocument to finish the  
document.

I think that should work, but I've never tried it!

Your code would have to be in org.apache.lucene.index since these  
classes are package private.

Mike

Andrzej Bialecki wrote:

> Robert Stewart wrote:
>> Given an existing index, is there any way to update the value of a
>> particular field across all documents, without deleting/re-indexing
>> documents?  For instance, if I have a date field, and I need to
>> offset all dates based on change to stored time zone (subtract 12
>> hours from each value).  The sort order of field values would not
>> change, and the postings should not need to change, only values of
>> fields.  I do not believe there is any API to do it, but is there
>> some lower level way to do it (modifying files manually)?  I only ask
>> because I have a large index and I don't want to re-index all
>> documents.
>
>
> Perhaps you could do this using FilterIndexReader implementation,  
> i.e. wrap your original index within this filter and then invoke  
> IndexWriter.addIndexes(IndexReader[]). If you override  
> FilterIndexReader.document(int, FieldSelector), which retrieves the  
> stored fields of a document, then you can change the values of  
> stored fields only, just before they are added to the new index.  
> Note that this works ONLY for non-indexed fields that are stored  
> (i.e. Store.YES, Index.NO) - if a field is both stored and indexed  
> then you need to modify the postings too, which requires overriding  
> other methods.
>
> -- 
> Best regards,
> Andrzej Bialecki     <><
> ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 00:04:49 2008
Return-Path: <java-user-return-35387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45681 invoked from network); 8 Aug 2008 00:04:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 00:04:49 -0000
Received: (qmail 61186 invoked by uid 500); 8 Aug 2008 00:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61163 invoked by uid 500); 8 Aug 2008 00:04:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61147 invoked by uid 99); 8 Aug 2008 00:04:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 17:04:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 00:03:46 +0000
Received: by yw-out-2324.google.com with SMTP id 3so339968ywj.5
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 17:04:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=ug8grPi1NoDfzanmp0PJJRPVXAaa2FwrAcH1pYQrzYo=;
        b=jM6q3hVGM49oDvRGT7ewQK6KRofgas8Bo+l8mXP+sbDK0mnStdcv5hyDytKqNjKw9Q
         4630cMeE3VAg12QK4nf4EQS7iiNxl1fjYbeCtDmOpE4LQh4Orz266jNAOfUS8lgMrfZI
         VFQ9xHaia3rzALN05rTL6QP+6KMJTjYUSqlyg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=IRyyZrJFjvgKaCK5TcbEidK20Da+bVC3t4uQOCq3GUsiyObgYRYwkroJ0Dq06Ty5WG
         wJy7WxKs3q12k49zQpbslH4OaMZ2vexecLzWzhyPstVeOU4GGOPSUrYXBav7zmBtKgEN
         WGCocAprtW5w4ZXXzG0KdH9i6THMwAB3LZVzM=
Received: by 10.150.51.6 with SMTP id y6mr6291703yby.5.1218153844117;
        Thu, 07 Aug 2008 17:04:04 -0700 (PDT)
Received: by 10.151.98.15 with HTTP; Thu, 7 Aug 2008 17:04:04 -0700 (PDT)
Message-ID: <efd1bd310808071704r21aa34a0o703a832a33d06863@mail.gmail.com>
Date: Thu, 7 Aug 2008 17:04:04 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching Tokenized x Un_tokenized
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

When I switched a String field from tokenized to untokenized, some
searches started not returning some obvious values. Am I missing
something on querying untokenized fields? Another question is, do I
need an Analyzer if my search is on an Untokenized field, wouldn't the
search be based on the full String rather than its tokens?

Thanks,


Andre

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 02:13:20 2008
Return-Path: <java-user-return-35388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30375 invoked from network); 8 Aug 2008 02:13:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 02:13:20 -0000
Received: (qmail 68080 invoked by uid 500); 8 Aug 2008 02:13:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68046 invoked by uid 500); 8 Aug 2008 02:13:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68019 invoked by uid 99); 8 Aug 2008 02:13:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 19:13:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 02:12:15 +0000
Received: by fg-out-1718.google.com with SMTP id l27so492696fgb.27
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 19:12:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=qsGiRL/2TtqBbvG2O/VBUjdg+XBpWZ+0golvSZly1NU=;
        b=MHHqKguViPrHaERySEw387p7+1rOtGXT/1qw3fsdSULCfMM7dyGEdQGwoFe1xf1ChA
         LEY7wZPNhCStTMhv1vWI0uC7xGVmk2LN4NNEELTs9mjMwdQluHSJ+m6EmYnA21EUSv8P
         ogXkL6A7vGKBJM0ntVDlSXKns4mQfNNvigUP8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=vpvLjToSjyoGW66X7ZSipglABO6FfGlnHapv83wYYrxmvghAWlt1o2s/tpkEL/XSf3
         IO2Q8yYsJn1SaEwsXBl6xFlu4ucC65LUpK3UebugeXwO1b7YDxu8F8VuVz+O5m5Vfc5u
         f+PKTdLpvGK/uLSK8+uVmYA+/YonXicPmRVz8=
Received: by 10.103.225.11 with SMTP id c11mr2623251mur.32.1218161560752;
        Thu, 07 Aug 2008 19:12:40 -0700 (PDT)
Received: by 10.103.175.13 with HTTP; Thu, 7 Aug 2008 19:12:40 -0700 (PDT)
Message-ID: <a823853a0808071912t2b62e6c1r5bf21232466f4cc0@mail.gmail.com>
Date: Fri, 8 Aug 2008 11:12:40 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: merge Index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24450_9769760.1218161560750"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24450_9769760.1218161560750
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

aGksCkkgYW0gdXNpbmcgUmFtRGlyZWN0b3J5IGFuZCBGU0RpcmVjdG9yeSBmb3IgaW5kZXhpbmcg
ZG9jdW1lbnRzLgpJIHVzZSBSYW1EaXJlY3RvcnkgYXMgQnVmZmVyLgoKRm9yIGV4YW1wbGUsCi0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tClN0cmluZyBpbmRleERpciA9ICJkOi9s
dWNlbmVfZGF0YS9tZXJnZV90ZXN0X2luZGV4IjsKQW5hbHl6ZXIgYW5hbHl6ZXIgID0gbmV3IFN0
b3BBbmFseXplcigpOwoKUkFNRGlyZWN0b3J5IHJhbURpciAgICA9IG5ldyBSQU1EaXJlY3Rvcnko
KTsKSW5kZXhXcml0ZXIgIHJhbVdyaXRlciA9IG5ldyBJbmRleFdyaXRlcihyYW1EaXIsIGFuYWx5
emVyLCB0cnVlKTsKCmZvciAoaW50IGkgPSAwOyBpIDwgMTAwMDA7IGkrKykgewogICAgICAgICAg
IERvY3VtZW50IGRvYyA9IG5ldyBEb2N1bWVudCgpOwogICAgICAgICAgIGRvYy5hZGQobmV3IEZp
ZWxkKCJpZCIsICJ0ZXN0IGlkIitpLCBGaWVsZC5TdG9yZS5ZRVMsCkZpZWxkLkluZGV4LlRPS0VO
SVpFRCwgRmllbGQuVGVybVZlY3Rvci5XSVRIX1BPU0lUSU9OU19PRkZTRVRTKSk7CiAgICAgICAg
ICAgIHdyaXRlci5hZGREb2N1bWVudChkb2MpOwp9CgoKSW5kZXhXcml0ZXIgZnNXcml0ZXIgICA9
IG5ldyBJbmRleFdyaXRlcihpbmRleERpciwgYW5hbHl6ZXIsIHRydWUpOwpmc1dyaXRlci5hZGRJ
bmRleGVzKG5ldyBEaXJlY3RvcnlbXSB7IHJhbURpciB9KTsKcmFtV3JpdGVyLmNsb3NlKCk7CmZz
V3JpdGVyLmNsb3NlKCk7Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKSSBr
bm93IEluZGV4V3JpdGVyLmFkZEluZGV4ZXMoRGlyZWN0b3J5W10gZGlyKSBtZXRob2QgY2FuIG1l
cmdlIG90aGVyCmluZGV4ZXMuCgpCdXQsIHdoZW4gSSBleGVjdXRlIG15IHByb2dyYW0sIGp1c3Qg
MiBmaWxlcyBhcmUgY3JlYXRlZCBpbiBpbmRleCBkaXJlY3RvcnkuCihzZWdtZW50cy5nZW4gYW5k
IHNlZ21lbnRzXzQpCkFuZCB3aGVuIEkgb3BlbiB3aXRoIExVS0UgdGhlIGluZGV4IHRoZW4gbWVl
dCBlcnJvciAsIEl0J3MgYmFkIGluZGV4IGZpbGUuCgpXaGF0J3Mgd3JvbmcgYWJvdXQgdGhhdCBj
b2RlLi4/Ckl0J3MgYWxtb3N0IHNhbWUgYXMgc2FtcGxlIHNvdXJjZSBjb2RlIG9uIGJvb2suIEkg
Y2FuJ3QgZmluZCBhbnkgcmVhc29uLgoKUGxlYXNlIGxldCBtZSBrbm93IHdoYXQgaXMgd3Jvbmcu
CgpUaGFuayB5b3UuCgoKLS0gCkRFVr/rvcQKaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5jb20K
------=_Part_24450_9769760.1218161560750--

From java-user-return-35389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 02:27:45 2008
Return-Path: <java-user-return-35389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38013 invoked from network); 8 Aug 2008 02:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 02:27:45 -0000
Received: (qmail 77661 invoked by uid 500); 8 Aug 2008 02:27:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77619 invoked by uid 500); 8 Aug 2008 02:27:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77608 invoked by uid 99); 8 Aug 2008 02:27:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 19:27:38 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 02:26:40 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id 7B3D2129B2A
	for <java-user@lucene.apache.org>; Thu,  7 Aug 2008 19:27:07 -0700 (PDT)
Message-Id: <91185D33-6E72-4FD7-8BA7-CE73D5AEC4D0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <a823853a0808071912t2b62e6c1r5bf21232466f4cc0@mail.gmail.com>
Content-Type: text/plain; charset=EUC-KR; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: merge Index
Date: Thu, 7 Aug 2008 22:27:06 -0400
References: <a823853a0808071912t2b62e6c1r5bf21232466f4cc0@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene does this RAM/FS stuff seamlessly for you in the background.  =20
Just open the FSDirectory and do your indexing.  If I had to guess, =20
though, from a quick glance, I think you should do the addIndexes =20
after the ramWriter close, but that's just a guess, as I haven't tried =20=

it.

-Grant

On Aug 7, 2008, at 10:12 PM, =C0=E5=BF=EB=BC=AE wrote:

> hi,
> I am using RamDirectory and FSDirectory for indexing documents.
> I use RamDirectory as Buffer.
>
> For example,
> -----------------------------------
> String indexDir =3D "d:/lucene_data/merge_test_index";
> Analyzer analyzer  =3D new StopAnalyzer();
>
> RAMDirectory ramDir    =3D new RAMDirectory();
> IndexWriter  ramWriter =3D new IndexWriter(ramDir, analyzer, true);
>
> for (int i =3D 0; i < 10000; i++) {
>           Document doc =3D new Document();
>           doc.add(new Field("id", "test id"+i, Field.Store.YES,
> Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS_OFFSETS));
>            writer.addDocument(doc);
> }
>
>
> IndexWriter fsWriter   =3D new IndexWriter(indexDir, analyzer, true);
> fsWriter.addIndexes(new Directory[] { ramDir });
> ramWriter.close();
> fsWriter.close();
> ------------------------------------
>
> I know IndexWriter.addIndexes(Directory[] dir) method can merge other
> indexes.
>
> But, when I execute my program, just 2 files are created in index =20
> directory.
> (segments.gen and segments_4)
> And when I open with LUKE the index then meet error , It's bad index =20=

> file.
>
> What's wrong about that code..?
> It's almost same as sample source code on book. I can't find any =20
> reason.
>
> Please let me know what is wrong.
>
> Thank you.
>
>
> --=20
> DEV=BF=EB=BD=C4
> http://devyongsik.tistory.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 02:48:55 2008
Return-Path: <java-user-return-35390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44822 invoked from network); 8 Aug 2008 02:48:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 02:48:55 -0000
Received: (qmail 87623 invoked by uid 500); 8 Aug 2008 02:48:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87588 invoked by uid 500); 8 Aug 2008 02:48:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87577 invoked by uid 99); 8 Aug 2008 02:48:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 19:48:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 02:47:50 +0000
Received: by fg-out-1718.google.com with SMTP id l27so500337fgb.27
        for <java-user@lucene.apache.org>; Thu, 07 Aug 2008 19:48:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6S/dqdCwvX9c42T0uuRHxI2HQdSoriJFRHC9UHC4y6A=;
        b=ZdrOZLNYMAda8nopBAjgbvOwpIRWqlwUOv6H/T8Fpc7GKyBWWu8uQnclbUoypz+YAp
         a04kqgmNUcL6IZmshEmNqPKW01vC2NUHSX9J2leXo3CPP6lg+u1dNjcdoQZfEi0Un8gz
         CbPDEzOuJNEIKXke1mOYh4I4APxhN8FWsaGYw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qKLAQiZPrLPnXfIjfQbqS8mJ45Zv9Lqio8n67Avvmgoe+VW9ogz73ukxIYgta8d1Pr
         +EtJOq8f0UWplwpOI2n/xgGNI6xevnZa5NiLOTwdO+73/RKSgWcA+mgQUnNv86UelzPj
         Frw1pyOVLeGdBVKVYyXNXNZb5d3KJaEJSquvA=
Received: by 10.103.176.2 with SMTP id d2mr2637072mup.112.1218163694941;
        Thu, 07 Aug 2008 19:48:14 -0700 (PDT)
Received: by 10.103.175.13 with HTTP; Thu, 7 Aug 2008 19:48:14 -0700 (PDT)
Message-ID: <a823853a0808071948u38287800x5183ef8c5018fd7b@mail.gmail.com>
Date: Fri, 8 Aug 2008 11:48:14 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: merge Index
In-Reply-To: <91185D33-6E72-4FD7-8BA7-CE73D5AEC4D0@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24669_23991265.1218163694915"
References: <a823853a0808071912t2b62e6c1r5bf21232466f4cc0@mail.gmail.com>
	 <91185D33-6E72-4FD7-8BA7-CE73D5AEC4D0@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24669_23991265.1218163694915
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmsgeW91IGZvciB5b3VyIHJlcGx5LiA6KQpZb3UgYXJlIGNvcnJlY3QuCgpJIGRpZCBydW4g
YWRkSW5kZXhlcyBtZXRob2QgYWZ0ZXIgdGhlIHJhbVdyaXRlciBjb2xzZS4KQW5kIEl0IGlzIGdv
b2Qgd29ya2luZyBhbmQgY3JlYXRlIGNvcnJlY3QgaW5kZXggZmlsZS4KClRoYW5rIHlvdSB2ZXJ5
IG11Y2guCgpKYW5nLgoKCjA4LiA4LiA4LCBHcmFudCBJbmdlcnNvbGwgPGdzaW5nZXJzQGFwYWNo
ZS5vcmc+tNTAzCDA27y6Ogo+Cj4gTHVjZW5lIGRvZXMgdGhpcyBSQU0vRlMgc3R1ZmYgc2VhbWxl
c3NseSBmb3IgeW91IGluIHRoZSBiYWNrZ3JvdW5kLiAgSnVzdAo+IG9wZW4gdGhlIEZTRGlyZWN0
b3J5IGFuZCBkbyB5b3VyIGluZGV4aW5nLiAgSWYgSSBoYWQgdG8gZ3Vlc3MsIHRob3VnaCwgZnJv
bQo+IGEgcXVpY2sgZ2xhbmNlLCBJIHRoaW5rIHlvdSBzaG91bGQgZG8gdGhlIGFkZEluZGV4ZXMg
YWZ0ZXIgdGhlIHJhbVdyaXRlcgo+IGNsb3NlLCBidXQgdGhhdCdzIGp1c3QgYSBndWVzcywgYXMg
SSBoYXZlbid0IHRyaWVkIGl0Lgo+Cj4gLUdyYW50Cj4KPiBPbiBBdWcgNywgMjAwOCwgYXQgMTA6
MTIgUE0sIMDlv+u8riB3cm90ZToKPgo+IGhpLAo+PiBJIGFtIHVzaW5nIFJhbURpcmVjdG9yeSBh
bmQgRlNEaXJlY3RvcnkgZm9yIGluZGV4aW5nIGRvY3VtZW50cy4KPj4gSSB1c2UgUmFtRGlyZWN0
b3J5IGFzIEJ1ZmZlci4KPj4KPj4gRm9yIGV4YW1wbGUsCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCj4+IFN0cmluZyBpbmRleERpciA9ICJkOi9sdWNlbmVfZGF0YS9tZXJn
ZV90ZXN0X2luZGV4IjsKPj4gQW5hbHl6ZXIgYW5hbHl6ZXIgID0gbmV3IFN0b3BBbmFseXplcigp
Owo+Pgo+PiBSQU1EaXJlY3RvcnkgcmFtRGlyICAgID0gbmV3IFJBTURpcmVjdG9yeSgpOwo+PiBJ
bmRleFdyaXRlciAgcmFtV3JpdGVyID0gbmV3IEluZGV4V3JpdGVyKHJhbURpciwgYW5hbHl6ZXIs
IHRydWUpOwo+Pgo+PiBmb3IgKGludCBpID0gMDsgaSA8IDEwMDAwOyBpKyspIHsKPj4gICAgICAg
ICAgRG9jdW1lbnQgZG9jID0gbmV3IERvY3VtZW50KCk7Cj4+ICAgICAgICAgIGRvYy5hZGQobmV3
IEZpZWxkKCJpZCIsICJ0ZXN0IGlkIitpLCBGaWVsZC5TdG9yZS5ZRVMsCj4+IEZpZWxkLkluZGV4
LlRPS0VOSVpFRCwgRmllbGQuVGVybVZlY3Rvci5XSVRIX1BPU0lUSU9OU19PRkZTRVRTKSk7Cj4+
ICAgICAgICAgICB3cml0ZXIuYWRkRG9jdW1lbnQoZG9jKTsKPj4gfQo+Pgo+Pgo+PiBJbmRleFdy
aXRlciBmc1dyaXRlciAgID0gbmV3IEluZGV4V3JpdGVyKGluZGV4RGlyLCBhbmFseXplciwgdHJ1
ZSk7Cj4+IGZzV3JpdGVyLmFkZEluZGV4ZXMobmV3IERpcmVjdG9yeVtdIHsgcmFtRGlyIH0pOwo+
PiByYW1Xcml0ZXIuY2xvc2UoKTsKPj4gZnNXcml0ZXIuY2xvc2UoKTsKPj4gLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+Cj4+IEkga25vdyBJbmRleFdyaXRlci5hZGRJbmRl
eGVzKERpcmVjdG9yeVtdIGRpcikgbWV0aG9kIGNhbiBtZXJnZSBvdGhlcgo+PiBpbmRleGVzLgo+
Pgo+PiBCdXQsIHdoZW4gSSBleGVjdXRlIG15IHByb2dyYW0sIGp1c3QgMiBmaWxlcyBhcmUgY3Jl
YXRlZCBpbiBpbmRleAo+PiBkaXJlY3RvcnkuCj4+IChzZWdtZW50cy5nZW4gYW5kIHNlZ21lbnRz
XzQpCj4+IEFuZCB3aGVuIEkgb3BlbiB3aXRoIExVS0UgdGhlIGluZGV4IHRoZW4gbWVldCBlcnJv
ciAsIEl0J3MgYmFkIGluZGV4IGZpbGUuCj4+Cj4+IFdoYXQncyB3cm9uZyBhYm91dCB0aGF0IGNv
ZGUuLj8KPj4gSXQncyBhbG1vc3Qgc2FtZSBhcyBzYW1wbGUgc291cmNlIGNvZGUgb24gYm9vay4g
SSBjYW4ndCBmaW5kIGFueSByZWFzb24uCj4+Cj4+IFBsZWFzZSBsZXQgbWUga25vdyB3aGF0IGlz
IHdyb25nLgo+Pgo+PiBUaGFuayB5b3UuCj4+Cj4+Cj4+IC0tCj4+IERFVr/rvcQKPj4gaHR0cDov
L2RldnlvbmdzaWsudGlzdG9yeS5jb20KPj4KPgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1
YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcK
PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUu
YXBhY2hlLm9yZwo+Cj4KCgotLSAKREVWv+u9xApodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNv
bQo=
------=_Part_24669_23991265.1218163694915--

From java-user-return-35391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 03:17:28 2008
Return-Path: <java-user-return-35391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54974 invoked from network); 8 Aug 2008 03:17:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 03:17:28 -0000
Received: (qmail 9892 invoked by uid 500); 8 Aug 2008 03:17:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9823 invoked by uid 500); 8 Aug 2008 03:17:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9812 invoked by uid 99); 8 Aug 2008 03:17:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 20:17:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Aug 2008 03:16:21 +0000
Received: (qmail 81234 invoked by uid 60001); 8 Aug 2008 03:16:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=EJ3Ndgv6f0O/6Ct0JF0KG3xjiNZJWUnMmpsMACxHtNFJWq4bhCMN7CPJBo7OKt6SJV9FeV77phaj4+ACLtIG38UpKinaDAEz0JxjHjD3y33T9auWgwXqLmT6Jy712WiCASqZuWE1DPv9f3E9Z8wf3mN4ZWsjamlNOOD6Zc4W1b0=;
Received: from [72.227.164.48] by web50307.mail.re2.yahoo.com via HTTP; Thu, 07 Aug 2008 20:16:48 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Thu, 7 Aug 2008 20:16:48 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Searching Tokenized x Un_tokenized
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <110170.80266.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Perhaps you can give some examples.  Yes, untokenized means "full string" - it requires an "exact match".

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Andre Rubin <andre.rubin@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, August 7, 2008 8:04:04 PM
> Subject: Searching Tokenized x Un_tokenized
> 
> Hi all,
> 
> When I switched a String field from tokenized to untokenized, some
> searches started not returning some obvious values. Am I missing
> something on querying untokenized fields? Another question is, do I
> need an Analyzer if my search is on an Untokenized field, wouldn't the
> search be based on the full String rather than its tokens?
> 
> Thanks,
> 
> 
> Andre
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 04:17:27 2008
Return-Path: <java-user-return-35392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73973 invoked from network); 8 Aug 2008 04:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 04:17:26 -0000
Received: (qmail 36670 invoked by uid 500); 8 Aug 2008 04:17:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36631 invoked by uid 500); 8 Aug 2008 04:17:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36620 invoked by uid 99); 8 Aug 2008 04:17:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 21:17:18 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 04:16:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id CCDF2286C30
	for <java-user@lucene.apache.org>; Thu,  7 Aug 2008 22:16:47 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 25466-05 for <java-user@lucene.apache.org>;
	Thu, 7 Aug 2008 22:16:45 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id E5513286C2B
	for <java-user@lucene.apache.org>; Thu,  7 Aug 2008 22:16:45 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18873665.post@talk.nabble.com> <11975c90808070935gad501f8m6ee7d4f95971ad50@mail.gmail.com>
Subject: RE: Searching an Index on Another Machine
Date: Thu, 7 Aug 2008 22:16:26 -0600
Message-ID: <5D3358807ED8475FA3A9BF44B85C11EF@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acj4q8UaQfnXzh0vSPOJwaDrRyk/JwAYWUPA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
In-Reply-To: <11975c90808070935gad501f8m6ee7d4f95971ad50@mail.gmail.com>
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Alexander,

RMI. We use it exclusively and we are able to cluster for fail-over. The
clustering complicates things quite a bit so you may not need or want it.

John G.

-----Original Message-----
From: Alexander Aristov [mailto:alexander.aristov@gmail.com] 
Sent: Thursday, August 07, 2008 10:35 AM
To: java-user@lucene.apache.org
Subject: Re: Searching an Index on Another Machine

Hi

Mount the file system of that machine to another one as a network share. But
I don;t think it would be optimal.

Alexander

2008/8/7 DanaWhite <philrymek@comcast.net>

>
> Hello,
>
> I have two machines on the same network, but I want to use one machine to
> search an index located on the file system of the other machine.
>
> Any ideas on how to achieve this?
>
> Thanks
> Dana
> --
> View this message in context:
>
http://www.nabble.com/Searching-an-Index-on-Another-Machine-tp18873665p18873
665.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best Regards
Alexander Aristov


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 04:19:05 2008
Return-Path: <java-user-return-35393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75052 invoked from network); 8 Aug 2008 04:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 04:19:05 -0000
Received: (qmail 40453 invoked by uid 500); 8 Aug 2008 04:18:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40061 invoked by uid 500); 8 Aug 2008 04:18:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40050 invoked by uid 99); 8 Aug 2008 04:18:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Aug 2008 21:18:58 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 04:18:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 150E2286C2A
	for <java-user@lucene.apache.org>; Thu,  7 Aug 2008 22:18:27 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 25255-08 for <java-user@lucene.apache.org>;
	Thu, 7 Aug 2008 22:18:25 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 4B587286C2B
	for <java-user@lucene.apache.org>; Thu,  7 Aug 2008 22:18:25 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18873665.post@talk.nabble.com>
Subject: RE: Searching an Index on Another Machine
Date: Thu, 7 Aug 2008 22:18:05 -0600
Message-ID: <982C01B31C8C4ACE952C631AA7C76CAA@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acj4pehCVJMKfIKkQg219g1SYqgyAQAZ85mw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
In-Reply-To: <18873665.post@talk.nabble.com>
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Dana,

RMI. We use it exclusively and we are able to cluster for fail-over. The
clustering complicates things quite a bit so you may not need or want it.

John G.

-----Original Message-----
From: DanaWhite [mailto:philrymek@comcast.net] 
Sent: Thursday, August 07, 2008 9:54 AM
To: java-user@lucene.apache.org
Subject: Searching an Index on Another Machine


Hello,

I have two machines on the same network, but I want to use one machine to
search an index located on the file system of the other machine.

Any ideas on how to achieve this?

Thanks
Dana
-- 
View this message in context:
http://www.nabble.com/Searching-an-Index-on-Another-Machine-tp18873665p18873
665.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 09:24:27 2008
Return-Path: <java-user-return-35394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83195 invoked from network); 8 Aug 2008 09:24:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 09:24:26 -0000
Received: (qmail 30989 invoked by uid 500); 8 Aug 2008 09:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30961 invoked by uid 500); 8 Aug 2008 09:24:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30950 invoked by uid 99); 8 Aug 2008 09:24:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 02:24:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 09:23:23 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1246580rvb.5
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 02:23:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=rCauKwB3oUTyCD2TsMv2DgDMsi02W6Kmv702pGpXGQ4=;
        b=unf9X3IrWBB/oqFP/hayi7rcQrKG7IVj7kzH+/iwt1eEmKmE20MrFk5SwioUUF8CZH
         SeeJ/xEbaOBNE4LlOA30IaA3BDBNO9oAyh1I0NELnKs4dTj0uW4kJ499zGmqkkeTz3b9
         WcqniNFpb6or0ghjTx/mHlthtC30T8lbE9s8c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ToNbmnViF+JFoK8U/QrG7bgtOYqbg7F/xlOzFs9vjQ36CmahVjln42+Pn/ZdMb9yw8
         0PFazfo/j/GuExYLwAka8t1Z7QK+CsKbArD4jUWMrzaTrQ4ZIMGooyoQU0PNcaIXFTZZ
         XKZhhaLdDF4Tle8ZtuRNcaJd3KuUjEFH4YlK8=
Received: by 10.141.123.4 with SMTP id a4mr944494rvn.294.1218187431244;
        Fri, 08 Aug 2008 02:23:51 -0700 (PDT)
Received: by 10.140.158.5 with HTTP; Fri, 8 Aug 2008 02:23:51 -0700 (PDT)
Message-ID: <8c4e68610808080223p343f390i1fc3d2a5e42b6a7e@mail.gmail.com>
Date: Fri, 8 Aug 2008 10:23:51 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Efficient delete
In-Reply-To: <1f8734680808070546q6d36cbe8m6687b70f7782d6df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1f8734680808070546q6d36cbe8m6687b70f7782d6df@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Michael


Did you get anywhere with this? 3 secs for one delete is excessive. A
job of mine ran earlier today and did 2000+ deletes by term on unique
id in less than 9 seconds.  The index is smaller, at around 5Gb, but I
don't believe that would explain the difference.  All the deletes were
done in one batch using lucene 2.3.2.

Is there a lot of other concurrent activity on the index?  On the
server?  Is it CPU or IO bound?


--
Ian.



On Thu, Aug 7, 2008 at 1:46 PM, Michael Zehrer <zehrer@zepan.org> wrote:
> Dear List,
>
> I have a rather big index around 20gb. My documents have a unique id
> that I store in in an untokenized field.
>
> Using an IndexReader I delete documents by term using the id. The
> applications tries to batch as many delete operations as possible for
> this.
>
> The applications runs on a 8Core Machine with 1GB heapsize for the
> JVM. Each delete takes about 3sec to complete. I have a lot of Updates
> during a day so this takes a lot of time and in effect this is too
> slow.
>
> Is there anything I can do to speed things up a little?
>
> Best,
>
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 10:28:23 2008
Return-Path: <java-user-return-35395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2706 invoked from network); 8 Aug 2008 10:28:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 10:28:23 -0000
Received: (qmail 89681 invoked by uid 500); 8 Aug 2008 10:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89633 invoked by uid 500); 8 Aug 2008 10:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89622 invoked by uid 99); 8 Aug 2008 10:28:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 03:28:12 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 10:27:16 +0000
Received: by wr-out-0506.google.com with SMTP id c30so822629wra.21
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 03:27:42 -0700 (PDT)
Received: by 10.90.33.5 with SMTP id g5mr6464381agg.81.1218191262226;
        Fri, 08 Aug 2008 03:27:42 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm1170064agb.34.2008.08.08.03.27.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 08 Aug 2008 03:27:41 -0700 (PDT)
Message-Id: <36F19444-085E-4001-9C6A-D8C06302B062@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610808080223p343f390i1fc3d2a5e42b6a7e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Efficient delete
Date: Fri, 8 Aug 2008 06:27:40 -0400
References: <1f8734680808070546q6d36cbe8m6687b70f7782d6df@mail.gmail.com> <8c4e68610808080223p343f390i1fc3d2a5e42b6a7e@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, can you do your deletes via IndexWriter (delete by Term) instead  
of opening IndexReader to do the deletes?

Mike

Ian Lea wrote:

> Michael
>
>
> Did you get anywhere with this? 3 secs for one delete is excessive. A
> job of mine ran earlier today and did 2000+ deletes by term on unique
> id in less than 9 seconds.  The index is smaller, at around 5Gb, but I
> don't believe that would explain the difference.  All the deletes were
> done in one batch using lucene 2.3.2.
>
> Is there a lot of other concurrent activity on the index?  On the
> server?  Is it CPU or IO bound?
>
>
> --
> Ian.
>
>
>
> On Thu, Aug 7, 2008 at 1:46 PM, Michael Zehrer <zehrer@zepan.org>  
> wrote:
>> Dear List,
>>
>> I have a rather big index around 20gb. My documents have a unique id
>> that I store in in an untokenized field.
>>
>> Using an IndexReader I delete documents by term using the id. The
>> applications tries to batch as many delete operations as possible for
>> this.
>>
>> The applications runs on a 8Core Machine with 1GB heapsize for the
>> JVM. Each delete takes about 3sec to complete. I have a lot of  
>> Updates
>> during a day so this takes a lot of time and in effect this is too
>> slow.
>>
>> Is there anything I can do to speed things up a little?
>>
>> Best,
>>
>> Michael
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 12:09:08 2008
Return-Path: <java-user-return-35396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29341 invoked from network); 8 Aug 2008 12:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 12:09:07 -0000
Received: (qmail 80875 invoked by uid 500); 8 Aug 2008 12:09:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80846 invoked by uid 500); 8 Aug 2008 12:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80834 invoked by uid 99); 8 Aug 2008 12:09:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 05:09:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 12:08:02 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m78C7QOn008863
	for <java-user@lucene.apache.org>; Fri, 8 Aug 2008 13:07:26 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.2.11923)
    via ESMTP; Fri, 08 Aug 2008 13:07:25 +0100 (BST)
Date: Fri, 8 Aug 2008 13:07:25 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <489C36FD.3090807@scalix.com>
Subject: SnowballAnalyzer question
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Hi.

I am using the SnowballAnalyzer because of it's multi-language stemming 
capabilities - and am very happy with that.
There is one small glitch which I'm hoping to overcome - can I get it to 
split up internet domain names in the same way that StopAnalyzer does?
i.e.  for the sentence "This is a URL: www.google.de / this is a company 
name: XY&Z Corporation", here is the default output from the two analysers:

 StopAnalyzer:
    [url] [www] [google] [de] [company] [name] [xy] [z] [corporation]

 SnowballAnalyzer:
    [this] [is] [a] [url] [www.google.d] [this] [is] [a] [compani] 
[name] [xy&z] [corpor]

Ideally I would like "www.google.de" to be split into [www] [google] 
[de] (rather than [www.google.d]), but retain the rest of the  
SnowballAnalyzer's capabilities.
Can I perhaps extend  SnowballAnalyzer to allow me to achieve this?

Thanks for any tips / pointers,

- Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 13:16:50 2008
Return-Path: <java-user-return-35397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57148 invoked from network); 8 Aug 2008 13:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 13:16:50 -0000
Received: (qmail 72056 invoked by uid 500); 8 Aug 2008 13:16:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72026 invoked by uid 500); 8 Aug 2008 13:16:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72015 invoked by uid 99); 8 Aug 2008 13:16:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 06:16:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 13:15:44 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 8 Aug 2008 09:15:48 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 8 Aug 2008 09:15:48 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: RE: LineDocMaker usage
Date: Fri, 8 Aug 2008 09:11:41 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <867513fe0808061930ra0edeafg5e288b7c2ecf2542@mail.gmail.com>
Thread-Index: Acj4NaxvOz7jpAKwTg+zkZw+RNiyrABIpskg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGEf2LTr00000fc8@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010205.489C4704.005E,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 08 Aug 2008 13:15:48.0177 (UTC) FILETIME=[DF795C10:01C8F958]
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you so much!

Brittany Jacobs
Java Developer
JBManagement, Inc.
12 Christopher Way, Suite 103
Eatontown, NJ 07724
ph: 732-542-9200 ext. 229
fax: 732-380-0678
email: bjacobs@jbmanagement.com
-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com] 
Sent: Wednesday, August 06, 2008 10:30 PM
To: java-user@lucene.apache.org
Subject: Re: LineDocMaker usage

Hi,
How about just opening a file and parsing through it while adding doing a
doc.add on each newline? That should be pretty straight and simple.
Just writing the snippet here, though this might have issues as didnt try to
compile it.

    IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
true);

    FileInputStream fstream = new FileInputStream("textfile.txt");
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    while ((strLine = br.readLine()) != null)   {
        Document doc = new Document();
            doc.add(new Field("filename",
f.getCanonicalPath(),Field.Store.YES,Field.Index.TOKENIZED));
            doc.add(new Field("filename",
strLine,Field.Store.YES,Field.Index.TOKENIZED));//DEPENDING UPON HOW YOU
WANT TO INDEX IT
            writer.addDocument(doc);
    }
    in.close();
    writer.close();


Also, I have tokenized the content and stored it so that it could be
fetched, you might just want to have a ref key instead of storing the
entrire content though. Upto you for implementation.

--
Anshum
http://ai-cafe.blogspot.com



On Thu, Aug 7, 2008 at 1:42 AM, Brittany Jacobs
<bjacobs@jbmanagement.com>wrote:

> Hello, I am new to all this.  I need to read in a text file and have each
> line in the file be a document.
>
> The LineDocMaker seems to be intended for this purpose.  But I can't
figure
> out how to read the data into it.
>
> Any examples would be greatly appreciated.
>
>
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 13:56:06 2008
Return-Path: <java-user-return-35398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67820 invoked from network); 8 Aug 2008 13:56:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 13:56:06 -0000
Received: (qmail 55348 invoked by uid 500); 8 Aug 2008 13:55:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55321 invoked by uid 500); 8 Aug 2008 13:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55310 invoked by uid 99); 8 Aug 2008 13:55:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 06:55:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 13:55:02 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 8 Aug 2008 09:55:07 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 8 Aug 2008 09:55:07 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: RE: LineDocMaker usage
Date: Fri, 8 Aug 2008 09:50:55 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <867513fe0808061930ra0edeafg5e288b7c2ecf2542@mail.gmail.com>
Thread-Index: Acj4NaxvOz7jpAKwTg+zkZw+RNiyrABKARAg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGEaaz7E00000fd1@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010205.489C503B.008E,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 08 Aug 2008 13:55:07.0301 (UTC) FILETIME=[5D9F1D50:01C8F95E]
X-Virus-Checked: Checked by ClamAV on apache.org

Why do you add to the doc twice, once with the file path and once with the
string?

-Brittany 

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com] 
Sent: Wednesday, August 06, 2008 10:30 PM
To: java-user@lucene.apache.org
Subject: Re: LineDocMaker usage

Hi,
How about just opening a file and parsing through it while adding doing a
doc.add on each newline? That should be pretty straight and simple.
Just writing the snippet here, though this might have issues as didnt try to
compile it.

    IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
true);

    FileInputStream fstream = new FileInputStream("textfile.txt");
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    while ((strLine = br.readLine()) != null)   {
        Document doc = new Document();
            doc.add(new Field("filename",
f.getCanonicalPath(),Field.Store.YES,Field.Index.TOKENIZED));
            doc.add(new Field("filename",
strLine,Field.Store.YES,Field.Index.TOKENIZED));//DEPENDING UPON HOW YOU
WANT TO INDEX IT
            writer.addDocument(doc);
    }
    in.close();
    writer.close();


Also, I have tokenized the content and stored it so that it could be
fetched, you might just want to have a ref key instead of storing the
entrire content though. Upto you for implementation.

--
Anshum
http://ai-cafe.blogspot.com



On Thu, Aug 7, 2008 at 1:42 AM, Brittany Jacobs
<bjacobs@jbmanagement.com>wrote:

> Hello, I am new to all this.  I need to read in a text file and have each
> line in the file be a document.
>
> The LineDocMaker seems to be intended for this purpose.  But I can't
figure
> out how to read the data into it.
>
> Any examples would be greatly appreciated.
>
>
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 14:14:09 2008
Return-Path: <java-user-return-35399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73825 invoked from network); 8 Aug 2008 14:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 14:14:09 -0000
Received: (qmail 95823 invoked by uid 500); 8 Aug 2008 14:14:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95794 invoked by uid 500); 8 Aug 2008 14:14:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95783 invoked by uid 99); 8 Aug 2008 14:14:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 07:14:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wysiecki@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 14:13:04 +0000
Received: by fk-out-0910.google.com with SMTP id 18so717432fkq.5
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 07:13:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:content-transfer-encoding
         :content-disposition:x-google-sender-auth;
        bh=LFdRANro6jkk4I38xRjK9J19dI76FWkEF0BjQELaalI=;
        b=HPQiga5faX3++bPUsIlqSn7shkTV2x9mbn4J9HNMOk7BpJl3NkR7gsIOmQlYNf95b9
         ETpGBP1k9ysmxfYskWD/gH7jGr1DJcyBLUjqyZIrZoYsrfFaRqhEb2WoDefr1Ilw33VZ
         cDNv5rKzcD8y9lhi3anBiXfJo4KaTuWrx+5Xo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=tqtceZXi491wDG1aNWw1PbgWBHvO1vZ9mviiL/OVIgz1xXr8C/ZUABhsLYSuSZ2rTY
         T6H+Gx/JSehTcDc2jcfYq7jranKAkiJFYUpcBxEZqgco4s3CRlSmTstbFnFaHcxpl5rF
         I2QcgxZCHbzNk+4ftjNR6R5LfxVoYuYW8A+w8=
Received: by 10.180.254.18 with SMTP id b18mr2165624bki.43.1218204794073;
        Fri, 08 Aug 2008 07:13:14 -0700 (PDT)
Received: by 10.125.154.20 with HTTP; Fri, 8 Aug 2008 07:13:14 -0700 (PDT)
Message-ID: <b0f78250808080713m5b0d5e63l6915f03ddf6037e8@mail.gmail.com>
Date: Fri, 8 Aug 2008 16:13:14 +0200
From: "Martin vWysiecki" <wysiecki@aspedia.de>
Sender: wysiecki@gmail.com
To: java-user@lucene.apache.org
Subject: Unique list of keywords
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Google-Sender-Auth: 7414ec25f3c10b3e
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

i have very much data, about 20GB of text, and need a unique list of
keywords based on my text in all docs from the whole index.

Some ideas?


THX

Martin




--=20
 mit freundlichen Gr=FC=DFen

Martin von Wysiecki
software development

aspedia GmbH
Ro=DFlauer Weg 5
D-68309 Mannheim
Telefon +49 (0) 621 - 71600 33
Telefax +49 (0) 621 - 71600 10
wysiecki@aspedia.de

Gesch=E4ftsf=FChrung:
Steffen K=FCnster, Christoph Goldschmitt
Amtsgericht Mannheim HRB 9942
www.aspedia.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 14:23:17 2008
Return-Path: <java-user-return-35400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77354 invoked from network); 8 Aug 2008 14:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 14:23:17 -0000
Received: (qmail 11415 invoked by uid 500); 8 Aug 2008 14:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10858 invoked by uid 500); 8 Aug 2008 14:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10842 invoked by uid 99); 8 Aug 2008 14:23:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 07:23:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 14:22:13 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1413031rvb.5
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 07:22:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=86knB4V76TRI4zcrAcwJM8DLaP2uZed0nIoQWzlo35A=;
        b=svE6lN2RcU9azK09hjRuSiWrH5aRdVoQo3PzzplrwwDYCLfeLdUuyEq93aecaAUBGa
         aF2oTxRD8Oooo8FGF0ml4g0rQEf0VzhgCcSz7su5W23CocwNVoa0jEyzV1xbBL5DjyBU
         xYWZRWzZCNXBiCYooCADu8Rv1gYTY7iwluylw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=AUzZ5DBo6w8zxkN13n+kFeEHBPkZJMRtFTE9nLSyno8z7GLJK4JqubG6R+K9raKZ+t
         tS2MS0y/rvG4pKVR5uIhnYqwBg4n2006NB6jYUzn3GjynBxnqQ/laq/YRg0ZT2K3Vu5x
         Au0Fz+/0KBAO2A9dl7DjFAjWiSiq6deZ9p5Vs=
Received: by 10.141.133.14 with SMTP id k14mr1464036rvn.127.1218205360469;
        Fri, 08 Aug 2008 07:22:40 -0700 (PDT)
Received: by 10.140.158.5 with HTTP; Fri, 8 Aug 2008 07:22:40 -0700 (PDT)
Message-ID: <8c4e68610808080722j1064b6d1mda1899926b504ed@mail.gmail.com>
Date: Fri, 8 Aug 2008 15:22:40 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LineDocMaker usage
In-Reply-To: <JB_VA_EXCHANGEaaz7E00000fd1@Jb_va_exchange.jbmanage.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <867513fe0808061930ra0edeafg5e288b7c2ecf2542@mail.gmail.com>
	 <JB_VA_EXCHANGEaaz7E00000fd1@Jb_va_exchange.jbmanage.corp>
X-Virus-Checked: Checked by ClamAV on apache.org

In the example code 2 separate fields are being added to each
document, the file name and the contents of one line.  The fields can
be queried or retrieved separately. There is a typo in the second
Field line: should read "line" or whatever you wanted the field to be
called.

But as Anshum says, what you actually tokenize/index/store is up to you.


--
Ian.



On Fri, Aug 8, 2008 at 2:50 PM, Brittany Jacobs
<bjacobs@jbmanagement.com> wrote:
> Why do you add to the doc twice, once with the file path and once with the
> string?
>
> -Brittany
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Wednesday, August 06, 2008 10:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: LineDocMaker usage
>
> Hi,
> How about just opening a file and parsing through it while adding doing a
> doc.add on each newline? That should be pretty straight and simple.
> Just writing the snippet here, though this might have issues as didnt try to
> compile it.
>
>    IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
> true);
>
>    FileInputStream fstream = new FileInputStream("textfile.txt");
>    DataInputStream in = new DataInputStream(fstream);
>    BufferedReader br = new BufferedReader(new InputStreamReader(in));
>    String strLine;
>    while ((strLine = br.readLine()) != null)   {
>        Document doc = new Document();
>            doc.add(new Field("filename",
> f.getCanonicalPath(),Field.Store.YES,Field.Index.TOKENIZED));
>            doc.add(new Field("filename",
> strLine,Field.Store.YES,Field.Index.TOKENIZED));//DEPENDING UPON HOW YOU
> WANT TO INDEX IT
>            writer.addDocument(doc);
>    }
>    in.close();
>    writer.close();
>
>
> Also, I have tokenized the content and stored it so that it could be
> fetched, you might just want to have a ref key instead of storing the
> entrire content though. Upto you for implementation.
>
> --
> Anshum
> http://ai-cafe.blogspot.com
>
>
>
> On Thu, Aug 7, 2008 at 1:42 AM, Brittany Jacobs
> <bjacobs@jbmanagement.com>wrote:
>
>> Hello, I am new to all this.  I need to read in a text file and have each
>> line in the file be a document.
>>
>> The LineDocMaker seems to be intended for this purpose.  But I can't
> figure
>> out how to read the data into it.
>>
>> Any examples would be greatly appreciated.
>>
>>
>>
>>
>
>
> --
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 14:34:31 2008
Return-Path: <java-user-return-35401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82036 invoked from network); 8 Aug 2008 14:34:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 14:34:31 -0000
Received: (qmail 34512 invoked by uid 500); 8 Aug 2008 14:34:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34392 invoked by uid 500); 8 Aug 2008 14:34:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34381 invoked by uid 99); 8 Aug 2008 14:34:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 07:34:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 14:33:26 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 8 Aug 2008 10:33:52 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 8 Aug 2008 10:33:51 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: RE: LineDocMaker usage
Date: Fri, 8 Aug 2008 10:29:40 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <8c4e68610808080722j1064b6d1mda1899926b504ed@mail.gmail.com>
Thread-Index: Acj5Yk1bxm0pMwMeSGOgGfyv0zdAOgAANd2w
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGERf3sl00000fe3@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010205.489C594F.011C,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 08 Aug 2008 14:33:51.0783 (UTC) FILETIME=[C71EEB70:01C8F963]
X-Virus-Checked: Checked by ClamAV on apache.org

Oh!  Thank you very much.  

Brittany Jacobs
Java Developer
JBManagement, Inc.
12 Christopher Way, Suite 103
Eatontown, NJ 07724
ph: 732-542-9200 ext. 229
fax: 732-380-0678
email: bjacobs@jbmanagement.com

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com] 
Sent: Friday, August 08, 2008 10:23 AM
To: java-user@lucene.apache.org
Subject: Re: LineDocMaker usage

In the example code 2 separate fields are being added to each
document, the file name and the contents of one line.  The fields can
be queried or retrieved separately. There is a typo in the second
Field line: should read "line" or whatever you wanted the field to be
called.

But as Anshum says, what you actually tokenize/index/store is up to you.


--
Ian.



On Fri, Aug 8, 2008 at 2:50 PM, Brittany Jacobs
<bjacobs@jbmanagement.com> wrote:
> Why do you add to the doc twice, once with the file path and once with the
> string?
>
> -Brittany
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Wednesday, August 06, 2008 10:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: LineDocMaker usage
>
> Hi,
> How about just opening a file and parsing through it while adding doing a
> doc.add on each newline? That should be pretty straight and simple.
> Just writing the snippet here, though this might have issues as didnt try
to
> compile it.
>
>    IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
> true);
>
>    FileInputStream fstream = new FileInputStream("textfile.txt");
>    DataInputStream in = new DataInputStream(fstream);
>    BufferedReader br = new BufferedReader(new InputStreamReader(in));
>    String strLine;
>    while ((strLine = br.readLine()) != null)   {
>        Document doc = new Document();
>            doc.add(new Field("filename",
> f.getCanonicalPath(),Field.Store.YES,Field.Index.TOKENIZED));
>            doc.add(new Field("filename",
> strLine,Field.Store.YES,Field.Index.TOKENIZED));//DEPENDING UPON HOW YOU
> WANT TO INDEX IT
>            writer.addDocument(doc);
>    }
>    in.close();
>    writer.close();
>
>
> Also, I have tokenized the content and stored it so that it could be
> fetched, you might just want to have a ref key instead of storing the
> entrire content though. Upto you for implementation.
>
> --
> Anshum
> http://ai-cafe.blogspot.com
>
>
>
> On Thu, Aug 7, 2008 at 1:42 AM, Brittany Jacobs
> <bjacobs@jbmanagement.com>wrote:
>
>> Hello, I am new to all this.  I need to read in a text file and have each
>> line in the file be a document.
>>
>> The LineDocMaker seems to be intended for this purpose.  But I can't
> figure
>> out how to read the data into it.
>>
>> Any examples would be greatly appreciated.
>>
>>
>>
>>
>
>
> --
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 15:25:26 2008
Return-Path: <java-user-return-35402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6549 invoked from network); 8 Aug 2008 15:25:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 15:25:26 -0000
Received: (qmail 26286 invoked by uid 500); 8 Aug 2008 15:25:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26261 invoked by uid 500); 8 Aug 2008 15:25:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26238 invoked by uid 99); 8 Aug 2008 15:25:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 08:25:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 15:24:18 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 8 Aug 2008 11:24:23 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 8 Aug 2008 11:24:23 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: Need help searching
Date: Fri, 8 Aug 2008 11:20:11 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <8c4e68610808080722j1064b6d1mda1899926b504ed@mail.gmail.com>
Thread-Index: Acj5Yk1bxm0pMwMeSGOgGfyv0zdAOgAB0TGA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGEZz02H00000ff2@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010206.489C6526.015E,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 08 Aug 2008 15:24:23.0091 (UTC) FILETIME=[D5EBD030:01C8F96A]
X-Virus-Checked: Checked by ClamAV on apache.org

I want to search all the documents for a string.
So I have the following.  But Hits isn't returning anything.
What am I doing wrong?  Thanks in advance.


File f = new File("AddressData.txt");
IndexWriter writer;
try {
writer = new IndexWriter("C:\\", new StandardAnalyzer(), true);
FileInputStream fstream = new FileInputStream("AddressData.txt");
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in));
String strLine;
while ((strLine = br.readLine()) != null)   {
Document doc = new Document();
doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
Field.Index.TOKENIZED));
doc.add(new Field("line", strLine,                  Field.Store.YES,
Field.Index.TOKENIZED));
writer.addDocument(doc);
}
in.close();
writer.close();

IndexSearcher iSearch = new IndexSearcher("C:\\");

Term term = new Term("line", "KOREA");
PhraseQuery query = new PhraseQuery();
query.add(term);
Hits hits = iSearch.search(query);
}

} catch (CorruptIndexException e) {
e.printStackTrace();
} catch (LockObtainFailedException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}

---
Brittany 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 17:13:53 2008
Return-Path: <java-user-return-35403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45438 invoked from network); 8 Aug 2008 17:13:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 17:13:53 -0000
Received: (qmail 55475 invoked by uid 500); 8 Aug 2008 17:13:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55201 invoked by uid 500); 8 Aug 2008 17:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55190 invoked by uid 99); 8 Aug 2008 17:13:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 10:13:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Aug 2008 17:12:46 +0000
Received: (qmail 95625 invoked by uid 60001); 8 Aug 2008 17:13:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=XGcZjEDQw9vaJA3+lPImqWf1X81OXiJ1HdfDEJb4+J1kOff8MpVPLnoc7TxGor+ygNWbiowF3nVOmZlrM2pUw2AMxcxjPaByuFJ+ETL+WWF3ZWFFrCkLew9W1CnckXm2Bx6P40uStXbIqTDaqp9XrLZkKsudb5xR1o8n8A2/81s=;
Received: from [167.206.188.3] by web50303.mail.re2.yahoo.com via HTTP; Fri, 08 Aug 2008 10:13:13 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Fri, 8 Aug 2008 10:13:13 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Need help searching
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <484948.95148.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

What Analyzer is your searcher using?
C:\\ as the index location sounds .... "super funky".
Why not C:\\MyIndex , so your index files are not all mixed up with whatever lives in C:\\

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Brittany Jacobs <bjacobs@jbmanagement.com>
> To: java-user@lucene.apache.org
> Sent: Friday, August 8, 2008 11:20:11 AM
> Subject: Need help searching
> 
> I want to search all the documents for a string.
> So I have the following.  But Hits isn't returning anything.
> What am I doing wrong?  Thanks in advance.
> 
> 
> File f = new File("AddressData.txt");
> IndexWriter writer;
> try {
> writer = new IndexWriter("C:\\", new StandardAnalyzer(), true);
> FileInputStream fstream = new FileInputStream("AddressData.txt");
> DataInputStream in = new DataInputStream(fstream);
> BufferedReader br = new BufferedReader(new InputStreamReader(in));
> String strLine;
> while ((strLine = br.readLine()) != null)   {
> Document doc = new Document();
> doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
> Field.Index.TOKENIZED));
> doc.add(new Field("line", strLine,                  Field.Store.YES,
> Field.Index.TOKENIZED));
> writer.addDocument(doc);
> }
> in.close();
> writer.close();
> 
> IndexSearcher iSearch = new IndexSearcher("C:\\");
> 
> Term term = new Term("line", "KOREA");
> PhraseQuery query = new PhraseQuery();
> query.add(term);
> Hits hits = iSearch.search(query);
> }
> 
> } catch (CorruptIndexException e) {
> e.printStackTrace();
> } catch (LockObtainFailedException e) {
> e.printStackTrace();
> } catch (IOException e) {
> e.printStackTrace();
> }
> 
> ---
> Brittany 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 18:12:00 2008
Return-Path: <java-user-return-35404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65957 invoked from network); 8 Aug 2008 18:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 18:12:00 -0000
Received: (qmail 10685 invoked by uid 500); 8 Aug 2008 18:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10660 invoked by uid 500); 8 Aug 2008 18:11:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10648 invoked by uid 99); 8 Aug 2008 18:11:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 11:11:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.44.153.253] (HELO Jb_va_exchange.jbmanage.corp) (72.44.153.253)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 18:10:53 +0000
Received: from mail pickup service by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC;
	 Fri, 8 Aug 2008 14:10:58 -0400
Received: from YOUR4E78C11890 ([74.94.63.101]) by Jb_va_exchange.jbmanage.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 8 Aug 2008 14:10:58 -0400
From: "Brittany Jacobs" <bjacobs@jbmanagement.com>
To: <java-user@lucene.apache.org>
Subject: RE: Need help searching
Date: Fri, 8 Aug 2008 14:06:46 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <484948.95148.qm@web50303.mail.re2.yahoo.com>
Thread-Index: Acj5eiJ8rqV3urvSQgCVgAvSC8lTdQABzTUg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <JB_VA_EXCHANGEUVYKk00001057@Jb_va_exchange.jbmanage.corp>
X-CTCH-ID: _0B9FF9E7-067E-4F1F-9CAE-0A6152923EE6_
X-CTCH-RefID: str=0001.0A010203.489C8C32.00A4,ss=1,fgs=0
X-CTCH-Action: Ignore
X-OriginalArrivalTime: 08 Aug 2008 18:10:58.0186 (UTC) FILETIME=[1B7646A0:01C8F982]
X-Virus-Checked: Checked by ClamAV on apache.org


I don't know what Analyzer.  I'm new to all this.  This is all I have so
far.  As far as the location of the index, this is just for test purposes.

Brittany 

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Friday, August 08, 2008 1:13 PM
To: java-user@lucene.apache.org
Subject: Re: Need help searching

What Analyzer is your searcher using?
C:\\ as the index location sounds .... "super funky".
Why not C:\\MyIndex , so your index files are not all mixed up with whatever
lives in C:\\

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Brittany Jacobs <bjacobs@jbmanagement.com>
> To: java-user@lucene.apache.org
> Sent: Friday, August 8, 2008 11:20:11 AM
> Subject: Need help searching
> 
> I want to search all the documents for a string.
> So I have the following.  But Hits isn't returning anything.
> What am I doing wrong?  Thanks in advance.
> 
> 
> File f = new File("AddressData.txt");
> IndexWriter writer;
> try {
> writer = new IndexWriter("C:\\", new StandardAnalyzer(), true);
> FileInputStream fstream = new FileInputStream("AddressData.txt");
> DataInputStream in = new DataInputStream(fstream);
> BufferedReader br = new BufferedReader(new InputStreamReader(in));
> String strLine;
> while ((strLine = br.readLine()) != null)   {
> Document doc = new Document();
> doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
> Field.Index.TOKENIZED));
> doc.add(new Field("line", strLine,                  Field.Store.YES,
> Field.Index.TOKENIZED));
> writer.addDocument(doc);
> }
> in.close();
> writer.close();
> 
> IndexSearcher iSearch = new IndexSearcher("C:\\");
> 
> Term term = new Term("line", "KOREA");
> PhraseQuery query = new PhraseQuery();
> query.add(term);
> Hits hits = iSearch.search(query);
> }
> 
> } catch (CorruptIndexException e) {
> e.printStackTrace();
> } catch (LockObtainFailedException e) {
> e.printStackTrace();
> } catch (IOException e) {
> e.printStackTrace();
> }
> 
> ---
> Brittany 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 18:52:10 2008
Return-Path: <java-user-return-35405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89958 invoked from network); 8 Aug 2008 18:52:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 18:52:10 -0000
Received: (qmail 72324 invoked by uid 500); 8 Aug 2008 18:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71886 invoked by uid 500); 8 Aug 2008 18:52:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71875 invoked by uid 99); 8 Aug 2008 18:52:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 11:52:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.23 as permitted sender)
Received: from [80.67.29.23] (HELO smtprelay09.ispgateway.de) (80.67.29.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 18:51:04 +0000
Received: from [91.37.241.80] (helo=p5b25f150.dip.t-dialin.net)
	by smtprelay09.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KRX3C-0002Ik-UH
	for java-user@lucene.apache.org; Fri, 08 Aug 2008 20:50:59 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Unique list of keywords
Date: Fri, 8 Aug 2008 20:53:16 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <b0f78250808080713m5b0d5e63l6915f03ddf6037e8@mail.gmail.com>
In-Reply-To: <b0f78250808080713m5b0d5e63l6915f03ddf6037e8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808082053.16383@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Freitag, 8. August 2008, Martin vWysiecki wrote:

> i have very much data, about 20GB of text, and need a unique list of
> keywords based on my text in all docs from the whole index.

Simply use IndexReader.terms() to iterate over all terms in the index. You 
can then use IndexReader.docFreq(Term) to get the number of documents each 
terms occurs in.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 21:01:42 2008
Return-Path: <java-user-return-35406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55863 invoked from network); 8 Aug 2008 21:01:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 21:01:41 -0000
Received: (qmail 29085 invoked by uid 500); 8 Aug 2008 21:01:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29056 invoked by uid 500); 8 Aug 2008 21:01:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29033 invoked by uid 99); 8 Aug 2008 21:01:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 14:01:32 -0700
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [150.228.43.65] (HELO post2.merrillcorp.com) (150.228.43.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 21:00:35 +0000
Received: from relay1.stp.mrll.com (relay.stp.mrll.com [150.228.20.20])
	by post2.merrillcorp.com (8.13.1/8.13.1/P2.8) with ESMTP id m78L11XW031866
	for <java-user@lucene.apache.org>; Fri, 8 Aug 2008 16:01:01 -0500
Received: from EVS02.adminsys.mrll.com (stp2pmc01b.adminsys.mrll.com [150.228.20.42])
	by relay1.stp.mrll.com (8.13.1/8.13.1/R1.13) with ESMTP id m78L10PQ023229
	for <java-user@lucene.apache.org>; Fri, 8 Aug 2008 16:01:00 -0500
Received: from 66.237.172.251 ([66.237.172.251]) by EVS02.adminsys.mrll.com ([150.228.20.47]) via Exchange Front-End Server webmail.merrillcorp.com ([172.30.19.181]) with Microsoft Exchange Server HTTP-DAV ;
 Fri,  8 Aug 2008 21:01:00 +0000
Received: from workstation29 by webmail.merrillcorp.com; 08 Aug 2008 17:01:00 -0400
Subject: Re: Term Based Meta Data
From: Martin Owens <martin.owens@merrillcorp.com>
To: java-user@lucene.apache.org
In-Reply-To: <48988A70.6030903@gmail.com>
References: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>
	 <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>
	 <48988A70.6030903@gmail.com>
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Date: Fri, 08 Aug 2008 17:00:59 -0400
Message-Id: <1218229259.31484.4.camel@workstation29.ws.lextranet.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
X-Virus-Checked: Checked by ClamAV on apache.org

Dear Lucene Users and Tricia Williams,

The way we're operating our lucene index is one where we index all the
terms but not store the text. From your SOLR-380 patch example Tricia I
was able to get a very good idea of how to set things up. Historically I
have used TermPositionsVector instead of TermPositions because of that
data is available without storing the text in the index.

Is it possible to translate code which uses TermPositions to using
TermPositionsVector with regards to payloads?

Best Regards, Martin Owens

On Tue, 2008-08-05 at 11:14 -0600, Tricia Williams wrote:
> Hi Martin,
> 
>     Take a look at what I've done with SOLR-380 
> (https://issues.apache.org/jira/browse/SOLR-380). It might solve your 
> problem, or at least give you a good starting point.
> 
> Tricia
> 
> Michael McCandless wrote:
> >
> > I think you could use payloads (= arbitrary/opaque byte[]) for this?
> >
> > You can attach a payload to each term occurrence during tokenization 
> > (indexing), and then retrieve the payload during searching.
> >
> > Mike
> >
> > Martin Owens wrote:
> >
> >> Hello Users,
> >>
> >> I'm working on a project which attempts to store data that comes from an
> >> OCR process which describes the pixel co-ordinates of each term in the
> >> document. It's used for hit highlighting.
> >>
> >> What I would like to do is store this co-ordinate information alongside
> >> the terms. I know there is existing meta data stored per term (Word
> >> Offset and Char Offsets) the problem is that If I create a separate
> >> index and try and use the word offset or char offsets not only is it
> >> slower but it doesn't match because of the way the terms are processed
> >> both inside of lucene and the OCR program.
> >>
> >> So, is it possible to store the data alongside the terms in lucene and
> >> then recall them when doing certain searches? and how much custom code
> >> needs to be written to do it?
> >>
> >> Best Regards, Martin Owens
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 21:29:20 2008
Return-Path: <java-user-return-35407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63610 invoked from network); 8 Aug 2008 21:29:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 21:29:19 -0000
Received: (qmail 55753 invoked by uid 500); 8 Aug 2008 21:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55711 invoked by uid 500); 8 Aug 2008 21:29:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55700 invoked by uid 99); 8 Aug 2008 21:29:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 14:29:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.15.82.66] (HELO dz7.dailyrazor.com) (67.15.82.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 21:28:15 +0000
Received: from c-76-100-33-180.hsd1.md.comcast.net ([76.100.33.180]:50080 helo=[192.168.169.1])
	by dz7.dailyrazor.com with esmtpa (Exim 4.69)
	(envelope-from <gary@littlebunch.com>)
	id 1KRZVp-0000gA-S9
	for java-user@lucene.apache.org; Fri, 08 Aug 2008 16:28:42 -0500
Message-ID: <489CC880.1030503@littlebunch.com>
Date: Fri, 08 Aug 2008 17:28:16 -0500
From: Gary Moore <gary@littlebunch.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080707)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: 2.3.2 Indexing Performance
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - dz7.dailyrazor.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - littlebunch.com
X-Virus-Checked: Checked by ClamAV on apache.org

Parsing and indexing 4.5 million MARC/XML bibliographic records was 
requiring ~14 hrs. using 2.2.  The same job using 2.3 takes ~ 5 hrs. on 
the same platform --  a quad processor Sun V440 w/8GB memory.   I'm 
using the PerFieldAnalyzerWrapper (StandardAnalyzer and SnowballAnalyzer).

I'm impressed!  Is this typical?

Gary Moore
gary@littlebunch.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 21:40:22 2008
Return-Path: <java-user-return-35408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69654 invoked from network); 8 Aug 2008 21:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 21:40:22 -0000
Received: (qmail 70384 invoked by uid 500); 8 Aug 2008 21:40:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70349 invoked by uid 500); 8 Aug 2008 21:40:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70338 invoked by uid 99); 8 Aug 2008 21:40:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 14:40:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 21:39:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1646412rvb.5
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 14:39:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=9E24Rdq4Tz3VIqCb0GpqRARnIkENJc4DZSuURM+c+dk=;
        b=IgescFJ7SC4Dl14o9dtaTE6U0Hx1k+j3njBRz9ijDvnYMMXBx5SEbOu0qDR8oigFGp
         zjRU7tdm4rk1dCkyRh4dYOk5L7bOJqfMKwEoEgXw1kTnRnnMyoWeMexwug5ASB4I5jcx
         ebdcTYLniQD8kzxp0pru8ZTDESJRm4yMMBkYg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=BLU1EaElwEQm69iF6LoA4KYAk4HWrSoIAbDS2EHAZUU3p0b1XYmKlKcl2hmVwP4q+B
         VdZg8Z532V017acNdCZrPQQKsINoQ4Lc1kr53Tz4JNE15eJQ995rNX5pqy3nTCxBWqHc
         kgEqBQy9CR6U9+XgsKkYSb73BD9x94EXyL4C0=
Received: by 10.140.132.8 with SMTP id f8mr1703864rvd.206.1218231569599;
        Fri, 08 Aug 2008 14:39:29 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Fri, 8 Aug 2008 14:39:29 -0700 (PDT)
Message-ID: <1bcb7c7f0808081439j1a2cde9cuf241f890ac2a7f6b@mail.gmail.com>
Date: Sat, 9 Aug 2008 00:39:29 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: delete by doc id
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46643_19288270.1218231569591"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46643_19288270.1218231569591
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,

what would happen if I modified the class IndexWriter, and made the delete
by id method public?

I have two fields in my documents and I got to be able to delete by those
two fields, (by query in other words) and I do not wish to go trunk version.

I am getting quite desperate, and if not found a solution I will have to
make my documents with 3 fields, a, b and a + b so I can delete by a and b.

Best.

could there be a side effect?

Best.

-c.b.

------=_Part_46643_19288270.1218231569591--

From java-user-return-35409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 22:56:16 2008
Return-Path: <java-user-return-35409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5832 invoked from network); 8 Aug 2008 22:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 22:56:16 -0000
Received: (qmail 32296 invoked by uid 500); 8 Aug 2008 22:56:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32256 invoked by uid 500); 8 Aug 2008 22:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32242 invoked by uid 99); 8 Aug 2008 22:56:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 15:56:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andy.triana@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 22:55:11 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1686656rvb.5
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 15:55:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=70OKHwiPndWrK9DAKVxLSbWqYRLieQnacuTvJoOoGXE=;
        b=NTSAGvsnUOBL+q5InAB72HrJCupgD4MMRNgo9Nbs5bk+JhwdUrqjWfNYRyEmn6L9b6
         hZ1A06/uPKrJAFctWOaw8Qt1NcOmWzCT0QPg6NwH8JjYA6KCFI1XXqZxcZgR5oOgWsgy
         JCNaHIDonZghnuSI/ESbSdDpr5i0CdQ/6coHQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=TYSYPsng7N3J2ymHtbcr/cQyOeX7hL3BFv9P6cWW6OIKrU3xbYeXxdM6RB5f1HTHYr
         e6+BbxKd2/gm1MvyoMCeYb+f2zGrKAQcNIeksIegcPzG1ubeG3QUpAjUJoZKxp5NPm3Q
         dFWGMuc/ySdUVghGZ5PzmcVda20GCjVktCv3U=
Received: by 10.114.235.8 with SMTP id i8mr2315336wah.194.1218236122001;
        Fri, 08 Aug 2008 15:55:22 -0700 (PDT)
Received: by 10.115.79.16 with HTTP; Fri, 8 Aug 2008 15:55:21 -0700 (PDT)
Message-ID: <bb2591e60808081555t6abf4384vdee8273fbc6e8513@mail.gmail.com>
Date: Fri, 8 Aug 2008 15:55:21 -0700
From: "Andy Triana" <andy.triana@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: delete by doc id
In-Reply-To: <1bcb7c7f0808081439j1a2cde9cuf241f890ac2a7f6b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0808081439j1a2cde9cuf241f890ac2a7f6b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I rarely submit but I've been seeing this sort of thing more and more
on this board.

It seems that there is a need to treat Lucene as if it were a data
storage or database like repository, where in
fact it isn't.

In our case, for large indexes we run either a parallel process to
create the index or a nightly process. Always treating
the index as a disposable lookup mechanism.

When it comes to deleting items from an index, we simply just mark
those items in a separate list or data structure and then filter them
away until the index is refreshed the next go around.

My point is, that it seems like folks want Lucene to act like a
relational database when in fact it is not meant to be used that way.

Perhaps I'm wrong and upgrades will allow for efficient deletions, but
it has always been clear to me that Lucene is strictly
an index and should be treated as a feature of your storage
repository, i.e. database, file system, web, whatever. But not relied
upon for that very storage or management of that storage.

The deletion issue is true of almost any indexing engine I've used in
the past, i.e. DT Search, Verity, etc.

Am I missing something? For us it has been a "best practice" to treat
Lucene as described.

//andy


On Fri, Aug 8, 2008 at 2:39 PM, Cam Bazz <cambazz@gmail.com> wrote:
> hello,
>
> what would happen if I modified the class IndexWriter, and made the delete
> by id method public?
>
> I have two fields in my documents and I got to be able to delete by those
> two fields, (by query in other words) and I do not wish to go trunk version.
>
> I am getting quite desperate, and if not found a solution I will have to
> make my documents with 3 fields, a, b and a + b so I can delete by a and b.
>
> Best.
>
> could there be a side effect?
>
> Best.
>
> -c.b.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 23:31:31 2008
Return-Path: <java-user-return-35410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19383 invoked from network); 8 Aug 2008 23:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 23:31:31 -0000
Received: (qmail 61484 invoked by uid 500); 8 Aug 2008 23:31:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61410 invoked by uid 500); 8 Aug 2008 23:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61378 invoked by uid 99); 8 Aug 2008 23:31:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 16:31:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 23:30:25 +0000
Received: by gxk11 with SMTP id 11so6148909gxk.5
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 16:30:46 -0700 (PDT)
Received: by 10.100.210.9 with SMTP id i9mr4579040ang.9.1218238245956;
        Fri, 08 Aug 2008 16:30:45 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b29sm3870462ana.22.2008.08.08.16.30.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 08 Aug 2008 16:30:45 -0700 (PDT)
Message-Id: <B41222A3-F093-4FCE-A846-1DA8A0329E35@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0808081439j1a2cde9cuf241f890ac2a7f6b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: delete by doc id
Date: Fri, 8 Aug 2008 19:30:44 -0400
References: <1bcb7c7f0808081439j1a2cde9cuf241f890ac2a7f6b@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It's risky.

How would you get the IDs to know which ones to delete?  A separate  
reader running on the side?

The problem is, as IndexWriter merges segments, the IDs shift.  Any  
reader you have already open won't see this shift (until you reopen  
it), so you could end up deleting the wrong IDs.

Mike

Cam Bazz wrote:

> hello,
>
> what would happen if I modified the class IndexWriter, and made the  
> delete
> by id method public?
>
> I have two fields in my documents and I got to be able to delete by  
> those
> two fields, (by query in other words) and I do not wish to go trunk  
> version.
>
> I am getting quite desperate, and if not found a solution I will  
> have to
> make my documents with 3 fields, a, b and a + b so I can delete by a  
> and b.
>
> Best.
>
> could there be a side effect?
>
> Best.
>
> -c.b.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 08 23:37:06 2008
Return-Path: <java-user-return-35411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21923 invoked from network); 8 Aug 2008 23:37:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2008 23:37:06 -0000
Received: (qmail 67391 invoked by uid 500); 8 Aug 2008 23:36:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67363 invoked by uid 500); 8 Aug 2008 23:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67352 invoked by uid 99); 8 Aug 2008 23:36:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 16:36:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 23:36:00 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1113564wra.21
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 16:36:23 -0700 (PDT)
Received: by 10.90.53.1 with SMTP id b1mr4099791aga.60.1218238583123;
        Fri, 08 Aug 2008 16:36:23 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 32sm2166853wri.0.2008.08.08.16.36.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 08 Aug 2008 16:36:22 -0700 (PDT)
Message-Id: <E0535E27-1242-4F32-BE6E-9C563D1D0248@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <489CC880.1030503@littlebunch.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: 2.3.2 Indexing Performance
Date: Fri, 8 Aug 2008 19:36:21 -0400
References: <489CC880.1030503@littlebunch.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the data point!

This is expected -- alot of work went into increasing IndexWriter's  
throughput in 2.3.

Actually, I'd expect even more speedup, if indeed Lucene is the  
bottleneck in your app.  You could test how much time just creating/ 
parsing & tokenizing the docs (from whatever is holding them) takes,  
to see.  Also you might eke more performance out following the  
suggestions here:

     http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Since you've got 4 CPUs and lots of RAM you should definitely use  
multiple indexing threads with a large RAM buffer.

Mike

Gary Moore wrote:

> Parsing and indexing 4.5 million MARC/XML bibliographic records was  
> requiring ~14 hrs. using 2.2.  The same job using 2.3 takes ~ 5 hrs.  
> on the same platform --  a quad processor Sun V440 w/8GB memory.    
> I'm using the PerFieldAnalyzerWrapper (StandardAnalyzer and  
> SnowballAnalyzer).
>
> I'm impressed!  Is this typical?
>
> Gary Moore
> gary@littlebunch.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 09 01:27:51 2008
Return-Path: <java-user-return-35412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98350 invoked from network); 9 Aug 2008 01:27:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2008 01:27:47 -0000
Received: (qmail 21529 invoked by uid 500); 9 Aug 2008 01:27:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21505 invoked by uid 500); 9 Aug 2008 01:27:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21494 invoked by uid 99); 9 Aug 2008 01:27:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 18:27:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 01:26:43 +0000
Received: by yw-out-2324.google.com with SMTP id 3so492419ywj.5
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 18:27:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=0ZFG1xihwxpl+SsjQn5PrwbJY4Nchhx1nQQ0J9DD54E=;
        b=scn+jF6fmeWIldhKxUoW2sH3mxkAGPTtvGRkstiboqMhT4p5e8Oe2sSzRPkaan3NZO
         0j76RjJullyVRyb+wsby4X42/pZQMckO0DfWY4Lu1af7LRcjDcFGVMhn4Xy9vCnWifEd
         kA4IgdaU4emwnXME1ZQjzgC2GR5AS4iDe3pX4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=VvG5VAPE8LSawH4wAeYNtrxXEvDVx0nACq4dzccVvmQvpbaU0kJWRb5MCNV0l3ZoQn
         Z5R0lDcCa7bYHf6gxlFO2vyun+094vtCNAPolXJFPRQU9ope12dQqYSx+jx7X1euTBZE
         r8X29wfZH/2a9G/Bi+sjstQw6QHV6ko1y9iL0=
Received: by 10.151.155.5 with SMTP id h5mr8234877ybo.241.1218245229656;
        Fri, 08 Aug 2008 18:27:09 -0700 (PDT)
Received: by 10.151.98.15 with HTTP; Fri, 8 Aug 2008 18:27:09 -0700 (PDT)
Message-ID: <efd1bd310808081827u2031c81cte1ae59b32b14993@mail.gmail.com>
Date: Fri, 8 Aug 2008 18:27:09 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Deleting and adding docs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37766_3974440.1218245229601"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37766_3974440.1218245229601
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm new to Lucene, and I've been reading a lot of messages regarding
deleting docs. But I think my problem is more basic. I can't delete docs
from my index and (after the index is created the first time and the writer
is closed) I can't add new documents to an existing index.

Sorry for the lengthy email, I'm trying to be thorough.

Here are some code snippets:

FIRST STEP, CREATE THE INDEX

Analyzer ANALYZER = new StandardAnalyzer();

Instantiating the Writer:
IndexWriter writer = new IndexWriter(indexFilename, ANALYZER, true);
writer.setMaxFieldLength(1000000);

Creation of Documents, a loop:
Document doc = new Document();
...
doc.add(new Field(ID_FIELD, id, Field.Store.YES, Field.Index.NO));
writer.addDocument(doc);

Close the Writer:
writer.optimize();
writer.close();

Up to this point, the index is created fine.

SECOND STEP, ADDING OR DELETING
Deleting Docs:
IndexWriter writer = new IndexWriter(indexFilename, ANALYZER, false);
writer.deleteDocuments(new Term(ID_FIELD, id));

I also tried using IndexReader:
reader = IndexReader.open(indexFilename);
int i = reader.deleteDocuments(new Term(ID_FIELD, id)); //i returns 0

Both failed. I try to delete one id value that I know for sure it was added
in the first step.

I add fields the same way that I did before, except that I use the new
IndexWriter (recreate = false)
IndexWriter writer = new IndexWriter(indexFilename, ANALYZER, false);

I then flush and close:
writer.flush();
writer.close();

THIRD STEP: QUERYING
I query the index from another field, but the docs added on the second step
don't show and the ones deleted on the second step still return in the
results.

Any ideas what I'm doing wrong?


Thanks


Andre

------=_Part_37766_3974440.1218245229601--

From java-user-return-35413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 09 02:39:51 2008
Return-Path: <java-user-return-35413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30883 invoked from network); 9 Aug 2008 02:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2008 02:39:51 -0000
Received: (qmail 47523 invoked by uid 500); 9 Aug 2008 02:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47484 invoked by uid 500); 9 Aug 2008 02:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47472 invoked by uid 99); 9 Aug 2008 02:39:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Aug 2008 19:39:44 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of williams.tricia@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 02:38:46 +0000
Received: by yx-out-2324.google.com with SMTP id 3so318263yxj.5
        for <java-user@lucene.apache.org>; Fri, 08 Aug 2008 19:39:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=7JJTJWB7UTXkOomq3TcKt/NgABfXzVgKGseFhlhGW/g=;
        b=f2RaErL4DZtNKolv30vQioI06ytTF+fxlxg0QIl53qpyU1Pt5UTAAL2toleH6fi1+u
         7otp79LmgQ4Nt+ZnISZ8xguAjJHH8scaE3sgsHXli9juBeF3k0bfTTmtG7Bcd7s1+ggf
         S6ZdtaVVz/oct5RKP3C8fbu1arykDDX6Tm7NQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=SYZey3lLbclVA6t2wlol47xBGOJCdg2F9cHNy1IqqXxWSB8F8eRyYmfCAqogaqL7BJ
         i0+GBeYE3tks26KYHZ0OLf/PIBMA+UgtZOCLiviw+tsBMEZ620nlEzJL3l+L/i+7g+Bw
         +dQ8MHjWOYiZD4x2tMW/Yhk+OAqtwIHmxjiho=
Received: by 10.151.42.10 with SMTP id u10mr8358181ybj.32.1218249553156;
        Fri, 08 Aug 2008 19:39:13 -0700 (PDT)
Received: from ?192.168.1.115? ( [66.222.161.155])
        by mx.google.com with ESMTPS id 6sm2692607ywi.1.2008.08.08.19.39.10
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 08 Aug 2008 19:39:11 -0700 (PDT)
Message-ID: <489D034D.20101@gmail.com>
Date: Fri, 08 Aug 2008 20:39:09 -0600
From: Tricia Williams <williams.tricia@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Term Based Meta Data
References: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>	 <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>	 <48988A70.6030903@gmail.com> <1218229259.31484.4.camel@workstation29.ws.lextranet.com>
In-Reply-To: <1218229259.31484.4.camel@workstation29.ws.lextranet.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

    Following the history of Payloads from its beginnings 
(https://issues.apache.org/jira/browse/LUCENE-755, 
https://issues.apache.org/jira/browse/LUCENE-761, 
https://issues.apache.org/jira/browse/LUCENE-834, 
http://wiki.apache.org/lucene-java/Payload_Planning) it looks like 
TermPostionsVector was never considered as part of the Payload 
functionality.  I think this is based on the underlying index file 
structure???  I don't see any way to get at a Payload other than through 
a TermPositions object.  I don't think there is a way to translate code 
which uses TermPositions to using TermPositionVector with regards to 
payloads  -- but I welcome someone to show me how they could.

    It looks like this conversation has happened at least twice before: 
http://www.nabble.com/Best-Practices-for-getting-Strings-from-a-position-range-td11608273.html#a11609245 
and 
http://www.nabble.com/Best-way-to-get-payloads-td17399361.html#a17399361.  
Unfortunately it doesn't look like anything came of it.

    Maybe there is some other work around.  What are you trying to 
accomplish "historically" with TermPositionsVectors instead of 
TermPositions?

Tricia

Martin Owens wrote:
> Dear Lucene Users and Tricia Williams,
>
> The way we're operating our lucene index is one where we index all the
> terms but not store the text. From your SOLR-380 patch example Tricia I
> was able to get a very good idea of how to set things up. Historically I
> have used TermPositionsVector instead of TermPositions because of that
> data is available without storing the text in the index.
>
> Is it possible to translate code which uses TermPositions to using
> TermPositionsVector with regards to payloads?
>
> Best Regards, Martin Owens
>
> On Tue, 2008-08-05 at 11:14 -0600, Tricia Williams wrote:
>   
>> Hi Martin,
>>
>>     Take a look at what I've done with SOLR-380 
>> (https://issues.apache.org/jira/browse/SOLR-380). It might solve your 
>> problem, or at least give you a good starting point.
>>
>> Tricia
>>
>> Michael McCandless wrote:
>>     
>>> I think you could use payloads (= arbitrary/opaque byte[]) for this?
>>>
>>> You can attach a payload to each term occurrence during tokenization 
>>> (indexing), and then retrieve the payload during searching.
>>>
>>> Mike
>>>
>>> Martin Owens wrote:
>>>
>>>       
>>>> Hello Users,
>>>>
>>>> I'm working on a project which attempts to store data that comes from an
>>>> OCR process which describes the pixel co-ordinates of each term in the
>>>> document. It's used for hit highlighting.
>>>>
>>>> What I would like to do is store this co-ordinate information alongside
>>>> the terms. I know there is existing meta data stored per term (Word
>>>> Offset and Char Offsets) the problem is that If I create a separate
>>>> index and try and use the word offset or char offsets not only is it
>>>> slower but it doesn't match because of the way the terms are processed
>>>> both inside of lucene and the OCR program.
>>>>
>>>> So, is it possible to store the data alongside the terms in lucene and
>>>> then recall them when doing certain searches? and how much custom code
>>>> needs to be written to do it?
>>>>
>>>> Best Regards, Martin Owens
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 09 07:39:08 2008
Return-Path: <java-user-return-35414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7030 invoked from network); 9 Aug 2008 07:39:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2008 07:39:08 -0000
Received: (qmail 48856 invoked by uid 500); 9 Aug 2008 07:39:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48819 invoked by uid 500); 9 Aug 2008 07:39:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48808 invoked by uid 99); 9 Aug 2008 07:39:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 00:39:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 07:38:03 +0000
Received: by nf-out-0910.google.com with SMTP id g16so455168nfd.15
        for <java-user@lucene.apache.org>; Sat, 09 Aug 2008 00:38:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=T75cj1I13VIys1mJtMcb3tgcZu/MMmvF8nLS2qOIKQ0=;
        b=EWyOMglG4rVPH/cjQZmfNTz02vfWsyM9DF3oN8ZKZec/85hT+dNGfwO4+SpRQ7JO8w
         DbTfGhhldR5/pQ3EaAj6V1pr34VgadIiyauOwH7mUcku8iwKYjxJZUr1BLvFbZ42zkzk
         JenXitAsymAhDbUmVj/lC4Ij8D+P3AZhNDtZ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=nW0GMPODZsrmZibfmpjCdv+zFG1eR/wVgS9sBsKKtZ+pVR7CRhZwqbm27gXqPzaFvR
         pGqadGZjy/IRAymkDSqxpdzF9VdqyWeNIo7OU6sXwYvkrl6XFcUGuzo3Gc4f+X1MZFvh
         1zQPuVcSwDGA0wIGHF1cjE3ApAc9RfVuMerXs=
Received: by 10.210.91.17 with SMTP id o17mr6560275ebb.172.1218267492860;
        Sat, 09 Aug 2008 00:38:12 -0700 (PDT)
Received: from kodapan.lan ( [80.70.155.150])
        by mx.google.com with ESMTPS id h1sm2911497nfh.19.2008.08.09.00.38.10
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 09 Aug 2008 00:38:11 -0700 (PDT)
Message-Id: <5EA1E6D1-EF4E-4451-B941-A550369545EE@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <efd1bd310808081827u2031c81cte1ae59b32b14993@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Deleting and adding docs
Date: Sat, 9 Aug 2008 09:38:07 +0200
References: <efd1bd310808081827u2031c81cte1ae59b32b14993@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


9 aug 2008 kl. 03.27 skrev Andre Rubin:
>
> THIRD STEP: QUERYING
> I query the index from another field, but the docs added on the  
> second step
> don't show and the ones deleted on the second step still return in the
> results.
>
> Any ideas what I'm doing wrong?

I think you forget to reopen/open a new Searcher.


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 09 13:34:15 2008
Return-Path: <java-user-return-35415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80616 invoked from network); 9 Aug 2008 13:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2008 13:34:15 -0000
Received: (qmail 85530 invoked by uid 500); 9 Aug 2008 13:34:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85505 invoked by uid 500); 9 Aug 2008 13:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85494 invoked by uid 99); 9 Aug 2008 13:34:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 06:34:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 13:33:09 +0000
Received: by fg-out-1718.google.com with SMTP id l27so879304fgb.27
        for <java-user@lucene.apache.org>; Sat, 09 Aug 2008 06:33:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=uqnj/+V1oWA5gs9tk/noHzHHXe1f7OSoNFHD8iSICRE=;
        b=KpECWJ44Fa/rfxVAOObNiQT9AU6gXoM9KxMnmCaulVclmtkIlmWg44Nz1+ZosqTruB
         FbO7uUREpwsIWc0es5kbv10QXMcQmoJ32PZ6KI/bnNUFAt6L7BiTqWoX3Ih6qOVWzAzd
         GU1+k72i11mAkuAGk4lFjNV9z+At2QI2CJfrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=X48REAyllwmY7i77W22hY7Y/XkK+Al3PvegBz8556y8FouVufKfOavoSU5cxwmdPQP
         jLUfWWK6sRTSegF8FhnwkvurJLQmzVrNNp0vXiUkr7w4VIox1mtXSnIWSGLcqToR211N
         0TEqMVT3h/5Xs5SfvmwR5pTYcie2Tm0cRp55w=
Received: by 10.86.23.17 with SMTP id 17mr4689471fgw.32.1218288815472;
        Sat, 09 Aug 2008 06:33:35 -0700 (PDT)
Received: by 10.86.4.7 with HTTP; Sat, 9 Aug 2008 06:33:35 -0700 (PDT)
Message-ID: <e05f0fd10808090633p5e67dc42qafa82aa318699abe@mail.gmail.com>
Date: Sat, 9 Aug 2008 16:33:35 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting and adding docs
In-Reply-To: <efd1bd310808081827u2031c81cte1ae59b32b14993@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_84177_3252632.1218288815482"
References: <efd1bd310808081827u2031c81cte1ae59b32b14993@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_84177_3252632.1218288815482
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> doc.add(new Field(ID_FIELD, id, Field.Store.YES, Field.Index.NO));
> writer.deleteDocuments(new Term(ID_FIELD, id));
> int i = reader.deleteDocuments(new Term(ID_FIELD, id)); //i returns 0
> Both failed. I try to delete one id value that I know for sure it was added
> in the first step.
>

For deleting by term it needs to be searchable, that is - indexed.
This should work the deletions:
  doc.add(new Field(ID_FIELD, id, Field.Store.YES,
Field.Index.UN_TOKENIZED));

Doron

------=_Part_84177_3252632.1218288815482--

From java-user-return-35416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 09 15:00:02 2008
Return-Path: <java-user-return-35416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95921 invoked from network); 9 Aug 2008 15:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2008 15:00:01 -0000
Received: (qmail 20939 invoked by uid 500); 9 Aug 2008 14:59:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20904 invoked by uid 500); 9 Aug 2008 14:59:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20893 invoked by uid 99); 9 Aug 2008 14:59:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 07:59:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 14:58:58 +0000
Received: by fg-out-1718.google.com with SMTP id l27so889775fgb.27
        for <java-user@lucene.apache.org>; Sat, 09 Aug 2008 07:59:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=E6C9MDYfgJsw5gdGMHU9znLgaFqEqr3Szo4G7WCEkvQ=;
        b=YuEl3y3xIXNvOxqB8kI9HhTLCTDO99b2SuT+9sXiWpj/lXNWDxsKPh/6PC1HOfgSkS
         yxhFGafubPmuM3w/Baf4JknMW8cLtkejctSGMkoRZvO4Bjy/6ya3tNS5lQErsk4+T0hG
         +bpX4FG0dD49nU2vOVxUKDAo+teGOuofhJ6JQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kIQiPXr/lUZGW6GIDZ2jGUnonUYTz9yzQWeqlib7urxB99sLBh7/h0jIpyASQIzN/7
         yXr5rkgA3HUBEZUEXYt1A8g8i7tDp23/5Kh9sVTbteHAVUB8KNu45NPR0o7P4mfmBJ3X
         1VjtQMio5B1nmVI6D2JpW524CXVoEf5bJdOSk=
Received: by 10.86.82.16 with SMTP id f16mr4794947fgb.16.1218293948193;
        Sat, 09 Aug 2008 07:59:08 -0700 (PDT)
Received: by 10.86.4.7 with HTTP; Sat, 9 Aug 2008 07:59:08 -0700 (PDT)
Message-ID: <e05f0fd10808090759nb6be4abw69d6548302b16a81@mail.gmail.com>
Date: Sat, 9 Aug 2008 17:59:08 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need help searching
In-Reply-To: <JB_VA_EXCHANGEUVYKk00001057@Jb_va_exchange.jbmanage.corp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_84637_29129974.1218293948195"
References: <484948.95148.qm@web50303.mail.re2.yahoo.com>
	 <JB_VA_EXCHANGEUVYKk00001057@Jb_va_exchange.jbmanage.corp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_84637_29129974.1218293948195
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> > writer = new IndexWriter("C:\\", new StandardAnalyzer(), true);
> > Term term = new Term("line", "KOREA");
> > PhraseQuery query = new PhraseQuery();
> > query.add(term);
>

StandardAnalyzer - used here while indexing - applies lowercasing.
The query is created programatically - i.e. without a QueryParser
and in particular without tokenization (~analysis) - and so "KOREA",
while at indexing time would have been lowercased to "korea", at
search time will remain as "KOREA" and hence search will not find it.

For a few more useful hints see the FAQ entry
    "Why am I getting no hits / incorrect hits?"

Doron

------=_Part_84637_29129974.1218293948195--

From java-user-return-35417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 09 17:17:41 2008
Return-Path: <java-user-return-35417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17803 invoked from network); 9 Aug 2008 17:17:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2008 17:17:41 -0000
Received: (qmail 95064 invoked by uid 500); 9 Aug 2008 17:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95029 invoked by uid 500); 9 Aug 2008 17:17:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95018 invoked by uid 99); 9 Aug 2008 17:17:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 10:17:32 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 17:16:34 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 0D1883BA02
	for <java-user@lucene.apache.org>; Sat,  9 Aug 2008 10:17:00 -0700 (PDT)
Message-Id: <33CCF556-87DB-4134-86FD-3F806AB8D938@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <489D034D.20101@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Term Based Meta Data
Date: Sat, 9 Aug 2008 13:17:00 -0400
References: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>	 <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>	 <48988A70.6030903@gmail.com> <1218229259.31484.4.camel@workstation29.ws.lextranet.com> <489D034D.20101@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, unfortunately, they are two distinct things, completely  
unrelated in terms of storage, access, etc.  I've often felt the  
access to position/offset information is hard in Lucene, which makes  
it harder to do things like highlighting, co-occurrence analysis, etc.

LUCENE-1001 (which Mark Miller has revived a bit after I lost time on  
it: https://issues.apache.org/jira/browse/LUCENE-1001) is one step  
towards remedying this.  By using Span Queries and (a working  
version)  of that patch, one should be able to get at payload info  
related to the matches.  Still not perfect, but better.

Purely wondering out loud here, but it may be possible to use the  
TermVectorMapper in conjunction with TermPositions to correlate the  
too, but I am not sure.  The tricky part is you somehow need to  
optimize access to the TermPositions.

Another thought is to add payloads storage to TermVectors.  Now we  
have offsets and positions, it's conceivable to also store payloads in  
a doc. centric way.  The tradeoff being more storage space required.   
Still, if it's what you need, then it's what you need.

-Grant

On Aug 8, 2008, at 10:39 PM, Tricia Williams wrote:

> Hi,
>
>   Following the history of Payloads from its beginnings (https://issues.apache.org/jira/browse/LUCENE-755 
> , https://issues.apache.org/jira/browse/LUCENE-761, https://issues.apache.org/jira/browse/LUCENE-834 
> , http://wiki.apache.org/lucene-java/Payload_Planning) it looks like  
> TermPostionsVector was never considered as part of the Payload  
> functionality.  I think this is based on the underlying index file  
> structure???  I don't see any way to get at a Payload other than  
> through a TermPositions object.  I don't think there is a way to  
> translate code which uses TermPositions to using TermPositionVector  
> with regards to payloads  -- but I welcome someone to show me how  
> they could.
>
>   It looks like this conversation has happened at least twice  
> before: http://www.nabble.com/Best-Practices-for-getting-Strings-from-a-position-range-td11608273.html#a11609245 
>  and http://www.nabble.com/Best-way-to-get-payloads-td17399361.html#a17399361 
> .  Unfortunately it doesn't look like anything came of it.
>
>   Maybe there is some other work around.  What are you trying to  
> accomplish "historically" with TermPositionsVectors instead of  
> TermPositions?
>
> Tricia
>
> Martin Owens wrote:
>> Dear Lucene Users and Tricia Williams,
>>
>> The way we're operating our lucene index is one where we index all  
>> the
>> terms but not store the text. From your SOLR-380 patch example  
>> Tricia I
>> was able to get a very good idea of how to set things up.  
>> Historically I
>> have used TermPositionsVector instead of TermPositions because of  
>> that
>> data is available without storing the text in the index.
>>
>> Is it possible to translate code which uses TermPositions to using
>> TermPositionsVector with regards to payloads?
>>
>> Best Regards, Martin Owens
>>
>> On Tue, 2008-08-05 at 11:14 -0600, Tricia Williams wrote:
>>
>>> Hi Martin,
>>>
>>>    Take a look at what I've done with SOLR-380 (https://issues.apache.org/jira/browse/SOLR-380 
>>> ). It might solve your problem, or at least give you a good  
>>> starting point.
>>>
>>> Tricia
>>>
>>> Michael McCandless wrote:
>>>
>>>> I think you could use payloads (= arbitrary/opaque byte[]) for  
>>>> this?
>>>>
>>>> You can attach a payload to each term occurrence during  
>>>> tokenization (indexing), and then retrieve the payload during  
>>>> searching.
>>>>
>>>> Mike
>>>>
>>>> Martin Owens wrote:
>>>>
>>>>
>>>>> Hello Users,
>>>>>
>>>>> I'm working on a project which attempts to store data that comes  
>>>>> from an
>>>>> OCR process which describes the pixel co-ordinates of each term  
>>>>> in the
>>>>> document. It's used for hit highlighting.
>>>>>
>>>>> What I would like to do is store this co-ordinate information  
>>>>> alongside
>>>>> the terms. I know there is existing meta data stored per term  
>>>>> (Word
>>>>> Offset and Char Offsets) the problem is that If I create a  
>>>>> separate
>>>>> index and try and use the word offset or char offsets not only  
>>>>> is it
>>>>> slower but it doesn't match because of the way the terms are  
>>>>> processed
>>>>> both inside of lucene and the OCR program.
>>>>>
>>>>> So, is it possible to store the data alongside the terms in  
>>>>> lucene and
>>>>> then recall them when doing certain searches? and how much  
>>>>> custom code
>>>>> needs to be written to do it?
>>>>>
>>>>> Best Regards, Martin Owens
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 09 20:03:23 2008
Return-Path: <java-user-return-35418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70573 invoked from network); 9 Aug 2008 20:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2008 20:03:23 -0000
Received: (qmail 658 invoked by uid 500); 9 Aug 2008 20:03:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 625 invoked by uid 500); 9 Aug 2008 20:03:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 614 invoked by uid 99); 9 Aug 2008 20:03:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 13:03:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 20:02:11 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2237406rvb.5
        for <java-user@lucene.apache.org>; Sat, 09 Aug 2008 13:02:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=1/Ayp9oW3VScW+n2/RlgRDjyB27w3JJsfaWptYZ+KhY=;
        b=wG2iIR+2QLzfrF6T7svNn68onZJZOaYGcRj3fUk/zrJPSCz0bWNN91tycHQpJO+Yj/
         oEY0iuAx7D4S36yQsS2FjHRTujKrhzkzykG1Intc0w0paDiDMIo3rc6XMpN2g4uOvaTi
         7aTslq+1iIjwZTbG0oWAtP+pvQJ6qBvJwWe5E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZzeFasffLp158oW6cxsAvH1ezqVq8z/o8C2G50xWNpQUg4TdSY1zJn81XmTUoEIZ51
         tfbEltNxLooF0ySzNTzd1DjfLzFmI0o829Y4gA/RRc/bM2PMVWSJRcg5pLByLq0zv/x1
         NW+Q9sZs2klcrf1I3OYSkRv+IMTzASKhTjhZ8=
Received: by 10.141.177.10 with SMTP id e10mr2349206rvp.112.1218312142149;
        Sat, 09 Aug 2008 13:02:22 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Sat, 9 Aug 2008 13:02:22 -0700 (PDT)
Message-ID: <359a92830808091302j6f398926lef94a393c2c321b9@mail.gmail.com>
Date: Sat, 9 Aug 2008 15:02:22 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : Stop search process when a given number of hits is reached
In-Reply-To: <801741.95954.qm@web28108.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8375_6374981.1218312142118"
References: <801741.95954.qm@web28108.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8375_6374981.1218312142118
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Ok, I'm not near any documentation now, but I think
throwing an exception is overkill. As I remember
all you have to do is return false from your collector
and that'll stop the search. But verify that.

Best
Erick

On Thu, Aug 7, 2008 at 12:00 PM, renou oki <yodapoubelle@yahoo.fr> wrote:

> Thanks a lot for your responses...
>
> I have tried the HitCollector and throw an exception when the limit of hi=
ts
> is reached...
> It works fine and the search time is really reduce when there is a lot of
> docs which are matching the query...
>
> I did that :
>
> public class CountCollector extends HitCollector{
>    public int cpt;
>    private int _maxHit;
>    public CountCollector(int maxHit)
>    {
>        cpt =3D 0;
>        _maxHit =3D maxHit
>    }
>    public void collect(int arg0, float arg1)
>    {
>        cpt++;
>        if (cpt > _max_Hit)
>        {
>            throw new LimitIsReachedException();
>        }
>    }
> }
>
> With a simple try catch, I catch the exception, and display "cpt" (the
> counter)...
>
> Best regards
>
>
>
>
>
> ----- Message d'origine ----
> De : Andrzej Bialecki <ab@getopt.org>
> =C0 : java-user@lucene.apache.org
> Envoy=E9 le : Jeudi, 7 Ao=FBt 2008, 14h29mn 31s
> Objet : Re: Stop search process when a given number of hits is reached
>
> Doron Cohen wrote:
> > Nothing built in that I'm aware of will do this, but it can be done by
> > searching with your own HitCollector.
> > There is a related feature - stop search after a specified time - using
> > TimeLimitedCollector.
> > It is not released yet, see issue LUCENE-997.
> > In short, the collector's collect() method is invoked in the search
> process
> > for each matching document.
> > Once 500 docs were collected, your collector can cause the search to st=
op
> by
> > throwing an exception.
> > Upon catching the exception you know that 500 docs were collected.
>
> Two additional comments:
>
> * the topN results from such incomplete search may be way off, if there
> were some high scoring documents somewhere beyond the limit.
>
> * if you know that there are more important and less important documents
> in your corpus, and their relative weight is independent of the query
> (e.g. PageRank-type score), then you can restructure your index so that
> postings belonging to highly-scoring documents come first on the posting
> lists - this way you have a better chance to collect highly relevant
> documents first, even though the search is incomplete. You can find an
> implementation of this concept in Nutch
> (org.apache.nutch.indexer.IndexSorter).
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  ________________________________________________________________________=
_____
>  Envoyez avec Yahoo! Mail. Une boite mail plus intelligente
> http://mail.yahoo.fr
>

------=_Part_8375_6374981.1218312142118--

From java-user-return-35419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 10 05:13:29 2008
Return-Path: <java-user-return-35419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69327 invoked from network); 10 Aug 2008 05:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2008 05:13:28 -0000
Received: (qmail 90227 invoked by uid 500); 10 Aug 2008 05:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90197 invoked by uid 500); 10 Aug 2008 05:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90186 invoked by uid 99); 10 Aug 2008 05:13:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Aug 2008 22:13:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 05:12:25 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1004162fgb.27
        for <java-user@lucene.apache.org>; Sat, 09 Aug 2008 22:12:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=FCR3yj9Gct5fo0is0oYAzD0slTfvcY3lO3YapyF3rDM=;
        b=BL6EUtSoW4Hb8YRAHsJJVvikZsGqFm2A23SebDrNMds+vG9ZO7ULsgP8B7zeW8BrBz
         gk6HhVmqTqdwFN3lZBqfikG31CkBqEcDTkPdkKNwtjtuVSMu2F3bLxX+vXhZ87XukTnX
         O1TAsXzDXv1u+7ENq3EsPgrHaBUpDmqxYfJB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YioQi8zAbQycqFch7ZEz2L9T5+nr0DFPiExQpgja37AlBqqedADS8PSgo1ACX9cTXI
         Rr6qxHr6fXe7LjLL78BLCS2iuvGsX77Mkd6nyuKfcEUF1G4Oj3Cr5inyAeNfTsf25Z2K
         TVeWNrkagc4qBymW2jGEEajPO9CcrrZMU9iOQ=
Received: by 10.86.73.7 with SMTP id v7mr133114fga.53.1218345155553;
        Sat, 09 Aug 2008 22:12:35 -0700 (PDT)
Received: by 10.86.4.7 with HTTP; Sat, 9 Aug 2008 22:12:35 -0700 (PDT)
Message-ID: <e05f0fd10808092212k1a49bb58xbc15bb852835b047@mail.gmail.com>
Date: Sun, 10 Aug 2008 08:12:35 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : Stop search process when a given number of hits is reached
In-Reply-To: <359a92830808091302j6f398926lef94a393c2c321b9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87469_7298707.1218345155556"
References: <801741.95954.qm@web28108.mail.ukl.yahoo.com>
	 <359a92830808091302j6f398926lef94a393c2c321b9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_87469_7298707.1218345155556
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> Ok, I'm not near any documentation now, but I think
> throwing an exception is overkill. As I remember
> all you have to do is return false from your collector
> and that'll stop the search. But verify that.
>

That would have been much cleaner, however collect() is a void,
so throwing a (runtime) exception is currently the only way a
collector can stop the search.

------=_Part_87469_7298707.1218345155556--

From java-user-return-35420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 10 14:03:45 2008
Return-Path: <java-user-return-35420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71623 invoked from network); 10 Aug 2008 14:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2008 14:03:45 -0000
Received: (qmail 33431 invoked by uid 500); 10 Aug 2008 14:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33403 invoked by uid 500); 10 Aug 2008 14:03:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33392 invoked by uid 99); 10 Aug 2008 14:03:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 07:03:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 14:02:41 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2652032rvb.5
        for <java-user@lucene.apache.org>; Sun, 10 Aug 2008 07:02:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=rK3iFs79YQlDH1yQa3MuelAELhtKJfOT8wQUvHWBfZ0=;
        b=ei+xXE8uimRudvjtiYuBgUv5989I6F2+UOsiD3N18hpeLqIJ4BM7fIxF7tpk38+dqn
         bu1s6Xy9lu0+Al5cyP20Av8UyFaCUioXAo2Li5plXvTjkP8b87+SZ6LuLR59oUkOgGYl
         +MuedxVwuHXBQJ5ukfjrB52b3LuiRAbbL1GEI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KXxKh38lSOoTIsvuu7UVOQ/9OPvPv48Am7lWuOxcmhxs/imMVFieeASqkE7lgEmq+M
         h+/j6gOi1QcTdhAo6RXSJLWOmEBuXlZDiSHgvC24sjZ4SOlUsCCYcGuts71k/bsr/2/+
         naBARnFJ5MBBkOUDXE57fg6yDl5gi807Yu/z4=
Received: by 10.141.113.6 with SMTP id q6mr2792502rvm.135.1218376972174;
        Sun, 10 Aug 2008 07:02:52 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Sun, 10 Aug 2008 07:02:52 -0700 (PDT)
Message-ID: <359a92830808100702u571eb5bfi56252efa5f7a5eb0@mail.gmail.com>
Date: Sun, 10 Aug 2008 09:02:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : Stop search process when a given number of hits is reached
In-Reply-To: <e05f0fd10808092212k1a49bb58xbc15bb852835b047@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12735_3274088.1218376972173"
References: <801741.95954.qm@web28108.mail.ukl.yahoo.com>
	 <359a92830808091302j6f398926lef94a393c2c321b9@mail.gmail.com>
	 <e05f0fd10808092212k1a49bb58xbc15bb852835b047@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12735_3274088.1218376972173
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Which shows you how good my memory is <G>.
Thinking about it, of course, the HitCollectors *naturally*
go to completion if collecting the top scoring documents
is going to work since the last document examined
may be the top scoring one.

Ah well, shows you how my brain works on vacation

Thanks
Erick

On Sun, Aug 10, 2008 at 12:12 AM, Doron Cohen <cdoronc@gmail.com> wrote:

> >
> > Ok, I'm not near any documentation now, but I think
> > throwing an exception is overkill. As I remember
> > all you have to do is return false from your collector
> > and that'll stop the search. But verify that.
> >
>
> That would have been much cleaner, however collect() is a void,
> so throwing a (runtime) exception is currently the only way a
> collector can stop the search.
>

------=_Part_12735_3274088.1218376972173--

From java-user-return-35421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 10 14:10:35 2008
Return-Path: <java-user-return-35421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73863 invoked from network); 10 Aug 2008 14:10:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2008 14:10:35 -0000
Received: (qmail 36752 invoked by uid 500); 10 Aug 2008 14:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36720 invoked by uid 500); 10 Aug 2008 14:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36709 invoked by uid 99); 10 Aug 2008 14:10:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 07:10:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.88 as permitted sender)
Received: from [65.55.111.88] (HELO blu0-omc2-s13.blu0.hotmail.com) (65.55.111.88)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 14:09:29 +0000
Received: from BLU149-W27 ([65.55.111.71]) by blu0-omc2-s13.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sun, 10 Aug 2008 07:09:56 -0700
Message-ID: <BLU149-W276A57267B8DC12B05B9B8B9760@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_9b53ca8a-6b6f-416a-b4f1-79a44effb601_"
X-Originating-IP: [96.32.245.110]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Deleting documents ...
Date: Sun, 10 Aug 2008 10:09:56 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 10 Aug 2008 14:09:56.0411 (UTC) FILETIME=[C46608B0:01C8FAF2]
X-Virus-Checked: Checked by ClamAV on apache.org

--_9b53ca8a-6b6f-416a-b4f1-79a44effb601_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'd like to delete some documents from my index.  Should I use the DeleteDo=
cument method in the IndexReader class or the IndexModifier class? Does it =
make a difference which one I use? Thank you.

_________________________________________________________________
Get more from your digital life.  Find out how.
http://www.windowslive.com/default.html?ocid=3DTXT_TAGLM_WL_Home2_082008=

--_9b53ca8a-6b6f-416a-b4f1-79a44effb601_--

From java-user-return-35422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 10 14:53:24 2008
Return-Path: <java-user-return-35422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82436 invoked from network); 10 Aug 2008 14:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2008 14:53:23 -0000
Received: (qmail 61548 invoked by uid 500); 10 Aug 2008 14:53:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61192 invoked by uid 500); 10 Aug 2008 14:53:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61181 invoked by uid 99); 10 Aug 2008 14:53:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 07:53:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 14:52:17 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1492486wra.21
        for <java-user@lucene.apache.org>; Sun, 10 Aug 2008 07:52:43 -0700 (PDT)
Received: by 10.90.53.5 with SMTP id b5mr496502aga.19.1218379963787;
        Sun, 10 Aug 2008 07:52:43 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id g3sm392437wra.2.2008.08.10.07.52.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 10 Aug 2008 07:52:43 -0700 (PDT)
Message-Id: <4EF1D7C5-401A-4F7E-8C86-BCF721718B9B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <BLU149-W276A57267B8DC12B05B9B8B9760@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Deleting documents ...
Date: Sun, 10 Aug 2008 10:52:42 -0400
References: <BLU149-W276A57267B8DC12B05B9B8B9760@phx.gbl>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually it's usually best to use the deleteDocuments method in  
IndexWriter since it saves you having to close/open IndexWriter &  
IndexReader back and forth to do the deletions.

IndexModifier is deprecated.

Mike

Dragon Fly wrote:

> I'd like to delete some documents from my index.  Should I use the  
> DeleteDocument method in the IndexReader class or the IndexModifier  
> class? Does it make a difference which one I use? Thank you.
>
> _________________________________________________________________
> Get more from your digital life.  Find out how.
> http://www.windowslive.com/default.html?ocid=TXT_TAGLM_WL_Home2_082008


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 10 18:58:51 2008
Return-Path: <java-user-return-35423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53851 invoked from network); 10 Aug 2008 18:58:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2008 18:58:51 -0000
Received: (qmail 77186 invoked by uid 500); 10 Aug 2008 18:58:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77154 invoked by uid 500); 10 Aug 2008 18:58:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77143 invoked by uid 99); 10 Aug 2008 18:58:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 11:58:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.86 as permitted sender)
Received: from [65.55.111.86] (HELO blu0-omc2-s11.blu0.hotmail.com) (65.55.111.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Aug 2008 18:57:44 +0000
Received: from BLU149-W25 ([65.55.111.71]) by blu0-omc2-s11.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sun, 10 Aug 2008 11:57:50 -0700
Message-ID: <BLU149-W2513433A18B0A7952DFE9EB9760@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_b50baa3e-3824-463c-ac3b-39cafb033dd4_"
X-Originating-IP: [96.32.245.110]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Deleting documents ...
Date: Sun, 10 Aug 2008 14:57:50 -0400
Importance: Normal
In-Reply-To: <4EF1D7C5-401A-4F7E-8C86-BCF721718B9B@mikemccandless.com>
References: <BLU149-W276A57267B8DC12B05B9B8B9760@phx.gbl>
 <4EF1D7C5-401A-4F7E-8C86-BCF721718B9B@mikemccandless.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 10 Aug 2008 18:57:50.0362 (UTC) FILETIME=[FC79C7A0:01C8FB1A]
X-Virus-Checked: Checked by ClamAV on apache.org

--_b50baa3e-3824-463c-ac3b-39cafb033dd4_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

OK=2C thank you.

> From: lucene@mikemccandless.com
> To: java-user@lucene.apache.org
> Subject: Re: Deleting documents ...
> Date: Sun=2C 10 Aug 2008 10:52:42 -0400
>=20
>=20
> Actually it's usually best to use the deleteDocuments method in =20
> IndexWriter since it saves you having to close/open IndexWriter & =20
> IndexReader back and forth to do the deletions.
>=20
> IndexModifier is deprecated.
>=20
> Mike
>=20
> Dragon Fly wrote:
>=20
> > I'd like to delete some documents from my index.  Should I use the =20
> > DeleteDocument method in the IndexReader class or the IndexModifier =20
> > class? Does it make a difference which one I use? Thank you.
> >
> > _________________________________________________________________
> > Get more from your digital life.  Find out how.
> > http://www.windowslive.com/default.html?ocid=3DTXT_TAGLM_WL_Home2_08200=
8
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Got Game? Win Prizes in the Windows Live Hotmail Mobile Summer Games Trivia=
 Contest
http://www.gowindowslive.com/summergames?ocid=3DTXT_TAGHM=

--_b50baa3e-3824-463c-ac3b-39cafb033dd4_--

From java-user-return-35424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 08:40:48 2008
Return-Path: <java-user-return-35424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14140 invoked from network); 11 Aug 2008 08:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 08:40:47 -0000
Received: (qmail 93207 invoked by uid 500); 11 Aug 2008 08:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93165 invoked by uid 500); 11 Aug 2008 08:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93154 invoked by uid 99); 11 Aug 2008 08:40:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 01:40:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.247.81.221] (HELO maximus.getnetvps.net) (63.247.81.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 08:39:42 +0000
Received: (qmail 13994 invoked by uid 48); 11 Aug 2008 10:40:07 +0200
Received: from host-84-205-224-10.cpe.syzefxis.ote.gr
	(host-84-205-224-10.cpe.syzefxis.ote.gr [84.205.224.10]) by webmail.tera.gr
	(Horde MIME library) with HTTP; Mon, 11 Aug 2008 10:40:07 +0200
Message-ID: <20080811104007.7wxani7s0k084c04@webmail.tera.gr>
Date: Mon, 11 Aug 2008 10:40:07 +0200
From: jim@tera.gr
To: java-user@lucene.apache.org
Subject: Highlight huge documents
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

I am using Highlighter to highlight query terms in documents getting  
from a database founded from lucene search.
My problem is that when i display the full document, highlighter works  
fine for most of documents but if the document is huge the highlighter  
returns only a part of document. As i ve seen in source of  
Hightlighter there are

	public static final  int DEFAULT_MAX_DOC_BYTES_TO_ANALYZE=50*1024;
	private int maxDocBytesToAnalyze=DEFAULT_MAX_DOC_BYTES_TO_ANALYZE;

Is it save to change the value of DEFAULT_MAX_DOC_BYTES_TO_ANALYZE to  
bigger value?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 08:48:25 2008
Return-Path: <java-user-return-35425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17430 invoked from network); 11 Aug 2008 08:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 08:48:25 -0000
Received: (qmail 99613 invoked by uid 500); 11 Aug 2008 08:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99257 invoked by uid 500); 11 Aug 2008 08:48:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99246 invoked by uid 99); 11 Aug 2008 08:48:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 01:48:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 08:47:22 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1802105wfc.20
        for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 01:47:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=yVQGVuBnpbwgbuiLh36lXZ3eg2F6339IEXO9eEGiG/0=;
        b=gMjC2pa+wsqrCrkGAvmU24YRUIPNsW+Uk8MZwXQZpYuC8r6zPplFu4hVZhiP+Imexk
         UuWHKRxCu7okAgN8EMcmRBBzF9XV0xpDKED1z6uxNncrpG2G6wG8TpD9Bj5AfmUqpMN8
         GS9jSsHLLC3WpmuFq2swHVcX+yDQjBu5F/ePc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uHqZZmACrpKNe960HrozKNR2/7tnHG0Ad/3PiGB/NAeSe69mdG81rCME0zCRpXaQm1
         co8IP5tVQ50GJYrXdbB5nSebZrYQ8i7EKrUNvOYsaKNZ5/pN53TYI1qKnKeSXsXUGhXy
         DWhEOeMKjybly5LGHDutebj9CMQoxs+g5V/Vs=
Received: by 10.142.194.1 with SMTP id r1mr2022255wff.192.1218444453258;
        Mon, 11 Aug 2008 01:47:33 -0700 (PDT)
Received: by 10.142.221.17 with HTTP; Mon, 11 Aug 2008 01:47:33 -0700 (PDT)
Message-ID: <e05f0fd10808110147r6b61b045l5ecbc7fd3cb6566a@mail.gmail.com>
Date: Mon, 11 Aug 2008 11:47:33 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlight huge documents
In-Reply-To: <20080811104007.7wxani7s0k084c04@webmail.tera.gr>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21264_9748606.1218444453240"
References: <20080811104007.7wxani7s0k084c04@webmail.tera.gr>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21264_9748606.1218444453240
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I believe Highlighter.setMaxDocBytesToAnalyze(int byteCount) should be used
for this.

On Mon, Aug 11, 2008 at 11:40 AM, <jim@tera.gr> wrote:

> Hello
>
> I am using Highlighter to highlight query terms in documents getting from a
> database founded from lucene search.
> My problem is that when i display the full document, highlighter works fine
> for most of documents but if the document is huge the highlighter returns
> only a part of document. As i ve seen in source of Hightlighter there are
>
>        public static final  int DEFAULT_MAX_DOC_BYTES_TO_ANALYZE=50*1024;
>        private int maxDocBytesToAnalyze=DEFAULT_MAX_DOC_BYTES_TO_ANALYZE;
>
> Is it save to change the value of DEFAULT_MAX_DOC_BYTES_TO_ANALYZE to
> bigger value?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21264_9748606.1218444453240--

From java-user-return-35426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 09:46:51 2008
Return-Path: <java-user-return-35426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43618 invoked from network); 11 Aug 2008 09:46:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 09:46:51 -0000
Received: (qmail 42488 invoked by uid 500); 11 Aug 2008 09:46:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42459 invoked by uid 500); 11 Aug 2008 09:46:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42448 invoked by uid 99); 11 Aug 2008 09:46:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 02:46:43 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.247.81.221] (HELO maximus.getnetvps.net) (63.247.81.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 09:45:47 +0000
Received: (qmail 8176 invoked by uid 48); 11 Aug 2008 11:45:14 +0200
Received: from host-84-205-224-10.cpe.syzefxis.ote.gr
	(host-84-205-224-10.cpe.syzefxis.ote.gr [84.205.224.10]) by webmail.tera.gr
	(Horde MIME library) with HTTP; Mon, 11 Aug 2008 11:45:14 +0200
Message-ID: <20080811114514.gwkuz377z4gw4ww8@webmail.tera.gr>
Date: Mon, 11 Aug 2008 11:45:14 +0200
From: jim@tera.gr
To: java-user@lucene.apache.org
Subject: Re: Re: Highlight huge documents
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-Virus-Checked: Checked by ClamAV on apache.org

it works!! Thanks



I believe Highlighter.setMaxDocBytesToAnalyze(int byteCount) should be used
for this.

On Mon, Aug 11, 2008 at 11:40 AM, <jim@tera.gr> wrote:

> > Hello
> >
> > I am using Highlighter to highlight query terms in documents getting fro=
m a
> > database founded from lucene search.
> > My problem is that when i display the full document, highlighter works f=
ine
> > for most of documents but if the document is huge the highlighter return=
s
> > only a part of document. As i ve seen in source of Hightlighter there ar=
e
> >
> >        public static final  int DEFAULT_MAX_DOC_BYTES_TO_ANALYZE=3D50*10=
24;
> >        private int maxDocBytesToAnalyze=3DDEFAULT_MAX_DOC_BYTES_TO_ANALY=
ZE;
> >
> > Is it save to change the value of DEFAULT_MAX_DOC_BYTES_TO_ANALYZE to
> > bigger value?
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 15:26:46 2008
Return-Path: <java-user-return-35427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24085 invoked from network); 11 Aug 2008 15:26:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 15:26:46 -0000
Received: (qmail 20071 invoked by uid 500); 11 Aug 2008 15:26:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20049 invoked by uid 500); 11 Aug 2008 15:26:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20038 invoked by uid 99); 11 Aug 2008 15:26:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 08:26:38 -0700
X-ASF-Spam-Status: No, hits=-1.4 required=10.0
	tests=RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [150.228.43.65] (HELO post2.merrillcorp.com) (150.228.43.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 15:25:40 +0000
Received: from relay1.stp.mrll.com (relay.stp.mrll.com [150.228.20.20])
	by post2.merrillcorp.com (8.13.1/8.13.1/P2.8) with ESMTP id m7BFQ6wJ030483
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 10:26:06 -0500
Received: from EVS02.adminsys.mrll.com (stp2pmc01b.adminsys.mrll.com [150.228.20.42])
	by relay1.stp.mrll.com (8.13.1/8.13.1/R1.13) with ESMTP id m7BFQ6vW024683
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 10:26:06 -0500
Received: from 66.237.172.251 ([66.237.172.251]) by EVS02.adminsys.mrll.com ([150.228.20.47]) via Exchange Front-End Server webmail.merrillcorp.com ([172.30.19.181]) with Microsoft Exchange Server HTTP-DAV ;
 Mon, 11 Aug 2008 15:26:05 +0000
Received: from workstation29 by webmail.merrillcorp.com; 11 Aug 2008 11:26:04 -0400
Subject: Re: Term Based Meta Data
From: Martin Owens <martin.owens@merrillcorp.com>
To: java-user@lucene.apache.org
In-Reply-To: <489D034D.20101@gmail.com>
References: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>
	 <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>
	 <48988A70.6030903@gmail.com>
	 <1218229259.31484.4.camel@workstation29.ws.lextranet.com>
	 <489D034D.20101@gmail.com>
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Date: Mon, 11 Aug 2008 11:25:52 -0400
Message-Id: <1218468352.31484.8.camel@workstation29.ws.lextranet.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
X-Virus-Checked: Checked by ClamAV on apache.org


>     Following the history of Payloads from its beginnings 
> (https://issues.apache.org/jira/browse/LUCENE-755, 
> https://issues.apache.org/jira/browse/LUCENE-761, 
> https://issues.apache.org/jira/browse/LUCENE-834, 
> http://wiki.apache.org/lucene-java/Payload_Planning) it looks like 
> TermPostionsVector was never considered as part of the Payload 
> functionality.  I think this is based on the underlying index file 
> structure???  I don't see any way to get at a Payload other than through 
> a TermPositions object.  I don't think there is a way to translate code 
> which uses TermPositions to using TermPositionVector with regards to 
> payloads  -- but I welcome someone to show me how they could.

Very interesting, and it fills in a few missing bits.

>     Maybe there is some other work around.  What are you trying to 
> accomplish "historically" with TermPositionsVectors instead of 
> TermPositions?

Historically we've not been able to access the TermPositions object
because it seemed to require that the original text was stored and not
just indexed (although I can't see why) Perhaps I am mistaken?

We're not storing the text context because a) there is rather a lot of
it, b) we have the text files stored on special storage boxes mounted to
the webservers and they're using directly and c) It didn't seem worth
it.

Thoughts? So can I use the TermPositions object without the stored text?

Best Regards, Martin Owens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 15:37:25 2008
Return-Path: <java-user-return-35428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32643 invoked from network); 11 Aug 2008 15:37:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 15:37:25 -0000
Received: (qmail 38231 invoked by uid 500); 11 Aug 2008 15:37:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38208 invoked by uid 500); 11 Aug 2008 15:37:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38197 invoked by uid 99); 11 Aug 2008 15:37:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 08:37:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 15:36:20 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1825339wra.21
        for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 08:36:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=6EHGLoz+B7+GbT7V9Lb+ZhbN26aC3gB1KnX1QuiGVV4=;
        b=jnIFE7PilpifQ8uufnfwBJxUKyf6j3HPazKcqCTEXWVB7lrDxpT3C5GjDO6A+4kQ0U
         quTyJ4jUdO+Tp7hLwjKP8kRtUVqHUr7C8jkMVTQoZcTMfIe1XGC2LQdsCUJ9HdV2dpjp
         jAWm4pIote+LecBe+mBUDvHhqJiXAxrjrmMTM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=epJKEy6ChI597unpaf9l9h/AhkTOWjalik73NqN/SNwQyUP3iYAxHCFk6eoQ0VGm3z
         dTXgF7ddqWJXgrpwIId8oGAb2SUyXVRBX6DxxnFAgGEY/3h4jP67C7RgwzYIK4HBu5D8
         k3d+ijS7DazYOKJ/lpi93g3WajqKaftz+Vw/c=
Received: by 10.90.78.14 with SMTP id a14mr7344509agb.29.1218469007064;
        Mon, 11 Aug 2008 08:36:47 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 38sm1436654agd.18.2008.08.11.08.36.46
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 11 Aug 2008 08:36:46 -0700 (PDT)
Message-ID: <48A05C94.8080407@gmail.com>
Date: Mon, 11 Aug 2008 11:36:52 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Term Based Meta Data
References: <1217948491.6917.32.camel@workstation29.ws.lextranet.com>	 <2B7D1C90-4C00-4D32-9F0A-F36F36C4D1EF@mikemccandless.com>	 <48988A70.6030903@gmail.com>	 <1218229259.31484.4.camel@workstation29.ws.lextranet.com>	 <489D034D.20101@gmail.com> <1218468352.31484.8.camel@workstation29.ws.lextranet.com>
In-Reply-To: <1218468352.31484.8.camel@workstation29.ws.lextranet.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If I were feeling adventurous, and I wanted to help out Mark with 
Lucene-1001, I'd try this:

Get the trunk and apply Lucene-1001.

Index all of your docs with the highlight coords as payloads.

At highlight time, do something like the SpanHighlighter does - I've got 
a class called something like PayloadSpansUtil  to help out with this. 
You want to index the doc to be highlighted into a MemoryIndex, and then 
pass an IndexReader off that to the util class - like the 
SpanHighlighter, it will convert a Query into a SpanQuery approximation, 
but instead of getting positions for matches, it will collect all of the 
payloads for matches.

Now run through the payloads and make a nice yellow/orange translucent 
block over each hit in the original image using the coords from each 
payload.


- Mark


Martin Owens wrote:
>>     Following the history of Payloads from its beginnings 
>> (https://issues.apache.org/jira/browse/LUCENE-755, 
>> https://issues.apache.org/jira/browse/LUCENE-761, 
>> https://issues.apache.org/jira/browse/LUCENE-834, 
>> http://wiki.apache.org/lucene-java/Payload_Planning) it looks like 
>> TermPostionsVector was never considered as part of the Payload 
>> functionality.  I think this is based on the underlying index file 
>> structure???  I don't see any way to get at a Payload other than through 
>> a TermPositions object.  I don't think there is a way to translate code 
>> which uses TermPositions to using TermPositionVector with regards to 
>> payloads  -- but I welcome someone to show me how they could.
>>     
>
> Very interesting, and it fills in a few missing bits.
>
>   
>>     Maybe there is some other work around.  What are you trying to 
>> accomplish "historically" with TermPositionsVectors instead of 
>> TermPositions?
>>     
>
> Historically we've not been able to access the TermPositions object
> because it seemed to require that the original text was stored and not
> just indexed (although I can't see why) Perhaps I am mistaken?
>
> We're not storing the text context because a) there is rather a lot of
> it, b) we have the text files stored on special storage boxes mounted to
> the webservers and they're using directly and c) It didn't seem worth
> it.
>
> Thoughts? So can I use the TermPositions object without the stored text?
>
> Best Regards, Martin Owens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 18:16:00 2008
Return-Path: <java-user-return-35429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9968 invoked from network); 11 Aug 2008 18:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 18:15:59 -0000
Received: (qmail 71583 invoked by uid 500); 11 Aug 2008 18:15:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71541 invoked by uid 500); 11 Aug 2008 18:15:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71530 invoked by uid 99); 11 Aug 2008 18:15:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 11:15:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 18:14:55 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B7BFC71C435; Mon, 11 Aug 2008 11:14:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B10E271C429
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 11:14:52 -0700 (PDT)
Date: Mon, 11 Aug 2008 11:14:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: escaping special characters
In-Reply-To: <OFBB2BE60C.829AFAA7-ON8525749E.00192324-8525749E.00193574@fin.equifax.com>
Message-ID: <Pine.LNX.4.62.0808111114090.16869@radix.cryptio.net>
References: <OFBB2BE60C.829AFAA7-ON8525749E.00192324-8525749E.00193574@fin.equifax.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: can i escape built in lucene keywords like OR, AND aswell?

as of the last time i checked: no, they're baked into the grammer.

(that may have changed when it switchedfrom a javac to a flex grammer 
though, so i'm not 100% positive)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 18:33:53 2008
Return-Path: <java-user-return-35430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28660 invoked from network); 11 Aug 2008 18:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 18:33:52 -0000
Received: (qmail 87303 invoked by uid 500); 11 Aug 2008 18:33:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87279 invoked by uid 500); 11 Aug 2008 18:33:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87268 invoked by uid 99); 11 Aug 2008 18:33:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 11:33:44 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 18:32:49 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: escaping special characters
Date: Mon, 11 Aug 2008 14:30:13 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59FD6@SUEXCL-02.ad.syr.edu>
In-Reply-To: <Pine.LNX.4.62.0808111114090.16869@radix.cryptio.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: escaping special characters
Thread-Index: Acj73lJ4GVRmXFdQR6y37G63y4dTPQAASIKg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 08/11/2008 at 2:14 PM, Chris Hostetter wrote:
> Aravind R Yarram wrote:
> > can i escape built in lucene keywords like OR, AND aswell?
>=20
> as of the last time i checked: no, they're baked into the grammer.

I have not tested this, but I've read somewhere on this list that =
enclosing OR and AND in double quotes effectively escapes them.

> (that may have changed when it switchedfrom a javac to a flex grammer
> though, so i'm not 100% positive)

Although the StandardTokenizer was switched about a year ago from a =
JavaCC to a JFlex grammar, QueryParser's grammar remains in the JavaCC =
camp.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 18:44:49 2008
Return-Path: <java-user-return-35431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37120 invoked from network); 11 Aug 2008 18:44:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 18:44:49 -0000
Received: (qmail 4962 invoked by uid 500); 11 Aug 2008 18:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4675 invoked by uid 500); 11 Aug 2008 18:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4664 invoked by uid 99); 11 Aug 2008 18:44:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 11:44:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 18:43:45 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m7BIhnsT021336
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 14:43:50 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48A08865.1070205@informatics.jax.org>
Date: Mon, 11 Aug 2008 14:43:49 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: escaping special characters
References: <9294E20AED46934EA459020706463F94C59FD6@SUEXCL-02.ad.syr.edu>
In-Reply-To: <9294E20AED46934EA459020706463F94C59FD6@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.8.11.182900
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1500_1599 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __STOCK_PHRASE_7 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

You can simply change your input string to lowercase before passing it 
to the analyzers, which will give you the effect of escaping the boolean 
operators.  (I.E you will now search on and or and not)  Remember 
however that these are extremely common words, and chances are high that 
you are removing them via your stop words list in your analyzer.  This 
is also assuming you are using an analyzer that does lowercasing as part 
of its normal processing, which many do.

Matt

Steven A Rowe wrote:
> On 08/11/2008 at 2:14 PM, Chris Hostetter wrote:
>   
>> Aravind R Yarram wrote:
>>     
>>> can i escape built in lucene keywords like OR, AND aswell?
>>>       
>> as of the last time i checked: no, they're baked into the grammer.
>>     
>
> I have not tested this, but I've read somewhere on this list that enclosing OR and AND in double quotes effectively escapes them.
>
>   
>> (that may have changed when it switchedfrom a javac to a flex grammer
>> though, so i'm not 100% positive)
>>     
>
> Although the StandardTokenizer was switched about a year ago from a JavaCC to a JFlex grammar, QueryParser's grammar remains in the JavaCC camp.
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 18:49:43 2008
Return-Path: <java-user-return-35432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41190 invoked from network); 11 Aug 2008 18:49:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 18:49:43 -0000
Received: (qmail 9424 invoked by uid 500); 11 Aug 2008 18:49:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9392 invoked by uid 500); 11 Aug 2008 18:49:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9381 invoked by uid 99); 11 Aug 2008 18:49:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 11:49:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 18:48:39 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1910621wra.21
        for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 11:48:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=h7zv9rflesoI7hGDfrlCunxKT7mEAemEvmBYntTLshQ=;
        b=wu91wboOP15jk7xaWx85WOX+pgQrA/Fcti1DFZoujrgf1JpLeU48dd9/9BbUTarDww
         3bwQPrOQuN48+9LiqaedgnPqvNJwv94DSGLcwX7H9aNb7iDcaxPOQgR+/yK13agVANa1
         qoqQoKkHBv+R8ZkpBJU3qCBmzTEvUG6TOWt2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=gWr/CbLFHjZ0iD5eoKaH7uXtTPAflyfxf9JS9yVdnTFW87h3LTQ7iAihQULPftuqUV
         EakIV9F2CLKXJnyEo0Mu4iUb36/mmb5f9gepJhaL9NOGwI4SmMFuFrsd/cpFyQd8cz2R
         7en5D+nGFD+B+V/aw6mNiV/sS3S9G5DF4cnDc=
Received: by 10.90.78.10 with SMTP id a10mr11073876agb.38.1218480529232;
        Mon, 11 Aug 2008 11:48:49 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 36sm4361664agc.9.2008.08.11.11.48.48
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 11 Aug 2008 11:48:48 -0700 (PDT)
Message-ID: <48A08996.6070709@gmail.com>
Date: Mon, 11 Aug 2008 14:48:54 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: escaping special characters
References: <9294E20AED46934EA459020706463F94C59FD6@SUEXCL-02.ad.syr.edu>
In-Reply-To: <9294E20AED46934EA459020706463F94C59FD6@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=iso-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Steven A Rowe wrote:
> On 08/11/2008 at 2:14 PM, Chris Hostetter wrote:
>   
>> Aravind R Yarram wrote:
>>     
>>> can i escape built in lucene keywords like OR, AND aswell?
>>>       
>> as of the last time i checked: no, they're baked into the grammer.
>>     
>
> I have not tested this, but I've read somewhere on this list that enclosing OR and AND in double quotes effectively escapes them.
>   
Yeah, this works - it short circuits the token as an operator by 
triggering a quoted match instead - which eventually just pops out the 
single term in the quotes.

But also, have you just tried escaping with a simple backslash? Seems to 
work for me with a simple test.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 19:14:10 2008
Return-Path: <java-user-return-35433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51663 invoked from network); 11 Aug 2008 19:14:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 19:14:08 -0000
Received: (qmail 41162 invoked by uid 500); 11 Aug 2008 19:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41135 invoked by uid 500); 11 Aug 2008 19:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41124 invoked by uid 99); 11 Aug 2008 19:14:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 12:14:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.103 as permitted sender)
Received: from [216.46.96.103] (HELO smtp11.atl.equifax.com) (216.46.96.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 19:13:04 +0000
Received: from postoffice20.equifax.com (unknown [192.168.4.40])
	by smtp11.atl.equifax.com (Postfix) with ESMTP id BC0403266
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 15:06:15 -0400 (EDT)
Received: from 172.18.152.142 (wetcisdlppsmtp2.fin.equifax.com [172.18.152.142])
	by postoffice20.equifax.com (Symantec Mail Security) with SMTP id CA171558003
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 15:12:50 -0400 (EDT)
X-AuditID: c0a80428-abe6abb000000fe5-df-48a08f32eb67
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice20.equifax.com (Symantec Mail Security) with ESMTP id A2ECC558004
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 15:12:50 -0400 (EDT)
In-Reply-To: <48A08996.6070709@gmail.com>
To: java-user@lucene.apache.org
Subject: Clarification on deletion process...
Message-ID: <OFA33C18AA.B7DD3648-ON852574A2.00696053-852574A2.00698FDD@fin.equifax.com>
Date: Mon, 11 Aug 2008 15:12:51 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 00698FD5852574A2_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
X-Disclaimed: 46391
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00698FD5852574A2_=
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

The documentation for delete operation seems to be confusing (i am going=20
thru the book and also posted in the books forums...), so appreciate if=20
someone can let me know if my below understanding is correct.

When i delete a document from the index

1) It is marked for deletion in the BUFFER until I commit/close the=20
writer. Does that mean the document is still visible for the Searcher?

2) Once i commit/close the writer then IT IS JUST MARKED for delete in the =

Index. At this time the document is NOT visible for the Searcher, but the=20
document is still taking up the space in the index.

3) Once the index is merged (optimized), it is removed from the index

Regards,=20
Aravind R Yarram=20
This message contains information from Equifax Inc. which may be confidenti=
al and privileged.  If you are not an intended recipient, please refrain fr=
om any disclosure, copying, distribution or use of this information and not=
e that such actions are prohibited.  If you have received this transmission=
 in error, please notify by e-mail postmaster@equifax.com.

--=_alternative 00698FD5852574A2_=--

From java-user-return-35434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 21:06:36 2008
Return-Path: <java-user-return-35434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21554 invoked from network); 11 Aug 2008 21:06:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 21:06:36 -0000
Received: (qmail 94569 invoked by uid 500); 11 Aug 2008 21:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94543 invoked by uid 500); 11 Aug 2008 21:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94522 invoked by uid 99); 11 Aug 2008 21:06:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 14:06:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.103 as permitted sender)
Received: from [216.46.96.103] (HELO smtp11.atl.equifax.com) (216.46.96.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 21:05:31 +0000
Received: from postoffice20.equifax.com (unknown [192.168.4.40])
	by smtp11.atl.equifax.com (Postfix) with ESMTP id C13F53321
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 16:58:43 -0400 (EDT)
Received: from wetcisdlppsmtp1.eis.equifax.com (wetcisdlppsmtp1.fin.equifax.com [172.18.152.141])
	by postoffice20.equifax.com (Symantec Mail Security) with SMTP id 00692558002
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 17:05:19 -0400 (EDT)
X-AuditID: c0a80428-a9e66bb000000fe5-c0-48a0a98f429f
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice20.equifax.com (Symantec Mail Security) with ESMTP id C558F558002
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 17:05:18 -0400 (EDT)
In-Reply-To: <48A08996.6070709@gmail.com>
To: java-user@lucene.apache.org
Subject: Field sizes: maxFieldLength
Message-ID: <OFA608AF64.5E063E47-ON852574A2.0073A9A1-852574A2.0073DDE0@fin.equifax.com>
Date: Mon, 11 Aug 2008 17:05:24 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 0073DDD5852574A2_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
X-Disclaimed: 24295
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0073DDD5852574A2_=
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi all -

I know in advance that each of the fileds i index doesnt go more than=20
1000, Can i gain any performance improvement while writing the index by=20
limiting the maxFieldLength to 200?=20

tx
Regards,=20
Aravind R Yarram=20
This message contains information from Equifax Inc. which may be confidenti=
al and privileged.  If you are not an intended recipient, please refrain fr=
om any disclosure, copying, distribution or use of this information and not=
e that such actions are prohibited.  If you have received this transmission=
 in error, please notify by e-mail postmaster@equifax.com.

--=_alternative 0073DDD5852574A2_=--

From java-user-return-35435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 21:14:41 2008
Return-Path: <java-user-return-35435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24269 invoked from network); 11 Aug 2008 21:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 21:14:41 -0000
Received: (qmail 4837 invoked by uid 500); 11 Aug 2008 21:14:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4811 invoked by uid 500); 11 Aug 2008 21:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4800 invoked by uid 99); 11 Aug 2008 21:14:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 14:14:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 21:13:36 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1974942wra.21
        for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 14:13:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=esL9hCPS8IziA6Bt4YSPKpYHIiXoUG3HNbvNq7CXgPY=;
        b=w7cJPwYdHbO62a2ziAhWVQCnx617tmd+qGFvYvvITLeVQQaaN593gmOVkBIr6nsAtT
         mBoCxUaJh5otpxNplGMCIRyfO2FfHiUaUIQnyS/ky8GxbDKHKJwhF2NifzL4HcbNPSnI
         1Ozas85kjDgmdocnnqJC4Wd1ZnEuz65F8TFHA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=OHDyZutinfoETypwAMqLZl2nocsqfXXD5Sty8eTfjWOL2CGpIZdXWRgpEzRe62lxYu
         Xxmws6IL5b40abvcy6wJQzKHrcw+C7yBbodqjswstw2ixI50Em9dPUAlGZQd9BECLyS8
         xkzLT38AcxJp98z5DbF/54lscoz4BSWUbL9iw=
Received: by 10.90.78.10 with SMTP id a10mr11302780agb.38.1218489227009;
        Mon, 11 Aug 2008 14:13:47 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 36sm4517165agc.9.2008.08.11.14.13.46
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 11 Aug 2008 14:13:46 -0700 (PDT)
Message-ID: <48A0AB91.2040000@gmail.com>
Date: Mon, 11 Aug 2008 17:13:53 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Field sizes: maxFieldLength
References: <OFA608AF64.5E063E47-ON852574A2.0073A9A1-852574A2.0073DDE0@fin.equifax.com>
In-Reply-To: <OFA608AF64.5E063E47-ON852574A2.0073A9A1-852574A2.0073DDE0@fin.equifax.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Aravind.Yarram@equifax.com wrote:
> Hi all -
>
> I know in advance that each of the fileds i index doesnt go more than 
> 1000, Can i gain any performance improvement while writing the index by 
> limiting the maxFieldLength to 200? 
>
> tx
> Regards, 
> Aravind R Yarram 
> This message contains information from Equifax Inc. which may be confidential and privileged.  If you are not an intended recipient, please refrain from any disclosure, copying, distribution or use of this information and note that such actions are prohibited.  If you have received this transmission in error, please notify by e-mail postmaster@equifax.com.
>
>   
Its 10000. Sure, if you have a lot of docs between 200 and 10000, 
indexing less will be faster. But you will only be able to search on 
those first 200 tokens for any doc longer.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 21:21:27 2008
Return-Path: <java-user-return-35436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26598 invoked from network); 11 Aug 2008 21:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 21:21:27 -0000
Received: (qmail 14696 invoked by uid 500); 11 Aug 2008 21:21:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14669 invoked by uid 500); 11 Aug 2008 21:21:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14657 invoked by uid 99); 11 Aug 2008 21:21:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 14:21:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.102 as permitted sender)
Received: from [216.46.96.102] (HELO smtp10.atl.equifax.com) (216.46.96.102)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 21:20:16 +0000
Received: from postoffice20.equifax.com (unknown [192.168.4.40])
	by smtp10.atl.equifax.com (Postfix) with ESMTP id 67A5730B0
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 17:10:24 -0400 (EDT)
Received: from wetcisdlppsmtp1.eis.equifax.com (wetcisdlppsmtp1.fin.equifax.com [172.18.152.141])
	by postoffice20.equifax.com (Symantec Mail Security) with SMTP id EA8DB558003
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 17:20:03 -0400 (EDT)
X-AuditID: c0a80428-ab669bb000000fe5-3e-48a0ad0311a9
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice20.equifax.com (Symantec Mail Security) with ESMTP id B064C558003
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 17:20:03 -0400 (EDT)
In-Reply-To: <48A0AB91.2040000@gmail.com>
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: Re: Field sizes: maxFieldLength
Message-ID: <OFD244D34E.7B07E702-ON852574A2.00750532-852574A2.00753816@fin.equifax.com>
Date: Mon, 11 Aug 2008 17:20:11 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 00753813852574A2_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
X-Disclaimed: 24379
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00753813852574A2_=
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

tx for the response but i think i didnt make my question clear...

If i am indexing a filed that can at the max contain 1000 fileds, does it=20
help in improving performance if i let Lucene know IN ADVANCE about 1000?






Mark Miller <markrmiller@gmail.com>=20
08/11/2008 05:13 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: Field sizes: maxFieldLength






Aravind.Yarram@equifax.com wrote:
> Hi all -
>
> I know in advance that each of the fileds i index doesnt go more than=20
> 1000, Can i gain any performance improvement while writing the index by=20
> limiting the maxFieldLength to 200?=20
>
> tx
> Regards,=20
> Aravind R Yarram=20
> This message contains information from Equifax Inc. which may be=20
confidential and privileged.  If you are not an intended recipient, please =

refrain from any disclosure, copying, distribution or use of this=20
information and note that such actions are prohibited.  If you have=20
received this transmission in error, please notify by e-mail=20
postmaster@equifax.com.
>
>=20
Its 10000. Sure, if you have a lot of docs between 200 and 10000,=20
indexing less will be faster. But you will only be able to search on=20
those first 200 tokens for any doc longer.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message contains information from Equifax Inc. which may be confidenti=
al and privileged.  If you are not an intended recipient, please refrain fr=
om any disclosure, copying, distribution or use of this information and not=
e that such actions are prohibited.  If you have received this transmission=
 in error, please notify by e-mail postmaster@equifax.com.

--=_alternative 00753813852574A2_=--

From java-user-return-35437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 21:28:25 2008
Return-Path: <java-user-return-35437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32366 invoked from network); 11 Aug 2008 21:28:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 21:28:25 -0000
Received: (qmail 25745 invoked by uid 500); 11 Aug 2008 21:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24920 invoked by uid 500); 11 Aug 2008 21:28:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24909 invoked by uid 99); 11 Aug 2008 21:28:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 14:28:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.178.245 as permitted sender)
Received: from [64.233.178.245] (HELO hs-out-0708.google.com) (64.233.178.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 21:27:20 +0000
Received: by hs-out-0708.google.com with SMTP id 4so264682hsl.5
        for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 14:27:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=BDuV+aLh7MVnvTsVwZ4vDldDTQF6cd5FIjimeelrO4o=;
        b=YRfxoSnayAL/5R33hhzxN3x3Id2RjATao+XTDxGRc1HCpA1O1FSmIwRddr9HPFE3MX
         lvEUo9YmC34uMabsr0SeY1mpxXq4I+i1uspjJr7s1xHJMZIud+F9GfP0V7xqKck69OkB
         S9JzfBw+nDz077KkyiIT7I8XTJcNRr/2YetN8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=WRXWTMjgbJ1NzH6l/BVt5YdO3uBz5gM+9BTlXmBLQHFDEvql16tFiTFD6j/Gy71s3R
         WmeuBzFibMcfsm/FxVUTMPjqrbTulECyKwcqy7L22NnoX+6MAGzqsf5/bSArSbzLDdsX
         LEcDf9r3TX2ho33DK61+bE2Tw4IEMhNERsgZY=
Received: by 10.90.31.6 with SMTP id e6mr11287692age.90.1218490067550;
        Mon, 11 Aug 2008 14:27:47 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 38sm4507128agd.18.2008.08.11.14.27.46
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 11 Aug 2008 14:27:47 -0700 (PDT)
Message-ID: <48A0AEDA.1030200@gmail.com>
Date: Mon, 11 Aug 2008 17:27:54 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Field sizes: maxFieldLength
References: <OFD244D34E.7B07E702-ON852574A2.00750532-852574A2.00753816@fin.equifax.com>
In-Reply-To: <OFD244D34E.7B07E702-ON852574A2.00750532-852574A2.00753816@fin.equifax.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The gist is: it doesn't help. That simply cuts long documents off at the 
knees on the assumption that its long enough already, that more won't 
add much value (and may add noise?). Its not used for any sort of 
optimizations...its a straight, just use the first n tokens from a document.

Aravind.Yarram@equifax.com wrote:
> tx for the response but i think i didnt make my question clear...
>
> If i am indexing a filed that can at the max contain 1000 fileds, does it 
> help in improving performance if i let Lucene know IN ADVANCE about 1000?
>
>
>
>
>
>
> Mark Miller <markrmiller@gmail.com> 
> 08/11/2008 05:13 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Field sizes: maxFieldLength
>
>
>
>
>
>
> Aravind.Yarram@equifax.com wrote:
>   
>> Hi all -
>>
>> I know in advance that each of the fileds i index doesnt go more than 
>> 1000, Can i gain any performance improvement while writing the index by 
>> limiting the maxFieldLength to 200? 
>>
>> tx
>> Regards, 
>> Aravind R Yarram 
>> This message contains information from Equifax Inc. which may be 
>>     
> confidential and privileged.  If you are not an intended recipient, please 
> refrain from any disclosure, copying, distribution or use of this 
> information and note that such actions are prohibited.  If you have 
> received this transmission in error, please notify by e-mail 
> postmaster@equifax.com.
>   
>>     
> Its 10000. Sure, if you have a lot of docs between 200 and 10000, 
> indexing less will be faster. But you will only be able to search on 
> those first 200 tokens for any doc longer.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message contains information from Equifax Inc. which may be confidential and privileged.  If you are not an intended recipient, please refrain from any disclosure, copying, distribution or use of this information and note that such actions are prohibited.  If you have received this transmission in error, please notify by e-mail postmaster@equifax.com.
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 21:32:57 2008
Return-Path: <java-user-return-35438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35735 invoked from network); 11 Aug 2008 21:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 21:32:56 -0000
Received: (qmail 29698 invoked by uid 500); 11 Aug 2008 21:32:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29660 invoked by uid 500); 11 Aug 2008 21:32:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29649 invoked by uid 99); 11 Aug 2008 21:32:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 14:32:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 21:31:53 +0000
Received: by py-out-1112.google.com with SMTP id z74so2158303pyg.9
        for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 14:32:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=qix58iumLcA5ATVM5oeUx5fYARaKKXR5kmSpwh5hG0k=;
        b=B3mebMlmk2iE9voD8h1A59GrnQlmYhifSUs97YvszRJscxyAFruevdpvT7vBWnCzZG
         qxoEy7cexZyHur7+aGyzWJ+mdWXcXi5D9l6coHBJqsejj2yxK19Xhcn08zX6CjkkQOsO
         HBzmMG6o3Dwxi7WCIYODyLtmjJ6ElO1HBLSBI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BZ1eXmfgpJX7LqkBzctCyhYNLc9n4QFXJ69n1x5yzm8WULzExdKFRJZwT3l48rvAQx
         /MEA6o7jM5wRQ2uYiQlFQUYIE07VXE14guimv43o54lDr2i5ebua+srjwWgQazj6dAA0
         MNlYB+CMoH9rqzgT1blzfRg0NBv+6yQCCbrrM=
Received: by 10.65.75.2 with SMTP id c2mr14527197qbl.58.1218490322953;
        Mon, 11 Aug 2008 14:32:02 -0700 (PDT)
Received: by 10.64.180.7 with HTTP; Mon, 11 Aug 2008 14:32:02 -0700 (PDT)
Message-ID: <ab0709bf0808111432v4615aa14rf27350159ebd5265@mail.gmail.com>
Date: Mon, 11 Aug 2008 17:32:02 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field sizes: maxFieldLength
In-Reply-To: <OFD244D34E.7B07E702-ON852574A2.00750532-852574A2.00753816@fin.equifax.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41131_7627185.1218490322918"
References: <48A0AB91.2040000@gmail.com>
	 <OFD244D34E.7B07E702-ON852574A2.00750532-852574A2.00753816@fin.equifax.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41131_7627185.1218490322918
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. Its just a simple number of terms taken from the document limiter used
on the assumption that text that long stops adding value, or starts adding
noise, or starts accelerating into diminishing returns at that point. No
optimizations are used based on it.

On Mon, Aug 11, 2008 at 5:20 PM, <Aravind.Yarram@equifax.com> wrote:

> tx for the response but i think i didnt make my question clear...
>
> If i am indexing a filed that can at the max contain 1000 fileds, does it
> help in improving performance if i let Lucene know IN ADVANCE about 1000?
>
>
>
>
>
>
> Mark Miller <markrmiller@gmail.com>
> 08/11/2008 05:13 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Field sizes: maxFieldLength
>
>
>
>
>
>
> Aravind.Yarram@equifax.com wrote:
> > Hi all -
> >
> > I know in advance that each of the fileds i index doesnt go more than
> > 1000, Can i gain any performance improvement while writing the index by
> > limiting the maxFieldLength to 200?
> >
> > tx
> > Regards,
> > Aravind R Yarram
> > This message contains information from Equifax Inc. which may be
> confidential and privileged.  If you are not an intended recipient, please
> refrain from any disclosure, copying, distribution or use of this
> information and note that such actions are prohibited.  If you have
> received this transmission in error, please notify by e-mail
> postmaster@equifax.com.
> >
> >
> Its 10000. Sure, if you have a lot of docs between 200 and 10000,
> indexing less will be faster. But you will only be able to search on
> those first 200 tokens for any doc longer.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> This message contains information from Equifax Inc. which may be
> confidential and privileged.  If you are not an intended recipient, please
> refrain from any disclosure, copying, distribution or use of this
> information and note that such actions are prohibited.  If you have received
> this transmission in error, please notify by e-mail postmaster@equifax.com
> .
>

------=_Part_41131_7627185.1218490322918--

From java-user-return-35439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 11 23:19:16 2008
Return-Path: <java-user-return-35439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98564 invoked from network); 11 Aug 2008 23:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2008 23:19:16 -0000
Received: (qmail 21850 invoked by uid 500); 11 Aug 2008 23:19:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21481 invoked by uid 500); 11 Aug 2008 23:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21470 invoked by uid 99); 11 Aug 2008 23:19:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 16:19:08 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 23:18:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KSget-0002jq-5d
	for java-user@lucene.apache.org; Mon, 11 Aug 2008 16:18:39 -0700
Message-ID: <18935560.post@talk.nabble.com>
Date: Mon, 11 Aug 2008 16:18:39 -0700 (PDT)
From: Jeff French <jeff@mdbconsulting.com>
To: java-user@lucene.apache.org
Subject: Query to ignore certain phrases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jeff@mdbconsulting.com
X-Virus-Checked: Checked by ClamAV on apache.org


We're trying to perform a query where if our intended search term/phrase is
part of a specific larger phrase, we want to ignore that particular match,
but not the entire document (unless of course there are no other hits with
our intended term/phrase). For example, a query like:

    "white house" UNLESS "russian white house"

should not produce a match on the phrase:

    "russian white house"

but should match:

    "white house"

Where this differs from the NOT operator is that we don't want to rule out a
document just because it contains "russian white house", we just want to
ignore the hit, so that this phrase:

    "... in the russian white house as opposed to the american white house
..."

would return the document.

Can this be accomplished using Lucene or Qsol QueryParser syntax, or do we
need to write something custom?
-- 
View this message in context: http://www.nabble.com/Query-to-ignore-certain-phrases-tp18935560p18935560.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 03:54:57 2008
Return-Path: <java-user-return-35440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1338 invoked from network); 12 Aug 2008 03:54:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 03:54:55 -0000
Received: (qmail 72374 invoked by uid 500); 12 Aug 2008 03:54:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72338 invoked by uid 500); 12 Aug 2008 03:54:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72327 invoked by uid 99); 12 Aug 2008 03:54:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 20:54:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 03:53:50 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 45D7D71C447; Mon, 11 Aug 2008 20:53:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3FC1971C43A
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 20:53:48 -0700 (PDT)
Date: Mon, 11 Aug 2008 20:53:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Field sizes: maxFieldLength
In-Reply-To: <OFA608AF64.5E063E47-ON852574A2.0073A9A1-852574A2.0073DDE0@fin.equifax.com>
Message-ID: <Pine.LNX.4.62.0808112052580.21869@radix.cryptio.net>
References: <OFA608AF64.5E063E47-ON852574A2.0073A9A1-852574A2.0073DDE0@fin.equifax.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: In-Reply-To: <48A08996.6070709@gmail.com>
: Subject: Field sizes: maxFieldLength

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 04:01:07 2008
Return-Path: <java-user-return-35441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5249 invoked from network); 12 Aug 2008 04:01:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 04:01:07 -0000
Received: (qmail 75132 invoked by uid 500); 12 Aug 2008 04:01:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75099 invoked by uid 500); 12 Aug 2008 04:01:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75088 invoked by uid 99); 12 Aug 2008 04:01:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Aug 2008 21:01:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 04:00:03 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1422071C33E; Mon, 11 Aug 2008 21:00:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 10C7871C316
	for <java-user@lucene.apache.org>; Mon, 11 Aug 2008 21:00:31 -0700 (PDT)
Date: Mon, 11 Aug 2008 21:00:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Clarification on deletion process...
In-Reply-To: <OFA33C18AA.B7DD3648-ON852574A2.00696053-852574A2.00698FDD@fin.equifax.com>
Message-ID: <Pine.LNX.4.62.0808112053530.21869@radix.cryptio.net>
References: <OFA33C18AA.B7DD3648-ON852574A2.00696053-852574A2.00698FDD@fin.equifax.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: When i delete a document from the index
	...

The answer to all of your questions is yes, however documents marked for 
deletion are also "removed" from segments whenever they are merged, which 
can happen on any add.

PS...

: In-Reply-To: <48A08996.6070709@gmail.com>
: Subject: Clarification on deletion process...

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 07:46:06 2008
Return-Path: <java-user-return-35442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16457 invoked from network); 12 Aug 2008 07:46:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 07:46:05 -0000
Received: (qmail 50434 invoked by uid 500); 12 Aug 2008 07:45:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50401 invoked by uid 500); 12 Aug 2008 07:45:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50390 invoked by uid 99); 12 Aug 2008 07:45:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 00:45:57 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 07:45:00 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1863228fgb.27
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 00:45:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Lyukmgp2YRahe8sj3Fez7mI7KD3ykTmKhyY/7giPSSM=;
        b=rH/o13P6iK/i4BDsLyT/Humx1Kjs+BW3ObrhPtTLk+TtPwDQae3o0HM4J34/IR52gN
         Q/Uckp062V57zXS8K7nyBVvgF5edZCEvOwBKDlfT7ZUQ4dP0IQDWe5dfNRyLo+YZZIkK
         P0nIdctkVBjTsN8isytTe78HE36hbDRjRwhc0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=S2+Zwnpq1XPNoHC3oDkMzub7slk1E8/7yE+N2t53YZ8JQn8EMuJeuLch6+M2t6Zkth
         FUXavDUoOjt4LnwHr29b4RZGhV5AL+/AIre4n4zIVbXJLsPMqX7WDHcu1YzrYUovmPeI
         qjQCXfM/NdeizsH3OU9UBeWSQFIK8cXnwFlu0=
Received: by 10.86.68.2 with SMTP id q2mr191471fga.78.1218527109691;
        Tue, 12 Aug 2008 00:45:09 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Tue, 12 Aug 2008 00:45:09 -0700 (PDT)
Message-ID: <e05f0fd10808120045t725dd0c7m6fc46c656f9b4c01@mail.gmail.com>
Date: Tue, 12 Aug 2008 10:45:09 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query to ignore certain phrases
In-Reply-To: <18935560.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4331_12988273.1218527109711"
References: <18935560.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4331_12988273.1218527109711
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can't see how to accomplish this without writing some special code,
and not just because of query parsing.

Phrases are searched by iterating the participating term
positions and when a match is found say for "b c" there is no way
to know whether another query "a b c d" matches exactly the corresponding
position.

Writing your own query to do this, one straightforward way is for its scorer

to maintain two exact phrase sub-scorers, but, (1) use for the score just
the
phraseFreq() found by the scorer of the inner phrase ("b c"), and (2)
if both phraseFreq() are the same - that of the inner phrase and that
of the outer phrase ("a b c d") ignore the document all together.

If this is where you're heading, start in the package javadocs for the
search package,
and see the code of PhraseScorer.

Span queries are another direction I would check for this, perhaps a higher
level
code can suffice with spans, but I don't know for sure.

Doron

On Tue, Aug 12, 2008 at 2:18 AM, Jeff French <jeff@mdbconsulting.com> wrote:

>
> We're trying to perform a query where if our intended search term/phrase is
> part of a specific larger phrase, we want to ignore that particular match,
> but not the entire document (unless of course there are no other hits with
> our intended term/phrase). For example, a query like:
>
>    "white house" UNLESS "russian white house"
>
> should not produce a match on the phrase:
>
>    "russian white house"
>
> but should match:
>
>    "white house"
>
> Where this differs from the NOT operator is that we don't want to rule out
> a
> document just because it contains "russian white house", we just want to
> ignore the hit, so that this phrase:
>
>    "... in the russian white house as opposed to the american white house
> ..."
>
> would return the document.
>
> Can this be accomplished using Lucene or Qsol QueryParser syntax, or do we
> need to write something custom?
> --
> View this message in context:
> http://www.nabble.com/Query-to-ignore-certain-phrases-tp18935560p18935560.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4331_12988273.1218527109711--

From java-user-return-35443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 07:48:33 2008
Return-Path: <java-user-return-35443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17866 invoked from network); 12 Aug 2008 07:48:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 07:48:32 -0000
Received: (qmail 58919 invoked by uid 500); 12 Aug 2008 07:48:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57891 invoked by uid 500); 12 Aug 2008 07:48:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57880 invoked by uid 99); 12 Aug 2008 07:48:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 00:48:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 07:47:27 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1864074fgb.27
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 00:47:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :content-transfer-encoding:mime-version:subject:date:x-mailer:from;
        bh=O7JBojZIGIu+BqSa1uG7KD7xN56yVWMxrPI3n8mgRxE=;
        b=UT0I6Oy5R7z6N/u2CCs3HlHWeEc1sZcQkLpfxS+xFkg2OGglSJugin+uBIgPyYNfwd
         NXE0Yfdz5n0ZCIuWOP6GeN6U+/LWo8YsHQAldppgwIZlPg+Q9p6+6v0M4Kx1ZJS8AxJZ
         h6evBrwTO/LtWSLRhmmFQ4LibLao6NsLrZl2A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:content-transfer-encoding:mime-version
         :subject:date:x-mailer:from;
        b=aZc6huO+5v1ahOveCp62hjl/i5gWBLvLae9osMmofvTit7FnwlXobyQiz3/N7R4YOY
         N5u5QVOZOjY0aGNcnB91zzrJQJAANIysQF4bl/llMnucgOgTs2j2W7gHyvY4Zkq6MUpg
         FSvG3z0gqMszAmAmb7vOQWeHeWVI5gtHqvlaE=
Received: by 10.86.91.12 with SMTP id o12mr9727065fgb.1.1218527274737;
        Tue, 12 Aug 2008 00:47:54 -0700 (PDT)
Received: from ?192.168.69.152? ( [84.174.63.166])
        by mx.google.com with ESMTPS id 3sm827242fge.3.2008.08.12.00.47.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 12 Aug 2008 00:47:53 -0700 (PDT)
Message-Id: <C158F5A8-BFF4-4C0D-ACBD-379DF314A0B7@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Hibernate Search
Date: Tue, 12 Aug 2008 09:47:50 +0200
X-Mailer: Apple Mail (2.926)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

what do you think about Hibernate Search to handle the indexing of  
database content? It often is a problem to have database and index  
coherent. So does anyone of you have experiences in using Hibernate  
Search there for?

Regards,
Sascha

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 08:57:33 2008
Return-Path: <java-user-return-35444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60189 invoked from network); 12 Aug 2008 08:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 08:57:33 -0000
Received: (qmail 33623 invoked by uid 500); 12 Aug 2008 08:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33592 invoked by uid 500); 12 Aug 2008 08:57:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33581 invoked by uid 99); 12 Aug 2008 08:57:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 01:57:25 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 08:56:27 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2274599wfc.20
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 01:56:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=72lwu1HQkc+xJAymsSXuIINHBP4QVfhP1MYMExWCc/M=;
        b=bu2TXvT3yDlErj+0JU2PHONJGIqirwSuhZZkczxf696JXbFKUxLn4l48R+rJjuOqID
         8pav69BvfI81AfZdxrV1P51E1BpQ2EshtXzkrG3t+Pj2b+50Yn9EG7Wok/IlHuNzSZ96
         sg5AkEX5HWI44r9KzjzpiLyguJGFDZNWlq4t0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=odrZ7lMWH85F2d1DUG5PEeq2QSFojKOZ2U27s4fvZUiiPvWljTE7Zu9V0dGbX+WVON
         wJVgi+9gxZ371P0RM8mPjxqCh0FGV0QUiY6dW6EbkWrtm47MmZMqa8fUY3nIyfaMXtz/
         iDKIOuDnv8Gd/DzRJUzun4o/WlvHxzK3gbsQo=
Received: by 10.142.232.20 with SMTP id e20mr2568394wfh.138.1218531415892;
        Tue, 12 Aug 2008 01:56:55 -0700 (PDT)
Received: by 10.143.29.10 with HTTP; Tue, 12 Aug 2008 01:56:55 -0700 (PDT)
Message-ID: <11975c90808120156j56f2961bg3f687a635a5da336@mail.gmail.com>
Date: Tue, 12 Aug 2008 11:56:55 +0300
From: "Alexander Aristov" <alexander.aristov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query to ignore certain phrases
In-Reply-To: <18935560.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_115967_8751945.1218531415881"
References: <18935560.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_115967_8751945.1218531415881
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think it should look something like this

"white house" NOT "russian white house"~1

http://lucene.apache.org/java/docs/queryparsersyntax.html#Escaping%20Special%20Characters

Alex

On 12/08/2008, Jeff French <jeff@mdbconsulting.com> wrote:
>
>
> We're trying to perform a query where if our intended search term/phrase is
> part of a specific larger phrase, we want to ignore that particular match,
> but not the entire document (unless of course there are no other hits with
> our intended term/phrase). For example, a query like:
>
>    "white house" UNLESS "russian white house"
>
> should not produce a match on the phrase:
>
>    "russian white house"
>
> but should match:
>
>    "white house"
>
> Where this differs from the NOT operator is that we don't want to rule out
> a
> document just because it contains "russian white house", we just want to
> ignore the hit, so that this phrase:
>
>    "... in the russian white house as opposed to the american white house
> ..."
>
> would return the document.
>
> Can this be accomplished using Lucene or Qsol QueryParser syntax, or do we
> need to write something custom?
> --
> View this message in context:
> http://www.nabble.com/Query-to-ignore-certain-phrases-tp18935560p18935560.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best Regards
Alexander Aristov

------=_Part_115967_8751945.1218531415881--

From java-user-return-35445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 09:37:12 2008
Return-Path: <java-user-return-35445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80582 invoked from network); 12 Aug 2008 09:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 09:37:10 -0000
Received: (qmail 76167 invoked by uid 500); 12 Aug 2008 09:36:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76136 invoked by uid 500); 12 Aug 2008 09:36:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76125 invoked by uid 99); 12 Aug 2008 09:36:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 02:36:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 09:36:03 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3876775rvb.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 02:36:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XQ2gsJpaxtjMHbspHv9IhX8TSQx2Al9dzzoGizifEzU=;
        b=u3+1NDpEkOSjFBHPivy/3poQszIVjiRaLxXK4hVIaHtLjgmViSXJaEHuVB03GEjfUX
         6Wz+r1BX63Sm29+Yk4swtKKKD9ikgFBNqBDkspdeCzI/DSrzLSVgLvQI3IvnyfQFHdVf
         W/TPiyVM4v0sNa3B4SCso2sUHtBPPBDiKjgnI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Yd+XPC9EaDpWUfj9Ess7yOPbYF7bXycvqJ3DT0WzUKVS73q9dlSFxyNMEpPiK9peOz
         rR8/2dRobuoz8PS4UyACyZrhqBcNer1wIsA2AqrRqlfh1tSFvf5j24oiEXYo33IHZpLU
         dkzzN1UWjJgs4kuyh73f4MJ6HIm8Ri0wVtOBI=
Received: by 10.141.113.6 with SMTP id q6mr4203813rvm.36.1218533790993;
        Tue, 12 Aug 2008 02:36:30 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Tue, 12 Aug 2008 02:36:30 -0700 (PDT)
Message-ID: <1bcb7c7f0808120236r3cc4875bj65c6b9e53253fa76@mail.gmail.com>
Date: Tue, 12 Aug 2008 12:36:30 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: delete by doc id
In-Reply-To: <B41222A3-F093-4FCE-A846-1DA8A0329E35@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81685_26337763.1218533790975"
References: <1bcb7c7f0808081439j1a2cde9cuf241f890ac2a7f6b@mail.gmail.com>
	 <B41222A3-F093-4FCE-A846-1DA8A0329E35@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_81685_26337763.1218533790975
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I get the id's to delete from a query in indexsearcher.

I think I am going trunk, hope it wont cause a lot of pain.

best.
-C.B.

On Sat, Aug 9, 2008 at 2:30 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> It's risky.
>
> How would you get the IDs to know which ones to delete?  A separate reader
> running on the side?
>
> The problem is, as IndexWriter merges segments, the IDs shift.  Any reader
> you have already open won't see this shift (until you reopen it), so you
> could end up deleting the wrong IDs.
>
> Mike
>
>
> Cam Bazz wrote:
>
>  hello,
>>
>> what would happen if I modified the class IndexWriter, and made the delete
>> by id method public?
>>
>> I have two fields in my documents and I got to be able to delete by those
>> two fields, (by query in other words) and I do not wish to go trunk
>> version.
>>
>> I am getting quite desperate, and if not found a solution I will have to
>> make my documents with 3 fields, a, b and a + b so I can delete by a and
>> b.
>>
>> Best.
>>
>> could there be a side effect?
>>
>> Best.
>>
>> -c.b.
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_81685_26337763.1218533790975--

From java-user-return-35446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 10:01:41 2008
Return-Path: <java-user-return-35446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97014 invoked from network); 12 Aug 2008 10:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 10:01:40 -0000
Received: (qmail 97144 invoked by uid 500); 12 Aug 2008 10:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97118 invoked by uid 500); 12 Aug 2008 10:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97107 invoked by uid 99); 12 Aug 2008 10:01:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 03:01:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 10:00:34 +0000
Received: by yw-out-2324.google.com with SMTP id 3so722266ywj.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 03:01:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=AxVHVCeRyyqVuK0mWIe1Qah7YStE+QgXPPgMZlW8zbw=;
        b=IgW6pIxtuHLbR5ZtDryaKBTXrYjPn1+dxualXsWGkn7vtD4QtZGWqs0qu2ueGAApyJ
         SvbR6xyIq2iHV3mICiF1tIfDZTE/MNqGW3FPe65d23VSPeA2RMBCALI7/x7LE5usSg6D
         y+xZs3CGLuDrnZP9lnhHkBIGpglucD6nkt18k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=fLhx5XrkgjxcJwRHM/UoP/VbSHxYFsVNX9vVLUh2xTnVfNEDSn0HFC+VO/yZlWwtkQ
         T39igZoNXJfsl8p60x4Js2rilN+wt+nYvPwz3KkLyBbdt8dm9UVtehkEsS+96mMopgY1
         p79Poty2syAR453lLmZ3Ta9KS56bLlVVc0Qr4=
Received: by 10.150.98.18 with SMTP id v18mr14054419ybb.114.1218535260624;
        Tue, 12 Aug 2008 03:01:00 -0700 (PDT)
Received: by 10.150.225.5 with HTTP; Tue, 12 Aug 2008 03:01:00 -0700 (PDT)
Message-ID: <a823853a0808120301r138bd642pab8749e4ca8f177e@mail.gmail.com>
Date: Tue, 12 Aug 2008 19:01:00 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: search for special condition.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_80770_20781821.1218535260449"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_80770_20781821.1218535260449
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

aGkuCgpJIGFtIHNlYXJjaGluZyBmb3IgbHVjZW5lIGFwaSBvciBmdW5jdGlvbiBsaWtlIHF1ZXJ5
ICJGSUVMRCA+IDEwMDAiCgpGb3IgZXhhbXBsZSwgYSB1c2VyIHdhbnRzIHRvIHNlYXJjaCBhIHBy
b2R1Y3Qgd2hpY2ggcHJpY2UgaXMgYmlnZ2VyIHRoZW4KdXNlcidzIGlucHV0LgpJZiB1c2VyJ3Mg
aW5wdXQgaXMgMTAwMDAgdGhlbiByZXN1bHQgYXJlIHRoZSBwcm9kdWN0cyBpbiBpbmRleCBqdXN0
IGxpa2UKIlBSSUNFID4gMTAwMDAiCgpJcyB0aGVyZSBhbnkgd2F5IHRvIHNlYXJjaCBsaWtlIHRo
YXQ/Cgp0aGFua3MuCkphbmcuCi0tIApERVa/673ECmh0dHA6Ly9kZXZ5b25nc2lrLnRpc3Rvcnku
Y29tCg==
------=_Part_80770_20781821.1218535260449--

From java-user-return-35447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 10:08:15 2008
Return-Path: <java-user-return-35447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 868 invoked from network); 12 Aug 2008 10:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 10:08:15 -0000
Received: (qmail 7197 invoked by uid 500); 12 Aug 2008 10:08:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6971 invoked by uid 500); 12 Aug 2008 10:08:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6960 invoked by uid 99); 12 Aug 2008 10:08:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 03:08:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 10:07:09 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2280561wra.21
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 03:07:34 -0700 (PDT)
Received: by 10.90.80.19 with SMTP id d19mr12441427agb.97.1218535653909;
        Tue, 12 Aug 2008 03:07:33 -0700 (PDT)
Received: by 10.100.212.4 with HTTP; Tue, 12 Aug 2008 03:07:33 -0700 (PDT)
Message-ID: <9ac0c6aa0808120307s261e2ca1o2186797c681e659@mail.gmail.com>
Date: Tue, 12 Aug 2008 06:07:33 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Clarification on deletion process...
In-Reply-To: <OFA33C18AA.B7DD3648-ON852574A2.00696053-852574A2.00698FDD@fin.equifax.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48A08996.6070709@gmail.com>
	 <OFA33C18AA.B7DD3648-ON852574A2.00696053-852574A2.00698FDD@fin.equifax.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Some more details below...

<Aravind.Yarram@equifax.com> wrote:
> The documentation for delete operation seems to be confusing (i am going
> thru the book and also posted in the books forums...), so appreciate if
> someone can let me know if my below understanding is correct.
>
> When i delete a document from the index
>
> 1) It is marked for deletion in the BUFFER until I commit/close the
> writer. Does that mean the document is still visible for the Searcher?

Right, IndexWriter simply records the fact that you want to delete all
docs matching query X or term Y, in RAM.

> 2) Once i commit/close the writer then IT IS JUST MARKED for delete in the
> Index. At this time the document is NOT visible for the Searcher, but the
> document is still taking up the space in the index.

Yes, every so often (or, when you explicitly commit or close)
IndexWriter will translate the buffered delete requests into _X_N.del
files, which record exactly which docIDs are now deleted.  If you
reopen a searcher after this point the documents won't be seen.

> 3) Once the index is merged (optimized), it is removed from the index

As Hoss said, ordinary merges also reclaim the space consumed by
deleted docs.  You can also call expungeDeletes, which forces any
segments containing deletions to be merged.

Note that with ConcurrentMergeScheduler, ordinary merges are kicked
off and complete in background threads.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 10:11:30 2008
Return-Path: <java-user-return-35448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1996 invoked from network); 12 Aug 2008 10:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 10:11:30 -0000
Received: (qmail 11701 invoked by uid 500); 12 Aug 2008 10:11:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11502 invoked by uid 500); 12 Aug 2008 10:11:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11491 invoked by uid 99); 12 Aug 2008 10:11:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 03:11:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 10:10:21 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3894256rvb.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 03:10:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=7SVoeCz3xz6Sp623fL4a655etlNhdyF9IsvJ+/TJy5M=;
        b=O7sG96SFBPxlnIq0pDyXjSY4uuTI+gQ5urewGQ8+s822d1c8ZzQBDVgh6hzgY+Jn1J
         lFPkndAfH7VdqUq4OoOC6BadqYbru9lX9dN2TLt/a98BtqkXum1IE/XY6jD6kVM59InN
         gfOLtt1alEioBn2S1g7CoYxNNsn5mOcyZ1PYc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=itObGGlfum7s2R46giL2mjJdx56rG7X2VeYeQmfyxDzcCgVPhyO93knoSQJZlkDJnq
         rS9fYJc71U1aMIgTDkHW205dG4/YIvC4XM2sVfCxjbumhBGhN2ixVRNAs6HHFrwwrrUI
         r2pXYb97EKYDmTICULmQNvW+hxIKGcTK4zBsE=
Received: by 10.141.210.13 with SMTP id m13mr4222840rvq.25.1218535831251;
        Tue, 12 Aug 2008 03:10:31 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Tue, 12 Aug 2008 03:10:31 -0700 (PDT)
Message-ID: <1bcb7c7f0808120310s5efdb128q43733836f10a5819@mail.gmail.com>
Date: Tue, 12 Aug 2008 13:10:31 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org, lucene@mikemccandless.com, 
	andy.triana@gmail.com
Subject: Re: delete by doc id
In-Reply-To: <bb2591e60808081555t6abf4384vdee8273fbc6e8513@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81976_1540617.1218535831244"
References: <1bcb7c7f0808081439j1a2cde9cuf241f890ac2a7f6b@mail.gmail.com>
	 <bb2591e60808081555t6abf4384vdee8273fbc6e8513@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_81976_1540617.1218535831244
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Andy,

Thanks for your input. I understand what you are saying and trying to use
lucene as a relational db is a little too far, however,
in certain specialized areas, lucene works better than relational databases.
If you can setup the scheme, so that it is non-normalized, and if you dont
need too much updates, it really works nice.

I have read this paper: http://db.cs.yale.edu/vldb07hstore.pdf , in which
the authors claim 2 orders of magnitude speed increase (between 80 and 100
to be exact) by using specialized databases - (lucene is not mentioned)

I am using lucene to store graphs. So far I have tried many different
databases, ranging from mysql,oracle,postgres,objectivity/db,db4o and many
other. oracle and mysql start crying after 10M records. object relational
db's are good when it comes to traversal, but locating things are hard, and
if the data is coming in random distributions ingest rates are terribly
slow.

so far, lucene has been very fast. both for ingest, searching. its only
drawback is delete and update. (which I understand why)

I have been bugging lucene developers with similar questions for the past
year. With each release lucene is getting better and better.
And by adding deleteByQuery feature, i think it will be complete. (will
never have to depend on docid's again)

To solve my problem I have added a third field, which is not stored and
combination of the other two fields. Works nicely, but some overhead I
guess.

Is there any way that the developers can integrate the deleteByQuery into
2.3 release? It would be greatly appreciated, and I believe many other
people are waiting for the same feature.

Best Regards,
-C.B.





On Sat, Aug 9, 2008 at 1:55 AM, Andy Triana <andy.triana@gmail.com> wrote:

> I rarely submit but I've been seeing this sort of thing more and more
> on this board.
>
> It seems that there is a need to treat Lucene as if it were a data
> storage or database like repository, where in
> fact it isn't.
>
> In our case, for large indexes we run either a parallel process to
> create the index or a nightly process. Always treating
> the index as a disposable lookup mechanism.
>
> When it comes to deleting items from an index, we simply just mark
> those items in a separate list or data structure and then filter them
> away until the index is refreshed the next go around.
>
> My point is, that it seems like folks want Lucene to act like a
> relational database when in fact it is not meant to be used that way.
>
> Perhaps I'm wrong and upgrades will allow for efficient deletions, but
> it has always been clear to me that Lucene is strictly
> an index and should be treated as a feature of your storage
> repository, i.e. database, file system, web, whatever. But not relied
> upon for that very storage or management of that storage.
>
> The deletion issue is true of almost any indexing engine I've used in
> the past, i.e. DT Search, Verity, etc.
>
> Am I missing something? For us it has been a "best practice" to treat
> Lucene as described.
>
> //andy
>
>
> On Fri, Aug 8, 2008 at 2:39 PM, Cam Bazz <cambazz@gmail.com> wrote:
> > hello,
> >
> > what would happen if I modified the class IndexWriter, and made the
> delete
> > by id method public?
> >
> > I have two fields in my documents and I got to be able to delete by those
> > two fields, (by query in other words) and I do not wish to go trunk
> version.
> >
> > I am getting quite desperate, and if not found a solution I will have to
> > make my documents with 3 fields, a, b and a + b so I can delete by a and
> b.
> >
> > Best.
> >
> > could there be a side effect?
> >
> > Best.
> >
> > -c.b.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_81976_1540617.1218535831244--

From java-user-return-35449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 10:17:04 2008
Return-Path: <java-user-return-35449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4070 invoked from network); 12 Aug 2008 10:17:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 10:17:03 -0000
Received: (qmail 21502 invoked by uid 500); 12 Aug 2008 10:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21393 invoked by uid 500); 12 Aug 2008 10:16:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21382 invoked by uid 99); 12 Aug 2008 10:16:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 03:16:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of appler@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 10:15:55 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3897236rvb.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 03:16:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=30BAtm68UUgmk1Vml5bBOheUYkL8JokDRO9LjFUqBCg=;
        b=g2hnevZ1pkHWchlLKUhMEs9teznKiXmfPl4rI627bhIdO0llAnxIGSm2/kQv+hNMh1
         ikMssluQMXEWv2ruBmX1hYxG0yj4XZt1rkeMoEzPjHCKz1DY6JKDWqbaxA+q1TIohNnC
         g/EQfeZglzO5To2lA3QMaA7myMY77up1OVBQc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=eufe6z1eSFj5uyeY+JaWstzO9iV2RW6MNnfdN8LKFX0PchzaRvVCyDWRpLZnDZHTKX
         0TkdvhEaUBHvWyi2OouqvH56JDruK1Oz0zHIZjXfvibTRtsOnObHdoVk6UtC+XfsHKuV
         DmhLO+d5nZmMYXOUDr68nsbhuI+hTDeQEGD9E=
Received: by 10.115.58.18 with SMTP id l18mr4540208wak.177.1218536166322;
        Tue, 12 Aug 2008 03:16:06 -0700 (PDT)
Received: by 10.114.103.15 with HTTP; Tue, 12 Aug 2008 03:16:06 -0700 (PDT)
Message-ID: <48b708490808120316o16f2b723wf4cd5cd392e0ee0d@mail.gmail.com>
Date: Tue, 12 Aug 2008 19:16:06 +0900
From: "Cheolgoo Kang" <appler@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for special condition.
In-Reply-To: <a823853a0808120301r138bd642pab8749e4ca8f177e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <a823853a0808120301r138bd642pab8749e4ca8f177e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SG93IGFib3V0IHVzaW5nIE51bWJlclRvb2xzIGFuZCByYW5nZSBxdWVyeS9maWx0ZXJzPwoKaHR0
cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvMl8zXzIvYXBpL2NvcmUvb3JnL2FwYWNoZS9sdWNl
bmUvZG9jdW1lbnQvTnVtYmVyVG9vbHMuaHRtbAoKLSBDaGVvbGdvbyBLYW5nCgoKCjIwMDgvOC8x
MiDA5b/rvK4gPG5lZWQ0c3BkQGdtYWlsLmNvbT46Cj4gaGkuCj4KPiBJIGFtIHNlYXJjaGluZyBm
b3IgbHVjZW5lIGFwaSBvciBmdW5jdGlvbiBsaWtlIHF1ZXJ5ICJGSUVMRCA+IDEwMDAiCj4KPiBG
b3IgZXhhbXBsZSwgYSB1c2VyIHdhbnRzIHRvIHNlYXJjaCBhIHByb2R1Y3Qgd2hpY2ggcHJpY2Ug
aXMgYmlnZ2VyIHRoZW4KPiB1c2VyJ3MgaW5wdXQuCj4gSWYgdXNlcidzIGlucHV0IGlzIDEwMDAw
IHRoZW4gcmVzdWx0IGFyZSB0aGUgcHJvZHVjdHMgaW4gaW5kZXgganVzdCBsaWtlCj4gIlBSSUNF
ID4gMTAwMDAiCj4KPiBJcyB0aGVyZSBhbnkgd2F5IHRvIHNlYXJjaCBsaWtlIHRoYXQ/Cj4KPiB0
aGFua3MuCj4gSmFuZy4KPiAtLQo+IERFVr/rvcQKPiBodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5
LmNvbQo+Cg==


From java-user-return-35450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 11:48:31 2008
Return-Path: <java-user-return-35450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54202 invoked from network); 12 Aug 2008 11:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 11:48:31 -0000
Received: (qmail 34834 invoked by uid 500); 12 Aug 2008 11:48:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34809 invoked by uid 500); 12 Aug 2008 11:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34797 invoked by uid 99); 12 Aug 2008 11:48:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 04:48:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 11:47:28 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1942244fgb.27
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 04:47:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dzv7D+lO8uN2HcKNqHC0A8MtkyMdbI9HwQo/djE0m3k=;
        b=mCvEtsOfW0H/hzmXNCiABbihI5doOuv6WSixGeeir+w6PXF/aBdqE8wHIl4j/21Cat
         0c/7EzefyVgOKZ1RxITL5YW5Ajzk59w7nb2CNOr+gxjjePDlWjRLct7pulJ9/6UnNJoQ
         c9gEQuWzpRCYDjdypxgPO930lOx/2BUfZ8o1E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=X7kYC8JBGhRsld+mevT69o3TuMzVSFztq0uiFDVLc6KB/brk1GOOr5IzeYd/rALOiq
         v4dHmc8P7IfKSYJEgt95UpkJDhJvaHJoomCr/+eQizoSMLGlgKo8kfqIcJ/nuL5qvGIT
         H43f8CMvpmWcF7PRGNhwyzC9W5dl4VvFGLd9k=
Received: by 10.86.72.15 with SMTP id u15mr10112001fga.22.1218541657803;
        Tue, 12 Aug 2008 04:47:37 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Tue, 12 Aug 2008 04:47:37 -0700 (PDT)
Message-ID: <e05f0fd10808120447t2da3fe76ifead46a0107e3a8e@mail.gmail.com>
Date: Tue, 12 Aug 2008 14:47:37 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query to ignore certain phrases
In-Reply-To: <11975c90808120156j56f2961bg3f687a635a5da336@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6633_28137571.1218541657809"
References: <18935560.post@talk.nabble.com>
	 <11975c90808120156j56f2961bg3f687a635a5da336@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6633_28137571.1218541657809
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> I think it should look something like this
>
> "white house" NOT "russian white house"~1


"a b c"~1 just matches more 'easily' than "a b c".
It will match for instance "a b d c". The NOT however
excludes all documents which match this, unlike requested logic.

In fact,
   Q1:      "a b" NOT "a b c"~1
is worse than
   Q2:      "a b" NOT "a b c"
in that a document containing
   "a b x c"
should have been matched, and will be matched by Q2 but not with Q1.
Both Q1 and Q2 will not match this:
   "a b x y z a b c"
which should be matched...

>    "white house" UNLESS "russian white house"
> >
> > should not produce a match on the phrase:
> >
> >    "russian white house"
> >
> > but should match:
> >
> >    "white house"
> >
> > Where this differs from the NOT operator is that we don't want to rule
> out
> > a
> > document just because it contains "russian white house", we just want to
> > ignore the hit, so that this phrase:
> >
> >    "... in the russian white house as opposed to the american white house
> > ..."
> >
> > would return the document.
> >
> > Can this be accomplished using Lucene or Qsol QueryParser syntax, or do
> we
> > need to write something custom?
>

------=_Part_6633_28137571.1218541657809--

From java-user-return-35451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 13:06:40 2008
Return-Path: <java-user-return-35451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98641 invoked from network); 12 Aug 2008 13:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 13:06:40 -0000
Received: (qmail 25242 invoked by uid 500); 12 Aug 2008 13:06:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25208 invoked by uid 500); 12 Aug 2008 13:06:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25197 invoked by uid 99); 12 Aug 2008 13:06:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 06:06:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wysiecki@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 13:05:34 +0000
Received: by nf-out-0910.google.com with SMTP id g16so791631nfd.15
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 06:05:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:content-transfer-encoding
         :content-disposition:x-google-sender-auth;
        bh=HAEs9PvtGdmlhUysPRXBoo+LMH1v1wWA2cWj3wPuNb8=;
        b=u12zuYTg07iraPfNIPUiZFT5f3VKqLMwDjgwG94HeOINZnKa/oBa2Vdm2dlUdvsR7L
         HNQ24/afpaySQOR/GE1sHzjSdxpYQrQCvI5mO1NyJj/u2LPgF7pgxb5t+3EimxhgNRs7
         C2xUZlhcJyyj9dH/0ghLnsTKhfBi9nk0iFMS8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=A/c+YJw9p8euSfQKuKpmUonXzy5g+GxGvyxOwK1Xl6+QT2lM1/HIEaejKM2/fYE7Mv
         CwbTVj/6whLZ0LU+lfAli8gxG7v9G33bIN0RscnudNi9Opohee74x+U+3RkdwmOCC8Vu
         +rDfqaHpVVcNzgYbAhtvUUD/nsOLttEjFsAho=
Received: by 10.103.16.16 with SMTP id t16mr7021239mui.131.1218546343417;
        Tue, 12 Aug 2008 06:05:43 -0700 (PDT)
Received: by 10.103.16.13 with HTTP; Tue, 12 Aug 2008 06:05:43 -0700 (PDT)
Message-ID: <b0f78250808120605m1e295c74o2c367286140fae06@mail.gmail.com>
Date: Tue, 12 Aug 2008 15:05:43 +0200
From: "Martin vWysiecki" <wysiecki@aspedia.de>
Sender: wysiecki@gmail.com
To: java-user@lucene.apache.org
Subject: Results by unique id's
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Google-Sender-Auth: 545979a0ac9b2e52
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

thanks for help in advance.

my example docs:

two fileds company_id and content

doc1;1;"car volvo"
doc2;1;"car toyota"
doc3;2;"car mitsubishi"
doc4;2;"car skoda"

my search "car"

Now i would like to get only doc 1 and 3 because doc2 is the same
company, same company_id, same for doc 4

Is this possible?

Thank you




--=20
 mit freundlichen Gr=FC=DFen

Martin von Wysiecki
software development

aspedia GmbH
Ro=DFlauer Weg 5
D-68309 Mannheim
Telefon +49 (0) 621 - 71600 33
Telefax +49 (0) 621 - 71600 10
wysiecki@aspedia.de

Gesch=E4ftsf=FChrung:
Steffen K=FCnster, Christoph Goldschmitt
Amtsgericht Mannheim HRB 9942
www.aspedia.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 13:12:00 2008
Return-Path: <java-user-return-35452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 874 invoked from network); 12 Aug 2008 13:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 13:12:00 -0000
Received: (qmail 36596 invoked by uid 500); 12 Aug 2008 13:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36562 invoked by uid 500); 12 Aug 2008 13:11:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36550 invoked by uid 99); 12 Aug 2008 13:11:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 06:11:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 13:10:55 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2369827wfc.20
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 06:11:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WxmW5yQYJSdnqsN3x6f8kNNuJ3hU5BhS4iHytzpCMvI=;
        b=dIgcTgOHXhy2+mjCWj/MNr/LhhYF4lUEffyJSogyQd46iISzaQ+27AxdoOxhAjOiGM
         6NHiBZGKmU7quigV0FUuzOXy+tiJ12qr1GtJtdeoSiUXz7rDLDe9SwvSgkUqHe9P3/CA
         kTDn/pAbyon9VAU6g7HLkVrJ4jCfjbd6xvQ/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=CGNPRmlNM4HM/9bpEeVVLoTb+TqvwdIA0BxCLxD/rN47J0ytjOEvL00zmNQfqQ9A+K
         Fk7GmN3jc86Vop3dWO6XzxcEiHa7ARIQCEahe7ajMVepch/A1fwmJBe8CrGg763PkHA7
         2+SWFMDNBM90m5/3sopeOebA8NbRrNLGzpldQ=
Received: by 10.142.214.11 with SMTP id m11mr2015356wfg.69.1218546665185;
        Tue, 12 Aug 2008 06:11:05 -0700 (PDT)
Received: by 10.143.1.20 with HTTP; Tue, 12 Aug 2008 06:11:05 -0700 (PDT)
Message-ID: <6e3ae6310808120611h5b1371d2wd3daaf2715056af4@mail.gmail.com>
Date: Tue, 12 Aug 2008 06:11:05 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Results by unique id's
In-Reply-To: <b0f78250808120605m1e295c74o2c367286140fae06@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_110721_14448692.1218546665187"
References: <b0f78250808120605m1e295c74o2c367286140fae06@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_110721_14448692.1218546665187
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Maybe re-organize the index structure as

doc1:1; "car volvo", "car toyota"
doc2;2;"car mitsubishi", "car skoda"

You can add the content field twice for the same company_id.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Tue, Aug 12, 2008 at 6:05 AM, Martin vWysiecki <wysiecki@aspedia.de>wrot=
e:

> Hello,
>
> thanks for help in advance.
>
> my example docs:
>
> two fileds company_id and content
>
> doc1;1;"car volvo"
> doc2;1;"car toyota"
> doc3;2;"car mitsubishi"
> doc4;2;"car skoda"
>
> my search "car"
>
> Now i would like to get only doc 1 and 3 because doc2 is the same
> company, same company_id, same for doc 4
>
> Is this possible?
>
> Thank you
>
>
>
>
> --
>  mit freundlichen Gr=FC=DFen
>
> Martin von Wysiecki
> software development
>
> aspedia GmbH
> Ro=DFlauer Weg 5
> D-68309 Mannheim
> Telefon +49 (0) 621 - 71600 33
> Telefax +49 (0) 621 - 71600 10
> wysiecki@aspedia.de
>
> Gesch=E4ftsf=FChrung:
> Steffen K=FCnster, Christoph Goldschmitt
> Amtsgericht Mannheim HRB 9942
> www.aspedia.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_110721_14448692.1218546665187--

From java-user-return-35453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 13:25:02 2008
Return-Path: <java-user-return-35453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5832 invoked from network); 12 Aug 2008 13:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 13:25:01 -0000
Received: (qmail 64612 invoked by uid 500); 12 Aug 2008 13:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64356 invoked by uid 500); 12 Aug 2008 13:24:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64345 invoked by uid 99); 12 Aug 2008 13:24:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 06:24:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wysiecki@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 13:23:57 +0000
Received: by mu-out-0910.google.com with SMTP id w8so2439300mue.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 06:24:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=Ag6W0x9ARMeYgshaPDkEWx69d0eZmdmfI03ynA9NldE=;
        b=Nr6l8jyfaChtmkQzL9TeuZEake9fSQJvX60XsdNJKW88HCf8DexS3+3J1GgZn9Po5I
         p55Y/L6XZ4Jl2VxdwqaZsWwymfkr5KGdAC2gluyy8/I5OG0wYVT0Y/1REpi/A7lg7GM8
         u22CK5eXGPsHgkfsKDJcWrGKGfFRu/iSxVkfs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=iH9phdbMRofdNIQYfCQOiutthYZkIkOQwVVo8YKnFOTqdZe70L9FPKRgsR93nlHeT8
         XmH/OK6scO18/lkDTZVVYx4I9sMQKMeSe/fu81xx85QK0PGu4Dk8e6WaT5pRBakWd9JR
         lCXIm6BJzeWaAeiJS0y7VjswNge+ljHMJShg4=
Received: by 10.103.22.16 with SMTP id z16mr7055289mui.78.1218547463055;
        Tue, 12 Aug 2008 06:24:23 -0700 (PDT)
Received: by 10.103.16.13 with HTTP; Tue, 12 Aug 2008 06:24:23 -0700 (PDT)
Message-ID: <b0f78250808120624vf47939fge348b5339d2aed01@mail.gmail.com>
Date: Tue, 12 Aug 2008 15:24:23 +0200
From: "Martin vWysiecki" <wysiecki@aspedia.de>
Sender: wysiecki@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Results by unique id's
In-Reply-To: <6e3ae6310808120611h5b1371d2wd3daaf2715056af4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <b0f78250808120605m1e295c74o2c367286140fae06@mail.gmail.com>
	 <6e3ae6310808120611h5b1371d2wd3daaf2715056af4@mail.gmail.com>
X-Google-Sender-Auth: 36c860d14df96700
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Chris,

Sorry but this is not the solution for me, because i've got more
fields which are imported, for example url

doc1;1;"car volvo","company1.com/volvo"
doc2;1;"car toyota","company1.com/toyota"
doc3;2;"car mitsubishi","company2.com/mitsubishi"
doc4;2;"car skoda","company2.com/skoda"

so, if I search for skoda, so i need the right result doc4,
but if i search for car, so i want to get only one result per company
doc1 and doc3

THX



On Tue, Aug 12, 2008 at 3:11 PM, Chris Lu <chris.lu@gmail.com> wrote:
> Maybe re-organize the index structure as
>
> doc1:1; "car volvo", "car toyota"
> doc2;2;"car mitsubishi", "car skoda"
>
> You can add the content field twice for the same company_id.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
> On Tue, Aug 12, 2008 at 6:05 AM, Martin vWysiecki <wysiecki@aspedia.de>wr=
ote:
>
>> Hello,
>>
>> thanks for help in advance.
>>
>> my example docs:
>>
>> two fileds company_id and content
>>
>> doc1;1;"car volvo"
>> doc2;1;"car toyota"
>> doc3;2;"car mitsubishi"
>> doc4;2;"car skoda"
>>
>> my search "car"
>>
>> Now i would like to get only doc 1 and 3 because doc2 is the same
>> company, same company_id, same for doc 4
>>
>> Is this possible?
>>
>> Thank you
>>
>>
>>
>>
>> --
>>  mit freundlichen Gr=FC=DFen
>>
>> Martin von Wysiecki
>> software development
>>
>> aspedia GmbH
>> Ro=DFlauer Weg 5
>> D-68309 Mannheim
>> Telefon +49 (0) 621 - 71600 33
>> Telefax +49 (0) 621 - 71600 10
>> wysiecki@aspedia.de
>>
>> Gesch=E4ftsf=FChrung:
>> Steffen K=FCnster, Christoph Goldschmitt
>> Amtsgericht Mannheim HRB 9942
>> www.aspedia.de
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



--=20
 mit freundlichen Gr=FC=DFen

Martin von Wysiecki
software development

aspedia GmbH
Ro=DFlauer Weg 5
D-68309 Mannheim
Telefon +49 (0) 621 - 71600 33
Telefax +49 (0) 621 - 71600 10
wysiecki@aspedia.de

Gesch=E4ftsf=FChrung:
Steffen K=FCnster, Christoph Goldschmitt
Amtsgericht Mannheim HRB 9942
www.aspedia.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 13:37:38 2008
Return-Path: <java-user-return-35454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12184 invoked from network); 12 Aug 2008 13:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 13:37:37 -0000
Received: (qmail 94141 invoked by uid 500); 12 Aug 2008 13:37:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94068 invoked by uid 500); 12 Aug 2008 13:37:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94057 invoked by uid 99); 12 Aug 2008 13:37:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 06:37:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 13:36:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KSu3X-0005Qr-C6
	for java-user@lucene.apache.org; Tue, 12 Aug 2008 06:36:59 -0700
Message-ID: <18944405.post@talk.nabble.com>
Date: Tue, 12 Aug 2008 06:36:59 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Results by unique id's
In-Reply-To: <b0f78250808120605m1e295c74o2c367286140fae06@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <b0f78250808120605m1e295c74o2c367286140fae06@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hi Martin,

I think you are searching for

DuplicateFilter

http://www.nabble.com/how-to-get--all-unique--documents-based-on-keyword-fe=
ild-to18807014.html

best regards

  Karsten


wysiecki wrote:
>=20
> Hello,
>=20
> thanks for help in advance.
>=20
> my example docs:
>=20
> two fileds company_id and content
>=20
> doc1;1;"car volvo"
> doc2;1;"car toyota"
> doc3;2;"car mitsubishi"
> doc4;2;"car skoda"
>=20
> my search "car"
>=20
> Now i would like to get only doc 1 and 3 because doc2 is the same
> company, same company_id, same for doc 4
>=20
> Is this possible?
>=20
> Thank you
>=20
>=20
>=20
>=20
> --=20
>  mit freundlichen Gr=C3=BC=C3=9Fen
>=20
> Martin von Wysiecki
> software development
>=20
> aspedia GmbH
> Ro=C3=9Flauer Weg 5
> D-68309 Mannheim
> Telefon +49 (0) 621 - 71600 33
> Telefax +49 (0) 621 - 71600 10
> wysiecki@aspedia.de
>=20
> Gesch=C3=A4ftsf=C3=BChrung:
> Steffen K=C3=BCnster, Christoph Goldschmitt
> Amtsgericht Mannheim HRB 9942
> www.aspedia.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Results-by-unique-id%27=
s-tp18943940p18944405.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 15:31:02 2008
Return-Path: <java-user-return-35455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90367 invoked from network); 12 Aug 2008 15:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 15:31:02 -0000
Received: (qmail 60982 invoked by uid 500); 12 Aug 2008 15:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60243 invoked by uid 500); 12 Aug 2008 15:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60232 invoked by uid 99); 12 Aug 2008 15:30:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 08:30:53 -0700
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 15:29:55 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Query to ignore certain phrases
Date: Tue, 12 Aug 2008 11:26:58 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A008@SUEXCL-02.ad.syr.edu>
In-Reply-To: <18935560.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query to ignore certain phrases
Thread-Index: Acj8CLGl9wfMEzmqTPiqOrsXNyDVowAhFiUg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jeff,

I don't know of a query parser that will allow you to acheive this.

However, if you can programmatically construct (at least a component of) =
your queries, then you may want to check out Lucene's SpanQuery =
functionality.

In particular, using your example, if you combine a SpanFirstQuery over =
a SpanNearQuery on "white house" (to cover the case of "white house" at =
the beginning of a field) with a SpanNearQuery over a SpanRegexQuery for =
(?!russian$) - i.e., anything but "russian" - and another SpanNearQuery =
on "white house", you may get what you want.

In a lisp-ish query-like syntax:

{or:{first:{near~0:white house}}{near~0:{regex:(?!russian)}{near~0:white =
house}}

<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/spans/S=
panQuery.html>

Steve

On 08/11/2008 at 7:18 PM, Jeff French wrote:
>=20
> We're trying to perform a query where if our intended search =
term/phrase
> is part of a specific larger phrase, we want to ignore that particular
> match, but not the entire document (unless of course there are no =
other
> hits with our intended term/phrase). For example, a query like:
>=20
>     "white house" UNLESS "russian white house"
>=20
> should not produce a match on the phrase:
>=20
>     "russian white house"
>=20
> but should match:
>=20
>     "white house"
>=20
> Where this differs from the NOT operator is that we don't want to rule
> out a document just because it contains "russian white house", we just
> want to ignore the hit, so that this phrase:
>=20
>     "... in the russian white house as opposed to the american white =
house ..."
>=20
> would return the document.
>=20
> Can this be accomplished using Lucene or Qsol QueryParser syntax, or =
do
> we need to write something custom?
> --
> View this message in context: =
http://www.nabble.com/Query-to-ignore-certain-phrases-tp18935560p18935560=
.html=20
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 16:22:27 2008
Return-Path: <java-user-return-35456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14433 invoked from network); 12 Aug 2008 16:22:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 16:22:27 -0000
Received: (qmail 60466 invoked by uid 500); 12 Aug 2008 16:22:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60436 invoked by uid 500); 12 Aug 2008 16:22:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60425 invoked by uid 99); 12 Aug 2008 16:22:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 09:22:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markkicks@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 16:21:23 +0000
Received: by qw-out-2122.google.com with SMTP id 5so217926qwi.53
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 09:21:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=okAWa6yYJuyUN5qJ7x3IaaPH9l28bUXZiYpYlYZv9wA=;
        b=BpssMefxLBqYHTukiIW4JoJo/0prVNqP/osBM+yHnk7OnHKLkNF3g8MLpQ080Xgy3N
         EQWMroHihTjy4zgaYYuQUW06YtszLNrXbqhbewCOBdXB5NIbhhoNa2tzMg64HQw7jkb0
         2O7+XqjE6MgUNv4ZODPoxOfYfFpVlINZf8ngY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=W6cYGv0/GKBmDTBpOdI2NinnXDHE560MTszwC8JrErRsTfj/HvXnJjkL3X4ghuxiOe
         wMzMRmudIG7Km2okfoZUBpbuMWQC8n6LyoEwhqrPzWJ53FzKUFw/hpagqCiiepcInyp+
         YJvqDW7Hp0e4QKRTAo0yeyWgH7XU19ycwkDoU=
Received: by 10.151.156.15 with SMTP id i15mr14589617ybo.184.1218558111001;
        Tue, 12 Aug 2008 09:21:51 -0700 (PDT)
Received: by 10.150.97.17 with HTTP; Tue, 12 Aug 2008 09:21:50 -0700 (PDT)
Message-ID: <82fa9e310808120921g70233fd9q4e4c8c1eed861027@mail.gmail.com>
Date: Tue, 12 Aug 2008 09:21:50 -0700
From: mark <markkicks@gmail.com>
To: java-user@lucene.apache.org
Subject: integrating with postgres
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

hi
i am new to lucene. my data is stored in a table in postgres, i want
to be able to do full text search based on two columns.
how do i integrate postgres & lucene? are there any guides?
thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 16:27:46 2008
Return-Path: <java-user-return-35457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17372 invoked from network); 12 Aug 2008 16:27:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 16:27:46 -0000
Received: (qmail 74495 invoked by uid 500); 12 Aug 2008 16:27:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74440 invoked by uid 500); 12 Aug 2008 16:27:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74428 invoked by uid 99); 12 Aug 2008 16:27:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 09:27:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.obrien@criticalpath.net designates 209.228.128.133 as permitted sender)
Received: from [209.228.128.133] (HELO mail.criticalpath.net) (209.228.128.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 16:26:43 +0000
Received: from jobrienlt3 (10.41.4.211) by mail.criticalpath.net (8.5.016) (authenticated as john.obrien@criticalpath.net)
        id 4887075300212105 for java-user@lucene.apache.org; Tue, 12 Aug 2008 17:27:09 +0100
From: "John O'Brien" <john.obrien@criticalpath.net>
To: <java-user@lucene.apache.org>
Subject: RE: CheckIndex possibly not detecting/fixing all corruptions?
Date: Tue, 12 Aug 2008 17:27:08 +0100
Message-ID: <003601c8fc98$44a8a270$2e04bd0a@eu.cp.net>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Importance: Normal
In-Reply-To: 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,
	Apologies for the delay in getting back.
I have since figured out that the reason Luke gave an error when we =
searched
on the "fixed" index was (possibly) because it was a really old version =
(0.6
2005/02/16) - I tried again with v 0.8.1 (2008-02-13) and Luke can =
search on
the "fixed" index just fine.

When I first ran CheckIndex the exception was as follows:

java.lang.RuntimeException: term body:03: doc -2147483645 < lastDoc 44
        at org.apache.lucene.index.CheckIndex.check(CheckIndex.java:195)
        at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:373)

WARNING: 1 broken segments detected
WARNING: 162 documents will be lost

So for now I think the problem may lie in CLucene (or possibly our use =
of
it) rather than CheckIndex not detecting and repairing properly.
I will follow up with an update if/when I figure it out!
In the meantime if you have any ideas as to how/why a corruption of this
nature can occur I'd be glad to hear them.

Thanks for your help,
John.

-----Original Message-----
>From Michael McCandless <luc...@mikemccandless.com>=20
Subject Re: CheckIndex possibly not detecting/fixing all corruptions?=20
Date Wed, 30 Jul 2008 10:43:29 GMT=20

Do you have the exception Luke produced?   That'd be a good clue as to =20
what CheckIndex is not detecting.  It's hard for me to tell from that =20
GDB trace exactly what's gone wrong...

When you first ran CheckIndex, and it detected one corrupt segment, =20
what exception did it report as the cause of the corruption on that =20
segment?

If you could upload the index somewhere, that'd be great -- I'll try =20
to figure out why CheckIndex fails to detect the corruption.  It's =20
particularly odd that you were able to successfully optimize the index.

If you run searches on your index use Lucene java, do you get any odd =20
exceptions?

Mike
=20

-----Original Message-----
From: John O'Brien [mailto:john.obrien@criticalpath.net]=20
Sent: 30 July 2008 11:22
To: 'java-user@lucene.apache.org'
Subject: CheckIndex possibly not detecting/fixing all corruptions?


Hi,
	I already posted this question on the CLucene dev list but it was
suggested that I may be able to get some help on the Java list so here =
goes.
We use Clucene 0.9.20 in our search engine. One of the indexes appears =
to
have become corrupt (still investigating the cause of the corruption). =
We
tried using the Java Lucene CheckIndex tool to fix the corruption(s).
CheckIndex detected 1 broken segment and removed 162 documents and wrote =
a
new segments file. Subsequent runs of CheckIndex report "No problems =
were
detected with this index.". However our search engine still crashes when =
its
performing a search on the "fixed" index. Here is the relevant =
backtrace:

#8  0x001c0faa in lucene::index::SegmentTermDocs::read =
(this=3D0x664f26c8,=20
    docs=3D0x664f9944, freqs=3D0x664f99c4, length=3D32)
    at CLucene/util/BitSet.h:35
#9  0x001b4a4a in lucene::index::MultiTermDocs::read (this=3D0x664e5d38, =

    docs=3D0x664f9944, freqs=3D0x664f99c4, length=3D32)
    at ../src/CLucene/index/MultiReader.cpp:400
#10 0x001ef7dc in lucene::search::TermScorer::next (this=3D0x664f9920)
    at ../src/CLucene/search/TermScorer.cpp:41
#11 0x001d2d23 in lucene::search::BooleanScorer::next =
(this=3D0x665f2fc0)
    at ../src/CLucene/search/BooleanScorer.cpp:63
#12 0x001d2d23 in lucene::search::BooleanScorer::next =
(this=3D0x664e5ec8)
    at ../src/CLucene/search/BooleanScorer.cpp:63
#13 0x001e3275 in lucene::search::IndexSearcher::_search (
    this=3D0x65ba6410, query=3D0x66734ed8, filter=3D0x0, nDocs=3D100)
    at ../src/CLucene/search/Scorer.h:39
#14 0x001e1fb0 in lucene::search::Hits::getMoreDocs (this=3D0x66881440,=20
    m=3D50) at ../src/CLucene/search/Hits.cpp:110
#15 0x001e1acf in lucene::search::Hits::Hits ()
    at CLucene/util/PriorityQueue.h:35

We tried to perform a search using Luke tool but this also resulted in =
an
error.=20
Also tried after optimizing the index db, but the same error persists.=20
So it looks like the index db might still be corrupt.

Any ideas as to why CheckIndex appears not to have detected/fixed all
corruptions?=20
Are there any other suggestions as to how to detect/repair index
corruptions?

Thanks in advance,
John.

P.s. I still have the index in question before and after running =
CheckIndex
fix on it so if anyone's willing to take a look at it I can upload it
somewhere for you to download.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 16:50:57 2008
Return-Path: <java-user-return-35458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30428 invoked from network); 12 Aug 2008 16:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 16:50:57 -0000
Received: (qmail 9884 invoked by uid 500); 12 Aug 2008 16:50:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9855 invoked by uid 500); 12 Aug 2008 16:50:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9842 invoked by uid 99); 12 Aug 2008 16:50:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 09:50:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.178.240 as permitted sender)
Received: from [64.233.178.240] (HELO hs-out-0708.google.com) (64.233.178.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 16:49:46 +0000
Received: by hs-out-0708.google.com with SMTP id 4so408644hsl.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 09:49:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=mjo/Rgsm9h5Xf9x3Xa4tMQo1DoIKF/dlVMmWVXO2hIk=;
        b=anh3nO6rqwAluBMmkCmW06aYNg7DUzUzIHDUMj2nXqb/nmGO0u5QrR8K1MMwzeLAjw
         GpT5kjhq3KoQuDi2LrsbS5Z0dq3Gz7RJDREOew4fCmKPQES+F1Jwi6y38VJuFADfHw5t
         LozLEpXjkYknu1n/bcq8oNP+aJDcXcMu4tSlY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=ROfTJdJVLkb+CCJsxjuVkI6i5TkZFPkuLWeSLiC/4JO6EzOtCGLVvBaXx2Tg24NFo5
         TYMADyYpsJ0Nacn0pfu7vmHSJqfrHWC3xv+gSC1jgzGB/Lp59AoY8k0ReNOffGDUsJgH
         S7TIhMwVLW91YJceti00nJmG9bi0T12sNQCLc=
Received: by 10.90.33.5 with SMTP id g5mr13112619agg.81.1218559797067;
        Tue, 12 Aug 2008 09:49:57 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 7sm5849050agc.14.2008.08.12.09.49.56
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 12 Aug 2008 09:49:56 -0700 (PDT)
Message-ID: <48A1BF40.8070504@gmail.com>
Date: Tue, 12 Aug 2008 12:50:08 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: integrating with postgres
References: <82fa9e310808120921g70233fd9q4e4c8c1eed861027@mail.gmail.com>
In-Reply-To: <82fa9e310808120921g70233fd9q4e4c8c1eed861027@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

mark wrote:
> hi
> i am new to lucene. my data is stored in a table in postgres, i want
> to be able to do full text search based on two columns.
> how do i integrate postgres & lucene? are there any guides?
> thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
Doing everything for this yourself for something simple is probably not 
that much work - but in the end your probably going to want _more_. I 
would recommend you set yourself up with solr and check  out 
https://issues.apache.org/jira/browse/SOLR-469.

If you decide to roll your own, you basically just want to use 
jdbc/object mapper to get the data to be indexed and index that data 
with the db key in Lucene - then you just juggle things around (reindex 
on db change, etc).

If your using java and hibernate, there is a Lucene/Indexing annotation 
package that helps with this type of thing as well.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 17:17:09 2008
Return-Path: <java-user-return-35459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42679 invoked from network); 12 Aug 2008 17:17:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 17:17:09 -0000
Received: (qmail 57976 invoked by uid 500); 12 Aug 2008 17:17:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57937 invoked by uid 500); 12 Aug 2008 17:17:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57926 invoked by uid 99); 12 Aug 2008 17:17:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 10:17:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 17:16:05 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4108149rvb.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 10:16:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=VYZxKgQ1t6vLP5NTCIL0L3KusMn4f6aR649aCQxug20=;
        b=km8iYhbe8EFdbgv9E+WIoA+lu0a8PecOInT9OJDKJHPdYjxYO0w3x4tLbTL2YiCuSP
         hc/tNtMJQm7UiWsamWr6sMP9AlNwz8+jfJT396FrUc/nxSEroA5MzpktLXP7m8gDq3vK
         WiyiORAkjBD7BN3zdrOsBEh84qANNErIzNfrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bBfTcFajmsvI6D8P4oIpiEYkYvZ1RHlCyY4ppifbMSkJptQUS0ZjQSdVLVDmJy6/ER
         chmTFyLUii/MjUp/7ZVVLKo+Al9DNbv5c0tLTsBroFDH/3VEXPBAujDBxzr3VOTOJKTC
         XBMq+g8OfRclaZMlPygekxbgUuDTtl6zdp6rg=
Received: by 10.141.53.4 with SMTP id f4mr4569367rvk.82.1218561393724;
        Tue, 12 Aug 2008 10:16:33 -0700 (PDT)
Received: by 10.140.173.19 with HTTP; Tue, 12 Aug 2008 10:16:33 -0700 (PDT)
Message-ID: <69de18140808121016p5a5ef0d9s55f2f8ef7156691@mail.gmail.com>
Date: Tue, 12 Aug 2008 22:46:33 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: integrating with postgres
In-Reply-To: <48A1BF40.8070504@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64532_24768533.1218561393694"
References: <82fa9e310808120921g70233fd9q4e4c8c1eed861027@mail.gmail.com>
	 <48A1BF40.8070504@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64532_24768533.1218561393694
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Tue, Aug 12, 2008 at 10:20 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Doing everything for this yourself for something simple is probably not
> that much work - but in the end your probably going to want _more_. I would
> recommend you set yourself up with solr and check  out
> https://issues.apache.org/jira/browse/SOLR-469.


Please note that SOLR-469 a.k.a DataImportHandler is now available in the
Solr nightly builds.

http://wiki.apache.org/solr/DataImportHandler

-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_64532_24768533.1218561393694--

From java-user-return-35460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 17:48:10 2008
Return-Path: <java-user-return-35460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63778 invoked from network); 12 Aug 2008 17:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 17:48:10 -0000
Received: (qmail 13429 invoked by uid 500); 12 Aug 2008 17:48:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13398 invoked by uid 500); 12 Aug 2008 17:48:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13387 invoked by uid 99); 12 Aug 2008 17:48:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 10:48:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 17:47:05 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Tue, 12 Aug 2008 13:45:04 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 12 Aug 2008 13:44:10 -0400
Subject: when do internal doc IDs change?
Thread-Topic: when do internal doc IDs change?
Thread-Index: Acj8owbBwc5LVJZ4SemDF1lTlEMxOQ==
Message-ID: <36B4EF9511887240A973A93E7878B0560A079FD36A@US1-IIEX1.IICORP.DOM>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_36B4EF9511887240A973A93E7878B0560A079FD36AUS1IIEX1IICOR_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_36B4EF9511887240A973A93E7878B0560A079FD36AUS1IIEX1IICOR_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We have a problem where using FieldCache (or using TermEnum/TermDocs direct=
ly) in order to pre-cache several fields.  It is a bottleneck, because we o=
pen a new searchable index snapshot very frequently (every minute).  Each t=
ime we get a new snapshot of our master index (basically a copy using hard =
links), we use a background thread to reload a bunch of fields using FieldC=
ache-style loading, then switch incoming queries over to the new searchable=
 index.  For current index size (18M docs), it is taking about 90 seconds t=
o load all the fields we need cached.  90 seconds is too long.  I understan=
d the issue is because it is doing 2 I/O seeks for each term, even though t=
hese are terms which are unique (or almost unique such as timestamp) for ea=
ch document.  I am familiar with using field pay loads as an alternative, b=
ut we cannot use them, and we also have an existing index which we cant mod=
ify.

One idea I have is to maintain a set of binary on-disk files (one for each =
field we want to cache) on our master index server and replicate these file=
s with each index snapshot, so that they are directly read into memory, whi=
ch would be much faster than using FieldCache on each snapshot.  These woul=
d be binary arrays whose indices need to correspond by internal doc ID to t=
he index snapshots.  As new documents arrive, we could just append field va=
lues to these files (for unique fields).  The big question is when do inter=
nal doc IDs change?  We do periodically expire documents from the master in=
dex (delete), and do unfrequent optimization (monthly).  When we schedule a=
n optimization of the master index, we can regenerate all these files.  So,=
 I know doc IDs can change then, but the big question is: in normal indexin=
g with no optimizations, will doc IDs change due some low-level segments me=
rging as we add new documents, due to existence of deleted documents?

--_000_36B4EF9511887240A973A93E7878B0560A079FD36AUS1IIEX1IICOR_--

From java-user-return-35461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 18:13:06 2008
Return-Path: <java-user-return-35461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75610 invoked from network); 12 Aug 2008 18:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 18:13:06 -0000
Received: (qmail 40567 invoked by uid 500); 12 Aug 2008 18:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40538 invoked by uid 500); 12 Aug 2008 18:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40527 invoked by uid 99); 12 Aug 2008 18:12:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 11:12:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 18:12:03 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id E6A9971C43A; Tue, 12 Aug 2008 11:12:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id E37C871C3F4
	for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 11:12:31 -0700 (PDT)
Date: Tue, 12 Aug 2008 11:12:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: when do internal doc IDs change?
In-Reply-To: <36B4EF9511887240A973A93E7878B0560A079FD36A@US1-IIEX1.IICORP.DOM>
Message-ID: <Pine.LNX.4.62.0808121104420.1738@radix.cryptio.net>
References: <36B4EF9511887240A973A93E7878B0560A079FD36A@US1-IIEX1.IICORP.DOM>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: when do internal doc IDs change?

This is a FAQ...

"When is it possible for document IDs to change?"
http://wiki.apache.org/lucene-java/LuceneFAQ#head-e1de2630fe33fb6eb6733747a5bf870f600e1b4c

: One idea I have is to maintain a set of binary on-disk files (one for 
: each field we want to cache) on our master index server and replicate 
: these files with each index snapshot, so that they are directly read 

You may want to take a look at LUCENE-831 which may add support for 
soemthing like this directly into IndexReader, so you could hook 
in whatever kind of cache logic you wanted (FieldCache), as well as 
whatever type of cach impl (ie: disk based) that you wnated, and 
Indexreader would "do the right thing" when the index was opened or 
reopened or closed.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 18:25:43 2008
Return-Path: <java-user-return-35462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88796 invoked from network); 12 Aug 2008 18:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 18:25:42 -0000
Received: (qmail 61647 invoked by uid 500); 12 Aug 2008 18:25:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61619 invoked by uid 500); 12 Aug 2008 18:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61602 invoked by uid 99); 12 Aug 2008 18:25:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 11:25:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [67.222.39.33] (HELO outbound-mail-153.bluehost.com) (67.222.39.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Aug 2008 18:24:29 +0000
Received: (qmail 17774 invoked by uid 0); 12 Aug 2008 18:24:52 -0000
Received: from unknown (HELO box108.bluehost.com) (69.89.22.108)
  by outboundproxy5.bluehost.com with SMTP; 12 Aug 2008 18:24:52 -0000
Received: from [65.244.175.138] (helo=unused.atl.redhat.com)
	by box108.bluehost.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.69)
	(envelope-from <emmanuel@hibernate.org>)
	id 1KSyY7-0004Ag-QH
	for java-user@lucene.apache.org; Tue, 12 Aug 2008 12:24:52 -0600
Message-Id: <0D90841C-B03E-4E23-8CF5-3B0BDA4C646F@hibernate.org>
From: Emmanuel Bernard <emmanuel@hibernate.org>
To: java-user@lucene.apache.org
In-Reply-To: <C158F5A8-BFF4-4C0D-ACBD-379DF314A0B7@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: Hibernate Search
Date: Tue, 12 Aug 2008 14:24:52 -0400
References: <C158F5A8-BFF4-4C0D-ACBD-379DF314A0B7@gmail.com>
X-Mailer: Apple Mail (2.928.1)
X-Identified-User: {1307:box108.bluehost.com:emmanue2:emmanuelbernard.com} {sentby:smtp auth 65.244.175.138 authed with oss+emmanuelbernard.com}
X-Virus-Checked: Checked by ClamAV on apache.org

You probably should ask your question on the Hibernate forum as well.  
You will more likely find actual Hibernate Search users there :)

http://forum.hibernate.org/viewforum.php?f=9

--
Emmanuel Bernard
http://in.relation.to/Bloggers/Emmanuel | http://blog.emmanuelbernard.com 
  | http://twitter.com/emmanuelbernard
Hibernate Search in Action (http://is.gd/Dl1)

On  Aug 12, 2008, at 03:47, Sascha Fahl wrote:

> Hi,
>
> what do you think about Hibernate Search to handle the indexing of  
> database content? It often is a problem to have database and index  
> coherent. So does anyone of you have experiences in using Hibernate  
> Search there for?
>
> Regards,
> Sascha
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 19:16:05 2008
Return-Path: <java-user-return-35463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25052 invoked from network); 12 Aug 2008 19:16:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 19:16:05 -0000
Received: (qmail 34959 invoked by uid 500); 12 Aug 2008 19:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34009 invoked by uid 500); 12 Aug 2008 19:15:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33998 invoked by uid 99); 12 Aug 2008 19:15:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 12:15:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 19:15:01 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4164561rvb.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 12:15:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NtYtHq8B9tmAtTD2Bw9kPUvgBHxWVI4eB42GK45Ltho=;
        b=Oih7d9MNOrtrI5kZX1ubIZ/EB8FWXJ4Nh4uqyCLUxj22CJY195Lj09h/77913rYmAp
         OIB9jI5ikupA+fCxoWDDLu/7ny1yXrHTib4GSqqVvV3JvQXCqYRdc0Jtf87dnLso0UBo
         pmWq7RCqkJkJiBEf8ThTNSpGb0luEPTkM/do8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rYy8Hh+TB+YetBYg/5v3GFS4NGH00slqDjiS51pdrr8mINW4A13fAHsy/sdTXo1MW5
         p7PYYggRVj7mMSuuXrvZpBaq13uKoEJT7qqipzrKdnkiThWsIM5LSCXS0rWVgnh8YGiF
         gkkP9zhoLDoxqMsrlZUV2j0WFv15Tk0UHMDlE=
Received: by 10.141.89.13 with SMTP id r13mr4638800rvl.177.1218568511765;
        Tue, 12 Aug 2008 12:15:11 -0700 (PDT)
Received: by 10.140.173.19 with HTTP; Tue, 12 Aug 2008 12:15:11 -0700 (PDT)
Message-ID: <69de18140808121215k3130c261v61cc44b5b52e2fb5@mail.gmail.com>
Date: Wed, 13 Aug 2008 00:45:11 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hibernate Search
In-Reply-To: <C158F5A8-BFF4-4C0D-ACBD-379DF314A0B7@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66553_24855509.1218568511767"
References: <C158F5A8-BFF4-4C0D-ACBD-379DF314A0B7@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66553_24855509.1218568511767
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Perhaps Solr and DataImportHandler may also be of interest to you.

http://lucene.apache.org/solr
http://wiki.apache.org/solr/DataImportHandler

On Tue, Aug 12, 2008 at 1:17 PM, Sascha Fahl <sascha.fahl@googlemail.com>wrote:

> Hi,
>
> what do you think about Hibernate Search to handle the indexing of database
> content? It often is a problem to have database and index coherent. So does
> anyone of you have experiences in using Hibernate Search there for?
>
> Regards,
> Sascha
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_66553_24855509.1218568511767--

From java-user-return-35464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 19:37:42 2008
Return-Path: <java-user-return-35464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42673 invoked from network); 12 Aug 2008 19:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 19:37:41 -0000
Received: (qmail 65823 invoked by uid 500); 12 Aug 2008 19:37:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65789 invoked by uid 500); 12 Aug 2008 19:37:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65778 invoked by uid 99); 12 Aug 2008 19:37:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 12:37:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Aug 2008 19:36:35 +0000
Received: (qmail 57991 invoked by uid 60001); 12 Aug 2008 19:37:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=4SFhd/a0muOYKk2xILyULjGczo2SZMXB9TCpkoEolPlie2iPnZso7lWromUt/2ubKNmyA3k8Pbra/LtjQ/+pYT28guoHi6Oriv7aIQVncEmcrXuL9e9QBUH3YOzoZblhZqztowdLNFO7DWq5UswSI8g/5N3grA7+4G117CEnogQ=;
Received: from [65.200.144.21] by web50305.mail.re2.yahoo.com via HTTP; Tue, 12 Aug 2008 12:37:00 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 12:37:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Case studies for Lucene in Action 2nd edition
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <565085.57630.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

We are working on Lucene in Action 2nd edition.  One of the well received chapters from LIA #1 was the Case Studies chapter.  Case studies in this chapter are from external LIA contributors who were willing to share information about how they use Lucene.

We want to refresh this chapter for LIA #2.  It's time for some new case studies.  If you are using Lucene in some clever or unusual way and are willing to share this information, please get in touch.  Feel free to respond on the list or reply to me directly.

Thanks!

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 21:32:25 2008
Return-Path: <java-user-return-35465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11452 invoked from network); 12 Aug 2008 21:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 21:32:25 -0000
Received: (qmail 19877 invoked by uid 500); 12 Aug 2008 21:32:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19855 invoked by uid 500); 12 Aug 2008 21:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19844 invoked by uid 99); 12 Aug 2008 21:32:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 14:32:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 21:31:19 +0000
Received: by gxk6 with SMTP id 6so413918gxk.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 14:30:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=wtBBfwvf127lJLTPSpPbuOrIipBQIELYXuepjFkSxqM=;
        b=DVbYfrauGDFFblPyoEb/LFPlESKVxGvGrKRDu79XLyTbhP75PPNa/tUwsOn6k4e8SK
         Td45rlU5fN3L+WsGeY+X68TsD8H5WUZJk8SgDKzPXE6axkCNT1MHCNLf55gjDPbbOOQK
         LgdzioYf5rzHnjx9fx1mqTQYpmMmmNN1tY4VQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=jXdmOx8lnjIjg5ZLoF+TxPliPJDZH47QFYM5C39+qf6LulLrYakBUDZiZ1oTwY9699
         dNZCVG/UNLjQsHm69oB5DXLLvHX1vIC0rogaTTBGN/GPQONGjR7rGGtdsF/HDa8DMwPf
         44Tr3sTDoyGbK/SmQTK5EOwDeS1exPrBvHDbo=
Received: by 10.151.149.14 with SMTP id b14mr15111914ybo.71.1218576647017;
        Tue, 12 Aug 2008 14:30:47 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Tue, 12 Aug 2008 14:30:47 -0700 (PDT)
Message-ID: <efd1bd310808121430y5eb02823kb79053906d95e0e9@mail.gmail.com>
Date: Tue, 12 Aug 2008 14:30:47 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Tokenized x Un_tokenized
In-Reply-To: <110170.80266.qm@web50307.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <110170.80266.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

My searches for my String tokenized field was working properly. I
switched the field to un_tokenized, rebuilt the index, and now my
searches only return strings that match the query string in lower
case.

For example, searching for 'us*':

The tokenized field version would find 'USA' and 'usa'

The untokenized field version only finds 'usa'

I'm using the StandardAnalyzer in both cases.

Thanks


Andre

On Thu, Aug 7, 2008 at 8:16 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> Hi,
>
> Perhaps you can give some examples.  Yes, untokenized means "full string" - it requires an "exact match".
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Andre Rubin <andre.rubin@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, August 7, 2008 8:04:04 PM
>> Subject: Searching Tokenized x Un_tokenized
>>
>> Hi all,
>>
>> When I switched a String field from tokenized to untokenized, some
>> searches started not returning some obvious values. Am I missing
>> something on querying untokenized fields? Another question is, do I
>> need an Analyzer if my search is on an Untokenized field, wouldn't the
>> search be based on the full String rather than its tokens?
>>
>> Thanks,
>>
>>
>> Andre
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 12 23:40:15 2008
Return-Path: <java-user-return-35466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5614 invoked from network); 12 Aug 2008 23:40:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2008 23:40:15 -0000
Received: (qmail 60433 invoked by uid 500); 12 Aug 2008 23:40:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60403 invoked by uid 500); 12 Aug 2008 23:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60392 invoked by uid 99); 12 Aug 2008 23:40:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 16:40:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 23:39:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4287444rvb.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 16:39:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=olTBUkLH+b4COatu5ZgUrIif1biHdEVpIPC7nQ1g6EY=;
        b=jcF7EutOeET8ACRpZ0kd1CMXBkecdwl0836GUhdY0wqI7r+IB/nlQZjZ/SxzenjP82
         Ft0SFF2HmNmzfEeUv65pcUT+qAWJaHQZvFRCKZriMbkQ/+67iL6TzkLFC6E9rBSWdjYu
         uNNStnnpdH2LAi2+fEl60WD0gmjW/N/KRMY9U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=wUR4sheH2vSPkVcO0bKe8wEzwHP5xuaW2O2E5Tqr9Lm+Bn8vanfOPw+GEgbvFXxj6I
         MWUQ8kwPZaJpcJDIxShh6FLF6fcBotZ+pqkEGJ4O9eLDtPaJbxi1QvVZTr1Nr67CdgUs
         wOQrmKCCx6z1NkjQ+Jh9yZpxnl37pT4xLfKbM=
Received: by 10.140.163.3 with SMTP id l3mr4797213rve.55.1218584380231;
        Tue, 12 Aug 2008 16:39:40 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Tue, 12 Aug 2008 16:39:40 -0700 (PDT)
Message-ID: <1bcb7c7f0808121639i5fb3c4eekda321a89dd63ac46@mail.gmail.com>
Date: Wed, 13 Aug 2008 02:39:40 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: top terms
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95515_1342889.1218584380229"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95515_1342889.1218584380229
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,

how do we get the terms with the highest frequency for a given field?

I know one can TermEnum terms = searcher.getIndexReader().terms() then,
iterate over it and filter the fields required and count them,
but is there a way to get lets say top 50 terms for a given field without
iterating?

Best Regards,
-C.B.

------=_Part_95515_1342889.1218584380229--

From java-user-return-35467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 00:56:44 2008
Return-Path: <java-user-return-35467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68623 invoked from network); 13 Aug 2008 00:56:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 00:56:44 -0000
Received: (qmail 33600 invoked by uid 500); 13 Aug 2008 00:56:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33562 invoked by uid 500); 13 Aug 2008 00:56:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33551 invoked by uid 99); 13 Aug 2008 00:56:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 17:56:37 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Aug 2008 00:55:41 +0000
Received: (qmail 25506 invoked from network); 13 Aug 2008 00:56:05 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 13 Aug 2008 00:56:05 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: possible to read index into memory?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830806261247q4e59e5c4jef438be4a065c742@mail.gmail.com>
References: <1214509228.6790.128.camel@tetsiaga>
	 <359a92830806261247q4e59e5c4jef438be4a065c742@mail.gmail.com>
Content-Type: text/plain
Date: Tue, 12 Aug 2008 20:56:09 -0400
Message-Id: <1218588969.25941.65.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
  The kind sir below recommended the RAMDirectory for loading an on-disk
index into memory (the entire data) and using IndexSearcher off that. It
seemed to worked very well. 

On one index, I am seeing no speed change when flipping between
RAMDirectory IndexSearcher and file system version.

Creating the RAMDirectory from the on-disk index only takes 0.09
seconds. It appears it is not loading the data into memory, but maybe
just the file names of the index?

How can I load an on-disk index - the data - into memory and run
searches there?

thanks for any help. you guys are awesome!
D

On Thu, 2008-06-26 at 15:47 -0400, Erick Erickson wrote:
> >From the docs...
> 
> RAMDirectory
> 
> public *RAMDirectory*(Directory
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/store/Directory.html>
> dir)
>              throws IOException
> <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>
> 
> Creates a new RAMDirectory instance from a different
> Directoryimplementation. This can be used to load a disk-based index
> into memory.
> 
> Seems like exactly what you're asking for...
> 
> Best
> Erick
> 
> On Thu, Jun 26, 2008 at 3:40 PM, Darren Govoni <darren@ontrenet.com> wrote:
> 
> > Hi,
> >  Is there a lucene index reader that will load a disk-based index into
> > memory and perform searches on it from RAM? Sorry if I missed this in
> > the docs somewhere.
> >
> > Darren
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 02:35:32 2008
Return-Path: <java-user-return-35468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60633 invoked from network); 13 Aug 2008 02:35:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 02:35:32 -0000
Received: (qmail 88360 invoked by uid 500); 13 Aug 2008 02:35:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88332 invoked by uid 500); 13 Aug 2008 02:35:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88321 invoked by uid 99); 13 Aug 2008 02:35:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 19:35:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 02:34:28 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2638753wfc.20
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 19:34:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JY+BhtlExW32dC1fNoHlmSE4JV7oJfiBfPHCwsJatSA=;
        b=J/hYzvoqa4axhrQxxQXm9hniRiNN5Nd8sgNSl1EVxnUo5XQBzZknEm85wkrXtNfJj8
         inL3DBuP+z1rnvSuvRVlwXXnj5y6+p/R/rJw2Nr+zzgq0w5Ai2GDO/ro04pXCJyebow/
         jv1tzvB2NwtcfCRspT9ECarVyYG+5BVTih+I4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=urQzCihw779Fpz/0kHSbi/HQf494AqT5FHn0tLN2LAU5pR+wKY+R4ffyC0G+M0eQGX
         S/dPLjvU95Ln6HxEKB0buoKdcn/bFi5CQha/SvjDZ+jucyex5xchs/gANiqT+3SBFn+Q
         9QlI5yDHBHfAb6hbo796xfTFYPHAqtafpIQwg=
Received: by 10.143.31.11 with SMTP id i11mr3018390wfj.328.1218594879202;
        Tue, 12 Aug 2008 19:34:39 -0700 (PDT)
Received: by 10.142.171.7 with HTTP; Tue, 12 Aug 2008 19:34:39 -0700 (PDT)
Message-ID: <5816fbdd0808121934s3c6984b4l5c0ea43b2463c52c@mail.gmail.com>
Date: Wed, 13 Aug 2008 08:04:39 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: possible to read index into memory?
In-Reply-To: <1218588969.25941.65.camel@nuraku>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_107260_16710353.1218594879146"
References: <1214509228.6790.128.camel@tetsiaga>
	 <359a92830806261247q4e59e5c4jef438be4a065c742@mail.gmail.com>
	 <1218588969.25941.65.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_107260_16710353.1218594879146
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did you try this?

byte [] buffer = new byte [100] ;
LuceneUtils.copy(fsDir, ramDir, buffer);


Kalani

On Wed, Aug 13, 2008 at 6:26 AM, Darren Govoni <darren@ontrenet.com> wrote:

> Hello,
>  The kind sir below recommended the RAMDirectory for loading an on-disk
> index into memory (the entire data) and using IndexSearcher off that. It
> seemed to worked very well.
>
> On one index, I am seeing no speed change when flipping between
> RAMDirectory IndexSearcher and file system version.
>
> Creating the RAMDirectory from the on-disk index only takes 0.09
> seconds. It appears it is not loading the data into memory, but maybe
> just the file names of the index?
>
> How can I load an on-disk index - the data - into memory and run
> searches there?
>
> thanks for any help. you guys are awesome!
> D
>
> On Thu, 2008-06-26 at 15:47 -0400, Erick Erickson wrote:
> > >From the docs...
> >
> > RAMDirectory
> >
> > public *RAMDirectory*(Directory
> > <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/store/Directory.html>
> > dir)
> >              throws IOException
> > <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>
> >
> > Creates a new RAMDirectory instance from a different
> > Directoryimplementation. This can be used to load a disk-based index
> > into memory.
> >
> > Seems like exactly what you're asking for...
> >
> > Best
> > Erick
> >
> > On Thu, Jun 26, 2008 at 3:40 PM, Darren Govoni <darren@ontrenet.com>
> wrote:
> >
> > > Hi,
> > >  Is there a lucene index reader that will load a disk-based index into
> > > memory and perform searches on it from RAM? Sorry if I missed this in
> > > the docs somewhere.
> > >
> > > Darren
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_107260_16710353.1218594879146--

From java-user-return-35469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 02:56:04 2008
Return-Path: <java-user-return-35469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75224 invoked from network); 13 Aug 2008 02:56:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 02:56:04 -0000
Received: (qmail 3647 invoked by uid 500); 13 Aug 2008 02:55:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3192 invoked by uid 500); 13 Aug 2008 02:55:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3181 invoked by uid 99); 13 Aug 2008 02:55:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 19:55:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 02:55:00 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 293AC71C43A; Tue, 12 Aug 2008 19:55:28 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2618F71C316
	for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 19:55:28 -0700 (PDT)
Date: Tue, 12 Aug 2008 19:55:28 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: possible to read index into memory?
In-Reply-To: <1218588969.25941.65.camel@nuraku>
Message-ID: <Pine.LNX.4.62.0808121946390.23455@radix.cryptio.net>
References: <1214509228.6790.128.camel@tetsiaga> 
 <359a92830806261247q4e59e5c4jef438be4a065c742@mail.gmail.com>
 <1218588969.25941.65.camel@nuraku>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: On one index, I am seeing no speed change when flipping between
: RAMDirectory IndexSearcher and file system version.

that is probably because even if you just use an FSDirectory, your OS will 
cache the disk "pages" in RAM for you -- all using a RAMDirectory does for 
you is garuntee that the entire index is copied into the heap you allocate 
for your JVM.  If you've got 16GB or RAM, and a 5GB index, and you 
allocated 12GB of RAM to the JVM and read your index into a RAMDirectory, 
your index will always be in RAM, no matter what other processes do on 
your machine.

If instead you only allocate 6GB of RAM to the JVM, and nothing else is 
using up the rest of your RAM, the OS has plenty to load the whole index 
into RAM as part of the filesystem cache once you use it -- but if another 
process comes along and really needs that RAM (or if something reads a lot 
of other pages of disk) your index might get bumped from the filesystem 
cache, and the next few reads could be slow.

: Creating the RAMDirectory from the on-disk index only takes 0.09
: seconds. It appears it is not loading the data into memory, but maybe
: just the file names of the index?

passing an FSDIrectory to the constructor of a RAMDIrectory uses the 
Directory.copy() method whose source is fairly straight forward and easy 
to read -- unless your index is ginormous it's not suprising that it's 
"fast" particularly if it's already in the filesystem cache.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 02:56:45 2008
Return-Path: <java-user-return-35470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75665 invoked from network); 13 Aug 2008 02:56:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 02:56:45 -0000
Received: (qmail 4878 invoked by uid 500); 13 Aug 2008 02:56:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4842 invoked by uid 500); 13 Aug 2008 02:56:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4831 invoked by uid 99); 13 Aug 2008 02:56:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 19:56:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Aug 2008 02:55:40 +0000
Received: (qmail 78754 invoked by uid 60001); 13 Aug 2008 02:55:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=6k8UQFO6fB/3rMPoxwXNOszMOY3NW36kZPe+DKAw2VK7HflSKMsRNUGIuQnZof6Hk2+BdCcSC7KTPdE009DN6VzeL/BMPYaZqthHoEJktM+Y3fNDfGshhayZsW6MY2fkgqdJhZexg4Rlibmnvq51gDh5OoHgB3DILEDSb8tGwdI=;
Received: from [72.227.164.48] by web50301.mail.re2.yahoo.com via HTTP; Tue, 12 Aug 2008 19:55:07 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 19:55:07 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: top terms
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <498251.78198.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

There is a class for doing that in contrib/miscellaneous I think, though it too probably loops through TermEnum.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 12, 2008 7:39:40 PM
> Subject: top terms
> 
> hello,
> 
> how do we get the terms with the highest frequency for a given field?
> 
> I know one can TermEnum terms = searcher.getIndexReader().terms() then,
> iterate over it and filter the fields required and count them,
> but is there a way to get lets say top 50 terms for a given field without
> iterating?
> 
> Best Regards,
> -C.B.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 02:57:45 2008
Return-Path: <java-user-return-35471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76342 invoked from network); 13 Aug 2008 02:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 02:57:44 -0000
Received: (qmail 8750 invoked by uid 500); 13 Aug 2008 02:57:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7763 invoked by uid 500); 13 Aug 2008 02:57:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7752 invoked by uid 99); 13 Aug 2008 02:57:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 19:57:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Aug 2008 02:56:39 +0000
Received: (qmail 80540 invoked by uid 60001); 13 Aug 2008 02:57:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ZYlWMdii2XIe0nrzvDRjHs7R45v+w+5fqIJ/brwwqBTkGnADW7q/skuMmJ49ZQ/ZQsqDoKK2EhQ88TG7kDPikTm/55GGtzD9WNZ5G5TZRzxULwjTMwrl793CnJV5bBaAw49EdpPtGcqMixejyX5Krjl5KeZh+oqKh9ZB7KvSDQA=;
Received: from [72.227.164.48] by web50301.mail.re2.yahoo.com via HTTP; Tue, 12 Aug 2008 19:57:06 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 19:57:06 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Searching Tokenized x Un_tokenized
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <761271.80262.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Andre,

Check the Lucene FAQ, there is an entry about wildcards and analysis (which doesn't take place for wildcard queries).  Could that be it?

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Andre Rubin <andre.rubin@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 12, 2008 5:30:47 PM
> Subject: Re: Searching Tokenized x Un_tokenized
> 
> My searches for my String tokenized field was working properly. I
> switched the field to un_tokenized, rebuilt the index, and now my
> searches only return strings that match the query string in lower
> case.
> 
> For example, searching for 'us*':
> 
> The tokenized field version would find 'USA' and 'usa'
> 
> The untokenized field version only finds 'usa'
> 
> I'm using the StandardAnalyzer in both cases.
> 
> Thanks
> 
> 
> Andre
> 
> On Thu, Aug 7, 2008 at 8:16 PM, Otis Gospodnetic
> wrote:
> > Hi,
> >
> > Perhaps you can give some examples.  Yes, untokenized means "full string" - it 
> requires an "exact match".
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> >
> > ----- Original Message ----
> >> From: Andre Rubin 
> >> To: java-user@lucene.apache.org
> >> Sent: Thursday, August 7, 2008 8:04:04 PM
> >> Subject: Searching Tokenized x Un_tokenized
> >>
> >> Hi all,
> >>
> >> When I switched a String field from tokenized to untokenized, some
> >> searches started not returning some obvious values. Am I missing
> >> something on querying untokenized fields? Another question is, do I
> >> need an Analyzer if my search is on an Untokenized field, wouldn't the
> >> search be based on the full String rather than its tokens?
> >>
> >> Thanks,
> >>
> >>
> >> Andre
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 03:07:08 2008
Return-Path: <java-user-return-35472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82088 invoked from network); 13 Aug 2008 03:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 03:07:08 -0000
Received: (qmail 13636 invoked by uid 500); 13 Aug 2008 03:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13610 invoked by uid 500); 13 Aug 2008 03:07:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13599 invoked by uid 99); 13 Aug 2008 03:07:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 20:07:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Aug 2008 03:06:03 +0000
Received: (qmail 72967 invoked by uid 60001); 13 Aug 2008 03:06:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=cK90pxoKrEEfUqIM8KtsLPSNwcSoAXq86EFyPjkpwu2+BPgpZDAcYWApYM3tb2bSpVSkLjFF4d6SlfG4HglHSPK+s5J/2WfnidJ/q+KJv0ZCph639lc+zqCKtC8I/gLKoiOgmVim2nKS+1HkIlyKGXbPGuWPa35jT9KqI/gQtFI=;
Received: from [72.227.164.48] by web50309.mail.re2.yahoo.com via HTTP; Tue, 12 Aug 2008 20:06:28 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 20:06:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: search for special condition.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <731882.70944.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0ALucene doesn't have the greater than operator.  Perhaps you can us=
e range queries to accomplish the same thing.=0A=0A=0Ahttp://lucene.apache.=
org/java/2_3_2/queryparsersyntax.html#Range%20Searches=0A=0AOtis=0A--=0ASem=
atext -- http://sematext.com/ -- Lucene - Solr - Nutch=0A=0A=0A=0A----- Ori=
ginal Message ----=0A> From: =EC=9E=A5=EC=9A=A9=EC=84=9D <need4spd@gmail.co=
m>=0A> To: java-user@lucene.apache.org=0A> Sent: Tuesday, August 12, 2008 6=
:01:00 AM=0A> Subject: search for special condition.=0A> =0A> hi.=0A> =0A> =
I am searching for lucene api or function like query "FIELD > 1000"=0A> =0A=
> For example, a user wants to search a product which price is bigger then=
=0A> user's input.=0A> If user's input is 10000 then result are the product=
s in index just like=0A> "PRICE > 10000"=0A> =0A> Is there any way to searc=
h like that?=0A> =0A> thanks.=0A> Jang.=0A> -- =0A> DEV=EC=9A=A9=EC=8B=9D=
=0A> http://devyongsik.tistory.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 03:09:39 2008
Return-Path: <java-user-return-35473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82792 invoked from network); 13 Aug 2008 03:09:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 03:09:39 -0000
Received: (qmail 15843 invoked by uid 500); 13 Aug 2008 03:09:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15808 invoked by uid 500); 13 Aug 2008 03:09:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15797 invoked by uid 99); 13 Aug 2008 03:09:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 20:09:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Aug 2008 03:08:33 +0000
Received: (qmail 91476 invoked by uid 60001); 13 Aug 2008 03:09:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=hKvt0EZlVTjbGUYNL9elm64ok8Q+/sKfFXs6QSD65lEtbm8g24goA8k5fvJmq+NyqwPM8XUDGEJe+UDmrC2zhNE+xanJbMRaoRacv/61xns1dzcGLh/hxqKMIeOwxRB+83fdRItwkcUT+pDCEwsNYrLITBH7yqlbTHJ1wfL3cz4=;
Received: from [72.227.164.48] by web50302.mail.re2.yahoo.com via HTTP; Tue, 12 Aug 2008 20:08:59 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 20:08:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: possible to read index into memory?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <10189.91076.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Another very simple alternative to using RAMDirectory is the use of RAM FS:

http://search.yahoo.com/search?p=ramfs
http://search.yahoo.com/search?p=tmpfs

 
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Chris Hostetter <hossman_lucene@fucit.org>
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 12, 2008 10:55:28 PM
> Subject: Re: possible to read index into memory?
> 
> 
> : On one index, I am seeing no speed change when flipping between
> : RAMDirectory IndexSearcher and file system version.
> 
> that is probably because even if you just use an FSDirectory, your OS will 
> cache the disk "pages" in RAM for you -- all using a RAMDirectory does for 
> you is garuntee that the entire index is copied into the heap you allocate 
> for your JVM.  If you've got 16GB or RAM, and a 5GB index, and you 
> allocated 12GB of RAM to the JVM and read your index into a RAMDirectory, 
> your index will always be in RAM, no matter what other processes do on 
> your machine.
> 
> If instead you only allocate 6GB of RAM to the JVM, and nothing else is 
> using up the rest of your RAM, the OS has plenty to load the whole index 
> into RAM as part of the filesystem cache once you use it -- but if another 
> process comes along and really needs that RAM (or if something reads a lot 
> of other pages of disk) your index might get bumped from the filesystem 
> cache, and the next few reads could be slow.
> 
> : Creating the RAMDirectory from the on-disk index only takes 0.09
> : seconds. It appears it is not loading the data into memory, but maybe
> : just the file names of the index?
> 
> passing an FSDIrectory to the constructor of a RAMDIrectory uses the 
> Directory.copy() method whose source is fairly straight forward and easy 
> to read -- unless your index is ginormous it's not suprising that it's 
> "fast" particularly if it's already in the filesystem cache.
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 04:16:19 2008
Return-Path: <java-user-return-35474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15551 invoked from network); 13 Aug 2008 04:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 04:16:18 -0000
Received: (qmail 45141 invoked by uid 500); 13 Aug 2008 04:16:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45105 invoked by uid 500); 13 Aug 2008 04:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45094 invoked by uid 99); 13 Aug 2008 04:16:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 21:16:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 04:15:14 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4411949rvb.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 21:15:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=dJHuQIR8khwFxtlsn/6fMXpAU5vu2xUkY0eA2p86Z+0=;
        b=pEkthlOeJK1hVCQD27Ext4lp6uVI4cNil0NZW844wGfz8zeUn4gtx4+D0n7aHNgxVc
         b82qm/dZ9lfTZPk9baoYkPHTc1gXdNJ0eGka6NqTqS9jnD9mOnoCTiGgaFsieMfv+ahB
         ocVKvnVmtZsf1hY+WK7uCmQQ/Dlgx102pDBso=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=HTgE56vChoftz7OJo2WU5uIYuMvJ6MDdfz76njCmo66o+dyggoDIAUnA8Nk9BeiXiV
         G5jWpPteAaBN96ZawGFtm+2zovmadm3pvNH81SX74qReptsnye3ylc6t6papgNzvVO4L
         ApObb4yTmsaunlJq6STv3xcJPVocyxhMX3w/s=
Received: by 10.141.66.16 with SMTP id t16mr4905822rvk.168.1218600925159;
        Tue, 12 Aug 2008 21:15:25 -0700 (PDT)
Received: by 10.141.129.20 with HTTP; Tue, 12 Aug 2008 21:15:25 -0700 (PDT)
Message-ID: <efd1bd310808122115i4a81f01fh1a9561ee36a3ab0d@mail.gmail.com>
Date: Tue, 12 Aug 2008 21:15:25 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Tokenized x Un_tokenized
In-Reply-To: <761271.80262.qm@web50301.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <761271.80262.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Otis, that was exactly what was happening.

1) According to here:
http://wiki.apache.org/lucene-java/LuceneFAQ#head-133cf44dd3dff3680c96c1316a663e881eeac35a
wildcard queries are not passed through the Analyzer, but they are
always set to lower case.

2) And according to here:
http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c44472d10961ba63c
un_tokenized fields are not passed through the Analyze as well.

So by creating an untokenized field and setting
parser.setLowercaseExpandedTerms(false), I manage to make my use case
work in a case-sensitive manner. That is, 'u*' returns 'usa' and 'U*'
returns USA....

The thing is, how to make this case-insensitive? I can make #1 work by
settting it to lowercase: parser.setLowercaseExpandedTerms(true). But
how make #2 work, that is, using a LowerCaseFilter to an Untokenized
field?

Thanks,


Andre

On Tue, Aug 12, 2008 at 7:57 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> Andre,
>
> Check the Lucene FAQ, there is an entry about wildcards and analysis (which doesn't take place for wildcard queries).  Could that be it?
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Andre Rubin <andre.rubin@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, August 12, 2008 5:30:47 PM
>> Subject: Re: Searching Tokenized x Un_tokenized
>>
>> My searches for my String tokenized field was working properly. I
>> switched the field to un_tokenized, rebuilt the index, and now my
>> searches only return strings that match the query string in lower
>> case.
>>
>> For example, searching for 'us*':
>>
>> The tokenized field version would find 'USA' and 'usa'
>>
>> The untokenized field version only finds 'usa'
>>
>> I'm using the StandardAnalyzer in both cases.
>>
>> Thanks
>>
>>
>> Andre
>>
>> On Thu, Aug 7, 2008 at 8:16 PM, Otis Gospodnetic
>> wrote:
>> > Hi,
>> >
>> > Perhaps you can give some examples.  Yes, untokenized means "full string" - it
>> requires an "exact match".
>> >
>> > Otis
>> > --
>> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>> >
>> >
>> >
>> > ----- Original Message ----
>> >> From: Andre Rubin
>> >> To: java-user@lucene.apache.org
>> >> Sent: Thursday, August 7, 2008 8:04:04 PM
>> >> Subject: Searching Tokenized x Un_tokenized
>> >>
>> >> Hi all,
>> >>
>> >> When I switched a String field from tokenized to untokenized, some
>> >> searches started not returning some obvious values. Am I missing
>> >> something on querying untokenized fields? Another question is, do I
>> >> need an Analyzer if my search is on an Untokenized field, wouldn't the
>> >> search be based on the full String rather than its tokens?
>> >>
>> >> Thanks,
>> >>
>> >>
>> >> Andre
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 04:24:39 2008
Return-Path: <java-user-return-35475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20120 invoked from network); 13 Aug 2008 04:24:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 04:24:39 -0000
Received: (qmail 52297 invoked by uid 500); 13 Aug 2008 04:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52245 invoked by uid 500); 13 Aug 2008 04:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52221 invoked by uid 99); 13 Aug 2008 04:24:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 21:24:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Aug 2008 04:23:32 +0000
Received: (qmail 74415 invoked by uid 60001); 13 Aug 2008 04:23:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=lPDm9sVLvhERJrD5n2YGA2LXxAx7Usf0UzF2H+MFfURr/tQGwpTzZVUPXbS7Waa0TMLBp5sR14FU6k9OxsPpLs2DauJoAK7uhwmlLpDNYKUUy99/t3fMrZe2/hBLgl5XDs9Vl84ggKrg6kMYGmaw2HUeGyub3DaVlHc4vpP6l+s=;
Received: from [72.227.164.48] by web50306.mail.re2.yahoo.com via HTTP; Tue, 12 Aug 2008 21:22:59 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 12 Aug 2008 21:22:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Searching Tokenized x Un_tokenized
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <976085.74107.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Perhaps you can lowercase the text prior to passing it to Lucene?
Or perhaps you can have a custom Analyzer that treats the whole input as 1 Token (see KeywordAnalyzer -- http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/KeywordAnalyzer.html ), but also includes LowerCaseFilter that's applied to that 1 Token.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Andre Rubin <andre.rubin@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, August 13, 2008 12:15:25 AM
> Subject: Re: Searching Tokenized x Un_tokenized
> 
> Thanks Otis, that was exactly what was happening.
> 
> 1) According to here:
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-133cf44dd3dff3680c96c1316a663e881eeac35a
> wildcard queries are not passed through the Analyzer, but they are
> always set to lower case.
> 
> 2) And according to here:
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c44472d10961ba63c
> un_tokenized fields are not passed through the Analyze as well.
> 
> So by creating an untokenized field and setting
> parser.setLowercaseExpandedTerms(false), I manage to make my use case
> work in a case-sensitive manner. That is, 'u*' returns 'usa' and 'U*'
> returns USA....
> 
> The thing is, how to make this case-insensitive? I can make #1 work by
> settting it to lowercase: parser.setLowercaseExpandedTerms(true). But
> how make #2 work, that is, using a LowerCaseFilter to an Untokenized
> field?
> 
> Thanks,
> 
> 
> Andre
> 
> On Tue, Aug 12, 2008 at 7:57 PM, Otis Gospodnetic
> wrote:
> > Andre,
> >
> > Check the Lucene FAQ, there is an entry about wildcards and analysis (which 
> doesn't take place for wildcard queries).  Could that be it?
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> >
> > ----- Original Message ----
> >> From: Andre Rubin 
> >> To: java-user@lucene.apache.org
> >> Sent: Tuesday, August 12, 2008 5:30:47 PM
> >> Subject: Re: Searching Tokenized x Un_tokenized
> >>
> >> My searches for my String tokenized field was working properly. I
> >> switched the field to un_tokenized, rebuilt the index, and now my
> >> searches only return strings that match the query string in lower
> >> case.
> >>
> >> For example, searching for 'us*':
> >>
> >> The tokenized field version would find 'USA' and 'usa'
> >>
> >> The untokenized field version only finds 'usa'
> >>
> >> I'm using the StandardAnalyzer in both cases.
> >>
> >> Thanks
> >>
> >>
> >> Andre
> >>
> >> On Thu, Aug 7, 2008 at 8:16 PM, Otis Gospodnetic
> >> wrote:
> >> > Hi,
> >> >
> >> > Perhaps you can give some examples.  Yes, untokenized means "full string" - 
> it
> >> requires an "exact match".
> >> >
> >> > Otis
> >> > --
> >> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >> >
> >> >
> >> >
> >> > ----- Original Message ----
> >> >> From: Andre Rubin
> >> >> To: java-user@lucene.apache.org
> >> >> Sent: Thursday, August 7, 2008 8:04:04 PM
> >> >> Subject: Searching Tokenized x Un_tokenized
> >> >>
> >> >> Hi all,
> >> >>
> >> >> When I switched a String field from tokenized to untokenized, some
> >> >> searches started not returning some obvious values. Am I missing
> >> >> something on querying untokenized fields? Another question is, do I
> >> >> need an Analyzer if my search is on an Untokenized field, wouldn't the
> >> >> search be based on the full String rather than its tokens?
> >> >>
> >> >> Thanks,
> >> >>
> >> >>
> >> >> Andre
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 04:47:51 2008
Return-Path: <java-user-return-35476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34719 invoked from network); 13 Aug 2008 04:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 04:47:50 -0000
Received: (qmail 67544 invoked by uid 500); 13 Aug 2008 04:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67007 invoked by uid 500); 13 Aug 2008 04:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66996 invoked by uid 99); 13 Aug 2008 04:47:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Aug 2008 21:47:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 04:46:44 +0000
Received: by yx-out-2324.google.com with SMTP id 3so960543yxj.5
        for <java-user@lucene.apache.org>; Tue, 12 Aug 2008 21:46:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=n7D92uXCkkRAZFMaV44hSC0L42HJGHtzuVTedQVRTIU=;
        b=M/oFAfEzXWQ5bImG5bhTsmNsJvmbEDa2Wmnf7oGvAeAGIqe5sjanLXhSM7kGRlJ6ue
         Ws9UEVzhca9RKhhqIHpDNas6imeLGtndyb0cCTLQynJWy8ZZdqHzgLyxE4HpKgNb9igc
         fsZaj5CT/F9XAeFcEweOxS5EXrhBGIwBABV04=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=D6vj32hhXZjrwclDt/qBWIXdwrtiYHffSmpTf93ng+N/lDvoJcGwzSAr7dqQUigj6I
         oFMGPysyELzMWOhcJyYDXOcmZINRF+TrrBXfe3x4qZSSP4HErPuEUQAqDOdIC4x8qhFl
         esIOtrnQGALZMFxPLehKcGWaJUw7jahkvbV7c=
Received: by 10.151.45.6 with SMTP id x6mr11473857ybj.147.1218602814692;
        Tue, 12 Aug 2008 21:46:54 -0700 (PDT)
Received: by 10.150.225.5 with HTTP; Tue, 12 Aug 2008 21:46:54 -0700 (PDT)
Message-ID: <a823853a0808122146q740b29dbgc3811be0b127d130@mail.gmail.com>
Date: Wed, 13 Aug 2008 13:46:54 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for special condition.
In-Reply-To: <731882.70944.qm@web50309.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93199_28612001.1218602814645"
References: <731882.70944.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93199_28612001.1218602814645
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

aGkuIHRoYW5rIHlvdSBmb3IgeW91ciByZXNwb25zZS4KCkkgd2FzIGZvdW5kIHRoZSB3YXkgd2l0
aCB5b3VyIGhlbHAuCgpUaGVyZSBhcmUgY2xhc3MgdGhhdCBuYW1lIGlzIENvbnN0YW50U2NvcmVS
YW5nZVF1ZXJ5IGFuZCBOdW1iZXJUb29scy4KClJlZmVyZW5jZSBzaXRlIGlzIGhlcmUuCmh0dHA6
Ly9tYXJrbWFpbC5vcmcvbWVzc2FnZS9kY2lybWlmb2F0NnVxZjd5I3F1ZXJ5Om9yZy5hcGFjaGUu
bHVjZW5lLmRvY3VtZW50Lk51bWJlclRvb2xzK3BhZ2U6MSttaWQ6dGxkM3Vla2F5bG11MmN3dCtz
dGF0ZTpyZXN1bHRzCgoKVGhhbmtzIHZlcnkgbXVjaC4gOikKCgoKMjAwOC84LzEzLCBPdGlzIEdv
c3BvZG5ldGljIDxvdGlzX2dvc3BvZG5ldGljQHlhaG9vLmNvbT46Cj4KPiBIaSwKPgo+IEx1Y2Vu
ZSBkb2Vzbid0IGhhdmUgdGhlIGdyZWF0ZXIgdGhhbiBvcGVyYXRvci4gIFBlcmhhcHMgeW91IGNh
biB1c2UgcmFuZ2UKPiBxdWVyaWVzIHRvIGFjY29tcGxpc2ggdGhlIHNhbWUgdGhpbmcuCj4KPgo+
IGh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9qYXZhLzJfM18yL3F1ZXJ5cGFyc2Vyc3ludGF4Lmh0
bWwjUmFuZ2UlMjBTZWFyY2hlcwo+Cj4gT3Rpcwo+IC0tCj4gU2VtYXRleHQgLS0gaHR0cDovL3Nl
bWF0ZXh0LmNvbS8gLS0gTHVjZW5lIC0gU29sciAtIE51dGNoCj4KPgo+Cj4gLS0tLS0gT3JpZ2lu
YWwgTWVzc2FnZSAtLS0tCj4gPiBGcm9tOiDA5b/rvK4gPG5lZWQ0c3BkQGdtYWlsLmNvbT4KPiA+
IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiA+IFNlbnQ6IFR1ZXNkYXksIEF1Z3Vz
dCAxMiwgMjAwOCA2OjAxOjAwIEFNCj4gPiBTdWJqZWN0OiBzZWFyY2ggZm9yIHNwZWNpYWwgY29u
ZGl0aW9uLgo+ID4KPiA+IGhpLgo+ID4KPiA+IEkgYW0gc2VhcmNoaW5nIGZvciBsdWNlbmUgYXBp
IG9yIGZ1bmN0aW9uIGxpa2UgcXVlcnkgIkZJRUxEID4gMTAwMCIKPiA+Cj4gPiBGb3IgZXhhbXBs
ZSwgYSB1c2VyIHdhbnRzIHRvIHNlYXJjaCBhIHByb2R1Y3Qgd2hpY2ggcHJpY2UgaXMgYmlnZ2Vy
IHRoZW4KPiA+IHVzZXIncyBpbnB1dC4KPiA+IElmIHVzZXIncyBpbnB1dCBpcyAxMDAwMCB0aGVu
IHJlc3VsdCBhcmUgdGhlIHByb2R1Y3RzIGluIGluZGV4IGp1c3QgbGlrZQo+ID4gIlBSSUNFID4g
MTAwMDAiCj4gPgo+ID4gSXMgdGhlcmUgYW55IHdheSB0byBzZWFyY2ggbGlrZSB0aGF0Pwo+ID4K
PiA+IHRoYW5rcy4KPiA+IEphbmcuCj4gPiAtLQo+ID4gREVWv+u9xAo+ID4gaHR0cDovL2Rldnlv
bmdzaWsudGlzdG9yeS5jb20KPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0
aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcK
Pgo+CgoKLS0gCkRFVr/rvcQKaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5jb20K
------=_Part_93199_28612001.1218602814645--

From java-user-return-35477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 08:04:40 2008
Return-Path: <java-user-return-35477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38160 invoked from network); 13 Aug 2008 08:04:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 08:04:39 -0000
Received: (qmail 36799 invoked by uid 500); 13 Aug 2008 08:04:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36758 invoked by uid 500); 13 Aug 2008 08:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36747 invoked by uid 99); 13 Aug 2008 08:04:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 01:04:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [143.239.153.183] (HELO neptune.ucc.ie) (143.239.153.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 08:03:35 +0000
Received: from www.cs.ucc.ie (csweb.ucc.ie [143.239.211.229])
	by neptune.ucc.ie (Postfix) with ESMTP id 30C602E8084
	for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 09:02:41 +0100 (IST)
Received: from 83.70.211.144
        (SquirrelMail authenticated user ao1)
        by www.cs.ucc.ie with HTTP;
        Wed, 13 Aug 2008 09:03:32 +0100 (IST)
Message-ID: <55904.83.70.211.144.1218614612.squirrel@www.cs.ucc.ie>
Date: Wed, 13 Aug 2008 09:03:32 +0100 (IST)
Subject: Indexing sections of TEI XML files
From: ao1@student.cs.ucc.ie
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.9a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Dear users,

Question on approaches to indexing TEI XML or similar section/subsectioned
files.

I'm indexing TEI P4 XML files using Lucene 2.x.

Currently, each TEI XML file corresponds to a Lucene document.
I extract the data from each XML file using XPath expressions e.g. for the
body text: "/TEI.2/text//p". I also extract and store various meta data
e.g. author, title, publishing data etc. per document.

The issue is that TEI documents can be very large and contain several
chapters. Ideally, search terms would return references to chapter(s)
in which the terms were found. The user would then follow a hyperlink to a
particular subsection rather than retrieving the entire file.

I think it is possible to transform TEI files into chapterised sections
using XSLT although I have not managed this yet. The final system
is likely to use Apache Cocoon to present documents in various formats but
that is a separate issue.

I'm tending towards a solution involving indexing each section as a
document (possibly with only the front-matter being associated with the
meta data e.g. title) and then maybe using XPointer to associate the
source document.

Any comments/approaches taken to similar issues appreciated.

Thanks,

Aodh  Lionird.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 08:42:55 2008
Return-Path: <java-user-return-35478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55502 invoked from network); 13 Aug 2008 08:42:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 08:42:55 -0000
Received: (qmail 82635 invoked by uid 500); 13 Aug 2008 08:42:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81922 invoked by uid 500); 13 Aug 2008 08:42:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81911 invoked by uid 99); 13 Aug 2008 08:42:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 01:42:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 08:41:48 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C553C30EFC18; Wed, 13 Aug 2008 02:42:10 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-191-154.dyn.embarqhsd.net [69.68.191.154])
	by ehatchersolutions.com (Postfix) with ESMTP id 8EFA230EFC17
	for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 02:42:05 -0600 (MDT)
Message-Id: <1BC97259-7B72-4389-8F5A-8813EA4EF5E9@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <55904.83.70.211.144.1218614612.squirrel@www.cs.ucc.ie>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: Indexing sections of TEI XML files
X-Priority: 3 (Normal)
Date: Wed, 13 Aug 2008 04:42:02 -0400
References: <55904.83.70.211.144.1218614612.squirrel@www.cs.ucc.ie>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

Have you looked at XTF?   <http://www.cdlib.org/inside/projects/xtf/>

It does what you're after and much,much more.

	Erik


On Aug 13, 2008, at 4:03 AM, ao1@student.cs.ucc.ie wrote:

> Dear users,
>
> Question on approaches to indexing TEI XML or similar section/=20
> subsectioned
> files.
>
> I'm indexing TEI P4 XML files using Lucene 2.x.
>
> Currently, each TEI XML file corresponds to a Lucene document.
> I extract the data from each XML file using XPath expressions e.g. =20
> for the
> body text: "/TEI.2/text//p". I also extract and store various meta =20
> data
> e.g. author, title, publishing data etc. per document.
>
> The issue is that TEI documents can be very large and contain several
> chapters. Ideally, search terms would return references to chapter(s)
> in which the terms were found. The user would then follow a =20
> hyperlink to a
> particular subsection rather than retrieving the entire file.
>
> I think it is possible to transform TEI files into chapterised =20
> sections
> using XSLT although I have not managed this yet. The final system
> is likely to use Apache Cocoon to present documents in various =20
> formats but
> that is a separate issue.
>
> I'm tending towards a solution involving indexing each section as a
> document (possibly with only the front-matter being associated with =20=

> the
> meta data e.g. title) and then maybe using XPointer to associate the
> source document.
>
> Any comments/approaches taken to similar issues appreciated.
>
> Thanks,
>
> Aodh =D3 Lion=E1ird.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 08:57:24 2008
Return-Path: <java-user-return-35479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66123 invoked from network); 13 Aug 2008 08:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 08:57:24 -0000
Received: (qmail 3387 invoked by uid 500); 13 Aug 2008 08:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3365 invoked by uid 500); 13 Aug 2008 08:57:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3354 invoked by uid 99); 13 Aug 2008 08:57:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 01:57:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [143.239.153.183] (HELO neptune.ucc.ie) (143.239.153.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 08:56:17 +0000
Received: from www.cs.ucc.ie (csweb.ucc.ie [143.239.211.229])
	by neptune.ucc.ie (Postfix) with ESMTP id 9E8F72E8059
	for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 09:55:22 +0100 (IST)
Received: from 83.70.211.144
        (SquirrelMail authenticated user ao1)
        by www.cs.ucc.ie with HTTP;
        Wed, 13 Aug 2008 09:56:14 +0100 (IST)
Message-ID: <55958.83.70.211.144.1218617774.squirrel@www.cs.ucc.ie>
In-Reply-To: <1BC97259-7B72-4389-8F5A-8813EA4EF5E9@ehatchersolutions.com>
References: <55904.83.70.211.144.1218614612.squirrel@www.cs.ucc.ie>
    <1BC97259-7B72-4389-8F5A-8813EA4EF5E9@ehatchersolutions.com>
Date: Wed, 13 Aug 2008 09:56:14 +0100 (IST)
Subject: Re: Indexing sections of TEI XML files
From: ao1@student.cs.ucc.ie
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.9a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, Erik, but I'm developing this system from scratch as it has
specific use cases including dealing with multiple languages including
multiple forms of a specific minority language (Irish).

I'm going to look at XTF anyway just to see how they managed it!

Thanks,

A.

> Have you looked at XTF?   <http://www.cdlib.org/inside/projects/xtf/>
>
> It does what you're after and much,much more.
>
> 	Erik
>
>
> On Aug 13, 2008, at 4:03 AM, ao1@student.cs.ucc.ie wrote:
>
>> Dear users,
>>
>> Question on approaches to indexing TEI XML or similar section/
>> subsectioned
>> files.
>>
>> I'm indexing TEI P4 XML files using Lucene 2.x.
>>
>> Currently, each TEI XML file corresponds to a Lucene document.
>> I extract the data from each XML file using XPath expressions e.g.
>> for the
>> body text: "/TEI.2/text//p". I also extract and store various meta
>> data
>> e.g. author, title, publishing data etc. per document.
>>
>> The issue is that TEI documents can be very large and contain several
>> chapters. Ideally, search terms would return references to chapter(s)
>> in which the terms were found. The user would then follow a
>> hyperlink to a
>> particular subsection rather than retrieving the entire file.
>>
>> I think it is possible to transform TEI files into chapterised
>> sections
>> using XSLT although I have not managed this yet. The final system
>> is likely to use Apache Cocoon to present documents in various
>> formats but
>> that is a separate issue.
>>
>> I'm tending towards a solution involving indexing each section as a
>> document (possibly with only the front-matter being associated with
>> the
>> meta data e.g. title) and then maybe using XPointer to associate the
>> source document.
>>
>> Any comments/approaches taken to similar issues appreciated.
>>
>> Thanks,
>>
>> Aodh  Lionird.
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 09:03:34 2008
Return-Path: <java-user-return-35480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69325 invoked from network); 13 Aug 2008 09:03:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 09:03:33 -0000
Received: (qmail 8541 invoked by uid 500); 13 Aug 2008 09:03:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8497 invoked by uid 500); 13 Aug 2008 09:03:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8486 invoked by uid 99); 13 Aug 2008 09:03:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 02:03:25 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 09:02:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KTCFs-0003t4-DH
	for java-user@lucene.apache.org; Wed, 13 Aug 2008 02:02:56 -0700
Message-ID: <18959421.post@talk.nabble.com>
Date: Wed, 13 Aug 2008 02:02:56 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Listing fields in an index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

How do I list all the fields in an index? Some documents do not contain all
fields.

Thanks,

John
-- 
View this message in context: http://www.nabble.com/Listing-fields-in-an-index-tp18959421p18959421.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 09:05:52 2008
Return-Path: <java-user-return-35481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69717 invoked from network); 13 Aug 2008 09:05:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 09:05:52 -0000
Received: (qmail 10996 invoked by uid 500); 13 Aug 2008 09:05:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10966 invoked by uid 500); 13 Aug 2008 09:05:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10955 invoked by uid 99); 13 Aug 2008 09:05:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 02:05:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 09:04:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KTCI7-0003ws-K3
	for java-user@lucene.apache.org; Wed, 13 Aug 2008 02:05:15 -0700
Message-ID: <18959436.post@talk.nabble.com>
Date: Wed, 13 Aug 2008 02:05:15 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Listing fields in an index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

How do I list all the fields in an index? Some documents do not contain all
fields.

Thanks,

John
-- 
View this message in context: http://www.nabble.com/Listing-fields-in-an-index-tp18959436p18959436.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 09:56:26 2008
Return-Path: <java-user-return-35482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96909 invoked from network); 13 Aug 2008 09:56:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 09:56:26 -0000
Received: (qmail 66335 invoked by uid 500); 13 Aug 2008 09:56:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66157 invoked by uid 500); 13 Aug 2008 09:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66146 invoked by uid 99); 13 Aug 2008 09:56:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 02:56:18 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 09:55:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KTD52-0005iw-Vj
	for java-user@lucene.apache.org; Wed, 13 Aug 2008 02:55:48 -0700
Message-ID: <18960121.post@talk.nabble.com>
Date: Wed, 13 Aug 2008 02:55:48 -0700 (PDT)
From: "m.harig" <m.harig@gmail.com>
To: java-user@lucene.apache.org
Subject: Number range search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: m.harig@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi all.

  am indexing a price field by 

doc.add(new Field("price", "1450", Field.Store.YES,
					Field.Index.TOKENIZED));
doc.add(new Field("price", "3800", Field.Store.YES,
					Field.Index.TOKENIZED));
doc.add(new Field("price", "2500", Field.Store.YES,
					Field.Index.TOKENIZED));
doc.add(new Field("price", "7020", Field.Store.YES,
					Field.Index.TOKENIZED));
doc.add(new Field("price", "3500", Field.Store.YES,
					Field.Index.TOKENIZED));


its done properly. 

when i go for search am using 

                IndexSearcher searcher = new IndexSearcher(indexDir);

		Analyzer analyzer = new StandardAnalyzer();

		QueryParser parser = new QueryParser("contents", analyzer);
		Query query = parser.parse(qryStr);

		Hits hits = searcher.search(query);

and my query is to search is price:[1000 TO 4000]. when i search this, it
returns nothing or when i change the query to price:[2000 TO 4000] it return
all hits. where am wrong.. am not getting any correct output. could any1
help me out of this. please....
-- 
View this message in context: http://www.nabble.com/Number-range-search-tp18960121p18960121.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 10:56:49 2008
Return-Path: <java-user-return-35483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22686 invoked from network); 13 Aug 2008 10:56:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 10:56:49 -0000
Received: (qmail 20961 invoked by uid 500); 13 Aug 2008 10:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20320 invoked by uid 500); 13 Aug 2008 10:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20309 invoked by uid 99); 13 Aug 2008 10:56:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 03:56:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 10:55:45 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 86A4730EFC18; Wed, 13 Aug 2008 04:55:42 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-191-154.dyn.embarqhsd.net [69.68.191.154])
	by ehatchersolutions.com (Postfix) with ESMTP id 871B830EFC17
	for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 04:55:39 -0600 (MDT)
Message-Id: <EE2AFA1B-0B27-4229-8A92-A4F4922D41ED@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <18959421.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: Listing fields in an index
Date: Wed, 13 Aug 2008 06:55:38 -0400
References: <18959421.post@talk.nabble.com>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Aug 13, 2008, at 5:02 AM, John Patterson wrote:
> How do I list all the fields in an index? Some documents do not  
> contain all
> fields.

Have a look at IndexReader#getFieldNames().  That'll give you back  
field names regardless of which documents have them.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 11:43:11 2008
Return-Path: <java-user-return-35484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39256 invoked from network); 13 Aug 2008 11:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 11:43:11 -0000
Received: (qmail 70567 invoked by uid 500); 13 Aug 2008 11:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70534 invoked by uid 500); 13 Aug 2008 11:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70523 invoked by uid 99); 13 Aug 2008 11:43:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 04:43:03 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Aug 2008 11:42:07 +0000
Received: (qmail 45770 invoked from network); 13 Aug 2008 11:42:32 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 13 Aug 2008 11:42:32 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: possible to read index into memory?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.62.0808121946390.23455@radix.cryptio.net>
References: <1214509228.6790.128.camel@tetsiaga>
	 <359a92830806261247q4e59e5c4jef438be4a065c742@mail.gmail.com>
	 <1218588969.25941.65.camel@nuraku>
	 <Pine.LNX.4.62.0808121946390.23455@radix.cryptio.net>
Content-Type: text/plain
Date: Wed, 13 Aug 2008 07:42:39 -0400
Message-Id: <1218627759.31352.2.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hoss,
   Thank you for the detailed response. What I found weird was it
seemed to take 0.09 seconds to create a RAMDirectory off a 17MB index.
Suspiciously fast, but ok.

Yet, when I do a simple fuzzy search on a single field 

"word: someword~0.76"

It was taking .35 seconds. That's a very very long time all things
considered. I understand about the OS paging and such but in
doing some variations of this to "throw the OS off", I still saw
no difference between on-disk and RAM times. But despite that, the
times are really slow. 

Any ideas?

thanks again,
Darren

On Tue, 2008-08-12 at 19:55 -0700, Chris Hostetter wrote:
> : On one index, I am seeing no speed change when flipping between
> : RAMDirectory IndexSearcher and file system version.
> 
> that is probably because even if you just use an FSDirectory, your OS will 
> cache the disk "pages" in RAM for you -- all using a RAMDirectory does for 
> you is garuntee that the entire index is copied into the heap you allocate 
> for your JVM.  If you've got 16GB or RAM, and a 5GB index, and you 
> allocated 12GB of RAM to the JVM and read your index into a RAMDirectory, 
> your index will always be in RAM, no matter what other processes do on 
> your machine.
> 
> If instead you only allocate 6GB of RAM to the JVM, and nothing else is 
> using up the rest of your RAM, the OS has plenty to load the whole index 
> into RAM as part of the filesystem cache once you use it -- but if another 
> process comes along and really needs that RAM (or if something reads a lot 
> of other pages of disk) your index might get bumped from the filesystem 
> cache, and the next few reads could be slow.
> 
> : Creating the RAMDirectory from the on-disk index only takes 0.09
> : seconds. It appears it is not loading the data into memory, but maybe
> : just the file names of the index?
> 
> passing an FSDIrectory to the constructor of a RAMDIrectory uses the 
> Directory.copy() method whose source is fairly straight forward and easy 
> to read -- unless your index is ginormous it's not suprising that it's 
> "fast" particularly if it's already in the filesystem cache.
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 12:00:01 2008
Return-Path: <java-user-return-35485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47980 invoked from network); 13 Aug 2008 12:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 12:00:01 -0000
Received: (qmail 84664 invoked by uid 500); 13 Aug 2008 11:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84639 invoked by uid 500); 13 Aug 2008 11:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84628 invoked by uid 99); 13 Aug 2008 11:59:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 04:59:52 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 11:58:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KTF0d-0001bC-8x
	for java-user@lucene.apache.org; Wed, 13 Aug 2008 04:59:23 -0700
Message-ID: <18961700.post@talk.nabble.com>
Date: Wed, 13 Aug 2008 04:59:23 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Listing fields in an index
In-Reply-To: <EE2AFA1B-0B27-4229-8A92-A4F4922D41ED@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18959421.post@talk.nabble.com> <EE2AFA1B-0B27-4229-8A92-A4F4922D41ED@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks!  I was looking in IndexReader for a good couple of minutes and didn't
see that!


Erik Hatcher wrote:
> 
> 
> On Aug 13, 2008, at 5:02 AM, John Patterson wrote:
>> How do I list all the fields in an index? Some documents do not  
>> contain all
>> fields.
> 
> Have a look at IndexReader#getFieldNames().  That'll give you back  
> field names regardless of which documents have them.
> 
> 	Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Listing-fields-in-an-index-tp18959421p18961700.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 12:50:40 2008
Return-Path: <java-user-return-35486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78330 invoked from network); 13 Aug 2008 12:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 12:50:40 -0000
Received: (qmail 63602 invoked by uid 500); 13 Aug 2008 12:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63176 invoked by uid 500); 13 Aug 2008 12:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63165 invoked by uid 99); 13 Aug 2008 12:50:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 05:50:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 12:49:36 +0000
Received: by fg-out-1718.google.com with SMTP id l27so13643fgb.27
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 05:50:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=whs3bmDsaGmHvL8TDEhbziKtdqnYHj/jUSzcObaGFhU=;
        b=mXmxwO5Z+IM01DcKArLq5CGd265wVvw6QTaUSPJhTXjmNBOQQ/Y23vXMd4OydbsYi0
         UsWIJPUOLJMDaEj8NwXz+IrVjhL/lVZYijad90TSUanPeLrF/jSIUQQGx7Y9O+L9vHSV
         vtl1/lDhk0EYHMoyvNBGq660ss0oKH+tBezY4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=d0qcFnpG7TLJS/G7iOYdBz7lNetQBS7WVX+Z+ij+ADfQFyHDkyQsQIm40IVXsUb5Vr
         L3uzGS+f3bqK3ZsdaXr6j6iPWTahzr4XpoSM5hGMGK+/b8HJJU0SeNv8svvMdUWMeYa0
         0/BTPE7/ZbNXuY3NbnRKeQbLgkvnkyyZM/+nc=
Received: by 10.86.82.6 with SMTP id f6mr12353794fgb.73.1218631803336;
        Wed, 13 Aug 2008 05:50:03 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Wed, 13 Aug 2008 05:50:03 -0700 (PDT)
Message-ID: <e05f0fd10808130550l421c4ca8rfe99b8e234fb22a8@mail.gmail.com>
Date: Wed, 13 Aug 2008 15:50:03 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Number range search
In-Reply-To: <18960121.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28207_11399339.1218631803333"
References: <18960121.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28207_11399339.1218631803333
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The code seems correct (although it doesn't show
which analyzer was used at indexing).

Note that when adding numbers like this there's no real point in analyzing
them,
so I would add that field as UN_TOKENIZED. This would be more efficient,
and would also comply with the query parser who does not apply
the analyzer on range query terms. Anyhow this does not explain the problem
you see, because standard analyzer would not modify the numbers anyhow.

Which Lucene version version you are using?

Can you provide a small self-containing program demonstrating the unexpected
behavior?

(often just writing this small program shows leads to solve a problem like
this).

Doron

On Wed, Aug 13, 2008 at 12:55 PM, m.harig <m.harig@gmail.com> wrote:

>
> hi all.
>
>  am indexing a price field by
>
> doc.add(new Field("price", "1450", Field.Store.YES,
>                                        Field.Index.TOKENIZED));
> doc.add(new Field("price", "3800", Field.Store.YES,
>                                        Field.Index.TOKENIZED));
> doc.add(new Field("price", "2500", Field.Store.YES,
>                                        Field.Index.TOKENIZED));
> doc.add(new Field("price", "7020", Field.Store.YES,
>                                        Field.Index.TOKENIZED));
> doc.add(new Field("price", "3500", Field.Store.YES,
>                                        Field.Index.TOKENIZED));
>
>
> its done properly.
>
> when i go for search am using
>
>                IndexSearcher searcher = new IndexSearcher(indexDir);
>
>                Analyzer analyzer = new StandardAnalyzer();
>
>                QueryParser parser = new QueryParser("contents", analyzer);
>                Query query = parser.parse(qryStr);
>
>                Hits hits = searcher.search(query);
>
> and my query is to search is price:[1000 TO 4000]. when i search this, it
> returns nothing or when i change the query to price:[2000 TO 4000] it
> return
> all hits. where am wrong.. am not getting any correct output. could any1
> help me out of this. please....
>

------=_Part_28207_11399339.1218631803333--

From java-user-return-35487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 14:25:07 2008
Return-Path: <java-user-return-35487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36258 invoked from network); 13 Aug 2008 14:25:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 14:25:07 -0000
Received: (qmail 39870 invoked by uid 500); 13 Aug 2008 14:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39838 invoked by uid 500); 13 Aug 2008 14:24:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39827 invoked by uid 99); 13 Aug 2008 14:24:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 07:24:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 14:24:03 +0000
Received: by rv-out-0506.google.com with SMTP id f6so11727rvb.5
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 07:24:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=CVNgBM0FqGiJQqR1pStPAnAhI3zRzzMe+A1D+e+JJ6U=;
        b=drdLm/XDFrgdoMAKZXkgbbMZ/E0NBeGDcJFYtwIdudAj2BhjO309YPHL3M541QHZ+0
         Q0h83LKSPMhxbwqenwdXVa0m1wWRidWmzQVtLH66UJfOsH0wPNygG4rZibB9SDvdwWYx
         xfft6SFHuaEadtQ01lxUosl7KSIdACKZBBOYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RIt6mSLEbegR97mV8zhi9Em6TLjztewK5WwLpjuWetynh44+8XC3y5cv05snKoXSKD
         BjSC5xn2wPsAsTu6EJKZSTHkY4stZc1Q6jA3p2zNTbzjGBj2Vzep68JFT0sDL9KCUkYa
         zFESpr9q1HTCs7MBNC7MWY//AlFphGYHwKI7s=
Received: by 10.140.201.1 with SMTP id y1mr5229585rvf.246.1218637471257;
        Wed, 13 Aug 2008 07:24:31 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Wed, 13 Aug 2008 07:24:31 -0700 (PDT)
Message-ID: <359a92830808130724y5402ac17j3bdbaf6c113800db@mail.gmail.com>
Date: Wed, 13 Aug 2008 10:24:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: possible to read index into memory?
In-Reply-To: <1218627759.31352.2.camel@nuraku>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43454_26213914.1218637471236"
References: <1214509228.6790.128.camel@tetsiaga>
	 <359a92830806261247q4e59e5c4jef438be4a065c742@mail.gmail.com>
	 <1218588969.25941.65.camel@nuraku>
	 <Pine.LNX.4.62.0808121946390.23455@radix.cryptio.net>
	 <1218627759.31352.2.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43454_26213914.1218637471236
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you measuring? There is a bunch of setup work for the first
few queries that go through the system. In either case (RAM or FS),
you should fire a few representative warmup queries at the search
engine before you go ahead and measure the response time.

You also *must* isolate your search time from your response
assembly time. That is, if you have something like
Hits hits = search()
for (each element of hits) {
   do something with the hit
}

you MUST measure the time for the search() call exclusive of the
for loop before you know where to concentrate your efforts.

In this example, if you get more than 100 hits, your query is
actually re-executed every 100 times through the above loop.

There are other gotchas if you process your query results other ways,
so be sure you know exactly what is taking the time before worrying
about the proper way to speed things up.

I strongly suspect that the RAMDir is a complete red herring. a 17M index
will almost certainly be cached by the system after a bit of use.

There's a whole section up on the Lucene website that talks about various
ways to speed up processing....

Measure, *then* optimize <G>......

Best
Erick

On Wed, Aug 13, 2008 at 7:42 AM, Darren Govoni <darren@ontrenet.com> wrote:

> Hoss,
>   Thank you for the detailed response. What I found weird was it
> seemed to take 0.09 seconds to create a RAMDirectory off a 17MB index.
> Suspiciously fast, but ok.
>
> Yet, when I do a simple fuzzy search on a single field
>
> "word: someword~0.76"
>
> It was taking .35 seconds. That's a very very long time all things
> considered. I understand about the OS paging and such but in
> doing some variations of this to "throw the OS off", I still saw
> no difference between on-disk and RAM times. But despite that, the
> times are really slow.
>
> Any ideas?
>
> thanks again,
> Darren
>
> On Tue, 2008-08-12 at 19:55 -0700, Chris Hostetter wrote:
> > : On one index, I am seeing no speed change when flipping between
> > : RAMDirectory IndexSearcher and file system version.
> >
> > that is probably because even if you just use an FSDirectory, your OS
> will
> > cache the disk "pages" in RAM for you -- all using a RAMDirectory does
> for
> > you is garuntee that the entire index is copied into the heap you
> allocate
> > for your JVM.  If you've got 16GB or RAM, and a 5GB index, and you
> > allocated 12GB of RAM to the JVM and read your index into a RAMDirectory,
> > your index will always be in RAM, no matter what other processes do on
> > your machine.
> >
> > If instead you only allocate 6GB of RAM to the JVM, and nothing else is
> > using up the rest of your RAM, the OS has plenty to load the whole index
> > into RAM as part of the filesystem cache once you use it -- but if
> another
> > process comes along and really needs that RAM (or if something reads a
> lot
> > of other pages of disk) your index might get bumped from the filesystem
> > cache, and the next few reads could be slow.
> >
> > : Creating the RAMDirectory from the on-disk index only takes 0.09
> > : seconds. It appears it is not loading the data into memory, but maybe
> > : just the file names of the index?
> >
> > passing an FSDIrectory to the constructor of a RAMDIrectory uses the
> > Directory.copy() method whose source is fairly straight forward and easy
> > to read -- unless your index is ginormous it's not suprising that it's
> > "fast" particularly if it's already in the filesystem cache.
> >
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43454_26213914.1218637471236--

From java-user-return-35488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 14:47:37 2008
Return-Path: <java-user-return-35488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48775 invoked from network); 13 Aug 2008 14:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 14:47:36 -0000
Received: (qmail 71371 invoked by uid 500); 13 Aug 2008 14:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71349 invoked by uid 500); 13 Aug 2008 14:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71338 invoked by uid 99); 13 Aug 2008 14:47:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 07:47:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 14:46:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KTHco-0008FM-4v
	for java-user@lucene.apache.org; Wed, 13 Aug 2008 07:46:58 -0700
Message-ID: <18964569.post@talk.nabble.com>
Date: Wed, 13 Aug 2008 07:46:58 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Indexing sections of TEI XML files
In-Reply-To: <55958.83.70.211.144.1218617774.squirrel@www.cs.ucc.ie>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <55904.83.70.211.144.1218614612.squirrel@www.cs.ucc.ie> <1BC97259-7B72-4389-8F5A-8813EA4EF5E9@ehatchersolutions.com> <55958.83.70.211.144.1218617774.squirrel@www.cs.ucc.ie>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi A.

starting point of xtf was the TEI format. I am very curious, if you find a
missing point for your needs.
(I already used it with cocoon.)

I never saw a better implementation of searching xml-aware: Each hit knows
his exact position inside the indexed(=source) xml-file :-)

I you dive into xtf, feel free to ask your questions:
http://groups.google.de/group/xtf-user

Best regards
  Karsten


ao1 wrote:
> 
> Thanks, Erik, but I'm developing this system from scratch as it has
> specific use cases including dealing with multiple languages including
> multiple forms of a specific minority language (Irish).
> 
> I'm going to look at XTF anyway just to see how they managed it!
> 
> Thanks,
> 
> A.
> 
>> Have you looked at XTF?   <http://www.cdlib.org/inside/projects/xtf/>
>>
>> It does what you're after and much,much more.
>>
>> 	Erik
> 
-- 
View this message in context: http://www.nabble.com/Indexing-sections-of-TEI-XML-files-tp18958644p18964569.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 16:11:16 2008
Return-Path: <java-user-return-35489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13143 invoked from network); 13 Aug 2008 16:11:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 16:11:16 -0000
Received: (qmail 32498 invoked by uid 500); 13 Aug 2008 16:11:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32472 invoked by uid 500); 13 Aug 2008 16:11:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32461 invoked by uid 99); 13 Aug 2008 16:11:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 09:11:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 16:10:11 +0000
Received: by ug-out-1314.google.com with SMTP id h3so160516ugf.29
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 09:10:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:thread-index:x-mimeole
         :message-id;
        bh=6/eePJEK4fYJMN4RGHucsrUhCbM60LfWr3/F7JZVFeI=;
        b=EM3K87/4nZbE2wEcyTX40IKcxVNfpTtPFuAf3atx3owCNfUFKGEFNAx+83o3kIvm55
         n95hEEBJP6MIg4KoMVHSI3UO0DmNq8QcpvqBPIPJPRPqkM4zXqR7bZUAe7vmNvQaq8Mm
         sFfDzHy7gZp1vKbaXa2lD4+vMFKNrD1LXgE4U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer
         :thread-index:x-mimeole:message-id;
        b=cGeCvwtaRnGkkuODUTM5tcUNVJUBWMOO6AsQWYhrGfKzjcgr86fz6vyOPdUoHHhNZ5
         pbT6fSTD7HNlrm4Aqy/SfLse2DgEGFNBspk+y0e/94Iff/OsSllrnm9W/1DHMMz9VTCQ
         4h4W6jz+i+k5kqZEAKay57ZeuCvjkRy5apGpE=
Received: by 10.66.216.7 with SMTP id o7mr25013ugg.66.1218643819499;
        Wed, 13 Aug 2008 09:10:19 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id t38sm816565ugc.83.2008.08.13.09.10.17
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 13 Aug 2008 09:10:18 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Case Sensitivity
Date: Wed, 13 Aug 2008 17:09:44 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000B_01C8FD67.631F8CD0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acj9Xv/b9enXG1DkQ6GmE5JEVRBcsw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000B_01C8FD67.631F8CD0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,
 
Once I index a bunch of documents with a StandardAnalyzer (and if the effort
I need to put in to reindex the documents is not worth the effort), is there
a way to search on the index without case sensitivity.
I do not use any sophisticated Analyzer that makes use of
LowerCaseTokenizer.
 
Please let me know if there is a solution to circumvent this case
sensitivity problem.
 
Many thanks
Dino
 

------=_NextPart_000_000B_01C8FD67.631F8CD0--


From java-user-return-35490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 16:16:50 2008
Return-Path: <java-user-return-35490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15402 invoked from network); 13 Aug 2008 16:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 16:16:50 -0000
Received: (qmail 44432 invoked by uid 500); 13 Aug 2008 16:16:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44403 invoked by uid 500); 13 Aug 2008 16:16:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44392 invoked by uid 99); 13 Aug 2008 16:16:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 09:16:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 16:15:45 +0000
Received: by ug-out-1314.google.com with SMTP id h3so161885ugf.29
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 09:15:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:in-reply-to:thread-index
         :x-mimeole:message-id;
        bh=x22wpsBE1pCc9sLI1uS4N0cBRwtNNnpvC6F4p91OwCc=;
        b=rCWUS83YsjZ7c8BnHaJCKN/S5fl0DSrVUU793UCs2jtonrNdDgVjsTtbi7Tw6Fz08E
         8ksVqRl9Nc4h+ogqpNfJACsqHuFUqLgKvQuOY1JQgCL16cAptfSgdfW77FY4a2QbE6J1
         w5rH3Fy/tu/64zleevj0hKNEcSl4I21EIRRk4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer:in-reply-to
         :thread-index:x-mimeole:message-id;
        b=NtM1W/zmbsBIvoSBOGq+/GICh2lRAcpa7WWQadfibLZ5GnhwIlcw1M84L9tPqRXqYE
         297aWPprKtF9GbKr163XxH5tbUS+6kRDQ098m+csqmaPCfSk8IG0B1FsYSnP5cRCsYpr
         GcAdv8UIeD07tARRfQJWhzpKGP5PtK3fZsHNY=
Received: by 10.66.245.2 with SMTP id s2mr30390ugh.80.1218644151864;
        Wed, 13 Aug 2008 09:15:51 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id i40sm822656ugf.24.2008.08.13.09.15.49
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 13 Aug 2008 09:15:50 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Case Sensitivity
Date: Wed, 13 Aug 2008 17:15:16 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000F_01C8FD68.294C6E00"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: 
Thread-Index: Acj9Xv/b9enXG1DkQ6GmE5JEVRBcswAAINyg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <48a308b6.28b9420a.02f8.ffffa1c7@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000F_01C8FD68.294C6E00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Also would like to highlight the version of Lucene I am using; It is 2.0.0. 

  _____  

From: Dino Korah [mailto:dckorah@gmail.com] 
Sent: 13 August 2008 17:10
To: 'java-user@lucene.apache.org'
Subject: Case Sensitivity


Hi All,
 
Once I index a bunch of documents with a StandardAnalyzer (and if the effort
I need to put in to reindex the documents is not worth the effort), is there
a way to search on the index without case sensitivity.
I do not use any sophisticated Analyzer that makes use of
LowerCaseTokenizer.
 
Please let me know if there is a solution to circumvent this case
sensitivity problem.
 
Many thanks
Dino
 

------=_NextPart_000_000F_01C8FD68.294C6E00--


From java-user-return-35491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 16:31:04 2008
Return-Path: <java-user-return-35491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22155 invoked from network); 13 Aug 2008 16:31:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 16:31:04 -0000
Received: (qmail 78969 invoked by uid 500); 13 Aug 2008 16:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78944 invoked by uid 500); 13 Aug 2008 16:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78933 invoked by uid 99); 13 Aug 2008 16:30:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 09:30:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of williams.tricia@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 16:29:58 +0000
Received: by yw-out-2324.google.com with SMTP id 3so4004ywj.5
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 09:30:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=rw1h4u9P8WQxw095D96P1uWwKM1E2DQwK72DuOU1XUM=;
        b=hBG+HjPvUf0MtDqpoaVLVSIUm9NOme1Z2k2kt4JIWyQNGZzyU33ImqBMEKh8uOJs6/
         xmUaMducYkzCwYGDna98TJtyfrCOJAmhPSFrpN7nx1lfp8JfYA8IEaeETRxWYpviu7te
         dKGDhcxhKfn+CiuUVzhUzyjbHtbk5+UQ6ESfA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=itvpmWJh+qeAFxzduG94U/mfmn/JfEKbCyNB3jNacyUmLjBPJZNoNNZopulWQXNFWf
         F3PQbUi/Y02I/ybi0YdoCpmBywiIRD0MBywiWTZvz4NkfQeD4NBcanYNB+CJTrmzEYcB
         DJdafVz+GjbAzBCVT+aG5hgzJ/jw/ETIbQdxs=
Received: by 10.115.18.1 with SMTP id v1mr13440wai.15.1218645016193;
        Wed, 13 Aug 2008 09:30:16 -0700 (PDT)
Received: from ?192.168.1.115? ( [66.222.161.155])
        by mx.google.com with ESMTPS id 33sm508192yxr.3.2008.08.13.09.30.15
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 13 Aug 2008 09:30:15 -0700 (PDT)
Message-ID: <48A30C15.7000203@gmail.com>
Date: Wed, 13 Aug 2008 10:30:13 -0600
From: Tricia Williams <williams.tricia@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing sections of TEI XML files
References: <55904.83.70.211.144.1218614612.squirrel@www.cs.ucc.ie>
In-Reply-To: <55904.83.70.211.144.1218614612.squirrel@www.cs.ucc.ie>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

    Take a look at what I've done with SOLR-380 
(https://issues.apache.org/jira/browse/SOLR-380). The part you might 
find particularly useful is the Tokenizer.

Tricia

ao1@student.cs.ucc.ie wrote:
> Dear users,
>
> Question on approaches to indexing TEI XML or similar section/subsectioned
> files.
>
> I'm indexing TEI P4 XML files using Lucene 2.x.
>
> Currently, each TEI XML file corresponds to a Lucene document.
> I extract the data from each XML file using XPath expressions e.g. for the
> body text: "/TEI.2/text//p". I also extract and store various meta data
> e.g. author, title, publishing data etc. per document.
>
> The issue is that TEI documents can be very large and contain several
> chapters. Ideally, search terms would return references to chapter(s)
> in which the terms were found. The user would then follow a hyperlink to a
> particular subsection rather than retrieving the entire file.
>
> I think it is possible to transform TEI files into chapterised sections
> using XSLT although I have not managed this yet. The final system
> is likely to use Apache Cocoon to present documents in various formats but
> that is a separate issue.
>
> I'm tending towards a solution involving indexing each section as a
> document (possibly with only the front-matter being associated with the
> meta data e.g. title) and then maybe using XPointer to associate the
> source document.
>
> Any comments/approaches taken to similar issues appreciated.
>
> Thanks,
>
> Aodh  Lionird.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 16:31:35 2008
Return-Path: <java-user-return-35492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22435 invoked from network); 13 Aug 2008 16:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 16:31:35 -0000
Received: (qmail 80750 invoked by uid 500); 13 Aug 2008 16:31:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80602 invoked by uid 500); 13 Aug 2008 16:31:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80591 invoked by uid 99); 13 Aug 2008 16:31:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 09:31:27 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 16:30:31 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Case Sensitivity
Date: Wed, 13 Aug 2008 12:27:54 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A066@SUEXCL-02.ad.syr.edu>
In-Reply-To: <48a308b6.28b9420a.02f8.ffffa1c7@mx.google.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case Sensitivity
Thread-Index: Acj9Xv/b9enXG1DkQ6GmE5JEVRBcswAAINygAABNd+A=
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Dino,

StandardAnalyzer incorporates StandardTokenizer, StandardFilter, =
LowerCaseFilter, and StopFilter.  Any index you create using it will =
only provide case-insensitive matching.

Steve

On 08/13/2008 at 12:15 PM, Dino Korah wrote:
> Also would like to highlight the version of Lucene I am
> using; It is 2.0.0.
>=20
>   _____
>=20
> From: Dino Korah [mailto:dckorah@gmail.com]
> Sent: 13 August 2008 17:10
> To: 'java-user@lucene.apache.org'
> Subject: Case Sensitivity
>=20
>=20
> Hi All,
>=20
> Once I index a bunch of documents with a StandardAnalyzer (and if the
> effort I need to put in to reindex the documents is not worth the
> effort), is there a way to search on the index without case =
sensitivity.
> I do not use any sophisticated Analyzer that makes use of
> LowerCaseTokenizer.
>=20
> Please let me know if there is a solution to circumvent this case
> sensitivity problem.
>=20
> Many thanks
> Dino
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 16:48:25 2008
Return-Path: <java-user-return-35493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31365 invoked from network); 13 Aug 2008 16:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 16:48:25 -0000
Received: (qmail 1768 invoked by uid 500); 13 Aug 2008 16:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1740 invoked by uid 500); 13 Aug 2008 16:48:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1729 invoked by uid 99); 13 Aug 2008 16:48:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 09:48:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 16:47:22 +0000
Received: by fg-out-1718.google.com with SMTP id l27so73057fgb.27
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 09:47:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+PSO2I9YAfNVKSY+naRccNlIsLelVMUCy/QktaNwsZw=;
        b=P7AsvKf3+UIJaqop7OFli5cwb4hDR3v+TFw+8lO/WbDu+nbVh8Uu7tejxhoh1rdL71
         lAaGuSHfH43Zf4050b78dJftx0zNOkL/6AGh53KaCzcESdpYOXstoxY/XubfahixyYIK
         a0r9scBGsKIowLsHbCYIW6IWWn7Yxj/6kbiRo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dV9LC+gY9N2R2HP6bIzKwJxw2qe5WFiPkXiT26TW4jlzzLJ6iyNxt+Q9C2dYCe44kJ
         /tusCcWeIkvUXY0IZz74miqbG7OKCTTkFXEwdYjJW7rtuyNBR+nwukJPMADdSgFqQn3Z
         R3Y10V0WGqhk/eb/9k7tHzWmrZb52YwsDWcck=
Received: by 10.86.80.5 with SMTP id d5mr42719fgb.19.1218646052643;
        Wed, 13 Aug 2008 09:47:32 -0700 (PDT)
Received: by 10.86.98.8 with HTTP; Wed, 13 Aug 2008 09:47:32 -0700 (PDT)
Message-ID: <359a92830808130947s4230241flfe74dc8f2e3fa805@mail.gmail.com>
Date: Wed, 13 Aug 2008 12:47:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <9294E20AED46934EA459020706463F94C5A066@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_94343_31073658.1218646052642"
References: <48a308b6.28b9420a.02f8.ffffa1c7@mx.google.com>
	 <9294E20AED46934EA459020706463F94C5A066@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_94343_31073658.1218646052642
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What analyzer are you using at *query* time? I suspect that's where your
problem lies if you indeed "don't use any sophisticated analyzers", since
you *are* using a sophisticated analyzer at index time. You almost
invariably want to use the same analyzer at query time and analyzer time.

Please start a separate thread with your second question. Google
"Thread Hijacking" for the explanation of why that's a good idea.

Best
Erick

On Wed, Aug 13, 2008 at 12:27 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Dino,
>
> StandardAnalyzer incorporates StandardTokenizer, StandardFilter,
> LowerCaseFilter, and StopFilter.  Any index you create using it will only
> provide case-insensitive matching.
>
> Steve
>
> On 08/13/2008 at 12:15 PM, Dino Korah wrote:
> > Also would like to highlight the version of Lucene I am
> > using; It is 2.0.0.
> >
> >   _____
> >
> > From: Dino Korah [mailto:dckorah@gmail.com]
> > Sent: 13 August 2008 17:10
> > To: 'java-user@lucene.apache.org'
> > Subject: Case Sensitivity
> >
> >
> > Hi All,
> >
> > Once I index a bunch of documents with a StandardAnalyzer (and if the
> > effort I need to put in to reindex the documents is not worth the
> > effort), is there a way to search on the index without case sensitivity.
> > I do not use any sophisticated Analyzer that makes use of
> > LowerCaseTokenizer.
> >
> > Please let me know if there is a solution to circumvent this case
> > sensitivity problem.
> >
> > Many thanks
> > Dino
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_94343_31073658.1218646052642--

From java-user-return-35494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 17:13:05 2008
Return-Path: <java-user-return-35494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43112 invoked from network); 13 Aug 2008 17:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 17:13:05 -0000
Received: (qmail 36438 invoked by uid 500); 13 Aug 2008 17:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36410 invoked by uid 500); 13 Aug 2008 17:12:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36399 invoked by uid 99); 13 Aug 2008 17:12:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 10:12:56 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Aug 2008 17:12:00 +0000
Received: (qmail 74718 invoked from network); 13 Aug 2008 17:12:26 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 13 Aug 2008 17:12:26 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: possible to read index into memory?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830808130724y5402ac17j3bdbaf6c113800db@mail.gmail.com>
References: <1214509228.6790.128.camel@tetsiaga>
	 <359a92830806261247q4e59e5c4jef438be4a065c742@mail.gmail.com>
	 <1218588969.25941.65.camel@nuraku>
	 <Pine.LNX.4.62.0808121946390.23455@radix.cryptio.net>
	 <1218627759.31352.2.camel@nuraku>
	 <359a92830808130724y5402ac17j3bdbaf6c113800db@mail.gmail.com>
Content-Type: text/plain
Date: Wed, 13 Aug 2008 13:12:25 -0400
Message-Id: <1218647545.6960.9.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,
    Thank you for the valuable tips. The time I'm measuring is
just around the lucene search calls with standard analyzer, such as:

    word = "helloo"
    starttime = ...
    query = QueryParser("word", analyzer).parse(word+"~0.76")
    hits = searcher.search(query)
    endtime = ...
    endtime-starttime = .33 seconds

Its a fuzzy match, which I presume should take longer, but for a single
word in the query against a tiny 17MB index, the above code takes

.33 seconds for the first couple dozen or so, then about .15-.20 after
that. Still way way too long for a simple query as this. Do those
figures sound right for Lucene doing this kind of single field match?

Darren

On Wed, 2008-08-13 at 10:24 -0400, Erick Erickson wrote:
> How are you measuring? There is a bunch of setup work for the first
> few queries that go through the system. In either case (RAM or FS),
> you should fire a few representative warmup queries at the search
> engine before you go ahead and measure the response time.
> 
> You also *must* isolate your search time from your response
> assembly time. That is, if you have something like
> Hits hits = search()
> for (each element of hits) {
>    do something with the hit
> }
> 
> you MUST measure the time for the search() call exclusive of the
> for loop before you know where to concentrate your efforts.
> 
> In this example, if you get more than 100 hits, your query is
> actually re-executed every 100 times through the above loop.
> 
> There are other gotchas if you process your query results other ways,
> so be sure you know exactly what is taking the time before worrying
> about the proper way to speed things up.
> 
> I strongly suspect that the RAMDir is a complete red herring. a 17M index
> will almost certainly be cached by the system after a bit of use.
> 
> There's a whole section up on the Lucene website that talks about various
> ways to speed up processing....
> 
> Measure, *then* optimize <G>......
> 
> Best
> Erick
> 
> On Wed, Aug 13, 2008 at 7:42 AM, Darren Govoni <darren@ontrenet.com> wrote:
> 
> > Hoss,
> >   Thank you for the detailed response. What I found weird was it
> > seemed to take 0.09 seconds to create a RAMDirectory off a 17MB index.
> > Suspiciously fast, but ok.
> >
> > Yet, when I do a simple fuzzy search on a single field
> >
> > "word: someword~0.76"
> >
> > It was taking .35 seconds. That's a very very long time all things
> > considered. I understand about the OS paging and such but in
> > doing some variations of this to "throw the OS off", I still saw
> > no difference between on-disk and RAM times. But despite that, the
> > times are really slow.
> >
> > Any ideas?
> >
> > thanks again,
> > Darren
> >
> > On Tue, 2008-08-12 at 19:55 -0700, Chris Hostetter wrote:
> > > : On one index, I am seeing no speed change when flipping between
> > > : RAMDirectory IndexSearcher and file system version.
> > >
> > > that is probably because even if you just use an FSDirectory, your OS
> > will
> > > cache the disk "pages" in RAM for you -- all using a RAMDirectory does
> > for
> > > you is garuntee that the entire index is copied into the heap you
> > allocate
> > > for your JVM.  If you've got 16GB or RAM, and a 5GB index, and you
> > > allocated 12GB of RAM to the JVM and read your index into a RAMDirectory,
> > > your index will always be in RAM, no matter what other processes do on
> > > your machine.
> > >
> > > If instead you only allocate 6GB of RAM to the JVM, and nothing else is
> > > using up the rest of your RAM, the OS has plenty to load the whole index
> > > into RAM as part of the filesystem cache once you use it -- but if
> > another
> > > process comes along and really needs that RAM (or if something reads a
> > lot
> > > of other pages of disk) your index might get bumped from the filesystem
> > > cache, and the next few reads could be slow.
> > >
> > > : Creating the RAMDirectory from the on-disk index only takes 0.09
> > > : seconds. It appears it is not loading the data into memory, but maybe
> > > : just the file names of the index?
> > >
> > > passing an FSDIrectory to the constructor of a RAMDIrectory uses the
> > > Directory.copy() method whose source is fairly straight forward and easy
> > > to read -- unless your index is ginormous it's not suprising that it's
> > > "fast" particularly if it's already in the filesystem cache.
> > >
> > >
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 13 19:54:27 2008
Return-Path: <java-user-return-35495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53321 invoked from network); 13 Aug 2008 19:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2008 19:54:27 -0000
Received: (qmail 68684 invoked by uid 500); 13 Aug 2008 19:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68657 invoked by uid 500); 13 Aug 2008 19:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68646 invoked by uid 99); 13 Aug 2008 19:54:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 12:54:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 19:53:22 +0000
Received: by gxk6 with SMTP id 6so1242467gxk.5
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 12:52:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=M1idKfLW+Je+4HJXGUP8D+PsaqPSX4Qn0fA+oh0w6Ek=;
        b=hci1B0rrxzyNNKzKGRfoZEsgNrq88xs/dEDC+dG8C2+Bo+NZVOnL77mXWYyf60JT49
         4pSUaA4HZg2BABJVmyD/lZwsGPkxIT9QK58e1MytonoUdak5scPmqy5M10sVhzNIst/Z
         hnZgeFlUnEgxYqbXWfQg9nPJEiINnMeUoDNuY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ujvy292hwdSbpiAJBHaC6glccqgBlMsTXLw27E9s+YHJjsqgsyMTEzhkJpbgA91Zi6
         PfwjZg+CoOLla2NAA0qq/xm3NI1CCnefnR0iHVjv37jxruq46ydcXsKRwBCk6i/gj14l
         QEqw2xAJ59SlHfaf72k/nKI4hBkZP9ukX6qTU=
Received: by 10.151.155.5 with SMTP id h5mr306539ybo.241.1218657169678;
        Wed, 13 Aug 2008 12:52:49 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Wed, 13 Aug 2008 12:52:49 -0700 (PDT)
Message-ID: <efd1bd310808131252o26496afbjd5e974da8ae8cf30@mail.gmail.com>
Date: Wed, 13 Aug 2008 12:52:49 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Tokenized x Un_tokenized
In-Reply-To: <976085.74107.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <976085.74107.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Otis,

I created a custom analyzer and it's working fine.

Here's my analyzer, for reference:

public class KeywordLowerAnalyzer extends Analyzer{

	  public KeywordLowerAnalyzer() {
	  }

	  public TokenStream tokenStream(String fieldName, Reader reader) {
	    TokenStream result = new KeywordTokenizer(reader);
	    result = new LowerCaseFilter(result);
	    return result;
	  }

}

Cheers


Andre

On Tue, Aug 12, 2008 at 9:22 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> Perhaps you can lowercase the text prior to passing it to Lucene?
> Or perhaps you can have a custom Analyzer that treats the whole input as 1 Token (see KeywordAnalyzer -- http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/KeywordAnalyzer.html ), but also includes LowerCaseFilter that's applied to that 1 Token.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Andre Rubin <andre.rubin@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, August 13, 2008 12:15:25 AM
>> Subject: Re: Searching Tokenized x Un_tokenized
>>
>> Thanks Otis, that was exactly what was happening.
>>
>> 1) According to here:
>> http://wiki.apache.org/lucene-java/LuceneFAQ#head-133cf44dd3dff3680c96c1316a663e881eeac35a
>> wildcard queries are not passed through the Analyzer, but they are
>> always set to lower case.
>>
>> 2) And according to here:
>> http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c44472d10961ba63c
>> un_tokenized fields are not passed through the Analyze as well.
>>
>> So by creating an untokenized field and setting
>> parser.setLowercaseExpandedTerms(false), I manage to make my use case
>> work in a case-sensitive manner. That is, 'u*' returns 'usa' and 'U*'
>> returns USA....
>>
>> The thing is, how to make this case-insensitive? I can make #1 work by
>> settting it to lowercase: parser.setLowercaseExpandedTerms(true). But
>> how make #2 work, that is, using a LowerCaseFilter to an Untokenized
>> field?
>>
>> Thanks,
>>
>>
>> Andre
>>
>> On Tue, Aug 12, 2008 at 7:57 PM, Otis Gospodnetic
>> wrote:
>> > Andre,
>> >
>> > Check the Lucene FAQ, there is an entry about wildcards and analysis (which
>> doesn't take place for wildcard queries).  Could that be it?
>> >
>> > Otis
>> > --
>> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>> >
>> >
>> >
>> > ----- Original Message ----
>> >> From: Andre Rubin
>> >> To: java-user@lucene.apache.org
>> >> Sent: Tuesday, August 12, 2008 5:30:47 PM
>> >> Subject: Re: Searching Tokenized x Un_tokenized
>> >>
>> >> My searches for my String tokenized field was working properly. I
>> >> switched the field to un_tokenized, rebuilt the index, and now my
>> >> searches only return strings that match the query string in lower
>> >> case.
>> >>
>> >> For example, searching for 'us*':
>> >>
>> >> The tokenized field version would find 'USA' and 'usa'
>> >>
>> >> The untokenized field version only finds 'usa'
>> >>
>> >> I'm using the StandardAnalyzer in both cases.
>> >>
>> >> Thanks
>> >>
>> >>
>> >> Andre
>> >>
>> >> On Thu, Aug 7, 2008 at 8:16 PM, Otis Gospodnetic
>> >> wrote:
>> >> > Hi,
>> >> >
>> >> > Perhaps you can give some examples.  Yes, untokenized means "full string" -
>> it
>> >> requires an "exact match".
>> >> >
>> >> > Otis
>> >> > --
>> >> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>> >> >
>> >> >
>> >> >
>> >> > ----- Original Message ----
>> >> >> From: Andre Rubin
>> >> >> To: java-user@lucene.apache.org
>> >> >> Sent: Thursday, August 7, 2008 8:04:04 PM
>> >> >> Subject: Searching Tokenized x Un_tokenized
>> >> >>
>> >> >> Hi all,
>> >> >>
>> >> >> When I switched a String field from tokenized to untokenized, some
>> >> >> searches started not returning some obvious values. Am I missing
>> >> >> something on querying untokenized fields? Another question is, do I
>> >> >> need an Analyzer if my search is on an Untokenized field, wouldn't the
>> >> >> search be based on the full String rather than its tokens?
>> >> >>
>> >> >> Thanks,
>> >> >>
>> >> >>
>> >> >> Andre
>> >> >>
>> >> >> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >> > ---------------------------------------------------------------------
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 03:15:04 2008
Return-Path: <java-user-return-35496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53195 invoked from network); 14 Aug 2008 03:15:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 03:15:04 -0000
Received: (qmail 52426 invoked by uid 500); 14 Aug 2008 03:14:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52382 invoked by uid 500); 14 Aug 2008 03:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52371 invoked by uid 99); 14 Aug 2008 03:14:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 20:14:55 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 03:13:57 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7E3EHAN000753
	for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 06:14:17 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id mw1d=4x7; 14 Aug 2008 06:13:00 +0300
Message-ID: <48A3A2F8.50802@teamware.com>
Date: Thu, 14 Aug 2008 13:14:00 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Payloads and tokenizers
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 14 Aug 2008 06:14:17 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I started playing with payloads and have been trying to work out how to get the 
data into the payload

I have a field where I want to add the following untokenized fields

A1
A2
A3

With these fields, I would like to add the payloads

B1
B2
B3

Firstly, it looks like you cannot add payloads to untokenized fields.  Is this 
correct?  In my usage, A and B are simply external Ids so must not be tokenized 
and there is always a 1-->1 relationship between them.

Secondly, what is the way to provide the payload data to the tokenizer.  It 
looks like I have to add a List/Map of payload data to a custom Tokenizer and 
Analyzer, which is then consumed each "next(Token)".  However, it would be nice 
if, in my use case, I could use some kind of construct like:

Document doc = new Document()
Field f = new Field("myField", "A1", Field.Store.NO, Field.Index.UNTOKENIZED);
f.setPayload("B1");
doc.add(f);

and avoid the whole unnecessary Tokenizer/Analyzer overhead and give support for 
payloads in untokenized fields.

It looks like it would be trivial to implement in DocumentsWriter.invertField(). 
  Or would this corrupt the Fieldable interface in an undesirable way?

Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 03:44:18 2008
Return-Path: <java-user-return-35497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68988 invoked from network); 14 Aug 2008 03:44:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 03:44:18 -0000
Received: (qmail 63735 invoked by uid 500); 14 Aug 2008 03:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63691 invoked by uid 500); 14 Aug 2008 03:44:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63680 invoked by uid 99); 14 Aug 2008 03:44:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 20:44:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shore.cloud@gmail.com designates 72.14.204.224 as permitted sender)
Received: from [72.14.204.224] (HELO qb-out-0506.google.com) (72.14.204.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 03:43:10 +0000
Received: by qb-out-0506.google.com with SMTP id e6so359596qbe.27
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 20:43:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=55lY5VjQSBPNHOxelO5Zm95VEt1+lUmYSwtBjvjZJiY=;
        b=l05euDDrMGc9Pu6jiLwNkFe4PLNvCHWvu3XKH0Yf37xSmkyAVuPf3lHC2VPmCbE3Ms
         cnKusfeu7EYdNz2CO/HXDAJxP0YPNfwAzOjoCY0Ub5DI8lss1S8i7/hal58iiJAELc11
         +zIRCcue8KKXNlXBtkcaQpgKrHt0Iu6yvW+A0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=T6elCq546oi82bgW3wUFVZV5QG5UeW64xB4mJyWK3QbnyOrEzmoXr3Ljc0jzImoH10
         IQzrwORsr74bulVziaDMa0EyZ5U8fxmwKJp1FJEp9Wj874k9PZMYR7pOamErdxB6PRKv
         JVCVKarNewxY1NNo7+3appv8qpVOkXQZ9ZXNM=
Received: by 10.142.132.2 with SMTP id f2mr261741wfd.256.1218685418012;
        Wed, 13 Aug 2008 20:43:38 -0700 (PDT)
Received: by 10.142.70.21 with HTTP; Wed, 13 Aug 2008 20:43:37 -0700 (PDT)
Message-ID: <ae7ef6650808132043n54edaa2bj3bce516a494f0a2f@mail.gmail.com>
Date: Thu, 14 Aug 2008 11:43:37 +0800
From: "Mr Shore" <shore.cloud@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for special condition.
In-Reply-To: <a823853a0808122146q740b29dbgc3811be0b127d130@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41561_7993097.1218685418004"
References: <731882.70944.qm@web50309.mail.re2.yahoo.com>
	 <a823853a0808122146q740b29dbgc3811be0b127d130@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41561_7993097.1218685418004
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

Y2FuIG51dGNoIG9yIGx1Y2VuZSBzdXBwb3J0IHNlYXJjaCBmb3Igc3BlY2lhbCBjaGFyYWN0ZXJz
IGxpa2UgLj8Kd2hlbiBpIHNlYXJjaCAiLm5ldCIgbWFueSByZXN1bHQgY29tZSBmb3IgIm5ldCIK
aSB3YW50IHRvIGV4Y2x1ZGUgdGhlbQpwczppIGxvdmUga29yZWFuIGxhbmd1YWdlIGEgbG90Cgoy
MDA4LzgvMTMgwOW/67yuIDxuZWVkNHNwZEBnbWFpbC5jb20+Cgo+IGhpLiB0aGFuayB5b3UgZm9y
IHlvdXIgcmVzcG9uc2UuCj4KPiBJIHdhcyBmb3VuZCB0aGUgd2F5IHdpdGggeW91ciBoZWxwLgo+
Cj4gVGhlcmUgYXJlIGNsYXNzIHRoYXQgbmFtZSBpcyBDb25zdGFudFNjb3JlUmFuZ2VRdWVyeSBh
bmQgTnVtYmVyVG9vbHMuCj4KPiBSZWZlcmVuY2Ugc2l0ZSBpcyBoZXJlLgo+Cj4gaHR0cDovL21h
cmttYWlsLm9yZy9tZXNzYWdlL2RjaXJtaWZvYXQ2dXFmN3kjcXVlcnk6b3JnLmFwYWNoZS5sdWNl
bmUuZG9jdW1lbnQuTnVtYmVyVG9vbHMrcGFnZToxK21pZDp0bGQzdWVrYXlsbXUyY3d0K3N0YXRl
OnJlc3VsdHMKPgo+Cj4gVGhhbmtzIHZlcnkgbXVjaC4gOikKPgo+Cj4KPiAyMDA4LzgvMTMsIE90
aXMgR29zcG9kbmV0aWMgPG90aXNfZ29zcG9kbmV0aWNAeWFob28uY29tPjoKPiA+Cj4gPiBIaSwK
PiA+Cj4gPiBMdWNlbmUgZG9lc24ndCBoYXZlIHRoZSBncmVhdGVyIHRoYW4gb3BlcmF0b3IuICBQ
ZXJoYXBzIHlvdSBjYW4gdXNlIHJhbmdlCj4gPiBxdWVyaWVzIHRvIGFjY29tcGxpc2ggdGhlIHNh
bWUgdGhpbmcuCj4gPgo+ID4KPiA+Cj4gaHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvMl8z
XzIvcXVlcnlwYXJzZXJzeW50YXguaHRtbCNSYW5nZSUyMFNlYXJjaGVzCj4gPgo+ID4gT3Rpcwo+
ID4gLS0KPiA+IFNlbWF0ZXh0IC0tIGh0dHA6Ly9zZW1hdGV4dC5jb20vIC0tIEx1Y2VuZSAtIFNv
bHIgLSBOdXRjaAo+ID4KPiA+Cj4gPgo+ID4gLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tCj4g
PiA+IEZyb206IMDlv+u8riA8bmVlZDRzcGRAZ21haWwuY29tPgo+ID4gPiBUbzogamF2YS11c2Vy
QGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMiwgMjAwOCA2
OjAxOjAwIEFNCj4gPiA+IFN1YmplY3Q6IHNlYXJjaCBmb3Igc3BlY2lhbCBjb25kaXRpb24uCj4g
PiA+Cj4gPiA+IGhpLgo+ID4gPgo+ID4gPiBJIGFtIHNlYXJjaGluZyBmb3IgbHVjZW5lIGFwaSBv
ciBmdW5jdGlvbiBsaWtlIHF1ZXJ5ICJGSUVMRCA+IDEwMDAiCj4gPiA+Cj4gPiA+IEZvciBleGFt
cGxlLCBhIHVzZXIgd2FudHMgdG8gc2VhcmNoIGEgcHJvZHVjdCB3aGljaCBwcmljZSBpcyBiaWdn
ZXIKPiB0aGVuCj4gPiA+IHVzZXIncyBpbnB1dC4KPiA+ID4gSWYgdXNlcidzIGlucHV0IGlzIDEw
MDAwIHRoZW4gcmVzdWx0IGFyZSB0aGUgcHJvZHVjdHMgaW4gaW5kZXgganVzdAo+IGxpa2UKPiA+
ID4gIlBSSUNFID4gMTAwMDAiCj4gPiA+Cj4gPiA+IElzIHRoZXJlIGFueSB3YXkgdG8gc2VhcmNo
IGxpa2UgdGhhdD8KPiA+ID4KPiA+ID4gdGhhbmtzLgo+ID4gPiBKYW5nLgo+ID4gPiAtLQo+ID4g
PiBERVa/673ECj4gPiA+IGh0dHA6Ly9kZXZ5b25nc2lrLnRpc3RvcnkuY29tCj4gPgo+ID4KPiA+
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLQo+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4KPiA+Cj4KPgo+IC0tCj4g
REVWv+u9xAo+IGh0dHA6Ly9kZXZ5b25nc2lrLnRpc3RvcnkuY29tCj4K
------=_Part_41561_7993097.1218685418004--

From java-user-return-35498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 04:44:03 2008
Return-Path: <java-user-return-35498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1634 invoked from network); 14 Aug 2008 04:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 04:44:03 -0000
Received: (qmail 93871 invoked by uid 500); 14 Aug 2008 04:43:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93830 invoked by uid 500); 14 Aug 2008 04:43:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93819 invoked by uid 99); 14 Aug 2008 04:43:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Aug 2008 21:43:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 04:42:57 +0000
Received: by yx-out-2324.google.com with SMTP id 3so177919yxj.5
        for <java-user@lucene.apache.org>; Wed, 13 Aug 2008 21:43:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zgtvZagv/sjpo2iDtoZaR+ZKCzEDHwIvAg/dswIjKCM=;
        b=PuISo/1gmFFjrtG1WWQJoca+94aGSqA9pGNoJNm9bOizhIE/z2i4AWfSq95oEych+I
         KFk5sxtxTpL4S9dI42YhgWKCCtkAv8K5HNUbYdESK3ek/lmG2xKt1Pj4+4hxo1xIwX7r
         X63OSM8XwBkSSOUmtLVArLQ6c0gJHyZcxqey4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=i60J3DTfNV7pVEgVoNEsh6DkQMnSE4fcJHYp/6RWqUuIo6NNUxoxOHTQUSg0zD551g
         FEQhUtaR0e0U2JL4IHbwSyDkRxL4i+zMqOIdoSy9Z46nVKKc5yxiZMPH+GRaHflTjFCW
         Y0xUBPsbj2sXG/l0vvUu0CnrkZz50Sg17kbH8=
Received: by 10.141.116.16 with SMTP id t16mr361291rvm.280.1218689003695;
        Wed, 13 Aug 2008 21:43:23 -0700 (PDT)
Received: by 10.141.18.6 with HTTP; Wed, 13 Aug 2008 21:43:23 -0700 (PDT)
Message-ID: <a823853a0808132143m1ec4bb26pfceba7b992500fe7@mail.gmail.com>
Date: Thu, 14 Aug 2008 13:43:23 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for special condition.
In-Reply-To: <ae7ef6650808132043n54edaa2bj3bce516a494f0a2f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62643_27031645.1218689003709"
References: <731882.70944.qm@web50309.mail.re2.yahoo.com>
	 <a823853a0808122146q740b29dbgc3811be0b127d130@mail.gmail.com>
	 <ae7ef6650808132043n54edaa2bj3bce516a494f0a2f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62643_27031645.1218689003709
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkuIEkgd2FzIHZlcnkgaGFwcHkgLHlvdSBhcmUgbG92ZSBLb3JlYW4gbGFuZ3VhZ2UgYSBsb3Qg
OikKU28gZG8geW91IHdhbnQgc2VhcmNoIGZvciBzcGVjaWFsIGNoYXJhY3RlcnM/CgpJZiB5b3Ug
d2FudCBpbmNsdWRlIHNwZWNpYWwgY2hhcmFjdGVycyB3aGVuIGluZGV4aW5nLCB5b3UgY2FuIG92
ZXJyaWRlCm1ldGhvZCBpbiBjbGFzcwpUb2tlbml6ZXIuIE1ldGhvZCdzIG5hbWUgaXMgaXNUb2tl
bkNoYXIoY2hhciBjKS4KCnByb3RlY3RlZCBib29sZWFuIGlzVG9rZW5DaGFyKGNoYXIgYykgewog
ICAgICAgIHJldHVybiBDaGFyYWN0ZXIuaXNMZXR0ZXIoYyk7Cn0KCkFzIHlvdSBzZWUsIHRoYXQg
bWV0aG9kIGlzIHJldHVybiB0cnVlIHdoZW4gdGhlIGNoYXJhY3RlciBjIGlzIGEgY2hhcmFjdGVy
Xl4KCklmIHlvdSBmaXggdGhhdCBtZXRob2QgInJldHVybiBDaGFyYWN0ZXIuaXNMZXR0ZXIoYykg
IHx8ICBjPT0nLic7ICIKdGhlbiwgeW91IHdpbGwgZ2V0IHRoZSByZXN1bHQgdG9rZW4gdGhhdCBo
YXMgc3BlY2lhbCBjaGFyYWN0ZXJzIGxpa2UgLgoKdGhhbmtzLiA6KQoKSmFuZy4KCjIwMDgvOC8x
NCwgTXIgU2hvcmUgPHNob3JlLmNsb3VkQGdtYWlsLmNvbT46Cj4KPiBjYW4gbnV0Y2ggb3IgbHVj
ZW5lIHN1cHBvcnQgc2VhcmNoIGZvciBzcGVjaWFsIGNoYXJhY3RlcnMgbGlrZSAuPwo+IHdoZW4g
aSBzZWFyY2ggIi5uZXQiIG1hbnkgcmVzdWx0IGNvbWUgZm9yICJuZXQiCj4gaSB3YW50IHRvIGV4
Y2x1ZGUgdGhlbQo+IHBzOmkgbG92ZSBrb3JlYW4gbGFuZ3VhZ2UgYSBsb3QKPgo+IDIwMDgvOC8x
MyDA5b/rvK4gPG5lZWQ0c3BkQGdtYWlsLmNvbT4KPgo+ID4gaGkuIHRoYW5rIHlvdSBmb3IgeW91
ciByZXNwb25zZS4KPiA+Cj4gPiBJIHdhcyBmb3VuZCB0aGUgd2F5IHdpdGggeW91ciBoZWxwLgo+
ID4KPiA+IFRoZXJlIGFyZSBjbGFzcyB0aGF0IG5hbWUgaXMgQ29uc3RhbnRTY29yZVJhbmdlUXVl
cnkgYW5kIE51bWJlclRvb2xzLgo+ID4KPiA+IFJlZmVyZW5jZSBzaXRlIGlzIGhlcmUuCj4gPgo+
ID4KPiBodHRwOi8vbWFya21haWwub3JnL21lc3NhZ2UvZGNpcm1pZm9hdDZ1cWY3eSNxdWVyeTpv
cmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5OdW1iZXJUb29scytwYWdlOjErbWlkOnRsZDN1ZWth
eWxtdTJjd3Qrc3RhdGU6cmVzdWx0cwo+ID4KPiA+Cj4gPiBUaGFua3MgdmVyeSBtdWNoLiA6KQo+
ID4KPiA+Cj4gPgo+ID4gMjAwOC84LzEzLCBPdGlzIEdvc3BvZG5ldGljIDxvdGlzX2dvc3BvZG5l
dGljQHlhaG9vLmNvbT46Cj4gPiA+Cj4gPiA+IEhpLAo+ID4gPgo+ID4gPiBMdWNlbmUgZG9lc24n
dCBoYXZlIHRoZSBncmVhdGVyIHRoYW4gb3BlcmF0b3IuICBQZXJoYXBzIHlvdSBjYW4gdXNlCj4g
cmFuZ2UKPiA+ID4gcXVlcmllcyB0byBhY2NvbXBsaXNoIHRoZSBzYW1lIHRoaW5nLgo+ID4gPgo+
ID4gPgo+ID4gPgo+ID4KPiBodHRwOi8vbHVjZW5lLmFwYWNoZS5vcmcvamF2YS8yXzNfMi9xdWVy
eXBhcnNlcnN5bnRheC5odG1sI1JhbmdlJTIwU2VhcmNoZXMKPiA+ID4KPiA+ID4gT3Rpcwo+ID4g
PiAtLQo+ID4gPiBTZW1hdGV4dCAtLSBodHRwOi8vc2VtYXRleHQuY29tLyAtLSBMdWNlbmUgLSBT
b2xyIC0gTnV0Y2gKPiA+ID4KPiA+ID4KPiA+ID4KPiA+ID4gLS0tLS0gT3JpZ2luYWwgTWVzc2Fn
ZSAtLS0tCj4gPiA+ID4gRnJvbTogwOW/67yuIDxuZWVkNHNwZEBnbWFpbC5jb20+Cj4gPiA+ID4g
VG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPiA+IFNlbnQ6IFR1ZXNkYXksIEF1
Z3VzdCAxMiwgMjAwOCA2OjAxOjAwIEFNCj4gPiA+ID4gU3ViamVjdDogc2VhcmNoIGZvciBzcGVj
aWFsIGNvbmRpdGlvbi4KPiA+ID4gPgo+ID4gPiA+IGhpLgo+ID4gPiA+Cj4gPiA+ID4gSSBhbSBz
ZWFyY2hpbmcgZm9yIGx1Y2VuZSBhcGkgb3IgZnVuY3Rpb24gbGlrZSBxdWVyeSAiRklFTEQgPiAx
MDAwIgo+ID4gPiA+Cj4gPiA+ID4gRm9yIGV4YW1wbGUsIGEgdXNlciB3YW50cyB0byBzZWFyY2gg
YSBwcm9kdWN0IHdoaWNoIHByaWNlIGlzIGJpZ2dlcgo+ID4gdGhlbgo+ID4gPiA+IHVzZXIncyBp
bnB1dC4KPiA+ID4gPiBJZiB1c2VyJ3MgaW5wdXQgaXMgMTAwMDAgdGhlbiByZXN1bHQgYXJlIHRo
ZSBwcm9kdWN0cyBpbiBpbmRleCBqdXN0Cj4gPiBsaWtlCj4gPiA+ID4gIlBSSUNFID4gMTAwMDAi
Cj4gPiA+ID4KPiA+ID4gPiBJcyB0aGVyZSBhbnkgd2F5IHRvIHNlYXJjaCBsaWtlIHRoYXQ/Cj4g
PiA+ID4KPiA+ID4gPiB0aGFua3MuCj4gPiA+ID4gSmFuZy4KPiA+ID4gPiAtLQo+ID4gPiA+IERF
Vr/rvcQKPiA+ID4gPiBodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo+ID4gPgo+ID4gPgo+
ID4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+Cj4gPiA+
Cj4gPgo+ID4KPiA+IC0tCj4gPiBERVa/673ECj4gPiBodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5
LmNvbQo+ID4KPgoKCgotLSAKREVWv+u9xApodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo=
------=_Part_62643_27031645.1218689003709--

From java-user-return-35499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 08:48:21 2008
Return-Path: <java-user-return-35499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26276 invoked from network); 14 Aug 2008 08:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 08:48:21 -0000
Received: (qmail 71446 invoked by uid 500); 14 Aug 2008 08:48:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71417 invoked by uid 500); 14 Aug 2008 08:48:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71406 invoked by uid 99); 14 Aug 2008 08:48:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 01:48:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 08:47:15 +0000
Received: by wr-out-0506.google.com with SMTP id c30so460263wra.21
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 01:47:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:references:content-transfer-encoding
         :message-id:in-reply-to:user-agent;
        bh=HBPrsK7n7LUjQxx7kaGXuYAe71f9y5EBDGX8z5VK+Hc=;
        b=sJ0hE2I2LRlov7ckBOdAAwS67rqW7gJpwT2j0ZGhCIENn1XLGWQXzQn1X9NP00RW36
         V1JGGXA/bmIS46S1b9g7DF0H9BeLXFbvwOUlHaxaErNTxgEHErQ2v+RBRiYJiFJk3qQz
         t2MCPlRIdRwbqoOlE3jk26kIBIU5S23HJw+7E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version:references
         :content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=J7ogW/RtmVwZzFTHiSKS++XSVX/4r+BiifsnFgQuXtJ3N2D/K9X3jlO5eW8uZeZl5b
         ZQCyBCKh9hmvzVvxJBXEI6mWk3hdyQ6S0BbSvF0doo0OCZPnvJf7oXC7YTkM2aK25XZd
         t9rFZlAQzt04poEFA5N4p63ct9fBuaNJOm3z0=
Received: by 10.90.98.12 with SMTP id v12mr1441142agb.74.1218703646500;
        Thu, 14 Aug 2008 01:47:26 -0700 (PDT)
Received: from sj-desktop ( [92.112.11.216])
        by mx.google.com with ESMTPS id 25sm2713236wra.22.2008.08.14.01.47.23
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 14 Aug 2008 01:47:25 -0700 (PDT)
Date: Thu, 14 Aug 2008 11:47:21 +0300
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.ufvb07uq2ic4zu@sj-desktop>
In-Reply-To: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello.

I have the similar question.

I need to implement
1. Case sensitive search.
2. Lower case search for concrete field.
3. Upper case search for concrete filed.

For now I use
new Field(PROPERTIES,
                    content,
                    Field.Store.NO,
                    Field.Index.NO_NORMS,
                    Field.TermVector.NO)
for original string and make case sensitive search.

But does anyone have an idea to how implement second and third type of  
search?

Thanks


> Hi All,
> Once I index a bunch of documents with a StandardAnalyzer (and if the  
> effort
> I need to put in to reindex the documents is not worth the effort), is  
> there
> a way to search on the index without case sensitivity.
> I do not use any sophisticated Analyzer that makes use of
> LowerCaseTokenizer.
> Please let me know if there is a solution to circumvent this case
> sensitivity problem.
> Many thanks
> Dino
>

-- 
Sergey Kabashnyuk
eXo Platform SAS

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 10:16:02 2008
Return-Path: <java-user-return-35500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67224 invoked from network); 14 Aug 2008 10:16:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 10:16:01 -0000
Received: (qmail 60439 invoked by uid 500); 14 Aug 2008 10:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60390 invoked by uid 500); 14 Aug 2008 10:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60376 invoked by uid 99); 14 Aug 2008 10:15:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 03:15:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 10:14:55 +0000
Received: by rv-out-0506.google.com with SMTP id f6so435273rvb.5
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 03:15:04 -0700 (PDT)
Received: by 10.141.114.19 with SMTP id r19mr505198rvm.295.1218708904177;
        Thu, 14 Aug 2008 03:15:04 -0700 (PDT)
Received: by 10.141.142.8 with HTTP; Thu, 14 Aug 2008 03:15:04 -0700 (PDT)
Message-ID: <9ac0c6aa0808140315y40f227dcu813d779dd4485634@mail.gmail.com>
Date: Thu, 14 Aug 2008 06:15:04 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: CheckIndex possibly not detecting/fixing all corruptions?
In-Reply-To: <003601c8fc98$44a8a270$2e04bd0a@eu.cp.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <003601c8fc98$44a8a270$2e04bd0a@eu.cp.net>
X-Virus-Checked: Checked by ClamAV on apache.org

OK thanks for bringing closure to this John, and good luck tracking it down.

Mike

John O'Brien <john.obrien@criticalpath.net> wrote:
> Hi Mike,
>        Apologies for the delay in getting back.
> I have since figured out that the reason Luke gave an error when we searched
> on the "fixed" index was (possibly) because it was a really old version (0.6
> 2005/02/16) - I tried again with v 0.8.1 (2008-02-13) and Luke can search on
> the "fixed" index just fine.
>
> When I first ran CheckIndex the exception was as follows:
>
> java.lang.RuntimeException: term body:03: doc -2147483645 < lastDoc 44
>        at org.apache.lucene.index.CheckIndex.check(CheckIndex.java:195)
>        at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:373)
>
> WARNING: 1 broken segments detected
> WARNING: 162 documents will be lost
>
> So for now I think the problem may lie in CLucene (or possibly our use of
> it) rather than CheckIndex not detecting and repairing properly.
> I will follow up with an update if/when I figure it out!
> In the meantime if you have any ideas as to how/why a corruption of this
> nature can occur I'd be glad to hear them.
>
> Thanks for your help,
> John.
>
> -----Original Message-----
> From Michael McCandless <luc...@mikemccandless.com>
> Subject Re: CheckIndex possibly not detecting/fixing all corruptions?
> Date Wed, 30 Jul 2008 10:43:29 GMT
>
> Do you have the exception Luke produced?   That'd be a good clue as to
> what CheckIndex is not detecting.  It's hard for me to tell from that
> GDB trace exactly what's gone wrong...
>
> When you first ran CheckIndex, and it detected one corrupt segment,
> what exception did it report as the cause of the corruption on that
> segment?
>
> If you could upload the index somewhere, that'd be great -- I'll try
> to figure out why CheckIndex fails to detect the corruption.  It's
> particularly odd that you were able to successfully optimize the index.
>
> If you run searches on your index use Lucene java, do you get any odd
> exceptions?
>
> Mike
>
>
> -----Original Message-----
> From: John O'Brien [mailto:john.obrien@criticalpath.net]
> Sent: 30 July 2008 11:22
> To: 'java-user@lucene.apache.org'
> Subject: CheckIndex possibly not detecting/fixing all corruptions?
>
>
> Hi,
>        I already posted this question on the CLucene dev list but it was
> suggested that I may be able to get some help on the Java list so here goes.
> We use Clucene 0.9.20 in our search engine. One of the indexes appears to
> have become corrupt (still investigating the cause of the corruption). We
> tried using the Java Lucene CheckIndex tool to fix the corruption(s).
> CheckIndex detected 1 broken segment and removed 162 documents and wrote a
> new segments file. Subsequent runs of CheckIndex report "No problems were
> detected with this index.". However our search engine still crashes when its
> performing a search on the "fixed" index. Here is the relevant backtrace:
>
> #8  0x001c0faa in lucene::index::SegmentTermDocs::read (this=0x664f26c8,
>    docs=0x664f9944, freqs=0x664f99c4, length=32)
>    at CLucene/util/BitSet.h:35
> #9  0x001b4a4a in lucene::index::MultiTermDocs::read (this=0x664e5d38,
>    docs=0x664f9944, freqs=0x664f99c4, length=32)
>    at ../src/CLucene/index/MultiReader.cpp:400
> #10 0x001ef7dc in lucene::search::TermScorer::next (this=0x664f9920)
>    at ../src/CLucene/search/TermScorer.cpp:41
> #11 0x001d2d23 in lucene::search::BooleanScorer::next (this=0x665f2fc0)
>    at ../src/CLucene/search/BooleanScorer.cpp:63
> #12 0x001d2d23 in lucene::search::BooleanScorer::next (this=0x664e5ec8)
>    at ../src/CLucene/search/BooleanScorer.cpp:63
> #13 0x001e3275 in lucene::search::IndexSearcher::_search (
>    this=0x65ba6410, query=0x66734ed8, filter=0x0, nDocs=100)
>    at ../src/CLucene/search/Scorer.h:39
> #14 0x001e1fb0 in lucene::search::Hits::getMoreDocs (this=0x66881440,
>    m=50) at ../src/CLucene/search/Hits.cpp:110
> #15 0x001e1acf in lucene::search::Hits::Hits ()
>    at CLucene/util/PriorityQueue.h:35
>
> We tried to perform a search using Luke tool but this also resulted in an
> error.
> Also tried after optimizing the index db, but the same error persists.
> So it looks like the index db might still be corrupt.
>
> Any ideas as to why CheckIndex appears not to have detected/fixed all
> corruptions?
> Are there any other suggestions as to how to detect/repair index
> corruptions?
>
> Thanks in advance,
> John.
>
> P.s. I still have the index in question before and after running CheckIndex
> fix on it so if anyone's willing to take a look at it I can upload it
> somewhere for you to download.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 10:18:07 2008
Return-Path: <java-user-return-35501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67582 invoked from network); 14 Aug 2008 10:18:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 10:18:07 -0000
Received: (qmail 63397 invoked by uid 500); 14 Aug 2008 10:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63353 invoked by uid 500); 14 Aug 2008 10:17:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63341 invoked by uid 99); 14 Aug 2008 10:17:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 03:17:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 10:16:59 +0000
Received: by fg-out-1718.google.com with SMTP id l27so364724fgb.27
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 03:17:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=28PObZJCzDx1ED0ZY94PCASmB/ax4QhHwndlkUZgUgg=;
        b=KXR0CcKrh3nw+3KCTl+QOZ1QwvmvROW0XOBje/Nrg443iRSaEIJppPHHbJ6e+1QyqJ
         i6ckuaeHdILgWfSubqlsm22oCtPcckQAtMmejC7b0ddAt295mKUJHFKEalajC7TkVlfB
         14Lby8LjaJzbpiTgrp7cEeYD189gNYnSxWFcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vQnHO7+02lHq5HB/Uk7i7cPqGvqF3XaN6hFpxsWcsFcgVgrGT4BXu1BkIAwGEK0fFS
         7b+4XOH/Qh2wRVD7Xyk2QEtSB3pkpv3dYhUDM/lvkSzEv4v4htv2EAmRg38xt75k5hjw
         Ulx9QwwQ1kOwizzZWdQ8uFQjE1vG3gMWpi+DU=
Received: by 10.86.60.14 with SMTP id i14mr1817111fga.75.1218709028213;
        Thu, 14 Aug 2008 03:17:08 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Thu, 14 Aug 2008 03:17:08 -0700 (PDT)
Message-ID: <e05f0fd10808140317s48cf8943s740b7ce6debdc86c@mail.gmail.com>
Date: Thu, 14 Aug 2008 13:17:08 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and tokenizers
In-Reply-To: <48A3A2F8.50802@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43544_7436432.1218709028202"
References: <48A3A2F8.50802@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43544_7436432.1218709028202
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

IIRC first versions of patches that added payloads support had this notion
of payload by field rather than by token, but later it was modified to be by
token only.

I have seen two code patterns to add payloads to tokens.

The first one created the field text with a reserved separator/delimiter
which was later identified by the analyzer who separated the payload part
from the token part, created the token and set the payload.

The other pattern was to create a field with a TokenStream. Can be done only
for non storable fields. Here you can create the token in advance, and you
have a SingleTokenStream (I think this is how it is called) to wrap it in
case it is a single token. Since the token is created in advance, there's no
analysis going on, and you can set the payload of that token on the spot.I
prefer this pattern - more efficient and elegant.

Doron

On Thu, Aug 14, 2008 at 6:14 AM, Antony Bowesman <adb@teamware.com> wrote:

> I started playing with payloads and have been trying to work out how to get
> the data into the payload
>
> I have a field where I want to add the following untokenized fields
>
> A1
> A2
> A3
>
> With these fields, I would like to add the payloads
>
> B1
> B2
> B3
>
> Firstly, it looks like you cannot add payloads to untokenized fields.  Is
> this correct?  In my usage, A and B are simply external Ids so must not be
> tokenized and there is always a 1-->1 relationship between them.
>
> Secondly, what is the way to provide the payload data to the tokenizer.  It
> looks like I have to add a List/Map of payload data to a custom Tokenizer
> and Analyzer, which is then consumed each "next(Token)".  However, it would
> be nice if, in my use case, I could use some kind of construct like:
>
> Document doc = new Document()
> Field f = new Field("myField", "A1", Field.Store.NO,
> Field.Index.UNTOKENIZED);
> f.setPayload("B1");
> doc.add(f);
>
> and avoid the whole unnecessary Tokenizer/Analyzer overhead and give
> support for payloads in untokenized fields.
>
> It looks like it would be trivial to implement in
> DocumentsWriter.invertField().  Or would this corrupt the Fieldable
> interface in an undesirable way?
>
> Antony
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43544_7436432.1218709028202--

From java-user-return-35502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 13:45:18 2008
Return-Path: <java-user-return-35502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91723 invoked from network); 14 Aug 2008 13:45:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 13:45:18 -0000
Received: (qmail 99140 invoked by uid 500); 14 Aug 2008 13:45:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99105 invoked by uid 500); 14 Aug 2008 13:45:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99094 invoked by uid 99); 14 Aug 2008 13:45:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 06:45:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 13:44:12 +0000
Received: by py-out-1112.google.com with SMTP id z74so854651pyg.9
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 06:44:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=h7PORWXgm5y4b1/hURZoGqe9LFw6s6DuQvHhuUPiLoM=;
        b=DnC5TECC6vV3L+2w1+lw/wdTez+M0tpWk1384k+eV8ja4gwVCeVyoqSm2Z1rhdo4h4
         6aAMX/QK0Ba1jLBYYOd0KryA/0AOAYAY6YW+FY3Wxs2Zf6iGj6FGENemLzlXu010VX3+
         ZWgF87biA/irRarEkvVSKVOGJGVPEgm6QCZYg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OppqC1pe57yJcGTrtjuvmkgWetQL4UZb/NZKw75CxtbH7KgCISRgYVplBQNoRjCO73
         6dXUYFkqKpOeXndOiNYfZOMuQjullpc1Ozw0rcyVv8m0NIrOa7sovY1qE9a1srwC66DD
         dR6Agfu7oMb57sSCwAi370t641ab0NgvHqAw0=
Received: by 10.141.1.2 with SMTP id d2mr658513rvi.129.1218721462427;
        Thu, 14 Aug 2008 06:44:22 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Thu, 14 Aug 2008 06:44:22 -0700 (PDT)
Message-ID: <359a92830808140644u7e55d48ek3c048f2b05fd5345@mail.gmail.com>
Date: Thu, 14 Aug 2008 09:44:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <op.ufvb07uq2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53071_27240943.1218721462437"
References: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
	 <op.ufvb07uq2ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53071_27240943.1218721462437
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

About the only way to do this that I know of is to
index the data three times, once without any case
changing, once uppercased and once lowercased.
You'll have to watch your analyzer, probably making
up your own (easily done, see the synonym analyzer
in Lucene in Action).

Your example doesn't tell us anything, since the critical
information is the *analyzer* you use, both at query and
at index times. The analyzer is responsible for any
transformations, like case folding, tokenizing, etc.

But what is your use-case for needing both upper and
lower case comparisons? I have a hard time coming
up with a reason to do both that wouldn't be satisfied
by just a caseless search.

Best
Erick

On Thu, Aug 14, 2008 at 4:47 AM, Sergey Kabashnyuk <ksmmlist@gmail.com>wrote:

> Hello.
>
> I have the similar question.
>
> I need to implement
> 1. Case sensitive search.
> 2. Lower case search for concrete field.
> 3. Upper case search for concrete filed.
>
> For now I use
> new Field("PROPERTIES",
>                   content,
>                   Field.Store.NO,
>                   Field.Index.NO_NORMS,
>                   Field.TermVector.NO)
> for original string and make case sensitive search.
>
> But does anyone have an idea to how implement second and third type of
> search?
>
> Thanks
>
>
>
>  Hi All,
>> Once I index a bunch of documents with a StandardAnalyzer (and if the
>> effort
>> I need to put in to reindex the documents is not worth the effort), is
>> there
>> a way to search on the index without case sensitivity.
>> I do not use any sophisticated Analyzer that makes use of
>> LowerCaseTokenizer.
>> Please let me know if there is a solution to circumvent this case
>> sensitivity problem.
>> Many thanks
>> Dino
>>
>>
> --
> Sergey Kabashnyuk
> eXo Platform SAS
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53071_27240943.1218721462437--

From java-user-return-35503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 14:32:19 2008
Return-Path: <java-user-return-35503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19267 invoked from network); 14 Aug 2008 14:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 14:32:19 -0000
Received: (qmail 65021 invoked by uid 500); 14 Aug 2008 14:32:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64962 invoked by uid 500); 14 Aug 2008 14:32:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64924 invoked by uid 99); 14 Aug 2008 14:32:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 07:32:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 14:31:07 +0000
Received: by yx-out-2324.google.com with SMTP id 3so301100yxj.5
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 07:31:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:references:content-transfer-encoding
         :message-id:in-reply-to:user-agent;
        bh=N6NSWIV9RzXv9tKHbdHYkAsfUXlRuXmpFZc0VQPlTFQ=;
        b=OX//HyRxFXJ2fD45oVuQL7xNQr0ChWla+fOkHGrDhEb81B/Ql8Q8i9J54UFlZDST/3
         o6qPb2t7szbGWvzg7attqxec7kPcHtXYIZpnjKl+T7/p9e5OGytfpD878heAySFHcGGH
         M3mP5gz8v6uFTjEfMGNsVrtPPolF74CuaO3Ho=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version:references
         :content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=Xd37O5uRvPYiVxNE5P6xEJQcwrytauQfmQnxwoJU2ge/KiecD+bKTuHLTLSuQcz7I7
         YPHPvsLszGC00rLlpB8YdfK6cHp73oI5dbXmOlDAtASf2Uza2ewdRR11rv+Y/6vkrwzx
         6Et9jNYrbNZLPRWthq+VDRqfMXtswaEMa9x24=
Received: by 10.103.137.5 with SMTP id p5mr1025225mun.124.1218724276956;
        Thu, 14 Aug 2008 07:31:16 -0700 (PDT)
Received: from sj-desktop ( [92.112.11.216])
        by mx.google.com with ESMTPS id y2sm4569456mug.2.2008.08.14.07.31.14
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 14 Aug 2008 07:31:15 -0700 (PDT)
Date: Thu, 14 Aug 2008 17:31:12 +0300
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
 <op.ufvb07uq2ic4zu@sj-desktop>
 <359a92830808140644u7e55d48ek3c048f2b05fd5345@mail.gmail.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.ufvryaly2ic4zu@sj-desktop>
In-Reply-To: <359a92830808140644u7e55d48ek3c048f2b05fd5345@mail.gmail.com>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for you  reply Erick.


> About the only way to do this that I know of is to
> index the data three times, once without any case
> changing, once uppercased and once lowercased.
> You'll have to watch your analyzer, probably making
> up your own (easily done, see the synonym analyzer
> in Lucene in Action).
>
> Your example doesn't tell us anything, since the critical
> information is the *analyzer* you use, both at query and
> at index times. The analyzer is responsible for any
> transformations, like case folding, tokenizing, etc.


In example  I want to show what I  stored field as  Field.Index.NO_NORMS

As I understand it means what field contains original string
despite what analyzer I chose(StandardAnalyzer by default).

All querys I made myself without using Parsers.
For example new TermQuery(new Term(filed, MaMa));


I agree with you about possible implementation,
but it increase size of index at times.

But are there other possibilities, such as using  custom query, possibly
similar to  RegexQuery,RegexTermEnum that would compare terms
at it's  own discretion?



>
> But what is your use-case for needing both upper and
> lower case comparisons? I have a hard time coming
> up with a reason to do both that wouldn't be satisfied
> by just a caseless search.
>
> Best
> Erick
>
> On Thu, Aug 14, 2008 at 4:47 AM, Sergey Kabashnyuk  
> <ksmmlist@gmail.com>wrote:
>
>> Hello.
>>
>> I have the similar question.
>>
>> I need to implement
>> 1. Case sensitive search.
>> 2. Lower case search for concrete field.
>> 3. Upper case search for concrete filed.
>>
>> For now I use
>> new Field("PROPERTIES",
>>                   content,
>>                   Field.Store.NO,
>>                   Field.Index.NO_NORMS,
>>                   Field.TermVector.NO)
>> for original string and make case sensitive search.
>>
>> But does anyone have an idea to how implement second and third type of
>> search?
>>
>> Thanks
>>
>>
>>
>>  Hi All,
>>> Once I index a bunch of documents with a StandardAnalyzer (and if the
>>> effort
>>> I need to put in to reindex the documents is not worth the effort), is
>>> there
>>> a way to search on the index without case sensitivity.
>>> I do not use any sophisticated Analyzer that makes use of
>>> LowerCaseTokenizer.
>>> Please let me know if there is a solution to circumvent this case
>>> sensitivity problem.
>>> Many thanks
>>> Dino
>>>
>>>
>> --
>> Sergey Kabashnyuk
>> eXo Platform SAS
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
-- 
Sergey Kabashnyuk
eXo Platform SAS

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 14:43:15 2008
Return-Path: <java-user-return-35504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29680 invoked from network); 14 Aug 2008 14:43:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 14:43:14 -0000
Received: (qmail 2061 invoked by uid 500); 14 Aug 2008 14:43:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2034 invoked by uid 500); 14 Aug 2008 14:43:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2023 invoked by uid 99); 14 Aug 2008 14:43:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 07:43:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 14:42:10 +0000
Received: by fg-out-1718.google.com with SMTP id l27so438368fgb.27
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 07:42:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Bfvvc6ey1azFOGQyHp/k1HJD+Do4C1T+kp4ffUs0yKA=;
        b=Lb50T50hp9RgnOl0T4NPK5tryRerYGQ8tYInf4Hu3WdiQjiorcEjZR0OWAJMw5D5KT
         dXgq87Vi5Brqvyq5CzSnDD/q1+bXVcjWgHkZlaPahej9ZmpMXhfaKbFdT0q0R9OJq+0W
         zFJTLAPlWGVljsAZPzBwMUml/rU/pbuR35zBU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=m3zggk34jBwf2JuLrmd/+xLICuBxa6Y10tOzMAeM66IhpZwfjX6fd/jtEB7lKQ9BT/
         nFsNSAVMRkLLeTLC5rM0aBgkFLJwrmBaP6CP6hp/FUTvE5CqkL5T551v/LQjYAb7QFUs
         HHoe6yYzGo3dN5zc16CgW+rsyrxMP1QfLiz9I=
Received: by 10.86.95.20 with SMTP id s20mr460603fgb.65.1218724941190;
        Thu, 14 Aug 2008 07:42:21 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Thu, 14 Aug 2008 07:42:21 -0700 (PDT)
Message-ID: <e05f0fd10808140742v6fdf8a1p30cb3b3538d1093f@mail.gmail.com>
Date: Thu, 14 Aug 2008 17:42:21 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <op.ufvryaly2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45846_17581206.1218724941179"
References: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
	 <op.ufvb07uq2ic4zu@sj-desktop>
	 <359a92830808140644u7e55d48ek3c048f2b05fd5345@mail.gmail.com>
	 <op.ufvryaly2ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45846_17581206.1218724941179
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> In example  I want to show what I  stored field as  Field.Index.NO_NORMS
>
> As I understand it means what field contains original string
> despite what analyzer I chose(StandardAnalyzer by default).
>

This would be achieved by UN_TOKENIZED.

The NO_NORMS just guides Lucene to avoid normalizing
results by document length for this field (and to avoid allocating
resources for that).

Other than that I join Erick in wondering why all three options are needed.
It would help the list to help you if you provide
a few simple examples of: document, query, expected result.

Doron

------=_Part_45846_17581206.1218724941179--

From java-user-return-35505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 14:53:23 2008
Return-Path: <java-user-return-35505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38230 invoked from network); 14 Aug 2008 14:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 14:53:23 -0000
Received: (qmail 21346 invoked by uid 500); 14 Aug 2008 14:53:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21303 invoked by uid 500); 14 Aug 2008 14:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21267 invoked by uid 99); 14 Aug 2008 14:53:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 07:53:13 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 14:52:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KTeBv-0001ht-A4
	for java-user@lucene.apache.org; Thu, 14 Aug 2008 07:52:43 -0700
Message-ID: <18983180.post@talk.nabble.com>
Date: Thu, 14 Aug 2008 07:52:43 -0700 (PDT)
From: Gunjan Juyal <higunjan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Do doc-ids always increment by 1 if no deletion is done?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: higunjan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi.
 I am creating an index where there are no deletions, just additions. After
the index creation is done I need to create another mapping of doc-ids to
some data.
 If there are only additions and no deletions then can we assume that the
doc-ids will be in the same order in which the documents were added, with
the doc-ids being incremented by 1 each time? If so then I don't need to
query lucene again as I already know the initial max doc-id and the order in
which I added the docs. More specifically:-
- If I add 'N' documents to the index in some order, can I expect that the
doc-ids will also be in the same order with each doc-id differing from the
previous by 1?
- If this is the case, then can we expect the future versions of lucene to
behave in the same way or is it undefined?
Thanks!
-- 
View this message in context: http://www.nabble.com/Do-doc-ids-always-increment-by-1-if-no-deletion-is-done--tp18983180p18983180.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 15:18:03 2008
Return-Path: <java-user-return-35506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62422 invoked from network); 14 Aug 2008 15:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 15:18:03 -0000
Received: (qmail 69194 invoked by uid 500); 14 Aug 2008 15:17:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69172 invoked by uid 500); 14 Aug 2008 15:17:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69060 invoked by uid 99); 14 Aug 2008 15:17:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 08:17:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 15:16:47 +0000
Received: by rv-out-0506.google.com with SMTP id f6so590855rvb.5
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 08:17:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=qxaJTuLkCKZ+YdJvI2OLBp8wbnN4h+RmbroCayHeIJ8=;
        b=EcIHeU9804TIsgP6pn+EsBlecfb4P2Vm/7kE5CfamTE4UD3gtfxzC1DLkJxT/1729D
         sNN1see/RxaoM2SIbje5yzKaNbqvGExv6oinsFkbp2rN7a8olJxbG/2gLhEGls1GglA5
         eziNGdeVJDyL5Km5YZoNCDY4wUP3DTgnW6PFk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=iA3IBiEZfQdX7klsLklk2rrUxMe3Hkv3SA85rxr9UsT+jYjnoQLHA6RO29etm+i4qp
         352JQKLeKoutiTK3V2HXFVTwoBVLlZ50OfnTkf6xi1Jtij+j4z4L1QyNJEEpcbzF5C41
         UtI9qsK4fExxgEZMBwBxbYjdjEg6sJnE9Wp6o=
Received: by 10.141.210.21 with SMTP id m21mr756154rvq.23.1218727035313;
        Thu, 14 Aug 2008 08:17:15 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Thu, 14 Aug 2008 08:17:15 -0700 (PDT)
Message-ID: <359a92830808140817j1114861cw7c240b15bc149c28@mail.gmail.com>
Date: Thu, 14 Aug 2008 11:17:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <op.ufvryaly2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54006_13467234.1218727035309"
References: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
	 <op.ufvb07uq2ic4zu@sj-desktop>
	 <359a92830808140644u7e55d48ek3c048f2b05fd5345@mail.gmail.com>
	 <op.ufvryaly2ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54006_13467234.1218727035309
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Be aware that StandardAnalyzer lowercases all the input,
both at index and query times. Field.Store.YES will store
the original text without any transformations, so doc.get(<field>)
will return the original text. However, no matter what the
Field.Store value, the *indexed* tokens (using
TOKENIZED as you Field.Index.TOKENIZED)
are passed through the analyzer.

For instance, indexing "MIXed CasE  TEXT" in a
field called "myfield" with Field.Store.YES,
Field.Index.TOKENIZED would index the
following tokens (with StandardAnalyzer).
mixed
case
text

and searches (with StandardAnalyzer) would match
any case in the query terms (e.g. MIXED would hit,
as would mixed as would CaSE).

However, doc.get("myfield") would return
"MIXed CasE  TEXT"

As Doron said, though, a few use cases would
help us provide better answers.

Best
Erick


On Thu, Aug 14, 2008 at 10:31 AM, Sergey Kabashnyuk <ksmmlist@gmail.com>wrote:

> Thanks for you  reply Erick.
>
>
>  About the only way to do this that I know of is to
>> index the data three times, once without any case
>> changing, once uppercased and once lowercased.
>> You'll have to watch your analyzer, probably making
>> up your own (easily done, see the synonym analyzer
>> in Lucene in Action).
>>
>> Your example doesn't tell us anything, since the critical
>> information is the *analyzer* you use, both at query and
>> at index times. The analyzer is responsible for any
>> transformations, like case folding, tokenizing, etc.
>>
>
>
> In example  I want to show what I  stored field as  Field.Index.NO_NORMS
>
> As I understand it means what field contains original string
> despite what analyzer I chose(StandardAnalyzer by default).
>
> All querys I made myself without using Parsers.
> For example new TermQuery(new Term("filed", "MaMa"));
>
>
> I agree with you about possible implementation,
> but it increase size of index at times.
>
> But are there other possibilities, such as using  custom query, possibly
> similar to  RegexQuery,RegexTermEnum that would compare terms
> at it's  own discretion?
>
>
>
>
>
>> But what is your use-case for needing both upper and
>> lower case comparisons? I have a hard time coming
>> up with a reason to do both that wouldn't be satisfied
>> by just a caseless search.
>>
>> Best
>> Erick
>>
>> On Thu, Aug 14, 2008 at 4:47 AM, Sergey Kabashnyuk <ksmmlist@gmail.com
>> >wrote:
>>
>>  Hello.
>>>
>>> I have the similar question.
>>>
>>> I need to implement
>>> 1. Case sensitive search.
>>> 2. Lower case search for concrete field.
>>> 3. Upper case search for concrete filed.
>>>
>>> For now I use
>>> new Field("PROPERTIES",
>>>                  content,
>>>                  Field.Store.NO,
>>>                  Field.Index.NO_NORMS,
>>>                  Field.TermVector.NO)
>>> for original string and make case sensitive search.
>>>
>>> But does anyone have an idea to how implement second and third type of
>>> search?
>>>
>>> Thanks
>>>
>>>
>>>
>>>  Hi All,
>>>
>>>> Once I index a bunch of documents with a StandardAnalyzer (and if the
>>>> effort
>>>> I need to put in to reindex the documents is not worth the effort), is
>>>> there
>>>> a way to search on the index without case sensitivity.
>>>> I do not use any sophisticated Analyzer that makes use of
>>>> LowerCaseTokenizer.
>>>> Please let me know if there is a solution to circumvent this case
>>>> sensitivity problem.
>>>> Many thanks
>>>> Dino
>>>>
>>>>
>>>>  --
>>> Sergey Kabashnyuk
>>> eXo Platform SAS
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>  --
> Sergey Kabashnyuk
> eXo Platform SAS
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_54006_13467234.1218727035309--

From java-user-return-35507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 16:28:41 2008
Return-Path: <java-user-return-35507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1906 invoked from network); 14 Aug 2008 16:28:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 16:28:39 -0000
Received: (qmail 97250 invoked by uid 500); 14 Aug 2008 16:28:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97219 invoked by uid 500); 14 Aug 2008 16:28:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97208 invoked by uid 99); 14 Aug 2008 16:28:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 09:28:30 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 16:27:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KTfg9-0005bm-EP
	for java-user@lucene.apache.org; Thu, 14 Aug 2008 09:28:01 -0700
Message-ID: <18985052.post@talk.nabble.com>
Date: Thu, 14 Aug 2008 09:28:01 -0700 (PDT)
From: Hareesh <hareeshkumarps@hotmail.com>
To: java-user@lucene.apache.org
Subject: Issue while creating Regular Expressions
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: hareeshkumarps@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a small problem. I will describe you the problem first ..I am working
on a search Engine now, in which the crawling is done using Heritrix and the
crawled data is the input for my Logic. while trying to index the ARC files
from Heritrix its not creating indexes in the desired format. The Expression
which Iam using to create the segments is like this   ^(.*)$\\n+  when
passing the filtered contents i;e after removing the Html tags.I created a
pattern using the above said regex and when passing the filtered contents
through the method to Match the pattern it returns 'false'. so Iam little
bit confused regarding which will be the exact regular expression . pls help
me with your suggestions.

Thanks
-- 
View this message in context: http://www.nabble.com/Issue-while-creating-Regular-Expressions-tp18985052p18985052.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 17:56:16 2008
Return-Path: <java-user-return-35508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50053 invoked from network); 14 Aug 2008 17:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 17:56:16 -0000
Received: (qmail 35552 invoked by uid 500); 14 Aug 2008 17:56:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34589 invoked by uid 500); 14 Aug 2008 17:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34578 invoked by uid 99); 14 Aug 2008 17:56:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 10:56:07 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 17:55:10 +0000
Received: by fg-out-1718.google.com with SMTP id l27so494676fgb.27
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 10:55:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=EKRCjWzhR75XVKXIuSfUgkCND/7mt7sBJRNeg6x2g18=;
        b=H4tE/bQdyfa9yVufOsF7BykLJUXYm7h5KlVDkmzyA9TEIS4Hq4rTH4J2kvuLFMV4Na
         R20lU1rPC5NH7SOD1JDcR678vTPPtHCYm17HezmZaGeCtQT9AFGBbHNHA6+wCFv3DtVk
         G5Vcl4X/hp1Iq+j9NB7WxK+Z82W+QEDkL29oU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=M71CrCCuq3iau7sWlfb3xPmQ/cAA6bK3/VQEgevhG63EU0vjLn9BrXxoopC2OPuu/d
         b3qlSWcn7NuEA2RDNCC+xjxtFVgx9v9VqAZtQmFTtaaOHVf9vvTuLp8QEWGYuaYBeyOK
         XU8K51/G3ZtsbfrwcaXvZaKi/FJjsFS9dob70=
Received: by 10.86.27.9 with SMTP id a9mr817590fga.57.1218736531501;
        Thu, 14 Aug 2008 10:55:31 -0700 (PDT)
Received: by 10.86.98.8 with HTTP; Thu, 14 Aug 2008 10:55:31 -0700 (PDT)
Message-ID: <359a92830808141055k67cd6a96sa7c4ff53fd3b24a2@mail.gmail.com>
Date: Thu, 14 Aug 2008 13:55:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue while creating Regular Expressions
In-Reply-To: <18985052.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_107050_8163788.1218736531475"
References: <18985052.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_107050_8163788.1218736531475
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What are you trying to do with the regex? And why is it
appropriate to the Lucene list? What is a segment and how
does it relate to Lucene?

It would really help if you showed us some example input
and what transformation you are trying to implement with
your regex. If it's a pure regex question you might
get more informed responses if you looked at one
of the Java forums.

Best
Erick

On Thu, Aug 14, 2008 at 12:28 PM, Hareesh <hareeshkumarps@hotmail.com>wrote:

>
> I have a small problem. I will describe you the problem first ..I am
> working
> on a search Engine now, in which the crawling is done using Heritrix and
> the
> crawled data is the input for my Logic. while trying to index the ARC files
> from Heritrix its not creating indexes in the desired format. The
> Expression
> which Iam using to create the segments is like this   ^(.*)$\\n+  when
> passing the filtered contents i;e after removing the Html tags.I created a
> pattern using the above said regex and when passing the filtered contents
> through the method to Match the pattern it returns 'false'. so Iam little
> bit confused regarding which will be the exact regular expression . pls
> help
> me with your suggestions.
>
> Thanks
> --
> View this message in context:
> http://www.nabble.com/Issue-while-creating-Regular-Expressions-tp18985052p18985052.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_107050_8163788.1218736531475--

From java-user-return-35509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 18:29:03 2008
Return-Path: <java-user-return-35509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69613 invoked from network); 14 Aug 2008 18:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 18:29:01 -0000
Received: (qmail 82402 invoked by uid 500); 14 Aug 2008 18:28:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82376 invoked by uid 500); 14 Aug 2008 18:28:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82365 invoked by uid 99); 14 Aug 2008 18:28:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 11:28:53 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 18:27:56 +0000
Received: by yx-out-2324.google.com with SMTP id 3so353572yxj.5
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 11:28:23 -0700 (PDT)
Received: by 10.140.161.11 with SMTP id j11mr925249rve.134.1218738491277;
        Thu, 14 Aug 2008 11:28:11 -0700 (PDT)
Received: by 10.141.142.8 with HTTP; Thu, 14 Aug 2008 11:28:11 -0700 (PDT)
Message-ID: <9ac0c6aa0808141128o405e2b33qeee8197835a348fa@mail.gmail.com>
Date: Thu, 14 Aug 2008 14:28:11 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Do doc-ids always increment by 1 if no deletion is done?
In-Reply-To: <18983180.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18983180.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This is true of Lucene today, with one exception: if an
add/updateDocument call hits an exception it's possible it consumed a
docID (which is immediately marked as deleted).  This will cause your
index to have deletions.

I don't think this behavior is guaranteed in future releases of Lucene.

Mike

Gunjan Juyal <higunjan@yahoo.com> wrote:
>
> Hi.
>  I am creating an index where there are no deletions, just additions. After
> the index creation is done I need to create another mapping of doc-ids to
> some data.
>  If there are only additions and no deletions then can we assume that the
> doc-ids will be in the same order in which the documents were added, with
> the doc-ids being incremented by 1 each time? If so then I don't need to
> query lucene again as I already know the initial max doc-id and the order in
> which I added the docs. More specifically:-
> - If I add 'N' documents to the index in some order, can I expect that the
> doc-ids will also be in the same order with each doc-id differing from the
> previous by 1?
> - If this is the case, then can we expect the future versions of lucene to
> behave in the same way or is it undefined?
> Thanks!
> --
> View this message in context: http://www.nabble.com/Do-doc-ids-always-increment-by-1-if-no-deletion-is-done--tp18983180p18983180.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 21:51:14 2008
Return-Path: <java-user-return-35510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95631 invoked from network); 14 Aug 2008 21:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 21:51:13 -0000
Received: (qmail 94267 invoked by uid 500); 14 Aug 2008 21:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94178 invoked by uid 500); 14 Aug 2008 21:51:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94157 invoked by uid 99); 14 Aug 2008 21:51:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 14:51:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.70] (HELO elasmtp-banded.atl.sa.earthlink.net) (209.86.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 21:50:03 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=smxHfR4jj9+eDY07Q/nq+dWUKBOaKDyI9Q1CQiZVZOmM+k44DVGHGSd6tyJBsFKW;
  h=Received:From:To:Subject:Date:Message-ID:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:Importance:X-MimeOLE:X-ELNK-Trace:X-Originating-IP;
Received: from [69.107.123.129] (helo=sys2a)
	by elasmtp-banded.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <bedouglas@earthlink.net>)
	id 1KTkhv-00059S-82; Thu, 14 Aug 2008 17:50:11 -0400
From: "bruce" <bedouglas@earthlink.net>
To: "'java-user@lucene.org'" <java-user@lucene.apache.org>,
	"'nutch-user@lucene.org'" <nutch-user@lucene.apache.org>
Subject: test
Date: Thu, 14 Aug 2008 14:50:09 -0700
Message-ID: <641401c8fe57$b9241a60$0301a8c0@tmesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1914
X-ELNK-Trace: 37ffaa9bc7b967c00cc1426638a40ef67e972de0d01da940aaf597ff80c94d3bb1b6f03fba80f9aa350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.107.123.129
X-Virus-Checked: Checked by ClamAV on apache.org

test

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 21:52:41 2008
Return-Path: <java-user-return-35511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96972 invoked from network); 14 Aug 2008 21:52:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 21:52:41 -0000
Received: (qmail 98033 invoked by uid 500); 14 Aug 2008 21:52:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97579 invoked by uid 500); 14 Aug 2008 21:52:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97558 invoked by uid 99); 14 Aug 2008 21:52:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 14:52:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.86.89.65] (HELO elasmtp-kukur.atl.sa.earthlink.net) (209.86.89.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 21:51:32 +0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=dk20050327; d=earthlink.net;
  b=DjhVyDFCmKylXvly9Qev5w9iHVwjZhqzqttu7fkBqelQC/rqu6KA8C6s/0fVeA//;
  h=Received:From:To:Subject:Date:Message-ID:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:Importance:X-MimeOLE:X-ELNK-Trace:X-Originating-IP;
Received: from [69.107.123.129] (helo=sys2a)
	by elasmtp-kukur.atl.sa.earthlink.net with esmtpa (Exim 4.67)
	(envelope-from <bedouglas@earthlink.net>)
	id 1KTkjg-0003O2-9M; Thu, 14 Aug 2008 17:52:00 -0400
From: "bruce" <bedouglas@earthlink.net>
To: "'java-user@lucene.org'" <java-user@lucene.apache.org>,
	"'nutch-user@lucene.org'" <nutch-user@lucene.apache.org>
Subject: lucene/nutch question...
Date: Thu, 14 Aug 2008 14:51:57 -0700
Message-ID: <641501c8fe57$fa425480$0301a8c0@tmesa.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook CWS, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1914
X-ELNK-Trace: 37ffaa9bc7b967c00cc1426638a40ef67e972de0d01da940256f6773bcd02c9823c75222ef54165d350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.107.123.129
X-Virus-Checked: Checked by ClamAV on apache.org

Hi.

Got a very basic lucene/nutch question.

Assume I have a page that has a form. Within the form are a number of
select/drop-down boxes/etc... In this case, each object would comprise a
variable which would form part of the query string as defined in the form
action. Is there a way for lucene/nutch to go through the process of
building up the actions based on the querystring vars, so that lucene/nutch
can actually search through each possible combination of urls....

Also, is nutch/lucene the right/correct app to use in this scenario? Is
there a better app to handle this kind of potential application/process.

Thanks

-bruce







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 22:08:31 2008
Return-Path: <java-user-return-35512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4902 invoked from network); 14 Aug 2008 22:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 22:08:31 -0000
Received: (qmail 10387 invoked by uid 500); 14 Aug 2008 22:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10349 invoked by uid 500); 14 Aug 2008 22:08:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10338 invoked by uid 99); 14 Aug 2008 22:08:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 15:08:23 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 22:07:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KTkz3-0002Kg-Rw
	for java-user@lucene.apache.org; Thu, 14 Aug 2008 15:07:53 -0700
Message-ID: <18990623.post@talk.nabble.com>
Date: Thu, 14 Aug 2008 15:07:53 -0700 (PDT)
From: AlexElba <ramalex1@yahoo.com>
To: java-user@lucene.apache.org
Subject: Lucene search for OR
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramalex1@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello I am trying to search for or(Oregon) even when it is not capitalized it
is not returning any results.

How to search for 'or' ?
-- 
View this message in context: http://www.nabble.com/Lucene-search-for-OR-tp18990623p18990623.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 22:17:04 2008
Return-Path: <java-user-return-35513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7878 invoked from network); 14 Aug 2008 22:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 22:17:04 -0000
Received: (qmail 18240 invoked by uid 500); 14 Aug 2008 22:16:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18208 invoked by uid 500); 14 Aug 2008 22:16:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18197 invoked by uid 99); 14 Aug 2008 22:16:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 15:16:56 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 22:15:59 +0000
Received: by gxk6 with SMTP id 6so2734659gxk.5
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 15:16:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=n/vhYPd4mvSdJokncYGF8MTTZ617Jn6Rqc9j63laTTs=;
        b=Xq0mlf1u8dCcbd9sG+QTKDbcdvnSdmHxxwtbFpCHPI7AMpt33YMF+1fp1WBMHmPr4B
         DgstlgzVViZld2H7+US5+5J7xeYZ/dLg8zAv6sx3mg1GCZoZmxfELLE0GYEeQ36BC6tG
         TOVt4PhzVCk79I3W0W4cBal4GKpRxDdQlVDs4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=tPv0koZ0F8Fue1/tYFqwVJQiFzYwMpNce2it8yi7Qz98McMZeLVIqWx+MYuuMFf7+I
         GI+17C2mT8dwnodI4I/g8RuGV8jiIZvyZ42jMApUBvET08domzYeDrmYjbyaJmZFIvLh
         DwqdpJfeI4p5KReocCPbZR4TsCRB/aioex4ZU=
Received: by 10.150.50.1 with SMTP id x1mr2588064ybx.39.1218752187485;
        Thu, 14 Aug 2008 15:16:27 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Thu, 14 Aug 2008 15:16:27 -0700 (PDT)
Message-ID: <efd1bd310808141516o7290fe44o892e5cffe34bd636@mail.gmail.com>
Date: Thu, 14 Aug 2008 15:16:27 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <359a92830808140817j1114861cw7c240b15bc149c28@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
	 <op.ufvb07uq2ic4zu@sj-desktop>
	 <359a92830808140644u7e55d48ek3c048f2b05fd5345@mail.gmail.com>
	 <op.ufvryaly2ic4zu@sj-desktop>
	 <359a92830808140817j1114861cw7c240b15bc149c28@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sergey,

Based on a recent discussion I posted:
http://www.nabble.com/Searching-Tokenized-x-Un_tokenized-td18882569.html
, you cannot use Un_Tokenized because you can't have any analyzer run
thorugh it.

My suggestion, use a tokenized filed and a custom made Analyzer.
Haven't figure out all the details for you, but I think it's possible.

Andre

On Thu, Aug 14, 2008 at 8:17 AM, Erick Erickson <erickerickson@gmail.com> wrote:
> Be aware that StandardAnalyzer lowercases all the input,
> both at index and query times. Field.Store.YES will store
> the original text without any transformations, so doc.get(<field>)
> will return the original text. However, no matter what the
> Field.Store value, the *indexed* tokens (using
> TOKENIZED as you Field.Index.TOKENIZED)
> are passed through the analyzer.
>
> For instance, indexing "MIXed CasE  TEXT" in a
> field called "myfield" with Field.Store.YES,
> Field.Index.TOKENIZED would index the
> following tokens (with StandardAnalyzer).
> mixed
> case
> text
>
> and searches (with StandardAnalyzer) would match
> any case in the query terms (e.g. MIXED would hit,
> as would mixed as would CaSE).
>
> However, doc.get("myfield") would return
> "MIXed CasE  TEXT"
>
> As Doron said, though, a few use cases would
> help us provide better answers.
>
> Best
> Erick
>
>
> On Thu, Aug 14, 2008 at 10:31 AM, Sergey Kabashnyuk <ksmmlist@gmail.com>wrote:
>
>> Thanks for you  reply Erick.
>>
>>
>>  About the only way to do this that I know of is to
>>> index the data three times, once without any case
>>> changing, once uppercased and once lowercased.
>>> You'll have to watch your analyzer, probably making
>>> up your own (easily done, see the synonym analyzer
>>> in Lucene in Action).
>>>
>>> Your example doesn't tell us anything, since the critical
>>> information is the *analyzer* you use, both at query and
>>> at index times. The analyzer is responsible for any
>>> transformations, like case folding, tokenizing, etc.
>>>
>>
>>
>> In example  I want to show what I  stored field as  Field.Index.NO_NORMS
>>
>> As I understand it means what field contains original string
>> despite what analyzer I chose(StandardAnalyzer by default).
>>
>> All querys I made myself without using Parsers.
>> For example new TermQuery(new Term("filed", "MaMa"));
>>
>>
>> I agree with you about possible implementation,
>> but it increase size of index at times.
>>
>> But are there other possibilities, such as using  custom query, possibly
>> similar to  RegexQuery,RegexTermEnum that would compare terms
>> at it's  own discretion?
>>
>>
>>
>>
>>
>>> But what is your use-case for needing both upper and
>>> lower case comparisons? I have a hard time coming
>>> up with a reason to do both that wouldn't be satisfied
>>> by just a caseless search.
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Aug 14, 2008 at 4:47 AM, Sergey Kabashnyuk <ksmmlist@gmail.com
>>> >wrote:
>>>
>>>  Hello.
>>>>
>>>> I have the similar question.
>>>>
>>>> I need to implement
>>>> 1. Case sensitive search.
>>>> 2. Lower case search for concrete field.
>>>> 3. Upper case search for concrete filed.
>>>>
>>>> For now I use
>>>> new Field("PROPERTIES",
>>>>                  content,
>>>>                  Field.Store.NO,
>>>>                  Field.Index.NO_NORMS,
>>>>                  Field.TermVector.NO)
>>>> for original string and make case sensitive search.
>>>>
>>>> But does anyone have an idea to how implement second and third type of
>>>> search?
>>>>
>>>> Thanks
>>>>
>>>>
>>>>
>>>>  Hi All,
>>>>
>>>>> Once I index a bunch of documents with a StandardAnalyzer (and if the
>>>>> effort
>>>>> I need to put in to reindex the documents is not worth the effort), is
>>>>> there
>>>>> a way to search on the index without case sensitivity.
>>>>> I do not use any sophisticated Analyzer that makes use of
>>>>> LowerCaseTokenizer.
>>>>> Please let me know if there is a solution to circumvent this case
>>>>> sensitivity problem.
>>>>> Many thanks
>>>>> Dino
>>>>>
>>>>>
>>>>>  --
>>>> Sergey Kabashnyuk
>>>> eXo Platform SAS
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>  --
>> Sergey Kabashnyuk
>> eXo Platform SAS
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 14 23:09:56 2008
Return-Path: <java-user-return-35514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42394 invoked from network); 14 Aug 2008 23:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2008 23:09:56 -0000
Received: (qmail 57773 invoked by uid 500); 14 Aug 2008 23:09:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57535 invoked by uid 500); 14 Aug 2008 23:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57524 invoked by uid 99); 14 Aug 2008 23:09:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 16:09:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 23:08:52 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 719D84ED88E
	for <java-user@lucene.apache.org>; Fri, 15 Aug 2008 09:08:52 +1000 (EST)
Message-ID: <48A4BB29.2090405@nuix.com>
Date: Fri, 15 Aug 2008 09:09:29 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene search for OR
References: <18990623.post@talk.nabble.com>
In-Reply-To: <18990623.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

AlexElba wrote:
> Hello I am trying to search for or(Oregon) even when it is not capitalized it
> is not returning any results.
> 
> How to search for 'or' ?

It sounds like you might have indexed with English stop words, as "or" 
is certainly in that list.

Trivial way to check is to search for "the".  If it gives no results 
then you won't find "or" either, without reindexing with stop words off.

Daniel


-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 15 01:35:41 2008
Return-Path: <java-user-return-35515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54359 invoked from network); 15 Aug 2008 01:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2008 01:35:41 -0000
Received: (qmail 38803 invoked by uid 500); 15 Aug 2008 01:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38754 invoked by uid 500); 15 Aug 2008 01:35:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38742 invoked by uid 99); 15 Aug 2008 01:35:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 18:35:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Aug 2008 01:34:36 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7F1YtOU009815
	for <java-user@lucene.apache.org>; Fri, 15 Aug 2008 04:34:56 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m-2avrj4; 15 Aug 2008 04:34:00 +0300
Message-ID: <48A4DD43.7080201@teamware.com>
Date: Fri, 15 Aug 2008 11:34:59 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Payloads and tokenizers
References: <48A3A2F8.50802@teamware.com> <e05f0fd10808140317s48cf8943s740b7ce6debdc86c@mail.gmail.com>
In-Reply-To: <e05f0fd10808140317s48cf8943s740b7ce6debdc86c@mail.gmail.com>
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 15 Aug 2008 04:34:56 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your comments Doron.  I found the earlier discussions on the dev list 
(21/12/06), where this issue is discussed - my use case is similar to Nadav Har'El.

Implementing payloads via Tokens explicitly prevents the use of payloads for 
untokenized fields, as they only support field.stringValue().  There seems no 
way to override this.

My field is currently stored, so the tokenStream approach you suggested, 
(Lucene-580) will not work as it's theoretically only for non-stored fields.  In 
practice, I expect I can create a stored/indexed Field with a dummy string 
value, then use setValue(TokenStream).  At least I can have stored fields with 
Payloads using the analyzer/tokenStream route.  Is this illegal?

What if the Fieldable had a tokenValue(), in addition to the existing 
stream/string/binary/reader values, which could be used for untokenized fields 
and used in invertField()?

I'd rather stick with core Lucene than start making proprietary changes, but it 
seems I can't quite get to where I want to be without some quite cludgy code for 
a very simple use case :(

Antony



Doron Cohen wrote:
> IIRC first versions of patches that added payloads support had this notion
> of payload by field rather than by token, but later it was modified to be by
> token only.
> 
> I have seen two code patterns to add payloads to tokens.
> 
> The first one created the field text with a reserved separator/delimiter
> which was later identified by the analyzer who separated the payload part
> from the token part, created the token and set the payload.
> 
> The other pattern was to create a field with a TokenStream. Can be done only
> for non storable fields. Here you can create the token in advance, and you
> have a SingleTokenStream (I think this is how it is called) to wrap it in
> case it is a single token. Since the token is created in advance, there's no
> analysis going on, and you can set the payload of that token on the spot.I
> prefer this pattern - more efficient and elegant.
> 
> Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 15 03:08:15 2008
Return-Path: <java-user-return-35516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17298 invoked from network); 15 Aug 2008 03:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2008 03:08:15 -0000
Received: (qmail 96800 invoked by uid 500); 15 Aug 2008 03:08:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96769 invoked by uid 500); 15 Aug 2008 03:08:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96758 invoked by uid 99); 15 Aug 2008 03:08:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Aug 2008 20:08:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Aug 2008 03:07:08 +0000
Received: by rv-out-0506.google.com with SMTP id f6so950509rvb.5
        for <java-user@lucene.apache.org>; Thu, 14 Aug 2008 20:07:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=oT6hnLdkuHTVZdu22eMrO7SJPvn3r8qt1L7wiruGKIo=;
        b=yBsI5I2JQJ+7XWQ5F64cqoqxws4oVn2L0cnkiPf4x47aF7wqve2l+fcqbtCe1Qvt5s
         1YbPvPnmPASWH0LmZHa93vK+f92g+LKuYLOp44LPHN0AQUWsIQ2H7PVtDssvmv02gEU/
         Bwcc67Xui4rzIj17OhcCy1J8Zb7/4A2ZjRC0U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=ar+QksSmaVhBsY9pBKyQONPjR7ki70jZNw0OFu+K+9jf1qd3X6vbVZA8w2RQIPs92i
         sPmCq7WNjpAEe+i/PHf78iOiXPeTU+hFr0WWyG7+GeB2+Bju9UVEudq+UmAbjMsaYkZb
         tiyqlsEW8wi7fdbNKjmFXZqwnK/pREYOEDxqc=
Received: by 10.141.41.12 with SMTP id t12mr1181432rvj.282.1218769646803;
        Thu, 14 Aug 2008 20:07:26 -0700 (PDT)
Received: by 10.140.172.6 with HTTP; Thu, 14 Aug 2008 20:07:26 -0700 (PDT)
Message-ID: <c68e39170808142007x51a7e7efjf7ebc46f28dbda41@mail.gmail.com>
Date: Thu, 14 Aug 2008 23:07:26 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: IndexOutOfBoundsException
In-Reply-To: <fc5f4dd80808141918o299f9743r74911511d494582@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <fc5f4dd80808141147y3a1ac612tcabc1d6a8fc490c3@mail.gmail.com>
	 <c68e39170808141323j39bb1436wf18e782762a98f6b@mail.gmail.com>
	 <fc5f4dd80808141918o299f9743r74911511d494582@mail.gmail.com>
X-Google-Sender-Auth: 01a0a065985ab7e9
X-Virus-Checked: Checked by ClamAV on apache.org

(switching to java-user)
OK, that's great that it's so reproducable.
To rule out a JVM bug, it would be great if you could try out Sun's
1.6.0_03 to see if it still happens.

-Yonik

On Thu, Aug 14, 2008 at 10:18 PM, Ian Connor <ian.connor@gmail.com> wrote:
> I seem to be able to reproduce this very easily and the data is
> medline (so I am sure I can share it if needed with a quick email to
> check).
>
> - I am using fedora:
> %uname -a
> Linux ghetto5.projectlounge.com 2.6.23.1-42.fc8 #1 SMP Tue Oct 30
> 13:18:33 EDT 2007 x86_64 x86_64 x86_64 GNU/Linux
> %java -version
> java version "1.7.0"
> IcedTea Runtime Environment (build 1.7.0-b21)
> IcedTea 64-Bit Server VM (build 1.7.0-b21, mixed mode)
> - single core (will use shards but each machine just as one HDD so
> didn't see how cores would help but I am new at this)
> - next run I will keep the output to check for earlier errors
> - very and I can share code + data if that will help
>
> On Thu, Aug 14, 2008 at 4:23 PM, Yonik Seeley <yonik@apache.org> wrote:
>> Yikes... not good.  This shouldn't be due to anything you did wrong
>> Ian... it looks like a lucene bug.
>>
>> Some questions:
>> - what platform are you running on, and what JVM?
>> - are you using multicore? (I fixed some index locking bugs recently)
>> - are there any exceptions in the log before this?
>> - how reproducible is this?
>>
>> -Yonik
>>
>> On Thu, Aug 14, 2008 at 2:47 PM, Ian Connor <ian.connor@gmail.com> wrote:
>>> Hi,
>>>
>>> I have rebuilt my index a few times (it should get up to about 4
>>> Million but around 1 Million it starts to fall apart).
>>>
>>> Exception in thread "Lucene Merge Thread #0"
>>> org.apache.lucene.index.MergePolicy$MergeException:
>>> java.lang.IndexOutOfBoundsException: Index: 105, Size: 33
>>>        at org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:323)
>>>        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:300)
>>> Caused by: java.lang.IndexOutOfBoundsException: Index: 105, Size: 33
>>>        at java.util.ArrayList.rangeCheck(ArrayList.java:572)
>>>        at java.util.ArrayList.get(ArrayList.java:350)
>>>        at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:260)
>>>        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:188)
>>>        at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:670)
>>>        at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:349)
>>>        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:134)
>>>        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3998)
>>>        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3650)
>>>        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:214)
>>>        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:269)
>>>
>>>
>>> When this happens, the disk usage goes right up and the indexing
>>> really starts to slow down. I am using a Solr build from about a week
>>> ago - so my Lucene is at 2.4 according to the war files.
>>>
>>> Has anyone seen this error before? Is it possible to tell which Array
>>> is too large? Would it be an Array I am sending in or another internal
>>> one?
>>>
>>> Regards,
>>> Ian Connor
>>>
>>
>
>
>
> --
> Regards,
>
> Ian Connor
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 15 07:52:22 2008
Return-Path: <java-user-return-35517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80225 invoked from network); 15 Aug 2008 07:52:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2008 07:52:22 -0000
Received: (qmail 21678 invoked by uid 500); 15 Aug 2008 07:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21649 invoked by uid 500); 15 Aug 2008 07:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21638 invoked by uid 99); 15 Aug 2008 07:52:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Aug 2008 00:52:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Aug 2008 07:51:14 +0000
Received: by fg-out-1718.google.com with SMTP id l27so739188fgb.27
        for <java-user@lucene.apache.org>; Fri, 15 Aug 2008 00:51:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:references:content-transfer-encoding
         :message-id:in-reply-to:user-agent;
        bh=kg4pdwMlW32CMP0+8MPdeu9CKl4sv8xQ6S4CqPQwhx0=;
        b=yCRXKyp9D8yFE2P78gc6DdkScHZzChimE36ifR7ChPPtdixl/GE6evrKb6wtDeKYO8
         3iJObpKy9o8Twym2T7TdFPImAzIlWYUYnO+dfN8s7A69VwT3I7ExRCycXPCmo/QbbIYh
         JAlTR2mZ164V55bLK3TwR/zPu3hCfgqrg4m10=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version:references
         :content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=Kx39Tb88bDH8n5Q9wbdXW6AdTDqPGJInaT3H+TiRATc/Wu1VLibcrh7tFGXqLbwmW1
         k5/4LdrweGIzfHKWjxz5fxEG+z0gUVz//eKtT7YhBsOxuW3Hrd8mDFOVaywexh9Mf/UW
         NPPbSwzsXkz0378NuL3Ox0yxgdb+2VVatGgAE=
Received: by 10.86.72.3 with SMTP id u3mr1642955fga.62.1218786685185;
        Fri, 15 Aug 2008 00:51:25 -0700 (PDT)
Received: from sj-desktop ( [92.112.9.64])
        by mx.google.com with ESMTPS id l19sm2073857fgb.7.2008.08.15.00.51.23
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 15 Aug 2008 00:51:24 -0700 (PDT)
Date: Fri, 15 Aug 2008 10:51:21 +0300
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
 <op.ufvb07uq2ic4zu@sj-desktop>
 <359a92830808140644u7e55d48ek3c048f2b05fd5345@mail.gmail.com>
 <op.ufvryaly2ic4zu@sj-desktop>
 <359a92830808140817j1114861cw7c240b15bc149c28@mail.gmail.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.ufw33vnw2ic4zu@sj-desktop>
In-Reply-To: <359a92830808140817j1114861cw7c240b15bc149c28@mail.gmail.com>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

Here's my use case           content of the field
Doc1 -
         Field - text  -   Field Without Norms

Doc2 -
         Field - text  -   field without norms

Doc3 -
         Field - text  -   FIELD WITHOUT NORMS


Query                                     expected result
1. new Term(text,Field Without Norms)       doc1
2. new Term(text,field without norms)       doc2
3. new Term(text,FIELD WITHOUT NORMS)       doc3
lowercase(text,field without norms)   doc1, doc2, doc3
uppercase(text,FIELD WITHOUT NORMS)   doc1, doc2, doc3

I stor text field like :
new Field(text, Field.Store.NO, Field.Index.NO_NORMS,Field.TermVector.NO)
using StandardAnalyzer and query  1-3 works perfectly as I need. The  
question is
how create query 4-5?

Thanks
Sergey Kabashnyuk
eXo Platform SAS


> Be aware that StandardAnalyzer lowercases all the input,
> both at index and query times. Field.Store.YES will store
> the original text without any transformations, so doc.get(<field>)
> will return the original text. However, no matter what the
> Field.Store value, the *indexed* tokens (using
> TOKENIZED as you Field.Index.TOKENIZED)
> are passed through the analyzer.
>
> For instance, indexing "MIXed CasE  TEXT" in a
> field called "myfield" with Field.Store.YES,
> Field.Index.TOKENIZED would index the
> following tokens (with StandardAnalyzer).
> mixed
> case
> text
>
> and searches (with StandardAnalyzer) would match
> any case in the query terms (e.g. MIXED would hit,
> as would mixed as would CaSE).
>
> However, doc.get("myfield") would return
> "MIXed CasE  TEXT"
>
> As Doron said, though, a few use cases would
> help us provide better answers.
>
> Best
> Erick
>
>
> On Thu, Aug 14, 2008 at 10:31 AM, Sergey Kabashnyuk  
> <ksmmlist@gmail.com>wrote:
>
>> Thanks for you  reply Erick.
>>
>>
>>  About the only way to do this that I know of is to
>>> index the data three times, once without any case
>>> changing, once uppercased and once lowercased.
>>> You'll have to watch your analyzer, probably making
>>> up your own (easily done, see the synonym analyzer
>>> in Lucene in Action).
>>>
>>> Your example doesn't tell us anything, since the critical
>>> information is the *analyzer* you use, both at query and
>>> at index times. The analyzer is responsible for any
>>> transformations, like case folding, tokenizing, etc.
>>>
>>
>>
>> In example  I want to show what I  stored field as  Field.Index.NO_NORMS
>>
>> As I understand it means what field contains original string
>> despite what analyzer I chose(StandardAnalyzer by default).
>>
>> All querys I made myself without using Parsers.
>> For example new TermQuery(new Term("filed", "MaMa"));
>>
>>
>> I agree with you about possible implementation,
>> but it increase size of index at times.
>>
>> But are there other possibilities, such as using  custom query, possibly
>> similar to  RegexQuery,RegexTermEnum that would compare terms
>> at it's  own discretion?
>>
>>
>>
>>
>>
>>> But what is your use-case for needing both upper and
>>> lower case comparisons? I have a hard time coming
>>> up with a reason to do both that wouldn't be satisfied
>>> by just a caseless search.
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Aug 14, 2008 at 4:47 AM, Sergey Kabashnyuk <ksmmlist@gmail.com
>>> >wrote:
>>>
>>>  Hello.
>>>>
>>>> I have the similar question.
>>>>
>>>> I need to implement
>>>> 1. Case sensitive search.
>>>> 2. Lower case search for concrete field.
>>>> 3. Upper case search for concrete filed.
>>>>
>>>> For now I use
>>>> new Field("PROPERTIES",
>>>>                  content,
>>>>                  Field.Store.NO,
>>>>                  Field.Index.NO_NORMS,
>>>>                  Field.TermVector.NO)
>>>> for original string and make case sensitive search.
>>>>
>>>> But does anyone have an idea to how implement second and third type of
>>>> search?
>>>>
>>>> Thanks
>>>>
>>>>
>>>>
>>>>  Hi All,
>>>>
>>>>> Once I index a bunch of documents with a StandardAnalyzer (and if the
>>>>> effort
>>>>> I need to put in to reindex the documents is not worth the effort),  
>>>>> is
>>>>> there
>>>>> a way to search on the index without case sensitivity.
>>>>> I do not use any sophisticated Analyzer that makes use of
>>>>> LowerCaseTokenizer.
>>>>> Please let me know if there is a solution to circumvent this case
>>>>> sensitivity problem.
>>>>> Many thanks
>>>>> Dino
>>>>>
>>>>>
>>>>>  --
>>>> Sergey Kabashnyuk
>>>> eXo Platform SAS
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>  --
>> Sergey Kabashnyuk
>> eXo Platform SAS
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 15 10:31:49 2008
Return-Path: <java-user-return-35518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45800 invoked from network); 15 Aug 2008 10:31:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2008 10:31:48 -0000
Received: (qmail 29597 invoked by uid 500); 15 Aug 2008 10:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29543 invoked by uid 500); 15 Aug 2008 10:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29531 invoked by uid 99); 15 Aug 2008 10:31:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Aug 2008 03:31:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Aug 2008 10:30:39 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1161681rvb.5
        for <java-user@lucene.apache.org>; Fri, 15 Aug 2008 03:31:06 -0700 (PDT)
Received: by 10.141.23.7 with SMTP id a7mr1369112rvj.58.1218796265690;
        Fri, 15 Aug 2008 03:31:05 -0700 (PDT)
Received: by 10.141.142.8 with HTTP; Fri, 15 Aug 2008 03:31:05 -0700 (PDT)
Message-ID: <9ac0c6aa0808150331q36136f4n5e3f6ae5fbf5cc59@mail.gmail.com>
Date: Fri, 15 Aug 2008 06:31:05 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: IndexOutOfBoundsException
In-Reply-To: <c68e39170808142007x51a7e7efjf7ebc46f28dbda41@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <fc5f4dd80808141147y3a1ac612tcabc1d6a8fc490c3@mail.gmail.com>
	 <c68e39170808141323j39bb1436wf18e782762a98f6b@mail.gmail.com>
	 <fc5f4dd80808141918o299f9743r74911511d494582@mail.gmail.com>
	 <c68e39170808142007x51a7e7efjf7ebc46f28dbda41@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It looks like your stored fields file (_X.fdt) is corrupt.

Are you using multiple threads to add docs?

Can you try switching to SerialMergeScheduler to verify it's reproducible?

When you hit this exception, can you stop Solr and then run Lucene's
CheckIndex tool (org.apache.lucene.index.CheckIndex) to verify the
index is corrupt and see which segment it is?  Then post back the
exception and "ls -l" of your index directory?

If you could post the client-side code you're using to build & submit
docs to Solr, and if I can get access to the Medline content, and I
can the repro the bug, then I'll track it down...

Mike

Yonik Seeley <yonik@apache.org> wrote:
> (switching to java-user)
> OK, that's great that it's so reproducable.
> To rule out a JVM bug, it would be great if you could try out Sun's
> 1.6.0_03 to see if it still happens.
>
> -Yonik
>
> On Thu, Aug 14, 2008 at 10:18 PM, Ian Connor <ian.connor@gmail.com> wrote:
>> I seem to be able to reproduce this very easily and the data is
>> medline (so I am sure I can share it if needed with a quick email to
>> check).
>>
>> - I am using fedora:
>> %uname -a
>> Linux ghetto5.projectlounge.com 2.6.23.1-42.fc8 #1 SMP Tue Oct 30
>> 13:18:33 EDT 2007 x86_64 x86_64 x86_64 GNU/Linux
>> %java -version
>> java version "1.7.0"
>> IcedTea Runtime Environment (build 1.7.0-b21)
>> IcedTea 64-Bit Server VM (build 1.7.0-b21, mixed mode)
>> - single core (will use shards but each machine just as one HDD so
>> didn't see how cores would help but I am new at this)
>> - next run I will keep the output to check for earlier errors
>> - very and I can share code + data if that will help
>>
>> On Thu, Aug 14, 2008 at 4:23 PM, Yonik Seeley <yonik@apache.org> wrote:
>>> Yikes... not good.  This shouldn't be due to anything you did wrong
>>> Ian... it looks like a lucene bug.
>>>
>>> Some questions:
>>> - what platform are you running on, and what JVM?
>>> - are you using multicore? (I fixed some index locking bugs recently)
>>> - are there any exceptions in the log before this?
>>> - how reproducible is this?
>>>
>>> -Yonik
>>>
>>> On Thu, Aug 14, 2008 at 2:47 PM, Ian Connor <ian.connor@gmail.com> wrote:
>>>> Hi,
>>>>
>>>> I have rebuilt my index a few times (it should get up to about 4
>>>> Million but around 1 Million it starts to fall apart).
>>>>
>>>> Exception in thread "Lucene Merge Thread #0"
>>>> org.apache.lucene.index.MergePolicy$MergeException:
>>>> java.lang.IndexOutOfBoundsException: Index: 105, Size: 33
>>>>        at org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:323)
>>>>        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:300)
>>>> Caused by: java.lang.IndexOutOfBoundsException: Index: 105, Size: 33
>>>>        at java.util.ArrayList.rangeCheck(ArrayList.java:572)
>>>>        at java.util.ArrayList.get(ArrayList.java:350)
>>>>        at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:260)
>>>>        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:188)
>>>>        at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:670)
>>>>        at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:349)
>>>>        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:134)
>>>>        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:3998)
>>>>        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:3650)
>>>>        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:214)
>>>>        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:269)
>>>>
>>>>
>>>> When this happens, the disk usage goes right up and the indexing
>>>> really starts to slow down. I am using a Solr build from about a week
>>>> ago - so my Lucene is at 2.4 according to the war files.
>>>>
>>>> Has anyone seen this error before? Is it possible to tell which Array
>>>> is too large? Would it be an Array I am sending in or another internal
>>>> one?
>>>>
>>>> Regards,
>>>> Ian Connor
>>>>
>>>
>>
>>
>>
>> --
>> Regards,
>>
>> Ian Connor
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 15 16:18:00 2008
Return-Path: <java-user-return-35519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28595 invoked from network); 15 Aug 2008 16:18:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2008 16:18:00 -0000
Received: (qmail 55857 invoked by uid 500); 15 Aug 2008 16:17:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55827 invoked by uid 500); 15 Aug 2008 16:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55816 invoked by uid 99); 15 Aug 2008 16:17:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Aug 2008 09:17:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shore.cloud@gmail.com designates 72.14.204.233 as permitted sender)
Received: from [72.14.204.233] (HELO qb-out-0506.google.com) (72.14.204.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Aug 2008 16:16:52 +0000
Received: by qb-out-0506.google.com with SMTP id e6so1228730qbe.27
        for <java-user@lucene.apache.org>; Fri, 15 Aug 2008 09:17:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Q/TvvW1k8sAf1tgLHDQv+NAiWHYh1MqSqKUgpgKhvtc=;
        b=iPVZYP5MSGe81n5Nyguk4mwVZ7Z5kyiNfGWVz4GtKiZR2S4p5lmEG8bDAihDWRxfs1
         Bg1MlqIV6DWMqGiWbTotvde40BoLUaTmCRUx6hE2MYbbe9SvhTQ+c/STGm6bFhhEBCcH
         yXD88GFQBZgUxEx9ooEulrWQuxbFTe7TBQp1g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pZ+h4le8wgszweaQIvKHp1cgXjRos79sda8X+mpXJ1yTrCCIBY3WPNZY4jlL8AQnWZ
         HHW7D6jg8Kb9Y0VmreIE7Wa+C98E9y7oFmmaMNSq4lxmPx/bSUgkfl0We6Eew4mD76Mx
         9heYikdCituMShAH6pFWb0Aq/5kCiFF6duKPE=
Received: by 10.142.48.14 with SMTP id v14mr1041581wfv.14.1218817029539;
        Fri, 15 Aug 2008 09:17:09 -0700 (PDT)
Received: by 10.142.70.21 with HTTP; Fri, 15 Aug 2008 09:17:09 -0700 (PDT)
Message-ID: <ae7ef6650808150917tcf7349fy7f440153ef92c31b@mail.gmail.com>
Date: Sat, 16 Aug 2008 00:17:09 +0800
From: "Mr Shore" <shore.cloud@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for special condition.
In-Reply-To: <a823853a0808132143m1ec4bb26pfceba7b992500fe7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69111_815327.1218817029523"
References: <731882.70944.qm@web50309.mail.re2.yahoo.com>
	 <a823853a0808122146q740b29dbgc3811be0b127d130@mail.gmail.com>
	 <ae7ef6650808132043n54edaa2bj3bce516a494f0a2f@mail.gmail.com>
	 <a823853a0808132143m1ec4bb26pfceba7b992500fe7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_69111_815327.1218817029523
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

dGhhbmtzLEphbmcKYnV0IEkgZGlkbid0IGZpbmQgdGhlIG1ldGhvZCBpc1Rva2VuQ2hhcgptYXli
ZSBpdCdzIGluIGx1Y2VuZSxyaWdodD8KYnV0IEknbSB1c2luZyBudXRjaCB0aGlzIHRpbWUuCnRo
YW5rIHUgYWxsIHRoZSBzYW1lOikKCjIwMDgvOC8xNCDA5b/rvK4gPG5lZWQ0c3BkQGdtYWlsLmNv
bT4KCj4gSGkuIEkgd2FzIHZlcnkgaGFwcHkgLHlvdSBhcmUgbG92ZSBLb3JlYW4gbGFuZ3VhZ2Ug
YSBsb3QgOikKPiBTbyBkbyB5b3Ugd2FudCBzZWFyY2ggZm9yIHNwZWNpYWwgY2hhcmFjdGVycz8K
Pgo+IElmIHlvdSB3YW50IGluY2x1ZGUgc3BlY2lhbCBjaGFyYWN0ZXJzIHdoZW4gaW5kZXhpbmcs
IHlvdSBjYW4gb3ZlcnJpZGUKPiBtZXRob2QgaW4gY2xhc3MKPiBUb2tlbml6ZXIuIE1ldGhvZCdz
IG5hbWUgaXMgaXNUb2tlbkNoYXIoY2hhciBjKS4KPgo+IHByb3RlY3RlZCBib29sZWFuIGlzVG9r
ZW5DaGFyKGNoYXIgYykgewo+ICAgICAgICByZXR1cm4gQ2hhcmFjdGVyLmlzTGV0dGVyKGMpOwo+
IH0KPgo+IEFzIHlvdSBzZWUsIHRoYXQgbWV0aG9kIGlzIHJldHVybiB0cnVlIHdoZW4gdGhlIGNo
YXJhY3RlciBjIGlzIGEKPiBjaGFyYWN0ZXJeXgo+Cj4gSWYgeW91IGZpeCB0aGF0IG1ldGhvZCAi
cmV0dXJuIENoYXJhY3Rlci5pc0xldHRlcihjKSAgfHwgIGM9PScuJzsgIgo+IHRoZW4sIHlvdSB3
aWxsIGdldCB0aGUgcmVzdWx0IHRva2VuIHRoYXQgaGFzIHNwZWNpYWwgY2hhcmFjdGVycyBsaWtl
IC4KPgo+IHRoYW5rcy4gOikKPgo+IEphbmcuCj4KPiAyMDA4LzgvMTQsIE1yIFNob3JlIDxzaG9y
ZS5jbG91ZEBnbWFpbC5jb20+Ogo+ID4KPiA+IGNhbiBudXRjaCBvciBsdWNlbmUgc3VwcG9ydCBz
ZWFyY2ggZm9yIHNwZWNpYWwgY2hhcmFjdGVycyBsaWtlIC4/Cj4gPiB3aGVuIGkgc2VhcmNoICIu
bmV0IiBtYW55IHJlc3VsdCBjb21lIGZvciAibmV0Igo+ID4gaSB3YW50IHRvIGV4Y2x1ZGUgdGhl
bQo+ID4gcHM6aSBsb3ZlIGtvcmVhbiBsYW5ndWFnZSBhIGxvdAo+ID4KPiA+IDIwMDgvOC8xMyDA
5b/rvK4gPG5lZWQ0c3BkQGdtYWlsLmNvbT4KPiA+Cj4gPiA+IGhpLiB0aGFuayB5b3UgZm9yIHlv
dXIgcmVzcG9uc2UuCj4gPiA+Cj4gPiA+IEkgd2FzIGZvdW5kIHRoZSB3YXkgd2l0aCB5b3VyIGhl
bHAuCj4gPiA+Cj4gPiA+IFRoZXJlIGFyZSBjbGFzcyB0aGF0IG5hbWUgaXMgQ29uc3RhbnRTY29y
ZVJhbmdlUXVlcnkgYW5kIE51bWJlclRvb2xzLgo+ID4gPgo+ID4gPiBSZWZlcmVuY2Ugc2l0ZSBp
cyBoZXJlLgo+ID4gPgo+ID4gPgo+ID4KPiBodHRwOi8vbWFya21haWwub3JnL21lc3NhZ2UvZGNp
cm1pZm9hdDZ1cWY3eSNxdWVyeTpvcmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC5OdW1iZXJUb29s
cytwYWdlOjErbWlkOnRsZDN1ZWtheWxtdTJjd3Qrc3RhdGU6cmVzdWx0cwo+ID4gPgo+ID4gPgo+
ID4gPiBUaGFua3MgdmVyeSBtdWNoLiA6KQo+ID4gPgo+ID4gPgo+ID4gPgo+ID4gPiAyMDA4Lzgv
MTMsIE90aXMgR29zcG9kbmV0aWMgPG90aXNfZ29zcG9kbmV0aWNAeWFob28uY29tPjoKPiA+ID4g
Pgo+ID4gPiA+IEhpLAo+ID4gPiA+Cj4gPiA+ID4gTHVjZW5lIGRvZXNuJ3QgaGF2ZSB0aGUgZ3Jl
YXRlciB0aGFuIG9wZXJhdG9yLiAgUGVyaGFwcyB5b3UgY2FuIHVzZQo+ID4gcmFuZ2UKPiA+ID4g
PiBxdWVyaWVzIHRvIGFjY29tcGxpc2ggdGhlIHNhbWUgdGhpbmcuCj4gPiA+ID4KPiA+ID4gPgo+
ID4gPiA+Cj4gPiA+Cj4gPgo+IGh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9qYXZhLzJfM18yL3F1
ZXJ5cGFyc2Vyc3ludGF4Lmh0bWwjUmFuZ2UlMjBTZWFyY2hlcwo+ID4gPiA+Cj4gPiA+ID4gT3Rp
cwo+ID4gPiA+IC0tCj4gPiA+ID4gU2VtYXRleHQgLS0gaHR0cDovL3NlbWF0ZXh0LmNvbS8gLS0g
THVjZW5lIC0gU29sciAtIE51dGNoCj4gPiA+ID4KPiA+ID4gPgo+ID4gPiA+Cj4gPiA+ID4gLS0t
LS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tCj4gPiA+ID4gPiBGcm9tOiDA5b/rvK4gPG5lZWQ0c3Bk
QGdtYWlsLmNvbT4KPiA+ID4gPiA+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiA+
ID4gPiA+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMiwgMjAwOCA2OjAxOjAwIEFNCj4gPiA+ID4g
PiBTdWJqZWN0OiBzZWFyY2ggZm9yIHNwZWNpYWwgY29uZGl0aW9uLgo+ID4gPiA+ID4KPiA+ID4g
PiA+IGhpLgo+ID4gPiA+ID4KPiA+ID4gPiA+IEkgYW0gc2VhcmNoaW5nIGZvciBsdWNlbmUgYXBp
IG9yIGZ1bmN0aW9uIGxpa2UgcXVlcnkgIkZJRUxEID4gMTAwMCIKPiA+ID4gPiA+Cj4gPiA+ID4g
PiBGb3IgZXhhbXBsZSwgYSB1c2VyIHdhbnRzIHRvIHNlYXJjaCBhIHByb2R1Y3Qgd2hpY2ggcHJp
Y2UgaXMgYmlnZ2VyCj4gPiA+IHRoZW4KPiA+ID4gPiA+IHVzZXIncyBpbnB1dC4KPiA+ID4gPiA+
IElmIHVzZXIncyBpbnB1dCBpcyAxMDAwMCB0aGVuIHJlc3VsdCBhcmUgdGhlIHByb2R1Y3RzIGlu
IGluZGV4IGp1c3QKPiA+ID4gbGlrZQo+ID4gPiA+ID4gIlBSSUNFID4gMTAwMDAiCj4gPiA+ID4g
Pgo+ID4gPiA+ID4gSXMgdGhlcmUgYW55IHdheSB0byBzZWFyY2ggbGlrZSB0aGF0Pwo+ID4gPiA+
ID4KPiA+ID4gPiA+IHRoYW5rcy4KPiA+ID4gPiA+IEphbmcuCj4gPiA+ID4gPiAtLQo+ID4gPiA+
ID4gREVWv+u9xAo+ID4gPiA+ID4gaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5jb20KPiA+ID4g
Pgo+ID4gPiA+Cj4gPiA+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+ID4gRm9y
IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNo
ZS5vcmcKPiA+ID4gPgo+ID4gPiA+Cj4gPiA+Cj4gPiA+Cj4gPiA+IC0tCj4gPiA+IERFVr/rvcQK
PiA+ID4gaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5jb20KPiA+ID4KPiA+Cj4KPgo+Cj4gLS0K
PiBERVa/673ECj4gaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5jb20KPgo=
------=_Part_69111_815327.1218817029523--

From java-user-return-35520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 07:10:38 2008
Return-Path: <java-user-return-35520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61795 invoked from network); 16 Aug 2008 07:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 07:10:38 -0000
Received: (qmail 78333 invoked by uid 500); 16 Aug 2008 07:10:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78291 invoked by uid 500); 16 Aug 2008 07:10:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78280 invoked by uid 99); 16 Aug 2008 07:10:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 00:10:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 07:09:33 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1743553rvb.5
        for <java-user@lucene.apache.org>; Sat, 16 Aug 2008 00:10:00 -0700 (PDT)
Received: by 10.141.62.15 with SMTP id p15mr2002179rvk.144.1218870599915;
        Sat, 16 Aug 2008 00:09:59 -0700 (PDT)
Received: by 10.141.83.4 with HTTP; Sat, 16 Aug 2008 00:09:59 -0700 (PDT)
Message-ID: <1f8734680808160009p3cf159ob012037f35c1be89@mail.gmail.com>
Date: Sat, 16 Aug 2008 09:09:59 +0200
From: "Michael Zehrer" <zehrer@zepan.org>
Sender: michael@zepan.net
To: java-user@lucene.apache.org
Subject: Re: Efficient delete
In-Reply-To: <36F19444-085E-4001-9C6A-D8C06302B062@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1f8734680808070546q6d36cbe8m6687b70f7782d6df@mail.gmail.com>
	 <8c4e68610808080223p343f390i1fc3d2a5e42b6a7e@mail.gmail.com>
	 <36F19444-085E-4001-9C6A-D8C06302B062@mikemccandless.com>
X-Google-Sender-Auth: cc718da62d64e065
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

what is the difference if I would use IndexWriter?

Michael

On Fri, Aug 8, 2008 at 12:27, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Also, can you do your deletes via IndexWriter (delete by Term) instead of
> opening IndexReader to do the deletes?
>
> Mike
>
> Ian Lea wrote:
>
>> Michael
>>
>>
>> Did you get anywhere with this? 3 secs for one delete is excessive. A
>> job of mine ran earlier today and did 2000+ deletes by term on unique
>> id in less than 9 seconds.  The index is smaller, at around 5Gb, but I
>> don't believe that would explain the difference.  All the deletes were
>> done in one batch using lucene 2.3.2.
>>
>> Is there a lot of other concurrent activity on the index?  On the
>> server?  Is it CPU or IO bound?
>>
>>
>> --
>> Ian.
>>
>>
>>
>> On Thu, Aug 7, 2008 at 1:46 PM, Michael Zehrer <zehrer@zepan.org> wrote:
>>>
>>> Dear List,
>>>
>>> I have a rather big index around 20gb. My documents have a unique id
>>> that I store in in an untokenized field.
>>>
>>> Using an IndexReader I delete documents by term using the id. The
>>> applications tries to batch as many delete operations as possible for
>>> this.
>>>
>>> The applications runs on a 8Core Machine with 1GB heapsize for the
>>> JVM. Each delete takes about 3sec to complete. I have a lot of Updates
>>> during a day so this takes a lot of time and in effect this is too
>>> slow.
>>>
>>> Is there anything I can do to speed things up a little?
>>>
>>> Best,
>>>
>>> Michael
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 08:08:29 2008
Return-Path: <java-user-return-35521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85376 invoked from network); 16 Aug 2008 08:08:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 08:08:28 -0000
Received: (qmail 96426 invoked by uid 500); 16 Aug 2008 08:08:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96393 invoked by uid 500); 16 Aug 2008 08:08:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96382 invoked by uid 99); 16 Aug 2008 08:08:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 01:08:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 08:07:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KUGpE-00089F-IO
	for java-user@lucene.apache.org; Sat, 16 Aug 2008 01:07:52 -0700
Message-ID: <19009580.post@talk.nabble.com>
Date: Sat, 16 Aug 2008 01:07:52 -0700 (PDT)
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Subject: Appropriate disk optimization for large index?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mspitz@stanford.edu
X-Virus-Checked: Checked by ClamAV on apache.org


Hi!  I'm using Lucene 2.3.2 to store a relatively-large index of HTML
documents.  I'm storing ~150 million documents, taking up 150 GB of space.

I index the HTML text, but I only store primary key information that allows
me to retrieve it later.  Thus, my document size is small, but obviously, I
need to store the index as well, and I imagine that's what takes up almost
all of the space.

Since I allow users to search this HTML specific to their user index, I
create multiple indexes (~2000) such that a given user only has to search
one of the 2000 indexes to get to their specific document.  I also have
queries that span all 2000 indexes.

So, I have 2000 indexes full of small documents but relatively large
indexing space.

My question is what sort of disk to buy.  Using "dstat", I've determined
that the disk is clearly the bottleneck.  Nearly all the time I spend
indexing "chunks" of documents and committing them to disk is spent waiting
on I/O operations.  I spawn multiple threads to access the various index
writers so as to minimize I/O wait time, but disk always ends up being the
problem.

Currently, I've got 7200rpm SATA drives (RAID 0), but I've also got 15k SAS
drives (RAID 0 as well) on hand.

My question is, what's the access pattern of Lucene when it comes to
indexing documents, merging segments, and eventually optimizing them (given
what I've mentioned about document count and document size)?

Am I better off with a drive that has a faster seek time, or do I need to
optimize for sustained throughput?  How does the way in which Lucene lays
indexes on disk affect this?

If it helps, my merge factor is 50, and given that I run out of file
descriptors otherwise, I use the compound file format.

Thanks for your help,
Matt
-- 
View this message in context: http://www.nabble.com/Appropriate-disk-optimization-for-large-index--tp19009580p19009580.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 08:33:52 2008
Return-Path: <java-user-return-35522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91613 invoked from network); 16 Aug 2008 08:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 08:33:52 -0000
Received: (qmail 2804 invoked by uid 500); 16 Aug 2008 08:33:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2767 invoked by uid 500); 16 Aug 2008 08:33:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2756 invoked by uid 99); 16 Aug 2008 08:33:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 01:33:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 08:32:48 +0000
Received: by wx-out-0506.google.com with SMTP id h29so696268wxd.20
        for <java-user@lucene.apache.org>; Sat, 16 Aug 2008 01:33:15 -0700 (PDT)
Received: by 10.70.13.6 with SMTP id 6mr4277505wxm.17.1218875595091;
        Sat, 16 Aug 2008 01:33:15 -0700 (PDT)
Received: by 10.100.212.4 with HTTP; Sat, 16 Aug 2008 01:33:15 -0700 (PDT)
Message-ID: <9ac0c6aa0808160133m3afeef29r8a20592f473d338b@mail.gmail.com>
Date: Sat, 16 Aug 2008 04:33:15 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Efficient delete
In-Reply-To: <1f8734680808160009p3cf159ob012037f35c1be89@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1f8734680808070546q6d36cbe8m6687b70f7782d6df@mail.gmail.com>
	 <8c4e68610808080223p343f390i1fc3d2a5e42b6a7e@mail.gmail.com>
	 <36F19444-085E-4001-9C6A-D8C06302B062@mikemccandless.com>
	 <1f8734680808160009p3cf159ob012037f35c1be89@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It saves you the hassle of closing your IndexWriter, opening an
IndexReader, doing deletes, closing the IndexReader, then opening a
new IndexWriter.

Also, it can be more efficient (depends on your application) since it
may buffer the deletes for longer than you would if you used
IndexReader.

Mike

Michael Zehrer <zehrer@zepan.org> wrote:
> Mike,
>
> what is the difference if I would use IndexWriter?
>
> Michael
>
> On Fri, Aug 8, 2008 at 12:27, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Also, can you do your deletes via IndexWriter (delete by Term) instead of
>> opening IndexReader to do the deletes?
>>
>> Mike
>>
>> Ian Lea wrote:
>>
>>> Michael
>>>
>>>
>>> Did you get anywhere with this? 3 secs for one delete is excessive. A
>>> job of mine ran earlier today and did 2000+ deletes by term on unique
>>> id in less than 9 seconds.  The index is smaller, at around 5Gb, but I
>>> don't believe that would explain the difference.  All the deletes were
>>> done in one batch using lucene 2.3.2.
>>>
>>> Is there a lot of other concurrent activity on the index?  On the
>>> server?  Is it CPU or IO bound?
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>>
>>> On Thu, Aug 7, 2008 at 1:46 PM, Michael Zehrer <zehrer@zepan.org> wrote:
>>>>
>>>> Dear List,
>>>>
>>>> I have a rather big index around 20gb. My documents have a unique id
>>>> that I store in in an untokenized field.
>>>>
>>>> Using an IndexReader I delete documents by term using the id. The
>>>> applications tries to batch as many delete operations as possible for
>>>> this.
>>>>
>>>> The applications runs on a 8Core Machine with 1GB heapsize for the
>>>> JVM. Each delete takes about 3sec to complete. I have a lot of Updates
>>>> during a day so this takes a lot of time and in effect this is too
>>>> slow.
>>>>
>>>> Is there anything I can do to speed things up a little?
>>>>
>>>> Best,
>>>>
>>>> Michael
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 11:44:22 2008
Return-Path: <java-user-return-35523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57651 invoked from network); 16 Aug 2008 11:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 11:44:22 -0000
Received: (qmail 72931 invoked by uid 500); 16 Aug 2008 11:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72902 invoked by uid 500); 16 Aug 2008 11:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72891 invoked by uid 99); 16 Aug 2008 11:44:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 04:44:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 11:43:18 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Sat, 16 Aug 2008 07:40:51 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sat, 16 Aug 2008 07:40:01 -0400
Subject: windows file system cache
Thread-Topic: windows file system cache
Thread-Index: Acj/lNE9MfmBWU6xTt6BAZVHPMAutg==
Message-ID: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_36B4EF9511887240A973A93E7878B0560A0B11ED51US1IIEX1IICOR_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_36B4EF9511887240A973A93E7878B0560A0B11ED51US1IIEX1IICOR_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Anyone else run on Windows?  We have index around 26 GB in size.  Seems fil=
e system cache ends up taking up nearly all available RAM (26 GB out of 32 =
GB on 64-bit box).  Lucene process is around 5 GB, so very little left over=
 for queries, etc, and box starts swapping during searches.  I think changi=
ng file system cache size setting is needed.  Anyone else have same issue?

--_000_36B4EF9511887240A973A93E7878B0560A0B11ED51US1IIEX1IICOR_--

From java-user-return-35524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 14:23:09 2008
Return-Path: <java-user-return-35524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31248 invoked from network); 16 Aug 2008 14:23:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 14:23:09 -0000
Received: (qmail 23643 invoked by uid 500); 16 Aug 2008 14:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23612 invoked by uid 500); 16 Aug 2008 14:23:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23601 invoked by uid 99); 16 Aug 2008 14:23:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 07:23:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 14:22:04 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1605176wra.21
        for <java-user@lucene.apache.org>; Sat, 16 Aug 2008 07:22:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=UB79pv2FRWWGwSorMmM/wrwn9YciZgYQ2dni8XkFwwA=;
        b=urJ9BZKkEBOR8+XMXTNhuNhZr0a/QEurNagLqkirf6s6zOh0i/JziGXmn03Rhn5BOG
         YCjAYnM8lVz7eMcMysPT4UiosI0qywoOqVI+jxbeujXfuj9siuSBd/WR7pnlM5Xls9gq
         khWecGZoIrgkOV/5FyYJjM7vk4OBsqgBekyjA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=PU2oftpcWamIZ9stSmzc7bCXzsK5/0vUUs2z5+1dqYlRz03UBX2H7bib3ObvdsMKJR
         6Icd8daQgEvby4wkZSXVNMVh576NUPhjcoi/xnzcl+Rc2Bdye80OXKc2AjJzvoKP0RQ7
         oPRrvM5ivFM8fiZDThzNuEbcdGvHRQ5UJTDh0=
Received: by 10.90.93.13 with SMTP id q13mr5243430agb.106.1218896535565;
        Sat, 16 Aug 2008 07:22:15 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 18sm5378741agb.12.2008.08.16.07.22.13
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 16 Aug 2008 07:22:14 -0700 (PDT)
Message-ID: <48A6E295.5050400@gmail.com>
Date: Sat, 16 Aug 2008 10:22:13 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: windows file system cache
References: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM>
In-Reply-To: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Robert Stewart wrote:
> Anyone else run on Windows?  We have index around 26 GB in size.  Seems file system cache ends up taking up nearly all available RAM (26 GB out of 32 GB on 64-bit box).  Lucene process is around 5 GB, so very little left over for queries, etc, and box starts swapping during searches.  I think changing file system cache size setting is needed.  Anyone else have same issue?
>
>   
Hmmm...get more ram :)

Windows 64-bit upped the default file system cache size from 1 gig to 1 
terabyte. Your feeling the awesome effects of that upgrade I think.

There is an API call ( SetSystemFilecache() ) to override this - so 
perhaps code up a C app to set it before running your Lucene app?

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 14:41:09 2008
Return-Path: <java-user-return-35525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38074 invoked from network); 16 Aug 2008 14:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 14:41:09 -0000
Received: (qmail 34433 invoked by uid 500); 16 Aug 2008 14:41:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34405 invoked by uid 500); 16 Aug 2008 14:41:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34394 invoked by uid 99); 16 Aug 2008 14:41:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 07:41:02 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Aug 2008 14:40:06 +0000
Received: (qmail 54888 invoked from network); 16 Aug 2008 14:40:32 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 16 Aug 2008 14:40:32 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Get id of Document just added?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Sat, 16 Aug 2008 10:39:51 -0400
Message-Id: <1218897591.32440.0.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  I combed through the API and some of the mailing list. I need
to get the id of a Document just added. How should this be done?
I'm using Lucene 2.3.2.

thank you,
Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 14:45:15 2008
Return-Path: <java-user-return-35526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39817 invoked from network); 16 Aug 2008 14:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 14:45:15 -0000
Received: (qmail 36841 invoked by uid 500); 16 Aug 2008 14:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36799 invoked by uid 500); 16 Aug 2008 14:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36788 invoked by uid 99); 16 Aug 2008 14:45:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 07:45:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 14:44:10 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1612513wra.21
        for <java-user@lucene.apache.org>; Sat, 16 Aug 2008 07:44:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=tlLrHh5SNde+pZtH4bWkBe1Lb5ADJcYneOSlGNmipcQ=;
        b=O03G9Qk0xlZP48V2u0XE/tJeBJdDA+ho1/El8hKs/5zR/aQ4OyWTDnR3sdpWRdhhdl
         OnIR9DeKBIa5c5CxVD+jndhhGRb/fZTBjWpnKObVE9o5djPb1TWQ/NHJBfFRoiqjQU9z
         R98nepNK914TDgNbOUc5ZMUDtGH4m0gWrVtko=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=nnIZ++1w4mv/qZG7CySMVXi79SOdyHLzq0A/ZJL/bL4bU5q/LM0/vxNrbKNbs6s9XS
         Z05fgg6199IhPxklbcryz8aK1o/qT7nFi7nhkskdEwLGGunB23eqxPEXdQFbUDm9fYXG
         UFdwrEwvRihfvsay5pvZIfClgnZtDdZD3lqug=
Received: by 10.90.92.10 with SMTP id p10mr5278428agb.96.1218897878423;
        Sat, 16 Aug 2008 07:44:38 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 38sm548822aga.4.2008.08.16.07.44.37
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 16 Aug 2008 07:44:37 -0700 (PDT)
Message-ID: <48A6E7D5.8020909@gmail.com>
Date: Sat, 16 Aug 2008 10:44:37 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Get id of Document just added?
References: <1218897591.32440.0.camel@nuraku>
In-Reply-To: <1218897591.32440.0.camel@nuraku>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Darren Govoni wrote:
> Hi,
>   I combed through the API and some of the mailing list. I need
> to get the id of a Document just added. How should this be done?
> I'm using Lucene 2.3.2.
>
> thank you,
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
The id given by lucene is for internal use and will not remain the same 
for each document after deletes, merges, etc. You shouldn't need it. Do 
you really?

Instead, you should index a field called id and populate it yourself - 
thats most likely the type of id your looking for.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 14:51:22 2008
Return-Path: <java-user-return-35527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42450 invoked from network); 16 Aug 2008 14:51:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 14:51:22 -0000
Received: (qmail 39143 invoked by uid 500); 16 Aug 2008 14:51:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39111 invoked by uid 500); 16 Aug 2008 14:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39093 invoked by uid 99); 16 Aug 2008 14:51:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 07:51:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 14:50:17 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1614619wra.21
        for <java-user@lucene.apache.org>; Sat, 16 Aug 2008 07:50:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=l/5azyqSHfMUlOUT3mVD31MvM/KPVb2Xz8wwj68IQ7c=;
        b=NS0OX6JQv71EA8o0AjgVLZtCbnGhNdkKXCnv5H9MgylPJ94aqTtBJj4eFpWya0782a
         g4hC0LwMEbpRtEU5ObPiO4+SUsMqzfQgAY/5c/vzG7yd9YxOfjDlCsNuFeWw6f+2EltN
         04AIwozPStL26EmFkQAWA2W7/LwNf0PHQGD08=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=JyYHAbhIpt04mzRji27RIcxaxdL9kPRFd1Djysdh4yUezQqOAZuAfSm2r1POa55kBf
         NMHmPQK/4IHuEV9sXv8OEOcnW5m02oiM9hVGJLl7p6ta/NKuvUq8JTOzMpk8gIOIBjwz
         1UKj96nBJX6hujMk0T/VEWMqjl+pR+ktoBtPo=
Received: by 10.90.78.14 with SMTP id a14mr5297255agb.29.1218898245458;
        Sat, 16 Aug 2008 07:50:45 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 7sm2217043agd.33.2008.08.16.07.50.44
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 16 Aug 2008 07:50:44 -0700 (PDT)
Message-ID: <48A6E944.7040900@gmail.com>
Date: Sat, 16 Aug 2008 10:50:44 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: windows file system cache
References: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM> <48A6E295.5050400@gmail.com>
In-Reply-To: <48A6E295.5050400@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> Robert Stewart wrote:
>> Anyone else run on Windows?  We have index around 26 GB in size.  
>> Seems file system cache ends up taking up nearly all available RAM 
>> (26 GB out of 32 GB on 64-bit box).  Lucene process is around 5 GB, 
>> so very little left over for queries, etc, and box starts swapping 
>> during searches.  I think changing file system cache size setting is 
>> needed.  Anyone else have same issue?
>>
>>   
> Hmmm...get more ram :)
>
> Windows 64-bit upped the default file system cache size from 1 gig to 
> 1 terabyte. Your feeling the awesome effects of that upgrade I think.
>
> There is an API call ( SetSystemFilecache() ) to override this - so 
> perhaps code up a C app to set it before running your Lucene app?
>
> - Mark
You may actually be able to do it from the registry as well: 
http://support.microsoft.com/kb/892589 (don't use windows anymore so 
havn't confirmed)

Info showing the change from 1 gig to 1 terabyte:
http://support.microsoft.com/kb/294418

You just want to set it to a certain percentage of what you got - 
leaving enough to do whatever your lucene app needs to do.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 18:14:07 2008
Return-Path: <java-user-return-35528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17499 invoked from network); 16 Aug 2008 18:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 18:14:07 -0000
Received: (qmail 16181 invoked by uid 500); 16 Aug 2008 18:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16146 invoked by uid 500); 16 Aug 2008 18:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16135 invoked by uid 99); 16 Aug 2008 18:13:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 11:13:58 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Aug 2008 18:13:02 +0000
Received: (qmail 81368 invoked from network); 16 Aug 2008 18:13:26 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 16 Aug 2008 18:13:26 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: Get id of Document just added?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <48A6E7D5.8020909@gmail.com>
References: <1218897591.32440.0.camel@nuraku>  <48A6E7D5.8020909@gmail.com>
Content-Type: text/plain
Date: Sat, 16 Aug 2008 14:13:30 -0400
Message-Id: <1218910410.25878.0.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, you are right. Was looking for a lazy way to avoid writing 5 lines
of code. Hehe.

Thanks,
Darren


On Sat, 2008-08-16 at 10:44 -0400, Mark Miller wrote:
> Darren Govoni wrote:
> > Hi,
> >   I combed through the API and some of the mailing list. I need
> > to get the id of a Document just added. How should this be done?
> > I'm using Lucene 2.3.2.
> >
> > thank you,
> > Darren
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >   
> The id given by lucene is for internal use and will not remain the same 
> for each document after deletes, merges, etc. You shouldn't need it. Do 
> you really?
> 
> Instead, you should index a field called id and populate it yourself - 
> thats most likely the type of id your looking for.
> 
> - Mark
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 16 20:01:43 2008
Return-Path: <java-user-return-35529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86008 invoked from network); 16 Aug 2008 20:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2008 20:01:43 -0000
Received: (qmail 62566 invoked by uid 500); 16 Aug 2008 20:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62519 invoked by uid 500); 16 Aug 2008 20:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62507 invoked by uid 99); 16 Aug 2008 20:01:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 13:01:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Aug 2008 20:00:36 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1297237fgb.27
        for <java-user@lucene.apache.org>; Sat, 16 Aug 2008 13:00:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=kMCI4SwlVvxM69GodL9wIAeo2smD7iUVqHjrj4oqQIg=;
        b=PzSxGxqk5oqTxj+YUUVHAH4weUPsqDzfPk/0qLJC2CPStyjsOs+7wrdy1gBYpY3Hze
         V4DCNvjQtam34JoMwfKrKZCeb7tvyw2zkSphO/yK8Ex3tS51M4RFqLBxOIPi3TH9YH4B
         JQfZ/ozYJqkGVblP5o4/hv/7KPT2Ny2mDWAvo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FM8WfziqUZbqXrSFq3WpjpFH3jbwcdQYcRSPp866HlWsK+4cc3p61rWCNR6RBWwQqq
         /vRrIGU3fNrxU99HUgxGuA7AddvaFowkeI2w49dLKPrWIrwXWI41JhzgzXZmFIXKmYpA
         psoUTGdRQXaBXThjmox4So7esr9ZAki1TAt/c=
Received: by 10.86.27.9 with SMTP id a9mr3186391fga.57.1218916845911;
        Sat, 16 Aug 2008 13:00:45 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Sat, 16 Aug 2008 13:00:45 -0700 (PDT)
Message-ID: <e05f0fd10808161300w77a2b468ob68fb5a0a689b6b1@mail.gmail.com>
Date: Sat, 16 Aug 2008 23:00:45 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <op.ufw33vnw2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70102_714994.1218916845866"
References: <48a3076a.2679420a.1c53.ffffa5c4@mx.google.com>
	 <op.ufvb07uq2ic4zu@sj-desktop>
	 <359a92830808140644u7e55d48ek3c048f2b05fd5345@mail.gmail.com>
	 <op.ufvryaly2ic4zu@sj-desktop>
	 <359a92830808140817j1114861cw7c240b15bc149c28@mail.gmail.com>
	 <op.ufw33vnw2ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70102_714994.1218916845866
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Sergey, seems like case 4 and 5 are equivalent,
both meaning case insensitive right. Otherwise please
explain the difference.

If it is required to support both case sensitive
(cases 1,2,3) and case insensitive (case 4/5) then
both forms must be saved in the index - in two separate
fields (as Erick mentioned, I think).

Hope this helps,
Doron

On Fri, Aug 15, 2008 at 10:51 AM, Sergey Kabashnyuk <ksmmlist@gmail.com>wrote:

> Hello
>
> Here's my use case           content of the field
> Doc1 -
>        Field - "text " -   "Field Without Norms"
>
> Doc2 -
>        Field - "text " -   "field without norms"
>
> Doc3 -
>        Field - "text " -   "FIELD WITHOUT NORMS"
>
>
> Query                                     expected result
> 1. new Term("text","Field Without Norms")       doc1
> 2. new Term("text","field without norms")       doc2
> 3. new Term("text","FIELD WITHOUT NORMS")       doc3


> lowercase("text","field without norms")   doc1, doc2, doc3
> uppercase("text","FIELD WITHOUT NORMS")   doc1, doc2, doc3
>
> I stor "text" field like :
> new Field("text", Field.Store.NO, Field.Index.NO_NORMS,Field.TermVector.NO
> )
> using StandardAnalyzer and query  1-3 works perfectly as I need. The
> question is
> how create query 4-5?
>
> Thanks
>
> Sergey Kabashnyuk
> eXo Platform SAS
>
>
>  Be aware that StandardAnalyzer lowercases all the input,
>> both at index and query times. Field.Store.YES will store
>> the original text without any transformations, so doc.get(<field>)
>> will return the original text. However, no matter what the
>> Field.Store value, the *indexed* tokens (using
>> TOKENIZED as you Field.Index.TOKENIZED)
>> are passed through the analyzer.
>>
>> For instance, indexing "MIXed CasE  TEXT" in a
>> field called "myfield" with Field.Store.YES,
>> Field.Index.TOKENIZED would index the
>> following tokens (with StandardAnalyzer).
>> mixed
>> case
>> text
>>
>> and searches (with StandardAnalyzer) would match
>> any case in the query terms (e.g. MIXED would hit,
>> as would mixed as would CaSE).
>>
>> However, doc.get("myfield") would return
>> "MIXed CasE  TEXT"
>>
>> As Doron said, though, a few use cases would
>> help us provide better answers.
>>
>> Best
>> Erick
>>
>>
>> On Thu, Aug 14, 2008 at 10:31 AM, Sergey Kabashnyuk <ksmmlist@gmail.com
>> >wrote:
>>
>>  Thanks for you  reply Erick.
>>>
>>>
>>>  About the only way to do this that I know of is to
>>>
>>>> index the data three times, once without any case
>>>> changing, once uppercased and once lowercased.
>>>> You'll have to watch your analyzer, probably making
>>>> up your own (easily done, see the synonym analyzer
>>>> in Lucene in Action).
>>>>
>>>> Your example doesn't tell us anything, since the critical
>>>> information is the *analyzer* you use, both at query and
>>>> at index times. The analyzer is responsible for any
>>>> transformations, like case folding, tokenizing, etc.
>>>>
>>>>
>>>
>>> In example  I want to show what I  stored field as  Field.Index.NO_NORMS
>>>
>>> As I understand it means what field contains original string
>>> despite what analyzer I chose(StandardAnalyzer by default).
>>>
>>> All querys I made myself without using Parsers.
>>> For example new TermQuery(new Term("filed", "MaMa"));
>>>
>>>
>>> I agree with you about possible implementation,
>>> but it increase size of index at times.
>>>
>>> But are there other possibilities, such as using  custom query, possibly
>>> similar to  RegexQuery,RegexTermEnum that would compare terms
>>> at it's  own discretion?
>>>
>>>
>>>
>>>
>>>
>>>  But what is your use-case for needing both upper and
>>>> lower case comparisons? I have a hard time coming
>>>> up with a reason to do both that wouldn't be satisfied
>>>> by just a caseless search.
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Thu, Aug 14, 2008 at 4:47 AM, Sergey Kabashnyuk <ksmmlist@gmail.com
>>>> >wrote:
>>>>
>>>>  Hello.
>>>>
>>>>>
>>>>> I have the similar question.
>>>>>
>>>>> I need to implement
>>>>> 1. Case sensitive search.
>>>>> 2. Lower case search for concrete field.
>>>>> 3. Upper case search for concrete filed.
>>>>>
>>>>> For now I use
>>>>> new Field("PROPERTIES",
>>>>>                 content,
>>>>>                 Field.Store.NO,
>>>>>                 Field.Index.NO_NORMS,
>>>>>                 Field.TermVector.NO)
>>>>> for original string and make case sensitive search.
>>>>>
>>>>> But does anyone have an idea to how implement second and third type of
>>>>> search?
>>>>>
>>>>> Thanks
>>>>>
>>>>>
>>>>>
>>>>>  Hi All,
>>>>>
>>>>>  Once I index a bunch of documents with a StandardAnalyzer (and if the
>>>>>> effort
>>>>>> I need to put in to reindex the documents is not worth the effort), is
>>>>>> there
>>>>>> a way to search on the index without case sensitivity.
>>>>>> I do not use any sophisticated Analyzer that makes use of
>>>>>> LowerCaseTokenizer.
>>>>>> Please let me know if there is a solution to circumvent this case
>>>>>> sensitivity problem.
>>>>>> Many thanks
>>>>>> Dino
>>>>>>
>>>>>>
>>>>>>  --
>>>>>>
>>>>> Sergey Kabashnyuk
>>>>> eXo Platform SAS
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>  --
>>>>>
>>>> Sergey Kabashnyuk
>>> eXo Platform SAS
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
>
> --
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_70102_714994.1218916845866--

From java-user-return-35530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 17 16:41:52 2008
Return-Path: <java-user-return-35530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58029 invoked from network); 17 Aug 2008 16:41:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2008 16:41:52 -0000
Received: (qmail 60907 invoked by uid 500); 17 Aug 2008 16:41:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60867 invoked by uid 500); 17 Aug 2008 16:41:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60856 invoked by uid 99); 17 Aug 2008 16:41:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Aug 2008 09:41:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Aug 2008 16:40:43 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1524335fgb.27
        for <java-user@lucene.apache.org>; Sun, 17 Aug 2008 09:41:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sPAcXNNQ1UUwqv0uf3elFFsZeP0zweCARLLRUgSBpiU=;
        b=oFvuLQ/3HLXCG3MouDD+0cjhGtp47lGyzCEic8QVeN+4VORJgC2rm5gHHmOH2aItJ4
         ynTrj8p5Dm3s0Bbfu7ASx0DqKh1JbBXmIRehxknjC3/5PH/MomoU2uMR7FeJJjPF02BX
         l1oyBzkINN+okZSqPZq/zZS+FxqGRkLIH+A78=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wOAMVNaEN0U/ioKnw3wy9cbMqWtY+KyAHGhfgH7/2SVNn2ea7vBG1uklFGioMlPLN0
         vl9r+Vi2TvqXuexoGO4x4VuhOeX8Injtt4QySdfTX0GTT75Zdq7H5D86922AYNodBawQ
         RbNQamf7J+7yxSLRp4k7x4qAMc82bL6B3wwsw=
Received: by 10.86.70.3 with SMTP id s3mr3852428fga.51.1218991270777;
        Sun, 17 Aug 2008 09:41:10 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Sun, 17 Aug 2008 09:41:10 -0700 (PDT)
Message-ID: <e05f0fd10808170941i67489536wf4548877f7368a6@mail.gmail.com>
Date: Sun, 17 Aug 2008 19:41:10 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and tokenizers
In-Reply-To: <48A4DD43.7080201@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74893_23879850.1218991270761"
References: <48A3A2F8.50802@teamware.com>
	 <e05f0fd10808140317s48cf8943s740b7ce6debdc86c@mail.gmail.com>
	 <48A4DD43.7080201@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74893_23879850.1218991270761
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> Implementing payloads via Tokens explicitly prevents the use of payloads
> for untokenized fields, as they only support field.stringValue().  There
> seems no way to override this.


I assume you already know this but just to make sure what I meant was clear
- on tokenization but still indexing just means that the entire field's text
becomes a single unchanged token. I believe this is exactly what
SingleTokenTokenStream can buy you - a single token, for which you can pre
set a payload.

My field is currently stored, so the tokenStream approach you suggested,
> (Lucene-580) will not work as it's theoretically only for non-stored fields.
>


This is new input :) - the original code snippet said - new Field("myField",
"A1", Field.Store.NO, Field.Index.UNTOKENIZED) - so I thought the token
stream approach would work.


> In practice, I expect I can create a stored/indexed Field with a dummy
> string value, then use setValue(TokenStream).  At least I can have stored
> fields with Payloads using the analyzer/tokenStream route.  Is this illegal?


It is.  Field maintains its  value and it is either string/stream/etc. Once
you set it to tokenStream the string value is lost and there's no way to
store it.

What if the Fieldable had a tokenValue(), in addition to the existing
> stream/string/binary/reader values, which could be used for untokenized
> fields and used in invertField()?


With this too, at least in current design, the stored string is gone once
the value is set to the suggested token.

I'd rather stick with core Lucene than start making proprietary changes, but
> it seems I can't quite get to where I want to be without some quite cludgy
> code for a very simple use case :(
>

There is LUCENE-1231 that will allow payloads per field, but I didn't follow
is closely enough to tell if it would solve your need to both store and have
payload? It is interesting that you need the two together.

How about adding this field in two parts, one part for indexing with the
payload and the other part for storing, i.e. something like this:

    Token token = new Token(...);
    token.setPayload(...);
    SingleTokenTokenStream ts = new SingleTokenTokenStream(token);

    Field f1 = new Field("f","some-stored-content",Store.YES,Index.NO);
    Field f2 = new Field("f", ts);

    doc.add(f1);
    doc.add(f2);

Doron

------=_Part_74893_23879850.1218991270761--

From java-user-return-35531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 00:04:35 2008
Return-Path: <java-user-return-35531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70483 invoked from network); 18 Aug 2008 00:04:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 00:04:35 -0000
Received: (qmail 48980 invoked by uid 500); 18 Aug 2008 00:04:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48950 invoked by uid 500); 18 Aug 2008 00:04:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48939 invoked by uid 99); 18 Aug 2008 00:04:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Aug 2008 17:04:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 00:03:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2492189rvb.5
        for <java-user@lucene.apache.org>; Sun, 17 Aug 2008 17:03:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HnCQc5KXL+8B8sItaJaAO8cYNheQQiRbZZQywcsJ1Mo=;
        b=HyGmFZqKMh28+OS7fx1JMIgDDrmhO/O5PMp3r2Xmf9zydT3HYOone8TNmU4idUGl0X
         RuHc7wmn5GnQzMN1EE6oJpzUZ2nAAszRXHjBgj3EqpOXJiwytKxulsgHA7VemT0zeYZ/
         rFmLVGui1q38rsEeMEDF10CWl3hkz3vHjLVR0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VvHbbxz/nvZBzSU345U+PASfce8sBHhgWWYPkzYsmEnoP2mpSmZ6pr2PlB9Ko+6kVy
         6g3IbMH2ZH1jMzX8qQh2o40TwYe+MRmjWz29QnxzWjrk4OwtBvisXoCUDsudo6G4U4OG
         TsBrR8lP/qrbopMtSrv9pa7e9J/gKLNTUFCoU=
Received: by 10.141.27.16 with SMTP id e16mr2851370rvj.136.1219017835735;
        Sun, 17 Aug 2008 17:03:55 -0700 (PDT)
Received: by 10.141.18.6 with HTTP; Sun, 17 Aug 2008 17:03:55 -0700 (PDT)
Message-ID: <a823853a0808171703l618060bav708906f00b355e98@mail.gmail.com>
Date: Mon, 18 Aug 2008 09:03:55 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for special condition.
In-Reply-To: <ae7ef6650808150917tcf7349fy7f440153ef92c31b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82608_30986238.1219017835722"
References: <731882.70944.qm@web50309.mail.re2.yahoo.com>
	 <a823853a0808122146q740b29dbgc3811be0b127d130@mail.gmail.com>
	 <ae7ef6650808132043n54edaa2bj3bce516a494f0a2f@mail.gmail.com>
	 <a823853a0808132143m1ec4bb26pfceba7b992500fe7@mail.gmail.com>
	 <ae7ef6650808150917tcf7349fy7f440153ef92c31b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_82608_30986238.1219017835722
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkuClllcywgdGhhdCBtZXRob2QgaXMgaW4gbHVjZW5lLgpJJ20gc29ycnkgYWJvdXQgSSBkaWQg
bWlzdW5kZXJzdGFuZCB5b3VyIHdvcmRzLgpJIGhvcGUgdGhhdCB5b3Ugd2lsbCBmaW5kIHRoZSB3
YXkgZm9yIHlvdSB3YW50LgoKYnllLjopCgoKMjAwOC84LzE2LCBNciBTaG9yZSA8c2hvcmUuY2xv
dWRAZ21haWwuY29tPjoKPgo+IHRoYW5rcyxKYW5nCj4gYnV0IEkgZGlkbid0IGZpbmQgdGhlIG1l
dGhvZCBpc1Rva2VuQ2hhcgo+IG1heWJlIGl0J3MgaW4gbHVjZW5lLHJpZ2h0Pwo+IGJ1dCBJJ20g
dXNpbmcgbnV0Y2ggdGhpcyB0aW1lLgo+IHRoYW5rIHUgYWxsIHRoZSBzYW1lOikKPgo+IDIwMDgv
OC8xNCDA5b/rvK4gPG5lZWQ0c3BkQGdtYWlsLmNvbT4KPgo+ID4gSGkuIEkgd2FzIHZlcnkgaGFw
cHkgLHlvdSBhcmUgbG92ZSBLb3JlYW4gbGFuZ3VhZ2UgYSBsb3QgOikKPiA+IFNvIGRvIHlvdSB3
YW50IHNlYXJjaCBmb3Igc3BlY2lhbCBjaGFyYWN0ZXJzPwo+ID4KPiA+IElmIHlvdSB3YW50IGlu
Y2x1ZGUgc3BlY2lhbCBjaGFyYWN0ZXJzIHdoZW4gaW5kZXhpbmcsIHlvdSBjYW4gb3ZlcnJpZGUK
PiA+IG1ldGhvZCBpbiBjbGFzcwo+ID4gVG9rZW5pemVyLiBNZXRob2QncyBuYW1lIGlzIGlzVG9r
ZW5DaGFyKGNoYXIgYykuCj4gPgo+ID4gcHJvdGVjdGVkIGJvb2xlYW4gaXNUb2tlbkNoYXIoY2hh
ciBjKSB7Cj4gPiAgICAgICAgcmV0dXJuIENoYXJhY3Rlci5pc0xldHRlcihjKTsKPiA+IH0KPiA+
Cj4gPiBBcyB5b3Ugc2VlLCB0aGF0IG1ldGhvZCBpcyByZXR1cm4gdHJ1ZSB3aGVuIHRoZSBjaGFy
YWN0ZXIgYyBpcyBhCj4gPiBjaGFyYWN0ZXJeXgo+ID4KPiA+IElmIHlvdSBmaXggdGhhdCBtZXRo
b2QgInJldHVybiBDaGFyYWN0ZXIuaXNMZXR0ZXIoYykgIHx8ICBjPT0nLic7ICIKPiA+IHRoZW4s
IHlvdSB3aWxsIGdldCB0aGUgcmVzdWx0IHRva2VuIHRoYXQgaGFzIHNwZWNpYWwgY2hhcmFjdGVy
cyBsaWtlIC4KPiA+Cj4gPiB0aGFua3MuIDopCj4gPgo+ID4gSmFuZy4KPiA+Cj4gPiAyMDA4Lzgv
MTQsIE1yIFNob3JlIDxzaG9yZS5jbG91ZEBnbWFpbC5jb20+Ogo+ID4gPgo+ID4gPiBjYW4gbnV0
Y2ggb3IgbHVjZW5lIHN1cHBvcnQgc2VhcmNoIGZvciBzcGVjaWFsIGNoYXJhY3RlcnMgbGlrZSAu
Pwo+ID4gPiB3aGVuIGkgc2VhcmNoICIubmV0IiBtYW55IHJlc3VsdCBjb21lIGZvciAibmV0Igo+
ID4gPiBpIHdhbnQgdG8gZXhjbHVkZSB0aGVtCj4gPiA+IHBzOmkgbG92ZSBrb3JlYW4gbGFuZ3Vh
Z2UgYSBsb3QKPiA+ID4KPiA+ID4gMjAwOC84LzEzIMDlv+u8riA8bmVlZDRzcGRAZ21haWwuY29t
Pgo+ID4gPgo+ID4gPiA+IGhpLiB0aGFuayB5b3UgZm9yIHlvdXIgcmVzcG9uc2UuCj4gPiA+ID4K
PiA+ID4gPiBJIHdhcyBmb3VuZCB0aGUgd2F5IHdpdGggeW91ciBoZWxwLgo+ID4gPiA+Cj4gPiA+
ID4gVGhlcmUgYXJlIGNsYXNzIHRoYXQgbmFtZSBpcyBDb25zdGFudFNjb3JlUmFuZ2VRdWVyeSBh
bmQgTnVtYmVyVG9vbHMuCj4gPiA+ID4KPiA+ID4gPiBSZWZlcmVuY2Ugc2l0ZSBpcyBoZXJlLgo+
ID4gPiA+Cj4gPiA+ID4KPiA+ID4KPiA+Cj4gaHR0cDovL21hcmttYWlsLm9yZy9tZXNzYWdlL2Rj
aXJtaWZvYXQ2dXFmN3kjcXVlcnk6b3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuTnVtYmVyVG9v
bHMrcGFnZToxK21pZDp0bGQzdWVrYXlsbXUyY3d0K3N0YXRlOnJlc3VsdHMKPiA+ID4gPgo+ID4g
PiA+Cj4gPiA+ID4gVGhhbmtzIHZlcnkgbXVjaC4gOikKPiA+ID4gPgo+ID4gPiA+Cj4gPiA+ID4K
PiA+ID4gPiAyMDA4LzgvMTMsIE90aXMgR29zcG9kbmV0aWMgPG90aXNfZ29zcG9kbmV0aWNAeWFo
b28uY29tPjoKPiA+ID4gPiA+Cj4gPiA+ID4gPiBIaSwKPiA+ID4gPiA+Cj4gPiA+ID4gPiBMdWNl
bmUgZG9lc24ndCBoYXZlIHRoZSBncmVhdGVyIHRoYW4gb3BlcmF0b3IuICBQZXJoYXBzIHlvdSBj
YW4gdXNlCj4gPiA+IHJhbmdlCj4gPiA+ID4gPiBxdWVyaWVzIHRvIGFjY29tcGxpc2ggdGhlIHNh
bWUgdGhpbmcuCj4gPiA+ID4gPgo+ID4gPiA+ID4KPiA+ID4gPiA+Cj4gPiA+ID4KPiA+ID4KPiA+
Cj4gaHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvMl8zXzIvcXVlcnlwYXJzZXJzeW50YXgu
aHRtbCNSYW5nZSUyMFNlYXJjaGVzCj4gPiA+ID4gPgo+ID4gPiA+ID4gT3Rpcwo+ID4gPiA+ID4g
LS0KPiA+ID4gPiA+IFNlbWF0ZXh0IC0tIGh0dHA6Ly9zZW1hdGV4dC5jb20vIC0tIEx1Y2VuZSAt
IFNvbHIgLSBOdXRjaAo+ID4gPiA+ID4KPiA+ID4gPiA+Cj4gPiA+ID4gPgo+ID4gPiA+ID4gLS0t
LS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tCj4gPiA+ID4gPiA+IEZyb206IMDlv+u8riA8bmVlZDRz
cGRAZ21haWwuY29tPgo+ID4gPiA+ID4gPiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3Jn
Cj4gPiA+ID4gPiA+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMiwgMjAwOCA2OjAxOjAwIEFNCj4g
PiA+ID4gPiA+IFN1YmplY3Q6IHNlYXJjaCBmb3Igc3BlY2lhbCBjb25kaXRpb24uCj4gPiA+ID4g
PiA+Cj4gPiA+ID4gPiA+IGhpLgo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBJIGFtIHNlYXJjaGlu
ZyBmb3IgbHVjZW5lIGFwaSBvciBmdW5jdGlvbiBsaWtlIHF1ZXJ5ICJGSUVMRCA+Cj4gMTAwMCIK
PiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gRm9yIGV4YW1wbGUsIGEgdXNlciB3YW50cyB0byBzZWFy
Y2ggYSBwcm9kdWN0IHdoaWNoIHByaWNlIGlzCj4gYmlnZ2VyCj4gPiA+ID4gdGhlbgo+ID4gPiA+
ID4gPiB1c2VyJ3MgaW5wdXQuCj4gPiA+ID4gPiA+IElmIHVzZXIncyBpbnB1dCBpcyAxMDAwMCB0
aGVuIHJlc3VsdCBhcmUgdGhlIHByb2R1Y3RzIGluIGluZGV4Cj4ganVzdAo+ID4gPiA+IGxpa2UK
PiA+ID4gPiA+ID4gIlBSSUNFID4gMTAwMDAiCj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IElzIHRo
ZXJlIGFueSB3YXkgdG8gc2VhcmNoIGxpa2UgdGhhdD8KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4g
dGhhbmtzLgo+ID4gPiA+ID4gPiBKYW5nLgo+ID4gPiA+ID4gPiAtLQo+ID4gPiA+ID4gPiBERVa/
673ECj4gPiA+ID4gPiA+IGh0dHA6Ly9kZXZ5b25nc2lrLnRpc3RvcnkuY29tCj4gPiA+ID4gPgo+
ID4gPiA+ID4KPiA+ID4gPiA+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+ID4gPiBUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4g
PiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2Vu
ZS5hcGFjaGUub3JnCj4gPiA+ID4gPgo+ID4gPiA+ID4KPiA+ID4gPgo+ID4gPiA+Cj4gPiA+ID4g
LS0KPiA+ID4gPiBERVa/673ECj4gPiA+ID4gaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5jb20K
PiA+ID4gPgo+ID4gPgo+ID4KPiA+Cj4gPgo+ID4gLS0KPiA+IERFVr/rvcQKPiA+IGh0dHA6Ly9k
ZXZ5b25nc2lrLnRpc3RvcnkuY29tCj4gPgo+CgoKCi0tIApERVa/673ECmh0dHA6Ly9kZXZ5b25n
c2lrLnRpc3RvcnkuY29tCg==
------=_Part_82608_30986238.1219017835722--

From java-user-return-35532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 03:00:26 2008
Return-Path: <java-user-return-35532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88761 invoked from network); 18 Aug 2008 03:00:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 03:00:25 -0000
Received: (qmail 99094 invoked by uid 500); 18 Aug 2008 03:00:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99052 invoked by uid 500); 18 Aug 2008 03:00:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99041 invoked by uid 99); 18 Aug 2008 03:00:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Aug 2008 20:00:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 02:59:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KUuyC-0006mK-Sk
	for java-user@lucene.apache.org; Sun, 17 Aug 2008 19:59:48 -0700
Message-ID: <19025490.post@talk.nabble.com>
Date: Sun, 17 Aug 2008 19:59:48 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Index of Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am currently using Lucene for indexing. After a index a file, I will use
LUKE to open it and check the index. And there is 1 part that I am curious
about. In Luke, under the Document tab, I randomly select a document and
display it. At the bottom will be 4 columns, Field, ITSVopLBC, Norm and
String Value. 

I am wondering, what is Norm for? And where is it created during indexing
time? Which method calculates it? 

Could anyone advise me on this? Thanks for the help
-- 
View this message in context: http://www.nabble.com/Index-of-Lucene-tp19025490p19025490.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 04:12:07 2008
Return-Path: <java-user-return-35533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30299 invoked from network); 18 Aug 2008 04:12:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 04:12:07 -0000
Received: (qmail 21420 invoked by uid 500); 18 Aug 2008 04:11:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21390 invoked by uid 500); 18 Aug 2008 04:11:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21379 invoked by uid 99); 18 Aug 2008 04:11:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Aug 2008 21:11:58 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 04:11:01 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1642730fgb.27
        for <java-user@lucene.apache.org>; Sun, 17 Aug 2008 21:11:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=V9iGVNEzFpC8/dsNnaxhyRLsrK3fzn3dNisjEQHTw4o=;
        b=mShpLuWK4joi3wFi+xHxeHOv0WoTlDftoG2KPe7pq9cBygUL80Gkx44Bw8vjkgYJka
         n4i93AfENIdTks9IZIFaTIYblG2xpDlY6209v4y0rASkt12sfAGPTIVorsmrUpH3GIYW
         nlSqK8JFdyIl+92Z9RLYFPGDoq60o/fOoGrnQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fUiVvT0S7sJ35JjgguHLagqr/rRvC1ETRRmkVVb5dCsus/wRD6879LSXyYAzUxxA6f
         /IuEUcAfByqZFgCCwPyR8h8cx/byxZ3Wuzy7fuh9GSPEfdmsb/AMy3lH4Z6J4nbDAxmy
         +u8pHFi+tX6+pTF2+c1tdxpRmygdAniNCmdK4=
Received: by 10.86.96.18 with SMTP id t18mr4205227fgb.34.1219032688853;
        Sun, 17 Aug 2008 21:11:28 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Sun, 17 Aug 2008 21:11:28 -0700 (PDT)
Message-ID: <e05f0fd10808172111oaf678b1v6fef89d5de2624b@mail.gmail.com>
Date: Mon, 18 Aug 2008 07:11:28 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index of Lucene
In-Reply-To: <19025490.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_77787_33271884.1219032688831"
References: <19025490.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_77787_33271884.1219032688831
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Norms information comes mainly from lengths of documents - allowing the
search time scoring to take into account the effect of document lengths
(actually
field length within a document). In practice, norms stored within the index
may include
other information, such as index time boosts - for a document, for a field.
A single
byte is stored for each field, - so for this the actual value is compressed.
At search
time, norms are loaded into memory, and so consume 1 byte for each document.
It is possible to disable norms for a field while indexing. This is
explained
better in the javadoc for Similarity, and here:
 http://lucene.apache.org/java/2_3_2/scoring.html

Doron

On Mon, Aug 18, 2008 at 5:59 AM, blazingwolf7 <blazingwolf7@gmail.com>wrote:

>
> Hi,
>
> I am currently using Lucene for indexing. After a index a file, I will use
> LUKE to open it and check the index. And there is 1 part that I am curious
> about. In Luke, under the Document tab, I randomly select a document and
> display it. At the bottom will be 4 columns, Field, ITSVopLBC, Norm and
> String Value.
>
> I am wondering, what is Norm for? And where is it created during indexing
> time? Which method calculates it?
>
> Could anyone advise me on this? Thanks for the help
> --
> View this message in context:
> http://www.nabble.com/Index-of-Lucene-tp19025490p19025490.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_77787_33271884.1219032688831--

From java-user-return-35534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 04:29:20 2008
Return-Path: <java-user-return-35534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38167 invoked from network); 18 Aug 2008 04:29:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 04:29:20 -0000
Received: (qmail 37268 invoked by uid 500); 18 Aug 2008 04:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37233 invoked by uid 500); 18 Aug 2008 04:29:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37222 invoked by uid 99); 18 Aug 2008 04:29:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Aug 2008 21:29:12 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 04:28:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KUwME-000151-Sl
	for java-user@lucene.apache.org; Sun, 17 Aug 2008 21:28:42 -0700
Message-ID: <19025890.post@talk.nabble.com>
Date: Sun, 17 Aug 2008 21:28:42 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index of Lucene
In-Reply-To: <e05f0fd10808172111oaf678b1v6fef89d5de2624b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <19025490.post@talk.nabble.com> <e05f0fd10808172111oaf678b1v6fef89d5de2624b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the info. But do you know where this is actually perform in
Lucene? I mean the method involved, that will calculate the value before
storing it into the index. I track it to one method known as lengthNorm() in
DefaultSimilarity.java, but the value is different from what is stored in
the index


Doron Cohen-2 wrote:
> 
> Norms information comes mainly from lengths of documents - allowing the
> search time scoring to take into account the effect of document lengths
> (actually
> field length within a document). In practice, norms stored within the
> index
> may include
> other information, such as index time boosts - for a document, for a
> field.
> A single
> byte is stored for each field, - so for this the actual value is
> compressed.
> At search
> time, norms are loaded into memory, and so consume 1 byte for each
> document.
> It is possible to disable norms for a field while indexing. This is
> explained
> better in the javadoc for Similarity, and here:
>  http://lucene.apache.org/java/2_3_2/scoring.html
> 
> Doron
> 
> On Mon, Aug 18, 2008 at 5:59 AM, blazingwolf7
> <blazingwolf7@gmail.com>wrote:
> 
>>
>> Hi,
>>
>> I am currently using Lucene for indexing. After a index a file, I will
>> use
>> LUKE to open it and check the index. And there is 1 part that I am
>> curious
>> about. In Luke, under the Document tab, I randomly select a document and
>> display it. At the bottom will be 4 columns, Field, ITSVopLBC, Norm and
>> String Value.
>>
>> I am wondering, what is Norm for? And where is it created during indexing
>> time? Which method calculates it?
>>
>> Could anyone advise me on this? Thanks for the help
>> --
>> View this message in context:
>> http://www.nabble.com/Index-of-Lucene-tp19025490p19025490.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Index-of-Lucene-tp19025490p19025890.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 04:42:10 2008
Return-Path: <java-user-return-35535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44970 invoked from network); 18 Aug 2008 04:42:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 04:42:10 -0000
Received: (qmail 42693 invoked by uid 500); 18 Aug 2008 04:42:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42662 invoked by uid 500); 18 Aug 2008 04:42:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42651 invoked by uid 99); 18 Aug 2008 04:42:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Aug 2008 21:42:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 04:41:03 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7I4fM0q023093
	for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 07:41:22 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m75ih-_0; 18 Aug 2008 07:41:00 +0300
Message-ID: <48A8FD6F.7080105@teamware.com>
Date: Mon, 18 Aug 2008 14:41:19 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Fields with the same name?? - Was Re: Payloads and tokenizers
References: <48A3A2F8.50802@teamware.com>	 <e05f0fd10808140317s48cf8943s740b7ce6debdc86c@mail.gmail.com>	 <48A4DD43.7080201@teamware.com> <e05f0fd10808170941i67489536wf4548877f7368a6@mail.gmail.com>
In-Reply-To: <e05f0fd10808170941i67489536wf4548877f7368a6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Mon, 18 Aug 2008 07:41:22 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

> I assume you already know this but just to make sure what I meant was clear
> - on tokenization but still indexing just means that the entire field's text
> becomes a single unchanged token. I believe this is exactly what
> SingleTokenTokenStream can buy you - a single token, for which you can pre
> set a payload.

Yes, I was with you :)


> It is.  Field maintains its  value and it is either string/stream/etc. Once
> you set it to tokenStream the string value is lost and there's no way to
> store it.

Thanks for that - I delved a little further into FieldsWriter and see what you 
mean.


> How about adding this field in two parts, one part for indexing with the
> payload and the other part for storing, i.e. something like this:
> 
>     Token token = new Token(...);
>     token.setPayload(...);
>     SingleTokenTokenStream ts = new SingleTokenTokenStream(token);
> 
>     Field f1 = new Field("f","some-stored-content",Store.YES,Index.NO);
>     Field f2 = new Field("f", ts);

Now that got me thinking and I have exposed a rather large misconception in my 
understanding of the Lucene internals when consider fields of the same name.

Your idea above looked like a good one.  However, I realise I am probably trying 
to use payloads wrongly.  I have the following information to store for a single 
Document

contentId - 1 instance
ownerId 1..n instances
accessId 1..n instances

One ownerId has a corresponding accessId for the contentId.

My search criteria are ownerId:XXX + user criteria.  When there is a hit, I need 
the contentId and the corresponding accessId (for the owner) back.  So, I wanted 
to store the accessId as a payload to the ownerId.

This is where I came unstuck.  For 'n=3' above, I used the 
SingleTokenTokenStream as you suggested with the accessId as the payload for 
ownerId.  However, at the Document level, I cannot get the payloads from the 
field so, in trying to understand fields with the same name, I discovered that 
there is a big difference between

(a)
Field f = new Field("ownerId", "OID1", Store.YES, Index.NO_NORMS);
f = new Field("ownerId", "OID2", Store.YES, Index.NO_NORMS);
f = new Field("ownerId", "OID3", Store.YES, Index.NO_NORMS);

and (b)
Field f = new Field("ownerId", "OID1 OID2 OID3", Store.YES, Index.NO_NORMS);

as Document.getFields("ownerId") for (a) will be 3 and for (b) it will be 1.

My question then is, if I do

for (int i = 0; i < owners; i++)
{
     f = new Field("ownerId", oid[i], Store.YES, Index.NO_NORMS);
     doc.add(f);
     f = new Field("accessId", aid[i], Store.YES, Index.NO_NORMS);
     doc.add(f);
}

then will the array elements for the corresponding Field arrays returned by

Document.getFields("ownerId")
Document.getFields("accessId")

**guarantee** that the array element order is the same as the order they were added?

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 07:03:32 2008
Return-Path: <java-user-return-35536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15356 invoked from network); 18 Aug 2008 07:03:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 07:03:32 -0000
Received: (qmail 24760 invoked by uid 500); 18 Aug 2008 07:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24719 invoked by uid 500); 18 Aug 2008 07:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24708 invoked by uid 99); 18 Aug 2008 07:03:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 00:03:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 07:02:24 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1671455fgb.27
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 00:02:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=EAvABO/juFXDLdnXmYbdSlEk8ZswAJy/CrtZG/P3ZIs=;
        b=kINxpbTbQLOx6rq8ENsgojjK59AE5VAlHIACwglb8IyN8zFBFmEvkdpc+e1260tk9q
         9HS47uhkLvxkq8WqivFdv+SvFW59X6YgcKLH3i/VvukVopAnQdibg8wk3R+p6bDNNW3/
         zxlEgdC5Hd8Exz9B/9iRNjoBlI32LE8G6zdeM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=crSrEtXtmKbLkxJmOLllh+gccZYrXlRv+icZ1/Re69S2cxdf742bF3sRLHeX4NcqB8
         mJDyBY5khGjS8olgzeOOYOcHhwDqgEGDy6UExBsAFUI1Gu4Fz/hUbPgNJ+2BhTtB7Dg+
         QtcWuJK/6Wa6SonBOMKdz7AXaibfrj1Bs56uM=
Received: by 10.86.52.6 with SMTP id z6mr4273378fgz.48.1219042971563;
        Mon, 18 Aug 2008 00:02:51 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Mon, 18 Aug 2008 00:02:51 -0700 (PDT)
Message-ID: <e05f0fd10808180002h3df287b2w96e1ed87697d0300@mail.gmail.com>
Date: Mon, 18 Aug 2008 10:02:51 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fields with the same name?? - Was Re: Payloads and tokenizers
In-Reply-To: <48A8FD6F.7080105@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78583_6546305.1219042971567"
References: <48A3A2F8.50802@teamware.com>
	 <e05f0fd10808140317s48cf8943s740b7ce6debdc86c@mail.gmail.com>
	 <48A4DD43.7080201@teamware.com>
	 <e05f0fd10808170941i67489536wf4548877f7368a6@mail.gmail.com>
	 <48A8FD6F.7080105@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78583_6546305.1219042971567
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> payload and the other part for storing, i.e. something like this:
>>
>>    Token token = new Token(...);
>>    token.setPayload(...);
>>    SingleTokenTokenStream ts = new SingleTokenTokenStream(token);
>>
>>    Field f1 = new Field("f","some-stored-content",Store.YES,Index.NO);
>>    Field f2 = new Field("f", ts);
>>
> How about adding this field in two parts, one part for indexing with the
>
> Now that got me thinking and I have exposed a rather large misconception in
> my understanding of the Lucene internals when consider fields of the same
> name.
>
> Your idea above looked like a good one.  However, I realise I am probably
> trying to use payloads wrongly.  I have the following information to store
> for a single Document
>
> contentId - 1 instance
> ownerId 1..n instances
> accessId 1..n instances
>
> One ownerId has a corresponding accessId for the contentId.
>
> My search criteria are ownerId:XXX + user criteria.  When there is a hit, I
> need the contentId and the corresponding accessId (for the owner) back.  So,
> I wanted to store the accessId as a payload to the ownerId.
>
> This is where I came unstuck.  For 'n=3' above, I used the
> SingleTokenTokenStream as you suggested with the accessId as the payload for
> ownerId.  However, at the Document level, I cannot get the payloads from the
> field so, in trying to understand fields with the same name, I discovered
> that there is a big difference between
>
> (a)
> Field f = new Field("ownerId", "OID1", Store.YES, Index.NO_NORMS);
> f = new Field("ownerId", "OID2", Store.YES, Index.NO_NORMS);
> f = new Field("ownerId", "OID3", Store.YES, Index.NO_NORMS);
>
> and (b)
> Field f = new Field("ownerId", "OID1 OID2 OID3", Store.YES,
> Index.NO_NORMS);
>
> as Document.getFields("ownerId") for (a) will be 3 and for (b) it will be
> 1.
>
> My question then is, if I do
>
> for (int i = 0; i < owners; i++)
> {
>    f = new Field("ownerId", oid[i], Store.YES, Index.NO_NORMS);
>    doc.add(f);
>    f = new Field("accessId", aid[i], Store.YES, Index.NO_NORMS);
>    doc.add(f);
> }
>
> then will the array elements for the corresponding Field arrays returned by
>
> Document.getFields("ownerId")
> Document.getFields("accessId")
>
> **guarantee** that the array element order is the same as the order they
> were added?
>


The API definitely doesn't promise this.
AFAIK implementation wise it happens to be like this but I can be wrong and
plus it might change in the future. It would make me nervous to rely on
this.

The difficulty stems from that any specific information on the actual
matching token is digested at scoring and not reaching the hit collector in
effect. It somewhat reminds me the situation with highlighting, where
positions might have been considered for scoring, yet for a certain matching
doc of interest that is being displayed with highlighting, positions (and
offsets) need to be found again.

Anyhow, for your need I can think of two options:

Option 1:  just index the owenerID, do not store it, do not index or store
accessID (unless you wish to search by it, in this case just index it). In
addition store a dedicated mapping field that maps from ownerID to accessID.
E.g. with serialization of HashMap or something thinner. At runtime retrieve
this map from the document and it has all that information.

Option 2: as you describe above, just index the ownerID with accessID as
payload, and then for the hitting docid of interest use termPositions to get
the payload, i.e. something like:
    TermPositions tp = reader.termPositions();
    tp.seek(new Term("ownerID",oid));
    tp.skipTo(docid);
    tp.nextPosition();
    if (tp.isPayloadAvailable()) {
      byte [] accessIDBytes = tp.getPayload(...);
      ...

Each has its overhead but I think both should work...

Doron

------=_Part_78583_6546305.1219042971567--

From java-user-return-35537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 07:06:54 2008
Return-Path: <java-user-return-35537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15986 invoked from network); 18 Aug 2008 07:06:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 07:06:54 -0000
Received: (qmail 32405 invoked by uid 500); 18 Aug 2008 07:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31760 invoked by uid 500); 18 Aug 2008 07:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31749 invoked by uid 99); 18 Aug 2008 07:06:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 00:06:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 07:05:49 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1672170fgb.27
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 00:06:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XY03cKPDEO9VCcklws1KYI9MIgb7dJv9cnLPZcFsH+I=;
        b=Dk1m0Hp84XH8gHG7TD907vpODToIG5a9cCjQIdsrwb+BbGmu6YobMGspr3HZcpe6vX
         egyEYNFZWlSaIHmn6tE9HNTw00KJ1M3+FnlRDUUSfeIHs6Sy3d3EYQlFPD57Q5YUnuL5
         kSuxW5BYSiglh+pR3pljkg+u6D9tMu848HsjA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=l4GgYA85weUiAIoEaNlCPYlR4lv2V0qxFSB6IHl/XTBWbgehVmNMadpCsyxTlRG1QT
         sF9Qaz2HLy3e6Dqt7hDhbFPN8wN0fuqCq2rE7T+e2k6RvaSlVXiWWH+LQU86WWxcoO26
         RMAgnf9dpVj2AU8KtqEEmpyaqlhjKu+0BLoWQ=
Received: by 10.86.27.9 with SMTP id a9mr4266646fga.57.1219043177602;
        Mon, 18 Aug 2008 00:06:17 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Mon, 18 Aug 2008 00:06:17 -0700 (PDT)
Message-ID: <e05f0fd10808180006l231ec681r2ffd33f11f8abb0e@mail.gmail.com>
Date: Mon, 18 Aug 2008 10:06:17 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index of Lucene
In-Reply-To: <19025890.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78602_29410556.1219043177598"
References: <19025490.post@talk.nabble.com>
	 <e05f0fd10808172111oaf678b1v6fef89d5de2624b@mail.gmail.com>
	 <19025890.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78602_29410556.1219043177598
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Mon, Aug 18, 2008 at 7:28 AM, blazingwolf7 <blazingwolf7@gmail.com>wrote:

>
> Thanks for the info. But do you know where this is actually perform in
> Lucene? I mean the method involved, that will calculate the value before
> storing it into the index. I track it to one method known as lengthNorm()
> in
> DefaultSimilarity.java, but the value is different from what is stored in
> the index
>

I believe the answer to your question is in this paragraph:
http://lucene.apache.org/java/2_3_2/scoring.html#Score%20Boosting

------=_Part_78602_29410556.1219043177598--

From java-user-return-35538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 07:53:23 2008
Return-Path: <java-user-return-35538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35590 invoked from network); 18 Aug 2008 07:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 07:53:23 -0000
Received: (qmail 67219 invoked by uid 500); 18 Aug 2008 07:53:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66875 invoked by uid 500); 18 Aug 2008 07:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66864 invoked by uid 99); 18 Aug 2008 07:53:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 00:53:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 07:52:18 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K5S00FFCDVXY3@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Mon, 18 Aug 2008 09:52:45 +0200 (MEST)
Date: Mon, 18 Aug 2008 09:52:38 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: windows file system cache
In-reply-to: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1219045959.3192.235.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.22.3.1 (2.22.3.1-1.fc9)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, 2008-08-16 at 07:40 -0400, Robert Stewart wrote:
> Anyone else run on Windows?  We have index around 26 GB in size.  
> Seems file system cache ends up taking up nearly all available RAM 
> (26 GB out of 32 GB on 64-bit box).

Sounds fine so far. If the RAM isn't used for anything else, the system
should use it for caching.

> Lucene process is around 5 GB, so very little left over for queries, 
> etc, and box starts swapping during searches.

Not so fine and also unexpected. Are you sure that what you're seeing is
swapping and not just flushing of the write-cache? Are you observing the
disk-activity only when your switching from writer to reader or does it
continue to be a problem with subsequent searches?

Have you profiled the JVM memory usage? Do you have the same problem if
you specify 6GB as the ceiling?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 09:46:10 2008
Return-Path: <java-user-return-35539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85885 invoked from network); 18 Aug 2008 09:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 09:46:09 -0000
Received: (qmail 81280 invoked by uid 500); 18 Aug 2008 09:46:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80777 invoked by uid 500); 18 Aug 2008 09:46:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80764 invoked by uid 99); 18 Aug 2008 09:46:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 02:46:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 09:45:01 +0000
Received: by gxk11 with SMTP id 11so3861594gxk.5
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 02:44:28 -0700 (PDT)
Received: by 10.90.94.2 with SMTP id r2mr7555623agb.105.1219052668198;
        Mon, 18 Aug 2008 02:44:28 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 34sm7039906agc.6.2008.08.18.02.44.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 18 Aug 2008 02:44:27 -0700 (PDT)
Message-Id: <7C69E804-CC3D-43E5-B0A7-5024CD7E3B6E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1219045959.3192.235.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: windows file system cache
Date: Mon, 18 Aug 2008 05:44:26 -0400
References: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM> <1219045959.3192.235.camel@PC990.sb.statsbiblioteket.dk>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Toke Eskildsen wrote:

>> Lucene process is around 5 GB, so very little left over for queries,
>> etc, and box starts swapping during searches.
>
> Not so fine and also unexpected. Are you sure that what you're  
> seeing is
> swapping and not just flushing of the write-cache? Are you observing  
> the
> disk-activity only when your switching from writer to reader or does  
> it
> continue to be a problem with subsequent searches?

On Linux, at least, the OS will choose to evict "real" pages (swap  
them out to disk) and then use the RAM for the IO cache instead.  This  
then causes lots of paging when less-often-used parts of your app need  
to access memory.

You can tune the "swappiness" kernel parameter (http://kerneltrap.org/node/3000 
) to change how aggressively it does this.  But I've never heard of a  
corresponding way to tune Windows.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 14:04:16 2008
Return-Path: <java-user-return-35540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30036 invoked from network); 18 Aug 2008 14:04:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 14:04:16 -0000
Received: (qmail 86719 invoked by uid 500); 18 Aug 2008 14:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86679 invoked by uid 500); 18 Aug 2008 14:04:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86668 invoked by uid 99); 18 Aug 2008 14:04:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 07:04:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 14:03:10 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2352285wra.21
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 07:03:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=11WbK+YiJoTtTHrll9dnQbB10msZV+RuVKpKgza7dU4=;
        b=qv05WR7EHVgVQHHZA7OHFh+xqo7fjcuHedp3BeR5p9XI31cOSx7Ij9dyFpNeZHMMQn
         TqJKubRdCxYUGq/FnuUQVw5N5no1u1rgbowXq+HrJMmokb6AtzGjHv66SROpJLx6Oy0N
         +S+ypTiDIzd6BL0F/eZ0Azs7nATA8IT5BqDc4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=K20lSjufH1mc8vd+Zg55wyiLaoQj0qXKViKE41MWu9nbCSJCVqXB0isUmBul2qwWUz
         Ri+dKgdmVHky/J2EtO9UpjyZH7PKM9B0BVO/mOOu83CjbSvgKbFoLqW5CBSIdfIenGos
         8rYIt6NUk0njQjLYApNiII/UlrT6MEsRq+9Zw=
Received: by 10.90.80.18 with SMTP id d18mr444382agb.77.1219068201539;
        Mon, 18 Aug 2008 07:03:21 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 6sm5589255agd.37.2008.08.18.07.03.20
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 18 Aug 2008 07:03:21 -0700 (PDT)
Message-ID: <48A9812C.5000902@gmail.com>
Date: Mon, 18 Aug 2008 10:03:24 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: windows file system cache
References: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM> <48A6E295.5050400@gmail.com> <48A6E944.7040900@gmail.com>
In-Reply-To: <48A6E944.7040900@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> Mark Miller wrote:
>> Robert Stewart wrote:
>>> Anyone else run on Windows?  We have index around 26 GB in size.  
>>> Seems file system cache ends up taking up nearly all available RAM 
>>> (26 GB out of 32 GB on 64-bit box).  Lucene process is around 5 GB, 
>>> so very little left over for queries, etc, and box starts swapping 
>>> during searches.  I think changing file system cache size setting is 
>>> needed.  Anyone else have same issue?
>>>
>>>   
>> Hmmm...get more ram :)
>>
>> Windows 64-bit upped the default file system cache size from 1 gig to 
>> 1 terabyte. Your feeling the awesome effects of that upgrade I think.
>>
>> There is an API call ( SetSystemFilecache() ) to override this - so 
>> perhaps code up a C app to set it before running your Lucene app?
>>
>> - Mark
> You may actually be able to do it from the registry as well: 
> http://support.microsoft.com/kb/892589 (don't use windows anymore so 
> havn't confirmed)
>
> Info showing the change from 1 gig to 1 terabyte:
> http://support.microsoft.com/kb/294418
>
> You just want to set it to a certain percentage of what you got - 
> leaving enough to do whatever your lucene app needs to do.
Found a great page about the problem using Domino: 
http://www-1.ibm.com/support/docview.wss?uid=swg21270452

They appear to have compiled all the little bits of info that I have 
seen elsewhere, and describe the problem being fixed just as you did.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 14:29:24 2008
Return-Path: <java-user-return-35541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43911 invoked from network); 18 Aug 2008 14:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 14:29:23 -0000
Received: (qmail 29679 invoked by uid 500); 18 Aug 2008 14:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29654 invoked by uid 500); 18 Aug 2008 14:29:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29643 invoked by uid 99); 18 Aug 2008 14:29:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 07:29:15 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.32.181.16] (HELO WA4EHSOBE006.bigfish.com) (216.32.181.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 14:28:16 +0000
Received: from mail15-wa4-R.bigfish.com (10.8.14.249) by
 WA4EHSOBE006.bigfish.com (10.8.40.26) with Microsoft SMTP Server id
 8.1.240.5; Mon, 18 Aug 2008 14:28:23 +0000
Received: from mail15-wa4 (localhost.localdomain [127.0.0.1])	by
 mail15-wa4-R.bigfish.com (Postfix) with ESMTP id 8AD4E18401A8	for
 <java-user@lucene.apache.org>; Mon, 18 Aug 2008 14:28:23 +0000 (UTC)
X-BigFish: VPS-2(zz146fK168aJ3117Kzzzzz2dh6bh41i42k43j61h)
X-Spam-TCS-SCL: 0:0
X-FB-SS: 5,
Received: by mail15-wa4 (MessageSwitch) id 1219069700890109_1552; Mon, 18 Aug
 2008 14:28:20 +0000 (UCT)
Received: from us-voo-smtp04.internal.sungard.corp (unknown [216.83.166.45])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))	(No client certificate
 requested)	by mail15-wa4.bigfish.com (Postfix) with ESMTP id 9A159E1807E	for
 <java-user@lucene.apache.org>; Mon, 18 Aug 2008 14:28:20 +0000 (UTC)
Received: from us-voo-smtp12.internal.sungard.corp ([168.162.128.54]) by
 us-voo-smtp04.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 18 Aug 2008 10:28:19 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.82]) by
 us-voo-smtp12.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 18 Aug 2008 10:28:18 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9013E.A8442B17"
Subject: Testing for field existence
Date: Mon, 18 Aug 2008 10:28:17 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7037AFD96@VOO-EXCHANGE01.internal.sungard.corp>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Testing for field existence
Thread-Index: AckBPqf8dFDttyjuQ+evYPykOHgEvg==
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Aug 2008 14:28:18.0960 (UTC) FILETIME=[A8DFA900:01C9013E]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9013E.A8442B17
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hello,

=20

I am creating fields for documents like this:

=20

String name =3D ...

String value =3D ...

doc.add(new Field(name, value, Field.Store.NO,
Field.Index.UN_TOKENIZED));

=20

On the query side, sometimes I want to want to search for documents for
which a given field, say 'foo' is equal to a given value, say 'bar'.
E.g.

=20

            +foo:bar

=20

This works.

=20

But other times I just want to query to find all docuements for which a
given field exists regardless of its value.  Is there a query that I can
do for this? =20

=20

One thing I tried is to change my field creation statement like this:

=20

doc.add(new Field(name, "XXXX" + value, Field.Store.NO,
Field.Index.UN_TOKENIZED));

=20

then do a query like this:

=20

            +foo:XXXX*

=20

I thought the "XXXX" at the beginning would be necessary since I read
that you cannot query with "*" at the beginning of your query string.
Anyway, it did not work.  Is this because I'm storing the field
"UN_TOKENIZED"?  Do I need to tokenize it to to be able to query against
it with wildcards, etc.?

=20

Maybe there is a better more canonical way to do this?   I'm still
pretty new to Lucene.  Any help appreciated.

=20

regards,

=20

Bill

=20


------_=_NextPart_001_01C9013E.A8442B17--

From java-user-return-35542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 14:39:22 2008
Return-Path: <java-user-return-35542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49869 invoked from network); 18 Aug 2008 14:39:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 14:39:22 -0000
Received: (qmail 48210 invoked by uid 500); 18 Aug 2008 14:39:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47815 invoked by uid 500); 18 Aug 2008 14:39:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47804 invoked by uid 99); 18 Aug 2008 14:39:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 07:39:13 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,OBSCURED_EMAIL,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 14:38:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KV5sZ-00077r-TF
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 07:38:43 -0700
Message-ID: <19033114.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 07:38:43 -0700 (PDT)
From: nukie <stas.bandera@gmail.com>
To: java-user@lucene.apache.org
Subject: Search Result Filtering
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: stas.bandera@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi! I've made a sample program for testing lucene :
package indexer;

import com.sun.xml.internal.bind.v2.schemagen.xmlschema.Occurs;

import com.sun.xml.internal.ws.util.StringUtils;

import java.io.BufferedWriter;
import java.io.File;

import java.io.FileWriter;

import java.util.Random;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.queryParser.MultiFieldQueryParser;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.RangeFilter;
import org.apache.lucene.search.RangeQuery;
import org.apache.lucene.search.Sort;
import org.apache.lucene.search.TermQuery;

public class LuceneToster
{
  String [] makes  = {"BMW", "AUDI", "LAMBOGINI", "FIAT", "SUZUKI",
"SUBARU", "OPEL"};
  String [] models = {"QUATTRO", "A1", "A4", "M1", "PANDA", "GyBSY",
"BuzzZ", "Defender"};
  String [] milleages = {"1000", "2000", "3000", "5000", "6000", "7000",
"8000", "9000"};
  
  public LuceneToster()
  {
  }
  
  private Document generateRandomDocument()
  {
    Document doc = new Document();
    Random r = new Random();
    doc.add(new Field("Make", makes[r.nextInt(makes.length)],
Field.Store.YES, Field.Index.UN_TOKENIZED));
    doc.add(new Field("Model", models[r.nextInt(models.length)],
Field.Store.NO, Field.Index.UN_TOKENIZED));
    doc.add(new Field("Milleage", String.valueOf(r.nextInt(10000)),
Field.Store.YES, Field.Index.UN_TOKENIZED));
    for(int i = 0; i < 5; i++)
    {
      doc.add(new Field("asdasdDDDa_^^asd(8"+String.valueOf(r.nextInt(15)),
models[r.nextInt(models.length)], Field.Store.NO,
Field.Index.UN_TOKENIZED));
    }
    return doc;
  }
  
  public void generateIndex(String dir)
  {
    try
    {
      IndexWriter luceneWriter = new IndexWriter(dir, new
StandardAnalyzer(), true);
      long time = System.currentTimeMillis();
      for(int i = 0; i < 2000000; i++)
      {
        if(i%10000 == 0) 
        {
          luceneWriter.close();
          luceneWriter = new IndexWriter(dir, new StandardAnalyzer(),
false);
          System.out.println("Current i : " + String.valueOf(i));
        }
        luceneWriter.addDocument(generateRandomDocument());
      }
      long timeEst = System.currentTimeMillis() - time;
      System.out.println("Generation time : " + String.valueOf(timeEst));
      luceneWriter.optimize();
      luceneWriter.close();
    }catch(Exception e)
    {
      e.printStackTrace();
    }
  }
  
  public void doSearch(String indexDir)
  {
    try
    {
      IndexSearcher searcher = new IndexSearcher(indexDir);
      
      TermQuery audiTerm = new TermQuery(new Term("Make", "AUDI"));
      
      BooleanQuery someAudi = new BooleanQuery();
      someAudi.add(audiTerm, BooleanClause.Occur.MUST);
      Hits hits;      
      long time = System.currentTimeMillis();
      hits = searcher.search(someAudi, new RangeFilter("Milleage", "5000",
"5100", true, true));

      long newTime = System.currentTimeMillis();
      System.out.println("Search time : " + String.valueOf(newTime - time) +
" RESULT SIZE : " + String.valueOf(hits.length()));
      
      File f = new File("newf.txt");
      BufferedWriter bw = new BufferedWriter(new FileWriter("out.txt"));
      
      for(int i = 0; i < hits.length(); i++)
      {
        bw.write("Document : " +
hits.doc(i).getField("Milleage").stringValue() + "  Make: "
+hits.doc(i).get("Make") + "\n");
      }
      bw.close();
      
    }catch(Exception e)
    {
      e.printStackTrace();
    }
    
  }

  public static void main(String[] args)
  {
    LuceneToster luceneToster = new LuceneToster();
    String indexDir = args[0];
    
    if(args[1].equals("index_mode"))
    {
      luceneToster.generateIndex(indexDir);
    }else if(args[1].equals("search_mode"))
    {
      luceneToster.doSearch(indexDir);
    }else
    {
      System.out.println("Invalid arguments!");
    }
  }
}

It should give results with Milleage field being in range from 5000 to 5100
, but i have results included with 509 "Milleage" for example. As i suppose
it not correct filtering criteria ? Or it's a bug ? 
Thanks
-- 
View this message in context: http://www.nabble.com/Search-Result-Filtering-tp19033114p19033114.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 15:05:43 2008
Return-Path: <java-user-return-35543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88216 invoked from network); 18 Aug 2008 15:05:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 15:05:43 -0000
Received: (qmail 84756 invoked by uid 500); 18 Aug 2008 15:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84716 invoked by uid 500); 18 Aug 2008 15:05:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84705 invoked by uid 99); 18 Aug 2008 15:05:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 08:05:34 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=OBSCURED_EMAIL,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 15:04:35 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1033862yxj.5
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 08:05:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=pJVlAOgGUV/FlU1B7G3bF4IPy6vFu+DazF2NiBC8QCA=;
        b=IGVvZqpFjSn/6c+qyUpSiM3LS3olWTOFX4re51eZngkkgy/Aqs67P+ZlHFRraHHGC+
         OYxg0FgLwKorO9yqFi7xjgCldrRvyAB+lUxWUbZ0/LHRf5Sj06bQ4mDlWfW0iHwh5Uyb
         8xLJAQ5Fw+bfWdR+dHSYDifFcJ1CZ1YO7FNLM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=eDvV21bU1ITHlr2Q1CSTP8VQkY1bbjZimCJ5IPw0x8iofDszBmsUGRSTPB7UXO3K1r
         SPayeZsNAftaICFxW+HMiQa2v7HlfrivT+1LcqKJbDHFrL2q4NrFIGobjHjnVqCyjKip
         00I7MefZ0Mh4JAXZMk4Smkhljo2+B1s0Q7osY=
Received: by 10.115.14.1 with SMTP id r1mr5233061wai.139.1219071898542;
        Mon, 18 Aug 2008 08:04:58 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Mon, 18 Aug 2008 08:04:58 -0700 (PDT)
Message-ID: <8c4e68610808180804p389b9c1fx91303d9816e82630@mail.gmail.com>
Date: Mon, 18 Aug 2008 16:04:58 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Result Filtering
In-Reply-To: <19033114.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19033114.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Lucene range queries and filters work on string comparison, not
numeric.  You'll need to pad out any numeric fields you want to use in
a range to a consistent length.  There may be a class floating around
that does this - NumberUtils or NumberTools or something like that.


--
Ian.


On Mon, Aug 18, 2008 at 3:38 PM, nukie <stas.bandera@gmail.com> wrote:
>
> Hi! I've made a sample program for testing lucene :
> package indexer;
>
> import com.sun.xml.internal.bind.v2.schemagen.xmlschema.Occurs;
>
> import com.sun.xml.internal.ws.util.StringUtils;
>
> import java.io.BufferedWriter;
> import java.io.File;
>
> import java.io.FileWriter;
>
> import java.util.Random;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.queryParser.MultiFieldQueryParser;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.BooleanClause;
> import org.apache.lucene.search.BooleanQuery;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.RangeFilter;
> import org.apache.lucene.search.RangeQuery;
> import org.apache.lucene.search.Sort;
> import org.apache.lucene.search.TermQuery;
>
> public class LuceneToster
> {
>  String [] makes  = {"BMW", "AUDI", "LAMBOGINI", "FIAT", "SUZUKI",
> "SUBARU", "OPEL"};
>  String [] models = {"QUATTRO", "A1", "A4", "M1", "PANDA", "GyBSY",
> "BuzzZ", "Defender"};
>  String [] milleages = {"1000", "2000", "3000", "5000", "6000", "7000",
> "8000", "9000"};
>
>  public LuceneToster()
>  {
>  }
>
>  private Document generateRandomDocument()
>  {
>    Document doc = new Document();
>    Random r = new Random();
>    doc.add(new Field("Make", makes[r.nextInt(makes.length)],
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>    doc.add(new Field("Model", models[r.nextInt(models.length)],
> Field.Store.NO, Field.Index.UN_TOKENIZED));
>    doc.add(new Field("Milleage", String.valueOf(r.nextInt(10000)),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>    for(int i = 0; i < 5; i++)
>    {
>      doc.add(new Field("asdasdDDDa_^^asd(8"+String.valueOf(r.nextInt(15)),
> models[r.nextInt(models.length)], Field.Store.NO,
> Field.Index.UN_TOKENIZED));
>    }
>    return doc;
>  }
>
>  public void generateIndex(String dir)
>  {
>    try
>    {
>      IndexWriter luceneWriter = new IndexWriter(dir, new
> StandardAnalyzer(), true);
>      long time = System.currentTimeMillis();
>      for(int i = 0; i < 2000000; i++)
>      {
>        if(i%10000 == 0)
>        {
>          luceneWriter.close();
>          luceneWriter = new IndexWriter(dir, new StandardAnalyzer(),
> false);
>          System.out.println("Current i : " + String.valueOf(i));
>        }
>        luceneWriter.addDocument(generateRandomDocument());
>      }
>      long timeEst = System.currentTimeMillis() - time;
>      System.out.println("Generation time : " + String.valueOf(timeEst));
>      luceneWriter.optimize();
>      luceneWriter.close();
>    }catch(Exception e)
>    {
>      e.printStackTrace();
>    }
>  }
>
>  public void doSearch(String indexDir)
>  {
>    try
>    {
>      IndexSearcher searcher = new IndexSearcher(indexDir);
>
>      TermQuery audiTerm = new TermQuery(new Term("Make", "AUDI"));
>
>      BooleanQuery someAudi = new BooleanQuery();
>      someAudi.add(audiTerm, BooleanClause.Occur.MUST);
>      Hits hits;
>      long time = System.currentTimeMillis();
>      hits = searcher.search(someAudi, new RangeFilter("Milleage", "5000",
> "5100", true, true));
>
>      long newTime = System.currentTimeMillis();
>      System.out.println("Search time : " + String.valueOf(newTime - time) +
> " RESULT SIZE : " + String.valueOf(hits.length()));
>
>      File f = new File("newf.txt");
>      BufferedWriter bw = new BufferedWriter(new FileWriter("out.txt"));
>
>      for(int i = 0; i < hits.length(); i++)
>      {
>        bw.write("Document : " +
> hits.doc(i).getField("Milleage").stringValue() + "  Make: "
> +hits.doc(i).get("Make") + "\n");
>      }
>      bw.close();
>
>    }catch(Exception e)
>    {
>      e.printStackTrace();
>    }
>
>  }
>
>  public static void main(String[] args)
>  {
>    LuceneToster luceneToster = new LuceneToster();
>    String indexDir = args[0];
>
>    if(args[1].equals("index_mode"))
>    {
>      luceneToster.generateIndex(indexDir);
>    }else if(args[1].equals("search_mode"))
>    {
>      luceneToster.doSearch(indexDir);
>    }else
>    {
>      System.out.println("Invalid arguments!");
>    }
>  }
> }
>
> It should give results with Milleage field being in range from 5000 to 5100
> , but i have results included with 509 "Milleage" for example. As i suppose
> it not correct filtering criteria ? Or it's a bug ?
> Thanks
> --
> View this message in context: http://www.nabble.com/Search-Result-Filtering-tp19033114p19033114.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 15:45:51 2008
Return-Path: <java-user-return-35544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15971 invoked from network); 18 Aug 2008 15:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 15:45:50 -0000
Received: (qmail 42325 invoked by uid 500); 18 Aug 2008 15:45:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42301 invoked by uid 500); 18 Aug 2008 15:45:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42287 invoked by uid 99); 18 Aug 2008 15:45:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 08:45:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 15:44:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KV6uv-0001Us-37
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 08:45:13 -0700
Message-ID: <19034359.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 08:45:12 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Testing for field existence
In-Reply-To: <87D5FFD601E4BC488D51E45D414706C7037AFD96@VOO-EXCHANGE01.internal.sungard.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <87D5FFD601E4BC488D51E45D414706C7037AFD96@VOO-EXCHANGE01.internal.sungard.corp>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Bill,

you should not use prefix-query (XXXX*), because in first step lucene would
generate a list of all terms in this field, and than search for all this
terms. Which is senceless.

I would suggest to insert a new field "myFields" which contains as value the
names of all fields for this document.
So instead of
            +foo:XXXX*
you would search for
            +myFields:foo

This would be very fast.

Best regards 

  Karsten


Bill.Chesky wrote:
> 
> Hello,
> 
>  I am creating fields for documents like this:
> 
>  
> 
> String name = ...
> 
> String value = ...
> 
> doc.add(new Field(name, value, Field.Store.NO,
> Field.Index.UN_TOKENIZED));
> ... 
> 
> One thing I tried is to change my field creation statement like this:
>  
> 
> doc.add(new Field(name, "XXXX" + value, Field.Store.NO,
> Field.Index.UN_TOKENIZED));
> 
>  
> then do a query like this:
> 
> 
>             +foo:XXXX*
> 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Testing-for-field-existence-tp19032939p19034359.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 16:59:29 2008
Return-Path: <java-user-return-35545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78013 invoked from network); 18 Aug 2008 16:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 16:59:29 -0000
Received: (qmail 52489 invoked by uid 500); 18 Aug 2008 16:59:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52461 invoked by uid 500); 18 Aug 2008 16:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52450 invoked by uid 99); 18 Aug 2008 16:59:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 09:59:20 -0700
X-ASF-Spam-Status: No, hits=-2.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.46.51.80] (HELO SG2EHSOBE002.bigfish.com) (207.46.51.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 16:58:20 +0000
Received: from mail15-sin-R.bigfish.com (10.3.40.3) by
 SG2EHSOBE002.bigfish.com (10.3.40.22) with Microsoft SMTP Server id
 8.1.240.5; Mon, 18 Aug 2008 16:58:46 +0000
Received: from mail15-sin (localhost.localdomain [127.0.0.1])	by
 mail15-sin-R.bigfish.com (Postfix) with ESMTP id 0EB79AF00A1	for
 <java-user@lucene.apache.org>; Mon, 18 Aug 2008 16:58:46 +0000 (UTC)
X-BigFish: VPS-58(zz542N1432R98dR62a3L1447R1805M936fQ3117K9371P12b6izzzzz2dh6bh41i42k43j61h)
X-Spam-TCS-SCL: 0:0
Received: by mail15-sin (MessageSwitch) id 1219078723969714_15159; Mon, 18 Aug
 2008 16:58:43 +0000 (UCT)
Received: from us-voo-smtp05.internal.sungard.corp (unknown [216.83.166.46])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))	(No client certificate
 requested)	by mail15-sin.bigfish.com (Postfix) with ESMTP id 3F29F1AF8058	for
 <java-user@lucene.apache.org>; Mon, 18 Aug 2008 16:58:42 +0000 (UTC)
Received: from us-voo-smtp11.internal.sungard.corp ([168.162.128.53]) by
 us-voo-smtp05.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 18 Aug 2008 12:58:39 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.82]) by
 us-voo-smtp11.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 18 Aug 2008 12:58:39 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Testing for field existence
Date: Mon, 18 Aug 2008 12:58:37 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7037AFE59@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <19034359.post@talk.nabble.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Testing for field existence
Thread-Index: AckBSYtGtk4kywDOSF23XI3KV8GVwAACdT4g
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Aug 2008 16:58:39.0912 (UTC) FILETIME=[A9C7B280:01C90153]
X-Virus-Checked: Checked by ClamAV on apache.org


Karsten,

Thanks for the feedback.  Not sure I understand the reasoning behind not
using the "XXXX" prefix (do you have a link possibly?).  But I see what
you are getting at with the additional field.  I'll give it a try.
Thanks for the help.

regards,

Bill


-----Original Message-----
From: Karsten F. [mailto:karsten-lucene@fiz-technik.de]=20
Sent: Monday, August 18, 2008 11:45 AM
To: java-user@lucene.apache.org
Subject: Re: Testing for field existence


Hi Bill,

you should not use prefix-query (XXXX*), because in first step lucene
would
generate a list of all terms in this field, and than search for all this
terms. Which is senceless.

I would suggest to insert a new field "myFields" which contains as value
the
names of all fields for this document.
So instead of
            +foo:XXXX*
you would search for
            +myFields:foo

This would be very fast.

Best regards=20

  Karsten


Bill.Chesky wrote:
>=20
> Hello,
>=20
>  I am creating fields for documents like this:
>=20
> =20
>=20
> String name =3D ...
>=20
> String value =3D ...
>=20
> doc.add(new Field(name, value, Field.Store.NO,
> Field.Index.UN_TOKENIZED));
> ...=20
>=20
> One thing I tried is to change my field creation statement like this:
> =20
>=20
> doc.add(new Field(name, "XXXX" + value, Field.Store.NO,
> Field.Index.UN_TOKENIZED));
>=20
> =20
> then do a query like this:
>=20
>=20
>             +foo:XXXX*
>=20
>=20
>=20
>=20

--=20
View this message in context:
http://www.nabble.com/Testing-for-field-existence-tp19032939p19034359.ht
ml
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 17:06:55 2008
Return-Path: <java-user-return-35546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81897 invoked from network); 18 Aug 2008 17:06:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 17:06:55 -0000
Received: (qmail 61605 invoked by uid 500); 18 Aug 2008 17:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61559 invoked by uid 500); 18 Aug 2008 17:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61548 invoked by uid 99); 18 Aug 2008 17:06:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 10:06:46 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 17:05:47 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2870734rvb.5
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 10:06:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XZ5zBTcIjrVTbI9irS1XTeqGMJyj7qIuX9ZPRFYVUlA=;
        b=DKskQVr5UO6hp4BOKIF3S1/ib4sPeMZdGZOOxlgvAOj7ySkwrBz48uQsZ/6OjW9TnU
         vpCGd+WumzJRPNRmWjuTut7jXAbpyx34Zw7RiFSy4bXpXRWHBEgbVxotVIRrVk33vgpm
         DG/h9yh2w218nvvivS7KwGuv71MkFPO5yCEz8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MnNE41uY6nNhTNpksXx6YNNzCqoNMBmadvUV3Fs93i2QqKBqTgOyHdc/KIyjRtSnji
         webdSuMVKj+FxwBNxkn50i6XDMigo8o78J49DIsheH6ma1wMu95wBtP4WJyXWzOJSOPM
         rX1Jv1b/SQ03GY5Pc71AXsX2ZRbFKnU3js2Kg=
Received: by 10.141.97.5 with SMTP id z5mr3427417rvl.197.1219079175830;
        Mon, 18 Aug 2008 10:06:15 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Mon, 18 Aug 2008 10:06:15 -0700 (PDT)
Message-ID: <359a92830808181006k186866b6r869a6d8b72c3032c@mail.gmail.com>
Date: Mon, 18 Aug 2008 13:06:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Testing for field existence
In-Reply-To: <87D5FFD601E4BC488D51E45D414706C7037AFE59@VOO-EXCHANGE01.internal.sungard.corp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85489_30153664.1219079175805"
References: <19034359.post@talk.nabble.com>
	 <87D5FFD601E4BC488D51E45D414706C7037AFE59@VOO-EXCHANGE01.internal.sungard.corp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85489_30153664.1219079175805
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Karsten's saying that prefix and wildcard queries require a bunch of work.
Specifically, Lucene assembles a list of all terms that match the query and
then, conceptually at least, forms a huge OR query with one clause for
each term. Say, for instance, you have the following values indexed in a
field
in any number of documents.
aaaaa
aaaa
aaa
aa
a


Now you search for a*. Underneath the covers, Lucene behaves as if
you submitted a query
aaaaa OR aaaa OR aaa OR aa OR a

which can rapidly grow to a query of thousands of clauses. Avoiding this
is a good thing <G>.

Best
Erick

On Mon, Aug 18, 2008 at 12:58 PM, <Bill.Chesky@sungard.com> wrote:

>
> Karsten,
>
> Thanks for the feedback.  Not sure I understand the reasoning behind not
> using the "XXXX" prefix (do you have a link possibly?).  But I see what
> you are getting at with the additional field.  I'll give it a try.
> Thanks for the help.
>
> regards,
>
> Bill
>
>
> -----Original Message-----
> From: Karsten F. [mailto:karsten-lucene@fiz-technik.de]
> Sent: Monday, August 18, 2008 11:45 AM
> To: java-user@lucene.apache.org
> Subject: Re: Testing for field existence
>
>
> Hi Bill,
>
> you should not use prefix-query (XXXX*), because in first step lucene
> would
> generate a list of all terms in this field, and than search for all this
> terms. Which is senceless.
>
> I would suggest to insert a new field "myFields" which contains as value
> the
> names of all fields for this document.
> So instead of
>            +foo:XXXX*
> you would search for
>            +myFields:foo
>
> This would be very fast.
>
> Best regards
>
>  Karsten
>
>
> Bill.Chesky wrote:
> >
> > Hello,
> >
> >  I am creating fields for documents like this:
> >
> >
> >
> > String name = ...
> >
> > String value = ...
> >
> > doc.add(new Field(name, value, Field.Store.NO,
> > Field.Index.UN_TOKENIZED));
> > ...
> >
> > One thing I tried is to change my field creation statement like this:
> >
> >
> > doc.add(new Field(name, "XXXX" + value, Field.Store.NO,
> > Field.Index.UN_TOKENIZED));
> >
> >
> > then do a query like this:
> >
> >
> >             +foo:XXXX*
> >
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Testing-for-field-existence-tp19032939p19034359.ht
> ml<http://www.nabble.com/Testing-for-field-existence-tp19032939p19034359.html>
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_85489_30153664.1219079175805--

From java-user-return-35547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 18:07:29 2008
Return-Path: <java-user-return-35547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20296 invoked from network); 18 Aug 2008 18:07:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 18:07:29 -0000
Received: (qmail 45951 invoked by uid 500); 18 Aug 2008 18:07:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45922 invoked by uid 500); 18 Aug 2008 18:07:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45911 invoked by uid 99); 18 Aug 2008 18:07:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 11:07:21 -0700
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 18:06:22 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Testing for field existence
Date: Mon, 18 Aug 2008 14:06:45 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A13B@SUEXCL-02.ad.syr.edu>
In-Reply-To: <19034359.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Testing for field existence
Thread-Index: AckBSYJ77/Su0f0ZQvK1BVtKoEy6MwADJrrQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Bill,

A simpler suggestion, assuming you need to test for the existence of =
just one particular field: rather than adding a field containing a list =
of all indexed fields for a particular document, as Karsten suggested, =
you could just add a field with a constant value when the field you want =
to test for is present for a particular document.

For example, if "foo" is a field you want to test for, and a document =
contains:

   foo:bar

you could add a new field "foo.present", with a constant value, to the =
document:

   foo.present:true

and then when querying:

   +foo.present:true

Steve

On 08/18/2008 at 11:45 AM, Karsten F. wrote:
> Hi Bill,
>=20
> you should not use prefix-query (XXXX*), because in first
> step lucene would generate a list of all terms in this field,
> and than search for all this terms. Which is senceless.
>=20
> I would suggest to insert a new field "myFields" which
> contains as value the names of all fields for this document.
> So instead of
>             +foo:XXXX*
> you would search for
>             +myFields:foo
>=20
> This would be very fast.
>=20
> Best regards
>=20
>   Karsten
>=20
> Bill.Chesky wrote:
> >=20
> > Hello,
> >=20
> >  I am creating fields for documents like this:
> >=20
> > String name =3D ...
> >=20
> > String value =3D ...
> >=20
> > doc.add(new Field(name, value, Field.Store.NO, =
Field.Index.UN_TOKENIZED));
> > ...
> >=20
> > One thing I tried is to change my field creation statement like =
this:
> >=20
> > doc.add(new Field(name, "XXXX" + value, Field.Store.NO,
> > Field.Index.UN_TOKENIZED));
> >=20
> > then do a query like this:
> >=20
> >=20
> >             +foo:XXXX*
> >=20
>=20
> -- View this message in context:
> http://www.nabble.com/Testing-for-field-existence-tp19032939p1
> 9034359.html Sent from the Lucene - Java Users mailing list archive at
> Nabble.com.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 18:42:42 2008
Return-Path: <java-user-return-35548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54415 invoked from network); 18 Aug 2008 18:42:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 18:42:41 -0000
Received: (qmail 89505 invoked by uid 500); 18 Aug 2008 18:42:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89473 invoked by uid 500); 18 Aug 2008 18:42:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89462 invoked by uid 99); 18 Aug 2008 18:42:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 11:42:33 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Aug 2008 18:41:34 +0000
Received: (qmail 66506 invoked by uid 60001); 18 Aug 2008 18:42:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=a9w4MnWC5YsMN2SvXxafav3SEkjEtwNR/n2E0/ENhjAr8S6dKQtVqa1aLaUJVDB5yB7nlXGxKsZTJjEC8lmXj3dftqMkoxTJWYmUKwoFv0eRqpWEchmqkaFFtBUzGq640u2KI5h4YVkhoNczcDj/cGfZY5Yb5BcqoBvdDJgb/cs=;
Received: from [65.200.144.21] by web50310.mail.re2.yahoo.com via HTTP; Mon, 18 Aug 2008 11:42:01 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Mon, 18 Aug 2008 11:42:01 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index of Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <827289.65825.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Is that really 1 byte for each document?  Not 1 byte for each field of each document?

Thanks,
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Doron Cohen <cdoronc@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, August 18, 2008 12:11:28 AM
> Subject: Re: Index of Lucene
> 
> Norms information comes mainly from lengths of documents - allowing the
> search time scoring to take into account the effect of document lengths
> (actually
> field length within a document). In practice, norms stored within the index
> may include
> other information, such as index time boosts - for a document, for a field.
> A single
> byte is stored for each field, - so for this the actual value is compressed.
> At search
> time, norms are loaded into memory, and so consume 1 byte for each document.
> It is possible to disable norms for a field while indexing. This is
> explained
> better in the javadoc for Similarity, and here:
> http://lucene.apache.org/java/2_3_2/scoring.html
> 
> Doron
> 
> On Mon, Aug 18, 2008 at 5:59 AM, blazingwolf7 wrote:
> 
> >
> > Hi,
> >
> > I am currently using Lucene for indexing. After a index a file, I will use
> > LUKE to open it and check the index. And there is 1 part that I am curious
> > about. In Luke, under the Document tab, I randomly select a document and
> > display it. At the bottom will be 4 columns, Field, ITSVopLBC, Norm and
> > String Value.
> >
> > I am wondering, what is Norm for? And where is it created during indexing
> > time? Which method calculates it?
> >
> > Could anyone advise me on this? Thanks for the help
> > --
> > View this message in context:
> > http://www.nabble.com/Index-of-Lucene-tp19025490p19025490.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 18:47:18 2008
Return-Path: <java-user-return-35549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57981 invoked from network); 18 Aug 2008 18:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 18:47:18 -0000
Received: (qmail 95368 invoked by uid 500); 18 Aug 2008 18:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95333 invoked by uid 500); 18 Aug 2008 18:47:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95322 invoked by uid 99); 18 Aug 2008 18:47:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 11:47:10 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Aug 2008 18:46:11 +0000
Received: (qmail 46765 invoked by uid 60001); 18 Aug 2008 18:45:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=lcYtG0cR6nBR9Y9I5UPCVsV9RzJXMXhL1MU779oYZTr1duu5efBu1ovWKT14Rp/tEq2IIOtiDIuluW1ojxzw4QKPczOLH2jdjV7biZdX/9tdnMEEaxY9c9EEok2LfpxfgcM2FBgccoaMhNLhIix3jo1dE7hc0IrlqQb3M/sy+kM=;
X-YMail-OSG: wAx4i_YVM1l45ShmLf9qUtvdXUQLxsesfyc5yR2vqnLcZU92hj_KVBu_VsSnXNSK0idn3oIqjv27TBnXsD1dNtxiRwnq8oD0_qRF6.7EjwfQ_OI_JmwJzIY8eSNYVfjHKZ28a85THbWUw9fN.WfgREw-
Received: from [65.200.144.21] by web50304.mail.re2.yahoo.com via HTTP; Mon, 18 Aug 2008 11:45:39 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Mon, 18 Aug 2008 11:45:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Appropriate disk optimization for large index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <420493.45261.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Matt,

One important bit that you didn't mention is what your maxBufferedSize setting is.  If it's too low you will see lots of IO.  Increasing it means less IO, but more JVM heap need.  Is your disk IO caused by searches or indexing only?

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: mattspitz <mspitz@stanford.edu>
> To: java-user@lucene.apache.org
> Sent: Saturday, August 16, 2008 4:07:52 AM
> Subject: Appropriate disk optimization for large index?
> 
> 
> Hi!  I'm using Lucene 2.3.2 to store a relatively-large index of HTML
> documents.  I'm storing ~150 million documents, taking up 150 GB of space.
> 
> I index the HTML text, but I only store primary key information that allows
> me to retrieve it later.  Thus, my document size is small, but obviously, I
> need to store the index as well, and I imagine that's what takes up almost
> all of the space.
> 
> Since I allow users to search this HTML specific to their user index, I
> create multiple indexes (~2000) such that a given user only has to search
> one of the 2000 indexes to get to their specific document.  I also have
> queries that span all 2000 indexes.
> 
> So, I have 2000 indexes full of small documents but relatively large
> indexing space.
> 
> My question is what sort of disk to buy.  Using "dstat", I've determined
> that the disk is clearly the bottleneck.  Nearly all the time I spend
> indexing "chunks" of documents and committing them to disk is spent waiting
> on I/O operations.  I spawn multiple threads to access the various index
> writers so as to minimize I/O wait time, but disk always ends up being the
> problem.
> 
> Currently, I've got 7200rpm SATA drives (RAID 0), but I've also got 15k SAS
> drives (RAID 0 as well) on hand.
> 
> My question is, what's the access pattern of Lucene when it comes to
> indexing documents, merging segments, and eventually optimizing them (given
> what I've mentioned about document count and document size)?
> 
> Am I better off with a drive that has a faster seek time, or do I need to
> optimize for sustained throughput?  How does the way in which Lucene lays
> indexes on disk affect this?
> 
> If it helps, my merge factor is 50, and given that I run out of file
> descriptors otherwise, I use the compound file format.
> 
> Thanks for your help,
> Matt
> -- 
> View this message in context: 
> http://www.nabble.com/Appropriate-disk-optimization-for-large-index--tp19009580p19009580.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 19:30:55 2008
Return-Path: <java-user-return-35550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89365 invoked from network); 18 Aug 2008 19:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 19:30:54 -0000
Received: (qmail 76654 invoked by uid 500); 18 Aug 2008 19:30:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76625 invoked by uid 500); 18 Aug 2008 19:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76614 invoked by uid 99); 18 Aug 2008 19:30:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 12:30:46 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 19:29:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KVAQi-0001lR-Ih
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 12:30:16 -0700
Message-ID: <19038372.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 12:30:16 -0700 (PDT)
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Subject: Re: Appropriate disk optimization for large index?
In-Reply-To: <420493.45261.qm@web50304.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mspitz@stanford.edu
References: <19009580.post@talk.nabble.com> <420493.45261.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


So, my indexing is done in "rounds", where I pull a bunch of documents from
the database, index them, and flush them to disk.  I manually call "flush()"
because I need to ensure that what's on disk is accurate with what I've
pulled from the database.

On each round, then, I flush to disk.  I set the buffer such that it doesn't
flush any segments until I manually call flush(), so as to incur I/O only
once each "round"

Thanks for your help,
Matt


Otis Gospodnetic wrote:
> 
> Matt,
> 
> One important bit that you didn't mention is what your maxBufferedSize
> setting is.  If it's too low you will see lots of IO.  Increasing it means
> less IO, but more JVM heap need.  Is your disk IO caused by searches or
> indexing only?
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> 
> ----- Original Message ----
>> From: mattspitz <mspitz@stanford.edu>
>> To: java-user@lucene.apache.org
>> Sent: Saturday, August 16, 2008 4:07:52 AM
>> Subject: Appropriate disk optimization for large index?
>> 
>> 
>> Hi!  I'm using Lucene 2.3.2 to store a relatively-large index of HTML
>> documents.  I'm storing ~150 million documents, taking up 150 GB of
>> space.
>> 
>> I index the HTML text, but I only store primary key information that
>> allows
>> me to retrieve it later.  Thus, my document size is small, but obviously,
>> I
>> need to store the index as well, and I imagine that's what takes up
>> almost
>> all of the space.
>> 
>> Since I allow users to search this HTML specific to their user index, I
>> create multiple indexes (~2000) such that a given user only has to search
>> one of the 2000 indexes to get to their specific document.  I also have
>> queries that span all 2000 indexes.
>> 
>> So, I have 2000 indexes full of small documents but relatively large
>> indexing space.
>> 
>> My question is what sort of disk to buy.  Using "dstat", I've determined
>> that the disk is clearly the bottleneck.  Nearly all the time I spend
>> indexing "chunks" of documents and committing them to disk is spent
>> waiting
>> on I/O operations.  I spawn multiple threads to access the various index
>> writers so as to minimize I/O wait time, but disk always ends up being
>> the
>> problem.
>> 
>> Currently, I've got 7200rpm SATA drives (RAID 0), but I've also got 15k
>> SAS
>> drives (RAID 0 as well) on hand.
>> 
>> My question is, what's the access pattern of Lucene when it comes to
>> indexing documents, merging segments, and eventually optimizing them
>> (given
>> what I've mentioned about document count and document size)?
>> 
>> Am I better off with a drive that has a faster seek time, or do I need to
>> optimize for sustained throughput?  How does the way in which Lucene lays
>> indexes on disk affect this?
>> 
>> If it helps, my merge factor is 50, and given that I run out of file
>> descriptors otherwise, I use the compound file format.
>> 
>> Thanks for your help,
>> Matt
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Appropriate-disk-optimization-for-large-index--tp19009580p19009580.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Appropriate-disk-optimization-for-large-index--tp19009580p19038372.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 20:55:02 2008
Return-Path: <java-user-return-35551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36489 invoked from network); 18 Aug 2008 20:55:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 20:55:01 -0000
Received: (qmail 46593 invoked by uid 500); 18 Aug 2008 20:54:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46554 invoked by uid 500); 18 Aug 2008 20:54:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46543 invoked by uid 99); 18 Aug 2008 20:54:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 13:54:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.179] (HELO el-out-1112.google.com) (209.85.162.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 20:53:55 +0000
Received: by el-out-1112.google.com with SMTP id m34so64755ele.14
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 13:54:12 -0700 (PDT)
Received: by 10.142.188.4 with SMTP id l4mr2217064wff.183.1219092851762;
        Mon, 18 Aug 2008 13:54:11 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 32sm1495336wfc.12.2008.08.18.13.54.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 18 Aug 2008 13:54:11 -0700 (PDT)
Message-Id: <0EDBC83F-FE47-45B3-86F6-28D147644456@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19038372.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Appropriate disk optimization for large index?
Date: Mon, 18 Aug 2008 16:54:09 -0400
References: <19009580.post@talk.nabble.com> <420493.45261.qm@web50304.mail.re2.yahoo.com> <19038372.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


mattspitz wrote:

> So, my indexing is done in "rounds", where I pull a bunch of  
> documents from
> the database, index them, and flush them to disk.  I manually call  
> "flush()"
> because I need to ensure that what's on disk is accurate with what  
> I've
> pulled from the database.
>
> On each round, then, I flush to disk.  I set the buffer such that it  
> doesn't
> flush any segments until I manually call flush(), so as to incur I/O  
> only
> once each "round"

Make sure once you upgrade to 2.4 (or trunk) that you switch to  
commit() instead of flush() because flush() doesn't sync the index  
files, so if the hardware or OS crashes your index will not match  
what's in the DB (and/or may become corrupt).

I'm not sure which of seek time vs throughput is best to optimize in  
your IO system.  On flushing a segment you'd likely want the fastest  
throughput, assuming the filesystem is able to assign many adjacent  
blocks to the files being flushed.  During merging (and optimize) I  
think seek time is most important, because Lucene reads from 50 (your  
mergeFactor) files at once and then writes to one or two files.  But,  
this (at least normal merging) is typically done concurrently with  
adding documents, so the time consumed may not matter in the net  
runtime of the overall indexing process.  When a flush happens during  
a merge, seek time is likely most important.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 21:18:09 2008
Return-Path: <java-user-return-35552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43154 invoked from network); 18 Aug 2008 21:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 21:18:09 -0000
Received: (qmail 83227 invoked by uid 500); 18 Aug 2008 21:18:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83206 invoked by uid 500); 18 Aug 2008 21:18:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83195 invoked by uid 99); 18 Aug 2008 21:18:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 14:18:01 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 21:17:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KVC6W-0006gs-24
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 14:17:32 -0700
Message-ID: <19040147.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 14:17:32 -0700 (PDT)
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Subject: Re: Appropriate disk optimization for large index?
In-Reply-To: <0EDBC83F-FE47-45B3-86F6-28D147644456@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mspitz@stanford.edu
References: <19009580.post@talk.nabble.com> <420493.45261.qm@web50304.mail.re2.yahoo.com> <19038372.post@talk.nabble.com> <0EDBC83F-FE47-45B3-86F6-28D147644456@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Mike-

Are the index files synced on writer.close()?

Thank you so much for your help.  I think the seek time is the issue,
especially considering the high merge factor and the fact that the segments
are scattered all over the disk.

Will a faster disk cache access affect the optimization and merging?  I
don't really have a sense for what of the segments are kept in memory during
a merge.  It doesn't make sense to me that Lucene would pull all of the
segments into memory to merge them, but I don't really know how.

Thank you so much,
Matt

Michael McCandless-2 wrote:
> 
> 
> mattspitz wrote:
> 
>> So, my indexing is done in "rounds", where I pull a bunch of  
>> documents from
>> the database, index them, and flush them to disk.  I manually call  
>> "flush()"
>> because I need to ensure that what's on disk is accurate with what  
>> I've
>> pulled from the database.
>>
>> On each round, then, I flush to disk.  I set the buffer such that it  
>> doesn't
>> flush any segments until I manually call flush(), so as to incur I/O  
>> only
>> once each "round"
> 
> Make sure once you upgrade to 2.4 (or trunk) that you switch to  
> commit() instead of flush() because flush() doesn't sync the index  
> files, so if the hardware or OS crashes your index will not match  
> what's in the DB (and/or may become corrupt).
> 
> I'm not sure which of seek time vs throughput is best to optimize in  
> your IO system.  On flushing a segment you'd likely want the fastest  
> throughput, assuming the filesystem is able to assign many adjacent  
> blocks to the files being flushed.  During merging (and optimize) I  
> think seek time is most important, because Lucene reads from 50 (your  
> mergeFactor) files at once and then writes to one or two files.  But,  
> this (at least normal merging) is typically done concurrently with  
> adding documents, so the time consumed may not matter in the net  
> runtime of the overall indexing process.  When a flush happens during  
> a merge, seek time is likely most important.
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Appropriate-disk-optimization-for-large-index--tp19009580p19040147.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 21:24:16 2008
Return-Path: <java-user-return-35553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48111 invoked from network); 18 Aug 2008 21:24:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 21:24:16 -0000
Received: (qmail 91109 invoked by uid 500); 18 Aug 2008 21:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91079 invoked by uid 500); 18 Aug 2008 21:24:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91068 invoked by uid 99); 18 Aug 2008 21:24:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 14:24:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 21:23:11 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2543431wra.21
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 14:23:39 -0700 (PDT)
Received: by 10.90.103.3 with SMTP id a3mr8456004agc.5.1219094619075;
        Mon, 18 Aug 2008 14:23:39 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 8sm7137498hsp.4.2008.08.18.14.23.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 18 Aug 2008 14:23:38 -0700 (PDT)
Message-Id: <09903B91-D374-4EC8-A192-C495CFC8CC5E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19040147.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Appropriate disk optimization for large index?
Date: Mon, 18 Aug 2008 17:23:36 -0400
References: <19009580.post@talk.nabble.com> <420493.45261.qm@web50304.mail.re2.yahoo.com> <19038372.post@talk.nabble.com> <0EDBC83F-FE47-45B3-86F6-28D147644456@mikemccandless.com> <19040147.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


mattspitz wrote:

> Are the index files synced on writer.close()?

No, they aren't.  Not until 2.4 (trunk).

> Thank you so much for your help.  I think the seek time is the issue,
> especially considering the high merge factor and the fact that the  
> segments
> are scattered all over the disk.

You're welcome!  I agree: optimizing seek time seems likely to be the  
biggest win.

> Will a faster disk cache access affect the optimization and  
> merging?  I
> don't really have a sense for what of the segments are kept in  
> memory during
> a merge.  It doesn't make sense to me that Lucene would pull all of  
> the
> segments into memory to merge them, but I don't really know how.

Segments aren't kept in memory during merging... it's more like a  
cursor that sweeps through each of the files for the 50 segments being  
merged.  Lucene does buffer its reads, so we read a chunk into RAM and  
then pull bits off that chunk.  And the OS does readahead.  But  
otherwise it's all on disk and we make a single sweep through each of  
the segments to be merged.

So I wouldn't expect the disk cache's performance to impact Lucene,  
during merging or flushing.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 21:28:09 2008
Return-Path: <java-user-return-35554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52172 invoked from network); 18 Aug 2008 21:28:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 21:28:09 -0000
Received: (qmail 99588 invoked by uid 500); 18 Aug 2008 21:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99449 invoked by uid 500); 18 Aug 2008 21:27:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99438 invoked by uid 99); 18 Aug 2008 21:27:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 14:27:59 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 21:27:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KVCGA-00077v-Ac
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 14:27:30 -0700
Message-ID: <19040324.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 14:27:30 -0700 (PDT)
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Subject: Re: Appropriate disk optimization for large index?
In-Reply-To: <09903B91-D374-4EC8-A192-C495CFC8CC5E@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mspitz@stanford.edu
References: <19009580.post@talk.nabble.com> <420493.45261.qm@web50304.mail.re2.yahoo.com> <19038372.post@talk.nabble.com> <0EDBC83F-FE47-45B3-86F6-28D147644456@mikemccandless.com> <19040147.post@talk.nabble.com> <09903B91-D374-4EC8-A192-C495CFC8CC5E@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your replies!

Is there no way to ensure consistency on the disk with 2.3.2?

This is a little off-topic, but is it worth upgrading to 2.4 right now if
I've got a very stable system already implemented with 2.3.2?  I don't
really want to introduce oddities because I'm using an "unfinished" version
of Lucene.  Is there a rough date for 2.4's release?  I poked around the
website and couldn't find one.

Thanks,
Matt


Michael McCandless-2 wrote:
> 
> 
> mattspitz wrote:
> 
>> Are the index files synced on writer.close()?
> 
> No, they aren't.  Not until 2.4 (trunk).
> 
>> Thank you so much for your help.  I think the seek time is the issue,
>> especially considering the high merge factor and the fact that the  
>> segments
>> are scattered all over the disk.
> 
> You're welcome!  I agree: optimizing seek time seems likely to be the  
> biggest win.
> 
>> Will a faster disk cache access affect the optimization and  
>> merging?  I
>> don't really have a sense for what of the segments are kept in  
>> memory during
>> a merge.  It doesn't make sense to me that Lucene would pull all of  
>> the
>> segments into memory to merge them, but I don't really know how.
> 
> Segments aren't kept in memory during merging... it's more like a  
> cursor that sweeps through each of the files for the 50 segments being  
> merged.  Lucene does buffer its reads, so we read a chunk into RAM and  
> then pull bits off that chunk.  And the OS does readahead.  But  
> otherwise it's all on disk and we make a single sweep through each of  
> the segments to be merged.
> 
> So I wouldn't expect the disk cache's performance to impact Lucene,  
> during merging or flushing.
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Appropriate-disk-optimization-for-large-index--tp19009580p19040324.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 21:37:17 2008
Return-Path: <java-user-return-35555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58166 invoked from network); 18 Aug 2008 21:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 21:37:17 -0000
Received: (qmail 11026 invoked by uid 500); 18 Aug 2008 21:37:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10989 invoked by uid 500); 18 Aug 2008 21:37:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10976 invoked by uid 99); 18 Aug 2008 21:37:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 14:37:09 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 21:36:12 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2548911wra.21
        for <java-user@lucene.apache.org>; Mon, 18 Aug 2008 14:36:21 -0700 (PDT)
Received: by 10.90.102.15 with SMTP id z15mr8482727agb.51.1219095381285;
        Mon, 18 Aug 2008 14:36:21 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id q34sm1190963wrq.33.2008.08.18.14.36.20
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 18 Aug 2008 14:36:20 -0700 (PDT)
Message-Id: <127D2EAE-F916-42BA-866B-8BF004A9AE41@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19040324.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Appropriate disk optimization for large index?
Date: Mon, 18 Aug 2008 17:36:19 -0400
References: <19009580.post@talk.nabble.com> <420493.45261.qm@web50304.mail.re2.yahoo.com> <19038372.post@talk.nabble.com> <0EDBC83F-FE47-45B3-86F6-28D147644456@mikemccandless.com> <19040147.post@talk.nabble.com> <09903B91-D374-4EC8-A192-C495CFC8CC5E@mikemccandless.com> <19040324.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


mattspitz wrote:

> Is there no way to ensure consistency on the disk with 2.3.2?

Unfortunately no.

> This is a little off-topic, but is it worth upgrading to 2.4 right  
> now if
> I've got a very stable system already implemented with 2.3.2?  I don't
> really want to introduce oddities because I'm using an "unfinished"  
> version
> of Lucene.  Is there a rough date for 2.4's release?  I poked around  
> the
> website and couldn't find one.

The trunk should be a drop-in replacement for 2.3.2, api-wise.  But it  
is not yet released, and there've been alot of changes, so it's  
entirely possible there are bugs lurking.

Unfortunately no date yet, but I agree we should do a release soon.   
It's been a good while (7 months) since 2.3.0 was released, and there  
are a number of improvements in 2.4.  We talked a while back on the  
dev list about doing releases more frequently.  I'll start a thread on  
the dev list to see what people think...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 21:39:47 2008
Return-Path: <java-user-return-35556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59727 invoked from network); 18 Aug 2008 21:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 21:39:47 -0000
Received: (qmail 15687 invoked by uid 500); 18 Aug 2008 21:39:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15657 invoked by uid 500); 18 Aug 2008 21:39:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15646 invoked by uid 99); 18 Aug 2008 21:39:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 14:39:39 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 21:38:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KVCRQ-0007cr-Sh
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 14:39:09 -0700
Message-ID: <19040519.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 14:39:08 -0700 (PDT)
From: mattspitz <mspitz@stanford.edu>
To: java-user@lucene.apache.org
Subject: Re: Appropriate disk optimization for large index?
In-Reply-To: <127D2EAE-F916-42BA-866B-8BF004A9AE41@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mspitz@stanford.edu
References: <19009580.post@talk.nabble.com> <420493.45261.qm@web50304.mail.re2.yahoo.com> <19038372.post@talk.nabble.com> <0EDBC83F-FE47-45B3-86F6-28D147644456@mikemccandless.com> <19040147.post@talk.nabble.com> <09903B91-D374-4EC8-A192-C495CFC8CC5E@mikemccandless.com> <19040324.post@talk.nabble.com> <127D2EAE-F916-42BA-866B-8BF004A9AE41@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Mmmkay.  I think I'll wait, then.

Thank you so much for your help.  I really appreciate it.

Also, I really dig Lucene, so thanks for your hard work!

-Matt

Michael McCandless-2 wrote:
> 
> 
> mattspitz wrote:
> 
>> Is there no way to ensure consistency on the disk with 2.3.2?
> 
> Unfortunately no.
> 
>> This is a little off-topic, but is it worth upgrading to 2.4 right  
>> now if
>> I've got a very stable system already implemented with 2.3.2?  I don't
>> really want to introduce oddities because I'm using an "unfinished"  
>> version
>> of Lucene.  Is there a rough date for 2.4's release?  I poked around  
>> the
>> website and couldn't find one.
> 
> The trunk should be a drop-in replacement for 2.3.2, api-wise.  But it  
> is not yet released, and there've been alot of changes, so it's  
> entirely possible there are bugs lurking.
> 
> Unfortunately no date yet, but I agree we should do a release soon.   
> It's been a good while (7 months) since 2.3.0 was released, and there  
> are a number of improvements in 2.4.  We talked a while back on the  
> dev list about doing releases more frequently.  I'll start a thread on  
> the dev list to see what people think...
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Appropriate-disk-optimization-for-large-index--tp19009580p19040519.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 23:16:28 2008
Return-Path: <java-user-return-35557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22769 invoked from network); 18 Aug 2008 23:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 23:16:28 -0000
Received: (qmail 99691 invoked by uid 500); 18 Aug 2008 23:16:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99577 invoked by uid 500); 18 Aug 2008 23:16:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99566 invoked by uid 99); 18 Aug 2008 23:16:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 16:16:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 23:15:23 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7INFh9g011382
	for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 02:15:43 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m76_-kaw; 19 Aug 2008 02:15:00 +0300
Message-ID: <48AA029B.4060707@teamware.com>
Date: Tue, 19 Aug 2008 09:15:39 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fields with the same name?? - Was Re: Payloads and tokenizers
References: <48A3A2F8.50802@teamware.com>	 <e05f0fd10808140317s48cf8943s740b7ce6debdc86c@mail.gmail.com>	 <48A4DD43.7080201@teamware.com>	 <e05f0fd10808170941i67489536wf4548877f7368a6@mail.gmail.com>	 <48A8FD6F.7080105@teamware.com> <e05f0fd10808180002h3df287b2w96e1ed87697d0300@mail.gmail.com>
In-Reply-To: <e05f0fd10808180002h3df287b2w96e1ed87697d0300@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 19 Aug 2008 02:15:43 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> The API definitely doesn't promise this.
> AFAIK implementation wise it happens to be like this but I can be wrong and
> plus it might change in the future. It would make me nervous to rely on
> this.


I made some tests and it 'seems' to work, but I agree, it also makes me nervous 
to rely on empirical evidence for the design rather than a clearly documented API!


> Anyhow, for your need I can think of two options:
> 
> Option 1:  just index the owenerID, do not store it, do not index or store
> accessID (unless you wish to search by it, in this case just index it). In
> addition store a dedicated mapping field that maps from ownerID to accessID.
> E.g. with serialization of HashMap or something thinner. At runtime retrieve
> this map from the document and it has all that information.


Hey that's an interesting idea!  I'd not considered storing the mapping, only 
re-creating it from fields at runtime.  I'll explore this.


> Option 2: as you describe above, just index the ownerID with accessID as
> payload, and then for the hitting docid of interest use termPositions to get
> the payload, i.e. something like:
>     TermPositions tp = reader.termPositions();
>     tp.seek(new Term("ownerID",oid));
>     tp.skipTo(docid);
>     tp.nextPosition();
>     if (tp.isPayloadAvailable()) {
>       byte [] accessIDBytes = tp.getPayload(...);
>       ...

Yes, I was playing with this technique yesterday.  It's not easy to determine 
the performance implications of this method.  I will be using caches, but my 
volumes are potentially so large that I may never be able to cache everything 
(perhaps 500M Docs), so this has to be very quick.

I'll play with both approaches and see which works best.

Thanks for you time and I appreciate your valuable insight Doron.
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 18 23:37:56 2008
Return-Path: <java-user-return-35558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37785 invoked from network); 18 Aug 2008 23:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2008 23:37:56 -0000
Received: (qmail 17771 invoked by uid 500); 18 Aug 2008 23:37:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17726 invoked by uid 500); 18 Aug 2008 23:37:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17713 invoked by uid 99); 18 Aug 2008 23:37:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 16:37:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 23:36:53 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 71EBA4ED8CA
	for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 09:36:56 +1000 (EST)
Message-ID: <48AA07CE.8080900@nuix.com>
Date: Tue, 19 Aug 2008 09:37:50 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Testing for field existence
References: <87D5FFD601E4BC488D51E45D414706C7037AFD96@VOO-EXCHANGE01.internal.sungard.corp> <19034359.post@talk.nabble.com>
In-Reply-To: <19034359.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Karsten F. wrote:
> Hi Bill,
> 
> you should not use prefix-query (XXXX*), because in first step lucene would
> generate a list of all terms in this field, and than search for all this
> terms. Which is senceless.

That's not quite an accurate description of what it does as it nowhere 
near as slow as doing a query for each term one by one, but yes, it's 
inefficient.  You can use a PrefixFilter to do much the same thing in a 
somewhat quicker fashion, although it still takes a little more time 
than having a new field.

This may help if adding a new field is impractical (e.g. if you have to 
support older text indexes.)

Daniel

-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 00:35:36 2008
Return-Path: <java-user-return-35559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76551 invoked from network); 19 Aug 2008 00:35:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 00:35:36 -0000
Received: (qmail 45377 invoked by uid 500); 19 Aug 2008 00:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45120 invoked by uid 500); 19 Aug 2008 00:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45109 invoked by uid 99); 19 Aug 2008 00:35:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 17:35:28 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 00:34:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KVFBb-00065s-C0
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 17:34:59 -0700
Message-ID: <19042444.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 17:34:59 -0700 (PDT)
From: DanaWhite <philrymek@comcast.net>
To: java-user@lucene.apache.org
Subject: Simple Query Question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: philrymek@comcast.net
X-Virus-Checked: Checked by ClamAV on apache.org


For some reason I am thinking I read somewhere that if you queried something
like:

"Eiffel Tower"

Lucene would execute the query "Eiffel AND Tower"

Basically I am trying to ask, does lucene automatically replaces spaces with
the AND operator?

Thanks
Dana
-- 
View this message in context: http://www.nabble.com/Simple-Query-Question-tp19042444p19042444.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 02:34:44 2008
Return-Path: <java-user-return-35560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76432 invoked from network); 19 Aug 2008 02:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 02:34:44 -0000
Received: (qmail 46142 invoked by uid 500); 19 Aug 2008 02:34:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46107 invoked by uid 500); 19 Aug 2008 02:34:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46096 invoked by uid 99); 19 Aug 2008 02:34:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 19:34:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 02:33:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KVH2t-0001Ly-TV
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 19:34:07 -0700
Message-ID: <19043404.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 19:34:07 -0700 (PDT)
From: Cyndy <cmunoz@mit.edu>
To: java-user@lucene.apache.org
Subject: Multiple index performance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cmunoz@mit.edu
X-Virus-Checked: Checked by ClamAV on apache.org


Hello, I am new into Lucene and I want to make sure what I am trying to do
will not hit performance. My scenario is the following:

I want to keep user text files indexed separately, I will have about 10,000
users and each user may have about 20,000 short files, and I need to keep
privacy. So the idea is to have one folder with the text files and  index
for each user, so when search will be done, it will be pointing to the
corresponding file directory. Would this approach hit performance? is this a
good solution? Any recommendation?

Thanks in advance. 


-- 
View this message in context: http://www.nabble.com/Multiple-index-performance-tp19043404p19043404.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 02:44:43 2008
Return-Path: <java-user-return-35561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81480 invoked from network); 19 Aug 2008 02:44:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 02:44:41 -0000
Received: (qmail 56796 invoked by uid 500); 19 Aug 2008 02:44:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56766 invoked by uid 500); 19 Aug 2008 02:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56755 invoked by uid 99); 19 Aug 2008 02:44:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 19:44:33 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 02:43:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KVHCW-0001dq-59
	for java-user@lucene.apache.org; Mon, 18 Aug 2008 19:44:04 -0700
Message-ID: <19043489.post@talk.nabble.com>
Date: Mon, 18 Aug 2008 19:44:04 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Score Boosting
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 

I am currently working on the calculation of score part in Lucene. And I
encounter a part that I do not understand. 
    return raw * Similarity.decodeNorm(norms[doc]); // normalize for field

As can be seen from the code above, the Similarity method decodeNorm() will
be called to decode the byte formatted value to change it back into float
value. This value actually represent the normalization value for the fields;
title, url, content, host and anchor. 

I would like to know how it actually select the field to be included in the
calculation. When I print out the value, I noticed only one of the field
will be selected. Can anyone advise me on this? How the field is selected,
and why not all the field is used in the calculation?

Thanks
-- 
View this message in context: http://www.nabble.com/Score-Boosting-tp19043489p19043489.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 04:01:48 2008
Return-Path: <java-user-return-35562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26103 invoked from network); 19 Aug 2008 04:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 04:01:47 -0000
Received: (qmail 6416 invoked by uid 500); 19 Aug 2008 04:01:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6385 invoked by uid 500); 19 Aug 2008 04:01:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6373 invoked by uid 99); 19 Aug 2008 04:01:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 21:01:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 04:00:41 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7J3wxlK021363
	for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 06:58:59 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id mw6hu8z0; 19 Aug 2008 06:58:00 +0300
Message-ID: <48AA44E4.1060503@teamware.com>
Date: Tue, 19 Aug 2008 13:58:28 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple index performance
References: <19043404.post@talk.nabble.com>
In-Reply-To: <19043404.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 19 Aug 2008 06:58:59 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Cyndy wrote:
> 
> I want to keep user text files indexed separately, I will have about 10,000
> users and each user may have about 20,000 short files, and I need to keep
> privacy. So the idea is to have one folder with the text files and  index
> for each user, so when search will be done, it will be pointing to the
> corresponding file directory. Would this approach hit performance? is this a
> good solution? Any recommendation?

For access control, we use an ownerId field in Lucene which indexes the owning 
user.  We filter all searches using ownerId.  This allows all Documents to be 
kept in a single index.

We also support sharding across multiple index files for performance/scaling 
considerations, via a hash of the ownerId, but in practice have not needed it. 
Much will depend on your search usage.

YMMV
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 05:14:08 2008
Return-Path: <java-user-return-35563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65223 invoked from network); 19 Aug 2008 05:14:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 05:14:08 -0000
Received: (qmail 55316 invoked by uid 500); 19 Aug 2008 05:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55284 invoked by uid 500); 19 Aug 2008 05:13:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55272 invoked by uid 99); 19 Aug 2008 05:13:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2008 22:13:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 05:13:03 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7J5DLPm025165
	for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 08:13:21 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m76k2xq4; 19 Aug 2008 08:13:00 +0300
Message-ID: <48AA565D.7030603@teamware.com>
Date: Tue, 19 Aug 2008 15:13:01 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple index performance
References: <22227731.168831219119133586.JavaMail.nabble@isper.nabble.com>
In-Reply-To: <22227731.168831219119133586.JavaMail.nabble@isper.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 19 Aug 2008 08:13:21 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

cmunoz@mit.edu wrote:
> Thanks Anthony for your response, I did not know about that field.

You make your own fields in Lucene, it is not something Lucene gives you.


> But still I have a problem and it is about privacy. The users are concerned
> about privacy and so, we thought we could have all their files in a folder
> and encrypt the whole folder and index with a user key, so then when user
> logs in, decrypt the folder with the key and so Lucene can reach the
> documents, so that is why I am concerned about efficiency, since I do not
> know if Lucene could handle the 10,000 indexes.


It seems like you may be confusing what Lucene will give you.  The original file 
content and the Lucene indexes are two different things.  It sounds like you 
want to protect access to the original content on some shared storage, but that 
is not related to the searching provided by your Lucene app, or maybe I 
misunderstood your use case.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 08:23:14 2008
Return-Path: <java-user-return-35564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61372 invoked from network); 19 Aug 2008 08:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 08:23:13 -0000
Received: (qmail 11056 invoked by uid 500); 19 Aug 2008 08:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11025 invoked by uid 500); 19 Aug 2008 08:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11014 invoked by uid 99); 19 Aug 2008 08:23:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 01:23:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 08:22:08 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1315068tic.11
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 01:22:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=3IuBdaLqpKUXlmbvpxR/vgNGXGCKncccZ4nSdLrQi60=;
        b=v51Xuji3b65Nxv6txY54sK7SU1Dg265T3LmbJVpkOdwGv2ROAPOZXpoV/xidv+y4Yf
         YbONIapZCgiB77mF22suDEGdo+EtZbtFp6o4pG6GwBbqnZ5/e/qJCOVm8O6AyXWv670N
         zv7TY8GOb+sqZ4bCJkw64Vzjxt/bYtQ+QH/uc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=aF+TukhdtOL9T2iwrlkAwYH8+UA4DDNo9+0qVaAsbZmpWvkNj6x8Kebr5UTEoYd0cQ
         JabvNTHUQ+7AYVSnEfhtFbZ416u/J5hZmlfmR6d/PKzUqWeTY/YQbFzed3xTypy8+dI7
         cPEK5STtWDkVS5H2uoIzHo78sQyNjoLbBKJxQ=
Received: by 10.110.42.1 with SMTP id p1mr380809tip.21.1219134139734;
        Tue, 19 Aug 2008 01:22:19 -0700 (PDT)
Received: by 10.110.92.9 with HTTP; Tue, 19 Aug 2008 01:22:19 -0700 (PDT)
Message-ID: <839ba01c0808190122v10e04f72l7946c6583a929647@mail.gmail.com>
Date: Tue, 19 Aug 2008 16:22:19 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Are there any Lucene optimizations applicable to SSD?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

We are testing Lucene with SSD. No doubt the performance is much
better than that of a normal hard disk.

However it's still not good enough for our particular case. So I
wonder if there are any tips for optimizing lucene performance on
SSDs.

For example, I saw that Lucene's BufferedIndexInput class will read
1024bytes off the disk each time. This certainly make sense on hard
disk because of the seek latency involved. But would it actually
hinder performance on SSD?


FYI, we were trying to fit an index about 20G in size into a single
machine with 8G ram. And the searches we receive are vastly different.
So it's not likely we can depends on the system's file cache to speed
things up for us.


Any input is appreciated.


Thanks,
Cedric Ho

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 08:30:56 2008
Return-Path: <java-user-return-35565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64863 invoked from network); 19 Aug 2008 08:30:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 08:30:55 -0000
Received: (qmail 19587 invoked by uid 500); 19 Aug 2008 08:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19550 invoked by uid 500); 19 Aug 2008 08:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19533 invoked by uid 99); 19 Aug 2008 08:30:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 01:30:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 08:29:51 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3203295rvb.5
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 01:30:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=KzCWXGLvDpcQyEpQMEMopUwELFzI/nCwKjbwy6tUk9A=;
        b=Bm/RjfgBflWco8kslax66qr4SdpMWAyoAzJNFzNjbw4OGpa2ZwXDG5QA+pIWRMIruQ
         8ZTIdtVE4nNK0XgsC9ZuP6OoPk/iWT4NWG3KK7hpA226V8vy26xNkt/Xi8h31g4rrSfy
         WoTGHvIZLUGnreVfT7MR81Ne0T6c0hUTFS0VM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=jAX3HTUsf/2OIVWP9Kw3keIJGzpuygzrOKHdFTzzqJURnN4P9WEUi5j9KH8sp/9AHL
         gg2XcQAFboJIwaZcV59xvymAi3Ojze94H6yFUS1BX7Ei3BFPZyQ11AZ2pugJjF4KnLzr
         W1PHdrvJgo1YisJAtD8cNkloU9smw/Om4x2aw=
Received: by 10.141.142.15 with SMTP id u15mr3909803rvn.51.1219134610627;
        Tue, 19 Aug 2008 01:30:10 -0700 (PDT)
Received: by 10.140.207.3 with HTTP; Tue, 19 Aug 2008 01:30:10 -0700 (PDT)
Message-ID: <8c4e68610808190130j656780b0id42a8d076661f0ad@mail.gmail.com>
Date: Tue, 19 Aug 2008 09:30:10 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Simple Query Question
In-Reply-To: <19042444.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <19042444.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

No, lucene does not automatically replace spaces with AND.

See http://lucene.apache.org/java/2_3_2/queryparsersyntax.html


--
Ian.


On Tue, Aug 19, 2008 at 1:34 AM, DanaWhite <philrymek@comcast.net> wrote:
>
> For some reason I am thinking I read somewhere that if you queried something
> like:
>
> "Eiffel Tower"
>
> Lucene would execute the query "Eiffel AND Tower"
>
> Basically I am trying to ask, does lucene automatically replaces spaces with
> the AND operator?
>
> Thanks
> Dana

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 09:09:54 2008
Return-Path: <java-user-return-35566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86576 invoked from network); 19 Aug 2008 09:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 09:09:54 -0000
Received: (qmail 57252 invoked by uid 500); 19 Aug 2008 09:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57223 invoked by uid 500); 19 Aug 2008 09:09:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57211 invoked by uid 99); 19 Aug 2008 09:09:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 02:09:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 09:08:50 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1327979tic.11
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 02:09:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=/KMyh1/VL7Y5PlJejAnFxyVgnrNUajnnYSdcAWcG/P4=;
        b=voF4D9vq1jh+fadA9Tt40v461xLVntXgdUkaiVLH2f0C/GzPJenBfB6KbkKx2qvCb+
         Qj5L3LVnqk8lZBSig+LWfiCMOUqe6pr8o5BYr8qz4MiWgW/SNxt6nauezln1LJl/c68h
         2VE/0frydt0I/tOx55ivKTMuH8c4NtC71V49s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=lj6r19BeG7QVGbs1cFG5FMEtSyZ+NEaqlU24TqJ9z4pdX/QrOuGohSEXVOZvyH9Kfm
         dxgTKzYcdRlmXCI1v8fg7/rW6sIOr1eBXJ5ENrJ2lbAnaaIdVe91atmx+Zm/Sx9BYm2W
         3h1/4nLfsEvn/k8kNlA44SHsFA0/QDEV6YfdI=
Received: by 10.110.14.12 with SMTP id 12mr6888748tin.19.1219136958179;
        Tue, 19 Aug 2008 02:09:18 -0700 (PDT)
Received: by 10.110.109.13 with HTTP; Tue, 19 Aug 2008 02:09:18 -0700 (PDT)
Message-ID: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com>
Date: Tue, 19 Aug 2008 14:39:18 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: java.lang.NullPointerExcpetion while indexing on linux
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93199_3411266.1219136958160"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93199_3411266.1219136958160
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I am using IndexWriter for adding the documents. I am re-using the document
as well as the fields for improving index speed as per the link
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed.

So, for each doc, i am first removing field using doc.removeField() and then
field.setValue() for changing the value of the field and finally
doc.add(field) for adding the field to the document.

It works fine on windows, however it throws  (<class 'lucene.JavaError'>,
JavaError(<Throwable: java.lang.NullPointerException>,) when I run
indexwriter.addDocument(doc) on Linux.

Can anyone please guide why is it happening this way.
I am using lucene 2.3.1 version and JCC version is 1.8 and Python is 2.5

Thanks,
Aditi

------=_Part_93199_3411266.1219136958160--

From java-user-return-35567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 09:30:35 2008
Return-Path: <java-user-return-35567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94628 invoked from network); 19 Aug 2008 09:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 09:30:34 -0000
Received: (qmail 78334 invoked by uid 500); 19 Aug 2008 09:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78314 invoked by uid 500); 19 Aug 2008 09:30:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78303 invoked by uid 99); 19 Aug 2008 09:30:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 02:30:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 09:29:27 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K5U004UUD1VC0@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Tue, 19 Aug 2008 11:29:55 +0200 (MEST)
Date: Tue, 19 Aug 2008 11:29:54 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Are there any Lucene optimizations applicable to SSD?
In-reply-to: <839ba01c0808190122v10e04f72l7946c6583a929647@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1219138194.3192.273.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.22.3.1 (2.22.3.1-1.fc9)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <839ba01c0808190122v10e04f72l7946c6583a929647@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2008-08-19 at 16:22 +0800, Cedric Ho wrote:

[Lucene on SSD]

> However it's still not good enough for our particular case. So I
> wonder if there are any tips for optimizing lucene performance on
> SSDs.

What aspect of performance do you find lacking? Is it searching or
indexing? While we've had stellar results for searches, indexing is just
so-so better than conventional harddisks.

As for optimizing towards SSDs, we've found that the CPU is the
bottleneck for us: The performance keeps climbing markedly for 1-5
threads on a 4 core system with a single 64GB SSD, nearly identical to
the same system with a RAID 0 of 4 * 64GB SSD.

> For example, I saw that Lucene's BufferedIndexInput class will read
> 1024bytes off the disk each time. This certainly make sense on hard
> disk because of the seek latency involved. But would it actually
> hinder performance on SSD?

SSD's still retrieve data in blocks, so my _guess_ is that the 1024
doesn't make much of a difference.

Which SSD did you choose?

> FYI, we were trying to fit an index about 20G in size into a single
> machine with 8G ram. And the searches we receive are vastly different.
> So it's not likely we can depends on the system's file cache to speed
> things up for us.

We've experimented with a 37GB index on a machine with the amount of RAM
varying from 3-24GB of RAM, primarily simple searches. After warmup
(1000 queries), with 8GB and dual core, the performance for SSD is in
the area of 200 queries/sec and rising, as opposed to 50 queries/sec and
rising for conventional harddisks (see the graph under "Warming up" at
http://wiki.statsbiblioteket.dk/summa/Hardware ).

For searches with SSD, the size of the disk cache doesn't affect
performance much, but the first 1000 queries or so aren't representative
at all, no matter if the index is in RAM, on SSD or conventional
harddisks. Of course YMMW.

Could you give some more information on the searches? What is a typical
query, what do you do with the result (e.g. iterate through Hits,
extracting fields)?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 09:32:56 2008
Return-Path: <java-user-return-35568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96625 invoked from network); 19 Aug 2008 09:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 09:32:56 -0000
Received: (qmail 81865 invoked by uid 500); 19 Aug 2008 09:32:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81602 invoked by uid 500); 19 Aug 2008 09:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81591 invoked by uid 99); 19 Aug 2008 09:32:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 02:32:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 09:31:50 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3225563rvb.5
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 02:32:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=SPvsxzBqmyTp7XvHhXK7oaCcvdhLs9eu+fanc/34EWE=;
        b=TJ948b33qmLv3scFXxYGhvNbMm7NLoYFVrmq+9mGZ7nVm2tf7v+C30/MCqK7DENEyN
         JTBWj+yaJrSXa0aYHDgAtqe1LWiH+b74chP3dSbCzJoPgY6Ohkvl/FAo+726+rW3edhw
         adqY39UPo66CGj7r8SZELg4abkiOCzaguIqeA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=J4TaXqZU/eAgrdvP1zsZVXwl2kFTEzLnpWe4HraliK1qKxsSVLQIt4UjcwhKR3kKq1
         Ke7B/SSPb1wXFJgJwn1ozeUUZnWgsC6o8kLdHbR3trGyIDNrDsYbQTmHGdRQ7YNuSigC
         cak2VAPQwAnEBFk77NkEohJrSghXNHyw9mbCM=
Received: by 10.141.163.12 with SMTP id q12mr3929421rvo.265.1219138330462;
        Tue, 19 Aug 2008 02:32:10 -0700 (PDT)
Received: by 10.140.207.3 with HTTP; Tue, 19 Aug 2008 02:32:10 -0700 (PDT)
Message-ID: <8c4e68610808190232m3741e15cwb232ce4ef14123a0@mail.gmail.com>
Date: Tue, 19 Aug 2008 10:32:10 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.NullPointerExcpetion while indexing on linux
In-Reply-To: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


I don't think you need to remove the field and then add it again, but
I've no idea if that is relevant to your problem or not.

A full stack trace would be more help, and maybe an upgrade to 2.3.2,
and maybe a snippet of your code, and what is JCC?


--
Ian.


On Tue, Aug 19, 2008 at 10:09 AM, Aditi Goyal <aditigupta20@gmail.com> wrote:
> Hi All,
>
> I am using IndexWriter for adding the documents. I am re-using the document
> as well as the fields for improving index speed as per the link
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed.
>
> So, for each doc, i am first removing field using doc.removeField() and then
> field.setValue() for changing the value of the field and finally
> doc.add(field) for adding the field to the document.
>
> It works fine on windows, however it throws  (<class 'lucene.JavaError'>,
> JavaError(<Throwable: java.lang.NullPointerException>,) when I run
> indexwriter.addDocument(doc) on Linux.
>
> Can anyone please guide why is it happening this way.
> I am using lucene 2.3.1 version and JCC version is 1.8 and Python is 2.5
>
> Thanks,
> Aditi
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 09:56:45 2008
Return-Path: <java-user-return-35569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12728 invoked from network); 19 Aug 2008 09:56:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 09:56:45 -0000
Received: (qmail 9529 invoked by uid 500); 19 Aug 2008 09:56:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9258 invoked by uid 500); 19 Aug 2008 09:56:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9247 invoked by uid 99); 19 Aug 2008 09:56:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 02:56:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 09:55:38 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2771786wra.21
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 02:55:48 -0700 (PDT)
Received: by 10.90.119.20 with SMTP id r20mr279065agc.83.1219139747939;
        Tue, 19 Aug 2008 02:55:47 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id b45sm7808706hsa.6.2008.08.19.02.55.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 19 Aug 2008 02:55:47 -0700 (PDT)
Message-Id: <8711014D-5FEE-4CC8-8874-BCD3A8C4C566@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610808190232m3741e15cwb232ce4ef14123a0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: java.lang.NullPointerExcpetion while indexing on linux
Date: Tue, 19 Aug 2008 05:55:46 -0400
References: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com> <8c4e68610808190232m3741e15cwb232ce4ef14123a0@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Ian Lea wrote:

> I don't think you need to remove the field and then add it again, but
> I've no idea if that is relevant to your problem or not.

That's right: just leave the Field there and change its value  
(assuming the doc you are changing to still uses that field).

> A full stack trace would be more help, and maybe an upgrade to 2.3.2,
> and maybe a snippet of your code, and what is JCC?

JCC generates the necessary C/C++ glue code for Python to directly  
invoke Java code.  The Chandler project created this for PyLucene  
because they were having trouble with GCJ:

     http://blog.chandlerproject.org/author/vajda/

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 10:46:41 2008
Return-Path: <java-user-return-35570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37960 invoked from network); 19 Aug 2008 10:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 10:46:41 -0000
Received: (qmail 71096 invoked by uid 500); 19 Aug 2008 10:46:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71068 invoked by uid 500); 19 Aug 2008 10:46:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71055 invoked by uid 99); 19 Aug 2008 10:46:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 03:46:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 10:45:32 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1351777tic.11
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 03:45:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=oISNhK+5r28ay6vi7xAIKwahUwHpr04McgwcK1w9ISA=;
        b=CTbL9Shk2cPy76setuBjZsqGzEiLTqH6znO19p86TrA2dvHNgFmDUBsysEBamW2DE+
         ZtwN3JF9+4nwH7rQSRULT/AlwxBQmw4K4eQcRut3q+4RxG3n8xoqUNnAsqCp5ixupbdS
         0WwN4xjkQbth6ez0u0NZYnwRp0Ptf9K5jVsTA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qswfGFcMuIK+8CkQHOUc7h1K1/q1P2qH04LNEUn3xVOhZWjXHv4L04DqYYPbRAyfr9
         7o8uZ1PjQeZSdKDpcYQRFoda26tLoNLQknuGtUVC6XNA5CeiqxiRNPXD6qsVP9o9KgsQ
         6U62K2evCoJ/lEraSYixapyz62w7RykAG982s=
Received: by 10.110.90.9 with SMTP id n9mr6999979tib.22.1219142742461;
        Tue, 19 Aug 2008 03:45:42 -0700 (PDT)
Received: by 10.110.109.13 with HTTP; Tue, 19 Aug 2008 03:45:42 -0700 (PDT)
Message-ID: <6fc71b230808190345h71653e1ai8ed9b64aeb31ea94@mail.gmail.com>
Date: Tue, 19 Aug 2008 16:15:42 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.NullPointerExcpetion while indexing on linux
In-Reply-To: <8711014D-5FEE-4CC8-8874-BCD3A8C4C566@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97906_903558.1219142742459"
References: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com>
	 <8c4e68610808190232m3741e15cwb232ce4ef14123a0@mail.gmail.com>
	 <8711014D-5FEE-4CC8-8874-BCD3A8C4C566@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_97906_903558.1219142742459
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Michael and Ian for your valuable response.
I am attaching a small default code. Please have a look and tell me where am
I going wrong.

import lucene
from lucene import Document, Field, initVM, CLASSPATH

doc = Document()
fieldA = Field('fieldA', "", Field.Store.YES, Field.Index.UN_TOKENIZED)
fieldB = Field('fieldB', "", Field.Store.YES, Field.Index.TOKENIZED)
fieldC = Field ('fieldC', "", Field.Store.YES, Field.Index.TOKENIZED)

doc.add(fieldA)
doc.add(fieldB)
doc.add(fieldC)

def get_fields():
    if doc.getField('FieldA') is not None:
        doc.removeField('FieldA')
    if doc.getField('FieldB') is not None:
        doc.removeField('FieldB')
    if doc.getField('FieldC') is not None:
        doc.removeField('FieldC')

    fieldA.setValue("abc")
    doc.add(fieldA)
    fieldB.setValue("xyz")
    doc.add(fieldB)
    fieldC.setValue("123")
    doc.add(fieldC)

    return doc


def add_document():
    doc = get_fields()
    writer = lucene.IndexWriter(index_directory, analyzer, create_path)
    writer.addDocument(doc)
    writer.close()

This writer.addDocument is throwing an exception saying
java.lang.NullPointerException

Thanks,
Aditi

On Tue, Aug 19, 2008 at 3:25 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Ian Lea wrote:
>
>  I don't think you need to remove the field and then add it again, but
>> I've no idea if that is relevant to your problem or not.
>>
>
> That's right: just leave the Field there and change its value (assuming the
> doc you are changing to still uses that field).
>
>  A full stack trace would be more help, and maybe an upgrade to 2.3.2,
>> and maybe a snippet of your code, and what is JCC?
>>
>
> JCC generates the necessary C/C++ glue code for Python to directly invoke
> Java code.  The Chandler project created this for PyLucene because they were
> having trouble with GCJ:
>
>    http://blog.chandlerproject.org/author/vajda/
>
> Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_97906_903558.1219142742459--

From java-user-return-35571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 12:02:48 2008
Return-Path: <java-user-return-35571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87391 invoked from network); 19 Aug 2008 12:02:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 12:02:48 -0000
Received: (qmail 50250 invoked by uid 500); 19 Aug 2008 12:02:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49299 invoked by uid 500); 19 Aug 2008 12:02:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49288 invoked by uid 99); 19 Aug 2008 12:02:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 05:02:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 12:01:42 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id DE06924006
	for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 15:01:37 +0300 (EEST)
Message-ID: <48AAB621.1050405@sirma.bg>
Date: Tue, 19 Aug 2008 15:01:37 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Updating tag-indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Lucene Guys,

I have a question that is simple but is important for me. I did not 
found the answer in the javadoc so I am asking here.
When adding Document-s by the method IndexWriter.addDocument(doc) does 
the documents obtain Lucene IDs in the order that they are added to the 
IndexWriter? I mean will first added doc be with Lucene ID 0, second 
added with Lucene ID 1, etc?

Bellow I describe why I am asking this.
We plan to split our index to two separate indexes that will be read by 
ParallelReader class. This is so because the one of them will contain 
field(s) that will be indexed and stored and it will be frequently 
changed. So to have always correct data returned from the ParallelReader 
when changing documents in the small index the Lucene IDs of these docs 
have to remain the same.
To do this Karl Wettin suggests a solution described in *LUCENE-879 
<https://issues.apache.org/jira/browse/LUCENE-879>*. I do not like this 
solution because it is connected to changing Lucene source code, and 
after each refactoring potentially I will have problems. The solution is 
related to optimizing index so it will not be reasonably faster than the 
one that I prefer. And it is:
1. Read the whole index and reconstruct the documents including index 
data by using TermDocs and TermEnum classes;
2. Change the needed documents;
3. Index documents in new index that will replace the initial one.
I can even simplify this algorithm (and the speed) if all the fields 
will be always stored - I can read just the stored data and based on 
this to reconstruct the content of the docs and re index them in new.

But anyway everything in the my approaches will depend on this - are 
LuceneIDs in the index ordered in the same way as docs are added to the 
IndexWriter.

Thanks in Advance,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 12:19:43 2008
Return-Path: <java-user-return-35572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 569 invoked from network); 19 Aug 2008 12:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 12:19:43 -0000
Received: (qmail 62473 invoked by uid 500); 19 Aug 2008 12:19:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62137 invoked by uid 500); 19 Aug 2008 12:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61894 invoked by uid 99); 19 Aug 2008 12:19:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 05:19:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 12:08:58 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2810662wra.21
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 05:09:09 -0700 (PDT)
Received: by 10.90.49.3 with SMTP id w3mr9525622agw.33.1219147748916;
        Tue, 19 Aug 2008 05:09:08 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 20sm2133agd.35.2008.08.19.05.09.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 19 Aug 2008 05:09:08 -0700 (PDT)
Message-Id: <689A3F11-301C-4A26-9C2A-70B5B7238113@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6fc71b230808190345h71653e1ai8ed9b64aeb31ea94@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: java.lang.NullPointerExcpetion while indexing on linux
Date: Tue, 19 Aug 2008 08:09:06 -0400
References: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com> <8c4e68610808190232m3741e15cwb232ce4ef14123a0@mail.gmail.com> <8711014D-5FEE-4CC8-8874-BCD3A8C4C566@mikemccandless.com> <6fc71b230808190345h71653e1ai8ed9b64aeb31ea94@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On quick look that code looks fine, though removeField is an expensive  
operation and unnecessary for this.

We really need the full traceback of the exception.

Mike

Aditi Goyal wrote:

> Thanks Michael and Ian for your valuable response.
> I am attaching a small default code. Please have a look and tell me  
> where am
> I going wrong.
>
> import lucene
> from lucene import Document, Field, initVM, CLASSPATH
>
> doc = Document()
> fieldA = Field('fieldA', "", Field.Store.YES,  
> Field.Index.UN_TOKENIZED)
> fieldB = Field('fieldB', "", Field.Store.YES, Field.Index.TOKENIZED)
> fieldC = Field ('fieldC', "", Field.Store.YES, Field.Index.TOKENIZED)
>
> doc.add(fieldA)
> doc.add(fieldB)
> doc.add(fieldC)
>
> def get_fields():
>    if doc.getField('FieldA') is not None:
>        doc.removeField('FieldA')
>    if doc.getField('FieldB') is not None:
>        doc.removeField('FieldB')
>    if doc.getField('FieldC') is not None:
>        doc.removeField('FieldC')
>
>    fieldA.setValue("abc")
>    doc.add(fieldA)
>    fieldB.setValue("xyz")
>    doc.add(fieldB)
>    fieldC.setValue("123")
>    doc.add(fieldC)
>
>    return doc
>
>
> def add_document():
>    doc = get_fields()
>    writer = lucene.IndexWriter(index_directory, analyzer, create_path)
>    writer.addDocument(doc)
>    writer.close()
>
> This writer.addDocument is throwing an exception saying
> java.lang.NullPointerException
>
> Thanks,
> Aditi
>
> On Tue, Aug 19, 2008 at 3:25 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Ian Lea wrote:
>>
>> I don't think you need to remove the field and then add it again, but
>>> I've no idea if that is relevant to your problem or not.
>>>
>>
>> That's right: just leave the Field there and change its value  
>> (assuming the
>> doc you are changing to still uses that field).
>>
>> A full stack trace would be more help, and maybe an upgrade to 2.3.2,
>>> and maybe a snippet of your code, and what is JCC?
>>>
>>
>> JCC generates the necessary C/C++ glue code for Python to directly  
>> invoke
>> Java code.  The Chandler project created this for PyLucene because  
>> they were
>> having trouble with GCJ:
>>
>>   http://blog.chandlerproject.org/author/vajda/
>>
>> Mike
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 12:24:19 2008
Return-Path: <java-user-return-35573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4174 invoked from network); 19 Aug 2008 12:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 12:24:19 -0000
Received: (qmail 73163 invoked by uid 500); 19 Aug 2008 12:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73128 invoked by uid 500); 19 Aug 2008 12:24:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73117 invoked by uid 99); 19 Aug 2008 12:24:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 05:24:11 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 12:23:14 +0000
Received: by an-out-0708.google.com with SMTP id c37so2182386anc.49
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 05:23:24 -0700 (PDT)
Received: by 10.100.226.6 with SMTP id y6mr725165ang.130.1219148604220;
        Tue, 19 Aug 2008 05:23:24 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id c4sm36991anc.28.2008.08.19.05.23.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 19 Aug 2008 05:23:23 -0700 (PDT)
Message-Id: <B1A428B3-3336-4BD9-B499-B4528F5FEF46@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48AAB621.1050405@sirma.bg>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Updating tag-indexes
Date: Tue, 19 Aug 2008 08:23:21 -0400
References: <48AAB621.1050405@sirma.bg>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, docIDs are currently sequentially assigned, starting with 0.

BUT: on hitting an exception (say in your analyzer) it will usually  
use up a docID (and then immediately mark it as deleted).

Also, this behavior isn't "promised" in the API, ie it could in theory  
(though I think it unlikely) change in a future release of Lucene.

And remember when a merge completes (or, optimize), any deleted docs  
will "collapse down" all docIDs after them.

Mike

Ivan Vasilev wrote:

> Hi Lucene Guys,
>
> I have a question that is simple but is important for me. I did not  
> found the answer in the javadoc so I am asking here.
> When adding Document-s by the method IndexWriter.addDocument(doc)  
> does the documents obtain Lucene IDs in the order that they are  
> added to the IndexWriter? I mean will first added doc be with Lucene  
> ID 0, second added with Lucene ID 1, etc?
>
> Bellow I describe why I am asking this.
> We plan to split our index to two separate indexes that will be read  
> by ParallelReader class. This is so because the one of them will  
> contain field(s) that will be indexed and stored and it will be  
> frequently changed. So to have always correct data returned from the  
> ParallelReader when changing documents in the small index the Lucene  
> IDs of these docs have to remain the same.
> To do this Karl Wettin suggests a solution described in *LUCENE-879 <https://issues.apache.org/jira/browse/LUCENE-879 
> >*. I do not like this solution because it is connected to changing  
> Lucene source code, and after each refactoring potentially I will  
> have problems. The solution is related to optimizing index so it  
> will not be reasonably faster than the one that I prefer. And it is:
> 1. Read the whole index and reconstruct the documents including  
> index data by using TermDocs and TermEnum classes;
> 2. Change the needed documents;
> 3. Index documents in new index that will replace the initial one.
> I can even simplify this algorithm (and the speed) if all the fields  
> will be always stored - I can read just the stored data and based on  
> this to reconstruct the content of the docs and re index them in new.
>
> But anyway everything in the my approaches will depend on this - are  
> LuceneIDs in the index ordered in the same way as docs are added to  
> the IndexWriter.
>
> Thanks in Advance,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 12:59:53 2008
Return-Path: <java-user-return-35574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28229 invoked from network); 19 Aug 2008 12:59:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 12:59:53 -0000
Received: (qmail 41569 invoked by uid 500); 19 Aug 2008 12:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41548 invoked by uid 500); 19 Aug 2008 12:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41537 invoked by uid 99); 19 Aug 2008 12:59:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 05:59:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 12:58:45 +0000
Received: by gxk6 with SMTP id 6so4622187gxk.5
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 05:58:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :x-mimeole:in-reply-to:thread-index:message-id;
        bh=f9kQXa42ERwiTzRrPqdN0B89XgbjNViTlMYNiMnB2f4=;
        b=sNjQhs8CnIQLsKyZjkntYv3A3hTmQE5/BSZLn1K3wizpTwUS2wXxBYNI1EpI6trhSO
         E+gMbfYx9U+Qk/xNMwkzR7CN7LkeKzOowJwV6mN+7LPK+Onhi6Fl2r12s+ExkgmOvNaM
         vxL4ZynHSPKs2C8dSnHf4C2JqpoFLNQwANCeQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-mailer:x-mimeole:in-reply-to
         :thread-index:message-id;
        b=JuedatfyUTkU+Do2Y9SY+ncyqG81ujA/NA9OIQnJqYOH19bh4ftzfSaKbOH7f/I9bA
         NQj8R5EybywARhubYK4wNTN/SrlOh0b8Ev/QSe4ByU7UgmYO1NDhdyrHEZKa8Dq1QsGN
         8fn2Uct0ZYuy/d60OJJ8CvQjaiTUeJz8XsxkA=
Received: by 10.151.84.12 with SMTP id m12mr226406ybl.11.1219150694201;
        Tue, 19 Aug 2008 05:58:14 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id j13sm239851rne.4.2008.08.19.05.58.04
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 19 Aug 2008 05:58:09 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Case Sensitivity
Date: Tue, 19 Aug 2008 13:57:56 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <e05f0fd10808161300w77a2b468ob68fb5a0a689b6b1@mail.gmail.com>
Thread-Index: AckB+zCrAJo6TmMdSd23iJGYgmMFBA==
Message-ID: <48aac361.0da1260a.352c.0b9a@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

>From the discussion here what I could understand was, if I am using
StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying, I
shouldn't have any problems with cases. But if I have any UN_TOKENIZED
fields there will be problems if I do not case-normalize them myself before
adding them as a field to the document.

In my case I have a mixed scenario. I am indexing emails and the email
addresses are indexed UN_TOKENIZED. I do have a second set of custom
tokenized field, which keep the tokens in individual fields with same name.

For example, if the email had a from address "John Smith"
<J.Smith@world.net>, my document looks like this

------------------8<----------------
to: ...                       - UN_TOKENIZED
from: J.Smith@world.net       - UN_TOKENIZED
From-tokenized: John          - UN_TOKENIZED
From-tokenized: Smith         - UN_TOKENIZED
From-tokenized: J             - UN_TOKENIZED
From-tokenized: Smith         - UN_TOKENIZED
From-tokenized: world.net     - UN_TOKENIZED
From-tokenized: world         - UN_TOKENIZED
From-tokenized: net           - UN_TOKENIZED
Subject: ...                  - TOKENIZED
Body: ...                     - TOKENIZED
------------------8<----------------

Does it mean that where ever I use UN_TOKENIZED, they do not get through the
StandardAnalyzer before getting Indexed, but they do when they are searched
on? If that is the case, Do I need to normalise them before adding to
document?

I also would like to know if it is better to employ an EmailAnalyzer that
makes a TokenStream out of the given email address, rather than using a
simplistic function that gives me a list of string pieces and adding them
one by one. With searches, would both the approaches give same result?

Many thanks,
Dino



-----Original Message-----
From: Doron Cohen [mailto:cdoronc@gmail.com] 
Sent: 16 August 2008 21:01
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity

Hi Sergey, seems like case 4 and 5 are equivalent, both meaning case
insensitive right. Otherwise please explain the difference.

If it is required to support both case sensitive (cases 1,2,3) and case
insensitive (case 4/5) then both forms must be saved in the index - in two
separate fields (as Erick mentioned, I think).

Hope this helps,
Doron

On Fri, Aug 15, 2008 at 10:51 AM, Sergey Kabashnyuk
<ksmmlist@gmail.com>wrote:

> Hello
>
> Here's my use case           content of the field
> Doc1 -
>        Field - "text " -   "Field Without Norms"
>
> Doc2 -
>        Field - "text " -   "field without norms"
>
> Doc3 -
>        Field - "text " -   "FIELD WITHOUT NORMS"
>
>
> Query                                     expected result
> 1. new Term("text","Field Without Norms")       doc1
> 2. new Term("text","field without norms")       doc2
> 3. new Term("text","FIELD WITHOUT NORMS")       doc3


> lowercase("text","field without norms")   doc1, doc2, doc3
> uppercase("text","FIELD WITHOUT NORMS")   doc1, doc2, doc3
>
> I stor "text" field like :
> new Field("text", Field.Store.NO, 
> Field.Index.NO_NORMS,Field.TermVector.NO
> )
> using StandardAnalyzer and query  1-3 works perfectly as I need. The 
> question is how create query 4-5?
>
> Thanks
>
> Sergey Kabashnyuk
> eXo Platform SAS
>
>
>  Be aware that StandardAnalyzer lowercases all the input,
>> both at index and query times. Field.Store.YES will store the 
>> original text without any transformations, so doc.get(<field>) will 
>> return the original text. However, no matter what the Field.Store 
>> value, the *indexed* tokens (using TOKENIZED as you 
>> Field.Index.TOKENIZED) are passed through the analyzer.
>>
>> For instance, indexing "MIXed CasE  TEXT" in a field called "myfield" 
>> with Field.Store.YES, Field.Index.TOKENIZED would index the following 
>> tokens (with StandardAnalyzer).
>> mixed
>> case
>> text
>>
>> and searches (with StandardAnalyzer) would match any case in the 
>> query terms (e.g. MIXED would hit, as would mixed as would CaSE).
>>
>> However, doc.get("myfield") would return "MIXed CasE  TEXT"
>>
>> As Doron said, though, a few use cases would help us provide better 
>> answers.
>>
>> Best
>> Erick
>>
>>
>> On Thu, Aug 14, 2008 at 10:31 AM, Sergey Kabashnyuk 
>> <ksmmlist@gmail.com
>> >wrote:
>>
>>  Thanks for you  reply Erick.
>>>
>>>
>>>  About the only way to do this that I know of is to
>>>
>>>> index the data three times, once without any case changing, once 
>>>> uppercased and once lowercased.
>>>> You'll have to watch your analyzer, probably making up your own 
>>>> (easily done, see the synonym analyzer in Lucene in Action).
>>>>
>>>> Your example doesn't tell us anything, since the critical 
>>>> information is the *analyzer* you use, both at query and at index 
>>>> times. The analyzer is responsible for any transformations, like 
>>>> case folding, tokenizing, etc.
>>>>
>>>>
>>>
>>> In example  I want to show what I  stored field as  
>>> Field.Index.NO_NORMS
>>>
>>> As I understand it means what field contains original string despite 
>>> what analyzer I chose(StandardAnalyzer by default).
>>>
>>> All querys I made myself without using Parsers.
>>> For example new TermQuery(new Term("filed", "MaMa"));
>>>
>>>
>>> I agree with you about possible implementation, but it increase size 
>>> of index at times.
>>>
>>> But are there other possibilities, such as using  custom query, 
>>> possibly similar to  RegexQuery,RegexTermEnum that would compare 
>>> terms at it's  own discretion?
>>>
>>>
>>>
>>>
>>>
>>>  But what is your use-case for needing both upper and
>>>> lower case comparisons? I have a hard time coming up with a reason 
>>>> to do both that wouldn't be satisfied by just a caseless search.
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Thu, Aug 14, 2008 at 4:47 AM, Sergey Kabashnyuk 
>>>> <ksmmlist@gmail.com
>>>> >wrote:
>>>>
>>>>  Hello.
>>>>
>>>>>
>>>>> I have the similar question.
>>>>>
>>>>> I need to implement
>>>>> 1. Case sensitive search.
>>>>> 2. Lower case search for concrete field.
>>>>> 3. Upper case search for concrete filed.
>>>>>
>>>>> For now I use
>>>>> new Field("PROPERTIES",
>>>>>                 content,
>>>>>                 Field.Store.NO,
>>>>>                 Field.Index.NO_NORMS,
>>>>>                 Field.TermVector.NO) for original string and make 
>>>>> case sensitive search.
>>>>>
>>>>> But does anyone have an idea to how implement second and third 
>>>>> type of search?
>>>>>
>>>>> Thanks
>>>>>
>>>>>
>>>>>
>>>>>  Hi All,
>>>>>
>>>>>  Once I index a bunch of documents with a StandardAnalyzer (and if 
>>>>> the
>>>>>> effort
>>>>>> I need to put in to reindex the documents is not worth the 
>>>>>> effort), is there a way to search on the index without case 
>>>>>> sensitivity.
>>>>>> I do not use any sophisticated Analyzer that makes use of 
>>>>>> LowerCaseTokenizer.
>>>>>> Please let me know if there is a solution to circumvent this case 
>>>>>> sensitivity problem.
>>>>>> Many thanks
>>>>>> Dino
>>>>>>
>>>>>>
>>>>>>  --
>>>>>>
>>>>> Sergey Kabashnyuk
>>>>> eXo Platform SAS
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------
>>>>> --- To unsubscribe, e-mail: 
>>>>> java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>  --
>>>>>
>>>> Sergey Kabashnyuk
>>> eXo Platform SAS
>>>
>>> --------------------------------------------------------------------
>>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
>
> --
> Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 13:20:51 2008
Return-Path: <java-user-return-35575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38054 invoked from network); 19 Aug 2008 13:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 13:20:51 -0000
Received: (qmail 89629 invoked by uid 500); 19 Aug 2008 13:20:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89018 invoked by uid 500); 19 Aug 2008 13:20:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89007 invoked by uid 99); 19 Aug 2008 13:20:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 06:20:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.214.192.31] (HELO ffe11.ukr.net) (195.214.192.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 13:19:45 +0000
Received: from mail by ffe11.ukr.net with local ID 1KVR89-00040j-Qd
	for java-user@lucene.apache.org; Tue, 19 Aug 2008 16:20:13 +0300
MIME-Version: 1.0
Content-Transfer-Encoding: binary
Content-Type: multipart/alternative; boundary="_----------=_1219152013135926"
Subject: How I can find wildcard symbol  with WildcardQuery?
To: java-user@lucene.apache.org
From: "=?WINDOWS-1251?Q?_=D1=E5=F0=E3=B3=E9_=CA=E0=F0=EF=E5=ED=EA=EE?=" <bergschloss@ukr.net>
X-Life: is great, enjoy it!
X-Mailer: freemail.ukr.net mPOP 3.4.1
X-Originating-Ip: [92.112.16.13]
X-Browser: Opera/9.20 (Windows NT 5.1; U; ru)
Message-Id: <E1KVR89-00040j-Qd@ffe11.ukr.net>
Date: Tue, 19 Aug 2008 16:20:13 +0300
X-UkrNet-Flag: 1
X-Virus-Checked: Checked by ClamAV on apache.org

--_----------=_1219152013135926
MIME-Version: 1.0
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset="windows-1251"


Hello    
    
For example, we have a text:    
    
" Hello w*orld"    
it's indexed as NO_NORMS, so this phrase is term.    
    
And I have a code:    
    
Query query = new WildcardQuery(new Term("field", " Hello w*orld")); its work    
    
But I need symbol '*' as ordinary symbol, not escape symbol.    
    
The QueryParser's analogue '\\*'    
Query query = new WildcardQuery(new Term("field", " Hello w\\*orld"));    
don't wokrs.    
    
Thanks    
    
    
    
  
--_----------=_1219152013135926--


From java-user-return-35576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 13:21:39 2008
Return-Path: <java-user-return-35576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38753 invoked from network); 19 Aug 2008 13:21:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 13:21:39 -0000
Received: (qmail 93608 invoked by uid 500); 19 Aug 2008 13:21:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93578 invoked by uid 500); 19 Aug 2008 13:21:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93567 invoked by uid 99); 19 Aug 2008 13:21:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 06:21:30 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 13:20:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3312751rvb.5
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 06:21:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=yc0ZSwjjc4LX0Iklmgnya8m1l+0A8ujjlbnVs4f1Cfw=;
        b=XpIIynVGEvxpc6RXHc2rhxkO0e6nR6zvKDoYbeazUaJsR8569BGhQtSxIgS7EER2MW
         88QHOUL35RJoZcsgslZRc/jp938a9YRJMqSsbe38eify0r3KFBthyLVtG0NzIP4QJ7dc
         4Kdy2L1mrRTnAbEwX1QU2NrpgIV9c1tshj/kI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=d8G4g43mO0dldJunwkWHKNsvOcW5wcMByzdauWjZ1MDmqjJNqpPqdMMnedL9texis1
         rcyoiAgAJVpH+sQXRRA5LUjRgVh7uJ+WIaafJ1an+/KKMfHp3oHN3EobZU1SuDqPd5Fv
         0ASmRyz07KNHCNhfaLwcgzm1fdlep9LKlPlMI=
Received: by 10.141.212.5 with SMTP id o5mr4044898rvq.20.1219152060925;
        Tue, 19 Aug 2008 06:21:00 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Tue, 19 Aug 2008 06:21:00 -0700 (PDT)
Message-ID: <359a92830808190621l13ba20c4n1f5b291375fffd25@mail.gmail.com>
Date: Tue, 19 Aug 2008 09:21:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple index performance
In-Reply-To: <19043404.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4282_21873756.1219152060930"
References: <19043404.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4282_21873756.1219152060930
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Another issue is opening/closing your indexes. When you open an
index for searching, the first few queries you fire invoke considerable
overhead as caches warm up, etc. Plus, you don't get any efficiencies
of scale (that is, pretty soon adding 2X the amount of text to an index
increases the size of the index considerably less than 2X if you're
not storing the text).

So, you either have to keep 10,000 indexes open for efficient searching,
or open/close each one on demand and live with the consequent hit to
your searching performance.

I'd think about keeping it all in a large index, storing the user's name
as a field and appending something like "AND user:cyndy" to each
search. You could also assemble a filter for your user and tack that on
to the query. But the above clause is conceptually simplest.

Best
Erick

On Mon, Aug 18, 2008 at 10:34 PM, Cyndy <cmunoz@mit.edu> wrote:

>
> Hello, I am new into Lucene and I want to make sure what I am trying to do
> will not hit performance. My scenario is the following:
>
> I want to keep user text files indexed separately, I will have about 10,000
> users and each user may have about 20,000 short files, and I need to keep
> privacy. So the idea is to have one folder with the text files and  index
> for each user, so when search will be done, it will be pointing to the
> corresponding file directory. Would this approach hit performance? is this
> a
> good solution? Any recommendation?
>
> Thanks in advance.
>
>
> --
> View this message in context:
> http://www.nabble.com/Multiple-index-performance-tp19043404p19043404.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4282_21873756.1219152060930--

From java-user-return-35577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 13:23:33 2008
Return-Path: <java-user-return-35577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40861 invoked from network); 19 Aug 2008 13:23:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 13:23:33 -0000
Received: (qmail 96711 invoked by uid 500); 19 Aug 2008 13:23:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96673 invoked by uid 500); 19 Aug 2008 13:23:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96660 invoked by uid 99); 19 Aug 2008 13:23:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 06:23:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 13:22:28 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3313555rvb.5
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 06:22:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jlD6m7ooic9kAncoie4eWNBx6D6B/jBE+fYt1vEzGOQ=;
        b=NNpprYvE9ZuHYBew1Zdyfoy8QPY7pNiKPfRrASBEV7P1+ndiiWRMocdY5Y5KjePW/6
         MCubPi7wAnY7aVIYAhkzll62B6J1jNYGn1r9e/izLMVZ8YoTwTMCI7TuzQ18YMN5uTKK
         7lr+3NrgPRI4/U8sjw/DMHRlmEpWdqU9+/01c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FulR3pmkKVWdhtlMnjmnvFzZpsrt6Ms7RXj5AKXztAKlQmkt/xVw9nc+igIjuGcnuD
         4VOfB5+lepbb6t5//Ba0I7kPrVfXi20iuj/+e1MvNlM62pG7Rsb9XQkoX3BVpy0HcdKP
         hVG4XUmMS8bu0GC7+lpoGtzGeAsVANHUTiISw=
Received: by 10.141.114.15 with SMTP id r15mr4041475rvm.164.1219152177686;
        Tue, 19 Aug 2008 06:22:57 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Tue, 19 Aug 2008 06:22:57 -0700 (PDT)
Message-ID: <359a92830808190622x22ba76dcy3bc3f16f691240db@mail.gmail.com>
Date: Tue, 19 Aug 2008 09:22:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Simple Query Question
In-Reply-To: <8c4e68610808190130j656780b0id42a8d076661f0ad@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4306_1375188.1219152177698"
References: <19042444.post@talk.nabble.com>
	 <8c4e68610808190130j656780b0id42a8d076661f0ad@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4306_1375188.1219152177698
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As Ian says, but you can set the default to AND or OR, see
the API docs.

The 'out of the box' default is OR.

See QueryParser.setDefaultOperator

Best
Erick

On Tue, Aug 19, 2008 at 4:30 AM, Ian Lea <ian.lea@gmail.com> wrote:

> No, lucene does not automatically replace spaces with AND.
>
> See http://lucene.apache.org/java/2_3_2/queryparsersyntax.html
>
>
> --
> Ian.
>
>
> On Tue, Aug 19, 2008 at 1:34 AM, DanaWhite <philrymek@comcast.net> wrote:
> >
> > For some reason I am thinking I read somewhere that if you queried
> something
> > like:
> >
> > "Eiffel Tower"
> >
> > Lucene would execute the query "Eiffel AND Tower"
> >
> > Basically I am trying to ask, does lucene automatically replaces spaces
> with
> > the AND operator?
> >
> > Thanks
> > Dana
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4306_1375188.1219152177698--

From java-user-return-35578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 13:28:49 2008
Return-Path: <java-user-return-35578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43780 invoked from network); 19 Aug 2008 13:28:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 13:28:49 -0000
Received: (qmail 7117 invoked by uid 500); 19 Aug 2008 13:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7090 invoked by uid 500); 19 Aug 2008 13:28:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7079 invoked by uid 99); 19 Aug 2008 13:28:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 06:28:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 13:27:43 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3315854rvb.5
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 06:28:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Qg3h+6/nP/0K+5AJbV7A14FRVnwvHGbuV4fj8U/OLSw=;
        b=mgkTVAd8sLsM+VN2FQkP5uyPeVz62hr5VYRIQz8qcrCSpy7YAoeocHn4MUqWFyaDYv
         HOu/DJSwzrb7F9jYqm7Wr4y1PWPdsVgqKu64uAsC8ov4c0EutrmO93mOQNjQpURSri1u
         6bNJmI3q9ACHM3a9xtNrBUqcAX/rI2rg6IOVQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Y6hDVU96w0ULUxt+S2xh1m9IkEQeXCUHxXmTXrTVSxC+T5M/6DaOAbES/RFpBLGmY1
         SGHDqFTM6MTnB4TY4lPgaGVOxTDyGpGIfBr0txsygadh7PqINe5ec2KBHTAMPvfG7OW1
         c1KycdTyZc6vk+sGDBygnLopw+uphGDi3P46o=
Received: by 10.141.177.10 with SMTP id e10mr4045372rvp.72.1219152483450;
        Tue, 19 Aug 2008 06:28:03 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Tue, 19 Aug 2008 06:28:03 -0700 (PDT)
Message-ID: <359a92830808190628l4ef88ebq5f59a7398b8d8d0@mail.gmail.com>
Date: Tue, 19 Aug 2008 09:28:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Updating tag-indexes
In-Reply-To: <48AAB621.1050405@sirma.bg>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4345_21795643.1219152483453"
References: <48AAB621.1050405@sirma.bg>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4345_21795643.1219152483453
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd add to Michael's mail the *strong* recommendation that you provide
your own unique doc IDs and use *those* instead. It'll save you a world
of grief. Whenever you need to add a new doc to an existing index, you
can get the maximum of *your* unique IDs and increment it yourself.

One thing to remember is that not all Lucene docs need to have the same
fields. So it's even possible to have a *very special* document that
contains
meta-data about your index, say the last used of your generated IDs and
keep that meta-data doc up to date. If you put fields in that doc that are
NOT
in any other doc, you don't have to worry about accidentally getting this
meta-data doc in your searches....

Best
Erick

On Tue, Aug 19, 2008 at 8:01 AM, Ivan Vasilev <ivasilev@sirma.bg> wrote:

> Hi Lucene Guys,
>
> I have a question that is simple but is important for me. I did not found
> the answer in the javadoc so I am asking here.
> When adding Document-s by the method IndexWriter.addDocument(doc) does the
> documents obtain Lucene IDs in the order that they are added to the
> IndexWriter? I mean will first added doc be with Lucene ID 0, second added
> with Lucene ID 1, etc?
>
> Bellow I describe why I am asking this.
> We plan to split our index to two separate indexes that will be read by
> ParallelReader class. This is so because the one of them will contain
> field(s) that will be indexed and stored and it will be frequently changed.
> So to have always correct data returned from the ParallelReader when
> changing documents in the small index the Lucene IDs of these docs have to
> remain the same.
> To do this Karl Wettin suggests a solution described in *LUCENE-879 <
> https://issues.apache.org/jira/browse/LUCENE-879>*. I do not like this
> solution because it is connected to changing Lucene source code, and after
> each refactoring potentially I will have problems. The solution is related
> to optimizing index so it will not be reasonably faster than the one that I
> prefer. And it is:
> 1. Read the whole index and reconstruct the documents including index data
> by using TermDocs and TermEnum classes;
> 2. Change the needed documents;
> 3. Index documents in new index that will replace the initial one.
> I can even simplify this algorithm (and the speed) if all the fields will
> be always stored - I can read just the stored data and based on this to
> reconstruct the content of the docs and re index them in new.
>
> But anyway everything in the my approaches will depend on this - are
> LuceneIDs in the index ordered in the same way as docs are added to the
> IndexWriter.
>
> Thanks in Advance,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4345_21795643.1219152483453--

From java-user-return-35579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 13:35:29 2008
Return-Path: <java-user-return-35579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48159 invoked from network); 19 Aug 2008 13:35:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 13:35:29 -0000
Received: (qmail 19162 invoked by uid 500); 19 Aug 2008 13:35:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19136 invoked by uid 500); 19 Aug 2008 13:35:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19125 invoked by uid 99); 19 Aug 2008 13:35:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 06:35:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 13:34:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3318892rvb.5
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 06:34:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=CqShAHIEQgCm44LXVTE+7Bl/tnXOEiA/biQ1HYKdz9M=;
        b=clG3P2jdyVrmTvp3HMOHV8d9cZC+m8wt3CtGKttZa5Zp53roUgKR2Vdl8s80M79oRF
         7uRqtTukOANNqWBb/JZyZWMI9lHktny+eHCw4jzPWx4lR3Yiy/cdlCAq9FkHuW00XS0+
         i0m9UXchtlE3LHBC5TF2gpd9GF6kkvjpwtPQU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Bz5z2c4H9APlvVnjcH29NEELrIj8Wx5pUuo32gpz7+O0oOyi400ZBSkSmijQMI9SNf
         rrJxO4IVuf1og5uG0iIZDQ8XgLX0a43bwIlN9HZSTBRvuXqHIOm70MSmXvhlwh1STyZ/
         /YuD8d9qGfDKHKOoVS7uor9UcJgOeBevmzepQ=
Received: by 10.141.35.21 with SMTP id n21mr4048277rvj.115.1219152894019;
        Tue, 19 Aug 2008 06:34:54 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Tue, 19 Aug 2008 06:34:53 -0700 (PDT)
Message-ID: <359a92830808190634v4635aeaw4b2bf7d34c4cb282@mail.gmail.com>
Date: Tue, 19 Aug 2008 09:34:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How I can find wildcard symbol with WildcardQuery?
In-Reply-To: <E1KVR89-00040j-Qd@ffe11.ukr.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4419_12006578.1219152894033"
References: <E1KVR89-00040j-Qd@ffe11.ukr.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4419_12006578.1219152894033
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

QmVmb3JlIGdvaW5nIGRvd24gdGhpcyBwYXRoIEknZCByZWFsbHkgcmVjb21tZW5kIHlvdSBnZXQg
YSBjb3B5IG9mIEx1a2UKYW5kIGxvb2sgYXQgeW91ciBpbmRleC4gRGVwZW5kaW5nIHVwb24gdGhl
IGFuYWx5emVyIHlvdSdyZSB1c2luZywgeW91Cm1heSBvciBtYXkgbm90IGhhdmUgdypvcmxkIGlu
ZGV4ZWQuIFlvdSBtYXkgaGF2ZSB0aGUgdG9rZW5zOgp3Cm9ybGQKCndpdGggdGhlICogZHJvcHBl
ZCBjb21wbGV0ZWx5LgoKQXMgZmFyIGFzIEkga25vdywgTk9fTk9STVMgaGFzIG5vdGhpbmcgdG8g
ZG8gd2l0aCB0b2tlbml6YXRpb24sIHRoZQpjcml0aWNhbCBxdWVzdGlvbiBpcyB3aGF0ICphbmFs
eXplciogeW91J3JlIHVzaW5nIHRvIGluZGV4LgoKQW5kIHlvdSBjb3VsZCBhbHdheXMgc2lkZXN0
ZXAgdGhlIGlzc3VlIGVudGlyZWx5IGJ5IHByZS1wcm9jZXNzaW5nCnlvdXIgdGV4dCBhbmQgcXVl
cnkgdG8gcmVwbGFjZSAqIHdpdGggc29tZXRoaW5nIGVsc2UuCgpCdXQgZm9yIGVzY2FwaW5nLCBz
ZWU6Cmh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9qYXZhLzJfM18yL3F1ZXJ5cGFyc2Vyc3ludGF4
Lmh0bWwKCkJlc3QKRXJpY2sKCjIwMDgvOC8xOSDQodC10YDQs9GW0Lkg0JrQsNGA0L/QtdC90LrQ
viA8YmVyZ3NjaGxvc3NAdWtyLm5ldD4KCj4KPiBIZWxsbwo+Cj4gRm9yIGV4YW1wbGUsIHdlIGhh
dmUgYSB0ZXh0Ogo+Cj4gIiBIZWxsbyB3Km9ybGQiCj4gIGl0J3MgaW5kZXhlZCBhcyBOT19OT1JN
Uywgc28gdGhpcyBwaHJhc2UgaXMgdGVybS4KPgo+IEFuZCBJIGhhdmUgYSBjb2RlOgo+Cj4gUXVl
cnkgcXVlcnkgPSBuZXcgV2lsZGNhcmRRdWVyeShuZXcgVGVybSgiZmllbGQiLCAiIEhlbGxvIHcq
b3JsZCIpKTsgaXRzCj4gd29yawo+Cj4gQnV0IEkgbmVlZCBzeW1ib2wgJyonIGFzIG9yZGluYXJ5
IHN5bWJvbCwgbm90IGVzY2FwZSBzeW1ib2wuCj4KPiBUaGUgUXVlcnlQYXJzZXIncyBhbmFsb2d1
ZSAnXFwqJwo+IFF1ZXJ5IHF1ZXJ5ID0gbmV3IFdpbGRjYXJkUXVlcnkobmV3IFRlcm0oImZpZWxk
IiwgIiBIZWxsbyB3XFwqb3JsZCIpKTsKPiBkb24ndCB3b2tycy4KPgo+IFRoYW5rcwo+Cj4KPgo+
Cg==
------=_Part_4419_12006578.1219152894033--

From java-user-return-35580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 14:27:44 2008
Return-Path: <java-user-return-35580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79711 invoked from network); 19 Aug 2008 14:27:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 14:27:44 -0000
Received: (qmail 5034 invoked by uid 500); 19 Aug 2008 14:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4992 invoked by uid 500); 19 Aug 2008 14:27:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4981 invoked by uid 99); 19 Aug 2008 14:27:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 07:27:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 14:26:39 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Tue, 19 Aug 2008 10:24:07 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 19 Aug 2008 10:23:19 -0400
Subject: RE: windows file system cache
Thread-Topic: windows file system cache
Thread-Index: AckBOu/TrCc9qSI/Qw62vAFF9Do+NgAzAFvg
Message-ID: <36B4EF9511887240A973A93E7878B0560A0B11EEF9@US1-IIEX1.IICORP.DOM>
References: <36B4EF9511887240A973A93E7878B0560A0B11ED51@US1-IIEX1.IICORP.DOM>
 <48A6E295.5050400@gmail.com> <48A6E944.7040900@gmail.com>
 <48A9812C.5000902@gmail.com>
In-Reply-To: <48A9812C.5000902@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for the help.  It seems that just changing "memory usage" setting=
 to "programs" from default of "system cache" fixed the issue.  Now it take=
s only about 4 GB of system cache instead of 26 GB, and search performance =
is back to normal (fast).

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]
Sent: Monday, August 18, 2008 10:03 AM
To: java-user@lucene.apache.org
Subject: Re: windows file system cache

Mark Miller wrote:
> Mark Miller wrote:
>> Robert Stewart wrote:
>>> Anyone else run on Windows?  We have index around 26 GB in size.
>>> Seems file system cache ends up taking up nearly all available RAM
>>> (26 GB out of 32 GB on 64-bit box).  Lucene process is around 5 GB,
>>> so very little left over for queries, etc, and box starts swapping
>>> during searches.  I think changing file system cache size setting is
>>> needed.  Anyone else have same issue?
>>>
>>>
>> Hmmm...get more ram :)
>>
>> Windows 64-bit upped the default file system cache size from 1 gig to
>> 1 terabyte. Your feeling the awesome effects of that upgrade I think.
>>
>> There is an API call ( SetSystemFilecache() ) to override this - so
>> perhaps code up a C app to set it before running your Lucene app?
>>
>> - Mark
> You may actually be able to do it from the registry as well:
> http://support.microsoft.com/kb/892589 (don't use windows anymore so
> havn't confirmed)
>
> Info showing the change from 1 gig to 1 terabyte:
> http://support.microsoft.com/kb/294418
>
> You just want to set it to a certain percentage of what you got -
> leaving enough to do whatever your lucene app needs to do.
Found a great page about the problem using Domino:
http://www-1.ibm.com/support/docview.wss?uid=3Dswg21270452

They appear to have compiled all the little bits of info that I have
seen elsewhere, and describe the problem being fixed just as you did.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 15:08:13 2008
Return-Path: <java-user-return-35581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20764 invoked from network); 19 Aug 2008 15:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 15:08:13 -0000
Received: (qmail 72105 invoked by uid 500); 19 Aug 2008 15:08:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72076 invoked by uid 500); 19 Aug 2008 15:08:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72065 invoked by uid 99); 19 Aug 2008 15:08:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 08:08:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 15:07:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KVSo2-0005tc-IL
	for java-user@lucene.apache.org; Tue, 19 Aug 2008 08:07:35 -0700
Message-ID: <19052392.post@talk.nabble.com>
Date: Tue, 19 Aug 2008 08:07:34 -0700 (PDT)
From: Cyndy <cmunoz@mit.edu>
To: java-user@lucene.apache.org
Subject: Re: Multiple index performance
In-Reply-To: <48AA565D.7030603@teamware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cmunoz@mit.edu
References: <19043404.post@talk.nabble.com> <48AA565D.7030603@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Anthony,

I understand your comment, and I think it makes sense, the only thing is
that I have the issue that I need to guarantee privacy to the users, so if I
am able to read the indexes (if they are not encrypted), then I can pretty
much know what he says in the document, so that is why I was thinking to
encrypt the whole directory of text files as well as the index files, so the
user by giving his password can decrypt all the files and then Lucene can do
its job. In that sense I will have to open/close the indexs on demand. And
so my concern was that: if I have at a moment 1000 indexes open, would that
hit performance?

Thanks again for your answer.





Antony Bowesman wrote:
> 
> cmunoz@mit.edu wrote:
>> Thanks Anthony for your response, I did not know about that field.
> 
> You make your own fields in Lucene, it is not something Lucene gives you.
> 
> 
>> But still I have a problem and it is about privacy. The users are
>> concerned
>> about privacy and so, we thought we could have all their files in a
>> folder
>> and encrypt the whole folder and index with a user key, so then when user
>> logs in, decrypt the folder with the key and so Lucene can reach the
>> documents, so that is why I am concerned about efficiency, since I do not
>> know if Lucene could handle the 10,000 indexes.
> 
> 
> It seems like you may be confusing what Lucene will give you.  The
> original file 
> content and the Lucene indexes are two different things.  It sounds like
> you 
> want to protect access to the original content on some shared storage, but
> that 
> is not related to the searching provided by your Lucene app, or maybe I 
> misunderstood your use case.
> 
> Antony
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Multiple-index-performance-tp19043404p19052392.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 15:12:50 2008
Return-Path: <java-user-return-35582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23361 invoked from network); 19 Aug 2008 15:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 15:12:50 -0000
Received: (qmail 84033 invoked by uid 500); 19 Aug 2008 15:12:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84008 invoked by uid 500); 19 Aug 2008 15:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83993 invoked by uid 99); 19 Aug 2008 15:12:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 08:12:38 -0700
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,SUBJ_RE_NUM
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.214.192.5] (HELO sonic.ukr.net) (195.214.192.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 15:11:40 +0000
Received: from mail by sonic.ukr.net with local ID 1KVSrF-000Aup-4Y
	for java-user@lucene.apache.org; Tue, 19 Aug 2008 18:10:53 +0300
Content-Transfer-Encoding: binary
Content-Type: multipart/alternative; boundary="_----------=_1219158653416592"
MIME-Version: 1.0
Subject: Re[2]: How I can find wildcard symbol with WildcardQuery?
To: java-user@lucene.apache.org
From: "=?WINDOWS-1251?Q?_=D1=E5=F0=E3=B3=E9_=CA=E0=F0=EF=E5=ED=EA=EE?=" <bergschloss@ukr.net>
X-Life: is great, enjoy it!
X-Mailer: freemail.ukr.net mPOP 3.4.1
X-Originating-Ip: [92.112.16.13]
In-Reply-To: <359a92830808190634v4635aeaw4b2bf7d34c4cb282@mail.gmail.com>
X-Browser: Opera/9.20 (Windows NT 5.1; U; ru)
Message-Id: <E1KVSrF-000Aup-4Y@sonic.ukr.net>
Date: Tue, 19 Aug 2008 18:10:53 +0300
X-UkrNet-Flag: 1
X-Virus-Checked: Checked by ClamAV on apache.org

--_----------=_1219158653416592
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset="windows-1251"
MIME-Version: 1.0

Yes, you are correct- NO_NORMS has nothing to do with tokenization, thats mean no analyzers used. String fall's in index as single term.    
But, what about ourwildcardsymbols?    
    
Re: How I can find wildcard symbol with WildcardQuery?    
    
    Before going down this path I'd really recommend you get a copy of Luke    
and look at your index. Depending upon the analyzer you're using, you    
may or may not have w*orld indexed. You may have the tokens:    
w    
orld    
    
with the * dropped completely.    
    
As far as I know, NO_NORMS has nothing to do with tokenization, the    
critical question is what *analyzer* you're using to index.    
    
And you could always sidestep the issue entirely by pre-processing    
your text and query to replace * with something else.    
    
But for escaping, see:    
http://lucene.apache.org/java/2_3_2/queryparsersyntax.html    
    
Best    
Erick    
    
2008/8/19   <bergschloss@ukr.net>    
    
>    
> Hello    
>    
> For example, we have a text:    
>    
> " Hello w*orld"    
> it's indexed as NO_NORMS, so this phrase is term.    
>    
> And I have a code:    
>    
> Query query = new WildcardQuery(new Term("field", " Hello w*orld")); its    
> work    
>    
> But I need symbol '*' as ordinary symbol, not escape symbol.    
>    
> The QueryParser's analogue '\\*'    
> Query query = new WildcardQuery(new Term("field", " Hello w\\*orld"));    
> don't wokrs.    
>    
> Thanks    
>    
>    
>    
>    
    
    
  
--_----------=_1219158653416592--


From java-user-return-35583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 15:34:16 2008
Return-Path: <java-user-return-35583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34345 invoked from network); 19 Aug 2008 15:34:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 15:34:16 -0000
Received: (qmail 20076 invoked by uid 500); 19 Aug 2008 15:34:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20054 invoked by uid 500); 19 Aug 2008 15:34:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20043 invoked by uid 99); 19 Aug 2008 15:34:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 08:34:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 15:33:06 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 3027B24001
	for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 18:33:03 +0300 (EEST)
Message-ID: <48AAE7AF.7020004@sirma.bg>
Date: Tue, 19 Aug 2008 18:33:03 +0300
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Updating tag-indexes
References: <48AAB621.1050405@sirma.bg> <B1A428B3-3336-4BD9-B499-B4528F5FEF46@mikemccandless.com>
In-Reply-To: <B1A428B3-3336-4BD9-B499-B4528F5FEF46@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Michael and Erick,

Yes we have our own unique IDs for the docs - we use them for other 
purposes, but here we need to deal with Lucene IDs as it is important 
for ParalelReader.
Ok then I will implement the algorithm for updating the small tag-index 
as I intended and as it is not guarantied from the API I will take care 
to check if docIDs remain to be assigned sequentially in each new Lucene 
release.
I will also take care about deletions - first before starting update 
process for the small index I will keep info about deleted docs, then 
will undelete them. After that will start update algorithm. When it 
finishes if there are deletions this will mean that some exception 
occurred. The same will mean if the number of the docs is less than 
initial (then some collapse of deletions occurred) - will have to 
restart the process. If everything is ok then will delete again the docs 
about I have kept info in the begining.

Thanks Once Again,
Ivan



Michael McCandless wrote:
>
> Yes, docIDs are currently sequentially assigned, starting with 0.
>
> BUT: on hitting an exception (say in your analyzer) it will usually 
> use up a docID (and then immediately mark it as deleted).
>
> Also, this behavior isn't "promised" in the API, ie it could in theory 
> (though I think it unlikely) change in a future release of Lucene.
>
> And remember when a merge completes (or, optimize), any deleted docs 
> will "collapse down" all docIDs after them.
>
> Mike
>
> Ivan Vasilev wrote:
>
>> Hi Lucene Guys,
>>
>> I have a question that is simple but is important for me. I did not 
>> found the answer in the javadoc so I am asking here.
>> When adding Document-s by the method IndexWriter.addDocument(doc) 
>> does the documents obtain Lucene IDs in the order that they are added 
>> to the IndexWriter? I mean will first added doc be with Lucene ID 0, 
>> second added with Lucene ID 1, etc?
>>
>> Bellow I describe why I am asking this.
>> We plan to split our index to two separate indexes that will be read 
>> by ParallelReader class. This is so because the one of them will 
>> contain field(s) that will be indexed and stored and it will be 
>> frequently changed. So to have always correct data returned from the 
>> ParallelReader when changing documents in the small index the Lucene 
>> IDs of these docs have to remain the same.
>> To do this Karl Wettin suggests a solution described in *LUCENE-879 
>> <https://issues.apache.org/jira/browse/LUCENE-879>*. I do not like 
>> this solution because it is connected to changing Lucene source code, 
>> and after each refactoring potentially I will have problems. The 
>> solution is related to optimizing index so it will not be reasonably 
>> faster than the one that I prefer. And it is:
>> 1. Read the whole index and reconstruct the documents including index 
>> data by using TermDocs and TermEnum classes;
>> 2. Change the needed documents;
>> 3. Index documents in new index that will replace the initial one.
>> I can even simplify this algorithm (and the speed) if all the fields 
>> will be always stored - I can read just the stored data and based on 
>> this to reconstruct the content of the docs and re index them in new.
>>
>> But anyway everything in the my approaches will depend on this - are 
>> LuceneIDs in the index ordered in the same way as docs are added to 
>> the IndexWriter.
>>
>> Thanks in Advance,
>> Ivan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 3366 (20080819) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 16:26:31 2008
Return-Path: <java-user-return-35584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63746 invoked from network); 19 Aug 2008 16:26:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 16:26:30 -0000
Received: (qmail 3724 invoked by uid 500); 19 Aug 2008 16:26:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3690 invoked by uid 500); 19 Aug 2008 16:26:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3679 invoked by uid 99); 19 Aug 2008 16:26:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 09:26:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.142.190 as permitted sender)
Received: from [209.85.142.190] (HELO ti-out-0910.google.com) (209.85.142.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 16:25:26 +0000
Received: by ti-out-0910.google.com with SMTP id b8so19400tic.11
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 09:25:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=elg+2aBLQ8aPGF0DcZ7Y6HnEb1kAAxsXdMhmsZ6Duro=;
        b=Oos9hK45zfM+nNk7ATNdKOaN49Fv+AD7721NpW4ELEOtrSsZHqhxyJagjXgWO1KKbV
         g2sZh0aru1Kh/4sUmPzs1loKxzktE8yDcOWnqmu3bDdPJpJ6e8VEo+zjoZ73aCRMtAXD
         f2mhafTj9IClOypbBSF863/ja0SEMEJxcetlY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=HYe/rhBqAzMXFc3mGWLSqij5/+ieJgdK1hRJr0EVowvN/gZrBhefNSNsbWCKfP9wE3
         4cvin2jgV9WOEc7Z6j/0vRzOxEuQ/niodTLtrejpAXu/mvB/okfQSr4EYdkMMahAA3n4
         zwtKgi7G1UdYh0ELzzyzrZLQrdBJxCOEU/Rg4=
Received: by 10.110.20.17 with SMTP id 17mr7404919tit.12.1219163137517;
        Tue, 19 Aug 2008 09:25:37 -0700 (PDT)
Received: by 10.110.92.9 with HTTP; Tue, 19 Aug 2008 09:25:37 -0700 (PDT)
Message-ID: <839ba01c0808190925o59cc6586vd2f09d896a5e2d79@mail.gmail.com>
Date: Wed, 20 Aug 2008 00:25:37 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: Are there any Lucene optimizations applicable to SSD?
In-Reply-To: <1219138194.3192.273.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0808190122v10e04f72l7946c6583a929647@mail.gmail.com>
	 <1219138194.3192.273.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks for the reply =)

>
> What aspect of performance do you find lacking? Is it searching or
> indexing? While we've had stellar results for searches, indexing is just
> so-so better than conventional harddisks.

Search response time. We used the search log from our production
system and test it with SSD. The results shows that 75% of queries
returns within 1 second, 90% returns in 2.5 seconds, the remaining 10%
ranges from 2.5 seconds to less than 100 seconds.

Total number of queries is ~40000, so about 10000 queries are kind of
slow, 1000 queries are very slow. But those 10% very slow queries are
not from the first 1000 queries. It's more or less evenly distributed.

> As for optimizing towards SSDs, we've found that the CPU is the
> bottleneck for us: The performance keeps climbing markedly for 1-5
> threads on a 4 core system with a single 64GB SSD, nearly identical to
> the same system with a RAID 0 of 4 * 64GB SSD.

I'd guess our CPU is fine because our test is probably different then
yours. We take one day's search log and emulate the exact search
queries to the Index at the exact time it happens in the search log.
So most of the time the CPU's idle except maybe for the peak hours.
(I'll remember to take a look at the CPU utilization during the test
in peak hour tomorrow.)

Your test keep running queries for as fast as it can get. And since
your queries can return so quickly, I'd guess that's probably why your
CPU gets hot =)


>
> Which SSD did you choose?

It's a single OCZ 64G SSD. We just got it yesterday. Is there a big
difference between different SSDs?


>
> Could you give some more information on the searches? What is a typical
> query, what do you do with the result (e.g. iterate through Hits,
> extracting fields)?

Our search queries are quite complicated sometimes.

All queries involves a Date Range Filter and a Publication Filter.
We've used WrappingCachingFilters for the Publication Filter for there
are only a limited number of combinations for this filter. For the
Date Range Filter we just let it run every time which seems to be
doing fine.

The queries also range from simple term query to phraseQueries to
nested spanQueries. Number of search terms > 10 is not uncommon.

Sorting by date or publication is the norm, sometimes also sort by score.

There are 3 returned fields, docId, date and publication, all of which
we retrieve through fieldCaches.

And we use this method to do the search:
TopFieldDocs Searcher.search(Query query, Filter filter, int n, Sort sort)
where for the test run n=100


We are targeting to get >90% of queries to return under 1 sec. Of
course the more the better =)


Thanks,
Cedric Ho

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 16:43:31 2008
Return-Path: <java-user-return-35585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72093 invoked from network); 19 Aug 2008 16:43:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 16:43:30 -0000
Received: (qmail 17375 invoked by uid 500); 19 Aug 2008 16:43:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17341 invoked by uid 500); 19 Aug 2008 16:43:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17330 invoked by uid 99); 19 Aug 2008 16:43:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 09:43:23 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 16:42:26 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Case Sensitivity
Date: Tue, 19 Aug 2008 12:42:55 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A17A@SUEXCL-02.ad.syr.edu>
In-Reply-To: <48aac361.0da1260a.352c.0b9a@mx.google.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case Sensitivity
Thread-Index: AckB+zCrAJo6TmMdSd23iJGYgmMFBAAF6rMQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Dino,

I think you'd benefit from reading some FAQ answers, like:

"Why is it important to use the same analyzer type during indexing and =
search?"
<http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f=
2c44472d10961ba63c>

Also, have a look at the AnalysisParalysis wiki page for some hints:
<http://wiki.apache.org/lucene-java/AnalysisParalysis>

On 08/19/2008 at 8:57 AM, Dino Korah wrote:
> From the discussion here what I could understand was, if I am using
> StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying,
> I shouldn't have any problems with cases.

If by "shouldn't have problems with cases" you mean "can match =
case-insensitively", then this is true.

> But if I have any UN_TOKENIZED fields there will be problems if I do
> not case-normalize them myself before adding them as a field to the
> document.

Again, assuming that by "case-normalize" you mean "downcase", and that =
you want case-insensitive matching, and that you use the =
StandardAnalyzer (or some other downcasing analyzer) at query-time, then =
this is true.

> In my case I have a mixed scenario. I am indexing emails and the email
> addresses are indexed UN_TOKENIZED. I do have a second set of custom
> tokenized field, which keep the tokens in individual fields
> with same name.
[...]
> Does it mean that where ever I use UN_TOKENIZED, they do not get =
through
> the StandardAnalyzer before getting Indexed, but they do when they are
> searched on?

This is true.

> If that is the case, Do I need to normalise them before adding to
> document?

If you want case-insensitive matching, then yes, you do need to =
normalize them before adding them to the document.

> I also would like to know if it is better to employ an EmailAnalyzer
> that makes a TokenStream out of the given email address, rather
> than using a simplistic function that gives me a list of string pieces
> and adding them one by one. With searches, would both the approaches
> give same result?

Yes, both approaches give the same result.  When you add string pieces =
one-by-one, you are adding multiple same-named fields. By contrast, the =
EmailAnalyzer approach would add a single field, and would allow you to =
control positions (via Token.setPositionIncrement(): =
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/Token=
.html#setPositionIncrement(int)>), e.g. to improve phrase handling.  =
Also, if you make up an EmailAnalyzer, you can use it to search against =
your tokenized email field, along with other analyzer(s) on other =
field(s), using the PerFieldAnalyzerWrapper =
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/PerFi=
eldAnalyzerWrapper.html>.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 17:48:09 2008
Return-Path: <java-user-return-35586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7478 invoked from network); 19 Aug 2008 17:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 17:48:09 -0000
Received: (qmail 96922 invoked by uid 500); 19 Aug 2008 17:48:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96879 invoked by uid 500); 19 Aug 2008 17:48:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96868 invoked by uid 99); 19 Aug 2008 17:48:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 10:48:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shore.cloud@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 17:47:00 +0000
Received: by gxk6 with SMTP id 6so5064657gxk.5
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 10:46:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=swvsBziIpXXTBvVsT82+YGKxLkaHJGHjS6sGf5JsWtk=;
        b=heIedNPYUuaVp01m6b0SgbexizwpGdXLbNZm8PSh3Vcb+VWsr3zID242gDBO8t1kX7
         amp94cE13BdWrsoLkOlHkd07923QhtmjBoiPGNbgH1ccJ8VN+rGEnsGkNNK6S/l/nzSV
         KKVYdGm4mI5B6dRdTp5peXY1xtxVdLp7coFNQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Ed/KT3U5WEcTeKGLD2CkkLYdQnN0FWgN3WD4Cj/QQk3V4GMmKi8kX/gjZDBmILYDOm
         FJIM81HfhE0EjW3+Yb2I/0yKnYwgoVnllUuJ6AAHwiXfUaQEoNPO+UGxIwZHnXSpc7mI
         jfYl4/7BspQHK3EvvCojGl10UoXqXHwsMMkiQ=
Received: by 10.142.158.3 with SMTP id g3mr2614639wfe.344.1219167988141;
        Tue, 19 Aug 2008 10:46:28 -0700 (PDT)
Received: by 10.142.70.21 with HTTP; Tue, 19 Aug 2008 10:46:27 -0700 (PDT)
Message-ID: <ae7ef6650808191046m6dae7a6bi5b081cd3b8e891eb@mail.gmail.com>
Date: Wed, 20 Aug 2008 01:46:27 +0800
From: "Mr Shore" <shore.cloud@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search for special condition.
In-Reply-To: <a823853a0808171703l618060bav708906f00b355e98@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17838_30717608.1219167987875"
References: <731882.70944.qm@web50309.mail.re2.yahoo.com>
	 <a823853a0808122146q740b29dbgc3811be0b127d130@mail.gmail.com>
	 <ae7ef6650808132043n54edaa2bj3bce516a494f0a2f@mail.gmail.com>
	 <a823853a0808132143m1ec4bb26pfceba7b992500fe7@mail.gmail.com>
	 <ae7ef6650808150917tcf7349fy7f440153ef92c31b@mail.gmail.com>
	 <a823853a0808171703l618060bav708906f00b355e98@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17838_30717608.1219167987875
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

sKi758fVtM+02TopCgoyMDA4LzgvMTggwOW/67yuIDxuZWVkNHNwZEBnbWFpbC5jb20+Cgo+IEhp
Lgo+IFllcywgdGhhdCBtZXRob2QgaXMgaW4gbHVjZW5lLgo+IEknbSBzb3JyeSBhYm91dCBJIGRp
ZCBtaXN1bmRlcnN0YW5kIHlvdXIgd29yZHMuCj4gSSBob3BlIHRoYXQgeW91IHdpbGwgZmluZCB0
aGUgd2F5IGZvciB5b3Ugd2FudC4KPgo+IGJ5ZS46KQo+Cj4KPiAyMDA4LzgvMTYsIE1yIFNob3Jl
IDxzaG9yZS5jbG91ZEBnbWFpbC5jb20+Ogo+ID4KPiA+IHRoYW5rcyxKYW5nCj4gPiBidXQgSSBk
aWRuJ3QgZmluZCB0aGUgbWV0aG9kIGlzVG9rZW5DaGFyCj4gPiBtYXliZSBpdCdzIGluIGx1Y2Vu
ZSxyaWdodD8KPiA+IGJ1dCBJJ20gdXNpbmcgbnV0Y2ggdGhpcyB0aW1lLgo+ID4gdGhhbmsgdSBh
bGwgdGhlIHNhbWU6KQo+ID4KPiA+IDIwMDgvOC8xNCDA5b/rvK4gPG5lZWQ0c3BkQGdtYWlsLmNv
bT4KPiA+Cj4gPiA+IEhpLiBJIHdhcyB2ZXJ5IGhhcHB5ICx5b3UgYXJlIGxvdmUgS29yZWFuIGxh
bmd1YWdlIGEgbG90IDopCj4gPiA+IFNvIGRvIHlvdSB3YW50IHNlYXJjaCBmb3Igc3BlY2lhbCBj
aGFyYWN0ZXJzPwo+ID4gPgo+ID4gPiBJZiB5b3Ugd2FudCBpbmNsdWRlIHNwZWNpYWwgY2hhcmFj
dGVycyB3aGVuIGluZGV4aW5nLCB5b3UgY2FuIG92ZXJyaWRlCj4gPiA+IG1ldGhvZCBpbiBjbGFz
cwo+ID4gPiBUb2tlbml6ZXIuIE1ldGhvZCdzIG5hbWUgaXMgaXNUb2tlbkNoYXIoY2hhciBjKS4K
PiA+ID4KPiA+ID4gcHJvdGVjdGVkIGJvb2xlYW4gaXNUb2tlbkNoYXIoY2hhciBjKSB7Cj4gPiA+
ICAgICAgICByZXR1cm4gQ2hhcmFjdGVyLmlzTGV0dGVyKGMpOwo+ID4gPiB9Cj4gPiA+Cj4gPiA+
IEFzIHlvdSBzZWUsIHRoYXQgbWV0aG9kIGlzIHJldHVybiB0cnVlIHdoZW4gdGhlIGNoYXJhY3Rl
ciBjIGlzIGEKPiA+ID4gY2hhcmFjdGVyXl4KPiA+ID4KPiA+ID4gSWYgeW91IGZpeCB0aGF0IG1l
dGhvZCAicmV0dXJuIENoYXJhY3Rlci5pc0xldHRlcihjKSAgfHwgIGM9PScuJzsgIgo+ID4gPiB0
aGVuLCB5b3Ugd2lsbCBnZXQgdGhlIHJlc3VsdCB0b2tlbiB0aGF0IGhhcyBzcGVjaWFsIGNoYXJh
Y3RlcnMgbGlrZSAuCj4gPiA+Cj4gPiA+IHRoYW5rcy4gOikKPiA+ID4KPiA+ID4gSmFuZy4KPiA+
ID4KPiA+ID4gMjAwOC84LzE0LCBNciBTaG9yZSA8c2hvcmUuY2xvdWRAZ21haWwuY29tPjoKPiA+
ID4gPgo+ID4gPiA+IGNhbiBudXRjaCBvciBsdWNlbmUgc3VwcG9ydCBzZWFyY2ggZm9yIHNwZWNp
YWwgY2hhcmFjdGVycyBsaWtlIC4/Cj4gPiA+ID4gd2hlbiBpIHNlYXJjaCAiLm5ldCIgbWFueSBy
ZXN1bHQgY29tZSBmb3IgIm5ldCIKPiA+ID4gPiBpIHdhbnQgdG8gZXhjbHVkZSB0aGVtCj4gPiA+
ID4gcHM6aSBsb3ZlIGtvcmVhbiBsYW5ndWFnZSBhIGxvdAo+ID4gPiA+Cj4gPiA+ID4gMjAwOC84
LzEzIMDlv+u8riA8bmVlZDRzcGRAZ21haWwuY29tPgo+ID4gPiA+Cj4gPiA+ID4gPiBoaS4gdGhh
bmsgeW91IGZvciB5b3VyIHJlc3BvbnNlLgo+ID4gPiA+ID4KPiA+ID4gPiA+IEkgd2FzIGZvdW5k
IHRoZSB3YXkgd2l0aCB5b3VyIGhlbHAuCj4gPiA+ID4gPgo+ID4gPiA+ID4gVGhlcmUgYXJlIGNs
YXNzIHRoYXQgbmFtZSBpcyBDb25zdGFudFNjb3JlUmFuZ2VRdWVyeSBhbmQKPiBOdW1iZXJUb29s
cy4KPiA+ID4gPiA+Cj4gPiA+ID4gPiBSZWZlcmVuY2Ugc2l0ZSBpcyBoZXJlLgo+ID4gPiA+ID4K
PiA+ID4gPiA+Cj4gPiA+ID4KPiA+ID4KPiA+Cj4gaHR0cDovL21hcmttYWlsLm9yZy9tZXNzYWdl
L2RjaXJtaWZvYXQ2dXFmN3kjcXVlcnk6b3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuTnVtYmVy
VG9vbHMrcGFnZToxK21pZDp0bGQzdWVrYXlsbXUyY3d0K3N0YXRlOnJlc3VsdHMKPiA+ID4gPiA+
Cj4gPiA+ID4gPgo+ID4gPiA+ID4gVGhhbmtzIHZlcnkgbXVjaC4gOikKPiA+ID4gPiA+Cj4gPiA+
ID4gPgo+ID4gPiA+ID4KPiA+ID4gPiA+IDIwMDgvOC8xMywgT3RpcyBHb3Nwb2RuZXRpYyA8b3Rp
c19nb3Nwb2RuZXRpY0B5YWhvby5jb20+Ogo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBIaSwKPiA+
ID4gPiA+ID4KPiA+ID4gPiA+ID4gTHVjZW5lIGRvZXNuJ3QgaGF2ZSB0aGUgZ3JlYXRlciB0aGFu
IG9wZXJhdG9yLiAgUGVyaGFwcyB5b3UgY2FuCj4gdXNlCj4gPiA+ID4gcmFuZ2UKPiA+ID4gPiA+
ID4gcXVlcmllcyB0byBhY2NvbXBsaXNoIHRoZSBzYW1lIHRoaW5nLgo+ID4gPiA+ID4gPgo+ID4g
PiA+ID4gPgo+ID4gPiA+ID4gPgo+ID4gPiA+ID4KPiA+ID4gPgo+ID4gPgo+ID4KPiBodHRwOi8v
bHVjZW5lLmFwYWNoZS5vcmcvamF2YS8yXzNfMi9xdWVyeXBhcnNlcnN5bnRheC5odG1sI1Jhbmdl
JTIwU2VhcmNoZXMKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gT3Rpcwo+ID4gPiA+ID4gPiAtLQo+
ID4gPiA+ID4gPiBTZW1hdGV4dCAtLSBodHRwOi8vc2VtYXRleHQuY29tLyAtLSBMdWNlbmUgLSBT
b2xyIC0gTnV0Y2gKPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4KPiA+ID4gPiA+
ID4gLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tCj4gPiA+ID4gPiA+ID4gRnJvbTogwOW/67yu
IDxuZWVkNHNwZEBnbWFpbC5jb20+Cj4gPiA+ID4gPiA+ID4gVG86IGphdmEtdXNlckBsdWNlbmUu
YXBhY2hlLm9yZwo+ID4gPiA+ID4gPiA+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMiwgMjAwOCA2
OjAxOjAwIEFNCj4gPiA+ID4gPiA+ID4gU3ViamVjdDogc2VhcmNoIGZvciBzcGVjaWFsIGNvbmRp
dGlvbi4KPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+IGhpLgo+ID4gPiA+ID4gPiA+Cj4gPiA+
ID4gPiA+ID4gSSBhbSBzZWFyY2hpbmcgZm9yIGx1Y2VuZSBhcGkgb3IgZnVuY3Rpb24gbGlrZSBx
dWVyeSAiRklFTEQgPgo+ID4gMTAwMCIKPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+IEZvciBl
eGFtcGxlLCBhIHVzZXIgd2FudHMgdG8gc2VhcmNoIGEgcHJvZHVjdCB3aGljaCBwcmljZSBpcwo+
ID4gYmlnZ2VyCj4gPiA+ID4gPiB0aGVuCj4gPiA+ID4gPiA+ID4gdXNlcidzIGlucHV0Lgo+ID4g
PiA+ID4gPiA+IElmIHVzZXIncyBpbnB1dCBpcyAxMDAwMCB0aGVuIHJlc3VsdCBhcmUgdGhlIHBy
b2R1Y3RzIGluIGluZGV4Cj4gPiBqdXN0Cj4gPiA+ID4gPiBsaWtlCj4gPiA+ID4gPiA+ID4gIlBS
SUNFID4gMTAwMDAiCj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiBJcyB0aGVyZSBhbnkgd2F5
IHRvIHNlYXJjaCBsaWtlIHRoYXQ/Cj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiB0aGFua3Mu
Cj4gPiA+ID4gPiA+ID4gSmFuZy4KPiA+ID4gPiA+ID4gPiAtLQo+ID4gPiA+ID4gPiA+IERFVr/r
vcQKPiA+ID4gPiA+ID4gPiBodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo+ID4gPiA+ID4g
Pgo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPgo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+ID4gPiA+IFRv
IHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hl
Lm9yZwo+ID4gPiA+ID4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOgo+IGphdmEt
dXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+Cj4gPiA+
ID4gPgo+ID4gPiA+ID4KPiA+ID4gPiA+IC0tCj4gPiA+ID4gPiBERVa/673ECj4gPiA+ID4gPiBo
dHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo+ID4gPiA+ID4KPiA+ID4gPgo+ID4gPgo+ID4g
Pgo+ID4gPgo+ID4gPiAtLQo+ID4gPiBERVa/673ECj4gPiA+IGh0dHA6Ly9kZXZ5b25nc2lrLnRp
c3RvcnkuY29tCj4gPiA+Cj4gPgo+Cj4KPgo+IC0tCj4gREVWv+u9xAo+IGh0dHA6Ly9kZXZ5b25n
c2lrLnRpc3RvcnkuY29tCj4K
------=_Part_17838_30717608.1219167987875--

From java-user-return-35587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 19 20:14:59 2008
Return-Path: <java-user-return-35587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5443 invoked from network); 19 Aug 2008 20:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2008 20:14:59 -0000
Received: (qmail 33777 invoked by uid 500); 19 Aug 2008 20:14:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33034 invoked by uid 500); 19 Aug 2008 20:14:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33023 invoked by uid 99); 19 Aug 2008 20:14:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 13:14:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Aug 2008 20:13:52 +0000
Received: (qmail 53462 invoked by uid 60001); 19 Aug 2008 20:14:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=shyXgXwGeEVnjaDTjIQSrHG74u57oT3t7PkYyeCl5FMeRAL8dKd58GeXQQG84eutLTx0AYiB2SF3s0R0RaGI6SAph7/+DJf/PZLaYTDccdmkdPiI5sTHV8jNe/jBtRsaf8FwQyf1Qj97bzJ8YU9dabzdB2HXW98Si+FUUXIHwHY=;
Received: from [79.201.69.130] by web27104.mail.ukl.yahoo.com via HTTP; Tue, 19 Aug 2008 20:14:19 GMT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218
Date: Tue, 19 Aug 2008 20:14:19 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Are there any Lucene optimizations applicable to SSD?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <954624.52710.qm@web27104.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

hi Cedric, =0Ahas nothing to do with SSD... but =0A=0A=0A> =0A> All queries=
 involves a Date Range Filter and a Publication Filter.=0A> We've used Wrap=
pingCachingFilters for the Publication Filter for there=0A> are only a limi=
ted number of combinations for this filter. For the=0A> Date Range Filter w=
e just let it run every time which seems to be=0A> doing fine.=0A=0A=0Aif y=
ou have possibility to sort your index once in a while on something like Da=
teRange  you will be surprised how good OS File cache utilizes locality of =
reference... we had dramatic (ca 30%) improvements just by having index sor=
ted once a week on the most used fields... depend on nature of your collect=
ion and is not always possible, but if possible, does the job. If this is a=
lso only used as boolean condition to select range of documents, not affect=
ing score (guess not), give omitTf() a try, your index will be smaller as w=
ell  =0A=0A=0ASend instant messages to your online friends http://uk.messen=
ger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 00:10:37 2008
Return-Path: <java-user-return-35588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54128 invoked from network); 20 Aug 2008 00:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 00:10:37 -0000
Received: (qmail 61899 invoked by uid 500); 20 Aug 2008 00:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61870 invoked by uid 500); 20 Aug 2008 00:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61859 invoked by uid 99); 20 Aug 2008 00:10:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 17:10:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 00:09:32 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id CF0B44ED8CA
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 10:09:05 +1000 (EST)
Message-ID: <48AB60BE.2080301@nuix.com>
Date: Wed, 20 Aug 2008 10:09:34 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How I can find wildcard symbol with WildcardQuery?
References: <E1KVSrF-000Aup-4Y@sonic.ukr.net>
In-Reply-To: <E1KVSrF-000Aup-4Y@sonic.ukr.net>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

    wrote:
> Yes, you are correct - NO_NORMS has nothing to do with tokenization,
> thats mean no analyzers used.

Just to avoid this ambiguous, semi-contradicting wording confusing the 
hell out of anyone...

NO_NORMS *does* have something to do with tokenisation -- it implies 
UN_TOKENIZED.

Source code QFT:

     } else if (index == Index.NO_NORMS) {
       this.isIndexed = true;
       this.isTokenized = false;
       this.omitNorms = true;
     } ...

Daniel

-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 01:29:31 2008
Return-Path: <java-user-return-35589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26059 invoked from network); 20 Aug 2008 01:29:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 01:29:30 -0000
Received: (qmail 9556 invoked by uid 500); 20 Aug 2008 01:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9040 invoked by uid 500); 20 Aug 2008 01:29:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9029 invoked by uid 99); 20 Aug 2008 01:29:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 18:29:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.142.190 as permitted sender)
Received: from [209.85.142.190] (HELO ti-out-0910.google.com) (209.85.142.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 01:28:25 +0000
Received: by ti-out-0910.google.com with SMTP id b8so106156tic.11
        for <java-user@lucene.apache.org>; Tue, 19 Aug 2008 18:28:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=yazepaFHhFSS7wp7ilu5igPhopPdbDCmaw7welWO+4E=;
        b=x0rAErWmbkb8cEQ8QjSonA61PHBAj9hbwKohZ4l0deciYdPhedzrTM4oGedVxFCs9D
         a3s4GS0EQjsz+v3Kv8N4vNZBhNr4ObwSMcwTGHbPI81oeWevCOKUDPaI2df2VFbNSzuB
         izJJG94Q6VrHcs2HKk77rKlI3O4Dh+HJlwPS8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=qWcz3Fzrhrm+opnkPZlZxpNDR435AqCWefGkAQwiBmlV4m/cbCxeVLojUQ1kPjdE5Q
         gHL5PCzvcg4NNp3SHrpX4P0SzzDJu2GIB9PmsgLEeRwDE6JKfV0GUkzR1asoOr34XW00
         N0UmbA9Nca7bytrSdTx3BnHOFZ7f6aznHYiyE=
Received: by 10.110.70.5 with SMTP id s5mr534683tia.55.1219195716294;
        Tue, 19 Aug 2008 18:28:36 -0700 (PDT)
Received: by 10.110.60.7 with HTTP; Tue, 19 Aug 2008 18:28:36 -0700 (PDT)
Message-ID: <839ba01c0808191828r4630eb8apada1af74bbf2621d@mail.gmail.com>
Date: Wed, 20 Aug 2008 09:28:36 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Are there any Lucene optimizations applicable to SSD?
In-Reply-To: <954624.52710.qm@web27104.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <954624.52710.qm@web27104.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi eks,

My index is fully optimized, but I wasn't aware that I can sort it by
fields in Lucene. Could you elaborate on how to do that?

By omitTf(), do you mean Fieldable.setOmitNorms(true)? I'll try that.

Thanks,
Cedric Ho


>
> if you have possibility to sort your index once in a while on something like DateRange  you will be surprised how good OS File cache utilizes locality of reference... we had dramatic (ca 30%) improvements just by having index sorted once a week on the most used fields... depend on nature of your collection and is not always possible, but if possible, does the job. If this is also only used as boolean condition to select range of documents, not affecting score (guess not), give omitTf() a try, your index will be smaller as well
>
>
> Send instant messages to your online friends http://uk.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 04:30:39 2008
Return-Path: <java-user-return-35590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43042 invoked from network); 20 Aug 2008 04:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 04:30:39 -0000
Received: (qmail 18844 invoked by uid 500); 20 Aug 2008 04:30:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18801 invoked by uid 500); 20 Aug 2008 04:30:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18790 invoked by uid 99); 20 Aug 2008 04:30:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 21:30:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oskwon@thinkfree.com designates 211.214.213.251 as permitted sender)
Received: from [211.214.213.251] (HELO tfmail.thinkfree.com) (211.214.213.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 04:29:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by tfmail.thinkfree.com (Postfix) with ESMTP id 72DBE16687FD
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 13:29:01 +0900 (KST)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -3.053
X-Spam-Level: 
Received: from tfmail.thinkfree.com ([127.0.0.1])
	by localhost (tfmail.thinkfree.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pZq+2oDoBREs for <java-user@lucene.apache.org>;
	Wed, 20 Aug 2008 13:29:00 +0900 (KST)
Received: from oskwon (unknown [211.214.213.193])
	by tfmail.thinkfree.com (Postfix) with ESMTP id DEC0A16687F9
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 13:29:00 +0900 (KST)
From: "Kwon, Ohsang" <oskwon@thinkfree.com>
To: <java-user@lucene.apache.org>
References: <E1KVR89-00040j-Qd@ffe11.ukr.net>
Subject: RE: How I can find wildcard symbol  with WildcardQuery?
Date: Wed, 20 Aug 2008 13:28:57 +0900
Message-ID: <C61E667B68BB41ABAD501D6DB5EED977@oskwon>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1251"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <E1KVR89-00040j-Qd@ffe11.ukr.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AckB/m2ql2dxRhT3S/2p7O6l0yvQ+gAc/8cg
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.053 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=1.346, BAYES_00=-2.599]

Why do you use to WildcardQuery? You are not need to whildcard. =
(maybe..)
Use term query.

Term term =3D new Term("field", "Hello w*orld");
Query query1 =3D new TermQuery(term);

gimme post
-----Original Message-----
From: =D1=E5=F0=E3=B3=E9 =CA=E0=F0=EF=E5=ED=EA=EE =
[mailto:bergschloss@ukr.net]=20
Sent: Tuesday, August 19, 2008 10:20 PM
To: java-user@lucene.apache.org
Subject: How I can find wildcard symbol with WildcardQuery?


Hello   =20
   =20
For example, we have a text:   =20
   =20
" Hello w*orld"   =20
=A0it's indexed as NO_NORMS, so this phrase is term.   =20
   =20
And I have a code:   =20
   =20
Query query =3D new WildcardQuery(new Term("field", " Hello w*orld")); =
its
work   =20
   =20
But I need symbol '*' as ordinary symbol, not escape symbol.   =20
   =20
The QueryParser's analogue '\\*'   =20
Query query =3D new WildcardQuery(new Term("field", " Hello w\\*orld")); =
  =20
don't wokrs.   =20
   =20
Thanks   =20
   =20
   =20
   =20
 =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 04:37:07 2008
Return-Path: <java-user-return-35591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46567 invoked from network); 20 Aug 2008 04:37:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 04:37:05 -0000
Received: (qmail 25779 invoked by uid 500); 20 Aug 2008 04:36:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25740 invoked by uid 500); 20 Aug 2008 04:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25729 invoked by uid 99); 20 Aug 2008 04:36:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 21:36:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 04:36:00 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 1D6904ED8CA
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 14:36:04 +1000 (EST)
Message-ID: <48AB9F4D.6030603@nuix.com>
Date: Wed, 20 Aug 2008 14:36:29 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How I can find wildcard symbol  with WildcardQuery?
References: <E1KVR89-00040j-Qd@ffe11.ukr.net> <C61E667B68BB41ABAD501D6DB5EED977@oskwon>
In-Reply-To: <C61E667B68BB41ABAD501D6DB5EED977@oskwon>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Kwon, Ohsang wrote:
> Why do you use to WildcardQuery? You are not need to whildcard. (maybe..)
> Use term query.

What if you need to match a literal wildcard *and* an actual wildcard. :-)

Daniel


-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 04:40:49 2008
Return-Path: <java-user-return-35592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49698 invoked from network); 20 Aug 2008 04:40:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 04:40:49 -0000
Received: (qmail 29197 invoked by uid 500); 20 Aug 2008 04:40:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29156 invoked by uid 500); 20 Aug 2008 04:40:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29145 invoked by uid 99); 20 Aug 2008 04:40:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2008 21:40:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 04:39:45 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 786704ED8CA
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 14:39:48 +1000 (EST)
Message-ID: <48ABA031.4020000@nuix.com>
Date: Wed, 20 Aug 2008 14:40:17 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How I can find wildcard symbol  with WildcardQuery?
References: <E1KVR89-00040j-Qd@ffe11.ukr.net> <C61E667B68BB41ABAD501D6DB5EED977@oskwon> <48AB9F4D.6030603@nuix.com>
In-Reply-To: <48AB9F4D.6030603@nuix.com>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I wrote:
> What if you need to match a literal wildcard *and* an actual wildcard. :-)

Actually this was a rhetorical question, but there is at least one 
answer: use a regex query instead.  Regexes do support escaping the 
special symbols, so this problem doesn't exist for those.

Daniel


-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 07:06:33 2008
Return-Path: <java-user-return-35593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33144 invoked from network); 20 Aug 2008 07:06:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 07:06:33 -0000
Received: (qmail 25535 invoked by uid 500); 20 Aug 2008 07:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25497 invoked by uid 500); 20 Aug 2008 07:06:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25486 invoked by uid 99); 20 Aug 2008 07:06:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 00:06:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.35] (HELO web27103.mail.ukl.yahoo.com) (217.146.182.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Aug 2008 07:05:26 +0000
Received: (qmail 34318 invoked by uid 60001); 20 Aug 2008 07:04:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=asPwlzI4ySEWJqwtf0Nwl/7yoMTdpf4xGPEwV9j5ih7lmV1FrjqFkzgb/xPGzuVwLM43P4ekM3ZHTT6GyMsITxHP0f2PIx7n1B0fOQiX+gyEDkR8cBMZlDqb1VLIaI0iybByaJ5zgkSJDK5twvh0HaZLYCIb9yler0z6398yC4k=;
X-YMail-OSG: .lZyzZwVM1k3GyIYjRHEBKvRZ_2eYanSZBAP6uCCottUKsffnqeuyDd_8xFlThgkOXEINb.CV.rgM9SIq0.2zi3Q92Z_iL1049owV.w4T.pvq9zT7p0GHp12aOmomrGWbj4ccteV50_J1WP7Ju92otRq
Received: from [84.131.239.197] by web27103.mail.ukl.yahoo.com via HTTP; Wed, 20 Aug 2008 07:04:53 GMT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Wed, 20 Aug 2008 07:04:53 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Are there any Lucene optimizations applicable to SSD?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <537909.34111.qm@web27103.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The simplest sorting would be to sort your collection before indexing, beca=
use Lucene will preserve order of added documents  I think nutch sorts inde=
x afterward somehow, but I do not know how this works=0A=0A =0Aby omitTf() =
I mean the new feature in the trunk version, see https://issues.apache.org/=
jira/browse/LUCENE-1340=0A=0A=0A=0A=0A=0A=0A=0A=0A----- Original Message --=
--=0A> From: Cedric Ho <cedric.ho@gmail.com>=0A> To: java-user@lucene.apach=
e.org=0A> Sent: Wednesday, 20 August, 2008 3:28:36 AM=0A> Subject: Re: Are =
there any Lucene optimizations applicable to SSD?=0A> =0A> Hi eks,=0A> =0A>=
 My index is fully optimized, but I wasn't aware that I can sort it by=0A> =
fields in Lucene. Could you elaborate on how to do that?=0A> =0A> By omitTf=
(), do you mean Fieldable.setOmitNorms(true)? I'll try that.=0A> =0A> Thank=
s,=0A> Cedric Ho=0A> =0A> =0A> >=0A> > if you have possibility to sort your=
 index once in a while on something like =0A> DateRange  you will be surpri=
sed how good OS File cache utilizes locality of =0A> reference... we had dr=
amatic (ca 30%) improvements just by having index sorted =0A> once a week o=
n the most used fields... depend on nature of your collection and =0A> is n=
ot always possible, but if possible, does the job. If this is also only use=
d =0A> as boolean condition to select range of documents, not affecting sco=
re (guess =0A> not), give omitTf() a try, your index will be smaller as wel=
l=0A> >=0A> >=0A> > Send instant messages to your online friends http://uk.=
messenger.yahoo.com=0A> >=0A> > -------------------------------------------=
--------------------------=0A> > To unsubscribe, e-mail: java-user-unsubscr=
ibe@lucene.apache.org=0A> > For additional commands, e-mail: java-user-help=
@lucene.apache.org=0A> >=0A> >=0A> =0A> -----------------------------------=
----------------------------------=0A> To unsubscribe, e-mail: java-user-un=
subscribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-=
help@lucene.apache.org=0A=0A=0ASend instant messages to your online friends=
 http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 08:06:50 2008
Return-Path: <java-user-return-35594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64022 invoked from network); 20 Aug 2008 08:06:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 08:06:50 -0000
Received: (qmail 27830 invoked by uid 500); 20 Aug 2008 08:06:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27801 invoked by uid 500); 20 Aug 2008 08:06:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27790 invoked by uid 99); 20 Aug 2008 08:06:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 01:06:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 08:05:44 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K5W00A693UBTT@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 20 Aug 2008 10:06:11 +0200 (MEST)
Date: Wed, 20 Aug 2008 10:06:11 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Are there any Lucene optimizations applicable to SSD?
In-reply-to: <839ba01c0808190925o59cc6586vd2f09d896a5e2d79@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1219219571.3192.328.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.22.3.1 (2.22.3.1-1.fc9)
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: 8BIT
References: <839ba01c0808190122v10e04f72l7946c6583a929647@mail.gmail.com>
 <1219138194.3192.273.camel@PC990.sb.statsbiblioteket.dk>
 <839ba01c0808190925o59cc6586vd2f09d896a5e2d79@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2008-08-20 at 00:25 +0800, Cedric Ho wrote:
> Search response time. We used the search log from our production
> system and test it with SSD. The results shows that 75% of queries
> returns within 1 second, 90% returns in 2.5 seconds, the remaining 10%
> ranges from 2.5 seconds to less than 100 seconds.

Are the sub-second response times fairly equal or fluctuating?

Do you have the figures for conventional harddisks?

> Total number of queries is ~40000, so about 10000 queries are kind of
> slow, 1000 queries are very slow. But those 10% very slow queries are
> not from the first 1000 queries. It's more or less evenly distributed.

Is it the same queries that are slow each time?

> It's a single OCZ 64G SSD. We just got it yesterday. Is there a big
> difference between different SSDs?

Depends on who you ask...

There's a big difference for bulk reads and writes, but that's not the
main issue for searches. While there's also a difference in
IO-operations/second, the count is normally so high, compared to discs,
that just using a random SSD (discounting slap-4-CF-cards-together
hacks) should give you a clear improvement.

The OCZ-drives are getting fine reviews and I would definitely count
them as serious SSDs.

Have you checked to see if your controller can keep up with the drive?
Running a standard harddrive-benchmark with IO-operations/second
measurements might be an idea.

> All queries involves a Date Range Filter and a Publication Filter.
> We've used WrappingCachingFilters for the Publication Filter for there
> are only a limited number of combinations for this filter. For the
> Date Range Filter we just let it run every time which seems to be
> doing fine.
> 
> The queries also range from simple term query to phraseQueries to
> nested spanQueries. Number of search terms > 10 is not uncommon.

Our queries normally has fewer terms but gets expanded to 4-5 fields.
We have no filters and very few ranges.

Have you tried monitoring the memory-usage of the JVM? At one time we
had a lot of short-term allocation of fairly large structures - this
triggered a lot of full GC's and killed performance.

This still doesn't account for all the > 1 second response times though.

> There are 3 returned fields, docId, date and publication, all of which
> we retrieve through fieldCaches.

We retrieve only a single field for 20 hits, using no caching, but it's
-1KB in size. Upping the number of retrieved fields doesn't affect
performance in any significant way for us.

> And we use this method to do the search:
> TopFieldDocs Searcher.search(Query query, Filter filter, int n, Sort sort)
> where for the test run n=100

I'll see if I can steal time enough to make a test with sorting, but no
promises.

> We are targeting to get >90% of queries to return under 1 sec. Of
> course the more the better =)

That's about the same as our original goal, but we've gotten greedier in
the meantime.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 10:30:22 2008
Return-Path: <java-user-return-35595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41328 invoked from network); 20 Aug 2008 10:30:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 10:30:21 -0000
Received: (qmail 99356 invoked by uid 500); 20 Aug 2008 10:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99335 invoked by uid 500); 20 Aug 2008 10:30:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99324 invoked by uid 99); 20 Aug 2008 10:30:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 03:30:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.190 as permitted sender)
Received: from [209.85.142.190] (HELO ti-out-0910.google.com) (209.85.142.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 10:29:11 +0000
Received: by ti-out-0910.google.com with SMTP id b8so261604tic.11
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 03:29:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Q2RJsTMd1COAbiDgcuhk0TETAI6isBfpXRRCBxmuXTk=;
        b=gw8VmRk6szp0PLy/7L/PxpYixgaHC5lXN3d5hseALTI2mSdudfC55uqsFILR3n0Blq
         4LVCaTuztetsCj4CfPvg2RX7nG8H1vBragWwJJCm1Zlq6lr4dGEH16BlRyLxSVbEPZD1
         msxi9zzlDAvmzpChL9DQQm3Q92W75xGDZ3SEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=k+DBmEik82mVAjuz7nDc9juKzJuBX9xp1KWh2hkJhi4X3aodwyJbfaxGSd5a6qGZ5Q
         DZGBG25gKRUTINlrP0tu0+F9m2i1vatHNu5oc4/9UhkMVUMAmUsqZtNLIAlYwGK0B1+L
         I96Hlr3h/1Wzw3leSr/pQ4WhAjmekartgSTo0=
Received: by 10.110.47.17 with SMTP id u17mr4795697tiu.49.1219228179006;
        Wed, 20 Aug 2008 03:29:39 -0700 (PDT)
Received: by 10.110.109.13 with HTTP; Wed, 20 Aug 2008 03:29:38 -0700 (PDT)
Message-ID: <6fc71b230808200329i1c4bbc35rf97d4f90663d87e2@mail.gmail.com>
Date: Wed, 20 Aug 2008 15:59:38 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.NullPointerExcpetion while indexing on linux
In-Reply-To: <689A3F11-301C-4A26-9C2A-70B5B7238113@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_134639_8780902.1219228179015"
References: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com>
	 <8c4e68610808190232m3741e15cwb232ce4ef14123a0@mail.gmail.com>
	 <8711014D-5FEE-4CC8-8874-BCD3A8C4C566@mikemccandless.com>
	 <6fc71b230808190345h71653e1ai8ed9b64aeb31ea94@mail.gmail.com>
	 <689A3F11-301C-4A26-9C2A-70B5B7238113@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_134639_8780902.1219228179015
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mike. I found the problem.
The problem was that I was not converting the value of the fields to utf-8
and hence while adding it to doc it was getting stored as None.
So, when I did doc.get('fieldA') , instead of giving the blank or any other
string, it was giving out None.

To overcome this, I first converted the string to utf-8 format and then
field.setValue() and then doc.add(field), It seems to be working fine.,


However, I have one question. When I do a feild.setValue() and then
doc.add() will it replace the value of the field in the doc or add a new
field with the similar name and the new value? Since i am reusing the doc
and i am not reinitialising the doc anywhere and since you told that
doc.removeField() is an expensive operation.

Thanks,
Aditi


On Tue, Aug 19, 2008 at 5:39 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> On quick look that code looks fine, though removeField is an expensive
> operation and unnecessary for this.
>
> We really need the full traceback of the exception.
>
> Mike
>
>
> Aditi Goyal wrote:
>
>  Thanks Michael and Ian for your valuable response.
>> I am attaching a small default code. Please have a look and tell me where
>> am
>> I going wrong.
>>
>> import lucene
>> from lucene import Document, Field, initVM, CLASSPATH
>>
>> doc = Document()
>> fieldA = Field('fieldA', "", Field.Store.YES, Field.Index.UN_TOKENIZED)
>> fieldB = Field('fieldB', "", Field.Store.YES, Field.Index.TOKENIZED)
>> fieldC = Field ('fieldC', "", Field.Store.YES, Field.Index.TOKENIZED)
>>
>> doc.add(fieldA)
>> doc.add(fieldB)
>> doc.add(fieldC)
>>
>> def get_fields():
>>   if doc.getField('FieldA') is not None:
>>       doc.removeField('FieldA')
>>   if doc.getField('FieldB') is not None:
>>       doc.removeField('FieldB')
>>   if doc.getField('FieldC') is not None:
>>       doc.removeField('FieldC')
>>
>>   fieldA.setValue("abc")
>>   doc.add(fieldA)
>>   fieldB.setValue("xyz")
>>   doc.add(fieldB)
>>   fieldC.setValue("123")
>>   doc.add(fieldC)
>>
>>   return doc
>>
>>
>> def add_document():
>>   doc = get_fields()
>>   writer = lucene.IndexWriter(index_directory, analyzer, create_path)
>>   writer.addDocument(doc)
>>   writer.close()
>>
>> This writer.addDocument is throwing an exception saying
>> java.lang.NullPointerException
>>
>> Thanks,
>> Aditi
>>
>> On Tue, Aug 19, 2008 at 3:25 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>
>>> Ian Lea wrote:
>>>
>>> I don't think you need to remove the field and then add it again, but
>>>
>>>> I've no idea if that is relevant to your problem or not.
>>>>
>>>>
>>> That's right: just leave the Field there and change its value (assuming
>>> the
>>> doc you are changing to still uses that field).
>>>
>>> A full stack trace would be more help, and maybe an upgrade to 2.3.2,
>>>
>>>> and maybe a snippet of your code, and what is JCC?
>>>>
>>>>
>>> JCC generates the necessary C/C++ glue code for Python to directly invoke
>>> Java code.  The Chandler project created this for PyLucene because they
>>> were
>>> having trouble with GCJ:
>>>
>>>  http://blog.chandlerproject.org/author/vajda/
>>>
>>> Mike
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_134639_8780902.1219228179015--

From java-user-return-35596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 12:43:09 2008
Return-Path: <java-user-return-35596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29841 invoked from network); 20 Aug 2008 12:43:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 12:43:08 -0000
Received: (qmail 99613 invoked by uid 500); 20 Aug 2008 12:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99590 invoked by uid 500); 20 Aug 2008 12:42:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99579 invoked by uid 99); 20 Aug 2008 12:42:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 05:42:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 12:42:02 +0000
Received: by gxk11 with SMTP id 11so112865gxk.5
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 05:42:31 -0700 (PDT)
Received: by 10.90.96.15 with SMTP id t15mr35868agb.2.1219236150880;
        Wed, 20 Aug 2008 05:42:30 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 36sm1604002aga.10.2008.08.20.05.42.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 20 Aug 2008 05:42:30 -0700 (PDT)
Message-Id: <6E486ED0-B12C-48AE-9119-F5C398909DF4@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6fc71b230808200329i1c4bbc35rf97d4f90663d87e2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: java.lang.NullPointerExcpetion while indexing on linux
Date: Wed, 20 Aug 2008 08:42:28 -0400
References: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com> <8c4e68610808190232m3741e15cwb232ce4ef14123a0@mail.gmail.com> <8711014D-5FEE-4CC8-8874-BCD3A8C4C566@mikemccandless.com> <6fc71b230808190345h71653e1ai8ed9b64aeb31ea94@mail.gmail.com> <689A3F11-301C-4A26-9C2A-70B5B7238113@mikemccandless.com> <6fc71b230808200329i1c4bbc35rf97d4f90663d87e2@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
From: Michael McCandless <mail@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Aditi Goyal wrote:

> Thanks Mike. I found the problem.
> The problem was that I was not converting the value of the fields to  
> utf-8
> and hence while adding it to doc it was getting stored as None.
> So, when I did doc.get('fieldA') , instead of giving the blank or  
> any other
> string, it was giving out None.

I don't really understand why failing to pre-convert to utf-8 would  
result in None being set -- is this a PyLucene (JCC) strangeness?

It seems like if the incoming PyObject is a simple str, the C++ glue  
code generated by JCC should cast it to unicode before passing it to  
Java (and you shouldn't get null added on).

> To overcome this, I first converted the string to utf-8 format and  
> then
> field.setValue() and then doc.add(field), It seems to be working  
> fine.,
>
>
> However, I have one question. When I do a feild.setValue() and then
> doc.add() will it replace the value of the field in the doc or add a  
> new
> field with the similar name and the new value? Since i am reusing  
> the doc
> and i am not reinitialising the doc anywhere and since you told that
> doc.removeField() is an expensive operation.

It replaces the value of that Field instance (not add a new field).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 13:18:31 2008
Return-Path: <java-user-return-35597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59296 invoked from network); 20 Aug 2008 13:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 13:18:31 -0000
Received: (qmail 70528 invoked by uid 500); 20 Aug 2008 13:18:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70490 invoked by uid 500); 20 Aug 2008 13:18:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70424 invoked by uid 99); 20 Aug 2008 13:18:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 06:18:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 13:17:26 +0000
Received: by ti-out-0910.google.com with SMTP id b8so302371tic.11
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 06:17:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=cPaUCpT5E/GSQ7Na6mopR2fqPw8dm1iRdY2d986gAuY=;
        b=vSJIDi5RCYGs2bSbe1NIjosXL85wzotGIEDhuueTA526iHvDa2mH1vpRq1+HtEKBSe
         omEb3ya5AwiVMnsUUZQZghjRfSMUNu8v+Q489ZMOh5YBWTmM3wCDEV0lLtwem0qGcsps
         h1xsPCoZFBCtIIcoN5NV9m8FZTKx0t+zA0n0Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=NKqPX4wE+IXAmxbD1qmu79PolSXoxZ7LUhvkZ1b/r4jHbeDuXGZTYJHKMkl8YHkMz/
         34coRyrXtpX85pz9j/tgl3iQcJ+TmXHmKsdZ+GiyjJ8KZzRebXiGfzkmUggHfroWJxaC
         7p7W+i9GeCHmWGkP7Jk7G92zwh8SY/tNS/be4=
Received: by 10.110.5.14 with SMTP id 14mr54096tie.47.1219238257206;
        Wed, 20 Aug 2008 06:17:37 -0700 (PDT)
Received: by 10.110.60.7 with HTTP; Wed, 20 Aug 2008 06:17:37 -0700 (PDT)
Message-ID: <839ba01c0808200617k23f59d1bk701638ba11149246@mail.gmail.com>
Date: Wed, 20 Aug 2008 21:17:37 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Are there any Lucene optimizations applicable to SSD?
In-Reply-To: <537909.34111.qm@web27103.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <537909.34111.qm@web27103.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi eks,


On Wed, Aug 20, 2008 at 3:04 PM, eks dev <eksdev@yahoo.co.uk> wrote:
> The simplest sorting would be to sort your collection before indexing, because Lucene will preserve order of added documents  I think nutch sorts index afterward somehow, but I do not know how this works

The way we update our index probably already ensured it is more or
less sorted by date. But I should also try this. For our index on the
SSD will not be updated.


>
>
> by omitTf() I mean the new feature in the trunk version, see https://issues.apache.org/jira/browse/LUCENE-1340

This seems great! We got 5-6 fields that could get indexed this way.
I'll definitely check it out.

Thanks for the great tips =)

Regards,
Cedric Ho

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 13:41:31 2008
Return-Path: <java-user-return-35598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76735 invoked from network); 20 Aug 2008 13:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 13:41:31 -0000
Received: (qmail 8915 invoked by uid 500); 20 Aug 2008 13:41:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8892 invoked by uid 500); 20 Aug 2008 13:41:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8881 invoked by uid 99); 20 Aug 2008 13:41:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 06:41:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 13:40:26 +0000
Received: by rv-out-0506.google.com with SMTP id f6so511370rvb.5
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 06:40:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=s8QUU3GwkyKHXMPzQ8HnqB1sqTZuTUj9T5HTxioMxXI=;
        b=LUIZfHAk5YOXXj28+RLJfUFXdCwn6GkXYG75sBSBhlY6cjwoTJnlNB8TNUCJPzJJ5V
         +xaKvwCRz2F0SQsjMvQBgZ5APp+H2nBP6S4hIElIKftf5cTrHoLFIvB5OrMQU9uKOrIW
         GFnjyFt3SjCeDfVM5y4/8i497gUWLg8FXuvvY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jHf748X6WPyiV+fwL4CjD492gBgJgvJWUvUADDudjsD36uv4GJqJgGNPBpxn1Ihauu
         +sWg+fc/bRqPz4MuEoI2iUDcwCxqmP+zF9Ew0/kVyuAxJpzu5QmHzmg+d5auoIA56eFW
         Iw/Gj8J0reFguCSGch7Cc6/yspoR6yQgcVJgE=
Received: by 10.141.105.18 with SMTP id h18mr39208rvm.207.1219239655121;
        Wed, 20 Aug 2008 06:40:55 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Wed, 20 Aug 2008 06:40:55 -0700 (PDT)
Message-ID: <359a92830808200640n39f24e1nac5515083fb4163b@mail.gmail.com>
Date: Wed, 20 Aug 2008 09:40:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How I can find wildcard symbol with WildcardQuery?
In-Reply-To: <48AB60BE.2080301@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15848_28451177.1219239655111"
References: <E1KVSrF-000Aup-4Y@sonic.ukr.net> <48AB60BE.2080301@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15848_28451177.1219239655111
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIGZvciBjb3JyZWN0aW5nIG1lIG9uIHRoaXMsIEkgaGFkIG5vIGlkZWEuLi4uLi4gSnVz
dCBnb2VzIHRvIHNob3cKd2hhdCBoYXBwZW5zIHdoZW4gYW4gYW1hdGV1ciBnZXRzIGluIHRoZSBt
aXggPEc+LgoKQmVzdApFcmljawoKT24gVHVlLCBBdWcgMTksIDIwMDggYXQgODowOSBQTSwgRGFu
aWVsIE5vbGwgPGRhbmllbEBudWl4LmNvbT4gd3JvdGU6Cgo+ICDQodC10YDQs9GW0Lkg0JrQsNGA
0L/QtdC90LrQviB3cm90ZToKPgo+PiBZZXMsIHlvdSBhcmUgY29ycmVjdCAtIE5PX05PUk1TIGhh
cyBub3RoaW5nIHRvIGRvIHdpdGggdG9rZW5pemF0aW9uLAo+PiB0aGF0cyBtZWFuIG5vIGFuYWx5
emVycyB1c2VkLgo+Pgo+Cj4gSnVzdCB0byBhdm9pZCB0aGlzIGFtYmlndW91cywgc2VtaS1jb250
cmFkaWN0aW5nIHdvcmRpbmcgY29uZnVzaW5nIHRoZSBoZWxsCj4gb3V0IG9mIGFueW9uZS4uLgo+
Cj4gTk9fTk9STVMgKmRvZXMqIGhhdmUgc29tZXRoaW5nIHRvIGRvIHdpdGggdG9rZW5pc2F0aW9u
IC0tIGl0IGltcGxpZXMKPiBVTl9UT0tFTklaRUQuCj4KPiBTb3VyY2UgY29kZSBRRlQ6Cj4KPiAg
ICB9IGVsc2UgaWYgKGluZGV4ID09IEluZGV4Lk5PX05PUk1TKSB7Cj4gICAgICB0aGlzLmlzSW5k
ZXhlZCA9IHRydWU7Cj4gICAgICB0aGlzLmlzVG9rZW5pemVkID0gZmFsc2U7Cj4gICAgICB0aGlz
Lm9taXROb3JtcyA9IHRydWU7Cj4gICAgfSAuLi4KPgo+IERhbmllbAo+Cj4gLS0KPiBEYW5pZWwg
Tm9sbAo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+Cg==
------=_Part_15848_28451177.1219239655111--

From java-user-return-35599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 13:58:56 2008
Return-Path: <java-user-return-35599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90918 invoked from network); 20 Aug 2008 13:58:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 13:58:56 -0000
Received: (qmail 37652 invoked by uid 500); 20 Aug 2008 13:58:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37618 invoked by uid 500); 20 Aug 2008 13:58:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37606 invoked by uid 99); 20 Aug 2008 13:58:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 06:58:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.142.189 as permitted sender)
Received: from [209.85.142.189] (HELO ti-out-0910.google.com) (209.85.142.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 13:57:51 +0000
Received: by ti-out-0910.google.com with SMTP id b8so310871tic.11
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 06:58:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=pXbDb2jTi5yx3QfkfRbYzEEnO1FeA8IYFZy4ugc5hLg=;
        b=vqflsFKaOGHWHAR7Lm1Iq1AhU0/wdfUrDJpJfQMevtLsap0G6D6oNNVD2Vs+fkSDAd
         9V2IApgbxgJKHGasc0iG7ooWynSqXifLKLG7afrZs1KoU10zVlERyKcnM5+/EaLx/ptM
         elvXArZfOoH+ERz0s3U4m35ruUHnXOGoedN3s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=k62fGTSNPOWJuxJWA7S1cVjU+V6XuWWmOBeuiZ9AfPIXVcQu/zmHJgoxriVGkvTpij
         PSqTzFplGE/BlxXvCKX0Wr1yc5PGvSAYtY1yW6mBNwwewh3vK4WkkjQ5zjrnEjdoS3ld
         gne1bJQWL/vuOBQbJPtD4ywrTTmpgXhMouw0k=
Received: by 10.110.28.15 with SMTP id b15mr105018tib.26.1219240699668;
        Wed, 20 Aug 2008 06:58:19 -0700 (PDT)
Received: by 10.110.60.7 with HTTP; Wed, 20 Aug 2008 06:58:19 -0700 (PDT)
Message-ID: <839ba01c0808200658u679b5034y56a16b91ada9ce32@mail.gmail.com>
Date: Wed, 20 Aug 2008 21:58:19 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: Are there any Lucene optimizations applicable to SSD?
In-Reply-To: <1219219571.3192.328.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0808190122v10e04f72l7946c6583a929647@mail.gmail.com>
	 <1219138194.3192.273.camel@PC990.sb.statsbiblioteket.dk>
	 <839ba01c0808190925o59cc6586vd2f09d896a5e2d79@mail.gmail.com>
	 <1219219571.3192.328.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Toke,

>> Search response time. We used the search log from our production
>> system and test it with SSD. The results shows that 75% of queries
>> returns within 1 second, 90% returns in 2.5 seconds, the remaining 10%
>> ranges from 2.5 seconds to less than 100 seconds.
>
> Are the sub-second response times fairly equal or fluctuating?

fluctuating I would say. anything between 0.01 to 1 sec. Mostly center
around 0.5 secs.

>
> Do you have the figures for conventional harddisks?

It is much slower than SSD, I forgot the exact figures, but about 50%
returns within 1 sec, and those slow ones can go wild up to more then
100 secs


>
>> Total number of queries is ~40000, so about 10000 queries are kind of
>> slow, 1000 queries are very slow. But those 10% very slow queries are
>> not from the first 1000 queries. It's more or less evenly distributed.
>
> Is it the same queries that are slow each time?

For this I've done an interesting test previously on harddisks. I have
two set of similar index on two machines and I queried them with
exactly the same query together. And they show very similar pattern of
search response time for each query, including those very slow queries
with response time >1-10 secs.

However I can't figure out why some of these queries are slower. Some
are complicated queries, yet others are just simple single term
queries and doesn't seems to score lots of hits. There's no
correlation between the number of terms or number of hits with the
response time. It's probably not due to filter cache miss also because
I've checked that too.


> Our queries normally has fewer terms but gets expanded to 4-5 fields.
> We have no filters and very few ranges.
>
> Have you tried monitoring the memory-usage of the JVM? At one time we
> had a lot of short-term allocation of fairly large structures - this
> triggered a lot of full GC's and killed performance.
>
> This still doesn't account for all the > 1 second response times though.

We keep monitoring it with jconsole, but don't see any abnormal gc
activities there. And yes, gc probably won't affect such slow queries
that much.


> I'll see if I can steal time enough to make a test with sorting, but no
> promises.
>
>> We are targeting to get >90% of queries to return under 1 sec. Of
>> course the more the better =)
>
> That's about the same as our original goal, but we've gotten greedier in
> the meantime.

Thanks for the help =) We'll also keep trying different methods until
our goal is met.

Regards,
Cedric Ho

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 14:33:14 2008
Return-Path: <java-user-return-35600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12876 invoked from network); 20 Aug 2008 14:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 14:33:14 -0000
Received: (qmail 6944 invoked by uid 500); 20 Aug 2008 14:33:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6912 invoked by uid 500); 20 Aug 2008 14:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6901 invoked by uid 99); 20 Aug 2008 14:33:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 07:33:05 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalsey@verisign.com designates 216.168.239.75 as permitted sender)
Received: from [216.168.239.75] (HELO osprey.verisign.com) (216.168.239.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 14:32:07 +0000
Received: from fri2wnexcn01.vcorp.ad.vrsn.com (fri2wnexcn01.vcorp.ad.vrsn.com [10.19.12.28])
	by osprey.verisign.com (8.13.6/8.13.4) with ESMTP id m7KEUgxb006766
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 10:30:43 -0400
Received: from FRI2WNEXMB01.vcorp.ad.vrsn.com ([10.19.12.32]) by fri2wnexcn01.vcorp.ad.vrsn.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 20 Aug 2008 16:32:04 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: Slowing down (rate-limiting/throttling) IndexWriter.optimize
Date: Wed, 20 Aug 2008 16:30:41 +0200
Message-ID: <8036528A6A0C24428D60DE20D787E2B11FB2EA@FRI2WNEXMB01.vcorp.ad.vrsn.com>
In-Reply-To: <839ba01c0808200617k23f59d1bk701638ba11149246@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Slowing down (rate-limiting/throttling) IndexWriter.optimize
Thread-Index: AckCx0AqEE/pOlyxQQWYFcNgUeDGPAAAgwGw
References: <537909.34111.qm@web27103.mail.ukl.yahoo.com> <839ba01c0808200617k23f59d1bk701638ba11149246@mail.gmail.com>
From: "Halsey, Stephen" <shalsey@verisign.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Aug 2008 14:32:04.0364 (UTC) FILETIME=[840D14C0:01C902D1]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We are using lucene to index a large number of documents (millions) and
we currently optimize half the index in the background every 2 days, to
stop it becoming too fragmented.  This takes about an hour and we are
finding during this time searches are slowed down dramatically on that
machine.  This is not due to CPU as it is a dual CPU box, so I'm
thinking it must be the large amounts of IO being used to optimize the
index.

I was wondering if anyone has any ideas for alleviating this problem?

One option I've come up with is to slowly copy the index to a second
second offline box, optimize there and then slowly copy the newly
optimized index back onto the search box.  To slow down the IO so that
bandwidth and IO are not maxed out I thought I could use something like
the linux Traffic Control (tc) program
http://tldp.org/HOWTO/Traffic-Control-HOWTO/elements.html#e-shaping (see
also http://gentoo-wiki.com/HOWTO_Apache_2_bandwidth_limiting ) or tar,
nfs and http://www.ivarch.com/programs/quickref/pv.shtml and its
rate-limit option to limit how quickly the index directory is copied to
and from the remote machine.  This option doesn't seem ideal as it would
involve other programs, servers and scripts.

The other option is to do it all within the existing Java program, by
rate-limiting/throttling the IO of the lucene Directory being used to do
the optimize.  I've done this in Lucene by extending the FSDirectory and
the FSIndexOutput classes and putting a small sleep in the
FSIndexOutput.flushBuffer, and it seems to work OK.  I'm not that keen
on copying and modifying lucene code though, because I'll have to check
and possibly modify it every time I upgrade lucene, so if there is a
reasonable alternative I'd be interested in hearing anyone's ideas?  If
people think IO throttling FSDirectory may be a good idea and useful for
them, I could develop it more and possibly contact lucene-dev to look
into getting it added to the lucene trunk?

Cheers



steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 14:33:30 2008
Return-Path: <java-user-return-35601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13039 invoked from network); 20 Aug 2008 14:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 14:33:29 -0000
Received: (qmail 8685 invoked by uid 500); 20 Aug 2008 14:33:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8663 invoked by uid 500); 20 Aug 2008 14:33:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8652 invoked by uid 99); 20 Aug 2008 14:33:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 07:33:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 14:32:25 +0000
Received: by fg-out-1718.google.com with SMTP id l27so345448fgb.27
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 07:32:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5El3byKP31xzTFIKyOOd0Od/NF700aPSh2gumjhR+0Y=;
        b=Nv4AFywdygOt2mUXP1QtChHujR+/7CiRfjd2sT55+rGggoX0sPNpCtsbJsXk2OYknH
         amG4+gY3LPhVo6pba0lqz605eEBvuOlZLA1X8q01HaQxDSIQkbBuHd88yMCsmV5EQaKM
         eDqHT6KVLVeq/3g7pav6T8lxv2ODGNOZevGDo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Ukt1u0cSDLlGn+gc1988nmwSO5JaekzYrrFtFbncjRz1Wo19N00G6JqSmXOc4P1v1h
         mA4u0gjDfAOhIIeIKzPrsKSqdurM7agnUZF99AJEgSCwmj9+JSy4y/8JyTDIegO93JEX
         zK7y4WFflPgtHIaeTs1y+GbABCp5VhgApKows=
Received: by 10.86.82.6 with SMTP id f6mr109183fgb.53.1219242773526;
        Wed, 20 Aug 2008 07:32:53 -0700 (PDT)
Received: by 10.86.36.4 with HTTP; Wed, 20 Aug 2008 07:32:53 -0700 (PDT)
Message-ID: <e05f0fd10808200732v1300ef3ald589150987118584@mail.gmail.com>
Date: Wed, 20 Aug 2008 17:32:53 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fields with the same name?? - Was Re: Payloads and tokenizers
In-Reply-To: <48AA029B.4060707@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_111465_19611985.1219242773514"
References: <48A3A2F8.50802@teamware.com>
	 <e05f0fd10808140317s48cf8943s740b7ce6debdc86c@mail.gmail.com>
	 <48A4DD43.7080201@teamware.com>
	 <e05f0fd10808170941i67489536wf4548877f7368a6@mail.gmail.com>
	 <48A8FD6F.7080105@teamware.com>
	 <e05f0fd10808180002h3df287b2w96e1ed87697d0300@mail.gmail.com>
	 <48AA029B.4060707@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_111465_19611985.1219242773514
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Tue, Aug 19, 2008 at 2:15 AM, Antony Bowesman <adb@teamware.com> wrote:

>
> Thanks for you time and I appreciate your valuable insight Doron.
> Antony
>

I'm glad I could help!
Doron

------=_Part_111465_19611985.1219242773514--

From java-user-return-35602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 15:12:40 2008
Return-Path: <java-user-return-35602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65276 invoked from network); 20 Aug 2008 15:12:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 15:12:39 -0000
Received: (qmail 9946 invoked by uid 500); 20 Aug 2008 15:12:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9916 invoked by uid 500); 20 Aug 2008 15:12:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9905 invoked by uid 99); 20 Aug 2008 15:12:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 08:12:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 15:11:34 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K5W00D7SNK06X@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 20 Aug 2008 17:12:00 +0200 (MEST)
Date: Wed, 20 Aug 2008 17:12:00 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Are there any Lucene optimizations applicable to SSD?
In-reply-to: <839ba01c0808200658u679b5034y56a16b91ada9ce32@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1219245120.3192.366.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.22.3.1 (2.22.3.1-1.fc9)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <839ba01c0808190122v10e04f72l7946c6583a929647@mail.gmail.com>
 <1219138194.3192.273.camel@PC990.sb.statsbiblioteket.dk>
 <839ba01c0808190925o59cc6586vd2f09d896a5e2d79@mail.gmail.com>
 <1219219571.3192.328.camel@PC990.sb.statsbiblioteket.dk>
 <839ba01c0808200658u679b5034y56a16b91ada9ce32@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2008-08-20 at 21:58 +0800, Cedric Ho wrote:
Toke:
> > Is it the same queries that are slow each time?

[Cedric: Yes]

> However I can't figure out why some of these queries are slower. Some
> are complicated queries, yet others are just simple single term
> queries and doesn't seems to score lots of hits. There's no
> correlation between the number of terms or number of hits with the
> response time. It's probably not due to filter cache miss also because
> I've checked that too.

Seems like we're left with range expansion and sorting... If you can fix
all sorting to score, that would be an easy way of testing that part.

Can you check if the slow queries are the ones with wide ranges?
Or maybe run some of the slow queries without the filters at all?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 15:22:09 2008
Return-Path: <java-user-return-35603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69740 invoked from network); 20 Aug 2008 15:22:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 15:22:09 -0000
Received: (qmail 26876 invoked by uid 500); 20 Aug 2008 15:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26836 invoked by uid 500); 20 Aug 2008 15:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26825 invoked by uid 99); 20 Aug 2008 15:22:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 08:22:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 15:21:03 +0000
Received: by qw-out-2122.google.com with SMTP id 5so58391qwi.53
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 08:21:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :x-mimeole:in-reply-to:thread-index:message-id;
        bh=Og+UNcXyRJEgFGNXqcfatEzewkJ4Qhh8VvgyW2qzQKY=;
        b=cXJFflTLIK88m177GYT0ghuOz+L7xj8knc+3zUz/hj6umo0O8VqQ7BbZy2UZTlXKiR
         OaNxFIP1fcOTgC3ZRfQLak+1Q9Bd4tirf4659jka8h3NxdW0wCj0HhafqNFhKcZQk8dw
         wO2vUSfo9ssUdjU/l7x2dDX4esSA9P6t+Pnqg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-mailer:x-mimeole:in-reply-to
         :thread-index:message-id;
        b=vEqkXsXephEdheT/8hXdEzVb/SU2Zj+oT6+Fu9USFyFHlMsuGU6U5fzLvvNKNBzuTI
         K5BaZfBp63Ynf2OnsxNQzCFbF5yOZ2A/hH+B961ngH6Aho/Qcd0SKzIVcU+gKjEyul8J
         Y5QhIlUCgPcUt5d3n02ZpdSGZaoZkDpe7BUjc=
Received: by 10.214.149.19 with SMTP id w19mr327082qad.96.1219245692429;
        Wed, 20 Aug 2008 08:21:32 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id k47sm5611272rnd.2.2008.08.20.08.21.29
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 20 Aug 2008 08:21:30 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Case Sensitivity
Date: Wed, 20 Aug 2008 16:21:27 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <9294E20AED46934EA459020706463F94C5A17A@SUEXCL-02.ad.syr.edu>
Thread-Index: AckC2GO7wnNo6V/4SjWIzdxv/+luZg==
Message-ID: <48ac367a.2f89260a.0a62.5330@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steve,

Thanks a lot for that.

I have a question on TokenStreams and email addresses, but I will post them
on a separate thread.

Many thanks,
Dino
 

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu] 
Sent: 19 August 2008 17:43
To: java-user@lucene.apache.org
Subject: RE: Case Sensitivity

Hi Dino,

I think you'd benefit from reading some FAQ answers, like:

"Why is it important to use the same analyzer type during indexing and
search?"
<http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c4
4472d10961ba63c>

Also, have a look at the AnalysisParalysis wiki page for some hints:
<http://wiki.apache.org/lucene-java/AnalysisParalysis>

On 08/19/2008 at 8:57 AM, Dino Korah wrote:
> From the discussion here what I could understand was, if I am using 
> StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying, 
> I shouldn't have any problems with cases.

If by "shouldn't have problems with cases" you mean "can match
case-insensitively", then this is true.

> But if I have any UN_TOKENIZED fields there will be problems if I do 
> not case-normalize them myself before adding them as a field to the 
> document.

Again, assuming that by "case-normalize" you mean "downcase", and that you
want case-insensitive matching, and that you use the StandardAnalyzer (or
some other downcasing analyzer) at query-time, then this is true.

> In my case I have a mixed scenario. I am indexing emails and the email 
> addresses are indexed UN_TOKENIZED. I do have a second set of custom 
> tokenized field, which keep the tokens in individual fields with same 
> name.
[...]
> Does it mean that where ever I use UN_TOKENIZED, they do not get 
> through the StandardAnalyzer before getting Indexed, but they do when 
> they are searched on?

This is true.

> If that is the case, Do I need to normalise them before adding to 
> document?

If you want case-insensitive matching, then yes, you do need to normalize
them before adding them to the document.

> I also would like to know if it is better to employ an EmailAnalyzer 
> that makes a TokenStream out of the given email address, rather than 
> using a simplistic function that gives me a list of string pieces and 
> adding them one by one. With searches, would both the approaches give 
> same result?

Yes, both approaches give the same result.  When you add string pieces
one-by-one, you are adding multiple same-named fields. By contrast, the
EmailAnalyzer approach would add a single field, and would allow you to
control positions (via Token.setPositionIncrement():
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/Token.ht
ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  Also, if
you make up an EmailAnalyzer, you can use it to search against your
tokenized email field, along with other analyzer(s) on other field(s), using
the PerFieldAnalyzerWrapper
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/PerField
AnalyzerWrapper.html>.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 16:59:05 2008
Return-Path: <java-user-return-35604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46588 invoked from network); 20 Aug 2008 16:59:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 16:59:04 -0000
Received: (qmail 22519 invoked by uid 500); 20 Aug 2008 16:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22488 invoked by uid 500); 20 Aug 2008 16:58:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22465 invoked by uid 99); 20 Aug 2008 16:58:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 09:58:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 16:57:55 +0000
Received: by qw-out-2122.google.com with SMTP id 5so64809qwi.53
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 09:58:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:x-mimeole:thread-index
         :message-id;
        bh=CA75wn9XR8akfuLpgYg/ym9mY5owyatSBxa48hcpl6o=;
        b=sOsAW9Q6jd5KusywWvMPWiHKhntiPk9tfP6pMuQmbQm6gQU+QR58PG6tNjPCDyVvgt
         c7J/RSVmx2TLacbd4I7PVzz9amqD1Qg/BHdbuyU47yp7ckLIZGBfsJT2a1Zgk88rNPkY
         5WkXC/N1YcwEZc6AYYBdu2GnQMYFWTZ7EoaYY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer:x-mimeole
         :thread-index:message-id;
        b=fXftWix8w2vrmORKxerJVpN0uewRy0YaJ4+lDmP8rOUuvY3QqlzBITdJBES1kVs6V8
         ZX0RSdEqjJG+vrqiWXe97YuhvmAeKrL4GbIp/ucgIjuBjDYQCeST9XuiOKtRvWMyMalu
         dRvrpn8vFtgWVb0uz67xFbdAfC7QsdOwRk0Pc=
Received: by 10.214.183.8 with SMTP id g8mr503724qaf.72.1219251494341;
        Wed, 20 Aug 2008 09:58:14 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id m71sm5858430rnd.3.2008.08.20.09.58.11
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 20 Aug 2008 09:58:13 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: EmailAddressAnalyzer & TokenStreams
Date: Wed, 20 Aug 2008 17:58:11 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0027_01C902EE.5144B8A0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AckC5e2OIi1EhmkiQcabg7moPLON5g==
Message-ID: <48ac4d25.478b260a.1865.5e37@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0027_01C902EE.5144B8A0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi guys,
 
If I am to tokenize an email address like "John Smith" <
<mailto:J.Smith@london.gb.world.net> J.Smith@london.gb.world.net>  into
 
    [ <mailto:J.Smith@london.gb.world.net> J.Smith@london.gb.world.net]
    [John]
    [Smith]
    [J.Smith]
    [london.gb.world.net]
    [gb.world.net]
    [world.net]
    [world]
    [net]
 
Is it possible to have a different Position increment for each of these
tokens? If it is, could you please help me with the same sample, with
numbers against each token.
 
Also could you please point me to a skeleton code for a custom Tokenizer.
 
Many Thanks
Dino
 

------=_NextPart_000_0027_01C902EE.5144B8A0--


From java-user-return-35605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 22:35:16 2008
Return-Path: <java-user-return-35605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52968 invoked from network); 20 Aug 2008 22:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 22:35:15 -0000
Received: (qmail 5992 invoked by uid 500); 20 Aug 2008 22:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5962 invoked by uid 500); 20 Aug 2008 22:35:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5950 invoked by uid 99); 20 Aug 2008 22:35:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 15:35:06 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of collinmc@us.ibm.com designates 32.97.182.142 as permitted sender)
Received: from [32.97.182.142] (HELO e2.ny.us.ibm.com) (32.97.182.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 22:34:07 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e2.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m7KMVRUo009800
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 18:31:27 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m7KMVRwa219446
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 18:31:27 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m7KMVQDj004614
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 18:31:27 -0400
Received: from d01ml063.pok.ibm.com (d01ml063.pok.ibm.com [9.56.228.130])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m7KMVQUR004605
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 18:31:26 -0400
Subject: Unclear Javadoc lucene.search.Filter
X-KeepSent: 5CC07952:F57312A5-852574AB:007B6748;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.0.1 HF105 April 10, 2008
Message-ID: <OF5CC07952.F57312A5-ON852574AB.007B6748-852574AB.007B9B38@us.ibm.com>
From: Christopher M Collins <collinmc@us.ibm.com>
Date: Wed, 20 Aug 2008 18:31:27 -0400
X-MIMETrack: Serialize by Router on D01ML063/01/M/IBM(Release 8.0.1|February 07, 2008) at
 08/20/2008 18:31:26
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=0ABBFE38DFE8E1D88f9e8a93df938690918c0ABBFE38DFE8E1D8"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=0ABBFE38DFE8E1D88f9e8a93df938690918c0ABBFE38DFE8E1D8
Content-type: text/plain; charset=US-ASCII


I'm just starting to use Query Filters, and the javadoc for "Filter" is
unclear.  Specifically, getDocIdSet says:

Returns:
      a DocIdSet that provides the documents which should be permitted or
      prohibited in search results.

>From what I understand of DocIdSet, it's just a list of docIDs.  So, are
the those that should be permitted or prohibited?  The deprecated method
bits() has clearer javadoc.

Can someone clarify?  I can also look at the source of a filter
implementation, but I thought I'd mention it in case someone with write
access had a chance to clarify it.

Thanks,

Chris
______________________________________________________________
Christopher Collins \ http://www.cs.utoronto.ca/~ccollins
Department of Computer Science \ University of Toronto
Collaborative User Experience Group \ IBM Research
--0__=0ABBFE38DFE8E1D88f9e8a93df938690918c0ABBFE38DFE8E1D8--


From java-user-return-35606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 20 23:22:36 2008
Return-Path: <java-user-return-35606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90269 invoked from network); 20 Aug 2008 23:22:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2008 23:22:36 -0000
Received: (qmail 53689 invoked by uid 500); 20 Aug 2008 23:22:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53127 invoked by uid 500); 20 Aug 2008 23:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53116 invoked by uid 99); 20 Aug 2008 23:22:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 16:22:27 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 23:21:29 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: EmailAddressAnalyzer & TokenStreams
Date: Wed, 20 Aug 2008 19:21:35 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A1CF@SUEXCL-02.ad.syr.edu>
In-Reply-To: <48ac4d25.478b260a.1865.5e37@mx.google.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: EmailAddressAnalyzer & TokenStreams
Thread-Index: AckC5e2OIi1EhmkiQcabg7moPLON5gAMd1Eg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Dino,

The Lucene KeywordTokenizer is about as simple as tokenizers get - it =
just outputs its entire input as a single token:

<http://svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucen=
e/analysis/KeywordTokenizer.java?revision=3D687357&view=3Dmarkup>

Check out the source code for other Tokenizer descendants in the Lucene =
source for more hints.  Warning: a few of them are generated by scanner =
generator tools (JavaCC and JFlex), so the code is a bit impenetrable in =
places.

To set the position for a Token, call its setPositionIncrement() method. =
 From the javadocs:

    Set the position increment.  This determines the position of
    this token relative to the previous Token in a TokenStream,
    used in phrase searching.

(Read the rest of the javadoc for that method.  Go on, you know you want =
to.)

Good luck,
Steve

On 08/20/2008 at 12:58 PM, Dino Korah wrote:
> Hi guys,
>=20
> If I am to tokenize an email address like "John Smith" <
> <mailto:J.Smith@london.gb.world.net> J.Smith@london.gb.world.net>  =
into
>=20
>     [ <mailto:J.Smith@london.gb.world.net> =
J.Smith@london.gb.world.net]
>     [John] [Smith] [J.Smith] [london.gb.world.net] [gb.world.net]
>     [world.net] [world] [net]
>=20
> Is it possible to have a different Position increment for each of =
these
> tokens? If it is, could you please help me with the same sample, with
> numbers against each token.
>=20
> Also could you please point me to a skeleton code for a custom =
Tokenizer.
>=20
> Many Thanks
> Dino

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 00:41:04 2008
Return-Path: <java-user-return-35607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57544 invoked from network); 21 Aug 2008 00:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 00:41:04 -0000
Received: (qmail 50020 invoked by uid 500); 21 Aug 2008 00:40:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49994 invoked by uid 500); 21 Aug 2008 00:40:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49983 invoked by uid 99); 21 Aug 2008 00:40:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 17:40:56 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of collinmc@us.ibm.com designates 32.97.182.150 as permitted sender)
Received: from [32.97.182.150] (HELO over.ny.us.ibm.com) (32.97.182.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 00:39:56 +0000
Received: from e3.ny.us.ibm.com ([192.168.1.103])
	by pokfb.esmtp.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m7L045oW012615
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 20:04:05 -0400
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e3.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m7L00GYo022141
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 20:00:16 -0400
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m7L006lL238088
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 20:00:06 -0400
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m7L0066w009958
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 20:00:06 -0400
Received: from d01ml063.pok.ibm.com (d01ml063.pok.ibm.com [9.56.228.130])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m7L005Nw009955
	for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 20:00:05 -0400
Subject: Unclear Javadoc lucene.search.Filter
X-KeepSent: 6D251649:6465E2C8-852574AB:0083C8A2;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.0.1 HF105 April 10, 2008
Message-ID: <OF6D251649.6465E2C8-ON852574AB.0083C8A2-852574AB.0083B8D8@us.ibm.com>
From: Christopher M Collins <collinmc@us.ibm.com>
Date: Wed, 20 Aug 2008 20:00:06 -0400
X-MIMETrack: Serialize by Router on D01ML063/01/M/IBM(Release 8.0.1|February 07, 2008) at
 08/20/2008 20:00:05
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=0ABBFE38DF104E328f9e8a93df938690918c0ABBFE38DF104E32"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=0ABBFE38DF104E328f9e8a93df938690918c0ABBFE38DF104E32
Content-type: text/plain; charset=US-ASCII


Please accept my sincere apologies: I was reading the Javadoc of an old
version.

Christopher

______________________________________________________________
Christopher Collins \ http://www.cs.utoronto.ca/~ccollins
Department of Computer Science \ University of Toronto
Collaborative User Experience Group \ IBM Research
--0__=0ABBFE38DF104E328f9e8a93df938690918c0ABBFE38DF104E32--


From java-user-return-35608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 03:37:45 2008
Return-Path: <java-user-return-35608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97849 invoked from network); 21 Aug 2008 03:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 03:37:45 -0000
Received: (qmail 60234 invoked by uid 500); 21 Aug 2008 03:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60196 invoked by uid 500); 21 Aug 2008 03:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60185 invoked by uid 99); 21 Aug 2008 03:37:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2008 20:37:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 03:36:41 +0000
Received: by ti-out-0910.google.com with SMTP id b8so457368tic.11
        for <java-user@lucene.apache.org>; Wed, 20 Aug 2008 20:36:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=/2vuDbvgQf8H4mcdCAe+INTy0wC0Qcaabz/n5C48brc=;
        b=R9V8EePWGilQEmBciNfKKDXTXZSrmEWpqO9mRnFcBIRru1krr0bfB0AitVVt5jlckP
         v3LIexj9kP9MOsHWYDq3OJXgRa7E+5BMBjXCYo5jtLJlVFQvYRHdR/5KVxtn4SgvpJEO
         6Q2cqGIQocYgD7fxtidnhDYvSoP2p3K9p4LKg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=N2bRb6P4d/h8gorxVW22pCnwyB2HP6vDV4g/1naYEwC5d0KA6xybkQbWve9GHm/REH
         bOSVFB31vD7sLrfUB8KpWLnneYpty2HFuhvifUwfvK5mm/N9ImTO0hbEffHwdy0vQNFe
         PRiroPSwnsgIK3ycLZ/fUzUeHDsYBKXkx18XE=
Received: by 10.110.3.15 with SMTP id 15mr921947tic.24.1219289812581;
        Wed, 20 Aug 2008 20:36:52 -0700 (PDT)
Received: by 10.110.60.7 with HTTP; Wed, 20 Aug 2008 20:36:52 -0700 (PDT)
Message-ID: <839ba01c0808202036g162b6546s29afe96bf92c96@mail.gmail.com>
Date: Thu, 21 Aug 2008 11:36:52 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: Are there any Lucene optimizations applicable to SSD?
In-Reply-To: <1219245120.3192.366.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0808190122v10e04f72l7946c6583a929647@mail.gmail.com>
	 <1219138194.3192.273.camel@PC990.sb.statsbiblioteket.dk>
	 <839ba01c0808190925o59cc6586vd2f09d896a5e2d79@mail.gmail.com>
	 <1219219571.3192.328.camel@PC990.sb.statsbiblioteket.dk>
	 <839ba01c0808200658u679b5034y56a16b91ada9ce32@mail.gmail.com>
	 <1219245120.3192.366.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

> [Cedric: Yes]
>
>> However I can't figure out why some of these queries are slower. Some
>> are complicated queries, yet others are just simple single term
>> queries and doesn't seems to score lots of hits. There's no
>> correlation between the number of terms or number of hits with the
>> response time. It's probably not due to filter cache miss also because
>> I've checked that too.
>
> Seems like we're left with range expansion and sorting... If you can fix
> all sorting to score, that would be an easy way of testing that part.
>
> Can you check if the slow queries are the ones with wide ranges?
> Or maybe run some of the slow queries without the filters at all?

ah, actually I've also seen that some slow queries are very short
range, so not a problem there. Sorting also not likely for I've tried
Sort.INDEXORDER before, which makes searching a little bit quicker
overall, but won't account for those very slow queries.

The problem is that if I just pick out all the slow queries and run
those, they are not slow again, (probably due to caching somehow)

Regards,
Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 07:21:41 2008
Return-Path: <java-user-return-35609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14231 invoked from network); 21 Aug 2008 07:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 07:21:41 -0000
Received: (qmail 11344 invoked by uid 500); 21 Aug 2008 07:21:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11308 invoked by uid 500); 21 Aug 2008 07:21:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11296 invoked by uid 99); 21 Aug 2008 07:21:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 00:21:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 07:20:35 +0000
Received: by yx-out-2324.google.com with SMTP id 3so337462yxj.5
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 00:21:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=EjJc6IgiZN9Xzs2W7yiEoci7P78v6rGdbw2B3hZA9LQ=;
        b=nOnDcMcq/gtT8l5ATOGCJvredZhQzZXembcND/546hAJ/1W4kzXkykblXLzQ19utZe
         +Cq4Hql5xzfSIX5b1Gxt4Ff/7i96Xp+o3P1LmfD+1vLJ4Sl+nJEJFiwPjx8a0wkPJFTS
         2xY8h6ICcqCDy8NfqawZbx41Btls6zvS5Pvq0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=btZ9mwbYs7Y6a6OozjYk5XQypKsFu/36bkngF0ID0+zqoJ56vbyV568rZxLG2W8Bzn
         wvHRajsCsU1OFQMVKHPnthfVIGxRgPHh0Zxorho3u0JWh1MA6/y/xT/ku/N7BUFTojov
         gphYDd8s7d3NjvVItS689x4UDgtmz7FLBs0Ts=
Received: by 10.151.109.11 with SMTP id l11mr1634948ybm.204.1219303263829;
        Thu, 21 Aug 2008 00:21:03 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Thu, 21 Aug 2008 00:21:03 -0700 (PDT)
Message-ID: <efd1bd310808210021p421b7895he69035d1997b8249@mail.gmail.com>
Date: Thu, 21 Aug 2008 02:21:03 -0500
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <48ac367a.2f89260a.0a62.5330@mx.google.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27134_14599404.1219303263814"
References: <9294E20AED46934EA459020706463F94C5A17A@SUEXCL-02.ad.syr.edu>
	 <48ac367a.2f89260a.0a62.5330@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27134_14599404.1219303263814
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Just to add to that, as I said before, in my case, I found more useful not
to use UN_Tokenized. Instead, I used Tokenized with a custom analyzer that
uses the KeywordTokenizer (entire input as only one token) with the
LowerCaseFilter: This way I get the best of both worlds.

public class KeywordLowerAnalyzer extends Analyzer {

    public KeywordLowerAnalyzer() {
    }


    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new KeywordTokenizer(reader);
        result = new LowerCaseFilter(result);
        return result;
    }

}

On Wed, Aug 20, 2008 at 10:21 AM, Dino Korah <dckorah@gmail.com> wrote:
> Hi Steve,
>
> Thanks a lot for that.
>
> I have a question on TokenStreams and email addresses, but I will post
them
> on a separate thread.
>
> Many thanks,
> Dino
>
>
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: 19 August 2008 17:43
> To: java-user@lucene.apache.org
> Subject: RE: Case Sensitivity
>
> Hi Dino,
>
> I think you'd benefit from reading some FAQ answers, like:
>
> "Why is it important to use the same analyzer type during indexing and
> search?"
> <
http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c4
> 4472d10961ba63c>
>
> Also, have a look at the AnalysisParalysis wiki page for some hints:
> <http://wiki.apache.org/lucene-java/AnalysisParalysis>
>
> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
>> From the discussion here what I could understand was, if I am using
>> StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying,
>> I shouldn't have any problems with cases.
>
> If by "shouldn't have problems with cases" you mean "can match
> case-insensitively", then this is true.
>
>> But if I have any UN_TOKENIZED fields there will be problems if I do
>> not case-normalize them myself before adding them as a field to the
>> document.
>
> Again, assuming that by "case-normalize" you mean "downcase", and that you
> want case-insensitive matching, and that you use the StandardAnalyzer (or
> some other downcasing analyzer) at query-time, then this is true.
>
>> In my case I have a mixed scenario. I am indexing emails and the email
>> addresses are indexed UN_TOKENIZED. I do have a second set of custom
>> tokenized field, which keep the tokens in individual fields with same
>> name.
> [...]
>> Does it mean that where ever I use UN_TOKENIZED, they do not get
>> through the StandardAnalyzer before getting Indexed, but they do when
>> they are searched on?
>
> This is true.
>
>> If that is the case, Do I need to normalise them before adding to
>> document?
>
> If you want case-insensitive matching, then yes, you do need to normalize
> them before adding them to the document.
>
>> I also would like to know if it is better to employ an EmailAnalyzer
>> that makes a TokenStream out of the given email address, rather than
>> using a simplistic function that gives me a list of string pieces and
>> adding them one by one. With searches, would both the approaches give
>> same result?
>
> Yes, both approaches give the same result.  When you add string pieces
> one-by-one, you are adding multiple same-named fields. By contrast, the
> EmailAnalyzer approach would add a single field, and would allow you to
> control positions (via Token.setPositionIncrement():
> <
http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/Token.ht
> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  Also, if
> you make up an EmailAnalyzer, you can use it to search against your
> tokenized email field, along with other analyzer(s) on other field(s),
using
> the PerFieldAnalyzerWrapper
> <
http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/PerField
> AnalyzerWrapper.html>.
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27134_14599404.1219303263814--

From java-user-return-35610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 12:28:04 2008
Return-Path: <java-user-return-35610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96627 invoked from network); 21 Aug 2008 12:28:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 12:28:04 -0000
Received: (qmail 39108 invoked by uid 500); 21 Aug 2008 12:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39062 invoked by uid 500); 21 Aug 2008 12:27:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39051 invoked by uid 99); 21 Aug 2008 12:27:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 05:27:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 12:26:57 +0000
Received: by ti-out-0910.google.com with SMTP id b8so621785tic.11
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 05:27:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=7Y8AC8IrdwT08QKRu5rZED7q/KmeCQ4QQCOdb72bVnI=;
        b=C1FspnQGKLs/Jrr7f2qTqJ3ydDimvKU143tohTFv43bjNpbGQtG7Z+Y7veJjbga7ek
         yEU4/dpdWw4eo2AllN6br8/+JFOldpRs9kZGf929NKcezNCgxC18pff/IqNv4M4VrZk9
         GZJBfhLjesYG40ebfu+q3o5OXsxKW2OGVr5nE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=W/T+BzCCB70LSDRM/dTow8VvHfim4bqPj21PZnGl1rxO6qlgo0V2z9zInM8l9Vl+5n
         RCP13ZXthYusEavI09ZXDXiQTTW6gL6jywtFlK1M7UbMYlZwihIfck++niTo+ZU13jT4
         n3hliAE2INIYpnrLicTbSCoHcBS9fcjCj1T/Y=
Received: by 10.110.109.12 with SMTP id h12mr1382397tic.34.1219321627968;
        Thu, 21 Aug 2008 05:27:07 -0700 (PDT)
Received: by 10.110.109.13 with HTTP; Thu, 21 Aug 2008 05:27:07 -0700 (PDT)
Message-ID: <6fc71b230808210527n6e22c4dcr6370b303a21d1e17@mail.gmail.com>
Date: Thu, 21 Aug 2008 17:57:07 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.lang.NullPointerExcpetion while indexing on linux
In-Reply-To: <6E486ED0-B12C-48AE-9119-F5C398909DF4@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_182194_31091721.1219321627963"
References: <6fc71b230808190209q1587eb68gbcb5f3b55af7ff17@mail.gmail.com>
	 <8c4e68610808190232m3741e15cwb232ce4ef14123a0@mail.gmail.com>
	 <8711014D-5FEE-4CC8-8874-BCD3A8C4C566@mikemccandless.com>
	 <6fc71b230808190345h71653e1ai8ed9b64aeb31ea94@mail.gmail.com>
	 <689A3F11-301C-4A26-9C2A-70B5B7238113@mikemccandless.com>
	 <6fc71b230808200329i1c4bbc35rf97d4f90663d87e2@mail.gmail.com>
	 <6E486ED0-B12C-48AE-9119-F5C398909DF4@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_182194_31091721.1219321627963
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Wed, Aug 20, 2008 at 6:12 PM, Michael McCandless <mail@mikemccandless.com
> wrote:

>
> Aditi Goyal wrote:
>
>  Thanks Mike. I found the problem.
>> The problem was that I was not converting the value of the fields to utf-8
>> and hence while adding it to doc it was getting stored as None.
>> So, when I did doc.get('fieldA') , instead of giving the blank or any
>> other
>> string, it was giving out None.
>>
>
> I don't really understand why failing to pre-convert to utf-8 would result
> in None being set -- is this a PyLucene (JCC) strangeness?
>
> It seems like if the incoming PyObject is a simple str, the C++ glue code
> generated by JCC should cast it to unicode before passing it to Java (and
> you shouldn't get null added on).
>
>  To overcome this, I first converted the string to utf-8 format and then
>> field.setValue() and then doc.add(field), It seems to be working fine.,
>>
>>
>> However, I have one question. When I do a feild.setValue() and then
>> doc.add() will it replace the value of the field in the doc or add a new
>> field with the similar name and the new value? Since i am reusing the doc
>> and i am not reinitialising the doc anywhere and since you told that
>> doc.removeField() is an expensive operation.
>>
>
> It replaces the value of that Field instance (not add a new field).

I checked this. In my index I was getting the fields with multiple duplicate
values. So Just doing field.setValue() would suffice. Doing doc.add() will
create duplicates of the same field in the document and it keeps on growing.


> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_182194_31091721.1219321627963--

From java-user-return-35611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 17:17:47 2008
Return-Path: <java-user-return-35611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4679 invoked from network); 21 Aug 2008 17:17:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 17:17:47 -0000
Received: (qmail 44991 invoked by uid 500); 21 Aug 2008 17:17:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44958 invoked by uid 500); 21 Aug 2008 17:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44947 invoked by uid 99); 21 Aug 2008 17:17:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 10:17:38 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 17:16:41 +0000
Received: by yx-out-2324.google.com with SMTP id 3so36029yxj.5
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 10:16:52 -0700 (PDT)
Received: by 10.103.225.2 with SMTP id c2mr6083mur.93.1219339010674;
        Thu, 21 Aug 2008 10:16:50 -0700 (PDT)
Received: by 10.103.214.12 with HTTP; Thu, 21 Aug 2008 10:16:50 -0700 (PDT)
Message-ID: <bc6cff7b0808211016p65d54919pd29e450f2d4b1ee@mail.gmail.com>
Date: Thu, 21 Aug 2008 12:16:50 -0500
From: "Juan Pablo Morales" <jpmorales@ingenian.com>
To: java-user@lucene.apache.org
Subject: Storing special characters in Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54698_25332125.1219339010673"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54698_25332125.1219339010673
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBoYXZlIGFuIGluZGV4IGluIFNwYW5pc2ggYW5kIEkgdXNlIFNub3diYWxsIHRvIHN0ZW0gYW5k
IGFuYWx5emUgYW5kIGl0CndvcmtzIHBlcmZlY3RseS4gSG93ZXZlciwgSSBhbSBydW5uaW5nIGlu
dG8gdHJvdWJsZSBzdG9yaW5nIChub3QgaW5kZXhpbmcsCm9ubHkgc3RvcmluZykgd29yZHMgdGhh
dCBoYXZlIHNwZWNpYWwgY2hhcmFjdGVycy4KClRoYXQgaXMsIEkgc3RvcmUgdGhlIHNwZWNpYWwg
Y2hhcmFjdGVyIGJ1dCB0aGUgaXQgY29tZXMgZ2FyYmxlZCB3aGVuIEkgcmVhZAppdCBiYWNrLgpU
byBwcm92aWRlIGFuIGV4YW1wbGU6CgpTdHJpbmcgY29udGVudCA9ICJuacOxb3MiOwpkb2N1bWVu
dC5hZGQobmV3IEZpZWxkKCJuYW1lIixjb250ZW50LFN0b3JlLllFUywgSW5kZXguVG9rZW5pemVk
KSk7CndyaXRlci5hZGREb2N1bWVudChkb2MsIG5ldyBTbm93YmFsbEFuYWx5emVyKCJTcGFuaXNo
IikpOwouCldoZW4gSSByZWFkIHRoZSBmaWVsZCBiYWNrClN0cmluZyBub21icmUgPSBkb2MuZ2V0
KCJuYW1lIik7CgpUaGVuIG5hbWUgd2lsbCBjb250YWluICJuae+/vW9zIgoKTG9va2luZyBhdCB0
aGUgaW5kZXggd2l0aCBMdWtlIGl0IHNob3dzIG1lICJuaSYjNjU1MzM7b3MiIGJ1dCB3aGVuIEkg
d2FudCB0bwpzZWUgdGhlIGZ1bGwgdGV4dCAoYnkgcmlnaHQgY2xpY2tpbmcpIGl0IHNob3dzIG1l
IG5p77+9b3MuCgpJIGtub3cgTHVjZW5lIGlzIHN1cHBvc2VkIHRvIHN0b3JlIGZpZWxkcyBpbiBV
VEY4LCBidXQgdGhlbiwgaG93IGNhbiBJIG1ha2UKc3VyZSBJIHNvdHJlIHNvbWV0aGluZyBhbmQg
Z2V0IGl0IGJhY2sganVzdCBhcyBpdCB3YXMsIGluY2x1ZGluZyBzcGVjaWFsCmNoYXJhY3RlcnM/
CgpUaGFua3MKLS0gCkp1YW4gUGFibG8gTW9yYWxlcwpJbmdlbmlhbiBTb2Z0d2FyZSBsdGRhCkJv
Z290w6EsIENvbG9tYmlhCg==
------=_Part_54698_25332125.1219339010673--

From java-user-return-35612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 17:47:52 2008
Return-Path: <java-user-return-35612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23549 invoked from network); 21 Aug 2008 17:47:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 17:47:51 -0000
Received: (qmail 78187 invoked by uid 500); 21 Aug 2008 17:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78156 invoked by uid 500); 21 Aug 2008 17:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78137 invoked by uid 99); 21 Aug 2008 17:47:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 10:47:43 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 17:46:46 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: Storing special characters in Lucene
Date: Thu, 21 Aug 2008 13:47:00 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A1FE@SUEXCL-02.ad.syr.edu>
In-Reply-To: <bc6cff7b0808211016p65d54919pd29e450f2d4b1ee@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Storing special characters in Lucene
Thread-Index: AckDsdfAXMjrT+uNT+Sfp6yg/u7+rQAAL6LA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

SG9sYSBKdWFuLA0KDQpPbiAwOC8yMS8yMDA4IGF0IDE6MTYgUE0sIEp1YW4gUGFibG8gTW9yYWxl
cyB3cm90ZToNCj4gSSBoYXZlIGFuIGluZGV4IGluIFNwYW5pc2ggYW5kIEkgdXNlIFNub3diYWxs
IHRvIHN0ZW0gYW5kDQo+IGFuYWx5emUgYW5kIGl0IHdvcmtzIHBlcmZlY3RseS4gSG93ZXZlciwg
SSBhbSBydW5uaW5nIGludG8NCj4gdHJvdWJsZSBzdG9yaW5nIChub3QgaW5kZXhpbmcsIG9ubHkg
c3RvcmluZykgd29yZHMgdGhhdA0KPiBoYXZlIHNwZWNpYWwgY2hhcmFjdGVycy4NCj4gDQo+IFRo
YXQgaXMsIEkgc3RvcmUgdGhlIHNwZWNpYWwgY2hhcmFjdGVyIGJ1dCB0aGUgaXQgY29tZXMNCj4g
Z2FyYmxlZCB3aGVuIEkgcmVhZCBpdCBiYWNrLg0KPiBUbyBwcm92aWRlIGFuIGV4YW1wbGU6DQo+
IA0KPiBTdHJpbmcgY29udGVudCA9ICJuacOxb3MiOw0KPiBkb2N1bWVudC5hZGQobmV3IEZpZWxk
KCJuYW1lIixjb250ZW50LFN0b3JlLllFUywgSW5kZXguVG9rZW5pemVkKSk7DQo+IHdyaXRlci5h
ZGREb2N1bWVudChkb2MsIG5ldyBTbm93YmFsbEFuYWx5emVyKCJTcGFuaXNoIikpOw0KDQpJZiB5
b3VyIHNvdXJjZSBjb2RlIGlzIGVuY29kZWQgYXMgTGF0aW4tMSwgdGhlbiBpdCB3aWxsIGxpa2Vs
eSBhcHBlYXIgdG8geW91IHRvIGJlIHRoZSBjb3JyZWN0IGNoYXJhY3RlciAoZGVwZW5kaW5nIG9u
IHRoZSBlZGl0b3Ivdmlld2VyIHlvdSdyZSB1c2luZyBhbmQgaXRzIGNvbmZpZ3VyYXRpb24pLCBi
dXQgSmF2YSBtYXkgbm90IHByb3Blcmx5IGNvbnZlcnQgaXQgdG8gVW5pY29kZSwgZGVwZW5kaW5n
IG9uIHRoZSBlbmNvZGluZyBpdCBleHBlY3RzIHlvdXIgc291cmNlIGNvZGUgdG8gYmUgaW4gKHNl
ZSB0aGUgLWVuY29kaW5nIG9wdGlvbiB0byBqYXZhYyAtIGlmIHlvdSBkb24ndCBzcGVjaWZ5IGl0
LCB0aGVuIHRoZSBwbGF0Zm9ybSBkZWZhdWx0IGVuY29kaW5nIGlzIHVzZWQpLiAgWW91IGNvdWxk
IHRlc3Qgd2hldGhlciB0aGlzIGlzIHRoZSBwcm9ibGVtIGJ5IGluc3RlYWQgdHJ5aW5nOg0KDQog
ICBTdHJpbmcgY29udGVudCA9ICJuaVx1MDBGMW9zIjsNCiAgIC4uLg0KDQo+IExvb2tpbmcgYXQg
dGhlIGluZGV4IHdpdGggTHVrZSBpdCBzaG93cyBtZSAibmkmIzY1NTMzO29zIiBidXQNCj4gd2hl
biBJIHdhbnQgdG8gc2VlIHRoZSBmdWxsIHRleHQgKGJ5IHJpZ2h0IGNsaWNraW5nKSBpdCBzaG93
cw0KPiBtZSBuaSBvcy4NCg0KJiM2NTUzMzsgaXMgdGhlIFVuaWNvZGUgcmVwbGFjZW1lbnQgY2hh
cmFjdGVyIChVK0ZGRkQpLCBhbmQgaXQncyByb3V0aW5lbHkgdXNlZCwgaW5jbHVkaW5nIHdpdGhp
biBMdWNlbmUgaXRzZWxmLCBhcyB0aGUgc3Vic3RpdHV0ZSBjaGFyYWN0ZXIgZm9yIGJ5dGUgc2Vx
dWVuY2VzIHRoYXQgYXJlIG5vdCB2YWxpZCBpbiB0aGUgZGVzaWduYXRlZCBzb3VyY2UgZW5jb2Rp
bmcuDQoNCj4gSSBrbm93IEx1Y2VuZSBpcyBzdXBwb3NlZCB0byBzdG9yZSBmaWVsZHMgaW4gVVRG
OCwgYnV0IHRoZW4sDQo+IGhvdyBjYW4gSSBtYWtlIHN1cmUgSSBzb3RyZSBzb21ldGhpbmcgYW5k
IGdldCBpdCBiYWNrIGp1c3QgYXMNCj4gaXQgd2FzLCBpbmNsdWRpbmcgc3BlY2lhbCBjaGFyYWN0
ZXJzPw0KDQpNYWtlIHN1cmUgdGhhdCB0aGUgZGF0YSB5b3UgZ2l2ZSB0byBMdWNlbmUgaXMgZW5j
b2RlZCBwcm9wZXJseSwgYW5kIHRoZW4gd2hhdCB5b3UgZ2V0IGJhY2sgc2hvdWxkIGFsc28gYmUu
DQoNClBsZWFzZSB0cnkgdGhlIHN1Z2dlc3Rpb24gSSBnYXZlIHlvdSBhYm92ZSAoIm5pXHUwMEYx
b3MiKS4gIElmIHlvdSBzdGlsbCBoYXZlIHRoZSBzYW1lIHByb2JsZW0sIHlvdSBtYXkgaGF2ZSBm
b3VuZCBhIGJ1ZyAtIHBsZWFzZSByZXBvcnQgYmFjayB3aGF0IHlvdSBmaW5kLg0KDQpTdGV2ZQ0K


From java-user-return-35613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 17:58:51 2008
Return-Path: <java-user-return-35613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31711 invoked from network); 21 Aug 2008 17:58:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 17:58:51 -0000
Received: (qmail 98893 invoked by uid 500); 21 Aug 2008 17:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98865 invoked by uid 500); 21 Aug 2008 17:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98854 invoked by uid 99); 21 Aug 2008 17:58:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 10:58:42 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 17:57:46 +0000
Received: by yx-out-2324.google.com with SMTP id 3so42763yxj.5
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 10:58:14 -0700 (PDT)
Received: by 10.103.243.9 with SMTP id v9mr43527mur.44.1219341493365;
        Thu, 21 Aug 2008 10:58:13 -0700 (PDT)
Received: by 10.103.214.12 with HTTP; Thu, 21 Aug 2008 10:58:13 -0700 (PDT)
Message-ID: <bc6cff7b0808211058p5b4ff2a4x4f066ab6c25f2684@mail.gmail.com>
Date: Thu, 21 Aug 2008 12:58:13 -0500
From: "Juan Pablo Morales" <jpmorales@ingenian.com>
To: java-user@lucene.apache.org
Subject: Re: Storing special characters in Lucene
In-Reply-To: <9294E20AED46934EA459020706463F94C5A1FE@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55176_24960280.1219341493361"
References: <bc6cff7b0808211016p65d54919pd29e450f2d4b1ee@mail.gmail.com>
	 <9294E20AED46934EA459020706463F94C5A1FE@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55176_24960280.1219341493361
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On Thu, Aug 21, 2008 at 12:47 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hola Juan,

Hi Steve

>
>
> On 08/21/2008 at 1:16 PM, Juan Pablo Morales wrote:
> > I have an index in Spanish and I use Snowball to stem and
> > analyze and it works perfectly. However, I am running into
> > trouble storing (not indexing, only storing) words that
> > have special characters.
> >
> > That is, I store the special character but the it comes
> > garbled when I read it back.
> > To provide an example:
> >
> > String content =3D "ni=F1os";
> > document.add(new Field("name",content,Store.YES, Index.Tokenized));
> > writer.addDocument(doc, new SnowballAnalyzer("Spanish"));
>
> If your source code is encoded as Latin-1, then it will likely appear to
> you to be the correct character (depending on the editor/viewer you're us=
ing
> and its configuration), but Java may not properly convert it to Unicode,
> depending on the encoding it expects your source code to be in (see the
> -encoding option to javac - if you don't specify it, then the platform
> default encoding is used).  You could test whether this is the problem by
> instead trying:
>
>   String content =3D "ni\u00F1os";
>   ...
>
> > Looking at the index with Luke it shows me "ni&#65533;os" but
> > when I want to see the full text (by right clicking) it shows
> > me ni os.
>
> &#65533; is the Unicode replacement character (U+FFFD), and it's routinel=
y
> used, including within Lucene itself, as the substitute character for byt=
e
> sequences that are not valid in the designated source encoding.
>
> > I know Lucene is supposed to store fields in UTF8, but then,
> > how can I make sure I sotre something and get it back just as
> > it was, including special characters?
>
> Make sure that the data you give to Lucene is encoded properly, and then
> what you get back should also be.
>
> Please try the suggestion I gave you above ("ni\u00F1os").  If you still
> have the same problem, you may have found a bug - please report back what
> you find.

I just gave my example that string, ant it correctly wrote it on the screen
as an =F1, but storing and retrieving it yielded the same results, that is,
the character gets lost in translation.

--=20
Juan Pablo Morales
Ingenian Software ltda

------=_Part_55176_24960280.1219341493361--

From java-user-return-35614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 19:54:44 2008
Return-Path: <java-user-return-35614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11599 invoked from network); 21 Aug 2008 19:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 19:54:43 -0000
Received: (qmail 70725 invoked by uid 500); 21 Aug 2008 19:54:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70689 invoked by uid 500); 21 Aug 2008 19:54:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70678 invoked by uid 99); 21 Aug 2008 19:54:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 12:54:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.190.172.35] (HELO mail.go2.com) (209.190.172.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 19:53:38 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C903C7.A9BC5A49"
Subject: QueryParser Default Operator
Date: Thu, 21 Aug 2008 15:54:02 -0400
Message-ID: <180939A51C17274FB68581AE17C5E0E7202AB6@bertha.Volley.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser Default Operator
Thread-Index: AckDx6kVxyE5FI+9Roemi7AkwMrrkQ==
From: "Jordon Saardchit" <jsaardchit@go2.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C903C7.A9BC5A49
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

This may have been answered before, but is there a reason why setting
the default operator on a QueryParser throws a
java.lang.NoSuchFieldError???
=20
QueryParser parser =3D new QueryParser( "title", new TokenAnalyzerImpl()
);
parser.setDefaultOperator( QueryParser.AND_OPERATOR ); // This line
throws the exception
=20
=20
I'm on version 2.2.  But this isn't all that complex hehe.  Anyone?
=20
Jordon

------_=_NextPart_001_01C903C7.A9BC5A49--

From java-user-return-35615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 20:19:31 2008
Return-Path: <java-user-return-35615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25201 invoked from network); 21 Aug 2008 20:19:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 20:19:31 -0000
Received: (qmail 98490 invoked by uid 500); 21 Aug 2008 20:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98449 invoked by uid 500); 21 Aug 2008 20:19:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98438 invoked by uid 99); 21 Aug 2008 20:19:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 13:19:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.190.172.35] (HELO mail.go2.com) (209.190.172.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 20:18:25 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: QueryParser Default Operator
Date: Thu, 21 Aug 2008 16:18:32 -0400
Message-ID: <180939A51C17274FB68581AE17C5E0E7202AB9@bertha.Volley.local>
In-Reply-To: <180939A51C17274FB68581AE17C5E0E7202AB6@bertha.Volley.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser Default Operator
Thread-Index: AckDx6kVxyE5FI+9Roemi7AkwMrrkQAA1T5A
References: <180939A51C17274FB68581AE17C5E0E7202AB6@bertha.Volley.local>
From: "Jordon Saardchit" <jsaardchit@go2.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Nvm, Extremely goofy project configuration here and classpath issues
with much older versions.  Ignore me!=20

-----Original Message-----
From: Jordon Saardchit [mailto:jsaardchit@go2.com]=20
Sent: Thursday, August 21, 2008 11:54 AM
To: java-user@lucene.apache.org
Subject: QueryParser Default Operator

This may have been answered before, but is there a reason why setting
the default operator on a QueryParser throws a
java.lang.NoSuchFieldError???
=20
QueryParser parser =3D new QueryParser( "title", new TokenAnalyzerImpl()
); parser.setDefaultOperator( QueryParser.AND_OPERATOR ); // This line
throws the exception
=20
=20
I'm on version 2.2.  But this isn't all that complex hehe.  Anyone?
=20
Jordon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 22:31:36 2008
Return-Path: <java-user-return-35616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1954 invoked from network); 21 Aug 2008 22:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 22:31:36 -0000
Received: (qmail 77215 invoked by uid 500); 21 Aug 2008 22:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76505 invoked by uid 500); 21 Aug 2008 22:31:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76494 invoked by uid 99); 21 Aug 2008 22:31:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 15:31:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 22:30:25 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id EDF8CE2531
	for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 15:30:40 -0700 (PDT)
Message-Id: <81B95634-E441-4E92-819E-02DD40C3168D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <bc6cff7b0808211016p65d54919pd29e450f2d4b1ee@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Storing special characters in Lucene
Date: Thu, 21 Aug 2008 18:30:23 -0400
References: <bc6cff7b0808211016p65d54919pd29e450f2d4b1ee@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Here's a unit test:
import junit.framework.TestCase;
import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.store.RAMDirectory;


public class SpanishTest extends TestCase {

   public void testSpanish() throws Exception {
     RAMDirectory directory =3D new RAMDirectory();
     String content =3D "ni=C3=B1os";
     IndexWriter writer =3D new IndexWriter(directory, new =20
StandardAnalyzer(), true);
     Document document =3D new Document();
     document.add(new Field("name", content, Field.Store.YES, =20
Field.Index.TOKENIZED));
     SnowballAnalyzer snowballAnalyzer =3D new =20
SnowballAnalyzer("Spanish");
     writer.addDocument(document, snowballAnalyzer);
     writer.close();

     IndexSearcher searcher =3D new IndexSearcher(directory);
     QueryParser parser =3D new QueryParser("name", snowballAnalyzer);
     Query query =3D parser.parse(content);
     System.out.println("Query: " + query);
     Hits hits =3D searcher.search(query);
     assertTrue("hits Size: " + hits.length() + " is not: " + 1, =20
hits.length() =3D=3D 1);
     Document theDoc =3D hits.doc(0);
     String nombre =3D theDoc.get("name");
     System.out.println("Nombre: " + nombre);
   }
}


When I run this in IntelliJ, I get:

Query: name:ni=C3=B1
Nombre: ni=C3=B1os

Process finished with exit code 0


Are you by chance indexing XML?



On Aug 21, 2008, at 1:16 PM, Juan Pablo Morales wrote:

> I have an index in Spanish and I use Snowball to stem and analyze =20
> and it
> works perfectly. However, I am running into trouble storing (not =20
> indexing,
> only storing) words that have special characters.
>
> That is, I store the special character but the it comes garbled when =20=

> I read
> it back.
> To provide an example:
>
> String content =3D "ni=C3=B1os";
> document.add(new Field("name",content,Store.YES, Index.Tokenized));
> writer.addDocument(doc, new SnowballAnalyzer("Spanish"));
> .
> When I read the field back
> String nombre =3D doc.get("name");
>
> Then name will contain "ni=EF=BF=BDos"
>
> Looking at the index with Luke it shows me "ni&#65533;os" but when I =20=

> want to
> see the full text (by right clicking) it shows me ni=EF=BF=BDos.
>
> I know Lucene is supposed to store fields in UTF8, but then, how can =20=

> I make
> sure I sotre something and get it back just as it was, including =20
> special
> characters?
>
> Thanks
> --=20
> Juan Pablo Morales
> Ingenian Software ltda
> Bogot=C3=A1, Colombia

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 23:19:15 2008
Return-Path: <java-user-return-35617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41099 invoked from network); 21 Aug 2008 23:19:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 23:19:15 -0000
Received: (qmail 36054 invoked by uid 500); 21 Aug 2008 23:19:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35855 invoked by uid 500); 21 Aug 2008 23:19:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35844 invoked by uid 99); 21 Aug 2008 23:19:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 16:19:06 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 23:18:09 +0000
Received: by rv-out-0506.google.com with SMTP id f6so200364rvb.5
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 16:18:28 -0700 (PDT)
Received: by 10.141.123.4 with SMTP id a4mr184261rvn.172.1219360708063;
        Thu, 21 Aug 2008 16:18:28 -0700 (PDT)
Received: by 10.141.141.13 with HTTP; Thu, 21 Aug 2008 16:18:27 -0700 (PDT)
Message-ID: <bc6cff7b0808211618y25594707gd56a9e787b95c3ff@mail.gmail.com>
Date: Thu, 21 Aug 2008 18:18:27 -0500
From: "Juan Pablo Morales" <jpmorales@ingenian.com>
To: java-user@lucene.apache.org
Subject: Re: Storing special characters in Lucene
In-Reply-To: <81B95634-E441-4E92-819E-02DD40C3168D@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31324_12983344.1219360708053"
References: <bc6cff7b0808211016p65d54919pd29e450f2d4b1ee@mail.gmail.com>
	 <81B95634-E441-4E92-819E-02DD40C3168D@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31324_12983344.1219360708053
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You are right, it does work. I'll look into my example to see where the
difference is.

On Thu, Aug 21, 2008 at 5:30 PM, Grant Ingersoll <gsingers@apache.org>wrote=
:

> Here's a unit test:
> import junit.framework.TestCase;
> import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.store.RAMDirectory;
>
>
> public class SpanishTest extends TestCase {
>
>  public void testSpanish() throws Exception {
>    RAMDirectory directory =3D new RAMDirectory();
>    String content =3D "ni=F1os";
>    IndexWriter writer =3D new IndexWriter(directory, new StandardAnalyzer=
(),
> true);
>    Document document =3D new Document();
>    document.add(new Field("name", content, Field.Store.YES,
> Field.Index.TOKENIZED));
>    SnowballAnalyzer snowballAnalyzer =3D new SnowballAnalyzer("Spanish");
>    writer.addDocument(document, snowballAnalyzer);
>    writer.close();
>
>    IndexSearcher searcher =3D new IndexSearcher(directory);
>    QueryParser parser =3D new QueryParser("name", snowballAnalyzer);
>    Query query =3D parser.parse(content);
>    System.out.println("Query: " + query);
>    Hits hits =3D searcher.search(query);
>    assertTrue("hits Size: " + hits.length() + " is not: " + 1,
> hits.length() =3D=3D 1);
>    Document theDoc =3D hits.doc(0);
>    String nombre =3D theDoc.get("name");
>    System.out.println("Nombre: " + nombre);
>  }
> }
>
>
> When I run this in IntelliJ, I get:
>
> Query: name:ni=F1
> Nombre: ni=F1os
>
> Process finished with exit code 0
>
>
> Are you by chance indexing XML?

Indirectly, yes

>
>
--=20
Juan Pablo Morales
Ingenian Software ltda

------=_Part_31324_12983344.1219360708053--

From java-user-return-35618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 23:21:42 2008
Return-Path: <java-user-return-35618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42576 invoked from network); 21 Aug 2008 23:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 23:21:42 -0000
Received: (qmail 38469 invoked by uid 500); 21 Aug 2008 23:21:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38443 invoked by uid 500); 21 Aug 2008 23:21:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38432 invoked by uid 99); 21 Aug 2008 23:21:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 16:21:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 23:20:36 +0000
Received: by wf-out-1314.google.com with SMTP id 28so201762wfc.20
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 16:20:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=GfC/85ha6rfUkCGI2QQoa6Fb19cBQNZ19VWgATaor1o=;
        b=amnduvhxjdHxtWvsZx5VG7rPZfAMupSKL0U+uW10fJwmol0TL/fm+Jk2eGOn4w5gr/
         LJkc+UQ9HkYOrR20XKvPvI4MEOKfkpm9fGjo7PRBgOHh9tH/2XswNJIGApK8d26pJZBP
         ICj6QXV9j+b9PEplnzqELurxKWJl6tGQXyPtU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=qW2Azr1YL/LpRnXQ8IODFDyyaRi13/PtM4Djdp+xTur1bogxTqnBkDFC3p/BLXP1wJ
         gVOnCsSQh31104vXRghUK2TN2lwwiybKvJKhGdR9oZBlbNlk9zb7ju5BayyPgHF6ffC1
         0riKkSL84eVtui+jtRk0lnl+y4vkw8A4PhSss=
Received: by 10.142.207.8 with SMTP id e8mr144844wfg.110.1219360856047;
        Thu, 21 Aug 2008 16:20:56 -0700 (PDT)
Received: by 10.142.221.17 with HTTP; Thu, 21 Aug 2008 16:20:56 -0700 (PDT)
Message-ID: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com>
Date: Thu, 21 Aug 2008 16:20:56 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Index Structure
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22790_29560542.1219360856036"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22790_29560542.1219360856036
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Clarification question:

If I don't store term vectors, then I:
-- won't have information on the position of matching terms
-- I don't have the term frequency vector

-- but I should still have the frequency of terms per document in the .frq
file, right?

So what's the difference between the term frequency vector and the
information saved in the .frq file?

Thanks!

------=_Part_22790_29560542.1219360856036--

From java-user-return-35619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 23:44:37 2008
Return-Path: <java-user-return-35619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63045 invoked from network); 21 Aug 2008 23:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 23:44:37 -0000
Received: (qmail 56141 invoked by uid 500); 21 Aug 2008 23:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56103 invoked by uid 500); 21 Aug 2008 23:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56092 invoked by uid 99); 21 Aug 2008 23:44:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 16:44:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 23:43:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so208822rvb.5
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 16:44:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=S58V3Fh4SVF2bskHfASXNleBB3XqWGkcvXmzap5Z8PE=;
        b=mTmBZfWNOknDMUx64Q3GwyRv84daXF4y2Xh7xzgFk79PYOPqpK3FlxQznz76uqropp
         E9lEzArSsUPlYyChGORiTSO6ZMt3oxLYvynSoQx5xWD2X8JQT6w/wDFzR/wH+wbvsJwJ
         s66eGFYV6CT3eB3YtheBrF338mMR0/E7fhRAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=NAAD9wHABL9uJ1O6tyBa5THWhdbY49SQtL9KiuqGpZ2BvRa2Eq/0AbUgqohh5vyzGl
         89cGvMqXsml5mq3r618l+U4MLLJK+gGMrgiN2dDKEDApnEba5v7qfr89Cyd8tiMd/oUC
         0VLaGu1RIbP0XIQxckGetYM+9BWUR6c618+ps=
Received: by 10.141.193.1 with SMTP id v1mr186030rvp.245.1219362240592;
        Thu, 21 Aug 2008 16:44:00 -0700 (PDT)
Received: by 10.140.172.6 with HTTP; Thu, 21 Aug 2008 16:44:00 -0700 (PDT)
Message-ID: <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com>
Date: Thu, 21 Aug 2008 19:44:00 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene Index Structure
In-Reply-To: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com>
X-Google-Sender-Auth: c8d06a6d308df818
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Aug 21, 2008 at 7:20 PM, David Lee <davidtlee@gmail.com> wrote:
> Clarification question:
>
> If I don't store term vectors, then I:
> -- won't have information on the position of matching terms
> -- I don't have the term frequency vector
>
> -- but I should still have the frequency of terms per document in the .frq
> file, right?
>
> So what's the difference between the term frequency vector and the
> information saved in the .frq file?

It's how the data can be efficiently accessed... by term or by document.
Lucene is naturally an inverted index, and thus makes it easy to ask
"what documents contain this term".
Term vectors store the term information indexed by document and make
it easy to ask "what terms does this specific document have".

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 21 23:52:35 2008
Return-Path: <java-user-return-35620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70019 invoked from network); 21 Aug 2008 23:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2008 23:52:35 -0000
Received: (qmail 60822 invoked by uid 500); 21 Aug 2008 23:52:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60787 invoked by uid 500); 21 Aug 2008 23:52:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60776 invoked by uid 99); 21 Aug 2008 23:52:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 16:52:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 23:51:28 +0000
Received: by wr-out-0506.google.com with SMTP id c30so250614wra.21
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 16:51:07 -0700 (PDT)
Received: by 10.90.83.18 with SMTP id g18mr507883agb.76.1219362667181;
        Thu, 21 Aug 2008 16:51:07 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id l43sm985287wrl.17.2008.08.21.16.51.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 21 Aug 2008 16:51:06 -0700 (PDT)
Message-Id: <B1849B5B-0CFD-44A8-BD36-95E4D40C7B97@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene Index Structure
Date: Thu, 21 Aug 2008 19:51:04 -0400
References: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com> <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, the inverted index *will* store positional information (in the  
*.prx files) even if term vectors are not stored.

Mike

Yonik Seeley wrote:

> On Thu, Aug 21, 2008 at 7:20 PM, David Lee <davidtlee@gmail.com>  
> wrote:
>> Clarification question:
>>
>> If I don't store term vectors, then I:
>> -- won't have information on the position of matching terms
>> -- I don't have the term frequency vector
>>
>> -- but I should still have the frequency of terms per document in  
>> the .frq
>> file, right?
>>
>> So what's the difference between the term frequency vector and the
>> information saved in the .frq file?
>
> It's how the data can be efficiently accessed... by term or by  
> document.
> Lucene is naturally an inverted index, and thus makes it easy to ask
> "what documents contain this term".
> Term vectors store the term information indexed by document and make
> it easy to ask "what terms does this specific document have".
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 00:07:49 2008
Return-Path: <java-user-return-35621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85173 invoked from network); 22 Aug 2008 00:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 00:07:49 -0000
Received: (qmail 72611 invoked by uid 500); 22 Aug 2008 00:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71611 invoked by uid 500); 22 Aug 2008 00:07:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71600 invoked by uid 99); 22 Aug 2008 00:07:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 17:07:40 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 00:06:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KWKBL-0004K7-Qd
	for java-user@lucene.apache.org; Thu, 21 Aug 2008 17:07:11 -0700
Message-ID: <19099258.post@talk.nabble.com>
Date: Thu, 21 Aug 2008 17:07:11 -0700 (PDT)
From: Tavi Nathanson <dnathanson@berkeley.edu>
To: java-user@lucene.apache.org
Subject: Trouble Boosting BooleanQuery's with Multiple Clauses
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dnathanson@berkeley.edu
X-Virus-Checked: Checked by ClamAV on apache.org


I was wondering if anyone could explain the following weird behavior that I'm
experiencing when boosting BooleanQuery's:

When I create a TermQuery, add it as a SHOULD clause to a BooleanQuery, and
boost that BooleanQuery, the boost shows up when I run
IndexSearcher.explain(). However, when I add a second TermQuery as a SHOULD
clause to that same BooleanQuery, and still boost the BooleanQuery, the
boost is nowhere to be found in the output of IndexSearcher.explain(). Note
that the two TermQuery's added as SHOULD's to the BooleanQuery are
identical.

Any help would be much appreciated!

Thanks,

Tavi
-- 
View this message in context: http://www.nabble.com/Trouble-Boosting-BooleanQuery%27s-with-Multiple-Clauses-tp19099258p19099258.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 00:16:37 2008
Return-Path: <java-user-return-35622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89532 invoked from network); 22 Aug 2008 00:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 00:16:37 -0000
Received: (qmail 78642 invoked by uid 500); 22 Aug 2008 00:16:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78610 invoked by uid 500); 22 Aug 2008 00:16:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78598 invoked by uid 99); 22 Aug 2008 00:16:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 17:16:27 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 00:15:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so219630rvb.5
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 17:15:51 -0700 (PDT)
Received: by 10.141.197.21 with SMTP id z21mr214135rvp.91.1219364151419;
        Thu, 21 Aug 2008 17:15:51 -0700 (PDT)
Received: by 10.141.141.13 with HTTP; Thu, 21 Aug 2008 17:15:51 -0700 (PDT)
Message-ID: <bc6cff7b0808211715p65f294d5v990cf6d810f6185c@mail.gmail.com>
Date: Thu, 21 Aug 2008 19:15:51 -0500
From: "Juan Pablo Morales" <jpmorales@ingenian.com>
To: java-user@lucene.apache.org
Subject: Re: Storing special characters in Lucene
In-Reply-To: <bc6cff7b0808211618y25594707gd56a9e787b95c3ff@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31492_11736604.1219364151405"
References: <bc6cff7b0808211016p65d54919pd29e450f2d4b1ee@mail.gmail.com>
	 <81B95634-E441-4E92-819E-02DD40C3168D@apache.org>
	 <bc6cff7b0808211618y25594707gd56a9e787b95c3ff@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31492_11736604.1219364151405
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

It was, after all an XML issue, the servlets creating the content that was
being indexed were not sending UTF but the XML declaration stated the code
WAS UTF, so it really was not a Lucene issue after all. Thanks for all the
help.

On Thu, Aug 21, 2008 at 6:18 PM, Juan Pablo Morales
<jpmorales@ingenian.com>wrote:

> You are right, it does work. I'll look into my example to see where the
> difference is.
>
> On Thu, Aug 21, 2008 at 5:30 PM, Grant Ingersoll <gsingers@apache.org>wro=
te:
>
>> Here's a unit test:
>> import junit.framework.TestCase;
>> import org.apache.lucene.analysis.snowball.SnowballAnalyzer;
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> import org.apache.lucene.index.IndexWriter;
>> import org.apache.lucene.queryParser.QueryParser;
>> import org.apache.lucene.search.Hits;
>> import org.apache.lucene.search.IndexSearcher;
>> import org.apache.lucene.search.Query;
>> import org.apache.lucene.store.RAMDirectory;
>>
>>
>> public class SpanishTest extends TestCase {
>>
>>  public void testSpanish() throws Exception {
>>    RAMDirectory directory =3D new RAMDirectory();
>>    String content =3D "ni=F1os";
>>    IndexWriter writer =3D new IndexWriter(directory, new StandardAnalyze=
r(),
>> true);
>>    Document document =3D new Document();
>>    document.add(new Field("name", content, Field.Store.YES,
>> Field.Index.TOKENIZED));
>>    SnowballAnalyzer snowballAnalyzer =3D new SnowballAnalyzer("Spanish")=
;
>>    writer.addDocument(document, snowballAnalyzer);
>>    writer.close();
>>
>>    IndexSearcher searcher =3D new IndexSearcher(directory);
>>    QueryParser parser =3D new QueryParser("name", snowballAnalyzer);
>>    Query query =3D parser.parse(content);
>>    System.out.println("Query: " + query);
>>    Hits hits =3D searcher.search(query);
>>    assertTrue("hits Size: " + hits.length() + " is not: " + 1,
>> hits.length() =3D=3D 1);
>>    Document theDoc =3D hits.doc(0);
>>    String nombre =3D theDoc.get("name");
>>    System.out.println("Nombre: " + nombre);
>>  }
>> }
>>
>>
>> When I run this in IntelliJ, I get:
>>
>> Query: name:ni=F1
>> Nombre: ni=F1os
>>
>> Process finished with exit code 0
>>
>>
>> Are you by chance indexing XML?
>
> Indirectly, yes
>
>>
>>
> --
> Juan Pablo Morales
> Ingenian Software ltda
>



--=20
Juan Pablo Morales
Ingenian Software ltda

------=_Part_31492_11736604.1219364151405--

From java-user-return-35623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 00:28:17 2008
Return-Path: <java-user-return-35623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4840 invoked from network); 22 Aug 2008 00:28:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 00:28:17 -0000
Received: (qmail 88559 invoked by uid 500); 22 Aug 2008 00:28:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88523 invoked by uid 500); 22 Aug 2008 00:28:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88512 invoked by uid 99); 22 Aug 2008 00:28:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 17:28:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 00:27:10 +0000
Received: by wf-out-1314.google.com with SMTP id 28so224398wfc.20
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 17:27:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=rv8nX129PqYjTaGLSl2oEOx6IyahOrezVPSj6ZsRkb4=;
        b=w+sBnBNyX0+tndfrMY+QytsXBh49manQHvN+kRJjCEsP57U3Ent71iVy7qIf79Pnh0
         5M8JUJRsk/ZdgbSlD+ZK4la4hfK2tvBfn8dUM7O5GY4FrnWwup4SRFgVwZQAVPmCTkw6
         QP9QCKnpSbqYpYG64OSnXzSTDnQG1iDNhDTQs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZhnsQDMwIlatQlCj+TKE9oGk1Ex0HD9luTL5Se5j6uPZEtANBIUI0EZgFib61sTvVh
         vYZHIx+AfNrBk5Ymm/9cpJB+sjL4S2Y/cQ+t+WhVCF76Wq/6gIi6CWsAS9JEdsB0Dkjs
         hJ7m1UlgJf35OvuNZEjZZ4r3VKb/1GcmTwYjc=
Received: by 10.142.72.4 with SMTP id u4mr156352wfa.269.1219364849374;
        Thu, 21 Aug 2008 17:27:29 -0700 (PDT)
Received: by 10.142.221.17 with HTTP; Thu, 21 Aug 2008 17:27:29 -0700 (PDT)
Message-ID: <16f8407d0808211727m77b6a045h770f9b96b196889e@mail.gmail.com>
Date: Thu, 21 Aug 2008 17:27:29 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Index Structure
In-Reply-To: <B1849B5B-0CFD-44A8-BD36-95E4D40C7B97@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23235_22842501.1219364849363"
References: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com>
	 <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com>
	 <B1849B5B-0CFD-44A8-BD36-95E4D40C7B97@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23235_22842501.1219364849363
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I see, ok. Thanks to both of you!

On Thu, Aug 21, 2008 at 4:51 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Also, the inverted index *will* store positional information (in the *.prx
> files) even if term vectors are not stored.
>
> Mike
>
>
> Yonik Seeley wrote:
>
>  On Thu, Aug 21, 2008 at 7:20 PM, David Lee <davidtlee@gmail.com> wrote:
>>
>>> Clarification question:
>>>
>>> If I don't store term vectors, then I:
>>> -- won't have information on the position of matching terms
>>> -- I don't have the term frequency vector
>>>
>>> -- but I should still have the frequency of terms per document in the
>>> .frq
>>> file, right?
>>>
>>> So what's the difference between the term frequency vector and the
>>> information saved in the .frq file?
>>>
>>
>> It's how the data can be efficiently accessed... by term or by document.
>> Lucene is naturally an inverted index, and thus makes it easy to ask
>> "what documents contain this term".
>> Term vectors store the term information indexed by document and make
>> it easy to ask "what terms does this specific document have".
>>
>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
David T. Lee
www.davidtlee.net

------=_Part_23235_22842501.1219364849363--

From java-user-return-35624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 03:05:44 2008
Return-Path: <java-user-return-35624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28318 invoked from network); 22 Aug 2008 03:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 03:05:44 -0000
Received: (qmail 71710 invoked by uid 500); 22 Aug 2008 03:05:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71679 invoked by uid 500); 22 Aug 2008 03:05:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71667 invoked by uid 99); 22 Aug 2008 03:05:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2008 20:05:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nttstar@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 03:04:39 +0000
Received: by ti-out-0910.google.com with SMTP id b8so146807tic.11
        for <java-user@lucene.apache.org>; Thu, 21 Aug 2008 20:04:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=81/i96u1rhRlhWzuCM4qTvv5/RhxlKqqADLe1567zFg=;
        b=oCId/FAqMszZ0nnagA4Ym1cFrPZbvSE/RYisbKBr/w580BBULhSU/CCROcbJd0sSPl
         jJpf6JkbmWhX9sKkL2aVto2aqjZv196ySZPDxAzNE5byOycgUC/8Eg9akjdlfzya4NNb
         wHEohApr+wh7CEM5AmjpIiG0Nk2foL43c20B4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=syemcWirBm3Wnm+dj+aaR5sCqKfM5ZvSdeeXWeU7jGqBs1IYnPXdvDjLbfVi2z7736
         ZkQqkK2ssFPZKYL3HkFTNra7tTGWmRsTqagm0aJPzBk9N485iiBGAEdn4iyM0PwOPqgZ
         e0mcTyc+1B29svBVQSRL+Zf4XwtDDkkYuyhjk=
Received: by 10.110.37.3 with SMTP id k3mr623150tik.29.1219374290703;
        Thu, 21 Aug 2008 20:04:50 -0700 (PDT)
Received: by 10.110.16.20 with HTTP; Thu, 21 Aug 2008 20:04:50 -0700 (PDT)
Message-ID: <11e088b10808212004o66936152s13dc5d2d6863119b@mail.gmail.com>
Date: Fri, 22 Aug 2008 11:04:50 +0800
From: Jarvis.Guo <nttstar@gmail.com>
To: java-user@lucene.apache.org, core-user@hadoop.apache.org
Subject: Questions about lucene index on HDFS
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_187585_25129423.1219374290700"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_187585_25129423.1219374290700
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
    Firstly I have known that there is a FsDirectory class in Nutch-0.9 so
we can access the index on HDFS. But after I tested it, i found that we can
only read the index but can not to append or modify, I think the reason is
the one mentioned in the HDFS-file append issues, am I right?
    Secondly, now I want to merge indexes on HDFS , when there's only one
computer I must create a temp Index which as the merge result on local file
system using the merge function in Lucene package, then upload it to hdfs,
right? So, when I have a lot of pc, how can I do the index merging more
effeciently? Whatever to use, like hadoop-mapreduce framework or other
distributed platform.

Thanks
Jarvis

------=_Part_187585_25129423.1219374290700--

From java-user-return-35625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 09:38:08 2008
Return-Path: <java-user-return-35625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80458 invoked from network); 22 Aug 2008 09:38:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 09:38:08 -0000
Received: (qmail 94854 invoked by uid 500); 22 Aug 2008 09:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94808 invoked by uid 500); 22 Aug 2008 09:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94797 invoked by uid 99); 22 Aug 2008 09:37:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 02:37:57 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [210.51.48.204] (HELO mx3.ourwise.net) (210.51.48.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 09:36:58 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx3.ourwise.net (Postfix) with ESMTP
	id D72EA7140D6; Fri, 22 Aug 2008 17:30:04 +0800 (CST)
Received: from mx3.ourwise.net ([127.0.0.1])
 by localhost (mx3.ourwise.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 06335-03; Fri, 22 Aug 2008 17:30:02 +0800 (CST)
Received: from USER7D9A6195D0 (unknown [211.144.205.235])
	by mx3.ourwise.net (Postfix) with ESMTP
	id D3BD77140D3; Fri, 22 Aug 2008 17:29:50 +0800 (CST)
Message-ID: <006901c90439$3f244b80$3d0aa8c0@videoCodec.com>
From: "???" <wu.pengcheng@pixela-china.com>
To: <java-user@lucene.apache.org>
References: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com> <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com> <B1849B5B-0CFD-44A8-BD36-95E4D40C7B97@mikemccandless.com> <16f8407d0808211727m77b6a045h770f9b96b196889e@mail.gmail.com>
Subject: Lucene Indexing DB records?
Date: Fri, 22 Aug 2008 17:26:54 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3350
X-Virus-Scanned: by amavisd-new at mail.test.com
X-Virus-Checked: Checked by ClamAV on apache.org

R3Vlc3MgSSBkb24ndCBxdWl0ZSB1bmRlcnN0YW5kIHdoeSB0aGVyZSBhcmUgc28gZmV3IHBvc3Rz
IGFib3V0IEx1Y2VuZSBpbmRleGluZyBEQiByZWNvcmRzLiBTZWFyY2hlZCBNYXJrbWFpbCwgYnV0
IG1vc3Qgb2YgdGhlIEx1Y2VuZStEQiBwb3N0cyBoYXZlIHRvIGRvIHdpdGggbHVjZW5lIGluZGV4
IG1hbmFnZW1lbnQuDQoNClRoZSBvbmx5IHRoaW5nIEkgZm91bmQgc28gZmFyIGlzIHRoZSBmb2xs
b3dpbmcsIGlmIHlvdSBoYXZlIGEgbWludXRlIG9yIHR3bzoNCmh0dHA6Ly9rYWxhbmlyLmJsb2dz
cG90LmNvbS8yMDA4LzA2L2luZGV4aW5nLWRhdGFiYXNlLXVzaW5nLWFwYWNoZS1sdWNlbmUuaHRt
bA0KDQpBbnkgY29tbWVudCBvbiB0aGlzPyBFZmZpY2llbmN5PyBObyBuZWVkIHRvIG1haW50YWlu
IGFueSBpbnRlcm1lZGlhdGUgZGF0YT8NCg0KVGhhbmtzIG11Y2gsDQotUGVuZw==



From java-user-return-35626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 09:41:35 2008
Return-Path: <java-user-return-35626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82457 invoked from network); 22 Aug 2008 09:41:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 09:41:35 -0000
Received: (qmail 98663 invoked by uid 500); 22 Aug 2008 09:41:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98633 invoked by uid 500); 22 Aug 2008 09:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98622 invoked by uid 99); 22 Aug 2008 09:41:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 02:41:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 09:40:29 +0000
Received: by rv-out-0506.google.com with SMTP id f6so414870rvb.5
        for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 02:40:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4NmwAkiY1hHMlenDhiYWd+et7XLviAUl3rubMTrp7+w=;
        b=Axo1bmnH79aWkLmKGKCfQoUqp2zUWJMh6N5/WFE0BOnKmo1W99E85vfAXCLrY/mlvo
         BRzvaDH1pJXpxTlsnqn6J4gRQrPYo39EuLqmMZeFiHvlXjzfi8tpDuJQAdxkPAAsdJAR
         9melEUwW/577NSx4vOcKkvYIzBJN72i4FNDgs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=eXVNqT/Y0d1jnH+MOCCGOrmhi/OoKbBneM1z3x5axVGINopY6j8yLW7otgPlQQ+KHb
         N5SXcCsnZ+Ia4NOxse9YqXivjlCbJdcJRzPtE7Bgze6z0NSjuMHi+3eHOE3Lzv5xZU11
         9kClQhgnUeO2O0Lu+kZymnXHTIZdw4KnJxbeg=
Received: by 10.141.53.4 with SMTP id f4mr435835rvk.82.1219398048752;
        Fri, 22 Aug 2008 02:40:48 -0700 (PDT)
Received: by 10.140.173.19 with HTTP; Fri, 22 Aug 2008 02:40:48 -0700 (PDT)
Message-ID: <69de18140808220240g7c78f4dcy15e042bccae78604@mail.gmail.com>
Date: Fri, 22 Aug 2008 15:10:48 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing DB records?
In-Reply-To: <006901c90439$3f244b80$3d0aa8c0@videoCodec.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49722_701264.1219398048733"
References: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com>
	 <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com>
	 <B1849B5B-0CFD-44A8-BD36-95E4D40C7B97@mikemccandless.com>
	 <16f8407d0808211727m77b6a045h770f9b96b196889e@mail.gmail.com>
	 <006901c90439$3f244b80$3d0aa8c0@videoCodec.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49722_701264.1219398048733
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You might also want to look at Solr and DataImportHandler.

http://lucene.apache.org/solr
http://wiki.apache.org/solr/DataImportHandler

On Fri, Aug 22, 2008 at 2:56 PM, ??? <wu.pengcheng@pixela-china.com> wrote:

> Guess I don't quite understand why there are so few posts about Lucene
> indexing DB records. Searched Markmail, but most of the Lucene+DB posts have
> to do with lucene index management.
>
> The only thing I found so far is the following, if you have a minute or
> two:
>
> http://kalanir.blogspot.com/2008/06/indexing-database-using-apache-lucene.html
>
> Any comment on this? Efficiency? No need to maintain any intermediate data?
>
> Thanks much,
> -Peng




-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_49722_701264.1219398048733--

From java-user-return-35627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 09:50:46 2008
Return-Path: <java-user-return-35627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89169 invoked from network); 22 Aug 2008 09:50:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 09:50:46 -0000
Received: (qmail 9299 invoked by uid 500); 22 Aug 2008 09:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9270 invoked by uid 500); 22 Aug 2008 09:50:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9259 invoked by uid 99); 22 Aug 2008 09:50:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 02:50:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 09:49:40 +0000
Received: by nf-out-0910.google.com with SMTP id g16so174324nfd.15
        for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 02:50:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :x-mimeole:thread-index:in-reply-to:message-id;
        bh=CMNPQgFBaV4XSHdvJYa6ziLyVK7iFHSR+Igdcr0AGxE=;
        b=I6cnh2WVi1yNNZQCKelsGxlXWmqRMLHjv9Kp/KBp0/hAt5axbRp90FP93YVkQgr9Gw
         WiupcDlvYQtXmKNg0ui5LizPB2gMqNON+Shd7CK3Du6AjZXsXJ8JDhpVo1B3X1o52VGU
         n8wtjh0tuuPmn0Le0DZz187Ow5jqhK5A8aTjc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-mailer:x-mimeole:thread-index
         :in-reply-to:message-id;
        b=Z2YPJF5OvElouprtSNqhSbIcCaAOlkuVitc/s67Cz9i9mI8UNzBtmBxwnTejAefujV
         t6c+C1izw8peqVVpC8SptDbUymB5hpAgwiWD/oWFK2pAZ+Z9Zqd8HVzozE8Oe1rymwa4
         YHPlVqoWTrZMD0pWQQUzHbaswdHb3uT9Ev95A=
Received: by 10.210.125.7 with SMTP id x7mr1178222ebc.184.1219398608118;
        Fri, 22 Aug 2008 02:50:08 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id 2sm6005775nfv.5.2008.08.22.02.50.04
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 22 Aug 2008 02:50:05 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Case Sensitivity
Date: Fri, 22 Aug 2008 10:50:02 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AckEPG+ignTAQv5PQMKZABj2aqA4/A==
In-Reply-To: <efd1bd310808210021p421b7895he69035d1997b8249@mail.gmail.com>
Message-ID: <48ae8bcd.0216300a.44bf.ffffa51c@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

That is very clever. With that, the text we index will get through the
analyser, but will not get tokenized. Will hit the analyser the same way
when we search, again untokenized.

Brilliant!!


-----Original Message-----
From: Andre Rubin [mailto:andre.rubin@gmail.com] 
Sent: 21 August 2008 08:21
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity

Just to add to that, as I said before, in my case, I found more useful not
to use UN_Tokenized. Instead, I used Tokenized with a custom analyzer that
uses the KeywordTokenizer (entire input as only one token) with the
LowerCaseFilter: This way I get the best of both worlds.

public class KeywordLowerAnalyzer extends Analyzer {

    public KeywordLowerAnalyzer() {
    }


    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new KeywordTokenizer(reader);
        result = new LowerCaseFilter(result);
        return result;
    }

}

On Wed, Aug 20, 2008 at 10:21 AM, Dino Korah <dckorah@gmail.com> wrote:
> Hi Steve,
>
> Thanks a lot for that.
>
> I have a question on TokenStreams and email addresses, but I will post
them
> on a separate thread.
>
> Many thanks,
> Dino
>
>
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: 19 August 2008 17:43
> To: java-user@lucene.apache.org
> Subject: RE: Case Sensitivity
>
> Hi Dino,
>
> I think you'd benefit from reading some FAQ answers, like:
>
> "Why is it important to use the same analyzer type during indexing and 
> search?"
> <
http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c4
> 4472d10961ba63c>
>
> Also, have a look at the AnalysisParalysis wiki page for some hints:
> <http://wiki.apache.org/lucene-java/AnalysisParalysis>
>
> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
>> From the discussion here what I could understand was, if I am using 
>> StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying, 
>> I shouldn't have any problems with cases.
>
> If by "shouldn't have problems with cases" you mean "can match 
> case-insensitively", then this is true.
>
>> But if I have any UN_TOKENIZED fields there will be problems if I do 
>> not case-normalize them myself before adding them as a field to the 
>> document.
>
> Again, assuming that by "case-normalize" you mean "downcase", and that 
> you want case-insensitive matching, and that you use the 
> StandardAnalyzer (or some other downcasing analyzer) at query-time, then
this is true.
>
>> In my case I have a mixed scenario. I am indexing emails and the 
>> email addresses are indexed UN_TOKENIZED. I do have a second set of 
>> custom tokenized field, which keep the tokens in individual fields 
>> with same name.
> [...]
>> Does it mean that where ever I use UN_TOKENIZED, they do not get 
>> through the StandardAnalyzer before getting Indexed, but they do when 
>> they are searched on?
>
> This is true.
>
>> If that is the case, Do I need to normalise them before adding to 
>> document?
>
> If you want case-insensitive matching, then yes, you do need to 
> normalize them before adding them to the document.
>
>> I also would like to know if it is better to employ an EmailAnalyzer 
>> that makes a TokenStream out of the given email address, rather than 
>> using a simplistic function that gives me a list of string pieces and 
>> adding them one by one. With searches, would both the approaches give 
>> same result?
>
> Yes, both approaches give the same result.  When you add string pieces 
> one-by-one, you are adding multiple same-named fields. By contrast, 
> the EmailAnalyzer approach would add a single field, and would allow 
> you to control positions (via Token.setPositionIncrement():
> <
http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/Token.ht
> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  
> Also, if you make up an EmailAnalyzer, you can use it to search 
> against your tokenized email field, along with other analyzer(s) on 
> other field(s),
using
> the PerFieldAnalyzerWrapper
> <
http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/PerField
> AnalyzerWrapper.html>.
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 14:37:32 2008
Return-Path: <java-user-return-35628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75141 invoked from network); 22 Aug 2008 14:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 14:37:32 -0000
Received: (qmail 21701 invoked by uid 500); 22 Aug 2008 14:37:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21678 invoked by uid 500); 22 Aug 2008 14:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21662 invoked by uid 99); 22 Aug 2008 14:37:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 07:37:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of delcacho@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 14:36:26 +0000
Received: by wf-out-1314.google.com with SMTP id 28so523141wfc.20
        for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 07:36:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=j8QJQMpXvV7tCsLcMemPNm7eUuKwNuBf+rHmxMqheFs=;
        b=PsFeKhe6yBwF7nnPAX69E/s90pAd1qVz4td2v/iJYcfHYejnMEHJof1R0yeRKyH88y
         KjVDh3iTo6PUOwwYKlhXq5PfngTPJA/lWTPZ0G48xXtYOMqqC+3X9etVHUzAwkg/Cyo1
         RvldKsr5T8l9gf5mdKXv8xfWFSJsAyIw4etQk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=d83Zn+5L6UESQnd/2VzwCqKKQoxtYrfUaJJA5bSbEOjKnZigAMX70WEaZs0z+OhH9w
         rqwdjIlj021H3wmBXhY5v6Eh4NKGw4BDfN9HTZo/kbFWLJ/1ZEZ+lN35TS7YFl8WodYj
         dsYDN8IocFeIr860JcG122/+r7BR89MgTULBE=
Received: by 10.142.163.1 with SMTP id l1mr431275wfe.122.1219415816112;
        Fri, 22 Aug 2008 07:36:56 -0700 (PDT)
Received: by 10.142.82.12 with HTTP; Fri, 22 Aug 2008 07:36:56 -0700 (PDT)
Message-ID: <bfa4e3120808220736r23c79a8bpc583403f8256b243@mail.gmail.com>
Date: Fri, 22 Aug 2008 16:36:56 +0200
From: "Carlos del Cacho" <delcacho@gmail.com>
To: java-user@lucene.apache.org
Subject: question about modifying indexed Documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83878_19825696.1219415816127"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_83878_19825696.1219415816127
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I'd like to modify a Field in an already indexed Document. The only way so
far that I have found is to delete the document through an IndexReader and
add a new one with an IndexWriter. This has the undesirable property that it
alters existing search results for a given keyword. Is there a better way to
do this?

Thanks,
Carlos

------=_Part_83878_19825696.1219415816127--

From java-user-return-35629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 14:38:12 2008
Return-Path: <java-user-return-35629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75541 invoked from network); 22 Aug 2008 14:38:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 14:38:11 -0000
Received: (qmail 24063 invoked by uid 500); 22 Aug 2008 14:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23771 invoked by uid 500); 22 Aug 2008 14:38:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23760 invoked by uid 99); 22 Aug 2008 14:38:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 07:38:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 14:37:05 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7MEbSd8019061
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 09:37:28 -0500
Received: (qmail 2249 invoked by uid 0); 22 Aug 2008 09:37:28 -0500
Date: 22 Aug 2008 09:37:28 -0500
Message-ID: <20080822143728.2248.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: question about modifying indexed Documents
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.54
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 264833047 - 95a3ff55a7fc
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=264833047&m=95a3ff55a7fc&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=264833047&m=95a3ff55a7fc&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=264833047&m=95a3ff55a7fc&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 14:38:55 2008
Return-Path: <java-user-return-35630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76036 invoked from network); 22 Aug 2008 14:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 14:38:55 -0000
Received: (qmail 27850 invoked by uid 500); 22 Aug 2008 14:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27820 invoked by uid 500); 22 Aug 2008 14:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27809 invoked by uid 99); 22 Aug 2008 14:38:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 07:38:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 14:37:48 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7MEc7Ls010239
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 09:38:07 -0500
Received: (qmail 2925 invoked by uid 0); 22 Aug 2008 09:38:07 -0500
Date: 22 Aug 2008 09:38:07 -0500
Message-ID: <20080822143807.2924.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: question about modifying indexed Documents
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.54
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 264833238 - f38c053e887c
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=264833238&m=f38c053e887c&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=264833238&m=f38c053e887c&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=264833238&m=f38c053e887c&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 14:52:58 2008
Return-Path: <java-user-return-35631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84456 invoked from network); 22 Aug 2008 14:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 14:52:57 -0000
Received: (qmail 49403 invoked by uid 500); 22 Aug 2008 14:52:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49379 invoked by uid 500); 22 Aug 2008 14:52:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49368 invoked by uid 99); 22 Aug 2008 14:52:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 07:52:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 14:51:52 +0000
Received: by rv-out-0506.google.com with SMTP id f6so539952rvb.5
        for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 07:52:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=pseem4mTDIBmejfDgfS9eoFL3z1cJIxWWfQFdKhGszk=;
        b=BX+WRMVT2nTEffBMONpnmYYADniI0Tg5hze3PPiFYR8jIJFaokGGdqrJlxoaHJG7ip
         E59kCIsdbIFG4RHgRWxH1z6BMXkTi5XUYPNyvGNl87oEtODoIVHbiotz2yF5ezd4jksA
         0b2YZTvq01kywFStCbcR+OwuOlayidzTKSHgc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=j7AGl42Y5nFv12/ofGlGr4uob57dubdS4N4mtP/AZ6NY/W7dpwaRfWPW8AGOAodpMG
         qs7MFHhhNjEiFHW9K7COqJA9MzO1jsEBdIf1nQp3a4vsn7nRCRXylYs6NGjjD9xNQqJL
         xrxv/n4aatJ4/T4sb4lIRkS/gDaVvA3VcWW60=
Received: by 10.140.200.16 with SMTP id x16mr580137rvf.120.1219416741546;
        Fri, 22 Aug 2008 07:52:21 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Fri, 22 Aug 2008 07:52:21 -0700 (PDT)
Message-ID: <359a92830808220752xb8a2abk51ae7b462ec6ceb7@mail.gmail.com>
Date: Fri, 22 Aug 2008 10:52:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about modifying indexed Documents
In-Reply-To: <bfa4e3120808220736r23c79a8bpc583403f8256b243@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41703_13119112.1219416741558"
References: <bfa4e3120808220736r23c79a8bpc583403f8256b243@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41703_13119112.1219416741558
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Not that I know of. But if you're storing Lucene doc IDs as part of
existing search results, you're playing with fire anyway. Unless there's
a compelling reason to avoid it, you're usually better off storing your
own unique doc ID in a different field and using that because you can
guarantee that it's invariant.

Best
Erick

On Fri, Aug 22, 2008 at 10:36 AM, Carlos del Cacho <delcacho@gmail.com>wrote:

> Hello,
>
> I'd like to modify a Field in an already indexed Document. The only way so
> far that I have found is to delete the document through an IndexReader and
> add a new one with an IndexWriter. This has the undesirable property that
> it
> alters existing search results for a given keyword. Is there a better way
> to
> do this?
>
> Thanks,
> Carlos
>

------=_Part_41703_13119112.1219416741558--

From java-user-return-35632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 15:17:20 2008
Return-Path: <java-user-return-35632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16533 invoked from network); 22 Aug 2008 15:17:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 15:17:19 -0000
Received: (qmail 85958 invoked by uid 500); 22 Aug 2008 15:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85928 invoked by uid 500); 22 Aug 2008 15:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85917 invoked by uid 99); 22 Aug 2008 15:17:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 08:17:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 15:16:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KWYKT-0004nj-UU
	for java-user@lucene.apache.org; Fri, 22 Aug 2008 08:13:33 -0700
Message-ID: <19108787.post@talk.nabble.com>
Date: Fri, 22 Aug 2008 08:13:33 -0700 (PDT)
From: DimitriD <ddogadin@outstart.com>
To: java-user@lucene.apache.org
Subject: Field Question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ddogadin@outstart.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am new to lucene. Here is my question. The document has fields. When I add
a field to the document I can specify that field is Indexed, Tokenized,
etc.. So the same field can be Tokenized in one document and be
not-tokenized in another document. However the is a method
IndexReader.getFieldNames(IndexReader.FieldOption.INDEXED) that returns all
index fields in the index. It seems like it assumes that FIELD should have
the same attributes across all documents.
Can anyoen explain it?

-- 
View this message in context: http://www.nabble.com/Field-Question-tp19108787p19108787.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 17:22:19 2008
Return-Path: <java-user-return-35633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76660 invoked from network); 22 Aug 2008 17:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 17:22:18 -0000
Received: (qmail 80222 invoked by uid 500); 22 Aug 2008 17:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80187 invoked by uid 500); 22 Aug 2008 17:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80176 invoked by uid 99); 22 Aug 2008 17:22:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 10:22:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 17:21:13 +0000
Received: by wf-out-1314.google.com with SMTP id 28so582423wfc.20
        for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 10:21:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=FpinCokCyooHv9pvR4xFikjdS/lUk8DI1ITzAq2N+P8=;
        b=Fi+JoRDPBgiFmaRMZY7R1GCeaNmZ90EwbQ7CN4UBJJP1LkQOy1xoxpmQ+55pmdC+sj
         jeZpG42RwlXAxuJ+z1CNYcgoFnvi/z4ReQdW5mF9zNu8aKghjKTNlxAuP7cMh+viDahv
         cYzTxpZPFUj10zBzKVaosBIPvKc5eJqjh6vv0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VaWS/ymNQYHB7Q24WNSiCvkvS4WUhXcJgiJ8E/bDkHVD3+vx8F3kgs8PgwQ+p0fOzW
         jzYyOqJEwF4kzHV3m2IScrTmZgL+s550Q3XDWJrV1B3wOWNYMXK/HruHDgMC3eB5Jpnn
         E882ZuIu/qXr6uRboBE5O8UrGlU4gj6m2Usd4=
Received: by 10.142.170.6 with SMTP id s6mr488115wfe.153.1219425692970;
        Fri, 22 Aug 2008 10:21:32 -0700 (PDT)
Received: by 10.142.111.8 with HTTP; Fri, 22 Aug 2008 10:21:32 -0700 (PDT)
Message-ID: <6e3ae6310808221021s66147f6btbb49ad6822d55cae@mail.gmail.com>
Date: Fri, 22 Aug 2008 10:21:32 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing DB records?
In-Reply-To: <006901c90439$3f244b80$3d0aa8c0@videoCodec.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70187_24907437.1219425692981"
References: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com>
	 <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com>
	 <B1849B5B-0CFD-44A8-BD36-95E4D40C7B97@mikemccandless.com>
	 <16f8407d0808211727m77b6a045h770f9b96b196889e@mail.gmail.com>
	 <006901c90439$3f244b80$3d0aa8c0@videoCodec.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70187_24907437.1219425692981
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Actually there are many projects for Lucene + Database. Here is a list I
know:

* Hibernate Search
* Compass, (also Hibernate + Lucene)
* Solr + DataImportHandler (Searching + Crawler)
* DBSight, (Specific for database, closed source, but very customizable,
easy to setup)
* Browse Engine

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Fri, Aug 22, 2008 at 2:26 AM, ??? <wu.pengcheng@pixela-china.com> wrote:

> Guess I don't quite understand why there are so few posts about Lucene
> indexing DB records. Searched Markmail, but most of the Lucene+DB posts have
> to do with lucene index management.
>
> The only thing I found so far is the following, if you have a minute or
> two:
>
> http://kalanir.blogspot.com/2008/06/indexing-database-using-apache-lucene.html
>
> Any comment on this? Efficiency? No need to maintain any intermediate data?
>
> Thanks much,
> -Peng

------=_Part_70187_24907437.1219425692981--

From java-user-return-35634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 17:31:29 2008
Return-Path: <java-user-return-35634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81966 invoked from network); 22 Aug 2008 17:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 17:31:29 -0000
Received: (qmail 97209 invoked by uid 500); 22 Aug 2008 17:31:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97174 invoked by uid 500); 22 Aug 2008 17:31:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97163 invoked by uid 99); 22 Aug 2008 17:31:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 10:31:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 17:30:24 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 37A2571C337; Fri, 22 Aug 2008 10:30:53 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 321EB71C2B7
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 10:30:53 -0700 (PDT)
Date: Fri, 22 Aug 2008 10:30:53 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: SnowballAnalyzer question
In-Reply-To: <489C36FD.3090807@scalix.com>
Message-ID: <Pine.LNX.4.62.0808221026180.23998@radix.cryptio.net>
References: <489C36FD.3090807@scalix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



: I am using the SnowballAnalyzer because of it's multi-language stemming
: capabilities - and am very happy with that.
: There is one small glitch which I'm hoping to overcome - can I get it to split
: up internet domain names in the same way that StopAnalyzer does?

90% of the Lucene Analyzers that exist tend to be simple wrappers arround 
Tokenizers and TokenFilters -- this is true for SnowballAnalyzer and 
StopAnalyzer as well -- all those classes do is setup some initialization 
work, and then delegate to various Tokenizers and TokenFilters ... if you 
poke arround in the code for SnowballAnalyzer you'll see that you can 
write your own analyzer that uses SnowballFilter along with whatever 
tokenizer you want.  (if you like StopAnalyzer's tokenization, that would 
be LowerCaseTokenizer)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 17:45:15 2008
Return-Path: <java-user-return-35635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97189 invoked from network); 22 Aug 2008 17:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 17:45:15 -0000
Received: (qmail 42881 invoked by uid 500); 22 Aug 2008 17:44:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42855 invoked by uid 500); 22 Aug 2008 17:44:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42839 invoked by uid 99); 22 Aug 2008 17:44:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 10:44:29 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 17:43:29 +0000
Received: by gxk6 with SMTP id 6so1304231gxk.5
        for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 10:43:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=pDV5t50+uZddmILvbrFn4f5RpdCQ6XeY+zyFAKi2vzY=;
        b=CdCuKr1+b+XwIfhDb/v8SjWMhqDPt5ayulvTrSlC/BEUIES+6aRfFCAypnvKnxJFgS
         atsOKdbg/TdZSrMBGe0JDrlbFpK5u/Z1mC72Caq0j0QFQr405pWTmfL7Q/cfSCp2K+jE
         Y8ewKcAPevrK8elLsoz9N8auceY7Q3E/Nvb6U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=vC1K1AkbQ4su3On4NzpNOHhNgJthHxZAYgYBNziiJ237w8RT5Zfv8iWga9rnfeWtUT
         04Kr6PDXp0l8UJE1wccIaWpPv26MV8fzrnmCpmWyv0RsW7kxn2EXVJCYglz08srHg6EL
         OrJUN79FB1YoViXAp20lC0923CEo9QNhrt0xs=
Received: by 10.151.78.15 with SMTP id f15mr2224139ybl.99.1219427038183;
        Fri, 22 Aug 2008 10:43:58 -0700 (PDT)
Received: by 10.151.110.3 with HTTP; Fri, 22 Aug 2008 10:43:58 -0700 (PDT)
Message-ID: <126142c0808221043k74430811i84e0483c136003cc@mail.gmail.com>
Date: Fri, 22 Aug 2008 14:43:58 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing DB records?
In-Reply-To: <6e3ae6310808221021s66147f6btbb49ad6822d55cae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com>
	 <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com>
	 <B1849B5B-0CFD-44A8-BD36-95E4D40C7B97@mikemccandless.com>
	 <16f8407d0808211727m77b6a045h770f9b96b196889e@mail.gmail.com>
	 <006901c90439$3f244b80$3d0aa8c0@videoCodec.com>
	 <6e3ae6310808221021s66147f6btbb49ad6822d55cae@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> Actually there are many projects for Lucene + Database. Here is a list I
> know:
>
> * Hibernate Search
> * Compass, (also Hibernate + Lucene)
> * Solr + DataImportHandler (Searching + Crawler)
> * DBSight, (Specific for database, closed source, but very customizable,
> easy to setup)
> * Browse Engine
  If you are using Oracle databases also there is an integration at:
Browse CVS:
   http://dbprism.cvs.sourceforge.net/dbprism/ojvm/
Download:
   http://sourceforge.net/project/showfiles.php?group_id=56183&package_id=255524&release_id=603580
Documentation:
   http://docs.google.com/Doc?id=ddgw7sjp_54fgj9kg
There will be also a presentation at Oracle Open World 08:
  http://www28.cplan.com/cc208/session_details.jsp?isid=298820&ilocation_id=208-1&ilanguage=english
Best regards, Marcelo.

-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 19:34:40 2008
Return-Path: <java-user-return-35636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63314 invoked from network); 22 Aug 2008 19:34:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 19:34:40 -0000
Received: (qmail 90225 invoked by uid 500); 22 Aug 2008 19:34:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90192 invoked by uid 500); 22 Aug 2008 19:34:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90181 invoked by uid 99); 22 Aug 2008 19:34:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 12:34:30 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 19:33:32 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 02276100249
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 12:34:17 -0700 (PDT)
Message-Id: <C02B277D-0763-4718-A266-54871AB2C6DF@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <19043489.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Score Boosting
Date: Fri, 22 Aug 2008 15:33:58 -0400
References: <19043489.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Normalization is done on a field by field basis, as is most scoring.   
It doesn't factor all fields in, b/c someone might not be querying all  
fields.  The field it does use is based on the query.

On Aug 18, 2008, at 10:44 PM, blazingwolf7 wrote:

>
> Hi,
>
> I am currently working on the calculation of score part in Lucene.  
> And I
> encounter a part that I do not understand.
>    return raw * Similarity.decodeNorm(norms[doc]); // normalize for  
> field
>
> As can be seen from the code above, the Similarity method  
> decodeNorm() will
> be called to decode the byte formatted value to change it back into  
> float
> value. This value actually represent the normalization value for the  
> fields;
> title, url, content, host and anchor.
>
> I would like to know how it actually select the field to be included  
> in the
> calculation. When I print out the value, I noticed only one of the  
> field
> will be selected. Can anyone advise me on this? How the field is  
> selected,
> and why not all the field is used in the calculation?
>
> Thanks
> -- 
> View this message in context: http://www.nabble.com/Score-Boosting-tp19043489p19043489.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 19:48:31 2008
Return-Path: <java-user-return-35637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73247 invoked from network); 22 Aug 2008 19:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 19:48:31 -0000
Received: (qmail 12249 invoked by uid 500); 22 Aug 2008 19:48:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12205 invoked by uid 500); 22 Aug 2008 19:48:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12194 invoked by uid 99); 22 Aug 2008 19:48:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 12:48:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 19:47:25 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
Subject: How do TeeTokenizer and SinkTokenizer work?
Date: Fri, 22 Aug 2008 15:47:32 -0400
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B4302ED0367@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How do TeeTokenizer and SinkTokenizer work?
Thread-Index: AckEj+sbrmEEVpNoQSCmYEQrVvUfww==
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
I'm interested in knowing how these tokenizers work together.
The API doc for TeeTokenizer
http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/analysis/TeeTokenFilter.html

has this sample code:
SinkTokenizer sink1 = new SinkTokenizer(null);
SinkTokenizer sink2 = new SinkTokenizer(null);

TokenStream source1 = new TeeTokenFilter(new TeeTokenFilter(new WhitespaceTokenizer(reader1), sink1), sink2);
TokenStream source2 = new TeeTokenFilter(new TeeTokenFilter(new WhitespaceTokenizer(reader2), sink1), sink2);

TokenStream final3 = new EntityDetect(sink1);
TokenStream final4 = new URLDetect(sink2);

with an explanation that reads "sink1 and sink2 will both get tokens from both reader1 and reader2 after whitespace tokenizer",
but I don't understand how the input from reader1 and reader2 are mixed together.
Will sink1 first reaturn the reader1 text, and reader2?
Or are they mixed randomly?

-Kuro
 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 21:20:11 2008
Return-Path: <java-user-return-35638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20457 invoked from network); 22 Aug 2008 21:20:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 21:20:11 -0000
Received: (qmail 96504 invoked by uid 500); 22 Aug 2008 21:20:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96481 invoked by uid 500); 22 Aug 2008 21:20:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96470 invoked by uid 99); 22 Aug 2008 21:20:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 14:20:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 21:19:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 96651286CF2
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 15:19:01 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 28102-07 for <java-user@lucene.apache.org>;
	Fri, 22 Aug 2008 15:18:59 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id B4DF2286C68
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 15:18:59 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <16f8407d0808211620l20b54385pab1746c9dd389fef@mail.gmail.com> <c68e39170808211644v5a620916tf1983d1dbe25162c@mail.gmail.com> <B1849B5B-0CFD-44A8-BD36-95E4D40C7B97@mikemccandless.com> <16f8407d0808211727m77b6a045h770f9b96b196889e@mail.gmail.com> <006901c90439$3f244b80$3d0aa8c0@videoCodec.com>
Subject: RE: Lucene Indexing DB records?
Date: Fri, 22 Aug 2008 15:18:33 -0600
Message-ID: <2753FA8E51A347349421CFB5D37353DF@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <006901c90439$3f244b80$3d0aa8c0@videoCodec.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AckEOtZ+zrcTUV6CT2CYj87W0o747QAYbEYw
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Try Hibernate Search - http://www.hibernate.org/410.html

John G.

-----Original Message-----
From: ??? [mailto:wu.pengcheng@pixela-china.com] 
Sent: Friday, August 22, 2008 3:27 AM
To: java-user@lucene.apache.org
Subject: Lucene Indexing DB records?

Guess I don't quite understand why there are so few posts about Lucene
indexing DB records. Searched Markmail, but most of the Lucene+DB posts have
to do with lucene index management.

The only thing I found so far is the following, if you have a minute or two:
http://kalanir.blogspot.com/2008/06/indexing-database-using-apache-lucene.ht
ml

Any comment on this? Efficiency? No need to maintain any intermediate data?

Thanks much,
-Peng


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 21:46:07 2008
Return-Path: <java-user-return-35639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36463 invoked from network); 22 Aug 2008 21:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 21:46:07 -0000
Received: (qmail 17522 invoked by uid 500); 22 Aug 2008 21:45:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17493 invoked by uid 500); 22 Aug 2008 21:45:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17482 invoked by uid 99); 22 Aug 2008 21:45:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 14:45:58 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 21:45:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 8BB8F10023F
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 14:45:15 -0700 (PDT)
Message-Id: <F39DEAE7-DE00-4C9F-8A79-2DED03B605BE@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B4302ED0367@mail3.basistech.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How do TeeTokenizer and SinkTokenizer work?
Date: Fri, 22 Aug 2008 17:44:54 -0400
References: <E95FD77F0171D14DA1EEE0A785E92B4302ED0367@mail3.basistech.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 22, 2008, at 3:47 PM, Teruhiko Kurosaka wrote:

> Hello,
> I'm interested in knowing how these tokenizers work together.
> The API doc for TeeTokenizer
> http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/analysis/TeeTokenFilter.html
>
> has this sample code:
> SinkTokenizer sink1 = new SinkTokenizer(null);
> SinkTokenizer sink2 = new SinkTokenizer(null);
>
> TokenStream source1 = new TeeTokenFilter(new TeeTokenFilter(new  
> WhitespaceTokenizer(reader1), sink1), sink2);
> TokenStream source2 = new TeeTokenFilter(new TeeTokenFilter(new  
> WhitespaceTokenizer(reader2), sink1), sink2);
>
> TokenStream final3 = new EntityDetect(sink1);
> TokenStream final4 = new URLDetect(sink2);
>
> with an explanation that reads "sink1 and sink2 will both get tokens  
> from both reader1 and reader2 after whitespace tokenizer",
> but I don't understand how the input from reader1 and reader2 are  
> mixed together.
> Will sink1 first reaturn the reader1 text, and reader2?

It depends on the order the fields are added.  If source1 is used  
first, then reader1 will be first.

Try out the code at the bottom.  I get the following if source1 is  
first:

------
final 1
(a,0,1)
(b,2,3)
(c,4,5)
(d,6,7)
(f,8,9)
(g,10,11)
-------- end final 1 -------
------
final 2
(h,0,1)
(i,2,3)
(J,4,5)
(k,6,7)
(L,8,9)
(m,10,11)
-------- end final 2 -------
------
final 3
(a,0,1)
(c,4,5)
(F,8,9)
(g,10,11)
(h,0,1)
(i,2,3)
(J,4,5)
(k,6,7)
(L,8,9)
(m,10,11)
-------- end final 3 -------
------
final 4
(a,0,1)
(b,2,3)
(c,4,5)
(d,6,7)
(F,8,9)
(h,0,1)
(i,2,3)
(J,4,5)
(k,6,7)
(L,8,9)
-------- end final 4 -------

and this if final2 is first:

------
final 2
(h,0,1)
(i,2,3)
(J,4,5)
(k,6,7)
(L,8,9)
(m,10,11)
-------- end final 2 -------
------
final 1
(a,0,1)
(b,2,3)
(c,4,5)
(d,6,7)
(f,8,9)
(g,10,11)
-------- end final 1 -------
------
final 3
(h,0,1)
(i,2,3)
(J,4,5)
(k,6,7)
(L,8,9)
(m,10,11)
(a,0,1)
(c,4,5)
(F,8,9)
(g,10,11)
-------- end final 3 -------
------
final 4
(h,0,1)
(i,2,3)
(J,4,5)
(k,6,7)
(L,8,9)
(a,0,1)
(b,2,3)
(c,4,5)
(d,6,7)
(F,8,9)
-------- end final 4 -------




public class SinkTest extends TestCase {
public class SinkTest extends TestCase {
   public void testSink() throws Exception {
     StringReader reader1 = new StringReader("a b c d F g");
     StringReader reader2 = new StringReader("h i J k L m");

     SinkTokenizer sink1 = new SinkTokenizer(null);
     SinkTokenizer sink2 = new SinkTokenizer(null);

     TokenStream source1 = new TeeTokenFilter(new TeeTokenFilter(new  
WhitespaceTokenizer(reader1), sink1), sink2);
     TokenStream source2 = new TeeTokenFilter(new TeeTokenFilter(new  
WhitespaceTokenizer(reader2), sink1), sink2);

     TokenStream final1 = new LowerCaseFilter(source1);
     TokenStream final2 = source2;
     String[] stops1 = {"b", "d"};
     TokenStream final3 = new StopFilter(sink1, stops1);
     String[] stops2 = {"m", "g"};
     TokenStream final4 = new StopFilter(sink2, stops2);



     printTokens(final1, "final 1");
     printTokens(final2, "final 2");

     printTokens(final3, "final 3");
     printTokens(final4, "final 4");


   }
   private void printTokens(TokenStream input, String label) throws  
IOException {
     Token next = new Token();
     System.out.println("------");
     System.out.println(label);
     while ((next = input.next(next)) != null) {
       System.out.println(next);
     }
     System.out.println("-------- end " + label + " -------");
   }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 22:17:32 2008
Return-Path: <java-user-return-35640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53054 invoked from network); 22 Aug 2008 22:17:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 22:17:32 -0000
Received: (qmail 45757 invoked by uid 500); 22 Aug 2008 22:17:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45211 invoked by uid 500); 22 Aug 2008 22:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45200 invoked by uid 99); 22 Aug 2008 22:17:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 15:17:23 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 22:16:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id EFB3D286BC5
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 16:16:21 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 10362-02 for <java-user@lucene.apache.org>;
	Fri, 22 Aug 2008 16:16:20 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 1427D286C68
	for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 16:16:20 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <19108787.post@talk.nabble.com>
Subject: RE: Field Question
Date: Fri, 22 Aug 2008 16:15:53 -0600
Message-ID: <A54D614AD1CE4BCA90754B849753E873@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <19108787.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AckEajbY9pzU9JnnTeC4OURCQoE+5AAOEDiw
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Dimitri,

	Field.TOKENIZED and Field.NO_NORMs send their field's contents
through a tokenizer and make their contents indexed and therefore
searchable. FIELD.UN_TOKENIZED does not send its field's contents through a
tokenizer but it still indexes its contents. Only Field.NO does not index
its field's contents.
	
	So, regardless of whether or not a particular document has a field
tokenized while another document does not has nothing to do with whether or
not the contents are indexed. As long as it's not Field.NO, they are.

John G.

-----Original Message-----
From: DimitriD [mailto:ddogadin@outstart.com] 
Sent: Friday, August 22, 2008 9:14 AM
To: java-user@lucene.apache.org
Subject: Field Question


I am new to lucene. Here is my question. The document has fields. When I add
a field to the document I can specify that field is Indexed, Tokenized,
etc.. So the same field can be Tokenized in one document and be
not-tokenized in another document. However the is a method
IndexReader.getFieldNames(IndexReader.FieldOption.INDEXED) that returns all
index fields in the index. It seems like it assumes that FIELD should have
the same attributes across all documents.
Can anyoen explain it?

-- 
View this message in context:
http://www.nabble.com/Field-Question-tp19108787p19108787.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 23:36:03 2008
Return-Path: <java-user-return-35641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5003 invoked from network); 22 Aug 2008 23:36:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 23:36:03 -0000
Received: (qmail 23442 invoked by uid 500); 22 Aug 2008 23:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23403 invoked by uid 500); 22 Aug 2008 23:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23392 invoked by uid 99); 22 Aug 2008 23:35:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 16:35:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 23:34:57 +0000
Received: by wf-out-1314.google.com with SMTP id 28so713603wfc.20
        for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 16:35:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=lF+pEJMJypQzxTDxxq2Tdkz/HnFzGwiFgnVBfFgyPCY=;
        b=vhKrllR2xrGghJFmpogNnnFn+tIh0d+NFSoWEJUHcNN7lsTxbzDQ+7B5vBWAUyCmYi
         imbI0p2w7QDx4LfRVshuPivCQsA5ai4LcLL1zlt4wqMy23zw914aXocV1oe/dcvcBFuf
         w6HvmTkd8bykEYdYDrWVvP588uOxh7J2mgnaY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=xVqhF56gXQr5exZhpsPJEEf1LaYXBkRBk2E8ihqOnroV+KIDB3eopvZvwcbD65z/7D
         hHK1WBwHlHDEUZ2aWOCVvsEdKcgS8RbhTm/bM5lmlt2LVmlvHqPQJ/jdqH4s9crg4Pw6
         FF2wmetspgvPq71C8VbBPZ90xV4e4TxkLAJEs=
Received: by 10.143.42.6 with SMTP id u6mr607578wfj.140.1219448126599;
        Fri, 22 Aug 2008 16:35:26 -0700 (PDT)
Received: by 10.142.221.17 with HTTP; Fri, 22 Aug 2008 16:35:26 -0700 (PDT)
Message-ID: <16f8407d0808221635l4d4967b0ra0f45383b4194c6d@mail.gmail.com>
Date: Fri, 22 Aug 2008 16:35:26 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Clarification about segments
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31058_15267955.1219448126587"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31058_15267955.1219448126587
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So from what I understand, is it true that if mergeFactor is 10, then when I
index my first 9 documents, I have 9 separate segments, each containing 1
document? And when searching, it will search through every segment?

Thanks!
David

------=_Part_31058_15267955.1219448126587--

From java-user-return-35642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 22 23:41:33 2008
Return-Path: <java-user-return-35642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7790 invoked from network); 22 Aug 2008 23:41:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2008 23:41:32 -0000
Received: (qmail 30117 invoked by uid 500); 22 Aug 2008 23:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30090 invoked by uid 500); 22 Aug 2008 23:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30079 invoked by uid 99); 22 Aug 2008 23:41:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 16:41:16 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Aug 2008 23:40:15 +0000
Received: by wr-out-0506.google.com with SMTP id c30so711519wra.21
        for <java-user@lucene.apache.org>; Fri, 22 Aug 2008 16:40:27 -0700 (PDT)
Received: by 10.90.106.1 with SMTP id e1mr2158173agc.117.1219448427083;
        Fri, 22 Aug 2008 16:40:27 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 39sm1871608agb.23.2008.08.22.16.40.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 22 Aug 2008 16:40:26 -0700 (PDT)
Message-Id: <9B08092E-8F0E-45CD-BCBA-99D440D3D4E2@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <A54D614AD1CE4BCA90754B849753E873@desktop>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Field Question
Date: Fri, 22 Aug 2008 19:40:24 -0400
References: <19108787.post@talk.nabble.com> <A54D614AD1CE4BCA90754B849753E873@desktop>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually, Field.NO_NORMS means Field.UN_TOKENIZED plus  
Field.setOmitNorms(true).

Mike

John Griffin wrote:

> Dimitri,
>
> 	Field.TOKENIZED and Field.NO_NORMs send their field's contents
> through a tokenizer and make their contents indexed and therefore
> searchable. FIELD.UN_TOKENIZED does not send its field's contents  
> through a
> tokenizer but it still indexes its contents. Only Field.NO does not  
> index
> its field's contents.
> 	
> 	So, regardless of whether or not a particular document has a field
> tokenized while another document does not has nothing to do with  
> whether or
> not the contents are indexed. As long as it's not Field.NO, they are.
>
> John G.
>
> -----Original Message-----
> From: DimitriD [mailto:ddogadin@outstart.com]
> Sent: Friday, August 22, 2008 9:14 AM
> To: java-user@lucene.apache.org
> Subject: Field Question
>
>
> I am new to lucene. Here is my question. The document has fields.  
> When I add
> a field to the document I can specify that field is Indexed,  
> Tokenized,
> etc.. So the same field can be Tokenized in one document and be
> not-tokenized in another document. However the is a method
> IndexReader.getFieldNames(IndexReader.FieldOption.INDEXED) that  
> returns all
> index fields in the index. It seems like it assumes that FIELD  
> should have
> the same attributes across all documents.
> Can anyoen explain it?
>
> -- 
> View this message in context:
> http://www.nabble.com/Field-Question-tp19108787p19108787.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 23 08:48:07 2008
Return-Path: <java-user-return-35643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40457 invoked from network); 23 Aug 2008 08:48:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2008 08:48:07 -0000
Received: (qmail 44124 invoked by uid 500); 23 Aug 2008 08:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44093 invoked by uid 500); 23 Aug 2008 08:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44082 invoked by uid 99); 23 Aug 2008 08:47:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 01:47:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 08:46:58 +0000
Received: from [172.0.1.149] (unknown [66.175.81.100])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id D7EC0593D9
	for <java-user@lucene.apache.org>; Sat, 23 Aug 2008 17:45:36 +0900 (JST)
Message-ID: <48AFCE2C.5080407@r.email.ne.jp>
Date: Sat, 23 Aug 2008 17:45:32 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How do TeeTokenizer and SinkTokenizer work?
References: <E95FD77F0171D14DA1EEE0A785E92B4302ED0367@mail3.basistech.net>
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B4302ED0367@mail3.basistech.net>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kurosaka-san,

I'd written an article on my blog several month ago about SinkTokenizer
and TeeTokenFilter.

See:
http://lucene.jugem.jp/?eid=172

Sorry, but all written in Japanese...

Koji


Teruhiko Kurosaka wrote:
> Hello,
> I'm interested in knowing how these tokenizers work together.
> The API doc for TeeTokenizer
> http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/analysis/TeeTokenFilter.html
>
> has this sample code:
> SinkTokenizer sink1 = new SinkTokenizer(null);
> SinkTokenizer sink2 = new SinkTokenizer(null);
>
> TokenStream source1 = new TeeTokenFilter(new TeeTokenFilter(new WhitespaceTokenizer(reader1), sink1), sink2);
> TokenStream source2 = new TeeTokenFilter(new TeeTokenFilter(new WhitespaceTokenizer(reader2), sink1), sink2);
>
> TokenStream final3 = new EntityDetect(sink1);
> TokenStream final4 = new URLDetect(sink2);
>
> with an explanation that reads "sink1 and sink2 will both get tokens from both reader1 and reader2 after whitespace tokenizer",
> but I don't understand how the input from reader1 and reader2 are mixed together.
> Will sink1 first reaturn the reader1 text, and reader2?
> Or are they mixed randomly?
>
> -Kuro
>  
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 23 08:48:47 2008
Return-Path: <java-user-return-35644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40829 invoked from network); 23 Aug 2008 08:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2008 08:48:47 -0000
Received: (qmail 45756 invoked by uid 500); 23 Aug 2008 08:48:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45719 invoked by uid 500); 23 Aug 2008 08:48:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45708 invoked by uid 99); 23 Aug 2008 08:48:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 01:48:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 08:47:42 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7N8mA7U029820
	for <java-user@lucene.apache.org>; Sat, 23 Aug 2008 03:48:10 -0500
Received: (qmail 23952 invoked by uid 0); 23 Aug 2008 03:48:10 -0500
Date: 23 Aug 2008 03:48:10 -0500
Message-ID: <20080823084810.23951.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_How_do_TeeTokenizer_and_SinkTokenizer_work=3F?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.57
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 265129068 - 6bd5f3800b47
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=265129068&m=6bd5f3800b47&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=265129068&m=6bd5f3800b47&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=265129068&m=6bd5f3800b47&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 23 08:49:24 2008
Return-Path: <java-user-return-35645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41007 invoked from network); 23 Aug 2008 08:49:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2008 08:49:21 -0000
Received: (qmail 47377 invoked by uid 500); 23 Aug 2008 08:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47342 invoked by uid 500); 23 Aug 2008 08:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47331 invoked by uid 99); 23 Aug 2008 08:49:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 01:49:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 08:48:16 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7N8miBc030480
	for <java-user@lucene.apache.org>; Sat, 23 Aug 2008 03:48:44 -0500
Received: (qmail 25107 invoked by uid 0); 23 Aug 2008 03:48:44 -0500
Date: 23 Aug 2008 03:48:44 -0500
Message-ID: <20080823084844.25106.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_Re:_How_do_TeeTokenizer_and_SinkTokenizer_work=3F?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.57
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 265129198 - 86322c3e725d
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=265129198&m=86322c3e725d&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=265129198&m=86322c3e725d&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=265129198&m=86322c3e725d&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 23 09:41:04 2008
Return-Path: <java-user-return-35646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59750 invoked from network); 23 Aug 2008 09:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2008 09:41:04 -0000
Received: (qmail 64059 invoked by uid 500); 23 Aug 2008 09:40:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64018 invoked by uid 500); 23 Aug 2008 09:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64006 invoked by uid 99); 23 Aug 2008 09:40:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 02:40:52 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 09:39:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KWpbb-0004CQ-OS
	for java-user@lucene.apache.org; Sat, 23 Aug 2008 02:40:23 -0700
Message-ID: <19120086.post@talk.nabble.com>
Date: Sat, 23 Aug 2008 02:40:23 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Clarification about segments
In-Reply-To: <16f8407d0808221635l4d4967b0ra0f45383b4194c6d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <16f8407d0808221635l4d4967b0ra0f45383b4194c6d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi David,

this is not true, please take a look to
IndexWriter#setRAMBufferSizeMB
and
IndexWriter#setMaxBufferedDocs

But you can produce 9 segments (each with only one document), if you call
IndexWriter#flush
or
IndexWriter#commit
after each addDocument

so from my knowledge about lucene there is no difference between 
#flush 
and
#optimize(getMergeFactor())
(btw #optimize() is equal to optimize(1) ).


Best regards
  Karsten

p.s. and yes, searching goes through every segment.


David Lee-26 wrote:
> 
> So from what I understand, is it true that if mergeFactor is 10, then when
> I
> index my first 9 documents, I have 9 separate segments, each containing 1
> document? And when searching, it will search through every segment?
> 
> Thanks!
> David
> 
> 

-- 
View this message in context: http://www.nabble.com/Clarification-about-segments-tp19117115p19120086.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 23 13:43:49 2008
Return-Path: <java-user-return-35647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73025 invoked from network); 23 Aug 2008 13:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2008 13:43:49 -0000
Received: (qmail 69576 invoked by uid 500); 23 Aug 2008 13:43:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69541 invoked by uid 500); 23 Aug 2008 13:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69530 invoked by uid 99); 23 Aug 2008 13:43:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 06:43:39 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 13:42:39 +0000
Received: by wr-out-0506.google.com with SMTP id c30so872407wra.21
        for <java-user@lucene.apache.org>; Sat, 23 Aug 2008 06:42:49 -0700 (PDT)
Received: by 10.90.91.2 with SMTP id o2mr2868228agb.111.1219498968365;
        Sat, 23 Aug 2008 06:42:48 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 18sm2567692agb.12.2008.08.23.06.42.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 23 Aug 2008 06:42:47 -0700 (PDT)
Message-Id: <6AF4210C-DD3C-429F-95B0-2DA94918FDEB@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8036528A6A0C24428D60DE20D787E2B11FB2EA@FRI2WNEXMB01.vcorp.ad.vrsn.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Slowing down (rate-limiting/throttling) IndexWriter.optimize
Date: Sat, 23 Aug 2008 09:42:46 -0400
References: <537909.34111.qm@web27103.mail.ukl.yahoo.com> <839ba01c0808200617k23f59d1bk701638ba11149246@mail.gmail.com> <8036528A6A0C24428D60DE20D787E2B11FB2EA@FRI2WNEXMB01.vcorp.ad.vrsn.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I think IO throttling would be a useful built-in feature.

I imagine many people are actually uknowingly affected by this, when  
they make changes to their index on the same machine that also does  
simultaneous searching.  It's not only optimize() that will cause  
this, but also normal flushing of segments, addIndex*, expungeDeletes,  
normal segment merging, etc.

It'd be nice if the throttling could somehow be conditional on whether  
there is "contention", ie, searches are currently doing reading.

Really the OS should provide this facility to us, but it doesn't (at  
least not up through Java's APIs).  Linux does let you pick the IO  
Scheduler to use, and at least one of these IO Schedulers lets you  
prioritize whole processes wrt IO.  It's not an easy problem to solve!

Mike

Halsey, Stephen wrote:

> Hi,
>
> We are using lucene to index a large number of documents (millions)  
> and
> we currently optimize half the index in the background every 2 days,  
> to
> stop it becoming too fragmented.  This takes about an hour and we are
> finding during this time searches are slowed down dramatically on that
> machine.  This is not due to CPU as it is a dual CPU box, so I'm
> thinking it must be the large amounts of IO being used to optimize the
> index.
>
> I was wondering if anyone has any ideas for alleviating this problem?
>
> One option I've come up with is to slowly copy the index to a second
> second offline box, optimize there and then slowly copy the newly
> optimized index back onto the search box.  To slow down the IO so that
> bandwidth and IO are not maxed out I thought I could use something  
> like
> the linux Traffic Control (tc) program
> http://tldp.org/HOWTO/Traffic-Control-HOWTO/elements.html#e-shaping  
> (see
> also http://gentoo-wiki.com/HOWTO_Apache_2_bandwidth_limiting ) or  
> tar,
> nfs and http://www.ivarch.com/programs/quickref/pv.shtml and its
> rate-limit option to limit how quickly the index directory is copied  
> to
> and from the remote machine.  This option doesn't seem ideal as it  
> would
> involve other programs, servers and scripts.
>
> The other option is to do it all within the existing Java program, by
> rate-limiting/throttling the IO of the lucene Directory being used  
> to do
> the optimize.  I've done this in Lucene by extending the FSDirectory  
> and
> the FSIndexOutput classes and putting a small sleep in the
> FSIndexOutput.flushBuffer, and it seems to work OK.  I'm not that keen
> on copying and modifying lucene code though, because I'll have to  
> check
> and possibly modify it every time I upgrade lucene, so if there is a
> reasonable alternative I'd be interested in hearing anyone's ideas?   
> If
> people think IO throttling FSDirectory may be a good idea and useful  
> for
> them, I could develop it more and possibly contact lucene-dev to look
> into getting it added to the lucene trunk?
>
> Cheers
>
>
>
> steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 23 13:46:32 2008
Return-Path: <java-user-return-35648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74362 invoked from network); 23 Aug 2008 13:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2008 13:46:32 -0000
Received: (qmail 71572 invoked by uid 500); 23 Aug 2008 13:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71545 invoked by uid 500); 23 Aug 2008 13:46:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71534 invoked by uid 99); 23 Aug 2008 13:46:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 06:46:23 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 13:45:25 +0000
Received: by wr-out-0506.google.com with SMTP id c30so873106wra.21
        for <java-user@lucene.apache.org>; Sat, 23 Aug 2008 06:45:54 -0700 (PDT)
Received: by 10.90.99.3 with SMTP id w3mr2942708agb.6.1219499154134;
        Sat, 23 Aug 2008 06:45:54 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 5sm2590342agc.29.2008.08.23.06.45.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 23 Aug 2008 06:45:53 -0700 (PDT)
Message-Id: <DE5D8AFE-8312-40C8-A522-AA04065894F9@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <827289.65825.qm@web50310.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Index of Lucene
Date: Sat, 23 Aug 2008 09:45:52 -0400
References: <827289.65825.qm@web50310.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It is in fact 1 byte per field (that stores norms), per document.  So  
if you have 7 fields in the doc that store norms, that uses up 7 bytes.

And, because the storage is non-sparse, even documents which don't  
have a given field X will still use up 1 byte, if field X stores norms.

Also, beware when disabling norms: you must disable norms for every  
single occurrence of that field in any document in your index.  If  
even one document exists that did not disable norms for that field  
then that will "spread" to all other docs, during segment merging.

Mike

Otis Gospodnetic wrote:

> Is that really 1 byte for each document?  Not 1 byte for each field  
> of each document?
>
> Thanks,
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Doron Cohen <cdoronc@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, August 18, 2008 12:11:28 AM
>> Subject: Re: Index of Lucene
>>
>> Norms information comes mainly from lengths of documents - allowing  
>> the
>> search time scoring to take into account the effect of document  
>> lengths
>> (actually
>> field length within a document). In practice, norms stored within  
>> the index
>> may include
>> other information, such as index time boosts - for a document, for  
>> a field.
>> A single
>> byte is stored for each field, - so for this the actual value is  
>> compressed.
>> At search
>> time, norms are loaded into memory, and so consume 1 byte for each  
>> document.
>> It is possible to disable norms for a field while indexing. This is
>> explained
>> better in the javadoc for Similarity, and here:
>> http://lucene.apache.org/java/2_3_2/scoring.html
>>
>> Doron
>>
>> On Mon, Aug 18, 2008 at 5:59 AM, blazingwolf7 wrote:
>>
>>>
>>> Hi,
>>>
>>> I am currently using Lucene for indexing. After a index a file, I  
>>> will use
>>> LUKE to open it and check the index. And there is 1 part that I am  
>>> curious
>>> about. In Luke, under the Document tab, I randomly select a  
>>> document and
>>> display it. At the bottom will be 4 columns, Field, ITSVopLBC,  
>>> Norm and
>>> String Value.
>>>
>>> I am wondering, what is Norm for? And where is it created during  
>>> indexing
>>> time? Which method calculates it?
>>>
>>> Could anyone advise me on this? Thanks for the help
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Index-of-Lucene-tp19025490p19025490.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 23 19:51:13 2008
Return-Path: <java-user-return-35649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56935 invoked from network); 23 Aug 2008 19:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2008 19:51:13 -0000
Received: (qmail 16428 invoked by uid 500); 23 Aug 2008 19:51:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16400 invoked by uid 500); 23 Aug 2008 19:51:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16389 invoked by uid 99); 23 Aug 2008 19:51:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 12:51:05 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 19:50:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 650A1286F61
	for <java-user@lucene.apache.org>; Sat, 23 Aug 2008 13:50:34 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 18616-05 for <java-user@lucene.apache.org>;
	Sat, 23 Aug 2008 13:50:32 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 34DB1286F29
	for <java-user@lucene.apache.org>; Sat, 23 Aug 2008 13:50:32 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <19108787.post@talk.nabble.com> <A54D614AD1CE4BCA90754B849753E873@desktop> <9B08092E-8F0E-45CD-BCBA-99D440D3D4E2@mikemccandless.com>
Subject: RE: Field Question
Date: Sat, 23 Aug 2008 13:50:05 -0600
Message-ID: <AC5CDD3923374FB4B05E301F7176516D@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <9B08092E-8F0E-45CD-BCBA-99D440D3D4E2@mikemccandless.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AckEsKeiU23oHRXuQ5ea4KnLRU42XwAqL3yw
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike. I stand corrected.

John G.

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com] 
Sent: Friday, August 22, 2008 5:40 PM
To: java-user@lucene.apache.org
Subject: Re: Field Question


Actually, Field.NO_NORMS means Field.UN_TOKENIZED plus  
Field.setOmitNorms(true).

Mike

John Griffin wrote:

> Dimitri,
>
> 	Field.TOKENIZED and Field.NO_NORMs send their field's contents
> through a tokenizer and make their contents indexed and therefore
> searchable. FIELD.UN_TOKENIZED does not send its field's contents  
> through a
> tokenizer but it still indexes its contents. Only Field.NO does not  
> index
> its field's contents.
> 	
> 	So, regardless of whether or not a particular document has a field
> tokenized while another document does not has nothing to do with  
> whether or
> not the contents are indexed. As long as it's not Field.NO, they are.
>
> John G.
>
> -----Original Message-----
> From: DimitriD [mailto:ddogadin@outstart.com]
> Sent: Friday, August 22, 2008 9:14 AM
> To: java-user@lucene.apache.org
> Subject: Field Question
>
>
> I am new to lucene. Here is my question. The document has fields.  
> When I add
> a field to the document I can specify that field is Indexed,  
> Tokenized,
> etc.. So the same field can be Tokenized in one document and be
> not-tokenized in another document. However the is a method
> IndexReader.getFieldNames(IndexReader.FieldOption.INDEXED) that  
> returns all
> index fields in the index. It seems like it assumes that FIELD  
> should have
> the same attributes across all documents.
> Can anyoen explain it?
>
> -- 
> View this message in context:
> http://www.nabble.com/Field-Question-tp19108787p19108787.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 23 22:56:17 2008
Return-Path: <java-user-return-35650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46699 invoked from network); 23 Aug 2008 22:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2008 22:56:16 -0000
Received: (qmail 95238 invoked by uid 500); 23 Aug 2008 22:56:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95208 invoked by uid 500); 23 Aug 2008 22:56:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95197 invoked by uid 99); 23 Aug 2008 22:56:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 15:56:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Aug 2008 22:55:10 +0000
Received: by ey-out-2122.google.com with SMTP id 6so104396eyi.53
        for <java-user@lucene.apache.org>; Sat, 23 Aug 2008 15:55:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=/wvgSe3aOxnE3bCG1KXaZN6bGm94rSZRnZN6iLhL92c=;
        b=C5yTi0KY1hHHYpXCQiBphbjDOvs9oC9DIZI+YRtl6sVqRafWljH6pT3X4VSWoeHyFn
         abxbdTnvCuWfyM664V1eZou/2W7yLPnhZ4lDsm9SenIzfWJ1aQfNO1+nZMdj/0GUwlZ1
         878bc5O1yiyloOaWhTZcywp+7TtIimyWyarts=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=uDXf40Yb8xXaq6xYsVbihnFwRMwLIMjMUk9gN3vbDPj4M6WrUN/KE2LXlxlq/ufo4T
         1glVqh8WTCBWqQK7R4WZ74Hs2P3OsZ/oR7UoYGOmAmWQUUDvc77hgiuhtFXekgLMvtgS
         Q6D7vfKm2iivCfkHYWRIvH6cCc5CKorbqznPw=
Received: by 10.210.16.1 with SMTP id 1mr3891794ebp.16.1219532121678;
        Sat, 23 Aug 2008 15:55:21 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id c4sm17631672nfi.13.2008.08.23.15.55.20
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 23 Aug 2008 15:55:20 -0700 (PDT)
Message-Id: <FFD5C8A1-06C1-4C52-A757-46AE7C271F80@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org,
 java-dev@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Important notice on backwards compatibility on updated Snowball contrib module!
Date: Sun, 24 Aug 2008 00:55:18 +0200
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

An index created using the Snowball module in Lucene 2.3.2 and below  
might not be compatible with the Snowball module in Lucene 2.4 (trunk  
revision 688420). This means that you might need to rebuild your index  
from scratch or conduct some tests if you upgrade.

Please use the JIRA issue for any questions and reports regarding this  
issue:
https://issues.apache.org/jira/browse/LUCENE-1142


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 01:03:09 2008
Return-Path: <java-user-return-35651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95027 invoked from network); 25 Aug 2008 01:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 01:03:09 -0000
Received: (qmail 62733 invoked by uid 500); 25 Aug 2008 01:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62691 invoked by uid 500); 25 Aug 2008 01:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62680 invoked by uid 99); 25 Aug 2008 01:03:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Aug 2008 18:03:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 01:01:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KXQTU-0006QL-NT
	for java-user@lucene.apache.org; Sun, 24 Aug 2008 18:02:28 -0700
Message-ID: <19136508.post@talk.nabble.com>
Date: Sun, 24 Aug 2008 18:02:28 -0700 (PDT)
From: DimitriD <ddogadin@outstart.com>
To: java-user@lucene.apache.org
Subject: RE: Field Question
In-Reply-To: <A54D614AD1CE4BCA90754B849753E873@desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ddogadin@outstart.com
References: <A54D614AD1CE4BCA90754B849753E873@desktop>
X-Virus-Checked: Checked by ClamAV on apache.org


John,

Thanks for answering. 
So if I have a document "A "with field "foo" and the field has attribute
Field.NO and
I have document "B" with field "foo" and the field is Field.TOKENIZED.
Will IndexReader.getFieldNames(IndexReader.FieldOption.INDEXED) return field
"foo"?

Thanks,

Dimitri


John Griffin-3 wrote:
> 
> Dimitri,
> 
> 	Field.TOKENIZED and Field.NO_NORMs send their field's contents
> through a tokenizer and make their contents indexed and therefore
> searchable. FIELD.UN_TOKENIZED does not send its field's contents through
> a
> tokenizer but it still indexes its contents. Only Field.NO does not index
> its field's contents.
> 	
> 	So, regardless of whether or not a particular document has a field
> tokenized while another document does not has nothing to do with whether
> or
> not the contents are indexed. As long as it's not Field.NO, they are.
> 
> John G.
> 
> -----Original Message-----
> From: DimitriD [mailto:ddogadin@outstart.com] 
> Sent: Friday, August 22, 2008 9:14 AM
> To: java-user@lucene.apache.org
> Subject: Field Question
> 
> 
> I am new to lucene. Here is my question. The document has fields. When I
> add
> a field to the document I can specify that field is Indexed, Tokenized,
> etc.. So the same field can be Tokenized in one document and be
> not-tokenized in another document. However the is a method
> IndexReader.getFieldNames(IndexReader.FieldOption.INDEXED) that returns
> all
> index fields in the index. It seems like it assumes that FIELD should have
> the same attributes across all documents.
> Can anyoen explain it?
> 
> -- 
> View this message in context:
> http://www.nabble.com/Field-Question-tp19108787p19108787.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/RE%3A-Field-Question-tp19116394p19136508.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 01:03:55 2008
Return-Path: <java-user-return-35652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95748 invoked from network); 25 Aug 2008 01:03:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 01:03:55 -0000
Received: (qmail 67848 invoked by uid 500); 25 Aug 2008 01:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67823 invoked by uid 500); 25 Aug 2008 01:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67812 invoked by uid 99); 25 Aug 2008 01:03:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Aug 2008 18:03:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 01:02:49 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7P137P0008239
	for <java-user@lucene.apache.org>; Sun, 24 Aug 2008 20:03:07 -0500
Received: (qmail 21146 invoked by uid 0); 24 Aug 2008 20:03:07 -0500
Date: 24 Aug 2008 20:03:07 -0500
Message-ID: <20080825010307.21145.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: RE: Field Question
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 265561610 - 970034cad3b6 (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=265561610&m=970034cad3b6&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=265561610&m=970034cad3b6&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=265561610&m=970034cad3b6&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 01:04:38 2008
Return-Path: <java-user-return-35653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96386 invoked from network); 25 Aug 2008 01:04:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 01:04:38 -0000
Received: (qmail 70434 invoked by uid 500); 25 Aug 2008 01:04:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69521 invoked by uid 500); 25 Aug 2008 01:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69510 invoked by uid 99); 25 Aug 2008 01:04:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Aug 2008 18:04:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 01:03:32 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7P13p0A009196
	for <java-user@lucene.apache.org>; Sun, 24 Aug 2008 20:03:51 -0500
Received: (qmail 21556 invoked by uid 0); 24 Aug 2008 20:03:51 -0500
Date: 24 Aug 2008 20:03:51 -0500
Message-ID: <20080825010351.21555.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: RE: Field Question
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 265561720 - 06de6ba4b235 (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=265561720&m=06de6ba4b235&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=265561720&m=06de6ba4b235&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=265561720&m=06de6ba4b235&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 07:20:30 2008
Return-Path: <java-user-return-35654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20866 invoked from network); 25 Aug 2008 07:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 07:20:30 -0000
Received: (qmail 36332 invoked by uid 500); 25 Aug 2008 07:20:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36295 invoked by uid 500); 25 Aug 2008 07:20:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36280 invoked by uid 99); 25 Aug 2008 07:20:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 00:20:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 07:19:25 +0000
Received: by nf-out-0910.google.com with SMTP id g16so699536nfd.15
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 00:19:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=F4AWYPDBdZrr3BhUA/wWbVfAQ2KzY8WrGzjzxeuG2IE=;
        b=sT7K9iwKBfTz1FAbAIBHKHo5KO6LpH8CHf8j8Xww9GU7rV47zJ2Q25y4EdVff6RXYG
         oDcGxpwxfBRw8osKEbEm12ccOhsrjjxpMDadIitoO20dtdGRmn6Bzqdd3Jhr7nmprKdt
         PUosDL73Y5BMHySgMkBsTD5u6vETxfXxgOaQg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=nSTOGn2lL2FDKo5/BB5GdqK3haBaz+zbtIKuBvQoKCdMeAcFlX8AlKmjYr7h77aHLT
         XCGzPVZRlc7ehOCMjS8qDQQ/DWNEE8aXtjWADxknjz0aRYi8ArwH2oPlQoqNxoHBVlBs
         Fc3/bLlmET9jjKpuV1NVc1fcoIq3wo+IKZVR0=
Received: by 10.187.245.13 with SMTP id x13mr335972far.26.1219648794351;
        Mon, 25 Aug 2008 00:19:54 -0700 (PDT)
Received: by 10.187.193.4 with HTTP; Mon, 25 Aug 2008 00:19:54 -0700 (PDT)
Message-ID: <5816fbdd0808250019o20a2443fn3cefb8a1cefa99fe@mail.gmail.com>
Date: Mon, 25 Aug 2008 12:49:54 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Standard Analyzer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69193_22323771.1219648794353"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_69193_22323771.1219648794353
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am using StandardAnalyzer when creating the Lucene index. It indexes the
word "wo&rk" as it is but does not index the word "wo*rk" in that manner.
Can I index such words (including * and ?) as it is? Otherwise I have no way
to index and search for words like "wo*rk", you?, etc.

Thanks
-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_69193_22323771.1219648794353--

From java-user-return-35655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 07:21:16 2008
Return-Path: <java-user-return-35655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21710 invoked from network); 25 Aug 2008 07:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 07:21:16 -0000
Received: (qmail 38467 invoked by uid 500); 25 Aug 2008 07:21:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38433 invoked by uid 500); 25 Aug 2008 07:21:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38422 invoked by uid 99); 25 Aug 2008 07:21:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 00:21:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 07:20:10 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7P7KSU7018382
	for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 02:20:28 -0500
Received: (qmail 1170 invoked by uid 0); 25 Aug 2008 02:20:28 -0500
Date: 25 Aug 2008 02:20:28 -0500
Message-ID: <20080825072028.1169.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Standard Analyzer
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 265626805 - ec0308573ffe (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=265626805&m=ec0308573ffe&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=265626805&m=ec0308573ffe&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=265626805&m=ec0308573ffe&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 07:21:53 2008
Return-Path: <java-user-return-35656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22244 invoked from network); 25 Aug 2008 07:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 07:21:52 -0000
Received: (qmail 40826 invoked by uid 500); 25 Aug 2008 07:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40185 invoked by uid 500); 25 Aug 2008 07:21:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40174 invoked by uid 99); 25 Aug 2008 07:21:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 00:21:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 07:20:46 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7P7LFSG030078
	for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 02:21:15 -0500
Received: (qmail 2043 invoked by uid 0); 25 Aug 2008 02:21:15 -0500
Date: 25 Aug 2008 02:21:15 -0500
Message-ID: <20080825072115.2042.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Standard Analyzer
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.49
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 265626946 - 56fa8005e5dd
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=265626946&m=56fa8005e5dd&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=265626946&m=56fa8005e5dd&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=265626946&m=56fa8005e5dd&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 07:46:15 2008
Return-Path: <java-user-return-35657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33521 invoked from network); 25 Aug 2008 07:46:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 07:46:15 -0000
Received: (qmail 56743 invoked by uid 500); 25 Aug 2008 07:46:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56707 invoked by uid 500); 25 Aug 2008 07:46:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56696 invoked by uid 99); 25 Aug 2008 07:46:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 00:46:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 07:45:10 +0000
Received: by nf-out-0910.google.com with SMTP id g16so704487nfd.15
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 00:45:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=oVjzQG75D8Y0Zsd4LvQa6GMS8DOmueWR7CqRSfNC5EY=;
        b=NtGFwF4usgXsPWajzJJJriSDGNZXz+FlQi5ZWBxhLIuunHszANoBB4PE2cpRmozW9z
         FBHwdI1zM6kKlnQU0Zq5PyaBK6q6vXhr8FslesKD2QzXtnB0YwxX2HFli8HjV2sCr9js
         kHtzDJZPQYRPmmEHineNNcX9mARU4rhhZjQyY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=DmUO6PM5lJ7Iv1El2tyQGbVcmG05EUGRW5ECV638F1I2eMMi4iIbZIQnAKIXoBuRWb
         g+f5RwqKkYiEBdNfPs4/H7v6A5U1g4YNA3KOaW5VM/V3V3fT/HWn1rBW3pjcb2JZAFn5
         llp6iHHU7zPcU/4gHyQpfb04MCUMVeBpaDdto=
Received: by 10.210.79.14 with SMTP id c14mr6190882ebb.139.1219650321819;
        Mon, 25 Aug 2008 00:45:21 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id k10sm3568228nfh.25.2008.08.25.00.45.18
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 25 Aug 2008 00:45:19 -0700 (PDT)
Message-Id: <0B1D6F01-1D2F-4832-9086-70AE7D73EB3F@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <5816fbdd0808250019o20a2443fn3cefb8a1cefa99fe@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Standard Analyzer
Date: Mon, 25 Aug 2008 09:45:12 +0200
References: <5816fbdd0808250019o20a2443fn3cefb8a1cefa99fe@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


25 aug 2008 kl. 09.19 skrev Kalani Ruwanpathirana:

> Hi,
>
> I am using StandardAnalyzer when creating the Lucene index. It  
> indexes the
> word "wo&rk" as it is but does not index the word "wo*rk" in that  
> manner.
> Can I index such words (including * and ?) as it is? Otherwise I  
> have no way
> to index and search for words like "wo*rk", you?, etc.


Try an alternative analyzer, perhaps WhitespaceAnalyzer?  
(StandardAnalyzer will index wo&rk as a single term because it  
contains a rule to handle names such as AT&T.)

You should probably also explain why you need to create an index like  
this.



         karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 09:15:22 2008
Return-Path: <java-user-return-35658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66498 invoked from network); 25 Aug 2008 09:15:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 09:15:21 -0000
Received: (qmail 25283 invoked by uid 500); 25 Aug 2008 09:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25248 invoked by uid 500); 25 Aug 2008 09:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25237 invoked by uid 99); 25 Aug 2008 09:15:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 02:15:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 09:14:15 +0000
Received: by ug-out-1314.google.com with SMTP id u2so659184uge.23
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 02:14:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=g2minVZZWTVazAYHAxvhGLku01ZLCWzXiA1aBjCywdw=;
        b=oXP7byo9MHSnkpeM9LOpfdcwN2GuVbDvGlq6ZKRM4+6SFKQGAyZTYfkddCPD5xz4N/
         e0Uy72D/GdSEibE++PCdVujgMdDGLxhjUrY7/hEPglCyY4Qv2wWFaPSI2hei3rL4qyt5
         1FxH/u/ZlqSNv1ynev7xr5KcpC99xw5ioypuU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Ffjo1BJnn8mt8Mgb5VZ7k2SdxCgiddFlVs0BHBylehBYYNqC4XhsrlCWv0yx/Bi+3N
         4Pan8bGZcgphnF4XGLtnc6efyUWyD4WARZ0P5vefO8H9ySOrwKhvTJ1rhKQRKf8OrP5c
         iMIKNWBLSa6u2tY5KeZX+/YqLpYJaZI4n94Vs=
Received: by 10.187.220.5 with SMTP id x5mr345290faq.82.1219655674138;
        Mon, 25 Aug 2008 02:14:34 -0700 (PDT)
Received: by 10.187.193.4 with HTTP; Mon, 25 Aug 2008 02:14:34 -0700 (PDT)
Message-ID: <5816fbdd0808250214m78f15bf9r1589c2ed17e5702e@mail.gmail.com>
Date: Mon, 25 Aug 2008 14:44:34 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Standard Analyzer
In-Reply-To: <0B1D6F01-1D2F-4832-9086-70AE7D73EB3F@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69908_3414664.1219655674125"
References: <5816fbdd0808250019o20a2443fn3cefb8a1cefa99fe@mail.gmail.com>
	 <0B1D6F01-1D2F-4832-9086-70AE7D73EB3F@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_69908_3414664.1219655674125
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Thanks, I tried WhitespaceAnalyzer too, but it seems case sensitive.

If I need to search for words like "correct?", "<html>" (it escapes <, > and
another few characters too) I need to index those kind of words.

On Mon, Aug 25, 2008 at 1:15 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

>
> 25 aug 2008 kl. 09.19 skrev Kalani Ruwanpathirana:
>
>  Hi,
>>
>> I am using StandardAnalyzer when creating the Lucene index. It indexes the
>> word "wo&rk" as it is but does not index the word "wo*rk" in that manner.
>> Can I index such words (including * and ?) as it is? Otherwise I have no
>> way
>> to index and search for words like "wo*rk", you?, etc.
>>
>
>
> Try an alternative analyzer, perhaps WhitespaceAnalyzer? (StandardAnalyzer
> will index wo&rk as a single term because it contains a rule to handle names
> such as AT&T.)
>
> You should probably also explain why you need to create an index like this.
>
>
>
>        karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_69908_3414664.1219655674125--

From java-user-return-35659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 09:23:38 2008
Return-Path: <java-user-return-35659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70085 invoked from network); 25 Aug 2008 09:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 09:23:38 -0000
Received: (qmail 34659 invoked by uid 500); 25 Aug 2008 09:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34277 invoked by uid 500); 25 Aug 2008 09:23:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34266 invoked by uid 99); 25 Aug 2008 09:23:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 02:23:29 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 09:22:30 +0000
Received: by qw-out-2122.google.com with SMTP id 5so113054qwi.53
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 02:22:48 -0700 (PDT)
Received: by 10.214.45.19 with SMTP id s19mr3630537qas.11.1219656168155;
        Mon, 25 Aug 2008 02:22:48 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 34sm5515193yxm.0.2008.08.25.02.22.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 25 Aug 2008 02:22:47 -0700 (PDT)
Message-Id: <10068D8D-B58F-4142-9099-05463FDD4E18@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19136508.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Field Question
Date: Mon, 25 Aug 2008 05:22:46 -0400
References: <A54D614AD1CE4BCA90754B849753E873@desktop> <19136508.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I think you meant Field.Index.NO and Field.Index.TOKENIZED, for those  
two docs.

The answer is yes -- Lucene considers the field "indexed" if ever any  
doc, even a single doc, had set Index.TOKENIZED or Index.UN_TOKENIZED  
for that field.

However, your document A still will not have been indexed.

Lucene has no global schema; it allows individual docs to have  
whatever fields, with whatever options, they want while indexing.   
However, when documents are indexed together into a segment, some  
properties, eg isIndexed, omitNorms, storeTermVectors, etc, are stored  
globally in the FieldInfos (*.fnm files) and thus must be "merged".   
EG, with omitNorms, only if every doc in the segment called omitNorms  
for field "foo" will norms actually not be stored.

Mike

DimitriD wrote:

>
> John,
>
> Thanks for answering.
> So if I have a document "A "with field "foo" and the field has  
> attribute
> Field.NO and
> I have document "B" with field "foo" and the field is Field.TOKENIZED.
> Will IndexReader.getFieldNames(IndexReader.FieldOption.INDEXED)  
> return field
> "foo"?
>
> Thanks,
>
> Dimitri
>
>
> John Griffin-3 wrote:
>>
>> Dimitri,
>>
>> 	Field.TOKENIZED and Field.NO_NORMs send their field's contents
>> through a tokenizer and make their contents indexed and therefore
>> searchable. FIELD.UN_TOKENIZED does not send its field's contents  
>> through
>> a
>> tokenizer but it still indexes its contents. Only Field.NO does not  
>> index
>> its field's contents.
>> 	
>> 	So, regardless of whether or not a particular document has a field
>> tokenized while another document does not has nothing to do with  
>> whether
>> or
>> not the contents are indexed. As long as it's not Field.NO, they are.
>>
>> John G.
>>
>> -----Original Message-----
>> From: DimitriD [mailto:ddogadin@outstart.com]
>> Sent: Friday, August 22, 2008 9:14 AM
>> To: java-user@lucene.apache.org
>> Subject: Field Question
>>
>>
>> I am new to lucene. Here is my question. The document has fields.  
>> When I
>> add
>> a field to the document I can specify that field is Indexed,  
>> Tokenized,
>> etc.. So the same field can be Tokenized in one document and be
>> not-tokenized in another document. However the is a method
>> IndexReader.getFieldNames(IndexReader.FieldOption.INDEXED) that  
>> returns
>> all
>> index fields in the index. It seems like it assumes that FIELD  
>> should have
>> the same attributes across all documents.
>> Can anyoen explain it?
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Field-Question-tp19108787p19108787.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/RE%3A-Field-Question-tp19116394p19136508.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 09:27:32 2008
Return-Path: <java-user-return-35660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72047 invoked from network); 25 Aug 2008 09:27:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 09:27:31 -0000
Received: (qmail 39182 invoked by uid 500); 25 Aug 2008 09:27:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38695 invoked by uid 500); 25 Aug 2008 09:27:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38684 invoked by uid 99); 25 Aug 2008 09:27:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 02:27:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 09:26:23 +0000
Received: by ug-out-1314.google.com with SMTP id u2so662988uge.23
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 02:26:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=l4TJgJsq8YQSoWpCnEcM9IVt5ujOqSORxCKtwpRZVoQ=;
        b=ZkcdA9R1i3+4VegmnU7pVYzewNSH+LzuGp9BSc8zmv5b4IfJhhvKbBkgayaRkPDgEc
         b63dxt0obFaAnwUcy1nwTGTmQayZX8zprEr0ScCOXp6H1EVRIHBVuXjbT35h+Kl45NnZ
         flHYZGNqETi2goPE7/UueOm4VLWUeeRZ8R7Ig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=kZD/VFlTPHEjlHslHEW2MHyI0iIp7ppzozDOrcjCiA9zdGCB6orjncL6DQzBZ68Xro
         cstpfONCJzqwzAsfHEJFP7sBPOmWc8V91dwNKURqfq9C/HG8wWruo0eMMJL9Rcf5LrW4
         +q5UnOqEIlV8jvaXZzfMX5qpY/pQO7P3BRArw=
Received: by 10.103.247.14 with SMTP id z14mr2716577mur.39.1219656402563;
        Mon, 25 Aug 2008 02:26:42 -0700 (PDT)
Received: from ?192.168.0.190? ( [84.243.3.2])
        by mx.google.com with ESMTPS id g1sm24543992muf.8.2008.08.25.02.26.39
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 25 Aug 2008 02:26:41 -0700 (PDT)
Message-Id: <9702AC22-253A-41BC-BF28-A8A32E8ECE19@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <5816fbdd0808250214m78f15bf9r1589c2ed17e5702e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Standard Analyzer
Date: Mon, 25 Aug 2008 11:26:34 +0200
References: <5816fbdd0808250019o20a2443fn3cefb8a1cefa99fe@mail.gmail.com> <0B1D6F01-1D2F-4832-9086-70AE7D73EB3F@gmail.com> <5816fbdd0808250214m78f15bf9r1589c2ed17e5702e@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


25 aug 2008 kl. 11.14 skrev Kalani Ruwanpathirana:

> Hi,
>
> Thanks, I tried WhitespaceAnalyzer too, but it seems case sensitive.

Then you simply add a LowercaseFilter to the chain in the Analyzer:

public final class WhitespaceAnalyzer extends Analyzer {
   public TokenStream tokenStream(String fieldName, Reader reader) {
-    return new WhitespaceTokenizer(reader);
+    TokenStream ts = new WhitespaceTokenizer(reader);
+    ts = new LowercaseFilter(ts);
+    return ts;
   }


> If I need to search for words like "correct?", "<html>" (it escapes  
> <, > and
> another few characters too) I need to index those kind of words.

That sounds like an XY-problem to me:
http://www.perlmonks.org/index.pl?node_id=542341

What I really was asking about is what problem it is you are trying to  
solve by indexing and searching for these sort of tokens.


        karl


>
>
> On Mon, Aug 25, 2008 at 1:15 PM, Karl Wettin <karl.wettin@gmail.com>  
> wrote:
>
>>
>> 25 aug 2008 kl. 09.19 skrev Kalani Ruwanpathirana:
>>
>> Hi,
>>>
>>> I am using StandardAnalyzer when creating the Lucene index. It  
>>> indexes the
>>> word "wo&rk" as it is but does not index the word "wo*rk" in that  
>>> manner.
>>> Can I index such words (including * and ?) as it is? Otherwise I  
>>> have no
>>> way
>>> to index and search for words like "wo*rk", you?, etc.
>>>
>>
>>
>> Try an alternative analyzer, perhaps WhitespaceAnalyzer?  
>> (StandardAnalyzer
>> will index wo&rk as a single term because it contains a rule to  
>> handle names
>> such as AT&T.)
>>
>> You should probably also explain why you need to create an index  
>> like this.
>>
>>
>>
>>       karl
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Kalani Ruwanpathirana
> Department of Computer Science & Engineering
> University of Moratuwa


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 11:54:52 2008
Return-Path: <java-user-return-35661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40727 invoked from network); 25 Aug 2008 11:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 11:54:52 -0000
Received: (qmail 90173 invoked by uid 500); 25 Aug 2008 11:54:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90140 invoked by uid 500); 25 Aug 2008 11:54:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90129 invoked by uid 99); 25 Aug 2008 11:54:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 04:54:43 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 11:53:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KXaeG-0003Tm-1g
	for java-user@lucene.apache.org; Mon, 25 Aug 2008 04:54:16 -0700
Message-ID: <19142469.post@talk.nabble.com>
Date: Mon, 25 Aug 2008 04:54:16 -0700 (PDT)
From: Venkata Subbarayudu <avsrit2005@gmail.com>
To: java-user@lucene.apache.org
Subject: How to search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: avsrit2005@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
      I am new to this Lucene, and I am using this for indexing and
searching. Is it possible to search substrings using this, for example if a
field holds the value "LuceneIndex" and if a give the query as Index, I want
to get this field also.. is there anyway for this.
 Thanks in Advance,
 Venkata Subbarayudu.
-- 
View this message in context: http://www.nabble.com/How-to-search-tp19142469p19142469.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 11:59:41 2008
Return-Path: <java-user-return-35662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43339 invoked from network); 25 Aug 2008 11:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 11:59:41 -0000
Received: (qmail 93816 invoked by uid 500); 25 Aug 2008 11:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93779 invoked by uid 500); 25 Aug 2008 11:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93768 invoked by uid 99); 25 Aug 2008 11:59:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 04:59:33 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 11:58:34 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1958981rvb.5
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 04:58:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=K/6aFZVdiGiesdDGuh/REGRws6cSCGys6nGi9FSKrEQ=;
        b=W6ttmJs6TAj7Q42AE1DIc7H/0O2gKS+J79k+MG6CFOh298YQcvBphD+a+MGMYM7F9b
         OMyPw7GAyvu/26cYM2E8cwV/nE2LKE+tRq54qWIbYo2La9Ao/klQdZJsx1s0hBy772b3
         NRM8BAx83GOP9MWAP3AFaaHiTec5e0+qYFEkQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=syyJhHkIEQzxxZ50VrBM6qjxFDPpE0POC9pcQ3wLsX3WGSF9YcB7X6mowgsqE/FoWp
         XnFyzH+HqSHSbb+0vzX9tArpqso8hfBqAse/tXas/L9z1ptUCNQ5pDHxppzRoQmyxDe2
         Fq5QUwmy6/RYqHkE8LA7GoKlxjpcCI/ORYm/w=
Received: by 10.140.136.5 with SMTP id j5mr2100371rvd.27.1219665534508;
        Mon, 25 Aug 2008 04:58:54 -0700 (PDT)
Received: by 10.141.170.2 with HTTP; Mon, 25 Aug 2008 04:58:54 -0700 (PDT)
Message-ID: <867513fe0808250458v37b6b7f6s9d189a295b787e09@mail.gmail.com>
Date: Mon, 25 Aug 2008 17:28:54 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search
In-Reply-To: <19142469.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68100_27421350.1219665534511"
References: <19142469.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68100_27421350.1219665534511
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi ,

You could use wildcard queries in that case (In case I got you right).
Though because of the way the indexed terms are stored, it would not be
advisable to have a *word like query but a word* like would be doable in
real world environment.

Hope this answers your question.
--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

On Mon, Aug 25, 2008 at 5:24 PM, Venkata Subbarayudu
<avsrit2005@gmail.com>wrote:

>
> Hi All,
>      I am new to this Lucene, and I am using this for indexing and
> searching. Is it possible to search substrings using this, for example if a
> field holds the value "LuceneIndex" and if a give the query as Index, I
> want
> to get this field also.. is there anyway for this.
>  Thanks in Advance,
>  Venkata Subbarayudu.
> --
> View this message in context:
> http://www.nabble.com/How-to-search-tp19142469p19142469.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_68100_27421350.1219665534511--

From java-user-return-35663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 12:05:59 2008
Return-Path: <java-user-return-35663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45674 invoked from network); 25 Aug 2008 12:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 12:05:59 -0000
Received: (qmail 2026 invoked by uid 500); 25 Aug 2008 12:05:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1826 invoked by uid 500); 25 Aug 2008 12:05:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1815 invoked by uid 99); 25 Aug 2008 12:05:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 05:05:50 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 12:04:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KXap0-000474-8K
	for java-user@lucene.apache.org; Mon, 25 Aug 2008 05:05:22 -0700
Message-ID: <19142634.post@talk.nabble.com>
Date: Mon, 25 Aug 2008 05:05:22 -0700 (PDT)
From: Venkata Subbarayudu <avsrit2005@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search
In-Reply-To: <867513fe0808250458v37b6b7f6s9d189a295b787e09@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: avsrit2005@gmail.com
References: <19142469.post@talk.nabble.com> <867513fe0808250458v37b6b7f6s9d189a295b787e09@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Anshum Gupta,
    Thanks for your replay, but when I gone through querySyntax-Document for
Lucene, I read that Lucene does not allow queries like "*findthis" i.e. I
think it doesnot allow wildcards in the beginning of the query.
is it?

Thanks,
Venkata Subbarayudu.

Anshum-2 wrote:
> 
> Hi ,
> 
> You could use wildcard queries in that case (In case I got you right).
> Though because of the way the indexed terms are stored, it would not be
> advisable to have a *word like query but a word* like would be doable in
> real world environment.
> 
> Hope this answers your question.
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
> 
> On Mon, Aug 25, 2008 at 5:24 PM, Venkata Subbarayudu
> <avsrit2005@gmail.com>wrote:
> 
>>
>> Hi All,
>>      I am new to this Lucene, and I am using this for indexing and
>> searching. Is it possible to search substrings using this, for example if
>> a
>> field holds the value "LuceneIndex" and if a give the query as Index, I
>> want
>> to get this field also.. is there anyway for this.
>>  Thanks in Advance,
>>  Venkata Subbarayudu.
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-search-tp19142469p19142469.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-search-tp19142469p19142634.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 12:07:54 2008
Return-Path: <java-user-return-35664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46401 invoked from network); 25 Aug 2008 12:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 12:07:54 -0000
Received: (qmail 8845 invoked by uid 500); 25 Aug 2008 12:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8452 invoked by uid 500); 25 Aug 2008 12:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8441 invoked by uid 99); 25 Aug 2008 12:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 05:07:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 12:06:48 +0000
Received: by gxk6 with SMTP id 6so1735531gxk.5
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 05:07:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=4MaFUjodJ92VDyh5o0T67r9gXJRu5m8FodAwIamGYaI=;
        b=vD0UTjN2lgx2r/nioq+KJvp8nrVJUSIh6I8AZbQo7kgljpXHR/V+Bu0aoxee/SvNpP
         XSbLVcYZoMw2GlM0vvhRb4eHrf79hu2j3fxrTsec8RTRZ4LKwGpr4YYVf4o8LrNiCsOx
         WqIauB8+htQfs9MHxuSLsinLrM+JjFy1KuvDE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=HUvDrhDHJTDMCwbShbhyktLgfaEPzeRV8kFBAuPomTCOoR3Pj+a61zy4l/vnAsCz6d
         H79JBILJHlb7KwuUVJ4SZ1+UyEPMcOAHeMJiv2WOUzhKYOCWGDL+rEDL4DQVaslvh8hZ
         sRnt6/Z7RwwzIE583tTojrK6NllK1G9BOm7HA=
Received: by 10.150.134.21 with SMTP id h21mr6997853ybd.181.1219666037976;
        Mon, 25 Aug 2008 05:07:17 -0700 (PDT)
Received: from ?192.168.0.190? ( [84.243.3.2])
        by mx.google.com with ESMTPS id i38sm18495568wxd.23.2008.08.25.05.07.12
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 25 Aug 2008 05:07:15 -0700 (PDT)
Message-Id: <DBA0CE5E-AD0E-41DA-9354-6CED0F575F13@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <19142469.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How to search
Date: Mon, 25 Aug 2008 14:07:08 +0200
References: <19142469.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


25 aug 2008 kl. 13.54 skrev Venkata Subbarayudu:

>
> Hi All,
>      I am new to this Lucene, and I am using this for indexing and
> searching. Is it possible to search substrings using this, for  
> example if a
> field holds the value "LuceneIndex" and if a give the query as  
> Index, I want
> to get this field also.. is there anyway for this.
>

Is this the specific use case, that you want to handle composite words  
as in javaFieldAndClassNames? There is no native support for that in  
Lucene to my knowledge, but it should not be too hard to implement a  
TokenStream that tokenize such composite words in to single tokens.  
You probably want to keep the original token too though.

Another alternative is creating an ngram index.

Finally you might want to look at the  
org.apache.lucene.analysis.compound package in contrib/analyzers.



           karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 12:13:07 2008
Return-Path: <java-user-return-35665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47492 invoked from network); 25 Aug 2008 12:13:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 12:13:07 -0000
Received: (qmail 17003 invoked by uid 500); 25 Aug 2008 12:13:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16172 invoked by uid 500); 25 Aug 2008 12:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16161 invoked by uid 99); 25 Aug 2008 12:12:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 05:12:58 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 12:11:59 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1964208rvb.5
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 05:12:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zuTSfpFwjN4X+zzSZ5lw4lxwedEDaKp9BvlR0cbuduc=;
        b=uiCFbs+cfSJYoADR8e/OG670VJuyO22e79ZrEpT+bh56eevt5J6wnTfUVtJeapckTd
         fxQ2rmd9zcTMo2YOhVaPKZyKnGB6BSFPUFDBvB0MVVUzXh97I4OlfQj3S1v+hjhdTDEj
         qYf1mjRQelYv8wdQz68dRxTdtxfNjZSCe4/K0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kchIdW6MRUMeTGz+BZQTe20x75OuJceMhMsnSNqXR6mW5N52AWZI4KhTyHpeTmGcNn
         2we9mmgVpf0sRoXhdyXQgw1P5wrbNjX7XuOKpE6e48tLcqjMA4jOFjY/f3tUp8xtClNi
         46NfFKh2yXk000jGaILfxZzmB5kZ3d2VEDiz8=
Received: by 10.140.192.9 with SMTP id p9mr2093853rvf.114.1219666338998;
        Mon, 25 Aug 2008 05:12:18 -0700 (PDT)
Received: by 10.141.170.2 with HTTP; Mon, 25 Aug 2008 05:12:18 -0700 (PDT)
Message-ID: <867513fe0808250512w239bbd11p340acc8319890817@mail.gmail.com>
Date: Mon, 25 Aug 2008 17:42:18 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search
In-Reply-To: <19142634.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68262_20744860.1219666338992"
References: <19142469.post@talk.nabble.com>
	 <867513fe0808250458v37b6b7f6s9d189a295b787e09@mail.gmail.com>
	 <19142634.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68262_20744860.1219666338992
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, and that is the reason why I said,
*"it would not be advisable to have a *word like query but a word* like
would be doable"*
*word : is a prefix wildcard, which can be done, but its not all that
straight, and still would be highly against what I would advise
word* : is Doable and ok.

Else if you are so bent on wanting that, you may as well write an
intelligent indexing wrapper to meet your needs (which would again require a
lot of time and effort)

--
Anshum

On Mon, Aug 25, 2008 at 5:35 PM, Venkata Subbarayudu
<avsrit2005@gmail.com>wrote:

>
> Hi Anshum Gupta,
>    Thanks for your replay, but when I gone through querySyntax-Document for
> Lucene, I read that Lucene does not allow queries like "*findthis" i.e. I
> think it doesnot allow wildcards in the beginning of the query.
> is it?
>
> Thanks,
> Venkata Subbarayudu.
>
> Anshum-2 wrote:
> >
> > Hi ,
> >
> > You could use wildcard queries in that case (In case I got you right).
> > Though because of the way the indexed terms are stored, it would not be
> > advisable to have a *word like query but a word* like would be doable in
> > real world environment.
> >
> > Hope this answers your question.
> > --
> > Anshum Gupta
> > Naukri Labs!
> > http://ai-cafe.blogspot.com
> >
> > On Mon, Aug 25, 2008 at 5:24 PM, Venkata Subbarayudu
> > <avsrit2005@gmail.com>wrote:
> >
> >>
> >> Hi All,
> >>      I am new to this Lucene, and I am using this for indexing and
> >> searching. Is it possible to search substrings using this, for example
> if
> >> a
> >> field holds the value "LuceneIndex" and if a give the query as Index, I
> >> want
> >> to get this field also.. is there anyway for this.
> >>  Thanks in Advance,
> >>  Venkata Subbarayudu.
> >> --
> >> View this message in context:
> >> http://www.nabble.com/How-to-search-tp19142469p19142469.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > --
> > The facts expressed here belong to everybody, the opinions to me.
> > The distinction is yours to draw............
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/How-to-search-tp19142469p19142634.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_68262_20744860.1219666338992--

From java-user-return-35666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 14:43:36 2008
Return-Path: <java-user-return-35666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22621 invoked from network); 25 Aug 2008 14:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 14:43:36 -0000
Received: (qmail 34894 invoked by uid 500); 25 Aug 2008 14:43:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34632 invoked by uid 500); 25 Aug 2008 14:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34621 invoked by uid 99); 25 Aug 2008 14:43:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 07:43:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 14:42:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2024407rvb.5
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 07:43:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ctqYZ/ojSQ4TDY2o9aFPjKea5qYV/VT3ghDdPWecCvk=;
        b=JW5cQAd4cqstas+2HPmOWwRvJZyZcWQ3mNq7BgcM9+VTQMyzfRpFeyYipbI0qfO2G8
         qGkWXTTHwCmC4XWbLTl0T+RSce4/+k4worZ7/xVcOcQ1W/MMzo0v5ObDa5EXduxNgQGV
         KUbRm++GO4wt3aRp4Vro3UG0Vk/hGDMyFTIp8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ikg82kRD80HF6AkGMRdLiRBAKPwYYD3YdSvCRMu3+9Ce6Ppw043tCCKVbKIbliHRAo
         d05ughU3YQG3VoTZzBHM1y9IXdR1r416ThZmTpJ7+C/5irqJJpfzQU6dKZYyHgf1R3Rx
         dkMExAVMFkhfHvQbCl2ITHvt+eYda6wvXwC6Q=
Received: by 10.141.194.11 with SMTP id w11mr2166609rvp.228.1219675381024;
        Mon, 25 Aug 2008 07:43:01 -0700 (PDT)
Received: by 10.140.173.19 with HTTP; Mon, 25 Aug 2008 07:43:00 -0700 (PDT)
Message-ID: <69de18140808250743t152d5143pe84e56462524594f@mail.gmail.com>
Date: Mon, 25 Aug 2008 20:13:00 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search
In-Reply-To: <DBA0CE5E-AD0E-41DA-9354-6CED0F575F13@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_79628_5042107.1219675381003"
References: <19142469.post@talk.nabble.com>
	 <DBA0CE5E-AD0E-41DA-9354-6CED0F575F13@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_79628_5042107.1219675381003
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Mon, Aug 25, 2008 at 5:37 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

>
> Is this the specific use case, that you want to handle composite words as
> in javaFieldAndClassNames? There is no native support for that in Lucene to
> my knowledge, but it should not be too hard to implement a TokenStream that
> tokenize such composite words in to single tokens. You probably want to keep
> the original token too though.
>
> Another alternative is creating an ngram index.
>
> Finally you might want to look at the org.apache.lucene.analysis.compound
> package in contrib/analyzers.
>
>
Solr has WordDelimiterFilter which splits on case transition (and many
more). It is exposed through WordDelimiterFilterFactory.

http://lucene.apache.org/solr/api/org/apache/solr/analysis/WordDelimiterFilterFactory.html
http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/analysis/WordDelimiterFilter.java?revision=684908&view=markup

-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_79628_5042107.1219675381003--

From java-user-return-35667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 15:31:18 2008
Return-Path: <java-user-return-35667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59244 invoked from network); 25 Aug 2008 15:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 15:31:18 -0000
Received: (qmail 22980 invoked by uid 500); 25 Aug 2008 15:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22951 invoked by uid 500); 25 Aug 2008 15:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22940 invoked by uid 99); 25 Aug 2008 15:31:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 08:31:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.9.160.2] (HELO mail.lf.net) (212.9.160.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 15:30:12 +0000
Received: from pd95b7a46.dip0.t-ipconnect.de ([217.91.122.70] helo=[172.26.70.20])
	by mail.lf.net with esmtp (Exim 4.63)
	(envelope-from <heiko.mueller@giata.de>)
	id 1KXe0U-000BLk-ED
	for java-user@lucene.apache.org; Mon, 25 Aug 2008 17:29:26 +0200
Message-ID: <48B2CFD2.6080106@giata.de>
Date: Mon, 25 Aug 2008 17:29:22 +0200
From: Heiko <heiko.mueller@giata.de>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: FilteredQuery
X-Enigmail-Version: 0.95.7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

i would like to use the FilteredQuery to filter my search results with
the occurrence or absence of certain ids.

Example A:
query -> text:"albert einstein"
filterQuery -> doctype:letter

That's ok. I am getting the expected results. But i got no results, if
i  filter with the absence of an id.

Example B:
query -> text:"albert einstein"
filterQuery -> NOT doctype:article

However following concatenation of filterQuery and query leads to the
expected result.

Example C:
query -> text:"albert einstein"
filterQuery -> text:"albert einstein" NOT doctype:article

I am confused that Example B does not worked. It is bug?

 I am using Lucene 2.3.2 and the following code fragement:

Query query;
Query filterQuery;
...
Filter filter = new CachingWrapperFilter(new
QueryWrapperFilter(filterQuery));
FilteredQuery filteredQuery = new FilteredQuery(query, filter);
Hits hits = searcher.search(filteredQuery);
...

Thanks,
Heiko Mller


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 15:34:08 2008
Return-Path: <java-user-return-35668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60863 invoked from network); 25 Aug 2008 15:34:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 15:34:07 -0000
Received: (qmail 27636 invoked by uid 500); 25 Aug 2008 15:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27602 invoked by uid 500); 25 Aug 2008 15:33:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27591 invoked by uid 99); 25 Aug 2008 15:33:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 08:33:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 15:33:02 +0000
Received: by gxk6 with SMTP id 6so2070916gxk.5
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 08:32:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=xlwB0ZlINturoTlsbZPLJBQ0wVwu8nKsd2xRt3kTu3Q=;
        b=NAauXJlSUWm5CvRUJQpwdL2xGJ5081PCCbZkI39LWPBpKegdRuZg9rxCIanAYrxE8O
         G6spkVErwClYC6pLZsV/8bVUfoewksz4zRuHNI0NwgAkcUdtF67cg/Y9TCFqUqAVFsyb
         iDviCiKJRLoaY3pdx5kRGsbJLri7K1MJSYO6s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=g1+CnUxl4oYbWqAuaGmHSi55VNl2Jn+x6E+0/xy7iTlgFUmewxa0BPGAI7Jh2RToj5
         a15exvFLyPrVcf0fh+UU9RRnVgWgQkneivly7wQhHpn8ZQy/kTnFLlM0H6FwgMBJ9CwH
         i0fL2ifHLxzUBrWhUzGqKhUm6mIgSR2vRXroU=
Received: by 10.151.9.1 with SMTP id m1mr2963759ybi.219.1219678351865;
        Mon, 25 Aug 2008 08:32:31 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Mon, 25 Aug 2008 08:32:31 -0700 (PDT)
Message-ID: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com>
Date: Mon, 25 Aug 2008 10:32:31 -0500
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: MultiPhrase search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71254_7635124.1219678351869"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71254_7635124.1219678351869
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Let's say that I have in my index the value "One Two Three" for field 'A'.
I'm using a custom analyzer that is described in the forwarded message.

My Search query is built like this:

    QueryParser parser = new QueryParser(LABEL_FIELD, ANALYZER);
    Query query = parser.parse(LABEL_FIELD + ":" + searchQuery);

So when I search for

1) On*

I get a match with "One Two Three"

But when I search for

2) One Tw*

I get no matches. query.toString outputs:

3) label:One label:Tw*

which is obviously wrong. If I surround my search strng with ":

4) "One Tw*"

query.toString outputs what I was expecting:

5) label:One Tw*

but I still get no matches, and now even the first search (1) doesn't work.

Looking through the API I found this MultiPhraseQuery, but the doc was very
confusing. I tried it out but with no luck (I think I did it wrong). In any
case, is MultiPhraseQuery what I'm looking for? If it is, how should I use
the MultiPhraseQuery class?

Thanks,


Andre


---------- Forwarded message ----------
From: Andre Rubin <andre.rubin@gmail.com>
Date: Thu, Aug 21, 2008 at 2:21 AM
Subject: Re: Case Sensitivity
To: java-user@lucene.apache.org


Just to add to that, as I said before, in my case, I found more useful not
to use UN_Tokenized. Instead, I used Tokenized with a custom analyzer that
uses the KeywordTokenizer (entire input as only one token) with the
LowerCaseFilter: This way I get the best of both worlds.

public class KeywordLowerAnalyzer extends Analyzer {

    public KeywordLowerAnalyzer() {
    }


    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new KeywordTokenizer(reader);
        result = new LowerCaseFilter(result);
        return result;
    }

}

------=_Part_71254_7635124.1219678351869--

From java-user-return-35669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 17:22:41 2008
Return-Path: <java-user-return-35669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19488 invoked from network); 25 Aug 2008 17:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 17:22:41 -0000
Received: (qmail 86652 invoked by uid 500); 25 Aug 2008 17:22:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86016 invoked by uid 500); 25 Aug 2008 17:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86005 invoked by uid 99); 25 Aug 2008 17:22:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 10:22:32 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of collinmc@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 17:21:32 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m7PHIpbv001512
	for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 13:18:51 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m7PHIpst201862
	for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 13:18:51 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m7PHIopo029138
	for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 13:18:50 -0400
Received: from d01ml063.pok.ibm.com (d01ml063.pok.ibm.com [9.56.228.130])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m7PHIolZ029129
	for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 13:18:50 -0400
In-Reply-To: <1219532168.95246.ezmlm@lucene.apache.org>
References: <1219532168.95246.ezmlm@lucene.apache.org>
Subject: SpanQuery and FilteredQuery
X-KeepSent: 70E72B3F:078E4287-852574B0:005ECF10;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.0.1 HF105 April 10, 2008
Message-ID: <OF70E72B3F.078E4287-ON852574B0.005ECF10-852574B0.005EFD24@us.ibm.com>
From: Christopher M Collins <collinmc@us.ibm.com>
Date: Mon, 25 Aug 2008 13:18:50 -0400
X-MIMETrack: Serialize by Router on D01ML063/01/M/IBM(Release 8.0.1|February 07, 2008) at
 08/25/2008 13:18:50
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=0ABBFE23DFCD49808f9e8a93df938690918c0ABBFE23DFCD4980"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=0ABBFE23DFCD49808f9e8a93df938690918c0ABBFE23DFCD4980
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable


Hello,

Can anyone tell me if it's possible to apply a filter to a SpanQuery an=
d
still use query.getSpans(indexReader)?  I'm using getSpans to get back =
the
original positions in the text but I would like to filter the results
returned by getSpans.  I have a Filter I can apply if I just search wit=
h
the query, but I don't see a way to apply the filter and still use the
getSpans method.  I thought maybe FilteredQuery looked promising, but o=
f
course if I wrap my SpanQuery and Filter in a FilteredQuery, getSpans i=
s no
longer available.

Any suggestions? Thanks!

Chris
______________________________________________________________
Christopher Collins \ http://www.cs.utoronto.ca/~ccollins
Department of Computer Science \ University of Toronto
Collaborative User Experience Group \ IBM Research=

--0__=0ABBFE23DFCD49808f9e8a93df938690918c0ABBFE23DFCD4980--


From java-user-return-35670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 17:40:19 2008
Return-Path: <java-user-return-35670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29407 invoked from network); 25 Aug 2008 17:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 17:40:19 -0000
Received: (qmail 9460 invoked by uid 500); 25 Aug 2008 17:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9426 invoked by uid 500); 25 Aug 2008 17:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9415 invoked by uid 99); 25 Aug 2008 17:40:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 10:40:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Aug 2008 17:39:11 +0000
Received: (qmail 78866 invoked by uid 60001); 25 Aug 2008 17:38:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=CeAyoT4heHLh0DSm+T0u0cDmgr81Dgpto2YpT8/z1ICxlLgVabGvNR8zMR8/kAvxzkoSJ4eSInMjiIRtpMBysx0qjiNQhWUnRpLPJKK9MwepYAX+DbYXTAa8feS84+GFynk4H1wcKZGoJXxznE6xXeB8qCgabS3r+VgyERe9Ga0=;
X-YMail-OSG: GZh4EF0VM1lHkKQbkiL8yc6dvDyFtZH6fyx.5YsRmek4G3PgOTXCUIvznj0cM0h9tlPq.BvCeJINo65v7xmMEHG8L_UGXC.FhIZMw6mwEQqIFD0ZCxtIsnJ_YVnq5dUodxVsto9khLAXVrl9O1p7zo8-
Received: from [65.200.144.21] by web50309.mail.re2.yahoo.com via HTTP; Mon, 25 Aug 2008 10:38:40 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Mon, 25 Aug 2008 10:38:40 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: FilteredQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <283245.76503.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Heiko,=0AIt's most likely because that B case has a purely negative query. =
Perhaps you can combine it with MatchAllDocs query?=0A=0A =0AOtis=0A--=0ASe=
matext -- http://sematext.com/ -- Lucene - Solr - Nutch=0A=0A=0A=0A----- Or=
iginal Message ----=0A> From: Heiko <heiko.mueller@giata.de>=0A> To: java-u=
ser@lucene.apache.org=0A> Sent: Monday, August 25, 2008 11:29:22 AM=0A> Sub=
ject: FilteredQuery=0A> =0A> Hi All,=0A> =0A> i would like to use the Filte=
redQuery to filter my search results with=0A> the occurrence or absence of =
certain ids.=0A> =0A> Example A:=0A> query -> text:"albert einstein"=0A> fi=
lterQuery -> doctype:letter=0A> =0A> That's ok. I am getting the expected r=
esults. But i got no results, if=0A> i  filter with the absence of an id.=
=0A> =0A> Example B:=0A> query -> text:"albert einstein"=0A> filterQuery ->=
 NOT doctype:article=0A> =0A> However following concatenation of filterQuer=
y and query leads to the=0A> expected result.=0A> =0A> Example C:=0A> query=
 -> text:"albert einstein"=0A> filterQuery -> text:"albert einstein" NOT do=
ctype:article=0A> =0A> I am confused that Example B does not worked. It is =
bug?=0A> =0A> I am using Lucene 2.3.2 and the following code fragement:=0A>=
 =0A> Query query;=0A> Query filterQuery;=0A> ...=0A> Filter filter =3D new=
 CachingWrapperFilter(new=0A> QueryWrapperFilter(filterQuery));=0A> Filtere=
dQuery filteredQuery =3D new FilteredQuery(query, filter);=0A> Hits hits =
=3D searcher.search(filteredQuery);=0A> ...=0A> =0A> Thanks,=0A> Heiko M=FC=
ller=0A> =0A> =0A> --------------------------------------------------------=
-------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apac=
he.org=0A> For additional commands, e-mail: java-user-help@lucene.apache.or=
g=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 17:40:30 2008
Return-Path: <java-user-return-35671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29468 invoked from network); 25 Aug 2008 17:40:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 17:40:29 -0000
Received: (qmail 11048 invoked by uid 500); 25 Aug 2008 17:40:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11020 invoked by uid 500); 25 Aug 2008 17:40:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11009 invoked by uid 99); 25 Aug 2008 17:40:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 10:40:21 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 17:39:23 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2090037wfc.20
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 10:39:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HuGAFH933IeeqJLdLjwInlfW0n9iv/QK7cK9j/v92zk=;
        b=UFprMdeEcYkXEQMu1Nu4f/TBkpJJzOkx2pjHR4Fa4ewACsZ8i37NqGI/PkcU3xGhwT
         v8FOP0dpw+X5Zl5p0QJ6SZwt2e2iQQDpPfi4cm+QXp5QEpnZQ3RFaG6MvvEk+eXKClGj
         L6cAlLe7Kjy2c3UcIvve4BzGN75zkJkacC9r8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gCDr0NW7XoeUitNjYo34nx3rjiSpHOKilWTk/9yjyFHi9T0MfMp42Yl9RJZdKM4rR0
         s1gZVMdehN3qs8IypQKWfpUCPMI45dmCD9RLgcpAVCW1llvZjjziTByG5+DXZv7KyN18
         CTRIcsmXAQTA8vWM3QhF4gWzmMxDYxr7CMIn0=
Received: by 10.142.187.8 with SMTP id k8mr1621836wff.199.1219685993128;
        Mon, 25 Aug 2008 10:39:53 -0700 (PDT)
Received: by 10.142.193.16 with HTTP; Mon, 25 Aug 2008 10:39:53 -0700 (PDT)
Message-ID: <16f8407d0808251039y35a7ed26x393153c4f73fbb3b@mail.gmail.com>
Date: Mon, 25 Aug 2008 10:39:53 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Clarification about segments
In-Reply-To: <19120086.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44552_22653209.1219685993135"
References: <16f8407d0808221635l4d4967b0ra0f45383b4194c6d@mail.gmail.com>
	 <19120086.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44552_22653209.1219685993135
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

ok, thanks. I knew that the documents were buffered in memory until they
were flushed, but I thought that in memory, they were still separate
documents/segments until they were merged together at the appropriate time
(dependent on the mergeFactor).

Do you mean that when the IndexWriter flushes the documents in memory to the
disk, it will merge all the documents in that flush to one segment?

Thanks!
David

On Sat, Aug 23, 2008 at 2:40 AM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> Hi David,
>
> this is not true, please take a look to
> IndexWriter#setRAMBufferSizeMB
> and
> IndexWriter#setMaxBufferedDocs
>
> But you can produce 9 segments (each with only one document), if you call
> IndexWriter#flush
> or
> IndexWriter#commit
> after each addDocument
>
> so from my knowledge about lucene there is no difference between
> #flush
> and
> #optimize(getMergeFactor())
> (btw #optimize() is equal to optimize(1) ).
>
>
> Best regards
>  Karsten
>
> p.s. and yes, searching goes through every segment.
>
>
> David Lee-26 wrote:
> >
> > So from what I understand, is it true that if mergeFactor is 10, then
> when
> > I
> > index my first 9 documents, I have 9 separate segments, each containing 1
> > document? And when searching, it will search through every segment?
> >
> > Thanks!
> > David
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Clarification-about-segments-tp19117115p19120086.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44552_22653209.1219685993135--

From java-user-return-35672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 18:19:37 2008
Return-Path: <java-user-return-35672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63356 invoked from network); 25 Aug 2008 18:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 18:19:37 -0000
Received: (qmail 69202 invoked by uid 500); 25 Aug 2008 18:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69170 invoked by uid 500); 25 Aug 2008 18:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69159 invoked by uid 99); 25 Aug 2008 18:19:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 11:19:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 18:18:29 +0000
Received: from [212.100.48.190] (helo=dsl48-190.pool.bitel.net)
	by smtprelay02.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KXgeW-0001ZU-QB
	for java-user@lucene.apache.org; Mon, 25 Aug 2008 20:18:56 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: MultiPhrase search
Date: Mon, 25 Aug 2008 20:19:17 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com>
In-Reply-To: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808252019.18264@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Montag, 25. August 2008, Andre Rubin wrote:

>  I tried it out but with no luck (I think I did it wrong). In any
> case, is MultiPhraseQuery what I'm looking for? If it is, how should I
> use the MultiPhraseQuery class?

No, you won't need it. If you know that the field is not really tokenized 
(no matter whether by using UN_TOKENIZED or KeywordAnalyzer) you should 
create a TermQuery directly, without using the QueryParser. The 
QueryParser interprets AND, OR, and NOT, and a space is just a default 
for "OR", so using KeywordAnalyzer won't have the desired effect.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 20:21:46 2008
Return-Path: <java-user-return-35673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52739 invoked from network); 25 Aug 2008 20:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 20:21:45 -0000
Received: (qmail 60568 invoked by uid 500); 25 Aug 2008 20:21:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60437 invoked by uid 500); 25 Aug 2008 20:21:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60426 invoked by uid 99); 25 Aug 2008 20:21:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 13:21:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vybe3142@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 20:20:40 +0000
Received: by py-out-1112.google.com with SMTP id z74so1187947pyg.9
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 13:21:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Fw19vUbnbnPyD2y8zvCMYJKqkids8E17Q3ndJlVR46U=;
        b=ZSxioISl3Cy1/xtRV5DL7FAf6Dh2bmCI39RLaVOwEojDvmAhEw6NJeojjoR5bXeWlL
         PpnfMIi2S4Y3Nb61nea8WOixX33q0dae9ARzdweIiEDbEwn0XqTOF5cIVJCOnvrNQryU
         dH7t3jXZvLpfS++qSxwCp9Wdz4iVkUnKoPGHU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=rNEnmeI1oouhlLBpgpeBO2vMxH9vVTgaSuK6h84bWAXnyGLj9O+O3JPfydQ2BJbYUk
         FQyZLAGBy5f+NpJwu20iKIfdbUipcXTpgiDrDMJocs0S8nhyy9qxeKrAR8e38QEO6fh+
         VGwrqSb1RrHAsYfx9dFrt2Gw++5N7ZaX7/23E=
Received: by 10.65.158.19 with SMTP id k19mr9641180qbo.94.1219695669748;
        Mon, 25 Aug 2008 13:21:09 -0700 (PDT)
Received: by 10.64.153.20 with HTTP; Mon, 25 Aug 2008 13:21:09 -0700 (PDT)
Message-ID: <8d2a9c130808251321y23880d47v19a1504dffaea9a2@mail.gmail.com>
Date: Mon, 25 Aug 2008 15:21:09 -0500
From: "vinay b" <vybe3142@gmail.com>
To: java-user@lucene.apache.org
Subject: Question: Lucene MoreLikeThis score values all the same:
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48527_8688375.1219695669760"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48527_8688375.1219695669760
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As a test, I tried to compare a few documents on various topics (a few on
linux, and another on the U.S. constitution) to a source document on linux
using a query formed by MoreLikeThis.

1. Looking at the hits, they have the same score. I'd expect them to be
different, based on their relevance to the source document. Any ideas?
2. I can't figure out how the search picks up the article on the US
constitution as similar. Any hints? I can tweak the search a bit to limit
this by increasing the min. term frequency via setMinTermFreq() but given
that the interesting terms are so vastly different, I wouldn't have thought
this necessary.

This is my output. I can paste my source code in too if needed.

Thanks

=================================================================



read file c:/tmp/similarity2/linux.txt

read file c:/tmp/similarity2/linuxkernel.txt

read file c:/tmp/similarity2/linuxtoo.txt

read file c:/tmp/similarity2/constitution.txt
index size 4
Field option:title
Field option:name
MLT parms:
    maxQueryTerms  : 25
    minWordLen     : 3
    maxWordLen     : 0
    fieldNames     : title
    boost          : false
    minTermFreq    : 5
    minDocFreq     : 1

query formed for source doc linux.txt is title:linux title:can title:want
title:system title:operating title:our title:information title:you
title:linus title:released title:found title:kernel title:use title:its
title:about title:page title:more
Interesting terms for c:/tmp/similarity2/linux.txt :linux can want system
operating our information you linus released found kernel use its about page
more
Interesting terms for c:/tmp/similarity2/linuxtoo.txt :linux you free
software can like your operating system journal other systems development
commercial productivity aug-22-08 many web even which video network popular
platforms source
Interesting terms for c:/tmp/similarity2/linuxkernel.txt :linux kernel
version torvalds support edit code system stable gpl retrieved linus sco
released changes series drivers also only number operating were binary new
has
Interesting terms for c:/tmp/similarity2/constitution.txt :shall president
states united votes senate vice office electors congress law person them
have may from which number time all state other


number of matches : 4
1.  [c:/tmp/similarity2/linux.txt]  score: 0.46413344
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< why the same score
2.  [c:/tmp/similarity2/linuxkernel.txt]  score: 0.46413344
3.  [c:/tmp/similarity2/linuxtoo.txt]  score: 0.46413344
4.  [c:/tmp/similarity2/constitution.txt]  score: 0.46413344
<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< why ???

------=_Part_48527_8688375.1219695669760--

From java-user-return-35674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 20:58:39 2008
Return-Path: <java-user-return-35674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75633 invoked from network); 25 Aug 2008 20:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 20:58:39 -0000
Received: (qmail 10169 invoked by uid 500); 25 Aug 2008 20:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10132 invoked by uid 500); 25 Aug 2008 20:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10121 invoked by uid 99); 25 Aug 2008 20:58:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 13:58:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of german.kondolf@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 20:57:32 +0000
Received: by yw-out-2324.google.com with SMTP id 3so115314ywj.5
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 13:58:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=16QSO4ZV/jjW6+5jz7gBEVVzvOkbnTctR3l1eizAdTY=;
        b=bjUc1eWfBr0w/jkZHa2Y6ZtUnpzaDhfPgZU29AlJjqpHQIAjwRJI87LVu7lRA17djW
         hOVzafSOArRvGXbQwQKFzbshe3OpIdSmDNMvE/zgB8GUBop9Av0WDjELTc/njI1exDG8
         hfFy1Ew+SlTg3XKpYrD4qE12LyJIjvswCZGx4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OmIrh/XyLy1QN92yfhP9iGNENLCbfWTFqkQq6KnClDifTY/pNnXlG5Q1Yk2ioNKvOV
         1Khw4aBXBMyUglawNOcrsrmk3pCQjNm/Sh2X5iFUnXaWtCxzzgdvGOLPqkqO4gc10sHh
         FsOb3Q56QZYJDZzSEYkil+kGc6yQ1AlZtaBaU=
Received: by 10.103.52.13 with SMTP id e13mr3193669muk.80.1219697880456;
        Mon, 25 Aug 2008 13:58:00 -0700 (PDT)
Received: by 10.103.138.14 with HTTP; Mon, 25 Aug 2008 13:58:00 -0700 (PDT)
Message-ID: <76df56980808251358nd31aefdvc7541471f59cd978@mail.gmail.com>
Date: Mon, 25 Aug 2008 17:58:00 -0300
From: "German Kondolf" <german.kondolf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FilteredQuery
In-Reply-To: <283245.76503.qm@web50309.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122975_31413443.1219697880448"
References: <283245.76503.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122975_31413443.1219697880448
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Exactly as Otis sais, you should use MatchAllDocs as query, but it has a
drawback in performance, it checks every single document deletion state,
I've solved the issue by making my own EnhancedMatchAllDocs query that is
optimized to do not check this document state.

Perhaps the SegmentReader should be refactorized in some other way and not
be synchronized:

  public synchronized boolean isDeleted(int n) {
    return (deletedDocs !=3D null && deletedDocs.get(n));
  }

With high level of concurrency this is an issue, there is a lot of
context-switching because of this line of code...
I didn't try an optimal solution, so I created my own EnhancedMatchAllDocs.

Just copied the original class and replaced this call:

    public boolean next() {
      while (id < maxId) {
        id++;
        if (!reader.isDeleted(id)) {
          return true;
        }
      }
      return false;
    }

For this simplified call:

    public boolean next() {
        return (id++ < maxId);
    }

This change doesn't validate deleted documents, in my implementation it was
not a problem, so, it's possible that this solution doesn't work with any
other implementation.
Maybe it wouldn't be a problem if you flush your index often...

GeR

On Mon, Aug 25, 2008 at 2:38 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Heiko,
> It's most likely because that B case has a purely negative query. Perhaps
> you can combine it with MatchAllDocs query?
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
> > From: Heiko <heiko.mueller@giata.de>
> > To: java-user@lucene.apache.org
> > Sent: Monday, August 25, 2008 11:29:22 AM
> > Subject: FilteredQuery
> >
> > Hi All,
> >
> > i would like to use the FilteredQuery to filter my search results with
> > the occurrence or absence of certain ids.
> >
> > Example A:
> > query -> text:"albert einstein"
> > filterQuery -> doctype:letter
> >
> > That's ok. I am getting the expected results. But i got no results, if
> > i  filter with the absence of an id.
> >
> > Example B:
> > query -> text:"albert einstein"
> > filterQuery -> NOT doctype:article
> >
> > However following concatenation of filterQuery and query leads to the
> > expected result.
> >
> > Example C:
> > query -> text:"albert einstein"
> > filterQuery -> text:"albert einstein" NOT doctype:article
> >
> > I am confused that Example B does not worked. It is bug?
> >
> > I am using Lucene 2.3.2 and the following code fragement:
> >
> > Query query;
> > Query filterQuery;
> > ...
> > Filter filter =3D new CachingWrapperFilter(new
> > QueryWrapperFilter(filterQuery));
> > FilteredQuery filteredQuery =3D new FilteredQuery(query, filter);
> > Hits hits =3D searcher.search(filteredQuery);
> > ...
> >
> > Thanks,
> > Heiko M=FCller
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_122975_31413443.1219697880448--

From java-user-return-35675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 21:09:17 2008
Return-Path: <java-user-return-35675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80632 invoked from network); 25 Aug 2008 21:09:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 21:09:17 -0000
Received: (qmail 29428 invoked by uid 500); 25 Aug 2008 21:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29408 invoked by uid 500); 25 Aug 2008 21:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29397 invoked by uid 99); 25 Aug 2008 21:09:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 14:09:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Aug 2008 21:08:08 +0000
Received: (qmail 26030 invoked by uid 60001); 25 Aug 2008 21:07:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=oLrJEyRbQILX5CkE2D7ulOWAK93MqusUorKaU7z8EqSW/a/L9KkzNU475ks3+BLqZT+uR55wRG14Kr5gQFvf+NvYDZBnPJGhb6SAza4kY6H6KV5UgdvhbJSTp/ojfE7jCHd6KIAV2svdpVpwUeXs0GGEgy/TmS+Cgmj0FsHmyhs=;
X-YMail-OSG: t.vAGW4VM1lf2o43PDXRjkX6OGH2gVEYhhU7ZSnmx6ZYNWkwvk2m9qd1TeiTftx2drxcmqGdoTjeR_tNsN0DP08CrIzwwjOZnwbFYwvM7rGek6VcVv2XDM0z2EmTopNgI.6q_atwU_OoYw.XKtocU1o-
Received: from [167.206.188.3] by web50302.mail.re2.yahoo.com via HTTP; Mon, 25 Aug 2008 14:07:36 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Mon, 25 Aug 2008 14:07:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: FilteredQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <531038.25989.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike just committed a read-only IndexReader recently.  If you pull Lucene o=
ut of the svn trunk, you'll be able to make use of that.  The r-o IR doesn'=
t have a synchronized isDeleted, I believe.=0A=0AOtis=0A--=0ASematext -- ht=
tp://sematext.com/ -- Lucene - Solr - Nutch=0A=0A=0A=0A----- Original Messa=
ge ----=0A> From: German Kondolf <german.kondolf@gmail.com>=0A> To: java-us=
er@lucene.apache.org=0A> Sent: Monday, August 25, 2008 4:58:00 PM=0A> Subje=
ct: Re: FilteredQuery=0A> =0A> Exactly as Otis sais, you should use MatchAl=
lDocs as query, but it has a=0A> drawback in performance, it checks every s=
ingle document deletion state,=0A> I've solved the issue by making my own E=
nhancedMatchAllDocs query that is=0A> optimized to do not check this docume=
nt state.=0A> =0A> Perhaps the SegmentReader should be refactorized in some=
 other way and not=0A> be synchronized:=0A> =0A>   public synchronized bool=
ean isDeleted(int n) {=0A>     return (deletedDocs !=3D null && deletedDocs=
.get(n));=0A>   }=0A> =0A> With high level of concurrency this is an issue,=
 there is a lot of=0A> context-switching because of this line of code...=0A=
> I didn't try an optimal solution, so I created my own EnhancedMatchAllDoc=
s.=0A> =0A> Just copied the original class and replaced this call:=0A> =0A>=
     public boolean next() {=0A>       while (id < maxId) {=0A>         id+=
+;=0A>         if (!reader.isDeleted(id)) {=0A>           return true;=0A> =
        }=0A>       }=0A>       return false;=0A>     }=0A> =0A> For this s=
implified call:=0A> =0A>     public boolean next() {=0A>         return (id=
++ < maxId);=0A>     }=0A> =0A> This change doesn't validate deleted docume=
nts, in my implementation it was=0A> not a problem, so, it's possible that =
this solution doesn't work with any=0A> other implementation.=0A> Maybe it =
wouldn't be a problem if you flush your index often...=0A> =0A> GeR=0A> =0A=
> On Mon, Aug 25, 2008 at 2:38 PM, Otis Gospodnetic <=0A> otis_gospodnetic@=
yahoo.com> wrote:=0A> =0A> > Heiko,=0A> > It's most likely because that B c=
ase has a purely negative query. Perhaps=0A> > you can combine it with Matc=
hAllDocs query?=0A> >=0A> >=0A> > Otis=0A> > --=0A> > Sematext -- http://se=
matext.com/ -- Lucene - Solr - Nutch=0A> >=0A> >=0A> >=0A> > ----- Original=
 Message ----=0A> > > From: Heiko =0A> > > To: java-user@lucene.apache.org=
=0A> > > Sent: Monday, August 25, 2008 11:29:22 AM=0A> > > Subject: Filtere=
dQuery=0A> > >=0A> > > Hi All,=0A> > >=0A> > > i would like to use the Filt=
eredQuery to filter my search results with=0A> > > the occurrence or absenc=
e of certain ids.=0A> > >=0A> > > Example A:=0A> > > query -> text:"albert =
einstein"=0A> > > filterQuery -> doctype:letter=0A> > >=0A> > > That's ok. =
I am getting the expected results. But i got no results, if=0A> > > i  filt=
er with the absence of an id.=0A> > >=0A> > > Example B:=0A> > > query -> t=
ext:"albert einstein"=0A> > > filterQuery -> NOT doctype:article=0A> > >=0A=
> > > However following concatenation of filterQuery and query leads to the=
=0A> > > expected result.=0A> > >=0A> > > Example C:=0A> > > query -> text:=
"albert einstein"=0A> > > filterQuery -> text:"albert einstein" NOT doctype=
:article=0A> > >=0A> > > I am confused that Example B does not worked. It i=
s bug?=0A> > >=0A> > > I am using Lucene 2.3.2 and the following code frage=
ment:=0A> > >=0A> > > Query query;=0A> > > Query filterQuery;=0A> > > ...=
=0A> > > Filter filter =3D new CachingWrapperFilter(new=0A> > > QueryWrappe=
rFilter(filterQuery));=0A> > > FilteredQuery filteredQuery =3D new Filtered=
Query(query, filter);=0A> > > Hits hits =3D searcher.search(filteredQuery);=
=0A> > > ...=0A> > >=0A> > > Thanks,=0A> > > Heiko M=FCller=0A> > >=0A> > >=
=0A> > > ------------------------------------------------------------------=
---=0A> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A> > > For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> >=0A> >=0A> > --------------------------------------------------------=
-------------=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.ap=
ache.org=0A> > For additional commands, e-mail: java-user-help@lucene.apach=
e.org=0A> >=0A> >=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 23:30:16 2008
Return-Path: <java-user-return-35676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63281 invoked from network); 25 Aug 2008 23:30:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 23:30:15 -0000
Received: (qmail 98409 invoked by uid 500); 25 Aug 2008 23:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98379 invoked by uid 500); 25 Aug 2008 23:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98368 invoked by uid 99); 25 Aug 2008 23:30:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 16:30:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 23:29:10 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How do TeeTokenizer and SinkTokenizer work?
Date: Mon, 25 Aug 2008 19:29:37 -0400
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B4302ED0453@mail3.basistech.net>
In-Reply-To: <F39DEAE7-DE00-4C9F-8A79-2DED03B605BE@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How do TeeTokenizer and SinkTokenizer work?
Thread-Index: AckEoHq5lLJs/y8yRj6v/IpD9EedPwCZ1A/g
References: <E95FD77F0171D14DA1EEE0A785E92B4302ED0367@mail3.basistech.net> <F39DEAE7-DE00-4C9F-8A79-2DED03B605BE@apache.org>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you, Grant and (Koji) Sekiguchi-san.


> but I don't=20
> > understand how the input from reader1 and reader2 are mixed=20
> together.
> > Will sink1 first reaturn the reader1 text, and reader2?
>=20
> It depends on the order the fields are added.  If source1 is=20
> used first, then reader1 will be first.

This puzzles me.  Is this really useful if how SinkTokenizer
and TeeTokenizer behave depends on how they are read?
I've read the source code of these Tokenizers but that
didn't solve my question.

This is an excerpt from Sekiguchi-san's code sample:

	Analyzer analyzer =3D new Analyzer() {

		public TokenStream tokenStream(String field, Reader in) {
				return new TeeTokenFilter(=20
					new TeeTokenFilter( new SenTokenizer( in, SEN_CONF ),=20
								sinkPerson ), sinkOrg );
		}
	};

	TokenFilter exPerson =3D new EntityExtractor( sinkPerson, T_PERSON );
	TokenFilter exOrg =3D new EntityExtractor( sinkOrg, T_ORG );
	IndexWriter writer =3D new IndexWriter( INDEX, analyzer, true );
	Document doc =3D new Document();
	doc.add( new Field( F_BODY, CONTENT, Store.YES, Index.TOKENIZED ) );
	doc.add( new Field( F_PERSON, exPerson ) );
	doc.add( new Field( F_ORG, exOrg ) );
	writer.addDocument( doc );

It seems that the code works as expected only if the token stream from
the analyzer on CONTENT is read completely, then the token stream from
sinkPerson is read compeltely, followed by that from sinkOrg.

Does Lucene's core gurantees that a field's token stream is read =
completely
before the next field's token stream is read, in the order the Field's =
are add()'ed?

- Kuro

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 25 23:44:45 2008
Return-Path: <java-user-return-35677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72393 invoked from network); 25 Aug 2008 23:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2008 23:44:45 -0000
Received: (qmail 11648 invoked by uid 500); 25 Aug 2008 23:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11619 invoked by uid 500); 25 Aug 2008 23:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11608 invoked by uid 99); 25 Aug 2008 23:44:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 16:44:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 23:43:38 +0000
Received: by yx-out-2324.google.com with SMTP id 3so905036yxj.5
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 16:44:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=nGTACVmH97cZjSrsxX/6dm9wb5L56JoUOPMEu9RMRZk=;
        b=f1UwRTTKg/2ajgbENdYruFrva+7KHyuyTGionj3yPCgL8mas1tTxM5QPGscL7mVZ9k
         MV1nUFApD8DjE/RugUzze8SaY5a1BRpty0gmfw/gg/b6z4faQcyELU499DiH9Rl62Q8D
         pK708iNIOH7Hu42rQ1L89lH6wy+rbqu6Ra5zo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=nqT+NcYzmeWXnaurZx5o3lCCS7wFRq3OtRM/dMr70O/xFruPd71NLj2wUXNa5i9UhD
         PtXVlS9dSRlc8E0P4WWuKQG+IH0eCPZSCd+iz7qm82TrJrNI2IekftO2Qqxc+uxq6tmE
         yi/FoCYShlq+qyAgBCTtpqoG8qmux3g7xTMik=
Received: by 10.150.122.13 with SMTP id u13mr8072413ybc.63.1219707847617;
        Mon, 25 Aug 2008 16:44:07 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Mon, 25 Aug 2008 16:44:07 -0700 (PDT)
Message-ID: <efd1bd310808251644r991adccyf02577317caf1b9c@mail.gmail.com>
Date: Mon, 25 Aug 2008 18:44:07 -0500
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiPhrase search
In-Reply-To: <200808252019.18264@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com>
	 <200808252019.18264@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

For some reason, the TermQuery is not returning any results, even when
querying for a single word (like on*).

query = new TermQuery(new Term(LABEL_FIELD, searchString));

On 8/25/08, Daniel Naber <lucenelist2007@danielnaber.de> wrote:
> On Montag, 25. August 2008, Andre Rubin wrote:
>
>>  I tried it out but with no luck (I think I did it wrong). In any
>> case, is MultiPhraseQuery what I'm looking for? If it is, how should I
>> use the MultiPhraseQuery class?
>
> No, you won't need it. If you know that the field is not really tokenized
> (no matter whether by using UN_TOKENIZED or KeywordAnalyzer) you should
> create a TermQuery directly, without using the QueryParser. The
> QueryParser interprets AND, OR, and NOT, and a space is just a default
> for "OR", so using KeywordAnalyzer won't have the desired effect.
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 02:42:43 2008
Return-Path: <java-user-return-35678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14959 invoked from network); 26 Aug 2008 02:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 02:42:42 -0000
Received: (qmail 50391 invoked by uid 500); 26 Aug 2008 02:42:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49688 invoked by uid 500); 26 Aug 2008 02:42:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49677 invoked by uid 99); 26 Aug 2008 02:42:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 19:42:33 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 02:41:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KXoVR-000578-8K
	for java-user@lucene.apache.org; Mon, 25 Aug 2008 19:42:05 -0700
Message-ID: <19154961.post@talk.nabble.com>
Date: Mon, 25 Aug 2008 19:42:05 -0700 (PDT)
From: Beijing2008 <aljcn@126.com>
To: java-user@lucene.apache.org
Subject: How to get all terms with a special field and document after
 indexed
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: aljcn@126.com
X-Virus-Checked: Checked by ClamAV on apache.org


When a document add to index, fields data will split to many terms and saved
into index. Now, How can I get these terms with special field and special
document from index.


-- 
View this message in context: http://www.nabble.com/How-to-get-all-terms-with-a-special-field-and-document-after-indexed-tp19154961p19154961.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 02:50:53 2008
Return-Path: <java-user-return-35679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19427 invoked from network); 26 Aug 2008 02:50:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 02:50:53 -0000
Received: (qmail 55369 invoked by uid 500); 26 Aug 2008 02:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54827 invoked by uid 500); 26 Aug 2008 02:50:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54811 invoked by uid 99); 26 Aug 2008 02:50:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 19:50:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 02:49:48 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 361174ED8CA
	for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 12:49:52 +1000 (EST)
Message-ID: <48B36F6C.8010500@nuix.com>
Date: Tue, 26 Aug 2008 12:50:20 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to search
References: <19142469.post@talk.nabble.com> <867513fe0808250458v37b6b7f6s9d189a295b787e09@mail.gmail.com> <19142634.post@talk.nabble.com>
In-Reply-To: <19142634.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Venkata Subbarayudu wrote:
> Hi Anshum Gupta,
>     Thanks for your replay, but when I gone through querySyntax-Document for
> Lucene, I read that Lucene does not allow queries like "*findthis" i.e. I
> think it doesnot allow wildcards in the beginning of the query.

It has supported this for some time now, just not by default.

Daniel

-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 03:02:46 2008
Return-Path: <java-user-return-35680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29619 invoked from network); 26 Aug 2008 03:02:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 03:02:45 -0000
Received: (qmail 65942 invoked by uid 500); 26 Aug 2008 03:02:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65901 invoked by uid 500); 26 Aug 2008 03:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65890 invoked by uid 99); 26 Aug 2008 03:02:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 20:02:37 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nttstar@gmail.com designates 209.85.142.189 as permitted sender)
Received: from [209.85.142.189] (HELO ti-out-0910.google.com) (209.85.142.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 03:01:39 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1235214tic.11
        for <java-user@lucene.apache.org>; Mon, 25 Aug 2008 20:01:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=0KWd9AT+HJNLzpAcsrc6nabGJrD24P7WmuSjMhMV7oE=;
        b=V/iRyu60X96vtezczFz5E+wjsPP9klhOgQzUgEQKo8K3VaRwo1928wvr63LLd6X7i9
         Z7VYZPtusnFPSDpNUyreMtlsWI5xV9ntbSPwBxeY8Q/9DMqciCavQ7mKRMWMWmZ3Ox6J
         R1xVV8mo8pbzpdhKk+B2lV+FHbqcZMi1uokgE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=SkcfUEsfZFpSS5pi/Y5xdfts0o/QSNx6pXrC+1LNE65hUsPM8s5R5dhTgHmKjJ5CaQ
         B1DSKESSIt/tuyhl/8vTca8uheyjLPX6mBJIrgipGxPYI1pCZxnjx/cUVRzFVBo0KHjK
         Oqyv6hjvZXiuHy+T1ipDo++58haHI4mkY3bNs=
Received: by 10.110.92.8 with SMTP id p8mr5923506tib.9.1219719711028;
        Mon, 25 Aug 2008 20:01:51 -0700 (PDT)
Received: by 10.110.16.20 with HTTP; Mon, 25 Aug 2008 20:01:50 -0700 (PDT)
Message-ID: <11e088b10808252001m24ab3f40r1e4bf5004fdb3195@mail.gmail.com>
Date: Tue, 26 Aug 2008 11:01:50 +0800
From: Jarvis.Guo <nttstar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get all terms with a special field and document after indexed
In-Reply-To: <19154961.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1857_22078226.1219719710985"
References: <19154961.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1857_22078226.1219719710985
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I like your nick name.

For the question,  I think you must iterate all the terms in index with
TermEnum and see if term will satisfy any of your concerns.

Best

2008/8/26 Beijing2008 <aljcn@126.com>

>
> When a document add to index, fields data will split to many terms and
> saved
> into index. Now, How can I get these terms with special field and special
> document from index.
>
>
> --
> View this message in context:
> http://www.nabble.com/How-to-get-all-terms-with-a-special-field-and-document-after-indexed-tp19154961p19154961.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1857_22078226.1219719710985--

From java-user-return-35681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 03:51:30 2008
Return-Path: <java-user-return-35681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55536 invoked from network); 26 Aug 2008 03:51:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 03:51:30 -0000
Received: (qmail 91217 invoked by uid 500); 26 Aug 2008 03:51:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91193 invoked by uid 500); 26 Aug 2008 03:51:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91179 invoked by uid 99); 26 Aug 2008 03:51:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Aug 2008 20:51:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 03:50:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KXpa0-0007El-Hu
	for java-user@lucene.apache.org; Mon, 25 Aug 2008 20:50:52 -0700
Message-ID: <19155377.post@talk.nabble.com>
Date: Mon, 25 Aug 2008 20:50:52 -0700 (PDT)
From: Beijing2008 <aljcn@126.com>
To: java-user@lucene.apache.org
Subject: Re: How to get all terms with a special field and document after
 indexed
In-Reply-To: <11e088b10808252001m24ab3f40r1e4bf5004fdb3195@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: aljcn@126.com
References: <19154961.post@talk.nabble.com> <11e088b10808252001m24ab3f40r1e4bf5004fdb3195@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Very Thanks. But I'm sorry I can not catch what's your meaning.

A sentence through Analyzer.TokenStream method and will get a TokenStream
result. this TokenStream will save into index with someway, now I'm just to
get all token for this input sentence from index.

my english is very pool, maybe my artical can not easy to understand, so
sorry...


=E8=BF=87=E4=BD=B3 wrote:
>=20
> I like your nick name.
>=20
> For the question,  I think you must iterate all the terms in index with
> TermEnum and see if term will satisfy any of your concerns.
>=20
> Best
>=20
> 2008/8/26 Beijing2008 <aljcn@126.com>
>=20
>>
>> When a document add to index, fields data will split to many terms and
>> saved
>> into index. Now, How can I get these terms with special field and specia=
l
>> document from index.
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-get-all-terms-with-a-special-field-and-docu=
ment-after-indexed-tp19154961p19154961.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

--=20
View this message in context: http://www.nabble.com/How-to-get-all-terms-wi=
th-a-special-field-and-document-after-indexed-tp19154961p19155377.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 07:18:57 2008
Return-Path: <java-user-return-35682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69480 invoked from network); 26 Aug 2008 07:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 07:18:57 -0000
Received: (qmail 68174 invoked by uid 500); 26 Aug 2008 07:18:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68147 invoked by uid 500); 26 Aug 2008 07:18:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68136 invoked by uid 99); 26 Aug 2008 07:18:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 00:18:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 07:17:51 +0000
Received: from [192.168.3.128] (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id C2A4E1631E8E
	for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 02:17:50 -0500 (CDT)
Message-ID: <48B3AE1C.7050209@atlassian.com>
Date: Tue, 26 Aug 2008 17:17:48 +1000
From: Mark Lassau <mlassau@atlassian.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Upgrading from v2.2.0 to v2.3.2
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am a developer on the JIRA Issue tracker, and we are considering 
upgrading our Lucene version from v2.2.0 to v2.3.2.
I have been charged with doing the risk analysis, and project work.

I have read the change lists, and the bugs reported on the Lucene Issue 
Tracker (JIRA of course ;), and some of the archived messages on the 
Lucene lists.
 From this I would conclude that Lucene v2.3.2 has many performance 
improvements as well as some other compelling enhancements and bug fixes.
However there also appear to be a number of issues introduced in v2.3.x, 
not all of which are fixed in v2.3.2
These include:
* LUCENE-1335  Correctly handle concurrent calls to addIndexes, 
optimize, commit
I assume that if the application code doesn't make concurrent calls to 
Lucene objects, or synchronises correctly then this will be OK.
* LUCENE-1175 occasional MergeException while indexing
(can occur under load)
This bug seems to be RAMDirectory-specific, and it is not clear whether 
it was released or not.
Can anyone confirm this?
* There seem to have been some issues with using autoCommit(false).
Are these all fixed in v2.3.2?
Would it be recommended to use autoCommit(true) to be extra safe?

In addition is the following trap for young players:
* LUCENE-1282 Sun hotspot compiler bug in 1.6.0_04/05 affects Lucene
This is a bug in Sun JDK 6. Fixed in JDK 6 Update 10 (b28).
The application developer needs to take steps to ensure that a broken 
Sun JDK 6 is not used.

I would really appreciate any comments on the overall stability of 
v2.3.2 compared to v2.2.0, as well as any pointers about any pitfalls to 
look out for on upgrade.
For instance, although the message signatures of the API may be 
backwardly compatible, it could be that some behaviour has changed in a 
significant way.

Thanks for your time,
Mark Lassau.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 07:19:38 2008
Return-Path: <java-user-return-35683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69769 invoked from network); 26 Aug 2008 07:19:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 07:19:38 -0000
Received: (qmail 69912 invoked by uid 500); 26 Aug 2008 07:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69879 invoked by uid 500); 26 Aug 2008 07:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69863 invoked by uid 99); 26 Aug 2008 07:19:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 00:19:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 07:18:31 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7Q7J0sZ019589
	for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 02:19:00 -0500
Received: (qmail 7813 invoked by uid 0); 26 Aug 2008 02:19:00 -0500
Date: 26 Aug 2008 02:19:00 -0500
Message-ID: <20080826071900.7812.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Upgrading from v2.2.0 to v2.3.2
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 266149461 - 674f56a4bf6e
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=266149461&m=674f56a4bf6e&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=266149461&m=674f56a4bf6e&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=266149461&m=674f56a4bf6e&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 07:20:18 2008
Return-Path: <java-user-return-35684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70152 invoked from network); 26 Aug 2008 07:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 07:20:18 -0000
Received: (qmail 72893 invoked by uid 500); 26 Aug 2008 07:20:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72863 invoked by uid 500); 26 Aug 2008 07:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72852 invoked by uid 99); 26 Aug 2008 07:20:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 00:20:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 07:19:11 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7Q7Jeql002244
	for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 02:19:40 -0500
Received: (qmail 8623 invoked by uid 0); 26 Aug 2008 02:19:40 -0500
Date: 26 Aug 2008 02:19:40 -0500
Message-ID: <20080826071940.8622.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Upgrading from v2.2.0 to v2.3.2
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 266149571 - 34fe803af3a7
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=266149571&m=34fe803af3a7&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=266149571&m=34fe803af3a7&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=266149571&m=34fe803af3a7&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 07:56:50 2008
Return-Path: <java-user-return-35685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90081 invoked from network); 26 Aug 2008 07:56:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 07:56:49 -0000
Received: (qmail 22480 invoked by uid 500); 26 Aug 2008 07:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22447 invoked by uid 500); 26 Aug 2008 07:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22436 invoked by uid 99); 26 Aug 2008 07:56:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 00:56:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 07:55:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KXtPR-0006zO-Nk
	for java-user@lucene.apache.org; Tue, 26 Aug 2008 00:56:13 -0700
Message-ID: <19157027.post@talk.nabble.com>
Date: Tue, 26 Aug 2008 00:56:13 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Deleted document terms
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I just discovered some strange behaviour with deleted documents.  I do a
search for documents with a certain query and delete one using
IndexWriter.deleteDocuments(Term) using a key for the term.  Then I repeat
the search and the document is still there because I use a custom
HitCollector which does not check IndexReader.isDeleted(int).  That is all
expected.  

But when I try to show the deleted document by searching by key using the
same term it was deleted with, it is not found.  So it seems that the term
(id:MYKEY) is removed from the index.

So I was surprised that the term for the id was removed but not the other
terms for document.

But I guess this makes sense and I just need to check
IndexReader.isDeleted()

Does this all sound like correct behaviour?

Thanks,

John
-- 
View this message in context: http://www.nabble.com/Deleted-document-terms-tp19157027p19157027.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 08:27:40 2008
Return-Path: <java-user-return-35686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1543 invoked from network); 26 Aug 2008 08:27:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 08:27:40 -0000
Received: (qmail 45421 invoked by uid 500); 26 Aug 2008 08:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45228 invoked by uid 500); 26 Aug 2008 08:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45217 invoked by uid 99); 26 Aug 2008 08:27:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 01:27:31 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 08:26:31 +0000
Received: by an-out-0708.google.com with SMTP id c37so1031337anc.49
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 01:26:57 -0700 (PDT)
Received: by 10.100.210.9 with SMTP id i9mr5069831ang.9.1219739217709;
        Tue, 26 Aug 2008 01:26:57 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id b19sm8373866ana.19.2008.08.26.01.26.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 01:26:57 -0700 (PDT)
Message-Id: <47CEB539-AC65-4F14-B5C0-E2C097AFD863@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19155377.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How to get all terms with a special field and document after indexed
Date: Tue, 26 Aug 2008 04:26:55 -0400
References: <19154961.post@talk.nabble.com> <11e088b10808252001m24ab3f40r1e4bf5004fdb3195@mail.gmail.com> <19155377.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It sounds like TermVectors may apply here?

The TermVectors for a doc are like a miniature inverted index just for =20=

that one document.  It lets you retrieve all terms and their =20
frequencies, plus optionally offset and positions information for each =20=

term occurrence.

Mike

Beijing2008 wrote:

>
> Very Thanks. But I'm sorry I can not catch what's your meaning.
>
> A sentence through Analyzer.TokenStream method and will get a =20
> TokenStream
> result. this TokenStream will save into index with someway, now I'm =20=

> just to
> get all token for this input sentence from index.
>
> my english is very pool, maybe my artical can not easy to =20
> understand, so
> sorry...
>
>
> =E8=BF=87=E4=BD=B3 wrote:
>>
>> I like your nick name.
>>
>> For the question,  I think you must iterate all the terms in index =20=

>> with
>> TermEnum and see if term will satisfy any of your concerns.
>>
>> Best
>>
>> 2008/8/26 Beijing2008 <aljcn@126.com>
>>
>>>
>>> When a document add to index, fields data will split to many terms =20=

>>> and
>>> saved
>>> into index. Now, How can I get these terms with special field and =20=

>>> special
>>> document from index.
>>>
>>>
>>> --
>>> View this message in context:
>>> =
http://www.nabble.com/How-to-get-all-terms-with-a-special-field-and-docume=
nt-after-indexed-tp19154961p19154961.html
>>> Sent from the Lucene - Java Users mailing list archive at =20
>>> Nabble.com.
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
> --=20
> View this message in context: =
http://www.nabble.com/How-to-get-all-terms-with-a-special-field-and-docume=
nt-after-indexed-tp19154961p19155377.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 08:40:04 2008
Return-Path: <java-user-return-35687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9072 invoked from network); 26 Aug 2008 08:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 08:40:04 -0000
Received: (qmail 65640 invoked by uid 500); 26 Aug 2008 08:39:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65608 invoked by uid 500); 26 Aug 2008 08:39:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65597 invoked by uid 99); 26 Aug 2008 08:39:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 01:39:56 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 08:38:57 +0000
Received: by an-out-0708.google.com with SMTP id c37so1031901anc.49
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 01:39:09 -0700 (PDT)
Received: by 10.100.13.2 with SMTP id 2mr5055279anm.46.1219739948909;
        Tue, 26 Aug 2008 01:39:08 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 32sm9314886wri.0.2008.08.26.01.39.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 01:39:08 -0700 (PDT)
Message-Id: <3827D1E9-A242-484B-8816-377FAF639DA5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <16f8407d0808251039y35a7ed26x393153c4f73fbb3b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Clarification about segments
Date: Tue, 26 Aug 2008 04:39:06 -0400
References: <16f8407d0808221635l4d4967b0ra0f45383b4194c6d@mail.gmail.com> <19120086.post@talk.nabble.com> <16f8407d0808251039y35a7ed26x393153c4f73fbb3b@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Before 2.3, each doc was in fact a separate segment in memory, and  
then these segments were merged together to flush a single segment in  
the Directory.

As of 2.3, IndexWriter now writes directly into RAM the data  
structures that are needed to create the segment, and then flushing  
the segment is a matter of copying these data structures into the  
Directory.  This gave a substantial speedup to indexing throughput,  
much better RAM efficiency (documents per MB that IndexWriter can  
buffer), etc.

In any event, for all versions of Lucene, when flush happens that  
flush adds a single new segment to the index.

Mike

David Lee wrote:

> ok, thanks. I knew that the documents were buffered in memory until  
> they
> were flushed, but I thought that in memory, they were still separate
> documents/segments until they were merged together at the  
> appropriate time
> (dependent on the mergeFactor).
>
> Do you mean that when the IndexWriter flushes the documents in  
> memory to the
> disk, it will merge all the documents in that flush to one segment?
>
> Thanks!
> David
>
> On Sat, Aug 23, 2008 at 2:40 AM, Karsten F.
> <karsten-lucene@fiz-technik.de>wrote:
>
>>
>> Hi David,
>>
>> this is not true, please take a look to
>> IndexWriter#setRAMBufferSizeMB
>> and
>> IndexWriter#setMaxBufferedDocs
>>
>> But you can produce 9 segments (each with only one document), if  
>> you call
>> IndexWriter#flush
>> or
>> IndexWriter#commit
>> after each addDocument
>>
>> so from my knowledge about lucene there is no difference between
>> #flush
>> and
>> #optimize(getMergeFactor())
>> (btw #optimize() is equal to optimize(1) ).
>>
>>
>> Best regards
>> Karsten
>>
>> p.s. and yes, searching goes through every segment.
>>
>>
>> David Lee-26 wrote:
>>>
>>> So from what I understand, is it true that if mergeFactor is 10,  
>>> then
>> when
>>> I
>>> index my first 9 documents, I have 9 separate segments, each  
>>> containing 1
>>> document? And when searching, it will search through every segment?
>>>
>>> Thanks!
>>> David
>>>
>>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Clarification-about-segments-tp19117115p19120086.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 08:46:12 2008
Return-Path: <java-user-return-35688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11684 invoked from network); 26 Aug 2008 08:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 08:46:11 -0000
Received: (qmail 73875 invoked by uid 500); 26 Aug 2008 08:46:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73842 invoked by uid 500); 26 Aug 2008 08:46:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73831 invoked by uid 99); 26 Aug 2008 08:46:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 01:46:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 08:45:06 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1965922wra.21
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 01:45:34 -0700 (PDT)
Received: by 10.90.115.6 with SMTP id n6mr3454542agc.30.1219740333836;
        Tue, 26 Aug 2008 01:45:33 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id s40sm4336794hsb.7.2008.08.26.01.45.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 01:45:33 -0700 (PDT)
Message-Id: <E8AD10CE-5841-43DD-B54C-B428EC94F685@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19157027.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Deleted document terms
Date: Tue, 26 Aug 2008 04:45:32 -0400
References: <19157027.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org



John Patterson wrote:

> I just discovered some strange behaviour with deleted documents.  I  
> do a
> search for documents with a certain query and delete one using
> IndexWriter.deleteDocuments(Term) using a key for the term.  Then I  
> repeat
> the search and the document is still there because I use a custom
> HitCollector which does not check IndexReader.isDeleted(int).  That  
> is all
> expected.

Hmm -- once a document is deleted, your HitCollector won't ever see  
it.  During searching, isDeleted is called per document at a very low  
level.

If your HitCollector is seeing it, it sounds like it wasn't really  
deleted.  Are you sure you closed the IndexWriter and then reopened  
your searcher, so that the searcher will see the deletion?

> But when I try to show the deleted document by searching by key  
> using the
> same term it was deleted with, it is not found.  So it seems that  
> the term
> (id:MYKEY) is removed from the index.

This is odd -- the document should either be deleted (entirely), or  
not.  You shouldn't get different behavior if you search for the doc  
one way vs another.

> So I was surprised that the term for the id was removed but not the  
> other
> terms for document.

That make two of us!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 09:13:49 2008
Return-Path: <java-user-return-35689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25969 invoked from network); 26 Aug 2008 09:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 09:13:48 -0000
Received: (qmail 10594 invoked by uid 500); 26 Aug 2008 09:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10564 invoked by uid 500); 26 Aug 2008 09:13:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10553 invoked by uid 99); 26 Aug 2008 09:13:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 02:13:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 09:12:42 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1973741wra.21
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 02:12:53 -0700 (PDT)
Received: by 10.90.53.1 with SMTP id b1mr6789140aga.37.1219741972943;
        Tue, 26 Aug 2008 02:12:52 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm5992214aga.13.2008.08.26.02.12.51
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 02:12:52 -0700 (PDT)
Message-Id: <29182851-763C-4945-9BF8-D3E1E54D6DAA@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48B3AE1C.7050209@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Upgrading from v2.2.0 to v2.3.2
Date: Tue, 26 Aug 2008 05:12:50 -0400
References: <48B3AE1C.7050209@atlassian.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Mark Lassau wrote:

> I am a developer on the JIRA Issue tracker, and we are considering  
> upgrading our Lucene version from v2.2.0 to v2.3.2.
> I have been charged with doing the risk analysis, and project work.
>
> I have read the change lists, and the bugs reported on the Lucene  
> Issue Tracker (JIRA of course ;), and some of the archived messages  
> on the Lucene lists.

We love Jira -- thanks!

> From this I would conclude that Lucene v2.3.2 has many performance  
> improvements as well as some other compelling enhancements and bug  
> fixes.
> However there also appear to be a number of issues introduced in  
> v2.3.x, not all of which are fixed in v2.3.2
> These include:
> * LUCENE-1335  Correctly handle concurrent calls to addIndexes,  
> optimize, commit
> I assume that if the application code doesn't make concurrent calls  
> to Lucene objects, or synchronises correctly then this will be OK.

That's the right workaround.  Also, commit() isn't available in 2.3,  
but the issue still applies to close(), rollback(), addIndexes() and  
optimize() in 2.3.

> * LUCENE-1175 occasional MergeException while indexing
> (can occur under load)
> This bug seems to be RAMDirectory-specific, and it is not clear  
> whether it was released or not.

Wasn't released, and wasn't RAMDirectory specific.

> * There seem to have been some issues with using autoCommit(false).
> Are these all fixed in v2.3.2?

To my knowledge, yes.

> Would it be recommended to use autoCommit(true) to be extra safe?

Well... autoCommit=true is going away in 3.0.  You should also see  
better performance with autoCommit=false.  And autoCommit=false also  
has nice transactional behavior (you have full control over when the  
changes are committed to the index).

> In addition is the following trap for young players:
> * LUCENE-1282 Sun hotspot compiler bug in 1.6.0_04/05 affects Lucene
> This is a bug in Sun JDK 6. Fixed in JDK 6 Update 10 (b28).
> The application developer needs to take steps to ensure that a  
> broken Sun JDK 6 is not used.

We also committed a workaround to Lucene for this JRE bug, which  
should allow you to use the buggy JRE releases, *but* it's not certain  
the workaround will alway sork.  I just experimented empirically until  
I found code that seemed to avoid the error.  It's by far safest to  
use a JRE that actually fixes the bug.

> I would really appreciate any comments on the overall stability of  
> v2.3.2 compared to v2.2.0, as well as any pointers about any  
> pitfalls to look out for on upgrade.
> For instance, although the message signatures of the API may be  
> backwardly compatible, it could be that some behaviour has changed  
> in a significant way.

I would think LUCENE-1044 (not corrupting search index if OS or  
machine crashes) is important for Atlassian.

The CHANGES.txt should be a reliable list of any non-backwards- 
compatible changes and how to revert to the old behavior (and if it  
isn't we'd love to hear about that!).  EG merging is now done  
concurrently by default, flushing is by RAM usage not doc count, merge  
selection is by size-in-bytes of each segment (not size-in-doc-count).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 09:17:16 2008
Return-Path: <java-user-return-35690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27901 invoked from network); 26 Aug 2008 09:17:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 09:17:16 -0000
Received: (qmail 15206 invoked by uid 500); 26 Aug 2008 09:17:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15169 invoked by uid 500); 26 Aug 2008 09:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15158 invoked by uid 99); 26 Aug 2008 09:17:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 02:17:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 09:16:10 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1253166fgb.27
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 02:16:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=D8ea+h6+lK8qy4HbDt6ngb6pxxIUz75DDbYWM775YUE=;
        b=gnV+AWrH7n+XGC8Ra6RDIVZzq6wH0s89redryVwpeZZfhW97DxLAvEThnhe6lvooND
         xN2Cgl9jtrFtP98e2Rm7lPh2U22S21HZUz1rej2dCc3SLTxn7mTL+8fmAkrHJo2O1/E9
         MfbwqFdd4UJXF1ItVkLcVrEbgbj7bYPIj96R8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LlrAT3Xmbc/K3HQMbOugY3uOCdeAl9GAerF3RYSybA7KkottTjgSLvjefBdypwNbx7
         PyNEdOwrfEng8sO1olCtq/f4bLtT6Ea78IJZgjq6Bn+BcD97rKsn0fujUDPDVFj9X4m/
         0zxTjynwXs6bOGQq/nmVXmxAGNlwYQVmcby0g=
Received: by 10.187.203.15 with SMTP id f15mr453236faq.105.1219742181677;
        Tue, 26 Aug 2008 02:16:21 -0700 (PDT)
Received: by 10.187.193.4 with HTTP; Tue, 26 Aug 2008 02:16:21 -0700 (PDT)
Message-ID: <5816fbdd0808260216r3af822cay2a889c6cf7b84741@mail.gmail.com>
Date: Tue, 26 Aug 2008 14:46:21 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleted document terms
In-Reply-To: <E8AD10CE-5841-43DD-B54C-B428EC94F685@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1351_23943967.1219742181665"
References: <19157027.post@talk.nabble.com>
	 <E8AD10CE-5841-43DD-B54C-B428EC94F685@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1351_23943967.1219742181665
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi John,

Are you sure you made the id "tokenized" while indexing? I could overcome
this issue by having a tokenized field, which was used for the deletion as
below.

document.add(new Field("id", id, Field.Store.YES, *Field.Index.TOKENIZED*));



Thanks



On Tue, Aug 26, 2008 at 2:15 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
>
> John Patterson wrote:
>
>  I just discovered some strange behaviour with deleted documents.  I do a
>> search for documents with a certain query and delete one using
>> IndexWriter.deleteDocuments(Term) using a key for the term.  Then I repeat
>> the search and the document is still there because I use a custom
>> HitCollector which does not check IndexReader.isDeleted(int).  That is all
>> expected.
>>
>
> Hmm -- once a document is deleted, your HitCollector won't ever see it.
>  During searching, isDeleted is called per document at a very low level.
>
> If your HitCollector is seeing it, it sounds like it wasn't really deleted.
>  Are you sure you closed the IndexWriter and then reopened your searcher, so
> that the searcher will see the deletion?
>
>  But when I try to show the deleted document by searching by key using the
>> same term it was deleted with, it is not found.  So it seems that the term
>> (id:MYKEY) is removed from the index.
>>
>
> This is odd -- the document should either be deleted (entirely), or not.
>  You shouldn't get different behavior if you search for the doc one way vs
> another.
>
>  So I was surprised that the term for the id was removed but not the other
>> terms for document.
>>
>
> That make two of us!
>
> Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_1351_23943967.1219742181665--

From java-user-return-35691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 09:38:35 2008
Return-Path: <java-user-return-35691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42768 invoked from network); 26 Aug 2008 09:38:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 09:38:35 -0000
Received: (qmail 52148 invoked by uid 500); 26 Aug 2008 09:38:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52113 invoked by uid 500); 26 Aug 2008 09:38:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52102 invoked by uid 99); 26 Aug 2008 09:38:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 02:38:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.24 as permitted sender)
Received: from [80.67.29.24] (HELO smtprelay10.ispgateway.de) (80.67.29.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 09:37:25 +0000
Received: from [212.100.48.159] (helo=dsl48-159.pool.bitel.net)
	by smtprelay10.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KXuzK-0001Sq-Lx
	for java-user@lucene.apache.org; Tue, 26 Aug 2008 11:37:22 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: MultiPhrase search
Date: Tue, 26 Aug 2008 11:37:49 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com> <200808252019.18264@danielnaber.de> <efd1bd310808251644r991adccyf02577317caf1b9c@mail.gmail.com>
In-Reply-To: <efd1bd310808251644r991adccyf02577317caf1b9c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808261137.49434@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Dienstag, 26. August 2008, Andre Rubin wrote:

> For some reason, the TermQuery is not returning any results, even when
> querying for a single word (like on*).

Sorry, I meant PrefixQuery. Also, do not add the "*" to the search string 
when creating the PrefixQuery.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 09:45:38 2008
Return-Path: <java-user-return-35692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48291 invoked from network); 26 Aug 2008 09:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 09:45:38 -0000
Received: (qmail 66250 invoked by uid 500); 26 Aug 2008 09:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66226 invoked by uid 500); 26 Aug 2008 09:45:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66215 invoked by uid 99); 26 Aug 2008 09:45:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 02:45:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 09:44:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KXv6j-0002gr-Be
	for java-user@lucene.apache.org; Tue, 26 Aug 2008 02:45:01 -0700
Message-ID: <19158657.post@talk.nabble.com>
Date: Tue, 26 Aug 2008 02:45:01 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleted document terms
In-Reply-To: <5816fbdd0808260216r3af822cay2a889c6cf7b84741@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <19157027.post@talk.nabble.com> <E8AD10CE-5841-43DD-B54C-B428EC94F685@mikemccandless.com> <5816fbdd0808260216r3af822cay2a889c6cf7b84741@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


That was the problem - the id was not tokenized.  Thanks for your help.


Kalani Ruwanpathirana wrote:
> 
> Hi John,
> 
> Are you sure you made the id "tokenized" while indexing? I could overcome
> this issue by having a tokenized field, which was used for the deletion as
> below.
> 
> document.add(new Field("id", id, Field.Store.YES,
> *Field.Index.TOKENIZED*));
> 
> 
> 
> Thanks
> 
> 
> 
> On Tue, Aug 26, 2008 at 2:15 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
> 
>>
>>
>> John Patterson wrote:
>>
>>  I just discovered some strange behaviour with deleted documents.  I do a
>>> search for documents with a certain query and delete one using
>>> IndexWriter.deleteDocuments(Term) using a key for the term.  Then I
>>> repeat
>>> the search and the document is still there because I use a custom
>>> HitCollector which does not check IndexReader.isDeleted(int).  That is
>>> all
>>> expected.
>>>
>>
>> Hmm -- once a document is deleted, your HitCollector won't ever see it.
>>  During searching, isDeleted is called per document at a very low level.
>>
>> If your HitCollector is seeing it, it sounds like it wasn't really
>> deleted.
>>  Are you sure you closed the IndexWriter and then reopened your searcher,
>> so
>> that the searcher will see the deletion?
>>
>>  But when I try to show the deleted document by searching by key using
>> the
>>> same term it was deleted with, it is not found.  So it seems that the
>>> term
>>> (id:MYKEY) is removed from the index.
>>>
>>
>> This is odd -- the document should either be deleted (entirely), or not.
>>  You shouldn't get different behavior if you search for the doc one way
>> vs
>> another.
>>
>>  So I was surprised that the term for the id was removed but not the
>> other
>>> terms for document.
>>>
>>
>> That make two of us!
>>
>> Mike
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> Kalani Ruwanpathirana
> Department of Computer Science & Engineering
> University of Moratuwa
> 
> 

-- 
View this message in context: http://www.nabble.com/Deleted-document-terms-tp19157027p19158657.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 10:55:06 2008
Return-Path: <java-user-return-35693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83816 invoked from network); 26 Aug 2008 10:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 10:55:05 -0000
Received: (qmail 70640 invoked by uid 500); 26 Aug 2008 10:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70605 invoked by uid 500); 26 Aug 2008 10:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70594 invoked by uid 99); 26 Aug 2008 10:54:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 03:54:56 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 10:53:57 +0000
Received: by an-out-0708.google.com with SMTP id c37so1038607anc.49
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 03:54:09 -0700 (PDT)
Received: by 10.100.232.13 with SMTP id e13mr5157666anh.140.1219748048975;
        Tue, 26 Aug 2008 03:54:08 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id d34sm9370217and.3.2008.08.26.03.54.08
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 03:54:08 -0700 (PDT)
Message-Id: <9DE1CE7C-B6B6-4BF8-927E-B709049FF05F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <19158657.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Deleted document terms
Date: Tue, 26 Aug 2008 06:54:07 -0400
References: <19157027.post@talk.nabble.com> <E8AD10CE-5841-43DD-B54C-B428EC94F685@mikemccandless.com> <5816fbdd0808260216r3af822cay2a889c6cf7b84741@mail.gmail.com> <19158657.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Normally an ID should be indexed as Field.Index.UN_TOKENIZED.

Mike

John Patterson wrote:

>
> That was the problem - the id was not tokenized.  Thanks for your  
> help.
>
>
> Kalani Ruwanpathirana wrote:
>>
>> Hi John,
>>
>> Are you sure you made the id "tokenized" while indexing? I could  
>> overcome
>> this issue by having a tokenized field, which was used for the  
>> deletion as
>> below.
>>
>> document.add(new Field("id", id, Field.Store.YES,
>> *Field.Index.TOKENIZED*));
>>
>>
>>
>> Thanks
>>
>>
>>
>> On Tue, Aug 26, 2008 at 2:15 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>>
>>>
>>> John Patterson wrote:
>>>
>>> I just discovered some strange behaviour with deleted documents.   
>>> I do a
>>>> search for documents with a certain query and delete one using
>>>> IndexWriter.deleteDocuments(Term) using a key for the term.  Then I
>>>> repeat
>>>> the search and the document is still there because I use a custom
>>>> HitCollector which does not check IndexReader.isDeleted(int).   
>>>> That is
>>>> all
>>>> expected.
>>>>
>>>
>>> Hmm -- once a document is deleted, your HitCollector won't ever  
>>> see it.
>>> During searching, isDeleted is called per document at a very low  
>>> level.
>>>
>>> If your HitCollector is seeing it, it sounds like it wasn't really
>>> deleted.
>>> Are you sure you closed the IndexWriter and then reopened your  
>>> searcher,
>>> so
>>> that the searcher will see the deletion?
>>>
>>> But when I try to show the deleted document by searching by key  
>>> using
>>> the
>>>> same term it was deleted with, it is not found.  So it seems that  
>>>> the
>>>> term
>>>> (id:MYKEY) is removed from the index.
>>>>
>>>
>>> This is odd -- the document should either be deleted (entirely),  
>>> or not.
>>> You shouldn't get different behavior if you search for the doc one  
>>> way
>>> vs
>>> another.
>>>
>>> So I was surprised that the term for the id was removed but not the
>>> other
>>>> terms for document.
>>>>
>>>
>>> That make two of us!
>>>
>>> Mike
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> -- 
>> Kalani Ruwanpathirana
>> Department of Computer Science & Engineering
>> University of Moratuwa
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Deleted-document-terms-tp19157027p19158657.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 11:12:47 2008
Return-Path: <java-user-return-35694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90000 invoked from network); 26 Aug 2008 11:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 11:12:47 -0000
Received: (qmail 88475 invoked by uid 500); 26 Aug 2008 11:12:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88441 invoked by uid 500); 26 Aug 2008 11:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88430 invoked by uid 99); 26 Aug 2008 11:12:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 04:12:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 11:11:38 +0000
Received: by ey-out-2122.google.com with SMTP id 6so301403eyi.53
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 04:11:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :x-mimeole:in-reply-to:thread-index:message-id;
        bh=aDObFhOs+6NLUxNuH9PK6TcP5Miqp9TG/7kQl+0rFkk=;
        b=FAK8j8yGL2csqDv3ngtWl5uv2WFMRtJYfSiNokmxiilPKuTrCzDkrdypV6wFOSCEEk
         OsKEkiyvqYWtPjGY8rE5rQIyDsdUgNBGG8NCzm1QFtatSyXVXMVvZqJYIlN9WN3nvMPe
         nLUR9fYEpPRpNPAJx1irMnQYnkbVZlXD9HMGY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-mailer:x-mimeole:in-reply-to
         :thread-index:message-id;
        b=alG6LVtrgsYGhSgJl2yT+tPChHmExi5l1wqj8P2USpRFlopswKhxBee9oXZTdP5MaO
         v4XJcOD8RNgMFju0yC4sjlp8Nx6kUFQiUp2NPnrjzr0iYpVZwPBqA9srCr4IUGgtNPjz
         NlkqNarJUrmWLj9PcfYw2AoCJeYl6++YoEglc=
Received: by 10.210.91.17 with SMTP id o17mr8224164ebb.172.1219749110213;
        Tue, 26 Aug 2008 04:11:50 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id 1sm4839284nfv.18.2008.08.26.04.11.46
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 04:11:48 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Case Sensitivity
Date: Tue, 26 Aug 2008 12:11:42 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <9294E20AED46934EA459020706463F94C5A17A@SUEXCL-02.ad.syr.edu>
Thread-Index: AckHbIJnZQb0zOBSSnWC8s59mtI2KQ==
Message-ID: <48b3e4f4.0116300a.5aac.2a67@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

A little more case sensitivity questions.

Based on the discussion on http://markmail.org/message/q7dqr4r7o6t6dgo5 and
on this thread, is it right to say that a field, if either UN_TOKENIZED or
NO_NORMS-ized, it doesn't get analyzed while indexing? Which means we need
to case-normalize (down-case) those fields before hand?

Doest it mean that if I can afford, I should use norms.

Many thanks,
Dino



-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu] 
Sent: 19 August 2008 17:43
To: java-user@lucene.apache.org
Subject: RE: Case Sensitivity

Hi Dino,

I think you'd benefit from reading some FAQ answers, like:

"Why is it important to use the same analyzer type during indexing and
search?"
<http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c4
4472d10961ba63c>

Also, have a look at the AnalysisParalysis wiki page for some hints:
<http://wiki.apache.org/lucene-java/AnalysisParalysis>

On 08/19/2008 at 8:57 AM, Dino Korah wrote:
> From the discussion here what I could understand was, if I am using 
> StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying, 
> I shouldn't have any problems with cases.

If by "shouldn't have problems with cases" you mean "can match
case-insensitively", then this is true.

> But if I have any UN_TOKENIZED fields there will be problems if I do 
> not case-normalize them myself before adding them as a field to the 
> document.

Again, assuming that by "case-normalize" you mean "downcase", and that you
want case-insensitive matching, and that you use the StandardAnalyzer (or
some other downcasing analyzer) at query-time, then this is true.

> In my case I have a mixed scenario. I am indexing emails and the email 
> addresses are indexed UN_TOKENIZED. I do have a second set of custom 
> tokenized field, which keep the tokens in individual fields with same 
> name.
[...]
> Does it mean that where ever I use UN_TOKENIZED, they do not get 
> through the StandardAnalyzer before getting Indexed, but they do when 
> they are searched on?

This is true.

> If that is the case, Do I need to normalise them before adding to 
> document?

If you want case-insensitive matching, then yes, you do need to normalize
them before adding them to the document.

> I also would like to know if it is better to employ an EmailAnalyzer 
> that makes a TokenStream out of the given email address, rather than 
> using a simplistic function that gives me a list of string pieces and 
> adding them one by one. With searches, would both the approaches give 
> same result?

Yes, both approaches give the same result.  When you add string pieces
one-by-one, you are adding multiple same-named fields. By contrast, the
EmailAnalyzer approach would add a single field, and would allow you to
control positions (via Token.setPositionIncrement():
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/Token.ht
ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  Also, if
you make up an EmailAnalyzer, you can use it to search against your
tokenized email field, along with other analyzer(s) on other field(s), using
the PerFieldAnalyzerWrapper
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/PerField
AnalyzerWrapper.html>.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 11:21:13 2008
Return-Path: <java-user-return-35695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92124 invoked from network); 26 Aug 2008 11:21:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 11:21:12 -0000
Received: (qmail 95147 invoked by uid 500); 26 Aug 2008 11:21:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95111 invoked by uid 500); 26 Aug 2008 11:21:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95097 invoked by uid 99); 26 Aug 2008 11:21:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 04:21:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 11:20:07 +0000
Received: by ey-out-2122.google.com with SMTP id 6so302614eyi.53
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 04:20:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=CoLm0O/J8knSSKTmO57LN4CXFoNgvDuhJ8nmIOKIQyc=;
        b=OoURnoyYXPY9WZg5/8STh6FTBijiMh3rTpkF4jurG8jZqr992fqPdwpizYvl48lLJU
         Q8dNYZvoVwG3kso4k4s8Qly0/uFejffjONvWmDmQghxRC1slJUlRW0bgbvqVwEz2TyXT
         Wqc22x+v62Ar8T4ZDoyB1Of0HfNgxLE3Kan/c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=Ed+sXEV2bU3fkdO2gxwa2ojhsWg0UR4Dg3m5xKzdgOBnQQr1zxO8ey3N6Za+S15znf
         UJNaA6WIAQBJUWS0xr8mgYyX82aWuCrEU38+yfVtCdkNX4pWOBl9PYN2/2Po2zSt3nOj
         to+/QWa3gmEW5KNgvOs2w2yVD+76VLpS9aucM=
Received: by 10.210.115.17 with SMTP id n17mr8276358ebc.62.1219749619758;
        Tue, 26 Aug 2008 04:20:19 -0700 (PDT)
Received: by 10.210.13.7 with HTTP; Tue, 26 Aug 2008 04:20:19 -0700 (PDT)
Message-ID: <5e76b0ad0808260420x1e5c4538ueb627b66a30c6e83@mail.gmail.com>
Date: Tue, 26 Aug 2008 16:50:19 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Add IndexReader#getCommitPoints()
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Is there any way to know what are the available commit points
available in an index?

This would be helpful to provide a rollback feature to rollback to a
commitpoint .

--Noble

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 12:03:45 2008
Return-Path: <java-user-return-35696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12435 invoked from network); 26 Aug 2008 12:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 12:03:45 -0000
Received: (qmail 46584 invoked by uid 500); 26 Aug 2008 12:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46535 invoked by uid 500); 26 Aug 2008 12:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46524 invoked by uid 99); 26 Aug 2008 12:03:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 05:03:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 12:02:38 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2029268wra.21
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 05:02:48 -0700 (PDT)
Received: by 10.90.84.2 with SMTP id h2mr6978554agb.93.1219752168082;
        Tue, 26 Aug 2008 05:02:48 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 43sm9417848wri.27.2008.08.26.05.02.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 05:02:47 -0700 (PDT)
Message-Id: <3A2477EB-73F9-4AFD-826E-8F61D4B40AA1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76b0ad0808260420x1e5c4538ueb627b66a30c6e83@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Add IndexReader#getCommitPoints()
Date: Tue, 26 Aug 2008 08:02:45 -0400
References: <5e76b0ad0808260420x1e5c4538ueb627b66a30c6e83@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes -- there's now (in trunk) a static =20
IndexReader.listCommits(Directory) method.

Mike

Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=E0=B4=B3=E0=B5=8D=E2=80=8D=
 =E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D wrote:

> Is there any way to know what are the available commit points
> available in an index?
>
> This would be helpful to provide a rollback feature to rollback to a
> commitpoint .
>
> --Noble
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 12:06:31 2008
Return-Path: <java-user-return-35697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13020 invoked from network); 26 Aug 2008 12:06:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 12:06:31 -0000
Received: (qmail 52174 invoked by uid 500); 26 Aug 2008 12:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51961 invoked by uid 500); 26 Aug 2008 12:06:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51950 invoked by uid 99); 26 Aug 2008 12:06:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 05:06:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 12:05:23 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2541602rvb.5
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 05:05:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=TVE+boEBcHT/Tz4Cdyv0HxBObpN9o5Gy6vkzBBuPjqk=;
        b=veOPCKxL1tnEwIwmEDC4iupWkK+MBXHxAOoSgub0soejihUCtlM3L4Efi6xhqnppQE
         dm2HcJFBYvqbtMWNrfmnFngGkwxnv8EJkAMoB41WtsmhPXdROF82CZRMq2l7rg+Zttyv
         Fw6hfPyaHMd1RnFi9xQTBelqqoMOjOGJsgWYw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uJw2otgMuA/x7ZqSOy4jADFLx00YXqFnbNzKNhJ0oDwdmyfB8j35qssJbUGJU9tyjG
         KaKgrtKDWHNDEYm1jBNq+yFiqjNeXVxFYLY9D8nMqJ0CVFDusuo4uLpy1BNcdzsZoXVQ
         m/HFnXOey5wF78mURPZ31s6YNTs1Cqy7q5oeM=
Received: by 10.141.142.15 with SMTP id u15mr2785047rvn.171.1219752343477;
        Tue, 26 Aug 2008 05:05:43 -0700 (PDT)
Received: by 10.141.132.13 with HTTP; Tue, 26 Aug 2008 05:05:43 -0700 (PDT)
Message-ID: <74f928500808260505j66ca7649r9de95faa74685eab@mail.gmail.com>
Date: Tue, 26 Aug 2008 15:05:43 +0300
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SpanQuery and FilteredQuery
In-Reply-To: <OF70E72B3F.078E4287-ON852574B0.005ECF10-852574B0.005EFD24@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3042_5064338.1219752343471"
References: <1219532168.95246.ezmlm@lucene.apache.org>
	 <OF70E72B3F.078E4287-ON852574B0.005ECF10-852574B0.005EFD24@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3042_5064338.1219752343471
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Chris,
I asked exactly the same question a little while ago and got a pretty good
answer from Paul Elschot.
Try searching the archives for 'Filtering a SpanQuery'. It was around the
13/5/08.

Hope it helps,
Eran.

On Mon, Aug 25, 2008 at 8:18 PM, Christopher M Collins
<collinmc@us.ibm.com>wrote:

>
> Hello,
>
> Can anyone tell me if it's possible to apply a filter to a SpanQuery and
> still use query.getSpans(indexReader)?  I'm using getSpans to get back the
> original positions in the text but I would like to filter the results
> returned by getSpans.  I have a Filter I can apply if I just search with
> the query, but I don't see a way to apply the filter and still use the
> getSpans method.  I thought maybe FilteredQuery looked promising, but of
> course if I wrap my SpanQuery and Filter in a FilteredQuery, getSpans is no
> longer available.
>
> Any suggestions? Thanks!
>
> Chris
> ______________________________________________________________
> Christopher Collins \ http://www.cs.utoronto.ca/~ccollins
> Department of Computer Science \ University of Toronto
> Collaborative User Experience Group \ IBM Research

------=_Part_3042_5064338.1219752343471--

From java-user-return-35698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 13:15:27 2008
Return-Path: <java-user-return-35698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53543 invoked from network); 26 Aug 2008 13:15:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 13:15:27 -0000
Received: (qmail 75368 invoked by uid 500); 26 Aug 2008 13:15:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75336 invoked by uid 500); 26 Aug 2008 13:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75292 invoked by uid 99); 26 Aug 2008 13:15:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 06:15:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 13:14:10 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 279DE7FA9
	for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 06:15:00 -0700 (PDT)
Message-Id: <0A3AE40C-7B3B-4493-AE09-A2064E5CDD9F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B4302ED0453@mail3.basistech.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How do TeeTokenizer and SinkTokenizer work?
Date: Tue, 26 Aug 2008 09:14:36 -0400
References: <E95FD77F0171D14DA1EEE0A785E92B4302ED0367@mail3.basistech.net> <F39DEAE7-DE00-4C9F-8A79-2DED03B605BE@apache.org> <E95FD77F0171D14DA1EEE0A785E92B4302ED0453@mail3.basistech.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 25, 2008, at 7:29 PM, Teruhiko Kurosaka wrote:

> Thank you, Grant and (Koji) Sekiguchi-san.
>
>
>> but I don't
>>> understand how the input from reader1 and reader2 are mixed
>> together.
>>> Will sink1 first reaturn the reader1 text, and reader2?
>>
>> It depends on the order the fields are added.  If source1 is
>> used first, then reader1 will be first.
>
> This puzzles me.  Is this really useful if how SinkTokenizer
> and TeeTokenizer behave depends on how they are read?

Fields in a Document are added as a List, so the Field ordering is  
always the same.

>
> I've read the source code of these Tokenizers but that
> didn't solve my question.
>
> This is an excerpt from Sekiguchi-san's code sample:
>
> 	Analyzer analyzer = new Analyzer() {
>
> 		public TokenStream tokenStream(String field, Reader in) {
> 				return new TeeTokenFilter(
> 					new TeeTokenFilter( new SenTokenizer( in, SEN_CONF ),
> 								sinkPerson ), sinkOrg );
> 		}
> 	};
>
> 	TokenFilter exPerson = new EntityExtractor( sinkPerson, T_PERSON );
> 	TokenFilter exOrg = new EntityExtractor( sinkOrg, T_ORG );
> 	IndexWriter writer = new IndexWriter( INDEX, analyzer, true );
> 	Document doc = new Document();
> 	doc.add( new Field( F_BODY, CONTENT, Store.YES, Index.TOKENIZED ) );
> 	doc.add( new Field( F_PERSON, exPerson ) );
> 	doc.add( new Field( F_ORG, exOrg ) );
> 	writer.addDocument( doc );
>
> It seems that the code works as expected only if the token stream from
> the analyzer on CONTENT is read completely, then the token stream from
> sinkPerson is read compeltely, followed by that from sinkOrg.
>
> Does Lucene's core gurantees that a field's token stream is read  
> completely
> before the next field's token stream is read, in the order the  
> Field's are add()'ed?

Yes, it processes all of one Field first, then the next one.  If it  
doesn't, then we have a bug, IMO, and we will have to have a different  
approach for the Tee/Sink.

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 13:18:41 2008
Return-Path: <java-user-return-35699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54849 invoked from network); 26 Aug 2008 13:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 13:18:41 -0000
Received: (qmail 86485 invoked by uid 500); 26 Aug 2008 13:18:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86457 invoked by uid 500); 26 Aug 2008 13:18:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86446 invoked by uid 99); 26 Aug 2008 13:18:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 06:18:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 13:17:33 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1351367fkq.5
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 06:17:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :x-mimeole:in-reply-to:thread-index:message-id;
        bh=VB8zMsQinjp7I4r80uTEbMU7F8LIt3ZTkRsXdK3yMU0=;
        b=d7YLWwjvxo66t3TsGGy5pOVXHF9DA3zMqqQ1NJgF1sYvDcm73HlEJwSgRz+U8lDLJY
         BKee/S8IfzLqL3cwgjHYt+hB9vE3un2JzT4T+R6xGjDX+pY+9xEV+V5Ky758NXBZo6U0
         y0hsj/i5ciFzQawIdIV2mMliABK8FAfQ5WD1o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-mailer:x-mimeole:in-reply-to
         :thread-index:message-id;
        b=wi/73YehYCTTvxa7RJHfbgwS+mqsp7M9JJwfpFmnqvmrvTCIo5uOe1h4lRsCdGBL1A
         DsEcoLdUdojJkCYnEx/mkZHkI4xtcqbVw9450giguweMbwQwg6hi0IH0UWeBsTJmB3b/
         W0l2zaZsuq2KEYgDi7UpVdu7LIVJ7au0vSAjk=
Received: by 10.180.216.16 with SMTP id o16mr2916883bkg.13.1219756672464;
        Tue, 26 Aug 2008 06:17:52 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id 32sm4885936nfu.10.2008.08.26.06.17.49
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 06:17:50 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Case Sensitivity
Date: Tue, 26 Aug 2008 14:17:49 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: 
Thread-Index: AckHbIJnZQb0zOBSSnWC8s59mtI2KQADfing
Message-ID: <48b4027e.2015300a.1c0d.319f@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think I should rephrase my question.

[ Context: Using out of the box StandardAnalyzer for indexing and searching.
]

Is it right to say that a field, if either UN_TOKENIZED or NO_NORMS-ized (
field.setOmitNorms(true) ), it doesn't get analyzed while indexing?
Which means that when we search, it gets thru the analyzer and we need to
analyze them differently in the analyzer we use for searching?
Doesn't it mean that a setOmitNorms(true) field also doesn't get tokenized?

What is the best solution if one was to add a set of fields UN_TOKENIZED and
others TOKENIZED, of the later set a few with setOmitNorms(true) (the index
writer is plain StandardAnalyzer based)? A per field analyzer at query time
?!

Many thanks,
Dino


-----Original Message-----
From: Dino Korah [mailto:dckorah@gmail.com] 
Sent: 26 August 2008 12:12
To: 'java-user@lucene.apache.org'
Subject: RE: Case Sensitivity

A little more case sensitivity questions.

Based on the discussion on http://markmail.org/message/q7dqr4r7o6t6dgo5 and
on this thread, is it right to say that a field, if either UN_TOKENIZED or
NO_NORMS-ized, it doesn't get analyzed while indexing? Which means we need
to case-normalize (down-case) those fields before hand?

Doest it mean that if I can afford, I should use norms.

Many thanks,
Dino



-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]
Sent: 19 August 2008 17:43
To: java-user@lucene.apache.org
Subject: RE: Case Sensitivity

Hi Dino,

I think you'd benefit from reading some FAQ answers, like:

"Why is it important to use the same analyzer type during indexing and
search?"
<http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c4
4472d10961ba63c>

Also, have a look at the AnalysisParalysis wiki page for some hints:
<http://wiki.apache.org/lucene-java/AnalysisParalysis>

On 08/19/2008 at 8:57 AM, Dino Korah wrote:
> From the discussion here what I could understand was, if I am using 
> StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying, 
> I shouldn't have any problems with cases.

If by "shouldn't have problems with cases" you mean "can match
case-insensitively", then this is true.

> But if I have any UN_TOKENIZED fields there will be problems if I do 
> not case-normalize them myself before adding them as a field to the 
> document.

Again, assuming that by "case-normalize" you mean "downcase", and that you
want case-insensitive matching, and that you use the StandardAnalyzer (or
some other downcasing analyzer) at query-time, then this is true.

> In my case I have a mixed scenario. I am indexing emails and the email 
> addresses are indexed UN_TOKENIZED. I do have a second set of custom 
> tokenized field, which keep the tokens in individual fields with same 
> name.
[...]
> Does it mean that where ever I use UN_TOKENIZED, they do not get 
> through the StandardAnalyzer before getting Indexed, but they do when 
> they are searched on?

This is true.

> If that is the case, Do I need to normalise them before adding to 
> document?

If you want case-insensitive matching, then yes, you do need to normalize
them before adding them to the document.

> I also would like to know if it is better to employ an EmailAnalyzer 
> that makes a TokenStream out of the given email address, rather than 
> using a simplistic function that gives me a list of string pieces and 
> adding them one by one. With searches, would both the approaches give 
> same result?

Yes, both approaches give the same result.  When you add string pieces
one-by-one, you are adding multiple same-named fields. By contrast, the
EmailAnalyzer approach would add a single field, and would allow you to
control positions (via Token.setPositionIncrement():
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/Token.ht
ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  Also, if
you make up an EmailAnalyzer, you can use it to search against your
tokenized email field, along with other analyzer(s) on other field(s), using
the PerFieldAnalyzerWrapper
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/analysis/PerField
AnalyzerWrapper.html>.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 13:42:23 2008
Return-Path: <java-user-return-35700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68702 invoked from network); 26 Aug 2008 13:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 13:42:23 -0000
Received: (qmail 38568 invoked by uid 500); 26 Aug 2008 13:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37581 invoked by uid 500); 26 Aug 2008 13:42:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 60186 invoked by uid 99); 26 Aug 2008 02:56:01 -0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to search
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 26 Aug 2008 10:55:25 +0800
Message-ID: <2667F74761A946468605DA9E63434A08199813@CNBEEXC006.nsn-intra.net>
In-Reply-To: <48B36F6C.8010500@nuix.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to search
Thread-Index: AckHJpM176huLiNyR5eLo648t9CUfAAAFDbw
References: <19142469.post@talk.nabble.com> <867513fe0808250458v37b6b7f6s9d189a295b787e09@mail.gmail.com> <19142634.post@talk.nabble.com> <48B36F6C.8010500@nuix.com>
From: "Jiao, Jason (NSN - CN/Cheng Du)" <jason.jiao@nsn.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Aug 2008 02:55:28.0854 (UTC) FILETIME=[3276DF60:01C90727]
X-Virus-Checked: Checked by ClamAV on apache.org

The lucene FAQ says:

What wildcard search support is available from Lucene?
Lucene supports wild card queries which allow you to perform searches
such as book*, which will find documents containing terms such as book,
bookstore, booklet, etc. Lucene refers to this type of a query as a
'prefix query'.=20

Lucene also supports wild card queries which allow you to place a wild
card in the middle of the query term. For instance, you could make
searches like: mi*pelling. That will match both misspelling, which is
the correct way to spell this word, as well as mispelling, which is a
common spelling mistake.=20

Another wild card character that you can use is '?', a question mark.
The ? will match a single character. This allows you to perform queries
such as Bra?il. Such a query will match both Brasil and Brazil. Lucene
refers to this type of a query as a 'wildcard query'.=20

Leading wildcards (e.g. *ook) are not supported by the QueryParser by
default. As of Lucene 2.1, they can be enabled by calling
QueryParser.setAllowLeadingWildcard( true ). Note that this can be an
expensive operation: it requires scanning the list of tokens in the
index in its entirety to look for those that match the pattern.=20



Br.
Jason Jiao


>-----Original Message-----
>From: ext Daniel Noll [mailto:daniel@nuix.com]=20
>Sent: Tuesday, August 26, 2008 10:50 AM
>To: java-user@lucene.apache.org
>Subject: Re: How to search
>
>Venkata Subbarayudu wrote:
>> Hi Anshum Gupta,
>>     Thanks for your replay, but when I gone through=20
>> querySyntax-Document for Lucene, I read that Lucene does not allow=20
>> queries like "*findthis" i.e. I think it doesnot allow=20
>wildcards in the beginning of the query.
>
>It has supported this for some time now, just not by default.
>
>Daniel
>
>--
>Daniel Noll
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 13:42:23 2008
Return-Path: <java-user-return-35701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68718 invoked from network); 26 Aug 2008 13:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 13:42:23 -0000
Received: (qmail 38544 invoked by uid 500); 26 Aug 2008 13:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38046 invoked by uid 500); 26 Aug 2008 13:42:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 51357 invoked by uid 99); 26 Aug 2008 02:43:07 -0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Luke issues "Unknown format version: -6" 
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 26 Aug 2008 10:42:29 +0800
Message-ID: <2667F74761A946468605DA9E63434A081997F6@CNBEEXC006.nsn-intra.net>
In-Reply-To: <16f8407d0808251039y35a7ed26x393153c4f73fbb3b@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Luke issues "Unknown format version: -6" 
Thread-Index: AckG2bH8weD/DRy7SDy+Iw138Hi4jwAR/P6A
References: <16f8407d0808221635l4d4967b0ra0f45383b4194c6d@mail.gmail.com> <19120086.post@talk.nabble.com> <16f8407d0808251039y35a7ed26x393153c4f73fbb3b@mail.gmail.com>
From: "Jiao, Jason (NSN - CN/Cheng Du)" <jason.jiao@nsn.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Aug 2008 02:42:35.0169 (UTC) FILETIME=[654FE910:01C90725]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,
	I use luke v0.8.1 which build base on lucene 2.3.0. First, I run
lucene/demo/IndexFiles to build index successfully. Then I use luke to
open index, but luke  issues "Unknown format version: -6" . I check the
documentation of lucene which said "lucene 2.3.2 does not contain any
new features, API or file format changes, which makes it fully
compatible to 2.3.0 and 2.3.1".

Any hints?

Thanks in advance.


Jason Jiao

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 14:51:25 2008
Return-Path: <java-user-return-35702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11977 invoked from network); 26 Aug 2008 14:51:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 14:51:25 -0000
Received: (qmail 33167 invoked by uid 500); 26 Aug 2008 14:51:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33135 invoked by uid 500); 26 Aug 2008 14:51:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33050 invoked by uid 99); 26 Aug 2008 14:51:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 07:51:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 14:50:17 +0000
Received: by an-out-0708.google.com with SMTP id c37so1054780anc.49
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 07:50:46 -0700 (PDT)
Received: by 10.100.207.5 with SMTP id e5mr5594855ang.104.1219762246610;
        Tue, 26 Aug 2008 07:50:46 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id b12sm9089029ana.14.2008.08.26.07.50.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 07:50:45 -0700 (PDT)
Message-Id: <DCA443D9-EF72-42E8-A8DE-5D3775C39F55@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <2667F74761A946468605DA9E63434A081997F6@CNBEEXC006.nsn-intra.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Luke issues "Unknown format version: -6"
Date: Tue, 26 Aug 2008 10:50:44 -0400
References: <16f8407d0808221635l4d4967b0ra0f45383b4194c6d@mail.gmail.com> <19120086.post@talk.nabble.com> <16f8407d0808251039y35a7ed26x393153c4f73fbb3b@mail.gmail.com> <2667F74761A946468605DA9E63434A081997F6@CNBEEXC006.nsn-intra.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I think you need to triple check your CLASSPATH?  It seems like you  
are somehow getting and older version of Luke.

The file format definitely did not change from 2.3.0 --> 2.3.2.

Mike

Jiao, Jason (NSN - CN/Cheng Du) wrote:

> Hi there,
> 	I use luke v0.8.1 which build base on lucene 2.3.0. First, I run
> lucene/demo/IndexFiles to build index successfully. Then I use luke to
> open index, but luke  issues "Unknown format version: -6" . I check  
> the
> documentation of lucene which said "lucene 2.3.2 does not contain any
> new features, API or file format changes, which makes it fully
> compatible to 2.3.0 and 2.3.1".
>
> Any hints?
>
> Thanks in advance.
>
>
> Jason Jiao
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 15:08:53 2008
Return-Path: <java-user-return-35703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34299 invoked from network); 26 Aug 2008 15:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 15:08:53 -0000
Received: (qmail 81552 invoked by uid 500); 26 Aug 2008 15:08:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81523 invoked by uid 500); 26 Aug 2008 15:08:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81512 invoked by uid 99); 26 Aug 2008 15:08:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 08:08:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 15:07:48 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m7QF8EMQ026272
	for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 16:08:14 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.2.12004)
    via ESMTP; Tue, 26 Aug 2008 16:08:14 +0100 (BST)
Date: Tue, 26 Aug 2008 16:08:14 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <48B41C5E.3010207@scalix.com>
Subject: Combining Wildcard and Term Queries?
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Can you combine these two queries somehow so that they behave like a 
PhraseQuery?

I have a custom query parser which takes a phrase like "*at sat" and 
produces a BooleanQuery consisting of a WildcardQuery ('*at') and a 
TermQuery ('sat').  This works, but matches more widely than expected 
(by me).

e.g. 
 "*at sat" will match any docs containing '*at' OR 'sat',   whereas
 "cat sat" will only match docs containing the exact phrase

I would like the latter behaviour if at all possible.

I have looked at SpanQuery, but I can't see how to use it in this case...

Any pointers happily received.

- Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 16:13:52 2008
Return-Path: <java-user-return-35704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86875 invoked from network); 26 Aug 2008 16:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 16:13:52 -0000
Received: (qmail 94949 invoked by uid 500); 26 Aug 2008 16:13:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94921 invoked by uid 500); 26 Aug 2008 16:13:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94910 invoked by uid 99); 26 Aug 2008 16:13:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 09:13:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 16:12:44 +0000
Received: by gxk6 with SMTP id 6so3144617gxk.5
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 09:13:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=g109zb1yp1GVdCn9+sDlWmicHxJNrTjeerdl41lbxu8=;
        b=Z0jwuKY41SDhWuAcqMSfO472FgTeMxytpwg/KAfTkpLobcQorp2J3yaHsEmoaHRDs6
         u2OyctRjZR21i2bS4sx/SFOfhCJIOpxiBhtFvIDNsjV95pTyukAcdaq7Ib/S98DHzYIJ
         xAQTL2+JOK4+Af49BFH3QOKkco3jnAIf7q2Gg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mDBok5zQUYQ23CaMK8mKjakzkat+nFEA2glVmAz2N/XduQPInqf1+GWbuMA2zv3yTt
         +OfUnlj7fbt9/dv+WxUGVP6kdxUrDsGfDDyBT2N+xJ5HG6kuLg/czpJPyWof4Ch9FOv8
         cUUlTt0Ny2+W8sAvqVqmSkf41RcyYEVUhKlhM=
Received: by 10.151.112.3 with SMTP id p3mr9430845ybm.198.1219767194370;
        Tue, 26 Aug 2008 09:13:14 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Tue, 26 Aug 2008 09:13:14 -0700 (PDT)
Message-ID: <efd1bd310808260913o94e285cq331723a60a2f710d@mail.gmail.com>
Date: Tue, 26 Aug 2008 09:13:14 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiPhrase search
In-Reply-To: <200808261137.49434@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6759_13175672.1219767194313"
References: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com>
	 <200808252019.18264@danielnaber.de>
	 <efd1bd310808251644r991adccyf02577317caf1b9c@mail.gmail.com>
	 <200808261137.49434@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6759_13175672.1219767194313
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That worked great! Thanks Daniel.

I just have one more use case. I want the same prefix search as before, plus
another match in another field.

I was using MultiFieldQueryParser.parse(), but then I have the same problem
with the "One Tw*" query, cause MultiFieldQueryParser.parse() returns a
BooleanQuery.

Thanks again,


Andre

On Tue, Aug 26, 2008 at 2:37 AM, Daniel Naber <lucenelist2007@danielnaber.de
> wrote:

> On Dienstag, 26. August 2008, Andre Rubin wrote:
>
> > For some reason, the TermQuery is not returning any results, even when
> > querying for a single word (like on*).
>
> Sorry, I meant PrefixQuery. Also, do not add the "*" to the search string
> when creating the PrefixQuery.
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6759_13175672.1219767194313--

From java-user-return-35705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 16:28:30 2008
Return-Path: <java-user-return-35705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93344 invoked from network); 26 Aug 2008 16:28:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 16:28:29 -0000
Received: (qmail 17318 invoked by uid 500); 26 Aug 2008 16:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17280 invoked by uid 500); 26 Aug 2008 16:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17269 invoked by uid 99); 26 Aug 2008 16:28:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 09:28:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.23 as permitted sender)
Received: from [80.67.29.23] (HELO smtprelay09.ispgateway.de) (80.67.29.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 16:27:22 +0000
Received: from [212.100.47.132] (helo=dsl47-132.pool.bitel.net)
	by smtprelay09.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KY1OY-0000DU-3r
	for java-user@lucene.apache.org; Tue, 26 Aug 2008 18:27:50 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Combining Wildcard and Term Queries?
Date: Tue, 26 Aug 2008 18:28:19 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <48B41C5E.3010207@scalix.com>
In-Reply-To: <48B41C5E.3010207@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808261828.19344@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Dienstag, 26. August 2008, Chris Bamford wrote:

> Can you combine these two queries somehow so that they behave like a
> PhraseQuery?

You can use MultiPhraseQuery, see
http://lucene.apache.org/java/2_3_2/api/core/org/apache/lucene/search/MultiPhraseQuery.html

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 16:35:23 2008
Return-Path: <java-user-return-35706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97173 invoked from network); 26 Aug 2008 16:35:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 16:35:23 -0000
Received: (qmail 36911 invoked by uid 500); 26 Aug 2008 16:35:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36885 invoked by uid 500); 26 Aug 2008 16:35:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36874 invoked by uid 99); 26 Aug 2008 16:35:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 09:35:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 16:34:14 +0000
Received: from [212.100.47.132] (helo=dsl47-132.pool.bitel.net)
	by smtprelay06.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KY1Uj-0003yO-NV
	for java-user@lucene.apache.org; Tue, 26 Aug 2008 18:34:13 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: MultiPhrase search
Date: Tue, 26 Aug 2008 18:34:42 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com> <200808261137.49434@danielnaber.de> <efd1bd310808260913o94e285cq331723a60a2f710d@mail.gmail.com>
In-Reply-To: <efd1bd310808260913o94e285cq331723a60a2f710d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808261834.42979@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Dienstag, 26. August 2008, Andre Rubin wrote:

> I just have one more use case. I want the same prefix search as before,
> plus another match in another field.

Not sure if I'm following you, but you can create your own BooleanQuery 
programmatically, and then add the original PrefixQuery and any other 
query, no matter if it's another BooleanQuery or if comes out of the 
QueryParser or is also built programmatically.

Regards
 Daniel  

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 16:50:04 2008
Return-Path: <java-user-return-35707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5661 invoked from network); 26 Aug 2008 16:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 16:50:04 -0000
Received: (qmail 61689 invoked by uid 500); 26 Aug 2008 16:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61664 invoked by uid 500); 26 Aug 2008 16:49:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61653 invoked by uid 99); 26 Aug 2008 16:49:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 09:49:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 16:48:57 +0000
Received: by gxk6 with SMTP id 6so3198216gxk.5
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 09:49:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=uxTYL0wlmzmo8ASmvld1QtipEL0uSHEJk4Xt3oJpLng=;
        b=UAhHIEC/0w6B2SchteBp9+FMrpPa/rqdCpkPEIuWul8brhyiSx/vH+iSdsKtHzRUha
         POFKbt2HKp17cqoIA3trXnm27ZnZr8DhVuaAaaR0cRW5njt3YXcJca9dwOlOGEF99KYO
         k0tD2MDVBrrSpbCUtcxAzS0781uWPqFiRMPR8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=HGzH/PCEQZj4vRugMce7n2VaRkbHgMrPA1GKxZeJnIQreHSr7vyBTxWxnWhN74ZWC8
         7sPVGEJCz5V8oRRdjCmijRSY/B52mnyJpPiHZr5OmX3IptfyZxj/EylNrRqGym229rqy
         tK0G5iJuP3nnv+fKDe6fzMnmo067jb7IsHkOQ=
Received: by 10.151.42.20 with SMTP id u20mr9494485ybj.231.1219769366842;
        Tue, 26 Aug 2008 09:49:26 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Tue, 26 Aug 2008 09:49:26 -0700 (PDT)
Message-ID: <efd1bd310808260949t2d5429bai2db67e2574e080c2@mail.gmail.com>
Date: Tue, 26 Aug 2008 09:49:26 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiPhrase search
In-Reply-To: <200808261834.42979@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7296_20543906.1219769366836"
References: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com>
	 <200808261137.49434@danielnaber.de>
	 <efd1bd310808260913o94e285cq331723a60a2f710d@mail.gmail.com>
	 <200808261834.42979@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7296_20543906.1219769366836
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Now I was the one who didn't follow: How do I add a query to an existing
query?

Let me be more clear on my use case:

I have two documents:
1)
label:One Two Three
type:sequence

2)
label:One Two FOUR
type:other


I want to be able to make the same kind of search as you described earlier
using PrefixQuery, but I want to filter the results using the other field.
Like:
label:One Tw*
type:sequence

And I only want to get document 1 as result.

At first glance, it seems that your answer may fit, but I'm not sure what
you meant by adding another query to an existing query.

Thanks again,


Andre

On Tue, Aug 26, 2008 at 9:34 AM, Daniel Naber <lucenelist2007@danielnaber.de
> wrote:

> On Dienstag, 26. August 2008, Andre Rubin wrote:
>
> > I just have one more use case. I want the same prefix search as before,
> > plus another match in another field.
>
> Not sure if I'm following you, but you can create your own BooleanQuery
> programmatically, and then add the original PrefixQuery and any other
> query, no matter if it's another BooleanQuery or if comes out of the
> QueryParser or is also built programmatically.
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7296_20543906.1219769366836--

From java-user-return-35708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 17:02:29 2008
Return-Path: <java-user-return-35708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14273 invoked from network); 26 Aug 2008 17:02:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 17:02:29 -0000
Received: (qmail 85724 invoked by uid 500); 26 Aug 2008 17:02:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85688 invoked by uid 500); 26 Aug 2008 17:02:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85677 invoked by uid 99); 26 Aug 2008 17:02:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 10:02:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 17:01:24 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m7QH0o81026051
	for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 18:00:50 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.2.12004)
    via ESMTP; Tue, 26 Aug 2008 18:00:50 +0100 (BST)
Date: Tue, 26 Aug 2008 18:00:50 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <48B436C2.3080609@scalix.com>
In-Reply-To: <200808261828.19344@danielnaber.de>
References: <48B41C5E.3010207@scalix.com>
References: <200808261828.19344@danielnaber.de>
Subject: Re: Combining Wildcard and Term Queries?
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Daniel,

That sounds like what I'm after - but how do I get hold of the 
IndexReader so I can call IndexReader.terms(Term) ?
The code where I am doing this work is getFieldQuery(String field, 
String queryText) of my custom query parser ...

Thanks,

- Chris


Daniel Naber wrote:
> On Dienstag, 26. August 2008, Chris Bamford wrote:
>
>   
>> Can you combine these two queries somehow so that they behave like a
>> PhraseQuery?
>>     
>
> You can use MultiPhraseQuery, see
> http://lucene.apache.org/java/2_3_2/api/core/org/apache/lucene/search/MultiPhraseQuery.html
>
> Regards
>  Daniel
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 17:12:52 2008
Return-Path: <java-user-return-35709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17305 invoked from network); 26 Aug 2008 17:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 17:12:52 -0000
Received: (qmail 99747 invoked by uid 500); 26 Aug 2008 17:12:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98939 invoked by uid 500); 26 Aug 2008 17:12:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98928 invoked by uid 99); 26 Aug 2008 17:12:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 10:12:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 17:11:44 +0000
Received: from [212.100.47.21] (helo=dsl47-21.pool.bitel.net)
	by smtprelay08.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KY25U-0004cj-O4
	for java-user@lucene.apache.org; Tue, 26 Aug 2008 19:12:12 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Combining Wildcard and Term Queries?
Date: Tue, 26 Aug 2008 19:12:41 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <48B41C5E.3010207@scalix.com> <48B436C2.3080609@scalix.com>
In-Reply-To: <48B436C2.3080609@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808261912.42078@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Dienstag, 26. August 2008, Chris Bamford wrote:

> That sounds like what I'm after - but how do I get hold of the
> IndexReader so I can call IndexReader.terms(Term) ?
> The code where I am doing this work is getFieldQuery(String field,
> String queryText) of my custom query parser ...

QueryParser indeed doesn't know about IndexSearchers and IndexReaders, so 
you either have to do the work outside (whereever you have an 
IndexSearcher, it lets you access the IndexReader) and hand the results 
over to your QueryParser via e.g. its constructor. Or you hand over the 
IndexReader to your QueryParser. That's not really elegant but I don't 
know a better solution.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 17:19:53 2008
Return-Path: <java-user-return-35710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19104 invoked from network); 26 Aug 2008 17:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 17:19:53 -0000
Received: (qmail 5878 invoked by uid 500); 26 Aug 2008 17:19:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5851 invoked by uid 500); 26 Aug 2008 17:19:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5840 invoked by uid 99); 26 Aug 2008 17:19:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 10:19:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 17:18:45 +0000
Received: from [212.100.47.21] (helo=dsl47-21.pool.bitel.net)
	by smtprelay05.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KY2CH-0007Gy-O2
	for java-user@lucene.apache.org; Tue, 26 Aug 2008 19:19:13 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: MultiPhrase search
Date: Tue, 26 Aug 2008 19:19:43 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com> <200808261834.42979@danielnaber.de> <efd1bd310808260949t2d5429bai2db67e2574e080c2@mail.gmail.com>
In-Reply-To: <efd1bd310808260949t2d5429bai2db67e2574e080c2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808261919.43268@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Dienstag, 26. August 2008, Andre Rubin wrote:

> Now I was the one who didn't follow: How do I add a query to an existing
> query?

Something like this should work:

BooleanQuery bq = new BooleanQuery();
PrefixQuery pq = new PrefixQuery(...);
bq.add(pq, BooleanClause.Occur.MUST);
TermQuery tq = new TermQuery(new Term("type", "sequence"));
bq.add(tq, BooleanClause.Occur.MUST);

bq is now the query you can use for searching. BooleanClause.Occur.MUST 
basically means "AND". So unless you want your users to access the 
features of Lucene's QueryParser (e.g. AND, OR, NOT, fuzzy queries etc) 
there's no need to use it.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 18:04:34 2008
Return-Path: <java-user-return-35711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42037 invoked from network); 26 Aug 2008 18:04:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 18:04:34 -0000
Received: (qmail 82836 invoked by uid 500); 26 Aug 2008 18:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82796 invoked by uid 500); 26 Aug 2008 18:04:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82785 invoked by uid 99); 26 Aug 2008 18:04:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 11:04:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 18:03:27 +0000
Received: by gxk6 with SMTP id 6so3290279gxk.5
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 11:02:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Ype7qTTeBCj294CrAtWJ46X2EhxIvKn+gFfWHK/IcfE=;
        b=nNLoYp+NfeeNiH3PWiVrbmf7j98XdJqhmMJRMecStpVt068K8Ou08O4aQkLtOqX0Em
         4cd72Cv+upyP25Ry9cq21K01mpSV+dRTPbtsYEX2wm6q0/uKoNKbf5c6UwUi7E5LLqYN
         8YeFFh/OroJFIrTUhxCQxf7d4KXno255mqVDY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=boRiYUXQkSkMV3aOzZ0CdPihGkDusf/tI2yh/28WhOkjnh073gxD6+5Dr4WkGCQENQ
         GgD4kBEXVbiPGh5sqxBqe0okK0kUVS1DFKNdMHmRU5W/IKY/ocRSJCwd3iFP8eD6/sTK
         LbmPqspEq35exonulwmHQ65SVqh3QKAtqveLo=
Received: by 10.151.103.11 with SMTP id f11mr9594074ybm.190.1219773776447;
        Tue, 26 Aug 2008 11:02:56 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Tue, 26 Aug 2008 11:02:56 -0700 (PDT)
Message-ID: <efd1bd310808261102j40e424d4i11db7de9e4804d0d@mail.gmail.com>
Date: Tue, 26 Aug 2008 11:02:56 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiPhrase search
In-Reply-To: <200808261919.43268@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8208_11617504.1219773776440"
References: <efd1bd310808250832l62f115d7s988e2282d9989f3@mail.gmail.com>
	 <200808261834.42979@danielnaber.de>
	 <efd1bd310808260949t2d5429bai2db67e2574e080c2@mail.gmail.com>
	 <200808261919.43268@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8208_11617504.1219773776440
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks again Daniel,

It's working now. But for some reason, TermQuery is not working for me (i
think because I have special characters in the query). I replaced the
TermQuery with the query below and I got the results I was expecting.

Thanks!!!!

String escapedType = QueryParser.escape(type);
QueryParser parser = new QueryParser(TYPE_FIELD, ANALYZER);
Query tq = parser.parse(TYPE_FIELD + ":" + escapedType);


Andre

On Tue, Aug 26, 2008 at 10:19 AM, Daniel Naber <
lucenelist2007@danielnaber.de> wrote:

> On Dienstag, 26. August 2008, Andre Rubin wrote:
>
> > Now I was the one who didn't follow: How do I add a query to an existing
> > query?
>
> Something like this should work:
>
> BooleanQuery bq = new BooleanQuery();
> PrefixQuery pq = new PrefixQuery(...);
> bq.add(pq, BooleanClause.Occur.MUST);
> TermQuery tq = new TermQuery(new Term("type", "sequence"));
> bq.add(tq, BooleanClause.Occur.MUST);
>
> bq is now the query you can use for searching. BooleanClause.Occur.MUST
> basically means "AND". So unless you want your users to access the
> features of Lucene's QueryParser (e.g. AND, OR, NOT, fuzzy queries etc)
> there's no need to use it.
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8208_11617504.1219773776440--

From java-user-return-35712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 22:53:33 2008
Return-Path: <java-user-return-35712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60176 invoked from network); 26 Aug 2008 22:53:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 22:53:32 -0000
Received: (qmail 49358 invoked by uid 500); 26 Aug 2008 22:53:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49323 invoked by uid 500); 26 Aug 2008 22:53:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49311 invoked by uid 99); 26 Aug 2008 22:53:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 15:53:24 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.15] (HELO relay01.pair.com) (209.68.5.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 26 Aug 2008 22:52:27 +0000
Received: (qmail 35214 invoked from network); 26 Aug 2008 22:52:53 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 26 Aug 2008 22:52:53 -0000
X-pair-Authenticated: 68.48.101.76
Subject: lucene 3.0 feature list?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Tue, 26 Aug 2008 18:52:53 -0400
Message-Id: <1219791173.6959.20.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  Sorry if I missed this somewhere or maybe its not released yet, but I
was anxiously curious about lucene 3.0's expected features/improvements.
Is there a list yet?

thanks! 
Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 23:00:45 2008
Return-Path: <java-user-return-35713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65978 invoked from network); 26 Aug 2008 23:00:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 23:00:44 -0000
Received: (qmail 55065 invoked by uid 500); 26 Aug 2008 23:00:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55041 invoked by uid 500); 26 Aug 2008 23:00:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55030 invoked by uid 99); 26 Aug 2008 23:00:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 16:00:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 22:59:28 +0000
Received: by ey-out-2122.google.com with SMTP id 6so403098eyi.53
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 15:59:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=WBLcWziablQql6jhi3bhD+0kDyXS+Zlc43GnpC5qqng=;
        b=BarnKX/d0wRj9SsEzFU85J4sIUl7yNvATA3+WX5BJRvN7+mEjyClyONOMEz/4JtsP5
         +17ovdpkFD6GG3dyIPZ4D20L+ffj8G9M7/DwZxoVnn79L6/0Zsslh6NylLpS6TnQDv00
         yrhV8qH1WMoC3nX2uLx5cUrgd3D6SliLmaWVM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=px11QKeMeo4epKVVLFotcHj9MaII2uwNDi8LU68FBXPsd6OKfcdnTeqH3o4RbTAAi9
         E5jzT2RAszECf9pvXVi3OCcwaOoVUNsdUqF5wXL7/tjIqSMI+kXug2bsY433sSTlOyX4
         1/S7Yi6ljcZxdOP5toeEcdG7/xrPZqNvyWzoM=
Received: by 10.210.136.10 with SMTP id j10mr9163957ebd.43.1219791580046;
        Tue, 26 Aug 2008 15:59:40 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id d23sm39912053nfh.11.2008.08.26.15.59.36
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 26 Aug 2008 15:59:37 -0700 (PDT)
Message-Id: <D90EA060-861A-467E-8C3C-17D012482F0B@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1219791173.6959.20.camel@nuraku>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: lucene 3.0 feature list?
Date: Wed, 27 Aug 2008 00:59:35 +0200
References: <1219791173.6959.20.camel@nuraku>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


27 aug 2008 kl. 00.52 skrev Darren Govoni:

> Hi,
>  Sorry if I missed this somewhere or maybe its not released yet, but I
> was anxiously curious about lucene 3.0's expected features/ 
> improvements.
> Is there a list yet?

If everything goes as planned then Lucene 3.0 will be the same as  
Lucene 2.4 but with no depricated methods.

See the JIRA for fixes in 2.4 (current trunk).


            karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 26 23:57:19 2008
Return-Path: <java-user-return-35714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 897 invoked from network); 26 Aug 2008 23:57:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2008 23:57:19 -0000
Received: (qmail 541 invoked by uid 500); 26 Aug 2008 23:57:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 513 invoked by uid 500); 26 Aug 2008 23:57:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 501 invoked by uid 99); 26 Aug 2008 23:57:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 16:57:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gmascia@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 23:56:13 +0000
Received: by ey-out-2122.google.com with SMTP id 6so410915eyi.53
        for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 16:56:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=YvtQOT65PdmcNHqXzg7mmL8QrYOj+6SJThuiOlZObl4=;
        b=Va3CSqjoOAeaAe0QWGtLjeY1NJlwnUOC0n7V0oybFqE/vmg8GIWItZ+EslYnX0HyDW
         wp3v/aTaXwBTZStlLbcHdGVJJ0FB+zkMqEicgmyzPpmEAtmf/qXofA4qyFrd9gs4UJdx
         RZRYOBuyL7cbcZQFF0cE7rWsGsh/1NZYb/yuw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=gdD1Rzme6L8OIxfdbBU0Cu1QMNoNY8qosKhUnMafInWWgsdUsxShoidCDObrw8c/Ix
         Si7z33X3JcJcBF0nQZIWv3Vibgi/I07rYsDpeXwSHjtgudUf5/0MfxwTU5vtKqEUjnBz
         RcomnZXDXvPh70NQMt5B/x9wBAoaNSC3iE5cs=
Received: by 10.210.123.2 with SMTP id v2mr9232226ebc.141.1219794985440;
        Tue, 26 Aug 2008 16:56:25 -0700 (PDT)
Received: by 10.210.79.2 with HTTP; Tue, 26 Aug 2008 16:56:25 -0700 (PDT)
Message-ID: <8a9f60540808261656k6bb50f43he746477367b2d074@mail.gmail.com>
Date: Wed, 27 Aug 2008 01:56:25 +0200
From: "Giovanni Mascia" <gmascia@gmail.com>
To: java-user@lucene.apache.org
Subject: system design for big numbers
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I've been wandering for a while through this list and other Lucene
resources on the web trying to figure out the possible outlines of a
search solution which could fit my case. But as a Lucene newbie I
decided to ask for your help.

Now this is the scenario. I am building a webmail application which
allows users to aggregate their email addresses. Every user can setup
up to 6 mailboxes on his user account on the website. From day 1 the
site enables the new user to start downloading emails from his
accounts.
Email messages and attachments are permanently stored (I am not
describing that here, just presume that the storing side of the
problem is solved).

Now the task is to let users do full-text searches into their stored
emails (forget the attachments).

Say that an average user does receive and downloads 30 emails per day
per account. This makes 180 mails/day, 5400 mails/month, 32400 mails
on the first 6 months.
Say that on day 1 we do face with 100,000 registered users and that
this user base does not change on the 6 months timeframe (ok it's not
realistic, it's just to put down a sort of a scale).

We will face 100,000*32,400 = 3,240,000,000 mails, say 20KB per
message, it's 64,800,000,000KB which makes some 60TBs (!!).

The Lucene index would be some 20TBs (let's say that it would take the
30% of the space needed for the actual content, as stated elsewhere in
this list).

OK let's finally presume that my forecast is unrealistic or just fool,
let's say that we will have to handle a Lucene index of only  3 or 4
TBs.

I was thinking that the best and simplest approach would be creating
one index per user: every user will search only its own mail querying
only its own index. Multiple not-too-big indexes could be easily moved
and scaled to additional disks or machines.

But I've read that even 100 indexes could be too much (also for OS
limitations in concurrently keeping files open, of course).

Maybe my scenario is not a common one, but from where would you start
when trying to outlining a solution which in 6 months could take to a
3-4 TBs index?

Browsing the web it seems that scaling or distributing Lucene indexes
is quite a task, I have in mind too many different options for a
possible architecture but I don't know where to start.

As you may understand I'm not a search-specialist, I presume that in
case of a good start of my project I will get some help or, better,
some money for hire someone. The task is to "resist" until that time
without creating in the first 3-6 months an un-manageable, un-scalable
situation.

Thanks for sharing with me your points of view.

And I may add that the search feature is absolutely needed from the
start, building it in a second phase is out of question.

Giovanni

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 01:27:22 2008
Return-Path: <java-user-return-35715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94728 invoked from network); 27 Aug 2008 01:27:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 01:27:21 -0000
Received: (qmail 76381 invoked by uid 500); 27 Aug 2008 01:27:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76348 invoked by uid 500); 27 Aug 2008 01:27:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76337 invoked by uid 99); 27 Aug 2008 01:27:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 18:27:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 01:26:15 +0000
Received: from [192.168.3.128] (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id 41DB31631E95
	for <java-user@lucene.apache.org>; Tue, 26 Aug 2008 20:26:44 -0500 (CDT)
Message-ID: <48B4AD52.2030409@atlassian.com>
Date: Wed, 27 Aug 2008 11:26:42 +1000
From: Mark Lassau <mlassau@atlassian.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Upgrading from v2.2.0 to v2.3.2
References: <48B3AE1C.7050209@atlassian.com> <29182851-763C-4945-9BF8-D3E1E54D6DAA@mikemccandless.com>
In-Reply-To: <29182851-763C-4945-9BF8-D3E1E54D6DAA@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

Thanks for the prompt response.

Michael McCandless wrote:
>
> Mark Lassau wrote:
>
>> I am a developer on the JIRA Issue tracker, and we are considering 
>> upgrading our Lucene version from v2.2.0 to v2.3.2.
>> I have been charged with doing the risk analysis, and project work.
>>
>> I have read the change lists, and the bugs reported on the Lucene 
>> Issue Tracker (JIRA of course ;), and some of the archived messages 
>> on the Lucene lists.
>
> We love Jira -- thanks!
>
... and we love Lucene :)

<snip>
>
> I would think LUCENE-1044 (not corrupting search index if OS or 
> machine crashes) is important for Atlassian.
>
LUCENE-1044 is only marked as fixed in v2.4
I assumed that the possible corruption on hard shutdown existed in 
v2.2.0 (and earlier), so we are no worse off by upgrading to v2.3.2.
Is that the case?
> The CHANGES.txt should be a reliable list of any 
> non-backwards-compatible changes and how to revert to the old behavior 
> (and if it isn't we'd love to hear about that!).  EG merging is now 
> done concurrently by default, flushing is by RAM usage not doc count, 
> merge selection is by size-in-bytes of each segment (not 
> size-in-doc-count).
Thanks, I read those. Good job on providing a very useful change summary.
However, I guess I was also interested in any reports "from the field". 
Sometimes there can be unexpected consequences.
eg, I read somewhere of one user having multi-threaded issues because of 
a change from Vector to ArrayList in some implementation.

Cheers,
Mark.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 05:27:58 2008
Return-Path: <java-user-return-35716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42628 invoked from network); 27 Aug 2008 05:27:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 05:27:58 -0000
Received: (qmail 28085 invoked by uid 500); 27 Aug 2008 05:27:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28047 invoked by uid 500); 27 Aug 2008 05:27:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28034 invoked by uid 99); 27 Aug 2008 05:27:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 22:27:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Aug 2008 05:26:48 +0000
Received: (qmail 98507 invoked by uid 60001); 27 Aug 2008 05:26:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=KF9tVkrmt0DXG1S81si0qWaUqMCjsImjc1PaiBqtr/TmfEgj6DOJzF85mpbQsldPQiynIdS6d72GyYNVw24Rk6pByr3bUAdxRC2p76EXbyK+OI0dWDewRPz/WFgUbPlxAOPBzHQ9avByYDkrbLEpnHsOGsJFX/yEeN7x1o7OzXQ=;
X-YMail-OSG: Z5dZWFMVM1mi_S9aeeOMez8MI8ryrms0M3zd9zwD.jjGPWA.57bp0Pw2_jKHq780Fm1PfArx0Fhj.Tv_R322STmGRwd4chdvJE5RlWuI8Z832agWCMv8caB1kTGOBp0dgr8zYmXnLaGdf66pZPegVoc-
Received: from [72.227.164.48] by web50308.mail.re2.yahoo.com via HTTP; Tue, 26 Aug 2008 22:26:17 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Tue, 26 Aug 2008 22:26:17 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: system design for big numbers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <821772.97411.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Giovanni,

You could try the approach you described - one index per user.  When I built Simpy (see http://simpy.com ) a few years ago I chose the same approach and I never regretted it.  The hardware behind Simpy is very modest, usage is high, and I never had problems with too many indices open (but you do have to keep track of them and close them when they are no longer needed).

Another approach is to put users in buckets, so you have a single index that holds data for multiple users.  This is a very common approach not just with Lucene, but also database scaling.

With numbers you described you have to think distributed indexing, distributed search, lots of servers, horizontal scaling, index data/user partitioning, etc.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Giovanni Mascia <gmascia@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 26, 2008 7:56:25 PM
> Subject: system design for big numbers
> 
> I've been wandering for a while through this list and other Lucene
> resources on the web trying to figure out the possible outlines of a
> search solution which could fit my case. But as a Lucene newbie I
> decided to ask for your help.
> 
> Now this is the scenario. I am building a webmail application which
> allows users to aggregate their email addresses. Every user can setup
> up to 6 mailboxes on his user account on the website. From day 1 the
> site enables the new user to start downloading emails from his
> accounts.
> Email messages and attachments are permanently stored (I am not
> describing that here, just presume that the storing side of the
> problem is solved).
> 
> Now the task is to let users do full-text searches into their stored
> emails (forget the attachments).
> 
> Say that an average user does receive and downloads 30 emails per day
> per account. This makes 180 mails/day, 5400 mails/month, 32400 mails
> on the first 6 months.
> Say that on day 1 we do face with 100,000 registered users and that
> this user base does not change on the 6 months timeframe (ok it's not
> realistic, it's just to put down a sort of a scale).
> 
> We will face 100,000*32,400 = 3,240,000,000 mails, say 20KB per
> message, it's 64,800,000,000KB which makes some 60TBs (!!).
> 
> The Lucene index would be some 20TBs (let's say that it would take the
> 30% of the space needed for the actual content, as stated elsewhere in
> this list).
> 
> OK let's finally presume that my forecast is unrealistic or just fool,
> let's say that we will have to handle a Lucene index of only  3 or 4
> TBs.
> 
> I was thinking that the best and simplest approach would be creating
> one index per user: every user will search only its own mail querying
> only its own index. Multiple not-too-big indexes could be easily moved
> and scaled to additional disks or machines.
> 
> But I've read that even 100 indexes could be too much (also for OS
> limitations in concurrently keeping files open, of course).
> 
> Maybe my scenario is not a common one, but from where would you start
> when trying to outlining a solution which in 6 months could take to a
> 3-4 TBs index?
> 
> Browsing the web it seems that scaling or distributing Lucene indexes
> is quite a task, I have in mind too many different options for a
> possible architecture but I don't know where to start.
> 
> As you may understand I'm not a search-specialist, I presume that in
> case of a good start of my project I will get some help or, better,
> some money for hire someone. The task is to "resist" until that time
> without creating in the first 3-6 months an un-manageable, un-scalable
> situation.
> 
> Thanks for sharing with me your points of view.
> 
> And I may add that the search feature is absolutely needed from the
> start, building it in a second phase is out of question.
> 
> Giovanni
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 05:28:48 2008
Return-Path: <java-user-return-35717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43218 invoked from network); 27 Aug 2008 05:28:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 05:28:48 -0000
Received: (qmail 29945 invoked by uid 500); 27 Aug 2008 05:28:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29916 invoked by uid 500); 27 Aug 2008 05:28:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29905 invoked by uid 99); 27 Aug 2008 05:28:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 22:28:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 05:27:41 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7R5S0fN013984
	for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 00:28:00 -0500
Received: (qmail 1630 invoked by uid 0); 27 Aug 2008 00:28:00 -0500
Date: 27 Aug 2008 00:28:00 -0500
Message-ID: <20080827052800.1629.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: system design for big numbers
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 266537771 - 2277dcb4c4fb (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=266537771&m=2277dcb4c4fb&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=266537771&m=2277dcb4c4fb&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=266537771&m=2277dcb4c4fb&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 05:29:31 2008
Return-Path: <java-user-return-35718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43654 invoked from network); 27 Aug 2008 05:29:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 05:29:30 -0000
Received: (qmail 31919 invoked by uid 500); 27 Aug 2008 05:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31882 invoked by uid 500); 27 Aug 2008 05:29:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31871 invoked by uid 99); 27 Aug 2008 05:29:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 22:29:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 05:28:25 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7R5SjT0030355
	for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 00:28:45 -0500
Received: (qmail 2187 invoked by uid 0); 27 Aug 2008 00:28:45 -0500
Date: 27 Aug 2008 00:28:45 -0500
Message-ID: <20080827052845.2186.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: system design for big numbers
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.54
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 266537876 - 5acc15741d93
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=266537876&m=5acc15741d93&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=266537876&m=5acc15741d93&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=266537876&m=5acc15741d93&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 05:31:09 2008
Return-Path: <java-user-return-35719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44486 invoked from network); 27 Aug 2008 05:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 05:31:09 -0000
Received: (qmail 34486 invoked by uid 500); 27 Aug 2008 05:31:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34450 invoked by uid 500); 27 Aug 2008 05:31:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34439 invoked by uid 99); 27 Aug 2008 05:31:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 22:31:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Aug 2008 05:30:00 +0000
Received: (qmail 62411 invoked by uid 60001); 27 Aug 2008 05:30:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=v0nafW3ANjDNWowtIjb3D8k7xZwRaMUpgZcyqLOkHSxQt4gG/TpXlRTPaEK+ugejr0X/kdSxbrP219kbRQ1rshfRPDpaNflvqCka3P0zNXC5w8UH9fJ/VHmG4QaabczTlmS0cv1rUeF0wctgByj8g/4WjBplxWbMRIS9me8PzQ0=;
X-YMail-OSG: 2lbCEPIVM1ncjlB.d6etoDcwG_O2gLx2QseMqNTZ0ejzN0S4FPdPUALW4_0WOpr1N2vrzqs2VSztXthQ8CVdwH2K53xEr_ju1YMuYRXRznEm_eA5rulv6jhAtkvjXjmMoSJLvcRfF4rtWefptdJ07nY-
Received: from [72.227.164.48] by web50305.mail.re2.yahoo.com via HTTP; Tue, 26 Aug 2008 22:30:29 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Tue, 26 Aug 2008 22:30:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Case Sensitivity
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <773360.61012.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dino, you lost me half-way through your email :(

NO_NORMS does not mean the field is not tokenized.
UN_TOKENIZED does mean the field is not tokenized.


Otis--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Dino Korah <dckorah@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 26, 2008 9:17:49 AM
> Subject: RE: Case Sensitivity
> 
> I think I should rephrase my question.
> 
> [ Context: Using out of the box StandardAnalyzer for indexing and searching.
> ]
> 
> Is it right to say that a field, if either UN_TOKENIZED or NO_NORMS-ized (
> field.setOmitNorms(true) ), it doesn't get analyzed while indexing?
> Which means that when we search, it gets thru the analyzer and we need to
> analyze them differently in the analyzer we use for searching?
> Doesn't it mean that a setOmitNorms(true) field also doesn't get tokenized?
> 
> What is the best solution if one was to add a set of fields UN_TOKENIZED and
> others TOKENIZED, of the later set a few with setOmitNorms(true) (the index
> writer is plain StandardAnalyzer based)? A per field analyzer at query time
> ?!
> 
> Many thanks,
> Dino
> 
> 
> -----Original Message-----
> From: Dino Korah [mailto:dckorah@gmail.com] 
> Sent: 26 August 2008 12:12
> To: 'java-user@lucene.apache.org'
> Subject: RE: Case Sensitivity
> 
> A little more case sensitivity questions.
> 
> Based on the discussion on http://markmail.org/message/q7dqr4r7o6t6dgo5 and
> on this thread, is it right to say that a field, if either UN_TOKENIZED or
> NO_NORMS-ized, it doesn't get analyzed while indexing? Which means we need
> to case-normalize (down-case) those fields before hand?
> 
> Doest it mean that if I can afford, I should use norms.
> 
> Many thanks,
> Dino
> 
> 
> 
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: 19 August 2008 17:43
> To: java-user@lucene.apache.org
> Subject: RE: Case Sensitivity
> 
> Hi Dino,
> 
> I think you'd benefit from reading some FAQ answers, like:
> 
> "Why is it important to use the same analyzer type during indexing and
> search?"
> 
> 4472d10961ba63c>
> 
> Also, have a look at the AnalysisParalysis wiki page for some hints:
> 
> 
> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
> > From the discussion here what I could understand was, if I am using 
> > StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying, 
> > I shouldn't have any problems with cases.
> 
> If by "shouldn't have problems with cases" you mean "can match
> case-insensitively", then this is true.
> 
> > But if I have any UN_TOKENIZED fields there will be problems if I do 
> > not case-normalize them myself before adding them as a field to the 
> > document.
> 
> Again, assuming that by "case-normalize" you mean "downcase", and that you
> want case-insensitive matching, and that you use the StandardAnalyzer (or
> some other downcasing analyzer) at query-time, then this is true.
> 
> > In my case I have a mixed scenario. I am indexing emails and the email 
> > addresses are indexed UN_TOKENIZED. I do have a second set of custom 
> > tokenized field, which keep the tokens in individual fields with same 
> > name.
> [...]
> > Does it mean that where ever I use UN_TOKENIZED, they do not get 
> > through the StandardAnalyzer before getting Indexed, but they do when 
> > they are searched on?
> 
> This is true.
> 
> > If that is the case, Do I need to normalise them before adding to 
> > document?
> 
> If you want case-insensitive matching, then yes, you do need to normalize
> them before adding them to the document.
> 
> > I also would like to know if it is better to employ an EmailAnalyzer 
> > that makes a TokenStream out of the given email address, rather than 
> > using a simplistic function that gives me a list of string pieces and 
> > adding them one by one. With searches, would both the approaches give 
> > same result?
> 
> Yes, both approaches give the same result.  When you add string pieces
> one-by-one, you are adding multiple same-named fields. By contrast, the
> EmailAnalyzer approach would add a single field, and would allow you to
> control positions (via Token.setPositionIncrement():
> 
> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  Also, if
> you make up an EmailAnalyzer, you can use it to search against your
> tokenized email field, along with other analyzer(s) on other field(s), using
> the PerFieldAnalyzerWrapper
> 
> AnalyzerWrapper.html>.
> 
> Steve
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 05:33:10 2008
Return-Path: <java-user-return-35720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45289 invoked from network); 27 Aug 2008 05:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 05:33:10 -0000
Received: (qmail 36393 invoked by uid 500); 27 Aug 2008 05:33:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36360 invoked by uid 500); 27 Aug 2008 05:33:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36349 invoked by uid 99); 27 Aug 2008 05:33:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Aug 2008 22:33:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Aug 2008 05:32:01 +0000
Received: (qmail 97999 invoked by uid 60001); 27 Aug 2008 05:32:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=a/sL7HL/KZrzeBCCcaEmkA7DXUpPU7WcEm71UibN1fgAuECDwi1MABzmjF7L4UdWwbkT7CAKsLDOqLyoV9143YyS6HfN6Pqbr3qIkxRm1B9xo/aPHsafwK3FliRnu5gS48Bf5YFIY3Pk+9kZn7S9obZmQ+2wG1U2gY+ul65Hf30=;
X-YMail-OSG: N3hmppUVM1mO8mkmgPT.0LqwCcDYxdhlMWCjGI6XTY.Dr0oc8F6MGG96E3sArBZTHExHTtbGFRRrMGZNAzX5ZV9JSllpLf3cGQU0azzVVnsWXdCG6WUyopPDEr63tJYwuQWOyT53w2LUZOdl6e7NXgU-
Received: from [72.227.164.48] by web50309.mail.re2.yahoo.com via HTTP; Tue, 26 Aug 2008 22:32:28 PDT
X-Mailer: YahooMailRC/1042.48 YahooMailWebService/0.7.218.2
Date: Tue, 26 Aug 2008 22:32:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Case Sensitivity
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <941655.96949.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dino,

If a field is not tokenized then it is indexed as is.
For example: "Dino Korah" would get indexed just like that.  It would not get split into multiple tokens, it would not be lowercased, it would not have any stop words removed from it, etc.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Dino Korah <dckorah@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, August 26, 2008 7:11:42 AM
> Subject: RE: Case Sensitivity
> 
> A little more case sensitivity questions.
> 
> Based on the discussion on http://markmail.org/message/q7dqr4r7o6t6dgo5 and
> on this thread, is it right to say that a field, if either UN_TOKENIZED or
> NO_NORMS-ized, it doesn't get analyzed while indexing? Which means we need
> to case-normalize (down-case) those fields before hand?
> 
> Doest it mean that if I can afford, I should use norms.
> 
> Many thanks,
> Dino
> 
> 
> 
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu] 
> Sent: 19 August 2008 17:43
> To: java-user@lucene.apache.org
> Subject: RE: Case Sensitivity
> 
> Hi Dino,
> 
> I think you'd benefit from reading some FAQ answers, like:
> 
> "Why is it important to use the same analyzer type during indexing and
> search?"
> 
> 4472d10961ba63c>
> 
> Also, have a look at the AnalysisParalysis wiki page for some hints:
> 
> 
> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
> > From the discussion here what I could understand was, if I am using 
> > StandardAnalyzer on TOKENIZED fields, for both Indexing and Querying, 
> > I shouldn't have any problems with cases.
> 
> If by "shouldn't have problems with cases" you mean "can match
> case-insensitively", then this is true.
> 
> > But if I have any UN_TOKENIZED fields there will be problems if I do 
> > not case-normalize them myself before adding them as a field to the 
> > document.
> 
> Again, assuming that by "case-normalize" you mean "downcase", and that you
> want case-insensitive matching, and that you use the StandardAnalyzer (or
> some other downcasing analyzer) at query-time, then this is true.
> 
> > In my case I have a mixed scenario. I am indexing emails and the email 
> > addresses are indexed UN_TOKENIZED. I do have a second set of custom 
> > tokenized field, which keep the tokens in individual fields with same 
> > name.
> [...]
> > Does it mean that where ever I use UN_TOKENIZED, they do not get 
> > through the StandardAnalyzer before getting Indexed, but they do when 
> > they are searched on?
> 
> This is true.
> 
> > If that is the case, Do I need to normalise them before adding to 
> > document?
> 
> If you want case-insensitive matching, then yes, you do need to normalize
> them before adding them to the document.
> 
> > I also would like to know if it is better to employ an EmailAnalyzer 
> > that makes a TokenStream out of the given email address, rather than 
> > using a simplistic function that gives me a list of string pieces and 
> > adding them one by one. With searches, would both the approaches give 
> > same result?
> 
> Yes, both approaches give the same result.  When you add string pieces
> one-by-one, you are adding multiple same-named fields. By contrast, the
> EmailAnalyzer approach would add a single field, and would allow you to
> control positions (via Token.setPositionIncrement():
> 
> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  Also, if
> you make up an EmailAnalyzer, you can use it to search against your
> tokenized email field, along with other analyzer(s) on other field(s), using
> the PerFieldAnalyzerWrapper
> 
> AnalyzerWrapper.html>.
> 
> Steve
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 07:08:24 2008
Return-Path: <java-user-return-35721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 644 invoked from network); 27 Aug 2008 07:08:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 07:08:24 -0000
Received: (qmail 49784 invoked by uid 500); 27 Aug 2008 07:08:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49746 invoked by uid 500); 27 Aug 2008 07:08:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49735 invoked by uid 99); 27 Aug 2008 07:08:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 00:08:16 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 07:07:19 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7R77dTl013184
	for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 10:07:39 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id mgbsp2=h; 27 Aug 2008 10:07:00 +0300
Message-ID: <48B4FD32.90102@teamware.com>
Date: Wed, 27 Aug 2008 17:07:30 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Can TermDocs.skipTo() go backwards
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 27 Aug 2008 10:07:39 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I have a custom TopDocsCollector and need to collect a payload from each final 
document hit.  The payload comes from a single term in each hit.

When collecting the payload, I don't want to fetch the payload during the 
collect() method as it will make fetches which may subsequently be bumped from 
the topDocs, so I want to fetch it during the topDocs() call.

I made some performance tests on a simple index of 5M documents.  If I do

reader.termPositions(term);
termPositions.skipTo(scoreDoc.doc);

it takes up to 282 ms just to make the skipTo.

The javadocs imply that skipTo() can only go forwards and as scoreDocs is in 
score order, not docId order, I suppose it's not possible to just use

termPositions.skipTo(scoreDoc.doc);

unless skipTo() can go both backwards.  Can it?  Javadocs imply there is more 
than one type of implementation.

If not I suppose I must resort the scoreDocs by docId order and then loop with 
termPositions.skipTo(scoreDoc.doc).  The number of hits will be typically small 
so it'll be fast enough.

Antony






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 09:11:59 2008
Return-Path: <java-user-return-35722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78682 invoked from network); 27 Aug 2008 09:11:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 09:11:59 -0000
Received: (qmail 7984 invoked by uid 500); 27 Aug 2008 09:11:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7955 invoked by uid 500); 27 Aug 2008 09:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7910 invoked by uid 99); 27 Aug 2008 09:11:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 02:11:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 09:10:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KYH3c-0005tF-CU
	for java-user@lucene.apache.org; Wed, 27 Aug 2008 02:11:16 -0700
Message-ID: <19177298.post@talk.nabble.com>
Date: Wed, 27 Aug 2008 02:11:16 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Index types
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, I know that Lucene uses an inverted index which makes range queries and
great-than/less-than type queries very slow for continuous data types like
times, latitude, etc.  Last time I looked they were converted into huge OR
queries and so had a maximum clause limit.  

I was wondering if any work had been done on integrating other index
implementations?

Thanks,

John
-- 
View this message in context: http://www.nabble.com/Index-types-tp19177298p19177298.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 09:37:49 2008
Return-Path: <java-user-return-35723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90603 invoked from network); 27 Aug 2008 09:37:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 09:37:49 -0000
Received: (qmail 53813 invoked by uid 500); 27 Aug 2008 09:37:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53777 invoked by uid 500); 27 Aug 2008 09:37:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53766 invoked by uid 99); 27 Aug 2008 09:37:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 02:37:39 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 09:36:39 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2499400wra.21
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 02:36:51 -0700 (PDT)
Received: by 10.90.101.17 with SMTP id y17mr6034002agb.57.1219829810712;
        Wed, 27 Aug 2008 02:36:50 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 8sm7512181agd.21.2008.08.27.02.36.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 02:36:49 -0700 (PDT)
Message-Id: <39F2FE29-7A7B-4E0A-B339-4B5A94DEF68A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <773360.61012.qm@web50305.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Case Sensitivity
Date: Wed, 27 Aug 2008 05:36:46 -0400
References: <773360.61012.qm@web50305.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually, as confusing as it is, Field.Index.NO_NORMS means  
Field.Index.UN_TOKENIZED plus field.setOmitNorms(true).

Probably we should rename it to Field.Index.UN_TOKENiZED_NO_NORMS?

Mike

Otis Gospodnetic wrote:

> Dino, you lost me half-way through your email :(
>
> NO_NORMS does not mean the field is not tokenized.
> UN_TOKENIZED does mean the field is not tokenized.
>
>
> Otis--
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Dino Korah <dckorah@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, August 26, 2008 9:17:49 AM
>> Subject: RE: Case Sensitivity
>>
>> I think I should rephrase my question.
>>
>> [ Context: Using out of the box StandardAnalyzer for indexing and  
>> searching.
>> ]
>>
>> Is it right to say that a field, if either UN_TOKENIZED or NO_NORMS- 
>> ized (
>> field.setOmitNorms(true) ), it doesn't get analyzed while indexing?
>> Which means that when we search, it gets thru the analyzer and we  
>> need to
>> analyze them differently in the analyzer we use for searching?
>> Doesn't it mean that a setOmitNorms(true) field also doesn't get  
>> tokenized?
>>
>> What is the best solution if one was to add a set of fields  
>> UN_TOKENIZED and
>> others TOKENIZED, of the later set a few with setOmitNorms(true)  
>> (the index
>> writer is plain StandardAnalyzer based)? A per field analyzer at  
>> query time
>> ?!
>>
>> Many thanks,
>> Dino
>>
>>
>> -----Original Message-----
>> From: Dino Korah [mailto:dckorah@gmail.com]
>> Sent: 26 August 2008 12:12
>> To: 'java-user@lucene.apache.org'
>> Subject: RE: Case Sensitivity
>>
>> A little more case sensitivity questions.
>>
>> Based on the discussion on http://markmail.org/message/q7dqr4r7o6t6dgo5 
>>  and
>> on this thread, is it right to say that a field, if either  
>> UN_TOKENIZED or
>> NO_NORMS-ized, it doesn't get analyzed while indexing? Which means  
>> we need
>> to case-normalize (down-case) those fields before hand?
>>
>> Doest it mean that if I can afford, I should use norms.
>>
>> Many thanks,
>> Dino
>>
>>
>>
>> -----Original Message-----
>> From: Steven A Rowe [mailto:sarowe@syr.edu]
>> Sent: 19 August 2008 17:43
>> To: java-user@lucene.apache.org
>> Subject: RE: Case Sensitivity
>>
>> Hi Dino,
>>
>> I think you'd benefit from reading some FAQ answers, like:
>>
>> "Why is it important to use the same analyzer type during indexing  
>> and
>> search?"
>>
>> 4472d10961ba63c>
>>
>> Also, have a look at the AnalysisParalysis wiki page for some hints:
>>
>>
>> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
>>> From the discussion here what I could understand was, if I am using
>>> StandardAnalyzer on TOKENIZED fields, for both Indexing and  
>>> Querying,
>>> I shouldn't have any problems with cases.
>>
>> If by "shouldn't have problems with cases" you mean "can match
>> case-insensitively", then this is true.
>>
>>> But if I have any UN_TOKENIZED fields there will be problems if I do
>>> not case-normalize them myself before adding them as a field to the
>>> document.
>>
>> Again, assuming that by "case-normalize" you mean "downcase", and  
>> that you
>> want case-insensitive matching, and that you use the  
>> StandardAnalyzer (or
>> some other downcasing analyzer) at query-time, then this is true.
>>
>>> In my case I have a mixed scenario. I am indexing emails and the  
>>> email
>>> addresses are indexed UN_TOKENIZED. I do have a second set of custom
>>> tokenized field, which keep the tokens in individual fields with  
>>> same
>>> name.
>> [...]
>>> Does it mean that where ever I use UN_TOKENIZED, they do not get
>>> through the StandardAnalyzer before getting Indexed, but they do  
>>> when
>>> they are searched on?
>>
>> This is true.
>>
>>> If that is the case, Do I need to normalise them before adding to
>>> document?
>>
>> If you want case-insensitive matching, then yes, you do need to  
>> normalize
>> them before adding them to the document.
>>
>>> I also would like to know if it is better to employ an EmailAnalyzer
>>> that makes a TokenStream out of the given email address, rather than
>>> using a simplistic function that gives me a list of string pieces  
>>> and
>>> adding them one by one. With searches, would both the approaches  
>>> give
>>> same result?
>>
>> Yes, both approaches give the same result.  When you add string  
>> pieces
>> one-by-one, you are adding multiple same-named fields. By contrast,  
>> the
>> EmailAnalyzer approach would add a single field, and would allow  
>> you to
>> control positions (via Token.setPositionIncrement():
>>
>> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.   
>> Also, if
>> you make up an EmailAnalyzer, you can use it to search against your
>> tokenized email field, along with other analyzer(s) on other  
>> field(s), using
>> the PerFieldAnalyzerWrapper
>>
>> AnalyzerWrapper.html>.
>>
>> Steve
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 09:45:18 2008
Return-Path: <java-user-return-35724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94116 invoked from network); 27 Aug 2008 09:45:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 09:45:18 -0000
Received: (qmail 60918 invoked by uid 500); 27 Aug 2008 09:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60890 invoked by uid 500); 27 Aug 2008 09:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60879 invoked by uid 99); 27 Aug 2008 09:45:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 02:45:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 09:44:12 +0000
Received: by gxk11 with SMTP id 11so3207877gxk.5
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 02:44:40 -0700 (PDT)
Received: by 10.151.102.21 with SMTP id e21mr10888950ybm.131.1219830279700;
        Wed, 27 Aug 2008 02:44:39 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id m55sm27861187rnd.17.2008.08.27.02.44.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 02:44:39 -0700 (PDT)
Message-Id: <DBAED543-FF06-4D4F-B743-90A254995D2A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48B4FD32.90102@teamware.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Can TermDocs.skipTo() go backwards
Date: Wed, 27 Aug 2008 05:44:37 -0400
References: <48B4FD32.90102@teamware.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


TermDocs.skipTo() only moves forwards.

Can you use a stored field to retrieve this information, or do you  
really need to store it per-term-occurrence in your docs?

Mike

Antony Bowesman wrote:

> I have a custom TopDocsCollector and need to collect a payload from  
> each final document hit.  The payload comes from a single term in  
> each hit.
>
> When collecting the payload, I don't want to fetch the payload  
> during the collect() method as it will make fetches which may  
> subsequently be bumped from the topDocs, so I want to fetch it  
> during the topDocs() call.
>
> I made some performance tests on a simple index of 5M documents.  If  
> I do
>
> reader.termPositions(term);
> termPositions.skipTo(scoreDoc.doc);
>
> it takes up to 282 ms just to make the skipTo.
>
> The javadocs imply that skipTo() can only go forwards and as  
> scoreDocs is in score order, not docId order, I suppose it's not  
> possible to just use
>
> termPositions.skipTo(scoreDoc.doc);
>
> unless skipTo() can go both backwards.  Can it?  Javadocs imply  
> there is more than one type of implementation.
>
> If not I suppose I must resort the scoreDocs by docId order and then  
> loop with termPositions.skipTo(scoreDoc.doc).  The number of hits  
> will be typically small so it'll be fast enough.
>
> Antony
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 09:50:50 2008
Return-Path: <java-user-return-35725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97461 invoked from network); 27 Aug 2008 09:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 09:50:49 -0000
Received: (qmail 69340 invoked by uid 500); 27 Aug 2008 09:50:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69307 invoked by uid 500); 27 Aug 2008 09:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69296 invoked by uid 99); 27 Aug 2008 09:50:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 02:50:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 09:49:43 +0000
Received: by gxk11 with SMTP id 11so3210667gxk.5
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 02:50:12 -0700 (PDT)
Received: by 10.150.192.7 with SMTP id p7mr10889152ybf.158.1219830612466;
        Wed, 27 Aug 2008 02:50:12 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id d25sm8244610elf.17.2008.08.27.02.50.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 02:50:12 -0700 (PDT)
Message-Id: <9A7F3D44-1326-4463-BFAD-6DFC952D4CA8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48B4AD52.2030409@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Upgrading from v2.2.0 to v2.3.2
Date: Wed, 27 Aug 2008 05:50:10 -0400
References: <48B3AE1C.7050209@atlassian.com> <29182851-763C-4945-9BF8-D3E1E54D6DAA@mikemccandless.com> <48B4AD52.2030409@atlassian.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Mark Lassau wrote:

> Mike,
>
> Thanks for the prompt response.
>
> Michael McCandless wrote:
>>
>> Mark Lassau wrote:
>>
>>> I am a developer on the JIRA Issue tracker, and we are considering  
>>> upgrading our Lucene version from v2.2.0 to v2.3.2.
>>> I have been charged with doing the risk analysis, and project work.
>>>
>>> I have read the change lists, and the bugs reported on the Lucene  
>>> Issue Tracker (JIRA of course ;), and some of the archived  
>>> messages on the Lucene lists.
>>
>> We love Jira -- thanks!
>>
> ... and we love Lucene :)

Glad to hear it!

>
> <snip>
>>
>> I would think LUCENE-1044 (not corrupting search index if OS or  
>> machine crashes) is important for Atlassian.
>>
> LUCENE-1044 is only marked as fixed in v2.4
> I assumed that the possible corruption on hard shutdown existed in  
> v2.2.0 (and earlier), so we are no worse off by upgrading to v2.3.2.
> Is that the case?

That's right.

>> The CHANGES.txt should be a reliable list of any non-backwards- 
>> compatible changes and how to revert to the old behavior (and if it  
>> isn't we'd love to hear about that!).  EG merging is now done  
>> concurrently by default, flushing is by RAM usage not doc count,  
>> merge selection is by size-in-bytes of each segment (not size-in- 
>> doc-count).
> Thanks, I read those. Good job on providing a very useful change  
> summary.
> However, I guess I was also interested in any reports "from the  
> field". Sometimes there can be unexpected consequences.
> eg, I read somewhere of one user having multi-threaded issues  
> because of a change from Vector to ArrayList in some implementation.

OK gotchya.

I think that particular change was to Document (in how it stores  
fields internally); there was a case where someone was actually adding  
fields to a document with multiple threads and the switch to ArrayList  
broke that code.  It's tricky because Document never declared that its  
APIs were thread safe.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 10:21:47 2008
Return-Path: <java-user-return-35726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12284 invoked from network); 27 Aug 2008 10:21:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 10:21:47 -0000
Received: (qmail 23566 invoked by uid 500); 27 Aug 2008 10:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23296 invoked by uid 500); 27 Aug 2008 10:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23285 invoked by uid 99); 27 Aug 2008 10:21:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 03:21:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 10:20:36 +0000
Received: by ey-out-2122.google.com with SMTP id 6so498621eyi.53
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 03:20:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=Zkm4uHKZi15EDzuYnV1E3aJEQJgWE3QfrEiIvUClJsY=;
        b=ifvRKHKoIjbteCguoJlFC57Uq8fVkqGcYC0YiYUEbva7D5stZ3OKohX9yoATQwERiY
         PgGYc6yk5gxpMjRUOCNb3MiZlTe3Lv62VS8P6j/cAIR0DKyhHa0GHKvtkW5xxVivmh28
         aAYIftL9z1phO0YOlMmf3Y5/0IXTPtW9I3N74=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=GSuhHnk9fUsv0yY9MYIbEN7p48XZbaisUHgYweuStdMpm0wouLVD7TTux186yBq0nL
         jDHnPzHGhYhgsr2+8xzDktzgVbw9ZV73PmJGLEo+C3f+D3zDjjwYvPIbI6KZ13HJ52zz
         JTGkshlaX9rBkUcJDswwxMJjz70dXyWAbk6mA=
Received: by 10.210.119.5 with SMTP id r5mr1156526ebc.98.1219832448451;
        Wed, 27 Aug 2008 03:20:48 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id h6sm43287422nfh.29.2008.08.27.03.20.46
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 03:20:47 -0700 (PDT)
Message-Id: <5DBB1C2C-7142-417A-B292-77A9D9BC29D9@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <19177298.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Index types
Date: Wed, 27 Aug 2008 12:20:44 +0200
References: <19177298.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


27 aug 2008 kl. 11.11 skrev John Patterson:

>
> Hi, I know that Lucene uses an inverted index which makes range  
> queries and
> great-than/less-than type queries very slow for continuous data  
> types like
> times, latitude, etc.  Last time I looked they were converted into  
> huge OR
> queries and so had a maximum clause limit.
>
> I was wondering if any work had been done on integrating other index
> implementations?

No, sorry, Lucene is still a lexigraphically based index only.


        karl 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 10:41:21 2008
Return-Path: <java-user-return-35727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22356 invoked from network); 27 Aug 2008 10:41:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 10:41:20 -0000
Received: (qmail 50156 invoked by uid 500); 27 Aug 2008 10:41:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50086 invoked by uid 500); 27 Aug 2008 10:41:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50075 invoked by uid 99); 27 Aug 2008 10:41:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 03:41:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 10:40:09 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1613771fkq.5
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 03:40:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :in-reply-to:x-mimeole:thread-index:message-id;
        bh=rPfF+uxr0cyuthoaV1t7bHIC5NmtAv2drMohhVWCiVA=;
        b=WxWUZLUW1VM9aLG5NONCun+8+pprHQPdzWNtnZNjXbKqZ5z0a7OBPm95oXtVh2FmLd
         dIj00WeKU5/43yrVT3pX0aWyXCkcXhfz/RwJDz7zp3b5Ac8tNtUclD9z1D6n0rmvGE1V
         xDYkzE9fyZuZJ8b8Fj26xUfPx3pykxqpY+HQU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-mailer:in-reply-to:x-mimeole
         :thread-index:message-id;
        b=AaNBVklsGQ6tXvjDE/CCrRug3Q+VL/OH6JithD7EYxfFnuJ1nCJecBwxtKQm80UEwL
         x9TsbqCzDsGurGaSvrH8AUqehDTwujGbN0w+xAq3GafmJmr9+aSqhug/5xQIayjWpx+g
         AOnXqQpXMhuRTEzrTa2cYjrXRXgcRXRc/DhuQ=
Received: by 10.180.231.20 with SMTP id d20mr3743427bkh.11.1219833638141;
        Wed, 27 Aug 2008 03:40:38 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id k5sm5834434nfd.22.2008.08.27.03.40.35
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 03:40:36 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Case Sensitivity
Date: Wed, 27 Aug 2008 11:40:35 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <39F2FE29-7A7B-4E0A-B339-4B5A94DEF68A@mikemccandless.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AckIMVQx1ri6HSGCQES2HJd4/bsmTw==
Message-ID: <48b52f24.0589300a.7670.ffffd427@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Otis & Mike.

Probably we should keep it the way it is now. Would be better to include
more information on the various combinations of these options and its effect
on the final result (set of terms that get to the index). Would be nicer if
we could mention the search scenario as well. To be honest, it took me a
while to get a grip on it.

On the same topic, what would be the effect of the following code.

Document doc = new Document();
Field f = new Field("body", bodyText, Field.Store.NO
,Field.Index.TOKENIZED);
f.setOmitNorms(true);

Would that be equivalent to 

Document doc = new Document();
Field f = new Field("body", bodyText, Field.Store.NO ,Field.Index.NO_NORMS);
And Field.Index.TOKENIZED has no effect after f.setOmitNorms(true); ?


Many thanks,
Dino


-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com] 
Sent: 27 August 2008 10:37
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity


Actually, as confusing as it is, Field.Index.NO_NORMS means
Field.Index.UN_TOKENIZED plus field.setOmitNorms(true).

Probably we should rename it to Field.Index.UN_TOKENiZED_NO_NORMS?

Mike

Otis Gospodnetic wrote:

> Dino, you lost me half-way through your email :(
>
> NO_NORMS does not mean the field is not tokenized.
> UN_TOKENIZED does mean the field is not tokenized.
>
>
> Otis--
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Dino Korah <dckorah@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, August 26, 2008 9:17:49 AM
>> Subject: RE: Case Sensitivity
>>
>> I think I should rephrase my question.
>>
>> [ Context: Using out of the box StandardAnalyzer for indexing and 
>> searching.
>> ]
>>
>> Is it right to say that a field, if either UN_TOKENIZED or NO_NORMS- 
>> ized (
>> field.setOmitNorms(true) ), it doesn't get analyzed while indexing?
>> Which means that when we search, it gets thru the analyzer and we 
>> need to analyze them differently in the analyzer we use for 
>> searching?
>> Doesn't it mean that a setOmitNorms(true) field also doesn't get 
>> tokenized?
>>
>> What is the best solution if one was to add a set of fields 
>> UN_TOKENIZED and others TOKENIZED, of the later set a few with 
>> setOmitNorms(true) (the index writer is plain StandardAnalyzer 
>> based)? A per field analyzer at query time ?!
>>
>> Many thanks,
>> Dino
>>
>>
>> -----Original Message-----
>> From: Dino Korah [mailto:dckorah@gmail.com]
>> Sent: 26 August 2008 12:12
>> To: 'java-user@lucene.apache.org'
>> Subject: RE: Case Sensitivity
>>
>> A little more case sensitivity questions.
>>
>> Based on the discussion on 
>> http://markmail.org/message/q7dqr4r7o6t6dgo5
>>  and
>> on this thread, is it right to say that a field, if either 
>> UN_TOKENIZED or NO_NORMS-ized, it doesn't get analyzed while 
>> indexing? Which means we need to case-normalize (down-case) those 
>> fields before hand?
>>
>> Doest it mean that if I can afford, I should use norms.
>>
>> Many thanks,
>> Dino
>>
>>
>>
>> -----Original Message-----
>> From: Steven A Rowe [mailto:sarowe@syr.edu]
>> Sent: 19 August 2008 17:43
>> To: java-user@lucene.apache.org
>> Subject: RE: Case Sensitivity
>>
>> Hi Dino,
>>
>> I think you'd benefit from reading some FAQ answers, like:
>>
>> "Why is it important to use the same analyzer type during indexing 
>> and search?"
>>
>> 4472d10961ba63c>
>>
>> Also, have a look at the AnalysisParalysis wiki page for some hints:
>>
>>
>> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
>>> From the discussion here what I could understand was, if I am using 
>>> StandardAnalyzer on TOKENIZED fields, for both Indexing and 
>>> Querying, I shouldn't have any problems with cases.
>>
>> If by "shouldn't have problems with cases" you mean "can match 
>> case-insensitively", then this is true.
>>
>>> But if I have any UN_TOKENIZED fields there will be problems if I do 
>>> not case-normalize them myself before adding them as a field to the 
>>> document.
>>
>> Again, assuming that by "case-normalize" you mean "downcase", and 
>> that you want case-insensitive matching, and that you use the 
>> StandardAnalyzer (or some other downcasing analyzer) at query-time, 
>> then this is true.
>>
>>> In my case I have a mixed scenario. I am indexing emails and the 
>>> email addresses are indexed UN_TOKENIZED. I do have a second set of 
>>> custom tokenized field, which keep the tokens in individual fields 
>>> with same name.
>> [...]
>>> Does it mean that where ever I use UN_TOKENIZED, they do not get 
>>> through the StandardAnalyzer before getting Indexed, but they do 
>>> when they are searched on?
>>
>> This is true.
>>
>>> If that is the case, Do I need to normalise them before adding to 
>>> document?
>>
>> If you want case-insensitive matching, then yes, you do need to 
>> normalize them before adding them to the document.
>>
>>> I also would like to know if it is better to employ an EmailAnalyzer 
>>> that makes a TokenStream out of the given email address, rather than 
>>> using a simplistic function that gives me a list of string pieces 
>>> and adding them one by one. With searches, would both the approaches 
>>> give same result?
>>
>> Yes, both approaches give the same result.  When you add string 
>> pieces one-by-one, you are adding multiple same-named fields. By 
>> contrast, the EmailAnalyzer approach would add a single field, and 
>> would allow you to control positions (via 
>> Token.setPositionIncrement():
>>
>> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.   
>> Also, if
>> you make up an EmailAnalyzer, you can use it to search against your 
>> tokenized email field, along with other analyzer(s) on other 
>> field(s), using the PerFieldAnalyzerWrapper
>>
>> AnalyzerWrapper.html>.
>>
>> Steve
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 10:47:47 2008
Return-Path: <java-user-return-35728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26411 invoked from network); 27 Aug 2008 10:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 10:47:47 -0000
Received: (qmail 58502 invoked by uid 500); 27 Aug 2008 10:47:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58177 invoked by uid 500); 27 Aug 2008 10:47:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58166 invoked by uid 99); 27 Aug 2008 10:47:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 03:47:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 10:46:37 +0000
Received: from [212.100.59.186] (helo=dsl59-186.pool.bitel.net)
	by smtprelay01.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KYIYL-0006N1-OB
	for java-user@lucene.apache.org; Wed, 27 Aug 2008 12:47:05 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
Date: Wed, 27 Aug 2008 12:47:39 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <773360.61012.qm@web50305.mail.re2.yahoo.com> <39F2FE29-7A7B-4E0A-B339-4B5A94DEF68A@mikemccandless.com>
In-Reply-To: <39F2FE29-7A7B-4E0A-B339-4B5A94DEF68A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808271247.39683@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Mittwoch, 27. August 2008, Michael McCandless wrote:

> Probably we should rename it to Field.Index.UN_TOKENiZED_NO_NORMS?

I think it's enough if the api doc explains it, no need to rename it. 
What's more confusing is that (UN_)TOKENIZED should actually be called 
(UN_)ANALYZED IMHO.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 10:55:09 2008
Return-Path: <java-user-return-35729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31763 invoked from network); 27 Aug 2008 10:55:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 10:55:09 -0000
Received: (qmail 69793 invoked by uid 500); 27 Aug 2008 10:55:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69760 invoked by uid 500); 27 Aug 2008 10:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69749 invoked by uid 99); 27 Aug 2008 10:55:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 03:55:01 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 10:54:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KYIfY-0001PU-A4
	for java-user@lucene.apache.org; Wed, 27 Aug 2008 03:54:32 -0700
Message-ID: <19178616.post@talk.nabble.com>
Date: Wed, 27 Aug 2008 03:54:32 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Index types
In-Reply-To: <19177298.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <19177298.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi John,

about "integration other index implementation":
Sounds like you need a DBMS with some lucene features.
There was a post about using lucene in Oracle:
http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--to18703473.html#a18741137
and
http://www.nabble.com/Oracle-and-Lucene-Integration-to7501262.html#a7501262

But normaly for a particular problem there is a solution with lucene
(example: you should not index timestamps in lucene, but you can A) index
year, month and day  or   B) generate your own filter which used the
(cached) timestamp from a stored field  or  C) use solr (which contains
timestamp-range implementation out of the box).

Best regards
   Karsten


John Patterson wrote:
> 
> Hi, I know that Lucene uses an inverted index which makes range queries
> and great-than/less-than type queries very slow for continuous data types
> like times, latitude, etc.  Last time I looked they were converted into
> huge OR queries and so had a maximum clause limit.  
> 
> I was wondering if any work had been done on integrating other index
> implementations?
> 
> Thanks,
> 
> John
> 

-- 
View this message in context: http://www.nabble.com/Index-types-tp19177298p19178616.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 11:36:33 2008
Return-Path: <java-user-return-35730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49707 invoked from network); 27 Aug 2008 11:36:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 11:36:33 -0000
Received: (qmail 13298 invoked by uid 500); 27 Aug 2008 11:36:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13262 invoked by uid 500); 27 Aug 2008 11:36:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13251 invoked by uid 99); 27 Aug 2008 11:36:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 04:36:25 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 11:35:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KYJJc-00032J-Lh
	for java-user@lucene.apache.org; Wed, 27 Aug 2008 04:35:56 -0700
Message-ID: <19179175.post@talk.nabble.com>
Date: Wed, 27 Aug 2008 04:35:56 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index types
In-Reply-To: <19178616.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <19177298.post@talk.nabble.com> <19178616.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It is a blurry line between the need to use a DBMS and lucene.  For now
Lucene works fine for my search needs and I use Terracotta to persist
application state.  So no need for a DBMS at all currently - although under
the hood Terracotta uses BDB JE.

Does Solr's range impementation use the large Boolean SHOULD queries?


Karsten F. wrote:
> 
> Hi John,
> 
> about "integration other index implementation":
> Sounds like you need a DBMS with some lucene features.
> There was a post about using lucene in Oracle:
> http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--to18703473.html#a18741137
> and
> http://www.nabble.com/Oracle-and-Lucene-Integration-to7501262.html#a7501262
> 
> But normaly for a particular problem there is a solution with lucene
> (example: you should not index timestamps in lucene, but you can A) index
> year, month and day  or   B) generate your own filter which used the
> (cached) timestamp from a stored field  or  C) use solr (which contains
> timestamp-range implementation out of the box).
> 
> Best regards
>    Karsten
> 
> 
> John Patterson wrote:
>> 
>> Hi, I know that Lucene uses an inverted index which makes range queries
>> and great-than/less-than type queries very slow for continuous data types
>> like times, latitude, etc.  Last time I looked they were converted into
>> huge OR queries and so had a maximum clause limit.  
>> 
>> I was wondering if any work had been done on integrating other index
>> implementations?
>> 
>> Thanks,
>> 
>> John
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Index-types-tp19177298p19179175.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 11:38:50 2008
Return-Path: <java-user-return-35731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50974 invoked from network); 27 Aug 2008 11:38:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 11:38:50 -0000
Received: (qmail 16420 invoked by uid 500); 27 Aug 2008 11:38:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16262 invoked by uid 500); 27 Aug 2008 11:38:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15893 invoked by uid 99); 27 Aug 2008 11:38:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 04:38:39 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 11:37:38 +0000
Received: by an-out-0708.google.com with SMTP id c37so1124402anc.49
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 04:37:50 -0700 (PDT)
Received: by 10.100.251.11 with SMTP id y11mr7094578anh.114.1219837070478;
        Wed, 27 Aug 2008 04:37:50 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h12sm11064967wxd.35.2008.08.27.04.37.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 04:37:49 -0700 (PDT)
Message-Id: <F4229EC9-5779-467D-BB03-8898C5740596@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <200808271247.39683@danielnaber.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Case Sensitivity
Date: Wed, 27 Aug 2008 07:37:46 -0400
References: <773360.61012.qm@web50305.mail.re2.yahoo.com> <39F2FE29-7A7B-4E0A-B339-4B5A94DEF68A@mikemccandless.com> <200808271247.39683@danielnaber.de>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Or ... split the two notions apart so that you have Field.Index. 
[UN_]ANALYZED and, separately, Field.Index.[NO_]NORMS which could then  
be combined together in all 4 combinations (we'd have to fix the  
Parameter class to let you build up a new Parameter by combining  
existing ones...).

I think naming things well is just as important as good javadocs  
explaining things.

But: I think these changes should probably wait until we work out how  
to refactor AbstractField/Fieldable/Field?

Mike

Daniel Naber wrote:

> On Mittwoch, 27. August 2008, Michael McCandless wrote:
>
>> Probably we should rename it to Field.Index.UN_TOKENiZED_NO_NORMS?
>
> I think it's enough if the api doc explains it, no need to rename it.
> What's more confusing is that (UN_)TOKENIZED should actually be called
> (UN_)ANALYZED IMHO.
>
> Regards
> Daniel
>
> -- 
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 13:22:43 2008
Return-Path: <java-user-return-35732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26394 invoked from network); 27 Aug 2008 13:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 13:22:43 -0000
Received: (qmail 72757 invoked by uid 500); 27 Aug 2008 13:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72720 invoked by uid 500); 27 Aug 2008 13:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72702 invoked by uid 99); 27 Aug 2008 13:22:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 06:22:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 13:21:36 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id 17BB62189C
	for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 06:21:58 -0700 (PDT)
Message-Id: <E18D86BE-C89A-42CA-8425-BEF2ECF5ED54@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <D90EA060-861A-467E-8C3C-17D012482F0B@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: lucene 3.0 feature list?
Date: Wed, 27 Aug 2008 09:21:32 -0400
References: <1219791173.6959.20.camel@nuraku> <D90EA060-861A-467E-8C3C-17D012482F0B@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 26, 2008, at 6:59 PM, Karl Wettin wrote:

>
> 27 aug 2008 kl. 00.52 skrev Darren Govoni:
>
>> Hi,
>> Sorry if I missed this somewhere or maybe its not released yet, but I
>> was anxiously curious about lucene 3.0's expected features/ 
>> improvements.
>> Is there a list yet?
>
> If everything goes as planned then Lucene 3.0 will be the same as  
> Lucene 2.4 but with no depricated methods.
>

It will also be JDK 1.5.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 15:09:42 2008
Return-Path: <java-user-return-35733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9453 invoked from network); 27 Aug 2008 15:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 15:09:41 -0000
Received: (qmail 75375 invoked by uid 500); 27 Aug 2008 15:09:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75350 invoked by uid 500); 27 Aug 2008 15:09:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75339 invoked by uid 99); 27 Aug 2008 15:09:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 08:09:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Aug 2008 15:08:32 +0000
Received: (qmail 23999 invoked by uid 60001); 27 Aug 2008 15:08:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=vG/Ir9MCih5R4lqwuDjqMIn2bIxnK/NER6cKIjQaLNbdospdsx6oDWj8xufxM4gIqA/3MerBvSV/Jej3oR98hiV0nxI7lLOI7G8V3iQidGzrdW3X6CDPIOWl1pjd+4Mi5l/fsdM9NxsDynC3+pcNEvNs3VVa9cq4Q11kjgA+Syw=;
X-YMail-OSG: dJ.C_EgVM1kCUGA74F5f9IQkjSzcatd7jh9xWgmkKlTMt4pQiJ5VcVARUBN_oCgRVg--
Received: from [65.200.144.21] by web50308.mail.re2.yahoo.com via HTTP; Wed, 27 Aug 2008 08:08:01 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Wed, 27 Aug 2008 08:08:01 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Case Sensitivity
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <507692.23080.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Nah, I think the names are fine, I simply forgot.  I looked at the javadocs, it clearly says NO_NORMS doesn't get passed through an Analyzer.  Maybe in 3.0 we can switch to NOT_ANALYZED, as suggested, to reflect reality more closely.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, August 27, 2008 5:36:46 AM
> Subject: Re: Case Sensitivity
> 
> 
> Actually, as confusing as it is, Field.Index.NO_NORMS means  
> Field.Index.UN_TOKENIZED plus field.setOmitNorms(true).
> 
> Probably we should rename it to Field.Index.UN_TOKENiZED_NO_NORMS?
> 
> Mike
> 
> Otis Gospodnetic wrote:
> 
> > Dino, you lost me half-way through your email :(
> >
> > NO_NORMS does not mean the field is not tokenized.
> > UN_TOKENIZED does mean the field is not tokenized.
> >
> >
> > Otis--
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> >
> > ----- Original Message ----
> >> From: Dino Korah 
> >> To: java-user@lucene.apache.org
> >> Sent: Tuesday, August 26, 2008 9:17:49 AM
> >> Subject: RE: Case Sensitivity
> >>
> >> I think I should rephrase my question.
> >>
> >> [ Context: Using out of the box StandardAnalyzer for indexing and  
> >> searching.
> >> ]
> >>
> >> Is it right to say that a field, if either UN_TOKENIZED or NO_NORMS- 
> >> ized (
> >> field.setOmitNorms(true) ), it doesn't get analyzed while indexing?
> >> Which means that when we search, it gets thru the analyzer and we  
> >> need to
> >> analyze them differently in the analyzer we use for searching?
> >> Doesn't it mean that a setOmitNorms(true) field also doesn't get  
> >> tokenized?
> >>
> >> What is the best solution if one was to add a set of fields  
> >> UN_TOKENIZED and
> >> others TOKENIZED, of the later set a few with setOmitNorms(true)  
> >> (the index
> >> writer is plain StandardAnalyzer based)? A per field analyzer at  
> >> query time
> >> ?!
> >>
> >> Many thanks,
> >> Dino
> >>
> >>
> >> -----Original Message-----
> >> From: Dino Korah [mailto:dckorah@gmail.com]
> >> Sent: 26 August 2008 12:12
> >> To: 'java-user@lucene.apache.org'
> >> Subject: RE: Case Sensitivity
> >>
> >> A little more case sensitivity questions.
> >>
> >> Based on the discussion on http://markmail.org/message/q7dqr4r7o6t6dgo5 
> >>  and
> >> on this thread, is it right to say that a field, if either  
> >> UN_TOKENIZED or
> >> NO_NORMS-ized, it doesn't get analyzed while indexing? Which means  
> >> we need
> >> to case-normalize (down-case) those fields before hand?
> >>
> >> Doest it mean that if I can afford, I should use norms.
> >>
> >> Many thanks,
> >> Dino
> >>
> >>
> >>
> >> -----Original Message-----
> >> From: Steven A Rowe [mailto:sarowe@syr.edu]
> >> Sent: 19 August 2008 17:43
> >> To: java-user@lucene.apache.org
> >> Subject: RE: Case Sensitivity
> >>
> >> Hi Dino,
> >>
> >> I think you'd benefit from reading some FAQ answers, like:
> >>
> >> "Why is it important to use the same analyzer type during indexing  
> >> and
> >> search?"
> >>
> >> 4472d10961ba63c>
> >>
> >> Also, have a look at the AnalysisParalysis wiki page for some hints:
> >>
> >>
> >> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
> >>> From the discussion here what I could understand was, if I am using
> >>> StandardAnalyzer on TOKENIZED fields, for both Indexing and  
> >>> Querying,
> >>> I shouldn't have any problems with cases.
> >>
> >> If by "shouldn't have problems with cases" you mean "can match
> >> case-insensitively", then this is true.
> >>
> >>> But if I have any UN_TOKENIZED fields there will be problems if I do
> >>> not case-normalize them myself before adding them as a field to the
> >>> document.
> >>
> >> Again, assuming that by "case-normalize" you mean "downcase", and  
> >> that you
> >> want case-insensitive matching, and that you use the  
> >> StandardAnalyzer (or
> >> some other downcasing analyzer) at query-time, then this is true.
> >>
> >>> In my case I have a mixed scenario. I am indexing emails and the  
> >>> email
> >>> addresses are indexed UN_TOKENIZED. I do have a second set of custom
> >>> tokenized field, which keep the tokens in individual fields with  
> >>> same
> >>> name.
> >> [...]
> >>> Does it mean that where ever I use UN_TOKENIZED, they do not get
> >>> through the StandardAnalyzer before getting Indexed, but they do  
> >>> when
> >>> they are searched on?
> >>
> >> This is true.
> >>
> >>> If that is the case, Do I need to normalise them before adding to
> >>> document?
> >>
> >> If you want case-insensitive matching, then yes, you do need to  
> >> normalize
> >> them before adding them to the document.
> >>
> >>> I also would like to know if it is better to employ an EmailAnalyzer
> >>> that makes a TokenStream out of the given email address, rather than
> >>> using a simplistic function that gives me a list of string pieces  
> >>> and
> >>> adding them one by one. With searches, would both the approaches  
> >>> give
> >>> same result?
> >>
> >> Yes, both approaches give the same result.  When you add string  
> >> pieces
> >> one-by-one, you are adding multiple same-named fields. By contrast,  
> >> the
> >> EmailAnalyzer approach would add a single field, and would allow  
> >> you to
> >> control positions (via Token.setPositionIncrement():
> >>
> >> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  
> >> Also, if
> >> you make up an EmailAnalyzer, you can use it to search against your
> >> tokenized email field, along with other analyzer(s) on other  
> >> field(s), using
> >> the PerFieldAnalyzerWrapper
> >>
> >> AnalyzerWrapper.html>.
> >>
> >> Steve
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 18:01:14 2008
Return-Path: <java-user-return-35734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22663 invoked from network); 27 Aug 2008 18:01:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 18:01:14 -0000
Received: (qmail 46910 invoked by uid 500); 27 Aug 2008 18:01:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46884 invoked by uid 500); 27 Aug 2008 18:01:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46873 invoked by uid 99); 27 Aug 2008 18:01:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 11:01:05 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.71.238.250] (HELO outbound.mse19.exchange.ms) (64.71.238.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 18:00:07 +0000
Received: from mse19be2.mse19.exchange.ms ([172.28.1.9]) by
 mse19fe2.mse19.exchange.ms ([172.29.12.68]) with mapi; Wed, 27 Aug 2008
 14:00:36 -0400
From: Shi Hui Liu <shihui@nextbio.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 27 Aug 2008 14:00:32 -0400
Subject: Is there a Query boosting 50-50 over 1000-1 ?
Thread-Topic: Is there a Query boosting 50-50 over 1000-1 ?
Thread-Index: AckIbsyTip8g/55iTzCyfHJssXk1hQ==
Message-ID: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5Emse19be2mse19_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5Emse19be2mse19_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

Say, I have a query with two terms: A + B, I want to return the documents w=
ith 50 of A and 50 of B on top of documents with 1000 of A and 1 of B. Is t=
here an existing Query class can handle this case or I have to implement a =
new Query?

Thank you,
Shi Hui

--_000_4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5Emse19be2mse19_--

From java-user-return-35735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 18:56:07 2008
Return-Path: <java-user-return-35735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70027 invoked from network); 27 Aug 2008 18:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 18:56:07 -0000
Received: (qmail 28279 invoked by uid 500); 27 Aug 2008 18:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27477 invoked by uid 500); 27 Aug 2008 18:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27466 invoked by uid 99); 27 Aug 2008 18:55:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 11:55:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 18:55:00 +0000
Received: by gxk6 with SMTP id 6so4258989gxk.5
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 11:55:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WnwNc1N7UcBSCkhZHUdhQDddmffN7oc5va0w80OjwSQ=;
        b=RRrvKzwoP5huwNYWsSNthF8fGEtwpyLFwrRZAGx8RhZbAgzoJElAlPGTtIPCCLvklP
         vgkUv5sERXQCvH56LTs5ELhpHCPM7jfpVbqsN+79X+sSYnaq2GgScALMpwkDri19eRGM
         LUicIAn5lO98UkIJ98/eJfv2UHuqxavABVHO4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vJEdQkVenaA0SMKOKvG8oF4o10VdpgtQ09Ad7+lavqT/Z/FH/q5mInecJLLR8Cq/nr
         Pb5mH59D9Xr96CIJiEgLR8lT1aXq+V0A3DGvk1sjRlR7QsIfiUwy46lA1Rz3mn00dbNt
         FHUqi+FSdG0b0umlUkX8x3ydfdgynNMQiV4Jk=
Received: by 10.151.147.16 with SMTP id z16mr609397ybn.128.1219863330598;
        Wed, 27 Aug 2008 11:55:30 -0700 (PDT)
Received: by 10.151.43.11 with HTTP; Wed, 27 Aug 2008 11:55:30 -0700 (PDT)
Message-ID: <efd1bd310808271155n4946cf9ic68b03e807c2996f@mail.gmail.com>
Date: Wed, 27 Aug 2008 11:55:30 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene 3.0 feature list?
In-Reply-To: <D90EA060-861A-467E-8C3C-17D012482F0B@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22508_18864331.1219863330577"
References: <1219791173.6959.20.camel@nuraku>
	 <D90EA060-861A-467E-8C3C-17D012482F0B@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22508_18864331.1219863330577
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So, you mean you're gonna be removing the deprecated methods from the api?

Andre

On Tue, Aug 26, 2008 at 3:59 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

>
> 27 aug 2008 kl. 00.52 skrev Darren Govoni:
>
>  Hi,
>>  Sorry if I missed this somewhere or maybe its not released yet, but I
>> was anxiously curious about lucene 3.0's expected features/improvements.
>> Is there a list yet?
>>
>
> If everything goes as planned then Lucene 3.0 will be the same as Lucene
> 2.4 but with no depricated methods.
>
> See the JIRA for fixes in 2.4 (current trunk).
>
>
>           karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22508_18864331.1219863330577--

From java-user-return-35736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 19:14:38 2008
Return-Path: <java-user-return-35736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85337 invoked from network); 27 Aug 2008 19:14:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 19:14:38 -0000
Received: (qmail 61423 invoked by uid 500); 27 Aug 2008 19:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61395 invoked by uid 500); 27 Aug 2008 19:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61384 invoked by uid 99); 27 Aug 2008 19:14:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 12:14:28 -0700
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 19:13:30 +0000
X-SBRS: None
X-MID: 95957565
Received: from fmd3tj001.fda.gov ([10.160.10.76])
  by ironport5.fda.gov with ESMTP; 27 Aug 2008 15:13:57 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.63]) by FMD3TJ001.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 27 Aug 2008 15:13:57 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C90879.0D3BA2C5"
Subject: Lucene sample code and api documentation
Date: Wed, 27 Aug 2008 15:13:56 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73ACB@FMD3VS012.fda.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene sample code and api documentation
Thread-Index: AckIeQ0xPmRJyq3+R86KSLdgoWhizw==
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Aug 2008 19:13:57.0561 (UTC) FILETIME=[0DFE6290:01C90879]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C90879.0D3BA2C5
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,

I'm new to Lucene.=20

1. Could you please tell me as to where do we see the old emails (even
one day old), not as an archived file  but as  a mailing list.
2. Where do we look for sample codes? Or detailed tutorials?
3. I found one at LuceneTutorial.com, but it is only for command line.
Not for web based one.

Thanks in advance,
Sithu

------_=_NextPart_001_01C90879.0D3BA2C5--

From java-user-return-35737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 20:22:21 2008
Return-Path: <java-user-return-35737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39857 invoked from network); 27 Aug 2008 20:22:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 20:22:20 -0000
Received: (qmail 84504 invoked by uid 500); 27 Aug 2008 20:22:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84472 invoked by uid 500); 27 Aug 2008 20:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84461 invoked by uid 99); 27 Aug 2008 20:22:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 13:22:10 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Aug 2008 20:21:13 +0000
Received: (qmail 78995 invoked from network); 27 Aug 2008 20:21:40 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 27 Aug 2008 20:21:40 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: lucene 3.0 feature list?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <efd1bd310808271155n4946cf9ic68b03e807c2996f@mail.gmail.com>
References: <1219791173.6959.20.camel@nuraku>
	 <D90EA060-861A-467E-8C3C-17D012482F0B@gmail.com>
	 <efd1bd310808271155n4946cf9ic68b03e807c2996f@mail.gmail.com>
Content-Type: text/plain
Date: Wed, 27 Aug 2008 16:21:44 -0400
Message-Id: <1219868504.6959.81.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I understand that the API will be 2.4 compatible. That's not really a
feature. I can go hunt through JIRA, but was wondering if there is a
clean bulleted list of 'Hey! Here's what's great about 3.0'. Things like
maybe, performance related, new analyzers, query semantics, searchers,
writers, etc. Just curious, but I can dig through the tickets/code and
find out too.

Cheers!

On Wed, 2008-08-27 at 11:55 -0700, Andre Rubin wrote:
> So, you mean you're gonna be removing the deprecated methods from the api?
> 
> Andre
> 
> On Tue, Aug 26, 2008 at 3:59 PM, Karl Wettin <karl.wettin@gmail.com> wrote:
> 
> >
> > 27 aug 2008 kl. 00.52 skrev Darren Govoni:
> >
> >  Hi,
> >>  Sorry if I missed this somewhere or maybe its not released yet, but I
> >> was anxiously curious about lucene 3.0's expected features/improvements.
> >> Is there a list yet?
> >>
> >
> > If everything goes as planned then Lucene 3.0 will be the same as Lucene
> > 2.4 but with no depricated methods.
> >
> > See the JIRA for fixes in 2.4 (current trunk).
> >
> >
> >           karl
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 20:45:23 2008
Return-Path: <java-user-return-35738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53900 invoked from network); 27 Aug 2008 20:45:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 20:45:22 -0000
Received: (qmail 38353 invoked by uid 500); 27 Aug 2008 20:45:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38077 invoked by uid 500); 27 Aug 2008 20:45:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38066 invoked by uid 99); 27 Aug 2008 20:45:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 13:45:14 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 20:44:15 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 7ED93190E35
	for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 13:44:40 -0700 (PDT)
Message-Id: <F263A070-A8C3-4627-BA23-0FF8302E7286@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <efd1bd310808271155n4946cf9ic68b03e807c2996f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: lucene 3.0 feature list?
Date: Wed, 27 Aug 2008 16:44:13 -0400
References: <1219791173.6959.20.camel@nuraku> <D90EA060-861A-467E-8C3C-17D012482F0B@gmail.com> <efd1bd310808271155n4946cf9ic68b03e807c2996f@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

See http://wiki.apache.org/lucene-java/BackwardsCompatibility

Generally speaking 3.0 will be the same as 2.9 minus the deprecated  
methods (and, in this case, the upgrade to JDK 1.5).  That is not to  
say that the file formats, etc. under the hood won't change and that  
there won't be new methods and capabilities (there certainly will be,  
otherwise what's the point?).  For instance, we have _DISCUSSED_  
changing Document/Fieldable into two separate concerns based on index  
time use and search time use.  This has not been committed to, though.

-Grant

On Aug 27, 2008, at 2:55 PM, Andre Rubin wrote:

> So, you mean you're gonna be removing the deprecated methods from  
> the api?
>
> Andre
>
> On Tue, Aug 26, 2008 at 3:59 PM, Karl Wettin <karl.wettin@gmail.com>  
> wrote:
>
>>
>> 27 aug 2008 kl. 00.52 skrev Darren Govoni:
>>
>> Hi,
>>> Sorry if I missed this somewhere or maybe its not released yet,  
>>> but I
>>> was anxiously curious about lucene 3.0's expected features/ 
>>> improvements.
>>> Is there a list yet?
>>>
>>
>> If everything goes as planned then Lucene 3.0 will be the same as  
>> Lucene
>> 2.4 but with no depricated methods.
>>
>> See the JIRA for fixes in 2.4 (current trunk).
>>
>>
>>          karl
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 21:20:15 2008
Return-Path: <java-user-return-35739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71613 invoked from network); 27 Aug 2008 21:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 21:20:15 -0000
Received: (qmail 9907 invoked by uid 500); 27 Aug 2008 21:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9876 invoked by uid 500); 27 Aug 2008 21:20:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9865 invoked by uid 99); 27 Aug 2008 21:20:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 14:20:06 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 21:19:09 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7RLJU1b032407
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 00:19:30 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m@cb1i+q; 28 Aug 2008 00:19:00 +0300
Message-ID: <48B5C4D2.3080304@teamware.com>
Date: Thu, 28 Aug 2008 07:19:14 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can TermDocs.skipTo() go backwards
References: <48B4FD32.90102@teamware.com> <DBAED543-FF06-4D4F-B743-90A254995D2A@mikemccandless.com>
In-Reply-To: <DBAED543-FF06-4D4F-B743-90A254995D2A@mikemccandless.com>
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 28 Aug 2008 00:19:31 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
> 
> TermDocs.skipTo() only moves forwards.
> 
> Can you use a stored field to retrieve this information, or do you 
> really need to store it per-term-occurrence in your docs?

I discussed my use case with Doron earlier and there were two options, either to 
use payloads or stored fields.  With the payload case, for a single field 
(owner) in a document there are multiple unique terms (ownerId), each with a 
payload (access Id).

Using stored fields I have to store something like

ownerId:accessId
ownerId:accessId
ownerId:accessId

then fetch the stored field for the document and then find the particular 
accessId for the owner I am searching for.

I was testing the performance implications of each as I understand fetching 
stored fields is not optimal and the payload scenario is logically a better fit, 
as every owner will have a different accessId for every Document.

What would fit my usage would be something like

byte[] b = doc.getPayload("owner", ownerId);

where for the given OID, I can retrieve the payload I associated with it, when I did

doc.add(new Field("owner", ownerId, accessPayload);

but that's not how it works :(

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 22:42:54 2008
Return-Path: <java-user-return-35740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26982 invoked from network); 27 Aug 2008 22:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 22:42:54 -0000
Received: (qmail 18024 invoked by uid 500); 27 Aug 2008 22:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17996 invoked by uid 500); 27 Aug 2008 22:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17985 invoked by uid 99); 27 Aug 2008 22:42:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 15:42:45 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.244] (HELO ag-out-0708.google.com) (72.14.246.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 22:41:47 +0000
Received: by ag-out-0708.google.com with SMTP id 23so277156agd.11
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 15:42:16 -0700 (PDT)
Received: by 10.110.33.15 with SMTP id g15mr481591tig.54.1219876936010;
        Wed, 27 Aug 2008 15:42:16 -0700 (PDT)
Received: from DineshPC ( [122.162.68.133])
        by mx.google.com with ESMTPS id 22sm420383tim.10.2008.08.27.15.42.11
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 15:42:14 -0700 (PDT)
From: "Neetu" <neetu@valiantica.com>
To: <java-user@lucene.apache.org>
Subject: We need Java Developer with Lucene experience in SSFO, CA
Date: Wed, 27 Aug 2008 15:42:10 -0700
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAOwdFxCBdjpMoIDe1DF0AAfCgAAAEAAAAKSDRyPMsnZMn685CQA8LcEBAAAAAA==@valiantica.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0F9F_01C9085B.7B0F0D80"
X-Priority: 1 (Highest)
X-MSMail-Priority: High
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.0.6001.18049
Thread-Index: AckH1Z5S/Da2vb8nSACyeQccdTCyYgAvlOTQ
Importance: High
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0F9F_01C9085B.7B0F0D80
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit


Contractor position in SSF (South San Francisco)

  _____  


We are looking for excellent Java developer who loves solving difficult
problems. The Project itself is innovative and fun. 

Required Qualifications: 
- At least 5 years in J2EE development, in real demo-able projects 
- Computer Science or Computer Engineer degree. 
- Solid Experience on Spring, Lucene 
- Solid Experience on performance tuning 

Desired Qualifications: 
- Deeply involved and worked on one or more demo-able web2.0 project 
- Experience on Mule 
- Hand-on experience on C, C++, or Objective C 


Project Period: 
3-month contract, extend-able 

Time to join: 
Immediately (ASAP) 

 

Feel free to contact me for more details.

 

Thank you for your time.

 

Neetu

-----------------------

Valiantica, Inc.

Phone: 408-693-3145

www.valiantica.com

YahooIM: neetuvaliantica

 

 


------=_NextPart_000_0F9F_01C9085B.7B0F0D80--


From java-user-return-35741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 23:27:27 2008
Return-Path: <java-user-return-35741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59860 invoked from network); 27 Aug 2008 23:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 23:27:27 -0000
Received: (qmail 57339 invoked by uid 500); 27 Aug 2008 23:27:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57303 invoked by uid 500); 27 Aug 2008 23:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57291 invoked by uid 99); 27 Aug 2008 23:27:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 16:27:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 23:26:18 +0000
Received: by wx-out-0506.google.com with SMTP id h29so59933wxd.20
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 16:26:29 -0700 (PDT)
Received: by 10.70.27.5 with SMTP id a5mr587212wxa.63.1219879589590;
        Wed, 27 Aug 2008 16:26:29 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id h40sm357375wxd.33.2008.08.27.16.26.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 16:26:28 -0700 (PDT)
Message-Id: <184419B1-6589-41CB-B5D4-3EA9C4215A3B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <507692.23080.qm@web50308.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Case Sensitivity
Date: Wed, 27 Aug 2008 19:26:27 -0400
References: <507692.23080.qm@web50308.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I'll open an issue to do this renaming in 3.0, which actually means  
we do the renaming in 2.4 or 2.9 (deprecating the old ones) then in  
3.0 removing the old ones.

Mike

On Aug 27, 2008, at 11:08 AM, Otis Gospodnetic wrote:

> Nah, I think the names are fine, I simply forgot.  I looked at the  
> javadocs, it clearly says NO_NORMS doesn't get passed through an  
> Analyzer.  Maybe in 3.0 we can switch to NOT_ANALYZED, as suggested,  
> to reflect reality more closely.
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Michael McCandless <lucene@mikemccandless.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, August 27, 2008 5:36:46 AM
>> Subject: Re: Case Sensitivity
>>
>>
>> Actually, as confusing as it is, Field.Index.NO_NORMS means
>> Field.Index.UN_TOKENIZED plus field.setOmitNorms(true).
>>
>> Probably we should rename it to Field.Index.UN_TOKENiZED_NO_NORMS?
>>
>> Mike
>>
>> Otis Gospodnetic wrote:
>>
>>> Dino, you lost me half-way through your email :(
>>>
>>> NO_NORMS does not mean the field is not tokenized.
>>> UN_TOKENIZED does mean the field is not tokenized.
>>>
>>>
>>> Otis--
>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>
>>>
>>>
>>> ----- Original Message ----
>>>> From: Dino Korah
>>>> To: java-user@lucene.apache.org
>>>> Sent: Tuesday, August 26, 2008 9:17:49 AM
>>>> Subject: RE: Case Sensitivity
>>>>
>>>> I think I should rephrase my question.
>>>>
>>>> [ Context: Using out of the box StandardAnalyzer for indexing and
>>>> searching.
>>>> ]
>>>>
>>>> Is it right to say that a field, if either UN_TOKENIZED or  
>>>> NO_NORMS-
>>>> ized (
>>>> field.setOmitNorms(true) ), it doesn't get analyzed while indexing?
>>>> Which means that when we search, it gets thru the analyzer and we
>>>> need to
>>>> analyze them differently in the analyzer we use for searching?
>>>> Doesn't it mean that a setOmitNorms(true) field also doesn't get
>>>> tokenized?
>>>>
>>>> What is the best solution if one was to add a set of fields
>>>> UN_TOKENIZED and
>>>> others TOKENIZED, of the later set a few with setOmitNorms(true)
>>>> (the index
>>>> writer is plain StandardAnalyzer based)? A per field analyzer at
>>>> query time
>>>> ?!
>>>>
>>>> Many thanks,
>>>> Dino
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Dino Korah [mailto:dckorah@gmail.com]
>>>> Sent: 26 August 2008 12:12
>>>> To: 'java-user@lucene.apache.org'
>>>> Subject: RE: Case Sensitivity
>>>>
>>>> A little more case sensitivity questions.
>>>>
>>>> Based on the discussion on http://markmail.org/message/q7dqr4r7o6t6dgo5
>>>> and
>>>> on this thread, is it right to say that a field, if either
>>>> UN_TOKENIZED or
>>>> NO_NORMS-ized, it doesn't get analyzed while indexing? Which means
>>>> we need
>>>> to case-normalize (down-case) those fields before hand?
>>>>
>>>> Doest it mean that if I can afford, I should use norms.
>>>>
>>>> Many thanks,
>>>> Dino
>>>>
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Steven A Rowe [mailto:sarowe@syr.edu]
>>>> Sent: 19 August 2008 17:43
>>>> To: java-user@lucene.apache.org
>>>> Subject: RE: Case Sensitivity
>>>>
>>>> Hi Dino,
>>>>
>>>> I think you'd benefit from reading some FAQ answers, like:
>>>>
>>>> "Why is it important to use the same analyzer type during indexing
>>>> and
>>>> search?"
>>>>
>>>> 4472d10961ba63c>
>>>>
>>>> Also, have a look at the AnalysisParalysis wiki page for some  
>>>> hints:
>>>>
>>>>
>>>> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
>>>>> From the discussion here what I could understand was, if I am  
>>>>> using
>>>>> StandardAnalyzer on TOKENIZED fields, for both Indexing and
>>>>> Querying,
>>>>> I shouldn't have any problems with cases.
>>>>
>>>> If by "shouldn't have problems with cases" you mean "can match
>>>> case-insensitively", then this is true.
>>>>
>>>>> But if I have any UN_TOKENIZED fields there will be problems if  
>>>>> I do
>>>>> not case-normalize them myself before adding them as a field to  
>>>>> the
>>>>> document.
>>>>
>>>> Again, assuming that by "case-normalize" you mean "downcase", and
>>>> that you
>>>> want case-insensitive matching, and that you use the
>>>> StandardAnalyzer (or
>>>> some other downcasing analyzer) at query-time, then this is true.
>>>>
>>>>> In my case I have a mixed scenario. I am indexing emails and the
>>>>> email
>>>>> addresses are indexed UN_TOKENIZED. I do have a second set of  
>>>>> custom
>>>>> tokenized field, which keep the tokens in individual fields with
>>>>> same
>>>>> name.
>>>> [...]
>>>>> Does it mean that where ever I use UN_TOKENIZED, they do not get
>>>>> through the StandardAnalyzer before getting Indexed, but they do
>>>>> when
>>>>> they are searched on?
>>>>
>>>> This is true.
>>>>
>>>>> If that is the case, Do I need to normalise them before adding to
>>>>> document?
>>>>
>>>> If you want case-insensitive matching, then yes, you do need to
>>>> normalize
>>>> them before adding them to the document.
>>>>
>>>>> I also would like to know if it is better to employ an  
>>>>> EmailAnalyzer
>>>>> that makes a TokenStream out of the given email address, rather  
>>>>> than
>>>>> using a simplistic function that gives me a list of string pieces
>>>>> and
>>>>> adding them one by one. With searches, would both the approaches
>>>>> give
>>>>> same result?
>>>>
>>>> Yes, both approaches give the same result.  When you add string
>>>> pieces
>>>> one-by-one, you are adding multiple same-named fields. By contrast,
>>>> the
>>>> EmailAnalyzer approach would add a single field, and would allow
>>>> you to
>>>> control positions (via Token.setPositionIncrement():
>>>>
>>>> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.
>>>> Also, if
>>>> you make up an EmailAnalyzer, you can use it to search against your
>>>> tokenized email field, along with other analyzer(s) on other
>>>> field(s), using
>>>> the PerFieldAnalyzerWrapper
>>>>
>>>> AnalyzerWrapper.html>.
>>>>
>>>> Steve
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 23:33:35 2008
Return-Path: <java-user-return-35742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64595 invoked from network); 27 Aug 2008 23:33:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 23:33:35 -0000
Received: (qmail 65894 invoked by uid 500); 27 Aug 2008 23:33:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65694 invoked by uid 500); 27 Aug 2008 23:33:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65683 invoked by uid 99); 27 Aug 2008 23:33:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 16:33:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 23:32:28 +0000
Received: by gxk11 with SMTP id 11so188588gxk.5
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 16:32:56 -0700 (PDT)
Received: by 10.150.121.3 with SMTP id t3mr1001575ybc.179.1219879976143;
        Wed, 27 Aug 2008 16:32:56 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id v76sm826350rnb.5.2008.08.27.16.32.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 27 Aug 2008 16:32:55 -0700 (PDT)
Message-Id: <A4E136CC-BADA-43C4-966E-4D6DFE81E50E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48B5C4D2.3080304@teamware.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Can TermDocs.skipTo() go backwards
Date: Wed, 27 Aug 2008 19:32:53 -0400
References: <48B4FD32.90102@teamware.com> <DBAED543-FF06-4D4F-B743-90A254995D2A@mikemccandless.com> <48B5C4D2.3080304@teamware.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Antony Bowesman wrote:

> Michael McCandless wrote:
>> TermDocs.skipTo() only moves forwards.
>> Can you use a stored field to retrieve this information, or do you  
>> really need to store it per-term-occurrence in your docs?
>
> I discussed my use case with Doron earlier and there were two  
> options, either to use payloads or stored fields.

Ahh right, my short term memory failed me ;)  I now remember this  
thread.

> With the payload case, for a single field (owner) in a document  
> there are multiple unique terms (ownerId), each with a payload  
> (access Id).
>
> Using stored fields I have to store something like
>
> ownerId:accessId
> ownerId:accessId
> ownerId:accessId
>
> then fetch the stored field for the document and then find the  
> particular accessId for the owner I am searching for.
>
> I was testing the performance implications of each as I understand  
> fetching stored fields is not optimal

Yes, though LUCENE-1231 (column stride stored fields) should help this.

> and the payload scenario is logically a better fit, as every owner  
> will have a different accessId for every Document.
>
> What would fit my usage would be something like
>
> byte[] b = doc.getPayload("owner", ownerId);
>
> where for the given OID, I can retrieve the payload I associated  
> with it, when I did
>
> doc.add(new Field("owner", ownerId, accessPayload);
>
> but that's not how it works :(

Yeah... payloads don't require/expect that each term would be unique  
in the field, so in general we have to access it via TermPositions API.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 27 23:35:12 2008
Return-Path: <java-user-return-35743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65797 invoked from network); 27 Aug 2008 23:35:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2008 23:35:12 -0000
Received: (qmail 68253 invoked by uid 500); 27 Aug 2008 23:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68217 invoked by uid 500); 27 Aug 2008 23:35:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68206 invoked by uid 99); 27 Aug 2008 23:35:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 16:35:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.71.238.250] (HELO outbound.mse19.exchange.ms) (64.71.238.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 23:34:07 +0000
Received: from mse19be2.mse19.exchange.ms ([172.28.1.9]) by
 mse19fe1.mse19.exchange.ms ([172.29.12.67]) with mapi; Wed, 27 Aug 2008
 19:34:35 -0400
From: Shi Hui Liu <shihui@nextbio.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 27 Aug 2008 19:34:34 -0400
Subject: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Thread-Topic: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Thread-Index: AckIbsyTip8g/55iTzCyfHJssXk1hQALRpsA
Message-ID: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FE1DD@mse19be2.mse19.exchange.ms>
References: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms>
In-Reply-To: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I think I should clarify my question a little bit. I'm using BooleanQuery t=
o combine TermQuery(A) and TermQuery(B). But I'm not satisfied with its sco=
ring algorigthm. Is there other queries can boost up the documents with 50 =
of A and 50 of B on top of documents with 1000 of A and 1 of B? And I'm loo=
king at the source code and found lots of classes are not public and some i=
mportant methods are protected. What's the reason? Why make them public and=
 let users to customize the Query easily?

Thank you very much,
Shi Hui

-----Original Message-----
From: Shi Hui Liu [mailto:shihui@nextbio.com]
Sent: Wednesday, August 27, 2008 11:01 AM
To: java-user@lucene.apache.org
Subject: Is there a Query boosting 50-50 over 1000-1 ?

Hi,

Say, I have a query with two terms: A + B, I want to return the documents w=
ith 50 of A and 50 of B on top of documents with 1000 of A and 1 of B. Is t=
here an existing Query class can handle this case or I have to implement a =
new Query?

Thank you,
Shi Hui

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 01:09:48 2008
Return-Path: <java-user-return-35744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48494 invoked from network); 28 Aug 2008 01:09:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 01:09:48 -0000
Received: (qmail 52105 invoked by uid 500); 28 Aug 2008 01:09:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52079 invoked by uid 500); 28 Aug 2008 01:09:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52068 invoked by uid 99); 28 Aug 2008 01:09:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 18:09:38 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 01:08:41 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m7S172ej008824
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 04:07:02 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m@ci3le2; 28 Aug 2008 04:06:00 +0300
Message-ID: <48B5FA1D.6000500@teamware.com>
Date: Thu, 28 Aug 2008 11:06:37 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can TermDocs.skipTo() go backwards
References: <48B4FD32.90102@teamware.com> <DBAED543-FF06-4D4F-B743-90A254995D2A@mikemccandless.com> <48B5C4D2.3080304@teamware.com> <A4E136CC-BADA-43C4-966E-4D6DFE81E50E@mikemccandless.com>
In-Reply-To: <A4E136CC-BADA-43C4-966E-4D6DFE81E50E@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 28 Aug 2008 04:07:02 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
> 
> Ahh right, my short term memory failed me ;)  I now remember this thread.

Excused :) I expect you have real work to occupy your mind!

> Yes, though LUCENE-1231 (column stride stored fields) should help this.

I see from JIRA that MB has started working on this - It's marked as 3.0, but 
there was some hope for a 2.4 release.  Are there any estimates for when this 
might get to a release - this is an exciting development for me.

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 01:43:30 2008
Return-Path: <java-user-return-35745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89833 invoked from network); 28 Aug 2008 01:43:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 01:43:30 -0000
Received: (qmail 76806 invoked by uid 500); 28 Aug 2008 01:43:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76767 invoked by uid 500); 28 Aug 2008 01:43:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76752 invoked by uid 99); 28 Aug 2008 01:43:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 18:43:21 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FS_REPLICA,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Aug 2008 01:42:22 +0000
Received: (qmail 70923 invoked by uid 60001); 28 Aug 2008 01:42:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=o5S2c/iTYCzm9JIoo7ni0zK7Yyt6XgevcEw1m8WcA8TRhTgt1/hvX+EGoCVC/AYMjBiv2GV47RZOaVL/ay1iI6gFeJHMIHJRS1qMD2SWND4NF4JbkWoziwQBHQpH3OXNhQSurA0TfmgaGBZvpMSMnziOpnqi3du511owF6bnh1A=;
X-YMail-OSG: 691syQ4VM1n3ECwiHchyiP_X3wIF04Vl0USCilb8VGSod1pJ7N2t4F9BtCjLl55pPMllKDjQ3LFx4waWkDnxYE1iTkAS3TELTiM7zznthjmvrcRkwn6zdjrc8KC0zATUCR2nyxWe_tn33TzCa7gvDsA-
Received: from [72.227.164.48] by web50311.mail.re2.yahoo.com via HTTP; Wed, 27 Aug 2008 18:42:50 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Wed, 27 Aug 2008 18:42:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Replicating Lucene Index with out SOLR
To: general@lucene.apache.org
Cc: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <268701.69913.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AYou may want to ask on the java-user list (more subscribers), whic=
h I'm CC-ing, so we can continue discussion there.=0AI think you will have =
to implement your own logic that runs on A and does something like this:=0A=
=0A- stop adding new docs=0A- call commit on the IndexWriter=0A=0A- copy th=
e index=0A- resume indexing=0A=0AOtis=0A--=0ASematext -- http://sematext.co=
m/ -- Lucene - Solr - Nutch=0A=0A=0A=0A----- Original Message ----=0A> From=
: rahul_k123 <vishnudeepak@gmail.com>=0A> To: general@lucene.apache.org=0A>=
 Sent: Thursday, August 28, 2008 1:34:41 AM=0A> Subject: Replicating Lucene=
 Index with out SOLR=0A> =0A> =0A> I have the following requirement=0A> =0A=
> Right now we have multiple indexes  serving our web application. Our inde=
xes=0A> are around 30 GB size.=0A> =0A> We want to replicate the index data=
 so that we can use them to distribute=0A> the search load.=0A> =0A> This i=
s what we need ideally.=0A> =0A> A =E2=80=93 (supports writes and reads)=0A=
> =0A> A1 =E2=80=93Replicated Index (Supports reads)  . We want to synchron=
ize this every 5=0A> mins.=0A> =0A> =0A> =0A> Any help is appreciated.   We=
 are not using SOLR=0A> =0A> I also interested in knowing what will be the =
best way so that I can scale=0A> my application adding more boxes for searc=
h if our load increases.=0A> =0A> Thanks.  =0A> =0A> -- =0A> View this mess=
age in context: =0A> http://www.nabble.com/Replicating-Lucene-Index-with-ou=
t-SOLR-tp19191752p19191752.html=0A> Sent from the Lucene - General mailing =
list archive at Nabble.com.=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 01:51:10 2008
Return-Path: <java-user-return-35746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2531 invoked from network); 28 Aug 2008 01:51:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 01:51:10 -0000
Received: (qmail 86738 invoked by uid 500); 28 Aug 2008 01:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86709 invoked by uid 500); 28 Aug 2008 01:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86697 invoked by uid 99); 28 Aug 2008 01:51:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 18:51:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Aug 2008 01:50:03 +0000
Received: (qmail 52631 invoked by uid 60001); 28 Aug 2008 01:49:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=a9sekdFf0U8/ohm/Xn6968MdCiE+F1lFekLIfb/b3jAL/lUSSZB7q/wlVQeO+dhYZFUeR2F61m7CjaOF9+uEJXhGvhkyy+R1GSHJ8ePG+lsfyMfzaJG5tAatvA2oS+4BeuVVIEpz47UAyDSQc4dNAkxRM/MItE+McsIBIBwmPoQ=;
X-YMail-OSG: DeWTNSgVM1kSe6u8QDgqE3FnBCZZ1_4bviIaFOygI1Zp8XD0BmeWIbKkvAxkdCUmIiiytKP3cJUnM9U4URsZbu49k.70i5YEKnQUK9SS6QXQ5YTjiZSqsW8r9uktLMLLB7ZUPY0yTVo1z2Wddu2kIDI-
Received: from [72.227.164.48] by web50306.mail.re2.yahoo.com via HTTP; Wed, 27 Aug 2008 18:49:32 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Wed, 27 Aug 2008 18:49:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene sample code and api documentation
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <441920.52262.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sithu,

Old emails: markmail.org
Sample code: Lucene in Action has free downloadable code -- manning.com/hatcher2

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
> To: java-user@lucene.apache.org
> Sent: Wednesday, August 27, 2008 9:13:56 PM
> Subject: Lucene sample code and api documentation
> 
> Hi All,
> 
> I'm new to Lucene. 
> 
> 1. Could you please tell me as to where do we see the old emails (even
> one day old), not as an archived file  but as  a mailing list.
> 2. Where do we look for sample codes? Or detailed tutorials?
> 3. I found one at LuceneTutorial.com, but it is only for command line.
> Not for web based one.
> 
> Thanks in advance,
> Sithu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 03:27:22 2008
Return-Path: <java-user-return-35747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73621 invoked from network); 28 Aug 2008 03:27:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 03:27:21 -0000
Received: (qmail 62459 invoked by uid 500); 28 Aug 2008 03:27:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62424 invoked by uid 500); 28 Aug 2008 03:27:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62413 invoked by uid 99); 28 Aug 2008 03:27:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 20:27:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 03:26:16 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 4CA0B71C101; Wed, 27 Aug 2008 20:26:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4828671C0D3
	for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 20:26:46 -0700 (PDT)
Date: Wed, 27 Aug 2008 20:26:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Combining Wildcard and Term Queries?
In-Reply-To: <200808261912.42078@danielnaber.de>
Message-ID: <Pine.LNX.4.62.0808272025130.6285@radix.cryptio.net>
References: <48B41C5E.3010207@scalix.com> <48B436C2.3080609@scalix.com>
 <200808261912.42078@danielnaber.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > That sounds like what I'm after - but how do I get hold of the
: > IndexReader so I can call IndexReader.terms(Term) ?
: > The code where I am doing this work is getFieldQuery(String field,
: > String queryText) of my custom query parser ...
: 
: QueryParser indeed doesn't know about IndexSearchers and IndexReaders, so 
: you either have to do the work outside (whereever you have an 
: IndexSearcher, it lets you access the IndexReader) and hand the results 
: over to your QueryParser via e.g. its constructor. Or you hand over the 
: IndexReader to your QueryParser. That's not really elegant but I don't 
: know a better solution.

it's what the Query.rewrite method is for, it gets an IndexReader as 
input. your custom QueryParser should return a new type of query that 
rewrites itself into a MultiPhraseQuery




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 03:42:31 2008
Return-Path: <java-user-return-35748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83873 invoked from network); 28 Aug 2008 03:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 03:42:31 -0000
Received: (qmail 72953 invoked by uid 500); 28 Aug 2008 03:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72926 invoked by uid 500); 28 Aug 2008 03:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72915 invoked by uid 99); 28 Aug 2008 03:42:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 20:42:23 -0700
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=DNS_FROM_OPENWHOIS,FS_REPLICA,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 03:41:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KYYLN-0007dE-Gx
	for java-user@lucene.apache.org; Wed, 27 Aug 2008 20:38:45 -0700
Message-ID: <19193696.post@talk.nabble.com>
Date: Wed, 27 Aug 2008 20:38:45 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Replicating Lucene Index with out SOLR
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: vishnudeepak@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have the following requirement

Right now we have multiple indexes  serving our web application. Our indexe=
s
are around 30 GB size.

We want to replicate the index data so that we can use them to distribute
the search load.

This is what we need ideally.

A =E2=80=93 (supports writes and reads)

A1 =E2=80=93Replicated Index (Supports reads)  . We want to synchronize thi=
s every 5
mins.



Any help is appreciated.   We are not using SOLR

I also interested in knowing what will be the best way so that I can scale
my application adding more boxes for search if our load increases.

Thanks.  =20
--=20
View this message in context: http://www.nabble.com/Replicating-Lucene-Inde=
x-with-out-SOLR-tp19193696p19193696.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 03:53:55 2008
Return-Path: <java-user-return-35749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91412 invoked from network); 28 Aug 2008 03:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 03:53:55 -0000
Received: (qmail 81443 invoked by uid 500); 28 Aug 2008 03:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81410 invoked by uid 500); 28 Aug 2008 03:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81399 invoked by uid 99); 28 Aug 2008 03:53:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 20:53:47 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FS_REPLICA,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kent.fitch@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 03:52:47 +0000
Received: by py-out-1112.google.com with SMTP id z74so138793pyg.9
        for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 20:53:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=djnEJMbNAiBDua69Jfr9ws0/ARx4AgQDq174tfniu/4=;
        b=HAkYoWgcz7USdom8VFv3+zfaiS1nTLEKMtKyZliS3FG4YgYUwKrXFrx5CJBY7MWSof
         pLEcayD8A8TChubPLDCbOyej6AAUQUGrXpHyn/cgKz72jR4CPjVPJpmIehGuMS4k45qA
         0f13tYS3dagoghFnTzmTNxrsSE95S8MFsAevY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=mFjlu2ycTwlF1AIDnybR82PAUv6R/5BqNjHoLEbAZ1VYb5EaKJhwXWRu1rbduQVppt
         lrD7yHRO6a9oOOfWTJzztq412CxUZ5DOo01bZttSGyRgYoqx6thdibY5aNYV0naXGjto
         Gsn/raX4k2fj9ov6qS16MViqWB6nseqCECsIc=
Received: by 10.65.250.20 with SMTP id c20mr1475341qbs.63.1219895579456;
        Wed, 27 Aug 2008 20:52:59 -0700 (PDT)
Received: by 10.65.152.10 with HTTP; Wed, 27 Aug 2008 20:52:59 -0700 (PDT)
Message-ID: <355005590808272052h78a86c39w5480e77b907c57dd@mail.gmail.com>
Date: Thu, 28 Aug 2008 13:52:59 +1000
From: "Kent Fitch" <kent.fitch@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Replicating Lucene Index with out SOLR
In-Reply-To: <19193696.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <19193696.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Check out this recipe for using rsync by Doug Cutting:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html

Kent Fitch

On Thu, Aug 28, 2008 at 1:38 PM, rahul_k123 <vishnudeepak@gmail.com> wrote:
>
> I have the following requirement
>
> Right now we have multiple indexes  serving our web application. Our inde=
xes
> are around 30 GB size.
>
> We want to replicate the index data so that we can use them to distribute
> the search load.
>
> This is what we need ideally.
>
> A =96 (supports writes and reads)
>
> A1 =96Replicated Index (Supports reads)  . We want to synchronize this ev=
ery 5
> mins.
>
>
>
> Any help is appreciated.   We are not using SOLR
>
> I also interested in knowing what will be the best way so that I can scal=
e
> my application adding more boxes for search if our load increases.
>
> Thanks.
> --
> View this message in context: http://www.nabble.com/Replicating-Lucene-In=
dex-with-out-SOLR-tp19193696p19193696.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 05:07:43 2008
Return-Path: <java-user-return-35750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33830 invoked from network); 28 Aug 2008 05:07:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 05:07:43 -0000
Received: (qmail 26533 invoked by uid 500); 28 Aug 2008 05:07:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26508 invoked by uid 500); 28 Aug 2008 05:07:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26497 invoked by uid 99); 28 Aug 2008 05:07:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 22:07:34 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FS_REPLICA,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Aug 2008 05:06:34 +0000
Received: (qmail 22375 invoked by uid 60001); 28 Aug 2008 05:06:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=up9GM6VSJDvS7CRlog70Ws0zIet019hpXHxD1+g1bwdol3CBpwDHYCN27Ix7QPggX0Qfsi81h1qnv5LFTO90SHyWOO7t91iEGg4AE8Y3BPAJYDRjf14PLn+yDDPfxlqkm+z5PViqb19F89OTamCQ+7bYHpT9PKhi9zoXCfDyzDo=;
X-YMail-OSG: mAbxrCEVM1mXo2pdF.uxOFsbQwuKQfIZ0Es6wCI36vEOvEc9nMsSb8VebcRT.bLbgJLMQDS7F6.YPHzkR_RtgcCQK0nOOY5LmIuQo16N0wxrl6T4HXNKiQnQBGbq0nkHcnDNGWWnbzWRjrGXpr8hhtU-
Received: from [72.227.164.48] by web50311.mail.re2.yahoo.com via HTTP; Wed, 27 Aug 2008 22:06:03 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Wed, 27 Aug 2008 22:06:03 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Replicating Lucene Index with out SOLR
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <709252.22000.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You don't need to copy the whole index every time if you do incremental ind=
exing/updates and don't optimize the index before copying.  If you use rsyn=
c for copying the index, only the new/modified files be copied.  This is wh=
at Solr replication scripts do, too.=0A=0AOtis=0A--=0ASematext -- http://se=
matext.com/ -- Lucene - Solr - Nutch=0A=0A=0A=0A----- Original Message ----=
=0A> From: rahul_k123 <vishnudeepak@gmail.com>=0A> To: general@lucene.apach=
e.org=0A> Sent: Wednesday, August 27, 2008 11:36:07 PM=0A> Subject: Re: Rep=
licating Lucene Index with out SOLR=0A> =0A> =0A> Currently we index every =
certain amount of time on A.=0A> =0A> -copy the index=0A>      Copying the =
whole index everytime ? =0A> =0A> Currently i am investigating how i can ma=
ke use of SOLR replication scripts=0A> to achive this.=0A> =0A> =0A> Is the=
re anyone who did this with out SOLR before?=0A> =0A> =0A> Thanks=0A> =0A> =
=0A> =0A> Otis Gospodnetic wrote:=0A> > =0A> > Hi,=0A> > =0A> > You may wan=
t to ask on the java-user list (more subscribers), which I'm=0A> > CC-ing, =
so we can continue discussion there.=0A> > I think you will have to impleme=
nt your own logic that runs on A and does=0A> > something like this:=0A> > =
=0A> > - stop adding new docs=0A> > - call commit on the IndexWriter=0A> > =
=0A> > - copy the index=0A> > - resume indexing=0A> > =0A> > Otis=0A> > --=
=0A> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch=0A> > =0A>=
 > =0A> > =0A> > ----- Original Message ----=0A> >> From: rahul_k123 =0A> >=
> To: general@lucene.apache.org=0A> >> Sent: Thursday, August 28, 2008 1:34=
:41 AM=0A> >> Subject: Replicating Lucene Index with out SOLR=0A> >> =0A> >=
> =0A> >> I have the following requirement=0A> >> =0A> >> Right now we have=
 multiple indexes  serving our web application. Our=0A> >> indexes=0A> >> a=
re around 30 GB size.=0A> >> =0A> >> We want to replicate the index data so=
 that we can use them to distribute=0A> >> the search load.=0A> >> =0A> >> =
This is what we need ideally.=0A> >> =0A> >> A =E2=80=93 (supports writes a=
nd reads)=0A> >> =0A> >> A1 =E2=80=93Replicated Index (Supports reads)  . W=
e want to synchronize this=0A> >> every 5=0A> >> mins.=0A> >> =0A> >> =0A> =
>> =0A> >> Any help is appreciated.   We are not using SOLR=0A> >> =0A> >> =
I also interested in knowing what will be the best way so that I can=0A> >>=
 scale=0A> >> my application adding more boxes for search if our load incre=
ases.=0A> >> =0A> >> Thanks.  =0A> >> =0A> >> -- =0A> >> View this message =
in context: =0A> >> =0A> http://www.nabble.com/Replicating-Lucene-Index-wit=
h-out-SOLR-tp19191752p19191752.html=0A> >> Sent from the Lucene - General m=
ailing list archive at Nabble.com.=0A> > =0A> > =0A> > =0A> =0A> -- =0A> Vi=
ew this message in context: =0A> http://www.nabble.com/Replicating-Lucene-I=
ndex-with-out-SOLR-tp19191752p19193670.html=0A> Sent from the Lucene - Gene=
ral mailing list archive at Nabble.com.=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 05:08:14 2008
Return-Path: <java-user-return-35751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33980 invoked from network); 28 Aug 2008 05:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 05:08:13 -0000
Received: (qmail 29415 invoked by uid 500); 28 Aug 2008 05:08:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29387 invoked by uid 500); 28 Aug 2008 05:08:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29372 invoked by uid 99); 28 Aug 2008 05:08:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 22:08:09 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FS_REPLICA,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 05:07:11 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7S57eD8032354
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 00:07:40 -0500
Received: (qmail 13028 invoked by uid 0); 28 Aug 2008 00:07:40 -0500
Date: 28 Aug 2008 00:07:40 -0500
Message-ID: <20080828050740.13027.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Replicating Lucene Index with out SOLR
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 1.20 (*) [Hold at 6.00] FS_REPLICA
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 266947341 - ed3ebd5a2fe5
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=266947341&m=ed3ebd5a2fe5&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=266947341&m=ed3ebd5a2fe5&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=266947341&m=ed3ebd5a2fe5&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 05:08:55 2008
Return-Path: <java-user-return-35752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34220 invoked from network); 28 Aug 2008 05:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 05:08:55 -0000
Received: (qmail 31922 invoked by uid 500); 28 Aug 2008 05:08:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31725 invoked by uid 500); 28 Aug 2008 05:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31714 invoked by uid 99); 28 Aug 2008 05:08:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 22:08:46 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FS_REPLICA,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 05:07:48 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7S58HC7025020
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 00:08:17 -0500
Received: (qmail 13495 invoked by uid 0); 28 Aug 2008 00:08:17 -0500
Date: 28 Aug 2008 00:08:17 -0500
Message-ID: <20080828050817.13492.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Replicating Lucene Index with out SOLR
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 5.20 (*****) [Hold at 6.00] FS_REPLICA,Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 266947471 - 2e087a2e667f
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=266947471&m=2e087a2e667f&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=266947471&m=2e087a2e667f&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=266947471&m=2e087a2e667f&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 05:15:07 2008
Return-Path: <java-user-return-35753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35645 invoked from network); 28 Aug 2008 05:15:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 05:15:07 -0000
Received: (qmail 38015 invoked by uid 500); 28 Aug 2008 05:15:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37981 invoked by uid 500); 28 Aug 2008 05:15:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37970 invoked by uid 99); 28 Aug 2008 05:15:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 22:15:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FS_REPLICA,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 05:14:03 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8978B71C367; Wed, 27 Aug 2008 22:14:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8409271C346
	for <java-user@lucene.apache.org>; Wed, 27 Aug 2008 22:14:33 -0700 (PDT)
Date: Wed, 27 Aug 2008 22:14:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Re: Replicating Lucene Index with out SOLR
In-Reply-To: <20080828050740.13027.qmail@secure3.apollohosting.com>
Message-ID: <Pine.LNX.4.62.0808272211240.6285@radix.cryptio.net>
References: <20080828050740.13027.qmail@secure3.apollohosting.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


This is the 30th or so message sent to the java-user mailing list by your 
Out Of Office Auto-Reply system.  I suspect at least 30 more will be sent 
before you get back to the office on Sept 2nd.

Please temporarily unsubscribe yourself from Lucene mailing lists the next 
time you go on vacation if your auto-reply system is going to behave this 
way.

: Date: 28 Aug 2008 00:07:40 -0500
: From: tom@lux.org.uk
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: Re: Replicating Lucene Index with out SOLR
: 
: AUTOMATIC REPLY
: 
: Tom Roberts is out of the office till 2nd September 2008.
: 
: LUX reopens on 1st September 2008
: 
: 
: 
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
: 



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 05:48:15 2008
Return-Path: <java-user-return-35754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53571 invoked from network); 28 Aug 2008 05:48:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 05:48:15 -0000
Received: (qmail 68605 invoked by uid 500); 28 Aug 2008 05:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68578 invoked by uid 500); 28 Aug 2008 05:48:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68567 invoked by uid 99); 28 Aug 2008 05:48:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Aug 2008 22:48:07 -0700
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=DNS_FROM_OPENWHOIS,FS_REPLICA,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 05:47:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KYaM5-0003CL-W4
	for java-user@lucene.apache.org; Wed, 27 Aug 2008 22:47:37 -0700
Message-ID: <19194576.post@talk.nabble.com>
Date: Wed, 27 Aug 2008 22:47:37 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Replicating Lucene Index with out SOLR
In-Reply-To: <709252.22000.qm@web50311.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: vishnudeepak@gmail.com
References: <19193696.post@talk.nabble.com> <709252.22000.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Can i make use of solr scripts for this purpose.


The snapinstaller runs on the slave after a snapshot has been pulled from
the master. This signals the local Solr server to open a new index reader,
then auto-warming of the cache(s) begins (in the new reader), while other
requests continue to be served by the original index reader.

How can i achieve the above in my case??


Otis Gospodnetic wrote:
>=20
> You don't need to copy the whole index every time if you do incremental
> indexing/updates and don't optimize the index before copying.  If you use
> rsync for copying the index, only the new/modified files be copied.  This
> is what Solr replication scripts do, too.
>=20
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>=20
>=20
>=20
> ----- Original Message ----
>> From: rahul_k123 <vishnudeepak@gmail.com>
>> To: general@lucene.apache.org
>> Sent: Wednesday, August 27, 2008 11:36:07 PM
>> Subject: Re: Replicating Lucene Index with out SOLR
>>=20
>>=20
>> Currently we index every certain amount of time on A.
>>=20
>> -copy the index
>>      Copying the whole index everytime ?=20
>>=20
>> Currently i am investigating how i can make use of SOLR replication
>> scripts
>> to achive this.
>>=20
>>=20
>> Is there anyone who did this with out SOLR before?
>>=20
>>=20
>> Thanks
>>=20
>>=20
>>=20
>> Otis Gospodnetic wrote:
>> >=20
>> > Hi,
>> >=20
>> > You may want to ask on the java-user list (more subscribers), which I'=
m
>> > CC-ing, so we can continue discussion there.
>> > I think you will have to implement your own logic that runs on A and
>> does
>> > something like this:
>> >=20
>> > - stop adding new docs
>> > - call commit on the IndexWriter
>> >=20
>> > - copy the index
>> > - resume indexing
>> >=20
>> > Otis
>> > --
>> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>> >=20
>> >=20
>> >=20
>> > ----- Original Message ----
>> >> From: rahul_k123=20
>> >> To: general@lucene.apache.org
>> >> Sent: Thursday, August 28, 2008 1:34:41 AM
>> >> Subject: Replicating Lucene Index with out SOLR
>> >>=20
>> >>=20
>> >> I have the following requirement
>> >>=20
>> >> Right now we have multiple indexes  serving our web application. Our
>> >> indexes
>> >> are around 30 GB size.
>> >>=20
>> >> We want to replicate the index data so that we can use them to
>> distribute
>> >> the search load.
>> >>=20
>> >> This is what we need ideally.
>> >>=20
>> >> A =E2=80=93 (supports writes and reads)
>> >>=20
>> >> A1 =E2=80=93Replicated Index (Supports reads)  . We want to synchroni=
ze this
>> >> every 5
>> >> mins.
>> >>=20
>> >>=20
>> >>=20
>> >> Any help is appreciated.   We are not using SOLR
>> >>=20
>> >> I also interested in knowing what will be the best way so that I can
>> >> scale
>> >> my application adding more boxes for search if our load increases.
>> >>=20
>> >> Thanks. =20
>> >>=20
>> >> --=20
>> >> View this message in context:=20
>> >>=20
>> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p=
19191752.html
>> >> Sent from the Lucene - General mailing list archive at Nabble.com.
>> >=20
>> >=20
>> >=20
>>=20
>> --=20
>> View this message in context:=20
>> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p=
19193670.html
>> Sent from the Lucene - General mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Replicating-Lucene-Inde=
x-with-out-SOLR-tp19193696p19194576.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 08:59:46 2008
Return-Path: <java-user-return-35755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49202 invoked from network); 28 Aug 2008 08:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 08:59:46 -0000
Received: (qmail 69779 invoked by uid 500); 28 Aug 2008 08:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69450 invoked by uid 500); 28 Aug 2008 08:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69439 invoked by uid 99); 28 Aug 2008 08:59:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 01:59:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 08:58:36 +0000
Received: by ey-out-2122.google.com with SMTP id 6so100877eyi.53
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 01:58:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:x-mimeole:thread-index
         :message-id;
        bh=snF71SFiIEKggOTDl2Jo2mdzxx8RfoUSVGG7PUv7umM=;
        b=I+ikQhPAKeETOyV9X9U67RW2b9qdo4Vp6xeheCvgwsxUr6DuJSszj1d5tNjNVtTaCs
         OjpGOpeg07o5XeVGbR1OFds7hF5H5DVjyc0iwlQj1xRYXRxTG7voRpsHMxGPC1CkEWy2
         Gu0QxzPZY8bj/QPwqYZqv5yJwJrLQPokIeRMU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer:x-mimeole
         :thread-index:message-id;
        b=kSc6061A2GwLcgB5z57rYmQjcx6JFYCOEmgAAyW08MdC9LN8YmspetjvAA0vfpJXWH
         jzctiKIFNRWIGhPSNhZuqu79tAz0zeNdGhCQBW9IjfMHf2Q9xZ4/y9g4vfgCYor2HsLC
         RgikJyjRaUUETjoYwvzu0QXMtwGAuBqecm9ac=
Received: by 10.187.162.6 with SMTP id p6mr513345fao.9.1219913928168;
        Thu, 28 Aug 2008 01:58:48 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id 1sm555525nfv.18.2008.08.28.01.58.43
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 01:58:44 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: FW: Case Sensitivity
Date: Thu, 28 Aug 2008 09:58:40 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0041_01C908F4.A75185F0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AckIMVQx1ri6HSGCQES2HJd4/bsmTwAulPcg
Message-ID: <48b668c4.0116300a.1622.60f0@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0041_01C908F4.A75185F0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Looks like my question got unnoticed among the more important Jira
discussion. :(

On the same topic, what would be the effect of the following code.

Document doc = new Document();
Field f = new Field("body", bodyText, Field.Store.NO,
Field.Index.TOKENIZED);
f.setOmitNorms(true);

Would that be equivalent to

Document doc = new Document();
Field f = new Field("body", bodyText, Field.Store.NO ,Field.Index.NO_NORMS);

And Field.Index.TOKENIZED has no effect after f.setOmitNorms(true); ?

Many thanks,
Dino



-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]
Sent: 27 August 2008 10:37
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity


Actually, as confusing as it is, Field.Index.NO_NORMS means
Field.Index.UN_TOKENIZED plus field.setOmitNorms(true).

Probably we should rename it to Field.Index.UN_TOKENiZED_NO_NORMS?

Mike

Otis Gospodnetic wrote:

> Dino, you lost me half-way through your email :(
>
> NO_NORMS does not mean the field is not tokenized.
> UN_TOKENIZED does mean the field is not tokenized.
>
>
> Otis--
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Dino Korah <dckorah@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, August 26, 2008 9:17:49 AM
>> Subject: RE: Case Sensitivity
>>
>> I think I should rephrase my question.
>>
>> [ Context: Using out of the box StandardAnalyzer for indexing and
>> searching.
>> ]
>>
>> Is it right to say that a field, if either UN_TOKENIZED or NO_NORMS-
>> ized (
>> field.setOmitNorms(true) ), it doesn't get analyzed while indexing?
>> Which means that when we search, it gets thru the analyzer and we
>> need to analyze them differently in the analyzer we use for
>> searching?
>> Doesn't it mean that a setOmitNorms(true) field also doesn't get
>> tokenized?
>>
>> What is the best solution if one was to add a set of fields
>> UN_TOKENIZED and others TOKENIZED, of the later set a few with
>> setOmitNorms(true) (the index writer is plain StandardAnalyzer
>> based)? A per field analyzer at query time ?!
>>
>> Many thanks,
>> Dino
>>
>>
>> -----Original Message-----
>> From: Dino Korah [mailto:dckorah@gmail.com]
>> Sent: 26 August 2008 12:12
>> To: 'java-user@lucene.apache.org'
>> Subject: RE: Case Sensitivity
>>
>> A little more case sensitivity questions.
>>
>> Based on the discussion on
>> http://markmail.org/message/q7dqr4r7o6t6dgo5
>>  and
>> on this thread, is it right to say that a field, if either
>> UN_TOKENIZED or NO_NORMS-ized, it doesn't get analyzed while
>> indexing? Which means we need to case-normalize (down-case) those
>> fields before hand?
>>
>> Doest it mean that if I can afford, I should use norms.
>>
>> Many thanks,
>> Dino
>>
>>
>>
>> -----Original Message-----
>> From: Steven A Rowe [mailto:sarowe@syr.edu]
>> Sent: 19 August 2008 17:43
>> To: java-user@lucene.apache.org
>> Subject: RE: Case Sensitivity
>>
>> Hi Dino,
>>
>> I think you'd benefit from reading some FAQ answers, like:
>>
>> "Why is it important to use the same analyzer type during indexing
>> and search?"
>>
>> 4472d10961ba63c>
>>
>> Also, have a look at the AnalysisParalysis wiki page for some hints:
>>
>>
>> On 08/19/2008 at 8:57 AM, Dino Korah wrote:
>>> From the discussion here what I could understand was, if I am using
>>> StandardAnalyzer on TOKENIZED fields, for both Indexing and
>>> Querying, I shouldn't have any problems with cases.
>>
>> If by "shouldn't have problems with cases" you mean "can match
>> case-insensitively", then this is true.
>>
>>> But if I have any UN_TOKENIZED fields there will be problems if I do
>>> not case-normalize them myself before adding them as a field to the
>>> document.
>>
>> Again, assuming that by "case-normalize" you mean "downcase", and
>> that you want case-insensitive matching, and that you use the
>> StandardAnalyzer (or some other downcasing analyzer) at query-time,
>> then this is true.
>>
>>> In my case I have a mixed scenario. I am indexing emails and the
>>> email addresses are indexed UN_TOKENIZED. I do have a second set of
>>> custom tokenized field, which keep the tokens in individual fields
>>> with same name.
>> [...]
>>> Does it mean that where ever I use UN_TOKENIZED, they do not get
>>> through the StandardAnalyzer before getting Indexed, but they do
>>> when they are searched on?
>>
>> This is true.
>>
>>> If that is the case, Do I need to normalise them before adding to
>>> document?
>>
>> If you want case-insensitive matching, then yes, you do need to
>> normalize them before adding them to the document.
>>
>>> I also would like to know if it is better to employ an EmailAnalyzer
>>> that makes a TokenStream out of the given email address, rather than
>>> using a simplistic function that gives me a list of string pieces
>>> and adding them one by one. With searches, would both the approaches
>>> give same result?
>>
>> Yes, both approaches give the same result.  When you add string
>> pieces one-by-one, you are adding multiple same-named fields. By
>> contrast, the EmailAnalyzer approach would add a single field, and
>> would allow you to control positions (via
>> Token.setPositionIncrement():
>>
>> ml#setPositionIncrement(int)>), e.g. to improve phrase handling.  
>> Also, if
>> you make up an EmailAnalyzer, you can use it to search against your
>> tokenized email field, along with other analyzer(s) on other
>> field(s), using the PerFieldAnalyzerWrapper
>>
>> AnalyzerWrapper.html>.
>>
>> Steve
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



------=_NextPart_000_0041_01C908F4.A75185F0--


From java-user-return-35756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 09:19:41 2008
Return-Path: <java-user-return-35756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58177 invoked from network); 28 Aug 2008 09:19:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 09:19:41 -0000
Received: (qmail 95979 invoked by uid 500); 28 Aug 2008 09:19:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95953 invoked by uid 500); 28 Aug 2008 09:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95942 invoked by uid 99); 28 Aug 2008 09:19:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 02:19:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:18:34 +0000
Received: by ey-out-2122.google.com with SMTP id 6so103014eyi.53
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 02:19:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=gm20A5fdTsZHUNMKUPtRzUcAfSEShxQK4KLmCLu4o70=;
        b=Mg8evTChYvQDpRgDjNNWSxmzjZahLElhoURVuT5NhQSL4RcoWHzEhRzA/HoL0jqDPO
         HapwUDHZClSwvGSKknNR29vqBxbb/b+x6cbWarbC7+5O3l9jRTfWGzZ4ZbHe2l1tXf8+
         B8wUvjK9f+nUIJED+my2A35eOlHAOoicjW/fg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=f2x0O0gsQw3zQiEqPUmU3TqH/Dgr9vtKQEp7E6i7k3KKubb444LCInsbbIEX9h5Rn9
         0dLx8DyVncvGxz5r5O/Np49Jzx+MtBkbWhdbl+D00k9CmC8RO8TPIgGM8J4Hh0f6P+f6
         5YYJh9tUk/7UYg2mLNfiDlQxjApH1FcwhBqHM=
Received: by 10.187.159.15 with SMTP id l15mr530296fao.95.1219915143054;
        Thu, 28 Aug 2008 02:19:03 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id k9sm3804397nfh.23.2008.08.28.02.19.01
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 02:19:02 -0700 (PDT)
Message-Id: <BE319CB7-49BD-45CB-AA28-F2CFE70AAEB9@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <48b668c4.0116300a.1622.60f0@mx.google.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Case Sensitivity
Date: Thu, 28 Aug 2008 11:19:00 +0200
References: <48b668c4.0116300a.1622.60f0@mx.google.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


28 aug 2008 kl. 10.58 skrev Dino Korah:

> Document doc = new Document();
> Field f = new Field("body", bodyText, Field.Store.NO,
> Field.Index.TOKENIZED);
> f.setOmitNorms(true);
>
> Would that be equivalent to
>
> Document doc = new Document();
> Field f = new Field("body", bodyText,  
> Field.Store.NO ,Field.Index.NO_NORMS);
>
> And Field.Index.TOKENIZED has no effect after f.setOmitNorms(true); ?

Yes, those two have the same effect.


         karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 09:47:54 2008
Return-Path: <java-user-return-35757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74213 invoked from network); 28 Aug 2008 09:47:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 09:47:54 -0000
Received: (qmail 40365 invoked by uid 500); 28 Aug 2008 09:47:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40324 invoked by uid 500); 28 Aug 2008 09:47:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40312 invoked by uid 99); 28 Aug 2008 09:47:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 02:47:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:46:45 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m7S9lHe21062
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 04:47:18 -0500
Message-ID: <48B6740F.8070002@getopt.org>
Date: Thu, 28 Aug 2008 11:46:55 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
References: <48b668c4.0116300a.1622.60f0@mx.google.com> <BE319CB7-49BD-45CB-AA28-F2CFE70AAEB9@gmail.com>
In-Reply-To: <BE319CB7-49BD-45CB-AA28-F2CFE70AAEB9@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Karl Wettin wrote:
> 
> 28 aug 2008 kl. 10.58 skrev Dino Korah:
> 
>> Document doc = new Document();
>> Field f = new Field("body", bodyText, Field.Store.NO,
>> Field.Index.TOKENIZED);
>> f.setOmitNorms(true);
>>
>> Would that be equivalent to
>>
>> Document doc = new Document();
>> Field f = new Field("body", bodyText, Field.Store.NO 
>> ,Field.Index.NO_NORMS);
>>
>> And Field.Index.TOKENIZED has no effect after f.setOmitNorms(true); ?
> 
> Yes, those two have the same effect.

I don't think so - these two scenarios are different.

When you create a Field using Index.NO_NORMS, the constructor makes sure 
that:
       isIndexed = true;
       isTokenized = false;
       omitNorms = true;

When you create a Field using Index.TOKENIZED, the constructor sets 
these flags:
       isIndexed = true;
       isTokenized = true;

Then, when you call setOmitNorms(true), it does NOT affect isTokenized, 
it sets only omitNorms. So the flags are set now like this:
       isIndexed = true;
       isTokenized = true;
       omitNorms = true;

The end result of processing such a field is (I believe) conceptually 
equivalent to adding as many Fields as there are tokens, each with 
omitNorms=true.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 09:53:52 2008
Return-Path: <java-user-return-35758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77792 invoked from network); 28 Aug 2008 09:53:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 09:53:51 -0000
Received: (qmail 47584 invoked by uid 500); 28 Aug 2008 09:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47559 invoked by uid 500); 28 Aug 2008 09:53:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47548 invoked by uid 99); 28 Aug 2008 09:53:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 02:53:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:52:45 +0000
Received: by ey-out-2122.google.com with SMTP id 6so106873eyi.53
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 02:52:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=2VPvT3UxSyBkHzmjMNUN73DDd/okRA6kOHXagn+y7cc=;
        b=lLWEQjSmbvHvvtSPxGMOJ97EyRYsz/PWT3L09LBqSdmID89Nq8L96xdB5W+vGUqRZu
         0pBENtFko1bWTdu8qACq4yFZRadAiW0ZW26Thw0/5WU7qLRkFhL68czgQN7KvUONfQqf
         7WH+0Fjv501nDibd/6ss/5BPUW1MDlQ4ayjcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=WUcjSf75/RHxsyPEIm5gyP7MF72YWiZmNeHIy4iCCb4eiCCoi3ukBG2QZukMpNgCp+
         JOx9k3+4KulfB3UCoRJexQg6cwo7XRoXjCCCW2i3aypSLdeMQbU1+GukhIjd55CVHy8e
         e8SxEuuAqzNNdK49PBs6iBZX/WpJCc2EhOjSU=
Received: by 10.187.203.4 with SMTP id f4mr580642faq.1.1219917177374;
        Thu, 28 Aug 2008 02:52:57 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id 33sm600251nfu.7.2008.08.28.02.52.55
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 02:52:56 -0700 (PDT)
Message-Id: <50C8EAD5-8F09-4FEC-BFFB-D2FF3DB906A8@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <48B6740F.8070002@getopt.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Case Sensitivity
Date: Thu, 28 Aug 2008 11:52:54 +0200
References: <48b668c4.0116300a.1622.60f0@mx.google.com> <BE319CB7-49BD-45CB-AA28-F2CFE70AAEB9@gmail.com> <48B6740F.8070002@getopt.org>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


28 aug 2008 kl. 11.46 skrev Andrzej Bialecki:

> Karl Wettin wrote:
>> 28 aug 2008 kl. 10.58 skrev Dino Korah:
>>> Document doc = new Document();
>>> Field f = new Field("body", bodyText, Field.Store.NO,
>>> Field.Index.TOKENIZED);
>>> f.setOmitNorms(true);
>>>
>>> Would that be equivalent to
>>>
>>> Document doc = new Document();
>>> Field f = new Field("body", bodyText,  
>>> Field.Store.NO ,Field.Index.NO_NORMS);
>>>
>>> And Field.Index.TOKENIZED has no effect after  
>>> f.setOmitNorms(true); ?
>> Yes, those two have the same effect.
>
> I don't think so - these two scenarios are different.
>
> When you create a Field using Index.NO_NORMS, the constructor makes  
> sure that:
>      isIndexed = true;
>      isTokenized = false;
>      omitNorms = true;
>
> When you create a Field using Index.TOKENIZED, the constructor sets  
> these flags:
>      isIndexed = true;
>      isTokenized = true;
>
> Then, when you call setOmitNorms(true), it does NOT affect  
> isTokenized, it sets only omitNorms. So the flags are set now like  
> this:
>      isIndexed = true;
>      isTokenized = true;
>      omitNorms = true;
>
> The end result of processing such a field is (I believe)  
> conceptually equivalent to adding as many Fields as there are  
> tokens, each with omitNorms=true.

Oh, you are of course right, I was too quick to read. Sorry.


       karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 09:55:28 2008
Return-Path: <java-user-return-35759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78583 invoked from network); 28 Aug 2008 09:55:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 09:55:28 -0000
Received: (qmail 49529 invoked by uid 500); 28 Aug 2008 09:55:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49498 invoked by uid 500); 28 Aug 2008 09:55:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49485 invoked by uid 99); 28 Aug 2008 09:55:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 02:55:20 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.30] (HELO mail-gx0-f30.google.com) (209.85.217.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:54:22 +0000
Received: by gxk11 with SMTP id 11so397296gxk.5
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 02:54:49 -0700 (PDT)
Received: by 10.150.58.5 with SMTP id g5mr1855923yba.134.1219917289791;
        Thu, 28 Aug 2008 02:54:49 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id a68sm2490508rnc.12.2008.08.28.02.54.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 02:54:49 -0700 (PDT)
Message-Id: <5138E5CB-E539-4299-99E0-3F92B142B768@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48B5FA1D.6000500@teamware.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Can TermDocs.skipTo() go backwards
Date: Thu, 28 Aug 2008 05:54:47 -0400
References: <48B4FD32.90102@teamware.com> <DBAED543-FF06-4D4F-B743-90A254995D2A@mikemccandless.com> <48B5C4D2.3080304@teamware.com> <A4E136CC-BADA-43C4-966E-4D6DFE81E50E@mikemccandless.com> <48B5FA1D.6000500@teamware.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Antony Bowesman wrote:

> Michael McCandless wrote:
>> Ahh right, my short term memory failed me ;)  I now remember this  
>> thread.
>
> Excused :) I expect you have real work to occupy your mind!

Well, understanding how people are pushing Lucene *is* the real  
work ;)  This is exactly how Lucene grows!

>> Yes, though LUCENE-1231 (column stride stored fields) should help  
>> this.
>
> I see from JIRA that MB has started working on this - It's marked as  
> 3.0, but there was some hope for a 2.4 release.  Are there any  
> estimates for when this might get to a release - this is an exciting  
> development for me.

I don't think this will make 2.4 -- we're trying to wrap up 2.4 now.   
Michael, any rough ETA on when LUCENE-1231 will be in?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 10:22:03 2008
Return-Path: <java-user-return-35760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88031 invoked from network); 28 Aug 2008 10:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 10:22:02 -0000
Received: (qmail 84376 invoked by uid 500); 28 Aug 2008 10:21:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83589 invoked by uid 500); 28 Aug 2008 10:21:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83577 invoked by uid 99); 28 Aug 2008 10:21:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 03:21:50 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FS_REPLICA,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Aug 2008 10:20:51 +0000
Received: (qmail 72718 invoked by uid 60001); 28 Aug 2008 10:21:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=6s7PPo8bsDYAz8gcrP3wQsL6HFnF13U7aAWiOfVAlLjjXNu2zljnliqLwZThLpNy/yMGARoutZe3tBmFtce5PIRN4PjrtfWoUT4KM2z0PwhoRa8T0SoAYZDR4jXu0kSPMOyrGSBLhEniO2TNRgE/pXD+wxaQHQwipLVJJVZtJto=;
X-YMail-OSG: CYo3uy4VM1nP4eEuFwjsmBqkN4C5Da7_2ahAk5kgHczpiVxnMY8MphvduyV1.HRZbA--
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Thu, 28 Aug 2008 10:21:19 GMT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 28 Aug 2008 10:21:19 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Replicating Lucene Index with out SOLR
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <714511.56962.qm@web26003.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>> You don't need to copy the whole index every time=0A>> if you do increme=
ntal  indexing/updates and don't optimize the index=0A=0A=0ABut at 5 minute=
 intervals for replication does this not quickly lead to a very fragmented =
index?=0A=0AIt seems there is a fundamental conflict when building replicat=
ion systems based entirely on the lucene file format:=0A* In the interests =
of good search performance the index should ideally be a small number of la=
rge files (which is what mergepolicy/optimize are all about maintaining)=0A=
* However, in the interest of minimising replication network traffic, the i=
deal is a large number of small files.=0A=0AI've previously built replicati=
on systems which rely on each server pulling deltas in the form of insert/u=
pdate/delete records from a database and using IndexWriter locally on each =
server to apply these sets of changes. Obviously this duplicates the analyz=
ing/indexing effort across replicas but does mean the content being transfe=
rred is not restricted by the design of the Lucene file format and therefor=
e uses minimal network traffic and places no restrictions on the IndexWrite=
r merge policies I may choose to use to optimise search speed.=0A=0AKeen to=
 explore the pros and cons of these different replication schemes.=0A=0AChe=
ers,=0AMark=0A=0A=0A=0A--- On Thu, 28/8/08, rahul_k123 <vishnudeepak@gmail.=
com> wrote:=0A=0A> From: rahul_k123 <vishnudeepak@gmail.com>=0A> Subject: R=
e: Replicating Lucene Index with out SOLR=0A> To: java-user@lucene.apache.o=
rg=0A> Date: Thursday, 28 August, 2008, 6:47 AM=0A> Can i make use of solr =
scripts for this purpose.=0A> =0A> =0A> The snapinstaller runs on the slave=
 after a snapshot has=0A> been pulled from=0A> the master. This signals the=
 local Solr server to open a=0A> new index reader,=0A> then auto-warming of=
 the cache(s) begins (in the new=0A> reader), while other=0A> requests cont=
inue to be served by the original index=0A> reader.=0A> =0A> How can i achi=
eve the above in my case??=0A> =0A> =0A> Otis Gospodnetic wrote:=0A> > =0A>=
 > You don't need to copy the whole index every time=0A> if you do incremen=
tal=0A> > indexing/updates and don't optimize the index=0A> before copying.=
  If you use=0A> > rsync for copying the index, only the new/modified=0A> f=
iles be copied.  This=0A> > is what Solr replication scripts do, too.=0A> >=
 =0A> > Otis=0A> > --=0A> > Sematext -- http://sematext.com/ -- Lucene - So=
lr -=0A> Nutch=0A> > =0A> > =0A> > =0A> > ----- Original Message ----=0A> >=
> From: rahul_k123 <vishnudeepak@gmail.com>=0A> >> To: general@lucene.apach=
e.org=0A> >> Sent: Wednesday, August 27, 2008 11:36:07 PM=0A> >> Subject: R=
e: Replicating Lucene Index with out=0A> SOLR=0A> >> =0A> >> =0A> >> Curren=
tly we index every certain amount of time on=0A> A.=0A> >> =0A> >> -copy th=
e index=0A> >>      Copying the whole index everytime ? =0A> >> =0A> >> Cur=
rently i am investigating how i can make use of=0A> SOLR replication=0A> >>=
 scripts=0A> >> to achive this.=0A> >> =0A> >> =0A> >> Is there anyone who =
did this with out SOLR before?=0A> >> =0A> >> =0A> >> Thanks=0A> >> =0A> >>=
 =0A> >> =0A> >> Otis Gospodnetic wrote:=0A> >> > =0A> >> > Hi,=0A> >> > =
=0A> >> > You may want to ask on the java-user list=0A> (more subscribers),=
 which I'm=0A> >> > CC-ing, so we can continue discussion there.=0A> >> > I=
 think you will have to implement your own=0A> logic that runs on A and=0A>=
 >> does=0A> >> > something like this:=0A> >> > =0A> >> > - stop adding new=
 docs=0A> >> > - call commit on the IndexWriter=0A> >> > =0A> >> > - copy t=
he index=0A> >> > - resume indexing=0A> >> > =0A> >> > Otis=0A> >> > --=0A>=
 >> > Sematext -- http://sematext.com/ -- Lucene -=0A> Solr - Nutch=0A> >> =
> =0A> >> > =0A> >> > =0A> >> > ----- Original Message ----=0A> >> >> From:=
 rahul_k123 =0A> >> >> To: general@lucene.apache.org=0A> >> >> Sent: Thursd=
ay, August 28, 2008 1:34:41=0A> AM=0A> >> >> Subject: Replicating Lucene In=
dex with=0A> out SOLR=0A> >> >> =0A> >> >> =0A> >> >> I have the following =
requirement=0A> >> >> =0A> >> >> Right now we have multiple indexes =0A> se=
rving our web application. Our=0A> >> >> indexes=0A> >> >> are around 30 GB=
 size.=0A> >> >> =0A> >> >> We want to replicate the index data so=0A> that=
 we can use them to=0A> >> distribute=0A> >> >> the search load.=0A> >> >> =
=0A> >> >> This is what we need ideally.=0A> >> >> =0A> >> >> A =E2=80=93 (=
supports writes and reads)=0A> >> >> =0A> >> >> A1 =E2=80=93Replicated Inde=
x (Supports reads) =0A> . We want to synchronize this=0A> >> >> every 5=0A>=
 >> >> mins.=0A> >> >> =0A> >> >> =0A> >> >> =0A> >> >> Any help is appreci=
ated.   We are not=0A> using SOLR=0A> >> >> =0A> >> >> I also interested in=
 knowing what will be=0A> the best way so that I can=0A> >> >> scale=0A> >>=
 >> my application adding more boxes for=0A> search if our load increases.=
=0A> >> >> =0A> >> >> Thanks.  =0A> >> >> =0A> >> >> -- =0A> >> >> View thi=
s message in context: =0A> >> >> =0A> >>=0A> http://www.nabble.com/Replicat=
ing-Lucene-Index-with-out-SOLR-tp19191752p19191752.html=0A> >> >> Sent from=
 the Lucene - General mailing=0A> list archive at Nabble.com.=0A> >> > =0A>=
 >> > =0A> >> > =0A> >> =0A> >> -- =0A> >> View this message in context: =
=0A> >>=0A> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp=
19191752p19193670.html=0A> >> Sent from the Lucene - General mailing list=
=0A> archive at Nabble.com.=0A> > =0A> > =0A> >=0A> -----------------------=
----------------------------------------------=0A> > To unsubscribe, e-mail=
:=0A> java-user-unsubscribe@lucene.apache.org=0A> > For additional commands=
, e-mail:=0A> java-user-help@lucene.apache.org=0A> > =0A> > =0A> > =0A> =0A=
> -- =0A> View this message in context:=0A> http://www.nabble.com/Replicati=
ng-Lucene-Index-with-out-SOLR-tp19193696p19194576.html=0A> Sent from the Lu=
cene - Java Users mailing list archive at=0A> Nabble.com.=0A> =0A> =0A> ---=
------------------------------------------------------------------=0A> To u=
nsubscribe, e-mail:=0A> java-user-unsubscribe@lucene.apache.org=0A> For add=
itional commands, e-mail:=0A> java-user-help@lucene.apache.org=0A=0A=0ASend=
 instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 10:37:38 2008
Return-Path: <java-user-return-35761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95607 invoked from network); 28 Aug 2008 10:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 10:37:37 -0000
Received: (qmail 3873 invoked by uid 500); 28 Aug 2008 10:37:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3801 invoked by uid 500); 28 Aug 2008 10:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3789 invoked by uid 99); 28 Aug 2008 10:37:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 03:37:26 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.211] (HELO smtp101.mail.mud.yahoo.com) (209.191.85.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Aug 2008 10:36:26 +0000
Received: (qmail 54990 invoked from network); 28 Aug 2008 10:35:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=ehV+W38JSGaOY576myn7L+hCpE+W+6MKk4xj5CgaDRYzRx9X1T0hxyatgc1Yw8xBG0kUObaTx+tAVHqQ84/Sl/keqls9Ngm0WwMVjVOFjc5JzO7KZ8cUQKIZHNnHnBObjFcSjCydcfMw61Qf4ACsS/qEBSz7Hf1LACEyxndcijc=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp101.mail.mud.yahoo.com with SMTP; 28 Aug 2008 10:35:54 -0000
X-YMail-OSG: Opy5BV0VM1l_5_NmR8tL.JQT2VEHJOMD7zvq9W_xClcqDv1yRVivwkRolhqodpl3Jy8hK4iaEBR.iVvHH7q948nUVohzTOFZwHc8ZKsKtQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <015501c908f9$d95a6a30$04000100@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: when to refresh IndexSearcher and IndexWriter
Date: Thu, 28 Aug 2008 16:05:50 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

My index will get update very frequently.

1) When shall i need to optimize IndexWriter? I have planned to optimize 
every day. Is that fine.

2) When shall i need to re-open IndexReader and IndexSearcher? I have 
planned to do it every 10 minutes.

3) IndexSearcher could be used across threads. If i have to re-open the 
IndexReader and IndexSearcher, then it should be synchronized. If i try to 
do this then i am ending up in doing complete search functionality in 
synchronization. Is there any better way to do that.

synchronized void search() {

if 10 mins is elapsed reopen the reader else use the original..

IndexSearcher.search().....

collect the hits
}
Is there any better way to do it.

Regards
Ganesh
 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 10:47:25 2008
Return-Path: <java-user-return-35762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 584 invoked from network); 28 Aug 2008 10:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 10:47:25 -0000
Received: (qmail 13090 invoked by uid 500); 28 Aug 2008 10:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13044 invoked by uid 500); 28 Aug 2008 10:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13033 invoked by uid 99); 28 Aug 2008 10:47:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 03:47:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:46:17 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id 3F116203CD
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 03:47:14 -0700 (PDT)
Message-Id: <C3EFC887-677B-420E-8C81-037534FCBE22@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <1219868504.6959.81.camel@nuraku>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: lucene 3.0 feature list?
Date: Thu, 28 Aug 2008 06:46:45 -0400
References: <1219791173.6959.20.camel@nuraku> <D90EA060-861A-467E-8C3C-17D012482F0B@gmail.com> <efd1bd310808271155n4946cf9ic68b03e807c2996f@mail.gmail.com> <1219868504.6959.81.camel@nuraku>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

We haven't even begun working on 3.0 other than the planning to say it  
will be on JDK 1.5.  There may be a few tickets in JIRA that are  
marked as 3.0, though, but that doesn't even mean they will make it.   
And, the API will not necessarily be 2.4 compatible.  That is not in  
our back compat. requirements.  Having said that, we try to make  
upgrades as painless as possible, but for major releases, we reserve  
the right to change things more so than minor releases.

On Aug 27, 2008, at 4:21 PM, Darren Govoni wrote:

> I understand that the API will be 2.4 compatible. That's not really a
> feature. I can go hunt through JIRA, but was wondering if there is a
> clean bulleted list of 'Hey! Here's what's great about 3.0'. Things  
> like
> maybe, performance related, new analyzers, query semantics, searchers,
> writers, etc. Just curious, but I can dig through the tickets/code and
> find out too.
>
> Cheers!
>
> On Wed, 2008-08-27 at 11:55 -0700, Andre Rubin wrote:
>> So, you mean you're gonna be removing the deprecated methods from  
>> the api?
>>
>> Andre
>>
>> On Tue, Aug 26, 2008 at 3:59 PM, Karl Wettin  
>> <karl.wettin@gmail.com> wrote:
>>
>>>
>>> 27 aug 2008 kl. 00.52 skrev Darren Govoni:
>>>
>>> Hi,
>>>> Sorry if I missed this somewhere or maybe its not released yet,  
>>>> but I
>>>> was anxiously curious about lucene 3.0's expected features/ 
>>>> improvements.
>>>> Is there a list yet?
>>>>
>>>
>>> If everything goes as planned then Lucene 3.0 will be the same as  
>>> Lucene
>>> 2.4 but with no depricated methods.
>>>
>>> See the JIRA for fixes in 2.4 (current trunk).
>>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 11:16:17 2008
Return-Path: <java-user-return-35763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11570 invoked from network); 28 Aug 2008 11:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 11:16:17 -0000
Received: (qmail 49221 invoked by uid 500); 28 Aug 2008 11:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49187 invoked by uid 500); 28 Aug 2008 11:16:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49174 invoked by uid 99); 28 Aug 2008 11:16:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 04:16:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.242] (HELO ag-out-0708.google.com) (72.14.246.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 11:15:10 +0000
Received: by ag-out-0708.google.com with SMTP id 23so918505agd.11
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 04:15:29 -0700 (PDT)
Received: by 10.100.42.4 with SMTP id p4mr1356363anp.26.1219922129699;
        Thu, 28 Aug 2008 04:15:29 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id b14sm1343769ana.23.2008.08.28.04.15.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 04:15:29 -0700 (PDT)
Message-Id: <42019064-3A3D-44DB-8172-11B717065167@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <015501c908f9$d95a6a30$04000100@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: when to refresh IndexSearcher and IndexWriter
X-Priority: 3
Date: Thu, 28 Aug 2008 07:15:27 -0400
References: <015501c908f9$d95a6a30$04000100@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Ganesh - yahoo wrote:

> Hello all,
>
> My index will get update very frequently.
>
> 1) When shall i need to optimize IndexWriter? I have planned to  
> optimize every day. Is that fine.

Probably you should test in your app, to see if optimization is even  
necessary and if so, at what frequency.  Optimize() is quite costly in  
IO and if done on the same machine doing searches will likely slow  
down the searches.

> 2) When shall i need to re-open IndexReader and IndexSearcher? I  
> have planned to do it every 10 minutes.

This is your design choice: how costly is it when your users receive  
stale results?  How frequently do you add/update docs to the index?

> 3) IndexSearcher could be used across threads. If i have to re-open  
> the IndexReader and IndexSearcher, then it should be synchronized.  
> If i try to do this then i am ending up in doing complete search  
> functionality in synchronization. Is there any better way to do that.
>
> synchronized void search() {

You can continue to use the old searcher even while a new IndexReader  
is being reopened, so, searches need not be synchronized.

However, once the reopen finishes (and, any warming that you need to  
do completes) the "swap out" of the old searcher for the new one must  
be done carefully such that new searches immediately start using the  
new searcher, and you do not close the old searcher until all running  
searches are done with it.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 12:18:54 2008
Return-Path: <java-user-return-35764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38359 invoked from network); 28 Aug 2008 12:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 12:18:54 -0000
Received: (qmail 54418 invoked by uid 500); 28 Aug 2008 12:18:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54124 invoked by uid 500); 28 Aug 2008 12:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54113 invoked by uid 99); 28 Aug 2008 12:18:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 05:18:45 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FS_REPLICA,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bill.w.au@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 12:17:45 +0000
Received: by ug-out-1314.google.com with SMTP id u2so1479673uge.23
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 05:18:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KnO3yF7ldMyjnS/Jt8746IyZpWc8Bj9Qij/POEaVMPc=;
        b=HBM+TUlxQM5ZcnP7T0bq9BidpCaQX5+6a03VsEKJlvOEeoVOc/3Ln5YDkapQtguy13
         W0p2HzOqux1B+s51i7xoMDTdepExR7vjSuGlmKcbVkgx2O6GnasXwtm8X0UyKptmOjlF
         0R5fh6t0ft+fVxFvaTsksE8vYx2Fwig1WQMHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Xri545PkCR+25a/DebxE5lrF6g6WIYqLQurzsjlca6xZVdDssFUVuRIAAUtYK7HzX9
         L6YC72ev+nOLYqQNnRf58RcPOPdC0nRFNnTn4bOSdOsYk6p4mXuuZ8PUUhTGje+3blia
         RDwhcAxWho7lbc59tdQt+bDktQC1XDvtewdEQ=
Received: by 10.67.115.2 with SMTP id s2mr3272686ugm.49.1219925884255;
        Thu, 28 Aug 2008 05:18:04 -0700 (PDT)
Received: by 10.66.221.2 with HTTP; Thu, 28 Aug 2008 05:18:04 -0700 (PDT)
Message-ID: <3b5f72030808280518s182b23fdj6ae9aff54372aaf6@mail.gmail.com>
Date: Thu, 28 Aug 2008 08:18:04 -0400
From: "Bill Au" <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Replicating Lucene Index with out SOLR
In-Reply-To: <355005590808272052h78a86c39w5480e77b907c57dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4932_8836923.1219925884247"
References: <19193696.post@talk.nabble.com>
	 <355005590808272052h78a86c39w5480e77b907c57dd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4932_8836923.1219925884247
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Solr uses Doug's rsync method to do replication.  The scripts are pretty
much standalone and does not require Solr.  It should work on any Lucene
index.

Bill

On Wed, Aug 27, 2008 at 11:52 PM, Kent Fitch <kent.fitch@gmail.com> wrote:

> Check out this recipe for using rsync by Doug Cutting:
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html
>
> Kent Fitch
>
> On Thu, Aug 28, 2008 at 1:38 PM, rahul_k123 <vishnudeepak@gmail.com>
> wrote:
> >
> > I have the following requirement
> >
> > Right now we have multiple indexes  serving our web application. Our
> indexes
> > are around 30 GB size.
> >
> > We want to replicate the index data so that we can use them to distribu=
te
> > the search load.
> >
> > This is what we need ideally.
> >
> > A =96 (supports writes and reads)
> >
> > A1 =96Replicated Index (Supports reads)  . We want to synchronize this
> every 5
> > mins.
> >
> >
> >
> > Any help is appreciated.   We are not using SOLR
> >
> > I also interested in knowing what will be the best way so that I can
> scale
> > my application adding more boxes for search if our load increases.
> >
> > Thanks.
> > --
> > View this message in context:
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19193696p1=
9193696.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4932_8836923.1219925884247--

From java-user-return-35765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 12:22:44 2008
Return-Path: <java-user-return-35765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46888 invoked from network); 28 Aug 2008 12:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 12:22:43 -0000
Received: (qmail 60758 invoked by uid 500); 28 Aug 2008 12:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60732 invoked by uid 500); 28 Aug 2008 12:22:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60721 invoked by uid 99); 28 Aug 2008 12:22:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 05:22:35 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FS_REPLICA,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bill.w.au@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 12:21:35 +0000
Received: by ug-out-1314.google.com with SMTP id u2so1480546uge.23
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 05:22:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=CTxM3PDGXg959pCv/6KmaPs+u1ERuv5aB1Bbblkmg9k=;
        b=u4A3qy7DNr6Tl8qnxMh7h3hQsaSZsdt7L2Ps9DSPc+o+3/hkVAM0YYM3ERBYBOWfcm
         IDnUd08DQptH1OzUhSDxTeekhw2nTFxmUiw5FN+Weh/WYR1fXFcRLUmCkC9d6LGCTIyQ
         jYo9wU9WLo8wIbgkqmu9b2qMnCG9Q78pDLR0U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QavQyaxYJ0aQlFxyS18UWKszF+p2OUihj0hmc1siog4ZRpHFXNEDDnH1duNiGMHXvN
         VQysFJ7fTBIzUsTGStPJJCHQnP1kpBSLnu3YjZdbC4xFma6LQzJ/HxN8IJsGUDiLIuRm
         TuZvY1koUtvUzqJI8uCoz3354RDihBbhXRPDw=
Received: by 10.67.106.13 with SMTP id i13mr3302908ugm.37.1219926124521;
        Thu, 28 Aug 2008 05:22:04 -0700 (PDT)
Received: by 10.66.221.2 with HTTP; Thu, 28 Aug 2008 05:22:04 -0700 (PDT)
Message-ID: <3b5f72030808280522y20b48be6qff5787a14f111a5e@mail.gmail.com>
Date: Thu, 28 Aug 2008 08:22:04 -0400
From: "Bill Au" <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Replicating Lucene Index with out SOLR
In-Reply-To: <19194576.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4946_16699875.1219926124487"
References: <19193696.post@talk.nabble.com>
	 <709252.22000.qm@web50311.mail.re2.yahoo.com>
	 <19194576.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4946_16699875.1219926124487
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

The snapinstaller script invokes the commit command to trigger Solr to do a
commit, which open a new index reader and then auto-warm the caches.  You
will need to replace that with your own code to do the same for your Lucene
index.

On Thu, Aug 28, 2008 at 1:47 AM, rahul_k123 <vishnudeepak@gmail.com> wrote:

>
> Can i make use of solr scripts for this purpose.
>
>
> The snapinstaller runs on the slave after a snapshot has been pulled from
> the master. This signals the local Solr server to open a new index reader=
,
> then auto-warming of the cache(s) begins (in the new reader), while other
> requests continue to be served by the original index reader.
>
> How can i achieve the above in my case??
>
>
> Otis Gospodnetic wrote:
> >
> > You don't need to copy the whole index every time if you do incremental
> > indexing/updates and don't optimize the index before copying.  If you u=
se
> > rsync for copying the index, only the new/modified files be copied.  Th=
is
> > is what Solr replication scripts do, too.
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> >
> > ----- Original Message ----
> >> From: rahul_k123 <vishnudeepak@gmail.com>
> >> To: general@lucene.apache.org
> >> Sent: Wednesday, August 27, 2008 11:36:07 PM
> >> Subject: Re: Replicating Lucene Index with out SOLR
> >>
> >>
> >> Currently we index every certain amount of time on A.
> >>
> >> -copy the index
> >>      Copying the whole index everytime ?
> >>
> >> Currently i am investigating how i can make use of SOLR replication
> >> scripts
> >> to achive this.
> >>
> >>
> >> Is there anyone who did this with out SOLR before?
> >>
> >>
> >> Thanks
> >>
> >>
> >>
> >> Otis Gospodnetic wrote:
> >> >
> >> > Hi,
> >> >
> >> > You may want to ask on the java-user list (more subscribers), which
> I'm
> >> > CC-ing, so we can continue discussion there.
> >> > I think you will have to implement your own logic that runs on A and
> >> does
> >> > something like this:
> >> >
> >> > - stop adding new docs
> >> > - call commit on the IndexWriter
> >> >
> >> > - copy the index
> >> > - resume indexing
> >> >
> >> > Otis
> >> > --
> >> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >> >
> >> >
> >> >
> >> > ----- Original Message ----
> >> >> From: rahul_k123
> >> >> To: general@lucene.apache.org
> >> >> Sent: Thursday, August 28, 2008 1:34:41 AM
> >> >> Subject: Replicating Lucene Index with out SOLR
> >> >>
> >> >>
> >> >> I have the following requirement
> >> >>
> >> >> Right now we have multiple indexes  serving our web application. Ou=
r
> >> >> indexes
> >> >> are around 30 GB size.
> >> >>
> >> >> We want to replicate the index data so that we can use them to
> >> distribute
> >> >> the search load.
> >> >>
> >> >> This is what we need ideally.
> >> >>
> >> >> A =96 (supports writes and reads)
> >> >>
> >> >> A1 =96Replicated Index (Supports reads)  . We want to synchronize t=
his
> >> >> every 5
> >> >> mins.
> >> >>
> >> >>
> >> >>
> >> >> Any help is appreciated.   We are not using SOLR
> >> >>
> >> >> I also interested in knowing what will be the best way so that I ca=
n
> >> >> scale
> >> >> my application adding more boxes for search if our load increases.
> >> >>
> >> >> Thanks.
> >> >>
> >> >> --
> >> >> View this message in context:
> >> >>
> >>
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p1=
9191752.html
> >> >> Sent from the Lucene - General mailing list archive at Nabble.com.
> >> >
> >> >
> >> >
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p1=
9193670.html
> >> Sent from the Lucene - General mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19193696p1=
9194576.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4946_16699875.1219926124487--

From java-user-return-35766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 12:57:34 2008
Return-Path: <java-user-return-35766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67613 invoked from network); 28 Aug 2008 12:57:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 12:57:34 -0000
Received: (qmail 18476 invoked by uid 500); 28 Aug 2008 12:57:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18449 invoked by uid 500); 28 Aug 2008 12:57:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18438 invoked by uid 99); 28 Aug 2008 12:57:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 05:57:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 12:56:28 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 7761687017
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 05:57:25 -0700 (PDT)
Message-Id: <79A7FD5E-947D-4D48-AEBB-9C676D201248@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FE1DD@mse19be2.mse19.exchange.ms>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Date: Thu, 28 Aug 2008 08:56:56 -0400
References: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms> <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FE1DD@mse19be2.mse19.exchange.ms>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 27, 2008, at 7:34 PM, Shi Hui Liu wrote:

> Hi,
>
> I think I should clarify my question a little bit. I'm using  
> BooleanQuery to combine TermQuery(A) and TermQuery(B). But I'm not  
> satisfied with its scoring algorigthm. Is there other queries can  
> boost up the documents with 50 of A and 50 of B on top of documents  
> with 1000 of A and 1 of B?

Is your query A + B meant to be A OR B or A AND B?  That is, are both  
terms required?  You notation suggests they are, but the description  
suggests you are getting documents that have only A in them, which  
suggests "OR".

Have you looked at the explains?  What about the scoring aren't you  
happy with?  It's not perfect (there is no such thing) but it works  
pretty well in most cases, and works great if you spend a little time  
figuring out the right length normalization factors.


> And I'm looking at the source code and found lots of classes are not  
> public and some important methods are protected. What's the reason?  
> Why make them public and let users to customize the Query easily?

Because there not meant to be overridden, but of course we are open to  
specific suggestions on things that should be made public and often do  
this when someone shows a valid reason.

Cheers,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 13:41:34 2008
Return-Path: <java-user-return-35767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89653 invoked from network); 28 Aug 2008 13:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 13:41:34 -0000
Received: (qmail 15309 invoked by uid 500); 28 Aug 2008 13:41:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15280 invoked by uid 500); 28 Aug 2008 13:41:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15269 invoked by uid 99); 28 Aug 2008 13:41:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 06:41:25 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 13:40:26 +0000
X-SBRS: None
X-MID: 96031315
Received: from fmd3tj002.fda.gov ([10.160.10.77])
  by ironport5.fda.gov with ESMTP; 28 Aug 2008 09:39:53 -0400
Received: from FMD3VS012.fda.gov ([10.160.10.63]) by FMD3TJ002.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 28 Aug 2008 09:39:53 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene sample code and api documentation
Date: Thu, 28 Aug 2008 09:39:52 -0400
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73ACD@FMD3VS012.fda.gov>
In-Reply-To: <441920.52262.qm@web50306.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene sample code and api documentation
Thread-Index: AckIsIs0NsvXNNlNSCKFRMRzmywO6AAYsuKA
References: <441920.52262.qm@web50306.mail.re2.yahoo.com>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Aug 2008 13:39:53.0543 (UTC) FILETIME=[8D3DB570:01C90913]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Otis,

I should be ordering the book soon :-)

Yes old mails are there.=20

May be these should be added to the FAQ.

Thanks and regards
Sithu=20

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Wednesday, August 27, 2008 9:50 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene sample code and api documentation

Sithu,

Old emails: markmail.org
Sample code: Lucene in Action has free downloadable code --
manning.com/hatcher2

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
> To: java-user@lucene.apache.org
> Sent: Wednesday, August 27, 2008 9:13:56 PM
> Subject: Lucene sample code and api documentation
>=20
> Hi All,
>=20
> I'm new to Lucene.=20
>=20
> 1. Could you please tell me as to where do we see the old emails (even
> one day old), not as an archived file  but as  a mailing list.
> 2. Where do we look for sample codes? Or detailed tutorials?
> 3. I found one at LuceneTutorial.com, but it is only for command line.
> Not for web based one.
>=20
> Thanks in advance,
> Sithu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 14:14:01 2008
Return-Path: <java-user-return-35768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10948 invoked from network); 28 Aug 2008 14:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 14:14:01 -0000
Received: (qmail 77233 invoked by uid 500); 28 Aug 2008 14:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77212 invoked by uid 500); 28 Aug 2008 14:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77201 invoked by uid 99); 28 Aug 2008 14:13:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 07:13:52 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FS_REPLICA,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 14:12:52 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Thu, 28 Aug 2008 10:10:29 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 28 Aug 2008 10:09:50 -0400
Subject: RE: Replicating Lucene Index with out SOLR
Thread-Topic: Replicating Lucene Index with out SOLR
Thread-Index: AckJCF8Koc1RDNTrSoqicApxlHDR9AADdZrA
Message-ID: <36B4EF9511887240A973A93E7878B0560A0BAF6D8E@US1-IIEX1.IICORP.DOM>
References: <19193696.post@talk.nabble.com>
	 <709252.22000.qm@web50311.mail.re2.yahoo.com>
	 <19194576.post@talk.nabble.com>
 <3b5f72030808280522y20b48be6qff5787a14f111a5e@mail.gmail.com>
In-Reply-To: <3b5f72030808280522y20b48be6qff5787a14f111a5e@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

We don't use Solr, since we run on Windows <sigh>;(</sigh>, but we did impl=
ement very similar snapshot replication.  We have 2 master index servers bu=
ilding indexes, partitioned by document.  Every 1 minute, we stop index wri=
ter, create a local snapshot (on the master server), in directory named YYY=
YMMDDHHMMSS for current timestamp.  Then each query server has a background=
 thread which periodically looks in remote directories on master server for=
 new snapshot directory.  If it finds one, it copies the new snapshot local=
ly to the query server, using the following algorithm:

1. Make a local copy of existing local snapshot:
        a. Copy all "changeable" files (segments file, etc.)
        b. Create NTFS "hard-links" for all other files (index files)
2. Copy any new files in new remote index which do not already exist in loc=
al snapshot (since Lucene does not every modify existing index files, only =
new files we need to copy (and new segments file).
3. Delete any files which no longer exist (only deletes local hard-link, no=
t actual file in current snapshot).
4. Open index reader on new local snapshot, and run some "warming" queries.
5. Switch current index reader object to new index reader object so searche=
s go against new local snapshot.

Step 1 above is also used on master index server when making new local snap=
shots.

Also, note that we don't use rsync.  You do not need it.  You only need to =
make hard-links, and always copy any "changeable" files, such as "segments"=
 file.  Lucene does not modify index files, only creates new ones (and dele=
tes old ones after a merge/optimization).

We use following settings for index writer:

This gives many segments but search is still very fast, and total MB of new=
 files copied for each snapshot is relatively small.

MergeFactor =3D 2
MaxBufferedDocs =3D 10
MaxMergeDocs =3D 1,000,000

Currently we have about 25 million documents in the master index.

-----Original Message-----
From: Bill Au [mailto:bill.w.au@gmail.com]
Sent: Thursday, August 28, 2008 8:22 AM
To: java-user@lucene.apache.org
Subject: Re: Replicating Lucene Index with out SOLR

The snapinstaller script invokes the commit command to trigger Solr to do a
commit, which open a new index reader and then auto-warm the caches.  You
will need to replace that with your own code to do the same for your Lucene
index.

On Thu, Aug 28, 2008 at 1:47 AM, rahul_k123 <vishnudeepak@gmail.com> wrote:

>
> Can i make use of solr scripts for this purpose.
>
>
> The snapinstaller runs on the slave after a snapshot has been pulled from
> the master. This signals the local Solr server to open a new index reader=
,
> then auto-warming of the cache(s) begins (in the new reader), while other
> requests continue to be served by the original index reader.
>
> How can i achieve the above in my case??
>
>
> Otis Gospodnetic wrote:
> >
> > You don't need to copy the whole index every time if you do incremental
> > indexing/updates and don't optimize the index before copying.  If you u=
se
> > rsync for copying the index, only the new/modified files be copied.  Th=
is
> > is what Solr replication scripts do, too.
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> >
> > ----- Original Message ----
> >> From: rahul_k123 <vishnudeepak@gmail.com>
> >> To: general@lucene.apache.org
> >> Sent: Wednesday, August 27, 2008 11:36:07 PM
> >> Subject: Re: Replicating Lucene Index with out SOLR
> >>
> >>
> >> Currently we index every certain amount of time on A.
> >>
> >> -copy the index
> >>      Copying the whole index everytime ?
> >>
> >> Currently i am investigating how i can make use of SOLR replication
> >> scripts
> >> to achive this.
> >>
> >>
> >> Is there anyone who did this with out SOLR before?
> >>
> >>
> >> Thanks
> >>
> >>
> >>
> >> Otis Gospodnetic wrote:
> >> >
> >> > Hi,
> >> >
> >> > You may want to ask on the java-user list (more subscribers), which
> I'm
> >> > CC-ing, so we can continue discussion there.
> >> > I think you will have to implement your own logic that runs on A and
> >> does
> >> > something like this:
> >> >
> >> > - stop adding new docs
> >> > - call commit on the IndexWriter
> >> >
> >> > - copy the index
> >> > - resume indexing
> >> >
> >> > Otis
> >> > --
> >> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >> >
> >> >
> >> >
> >> > ----- Original Message ----
> >> >> From: rahul_k123
> >> >> To: general@lucene.apache.org
> >> >> Sent: Thursday, August 28, 2008 1:34:41 AM
> >> >> Subject: Replicating Lucene Index with out SOLR
> >> >>
> >> >>
> >> >> I have the following requirement
> >> >>
> >> >> Right now we have multiple indexes  serving our web application. Ou=
r
> >> >> indexes
> >> >> are around 30 GB size.
> >> >>
> >> >> We want to replicate the index data so that we can use them to
> >> distribute
> >> >> the search load.
> >> >>
> >> >> This is what we need ideally.
> >> >>
> >> >> A - (supports writes and reads)
> >> >>
> >> >> A1 -Replicated Index (Supports reads)  . We want to synchronize thi=
s
> >> >> every 5
> >> >> mins.
> >> >>
> >> >>
> >> >>
> >> >> Any help is appreciated.   We are not using SOLR
> >> >>
> >> >> I also interested in knowing what will be the best way so that I ca=
n
> >> >> scale
> >> >> my application adding more boxes for search if our load increases.
> >> >>
> >> >> Thanks.
> >> >>
> >> >> --
> >> >> View this message in context:
> >> >>
> >>
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p1=
9191752.html
> >> >> Sent from the Lucene - General mailing list archive at Nabble.com.
> >> >
> >> >
> >> >
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p1=
9193670.html
> >> Sent from the Lucene - General mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19193696p1=
9194576.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 14:17:48 2008
Return-Path: <java-user-return-35769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13020 invoked from network); 28 Aug 2008 14:17:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 14:17:48 -0000
Received: (qmail 94358 invoked by uid 500); 28 Aug 2008 14:17:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94329 invoked by uid 500); 28 Aug 2008 14:17:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94309 invoked by uid 99); 28 Aug 2008 14:17:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 07:17:34 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FS_REPLICA,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 14:16:34 +0000
Received: by yx-out-2324.google.com with SMTP id 3so205094yxj.5
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 07:16:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ZMf/ljTYoEd6txVTpNg+GOfUXiS1K5UBJ9I4s6HFquI=;
        b=TFYJ6Dm4i+DJPLh3y6RfGLdDm6K1bl7mRzlgNe2hQnw526rexoYNDlPPlk0KCtVyQ/
         0466jdjE9tKGSjmfyWlvYCddEPdofAWjBUvrOpYYl2yOYkyn4uVk/j/XMU4C7BE8CwpD
         2Kx3Wwwvw5XTydz9UyfZoZyU7zwqfs419/ies=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uwJ85uMylyjKdAZj0EZASt6QCpcVLzDMYjeAm6BesiSYJWJIYQolJ2ml0HS2ry3/qj
         JGxs2c/a7F95WTRRZqy8dW47ebWkIlv3Ub2gMg1a56YM7CLzot/qe21XGhteJDQiAWiV
         oLnt0uftYyGgfg87IG3qfRKrcR0ZzG5GbwIJc=
Received: by 10.142.48.3 with SMTP id v3mr497625wfv.8.1219933006451;
        Thu, 28 Aug 2008 07:16:46 -0700 (PDT)
Received: by 10.142.223.15 with HTTP; Thu, 28 Aug 2008 07:16:46 -0700 (PDT)
Message-ID: <69de18140808280716y2ed96c57r959e5ed0316182eb@mail.gmail.com>
Date: Thu, 28 Aug 2008 19:46:46 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Replicating Lucene Index with out SOLR
In-Reply-To: <36B4EF9511887240A973A93E7878B0560A0BAF6D8E@US1-IIEX1.IICORP.DOM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34414_16277325.1219933006441"
References: <19193696.post@talk.nabble.com>
	 <709252.22000.qm@web50311.mail.re2.yahoo.com>
	 <19194576.post@talk.nabble.com>
	 <3b5f72030808280522y20b48be6qff5787a14f111a5e@mail.gmail.com>
	 <36B4EF9511887240A973A93E7878B0560A0BAF6D8E@US1-IIEX1.IICORP.DOM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34414_16277325.1219933006441
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Slightly off-topic. Robert -- you may want to look at SOLR-561 -- Solr
replication by Solr (for windows also) which is under development.

https://issues.apache.org/jira/browse/SOLR-561

On Thu, Aug 28, 2008 at 7:39 PM, Robert Stewart <Robert.Stewart@infongen.com
> wrote:

> We don't use Solr, since we run on Windows <sigh>;(</sigh>, but we did
> implement very similar snapshot replication.  We have 2 master index servers
> building indexes, partitioned by document.  Every 1 minute, we stop index
> writer, create a local snapshot (on the master server), in directory named
> YYYYMMDDHHMMSS for current timestamp.  Then each query server has a
> background thread which periodically looks in remote directories on master
> server for new snapshot directory.  If it finds one, it copies the new
> snapshot locally to the query server, using the following algorithm:
>
> 1. Make a local copy of existing local snapshot:
>        a. Copy all "changeable" files (segments file, etc.)
>        b. Create NTFS "hard-links" for all other files (index files)
> 2. Copy any new files in new remote index which do not already exist in
> local snapshot (since Lucene does not every modify existing index files,
> only new files we need to copy (and new segments file).
> 3. Delete any files which no longer exist (only deletes local hard-link,
> not actual file in current snapshot).
> 4. Open index reader on new local snapshot, and run some "warming" queries.
> 5. Switch current index reader object to new index reader object so
> searches go against new local snapshot.
>
> Step 1 above is also used on master index server when making new local
> snapshots.
>
> Also, note that we don't use rsync.  You do not need it.  You only need to
> make hard-links, and always copy any "changeable" files, such as "segments"
> file.  Lucene does not modify index files, only creates new ones (and
> deletes old ones after a merge/optimization).
>
> We use following settings for index writer:
>
> This gives many segments but search is still very fast, and total MB of new
> files copied for each snapshot is relatively small.
>
> MergeFactor = 2
> MaxBufferedDocs = 10
> MaxMergeDocs = 1,000,000
>
> Currently we have about 25 million documents in the master index.
>
> -----Original Message-----
> From: Bill Au [mailto:bill.w.au@gmail.com]
> Sent: Thursday, August 28, 2008 8:22 AM
> To: java-user@lucene.apache.org
> Subject: Re: Replicating Lucene Index with out SOLR
>
> The snapinstaller script invokes the commit command to trigger Solr to do a
> commit, which open a new index reader and then auto-warm the caches.  You
> will need to replace that with your own code to do the same for your Lucene
> index.
>
> On Thu, Aug 28, 2008 at 1:47 AM, rahul_k123 <vishnudeepak@gmail.com>
> wrote:
>
> >
> > Can i make use of solr scripts for this purpose.
> >
> >
> > The snapinstaller runs on the slave after a snapshot has been pulled from
> > the master. This signals the local Solr server to open a new index
> reader,
> > then auto-warming of the cache(s) begins (in the new reader), while other
> > requests continue to be served by the original index reader.
> >
> > How can i achieve the above in my case??
> >
> >
> > Otis Gospodnetic wrote:
> > >
> > > You don't need to copy the whole index every time if you do incremental
> > > indexing/updates and don't optimize the index before copying.  If you
> use
> > > rsync for copying the index, only the new/modified files be copied.
>  This
> > > is what Solr replication scripts do, too.
> > >
> > > Otis
> > > --
> > > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > >
> > >
> > >
> > > ----- Original Message ----
> > >> From: rahul_k123 <vishnudeepak@gmail.com>
> > >> To: general@lucene.apache.org
> > >> Sent: Wednesday, August 27, 2008 11:36:07 PM
> > >> Subject: Re: Replicating Lucene Index with out SOLR
> > >>
> > >>
> > >> Currently we index every certain amount of time on A.
> > >>
> > >> -copy the index
> > >>      Copying the whole index everytime ?
> > >>
> > >> Currently i am investigating how i can make use of SOLR replication
> > >> scripts
> > >> to achive this.
> > >>
> > >>
> > >> Is there anyone who did this with out SOLR before?
> > >>
> > >>
> > >> Thanks
> > >>
> > >>
> > >>
> > >> Otis Gospodnetic wrote:
> > >> >
> > >> > Hi,
> > >> >
> > >> > You may want to ask on the java-user list (more subscribers), which
> > I'm
> > >> > CC-ing, so we can continue discussion there.
> > >> > I think you will have to implement your own logic that runs on A and
> > >> does
> > >> > something like this:
> > >> >
> > >> > - stop adding new docs
> > >> > - call commit on the IndexWriter
> > >> >
> > >> > - copy the index
> > >> > - resume indexing
> > >> >
> > >> > Otis
> > >> > --
> > >> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > >> >
> > >> >
> > >> >
> > >> > ----- Original Message ----
> > >> >> From: rahul_k123
> > >> >> To: general@lucene.apache.org
> > >> >> Sent: Thursday, August 28, 2008 1:34:41 AM
> > >> >> Subject: Replicating Lucene Index with out SOLR
> > >> >>
> > >> >>
> > >> >> I have the following requirement
> > >> >>
> > >> >> Right now we have multiple indexes  serving our web application.
> Our
> > >> >> indexes
> > >> >> are around 30 GB size.
> > >> >>
> > >> >> We want to replicate the index data so that we can use them to
> > >> distribute
> > >> >> the search load.
> > >> >>
> > >> >> This is what we need ideally.
> > >> >>
> > >> >> A - (supports writes and reads)
> > >> >>
> > >> >> A1 -Replicated Index (Supports reads)  . We want to synchronize
> this
> > >> >> every 5
> > >> >> mins.
> > >> >>
> > >> >>
> > >> >>
> > >> >> Any help is appreciated.   We are not using SOLR
> > >> >>
> > >> >> I also interested in knowing what will be the best way so that I
> can
> > >> >> scale
> > >> >> my application adding more boxes for search if our load increases.
> > >> >>
> > >> >> Thanks.
> > >> >>
> > >> >> --
> > >> >> View this message in context:
> > >> >>
> > >>
> >
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p19191752.html
> > >> >> Sent from the Lucene - General mailing list archive at Nabble.com.
> > >> >
> > >> >
> > >> >
> > >>
> > >> --
> > >> View this message in context:
> > >>
> >
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p19193670.html
> > >> Sent from the Lucene - General mailing list archive at Nabble.com.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > --
> > View this message in context:
> >
> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19193696p19194576.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_34414_16277325.1219933006441--

From java-user-return-35770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 14:33:04 2008
Return-Path: <java-user-return-35770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22216 invoked from network); 28 Aug 2008 14:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 14:33:04 -0000
Received: (qmail 30089 invoked by uid 500); 28 Aug 2008 14:32:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29095 invoked by uid 500); 28 Aug 2008 14:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29084 invoked by uid 99); 28 Aug 2008 14:32:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 07:32:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dckorah@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 14:31:58 +0000
Received: by fk-out-0910.google.com with SMTP id 18so263182fkq.5
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 07:32:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :mime-version:content-type:x-mailer:x-mimeole:thread-index
         :message-id;
        bh=vwdD0P5xD7E4YvR0BURTI28v0gR9ozRWFxaWAle41Zg=;
        b=FZonuO5L/eqtGl1cH07vjOA3M3R3m0aIZ5UwwadYo4ixcGRKVx1PHNotjtWcRJIADr
         H8exogTF3INvEANoGpDfxWjDDdgPkmD2CzR1zbWxtKVUXvA4NsXZMdaY6JJlul3hYI4K
         rzP4d+pIQfhq7Civdj3VDbNNohRnVBi2h0hbk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:mime-version:content-type:x-mailer:x-mimeole
         :thread-index:message-id;
        b=hE5gz60VHcwT+krwcJCRnp5ECjqoBQcxibPBAZgGatpUXKZ4JDL55FP1nvbjhAVqAx
         sXpZ006zm6fB+dnWbXVBh1HkpzkcXGpuiYTjJyYZunThicBRSQ/lDqy6aAHHK23XjlI2
         pMUBtglijt5Yc1mQEt+EeVss9jumZ6MfPaMgI=
Received: by 10.180.205.9 with SMTP id c9mr2247947bkg.6.1219933937504;
        Thu, 28 Aug 2008 07:32:17 -0700 (PDT)
Received: from SCWDEVDINOKVM ( [195.2.245.68])
        by mx.google.com with ESMTPS id 1sm828895nfv.18.2008.08.28.07.32.15
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 07:32:16 -0700 (PDT)
From: "Dino Korah" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Analyzer at Query time
Date: Thu, 28 Aug 2008 15:32:13 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_008B_01C90923.4012A980"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AckJGtzYaTuq8DTuQYiBDPaBatQt7Q==
Message-ID: <48b6b6f0.0116300a.161e.ffff8874@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_008B_01C90923.4012A980
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,
 
If I am to completely avoid the query parser and use the BooleanQuery along
with TermQuery, RangeQuery, PrefixQuery, PhraseQuery, etc, does the search
words still get to the Analyzer, before actually doing the real search?
 
Many thanks,
Dino
 

------=_NextPart_000_008B_01C90923.4012A980--


From java-user-return-35771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 14:37:18 2008
Return-Path: <java-user-return-35771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24567 invoked from network); 28 Aug 2008 14:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 14:37:17 -0000
Received: (qmail 37118 invoked by uid 500); 28 Aug 2008 14:37:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36094 invoked by uid 500); 28 Aug 2008 14:37:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36083 invoked by uid 99); 28 Aug 2008 14:37:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 07:37:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 14:36:11 +0000
Received: by wr-out-0506.google.com with SMTP id c30so375249wra.21
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 07:36:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=Tu5PonMARC+Rz7LtzMcyMjY+oJ4lPO6TNAOD0JcRUOM=;
        b=icA+4koByTdzd2oEpfxJ6JrnmNIPp6d90ThSi4FlK5GiKs/aiiIH8IAOAHpSQ9+PFQ
         HgPvgr4Fw6j9xD1llPi9LC2oevuFdTj4wwUito2BSko1dqKm1jBfUlIU4upTa4s3DUCh
         vK7QjiXEE0yrnS5PSsh8UnaIQ0Elr88ns5xew=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=K21mmTlGJpKYImQv+aUYKTOQG08JXpOPQq4vyClAnNvaz+mlebypuE7OMMGgQseNIZ
         +ikPGyQ5IDvQukZL8nhvqGuXB9jHpoJSA+0J4kRBWK1lQHAFy+UYMeMqAjciLuNehYGK
         dt3/XaIeXhakr/eOoKQPC+jdAZA8A/5FOuu2k=
Received: by 10.90.54.11 with SMTP id c11mr1712567aga.84.1219934199324;
        Thu, 28 Aug 2008 07:36:39 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 34sm1145484agc.6.2008.08.28.07.36.38
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 07:36:38 -0700 (PDT)
Message-ID: <48B6B7FB.9030006@gmail.com>
Date: Thu, 28 Aug 2008 10:36:43 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Analyzer at Query time
References: <48b6b6f0.0116300a.161e.ffff8874@mx.google.com>
In-Reply-To: <48b6b6f0.0116300a.161e.ffff8874@mx.google.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dino Korah wrote:
> Hi All,
>  
> If I am to completely avoid the query parser and use the BooleanQuery along
> with TermQuery, RangeQuery, PrefixQuery, PhraseQuery, etc, does the search
> words still get to the Analyzer, before actually doing the real search?
>  
> Many thanks,
> Dino
>  
>
>   
Answer: no

The QueryParser applies the analyzer and builds a Query object tree 
based on the results. You will have to apply the analyzer yourself if 
your going to forgo QueryParser.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 14:37:36 2008
Return-Path: <java-user-return-35772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24820 invoked from network); 28 Aug 2008 14:37:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 14:37:36 -0000
Received: (qmail 38044 invoked by uid 500); 28 Aug 2008 14:37:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38019 invoked by uid 500); 28 Aug 2008 14:37:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38008 invoked by uid 99); 28 Aug 2008 14:37:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 07:37:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 14:36:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so525172rvb.5
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 07:37:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=vQ5vEs1fguMtZYzhS7sg6Xpg2HwVC3KcjZ0MaJcOl6Y=;
        b=Ftvgn86/qkL2ft5S3iUw+GbgcXTvdFcLQdn5AxhwBXRxeskbzVx/DW/dkxNd4krgfL
         flpCbicA+YLGQluLs3Kwrez2W50wKrIqw0Wd66BsrCCQyKwmIGU6UIl9p5+Sa9+UZQC1
         4ZbxnSBZw3c4Hk5cJ9sIPzSDukX0k+VX5Wi1g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=kHssyDfyfYLzTvd+4mB/G9sDH4Aq/yOqYdQyJgXDmPgUMKhajFIhH5LotS5i5vpAfX
         vucvII/MHQR69nFE69KpitbybbynynttHiD0XktsaRrtawd7gXl17kUoxPy+hKu3Jv8e
         sji7ifwSWAYu84HBK8i1QpPVx82KuLqJSGDlI=
Received: by 10.141.53.20 with SMTP id f20mr779711rvk.128.1219934221999;
        Thu, 28 Aug 2008 07:37:01 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Thu, 28 Aug 2008 07:37:01 -0700 (PDT)
Message-ID: <c68e39170808280737r760f338ftb7ea5e31a13bb61@mail.gmail.com>
Date: Thu, 28 Aug 2008 10:37:01 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Analyzer at Query time
In-Reply-To: <48b6b6f0.0116300a.161e.ffff8874@mx.google.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48b6b6f0.0116300a.161e.ffff8874@mx.google.com>
X-Google-Sender-Auth: 5b0b6170e8d63d55
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Aug 28, 2008 at 10:32 AM, Dino Korah <dckorah@gmail.com> wrote:
> If I am to completely avoid the query parser and use the BooleanQuery along
> with TermQuery, RangeQuery, PrefixQuery, PhraseQuery, etc, does the search
> words still get to the Analyzer, before actually doing the real search?

Nope... the Analyzer is invoked by the QueryParser.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 14:53:40 2008
Return-Path: <java-user-return-35773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35135 invoked from network); 28 Aug 2008 14:53:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 14:53:39 -0000
Received: (qmail 71947 invoked by uid 500); 28 Aug 2008 14:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71903 invoked by uid 500); 28 Aug 2008 14:53:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71873 invoked by uid 99); 28 Aug 2008 14:53:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 07:53:28 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 14:52:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KYirr-00080p-R8
	for java-user@lucene.apache.org; Thu, 28 Aug 2008 07:52:59 -0700
Message-ID: <19202310.post@talk.nabble.com>
Date: Thu, 28 Aug 2008 07:52:59 -0700 (PDT)
From: gaz77 <gareth.cole@bit10.net>
To: java-user@lucene.apache.org
Subject: Confused with NGRAM results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gareth.cole@bit10.net
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'd appreciate if someone could explain the results I'm getting.

I've written a simple custom analyzer that applies the NGramTokenFilter to
the token stream during indexing. It's never applied during searching. The
purpose of this is to match sub-words.

Without the ngram filter, if I searched on the word 'postcode' it returns 2
documents. If I searched on 'code' it returns 6 documents (with no overlap
on the postcode results).

If I apply the ngram filter with min 1 and max 10, searching 'postcode'
returns the same 2 docs, while searching 'code' returns 9 docs. This sort-of
feels right. 

The problem comes when I set the min ngram size to 3, and the max to 5.
Searching 'postcode' returns no results (as expected), but searching 'code'
only returns 2 docs (the 2 normally returned by a 'postcode' search).

This last result for 'code' just doesn't seem correct - it should be
returning at least the 6 docs from the original search.

I'd really appreciate some advice on what is going on with the ngram filter.

Thanks
-- 
View this message in context: http://www.nabble.com/Confused-with-NGRAM-results-tp19202310p19202310.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 15:24:50 2008
Return-Path: <java-user-return-35774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67113 invoked from network); 28 Aug 2008 15:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 15:24:47 -0000
Received: (qmail 39064 invoked by uid 500); 28 Aug 2008 15:24:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39028 invoked by uid 500); 28 Aug 2008 15:24:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39017 invoked by uid 99); 28 Aug 2008 15:24:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 08:24:39 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 15:23:41 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene sample code and api documentation
Date: Thu, 28 Aug 2008 11:23:49 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A358@SUEXCL-02.ad.syr.edu>
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73ACB@FMD3VS012.fda.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene sample code and api documentation
Thread-Index: AckIeQ0xPmRJyq3+R86KSLdgoWhizwAqJfQg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sithu,

On 08/27/2008 at 3:13 PM, Sudarsan, Sithu D. wrote:
> 2. Where do we look for sample codes? Or detailed tutorials?

Lots of good stuff here:

   <http://wiki.apache.org/jakarta-lucene>

and particularly here (books, articles, presentations, oh my!):

   <http://wiki.apache.org/jakarta-lucene/Resources>

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 15:37:55 2008
Return-Path: <java-user-return-35775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76019 invoked from network); 28 Aug 2008 15:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 15:37:54 -0000
Received: (qmail 64495 invoked by uid 500); 28 Aug 2008 15:37:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64461 invoked by uid 500); 28 Aug 2008 15:37:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64450 invoked by uid 99); 28 Aug 2008 15:37:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 08:37:46 -0700
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 15:36:47 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Confused with NGRAM results
Date: Thu, 28 Aug 2008 11:37:16 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A35F@SUEXCL-02.ad.syr.edu>
In-Reply-To: <19202310.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Confused with NGRAM results
Thread-Index: AckJHeAjxw89Wbj1Rwa7AHUDEPLatwABckhQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi gaz77,

Here's a good place to start:

<http://wiki.apache.org/jakarta-lucene/AnalysisParalysis>

Steve

On 08/28/2008 at 10:52 AM, gaz77 wrote:
>=20
> Hi,
>=20
> I'd appreciate if someone could explain the results I'm getting.
>=20
> I've written a simple custom analyzer that applies the
> NGramTokenFilter to the token stream during indexing. It's never
> applied during searching. The purpose of this is to match sub-words.
>=20
> Without the ngram filter, if I searched on the word 'postcode' it
> returns 2 documents. If I searched on 'code' it returns 6 documents
> (with no overlap on the postcode results).
>=20
> If I apply the ngram filter with min 1 and max 10, searching =
'postcode'
> returns the same 2 docs, while searching 'code' returns 9 docs. This
> sort-of feels right.
>=20
> The problem comes when I set the min ngram size to 3, and the
> max to 5. Searching 'postcode' returns no results (as expected), but
> searching 'code' only returns 2 docs (the 2 normally returned by a
> 'postcode' search).
>=20
> This last result for 'code' just doesn't seem correct - it should be
> returning at least the 6 docs from the original search.
>=20
> I'd really appreciate some advice on what is going on with
> the ngram filter.
>=20
> Thanks
> -- View this message in context: =
http://www.nabble.com/Confused-with-NGRAM-results-tp19202310p19202310.htm=
l
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 16:13:15 2008
Return-Path: <java-user-return-35776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96244 invoked from network); 28 Aug 2008 16:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 16:13:14 -0000
Received: (qmail 40322 invoked by uid 500); 28 Aug 2008 16:13:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40290 invoked by uid 500); 28 Aug 2008 16:13:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40279 invoked by uid 99); 28 Aug 2008 16:13:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:13:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ypavlidis@me.dium.com designates 199.117.103.143 as permitted sender)
Received: from [199.117.103.143] (HELO mail2.getmedium.com) (199.117.103.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 16:12:03 +0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C90928.E0E700E3"
Subject: boost freshness instead of sorting
Date: Thu, 28 Aug 2008 10:12:33 -0600
Message-ID: <74DFE4F68173F94787693F06E792A8F37725F1@exch1.ad.getmedium.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: boost freshness instead of sorting
thread-index: AckJKODkA2YSygfeQhWbowj/Av1r7A==
From: "Yannis Pavlidis" <ypavlidis@me.dium.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C90928.E0E700E3
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

I am trying to boost the freshness of some of our documents in the index =
using the most efficient way (i.e. if 2 news stories have the same score =
based on the content then I want to promote the one that was created =
last)

I have tried several techniques which do not seems to be performing that =
well or do not seem very efficient.=20
- range query=20
- custom query
- sorting

While looking at the archives I came across this email: =
http://www.gossamer-threads.com/lists/lucene/java-user/43457 where =
"Andrzej Bialecki" proposes the addition of a column related with days =
(months, etc) and add a "1" for each day/month that has passed from the =
epoch. I tried his solution and it does not seem to performing that =
well. The reason (unless my math have completely failed me) is because =
the boost that this new field provides is always the same.

For example i tried the above idea in an index that contained 4 =
documents. The days were set from 1-4 respectively.
The field weight (using the explain from Luke) is calculated as: field =
weight =3D tf * idf * fieldNorm. The idf is the same for all the =
documents. tf is defined as sqrt (times the term in the doc) and field =
Norm =3D field Boost * 1 / sqrt (terms in field).

In my example (and I cannot find how it would be different in other =
scenarios) the field weight is the same for all the documents (and equal =
to idf) because the sqrt (times the term in doc) * 1/sqrt (terms in =
field) =3D 1.

I would appreciate any feed back on that and also any other way you =
would consider in addressing the issue of boost the freshness of =
documents.

Thank you in advance,

Yannis.

------_=_NextPart_001_01C90928.E0E700E3--

From java-user-return-35777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 16:28:09 2008
Return-Path: <java-user-return-35777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5383 invoked from network); 28 Aug 2008 16:28:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 16:28:09 -0000
Received: (qmail 69125 invoked by uid 500); 28 Aug 2008 16:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69080 invoked by uid 500); 28 Aug 2008 16:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69068 invoked by uid 99); 28 Aug 2008 16:28:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:28:00 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 16:27:01 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: boost freshness instead of sorting
Date: Thu, 28 Aug 2008 12:27:08 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A373@SUEXCL-02.ad.syr.edu>
In-Reply-To: <74DFE4F68173F94787693F06E792A8F37725F1@exch1.ad.getmedium.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: boost freshness instead of sorting
Thread-Index: AckJKODkA2YSygfeQhWbowj/Av1r7AAAKFcg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Yannis,

On 08/28/2008 at 12:12 PM, Yannis Pavlidis wrote:
> I am trying to boost the freshness of some of our documents
> in the index using the most efficient way (i.e. if 2 news
> stories have the same score based on the content then I want
> to promote the one that was created last)
>=20
[...]
>=20
> While looking at the archives I came across this email:
> http://www.gossamer-threads.com/lists/lucene/java-user/43457 where
> "Andrzej Bialecki" proposes the addition of a column related with days
> (months, etc) and add a "1" for each day/month that has passed from =
the
> epoch. I tried his solution and it does not seem to performing that
> well. The reason (unless my math have completely failed me) is because
> the boost that this new field provides is always the same.

What Andrzej said was:

> Add a separate field, say "days", in which you will put as many
> "1" as many days elapsed since the epoch (not neccessarily since
> 1 Jan 1970 - pick a date that makes sense for you). Then, if you
> want to prioritize newer documents, just add "+days:1" to your
> query. Voila - the final results are a sum of other score factors
> plus a score factor that is higher for more recent document,
> containing more 1-s.=20

You interpreted this to mean "1", "2", "3", "4", etc. for the field =
value, but what Andrzej meant was something like (assuming an analyzer =
that tokenizes at whitespace and does not drop numeric tokens): "1", "1 =
1", "1 1 1", "1 1 1 1", etc.  Note that the choice of the "1" for the =
token string is arbitrary - it could also be "X" or "Gazornumplatz".

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 16:47:18 2008
Return-Path: <java-user-return-35778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17058 invoked from network); 28 Aug 2008 16:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 16:47:18 -0000
Received: (qmail 98623 invoked by uid 500); 28 Aug 2008 16:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98595 invoked by uid 500); 28 Aug 2008 16:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98584 invoked by uid 99); 28 Aug 2008 16:47:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:47:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ypavlidis@me.dium.com designates 199.117.103.143 as permitted sender)
Received: from [199.117.103.143] (HELO mail2.getmedium.com) (199.117.103.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 16:46:10 +0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C9092D.97F817E5"
Subject: RE: boost freshness instead of sorting
Date: Thu, 28 Aug 2008 10:44:48 -0600
Message-ID: <74DFE4F68173F94787693F06E792A8F37725F3@exch1.ad.getmedium.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: boost freshness instead of sorting
thread-index: AckJKODkA2YSygfeQhWbowj/Av1r7AAAKFcgAAD3/SY=
References: <9294E20AED46934EA459020706463F94C5A373@SUEXCL-02.ad.syr.edu>
From: "Yannis Pavlidis" <ypavlidis@me.dium.com>
To: <java-user@lucene.apache.org>,<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C9092D.97F817E5
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hey Steve,

Thanks for the quick response. Apologies my email was not very clear. I =
actually did what you and Andrzej propose. So in my test (with field =
boost and doc boost =3D 1)

doc 0 has days: "1"        and field weight =3D tf * idf * field Norm =
=3D sqrt(1) * idf * 1/sqrt(1) =3D idf
doc 1 has days: "1 1"      and field weight =3D tf * idf * field Norm =
=3D sqrt(2) * idf * 1/sqrt(2) =3D idf
doc 2 has days: "1 1 1"    and field weight =3D tf * idf * field Norm =
=3D sqrt(3) * idf * 1/sqrt(3) =3D idf
doc 3 has days: "1 1 1 1"  and field weight =3D tf * idf * field Norm =
=3D sqrt(4) * idf * 1/sqrt(4) =3D idf

I am using the Snowball English analyzer which I believe does the right =
job (I also tried the same example with bbb instead of 1)

Any clarifications / suggestions would be appreciated.=20

Thanks,

Yannis.

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]
Sent: Thu 8/28/2008 10:27 AM
To: java-user@lucene.apache.org
Subject: RE: boost freshness instead of sorting
=20
Hi Yannis,

On 08/28/2008 at 12:12 PM, Yannis Pavlidis wrote:
> I am trying to boost the freshness of some of our documents
> in the index using the most efficient way (i.e. if 2 news
> stories have the same score based on the content then I want
> to promote the one that was created last)
>=20
[...]
>=20
> While looking at the archives I came across this email:
> http://www.gossamer-threads.com/lists/lucene/java-user/43457 where
> "Andrzej Bialecki" proposes the addition of a column related with days
> (months, etc) and add a "1" for each day/month that has passed from =
the
> epoch. I tried his solution and it does not seem to performing that
> well. The reason (unless my math have completely failed me) is because
> the boost that this new field provides is always the same.

What Andrzej said was:

> Add a separate field, say "days", in which you will put as many
> "1" as many days elapsed since the epoch (not neccessarily since
> 1 Jan 1970 - pick a date that makes sense for you). Then, if you
> want to prioritize newer documents, just add "+days:1" to your
> query. Voila - the final results are a sum of other score factors
> plus a score factor that is higher for more recent document,
> containing more 1-s.=20

You interpreted this to mean "1", "2", "3", "4", etc. for the field =
value, but what Andrzej meant was something like (assuming an analyzer =
that tokenizes at whitespace and does not drop numeric tokens): "1", "1 =
1", "1 1 1", "1 1 1 1", etc.  Note that the choice of the "1" for the =
token string is arbitrary - it could also be "X" or "Gazornumplatz".

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



------_=_NextPart_001_01C9092D.97F817E5--

From java-user-return-35779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 16:56:19 2008
Return-Path: <java-user-return-35779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22393 invoked from network); 28 Aug 2008 16:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 16:56:19 -0000
Received: (qmail 12859 invoked by uid 500); 28 Aug 2008 16:56:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12831 invoked by uid 500); 28 Aug 2008 16:56:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12820 invoked by uid 99); 28 Aug 2008 16:56:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:56:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Aug 2008 16:55:10 +0000
Received: (qmail 43046 invoked by uid 60001); 28 Aug 2008 16:54:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=cJ8UGFFx/efaCSpTA+nCtYkV2aFyJj16d9d0ueeIRBBk/HhIVv9p5H1NSOf0xbcaAJ0kNEs+fXffnJ/xaiBbfUm66e6SjkDjEmIAG5j86fLz+K7spo+Xr+PsjSbsWNutk73PFQ2+zDJaeYTa1ZXd8+S82Zyys0hQa52kKVIzEpI=;
X-YMail-OSG: 1U3XigAVM1l.wB6QlKiiu8vxLf9gdyrQyVJE6IfwS5qu7YGAEmKOwyQkRIRJPZL9Nwl8V5oy_CeTTuzHHZuKcN4h9TpRnAAN8KF29z4NB9pXtnCubBZnWEHniE7VCZlb18DjEaCKRlEKkP5vPCS4nGk-
Received: from [167.206.188.3] by web50304.mail.re2.yahoo.com via HTTP; Thu, 28 Aug 2008 09:54:39 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 28 Aug 2008 09:54:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Case Sensitivity
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <773932.42806.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

So in other words, it *is* possible to have the field both tokenized and its norms omitted?


Otis 
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Karl Wettin <karl.wettin@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, August 28, 2008 5:52:54 AM
> Subject: Re: Case Sensitivity
> 
> 
> 28 aug 2008 kl. 11.46 skrev Andrzej Bialecki:
> 
> > Karl Wettin wrote:
> >> 28 aug 2008 kl. 10.58 skrev Dino Korah:
> >>> Document doc = new Document();
> >>> Field f = new Field("body", bodyText, Field.Store.NO,
> >>> Field.Index.TOKENIZED);
> >>> f.setOmitNorms(true);
> >>>
> >>> Would that be equivalent to
> >>>
> >>> Document doc = new Document();
> >>> Field f = new Field("body", bodyText,  
> >>> Field.Store.NO ,Field.Index.NO_NORMS);
> >>>
> >>> And Field.Index.TOKENIZED has no effect after  
> >>> f.setOmitNorms(true); ?
> >> Yes, those two have the same effect.
> >
> > I don't think so - these two scenarios are different.
> >
> > When you create a Field using Index.NO_NORMS, the constructor makes  
> > sure that:
> >      isIndexed = true;
> >      isTokenized = false;
> >      omitNorms = true;
> >
> > When you create a Field using Index.TOKENIZED, the constructor sets  
> > these flags:
> >      isIndexed = true;
> >      isTokenized = true;
> >
> > Then, when you call setOmitNorms(true), it does NOT affect  
> > isTokenized, it sets only omitNorms. So the flags are set now like  
> > this:
> >      isIndexed = true;
> >      isTokenized = true;
> >      omitNorms = true;
> >
> > The end result of processing such a field is (I believe)  
> > conceptually equivalent to adding as many Fields as there are  
> > tokens, each with omitNorms=true.
> 
> Oh, you are of course right, I was too quick to read. Sorry.
> 
> 
>        karl
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 16:57:56 2008
Return-Path: <java-user-return-35780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23689 invoked from network); 28 Aug 2008 16:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 16:57:56 -0000
Received: (qmail 17810 invoked by uid 500); 28 Aug 2008 16:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17784 invoked by uid 500); 28 Aug 2008 16:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17773 invoked by uid 99); 28 Aug 2008 16:57:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 09:57:47 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FS_REPLICA,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Aug 2008 16:56:47 +0000
Received: (qmail 93810 invoked by uid 60001); 28 Aug 2008 16:57:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=5JSM0ROos/2iJ4MT+L+n4PU3zyNXDkDlv+03exMhAARKQrjG0ZHm+RpgZpGwVOFx10diP3KjI5qr2v3/a2fFbKquDT6toG1CdYpGfbVXEXlVCZBRGqwCLRi+3E7DKxt54nLDWeeI6u9XDQHNqlcFHFcSoQ7mNJZ6syskHAJJB4k=;
X-YMail-OSG: 1va3LE0VM1kUQ_mmPpYTbrOhYkXfJNk86XoNLn.VWE11zO2spzsBoXJ08iL2_voUQxlZDoZxZAjUmv4ew0kVuDAt2VUjHP5Zo01qOjOp1eDVjcuB6HpYqhCiSARtA_fznJ_dUbwWSPpgh93WZTIvJKU-
Received: from [167.206.188.3] by web50309.mail.re2.yahoo.com via HTTP; Thu, 28 Aug 2008 09:57:16 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 28 Aug 2008 09:57:16 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Replicating Lucene Index with out SOLR
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <348886.93561.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I think you pinpointed what I see over and over with Solr.  The two de=
sires pull in opposite directions.  I think Jason Rutherglen is very keen t=
o start talking about Lucene clusters and index replication in such cluster=
s without using the classic master/slave approach.=0A=0AJason, want to star=
t a thread on java-dev?=0A=0AOtis=0A--=0ASematext -- http://sematext.com/ -=
- Lucene - Solr - Nutch=0A=0A=0A=0A----- Original Message ----=0A> From: ma=
rk harwood <markharw00d@yahoo.co.uk>=0A> To: java-user@lucene.apache.org=0A=
> Sent: Thursday, August 28, 2008 6:21:19 AM=0A> Subject: Re: Replicating L=
ucene Index with out SOLR=0A> =0A> >> You don't need to copy the whole inde=
x every time=0A> >> if you do incremental  indexing/updates and don't optim=
ize the index=0A> =0A> =0A> But at 5 minute intervals for replication does =
this not quickly lead to a very =0A> fragmented index?=0A> =0A> It seems th=
ere is a fundamental conflict when building replication systems based =0A> =
entirely on the lucene file format:=0A> * In the interests of good search p=
erformance the index should ideally be a =0A> small number of large files (=
which is what mergepolicy/optimize are all about =0A> maintaining)=0A> * Ho=
wever, in the interest of minimising replication network traffic, the ideal=
 =0A> is a large number of small files.=0A> =0A> I've previously built repl=
ication systems which rely on each server pulling =0A> deltas in the form o=
f insert/update/delete records from a database and using =0A> IndexWriter l=
ocally on each server to apply these sets of changes. Obviously =0A> this d=
uplicates the analyzing/indexing effort across replicas but does mean the =
=0A> content being transferred is not restricted by the design of the Lucen=
e file =0A> format and therefore uses minimal network traffic and places no=
 restrictions on =0A> the IndexWriter merge policies I may choose to use to=
 optimise search speed.=0A> =0A> Keen to explore the pros and cons of these=
 different replication schemes.=0A> =0A> Cheers,=0A> Mark=0A> =0A> =0A> =0A=
> --- On Thu, 28/8/08, rahul_k123 wrote:=0A> =0A> > From: rahul_k123 =0A> >=
 Subject: Re: Replicating Lucene Index with out SOLR=0A> > To: java-user@lu=
cene.apache.org=0A> > Date: Thursday, 28 August, 2008, 6:47 AM=0A> > Can i =
make use of solr scripts for this purpose.=0A> > =0A> > =0A> > The snapinst=
aller runs on the slave after a snapshot has=0A> > been pulled from=0A> > t=
he master. This signals the local Solr server to open a=0A> > new index rea=
der,=0A> > then auto-warming of the cache(s) begins (in the new=0A> > reade=
r), while other=0A> > requests continue to be served by the original index=
=0A> > reader.=0A> > =0A> > How can i achieve the above in my case??=0A> > =
=0A> > =0A> > Otis Gospodnetic wrote:=0A> > > =0A> > > You don't need to co=
py the whole index every time=0A> > if you do incremental=0A> > > indexing/=
updates and don't optimize the index=0A> > before copying.  If you use=0A> =
> > rsync for copying the index, only the new/modified=0A> > files be copie=
d.  This=0A> > > is what Solr replication scripts do, too.=0A> > > =0A> > >=
 Otis=0A> > > --=0A> > > Sematext -- http://sematext.com/ -- Lucene - Solr =
-=0A> > Nutch=0A> > > =0A> > > =0A> > > =0A> > > ----- Original Message ---=
-=0A> > >> From: rahul_k123 =0A> > >> To: general@lucene.apache.org=0A> > >=
> Sent: Wednesday, August 27, 2008 11:36:07 PM=0A> > >> Subject: Re: Replic=
ating Lucene Index with out=0A> > SOLR=0A> > >> =0A> > >> =0A> > >> Current=
ly we index every certain amount of time on=0A> > A.=0A> > >> =0A> > >> -co=
py the index=0A> > >>      Copying the whole index everytime ? =0A> > >> =
=0A> > >> Currently i am investigating how i can make use of=0A> > SOLR rep=
lication=0A> > >> scripts=0A> > >> to achive this.=0A> > >> =0A> > >> =0A> =
> >> Is there anyone who did this with out SOLR before?=0A> > >> =0A> > >> =
=0A> > >> Thanks=0A> > >> =0A> > >> =0A> > >> =0A> > >> Otis Gospodnetic wr=
ote:=0A> > >> > =0A> > >> > Hi,=0A> > >> > =0A> > >> > You may want to ask =
on the java-user list=0A> > (more subscribers), which I'm=0A> > >> > CC-ing=
, so we can continue discussion there.=0A> > >> > I think you will have to =
implement your own=0A> > logic that runs on A and=0A> > >> does=0A> > >> > =
something like this:=0A> > >> > =0A> > >> > - stop adding new docs=0A> > >>=
 > - call commit on the IndexWriter=0A> > >> > =0A> > >> > - copy the index=
=0A> > >> > - resume indexing=0A> > >> > =0A> > >> > Otis=0A> > >> > --=0A>=
 > >> > Sematext -- http://sematext.com/ -- Lucene -=0A> > Solr - Nutch=0A>=
 > >> > =0A> > >> > =0A> > >> > =0A> > >> > ----- Original Message ----=0A>=
 > >> >> From: rahul_k123 =0A> > >> >> To: general@lucene.apache.org=0A> > =
>> >> Sent: Thursday, August 28, 2008 1:34:41=0A> > AM=0A> > >> >> Subject:=
 Replicating Lucene Index with=0A> > out SOLR=0A> > >> >> =0A> > >> >> =0A>=
 > >> >> I have the following requirement=0A> > >> >> =0A> > >> >> Right no=
w we have multiple indexes =0A> > serving our web application. Our=0A> > >>=
 >> indexes=0A> > >> >> are around 30 GB size.=0A> > >> >> =0A> > >> >> We =
want to replicate the index data so=0A> > that we can use them to=0A> > >> =
distribute=0A> > >> >> the search load.=0A> > >> >> =0A> > >> >> This is wh=
at we need ideally.=0A> > >> >> =0A> > >> >> A =E2=80=93 (supports writes a=
nd reads)=0A> > >> >> =0A> > >> >> A1 =E2=80=93Replicated Index (Supports r=
eads) =0A> > . We want to synchronize this=0A> > >> >> every 5=0A> > >> >> =
mins.=0A> > >> >> =0A> > >> >> =0A> > >> >> =0A> > >> >> Any help is apprec=
iated.   We are not=0A> > using SOLR=0A> > >> >> =0A> > >> >> I also intere=
sted in knowing what will be=0A> > the best way so that I can=0A> > >> >> s=
cale=0A> > >> >> my application adding more boxes for=0A> > search if our l=
oad increases.=0A> > >> >> =0A> > >> >> Thanks.  =0A> > >> >> =0A> > >> >> =
-- =0A> > >> >> View this message in context: =0A> > >> >> =0A> > >>=0A> > =
=0A> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp1919175=
2p19191752.html=0A> > >> >> Sent from the Lucene - General mailing=0A> > li=
st archive at Nabble.com.=0A> > >> > =0A> > >> > =0A> > >> > =0A> > >> =0A>=
 > >> -- =0A> > >> View this message in context: =0A> > >>=0A> > =0A> http:=
//www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p19193670=
.html=0A> > >> Sent from the Lucene - General mailing list=0A> > archive at=
 Nabble.com.=0A> > > =0A> > > =0A> > >=0A> > ------------------------------=
---------------------------------------=0A> > > To unsubscribe, e-mail:=0A>=
 > java-user-unsubscribe@lucene.apache.org=0A> > > For additional commands,=
 e-mail:=0A> > java-user-help@lucene.apache.org=0A> > > =0A> > > =0A> > > =
=0A> > =0A> > -- =0A> > View this message in context:=0A> > =0A> http://www=
.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19193696p19194576.html=
=0A> > Sent from the Lucene - Java Users mailing list archive at=0A> > Nabb=
le.com.=0A> > =0A> > =0A> > -----------------------------------------------=
----------------------=0A> > To unsubscribe, e-mail:=0A> > java-user-unsubs=
cribe@lucene.apache.org=0A> > For additional commands, e-mail:=0A> > java-u=
ser-help@lucene.apache.org=0A> =0A> =0A> Send instant messages to your onli=
ne friends http://uk.messenger.yahoo.com=0A> =0A> -------------------------=
--------------------------------------------=0A> To unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: =
java-user-help@lucene.apache.org=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 17:06:44 2008
Return-Path: <java-user-return-35781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27604 invoked from network); 28 Aug 2008 17:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 17:06:44 -0000
Received: (qmail 30561 invoked by uid 500); 28 Aug 2008 17:06:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30522 invoked by uid 500); 28 Aug 2008 17:06:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30510 invoked by uid 99); 28 Aug 2008 17:06:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:06:35 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:05:36 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: boost freshness instead of sorting
Date: Thu, 28 Aug 2008 13:06:05 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5A386@SUEXCL-02.ad.syr.edu>
In-Reply-To: <74DFE4F68173F94787693F06E792A8F37725F3@exch1.ad.getmedium.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: boost freshness instead of sorting
Thread-Index: AckJKODkA2YSygfeQhWbowj/Av1r7AAAKFcgAAD3/SYAAGXrIA==
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Yannis,

Hmm, hadn't thought about norms - you could just turn them off, right?:

<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/document/Field=
.html#Field(java.lang.String,%20java.lang.String,%20org.apache.lucene.doc=
ument.Field.Store,%20org.apache.lucene.document.Field.Index)>

with

<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/document/Field=
.Index.html#NO_NORMS>

(Be careful of using NO_NORMS, though, since in addition to disabling =
norms, it also disables analysis, so you'd have to add a same-named =
Field for each "1".)

or

<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/document/Field=
able.html#setOmitNorms(boolean)>

Or I suppose you could know in advance the maximum number of tokens your =
field would have, and use some alternate token to pad out the field (no =
norms is probably the more reasonable route):

doc 0 has days: "0 0 0 1"
doc 1 has days: "0 0 1 1"
doc 2 has days: "0 1 1 1"
doc 3 has days: "1 1 1 1"

Steve

On 08/28/2008 at 12:44 PM, Yannis Pavlidis wrote:
>=20
> Hey Steve,
>=20
> Thanks for the quick response. Apologies my email was not
> very clear. I actually did what you and Andrzej propose. So
> in my test (with field boost and doc boost =3D 1)
>=20
> doc 0 has days: "1"        and field weight =3D tf * idf *
> field Norm =3D sqrt(1) * idf * 1/sqrt(1) =3D idf
> doc 1 has days: "1 1"      and field weight =3D tf * idf *
> field Norm =3D sqrt(2) * idf * 1/sqrt(2) =3D idf
> doc 2 has days: "1 1 1"    and field weight =3D tf * idf *
> field Norm =3D sqrt(3) * idf * 1/sqrt(3) =3D idf
> doc 3 has days: "1 1 1 1"  and field weight =3D tf * idf *
> field Norm =3D sqrt(4) * idf * 1/sqrt(4) =3D idf
>=20
> I am using the Snowball English analyzer which I believe does
> the right job (I also tried the same example with bbb instead of 1)
>=20
> Any clarifications / suggestions would be appreciated.
>=20
> Thanks,
>=20
> Yannis.
>=20
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: Thu 8/28/2008 10:27 AM
> To: java-user@lucene.apache.org
> Subject: RE: boost freshness instead of sorting
>=20
> Hi Yannis,
>=20
> On 08/28/2008 at 12:12 PM, Yannis Pavlidis wrote:
> > I am trying to boost the freshness of some of our documents
> > in the index using the most efficient way (i.e. if 2 news
> > stories have the same score based on the content then I want
> > to promote the one that was created last)
> >=20
> > [...]
> >=20
> > While looking at the archives I came across this email:
> > http://www.gossamer-threads.com/lists/lucene/java-user/43457 where
> > "Andrzej Bialecki" proposes the addition of a column related with =
days
> > (months, etc) and add a "1" for each day/month that has passed from =
the
> > epoch. I tried his solution and it does not seem to performing that
> > well. The reason (unless my math have completely failed me) is =
because
> > the boost that this new field provides is always the same.
>=20
> What Andrzej said was:
>=20
> > Add a separate field, say "days", in which you will put as many
> > "1" as many days elapsed since the epoch (not neccessarily since
> > 1 Jan 1970 - pick a date that makes sense for you). Then, if you
> > want to prioritize newer documents, just add "+days:1" to your
> > query. Voila - the final results are a sum of other score factors
> > plus a score factor that is higher for more recent document,
> > containing more 1-s.
>=20
> You interpreted this to mean "1", "2", "3", "4", etc. for the
> field value, but what Andrzej meant was something like
> (assuming an analyzer that tokenizes at whitespace and does
> not drop numeric tokens): "1", "1 1", "1 1 1", "1 1 1 1",
> etc.  Note that the choice of the "1" for the token string is
> arbitrary - it could also be "X" or "Gazornumplatz".
>=20
> Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 17:38:07 2008
Return-Path: <java-user-return-35782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44694 invoked from network); 28 Aug 2008 17:38:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 17:38:07 -0000
Received: (qmail 2835 invoked by uid 500); 28 Aug 2008 17:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2798 invoked by uid 500); 28 Aug 2008 17:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2787 invoked by uid 99); 28 Aug 2008 17:37:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:37:58 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.71.238.250] (HELO outbound.mse19.exchange.ms) (64.71.238.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:37:00 +0000
Received: from mse19be2.mse19.exchange.ms ([172.28.1.9]) by
 mse19fe1.mse19.exchange.ms ([172.29.12.67]) with mapi; Thu, 28 Aug 2008
 13:37:28 -0400
From: Shi Hui Liu <shihui@nextbio.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 28 Aug 2008 13:37:25 -0400
Subject: RE: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Thread-Topic: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Thread-Index: AckJDaF3vO5zu7F6QkGYhumaBPTrPgAJUtyg
Message-ID: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F8611B44@mse19be2.mse19.exchange.ms>
References: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms>
 <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FE1DD@mse19be2.mse19.exchange.ms>
 <79A7FD5E-947D-4D48-AEBB-9C676D201248@apache.org>
In-Reply-To: <79A7FD5E-947D-4D48-AEBB-9C676D201248@apache.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant,

Thank you for your help. My query is A AND B. The problem is if I use Boole=
anQuery, I got score 120 from TermQuery(A) and 0.5 from TermQuery(B) for th=
e first article; for second article, I got score 27 from TermQuery(A) and 3=
6 from TermQuery(B). From my point of view, I think the second article is b=
etter than the first one, however, the result is otherwise. I'm thinking to=
 create a Query to multiply the score of A and B instead of sum. But I want=
 to know if there is an existing query doing same thing since I'm still a n=
ew user to Lucene.

Thank you in advance,
Shi Hui

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]
Sent: Thursday, August 28, 2008 5:57 AM
To: java-user@lucene.apache.org
Subject: Re: Clarity: Is there a Query boosting 50-50 over 1000-1 ?


On Aug 27, 2008, at 7:34 PM, Shi Hui Liu wrote:

> Hi,
>
> I think I should clarify my question a little bit. I'm using
> BooleanQuery to combine TermQuery(A) and TermQuery(B). But I'm not
> satisfied with its scoring algorigthm. Is there other queries can
> boost up the documents with 50 of A and 50 of B on top of documents
> with 1000 of A and 1 of B?

Is your query A + B meant to be A OR B or A AND B?  That is, are both
terms required?  You notation suggests they are, but the description
suggests you are getting documents that have only A in them, which
suggests "OR".

Have you looked at the explains?  What about the scoring aren't you
happy with?  It's not perfect (there is no such thing) but it works
pretty well in most cases, and works great if you spend a little time
figuring out the right length normalization factors.


> And I'm looking at the source code and found lots of classes are not
> public and some important methods are protected. What's the reason?
> Why make them public and let users to customize the Query easily?

Because there not meant to be overridden, but of course we are open to
specific suggestions on things that should be made public and often do
this when someone shows a valid reason.

Cheers,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 17:40:19 2008
Return-Path: <java-user-return-35783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45834 invoked from network); 28 Aug 2008 17:40:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 17:40:18 -0000
Received: (qmail 5688 invoked by uid 500); 28 Aug 2008 17:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5656 invoked by uid 500); 28 Aug 2008 17:40:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5645 invoked by uid 99); 28 Aug 2008 17:40:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:40:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:39:11 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m7SHdpr01381
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 12:39:51 -0500
Message-ID: <48B6E2C9.1020005@getopt.org>
Date: Thu, 28 Aug 2008 19:39:21 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
References: <773932.42806.qm@web50304.mail.re2.yahoo.com>
In-Reply-To: <773932.42806.qm@web50304.mail.re2.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> So in other words, it *is* possible to have the field both tokenized and its norms omitted?

Yes. Probably this is an unintended side-effect of adding setOmitNorms, 
but I think it's useful and IMHO we should keep it.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 17:41:51 2008
Return-Path: <java-user-return-35784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46703 invoked from network); 28 Aug 2008 17:41:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 17:41:50 -0000
Received: (qmail 9189 invoked by uid 500); 28 Aug 2008 17:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9007 invoked by uid 500); 28 Aug 2008 17:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8977 invoked by uid 99); 28 Aug 2008 17:41:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:41:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:40:43 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m7SHfOE04687
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 12:41:25 -0500
Message-ID: <48B6E326.4020602@getopt.org>
Date: Thu, 28 Aug 2008 19:40:54 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: boost freshness instead of sorting
References: <9294E20AED46934EA459020706463F94C5A386@SUEXCL-02.ad.syr.edu>
In-Reply-To: <9294E20AED46934EA459020706463F94C5A386@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Steven A Rowe wrote:
> Hi Yannis,
> 
> Hmm, hadn't thought about norms - you could just turn them off,
> right?:
> 
> <http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/document/Field.html#Field(java.lang.String,%20java.lang.String,%20org.apache.lucene.document.Field.Store,%20org.apache.lucene.document.Field.Index)>
> 
> 
> with
> 
> <http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/document/Field.Index.html#NO_NORMS>
> 
> 
> (Be careful of using NO_NORMS, though, since in addition to disabling
> norms, it also disables analysis, so you'd have to add a same-named
> Field for each "1".)

We are discussing the same thing in "Case sensitivity" thread - it's 
possible to have a tokenized field and omit its norms.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 17:42:58 2008
Return-Path: <java-user-return-35785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47015 invoked from network); 28 Aug 2008 17:42:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 17:42:58 -0000
Received: (qmail 11665 invoked by uid 500); 28 Aug 2008 17:42:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11371 invoked by uid 500); 28 Aug 2008 17:42:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11360 invoked by uid 99); 28 Aug 2008 17:42:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:42:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Aug 2008 17:41:50 +0000
Received: (qmail 29779 invoked by uid 60001); 28 Aug 2008 17:42:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=IMdu3cFUpiyTMdexzeW5l8g1PD/lmrOcYG6D+wMKOdt+fFr5OvY2aTWVqNr2qu0axNAdt3xssDY5pjLMKThg5KUs9tUaAuUcDj1PgoWaYob0joQFEKPTtaa+kRdjY2mmYAdFPlamJ5058dVCdjp1fRXS2yoEyV3H6ANYLV5HHiM=;
X-YMail-OSG: DHa7F7QVM1nYa5v4DXe1oD3saI93xf3XD4RTd_29isdmGfaKtghMQrKYVgAwLcqyR5044J9l35a.2JHPNnf92BFAVPNUzMjo6oW5ibWjDqxCfwZtXAZ6EMg9y.TRCidrnJE0XrwH.Gdy0YWjjotxXZc-
Received: from [167.206.188.3] by web50308.mail.re2.yahoo.com via HTTP; Thu, 28 Aug 2008 10:42:18 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 28 Aug 2008 10:42:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Case Sensitivity
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <72692.29360.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes.  And I think I have used this "trick" a couple of years ago, but have since forgotten about it. :)

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Andrzej Bialecki <ab@getopt.org>
> To: java-user@lucene.apache.org
> Sent: Thursday, August 28, 2008 1:39:21 PM
> Subject: Re: Case Sensitivity
> 
> Otis Gospodnetic wrote:
> > So in other words, it *is* possible to have the field both tokenized and its 
> norms omitted?
> 
> Yes. Probably this is an unintended side-effect of adding setOmitNorms, 
> but I think it's useful and IMHO we should keep it.
> 
> 
> -- 
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 17:45:26 2008
Return-Path: <java-user-return-35786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48662 invoked from network); 28 Aug 2008 17:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 17:45:25 -0000
Received: (qmail 17321 invoked by uid 500); 28 Aug 2008 17:45:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17292 invoked by uid 500); 28 Aug 2008 17:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17281 invoked by uid 99); 28 Aug 2008 17:45:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:45:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:44:16 +0000
Received: by wr-out-0506.google.com with SMTP id c30so451995wra.21
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 10:44:28 -0700 (PDT)
Received: by 10.90.95.18 with SMTP id s18mr1969023agb.55.1219945467868;
        Thu, 28 Aug 2008 10:44:27 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id 23sm205507hsd.0.2008.08.28.10.44.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 10:44:27 -0700 (PDT)
Message-Id: <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <72692.29360.qm@web50308.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Case Sensitivity
Date: Thu, 28 Aug 2008 13:44:25 -0400
References: <72692.29360.qm@web50308.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


In fact I plan to add it as Field.Index.ANALYZED_NO_NORMS, in this  
issue:

     https://issues.apache.org/jira/browse/LUCENE-1366

Mike

Otis Gospodnetic wrote:

> Yes.  And I think I have used this "trick" a couple of years ago,  
> but have since forgotten about it. :)
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Andrzej Bialecki <ab@getopt.org>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, August 28, 2008 1:39:21 PM
>> Subject: Re: Case Sensitivity
>>
>> Otis Gospodnetic wrote:
>>> So in other words, it *is* possible to have the field both  
>>> tokenized and its
>> norms omitted?
>>
>> Yes. Probably this is an unintended side-effect of adding  
>> setOmitNorms,
>> but I think it's useful and IMHO we should keep it.
>>
>>
>> -- 
>> Best regards,
>> Andrzej Bialecki     <><
>>  ___. ___ ___ ___ _ _   __________________________________
>> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
>> ___|||__||  \|  ||  |  Embedded Unix, System Integration
>> http://www.sigram.com  Contact: info at sigram dot com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 17:51:25 2008
Return-Path: <java-user-return-35787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52847 invoked from network); 28 Aug 2008 17:51:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 17:51:25 -0000
Received: (qmail 27540 invoked by uid 500); 28 Aug 2008 17:51:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27508 invoked by uid 500); 28 Aug 2008 17:51:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27496 invoked by uid 99); 28 Aug 2008 17:51:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:51:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:50:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so610354rvb.5
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 10:50:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=2aoPoSG525tJaDFrEJ2qh6ArxEVKcRC8yF2z3PD6TWI=;
        b=rPuf69HDZtDaWJ9ZilqKmDLpR2CIC+0OSM771W3awsJmGcsz2yD6oWV2YXOTjs/1dg
         qGtfB1XLBLSLBymi/fouMP/mmn8rSc0BqG+dZvqvHKRGx1P2AAZkyH9U05TzAKwEaKO5
         YiOKsuAQhd6Ad214xGu5T5b88q82VIYg0WWrA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=PY+THsoL9wvWvs8ed083BRgQfvXdgzlXDMVQjrPYYSz1/AOHBKwSwbCb21I5omB0nm
         UiznI5fMohEXJ9vPWfL+6fYMXOvM9UMPXIPngKhoQEDoU6avODUWUQLYmj1yQdbdAOpR
         4d0ylXxmOQOkeigoAufMjMWwSI/HB+2lTzJFg=
Received: by 10.141.176.6 with SMTP id d6mr914805rvp.214.1219945841375;
        Thu, 28 Aug 2008 10:50:41 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Thu, 28 Aug 2008 10:50:41 -0700 (PDT)
Message-ID: <c68e39170808281050k6bc0481bh8ff3ca444454d331@mail.gmail.com>
Date: Thu, 28 Aug 2008 13:50:41 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
In-Reply-To: <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <72692.29360.qm@web50308.mail.re2.yahoo.com>
	 <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com>
X-Google-Sender-Auth: 152af4fa81619fc7
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Aug 28, 2008 at 1:44 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> In fact I plan to add it as Field.Index.ANALYZED_NO_NORMS, in this issue:

I wasn't originally going to add a Field.Index at all for omitNorms,
but Doug suggested it.
The problem with this type-safe way of doing things is the
combinatorial explosion.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 17:52:38 2008
Return-Path: <java-user-return-35788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53444 invoked from network); 28 Aug 2008 17:52:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 17:52:38 -0000
Received: (qmail 29408 invoked by uid 500); 28 Aug 2008 17:52:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29374 invoked by uid 500); 28 Aug 2008 17:52:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29363 invoked by uid 99); 28 Aug 2008 17:52:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 10:52:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:51:30 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m7SHpCx32742
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 12:51:12 -0500
Message-ID: <48B6E571.5010507@getopt.org>
Date: Thu, 28 Aug 2008 19:50:41 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Case Sensitivity
References: <72692.29360.qm@web50308.mail.re2.yahoo.com> <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com>
In-Reply-To: <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
> 
> In fact I plan to add it as Field.Index.ANALYZED_NO_NORMS, in this issue:
> 
>     https://issues.apache.org/jira/browse/LUCENE-1366

This has consequences when searching - so if we expose it the javadoc 
has to be really good at explaining what's going on :)


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 18:17:20 2008
Return-Path: <java-user-return-35789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64773 invoked from network); 28 Aug 2008 18:17:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 18:17:20 -0000
Received: (qmail 72447 invoked by uid 500); 28 Aug 2008 18:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72413 invoked by uid 500); 28 Aug 2008 18:17:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72333 invoked by uid 99); 28 Aug 2008 18:17:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 11:17:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 18:16:10 +0000
Received: by an-out-0708.google.com with SMTP id c37so79796anc.49
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 11:16:21 -0700 (PDT)
Received: by 10.100.128.20 with SMTP id a20mr2079202and.74.1219947381348;
        Thu, 28 Aug 2008 11:16:21 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id m56sm4304917rnd.1.2008.08.28.11.16.15
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 11:16:18 -0700 (PDT)
Message-Id: <32FF3321-E20B-4021-8576-7D50F9626637@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170808281050k6bc0481bh8ff3ca444454d331@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Case Sensitivity
Date: Thu, 28 Aug 2008 14:16:07 -0400
References: <72692.29360.qm@web50308.mail.re2.yahoo.com> <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com> <c68e39170808281050k6bc0481bh8ff3ca444454d331@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Yonik Seeley wrote:

> On Thu, Aug 28, 2008 at 1:44 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> In fact I plan to add it as Field.Index.ANALYZED_NO_NORMS, in this  
>> issue:
>
> I wasn't originally going to add a Field.Index at all for omitNorms,
> but Doug suggested it.
> The problem with this type-safe way of doing things is the
> combinatorial explosion.

Yeah I realize that.  Now that we have omitTF as an option we could  
really go crazy ;)

  I figured since we already have NOT_ANALYZED_NO_NORMS we may as well  
round it out with ANALYZED_NO_NORMS, and then stop there.  Plus,  
people have been surprised that you could do ANALYZED_NO_NORMS, yet it  
is useful.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 18:18:07 2008
Return-Path: <java-user-return-35790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65219 invoked from network); 28 Aug 2008 18:18:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 18:18:07 -0000
Received: (qmail 75022 invoked by uid 500); 28 Aug 2008 18:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74542 invoked by uid 500); 28 Aug 2008 18:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74531 invoked by uid 99); 28 Aug 2008 18:17:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 11:17:58 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 209.85.132.246 is neither permitted nor denied by domain of lucene@mikemccandless.com)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 18:16:59 +0000
Received: by an-out-0708.google.com with SMTP id c37so79796anc.49
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 11:17:29 -0700 (PDT)
Received: by 10.100.132.2 with SMTP id f2mr2040477and.141.1219947449789;
        Thu, 28 Aug 2008 11:17:29 -0700 (PDT)
Received: from ?10.17.4.4? ( [96.237.252.30])
        by mx.google.com with ESMTPS id j63sm4234711rne.9.2008.08.28.11.17.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 11:17:28 -0700 (PDT)
Message-Id: <DE6B006F-5C45-47B3-BB1C-51517BA6F04B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48B6E571.5010507@getopt.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Case Sensitivity
Date: Thu, 28 Aug 2008 14:17:24 -0400
References: <72692.29360.qm@web50308.mail.re2.yahoo.com> <663A313E-D32D-411B-AA7F-B713BB359A3F@mikemccandless.com> <48B6E571.5010507@getopt.org>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Andrzej Bialecki wrote:

> Michael McCandless wrote:
>> In fact I plan to add it as Field.Index.ANALYZED_NO_NORMS, in this  
>> issue:
>>    https://issues.apache.org/jira/browse/LUCENE-1366
>
> This has consequences when searching - so if we expose it the  
> javadoc has to be really good at explaining what's going on :)

Agreed, I'll fix the javadocs and mark these as Expert.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 20:35:14 2008
Return-Path: <java-user-return-35791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66325 invoked from network); 28 Aug 2008 20:35:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 20:35:14 -0000
Received: (qmail 91850 invoked by uid 500); 28 Aug 2008 20:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91826 invoked by uid 500); 28 Aug 2008 20:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91812 invoked by uid 99); 28 Aug 2008 20:34:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 13:34:54 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 20:33:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id B8CB520C31
	for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 13:34:21 -0700 (PDT)
Message-Id: <F2186F60-2E9F-420D-BB91-1A8CB3EC4CE7@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F8611B44@mse19be2.mse19.exchange.ms>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Date: Thu, 28 Aug 2008 16:33:53 -0400
References: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms> <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FE1DD@mse19be2.mse19.exchange.ms> <79A7FD5E-947D-4D48-AEBB-9C676D201248@apache.org> <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F8611B44@mse19be2.mse19.exchange.ms>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you share your query generation code?  Your description doesn't  
make sense to me and I wonder how you are creating and running the  
searches.

Can you run the explain() method on your documents?

Also, FWIW, it sounds like you are prematurely optimizing.   For every  
query you ever do in your entire life (or until search engines are  
capable of reading your mind, and even then, I'm not sure) on any  
search system, you will be able to find at least one result that you  
think is better than one that is ranked higher.  Now, if you told me  
you had 50 queries that all scored badly, that is different.


On Aug 28, 2008, at 1:37 PM, Shi Hui Liu wrote:

> Hi Grant,
>
> Thank you for your help. My query is A AND B. The problem is if I  
> use BooleanQuery, I got score 120 from TermQuery(A) and 0.5 from  
> TermQuery(B) for the first article; for second article, I got score  
> 27 from TermQuery(A) and 36 from TermQuery(B). From my point of  
> view, I think the second article is better than the first one,  
> however, the result is otherwise. I'm thinking to create a Query to  
> multiply the score of A and B instead of sum. But I want to know if  
> there is an existing query doing same thing since I'm still a new  
> user to Lucene.
>
> Thank you in advance,
> Shi Hui
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Thursday, August 28, 2008 5:57 AM
> To: java-user@lucene.apache.org
> Subject: Re: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
>
>
> On Aug 27, 2008, at 7:34 PM, Shi Hui Liu wrote:
>
>> Hi,
>>
>> I think I should clarify my question a little bit. I'm using
>> BooleanQuery to combine TermQuery(A) and TermQuery(B). But I'm not
>> satisfied with its scoring algorigthm. Is there other queries can
>> boost up the documents with 50 of A and 50 of B on top of documents
>> with 1000 of A and 1 of B?
>
> Is your query A + B meant to be A OR B or A AND B?  That is, are both
> terms required?  You notation suggests they are, but the description
> suggests you are getting documents that have only A in them, which
> suggests "OR".
>
> Have you looked at the explains?  What about the scoring aren't you
> happy with?  It's not perfect (there is no such thing) but it works
> pretty well in most cases, and works great if you spend a little time
> figuring out the right length normalization factors.
>
>
>> And I'm looking at the source code and found lots of classes are not
>> public and some important methods are protected. What's the reason?
>> Why make them public and let users to customize the Query easily?
>
> Because there not meant to be overridden, but of course we are open to
> specific suggestions on things that should be made public and often do
> this when someone shows a valid reason.
>
> Cheers,
> Grant
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 22:54:34 2008
Return-Path: <java-user-return-35792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62877 invoked from network); 28 Aug 2008 22:54:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 22:54:34 -0000
Received: (qmail 79493 invoked by uid 500); 28 Aug 2008 22:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79461 invoked by uid 500); 28 Aug 2008 22:54:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79450 invoked by uid 99); 28 Aug 2008 22:54:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 15:54:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 22:53:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KYqKE-0002Zy-NF
	for java-user@lucene.apache.org; Thu, 28 Aug 2008 15:50:46 -0700
Message-ID: <19210665.post@talk.nabble.com>
Date: Thu, 28 Aug 2008 15:50:46 -0700 (PDT)
From: gaz77 <gareth.cole@bit10.net>
To: java-user@lucene.apache.org
Subject: Re: Confused with NGRAM results
In-Reply-To: <19202310.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gareth.cole@bit10.net
References: <19202310.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the pointer.

I've gone into this in some depth, using the AnalyzerUtils class from the
lucene in action book.

It seems that the NGramTokenFilter is only processing part of the string
that goes in. It stops tokenising the words part way through. That's why the
documents weren't found in results.

I've had a look at the source code, and I think it's because the next()
function returns null when it hits a token smaller than the min ngram size.
For example, if I set the minimum to 3, then a 2-character token will cause
it to return null.

I'm not sure if this is by design or a bug. either way, at least I know
what's causing it now.

Cheers



-- 
View this message in context: http://www.nabble.com/Confused-with-NGRAM-results-tp19202310p19210665.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 28 23:15:35 2008
Return-Path: <java-user-return-35793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78949 invoked from network); 28 Aug 2008 23:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2008 23:15:34 -0000
Received: (qmail 11591 invoked by uid 500); 28 Aug 2008 23:15:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11310 invoked by uid 500); 28 Aug 2008 23:15:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11298 invoked by uid 99); 28 Aug 2008 23:15:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 16:15:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goodell@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 23:14:29 +0000
Received: by yx-out-2324.google.com with SMTP id 3so324744yxj.5
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 16:14:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:content-transfer-encoding
         :content-disposition:x-google-sender-auth;
        bh=WpDSvI4yxTmSVpp4JRRDYLR3l5/WeG66nwx7ymbYoAA=;
        b=M4KrjGwfvBpeiXrHy49UmzlC2fjRbL769SwOUz+wt6jdYEIuUjkyiXL2+UF3yJQB8E
         j3Mjz/mCuDfcs9jzv9z8EUyDsymXhc53C4E1xIxwlV4DFUKVttqohwQnOt8DU/fqKf4j
         h2NO5FSD2q6KXOPCjbYQyf0eQ/1KNo3como9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=Zf4zWNg6TlV/ALB1aLW18CuklNd0apdn+aGji/igvzsDzmM+pgGKjbNPmc1jxxX7ET
         GCQIeTyYAM14Qd4T3ojobe8SQW6M3jOwKHXpRZGgQ0aArpYTbG1766L0VIXMQ5/H3fj2
         6eMfWDeWxmKbi/wNKCb0sqTj76w29A7l9zlfA=
Received: by 10.151.45.2 with SMTP id x2mr3077569ybj.34.1219965299083;
        Thu, 28 Aug 2008 16:14:59 -0700 (PDT)
Received: by 10.150.123.14 with HTTP; Thu, 28 Aug 2008 16:14:59 -0700 (PDT)
Message-ID: <55b2c6b90808281614w5689f8f4x1f0f07162077b331@mail.gmail.com>
Date: Thu, 28 Aug 2008 16:14:59 -0700
From: "Andy Goodell" <agoodell@discoverymining.com>
Sender: goodell@gmail.com
To: java-user@lucene.apache.org
Subject: phrases and slop
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: c3153d9a3bc464c6
X-Virus-Checked: Checked by ClamAV on apache.org

I thought I understood phrases and slop until one of my coworkers
brought by the following example

For a document that contains
"quick brown fox"

"quick brown fox"~0
"quick fox brown"~2
"fox quick brown"~3

all match.

I would have expected "fox quick brown" to require a 4 instead of a 3,
two to transpose brown and fox, two to transpose quick and fox.  Why
is this only 3?

- andy g

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 00:17:12 2008
Return-Path: <java-user-return-35794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29664 invoked from network); 29 Aug 2008 00:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 00:17:11 -0000
Received: (qmail 72285 invoked by uid 500); 29 Aug 2008 00:17:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72244 invoked by uid 500); 29 Aug 2008 00:17:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72233 invoked by uid 99); 29 Aug 2008 00:17:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:17:01 -0700
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=DNS_FROM_OPENWHOIS,FS_REPLICA,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 00:16:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KYrPd-0004vV-NS
	for java-user@lucene.apache.org; Thu, 28 Aug 2008 17:00:25 -0700
Message-ID: <19211497.post@talk.nabble.com>
Date: Thu, 28 Aug 2008 17:00:25 -0700 (PDT)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Replicating Lucene Index with out SOLR
In-Reply-To: <348886.93561.qm@web50309.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: vishnudeepak@gmail.com
References: <19193696.post@talk.nabble.com> <348886.93561.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Do i need to stop indexing when i  rsync snapshot to the slave?





Otis Gospodnetic wrote:
>=20
> Yes, I think you pinpointed what I see over and over with Solr.  The two
> desires pull in opposite directions.  I think Jason Rutherglen is very
> keen to start talking about Lucene clusters and index replication in such
> clusters without using the classic master/slave approach.
>=20
> Jason, want to start a thread on java-dev?
>=20
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>=20
>=20
>=20
> ----- Original Message ----
>> From: mark harwood <markharw00d@yahoo.co.uk>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, August 28, 2008 6:21:19 AM
>> Subject: Re: Replicating Lucene Index with out SOLR
>>=20
>> >> You don't need to copy the whole index every time
>> >> if you do incremental  indexing/updates and don't optimize the index
>>=20
>>=20
>> But at 5 minute intervals for replication does this not quickly lead to =
a
>> very=20
>> fragmented index?
>>=20
>> It seems there is a fundamental conflict when building replication
>> systems based=20
>> entirely on the lucene file format:
>> * In the interests of good search performance the index should ideally b=
e
>> a=20
>> small number of large files (which is what mergepolicy/optimize are all
>> about=20
>> maintaining)
>> * However, in the interest of minimising replication network traffic, th=
e
>> ideal=20
>> is a large number of small files.
>>=20
>> I've previously built replication systems which rely on each server
>> pulling=20
>> deltas in the form of insert/update/delete records from a database and
>> using=20
>> IndexWriter locally on each server to apply these sets of changes.
>> Obviously=20
>> this duplicates the analyzing/indexing effort across replicas but does
>> mean the=20
>> content being transferred is not restricted by the design of the Lucene
>> file=20
>> format and therefore uses minimal network traffic and places no
>> restrictions on=20
>> the IndexWriter merge policies I may choose to use to optimise search
>> speed.
>>=20
>> Keen to explore the pros and cons of these different replication schemes=
.
>>=20
>> Cheers,
>> Mark
>>=20
>>=20
>>=20
>> --- On Thu, 28/8/08, rahul_k123 wrote:
>>=20
>> > From: rahul_k123=20
>> > Subject: Re: Replicating Lucene Index with out SOLR
>> > To: java-user@lucene.apache.org
>> > Date: Thursday, 28 August, 2008, 6:47 AM
>> > Can i make use of solr scripts for this purpose.
>> >=20
>> >=20
>> > The snapinstaller runs on the slave after a snapshot has
>> > been pulled from
>> > the master. This signals the local Solr server to open a
>> > new index reader,
>> > then auto-warming of the cache(s) begins (in the new
>> > reader), while other
>> > requests continue to be served by the original index
>> > reader.
>> >=20
>> > How can i achieve the above in my case??
>> >=20
>> >=20
>> > Otis Gospodnetic wrote:
>> > >=20
>> > > You don't need to copy the whole index every time
>> > if you do incremental
>> > > indexing/updates and don't optimize the index
>> > before copying.  If you use
>> > > rsync for copying the index, only the new/modified
>> > files be copied.  This
>> > > is what Solr replication scripts do, too.
>> > >=20
>> > > Otis
>> > > --
>> > > Sematext -- http://sematext.com/ -- Lucene - Solr -
>> > Nutch
>> > >=20
>> > >=20
>> > >=20
>> > > ----- Original Message ----
>> > >> From: rahul_k123=20
>> > >> To: general@lucene.apache.org
>> > >> Sent: Wednesday, August 27, 2008 11:36:07 PM
>> > >> Subject: Re: Replicating Lucene Index with out
>> > SOLR
>> > >>=20
>> > >>=20
>> > >> Currently we index every certain amount of time on
>> > A.
>> > >>=20
>> > >> -copy the index
>> > >>      Copying the whole index everytime ?=20
>> > >>=20
>> > >> Currently i am investigating how i can make use of
>> > SOLR replication
>> > >> scripts
>> > >> to achive this.
>> > >>=20
>> > >>=20
>> > >> Is there anyone who did this with out SOLR before?
>> > >>=20
>> > >>=20
>> > >> Thanks
>> > >>=20
>> > >>=20
>> > >>=20
>> > >> Otis Gospodnetic wrote:
>> > >> >=20
>> > >> > Hi,
>> > >> >=20
>> > >> > You may want to ask on the java-user list
>> > (more subscribers), which I'm
>> > >> > CC-ing, so we can continue discussion there.
>> > >> > I think you will have to implement your own
>> > logic that runs on A and
>> > >> does
>> > >> > something like this:
>> > >> >=20
>> > >> > - stop adding new docs
>> > >> > - call commit on the IndexWriter
>> > >> >=20
>> > >> > - copy the index
>> > >> > - resume indexing
>> > >> >=20
>> > >> > Otis
>> > >> > --
>> > >> > Sematext -- http://sematext.com/ -- Lucene -
>> > Solr - Nutch
>> > >> >=20
>> > >> >=20
>> > >> >=20
>> > >> > ----- Original Message ----
>> > >> >> From: rahul_k123=20
>> > >> >> To: general@lucene.apache.org
>> > >> >> Sent: Thursday, August 28, 2008 1:34:41
>> > AM
>> > >> >> Subject: Replicating Lucene Index with
>> > out SOLR
>> > >> >>=20
>> > >> >>=20
>> > >> >> I have the following requirement
>> > >> >>=20
>> > >> >> Right now we have multiple indexes=20
>> > serving our web application. Our
>> > >> >> indexes
>> > >> >> are around 30 GB size.
>> > >> >>=20
>> > >> >> We want to replicate the index data so
>> > that we can use them to
>> > >> distribute
>> > >> >> the search load.
>> > >> >>=20
>> > >> >> This is what we need ideally.
>> > >> >>=20
>> > >> >> A =E2=80=93 (supports writes and reads)
>> > >> >>=20
>> > >> >> A1 =E2=80=93Replicated Index (Supports reads)=20
>> > . We want to synchronize this
>> > >> >> every 5
>> > >> >> mins.
>> > >> >>=20
>> > >> >>=20
>> > >> >>=20
>> > >> >> Any help is appreciated.   We are not
>> > using SOLR
>> > >> >>=20
>> > >> >> I also interested in knowing what will be
>> > the best way so that I can
>> > >> >> scale
>> > >> >> my application adding more boxes for
>> > search if our load increases.
>> > >> >>=20
>> > >> >> Thanks. =20
>> > >> >>=20
>> > >> >> --=20
>> > >> >> View this message in context:=20
>> > >> >>=20
>> > >>
>> >=20
>> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p=
19191752.html
>> > >> >> Sent from the Lucene - General mailing
>> > list archive at Nabble.com.
>> > >> >=20
>> > >> >=20
>> > >> >=20
>> > >>=20
>> > >> --=20
>> > >> View this message in context:=20
>> > >>
>> >=20
>> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752p=
19193670.html
>> > >> Sent from the Lucene - General mailing list
>> > archive at Nabble.com.
>> > >=20
>> > >=20
>> > >
>> > ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail:
>> > java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail:
>> > java-user-help@lucene.apache.org
>> > >=20
>> > >=20
>> > >=20
>> >=20
>> > --=20
>> > View this message in context:
>> >=20
>> http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19193696p=
19194576.html
>> > Sent from the Lucene - Java Users mailing list archive at
>> > Nabble.com.
>> >=20
>> >=20
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail:
>> > java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail:
>> > java-user-help@lucene.apache.org
>>=20
>>=20
>> Send instant messages to your online friends
>> http://uk.messenger.yahoo.com
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Replicating-Lucene-Inde=
x-with-out-SOLR-tp19193696p19211497.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 00:43:58 2008
Return-Path: <java-user-return-35795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58229 invoked from network); 29 Aug 2008 00:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 00:43:57 -0000
Received: (qmail 95775 invoked by uid 500); 29 Aug 2008 00:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95743 invoked by uid 500); 29 Aug 2008 00:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95730 invoked by uid 99); 29 Aug 2008 00:43:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 17:43:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 00:42:51 +0000
Received: by wr-out-0506.google.com with SMTP id c30so607921wra.21
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 17:43:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=JesgquQ9jZRyHWT6lZTbOW0XpuirQodHz2uFhCYdR1M=;
        b=UZcKkUcKyalHkX0SLrhTmatA/wJw++GjQ9AsH8qelNieyGKKFMNfFIdWzhSiy7gcA5
         pnv3tG9rfUlnZ/xJ9q7dXlJn2/9v77uz3gy6Zp2MVizHOFSV+OAKazwocyI3gMqJBxbS
         6kmHfF2DTujsed4xIgVkL3m6Isnce4VrTHKU8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=pWURsaHPcjgCTa4clIqxi6K9C8lrof4D3hG4spGKzpjm0lW9b807quCN/IcCWBu6T/
         Eh9AoB3IQQyroOInt/VW8/pMfFl+xRVoipkAQOyHuS01zojeKCjaqeK/i6UXMBYxgF0m
         +9rUIaCvwPYPMYysxCjyL35/C1g9ndnlQax+E=
Received: by 10.90.51.13 with SMTP id y13mr2468911agy.46.1219970583864;
        Thu, 28 Aug 2008 17:43:03 -0700 (PDT)
Received: from ?192.168.1.105? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 1sm1629697agb.20.2008.08.28.17.43.03
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Aug 2008 17:43:03 -0700 (PDT)
Message-ID: <48B7461E.8030600@gmail.com>
Date: Thu, 28 Aug 2008 20:43:10 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: phrases and slop
References: <55b2c6b90808281614w5689f8f4x1f0f07162077b331@mail.gmail.com>
In-Reply-To: <55b2c6b90808281614w5689f8f4x1f0f07162077b331@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Andy Goodell wrote:
> I thought I understood phrases and slop until one of my coworkers
> brought by the following example
>
> For a document that contains
> "quick brown fox"
>
> "quick brown fox"~0
> "quick fox brown"~2
> "fox quick brown"~3
>
> all match.
>
> I would have expected "fox quick brown" to require a 4 instead of a 3,
> two to transpose brown and fox, two to transpose quick and fox.  Why
> is this only 3?
>
> - andy g
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
I think its this: push fox on quick for move 1, then fox on brown for 
move 2, then fox into last spot for move 3, quick brown fox.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 01:52:48 2008
Return-Path: <java-user-return-35796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19063 invoked from network); 29 Aug 2008 01:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 01:52:47 -0000
Received: (qmail 43136 invoked by uid 500); 29 Aug 2008 01:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42917 invoked by uid 500); 29 Aug 2008 01:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42906 invoked by uid 99); 29 Aug 2008 01:52:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 18:52:36 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FS_REPLICA,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 01:51:34 +0000
Received: by yx-out-2324.google.com with SMTP id 3so346782yxj.5
        for <java-user@lucene.apache.org>; Thu, 28 Aug 2008 18:52:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=6W6DgmGFP1mKQ3C40EUkYbu8fPO9xdGMPoQr/FZi4x4=;
        b=UEQGSCuLsDaO2oP7lY/2+/0BG/YIMmNrHWTazdEZ08NjGdLR5FI8ooSPlP3aq52XPY
         mFwfNS/RGYDcAhetS0fg6C4eGjyWmH6MScsFLy1DAGCRdlxgU8MW4aV9/mmw/ArrTGGu
         RhGYxuWMRGjVoPw3leQbwhc7CpS12pkTaFxXk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=dpSD/l4IhF/++xC1WchZuayqIRkUQkzUc12AT18C5irkxAQSnNwp33+chf4kNlzIG+
         Cf0wWWdZG8T7xvUvWzr8p8UOHMTiYzRTcjxnj4NpgvF+D0QUQkA4BI+dcDetl0MyG4Lu
         j0jMNDvlG1IzJwZAU8bWTOrdhG8/4mYnirwBs=
Received: by 10.151.46.17 with SMTP id y17mr3229030ybj.120.1219974723759;
        Thu, 28 Aug 2008 18:52:03 -0700 (PDT)
Received: by 10.151.112.11 with HTTP; Thu, 28 Aug 2008 18:52:03 -0700 (PDT)
Message-ID: <85d3c3b60808281852j6d2685dh59a3ae1e77bb8957@mail.gmail.com>
Date: Thu, 28 Aug 2008 21:52:03 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-dev@lucene.apache.org, java-user@lucene.apache.org
Subject: Re: Replicating Lucene Index with out SOLR
In-Reply-To: <348886.93561.qm@web50309.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <348886.93561.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have been emailing Otis regarding some of the replication issues and
it is good to get them into the Lucene forums to obtain feedback and
try to agree on what is most advantageous.  Solr replication uses what
I call segment replication.  Ocean can do segment replication but
usually simply serializes the documents.  The analyzing is redundant
but I believe it is a small cost.  IO is the largest cost.  I believe
these issues are solved, and a software system that allows high
quantities of cheap hardware will make the IO cost lessen.  The hard
part of the many servers problem is getting the replication to
function consistently in the event of failure of the master node in a
cell of nodes.  There is a reason Google chose to develop BigTable
rather than continue building out large clusters of Mysql servers.
One of the main issues probably had to do with the master slave
failover issues with 1000s of servers.  It is probably simply too hard
to try to rely on master slave alone to insure all the transactions
are completed to all nodes.  It is also too difficult to make the
model work over a geographically distributed set of servers though not
impossible.  In any case the goal with Ocean is to build something a
little bit better than what is currently available, but also something
simpler and easier to understand than what is currently available.

For Ocean I have been attempting to develop a system that successfully
implements conflict resolution without a master slave approach.  I
detail this somewhat in
http://wiki.apache.org/lucene-java/OceanRealtimeSearch replication
section.  I had problems implementing master failover using the Paxos
algorithm.  I tried implementing my own failover algorithms however
they just never worked.  Doug Cutting has been interested in how
CouchDB implements event based replication though I quite frankly do
not want to learn the Erlang language to figure it out.  The
motivations of CouchDB seem to be similar in that I do not think they
have a master slave architecture.  In any case many Mysql
installations implement their own conflict resolution and they are
just now looking at implementing it as a standard part of Mysql
http://mysqlmusings.blogspot.com/2007/06/replication-poll-and-our-plans-for=
.html.
 For Ocean I want the replication to work out of the box without
master slave as it seems like the right thing to do.

One requirement is the ability to perform an update in parallel and
then not worry if it made it to all nodes.  Then let the nodes get the
lost update (a rare case) by a polling mechanism that involves
comparing transaction ids.  Even in master slave it is possible to
lose transactions during the master slave failover process.  If the
client only performs a transaction once with a unique id, then if the
transaction fails and the client tries again, there would be a new id
and the resolution would not create duplicates.

It seems that Google has implemented this type of asynchronous
replication judging by this
http://acmqueue.com/modules.php?name=3DContent&pa=3Dshowpage&pid=3D337
article.  It is just plain easier as the number of servers is added.
The problem with master slave with many servers is knowing which
server is the master at any given point.  It would seem easier to
build an architecture where it becomes irrelevant using asynchronous
conflict resolution.  This also allows the servers to be distributed
geographically where the latency is higher, which is what a
multi-master architecture solves using SQL databases.  Multi master in
SQL databases uses asynchronous conflict resolution.

An important point from the ACM article that is relevant to Lucene is
the section called "Do databases let schemas evolve for a set of items
using a bottom-up consensus/tipping point?"  Lucene is the type of
system that solves this problem with SQL databases.  I believe it is a
fundamental advantage over SQL databases.  If the Ocean system can
scale well then it can offer some unique advantages over SQL
databases, while also providing all of the powerful search
functionality offered by Lucene such as phrase queries, span queries,
payloads, custom scoring, functions, etc.

I am not sure how much more to put here right now as I may just be
blathering on.  I welcome feedback and will try to place the most
current thoughts on the wiki
http://wiki.apache.org/lucene-java/OceanRealtimeSearch.  One thing to
note is that currently Ocean generates ids based on a server number.
This way each id generated can be traced back to a server but still
increments.  This is helpful with conflict resolution.  Right now I am
writing code to use this id for the Ocean conflict resolution.

Cheers,
Jason

On Thu, Aug 28, 2008 at 12:57 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
>
> Yes, I think you pinpointed what I see over and over with Solr.  The two =
desires pull in opposite directions.  I think Jason Rutherglen is very keen=
 to start talking about Lucene clusters and index replication in such clust=
ers without using the classic master/slave approach.
>
> Jason, want to start a thread on java-dev?
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
> > From: mark harwood <markharw00d@yahoo.co.uk>
> > To: java-user@lucene.apache.org
> > Sent: Thursday, August 28, 2008 6:21:19 AM
> > Subject: Re: Replicating Lucene Index with out SOLR
> >
> > >> You don't need to copy the whole index every time
> > >> if you do incremental  indexing/updates and don't optimize the index
> >
> >
> > But at 5 minute intervals for replication does this not quickly lead to=
 a very
> > fragmented index?
> >
> > It seems there is a fundamental conflict when building replication syst=
ems based
> > entirely on the lucene file format:
> > * In the interests of good search performance the index should ideally =
be a
> > small number of large files (which is what mergepolicy/optimize are all=
 about
> > maintaining)
> > * However, in the interest of minimising replication network traffic, t=
he ideal
> > is a large number of small files.
> >
> > I've previously built replication systems which rely on each server pul=
ling
> > deltas in the form of insert/update/delete records from a database and =
using
> > IndexWriter locally on each server to apply these sets of changes. Obvi=
ously
> > this duplicates the analyzing/indexing effort across replicas but does =
mean the
> > content being transferred is not restricted by the design of the Lucene=
 file
> > format and therefore uses minimal network traffic and places no restric=
tions on
> > the IndexWriter merge policies I may choose to use to optimise search s=
peed.
> >
> > Keen to explore the pros and cons of these different replication scheme=
s.
> >
> > Cheers,
> > Mark
> >
> >
> >
> > --- On Thu, 28/8/08, rahul_k123 wrote:
> >
> > > From: rahul_k123
> > > Subject: Re: Replicating Lucene Index with out SOLR
> > > To: java-user@lucene.apache.org
> > > Date: Thursday, 28 August, 2008, 6:47 AM
> > > Can i make use of solr scripts for this purpose.
> > >
> > >
> > > The snapinstaller runs on the slave after a snapshot has
> > > been pulled from
> > > the master. This signals the local Solr server to open a
> > > new index reader,
> > > then auto-warming of the cache(s) begins (in the new
> > > reader), while other
> > > requests continue to be served by the original index
> > > reader.
> > >
> > > How can i achieve the above in my case??
> > >
> > >
> > > Otis Gospodnetic wrote:
> > > >
> > > > You don't need to copy the whole index every time
> > > if you do incremental
> > > > indexing/updates and don't optimize the index
> > > before copying.  If you use
> > > > rsync for copying the index, only the new/modified
> > > files be copied.  This
> > > > is what Solr replication scripts do, too.
> > > >
> > > > Otis
> > > > --
> > > > Sematext -- http://sematext.com/ -- Lucene - Solr -
> > > Nutch
> > > >
> > > >
> > > >
> > > > ----- Original Message ----
> > > >> From: rahul_k123
> > > >> To: general@lucene.apache.org
> > > >> Sent: Wednesday, August 27, 2008 11:36:07 PM
> > > >> Subject: Re: Replicating Lucene Index with out
> > > SOLR
> > > >>
> > > >>
> > > >> Currently we index every certain amount of time on
> > > A.
> > > >>
> > > >> -copy the index
> > > >>      Copying the whole index everytime ?
> > > >>
> > > >> Currently i am investigating how i can make use of
> > > SOLR replication
> > > >> scripts
> > > >> to achive this.
> > > >>
> > > >>
> > > >> Is there anyone who did this with out SOLR before?
> > > >>
> > > >>
> > > >> Thanks
> > > >>
> > > >>
> > > >>
> > > >> Otis Gospodnetic wrote:
> > > >> >
> > > >> > Hi,
> > > >> >
> > > >> > You may want to ask on the java-user list
> > > (more subscribers), which I'm
> > > >> > CC-ing, so we can continue discussion there.
> > > >> > I think you will have to implement your own
> > > logic that runs on A and
> > > >> does
> > > >> > something like this:
> > > >> >
> > > >> > - stop adding new docs
> > > >> > - call commit on the IndexWriter
> > > >> >
> > > >> > - copy the index
> > > >> > - resume indexing
> > > >> >
> > > >> > Otis
> > > >> > --
> > > >> > Sematext -- http://sematext.com/ -- Lucene -
> > > Solr - Nutch
> > > >> >
> > > >> >
> > > >> >
> > > >> > ----- Original Message ----
> > > >> >> From: rahul_k123
> > > >> >> To: general@lucene.apache.org
> > > >> >> Sent: Thursday, August 28, 2008 1:34:41
> > > AM
> > > >> >> Subject: Replicating Lucene Index with
> > > out SOLR
> > > >> >>
> > > >> >>
> > > >> >> I have the following requirement
> > > >> >>
> > > >> >> Right now we have multiple indexes
> > > serving our web application. Our
> > > >> >> indexes
> > > >> >> are around 30 GB size.
> > > >> >>
> > > >> >> We want to replicate the index data so
> > > that we can use them to
> > > >> distribute
> > > >> >> the search load.
> > > >> >>
> > > >> >> This is what we need ideally.
> > > >> >>
> > > >> >> A =96 (supports writes and reads)
> > > >> >>
> > > >> >> A1 =96Replicated Index (Supports reads)
> > > . We want to synchronize this
> > > >> >> every 5
> > > >> >> mins.
> > > >> >>
> > > >> >>
> > > >> >>
> > > >> >> Any help is appreciated.   We are not
> > > using SOLR
> > > >> >>
> > > >> >> I also interested in knowing what will be
> > > the best way so that I can
> > > >> >> scale
> > > >> >> my application adding more boxes for
> > > search if our load increases.
> > > >> >>
> > > >> >> Thanks.
> > > >> >>
> > > >> >> --
> > > >> >> View this message in context:
> > > >> >>
> > > >>
> > >
> > http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752=
p19191752.html
> > > >> >> Sent from the Lucene - General mailing
> > > list archive at Nabble.com.
> > > >> >
> > > >> >
> > > >> >
> > > >>
> > > >> --
> > > >> View this message in context:
> > > >>
> > >
> > http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19191752=
p19193670.html
> > > >> Sent from the Lucene - General mailing list
> > > archive at Nabble.com.
> > > >
> > > >
> > > >
> > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > >
> > > --
> > > View this message in context:
> > >
> > http://www.nabble.com/Replicating-Lucene-Index-with-out-SOLR-tp19193696=
p19194576.html
> > > Sent from the Lucene - Java Users mailing list archive at
> > > Nabble.com.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> >
> >
> > Send instant messages to your online friends http://uk.messenger.yahoo.=
com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 03:25:02 2008
Return-Path: <java-user-return-35797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73913 invoked from network); 29 Aug 2008 03:25:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 03:25:02 -0000
Received: (qmail 98440 invoked by uid 500); 29 Aug 2008 03:24:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98409 invoked by uid 500); 29 Aug 2008 03:24:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98398 invoked by uid 99); 29 Aug 2008 03:24:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Aug 2008 20:24:53 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 29 Aug 2008 03:23:54 +0000
Received: (qmail 3483 invoked by uid 60001); 29 Aug 2008 03:23:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=RNPOrwDmQ9/VxfAWBpN2sZ5jRosDcuuuU2sP2HYy28Yesi4c6txsS2aNqfeXK4rkENmqUBFEgMLz2gdzAYBfxfGU1dDY/DXa+P8p1pyouhD7fblK9Msrtys/Y5yCEKViJfJkl9PLn9V79PQcxg3HJSFcDJnH7rIx+sJpHkHuze0=;
X-YMail-OSG: tBfSlc4VM1kMuGytLKtuiFIovy9NpbKKaPad0L56WP7O7cgwaW3TXy91sxIk6.wVWgQZByAUX0Y2Nx461k28WfUAOnCdSpjA3jnHPkV9c111F2UNzlGa3R5rpbVF6cFI0H0gSRevoFCNsW_9YENbDb0-
Received: from [72.227.164.48] by web50306.mail.re2.yahoo.com via HTTP; Thu, 28 Aug 2008 20:23:23 PDT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Thu, 28 Aug 2008 20:23:23 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Confused with NGRAM results
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <194691.2866.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This actually sounds bugish to me, but you removed the text from your original email, so I don't know what context this was in.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: gaz77 <gareth.cole@bit10.net>
> To: java-user@lucene.apache.org
> Sent: Friday, August 29, 2008 12:50:46 AM
> Subject: Re: Confused with NGRAM results
> 
> 
> Thanks for the pointer.
> 
> I've gone into this in some depth, using the AnalyzerUtils class from the
> lucene in action book.
> 
> It seems that the NGramTokenFilter is only processing part of the string
> that goes in. It stops tokenising the words part way through. That's why the
> documents weren't found in results.
> 
> I've had a look at the source code, and I think it's because the next()
> function returns null when it hits a token smaller than the min ngram size.
> For example, if I set the minimum to 3, then a 2-character token will cause
> it to return null.
> 
> I'm not sure if this is by design or a bug. either way, at least I know
> what's causing it now.
> 
> Cheers
> 
> 
> 
> -- 
> View this message in context: 
> http://www.nabble.com/Confused-with-NGRAM-results-tp19202310p19210665.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 09:35:51 2008
Return-Path: <java-user-return-35798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73356 invoked from network); 29 Aug 2008 09:35:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 09:35:51 -0000
Received: (qmail 32670 invoked by uid 500); 29 Aug 2008 09:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32632 invoked by uid 500); 29 Aug 2008 09:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32621 invoked by uid 99); 29 Aug 2008 09:35:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 02:35:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 09:34:43 +0000
Received: by ey-out-2122.google.com with SMTP id 6so263138eyi.53
        for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 02:35:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=1fqRV+1RoLrecCwPnOGsGqPOsE4spX+2RGZkMrpyzIw=;
        b=RvFdlhTfxgraOU1LFXDReU+oYc+m12zuD886pfVVDhXdzwwt2dLVJwhZULBDAHytRt
         W8dGk/Qtu6HXXQBIuEmRMRK/qCXPkeY4obLmd76AyqKZa777VbwHcUvGHsu9EHrfVLa3
         vDefd+u+l2sMxZe8hTKaThiY1EMtGXmcJUqFQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=WVdwusxQ5ooMYcfJssThOxsIiYwLmT9KY2Jzt37EJRMVysEqNoZZTXsuVi8ai0hPvv
         lq23PdBzUO1Eu6rt+P8Ql0DpAWj7yrd0n3hUAk7F4h0pWRjpIFvrLejaL3J/qM/MygMT
         rSDqOFP3WYFSjVg5pCbscZiyQphVgxDuJ+cD4=
Received: by 10.210.120.17 with SMTP id s17mr1333103ebc.85.1220002512637;
        Fri, 29 Aug 2008 02:35:12 -0700 (PDT)
Received: by 10.210.13.7 with HTTP; Fri, 29 Aug 2008 02:35:12 -0700 (PDT)
Message-ID: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
Date: Fri, 29 Aug 2008 15:05:12 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: How can we know if 2 lucene indexes are same?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

hi,
I wish to know if the contents of two indexes have same data.
will all the files be exactly same if I put same set of documents to both?
--Noble

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 09:36:32 2008
Return-Path: <java-user-return-35799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73542 invoked from network); 29 Aug 2008 09:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 09:36:32 -0000
Received: (qmail 34594 invoked by uid 500); 29 Aug 2008 09:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34423 invoked by uid 500); 29 Aug 2008 09:36:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34412 invoked by uid 99); 29 Aug 2008 09:36:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 02:36:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 09:35:24 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7T9ZqNT023257
	for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 04:35:52 -0500
Received: (qmail 953 invoked by uid 0); 29 Aug 2008 04:35:52 -0500
Date: 29 Aug 2008 04:35:52 -0500
Message-ID: <20080829093552.952.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_How_can_we_know_if_2_lucene_indexes_are_same=3F?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.47
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 267701237 - 8dc54ef53443 (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=267701237&m=8dc54ef53443&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=267701237&m=8dc54ef53443&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=267701237&m=8dc54ef53443&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 09:37:11 2008
Return-Path: <java-user-return-35800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73981 invoked from network); 29 Aug 2008 09:37:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 09:37:11 -0000
Received: (qmail 37262 invoked by uid 500); 29 Aug 2008 09:37:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37232 invoked by uid 500); 29 Aug 2008 09:37:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37221 invoked by uid 99); 29 Aug 2008 09:37:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 02:37:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 09:36:03 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7T9aRTb022898
	for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 04:36:27 -0500
Received: (qmail 1950 invoked by uid 0); 29 Aug 2008 04:36:27 -0500
Date: 29 Aug 2008 04:36:27 -0500
Message-ID: <20080829093627.1949.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_How_can_we_know_if_2_lucene_indexes_are_same=3F?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 267701335 - bbf41cb4af0d
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=267701335&m=bbf41cb4af0d&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=267701335&m=bbf41cb4af0d&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=267701335&m=bbf41cb4af0d&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 09:44:34 2008
Return-Path: <java-user-return-35801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77591 invoked from network); 29 Aug 2008 09:44:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 09:44:34 -0000
Received: (qmail 44970 invoked by uid 500); 29 Aug 2008 09:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44923 invoked by uid 500); 29 Aug 2008 09:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44910 invoked by uid 99); 29 Aug 2008 09:44:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 02:44:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 09:43:26 +0000
Received: by ug-out-1314.google.com with SMTP id u2so1667292uge.23
        for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 02:43:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=7ryBeRSUK+wYja720x5vkFuGLS7/AdtQwcCt+SYnlLY=;
        b=rQNPqmEOabweXrrdSt9LkVPfJj96J/miQGV050cJ5X98k2bGNdzBnhHb4M7t984eeD
         bycwJnRMGMfQ5xn8S7/+BSD0Kcg68n0hvOLOADInPfJx3e0jXdJFYeYHPv7+RuKmMdNo
         D92uZAkXMkz8ca3ZJ/9N2nk932UZXv8hczfaU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=IWYLs+r6pfTfpRO7FmoBMXceBl9iovQmWvcELqYS/TlUS3ki3Uc0Re1yzomzJNrjcs
         Rz51u7ptaJEOa8+rxtOZFzaKzDVLNtJG6oevT6zbvwYf2iRJbHrrPGXGyTlNYgJTSZNK
         0TI65EEEXyrj7i2gvOestgFfVTmw44ByEqpsQ=
Received: by 10.67.116.15 with SMTP id t15mr4376316ugm.53.1220003035582;
        Fri, 29 Aug 2008 02:43:55 -0700 (PDT)
Received: from ?192.168.0.190? ( [84.243.3.2])
        by mx.google.com with ESMTPS id 18sm4858722ugk.3.2008.08.29.02.43.51
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 29 Aug 2008 02:43:53 -0700 (PDT)
Message-Id: <C7CBD3C0-F1AD-42B3-91A5-1B3262B44EED@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How can we know if 2 lucene indexes are same?
Date: Fri, 29 Aug 2008 11:43:50 +0200
References: <5e76b0ad0808290235w45f762e3i2a476e8fe132dfb4@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


29 aug 2008 kl. 11.35 skrev Noble Paul =E0=B4=A8=E0=B5=8B=E0=B4=AC=E0=B4=BF=
=E0=B4=B3=E0=B5=8D=E2=80=8D =20
=E0=A4=A8=E0=A5=8B=E0=A4=AC=E0=A5=8D=E0=A4=B3=E0=A5=8D:

> hi,
> I wish to know if the contents of two indexes have same data.
> will all the files be exactly same if I put same set of documents to =20=

> both?

If you insert the documents in the same order with the same settings =20
and both indices are optimized, then the files ought to be =20
identitical. I'm however not sure.

The instantiated index contrib module contains a test that assert two =20=

index readers are identical. You could use this to be really sure, but =20=

it it a rather long running process for a large index:

=
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/instantiated/src=
/test/org/apache/lucene/store/instantiated/TestIndicesEquals.java


Perhaps you should explain why you need to do this.


           karl=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 11:53:45 2008
Return-Path: <java-user-return-35802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44317 invoked from network); 29 Aug 2008 11:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 11:53:45 -0000
Received: (qmail 25761 invoked by uid 500); 29 Aug 2008 11:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25737 invoked by uid 500); 29 Aug 2008 11:53:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25726 invoked by uid 99); 29 Aug 2008 11:53:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 04:53:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sebastienrainville@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 11:52:38 +0000
Received: by py-out-1112.google.com with SMTP id z74so508705pyg.9
        for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 04:53:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=BH3vELOxJC1TUfbXR4pHhfNEOK51CBWPbinsRXZn5fg=;
        b=o1NDlAhM6eJn15v01U4bFhCNxFTAI+6R9y4Xwb9OcMg8/lC5vvabcyFcFdQQ/x64iT
         EKu2mc9p3YpaedsnBuPcB1E8sI/v9fASJdQf1Y/I9Zgs9j/zU5c7v+aLOuqMQmnhBv5x
         dH+LJZs7zH8POjKXihtGQe1W8s4GubPNLau9E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=K/v/DzjLxlE0v0dAfJxDgpaN3xthaq8zdc6a9F6/WCLsBgLh9uJyv9MbmRtqSjUPoz
         CvitI5CTx93+bn4E+VDuRkOZliQvZfWOk1XydiWzKKUydWS4nePopDRtHEVXrPJvjQPT
         8Al3U6IGxR6O8t38IJGpf1TvrgSo6g7lzwkCc=
Received: by 10.142.72.4 with SMTP id u4mr921571wfa.269.1220010787588;
        Fri, 29 Aug 2008 04:53:07 -0700 (PDT)
Received: by 10.142.51.16 with HTTP; Fri, 29 Aug 2008 04:53:07 -0700 (PDT)
Message-ID: <8e8e0b4f0808290453k4d8ba59bl6ccd3c4f1a5db9c0@mail.gmail.com>
Date: Fri, 29 Aug 2008 07:53:07 -0400
From: "=?ISO-8859-1?Q?S=E9bastien_Rainville?=" <sebastienrainville@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
In-Reply-To: <79A7FD5E-947D-4D48-AEBB-9C676D201248@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4879_17052907.1220010787561"
References: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms>
	 <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FE1DD@mse19be2.mse19.exchange.ms>
	 <79A7FD5E-947D-4D48-AEBB-9C676D201248@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4879_17052907.1220010787561
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm curious... what do you mean by "It's not perfect (there is no such
thing) but it works pretty well in most cases, and works great if you spend
a little time figuring out the right length normalization factors." ? Can
you plz elaborate a little more on what are the length normalization factors
exactly and what makes them good or bad... it's a part of lucene that is
really confusing me as I'm still a newbie :P

Thanks,
Sebastien




On Thu, Aug 28, 2008 at 8:56 AM, Grant Ingersoll <gsingers@apache.org>wrote:

>
> On Aug 27, 2008, at 7:34 PM, Shi Hui Liu wrote:
>
>  Hi,
>>
>> I think I should clarify my question a little bit. I'm using BooleanQuery
>> to combine TermQuery(A) and TermQuery(B). But I'm not satisfied with its
>> scoring algorigthm. Is there other queries can boost up the documents with
>> 50 of A and 50 of B on top of documents with 1000 of A and 1 of B?
>>
>
> Is your query A + B meant to be A OR B or A AND B?  That is, are both terms
> required?  You notation suggests they are, but the description suggests you
> are getting documents that have only A in them, which suggests "OR".
>
> Have you looked at the explains?  What about the scoring aren't you happy
> with?  It's not perfect (there is no such thing) but it works pretty well in
> most cases, and works great if you spend a little time figuring out the
> right length normalization factors.
>
>
>  And I'm looking at the source code and found lots of classes are not
>> public and some important methods are protected. What's the reason? Why make
>> them public and let users to customize the Query easily?
>>
>
> Because there not meant to be overridden, but of course we are open to
> specific suggestions on things that should be made public and often do this
> when someone shows a valid reason.
>
> Cheers,
> Grant
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4879_17052907.1220010787561--

From java-user-return-35803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 13:22:23 2008
Return-Path: <java-user-return-35803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97277 invoked from network); 29 Aug 2008 13:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 13:22:23 -0000
Received: (qmail 77564 invoked by uid 500); 29 Aug 2008 13:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77536 invoked by uid 500); 29 Aug 2008 13:22:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77499 invoked by uid 99); 29 Aug 2008 13:22:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 06:22:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 13:21:15 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1112190rvb.5
        for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 06:21:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=U2/AHf7LttUuEXJgh5MXx3+rB7+AaC8ZtwtbYGzRZBA=;
        b=WtLD3XJxDT+8Fx/8IebbVNgH3vXmG5qvtEIs07MCUj/fDfTD+UrLQsRA5hRrHHX8Qe
         LaY602Op4jJWxNG+ELLf8FL4xSqZmLOyH8od/l++ygnih28leb4YUCQIt6oow6QVFT3/
         M1kgMwM7iXFA0mDRiD27GtiEYa3InqM5bqsoU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Zsogi3fCZtNYB49Nn1Up7OIRvV8K0RtHRcOlIte3jiDVTzEqx/3DzXrN34VYG7tJXq
         Y6gE6w8kacmBoZ96aERUNLsbDYt7DtQN4Ta9rTpBxJ+gJZldCEwNNTEMy5OfAolkbaQ9
         WcB9Tp6Q0+48UgQSTR873wfDy7jF6IFooG/Ek=
Received: by 10.140.126.14 with SMTP id y14mr1495382rvc.160.1220016095782;
        Fri, 29 Aug 2008 06:21:35 -0700 (PDT)
Received: by 10.141.176.5 with HTTP; Fri, 29 Aug 2008 06:21:35 -0700 (PDT)
Message-ID: <1bcb7c7f0808290621x2ff39934v6ea5fd9ab9ec2695@mail.gmail.com>
Date: Fri, 29 Aug 2008 16:21:35 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: getting a random doc from index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21316_7886714.1220016095766"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21316_7886714.1220016095766
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,

how could I possibly get a select a random document out of a document
collection inside a lucene index?

best regards,
-C.B.

------=_Part_21316_7886714.1220016095766--

From java-user-return-35804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 13:32:03 2008
Return-Path: <java-user-return-35804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3162 invoked from network); 29 Aug 2008 13:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 13:32:03 -0000
Received: (qmail 95741 invoked by uid 500); 29 Aug 2008 13:31:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95709 invoked by uid 500); 29 Aug 2008 13:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95698 invoked by uid 99); 29 Aug 2008 13:31:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 06:31:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 13:30:55 +0000
Received: by mu-out-0910.google.com with SMTP id i10so693375mue.5
        for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 06:31:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=bZoe8vEyigvkLSE6GKNAzEkxiqutdEJQC7YRfJem1zI=;
        b=ZYK+xK+48u/aTqghIPlXVnerQfgEwsK9/FFIqc54X6mRxDSTkXGgEoxhD6TBMVXQlU
         XHUTGTfLDN9ChvCtbVDVsX6jYfQfscF/O1oLV8zFTbIgCjaHx3U4/PpZqO3apoFaY8RP
         qh6Knsb3iNkUL4UKHyMiYAQZy5G+YJdUcbLWI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=ZiNLYelKmnHP3UDcpzcUskuDibBJDaPRxAZrhT7akYDqmZuLlW6L6wLl1lbhLIyM4L
         3lN3JTfXJ2gKPTvJF+yInK3SgOXBdMJjl69X7gaUtIOt3v7Ehe6VYWz/iJJv/MCz5boB
         KQqNppFVaOR7hhLw5IGe1Cvt4FUJCxD7JEnjE=
Received: by 10.103.179.17 with SMTP id g17mr1885141mup.119.1220016684890;
        Fri, 29 Aug 2008 06:31:24 -0700 (PDT)
Received: from ?192.168.0.190? ( [84.243.3.2])
        by mx.google.com with ESMTPS id u9sm11448760muf.9.2008.08.29.06.31.22
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 29 Aug 2008 06:31:22 -0700 (PDT)
Message-Id: <2DBDBFE9-60E5-47BA-B8F8-39C4CDF8AB33@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0808290621x2ff39934v6ea5fd9ab9ec2695@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: getting a random doc from index
Date: Fri, 29 Aug 2008 15:31:05 +0200
References: <1bcb7c7f0808290621x2ff39934v6ea5fd9ab9ec2695@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


29 aug 2008 kl. 15.21 skrev Cam Bazz:

> hello,
>
> how could I possibly get a select a random document out of a document
> collection inside a lucene index?


Something like

public Document randomDoc() {
   int docNo = (int)(new java.util.Random().nextDouble() *  
indexReader.maxDoc());
   return indexReader.isDeleted(docNo) ? randomDoc() :  
indexReader.doc(docNo);
}

?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 14:23:16 2008
Return-Path: <java-user-return-35805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32857 invoked from network); 29 Aug 2008 14:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 14:23:16 -0000
Received: (qmail 90869 invoked by uid 500); 29 Aug 2008 14:23:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90840 invoked by uid 500); 29 Aug 2008 14:23:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90817 invoked by uid 99); 29 Aug 2008 14:23:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 07:23:13 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 14:22:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KZ4s8-0002jH-Oz
	for java-user@lucene.apache.org; Fri, 29 Aug 2008 07:22:44 -0700
Message-ID: <19220927.post@talk.nabble.com>
Date: Fri, 29 Aug 2008 07:22:44 -0700 (PDT)
From: Gunjan Juyal <higunjan@yahoo.com>
To: java-user@lucene.apache.org
Subject: reusing Document with multiple fields in lucene 2.3
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: higunjan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello all!
 I have a document structure such that each document can have multiple and
variable number of fields of a given name. For example:
- Document-1 has two fields with the name "fld1" and three fields with the
name "fld2";
- Document-2 has five fields with the name "fld1" and one field with the
name "fld2".

 If a document has a fixed number of fields then it's easy to reuse the
field instances by setting them to different values before writing the doc,
but I can't think of any way in which I can reuse the document or field
instances in this case (where the number of fields varies from document to
document). One possibility is to maintain a pool of fields, create a new
instance for each document and add the already-existing fields to the new
doc after setting them to an appropriate value. But this would require
significant additions to the code.

 Has anyone else faced such a situation? I'd be glad if someone could give
any pointers for this situation! Thanks in anticipation!

- Gunjan
-- 
View this message in context: http://www.nabble.com/reusing-Document-with-multiple-fields-in-lucene-2.3-tp19220927p19220927.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 14:41:05 2008
Return-Path: <java-user-return-35806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42824 invoked from network); 29 Aug 2008 14:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 14:41:04 -0000
Received: (qmail 26886 invoked by uid 500); 29 Aug 2008 14:40:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26856 invoked by uid 500); 29 Aug 2008 14:40:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26845 invoked by uid 99); 29 Aug 2008 14:40:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 07:40:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 14:39:56 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 44BF5FE1B6
	for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 07:40:54 -0700 (PDT)
Message-Id: <6897B238-B443-4280-AA20-C36B525C0D38@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8e8e0b4f0808290453k4d8ba59bl6ccd3c4f1a5db9c0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Date: Fri, 29 Aug 2008 10:40:21 -0400
References: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms> <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FE1DD@mse19be2.mse19.exchange.ms> <79A7FD5E-947D-4D48-AEBB-9C676D201248@apache.org> <8e8e0b4f0808290453k4d8ba59bl6ccd3c4f1a5db9c0@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 29, 2008, at 7:53 AM, S=E9bastien Rainville wrote:

> I'm curious... what do you mean by "It's not perfect (there is no such
> thing) but it works pretty well in most cases, and works great if =20
> you spend
> a little time figuring out the right length normalization =20
> factors." ? Can
> you plz elaborate a little more on what are the length normalization =20=

> factors
> exactly and what makes them good or bad... it's a part of lucene =20
> that is
> really confusing me as I'm still a newbie :P
>


If you're a newbie, its probably best not to go there just yet, but, =20
since you asked...

Lucene and many search systems adjust scores based on how long =20
documents are, the theory being that a shorter document w/ the =20
relevant terms is more (as?) interesting than (as?) a longer document =20=

with the term repeated a ton of times.  It essentially acts as a =20
counterweight to long documents with high term frequency values.  But, =20=

like pretty much everything in relevance tuning, as Erik says, "it =20
depends".  It depends on things like your queries, your docs, etc.  =20
You (and by you, I mean your users) may actually prefer longer =20
documents, or you may find that Lucene favors short documents too =20
much.  Thus, one may want to override the lengthNorm() in the =20
Similarity class.  The key, of course, is to tread into this after you =20=

have a working system and after you have established that you are, =20
indeed, not happy with a _large_ number of results, at which point you =20=

need to do a methodical study of what the queries are, what the =20
"right" results are, and then explore alternatives (even doing things =20=

like A/B testing), of which, length normalization modification may be =20=

one of them.

At a lower level, some people feel that a lengthNorm() of 1/=20
sqrt(numTerms) is not the right default, but I don't know that anyone =20=

has definitively said what a better default is.  It works pretty well =20=

for most people out of the box, which is why I made the comment about =20=

it probably not being best to go there just yet.  My gut says it is a =20=

value that Doug came up with way back when he was doing a lot of =20
empirical testing and felt it was best and it really hasn't been =20
modified since, but that is just a guess on my part, I haven't looked =20=

at the revision history of it.

You may find Doron's wiki entry informative: =
http://wiki.apache.org/lucene-java/TREC_2007_Million_Queries_Track_-_IBM_H=
aifa_Team

You also might find my talk at ApacheCon 07 helpful in general: =
http://people.apache.org/~gsingers/apachecon07/LucenePerformance.ppt=20
, starting at slide 23 or so where I talk about relevance.

Otherwise, dig into the archives at lucene.markmail.org and look up =20
length normalization or relevance tuning, Similarity, etc.

HTH,
Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 17:49:30 2008
Return-Path: <java-user-return-35807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81832 invoked from network); 29 Aug 2008 17:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 17:49:29 -0000
Received: (qmail 13252 invoked by uid 500); 29 Aug 2008 17:49:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13215 invoked by uid 500); 29 Aug 2008 17:49:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13204 invoked by uid 99); 29 Aug 2008 17:49:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 10:49:20 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.71.238.250] (HELO outbound.mse19.exchange.ms) (64.71.238.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 17:48:15 +0000
Received: from mse19be2.mse19.exchange.ms ([172.28.1.9]) by
 mse19fe1.mse19.exchange.ms ([172.29.12.67]) with mapi; Fri, 29 Aug 2008
 13:48:42 -0400
From: Shi Hui Liu <shihui@nextbio.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 29 Aug 2008 13:48:38 -0400
Subject: RE: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Thread-Topic: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
Thread-Index: AckJTY+BBrFNOQJsT1OeDhrDTIbS2QALzq1A
Message-ID: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F861206E@mse19be2.mse19.exchange.ms>
References: <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FDF5E@mse19be2.mse19.exchange.ms>
 <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F82FE1DD@mse19be2.mse19.exchange.ms>
 <79A7FD5E-947D-4D48-AEBB-9C676D201248@apache.org>
 <4BCE10CFEBFE2E4F8FD2B77E2E8E504205F8611B44@mse19be2.mse19.exchange.ms>
 <F2186F60-2E9F-420D-BB91-1A8CB3EC4CE7@apache.org>
In-Reply-To: <F2186F60-2E9F-420D-BB91-1A8CB3EC4CE7@apache.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry to mislead you. The query output like: +((TITLE:A | BODY:A) (TITLE:B =
| BODY:B)).
Let me explain it. Say S(A) means score of query A; TF(A) means term freq o=
f A in the current document.
Currently I'm using BooleanQuery to combine them to a query, if TF(A)=3D100=
0 and TF(B)=3D1 in document D1, TF(A)=3D50 and TF(B)=3D50 in document D2, t=
hen usually D1 has higher score than D2. But I want D2 show on top of D1 si=
nce D2 is more significant from our customer's point of view. So my questio=
n is if there is an existing query can handle this case or I should create =
a new query class. My idea is compute final score with S(A) * S(B) instead =
of S(A) + S(B) like BooleanQuery. If I have to create my own query, could y=
ou give my some advices?

Thank you so much,
Shi Hui


-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]
Sent: Thursday, August 28, 2008 1:34 PM
To: java-user@lucene.apache.org
Subject: Re: Clarity: Is there a Query boosting 50-50 over 1000-1 ?

Can you share your query generation code?  Your description doesn't
make sense to me and I wonder how you are creating and running the
searches.

Can you run the explain() method on your documents?

Also, FWIW, it sounds like you are prematurely optimizing.   For every
query you ever do in your entire life (or until search engines are
capable of reading your mind, and even then, I'm not sure) on any
search system, you will be able to find at least one result that you
think is better than one that is ranked higher.  Now, if you told me
you had 50 queries that all scored badly, that is different.


On Aug 28, 2008, at 1:37 PM, Shi Hui Liu wrote:

> Hi Grant,
>
> Thank you for your help. My query is A AND B. The problem is if I
> use BooleanQuery, I got score 120 from TermQuery(A) and 0.5 from
> TermQuery(B) for the first article; for second article, I got score
> 27 from TermQuery(A) and 36 from TermQuery(B). From my point of
> view, I think the second article is better than the first one,
> however, the result is otherwise. I'm thinking to create a Query to
> multiply the score of A and B instead of sum. But I want to know if
> there is an existing query doing same thing since I'm still a new
> user to Lucene.
>
> Thank you in advance,
> Shi Hui
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Thursday, August 28, 2008 5:57 AM
> To: java-user@lucene.apache.org
> Subject: Re: Clarity: Is there a Query boosting 50-50 over 1000-1 ?
>
>
> On Aug 27, 2008, at 7:34 PM, Shi Hui Liu wrote:
>
>> Hi,
>>
>> I think I should clarify my question a little bit. I'm using
>> BooleanQuery to combine TermQuery(A) and TermQuery(B). But I'm not
>> satisfied with its scoring algorigthm. Is there other queries can
>> boost up the documents with 50 of A and 50 of B on top of documents
>> with 1000 of A and 1 of B?
>
> Is your query A + B meant to be A OR B or A AND B?  That is, are both
> terms required?  You notation suggests they are, but the description
> suggests you are getting documents that have only A in them, which
> suggests "OR".
>
> Have you looked at the explains?  What about the scoring aren't you
> happy with?  It's not perfect (there is no such thing) but it works
> pretty well in most cases, and works great if you spend a little time
> figuring out the right length normalization factors.
>
>
>> And I'm looking at the source code and found lots of classes are not
>> public and some important methods are protected. What's the reason?
>> Why make them public and let users to customize the Query easily?
>
> Because there not meant to be overridden, but of course we are open to
> specific suggestions on things that should be made public and often do
> this when someone shows a valid reason.
>
> Cheers,
> Grant
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 29 22:16:09 2008
Return-Path: <java-user-return-35808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56075 invoked from network); 29 Aug 2008 22:16:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2008 22:16:08 -0000
Received: (qmail 32998 invoked by uid 500); 29 Aug 2008 22:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32971 invoked by uid 500); 29 Aug 2008 22:15:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32960 invoked by uid 99); 29 Aug 2008 22:15:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 15:15:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ypavlidis@me.dium.com designates 199.117.103.143 as permitted sender)
Received: from [199.117.103.143] (HELO mail2.getmedium.com) (199.117.103.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 22:14:58 +0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C90A24.BE36DABC"
Subject: RE: boost freshness instead of sorting
Date: Fri, 29 Aug 2008 16:13:44 -0600
Message-ID: <74DFE4F68173F94787693F06E792A8F37725FB@exch1.ad.getmedium.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: boost freshness instead of sorting
thread-index: AckJNVo5NPsjDw6TRwWLGV8e5OKtGgA7yY6u
References: <9294E20AED46934EA459020706463F94C5A386@SUEXCL-02.ad.syr.edu> <48B6E326.4020602@getopt.org>
From: "Yannis Pavlidis" <ypavlidis@me.dium.com>
To: <java-user@lucene.apache.org>,<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C90A24.BE36DABC
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Steven, Andrzej,

Thanks for your suggestions. Turning off the norms did it and it has =
been working as I have initially expected.=20

Regards,

Yannis.

-----Original Message-----
From: Andrzej Bialecki [mailto:ab@getopt.org]
Sent: Thu 8/28/2008 11:40 AM
To: java-user@lucene.apache.org
Subject: Re: boost freshness instead of sorting
=20
Steven A Rowe wrote:
> Hi Yannis,
>=20
> Hmm, hadn't thought about norms - you could just turn them off,
> right?:
>=20
> =
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/document/Field=
.html#Field(java.lang.String,%20java.lang.String,%20org.apache.lucene.doc=
ument.Field.Store,%20org.apache.lucene.document.Field.Index)>
>=20
>=20
> with
>=20
> =
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/document/Field=
.Index.html#NO_NORMS>
>=20
>=20
> (Be careful of using NO_NORMS, though, since in addition to disabling
> norms, it also disables analysis, so you'd have to add a same-named
> Field for each "1".)

We are discussing the same thing in "Case sensitivity" thread - it's=20
possible to have a tokenized field and omit its norms.


--=20
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



------_=_NextPart_001_01C90A24.BE36DABC--

From java-user-return-35809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 01:36:37 2008
Return-Path: <java-user-return-35809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15755 invoked from network); 30 Aug 2008 01:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 01:36:36 -0000
Received: (qmail 47670 invoked by uid 500); 30 Aug 2008 01:36:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47632 invoked by uid 500); 30 Aug 2008 01:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47621 invoked by uid 99); 30 Aug 2008 01:36:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 18:36:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.12.216.205] (HELO theronge.com) (69.12.216.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 01:35:29 +0000
Received: from [192.168.1.100] (c-98-212-230-11.hsd1.il.comcast.net [98.212.230.11])
	(Authenticated sender: mronge)
	by theronge.com (Postfix) with ESMTP id 288D1643C8
	for <java-user@lucene.apache.org>; Fri, 29 Aug 2008 18:34:05 -0700 (PDT)
Message-Id: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com>
From: Matt Ronge <mronge@theronge.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Pre-filtering for expensive query
Date: Fri, 29 Aug 2008 20:34:01 -0500
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am working on implementing a new Query, Weight and Scorer that is  
expensive to run. I'd like to limit the number of documents I run this  
query on by first building a candidate set of documents with a boolean  
query. Once I have that candidate set, I was hoping I could build a  
filter off of it, and issue that along with my expensive query.  
However, after reading the code I see that filtering is done during  
the search, and not before hand. So my initial boolean query won't  
help in limiting the number of documents scored by my expensive query.

  Has anyone done any work into restricting the set of docs that a  
query operates on?
Or should I just implement something myself in a custom scorer?

Thanks in advance,
--
Matt Ronge

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 06:06:13 2008
Return-Path: <java-user-return-35810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77867 invoked from network); 30 Aug 2008 06:06:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 06:06:13 -0000
Received: (qmail 55552 invoked by uid 500); 30 Aug 2008 06:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55520 invoked by uid 500); 30 Aug 2008 06:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55509 invoked by uid 99); 30 Aug 2008 06:06:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 23:06:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 06:05:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KZJaZ-0001aB-R4
	for java-user@lucene.apache.org; Fri, 29 Aug 2008 23:05:35 -0700
Message-ID: <19230752.post@talk.nabble.com>
Date: Fri, 29 Aug 2008 23:05:35 -0700 (PDT)
From: davood <dave.fet@gmail.com>
To: java-user@lucene.apache.org
Subject: MoreLikeThis return no results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dave.fet@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm trying to get MoreLikeThis working but it just returns no results. I
have lucene working for normal queries and indexing but MoreLikeThis Just
returns nothing. This is what I'm trying


IndexReader reader = IndexReader.open(INDEX_PATH);
IndexSearcher searcher = new IndexSearcher(INDEX_PATH);
MoreLikeThis likeThis = new MoreLikeThis(reader);
likeThis.setFieldNames(new String[] { "tag" ,"tit"});
Query likesQuery = likeThis.like(170); // document number I already
retrieved by hits.id(0) 
Hits likesHits = searcher.search(likesQuery);		
It find nothing similar

Btw I've noticed similarity contributed package inside of lucene contains
nothing (a jar file with a license text file and another text file), I've
tried donloading it from subversion but there was no java class there, So I
had to get it from another web site. Why it's removed from subversion?
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/similarity/src/java/org/apache/lucene/search/similar/

Best.
-- 
View this message in context: http://www.nabble.com/MoreLikeThis-return-no-results-tp19230752p19230752.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 06:07:08 2008
Return-Path: <java-user-return-35811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78006 invoked from network); 30 Aug 2008 06:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 06:07:08 -0000
Received: (qmail 57639 invoked by uid 500); 30 Aug 2008 06:07:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57223 invoked by uid 500); 30 Aug 2008 06:06:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57212 invoked by uid 99); 30 Aug 2008 06:06:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 23:06:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 06:06:01 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7U66JE1010977
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 01:06:19 -0500
Received: (qmail 21465 invoked by uid 0); 30 Aug 2008 01:06:19 -0500
Date: 30 Aug 2008 01:06:19 -0500
Message-ID: <20080830060619.21464.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: MoreLikeThis return no results
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 268002924 - b5ea69c31475 (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=268002924&m=b5ea69c31475&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=268002924&m=b5ea69c31475&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=268002924&m=b5ea69c31475&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 06:07:43 2008
Return-Path: <java-user-return-35812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78310 invoked from network); 30 Aug 2008 06:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 06:07:42 -0000
Received: (qmail 59120 invoked by uid 500); 30 Aug 2008 06:07:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59089 invoked by uid 500); 30 Aug 2008 06:07:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59078 invoked by uid 99); 30 Aug 2008 06:07:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2008 23:07:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 06:06:35 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id m7U675wd006742
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 01:07:05 -0500
Received: (qmail 22149 invoked by uid 0); 30 Aug 2008 01:07:05 -0500
Date: 30 Aug 2008 01:07:05 -0500
Message-ID: <20080830060705.22148.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: MoreLikeThis return no results
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.49
X-Bayes-Prob: 0.9999 (Score 4, tokens from: @@RPTN, outgoing)
X-Spam-Score: 4.00 (****) [Hold at 6.00] Bayes(0.9999,4.0)
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 268003019 - 548f8a4cda1a
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=268003019&m=548f8a4cda1a&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=268003019&m=548f8a4cda1a&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=268003019&m=548f8a4cda1a&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

Tom Roberts is out of the office till 2nd September 2008.

LUX reopens on 1st September 2008



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 07:43:52 2008
Return-Path: <java-user-return-35813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22185 invoked from network); 30 Aug 2008 07:43:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 07:43:52 -0000
Received: (qmail 85651 invoked by uid 500); 30 Aug 2008 07:43:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85619 invoked by uid 500); 30 Aug 2008 07:43:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85608 invoked by uid 99); 30 Aug 2008 07:43:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 00:43:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andre.rubin@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 07:42:46 +0000
Received: by yx-out-2324.google.com with SMTP id 3so594472yxj.5
        for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 00:42:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=dMDpgdZhAbtKziEVM9mVVyy04IsHEObeYZ5EEuc4qpE=;
        b=g32T+rP06GaBCMgGG0VumbWCncNkRR5AwrMlqGJpLL+ZkIv9ZjH7+hbC7Uj4PQbsjq
         MqoodtTv1Quzr9zzAUd+LcUif8pIRiOcj4VXYPJILnxac9xPHmoOCPnqyvyntQHTCi29
         1z0SvCu/Hq61Nz8btc3eoqFcwaoSIJx/wDoqk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=GwZhYG6dlSyacrGrRDV2F1sq8hLblmwq5+gNNmiMQyrwe1+nwvrZKOW+vSweOU4JZj
         i1FfGWdjtXWBuT0ciZULkMI6DugUeUJILjj2wvVY0qpxSjfETv7YPQP/2GedVVhw9at5
         vdrMXiFKZC8HB8aGwLpDP7CqAQi7gYPsyxZrA=
Received: by 10.151.114.6 with SMTP id r6mr2736424ybm.81.1220082179253;
        Sat, 30 Aug 2008 00:42:59 -0700 (PDT)
Received: by 10.151.47.9 with HTTP; Sat, 30 Aug 2008 00:42:59 -0700 (PDT)
Message-ID: <efd1bd310808300042w5ffd4914nccd843ffd776cc80@mail.gmail.com>
Date: Sat, 30 Aug 2008 00:42:59 -0700
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Merging 2 indexes
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11994_22010900.1220082179251"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11994_22010900.1220082179251
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey all

I have 2 indexes. Both have an ID field and one or more String fields... I
want to merge these indexes by merging the documents on each index that
match their IDs.

For exmaple:

Index 1:
Doc1:
id: 1234 (*)
text:bla bla
text:abcd


Index2:
DocA:
id:1234 (*)
text:xyz

(*) ID's match

So I wanna merge these documents in a new (or add it to an existing) index,
like this:


New Index:
Doc1:
id: 1234
text:bla bla
text:abcd
text:xyz

Is there a way to do that in an efficient way, like not having to manually
traverse each?

Thanks,


Andre

------=_Part_11994_22010900.1220082179251--

From java-user-return-35814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 09:44:29 2008
Return-Path: <java-user-return-35814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64105 invoked from network); 30 Aug 2008 09:44:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 09:44:29 -0000
Received: (qmail 16604 invoked by uid 500); 30 Aug 2008 09:44:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16564 invoked by uid 500); 30 Aug 2008 09:44:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16553 invoked by uid 99); 30 Aug 2008 09:44:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 02:44:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 09:43:21 +0000
Received: by ey-out-2122.google.com with SMTP id 6so431708eyi.53
        for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 02:43:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=5nTuDpyLnGr4ExjQizirBSToVGGm/XERNaMMVo7NwiQ=;
        b=OFcKQPAST4OcauF7UFHvb0GWf+kGV4rum/00bnMS/yzCqaNkon6oKAz4c8U/H0tBHG
         AypcuNDWjX7xvJKfuPHxLIWpks6y+6OT6DSrr1PdAQ7bggTsTwOZ1h8pdmmUkgWxo3Zn
         TvZnz2jBaOHaMYr6C49AgAQ8uePLYG63t4NYc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=I1Ew/3JGtGGh05pqZ5DcIatXTmBwvMPUH1OLL28dkfIGd258toaWX+XigcpUwFlVe4
         ZHJkJ/K1oJ+GPO7slwaAiTV2SzToa6i1cs0Iqoj7yzSiBal6dzjowDAWSN8JuiBuJ9l7
         /+z6rbWVCYsh4oNwiZEfWaF1JG4hJfTjMXTbY=
Received: by 10.210.65.2 with SMTP id n2mr2959698eba.131.1220089411116;
        Sat, 30 Aug 2008 02:43:31 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id k9sm19031788nfh.23.2008.08.30.02.43.28
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 30 Aug 2008 02:43:29 -0700 (PDT)
Message-Id: <4D3C512C-16EF-411F-9894-CA1E3195917F@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Pre-filtering for expensive query
Date: Sat, 30 Aug 2008 11:43:26 +0200
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you tell us a bit more about what you custom query does? Perhaps  
you can build the "candidate filter" and reuse it over and over again?


        karl

30 aug 2008 kl. 03.34 skrev Matt Ronge:

> Hi all,
>
> I am working on implementing a new Query, Weight and Scorer that is  
> expensive to run. I'd like to limit the number of documents I run  
> this query on by first building a candidate set of documents with a  
> boolean query. Once I have that candidate set, I was hoping I could  
> build a filter off of it, and issue that along with my expensive  
> query. However, after reading the code I see that filtering is done  
> during the search, and not before hand. So my initial boolean query  
> won't help in limiting the number of documents scored by my  
> expensive query.
>
> Has anyone done any work into restricting the set of docs that a  
> query operates on?
> Or should I just implement something myself in a custom scorer?
>
> Thanks in advance,
> --
> Matt Ronge
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 09:51:11 2008
Return-Path: <java-user-return-35815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67354 invoked from network); 30 Aug 2008 09:51:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 09:51:11 -0000
Received: (qmail 20163 invoked by uid 500); 30 Aug 2008 09:51:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20125 invoked by uid 500); 30 Aug 2008 09:51:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20114 invoked by uid 99); 30 Aug 2008 09:51:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 02:51:03 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 30 Aug 2008 09:50:03 +0000
Received: (qmail 5828 invoked by uid 60001); 30 Aug 2008 09:50:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=QkwI/KPETZOevGL9DiOyKXgz9+Nuttyt6/p8B5l2nTt59qczH2Inn492jHgDPBt1uz3ZpSNhUYbl3GSehkuOTO3fpA53tOlF5/A5h/hAPlWTysgFkB8MsFA2niRnAckaM/F/QsBDCzhefiSRejpmh+GAF4jZ+ibCizDt+wc07QU=;
X-YMail-OSG: eMARRgoVM1lYXMbQIsn35uveBthWe_QCmGLHfJS8X4XcSc2j8XMiktx6eU1FZkOJRd.bt5QmIUhY9HN7sGbXEhhFUslu8yt81avugW9llm4qiE.e_Ip5RQy2sdl5UmfPRU2t.5brkmNo.zfrPSU1Y2H_
Received: from [194.106.34.5] by web26005.mail.ukl.yahoo.com via HTTP; Sat, 30 Aug 2008 09:50:29 GMT
X-Mailer: YahooMailRC/1096.28 YahooMailWebService/0.7.218.2
Date: Sat, 30 Aug 2008 09:50:29 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: MoreLikeThis return no results
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <834486.5819.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

MoreLikeThis needs to find the terms in your doc. It tries to do this by us=
ing TermFreqVectors which are stored in the index if you choose to add them=
 at  index-time. If you haven't done this then it will fall back to reanaly=
sing the content of the document usings an analyser (despite what the javad=
ocs for the setAnalyzer method  say about not needing to set an analyzer wh=
en MoreLiking an existing document).=0A=0ASo your options are probably to r=
e-index with term vectors turned on or set an appropriate choice of analyze=
r.=0A=0ACheers,=0AMark=0A(only 3 days to go until Tom Roberts is back in th=
e office! )=0A=0A=0A=0A----- Original Message ----=0AFrom: davood <dave.fet=
@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Saturday, 30 August, =
2008 7:05:35=0ASubject: MoreLikeThis return no results=0A=0A=0AHi,=0A=0AI'm=
 trying to get MoreLikeThis working but it just returns no results. I=0Ahav=
e lucene working for normal queries and indexing but MoreLikeThis Just=0Are=
turns nothing. This is what I'm trying=0A=0A=0AIndexReader reader =3D Index=
Reader.open(INDEX_PATH);=0AIndexSearcher searcher =3D new IndexSearcher(IND=
EX_PATH);=0AMoreLikeThis likeThis =3D new MoreLikeThis(reader);=0AlikeThis.=
setFieldNames(new String[] { "tag" ,"tit"});=0AQuery likesQuery =3D likeThi=
s.like(170); // document number I already=0Aretrieved by hits.id(0) =0AHits=
 likesHits =3D searcher.search(likesQuery);        =0AIt find nothing simil=
ar=0A=0ABtw I've noticed similarity contributed package inside of lucene co=
ntains=0Anothing (a jar file with a license text file and another text file=
), I've=0Atried donloading it from subversion but there was no java class t=
here, So I=0Ahad to get it from another web site. Why it's removed from sub=
version?=0Ahttp://svn.apache.org/repos/asf/lucene/java/trunk/contrib/simila=
rity/src/java/org/apache/lucene/search/similar/=0A=0ABest.=0A-- =0AView thi=
s message in context: http://www.nabble.com/MoreLikeThis-return-no-results-=
tp19230752p19230752.html=0ASent from the Lucene - Java Users mailing list a=
rchive at Nabble.com.=0A=0A=0A---------------------------------------------=
------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.ap=
ache.org=0A=0ASend instant messages to your online friends http://uk.messen=
ger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 09:57:42 2008
Return-Path: <java-user-return-35816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70375 invoked from network); 30 Aug 2008 09:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 09:57:42 -0000
Received: (qmail 23336 invoked by uid 500); 30 Aug 2008 09:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23299 invoked by uid 500); 30 Aug 2008 09:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23288 invoked by uid 99); 30 Aug 2008 09:57:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 02:57:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 09:56:35 +0000
Received: by ug-out-1314.google.com with SMTP id u2so1832140uge.23
        for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 02:57:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=WBYspl0E/OjkePorpSwgi3KRpXaBcb+vTf4gNI2Ryho=;
        b=GQ9bkmI30yuCXOZ1alnQ7t/WJcUMMx/ZjD99lROsHytublaZ5l7vxl/vyGIB1i7tDR
         4ldt7UQUN/mSdRsjJE7Sub3FZfTjWKZ1GU/K9qDkHVAJ30zSKItor/bWuSvNmZYgZ5d6
         RkjN2CJ9sL+yTkHPhf8/R4ka8VQIU8EfDy6os=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=Sl/mISCZh0idtDEYeCn5mCo0QChTpD4D9CEbmQAei19vTnbegTplH4e+X0gsT29Opx
         P1l0FTlm1EnV6n4aaZ/TudOG/eA5/ygv3YfwJmoY7EqkTerS2R/uOICr1XAPnQ5XbQBH
         8fTB6JkB+XaYL3H3+plYiiU79QU9j4TUTWkRA=
Received: by 10.67.106.13 with SMTP id i13mr515585ugm.37.1220090224902;
        Sat, 30 Aug 2008 02:57:04 -0700 (PDT)
Received: from kodapan.lan ( [83.249.107.81])
        by mx.google.com with ESMTPS id g12sm2895985nfb.28.2008.08.30.02.57.01
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 30 Aug 2008 02:57:02 -0700 (PDT)
Message-Id: <C864F1E2-47ED-4760-8075-58365A6C22BA@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <efd1bd310808300042w5ffd4914nccd843ffd776cc80@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Merging 2 indexes
Date: Sat, 30 Aug 2008 11:57:00 +0200
References: <efd1bd310808300042w5ffd4914nccd843ffd776cc80@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

30 aug 2008 kl. 09.42 skrev Andre Rubin:

> I have 2 indexes. Both have an ID field and one or more String  
> fields... I
> want to merge these indexes by merging the documents on each index  
> that
> match their IDs.

> Is there a way to do that in an efficient way, like not having to  
> manually
> traverse each?

No. I recommend you go to the data sources and build your merged index  
from scratch. Otherwise you would have to extract the data from the  
inverted index or get them via the term vectors (if you made them  
available at index time). TermVectorAccessor in trunk/contrib/ 
miscellaneous can help you with that. Last option is if you stored all  
the source data in your documents and you know what analyzer you used  
to tokenize it with.


       karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 11:13:58 2008
Return-Path: <java-user-return-35817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97895 invoked from network); 30 Aug 2008 11:13:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 11:13:58 -0000
Received: (qmail 55207 invoked by uid 500); 30 Aug 2008 11:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55180 invoked by uid 500); 30 Aug 2008 11:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55169 invoked by uid 99); 30 Aug 2008 11:13:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 04:13:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 11:12:50 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id m7UBDJJH055976
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 13:13:19 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Pre-filtering for expensive query
Date: Sat, 30 Aug 2008 13:13:20 +0200
User-Agent: KMail/1.9.9
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com>
In-Reply-To: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808301313.20821.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Saturday 30 August 2008 03:34:01 schreef Matt Ronge:
> Hi all,
>
> I am working on implementing a new Query, Weight and Scorer that is
> expensive to run. I'd like to limit the number of documents I run
> this query on by first building a candidate set of documents with a
> boolean query. Once I have that candidate set, I was hoping I could
> build a filter off of it, and issue that along with my expensive
> query. However, after reading the code I see that filtering is done
> during the search, and not before hand.

Correct. I suppose you mean the filtering code in IndexSearcher?

> So my initial boolean query 
> won't help in limiting the number of documents scored by my expensive
> query.

The trick of filtering is the use of skipTo() on both the filter and
the scorer to skip superfluous work as much as possible.
So when you make your scorer implement skipTo() efficiently,
filtering it should reduce the amount of scoring done.

Implementing skipTo() efficiently is normally done by using
TermScorer.skipTo() on the leafs of a scorer structure. So,
in case you implement your own TermScorer, take a serious
look at TermScorer.skipTo().

Normally, score value computations are not the bottleneck,
but accessing the index is, and this is where skipTo() does
the real work. At the moment avoiding score value computations
is a nice extra.

>
>   Has anyone done any work into restricting the set of docs that a
> query operates on?

Yes, Filters.

> Or should I just implement something myself in a custom scorer?

In case you have a better way than skipTo(), or something
to improve on this issue to allow a Filter as clause to BooleanQuery:
https://issues.apache.org/jira/browse/LUCENE-1345
let us know.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 16:20:19 2008
Return-Path: <java-user-return-35818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68728 invoked from network); 30 Aug 2008 16:20:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 16:20:19 -0000
Received: (qmail 7707 invoked by uid 500); 30 Aug 2008 16:20:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7276 invoked by uid 500); 30 Aug 2008 16:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7265 invoked by uid 99); 30 Aug 2008 16:20:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 09:20:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.12.216.205] (HELO theronge.com) (69.12.216.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 16:19:11 +0000
Received: from [192.168.1.100] (c-98-212-230-11.hsd1.il.comcast.net [98.212.230.11])
	(Authenticated sender: mronge)
	by theronge.com (Postfix) with ESMTP id 7ACC363CCB
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 09:19:11 -0700 (PDT)
Message-Id: <8EC08D17-5CC9-4CEC-8368-9A8A2AE6EAC8@theronge.com>
From: Matt Ronge <mronge@theronge.com>
To: java-user@lucene.apache.org
In-Reply-To: <4D3C512C-16EF-411F-9894-CA1E3195917F@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Pre-filtering for expensive query
Date: Sat, 30 Aug 2008 11:19:09 -0500
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <4D3C512C-16EF-411F-9894-CA1E3195917F@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 30, 2008, at 4:43 AM, Karl Wettin wrote:

> Can you tell us a bit more about what you custom query does? Perhaps  
> you can build the "candidate filter" and reuse it over and over again?

I cannot reuse it. The candidate filter would be constructed by first  
running a boolean query with a number of SHOULD clauses. So then I  
know what docs atleast contain the terms I'm looking for. Once I have  
this set, I will look at the ordering of the matches (it's a bit more  
sophisticated than just a phrase query) and find the final matches.  
Since my boolean clauses are different for each query I can't reuse  
the filter.


--
Matt

>
>> Hi all,
>>
>> I am working on implementing a new Query, Weight and Scorer that is  
>> expensive to run. I'd like to limit the number of documents I run  
>> this query on by first building a candidate set of documents with a  
>> boolean query. Once I have that candidate set, I was hoping I could  
>> build a filter off of it, and issue that along with my expensive  
>> query. However, after reading the code I see that filtering is done  
>> during the search, and not before hand. So my initial boolean query  
>> won't help in limiting the number of documents scored by my  
>> expensive query.
>>
>> Has anyone done any work into restricting the set of docs that a  
>> query operates on?
>> Or should I just implement something myself in a custom scorer?
>>
>> Thanks in advance,
>> --
>> Matt Ronge

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 16:23:29 2008
Return-Path: <java-user-return-35819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70535 invoked from network); 30 Aug 2008 16:23:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 16:23:28 -0000
Received: (qmail 10423 invoked by uid 500); 30 Aug 2008 16:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10390 invoked by uid 500); 30 Aug 2008 16:23:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10379 invoked by uid 99); 30 Aug 2008 16:23:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 09:23:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.12.216.205] (HELO theronge.com) (69.12.216.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 16:22:22 +0000
Received: from [192.168.1.100] (c-98-212-230-11.hsd1.il.comcast.net [98.212.230.11])
	(Authenticated sender: mronge)
	by theronge.com (Postfix) with ESMTP id 173206434A
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 09:22:51 -0700 (PDT)
Message-Id: <2C396FF4-74E1-4E62-8408-36C4C9DA8DAA@theronge.com>
From: Matt Ronge <mronge@theronge.com>
To: java-user@lucene.apache.org
In-Reply-To: <200808301313.20821.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Pre-filtering for expensive query
Date: Sat, 30 Aug 2008 11:22:50 -0500
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <200808301313.20821.paul.elschot@xs4all.nl>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 30, 2008, at 6:13 AM, Paul Elschot wrote:

> Op Saturday 30 August 2008 03:34:01 schreef Matt Ronge:
>> Hi all,
>>
>> I am working on implementing a new Query, Weight and Scorer that is
>> expensive to run. I'd like to limit the number of documents I run
>> this query on by first building a candidate set of documents with a
>> boolean query. Once I have that candidate set, I was hoping I could
>> build a filter off of it, and issue that along with my expensive
>> query. However, after reading the code I see that filtering is done
>> during the search, and not before hand.
>
> Correct. I suppose you mean the filtering code in IndexSearcher?

Yes, that's exactly what I mean.

>
>> So my initial boolean query
>> won't help in limiting the number of documents scored by my expensive
>> query.
>
> The trick of filtering is the use of skipTo() on both the filter and
> the scorer to skip superfluous work as much as possible.
> So when you make your scorer implement skipTo() efficiently,
> filtering it should reduce the amount of scoring done.
>
> Implementing skipTo() efficiently is normally done by using
> TermScorer.skipTo() on the leafs of a scorer structure. So,
> in case you implement your own TermScorer, take a serious
> look at TermScorer.skipTo().
>
> Normally, score value computations are not the bottleneck,
> but accessing the index is, and this is where skipTo() does
> the real work. At the moment avoiding score value computations
> is a nice extra.

I was not aware of this. Where can I find the code that uses the  
filter to determine what values to feed to skipTo (I'm trying to get a  
better understand of the Lucene source)?

>
>
>> Or should I just implement something myself in a custom scorer?
>
> In case you have a better way than skipTo(), or something
> to improve on this issue to allow a Filter as clause to BooleanQuery:
> https://issues.apache.org/jira/browse/LUCENE-1345
> let us know.


Thanks, if the skipTo approach doesn't work, I'll take a look at this.

--
Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 19:02:43 2008
Return-Path: <java-user-return-35820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41763 invoked from network); 30 Aug 2008 19:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 19:02:43 -0000
Received: (qmail 93193 invoked by uid 500); 30 Aug 2008 19:02:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93160 invoked by uid 500); 30 Aug 2008 19:02:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93149 invoked by uid 99); 30 Aug 2008 19:02:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 12:02:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond.balmes@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 19:01:37 +0000
Received: by fg-out-1718.google.com with SMTP id l27so884414fgb.27
        for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 12:02:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=7N5Di8JsiMPq6XOiy8QJokVkymHo0Hf66L++sxPEWrE=;
        b=Av8WgsdYei1IE0YFIk4ap8JUefAfxnbW28eZxeNUbFjZd/zj4qqanAv7IRrAwCXVRW
         cAAoo0w6/kxPSzphfCXGaeSLrdAbD/1jWq4bqu9+48fAaxr+3OE+t05ficlwBXsOvt+R
         B1XeZoTw5bA2dTL7FG0EkVGvl9/ifUib+PxA4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=ItIgfEfg5ztjN3zN/7g2BFkeQzA4adNCQNIVFF07l1RECUJRH+AtHbyR+7rL+8UBkC
         rg+IJ5+w5OucBSRSlJ0/hBeX/CrAduDLrkgSa9wAlkVXbcABTpICiBRnEG9Efb2zz7xI
         z+/msQBRiJd0lZBqXcWkAcbqpPnCaZ8bhIx18=
Received: by 10.103.134.20 with SMTP id l20mr2945129mun.132.1220122926185;
        Sat, 30 Aug 2008 12:02:06 -0700 (PDT)
Received: by 10.103.214.9 with HTTP; Sat, 30 Aug 2008 12:02:06 -0700 (PDT)
Message-ID: <4014d98b0808301202k46a05677l3bb5fd6e8c9b124@mail.gmail.com>
Date: Sat, 30 Aug 2008 21:02:06 +0200
From: "=?ISO-8859-1?Q?Raymond_Balm=E8s?=" <raymond.balmes@gmail.com>
To: java-user@lucene.apache.org
Subject: Beginner: Specific indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33670_1863962.1220122926151"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33670_1863962.1220122926151
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys,

Fairly new to Lucene, and just finished reading Lucene in Action.

My problem is the following I need to index the documents that only contains
the following pattern(s) in a mass of documents:

<tag> <#1> <#2>

<tag> is a fixed list of words
<#x> are small numbers <100

My idea is to simply build a TokenFilter that will look for those... do I
have it right ?

Some side questions:
what if I want to index <tag> <#1> <#2> as keywords ?
what if I also want to give full text search on the select documents ?

Thx for your help

------=_Part_33670_1863962.1220122926151--

From java-user-return-35821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 19:16:20 2008
Return-Path: <java-user-return-35821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44842 invoked from network); 30 Aug 2008 19:16:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 19:16:20 -0000
Received: (qmail 4777 invoked by uid 500); 30 Aug 2008 19:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4113 invoked by uid 500); 30 Aug 2008 19:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4102 invoked by uid 99); 30 Aug 2008 19:16:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 12:16:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 19:15:12 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m7UJErK32639
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 14:14:53 -0500
Message-ID: <48B99C0C.3070909@getopt.org>
Date: Sat, 30 Aug 2008 21:14:20 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Pre-filtering for expensive query
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com>
In-Reply-To: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Matt Ronge wrote:
> Hi all,
> 
> I am working on implementing a new Query, Weight and Scorer that is 
> expensive to run. I'd like to limit the number of documents I run this 
> query on by first building a candidate set of documents with a boolean 
> query. Once I have that candidate set, I was hoping I could build a 
> filter off of it, and issue that along with my expensive query. However, 
> after reading the code I see that filtering is done during the search, 
> and not before hand. So my initial boolean query won't help in limiting 
> the number of documents scored by my expensive query.
> 
>  Has anyone done any work into restricting the set of docs that a query 
> operates on?
> Or should I just implement something myself in a custom scorer?

I think you can use a FilteredQuery in a BooleanClause. This may be 
faster than the filtering code in the Searcher, because the evaluation 
is done during scoring and not afterwards. FilteredQuery internally 
makes use of skipTo(), which should help to limit the number of 
evaluated docs.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 19:55:47 2008
Return-Path: <java-user-return-35822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71256 invoked from network); 30 Aug 2008 19:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 19:55:47 -0000
Received: (qmail 30629 invoked by uid 500); 30 Aug 2008 19:55:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30598 invoked by uid 500); 30 Aug 2008 19:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30587 invoked by uid 99); 30 Aug 2008 19:55:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 12:55:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raymond.balmes@gmail.com designates 72.14.204.233 as permitted sender)
Received: from [72.14.204.233] (HELO qb-out-0506.google.com) (72.14.204.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 19:54:40 +0000
Received: by qb-out-0506.google.com with SMTP id e6so2078778qbe.27
        for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 12:55:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=gq78C3QDkmsPUrXiEDAoUh8AthHjEQIPlhF2PTo29SM=;
        b=ppXy22bPm5XjlIPIBQUsghl7bQlL2quM1OrSntcoEMEaeD/WSKZpHvcdFcrzjl7r+X
         X9P7fPa2FPieZ1pJYWXAso0sCaIELu7RZMzksM5f9aj2TgQwg1HQItOQF34QHlr05hUS
         U5TiATYP/U3gq4gSuptn3w8bQklWT71gNhNdk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=EdsHBze5Zkgq/qu25RAK/uyveCQBgBN1k1KflToKnkIkQPpH9AAGWfojfX5fvdS1YH
         xU1K4QHcEXuJPozc7nJI0AU9E+QDgLqQ7TSetixR3cfnKNT1RGpkVBdYxPitADzRr9Ks
         e66cQswdNC+QG1dCFAFgasJ2SqqTWZcCzr97c=
Received: by 10.103.17.10 with SMTP id u10mr2982963mui.97.1220126110029;
        Sat, 30 Aug 2008 12:55:10 -0700 (PDT)
Received: by 10.103.214.9 with HTTP; Sat, 30 Aug 2008 12:55:09 -0700 (PDT)
Message-ID: <4014d98b0808301255n52ff8c41sa7079eff0940f0cf@mail.gmail.com>
Date: Sat, 30 Aug 2008 21:55:09 +0200
From: "=?ISO-8859-1?Q?Raymond_Balm=E8s?=" <raymond.balmes@gmail.com>
To: java-user@lucene.apache.org
Subject: Beginner: Specific indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34147_21361781.1220126110023"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34147_21361781.1220126110023
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys,

Fairly new to Lucene, and just finished reading Lucene in Action.

My problem is the following I need to index the documents that only contains
the following pattern(s) in a mass of documents:

<tag> <#1> <#2>

<tag> is a fixed list of words
<#x> are small numbers <100

My idea is to simply build a TokenFilter that will look for those... do I
have it right ?

Some side questions:
what if I want to index <tag> <#1> <#2> as keywords ?
what if I also want to give full text search on the select documents ?

Thx for your help

------=_Part_34147_21361781.1220126110023--

From java-user-return-35823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 20:02:16 2008
Return-Path: <java-user-return-35823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75688 invoked from network); 30 Aug 2008 20:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 20:02:16 -0000
Received: (qmail 34276 invoked by uid 500); 30 Aug 2008 20:02:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34240 invoked by uid 500); 30 Aug 2008 20:02:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34229 invoked by uid 99); 30 Aug 2008 20:02:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 13:02:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 20:01:09 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id m7UK18Ka022706
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 22:01:08 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Pre-filtering for expensive query
Date: Sat, 30 Aug 2008 22:01:16 +0200
User-Agent: KMail/1.9.9
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <4D3C512C-16EF-411F-9894-CA1E3195917F@gmail.com> <8EC08D17-5CC9-4CEC-8368-9A8A2AE6EAC8@theronge.com>
In-Reply-To: <8EC08D17-5CC9-4CEC-8368-9A8A2AE6EAC8@theronge.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808302201.16379.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Saturday 30 August 2008 18:19:09 schreef Matt Ronge:
> On Aug 30, 2008, at 4:43 AM, Karl Wettin wrote:
> > Can you tell us a bit more about what you custom query does?
> > Perhaps you can build the "candidate filter" and reuse it over and
> > over again?
>
> I cannot reuse it. The candidate filter would be constructed by first
> running a boolean query with a number of SHOULD clauses. So then I
> know what docs atleast contain the terms I'm looking for. Once I have
> this set, I will look at the ordering of the matches (it's a bit more
> sophisticated than just a phrase query) and find the final matches.

Sounds like you may want to take a look at SpanNearQuery.

> Since my boolean clauses are different for each query I can't reuse
> the filter.

With (a variation of) SpanNearQuery you may end up not needing
any filtering at all, because it already uses skipTo() where possible.

In case you are looking for documents that contain partial phrases
from an input query that has more than 2 words, have a look at Nutch.

Regards,
Paul Elschot


>
>
> --
> Matt
>
> >> Hi all,
> >>
> >> I am working on implementing a new Query, Weight and Scorer that
> >> is expensive to run. I'd like to limit the number of documents I
> >> run this query on by first building a candidate set of documents
> >> with a boolean query. Once I have that candidate set, I was hoping
> >> I could build a filter off of it, and issue that along with my
> >> expensive query. However, after reading the code I see that
> >> filtering is done during the search, and not before hand. So my
> >> initial boolean query won't help in limiting the number of
> >> documents scored by my expensive query.
> >>
> >> Has anyone done any work into restricting the set of docs that a
> >> query operates on?
> >> Or should I just implement something myself in a custom scorer?
> >>
> >> Thanks in advance,
> >> --
> >> Matt Ronge
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 30 20:07:25 2008
Return-Path: <java-user-return-35824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77566 invoked from network); 30 Aug 2008 20:07:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2008 20:07:25 -0000
Received: (qmail 37211 invoked by uid 500); 30 Aug 2008 20:07:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37175 invoked by uid 500); 30 Aug 2008 20:07:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37164 invoked by uid 99); 30 Aug 2008 20:07:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 13:07:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 20:06:18 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id m7UK6IA9017773
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 22:06:18 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Pre-filtering for expensive query
Date: Sat, 30 Aug 2008 22:06:26 +0200
User-Agent: KMail/1.9.9
References: <4EC81374-F485-4A2D-A178-8838235AE6C1@theronge.com> <200808301313.20821.paul.elschot@xs4all.nl> <2C396FF4-74E1-4E62-8408-36C4C9DA8DAA@theronge.com>
In-Reply-To: <2C396FF4-74E1-4E62-8408-36C4C9DA8DAA@theronge.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200808302206.26539.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Saturday 30 August 2008 18:22:50 schreef Matt Ronge:
> On Aug 30, 2008, at 6:13 AM, Paul Elschot wrote:
> > Op Saturday 30 August 2008 03:34:01 schreef Matt Ronge:
> >> Hi all,
> >>
> >> I am working on implementing a new Query, Weight and Scorer that
> >> is expensive to run. I'd like to limit the number of documents I
> >> run this query on by first building a candidate set of documents
> >> with a boolean query. Once I have that candidate set, I was hoping
> >> I could build a filter off of it, and issue that along with my
> >> expensive query. However, after reading the code I see that
> >> filtering is done during the search, and not before hand.
> >
> > Correct. I suppose you mean the filtering code in IndexSearcher?
>
> Yes, that's exactly what I mean.
>
> >> So my initial boolean query
> >> won't help in limiting the number of documents scored by my
> >> expensive query.
> >
> > The trick of filtering is the use of skipTo() on both the filter
> > and the scorer to skip superfluous work as much as possible.
> > So when you make your scorer implement skipTo() efficiently,
> > filtering it should reduce the amount of scoring done.
> >
> > Implementing skipTo() efficiently is normally done by using
> > TermScorer.skipTo() on the leafs of a scorer structure. So,
> > in case you implement your own TermScorer, take a serious
> > look at TermScorer.skipTo().
> >
> > Normally, score value computations are not the bottleneck,
> > but accessing the index is, and this is where skipTo() does
> > the real work. At the moment avoiding score value computations
> > is a nice extra.
>
> I was not aware of this. Where can I find the code that uses the
> filter to determine what values to feed to skipTo (I'm trying to get
> a better understand of the Lucene source)?

It's the same code in IndexSearcher.
ConjunctionScorer.skipTo() does the much the same thing for
any number of scorers.

>
> >> Or should I just implement something myself in a custom scorer?
> >
> > In case you have a better way than skipTo(), or something
> > to improve on this issue to allow a Filter as clause to
> > BooleanQuery: https://issues.apache.org/jira/browse/LUCENE-1345
> > let us know.
>
> Thanks, if the skipTo approach doesn't work, I'll take a look at
> this.

For the moment, Andrzej's suggestion to use FilteredQuery as a clause 
could well be good enough.
Btw. FilteredQuery also contains a filtering scorer under the hood,
you could take a look there, too.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 31 04:04:00 2008
Return-Path: <java-user-return-35825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70119 invoked from network); 31 Aug 2008 04:03:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2008 04:03:58 -0000
Received: (qmail 55695 invoked by uid 500); 31 Aug 2008 04:03:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55659 invoked by uid 500); 31 Aug 2008 04:03:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55648 invoked by uid 99); 31 Aug 2008 04:03:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Aug 2008 21:03:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Aug 2008 04:02:52 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3CD1771C44B; Sat, 30 Aug 2008 21:02:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 390E771C41C
	for <java-user@lucene.apache.org>; Sat, 30 Aug 2008 21:02:52 -0700 (PDT)
Date: Sat, 30 Aug 2008 21:02:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Trouble Boosting BooleanQuery's with Multiple Clauses
In-Reply-To: <19099258.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0808302053220.25408@radix.cryptio.net>
References: <19099258.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: When I create a TermQuery, add it as a SHOULD clause to a BooleanQuery, and
: boost that BooleanQuery, the boost shows up when I run
: IndexSearcher.explain(). However, when I add a second TermQuery as a SHOULD
: clause to that same BooleanQuery, and still boost the BooleanQuery, the
: boost is nowhere to be found in the output of IndexSearcher.explain(). Note

Does the numeric value for the explanation match the (raw) score you get 
from actaully searching for that doc?

We have some pretty exhaustive tests to verify that the "match" and 
"value" info for all of the Explanation objects of basic query types 
(including BooleanQuery) are correct -- but i don't think there are any 
tests that inspect the structure of the Explanation to ensure that it 
breaks the information down in any particular way.  The Boost info might 
be encapsulated into something else and not entirely obvious (It's been a 
while since i looked at BooleanWeight internals, the boost might be pushed 
down to the other clauses)

It would also help if you could send a short code sample showing exactly 
what you are trying and what output you are getting so there's no 
confusion about what it is you are testing.

the optimal situation would be if you could send a JUnit test 
demonstrating your problem.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


