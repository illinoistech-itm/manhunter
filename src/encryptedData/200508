From java-user-return-15665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 11:59:01 2005
Return-Path: <java-user-return-15665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58654 invoked from network); 1 Aug 2005 11:59:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 11:59:01 -0000
Received: (qmail 61255 invoked by uid 500); 1 Aug 2005 11:58:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60362 invoked by uid 500); 1 Aug 2005 11:58:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60349 invoked by uid 99); 1 Aug 2005 11:58:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 04:58:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.45.152.8] (HELO alagad.com) (69.45.152.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 04:58:45 -0700
Received: from doug ([67.22.212.241]) by alagad.com with MailEnable ESMTP; Mon, 01 Aug 2005 08:02:58 -0400
From: "Doug Hughes" <dhughes@alagad.com>
To: <java-user@lucene.apache.org>
Subject: RE: Keyword Searches don't seem to be working.
Date: Mon, 1 Aug 2005 07:58:50 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <Pine.LNX.4.58.0507312327050.7184@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
Thread-Index: AcWWYrsbHCQp06f2Tqy0DLmpWPouIAALXfdg
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20050801115846.37F1D10FB2A6@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Oh!!! So *that's* what the documentation is for! ;)

Thanks for pointing that out.  Sometimes you get so frustrated with a
problem you fail to notice the obvious solution.

Doug

-----Original Message-----
From: hossman@hal.rescomp.berkeley.edu
[mailto:hossman@hal.rescomp.berkeley.edu] On Behalf Of Chris Hostetter
Sent: Monday, August 01, 2005 2:28 AM
To: java-user@lucene.apache.org
Subject: Re: Keyword Searches don't seem to be working.

: However, when I search either the path or url fields on this index for
those
: values I'm not getting any results.  Here's an example:

: Query q = new TermQuery(new
: Term("http://cfdocs.office.alagad.com/htmldocs/00000001.htm", "url"));

simple mistake - the constructor for a Term takes the field name first,
then the value.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 13:15:17 2005
Return-Path: <java-user-return-15666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89488 invoked from network); 1 Aug 2005 13:15:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 13:15:16 -0000
Received: (qmail 66183 invoked by uid 500); 1 Aug 2005 13:15:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66163 invoked by uid 500); 1 Aug 2005 13:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66150 invoked by uid 99); 1 Aug 2005 13:15:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 06:15:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.74.127.3] (HELO svr.ftp1.com) (64.74.127.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 06:14:59 -0700
Received: from graphite by svr.ftp1.com with local (Exim 4.44)
	id 1Dza8G-0005oL-LB
	for java-user@lucene.apache.org; Mon, 01 Aug 2005 08:15:04 -0500
Received: from 192.223.163.5 ([192.223.163.5])
        (SquirrelMail authenticated user tony@simpleobjects.com);
        by www.simpleobjects.com with HTTP;
        Mon, 1 Aug 2005 09:15:04 -0400 (EDT)
Message-ID: <47952.192.223.163.5.1122902104.squirrel@192.223.163.5>
In-Reply-To: <42ED9504.8040101@cosmicrealms.com>
References: <42ED9504.8040101@cosmicrealms.com>
Date: Mon, 1 Aug 2005 09:15:04 -0400 (EDT)
Subject: Re: Any problems with a failed IndexWriter optimize call?
From: "Tony Schwartz" <tony@simpleobjects.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3a
X-Mailer: SquirrelMail/1.4.3a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - svr.ftp1.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32036 808] / [47 12]
X-AntiAbuse: Sender Address Domain - simpleobjects.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Your index should be fine.  You could use "luke" if you want to remove any dangling
files not in use.  Just run optimize again to fix it all up...  You might want to
allocate more memory that 175 though.  Depending on your document sizes and how
efficiently and fast you want lucene to work to index the data, you will want to give
lucene plenty of memory to work with.

Tony Schwartz
tony@simpleobjects.com





> Hello! I am using Lucene 1.4.3
>
> I'm building a Lucene index, that will have about 25 million documents
> when it is done.
> I'm adding 250,000 at a time.
>
> Currently there is about 1.2Million in there, and I ran into a problem.
> After I had added a batch of 250,000 I go a 'java.lang.outOfMemory'
> threw by writer.optimize(); (a standard IndexWriter)
>
> The exception caused my program to quit out, and it didn't call
> 'writer.close();'
>
> First, with it dying in the middle of an .optimize() is there any chance
> my index is corrupted?
>
> Second, I know I can remove the /tmp/lucene*.lock file to remove the
> lock in order to add more, but is it safe to do that?
>
> I've since figured out that I can pass -Xmx to the 'java' program in
> order to increase the maximum amount of RAM.
> It was using the default of 64M, I plan on increasing that to 175M to
> start with.
> That should solve the memory problems (I can allocate more if necessary
> down the line).
>
> Lastly, when I go back, open it again, and add another 250,000 and then
> call optimize again, will a failed previous optimize hurt the index at all?
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 13:38:04 2005
Return-Path: <java-user-return-15667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4696 invoked from network); 1 Aug 2005 13:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 13:38:04 -0000
Received: (qmail 17540 invoked by uid 500); 1 Aug 2005 13:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17509 invoked by uid 500); 1 Aug 2005 13:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17496 invoked by uid 99); 1 Aug 2005 13:37:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 06:37:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 06:37:44 -0700
Received: by wproxy.gmail.com with SMTP id 67so1023319wri
        for <java-user@lucene.apache.org>; Mon, 01 Aug 2005 06:37:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=dAiKlyytBKfyTZxH8c1gMkoVdhw1UT/GzWZxPBefjoxqhWI9+8WsCr7cJIT2H4uNu8LOxWJW3ZOMynXqR/6RsfTLwA/PMpSg1a8mTttsWhz5zg5gt5li/1tfyUDY14qjGmM5fdLbfZAqAMAnzb5+qQDGxKwfmKvUngPcL5nKkzM=
Received: by 10.54.45.14 with SMTP id s14mr2876766wrs;
        Mon, 01 Aug 2005 06:37:51 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Mon, 1 Aug 2005 06:37:51 -0700 (PDT)
Message-ID: <8a484a7805080106371d57a85d@mail.gmail.com>
Date: Mon, 1 Aug 2005 15:37:51 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: how to get the snippet?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy all,

which is the way to get a snippet of a query?
Does Lucene offer some explicit methods?
If is not so, it's possible to know the position of the matched
keyword in the query into the field of the doc, so that I can take
some words before and after the keyword to create the snippet?
Or there is a smarter way to get the snippet?

thx in advance!
--=20
Riccardo Daviddi
University of Siena - Information Engeneering
rdaviddi@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 16:13:14 2005
Return-Path: <java-user-return-15668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67464 invoked from network); 1 Aug 2005 16:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 16:13:14 -0000
Received: (qmail 69161 invoked by uid 500); 1 Aug 2005 16:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69143 invoked by uid 500); 1 Aug 2005 16:13:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69130 invoked by uid 99); 1 Aug 2005 16:13:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 09:13:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.81.81.96] (HELO mail.dessci.com) (64.81.81.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 09:12:58 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C596B4.2BAEF776"
Subject: RE: n-gram indexing
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Mon, 1 Aug 2005 09:15:02 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD63BBC01@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <D1EFB337111B674B8F1BE155B01C6DD63BBC01@franklin.corp.dessci>
Thread-Topic: n-gram indexing
thread-index: AcWUo9+IFUw5f5cuTReh9Q6t+2tOWQCDpsXw
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C596B4.2BAEF776
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Chris,
         The method you suggested is definitely a good solution. However =
there is one more reason I would like to do n-gram generation at =
indexing time. The examples below are a text search equivalent of what I =
am trying to do for a different kind of data. Anyway the example should =
convey the message.

Example 1:
Phrase query:  "united ? of america"
Aim: "?" should match a single word.
Possible Outcome: "?" should match "states" in the phrase "united states =
of america".

Example 2:
Phrase query: "united * america"
Aim: "*" should match multiple words.
Possible Outcome: "*" can match one or more words in the phrase "united =
states of america".

         If I am correct, Lucene provides wild card searches only in the =
terms indexed. I want to extend this capability to phrase level.
        =20
         There might be other ways to do which I am not aware of. Let me =
know what your thoughts on this. I would really appreciate any =
suggestions you might have.

thanks,

Rajesh Munavalli

-----Original Message-----
From: hossman@hal.rescomp.berkeley.edu on behalf of Chris Hostetter
Sent: Fri 7/29/2005 6:11 PM
To: java-user@lucene.apache.org
Subject: RE: n-gram indexing
=20
: Document 1:
: "united states is .... United airlines operates in 50 states. United
: states government....."
:
: Document 2:
: "united states is .... United airlines operates in 50 states. United
: some other word states"
:
: If you consider the tf-idf weight of individual terms "united" and
: "states" they would have exact score in both the documents. But the =
term
: "united states" should have higher weight in Document 1. The higher
: weight can be achieved through bi-grams which would include the word
: "united states". My guess is, lucene will retrieve both documents with
: equal score.

I believe yyour intuition is correct, but did you try what i suggested
below? .. i don't believe you have to index all of hte possible n-grams,
just construct a boolean query containing the n-grams, and boost the
larger n-grams (by some factor only experimenting will tell you).

you should also try out SpanNearQuery ... I believe it scores thingsw
higher if they appear closer together -- but i'm not confident of my
memory in htat case.

Seriously, try what i suggest below ... experimentation is the best way =
to
answer questions like this...

: -----Original Message-----
: Sent: Monday, July 18, 2005 5:11 PM
: To: java-user@lucene.apache.org
: Subject: RE: n-gram indexing
:
:
: Your intuition is right, but i can't think of any reason why you need =
to
: add the n-grams at indexing time -- or why using phrase queries would =
be
: a bad thing in this case.  When you get a multiword query, construct =
the
: n-grams of the query words as multiple phrase queries and search for a
: BooleanQuery of all those phrases (with bigger boosts given to longer
: phrases)
:
: Using your example of "united states of america" generate a query that
: looks something like...
:
:      united states america
:      "united states"^10 "states america"^10
:      "united states america"^100


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



------_=_NextPart_001_01C596B4.2BAEF776
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C596B4.2BAEF776--

From java-user-return-15669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 16:24:27 2005
Return-Path: <java-user-return-15669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70709 invoked from network); 1 Aug 2005 16:24:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 16:24:27 -0000
Received: (qmail 85419 invoked by uid 500); 1 Aug 2005 16:24:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85400 invoked by uid 500); 1 Aug 2005 16:24:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85387 invoked by uid 99); 1 Aug 2005 16:24:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 09:24:20 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 09:24:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 266F85B782; Mon,  1 Aug 2005 09:24:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 238457F45C
	for <java-user@lucene.apache.org>; Mon,  1 Aug 2005 09:24:15 -0700 (PDT)
Date: Mon, 1 Aug 2005 09:24:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: n-gram indexing
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD63BBC01@franklin.corp.dessci>
Message-ID: <Pine.LNX.4.58.0508010918490.9872@hal.rescomp.berkeley.edu>
References: <D1EFB337111B674B8F1BE155B01C6DD63BBC01@franklin.corp.dessci>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I think you can achieve what you want using Span queries with slop
of 1 for ? or MAX_INT for * -- but you'll probably need to make some
nested queries in order to have 0 slop between "of" and "america"

: Date: Mon, 1 Aug 2005 09:15:02 -0700
: From: Rajesh Munavalli <rajeshm@dessci.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: RE: n-gram indexing
:
: Hi Chris,
:          The method you suggested is definitely a good solution. However there is one more reason I would like to do n-gram generation at indexing time. The examples below are a text search equivalent of what I am trying to do for a different kind of data. Anyway the example should convey the message.
:
: Example 1:
: Phrase query:  "united ? of america"
: Aim: "?" should match a single word.
: Possible Outcome: "?" should match "states" in the phrase "united states of america".
:
: Example 2:
: Phrase query: "united * america"
: Aim: "*" should match multiple words.
: Possible Outcome: "*" can match one or more words in the phrase "united states of america".
:
:          If I am correct, Lucene provides wild card searches only in the terms indexed. I want to extend this capability to phrase level.
:
:          There might be other ways to do which I am not aware of. Let me know what your thoughts on this. I would really appreciate any suggestions you might have.
:
: thanks,
:
: Rajesh Munavalli
:
: -----Original Message-----
: From: hossman@hal.rescomp.berkeley.edu on behalf of Chris Hostetter
: Sent: Fri 7/29/2005 6:11 PM
: To: java-user@lucene.apache.org
: Subject: RE: n-gram indexing
:
: : Document 1:
: : "united states is .... United airlines operates in 50 states. United
: : states government....."
: :
: : Document 2:
: : "united states is .... United airlines operates in 50 states. United
: : some other word states"
: :
: : If you consider the tf-idf weight of individual terms "united" and
: : "states" they would have exact score in both the documents. But the term
: : "united states" should have higher weight in Document 1. The higher
: : weight can be achieved through bi-grams which would include the word
: : "united states". My guess is, lucene will retrieve both documents with
: : equal score.
:
: I believe yyour intuition is correct, but did you try what i suggested
: below? .. i don't believe you have to index all of hte possible n-grams,
: just construct a boolean query containing the n-grams, and boost the
: larger n-grams (by some factor only experimenting will tell you).
:
: you should also try out SpanNearQuery ... I believe it scores thingsw
: higher if they appear closer together -- but i'm not confident of my
: memory in htat case.
:
: Seriously, try what i suggest below ... experimentation is the best way to
: answer questions like this...
:
: : -----Original Message-----
: : Sent: Monday, July 18, 2005 5:11 PM
: : To: java-user@lucene.apache.org
: : Subject: RE: n-gram indexing
: :
: :
: : Your intuition is right, but i can't think of any reason why you need to
: : add the n-grams at indexing time -- or why using phrase queries would be
: : a bad thing in this case.  When you get a multiword query, construct the
: : n-grams of the query words as multiple phrase queries and search for a
: : BooleanQuery of all those phrases (with bigger boosts given to longer
: : phrases)
: :
: : Using your example of "united states of america" generate a query that
: : looks something like...
: :
: :      united states america
: :      "united states"^10 "states america"^10
: :      "united states america"^100
:
:
: -Hoss
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 17:21:37 2005
Return-Path: <java-user-return-15670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93829 invoked from network); 1 Aug 2005 17:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 17:21:37 -0000
Received: (qmail 96585 invoked by uid 500); 1 Aug 2005 17:21:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96559 invoked by uid 500); 1 Aug 2005 17:21:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96546 invoked by uid 99); 1 Aug 2005 17:21:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 10:21:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.43] (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 01 Aug 2005 10:21:18 -0700
Received: (qmail 17312 invoked by uid 60001); 1 Aug 2005 17:21:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=qFPjfmTHNzIVChOyz2WXseIEZoaulkHq4OZhgvac+SMZnmeFPGtzH9oxk534jm4L5YUKuNYupZKByS+Hxv8z58wnvOVhgI6f3EC4xQPYTtTy+EN17qfagNN8spntdU2egzdfQ4RdF0TPq5UVoK5Ll0dJGLKtBOF2j4SLJomAoT0=  ;
Message-ID: <20050801172124.17310.qmail@web31110.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31110.mail.mud.yahoo.com via HTTP; Mon, 01 Aug 2005 10:21:24 PDT
Date: Mon, 1 Aug 2005 10:21:24 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: how to get the snippet?
To: java-user@lucene.apache.org, Riccardo Daviddi <rdaviddi@gmail.com>
In-Reply-To: <8a484a7805080106371d57a85d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

If you want highlighting like this:
  http://simpy.com/simpy/User.do?username=otis&q=lucene
or like this:
  http://lucenebook.com/search?query=highlighter

Then you'll want to pull Lucene directly from SVN, and look in the
contrib/ directory, where you'll find classes for highlighter.  You can
then build a Jar for the highlighter and use it in your app.  The API
is simple (you can download the code from the Lucene book and see how
it's done).

Otis


--- Riccardo Daviddi <rdaviddi@gmail.com> wrote:

> Hy all,
> 
> which is the way to get a snippet of a query?
> Does Lucene offer some explicit methods?
> If is not so, it's possible to know the position of the matched
> keyword in the query into the field of the doc, so that I can take
> some words before and after the keyword to create the snippet?
> Or there is a smarter way to get the snippet?
> 
> thx in advance!
> -- 
> Riccardo Daviddi
> University of Siena - Information Engeneering
> rdaviddi@gmail.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 19:42:59 2005
Return-Path: <java-user-return-15671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51843 invoked from network); 1 Aug 2005 19:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 19:42:59 -0000
Received: (qmail 45308 invoked by uid 500); 1 Aug 2005 19:42:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45274 invoked by uid 500); 1 Aug 2005 19:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45261 invoked by uid 99); 1 Aug 2005 19:42:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 12:42:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.170.196 as permitted sender)
Received: from [64.233.170.196] (HELO rproxy.gmail.com) (64.233.170.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 12:42:44 -0700
Received: by rproxy.gmail.com with SMTP id g11so1051192rne
        for <java-user@lucene.apache.org>; Mon, 01 Aug 2005 12:42:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=tCJhZ9xb+d41eWtprKbpLyQ0wvxJdEjmLhsm2qxqXAaVqpSkdxh0vOjPgGsKYqjhZfWsGyRFu9E+DeUbSdCI+pP9PuZOkUJC5ajrv4Myl14Ach7cvuYIgAvdrGcVhK01m2WL4AIO6tBW/EFUjT/YVRPzMiDVK5osieUP9O7i6c8=
Received: by 10.38.9.40 with SMTP id 40mr1103321rni;
        Mon, 01 Aug 2005 12:42:51 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Mon, 1 Aug 2005 12:42:51 -0700 (PDT)
Message-ID: <c68e3917050801124258789ab8@mail.gmail.com>
Date: Mon, 1 Aug 2005 15:42:51 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Any problems with a failed IndexWriter optimize call?
In-Reply-To: <Pine.LNX.4.58.0507312328000.7184@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42ED9504.8040101@cosmicrealms.com>
	 <Pine.LNX.4.58.0507312328000.7184@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If all segments were flushed to the disk (no adds since the last time
the index writer was opened), then it seems like the index should be
fine.

The big question I have is what happens when there are in-memory
segments in the case of an OOM exception during an optimize?  Is data
loss possible?

-Yonik


On 8/1/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>=20
> If i remember correctly, what you'll find when you remove the lock file i=
s
> that your index is still usable, and from the perspective of new
> IndexWriter/IndexReaders it's in the same state it was prior to the call
> to optimize, but from the perspective of an external observer, the index
> directory will contain a bunch of garbage files from the aborted optimize=
.
>=20
> At my work, we've taken the "safe" attitude that if you get an OOM
> exception, you should assume your index is corrupted, and rebuild from
> scratch for safety -- but i think it's safe to cleanup up the garbage
> files manually.
>=20
> which brings up something i ment to ask a while back:  Has anyone written
> any index cleaning code?  that locks an index (using the public API) and
> then inspects the file (using the API, or using low level knowledge of ht=
e
> file structure) to generate a list of 'garbage' files in the index
> directory that should be safely deletable?
>=20
> (I considered writing this a few months ago, but then our "play it safe,
> treat it as corrupt" policy came out, and it wasn't all that neccessary
> for me)
>=20
> It seems like it might be a handy addition to the sandbox.
>=20
>=20
> : Date: Sun, 31 Jul 2005 23:20:36 -0400
> : From: Robert Schultz <robert@cosmicrealms.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Any problems with a failed IndexWriter optimize call?
> :
> : Hello! I am using Lucene 1.4.3
> :
> : I'm building a Lucene index, that will have about 25 million documents
> : when it is done.
> : I'm adding 250,000 at a time.
> :
> : Currently there is about 1.2Million in there, and I ran into a problem.
> : After I had added a batch of 250,000 I go a 'java.lang.outOfMemory'
> : threw by writer.optimize(); (a standard IndexWriter)
> :
> : The exception caused my program to quit out, and it didn't call
> : 'writer.close();'
> :
> : First, with it dying in the middle of an .optimize() is there any chanc=
e
> : my index is corrupted?
> :
> : Second, I know I can remove the /tmp/lucene*.lock file to remove the
> : lock in order to add more, but is it safe to do that?
> :
> : I've since figured out that I can pass -Xmx to the 'java' program in
> : order to increase the maximum amount of RAM.
> : It was using the default of 64M, I plan on increasing that to 175M to
> : start with.
> : That should solve the memory problems (I can allocate more if necessary
> : down the line).
> :
> : Lastly, when I go back, open it again, and add another 250,000 and then
> : call optimize again, will a failed previous optimize hurt the index at =
all?
> :
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 20:12:27 2005
Return-Path: <java-user-return-15672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63605 invoked from network); 1 Aug 2005 20:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 20:12:27 -0000
Received: (qmail 80132 invoked by uid 500); 1 Aug 2005 20:12:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80105 invoked by uid 500); 1 Aug 2005 20:12:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80092 invoked by uid 99); 1 Aug 2005 20:12:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 13:12:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.19.185.234] (HELO mail.telparia.com) (67.19.185.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 13:12:11 -0700
Received: from [192.168.77.2] (68-65-6-113.bflony.adelphia.net [68.65.6.113])
	by mail.telparia.com (Postfix) with ESMTP id 209165D8498
	for <java-user@lucene.apache.org>; Mon,  1 Aug 2005 15:49:56 -0500 (CDT)
Message-ID: <42EE8238.1050907@cosmicrealms.com>
Date: Mon, 01 Aug 2005 16:12:40 -0400
From: Robert Schultz <robert@cosmicrealms.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Any problems with a failed IndexWriter optimize call?
References: <42ED9504.8040101@cosmicrealms.com>	 <Pine.LNX.4.58.0507312328000.7184@hal.rescomp.berkeley.edu> <c68e3917050801124258789ab8@mail.gmail.com>
In-Reply-To: <c68e3917050801124258789ab8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am going to play it safe.
I'm going to wipe the index files, and start over (only put about 2 days 
of processing time into it so far).

This time with a maximum memory of over 512MB

Yonik Seeley wrote:
> If all segments were flushed to the disk (no adds since the last time
> the index writer was opened), then it seems like the index should be
> fine.
> 
> The big question I have is what happens when there are in-memory
> segments in the case of an OOM exception during an optimize?  Is data
> loss possible?
> 
> -Yonik
> 
> 
> On 8/1/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> 
>>If i remember correctly, what you'll find when you remove the lock file is
>>that your index is still usable, and from the perspective of new
>>IndexWriter/IndexReaders it's in the same state it was prior to the call
>>to optimize, but from the perspective of an external observer, the index
>>directory will contain a bunch of garbage files from the aborted optimize.
>>
>>At my work, we've taken the "safe" attitude that if you get an OOM
>>exception, you should assume your index is corrupted, and rebuild from
>>scratch for safety -- but i think it's safe to cleanup up the garbage
>>files manually.
>>
>>which brings up something i ment to ask a while back:  Has anyone written
>>any index cleaning code?  that locks an index (using the public API) and
>>then inspects the file (using the API, or using low level knowledge of hte
>>file structure) to generate a list of 'garbage' files in the index
>>directory that should be safely deletable?
>>
>>(I considered writing this a few months ago, but then our "play it safe,
>>treat it as corrupt" policy came out, and it wasn't all that neccessary
>>for me)
>>
>>It seems like it might be a handy addition to the sandbox.
>>
>>
>>: Date: Sun, 31 Jul 2005 23:20:36 -0400
>>: From: Robert Schultz <robert@cosmicrealms.com>
>>: Reply-To: java-user@lucene.apache.org
>>: To: java-user@lucene.apache.org
>>: Subject: Any problems with a failed IndexWriter optimize call?
>>:
>>: Hello! I am using Lucene 1.4.3
>>:
>>: I'm building a Lucene index, that will have about 25 million documents
>>: when it is done.
>>: I'm adding 250,000 at a time.
>>:
>>: Currently there is about 1.2Million in there, and I ran into a problem.
>>: After I had added a batch of 250,000 I go a 'java.lang.outOfMemory'
>>: threw by writer.optimize(); (a standard IndexWriter)
>>:
>>: The exception caused my program to quit out, and it didn't call
>>: 'writer.close();'
>>:
>>: First, with it dying in the middle of an .optimize() is there any chance
>>: my index is corrupted?
>>:
>>: Second, I know I can remove the /tmp/lucene*.lock file to remove the
>>: lock in order to add more, but is it safe to do that?
>>:
>>: I've since figured out that I can pass -Xmx to the 'java' program in
>>: order to increase the maximum amount of RAM.
>>: It was using the default of 64M, I plan on increasing that to 175M to
>>: start with.
>>: That should solve the memory problems (I can allocate more if necessary
>>: down the line).
>>:
>>: Lastly, when I go back, open it again, and add another 250,000 and then
>>: call optimize again, will a failed previous optimize hurt the index at all?
>>:
>>:
>>:
>>: ---------------------------------------------------------------------
>>: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>: For additional commands, e-mail: java-user-help@lucene.apache.org
>>:
>>
>>
>>
>>-Hoss
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 20:22:12 2005
Return-Path: <java-user-return-15673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66335 invoked from network); 1 Aug 2005 20:22:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 20:22:11 -0000
Received: (qmail 86985 invoked by uid 500); 1 Aug 2005 20:22:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86953 invoked by uid 500); 1 Aug 2005 20:22:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86940 invoked by uid 99); 1 Aug 2005 20:22:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 13:22:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 13:21:57 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Question on Wildcard
Date: Mon, 1 Aug 2005 16:22:03 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D131038B20CA@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question on Wildcard
Thread-Index: AcWW1WNkJFBBP4AnSIqUI1a31ZpmfQAANDOA
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
	I have a Punctuation Filter that filters out certain criteria
(ex. - and /).  This filter is called whenever I search for normal
items.. Search 56-TXT=20
The filter does not seem to be called when I search for 56-TXT* even
though I use my extended analyzer which has the filter in it so the
items are not found due to the token being 56TXT due to the filter.

Any ideas?

Thanks all,
Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 20:34:26 2005
Return-Path: <java-user-return-15674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70246 invoked from network); 1 Aug 2005 20:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 20:34:25 -0000
Received: (qmail 7571 invoked by uid 500); 1 Aug 2005 20:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7542 invoked by uid 500); 1 Aug 2005 20:34:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7522 invoked by uid 99); 1 Aug 2005 20:34:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 13:34:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO zproxy.gmail.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 13:33:55 -0700
Received: by zproxy.gmail.com with SMTP id n29so898488nzf
        for <java-user@lucene.apache.org>; Mon, 01 Aug 2005 13:34:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MFKAPWQZ+vtrQbKyyjR7Qh19iPEc2ANWzW1bEYaw1B0RqzgEMpIoIlT9OHTmrVX42GRJJO/MhlQ8pjHgaEANtjepLIYcbKAQMOBEc/uhMJDXMcaplVe1GkQqmg21rQBrHiuKW2c2SM+UV7b0HhfJ+3tCCwjdGRYdMw0DJCSWTmg=
Received: by 10.36.157.1 with SMTP id f1mr5568455nze;
        Mon, 01 Aug 2005 13:34:02 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 15sm3926102nzp.2005.08.01.13.34.01;
        Mon, 01 Aug 2005 13:34:02 -0700 (PDT)
Message-ID: <42EE8739.8050501@gmail.com>
Date: Mon, 01 Aug 2005 15:34:01 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Any problems with a failed IndexWriter optimize call?
References: <42ED9504.8040101@cosmicrealms.com>	 <Pine.LNX.4.58.0507312328000.7184@hal.rescomp.berkeley.edu> <c68e3917050801124258789ab8@mail.gmail.com> <42EE8238.1050907@cosmicrealms.com>
In-Reply-To: <42EE8238.1050907@cosmicrealms.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

May I suggest:

Don't call optimize.  You don't need it.  Here is my approach: 

Keep each one of your 250,000 document indexes separate - so run your 
batch, build the index, and then just close it.  Don't try to optimize 
it.  For each 250,000 document batch, just put it into a different folder.

Now, when you have finished building your entire index, you will have a 
bunch of different unoptimized lucene indexes.  Open up a new, blank 
index, and merge all of your other indexes into this one.  The end 
result will be a single large (already optimized) index.


This approach has several benefits -
You can keep the parameters set in such a way that it performs better 
while indexing (without running into the out of file handles issues)
If a failure occurs, you only have to redo the batch, not start over the 
entire process.
You don't have unnecessary IO, but constantly rewriting your data with 
optimize() calls.
You can very easily break up the indexing across multiple machines.
If a failure occurs while trying to merge all of the indexes together, 
you don't lose anything - as you are only reading the existing indexes.  
You know they will all still be valid.

I actually wrote a wrapper for Lucene that does all of this under the 
covers.  At some point, I should get it released open source :)

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 23:59:23 2005
Return-Path: <java-user-return-15675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36126 invoked from network); 1 Aug 2005 23:59:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 23:59:23 -0000
Received: (qmail 50962 invoked by uid 500); 1 Aug 2005 23:58:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50888 invoked by uid 500); 1 Aug 2005 23:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50854 invoked by uid 99); 1 Aug 2005 23:58:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 16:58:53 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.127.198.54] (HELO rwcrmhc12.comcast.net) (204.127.198.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 16:58:41 -0700
Received: from [192.168.1.100] (pcp0011483178pcs.chrchv01.md.comcast.net[68.55.209.172])
          by comcast.net (rwcrmhc14) with SMTP
          id <2005080123584801400h7ta9e>; Mon, 1 Aug 2005 23:58:48 +0000
Mime-Version: 1.0 (Apple Message framework v733)
Content-Transfer-Encoding: 7bit
Message-Id: <D994BE88-FF08-4D61-AE09-F08A567C8B18@comcast.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Tony Wiegand <tmwiegand@comcast.net>
Subject: FileNotFound
Date: Mon, 1 Aug 2005 19:58:46 -0400
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


  Does anyone know why lucene would throw the following stacktrace  
when a search runs while the system is in the process of merging  
documents?   Based on the book, this should be a legal operation.    
I've seen this stacktrace mentioned several times in the archives but  
I never seen a solution to the issue.   We are running JDK1.4.2 on  
Solaris 2.8 and using lucene.1.4.3.    We are seeing this happen  
quite often on our production system.

java.io.FileNotFoundException: /apps/lucene/_2meu.fnm (No such file  
or directory)
at java.io.RandomAccessFile.open(Native Method)
at java.io.RandomAccessFile.<init>(RandomAccessFile.java:200)
at org.apache.lucene.store.FSInputStream$Descriptor.<init> 
(FSDirectory.java:376)
at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
at org.apache.lucene.index.SegmentReader.initialize 
(SegmentReader.java:109)
at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
at org.apache.lucene.store.Lock$With.run(Lock.java:109)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 00:31:47 2005
Return-Path: <java-user-return-15676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41436 invoked from network); 2 Aug 2005 00:31:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 00:31:47 -0000
Received: (qmail 83494 invoked by uid 500); 2 Aug 2005 00:31:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82607 invoked by uid 500); 2 Aug 2005 00:31:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82594 invoked by uid 99); 2 Aug 2005 00:31:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 17:31:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fraschetti@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO zproxy.gmail.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 17:31:32 -0700
Received: by zproxy.gmail.com with SMTP id n29so916687nzf
        for <java-user@lucene.apache.org>; Mon, 01 Aug 2005 17:31:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XeeQ6z/yyys8prxon6tg0leUqqE1uxExjmIZspozX4wAFeS1g0xq/SEuxKM4Tl2twMhDjR+1Ipw4X4rSHpd0Kn7CUd5VMasDxS+15rrkrAK4ZZeChJm5FGfeknQEU+E6WWwP0g+o2340dnCX1KVlaJGMEOhl3ExdgXKGlnnkUHk=
Received: by 10.36.227.65 with SMTP id z65mr5781425nzg;
        Mon, 01 Aug 2005 17:31:38 -0700 (PDT)
Received: by 10.36.55.12 with HTTP; Mon, 1 Aug 2005 17:31:38 -0700 (PDT)
Message-ID: <cbdebdf80508011731f18251c@mail.gmail.com>
Date: Mon, 1 Aug 2005 17:31:38 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexed document id
In-Reply-To: <DE8BA09A-E365-4DFB-BF96-B6BA6F62EB73@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <cbdebdf805072913403699c484@mail.gmail.com>
	 <DE8BA09A-E365-4DFB-BF96-B6BA6F62EB73@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If i'm using multiple threads to add documents to the index, can it be
assumed that they will be added to the index in the order they are
presented to the indexwriter? and thus keeping my local doc id count
would hold true?

-Chris Fraschetti

On 7/29/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Jul 29, 2005, at 4:40 PM, Chris Fraschetti wrote:
> > I've got an index which I rebuild each time and don't do any deletes
> > until the end, so doc ids shouldn't change... at index time, is there
> > a better way to discover the id of the document i just added than
> > docCount() ?
>=20
> When building a new index by strictly adding documents, you could
> keep a zero-based counter which would reflect document id at that
> time.  They are simply in ascending order.
>=20
>     Erik
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 03:38:39 2005
Return-Path: <java-user-return-15677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87219 invoked from network); 2 Aug 2005 03:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 03:38:39 -0000
Received: (qmail 39884 invoked by uid 500); 2 Aug 2005 03:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39863 invoked by uid 500); 2 Aug 2005 03:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39849 invoked by uid 99); 2 Aug 2005 03:38:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Aug 2005 20:38:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.43] (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 01 Aug 2005 20:38:23 -0700
Received: (qmail 69262 invoked by uid 60001); 2 Aug 2005 03:38:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hJhMeVv2Cn56PNM94ZrwVqflx2xhs5YVxw3wWC1DGI3E8IKMdLQdcEsJFdFyjpBornDrl3uZfa55G4fVaEvSOy9Ps3SjOmRJZvRCdAcq8GLOGZduaLfqgv41xLhibUMKWAT8wEF4b6+BMUZbe85/ts78m36niNfGT3ytSILdEgs=  ;
Message-ID: <20050802033830.69260.qmail@web31110.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31110.mail.mud.yahoo.com via HTTP; Mon, 01 Aug 2005 20:38:30 PDT
Date: Mon, 1 Aug 2005 20:38:30 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: indexed document id
To: java-user@lucene.apache.org
In-Reply-To: <cbdebdf80508011731f18251c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I believe so. Java's synchronized' keyword is what makes it possible to
use multiple threads with a single IndexWriter instance, and I believe
that means threads are processed in a FIFO manner.

Otis


--- Chris Fraschetti <fraschetti@gmail.com> wrote:

> If i'm using multiple threads to add documents to the index, can it
> be
> assumed that they will be added to the index in the order they are
> presented to the indexwriter? and thus keeping my local doc id count
> would hold true?
> 
> -Chris Fraschetti
> 
> On 7/29/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> > 
> > On Jul 29, 2005, at 4:40 PM, Chris Fraschetti wrote:
> > > I've got an index which I rebuild each time and don't do any
> deletes
> > > until the end, so doc ids shouldn't change... at index time, is
> there
> > > a better way to discover the id of the document i just added than
> > > docCount() ?
> > 
> > When building a new index by strictly adding documents, you could
> > keep a zero-based counter which would reflect document id at that
> > time.  They are simply in ascending order.
> > 
> >     Erik
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> -- 
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 08:26:58 2005
Return-Path: <java-user-return-15678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70352 invoked from network); 2 Aug 2005 08:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 08:26:58 -0000
Received: (qmail 9726 invoked by uid 500); 2 Aug 2005 08:26:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9704 invoked by uid 500); 2 Aug 2005 08:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9691 invoked by uid 99); 2 Aug 2005 08:26:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 01:26:50 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_IMAGE_ONLY_16,HTML_MESSAGE,SUBJ_ALL_CAPS,UPPERCASE_50_75
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Aug 2005 01:26:41 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IKL71X00.8NB for <java-user@lucene.apache.org>; Tue, 2
          Aug 2005 14:16:45 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: NEXT VERSION
Date: Tue, 2 Aug 2005 14:05:38 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKKEMKCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_000B_01C5976B.425F8BE0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000B_01C5976B.425F8BE0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_000C_01C5976B.425F8BE0"


------=_NextPart_001_000C_01C5976B.425F8BE0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit



Hi Luceners....

Apologies..........

Just eager to ask " WHEN IS THE NEXT VERSION OF LUCENE BE OUT " .

[ I am awaiting to use the new features for  my exisiting ones ]

.......;)




WITH WARM REGARDS 
HAVE A NICE DAY 
[ N.S.KARTHIK] 


------=_NextPart_001_000C_01C5976B.425F8BE0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><SPAN class=3D250333208-02082005><FONT face=3DVerdana =
size=3D2><STRONG>Hi=20
Luceners....</STRONG></FONT></SPAN></P>
<P><SPAN class=3D250333208-02082005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies..........</FONT></STRONG></SPAN></P>
<P><SPAN class=3D250333208-02082005><FONT face=3DVerdana =
size=3D2><STRONG>Just eager=20
to ask " WHEN IS THE NEXT VERSION OF LUCENE BE OUT "=20
.</STRONG></FONT></SPAN></P>
<P><SPAN class=3D250333208-02082005><STRONG><FONT face=3DVerdana =
size=3D2>[ I am=20
awaiting to use the new features for&nbsp; my exisiting ones=20
]</FONT></STRONG></SPAN></P>
<P><SPAN class=3D250333208-02082005><STRONG><FONT face=3DVerdana=20
size=3D2>.......;)</FONT></STRONG></SPAN></P>
<P>&nbsp;</P>
<P><IMG height=3D85 src=3D"cid:250333208@02082005-2bfc" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_000C_01C5976B.425F8BE0--

------=_NextPart_000_000B_01C5976B.425F8BE0--


From java-user-return-15679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 13:31:08 2005
Return-Path: <java-user-return-15679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85809 invoked from network); 2 Aug 2005 13:31:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 13:31:07 -0000
Received: (qmail 25397 invoked by uid 500); 2 Aug 2005 13:31:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25365 invoked by uid 500); 2 Aug 2005 13:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25352 invoked by uid 99); 2 Aug 2005 13:30:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 06:30:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jp.seng@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Aug 2005 06:30:51 -0700
Received: (qmail 1295 invoked by uid 0); 2 Aug 2005 13:30:57 -0000
Received: from 80.87.168.98 by www65.gmx.net with HTTP;
	Tue, 2 Aug 2005 15:30:57 +0200 (MEST)
Date: Tue, 2 Aug 2005 15:30:57 +0200 (MEST)
From: "Jan Philipp Seng" <jp.seng@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?how_to_free_memory_after_index_ist_build.?=
X-Priority: 3 (Normal)
X-Authenticated: #21695757
Message-ID: <31461.1122989457@www65.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am using the Lucene 1.4.3 API. After building the index over 150000
documents (~250 MB data), Lucene does not free the memory that is used
during indexing. The searcher runs as a servlet under Tomcat. Every time the
index is build new, the indexing process takes free memory, so after ten
runs the memory is completly full. I tried to call the garbage collector
explicitly, but that does not help.
I build the index to harddisc and load it into a RAMDirectory after
building. There is no reference to my indexer left after indexing and I
cannot find a reason why the garbage collector does not free the memory.
Here are some important points of my code reduced to the central
functionality. Do you have any ideas, what kind of problem this could be ?
An answer would help me a lot.


IndexTablesDaemon start the indexing process:
IndexTablesDaemon.run():
-----------------------------
while (true) {
  IndexTables indexer = new IndexTables();
  indexer.indexTables(); // indexing if necessary, writing the new index to
harddisc
  indexer = null;        // for freeing the memory, does not help
  FTS.initNewIndex();    // switching the old with the new index
  Runtime.getRuntime().gc();   // calling the garbage collector. Does not
help.
  Thread.sleep(lWait);         // waiting a fix space of time
} 

		
		
Building the index: sending queries to a mySQLDatabase, 
										buidling a Lucene-document with the mySQL-data und indexing it:
IndexTables.indexTables():
--------------------------
  IndexWriter writer = new IndexWriter(PATHNAME_INDEX_NEW), 
    new TTAnalyser(), true);		

  writer.mergeFactor = 250;
  writer.minMergeDocs = 250;
 
  Document doc = null;

  String sQuery = "SELECT columns FROM table";

  Connection conn = DriverManager.getConnection("jdbc:mysql: ...");
  Statement stmt = conn.createStatement()
  ResultSet	rs = stmt.executeQuery(sQuery);

  while (m_rs.next()) {
    doc = getTTDocument();
    // fill doc with fields from the database query
    writer.addDocument(doc);
  }

  writer.optimize();
  writer.close();
  writer = null;              // for freeing memory. Does not help

  Runtime.getRuntime().gc();  // explicitely running the garbage collector.
Does not help
}
	
	
		
Exchanging the old an the new index for queries to the Lucene-index.
FTS.initNewIndex():
-------------------
  File oldIndex = new File(sPathIndex);
  File newIndex = new File(sPathIndexNew);
 
  // deleting all files in the old index from harddisc
  // let the new index become the operating index
  oldIndex.delete();
  newIndex.renameTo(oldIndex);
 
  // load the new index to RAMDirectory from harddisc
  SearchTables.reloadIndex();		
				
			
Thanks for your help,

Jan Philipp Seng, Germany, Aachen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 14:39:35 2005
Return-Path: <java-user-return-15680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16277 invoked from network); 2 Aug 2005 14:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 14:39:35 -0000
Received: (qmail 58257 invoked by uid 500); 2 Aug 2005 14:39:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58195 invoked by uid 500); 2 Aug 2005 14:39:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58165 invoked by uid 99); 2 Aug 2005 14:39:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 07:39:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.81.81.96] (HELO mail.dessci.com) (64.81.81.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 07:39:12 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C59770.3D21613A"
Subject: multiple fields in position increments
Date: Tue, 2 Aug 2005 07:41:16 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD63BBC02@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: multiple fields in position increments
thread-index: AcWXcDzoVtREspNUTqSne3PDRfDwjA==
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C59770.3D21613A
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Is it possible to have multiple fields for the same token position?

For example:
Position         Field         Token
--------         ------        ------
    0            author        Rajesh
    0            person        Rajesh
    1            contents       is
    2            contents       ....

        In the above example, the token "Rajesh" is associated with two =
fields. At the time of indexing I would like to add the second token =
with ZERO position increment.

thanks,

Rajesh Munavalli

------_=_NextPart_001_01C59770.3D21613A--

From java-user-return-15681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 15:36:41 2005
Return-Path: <java-user-return-15681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56746 invoked from network); 2 Aug 2005 15:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 15:36:41 -0000
Received: (qmail 89069 invoked by uid 500); 2 Aug 2005 15:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88915 invoked by uid 500); 2 Aug 2005 15:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88902 invoked by uid 99); 2 Aug 2005 15:36:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 08:36:31 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.230] (HELO web31111.mail.mud.yahoo.com) (68.142.200.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Aug 2005 08:36:21 -0700
Received: (qmail 64231 invoked by uid 60001); 2 Aug 2005 15:36:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ZM0tV1ZOvPjZKzwyMGJfboLVx1Y2z66GGyBzNoyEtxQ7cfF4lMjZoSdLzFued6wQOcnu8k9A7zkjLoaFQiClzUvVLB8pK6K16ONWRI/GOB4hK/oivz1CvxvIz++FEW996JKBVJCk2vnon4rZQWZS6p2hcxMBiTCcXD3A4wo7YqI=  ;
Message-ID: <20050802153628.64229.qmail@web31111.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31111.mail.mud.yahoo.com via HTTP; Tue, 02 Aug 2005 08:36:28 PDT
Date: Tue, 2 Aug 2005 08:36:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: NEXT VERSION
To: java-user@lucene.apache.org
In-Reply-To: <OBELINLGKPEMCIEIJJNKKEMKCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No firm plan.
But if you see new features that you want to use, I encourage you to
use the version from SVN.  It is quite stable - I'm using it in
production on Simpy.com for example.

Otis


--- Karthik N S <karthik@controlnet.co.in> wrote:

> 
> 
> Hi Luceners....
> 
> Apologies..........
> 
> Just eager to ask " WHEN IS THE NEXT VERSION OF LUCENE BE OUT " .
> 
> [ I am awaiting to use the new features for  my exisiting ones ]
> 
> .......;)
> 
> 
> 
> 
> WITH WARM REGARDS 
> HAVE A NICE DAY 
> [ N.S.KARTHIK] 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 15:46:20 2005
Return-Path: <java-user-return-15682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76294 invoked from network); 2 Aug 2005 15:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 15:46:20 -0000
Received: (qmail 21007 invoked by uid 500); 2 Aug 2005 15:46:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20926 invoked by uid 500); 2 Aug 2005 15:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20855 invoked by uid 99); 2 Aug 2005 15:46:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 08:46:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.75] (HELO web31113.mail.mud.yahoo.com) (68.142.201.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Aug 2005 08:45:54 -0700
Received: (qmail 90212 invoked by uid 60001); 2 Aug 2005 15:46:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=3UW6XqOwhW7s9MbywHPQLuW64Kej4c8u3j8IeoIEx5y67rklTB5TThWqU5f+yU5IaRxdi6DxQttNFm28RjoAqQq0KJq5QVEYrJ4UwiYW6bbWNgpaN032IVysXvmP461nXxhvmDLBbFSjrChgb9Y+p6VxTi35qZu8kfqBJiyw6yM=  ;
Message-ID: <20050802154601.90210.qmail@web31113.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31113.mail.mud.yahoo.com via HTTP; Tue, 02 Aug 2005 08:46:01 PDT
Date: Tue, 2 Aug 2005 08:46:01 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: how to free memory after index ist build.
To: java-user@lucene.apache.org
In-Reply-To: <31461.1122989457@www65.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Jan,

I don't know where your memory goes - it could be any number of things.
 For instance, somebody mentioned recently that some MySQL JDBC drivers
have known memory leaks.  To figure out where the memory leaks is, and
what's consuming your RAM, run your application under a profiler
(OptimizeIt, JProfiler...).

However, i see a few problems in your code.
1) you should take the JDBC code for getting the connection and
creation of an SQL statement out of that method, so it is not called
repeteadly - you can reuse the same connection!

2) I don't see the code to close your statement, connection, and
ResultSet.  Those typically go to a finally block.

3) mergeFactor looks suspiciously high.

4) You opening IndexWriter, optimizing the index and closing it a lot. 
Do you really need to optimize it that often?

The gc() call you are making is just a suggestion for the JVM - "now
may be a good time to consider running GC".  The JVM may ignore this
suggestion.

Here is a handy method:

    private static long gc()
    {
        long freeMemBefore = Runtime.getRuntime().freeMemory();
        System.out.println("Free Memory Before: " + freeMemBefore);
        System.gc();
        try {
            Thread.sleep(1000);
            System.runFinalization();
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.gc();
        long freeMemAfter = Runtime.getRuntime().freeMemory();
        System.out.println("Total Memory      : " +
Runtime.getRuntime().totalMemory());
        System.out.println("Max Memory        : " +
Runtime.getRuntime().maxMemory());
        System.out.println("Free Memory After : " + freeMemAfter);
        return freeMemBefore-freeMemAfter;
    }


Otis


--- Jan Philipp Seng <jp.seng@gmx.de> wrote:

> I am using the Lucene 1.4.3 API. After building the index over 150000
> documents (~250 MB data), Lucene does not free the memory that is
> used
> during indexing. The searcher runs as a servlet under Tomcat. Every
> time the
> index is build new, the indexing process takes free memory, so after
> ten
> runs the memory is completly full. I tried to call the garbage
> collector
> explicitly, but that does not help.
> I build the index to harddisc and load it into a RAMDirectory after
> building. There is no reference to my indexer left after indexing and
> I
> cannot find a reason why the garbage collector does not free the
> memory.
> Here are some important points of my code reduced to the central
> functionality. Do you have any ideas, what kind of problem this could
> be ?
> An answer would help me a lot.
> 
> 
> IndexTablesDaemon start the indexing process:
> IndexTablesDaemon.run():
> -----------------------------
> while (true) {
>   IndexTables indexer = new IndexTables();
>   indexer.indexTables(); // indexing if necessary, writing the new
> index to
> harddisc
>   indexer = null;        // for freeing the memory, does not help
>   FTS.initNewIndex();    // switching the old with the new index
>   Runtime.getRuntime().gc();   // calling the garbage collector. Does
> not
> help.
>   Thread.sleep(lWait);         // waiting a fix space of time
> } 
> 
> 		
> 		
> Building the index: sending queries to a mySQLDatabase, 
> 										buidling a Lucene-document with the mySQL-data und indexing
> it:
> IndexTables.indexTables():
> --------------------------
>   IndexWriter writer = new IndexWriter(PATHNAME_INDEX_NEW), 
>     new TTAnalyser(), true);		
> 
>   writer.mergeFactor = 250;
>   writer.minMergeDocs = 250;
>  
>   Document doc = null;
> 
>   String sQuery = "SELECT columns FROM table";
> 
>   Connection conn = DriverManager.getConnection("jdbc:mysql: ...");
>   Statement stmt = conn.createStatement()
>   ResultSet	rs = stmt.executeQuery(sQuery);
> 
>   while (m_rs.next()) {
>     doc = getTTDocument();
>     // fill doc with fields from the database query
>     writer.addDocument(doc);
>   }
> 
>   writer.optimize();
>   writer.close();
>   writer = null;              // for freeing memory. Does not help
> 
>   Runtime.getRuntime().gc();  // explicitely running the garbage
> collector.
> Does not help
> }
> 	
> 	
> 		
> Exchanging the old an the new index for queries to the Lucene-index.
> FTS.initNewIndex():
> -------------------
>   File oldIndex = new File(sPathIndex);
>   File newIndex = new File(sPathIndexNew);
>  
>   // deleting all files in the old index from harddisc
>   // let the new index become the operating index
>   oldIndex.delete();
>   newIndex.renameTo(oldIndex);
>  
>   // load the new index to RAMDirectory from harddisc
>   SearchTables.reloadIndex();		
> 				
> 			
> Thanks for your help,
> 
> Jan Philipp Seng, Germany, Aachen
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 16:19:55 2005
Return-Path: <java-user-return-15683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15577 invoked from network); 2 Aug 2005 16:19:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 16:19:55 -0000
Received: (qmail 10496 invoked by uid 500); 2 Aug 2005 16:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10475 invoked by uid 500); 2 Aug 2005 16:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10462 invoked by uid 99); 2 Aug 2005 16:19:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 09:19:47 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 09:19:37 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3BF845B79C; Tue,  2 Aug 2005 09:19:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 36DF87F45C
	for <java-user@lucene.apache.org>; Tue,  2 Aug 2005 09:19:42 -0700 (PDT)
Date: Tue, 2 Aug 2005 09:19:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: how to free memory after index ist build.
In-Reply-To: <20050802154601.90210.qmail@web31113.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0508020916040.29130@hal.rescomp.berkeley.edu>
References: <20050802154601.90210.qmail@web31113.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: 2) I don't see the code to close your statement, connection, and
: ResultSet.  Those typically go to a finally block.

I'm 85% sure that's the memory leak right there... in absence of a
good memory profiler, have you tried commenting out all of the Lucene
related code, to make sure that your basic DB Data retrieval code doesn't
leak memory?

i'm guessing that without the Lucene code, it won't run out of RAM as fast
(because their won't be a RAMDirectory index taking up space) but you
should still see your free memory steadily decrease.


:     private static long gc()
:     {
:         long freeMemBefore = Runtime.getRuntime().freeMemory();
:         System.out.println("Free Memory Before: " + freeMemBefore);
:         System.gc();
:         try {
:             Thread.sleep(1000);
:             System.runFinalization();
:             Thread.sleep(1000);
:         } catch (InterruptedException e) {
:             e.printStackTrace();
:         }
:         System.gc();
:         long freeMemAfter = Runtime.getRuntime().freeMemory();
:         System.out.println("Total Memory      : " +
: Runtime.getRuntime().totalMemory());
:         System.out.println("Max Memory        : " +
: Runtime.getRuntime().maxMemory());
:         System.out.println("Free Memory After : " + freeMemAfter);
:         return freeMemBefore-freeMemAfter;
:     }



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 17:00:25 2005
Return-Path: <java-user-return-15684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33738 invoked from network); 2 Aug 2005 17:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 17:00:24 -0000
Received: (qmail 74005 invoked by uid 500); 2 Aug 2005 17:00:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73977 invoked by uid 500); 2 Aug 2005 17:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73964 invoked by uid 99); 2 Aug 2005 17:00:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 10:00:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 10:00:06 -0700
Received: (qmail 10429 invoked from network); 2 Aug 2005 17:00:11 -0000
Received: from unknown (HELO p5496D5F9.dip.t-dialin.net) ([pbs]695637@[84.150.213.249])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 2 Aug 2005 17:00:11 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Question on Wildcard
Date: Tue, 2 Aug 2005 19:00:28 +0200
User-Agent: KMail/1.8
References: <14FBF41EF1411B45B2EC4ADEAC53D131038B20CA@MAIL01.wescodist.com>
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D131038B20CA@MAIL01.wescodist.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508021900.28586@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 01 August 2005 22:22, Aigner, Thomas wrote:

> The filter does not seem to be called when I search for 56-TXT* even
> though I use my extended analyzer which has the filter in it so the
> items are not found due to the token being 56TXT due to the filter.

The specified analyzer if not used for wildcard, fuzzy, and prefix queries. 

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 19:15:40 2005
Return-Path: <java-user-return-15685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78570 invoked from network); 2 Aug 2005 19:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 19:15:38 -0000
Received: (qmail 99161 invoked by uid 500); 2 Aug 2005 19:15:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99133 invoked by uid 500); 2 Aug 2005 19:15:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99113 invoked by uid 99); 2 Aug 2005 19:15:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 12:15:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 12:15:19 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Question on Wildcard
Date: Tue, 2 Aug 2005 15:15:26 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D131038B23AF@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question on Wildcard
Thread-Index: AcWXg7S19+yYydCvSE+35rMRn8TEOQAEkYpA
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel,
Thanks for the response.  I sure hope there is an easy way around this..

1) How can you get the wildcard (* at beginning or the end) to use a
specialized filter? (i.e. Punctuation filter, or synonym filter, Or
stemmer?)=20

Thanks all,
Tom

-----Original Message-----
From: Daniel Naber [mailto:lucenelist@danielnaber.de]=20
Sent: Tuesday, August 02, 2005 1:00 PM
To: java-user@lucene.apache.org
Subject: Re: Question on Wildcard

On Monday 01 August 2005 22:22, Aigner, Thomas wrote:

> The filter does not seem to be called when I search for 56-TXT* even
> though I use my extended analyzer which has the filter in it so the
> items are not found due to the token being 56TXT due to the filter.

The specified analyzer if not used for wildcard, fuzzy, and prefix
queries.=20

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 20:01:37 2005
Return-Path: <java-user-return-15686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8993 invoked from network); 2 Aug 2005 20:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 20:01:37 -0000
Received: (qmail 38921 invoked by uid 500); 2 Aug 2005 20:01:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38898 invoked by uid 500); 2 Aug 2005 20:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38884 invoked by uid 99); 2 Aug 2005 20:01:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 13:01:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 13:01:18 -0700
Received: (qmail 26448 invoked from network); 2 Aug 2005 20:01:24 -0000
Received: from unknown (HELO p5496ECC4.dip.t-dialin.net) ([pbs]695637@[84.150.236.196])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 2 Aug 2005 20:01:24 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Question on Wildcard
Date: Tue, 2 Aug 2005 22:01:42 +0200
User-Agent: KMail/1.8
References: <14FBF41EF1411B45B2EC4ADEAC53D131038B23AF@MAIL01.wescodist.com>
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D131038B23AF@MAIL01.wescodist.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200508022201.42402@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 02 August 2005 21:15, Aigner, Thomas wrote:

> Daniel,
> Thanks for the response. =C2=A0I sure hope there is an easy way around th=
is..

Depends on what "easy" means to you :-) I think you'd have to write your=20
own query parser that extends QueryParser and overwrite getWildcardQuery()=
=20
etc. On the other hand if you patch QueryParser to optionally use the=20
analyzer on these queries, too, I'd happily test and commit that patch.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 20:05:50 2005
Return-Path: <java-user-return-15687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10938 invoked from network); 2 Aug 2005 20:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 20:05:49 -0000
Received: (qmail 46816 invoked by uid 500); 2 Aug 2005 20:05:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46797 invoked by uid 500); 2 Aug 2005 20:05:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46784 invoked by uid 99); 2 Aug 2005 20:05:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 13:05:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gopi.subramani@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO zproxy.gmail.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 13:05:33 -0700
Received: by zproxy.gmail.com with SMTP id x7so1065915nzc
        for <java-user@lucene.apache.org>; Tue, 02 Aug 2005 13:05:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=re30D4LYvx/3uBkwTHAV/+KuOGee8kguYzxfFeqWk7T1vVJsXZvJwWhJuiykrWvpPHDsUd183TuD8RaE41ROisPs+M+UIPV+YJ2d9D8z1WaWVt/v0oNn04ma3yH3lR/8qFwrnhAbSD23AopbCweX2XjLcck/GYrNifBPFhda29w=
Received: by 10.36.177.1 with SMTP id z1mr6294102nze;
        Tue, 02 Aug 2005 13:05:40 -0700 (PDT)
Received: by 10.36.68.5 with HTTP; Tue, 2 Aug 2005 13:05:40 -0700 (PDT)
Message-ID: <7337772205080213051da17598@mail.gmail.com>
Date: Wed, 3 Aug 2005 01:35:40 +0530
From: Gopikrishnan Subramani <gopi.subramani@gmail.com>
Reply-To: Gopikrishnan Subramani <gopi.subramani@gmail.com>
To: java-user@lucene.apache.org
Subject: IO bandwidth throttling
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Is there a way I can control the IO bandwidth utilized by Lucene?=20

Here is my scenario. RAMDirectory is used to build a in-memory index
and finally the index size approaches a limit, the contents are
flushed to a FSDirectory. The index size could be approximately 512
MB. I'm a bit concerned that this might affect other NFS clients of
the same NFS server, even if it's for a short period. To avoid this I
would like to implement some sort of limit on the amount of data
transferred to the filesystem akin to the --bwlimit with the rsync
command.

Thanks,
Gopi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 20:08:56 2005
Return-Path: <java-user-return-15688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11494 invoked from network); 2 Aug 2005 20:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 20:08:55 -0000
Received: (qmail 49596 invoked by uid 500); 2 Aug 2005 20:08:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49570 invoked by uid 500); 2 Aug 2005 20:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49557 invoked by uid 99); 2 Aug 2005 20:08:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 13:08:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.35] (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Aug 2005 13:08:40 -0700
Received: (qmail 28386 invoked by uid 60001); 2 Aug 2005 20:08:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ytHHGqof3UGjPNGhScFDE6jn0xQeHLIRvbvqIK4/C+GjSDX226i0d4uhWYxT2SZ39TMNvaWca1IdJWoVlcYZGFK2mczUuiAnEM+6jmlvmFIQGaU6pNz3CfLAObHoliUYlFgCsyKP4JzLD8tyn1P7FDOjy94YGf3BvQ/uG3oTJkQ=  ;
Message-ID: <20050802200847.28384.qmail@web31102.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31102.mail.mud.yahoo.com via HTTP; Tue, 02 Aug 2005 13:08:47 PDT
Date: Tue, 2 Aug 2005 13:08:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IO bandwidth throttling
To: java-user@lucene.apache.org
In-Reply-To: <7337772205080213051da17598@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

While not exactly what you are describing, you can use one of the
IndexWriter parameters (maxBufferedDocs) to control the size of the
RAMDirectory that's used as a buffer during indexing.

Otis

--- Gopikrishnan Subramani <gopi.subramani@gmail.com> wrote:

> Hello,
> 
> Is there a way I can control the IO bandwidth utilized by Lucene? 
> 
> Here is my scenario. RAMDirectory is used to build a in-memory index
> and finally the index size approaches a limit, the contents are
> flushed to a FSDirectory. The index size could be approximately 512
> MB. I'm a bit concerned that this might affect other NFS clients of
> the same NFS server, even if it's for a short period. To avoid this I
> would like to implement some sort of limit on the amount of data
> transferred to the filesystem akin to the --bwlimit with the rsync
> command.
> 
> Thanks,
> Gopi
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 20:27:46 2005
Return-Path: <java-user-return-15689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18465 invoked from network); 2 Aug 2005 20:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 20:27:45 -0000
Received: (qmail 83952 invoked by uid 500); 2 Aug 2005 20:27:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83926 invoked by uid 500); 2 Aug 2005 20:27:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83913 invoked by uid 99); 2 Aug 2005 20:27:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 13:27:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gopi.subramani@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 13:27:28 -0700
Received: by zproxy.gmail.com with SMTP id n29so1028081nzf
        for <java-user@lucene.apache.org>; Tue, 02 Aug 2005 13:27:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ue0UlZKloc9pJBu1Um/E1xO2ETfuSPdIH+IDLPGV+J8Y4esP4ZXnWh6DA+pzxyIFrci94oASCXFl6aRUF2AWS2eCknUHoHdNPyPQbWLJMTBQMkyXnws0ZhJKLUUz9VbqY7sqbmOp89kFaBV5by6XflCJR0Fhuw1X2NY6C4RC+MY=
Received: by 10.36.79.6 with SMTP id c6mr3494039nzb;
        Tue, 02 Aug 2005 13:27:35 -0700 (PDT)
Received: by 10.36.68.5 with HTTP; Tue, 2 Aug 2005 13:27:35 -0700 (PDT)
Message-ID: <7337772205080213276529c42b@mail.gmail.com>
Date: Wed, 3 Aug 2005 01:57:35 +0530
From: Gopikrishnan Subramani <gopi.subramani@gmail.com>
Reply-To: Gopikrishnan Subramani <gopi.subramani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IO bandwidth throttling
In-Reply-To: <20050802200847.28384.qmail@web31102.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7337772205080213051da17598@mail.gmail.com>
	 <20050802200847.28384.qmail@web31102.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok, let me rephrase the question. Assuming the RAMDirectory holds
approximately 500 MB of data which needs to be written to the
filesystem, I'm afraid that sending this much data in one shot might
choke the NFS. Is there a parameter with FSDirectory with which I can
instruct Lucene to restrict the amount of data my application writes
to the filesystem per second.

BTW, I could see maxMergeDocs, but not maxBufferedDocs with the
IndexWriter. Otis, is there really some parameter with that name? I
think maxMergeDocs may not work well here because the size of the
documents are pretty random, ranging from few hundred bytes to tens of
megabytes.

Thanks,
Gopi

On 8/3/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> While not exactly what you are describing, you can use one of the
> IndexWriter parameters (maxBufferedDocs) to control the size of the
> RAMDirectory that's used as a buffer during indexing.
>=20
> Otis
>=20
> --- Gopikrishnan Subramani <gopi.subramani@gmail.com> wrote:
>=20
> > Hello,
> >
> > Is there a way I can control the IO bandwidth utilized by Lucene?
> >
> > Here is my scenario. RAMDirectory is used to build a in-memory index
> > and finally the index size approaches a limit, the contents are
> > flushed to a FSDirectory. The index size could be approximately 512
> > MB. I'm a bit concerned that this might affect other NFS clients of
> > the same NFS server, even if it's for a short period. To avoid this I
> > would like to implement some sort of limit on the amount of data
> > transferred to the filesystem akin to the --bwlimit with the rsync
> > command.
> >
> > Thanks,
> > Gopi
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 21:55:13 2005
Return-Path: <java-user-return-15690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45122 invoked from network); 2 Aug 2005 21:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 21:55:13 -0000
Received: (qmail 1650 invoked by uid 500); 2 Aug 2005 21:55:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1520 invoked by uid 500); 2 Aug 2005 21:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1503 invoked by uid 99); 2 Aug 2005 21:55:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 14:55:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.37] (HELO web31104.mail.mud.yahoo.com) (68.142.200.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Aug 2005 14:54:56 -0700
Received: (qmail 28731 invoked by uid 60001); 2 Aug 2005 21:55:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2ambmMY68opwB5DYWSYjHlqMe+DUZg8r9cmJ/GHZCFBaSe/aimC4MXiNi+7YeIH86cw8w/XCSCYg1xGpgqYww2JeIbwG7euA5+a8IPBQR+QmM/qTtAfSHUPlj/emogYKOe2bnjChuxI3UV3v6gtELTxX534m1M78ncdSS9wzQjY=  ;
Message-ID: <20050802215503.28729.qmail@web31104.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31104.mail.mud.yahoo.com via HTTP; Tue, 02 Aug 2005 14:55:02 PDT
Date: Tue, 2 Aug 2005 14:55:02 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IO bandwidth throttling
To: java-user@lucene.apache.org
In-Reply-To: <7337772205080213276529c42b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> Ok, let me rephrase the question. Assuming the RAMDirectory holds
> approximately 500 MB of data which needs to be written to the
> filesystem, I'm afraid that sending this much data in one shot might
> choke the NFS. Is there a parameter with FSDirectory with which I can
> instruct Lucene to restrict the amount of data my application writes
> to the filesystem per second.

There is no support for that, but if you add it, this may be a nice
enhancement.

> BTW, I could see maxMergeDocs, but not maxBufferedDocs with the
> IndexWriter. Otis, is there really some parameter with that name? I
> think maxMergeDocs may not work well here because the size of the
> documents are pretty random, ranging from few hundred bytes to tens
> of megabytes.

That's the one.   You are looking at 1.4.3, and I was referring to the
new name of that parameter from 1.9-dev1.

Otis

> On 8/3/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > While not exactly what you are describing, you can use one of the
> > IndexWriter parameters (maxBufferedDocs) to control the size of the
> > RAMDirectory that's used as a buffer during indexing.
> > 
> > Otis
> > 
> > --- Gopikrishnan Subramani <gopi.subramani@gmail.com> wrote:
> > 
> > > Hello,
> > >
> > > Is there a way I can control the IO bandwidth utilized by Lucene?
> > >
> > > Here is my scenario. RAMDirectory is used to build a in-memory
> index
> > > and finally the index size approaches a limit, the contents are
> > > flushed to a FSDirectory. The index size could be approximately
> 512
> > > MB. I'm a bit concerned that this might affect other NFS clients
> of
> > > the same NFS server, even if it's for a short period. To avoid
> this I
> > > would like to implement some sort of limit on the amount of data
> > > transferred to the filesystem akin to the --bwlimit with the
> rsync
> > > command.
> > >
> > > Thanks,
> > > Gopi
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 22:19:45 2005
Return-Path: <java-user-return-15691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51197 invoked from network); 2 Aug 2005 22:19:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 22:19:45 -0000
Received: (qmail 23589 invoked by uid 500); 2 Aug 2005 22:19:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23564 invoked by uid 500); 2 Aug 2005 22:19:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23550 invoked by uid 99); 2 Aug 2005 22:19:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 15:19:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 64.233.170.196 as permitted sender)
Received: from [64.233.170.196] (HELO rproxy.gmail.com) (64.233.170.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 15:19:30 -0700
Received: by rproxy.gmail.com with SMTP id c51so1627265rne
        for <java-user@lucene.apache.org>; Tue, 02 Aug 2005 15:19:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mibk+UJJz5VX1lAw1UtS8Su/tOGXgj5IuP3FarrNy76aqM+6Bd+d9O+7bsiHmjqarwmkV5GKFochWyzS+ixbm/OLvOk/bpo702tIlpES7GFgF2C/0IqgzV/7c0hhFk+CGwoFf/9ewTFGY/zWEjkcWA5jATiY2gP1d00dVm3VEHQ=
Received: by 10.38.104.16 with SMTP id b16mr13590rnc;
        Tue, 02 Aug 2005 15:19:37 -0700 (PDT)
Received: by 10.38.104.23 with HTTP; Tue, 2 Aug 2005 15:19:37 -0700 (PDT)
Message-ID: <88c6a6720508021519467aebb4@mail.gmail.com>
Date: Tue, 2 Aug 2005 17:19:37 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IO bandwidth throttling
In-Reply-To: <20050802215503.28729.qmail@web31104.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7337772205080213276529c42b@mail.gmail.com>
	 <20050802215503.28729.qmail@web31104.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've wanted something similar, for the same purpose -- to keep lucene
from consuming disk I/O resources when another process is running on
the same machine.

A general solution might be to define a simple interface such as

interface IndexInputOutputListener {
    void willReadBytes(int numberOfBytes);
    void willWriteBytes(int numberOfBytes);
}

If non-null, then Lucene can call these methods just before it calls
IndexInput.readBytes() or IndexOutput.writeBytes()   (referring to the
Lucene 1.9 API).  People could implement these methods to do whatever
they want, including throttling I/O, or just keeping I/O profiling
statistics.

Also the above interface could be split into two, an
IndexInputListener and IndexOutputListener, if people are likely to
use one and not the other.

In the meantime, you may be able to do what you want by extending or
decorating FSDirectory, and do the throttling just before or after
calling the real FSDirectory's read/write methods (in FSIndexOutput
and FSIndexInput inner classes).

-chris

On 8/2/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi,
>=20
> > Ok, let me rephrase the question. Assuming the RAMDirectory holds
> > approximately 500 MB of data which needs to be written to the
> > filesystem, I'm afraid that sending this much data in one shot might
> > choke the NFS. Is there a parameter with FSDirectory with which I can
> > instruct Lucene to restrict the amount of data my application writes
> > to the filesystem per second.
>=20
> There is no support for that, but if you add it, this may be a nice
> enhancement.
>=20
> > BTW, I could see maxMergeDocs, but not maxBufferedDocs with the
> > IndexWriter. Otis, is there really some parameter with that name? I
> > think maxMergeDocs may not work well here because the size of the
> > documents are pretty random, ranging from few hundred bytes to tens
> > of megabytes.
>=20
> That's the one.   You are looking at 1.4.3, and I was referring to the
> new name of that parameter from 1.9-dev1.
>=20
> Otis
>=20
> > On 8/3/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > > While not exactly what you are describing, you can use one of the
> > > IndexWriter parameters (maxBufferedDocs) to control the size of the
> > > RAMDirectory that's used as a buffer during indexing.
> > >
> > > Otis
> > >
> > > --- Gopikrishnan Subramani <gopi.subramani@gmail.com> wrote:
> > >
> > > > Hello,
> > > >
> > > > Is there a way I can control the IO bandwidth utilized by Lucene?
> > > >
> > > > Here is my scenario. RAMDirectory is used to build a in-memory
> > index
> > > > and finally the index size approaches a limit, the contents are
> > > > flushed to a FSDirectory. The index size could be approximately
> > 512
> > > > MB. I'm a bit concerned that this might affect other NFS clients
> > of
> > > > the same NFS server, even if it's for a short period. To avoid
> > this I
> > > > would like to implement some sort of limit on the amount of data
> > > > transferred to the filesystem akin to the --bwlimit with the
> > rsync
> > > > command.
> > > >
> > > > Thanks,
> > > > Gopi
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 02 22:25:58 2005
Return-Path: <java-user-return-15692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52731 invoked from network); 2 Aug 2005 22:25:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Aug 2005 22:25:58 -0000
Received: (qmail 29934 invoked by uid 500); 2 Aug 2005 22:25:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29913 invoked by uid 500); 2 Aug 2005 22:25:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29900 invoked by uid 99); 2 Aug 2005 22:25:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 15:25:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.7.7.100] (HELO mail.monsur.com) (64.7.7.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Aug 2005 15:25:41 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.05) id A2B52BF0152; Tue, 02 Aug 2005 18:24:53 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: Hardware Question
Date: Tue, 2 Aug 2005 18:25:44 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcWS/KGR2Dzx2PCyQleq4bLApsdoiAEtCqFA
In-Reply-To: <20050727224439.78520.qmail@web31104.mail.mud.yahoo.com>
Message-Id: <200508021824467.SM01832@chicago>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I'm a little late to this thread.  But is there any performance difference
between the compound index format and the multifile index format when
*searching*?  The Lucene book mentions a performance difference when
*indexing*, but not when searching.

Monsur

 

> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Wednesday, July 27, 2005 6:45 PM
> To: java-user@lucene.apache.org
> Subject: RE: Hardware Question
> 
> Ah - my brain was off. :)
> In the Lucene book we refer to that index format as "compound index
> format", while the original format we call "multifile index format"
> 
>   http://www.lucenebook.com/search?query=compound+index
>   http://www.lucenebook.com/search?query=multifile+index
> 
> Yes, the latter will give you a bit more juice.
> 
> Otis
> 
> 
> --- Mark Bennett <mbennett@ideaeng.com> wrote:
> 
> > My apologies Otis, I should have spelled that out.
> > 
> > I'm going to take a stab at answering this.  But please, others on
> > the list,
> > chime in with corrections / clarifications.
> > 
> > CFS = "compact file system" or "consolidate file system" or 
> something
> > like
> > that.
> > 
> > Essentially, each Lucene index segment is actually a set of files;
> > files for
> > a segment have a common file name and then a set of extensions; OR a
> > segment
> > is just stored as ONE file, with a .cfs extension.
> > 
> > CFS means that the multiple files for that segment have been joined
> > together
> > into one physical file; inside there is actually the original set of
> > logical
> > files, but on your disk it's just one file and one set of file
> > handles to
> > open that segmgent.
> > 
> > If you do a DIR / ls on your indexes, if you see a bunch of .cfs
> > files, then
> > you're using CFS.  The default for the past version or so 
> is that you
> > DO get
> > CFS files unless you say otherwise.
> > 
> > I think the idea is that, generally, having fewer physical files is
> > better,
> > in terms of file handles, etc.  But for search performance, I'm not
> > sure if
> > that's always the best case; certainly for indexing it takes more
> > work to
> > create CFS files.
> > 
> > 
> > -----Original Message-----
> > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> > Sent: Wednesday, July 27, 2005 3:20 PM
> > To: java-user@lucene.apache.org; mbennett@ideaeng.com
> > Subject: RE: Hardware Question
> > 
> > What's CFS?  Cryptographic File System?  I'm not being sarcastic
> > here,
> > I'm really curious about what you referring to.
> > 
> > Otis
> > 
> > --- Mark Bennett <mbennett@ideaeng.com> wrote:
> > 
> > > Also, non-hardware, have you considered turning off CFS?
> > > 
> > > Our client told us this sped up their system.
> > > 
> > > -----Original Message-----
> > > From: Chris Lamprecht [mailto:clamprecht@gmail.com] 
> > > Sent: Wednesday, July 27, 2005 11:52 AM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Hardware Question
> > > 
> > > It depends on your usage.   When you search, does your code also
> > > retrieve the docs (using Searcher.document(n), for instance).  If
> > > your
> > > index is 8GB, part of that is the "indexed" part (searchable), and
> > > part is just "stored" document fields.
> > > 
> > > It may be as simple as adding more RAM (try 4, 6, and 8GB) -- but
> > not
> > > for your java heap -- instead for the linux filesystem cache.
> > > 
> > > I suggest first adding some simple timing output to your search. 
> > You
> > > want to see how much time you are spending in the call to 
> search(),
> > > and then how much time you're spending pulling the Documents from
> > the
> > > index (and how much time you're spending in other parts of your
> > > search
> > > application).   The call to search() is typically CPU-intensive,
> > > while
> > > pulling Documents is I/O-bound.  And RAM is about 5 or 6 orders of
> > > magnitude faster than disk I/O.
> > > 
> > > -chris
> > > 
> > > On 7/27/05, Michael Celona <mcelona@criticalmention.com> wrote:
> > > > I am going over ways to increase overall search performance.
> > > > 
> > > > 
> > > > 
> > > > Currently, I have a dual zeon with 2G of ram dedicated to java
> > > searching
> > > an
> > > > 8G index on one 7200 rpm drive.
> > > > 
> > > > 
> > > > 
> > > > Which will give the greatest payoff?
> > > > 
> > > > 
> > > > 
> > > > 1)       Going to 64bit server and giving more memory to java
> > with
> > > faster
> > > > drives
> > > > 
> > > > 
> > > > 
> > > > Or
> > > > 
> > > > 
> > > > 
> > > > 2)       Staying with 32bit server but going with faster drives
> > and
> > > > splitting the operating system from the index drive.
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > Basically, what are the performance improvements from separating
> > > the
> > > > operation system form the index drive(s).
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > Thanks,
> > > > 
> > > > Michael
> > > > 
> > > > 
> > > > 
> > > > 
> > > >
> > > 
> > >
> > 
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > > 
> > > 
> > >
> > 
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > > 
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 07:14:45 2005
Return-Path: <java-user-return-15693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8647 invoked from network); 3 Aug 2005 07:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 07:14:45 -0000
Received: (qmail 29139 invoked by uid 500); 3 Aug 2005 07:14:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29106 invoked by uid 500); 3 Aug 2005 07:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29092 invoked by uid 99); 3 Aug 2005 07:14:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 00:14:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 00:14:27 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 134F6159F80
	for <java-user@lucene.apache.org>; Wed,  3 Aug 2005 17:14:30 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id EE17B64007
	for <java-user@lucene.apache.org>; Wed,  3 Aug 2005 17:14:29 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 01388-01-4 for <java-user@lucene.apache.org>;
 Wed,  3 Aug 2005 17:14:28 +1000 (EST)
Received: from pc004 (unknown [192.168.0.12])
	by herald.aconex.com (Postfix) with SMTP id 1D08464002
	for <java-user@lucene.apache.org>; Wed,  3 Aug 2005 03:14:28 -0400 (EDT)
From: "Indu Abeyaratna" <iabeyaratna@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: IO bandwidth throttling
Date: Wed, 3 Aug 2005 17:14:28 +1000
Message-ID: <CBECJKOBLBEIELOPAOGPGEJGCGAA.iabeyaratna@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
In-Reply-To: <88c6a6720508021519467aebb4@mail.gmail.com>
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I dont know whether this is helpful to you.
Our application is base on entity "project". Say we have 10 projects, then
we create 10 indexers.  Then we use Jboss cache to load those indexes as
when needed.

Jboss cache has functionality to limit the size of memory usage.

Base points is breaking the index into multiple indexes, and load them as
when needed, that way you dont need to have full index in the memory at a
given time.

Indu

-----Original Message-----
From: Chris Lamprecht [mailto:clamprecht@gmail.com]
Sent: Wednesday, 3 August 2005 8:20 AM
To: java-user@lucene.apache.org
Subject: Re: IO bandwidth throttling


I've wanted something similar, for the same purpose -- to keep lucene
from consuming disk I/O resources when another process is running on
the same machine.

A general solution might be to define a simple interface such as

interface IndexInputOutputListener {
    void willReadBytes(int numberOfBytes);
    void willWriteBytes(int numberOfBytes);
}

If non-null, then Lucene can call these methods just before it calls
IndexInput.readBytes() or IndexOutput.writeBytes()   (referring to the
Lucene 1.9 API).  People could implement these methods to do whatever
they want, including throttling I/O, or just keeping I/O profiling
statistics.

Also the above interface could be split into two, an
IndexInputListener and IndexOutputListener, if people are likely to
use one and not the other.

In the meantime, you may be able to do what you want by extending or
decorating FSDirectory, and do the throttling just before or after
calling the real FSDirectory's read/write methods (in FSIndexOutput
and FSIndexInput inner classes).

-chris

On 8/2/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi,
>
> > Ok, let me rephrase the question. Assuming the RAMDirectory holds
> > approximately 500 MB of data which needs to be written to the
> > filesystem, I'm afraid that sending this much data in one shot might
> > choke the NFS. Is there a parameter with FSDirectory with which I can
> > instruct Lucene to restrict the amount of data my application writes
> > to the filesystem per second.
>
> There is no support for that, but if you add it, this may be a nice
> enhancement.
>
> > BTW, I could see maxMergeDocs, but not maxBufferedDocs with the
> > IndexWriter. Otis, is there really some parameter with that name? I
> > think maxMergeDocs may not work well here because the size of the
> > documents are pretty random, ranging from few hundred bytes to tens
> > of megabytes.
>
> That's the one.   You are looking at 1.4.3, and I was referring to the
> new name of that parameter from 1.9-dev1.
>
> Otis
>
> > On 8/3/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > > While not exactly what you are describing, you can use one of the
> > > IndexWriter parameters (maxBufferedDocs) to control the size of the
> > > RAMDirectory that's used as a buffer during indexing.
> > >
> > > Otis
> > >
> > > --- Gopikrishnan Subramani <gopi.subramani@gmail.com> wrote:
> > >
> > > > Hello,
> > > >
> > > > Is there a way I can control the IO bandwidth utilized by Lucene?
> > > >
> > > > Here is my scenario. RAMDirectory is used to build a in-memory
> > index
> > > > and finally the index size approaches a limit, the contents are
> > > > flushed to a FSDirectory. The index size could be approximately
> > 512
> > > > MB. I'm a bit concerned that this might affect other NFS clients
> > of
> > > > the same NFS server, even if it's for a short period. To avoid
> > this I
> > > > would like to implement some sort of limit on the amount of data
> > > > transferred to the filesystem akin to the --bwlimit with the
> > rsync
> > > > command.
> > > >
> > > > Thanks,
> > > > Gopi
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 09:26:24 2005
Return-Path: <java-user-return-15694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55437 invoked from network); 3 Aug 2005 09:26:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 09:26:24 -0000
Received: (qmail 62874 invoked by uid 500); 3 Aug 2005 09:26:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62855 invoked by uid 500); 3 Aug 2005 09:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62838 invoked by uid 99); 3 Aug 2005 09:26:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 02:26:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jp.seng@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Aug 2005 02:26:06 -0700
Received: (qmail 30881 invoked by uid 0); 3 Aug 2005 09:26:12 -0000
Received: from 80.87.168.98 by www35.gmx.net with HTTP;
	Wed, 3 Aug 2005 11:26:12 +0200 (MEST)
Date: Wed, 3 Aug 2005 11:26:12 +0200 (MEST)
From: "Jan Philipp Seng" <jp.seng@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <Pine.LNX.4.58.0508020916040.29130@hal.rescomp.berkeley.edu>
Subject: =?ISO-8859-1?Q?Re:_how_to_free_memory_after_index_ist_build.?=
X-Priority: 3 (Normal)
X-Authenticated: #21695757
Message-ID: <28622.1123061172@www35.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> : 2) I don't see the code to close your statement, connection, and
> : ResultSet.  Those typically go to a finally block.
> 
> I'm 85% sure that's the memory leak right there... in absence of a
> good memory profiler, have you tried commenting out all of the Lucene
> related code, to make sure that your basic DB Data retrieval code doesn't
> leak memory?
> 
> i'm guessing that without the Lucene code, it won't run out of RAM as fast
> (because their won't be a RAMDirectory index taking up space) but you
> should still see your free memory steadily decrease.

Thank you Hoos,

I left some of my code out to make it compact. There is a finally-block that
does rigth this.
But you are completely rigth. I commented out all Lucene related code and
the free memory decreases every indexing run. I close the connection, but
this does not free the memory. Do you have another hint for me what I can do
against the memory leak in the connector to the mySQL-database? I am using
mysql-connector-java-3.1.10-bin.jar.

Constructor: inits the members:
	Connection conn
  Statement stmt
  ResultSet rs
finally block:
	conn.close();
	conn = null;
  stmt.close();
  stmt = null;
  rs.close();
  rs = null;

Bye for now.

Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 09:39:59 2005
Return-Path: <java-user-return-15695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61431 invoked from network); 3 Aug 2005 09:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 09:39:59 -0000
Received: (qmail 80360 invoked by uid 500); 3 Aug 2005 09:39:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80337 invoked by uid 500); 3 Aug 2005 09:39:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80324 invoked by uid 99); 3 Aug 2005 09:39:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 02:39:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jp.seng@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Aug 2005 02:39:40 -0700
Received: (qmail 7346 invoked by uid 0); 3 Aug 2005 09:39:47 -0000
Received: from 80.87.168.98 by www35.gmx.net with HTTP;
	Wed, 3 Aug 2005 11:39:47 +0200 (MEST)
Date: Wed, 3 Aug 2005 11:39:47 +0200 (MEST)
From: "Jan Philipp Seng" <jp.seng@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <20050802154601.90210.qmail@web31113.mail.mud.yahoo.com>
Subject: =?ISO-8859-1?Q?Re:_how_to_free_memory_after_index_ist_build.?=
X-Priority: 3 (Normal)
X-Authenticated: #21695757
Message-ID: <13308.1123061987@www35.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Otis,

thank you for you tips so far. I will use a profiles for finding out,
where the problem is. All your hints were helpful for me. I think the
problem is the connection to mySQL, not the indexer. So I will look
for newsgroup on the connector mysql-connector-java-3.1.10-bin.jar.
Or do you have any experience with memory leaks with this connector
and how to avoid them ?

Bye bye,

Jan

> However, i see a few problems in your code.
> 1) you should take the JDBC code for getting the connection and
> creation of an SQL statement out of that method, so it is not called
> repeteadly - you can reuse the same connection!
> 
> 2) I don't see the code to close your statement, connection, and
> ResultSet.  Those typically go to a finally block.

I have a finalize method, that release mySQL-resources in reverse-order 
of their creation, but I left this out for campacting my problem.

> 
> 3) mergeFactor looks suspiciously high.
I have measured the speed of indexing with different values for 
mergefactor. 
  writer.mergeFactor = 250;
  writer.minMergeDocs = 250;
produces highest speed for me. I have enough memory for doing this. 
But I need to reuse this memory on the next index run ;-)

> 
> 4) You opening IndexWriter, optimizing the index and closing it a lot. 
> Do you really need to optimize it that often?
I do this once a day. I dont want to leave the connection open for
about 23:45 hours (indexing takes only 15 mins for 150000 docs). 
Do you think it is a problem to load the driver over and over again ?

conn = DriverManager.getConnection("jdbc:mysql://" ...");


> 
> The gc() call you are making is just a suggestion for the JVM - "now
> may be a good time to consider running GC".  The JVM may ignore this
> suggestion.
> 
> Here is a handy method:
> 
>     private static long gc()
>     {
>         long freeMemBefore = Runtime.getRuntime().freeMemory();
>         System.out.println("Free Memory Before: " + freeMemBefore);
>         System.gc();
>         try {
>             Thread.sleep(1000);
>             System.runFinalization();
>             Thread.sleep(1000);
>         } catch (InterruptedException e) {
>             e.printStackTrace();
>         }
>         System.gc();
>         long freeMemAfter = Runtime.getRuntime().freeMemory();
>         System.out.println("Total Memory      : " +
> Runtime.getRuntime().totalMemory());
>         System.out.println("Max Memory        : " +
> Runtime.getRuntime().maxMemory());
>         System.out.println("Free Memory After : " + freeMemAfter);
>         return freeMemBefore-freeMemAfter;
>     }
> 
> 
> Otis
> 
> 
> --- Jan Philipp Seng <jp.seng@gmx.de> wrote:
> 
> > I am using the Lucene 1.4.3 API. After building the index over 150000
> > documents (~250 MB data), Lucene does not free the memory that is
> > used
> > during indexing. The searcher runs as a servlet under Tomcat. Every
> > time the
> > index is build new, the indexing process takes free memory, so after
> > ten
> > runs the memory is completly full. I tried to call the garbage
> > collector
> > explicitly, but that does not help.
> > I build the index to harddisc and load it into a RAMDirectory after
> > building. There is no reference to my indexer left after indexing and
> > I
> > cannot find a reason why the garbage collector does not free the
> > memory.
> > Here are some important points of my code reduced to the central
> > functionality. Do you have any ideas, what kind of problem this could
> > be ?
> > An answer would help me a lot.
> > 
> > 
> > IndexTablesDaemon start the indexing process:
> > IndexTablesDaemon.run():
> > -----------------------------
> > while (true) {
> >   IndexTables indexer = new IndexTables();
> >   indexer.indexTables(); // indexing if necessary, writing the new
> > index to
> > harddisc
> >   indexer = null;        // for freeing the memory, does not help
> >   FTS.initNewIndex();    // switching the old with the new index
> >   Runtime.getRuntime().gc();   // calling the garbage collector. Does
> > not
> > help.
> >   Thread.sleep(lWait);         // waiting a fix space of time
> > } 
> > 
> > 		
> > 		
> > Building the index: sending queries to a mySQLDatabase, 
> > 										buidling a Lucene-document with the mySQL-data und indexing
> > it:
> > IndexTables.indexTables():
> > --------------------------
> >   IndexWriter writer = new IndexWriter(PATHNAME_INDEX_NEW), 
> >     new TTAnalyser(), true);		
> > 
> >   writer.mergeFactor = 250;
> >   writer.minMergeDocs = 250;
> >  
> >   Document doc = null;
> > 
> >   String sQuery = "SELECT columns FROM table";
> > 
> >   Connection conn = DriverManager.getConnection("jdbc:mysql: ...");
> >   Statement stmt = conn.createStatement()
> >   ResultSet	rs = stmt.executeQuery(sQuery);
> > 
> >   while (m_rs.next()) {
> >     doc = getTTDocument();
> >     // fill doc with fields from the database query
> >     writer.addDocument(doc);
> >   }
> > 
> >   writer.optimize();
> >   writer.close();
> >   writer = null;              // for freeing memory. Does not help
> > 
> >   Runtime.getRuntime().gc();  // explicitely running the garbage
> > collector.
> > Does not help
> > }
> > 	
> > 	
> > 		
> > Exchanging the old an the new index for queries to the Lucene-index.
> > FTS.initNewIndex():
> > -------------------
> >   File oldIndex = new File(sPathIndex);
> >   File newIndex = new File(sPathIndexNew);
> >  
> >   // deleting all files in the old index from harddisc
> >   // let the new index become the operating index
> >   oldIndex.delete();
> >   newIndex.renameTo(oldIndex);
> >  
> >   // load the new index to RAMDirectory from harddisc
> >   SearchTables.reloadIndex();		
> > 				
> > 			
> > Thanks for your help,
> > 
> > Jan Philipp Seng, Germany, Aachen
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 11:37:20 2005
Return-Path: <java-user-return-15696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 621 invoked from network); 3 Aug 2005 11:37:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 11:37:20 -0000
Received: (qmail 15673 invoked by uid 500); 3 Aug 2005 11:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15650 invoked by uid 500); 3 Aug 2005 11:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15637 invoked by uid 500); 3 Aug 2005 11:37:13 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 15634 invoked by uid 99); 3 Aug 2005 11:37:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 04:37:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 04:37:03 -0700
Received: from [192.168.128.211] ([192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id j73Bb8lg017212
	for <lucene-user@jakarta.apache.org>; Wed, 3 Aug 2005 14:37:08 +0300
Message-ID: <42F0AC63.10407@sirma.bg>
Date: Wed, 03 Aug 2005 14:37:07 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: hot swapping searchers
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A Hits object holds a reference to a Searcher and uses it to retrieve 
docs not in the cache list.
Is it ok if I modify the Hits object in a way that it may have its 
searcher replaced,
i.e. introduce a:
*setSearcher(Searcher s) { this.searcher = s; }*
method and invoke it (syncronously) between invokations of *doc(n)*


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 13:30:15 2005
Return-Path: <java-user-return-15697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46283 invoked from network); 3 Aug 2005 13:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 13:30:13 -0000
Received: (qmail 75906 invoked by uid 500); 3 Aug 2005 13:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75648 invoked by uid 500); 3 Aug 2005 13:30:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75634 invoked by uid 99); 3 Aug 2005 13:30:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 06:30:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of richard.krenek@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 06:29:55 -0700
Received: by wproxy.gmail.com with SMTP id i32so145927wra
        for <java-user@lucene.apache.org>; Wed, 03 Aug 2005 06:30:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BaBuPNnV/NfI1Qq4ZuNY4TheDPzWQSKbGdNpDIOj1l3HzAu/eVVitE787p46qfyMgtUOk/TKhQruVe/168PzUKz/MGWYSOiPc+MwtShc/ThLvVN5WInw5NRTCGAp9yXm0iHyW8dqkAfVvH9ytF+xaM02XwowqmdAkdwrRhS3OnA=
Received: by 10.54.5.66 with SMTP id 66mr584371wre;
        Wed, 03 Aug 2005 06:30:02 -0700 (PDT)
Received: by 10.54.73.11 with HTTP; Wed, 3 Aug 2005 06:30:02 -0700 (PDT)
Message-ID: <4ef6647e0508030630f0c3924@mail.gmail.com>
Date: Wed, 3 Aug 2005 07:30:02 -0600
From: Richard Krenek <richard.krenek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to free memory after index ist build.
In-Reply-To: <28622.1123061172@www35.gmx.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <Pine.LNX.4.58.0508020916040.29130@hal.rescomp.berkeley.edu>
	 <28622.1123061172@www35.gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Try doing that in reverse order:

rs.close();
rs =3D null;
stmnt.close();
stmnt =3D null;
conn.close();
conn =3D null;

I usual do one more step also, just to be safe.

try {rs.close();} catch (Exception ignore) {}
rs =3D null;
try {stmnt.close();} catch (Exception ignore) {}
stmnt =3D null;
try {conn.close();} catch (Exception ignore) {}
conn =3D null;

On 8/3/05, Jan Philipp Seng <jp.seng@gmx.de> wrote:
> > : 2) I don't see the code to close your statement, connection, and
> > : ResultSet.  Those typically go to a finally block.
> >
> > I'm 85% sure that's the memory leak right there... in absence of a
> > good memory profiler, have you tried commenting out all of the Lucene
> > related code, to make sure that your basic DB Data retrieval code doesn=
't
> > leak memory?
> >
> > i'm guessing that without the Lucene code, it won't run out of RAM as f=
ast
> > (because their won't be a RAMDirectory index taking up space) but you
> > should still see your free memory steadily decrease.
>=20
> Thank you Hoos,
>=20
> I left some of my code out to make it compact. There is a finally-block t=
hat
> does rigth this.
> But you are completely rigth. I commented out all Lucene related code and
> the free memory decreases every indexing run. I close the connection, but
> this does not free the memory. Do you have another hint for me what I can=
 do
> against the memory leak in the connector to the mySQL-database? I am usin=
g
> mysql-connector-java-3.1.10-bin.jar.
>=20
> Constructor: inits the members:
>         Connection conn
>   Statement stmt
>   ResultSet rs
> finally block:
>         conn.close();
>         conn =3D null;
>   stmt.close();
>   stmt =3D null;
>   rs.close();
>   rs =3D null;
>=20
> Bye for now.
>=20
> Jan
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 13:34:33 2005
Return-Path: <java-user-return-15698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48047 invoked from network); 3 Aug 2005 13:34:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 13:34:33 -0000
Received: (qmail 80064 invoked by uid 500); 3 Aug 2005 13:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79848 invoked by uid 500); 3 Aug 2005 13:34:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79835 invoked by uid 99); 3 Aug 2005 13:34:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 06:34:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.125.75.19] (HELO mail14.messagelabs.com) (212.125.75.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Aug 2005 06:34:15 -0700
X-VirusChecked: Checked
X-Env-Sender: SGaunt@emeraldinsight.com
X-Msg-Ref: server-15.tower-14.messagelabs.com!1123076060!64181658!1
X-StarScan-Version: 5.5.6; banners=emeraldinsight.com,-,-
X-Originating-IP: [194.152.90.190]
Received: (qmail 28793 invoked from network); 3 Aug 2005 13:34:20 -0000
Received: from unknown (HELO MCB004.Emerald.Net) (194.152.90.190)
  by server-15.tower-14.messagelabs.com with SMTP; 3 Aug 2005 13:34:20 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: The best way to know when an index has been changed
Date: Wed, 3 Aug 2005 14:34:20 +0100
Message-ID: <C87DEB58860CD54890F6CA2E840DB2F3030CF9B4@MCB004.Emerald.Net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: The best way to know when an index has been changed
Thread-Index: AcWYL3rP1eje11nvSI2EmpTuyNhFRQAAA/kg
From: "Steve Gaunt" <SGaunt@emeraldinsight.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

We=20have=20a=20web=20app,=20which=20keep=20a=20copy=20of=20the=20index=20=
searcher,=20then=20reloads
the=20index=20searcher=20every=20night=20to=20obtain=20the=20latest=20vers=
ion=20of=20the
index(=20as=20it=20updates=20every=20day).=20=20
However,=20we=20have=20a=20fail=20over=20mode,=20which=20will=20eventually=
=20use=20another
index=20on=20another=20server,=20it=20there=20anyway=20to=20know=20if=20th=
e=20underlying=20index
has=20been=20replaced=20with=20another=20index???=20


Cheers=20in=20advance=20

Steve


______________________________________________________________________
This=20email=20has=20been=20scanned=20by=20the=20MessageLabs=20Email=20Sec=
urity=20System.
For=20more=20information=20please=20visit=20http://www.messagelabs.com/ema=
il=20
______________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 13:45:12 2005
Return-Path: <java-user-return-15699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50736 invoked from network); 3 Aug 2005 13:45:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 13:45:12 -0000
Received: (qmail 90684 invoked by uid 500); 3 Aug 2005 13:45:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90663 invoked by uid 500); 3 Aug 2005 13:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90650 invoked by uid 99); 3 Aug 2005 13:45:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 06:45:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.36.83] (HELO smtp105.rog.mail.re2.yahoo.com) (206.190.36.83)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Aug 2005 06:44:55 -0700
Received: (qmail 55993 invoked from network); 3 Aug 2005 13:45:01 -0000
Received: from unknown (HELO wintermute) (lukeshannon@rogers.com@69.195.21.17 with login)
  by smtp105.rog.mail.re2.yahoo.com with SMTP; 3 Aug 2005 13:45:01 -0000
Message-ID: <001901c59831$cec16f10$1115c345@wintermute>
From: "Luke" <luke@lukeshannon.com>
To: <java-user@lucene.apache.org>
References: <C87DEB58860CD54890F6CA2E840DB2F3030CF9B4@MCB004.Emerald.Net>
Subject: Re: The best way to know when an index has been changed
Date: Wed, 3 Aug 2005 09:46:53 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1506
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Steve;

Not sure if this would work...

Each day you could get the value from IndexReader's  getCurrentVersion and
store it somewhere (DB or serialize it). The next day when you grab the
value again you could compare it to the stored one, if they differ you would
know it has been replaced.

Luke

----- Original Message ----- 
From: "Steve Gaunt" <SGaunt@emeraldinsight.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, August 03, 2005 9:34 AM
Subject: The best way to know when an index has been changed


> Hi
>
> We have a web app, which keep a copy of the index searcher, then reloads
> the index searcher every night to obtain the latest version of the
> index( as it updates every day).
> However, we have a fail over mode, which will eventually use another
> index on another server, it there anyway to know if the underlying index
> has been replaced with another index???
>
>
> Cheers in advance
>
> Steve
>
>
> ______________________________________________________________________
> This email has been scanned by the MessageLabs Email Security System.
> For more information please visit http://www.messagelabs.com/email
> ______________________________________________________________________
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 14:09:18 2005
Return-Path: <java-user-return-15700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62440 invoked from network); 3 Aug 2005 14:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 14:09:18 -0000
Received: (qmail 39258 invoked by uid 500); 3 Aug 2005 14:09:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39230 invoked by uid 500); 3 Aug 2005 14:09:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39217 invoked by uid 99); 3 Aug 2005 14:09:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 07:09:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.125.75.19] (HELO mail14.messagelabs.com) (212.125.75.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Aug 2005 07:09:01 -0700
X-VirusChecked: Checked
X-Env-Sender: SGaunt@emeraldinsight.com
X-Msg-Ref: server-11.tower-14.messagelabs.com!1123078145!61090077!1
X-StarScan-Version: 5.5.6; banners=emeraldinsight.com,-,-
X-Originating-IP: [194.152.90.190]
Received: (qmail 26818 invoked from network); 3 Aug 2005 14:09:05 -0000
Received: from unknown (HELO MCB004.Emerald.Net) (194.152.90.190)
  by server-11.tower-14.messagelabs.com with SMTP; 3 Aug 2005 14:09:05 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: The best way to know when an index has been changed
Date: Wed, 3 Aug 2005 15:09:05 +0100
Message-ID: <C87DEB58860CD54890F6CA2E840DB2F3030CFA16@MCB004.Emerald.Net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: The best way to know when an index has been changed
Thread-Index: AcWYMZMogWm4jXTOQieGpCupXt0/kAAAqnEg
From: "Steve Gaunt" <SGaunt@emeraldinsight.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi=20Luke

It's=20a=20good=20idea,=20but=20we=20need=20to=20know=20instantly=20the=20=
fail=20over=20happens.
We=20obtain=20a=20new=20instance=20of=20the=20index=20searcher=20every=20n=
ight=20anyway=20to
obtain=20the=20latest=20index.=20=20When=20the=20fail=20over=20happens,=20=
the=20index=20location
is=20in=20the=20same=20place,=20but=20was=20wandering=20if=20there=20was=20=
a=20way=20to=20find=20out
if=20the=20index=20has=20changed=20without=20the=20database=20hit=20the=20=
first=20search=20hits
lucene=20after=20the=20failover.

Hope=20this=20explains=20the=20scenario=20more=20clearly.

Steve



-----Original=20Message-----
From:=20Luke=20[mailto:luke@lukeshannon.com]=20
Sent:=2003=20August=202005=2014:47
To:=20java-user@lucene.apache.org
Subject:=20Re:=20The=20best=20way=20to=20know=20when=20an=20index=20has=20=
been=20changed

Hi=20Steve;

Not=20sure=20if=20this=20would=20work...

Each=20day=20you=20could=20get=20the=20value=20from=20IndexReader's=20=20g=
etCurrentVersion
and
store=20it=20somewhere=20(DB=20or=20serialize=20it).=20The=20next=20day=20=
when=20you=20grab=20the
value=20again=20you=20could=20compare=20it=20to=20the=20stored=20one,=20if=
=20they=20differ=20you
would
know=20it=20has=20been=20replaced.

Luke

-----=20Original=20Message=20-----=20
From:=20"Steve=20Gaunt"=20<SGaunt@emeraldinsight.com>
To:=20<java-user@lucene.apache.org>
Sent:=20Wednesday,=20August=2003,=202005=209:34=20AM
Subject:=20The=20best=20way=20to=20know=20when=20an=20index=20has=20been=20=
changed


>=20Hi
>
>=20We=20have=20a=20web=20app,=20which=20keep=20a=20copy=20of=20the=20inde=
x=20searcher,=20then
reloads
>=20the=20index=20searcher=20every=20night=20to=20obtain=20the=20latest=20=
version=20of=20the
>=20index(=20as=20it=20updates=20every=20day).
>=20However,=20we=20have=20a=20fail=20over=20mode,=20which=20will=20eventu=
ally=20use=20another
>=20index=20on=20another=20server,=20it=20there=20anyway=20to=20know=20if=20=
the=20underlying
index
>=20has=20been=20replaced=20with=20another=20index???
>
>
>=20Cheers=20in=20advance
>
>=20Steve
>
>
>=20______________________________________________________________________=

>=20This=20email=20has=20been=20scanned=20by=20the=20MessageLabs=20Email=20=
Security=20System.
>=20For=20more=20information=20please=20visit=20http://www.messagelabs.com=
/email
>=20______________________________________________________________________=

>
>=20---------------------------------------------------------------------
>=20To=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org
>=20For=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.=
org
>
>



---------------------------------------------------------------------
To=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org
For=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.org


______________________________________________________________________
This=20email=20has=20been=20scanned=20by=20the=20MessageLabs=20Email=20Sec=
urity=20System.
For=20more=20information=20please=20visit=20http://www.messagelabs.com/ema=
il=20
______________________________________________________________________


______________________________________________________________________
This=20email=20has=20been=20scanned=20by=20the=20MessageLabs=20Email=20Sec=
urity=20System.
For=20more=20information=20please=20visit=20http://www.messagelabs.com/ema=
il=20
______________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 14:39:47 2005
Return-Path: <java-user-return-15701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75218 invoked from network); 3 Aug 2005 14:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 14:39:47 -0000
Received: (qmail 85199 invoked by uid 500); 3 Aug 2005 14:39:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85055 invoked by uid 500); 3 Aug 2005 14:39:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85040 invoked by uid 99); 3 Aug 2005 14:39:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 07:39:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 07:39:23 -0700
Received: from [192.168.128.211] ([192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id j73EdRlg004652
	for <java-user@lucene.apache.org>; Wed, 3 Aug 2005 17:39:27 +0300
Message-ID: <42F0D71D.6040307@sirma.bg>
Date: Wed, 03 Aug 2005 17:39:25 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: The best way to know when an index has been changed
References: <C87DEB58860CD54890F6CA2E840DB2F3030CFA16@MCB004.Emerald.Net>
In-Reply-To: <C87DEB58860CD54890F6CA2E840DB2F3030CFA16@MCB004.Emerald.Net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Steve,

we have a similar situation and we choosed the following solution:
The process that modifies the index (the writer) notifies the process 
that searches the index (the reader)
In our case the notification is a specificly named subdirectory 
"index_modified" of the directory containing the index files.
After each update to the index (or if it turns out to slow down the 
indexing process - make it not not more than once a minute)
the writer process raises the flag by creating the directory if it does 
not exists.
On the other hand the reader removes the directory each time it 
recreates its Searcher.
Does this approach suit your needs?

Regards:
Stanislav

Steve Gaunt wrote:

>Hi Luke
>
>It's a good idea, but we need to know instantly the fail over happens.
>We obtain a new instance of the index searcher every night anyway to
>obtain the latest index.  When the fail over happens, the index location
>is in the same place, but was wandering if there was a way to find out
>if the index has changed without the database hit the first search hits
>lucene after the failover.
>
>Hope this explains the scenario more clearly.
>
>Steve
>
>
>
>-----Original Message-----
>From: Luke [mailto:luke@lukeshannon.com] 
>Sent: 03 August 2005 14:47
>To: java-user@lucene.apache.org
>Subject: Re: The best way to know when an index has been changed
>
>Hi Steve;
>
>Not sure if this would work...
>
>Each day you could get the value from IndexReader's  getCurrentVersion
>and
>store it somewhere (DB or serialize it). The next day when you grab the
>value again you could compare it to the stored one, if they differ you
>would
>know it has been replaced.
>
>Luke
>
>----- Original Message ----- 
>From: "Steve Gaunt" <SGaunt@emeraldinsight.com>
>To: <java-user@lucene.apache.org>
>Sent: Wednesday, August 03, 2005 9:34 AM
>Subject: The best way to know when an index has been changed
>
>
>  
>
>>Hi
>>
>>We have a web app, which keep a copy of the index searcher, then
>>    
>>
>reloads
>  
>
>>the index searcher every night to obtain the latest version of the
>>index( as it updates every day).
>>However, we have a fail over mode, which will eventually use another
>>index on another server, it there anyway to know if the underlying
>>    
>>
>index
>  
>
>>has been replaced with another index???
>>
>>
>>Cheers in advance
>>
>>Steve
>>
>>
>>______________________________________________________________________
>>This email has been scanned by the MessageLabs Email Security System.
>>For more information please visit http://www.messagelabs.com/email
>>______________________________________________________________________
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>______________________________________________________________________
>This email has been scanned by the MessageLabs Email Security System.
>For more information please visit http://www.messagelabs.com/email 
>______________________________________________________________________
>
>
>______________________________________________________________________
>This email has been scanned by the MessageLabs Email Security System.
>For more information please visit http://www.messagelabs.com/email 
>______________________________________________________________________
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 17:05:36 2005
Return-Path: <java-user-return-15702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22905 invoked from network); 3 Aug 2005 17:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 17:05:36 -0000
Received: (qmail 28886 invoked by uid 500); 3 Aug 2005 15:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28828 invoked by uid 500); 3 Aug 2005 15:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28805 invoked by uid 99); 3 Aug 2005 15:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 08:13:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.192 as permitted sender)
Received: from [64.233.184.192] (HELO wproxy.gmail.com) (64.233.184.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 08:13:17 -0700
Received: by wproxy.gmail.com with SMTP id 71so173156wri
        for <java-user@lucene.apache.org>; Wed, 03 Aug 2005 08:13:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Mf3LiFkfBcN7O5CigHlVBr51zqDiqfO8MQXliTU6viGBizY2njSlhTjf79UCQ8SLPN/Dm8n3juERle6/IyMwEVZXifbYygud5VUONN8c0QzWURVX2J8SrHrMoNrF17OxVBPIJsLfVep+BWoYqiAQwcHnGenKPLJiPMuJCVku6BU=
Received: by 10.54.30.42 with SMTP id d42mr686325wrd;
        Wed, 03 Aug 2005 08:13:25 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Wed, 3 Aug 2005 08:13:24 -0700 (PDT)
Message-ID: <6e3ae63105080308134124131@mail.gmail.com>
Date: Wed, 3 Aug 2005 08:13:25 -0700
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to free memory after index ist build.
In-Reply-To: <4ef6647e0508030630f0c3924@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <Pine.LNX.4.58.0508020916040.29130@hal.rescomp.berkeley.edu>
	 <28622.1123061172@www35.gmx.net>
	 <4ef6647e0508030630f0c3924@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If your SQL data volume is large, try to switch to the latest JDBC
driver from mySQL.

mysql-connector-java-3.2.0-alpha-bin.jar

More details is the lower part of this page:
http://wiki.dbsight.com/index.php?title=3DJDBC_Driver

--=20
Chris Lu
------------
Lucene Search on Any Database
http://www.dbsight.net

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 18:19:36 2005
Return-Path: <java-user-return-15703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53986 invoked from network); 3 Aug 2005 18:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 18:19:35 -0000
Received: (qmail 1320 invoked by uid 500); 3 Aug 2005 18:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1295 invoked by uid 500); 3 Aug 2005 18:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1282 invoked by uid 99); 3 Aug 2005 18:19:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 11:19:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.38] (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Aug 2005 11:19:19 -0700
Received: (qmail 89257 invoked by uid 60001); 3 Aug 2005 18:19:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=XdlSud/l1b9TlN/mFZisr31eknfjWGr7zDxwtjlau3qtmtwmjIoTT5uvtOdf6H7U0EPoK+c2u1z4facn/pH1NNFaOt9fE4s1yV3kt4fiZJCCIAwmiv8ytt+5QjGFOUvrPbCCgibKpripSFS5EmmfJFVpWYOhJhL8PSnuL2bkMhA=  ;
Message-ID: <20050803181926.89255.qmail@web31105.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31105.mail.mud.yahoo.com via HTTP; Wed, 03 Aug 2005 11:19:26 PDT
Date: Wed, 3 Aug 2005 11:19:26 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: hot swapping searchers
To: java-user@lucene.apache.org
In-Reply-To: <42F0AC63.10407@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Stanislav,

Try it, but I think it won't work if document IDs don't match in the
old and new Index(Searcher).

Otis

--- Stanislav Jordanov <stenly@sirma.bg> wrote:

> A Hits object holds a reference to a Searcher and uses it to retrieve
> 
> docs not in the cache list.
> Is it ok if I modify the Hits object in a way that it may have its 
> searcher replaced,
> i.e. introduce a:
> *setSearcher(Searcher s) { this.searcher = s; }*
> method and invoke it (syncronously) between invokations of *doc(n)*


. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/ -- Find it. Tag it. Share it.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 19:26:33 2005
Return-Path: <java-user-return-15704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77916 invoked from network); 3 Aug 2005 19:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 19:26:33 -0000
Received: (qmail 4616 invoked by uid 500); 3 Aug 2005 19:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4596 invoked by uid 500); 3 Aug 2005 19:26:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4583 invoked by uid 99); 3 Aug 2005 19:26:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 12:26:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fraschetti@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 12:26:15 -0700
Received: by zproxy.gmail.com with SMTP id n29so135300nzf
        for <java-user@lucene.apache.org>; Wed, 03 Aug 2005 12:26:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=X38ENxZsznIr3g6dePnawnxA3oFs5R+f1zsajwg2DbeIqfX0QgM7b+Gad36nipEb6L729xoxNtJ7zjbw/yTAA29sJEGpyficdv4ZPH48/PMbPokF8nOO32B9zqaPutCxtHUJsBvaST7q+mwaUSreh8jaBtOObsivie84AMXXgd0=
Received: by 10.37.15.5 with SMTP id s5mr303342nzi;
        Wed, 03 Aug 2005 12:26:23 -0700 (PDT)
Received: by 10.36.55.12 with HTTP; Wed, 3 Aug 2005 12:25:53 -0700 (PDT)
Message-ID: <cbdebdf80508031225106980b7@mail.gmail.com>
Date: Wed, 3 Aug 2005 12:25:53 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: java-user@lucene.apache.org
Subject: search caching
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've got an application that performs millions of searches against a
lucene index, can someone  give me a bit of insight as to the memory
consumption of these searches? Is there a cap on how many are kept
around? is there any way I can disable caching for this type of
search?

--=20
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 20:04:51 2005
Return-Path: <java-user-return-15705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88818 invoked from network); 3 Aug 2005 20:04:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 20:04:51 -0000
Received: (qmail 77190 invoked by uid 500); 3 Aug 2005 20:04:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77160 invoked by uid 500); 3 Aug 2005 20:04:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77147 invoked by uid 99); 3 Aug 2005 20:04:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 13:04:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.74] (HELO web31112.mail.mud.yahoo.com) (68.142.201.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Aug 2005 13:04:32 -0700
Received: (qmail 93661 invoked by uid 60001); 3 Aug 2005 20:04:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=vX4zKa4fUObPPzqVQOR7lhltaFqojdydtVi0sKjYmHOzV8xPXLjP9PKjVF9VLnrPsBn4sB1W3lQvTPX7ThLp592l6mnyDDsuK0o3Q0xYbP33BSweRSRPmJkgxpJnYX6ASuFBwSXHB4ZpUrJhiitDqMI++b06mUb9xXaWIjxVPi8=  ;
Message-ID: <20050803200440.93659.qmail@web31112.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31112.mail.mud.yahoo.com via HTTP; Wed, 03 Aug 2005 13:04:39 PDT
Date: Wed, 3 Aug 2005 13:04:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: search caching
To: java-user@lucene.apache.org, Chris Fraschetti <fraschetti@gmail.com>
In-Reply-To: <cbdebdf80508031225106980b7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Searches are not cached (other than possibly by the OS/File system). 
IndexSearcher can/should be cached (by your application), and how much
memory it consumes depends on ... hm, I thought we included a formula
for that in Lucene in Action, but it looks like we only included the
formula for calculating the number of open files during indexing.

Well, Doug provided this formula a few times, and I don't recall it off
the top of my head, but I do know that the .tii index file will be
fully read into memory, so look at the size of that file to get an
initial idea.

Otis

--- Chris Fraschetti <fraschetti@gmail.com> wrote:

> I've got an application that performs millions of searches against a
> lucene index, can someone  give me a bit of insight as to the memory
> consumption of these searches? Is there a cap on how many are kept
> around? is there any way I can disable caching for this type of
> search?
> 
> -- 
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 23:04:33 2005
Return-Path: <java-user-return-15706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32833 invoked from network); 3 Aug 2005 23:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 23:04:33 -0000
Received: (qmail 98743 invoked by uid 500); 3 Aug 2005 23:04:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98716 invoked by uid 500); 3 Aug 2005 23:04:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98703 invoked by uid 99); 3 Aug 2005 23:04:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 16:04:26 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 16:04:16 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5DCE65B77B; Wed,  3 Aug 2005 16:04:19 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 5C81F7F45C; Wed,  3 Aug 2005 16:04:19 -0700 (PDT)
Date: Wed, 3 Aug 2005 16:04:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Cc: Chris Fraschetti <fraschetti@gmail.com>
Subject: Re: search caching
In-Reply-To: <20050803200440.93659.qmail@web31112.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0508031559570.29219@hal.rescomp.berkeley.edu>
References: <20050803200440.93659.qmail@web31112.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Well, Doug provided this formula a few times, and I don't recall it off
: the top of my head, but I do know that the .tii index file will be
: fully read into memory, so look at the size of that file to get an
: initial idea.

the other big piece of caching that goes on is the FieldCache which is
used for sorting -- if you only ever sort by Score or doc ID, then it's a
non-issue, but if your millions of Searchers are going to involve sorting
on lots of different fields, the complete list of indexed values for each
field used in sorting will be cached in memory per Searcher (close the
Searcher, the WeakRef for the FieldCache is freed up)

I can imagine some scenerios in which it might make sense to do all of the
searches that sort on field A first, then close the searcher and open a
new one and do all the searchers that sort on field B, then close the
searcher, open a new one and do all the searches that sort on field C,
etc....


: > I've got an application that performs millions of searches against a
: > lucene index, can someone  give me a bit of insight as to the memory
: > consumption of these searches? Is there a cap on how many are kept
: > around? is there any way I can disable caching for this type of
: > search?
: >
: > --
: > ___________________________________________________
: > Chris Fraschetti
: > e fraschetti@gmail.com
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 23:28:58 2005
Return-Path: <java-user-return-15707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44628 invoked from network); 3 Aug 2005 23:28:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 23:28:57 -0000
Received: (qmail 32827 invoked by uid 500); 3 Aug 2005 23:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32812 invoked by uid 500); 3 Aug 2005 23:28:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 82108 invoked by uid 99); 1 Aug 2005 22:55:21 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Mime-Version: 1.0 (Apple Message framework v733)
Content-Transfer-Encoding: 7bit
Message-Id: <BCF99AE7-B443-4873-85D9-75CB56EF85CA@comcast.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Tony Wiegand <tmwiegand@comcast.net>
Subject: FileNotFound
Date: Mon, 1 Aug 2005 18:55:17 -0400
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


  Does anyone know why lucene would throw the following stacktrace  
when a search runs while the system is in the process of merging  
documents?   Based on the book, this should be a legal operation.    
I've seen this stacktrace mentioned several times in the archives but  
I never seen a solution to the issue.   We are running JDK1.4.2 on  
Solaris 2.8 and using lucene.1.4.3.    We are seeing this happen  
quite often on our production system.

java.io.FileNotFoundException: /apps/lucene/_2meu.fnm (No such file  
or directory)
at java.io.RandomAccessFile.open(Native Method)
at java.io.RandomAccessFile.<init>(RandomAccessFile.java:200)
at org.apache.lucene.store.FSInputStream$Descriptor.<init> 
(FSDirectory.java:376)
at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
at org.apache.lucene.index.SegmentReader.initialize 
(SegmentReader.java:109)
at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
at org.apache.lucene.store.Lock$With.run(Lock.java:109)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 03 23:51:19 2005
Return-Path: <java-user-return-15708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51902 invoked from network); 3 Aug 2005 23:51:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Aug 2005 23:51:19 -0000
Received: (qmail 44481 invoked by uid 500); 3 Aug 2005 23:51:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44450 invoked by uid 500); 3 Aug 2005 23:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44437 invoked by uid 99); 3 Aug 2005 23:51:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 16:51:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 16:51:05 -0700
Received: (qmail 21776 invoked by uid 532); 3 Aug 2005 23:51:11 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.4.  Clear:. 
 Processed in 0.0178 secs); 03 Aug 2005 23:51:11 -0000
Received: from unknown (HELO ?172.31.1.2?) (127.0.0.1)
  by 0 with SMTP; 3 Aug 2005 23:51:10 -0000
Message-ID: <42F1586E.2010105@tropo.com>
Date: Wed, 03 Aug 2005 16:51:10 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041217
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: search caching
References: <cbdebdf80508031225106980b7@mail.gmail.com>
In-Reply-To: <cbdebdf80508031225106980b7@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Fraschetti wrote:

> I've got an application that performs millions of searches against a

If the results are not, say, "personalized", than I suggest some kind of 
web container cache - I use and like OSCache - and it can even cache 
page fragments.

http://www.opensymphony.com/oscache/

> lucene index, can someone  give me a bit of insight as to the memory
> consumption of these searches? Is there a cap on how many are kept
> around? is there any way I can disable caching for this type of
> search?
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 01:22:59 2005
Return-Path: <java-user-return-15709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72717 invoked from network); 4 Aug 2005 01:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 01:22:59 -0000
Received: (qmail 2789 invoked by uid 500); 4 Aug 2005 01:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2716 invoked by uid 500); 4 Aug 2005 01:22:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2639 invoked by uid 99); 4 Aug 2005 01:22:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 18:22:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Aug 2005 18:22:39 -0700
Received: by wproxy.gmail.com with SMTP id 71so320478wri
        for <java-user@lucene.apache.org>; Wed, 03 Aug 2005 18:22:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MB8mHGcYH8l0xP4Zm++gUVy3oiYVbTFjdBkHM5zXYQ61eYrKYHHUvkYix2rUy6Y0JUCizRqGiugYjcE76BHrJ/7udU3MjzqMh4n0zzXWSnsVVGnixYwSyXMYnv4fkRWkcJou7PF1Wb9rb8PHeT4WThD1gTSmwsXwCUU7mG8pqk8=
Received: by 10.54.13.77 with SMTP id 77mr1075164wrm;
        Wed, 03 Aug 2005 18:22:47 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Wed, 3 Aug 2005 18:22:47 -0700 (PDT)
Message-ID: <6e3ae63105080318227e56c4c@mail.gmail.com>
Date: Wed, 3 Aug 2005 18:22:47 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFound
In-Reply-To: <BCF99AE7-B443-4873-85D9-75CB56EF85CA@comcast.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BCF99AE7-B443-4873-85D9-75CB56EF85CA@comcast.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In my experience, when the index is updated, if you don't refresh the
searcher by open the index again, you will have this error.

--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net


On 8/1/05, Tony Wiegand <tmwiegand@comcast.net> wrote:
>=20
>   Does anyone know why lucene would throw the following stacktrace
> when a search runs while the system is in the process of merging
> documents?   Based on the book, this should be a legal operation.
> I've seen this stacktrace mentioned several times in the archives but
> I never seen a solution to the issue.   We are running JDK1.4.2 on
> Solaris 2.8 and using lucene.1.4.3.    We are seeing this happen
> quite often on our production system.
>=20
> java.io.FileNotFoundException: /apps/lucene/_2meu.fnm (No such file
> or directory)
> at java.io.RandomAccessFile.open(Native Method)
> at java.io.RandomAccessFile.<init>(RandomAccessFile.java:200)
> at org.apache.lucene.store.FSInputStream$Descriptor.<init>
> (FSDirectory.java:376)
> at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
> at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
> at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:53)
> at org.apache.lucene.index.SegmentReader.initialize
> (SegmentReader.java:109)
> at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
> at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:122)
> at org.apache.lucene.store.Lock$With.run(Lock.java:109)
> at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
> at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 08:54:13 2005
Return-Path: <java-user-return-15710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87705 invoked from network); 4 Aug 2005 08:54:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 08:54:13 -0000
Received: (qmail 20197 invoked by uid 500); 4 Aug 2005 08:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19977 invoked by uid 500); 4 Aug 2005 08:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19964 invoked by uid 99); 4 Aug 2005 08:54:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 01:54:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of breitzammer@gmail.com designates 64.233.182.199 as permitted sender)
Received: from [64.233.182.199] (HELO nproxy.gmail.com) (64.233.182.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 01:53:55 -0700
Received: by nproxy.gmail.com with SMTP id x4so67428nfb
        for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 01:54:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ErmXqWmsecgMQWiIalKRqwtP1d6o3VJ+a7xP/Zxfe/iArL/wNvFuSeUH6NRmKSYqETgn1aKsvlA+6TxI7KVUoy6HlyVnhIOLxnPbOI79yrxuyxaGbUKzthWEBZaf5mqn68NW9jb/O4wXHq7ULPzh3Cbq7CYOE8TMWIkFFOBsV/8=
Received: by 10.48.239.18 with SMTP id m18mr48050nfh;
        Thu, 04 Aug 2005 01:54:01 -0700 (PDT)
Received: by 10.48.3.2 with HTTP; Thu, 4 Aug 2005 01:54:01 -0700 (PDT)
Message-ID: <9eaa7ce50508040154168bc460@mail.gmail.com>
Date: Thu, 4 Aug 2005 10:54:01 +0200
From: Benjamin Reitzammer <breitzammer@gmail.com>
Reply-To: Benjamin Reitzammer <breitzammer@gmail.com>
To: Lucene-user <java-user@lucene.apache.org>
Subject: Very large number of indices in distributed environment
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
we are in the process of planning a search feature of a product and we
are having quite a hard time figuring out the "right" way to do it.

The requirements for our app are the following:
1) Large number of indices (at _least_ 10000)
2) The amount of data involved per index is not very high, but because
of the number of indices involved the data set will be something about
500 - 1000 GB
3) The searching capabilities must be fail safe, while it's acceptable
if deletes/updates can take some time.
4) The majority of operations will be searching the indices.

I've followed the mailing list intensively the last month and
especially the "Best Practices for Distributing Lucene Indexing and
Searching" (http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D1109713180206=
91&w=3D2)
and "Real time indexing and distribution to lucene on separate boxes (long)=
"
(http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D107900097217474&w=3D2)
threads provided some interesting insight.

But still our requirements are a bit different.

My thoughts how the above could be handled, so far are:

1) Have one *really big* "master"  which handles all tasks related to
index manipulation. Sync the indices according to Doug's tips
http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D110973989200204&w=3D2 out
to a cluster of slaves that are responsible for searching.
Problem: How to make sure that indices across  slaves are in sync.=20
Big Problem: Syncing of this large number of indices will cause a lot
of traffic and cause already quite a load on the slaves (not to speak
of the master)

1.1) Is it safe to _search_ (only) an index mounted via NFS? If yes,
then the search boxes could mount the indices on the master box. But
this solution would probably lead to some serious perfomance issues
because of the needed disk I/O on the master.
Though I'd love to be proven wrong on this one.

2) Split up index collection into smaller portions and distribute a
certain number of indices (~ up to 1000 indices) into smaller
autonomous clusters, that are completely responsible for their
collection of indices.
Problem: How do I keep index distribution dynamic so I don't have to
hardcode where to look for a certain index (that's not a real lucene
issue, but more one of distributed computing, but nevertheless I
thought you guys might know a way to solve it).

Any ideas on this?=20
Has anyone ever worked with such a large number of Lucene indices (and
the amount of data it involves)?

I appreciate your help very much.

Cheers

Benjamin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 10:37:35 2005
Return-Path: <java-user-return-15711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24078 invoked from network); 4 Aug 2005 10:37:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 10:37:34 -0000
Received: (qmail 50007 invoked by uid 500); 4 Aug 2005 10:37:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49973 invoked by uid 500); 4 Aug 2005 10:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49960 invoked by uid 99); 4 Aug 2005 10:37:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 03:37:25 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_60_70,HTML_MESSAGE,NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erlend.bjorge@aftenposten.no designates 80.91.34.51 as permitted sender)
Received: from [80.91.34.51] (HELO mx1.aftenposten.no) (80.91.34.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 03:37:12 -0700
Received: from localhost (amavis-mx1.aftenposten.no [80.91.34.52])
	by mx1.aftenposten.no (Postfix) with ESMTP id D7EC38CAA1F
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 12:37:16 +0200 (CEST)
Received: from smtp2.aftenposten.no (unknown [80.91.34.7])
	by mx1.aftenposten.no (Postfix) with ESMTP id 527C58CA94E
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 12:37:16 +0200 (CEST)
Received: from sch-mail-06.schibsted.no (unverified) by smtp2.aftenposten.no
 (Content Technologies SMTPRS 4.3.14) with ESMTP id <T728de52a93505b2207274@smtp2.aftenposten.no> for <java-user@lucene.apache.org>;
 Thu, 4 Aug 2005 12:34:37 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C598E0.7ABC5206"
Subject: Search in multi fields with cross field AND ?
Date: Thu, 4 Aug 2005 12:37:14 +0200
Message-ID: <013F0E81D349EC42A14CD3242BC61AFFF9A96B@sch-mail-06.schibsted.no>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search in multi fields with cross field AND ?
Thread-Index: AcWY0hYpmene0GgxQT+bhZqMqEQIpAACSV2w
From: <erlend.bjorge@aftenposten.no>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C598E0.7ABC5206
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi there!

I'm fairly new to Lucene and trying evaluate it. I want to retrieve only =
documenets (companies) that has=20
all the words searched for in different fields, crossed in different =
fields with AND search.

I have a structure in the "documents" (companies) like this :

companyName string
keywords1 string        (Extra boosting if match here)
keywords2 string

---

So far so good when I create the index with boosting on keywords1 etc.

If I search for:

"ford garage"

I want companies that rapair ford cars, and only those.

So if you have documents/companies like:

"company1", "ford volvo", "garage motor ...."
"company2", "volvo nissan", "garage ......."
"company3", null, "ford garage motor ....."

---

I will have match with company1 and company3. Company2 don't do ford =
cars. Company3 haven't match in keywords1, but=20
they still doing garage stuff with Ford cars, but should be after =
company1 in the result list, since match in keywords1=20
should give you extra boosting =3D higher score =3D why I don't have =
only one field for both keywords.

So I have tried different approaches doing searching, something like =
this:

1 =
-------------------------------------------------------------------------=
--

        String[] fieldNames =3D new String[]{"companyName", "keywords1", =
"keywords2"};
        String searchText =3D "ford garage" / "ford AND garage"

        BooleanQuery query =3D new BooleanQuery();

        for(int i =3D 0; i < fieldNames.length; ++i) {
            QueryParser qp =3D new QueryParser(fieldNames[i], new =
StandardAnalyzer());

            qp.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
            query.add(qp.parse(searchText), false, false);
        }

        Hits h =3D is.search(query);

2 =
-------------------------------------------------------------------------=
--

        Query query =3D MultiFieldQueryParser.parse(searchText, =
fieldNames, new StandardAnalyzer());

        Hits h =3D is.search(query);

-------------------------------------------------------------------------=
-----

In both cases, I only get company3 in the result because "ford garage" =
is within the same field for this company I guess,=20
and I don't get Company1 too. I guess because the two words are split in =
two different fields =3D search in muliti fields,=20
cross field AND..... if you understand ?

So is this possible with Lucene, what have I missed ? I have the Lucene =
book, can't find anything there, tried to find
anyting in the archive, didn't find anythign there either, but maybe I =
didn't look good enough ? What should I look for ?

So any clues of how I can do this search ??


Thanks in advanced!


Cheers,=20
Erlend=20

------_=_NextPart_001_01C598E0.7ABC5206--

From java-user-return-15712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 10:43:48 2005
Return-Path: <java-user-return-15712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25419 invoked from network); 4 Aug 2005 10:43:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 10:43:48 -0000
Received: (qmail 56800 invoked by uid 500); 4 Aug 2005 10:43:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56779 invoked by uid 500); 4 Aug 2005 10:43:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56761 invoked by uid 99); 4 Aug 2005 10:43:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 03:43:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.108.181.138] (HELO quimby.programmfabrik.de) (193.108.181.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 03:43:29 -0700
Received: from [84.188.210.123] (helo=xen)
	by quimby.programmfabrik.de with asmtp (Exim 3.35 #1 (Debian))
	id 1E0c4u-0001wn-00
	for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 11:31:52 +0200
Received: from [192.168.0.222] (helo=[127.0.0.1])
	by xen with esmtp (Exim 4.34 #1 (Debian))
	id 1E0dCC-00021h-Sf
	for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 12:43:28 +0200
Message-ID: <42F1F16A.2040204@programmfabrik.de>
Date: Thu, 04 Aug 2005 12:43:54 +0200
From: Martin Rode <martin.rode@programmfabrik.de>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Search in multi fields with cross field AND ?
References: <013F0E81D349EC42A14CD3242BC61AFFF9A96B@sch-mail-06.schibsted.no>
In-Reply-To: <013F0E81D349EC42A14CD3242BC61AFFF9A96B@sch-mail-06.schibsted.no>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erlend,

try this code:

QueryParser q = new QueryParser("text", analyzer);
q.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
           
Query query = q.parse(search);
Hits hits = isearcher.search(query);
 

Best,
Martin





erlend.bjorge@aftenposten.no wrote:

>Hi there!
>
>I'm fairly new to Lucene and trying evaluate it. I want to retrieve only documenets (companies) that has 
>all the words searched for in different fields, crossed in different fields with AND search.
>
>I have a structure in the "documents" (companies) like this :
>
>companyName string
>keywords1 string        (Extra boosting if match here)
>keywords2 string
>
>---
>
>So far so good when I create the index with boosting on keywords1 etc.
>
>If I search for:
>
>"ford garage"
>
>I want companies that rapair ford cars, and only those.
>
>So if you have documents/companies like:
>
>"company1", "ford volvo", "garage motor ...."
>"company2", "volvo nissan", "garage ......."
>"company3", null, "ford garage motor ....."
>
>---
>
>I will have match with company1 and company3. Company2 don't do ford cars. Company3 haven't match in keywords1, but 
>they still doing garage stuff with Ford cars, but should be after company1 in the result list, since match in keywords1 
>should give you extra boosting = higher score = why I don't have only one field for both keywords.
>
>So I have tried different approaches doing searching, something like this:
>
>1 ---------------------------------------------------------------------------
>
>        String[] fieldNames = new String[]{"companyName", "keywords1", "keywords2"};
>        String searchText = "ford garage" / "ford AND garage"
>
>        BooleanQuery query = new BooleanQuery();
>
>        for(int i = 0; i < fieldNames.length; ++i) {
>            QueryParser qp = new QueryParser(fieldNames[i], new StandardAnalyzer());
>
>            qp.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>            query.add(qp.parse(searchText), false, false);
>        }
>
>        Hits h = is.search(query);
>
>2 ---------------------------------------------------------------------------
>
>        Query query = MultiFieldQueryParser.parse(searchText, fieldNames, new StandardAnalyzer());
>
>        Hits h = is.search(query);
>
>------------------------------------------------------------------------------
>
>In both cases, I only get company3 in the result because "ford garage" is within the same field for this company I guess, 
>and I don't get Company1 too. I guess because the two words are split in two different fields = search in muliti fields, 
>cross field AND..... if you understand ?
>
>So is this possible with Lucene, what have I missed ? I have the Lucene book, can't find anything there, tried to find
>anyting in the archive, didn't find anythign there either, but maybe I didn't look good enough ? What should I look for ?
>
>So any clues of how I can do this search ??
>
>
>Thanks in advanced!
>
>
>Cheers, 
>Erlend 
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 11:34:49 2005
Return-Path: <java-user-return-15713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41510 invoked from network); 4 Aug 2005 11:34:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 11:34:49 -0000
Received: (qmail 11511 invoked by uid 500); 4 Aug 2005 11:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11490 invoked by uid 500); 4 Aug 2005 11:34:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11477 invoked by uid 99); 4 Aug 2005 11:34:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 04:34:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 04:34:31 -0700
Received: by wproxy.gmail.com with SMTP id i4so91662wra
        for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 04:34:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=grfKdj8RUUGliiWxfgy+u/qw31ZK04nPP1Srdmnflue0xva+HmT7pcWMViNeoMxtYyy8RnTIHHBYIc0YdfBh3SJiG9Zn4q26r6sPJRX3mYP+mRbhDyRkq3n0UpHWvNOXfKowveX9VPbXvPsp0mKiSo4gxCSW6wqmaeHJxbGiCNY=
Received: by 10.54.53.63 with SMTP id b63mr1481823wra;
        Thu, 04 Aug 2005 04:34:39 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Thu, 4 Aug 2005 04:34:38 -0700 (PDT)
Message-ID: <8a484a7805080404346657105b@mail.gmail.com>
Date: Thu, 4 Aug 2005 13:34:39 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Why I got this error by writing for example:

Field senderNameField =3D Field.Text("senderName", senderName);
Field subjectField =3D Field.Text("subject", subject);
subjectField.setBoost(1.2);

as in the manual lucene in action??

1.2 is a double, but the method wants a float?
--=20
Riccardo Daviddi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 11:48:05 2005
Return-Path: <java-user-return-15714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45665 invoked from network); 4 Aug 2005 11:48:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 11:48:04 -0000
Received: (qmail 30149 invoked by uid 500); 4 Aug 2005 11:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30122 invoked by uid 500); 4 Aug 2005 11:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30109 invoked by uid 99); 4 Aug 2005 11:47:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 04:47:57 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erlend.bjorge@aftenposten.no designates 80.91.34.51 as permitted sender)
Received: from [80.91.34.51] (HELO mx1.aftenposten.no) (80.91.34.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 04:47:46 -0700
Received: from localhost (amavis-mx1.aftenposten.no [80.91.34.52])
	by mx1.aftenposten.no (Postfix) with ESMTP id D2F048D21EE
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 13:47:52 +0200 (CEST)
Received: from smtp2.aftenposten.no (unknown [80.91.34.7])
	by mx1.aftenposten.no (Postfix) with ESMTP id 495E28D1A13
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 13:47:52 +0200 (CEST)
Received: from sch-mail-06.schibsted.no (unverified) by smtp2.aftenposten.no
 (Content Technologies SMTPRS 4.3.14) with ESMTP id <T728e25cbed505b2207274@smtp2.aftenposten.no> for <java-user@lucene.apache.org>;
 Thu, 4 Aug 2005 13:45:13 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Search in multi fields with cross field AND ?
Date: Thu, 4 Aug 2005 13:47:50 +0200
Message-ID: <013F0E81D349EC42A14CD3242BC61AFFF9A96C@sch-mail-06.schibsted.no>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search in multi fields with cross field AND ?
Thread-Index: AcWY4WQAzxSvJ/1wRlCW1yNS9+a8TwAB3Usg
From: <erlend.bjorge@aftenposten.no>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there Martin!

>try this code:
>QueryParser q =3D new QueryParser("text", analyzer);=20

What is "text" in this context ? All fields for the Field.text ?
Or like I understand it, name of a field, like my "keywords1" ??

Anyway, this code didn't work at all with "text" at least, 0 hits,
Even with one word....  When I e.g. put "keywords1" instead ...=20
it worked for this field of course.

Not sure if you understood my question ? :-)=20

---

I create the index like this, I guess I can't prepare the index for
my multi field, cross field AND search in some way ?

        IndexWriter writer =3D new IndexWriter(ramDir, getAnalyzer(), =
true);
        List companies =3D retrieveCompanies();

        for(int i=3D0;i < companies.size(); i++) {

            CompanyBean bean =3D (CompanyBean) companies.get(i);

            Document doc =3D new Document();
            doc.add(Field.Keyword("companyId", "" + =
bean.getCompanyId()));

            if(bean.getCompanyName() !=3D null){
                doc.add(Field.Text("companyName", =
bean.getCompanyName()));
		}
		if(bean.getKeywords1() !=3D null) {
                Field f =3D Field.Text("keywords1", =
bean.getKeywords1());
                f.setBoost(3.0f);
                doc.add(f);
            }
            if(bean.getKeywords2() !=3D null) {
                Field f =3D Field.Text("keywords2", =
bean.getKeywords2());
                doc.add(f);
            }

            writer.addDocument(doc, getAnalyzer());
        }

        int noDocs =3D writer.docCount();

        writer.optimize();
        writer.close();

---

    public Analyzer getAnalyzer() {
        Analyzer analyzer =3D new StandardAnalyzer();
        return analyzer;
    }

---


Cheers,
Erlend

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 11:56:34 2005
Return-Path: <java-user-return-15715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47658 invoked from network); 4 Aug 2005 11:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 11:56:34 -0000
Received: (qmail 40454 invoked by uid 500); 4 Aug 2005 11:56:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40431 invoked by uid 500); 4 Aug 2005 11:56:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40418 invoked by uid 99); 4 Aug 2005 11:56:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 04:56:26 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erlend.bjorge@aftenposten.no designates 80.91.34.51 as permitted sender)
Received: from [80.91.34.51] (HELO mx1.aftenposten.no) (80.91.34.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 04:56:17 -0700
Received: from localhost (amavis-mx1.aftenposten.no [80.91.34.52])
	by mx1.aftenposten.no (Postfix) with ESMTP id 389288D1D08
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 13:56:24 +0200 (CEST)
Received: from smtp2.aftenposten.no (unknown [80.91.34.7])
	by mx1.aftenposten.no (Postfix) with ESMTP id 7AC5B8D1B73
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 13:56:23 +0200 (CEST)
Received: from sch-mail-06.schibsted.no (unverified) by smtp2.aftenposten.no
 (Content Technologies SMTPRS 4.3.14) with ESMTP id <T728e2d9a18505b2207274@smtp2.aftenposten.no>;
 Thu, 4 Aug 2005 13:53:44 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
Date: Thu, 4 Aug 2005 13:56:22 +0200
Message-ID: <013F0E81D349EC42A14CD3242BC61AFFF9A96E@sch-mail-06.schibsted.no>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
Thread-Index: AcWY6IP9RPQmYTJGRpmmULy2L3h7iAAAk1Cg
From: <erlend.bjorge@aftenposten.no>
To: <java-user@lucene.apache.org>, <rdaviddi@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

>Field senderNameField =3D Field.Text("senderName", senderName); Field=20
>subjectField =3D Field.Text("subject", subject); =
subjectField.setBoost(1.2);

Try:

subjectField.setBoost(1.2f);

? :-)

Erlend

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 12:02:43 2005
Return-Path: <java-user-return-15716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49537 invoked from network); 4 Aug 2005 12:02:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 12:02:42 -0000
Received: (qmail 51932 invoked by uid 500); 4 Aug 2005 12:02:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51864 invoked by uid 500); 4 Aug 2005 12:02:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51823 invoked by uid 99); 4 Aug 2005 12:02:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 05:02:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.108.181.138] (HELO quimby.programmfabrik.de) (193.108.181.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 05:02:14 -0700
Received: from [84.188.210.123] (helo=xen)
	by quimby.programmfabrik.de with asmtp (Exim 3.35 #1 (Debian))
	id 1E0dJ7-0002Dq-00
	for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 12:50:37 +0200
Received: from [192.168.0.222] (helo=[127.0.0.1])
	by xen with esmtp (Exim 4.34 #1 (Debian))
	id 1E0eQR-0007ue-7c
	for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 14:02:15 +0200
Message-ID: <42F203E1.1040202@programmfabrik.de>
Date: Thu, 04 Aug 2005 14:02:41 +0200
From: Martin Rode <martin.rode@programmfabrik.de>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SV: Search in multi fields with cross field AND ?
References: <013F0E81D349EC42A14CD3242BC61AFFF9A96C@sch-mail-06.schibsted.no>
In-Reply-To: <013F0E81D349EC42A14CD3242BC61AFFF9A96C@sch-mail-06.schibsted.no>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erlend,

In my case "text" is everything. Whenever I add anything to the index, I 
also add a "text" Field. So in your case, I would build the index like 
you did with an additional

doc.add(Field.Text("text", bean.getCompanyName()));

after each addition.
If you then search, the "text" will give you access to all your data.

Anyway you should definitely get "luke". Browse the index you created!

Best,
Martin



erlend.bjorge@aftenposten.no wrote:

>Hi there Martin!
>
>  
>
>>try this code:
>>QueryParser q = new QueryParser("text", analyzer); 
>>    
>>
>
>What is "text" in this context ? All fields for the Field.text ?
>Or like I understand it, name of a field, like my "keywords1" ??
>
>Anyway, this code didn't work at all with "text" at least, 0 hits,
>Even with one word....  When I e.g. put "keywords1" instead ... 
>it worked for this field of course.
>
>Not sure if you understood my question ? :-) 
>
>---
>
>I create the index like this, I guess I can't prepare the index for
>my multi field, cross field AND search in some way ?
>
>        IndexWriter writer = new IndexWriter(ramDir, getAnalyzer(), true);
>        List companies = retrieveCompanies();
>
>        for(int i=0;i < companies.size(); i++) {
>
>            CompanyBean bean = (CompanyBean) companies.get(i);
>
>            Document doc = new Document();
>            doc.add(Field.Keyword("companyId", "" + bean.getCompanyId()));
>
>            if(bean.getCompanyName() != null){
>                doc.add(Field.Text("companyName", bean.getCompanyName()));
>		}
>		if(bean.getKeywords1() != null) {
>                Field f = Field.Text("keywords1", bean.getKeywords1());
>                f.setBoost(3.0f);
>                doc.add(f);
>            }
>            if(bean.getKeywords2() != null) {
>                Field f = Field.Text("keywords2", bean.getKeywords2());
>                doc.add(f);
>            }
>
>            writer.addDocument(doc, getAnalyzer());
>        }
>
>        int noDocs = writer.docCount();
>
>        writer.optimize();
>        writer.close();
>
>---
>
>    public Analyzer getAnalyzer() {
>        Analyzer analyzer = new StandardAnalyzer();
>        return analyzer;
>    }
>
>---
>
>
>Cheers,
>Erlend
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 14:32:30 2005
Return-Path: <java-user-return-15717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19188 invoked from network); 4 Aug 2005 14:32:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 14:32:29 -0000
Received: (qmail 13650 invoked by uid 500); 4 Aug 2005 14:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13620 invoked by uid 500); 4 Aug 2005 14:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13606 invoked by uid 99); 4 Aug 2005 14:32:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:32:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [131.167.253.61] (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:32:10 -0700
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <JKEE08QCEO70AD01QK@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Thu,
 04 Aug 2005 10:32:13 -0400 (Eastern Daylight Time)
Date: Thu, 04 Aug 2005 10:31:13 -0400
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: Distributable CD
To: Lucene Users List <java-user@lucene.apache.org>
Cc: Ryan Bobko <bobkor@BATTELLE.ORG>
Message-id: <42F226B1.3070407@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


We deliver HTML web sites to our clients on a CD.  It often remains on 
that CD, and they pass the CD around, and use it when they need to do 
research on some topic.

We would like to offer them the ability to search the contents of the CD.

We can not install any software on their windows machines (that includes 
a JVM, or Microsoft's latest .net whatz-it). 

I realize this a crippled, broken process, and that I should be ashamed 
for trying to enable it.

Does anyone have any suggestions or recommendations on how we could 
implement such a search functionality?

Thanks,

Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 14:38:31 2005
Return-Path: <java-user-return-15718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21818 invoked from network); 4 Aug 2005 14:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 14:38:31 -0000
Received: (qmail 26277 invoked by uid 500); 4 Aug 2005 14:38:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26256 invoked by uid 500); 4 Aug 2005 14:38:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26239 invoked by uid 99); 4 Aug 2005 14:38:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:38:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.61.132.12] (HELO server1.livestoryboard.com) (209.61.132.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:38:14 -0700
Received: from [127.0.0.1] (livestoryboard.com [209.61.132.12] (may be forged))
	(authenticated)
	by server1.livestoryboard.com (8.11.6/8.11.6) with ESMTP id j74EdJ302132
	for <java-user@lucene.apache.org>; Thu, 4 Aug 2005 09:39:19 -0500
Message-ID: <42F2285C.2060008@koberg.com>
Date: Thu, 04 Aug 2005 10:38:20 -0400
From: Robert Koberg <rob@koberg.com>
User-Agent: Mozilla Thunderbird 1.0 (Macintosh/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributable CD
References: <42F226B1.3070407@battelle.org>
In-Reply-To: <42F226B1.3070407@battelle.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dan Funk wrote:
> 
> We deliver HTML web sites to our clients on a CD.  It often remains on 
> that CD, and they pass the CD around, and use it when they need to do 
> research on some topic.
> 
> We would like to offer them the ability to search the contents of the CD.
> 
> We can not install any software on their windows machines (that includes 
> a JVM, or Microsoft's latest .net whatz-it).
> I realize this a crippled, broken process, and that I should be ashamed 
> for trying to enable it.
> 
> Does anyone have any suggestions or recommendations on how we could 
> implement such a search functionality?


haven't tried this, but:

use lucene, index the docs and put the index on the CD. create an 
app/webapp for searching using that index.

?,
-Rob


> 
> Thanks,
> 
> Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 14:43:15 2005
Return-Path: <java-user-return-15719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23451 invoked from network); 4 Aug 2005 14:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 14:43:15 -0000
Received: (qmail 36919 invoked by uid 500); 4 Aug 2005 14:43:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36895 invoked by uid 500); 4 Aug 2005 14:43:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36882 invoked by uid 99); 4 Aug 2005 14:43:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:43:06 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.193.196] (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:42:54 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 31C712539E
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 17:42:59 +0300 (EEST)
Message-ID: <42F22991.2040102@i-hypergrid.com>
Date: Thu, 04 Aug 2005 17:43:29 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributable CD
References: <42F226B1.3070407@battelle.org>
In-Reply-To: <42F226B1.3070407@battelle.org>
Content-Type: multipart/alternative;
 boundary="------------080806060307020002020506"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------080806060307020002020506
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

As I know you dont' need to install jre on target machine (you could put 
jre onto cd and use it from cd), but this applies _only_ to standalone 
apllications. this means that you will be unable to use java browser plugin.

Dan Funk wrote:

>
> We deliver HTML web sites to our clients on a CD.  It often remains on 
> that CD, and they pass the CD around, and use it when they need to do 
> research on some topic.
>
> We would like to offer them the ability to search the contents of the CD.
>
> We can not install any software on their windows machines (that 
> includes a JVM, or Microsoft's latest .net whatz-it).
> I realize this a crippled, broken process, and that I should be 
> ashamed for trying to enable it.
>
> Does anyone have any suggestions or recommendations on how we could 
> implement such a search functionality?
>
> Thanks,
>
> Dan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
regards,
Volodymyr Bychkoviak


--------------080806060307020002020506--

From java-user-return-15720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 14:44:14 2005
Return-Path: <java-user-return-15720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23867 invoked from network); 4 Aug 2005 14:44:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 14:44:14 -0000
Received: (qmail 38519 invoked by uid 500); 4 Aug 2005 14:44:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38500 invoked by uid 500); 4 Aug 2005 14:44:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38485 invoked by uid 99); 4 Aug 2005 14:44:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:44:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.108.181.138] (HELO quimby.programmfabrik.de) (193.108.181.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:43:55 -0700
Received: from [84.188.210.123] (helo=xen)
	by quimby.programmfabrik.de with asmtp (Exim 3.35 #1 (Debian))
	id 1E0fpa-0002kv-00
	for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 15:32:18 +0200
Received: from [192.168.0.222] (helo=[127.0.0.1])
	by xen with esmtp (Exim 4.34 #1 (Debian))
	id 1E0gwu-0006sh-Tt
	for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 16:43:56 +0200
Message-ID: <42F229C7.4030007@programmfabrik.de>
Date: Thu, 04 Aug 2005 16:44:23 +0200
From: Martin Rode <martin.rode@programmfabrik.de>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: performance: gcj, sun, ibm ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hello all,

lucene is already pretty fast, but i was wondering if you guys have 
experience with using gcj (on linux). how much faster is it for 
indexing? personally i have best performance with java-ibm, at least 
under linux.

it would be interesting to hear how your experiences are.

thanks in advance,
martin



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 14:46:24 2005
Return-Path: <java-user-return-15721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25871 invoked from network); 4 Aug 2005 14:46:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 14:46:23 -0000
Received: (qmail 41427 invoked by uid 500); 4 Aug 2005 14:46:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41394 invoked by uid 500); 4 Aug 2005 14:46:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41380 invoked by uid 99); 4 Aug 2005 14:46:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:46:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.189.121.20] (HELO snorlax.uk.scalix.com) (62.189.121.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 07:46:04 -0700
Received: from snorlax.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by snorlax.uk.scalix.com (8.12.11/8.12.11) with ESMTP id j74EkAWk031870
	for <java-user@lucene.apache.org>; Thu, 4 Aug 2005 15:46:11 +0100
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11/8.12.11/Submit) with ESMTP id j74EkAUb031867
	for <java-user@lucene.apache.org>; Thu, 4 Aug 2005 15:46:10 +0100
Received: from [10.11.108.231] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 9.4.0.8)
    via ESMTP; Thu, 04 Aug 2005 15:46:07 +0100 (BST)
Date: Thu, 4 Aug 2005 15:46:05 +0100
From: John Haxby <jch@scalix.com>
Sender: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <42F22A2D.8050802@scalix.com>
In-Reply-To: <42F229C7.4030007@programmfabrik.de>
References: <42F229C7.4030007@programmfabrik.de>
Subject: Re: performance: gcj, sun, ibm ?
x-scalix-Hops: 1
User-Agent: Mozilla Thunderbird 1.0.6-1.4.1 (X11/20050719)
X-Accept-Language: en-us, en
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Martin Rode wrote:

> hello all,
>
> lucene is already pretty fast, but i was wondering if you guys have 
> experience with using gcj (on linux). how much faster is it for 
> indexing? personally i have best performance with java-ibm, at least 
> under linux.
>
> it would be interesting to hear how your experiences are.


Lucene, compiled with gcj I believe, is part of Fedora Core 4.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 15:54:49 2005
Return-Path: <java-user-return-15722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60573 invoked from network); 4 Aug 2005 15:54:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 15:54:48 -0000
Received: (qmail 89586 invoked by uid 500); 4 Aug 2005 15:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89565 invoked by uid 500); 4 Aug 2005 15:54:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89552 invoked by uid 99); 4 Aug 2005 15:54:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 08:54:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 08:54:31 -0700
Received: by wproxy.gmail.com with SMTP id 71so432609wri
        for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 08:54:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Pmg/YmqwMa0/16H5bu8Ne/hqK0QexN1+CxXTLeDvqrIipvsmLjieZlJmJTJK2zVH5G7nzyQvFgfNrrRmpnlMUubgUe66UOKY+uoyVIk8bDZMOVCjD8iHriPNAgNdywAXmksMYvjD/rNE3a+I+TbUOlkYKcGfySWw8+VZzkD1u70=
Received: by 10.54.33.17 with SMTP id g17mr133607wrg;
        Thu, 04 Aug 2005 08:54:39 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Thu, 4 Aug 2005 08:54:39 -0700 (PDT)
Message-ID: <6e3ae63105080408541956bf37@mail.gmail.com>
Date: Thu, 4 Aug 2005 08:54:39 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org, Benjamin Reitzammer <breitzammer@gmail.com>
Subject: Re: Very large number of indices in distributed environment
In-Reply-To: <9eaa7ce50508040154168bc460@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <9eaa7ce50508040154168bc460@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A big index is slow to merge, slow to search, and as you mentioned,
it's slow to sync. An 1G index took me several hours to merge on a P3
1GHz 512MRam.
Mounting Lucene on NFS is also a "No GO".

I feel you choice 2 may be feasible, although complicated. That's your
job, right. :)

BTW: I guess your app is a web hosted app for different users, is it?

--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net


On 8/4/05, Benjamin Reitzammer <breitzammer@gmail.com> wrote:
> Hi,
> we are in the process of planning a search feature of a product and we
> are having quite a hard time figuring out the "right" way to do it.
>=20
> The requirements for our app are the following:
> 1) Large number of indices (at _least_ 10000)
> 2) The amount of data involved per index is not very high, but because
> of the number of indices involved the data set will be something about
> 500 - 1000 GB
> 3) The searching capabilities must be fail safe, while it's acceptable
> if deletes/updates can take some time.
> 4) The majority of operations will be searching the indices.
>=20
> I've followed the mailing list intensively the last month and
> especially the "Best Practices for Distributing Lucene Indexing and
> Searching" (http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D11097131802=
0691&w=3D2)
> and "Real time indexing and distribution to lucene on separate boxes (lon=
g)"
> (http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D107900097217474&w=3D2)
> threads provided some interesting insight.
>=20
> But still our requirements are a bit different.
>=20
> My thoughts how the above could be handled, so far are:
>=20
> 1) Have one *really big* "master"  which handles all tasks related to
> index manipulation. Sync the indices according to Doug's tips
> http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D110973989200204&w=3D2 o=
ut
> to a cluster of slaves that are responsible for searching.
> Problem: How to make sure that indices across  slaves are in sync.
> Big Problem: Syncing of this large number of indices will cause a lot
> of traffic and cause already quite a load on the slaves (not to speak
> of the master)
>=20
> 1.1) Is it safe to _search_ (only) an index mounted via NFS? If yes,
> then the search boxes could mount the indices on the master box. But
> this solution would probably lead to some serious perfomance issues
> because of the needed disk I/O on the master.
> Though I'd love to be proven wrong on this one.
>=20
> 2) Split up index collection into smaller portions and distribute a
> certain number of indices (~ up to 1000 indices) into smaller
> autonomous clusters, that are completely responsible for their
> collection of indices.
> Problem: How do I keep index distribution dynamic so I don't have to
> hardcode where to look for a certain index (that's not a real lucene
> issue, but more one of distributed computing, but nevertheless I
> thought you guys might know a way to solve it).
>=20
> Any ideas on this?
> Has anyone ever worked with such a large number of Lucene indices (and
> the amount of data it involves)?
>=20
> I appreciate your help very much.
>=20
> Cheers
>=20
> Benjamin
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 16:17:56 2005
Return-Path: <java-user-return-15723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73671 invoked from network); 4 Aug 2005 16:17:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 16:17:56 -0000
Received: (qmail 48584 invoked by uid 500); 4 Aug 2005 16:17:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48550 invoked by uid 500); 4 Aug 2005 16:17:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48537 invoked by uid 99); 4 Aug 2005 16:17:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 09:17:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 64.233.182.202 as permitted sender)
Received: from [64.233.182.202] (HELO nproxy.gmail.com) (64.233.182.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 09:17:38 -0700
Received: by nproxy.gmail.com with SMTP id d4so93342nfe
        for <java-user@lucene.apache.org>; Thu, 04 Aug 2005 09:17:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=E+Ye4farL53GpA9zz3LlevuXk2UPgTH0AvshcA0humWe5Z7T4ULCENbt4pklz28c6Z3WHYN743kDEZC+78BHoxab0OF7KreUX7kIYpKy228sF0bscl5NTbG2oAkEqs0XptcX+oVozqaG+0lwz0uUNjH4rn+BXH+YdSgc7xi3mbo=
Received: by 10.48.250.16 with SMTP id x16mr68261nfh;
        Thu, 04 Aug 2005 09:17:44 -0700 (PDT)
Received: by 10.48.143.16 with HTTP; Thu, 4 Aug 2005 09:17:44 -0700 (PDT)
Message-ID: <8c4e6861050804091756665f1c@mail.gmail.com>
Date: Thu, 4 Aug 2005 17:17:44 +0100
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org, Benjamin Reitzammer <breitzammer@gmail.com>
Subject: Re: Very large number of indices in distributed environment
In-Reply-To: <6e3ae63105080408541956bf37@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <9eaa7ce50508040154168bc460@mail.gmail.com>
	 <6e3ae63105080408541956bf37@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In my experience, searching a read only index mounted via NFS is fine.
The NFS related issues are with locking.

I'd agree with Chris that you should try to avoid very big indexes.


--
Ian.


On 04/08/05, Chris Lu <chris.lu@gmail.com> wrote:
> A big index is slow to merge, slow to search, and as you mentioned,
> it's slow to sync. An 1G index took me several hours to merge on a P3
> 1GHz 512MRam.
> Mounting Lucene on NFS is also a "No GO".
>=20
> I feel you choice 2 may be feasible, although complicated. That's your
> job, right. :)
>=20
> BTW: I guess your app is a web hosted app for different users, is it?
>=20
> --
> Chris Lu
> ------------
> Lucene Search RAD on Any Database
> http://www.dbsight.net
>=20
>=20
> On 8/4/05, Benjamin Reitzammer <breitzammer@gmail.com> wrote:
> > Hi,
> > we are in the process of planning a search feature of a product and we
> > are having quite a hard time figuring out the "right" way to do it.
> >
> > The requirements for our app are the following:
> > 1) Large number of indices (at _least_ 10000)
> > 2) The amount of data involved per index is not very high, but because
> > of the number of indices involved the data set will be something about
> > 500 - 1000 GB
> > 3) The searching capabilities must be fail safe, while it's acceptable
> > if deletes/updates can take some time.
> > 4) The majority of operations will be searching the indices.
> >
> > I've followed the mailing list intensively the last month and
> > especially the "Best Practices for Distributing Lucene Indexing and
> > Searching" (http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D110971318=
020691&w=3D2)
> > and "Real time indexing and distribution to lucene on separate boxes (l=
ong)"
> > (http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D107900097217474&w=3D=
2)
> > threads provided some interesting insight.
> >
> > But still our requirements are a bit different.
> >
> > My thoughts how the above could be handled, so far are:
> >
> > 1) Have one *really big* "master"  which handles all tasks related to
> > index manipulation. Sync the indices according to Doug's tips
> > http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D110973989200204&w=3D2=
 out
> > to a cluster of slaves that are responsible for searching.
> > Problem: How to make sure that indices across  slaves are in sync.
> > Big Problem: Syncing of this large number of indices will cause a lot
> > of traffic and cause already quite a load on the slaves (not to speak
> > of the master)
> >
> > 1.1) Is it safe to _search_ (only) an index mounted via NFS? If yes,
> > then the search boxes could mount the indices on the master box. But
> > this solution would probably lead to some serious perfomance issues
> > because of the needed disk I/O on the master.
> > Though I'd love to be proven wrong on this one.
> >
> > 2) Split up index collection into smaller portions and distribute a
> > certain number of indices (~ up to 1000 indices) into smaller
> > autonomous clusters, that are completely responsible for their
> > collection of indices.
> > Problem: How do I keep index distribution dynamic so I don't have to
> > hardcode where to look for a certain index (that's not a real lucene
> > issue, but more one of distributed computing, but nevertheless I
> > thought you guys might know a way to solve it).
> >
> > Any ideas on this?
> > Has anyone ever worked with such a large number of Lucene indices (and
> > the amount of data it involves)?
> >
> > I appreciate your help very much.
> >
> > Cheers
> >
> > Benjamin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 17:04:13 2005
Return-Path: <java-user-return-15724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89537 invoked from network); 4 Aug 2005 17:04:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 17:04:13 -0000
Received: (qmail 13768 invoked by uid 500); 4 Aug 2005 17:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13701 invoked by uid 500); 4 Aug 2005 17:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13636 invoked by uid 99); 4 Aug 2005 17:04:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 10:04:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.35] (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Aug 2005 10:03:52 -0700
Received: (qmail 17817 invoked by uid 60001); 4 Aug 2005 17:03:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CNMbB/3oOqcJ39MTT/xMRhreToBJbMhumgEmrFUWijkUM+BnaFJgx1rvfGnjmDADQn2z+XqVnXdda5VRQHVKqaKfAq5mrQKzavdg16I6xFa96mrvOMtbDM03kuAZvs1KJs2E99Q3JcWHW4KAvIo+dv7TqpP732VyZHxNeZhG6/8=  ;
Message-ID: <20050804170359.17815.qmail@web31102.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31102.mail.mud.yahoo.com via HTTP; Thu, 04 Aug 2005 10:03:59 PDT
Date: Thu, 4 Aug 2005 10:03:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Very large number of indices in distributed environment
To: java-user@lucene.apache.org
In-Reply-To: <9eaa7ce50508040154168bc460@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Benjamin,

I don't know what exactly your application is doing, but option 2)
sounds the most manageable to me.

Otis

--- Benjamin Reitzammer <breitzammer@gmail.com> wrote:

> Hi,
> we are in the process of planning a search feature of a product and
> we
> are having quite a hard time figuring out the "right" way to do it.
> 
> The requirements for our app are the following:
> 1) Large number of indices (at _least_ 10000)
> 2) The amount of data involved per index is not very high, but
> because
> of the number of indices involved the data set will be something
> about
> 500 - 1000 GB
> 3) The searching capabilities must be fail safe, while it's
> acceptable
> if deletes/updates can take some time.
> 4) The majority of operations will be searching the indices.
> 
> I've followed the mailing list intensively the last month and
> especially the "Best Practices for Distributing Lucene Indexing and
> Searching"
> (http://marc.theaimsgroup.com/?l=lucene-user&m=110971318020691&w=2)
> and "Real time indexing and distribution to lucene on separate boxes
> (long)"
> (http://marc.theaimsgroup.com/?l=lucene-user&m=107900097217474&w=2)
> threads provided some interesting insight.
> 
> But still our requirements are a bit different.
> 
> My thoughts how the above could be handled, so far are:
> 
> 1) Have one *really big* "master"  which handles all tasks related to
> index manipulation. Sync the indices according to Doug's tips
> http://marc.theaimsgroup.com/?l=lucene-user&m=110973989200204&w=2 out
> to a cluster of slaves that are responsible for searching.
> Problem: How to make sure that indices across  slaves are in sync. 
> Big Problem: Syncing of this large number of indices will cause a lot
> of traffic and cause already quite a load on the slaves (not to speak
> of the master)
> 
> 1.1) Is it safe to _search_ (only) an index mounted via NFS? If yes,
> then the search boxes could mount the indices on the master box. But
> this solution would probably lead to some serious perfomance issues
> because of the needed disk I/O on the master.
> Though I'd love to be proven wrong on this one.
> 
> 2) Split up index collection into smaller portions and distribute a
> certain number of indices (~ up to 1000 indices) into smaller
> autonomous clusters, that are completely responsible for their
> collection of indices.
> Problem: How do I keep index distribution dynamic so I don't have to
> hardcode where to look for a certain index (that's not a real lucene
> issue, but more one of distributed computing, but nevertheless I
> thought you guys might know a way to solve it).
> 
> Any ideas on this? 
> Has anyone ever worked with such a large number of Lucene indices
> (and
> the amount of data it involves)?
> 
> I appreciate your help very much.
> 
> Cheers
> 
> Benjamin
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 17:15:19 2005
Return-Path: <java-user-return-15725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92426 invoked from network); 4 Aug 2005 17:15:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 17:15:19 -0000
Received: (qmail 28524 invoked by uid 500); 4 Aug 2005 17:15:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28496 invoked by uid 500); 4 Aug 2005 17:15:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28482 invoked by uid 99); 4 Aug 2005 17:15:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 10:15:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_NUMERIC_HELO,TO_ADDRESS_EQ_REAL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [72.3.249.121] (HELO s65416.headlesshunter.com) (72.3.249.121)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Aug 2005 10:15:01 -0700
Received: from 24.143.67.87 ([24.143.67.87])
          by s65416.headlesshunter.com (JAMES SMTP Server 2.2.0) with SMTP ID 103
          for <java-user@lucene.apache.org>;
          Thu, 4 Aug 2005 12:15:49 -0500 (CDT)
User-Agent: Microsoft-Entourage/11.1.0.040913
Date: Thu, 04 Aug 2005 10:15:07 -0700
Subject: Using Custom Analyzer to create case sensitive queries
From: "Peter T. Brown" <peter@headlesshunter.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-ID: <BF179B2B.B209%peter@headlesshunter.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a custom analyzer I've created so that certain fields, which are
indexed as Keywords, can be search exactly as they are typed in. Using this
custom analyzer however produces not hits. Using Luke, I can see that the
field values are identical to the values passed in on the query...

My query is: class.name:(someCaseSensitiveString.that.Can.include.Periods)


My custom Analyzer:

    public static class DefaultAnalyzer extends Analyzer {
        public TokenStream tokenStream(String fieldName, Reader reader) {
            LOG.debug("analyzing: " + fieldName);

            if ("class.name".equals(fieldName)) {
                LOG.debug("not analyzing");
                return new CharTokenizer(reader) {
                    protected boolean isTokenChar(char c) {
                        return true;
                    }
                };
            } else {
                LOG.debug("analyzing");
                StandardTokenizer tokenizer = new StandardTokenizer(reader);
                TokenStream result = null;
                result = new LowerCaseFilter(tokenizer);
                result = new StopFilter(result,
StopAnalyzer.ENGLISH_STOP_WORDS);
                result = new PorterStemFilter(result);
                return result;
            }
        }
    }




Any ideas?


Thank You



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 17:25:49 2005
Return-Path: <java-user-return-15726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95372 invoked from network); 4 Aug 2005 17:25:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 17:25:49 -0000
Received: (qmail 42541 invoked by uid 500); 4 Aug 2005 17:25:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42473 invoked by uid 500); 4 Aug 2005 17:25:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42412 invoked by uid 99); 4 Aug 2005 17:25:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 10:25:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.40] (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Aug 2005 10:25:29 -0700
Received: (qmail 21321 invoked by uid 60001); 4 Aug 2005 17:25:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=pxWsquaQZjoCraZlA8VMmX6bWFhy2HJXPywRH1Erd3OGfGpJeatASGid/21WE1HKpx9uB9izo9AiZ4ZFqylC+6Q7wJYOeNk1KFUQOMUqYFP/Zewr6iQCkJ+SXz061bGWEosyfwYl4+ooASNEZGkr9+LXp05xYHyfTeGdP2qZnKc=  ;
Message-ID: <20050804172536.21319.qmail@web31107.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31107.mail.mud.yahoo.com via HTTP; Thu, 04 Aug 2005 10:25:36 PDT
Date: Thu, 4 Aug 2005 10:25:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using Custom Analyzer to create case sensitive queries
To: java-user@lucene.apache.org
In-Reply-To: <BF179B2B.B209%peter@headlesshunter.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Add some debugging to the if statement that handles "class.name" field.
 My first guess is that you're not getting in that if case when
querying.
If that turns out to be true, consider using PerFieldAnalyzerWrapper to
accomplish the same thing.

Otis

--- "Peter T. Brown" <peter@headlesshunter.com> wrote:

> I have a custom analyzer I've created so that certain fields, which
> are
> indexed as Keywords, can be search exactly as they are typed in.
> Using this
> custom analyzer however produces not hits. Using Luke, I can see that
> the
> field values are identical to the values passed in on the query...
> 
> My query is:
> class.name:(someCaseSensitiveString.that.Can.include.Periods)
> 
> 
> My custom Analyzer:
> 
>     public static class DefaultAnalyzer extends Analyzer {
>         public TokenStream tokenStream(String fieldName, Reader
> reader) {
>             LOG.debug("analyzing: " + fieldName);
> 
>             if ("class.name".equals(fieldName)) {
>                 LOG.debug("not analyzing");
>                 return new CharTokenizer(reader) {
>                     protected boolean isTokenChar(char c) {
>                         return true;
>                     }
>                 };
>             } else {
>                 LOG.debug("analyzing");
>                 StandardTokenizer tokenizer = new
> StandardTokenizer(reader);
>                 TokenStream result = null;
>                 result = new LowerCaseFilter(tokenizer);
>                 result = new StopFilter(result,
> StopAnalyzer.ENGLISH_STOP_WORDS);
>                 result = new PorterStemFilter(result);
>                 return result;
>             }
>         }
>     }
> 
> 
> 
> 
> Any ideas?
> 
> 
> Thank You
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 17:36:09 2005
Return-Path: <java-user-return-15727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98416 invoked from network); 4 Aug 2005 17:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 17:36:09 -0000
Received: (qmail 61665 invoked by uid 500); 4 Aug 2005 17:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61442 invoked by uid 500); 4 Aug 2005 17:36:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61429 invoked by uid 99); 4 Aug 2005 17:36:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 10:36:00 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [72.3.249.121] (HELO s65416.headlesshunter.com) (72.3.249.121)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Aug 2005 10:35:50 -0700
Received: from 24.143.67.87 ([24.143.67.87])
          by s65416.headlesshunter.com (JAMES SMTP Server 2.2.0) with SMTP ID 545
          for <java-user@lucene.apache.org>;
          Thu, 4 Aug 2005 12:36:38 -0500 (CDT)
User-Agent: Microsoft-Entourage/11.1.0.040913
Date: Thu, 04 Aug 2005 10:35:55 -0700
Subject: Re: Using Custom Analyzer to create case sensitive queries
From: "Peter T. Brown" <peter@headlesshunter.com>
To: <java-user@lucene.apache.org>
Message-ID: <BF17A00B.B22F%peter@headlesshunter.com>
In-Reply-To: <20050804172536.21319.qmail@web31107.mail.mud.yahoo.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank You.

Yes, I did check that and the CharTokenizer is correctly being used for the
field in question.

How should I use PerFieldAnalyzerWrapper  ?





> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> Reply-To: <java-user@lucene.apache.org>
> Date: Thu, 4 Aug 2005 10:25:36 -0700 (PDT)
> To: <java-user@lucene.apache.org>
> Subject: Re: Using Custom Analyzer to create case sensitive queries
> 
> PerFieldAnalyzerWrapper 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 18:39:41 2005
Return-Path: <java-user-return-15728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21337 invoked from network); 4 Aug 2005 18:39:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 18:39:41 -0000
Received: (qmail 54136 invoked by uid 500); 4 Aug 2005 18:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54034 invoked by uid 500); 4 Aug 2005 18:39:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54010 invoked by uid 99); 4 Aug 2005 18:39:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 11:39:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 11:39:20 -0700
Received: (qmail 21689 invoked from network); 4 Aug 2005 18:39:25 -0000
Received: from unknown (HELO p5496E254.dip.t-dialin.net) ([pbs]695637@[84.150.226.84])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 4 Aug 2005 18:39:25 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: performance: gcj, sun, ibm ?
Date: Thu, 4 Aug 2005 20:39:46 +0200
User-Agent: KMail/1.8
References: <42F229C7.4030007@programmfabrik.de> <42F22A2D.8050802@scalix.com>
In-Reply-To: <42F22A2D.8050802@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508042039.46194@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 04 August 2005 16:46, John Haxby wrote:

> Lucene, compiled with gcj I believe, is part of Fedora Core 4.

Sounds interesting, but what exactly does it mean? Is it still a jar file 
that can be used from Java or is it a shared library that can only be used 
from C(++)?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 18:53:22 2005
Return-Path: <java-user-return-15729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25533 invoked from network); 4 Aug 2005 18:53:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 18:53:22 -0000
Received: (qmail 69639 invoked by uid 500); 4 Aug 2005 18:53:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68726 invoked by uid 500); 4 Aug 2005 18:53:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68713 invoked by uid 99); 4 Aug 2005 18:53:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 11:53:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 11:53:07 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id DEFA81BB43
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 20:53:04 +0200 (CEST)
Message-ID: <42F26410.5070703@fib.upc.edu>
Date: Thu, 04 Aug 2005 20:53:04 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: when close searcher
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a Multisearcher, when I have to close multisearcher 
(multisearcher.close()) and if I do this I have to close every 
IndexSearcher?
In what order I have to do this things?
My problem are because, I modify one index (my multisearcher are 
composed by 6 Index) I don't know if my process to "refresh" my 
multisearcher is appropriate.

Any advice using multisearcher was welcome.

If this is a silly question excuseme but I don't understand when I 've 
to close it.
thks for all.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 20:53:44 2005
Return-Path: <java-user-return-15730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75797 invoked from network); 4 Aug 2005 20:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 20:53:44 -0000
Received: (qmail 21633 invoked by uid 500); 4 Aug 2005 20:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21576 invoked by uid 500); 4 Aug 2005 20:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21555 invoked by uid 99); 4 Aug 2005 20:53:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 13:53:36 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.228.0.176] (HELO postfix4-2.free.fr) (213.228.0.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 13:53:24 -0700
Received: from jpxp.libertysurf.fr (bob13-1-82-242-172-60.fbx.proxad.net [82.242.172.60])
	by postfix4-2.free.fr (Postfix) with ESMTP id F075C32343B
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 22:53:31 +0200 (CEST)
Message-Id: <6.2.1.2.2.20050804225310.03fca380@pop.gmail.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.1.2
Date: Thu, 04 Aug 2005 22:54:26 +0200
To: java-user@lucene.apache.org
From: Genty Jean-Paul <gentyjp@libertysurf.fr>
Subject: Re: Distributable CD
In-Reply-To: <42F226B1.3070407@battelle.org>
References: <42F226B1.3070407@battelle.org>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


  Check http://www.docsearcher.tk/

  They have a way to create searchable CDs ( I did not tested it :-) )


    Jean-Paul
At 16:31 04/08/2005, you wrote:

>We deliver HTML web sites to our clients on a CD.  It often remains on 
>that CD, and they pass the CD around, and use it when they need to do 
>research on some topic.
>
>We would like to offer them the ability to search the contents of the CD.
>
>We can not install any software on their windows machines (that includes a 
>JVM, or Microsoft's latest .net whatz-it).
>I realize this a crippled, broken process, and that I should be ashamed 
>for trying to enable it.
>
>Does anyone have any suggestions or recommendations on how we could 
>implement such a search functionality?
>
>Thanks,
>
>Dan
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 21:21:13 2005
Return-Path: <java-user-return-15731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89257 invoked from network); 4 Aug 2005 21:21:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 21:21:13 -0000
Received: (qmail 55965 invoked by uid 500); 4 Aug 2005 21:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55941 invoked by uid 500); 4 Aug 2005 21:21:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55928 invoked by uid 99); 4 Aug 2005 21:21:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 14:21:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.75] (HELO web31113.mail.mud.yahoo.com) (68.142.201.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Aug 2005 14:20:56 -0700
Received: (qmail 21829 invoked by uid 60001); 4 Aug 2005 21:21:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=4Y/KMuuzPKQ6g3e0za0fT6TvZEpVj94S5B74j8PhYUlGJkuHuIUiN+b6XOFlt7PUNM8lyQV8d9ibFpiIFrbYJeIZRAtfc87Vm6ZU/6V3BnpZ86FyS/ddfMC8H0H1dQDUNbEym+KmVUjIPx26aSQ8rD7vJYi7hT5Fi8vxs3CAALM=  ;
Message-ID: <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31113.mail.mud.yahoo.com via HTTP; Thu, 04 Aug 2005 14:21:04 PDT
Date: Thu, 4 Aug 2005 14:21:04 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
To: java-user@lucene.apache.org
In-Reply-To: <8a484a7805080404346657105b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes. use 1.2f there.  That method accepts floats, not doubles.  That
could be an error in the Lucene book.

Otis


--- Riccardo Daviddi <rdaviddi@gmail.com> wrote:

> Why I got this error by writing for example:
> 
> Field senderNameField = Field.Text("senderName", senderName);
> Field subjectField = Field.Text("subject", subject);
> subjectField.setBoost(1.2);
> 
> as in the manual lucene in action??
> 
> 1.2 is a double, but the method wants a float?
> -- 
> Riccardo Daviddi
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 21:34:18 2005
Return-Path: <java-user-return-15732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95121 invoked from network); 4 Aug 2005 21:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 21:34:18 -0000
Received: (qmail 76597 invoked by uid 500); 4 Aug 2005 21:34:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76571 invoked by uid 500); 4 Aug 2005 21:34:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76558 invoked by uid 99); 4 Aug 2005 21:34:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 14:34:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.85] (HELO smtpout.mac.com) (17.250.248.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 14:34:02 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id j74LYAa9027884
	for <java-user@lucene.apache.org>; Thu, 4 Aug 2005 14:34:10 -0700 (PDT)
Received: from [192.168.53.227] (i-195-137-67-86.freedom2surf.net [195.137.67.86])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id j74LY6M3013894
	for <java-user@lucene.apache.org>; Thu, 4 Aug 2005 14:34:09 -0700 (PDT)
Message-ID: <42F289CE.1000607@mac.com>
Date: Thu, 04 Aug 2005 22:34:06 +0100
From: Shay Banon <kimchy@mac.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Compass 0.5 Released
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We are please to announce the 0.5 major feature release of Compass 
Object/Search Engine Mapping (OSEM) framework. This release makes 
integrating search capability with existing development frameworks (like 
Hibernate and Spring) even simpler. Compass uses declarative mapping 
technology, which means you: Write less code, find data faster.
 
Changes includes: GPS (extendable datasource integration) device 
technology for Hibernate 2/3, JDO, OJB and JDBC. Improved integration 
with Spring framework for configuration, MVC and ORM support.
 
Compass core changes includes, improved performance of reader/searcher 
and Optimizers, support for binary data indexing, cyclic references and 
extending the mapping capabilities. Plus many more features. It will 
change the way you search application data.

We consider Lucene developers and users as the prime source for 
information and feedback. So have a look at Compass, which provides a 
lot of enhancements on top of Lucene, and give us some feedback, so we 
can do better.

Shay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 22:02:29 2005
Return-Path: <java-user-return-15733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7735 invoked from network); 4 Aug 2005 22:02:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 22:02:29 -0000
Received: (qmail 7588 invoked by uid 500); 4 Aug 2005 22:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7564 invoked by uid 500); 4 Aug 2005 22:02:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7551 invoked by uid 99); 4 Aug 2005 22:02:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 15:02:24 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mark_benussi@hotmail.com designates 65.54.162.76 as permitted sender)
Received: from [65.54.162.76] (HELO hotmail.com) (65.54.162.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 15:02:14 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 4 Aug 2005 15:02:22 -0700
Message-ID: <BAY108-DAV4B5DF039194EE0673FA6BF0C40@phx.gbl>
Received: from 65.54.162.200 by BAY108-DAV4.phx.gbl with DAV;
	Thu, 04 Aug 2005 22:02:21 +0000
X-Originating-IP: [65.54.162.200]
X-Originating-Email: [mark_benussi@hotmail.com]
X-Sender: mark_benussi@hotmail.com
From: "Mark Benussi" <mark_benussi@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Compass 0.5 Released
Date: Thu, 4 Aug 2005 23:02:22 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <42F289CE.1000607@mac.com>
Thread-Index: AcWZPEJWVXv/FGSESS2W+yiD+m3JaQAA95Cg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-OriginalArrivalTime: 04 Aug 2005 22:02:22.0317 (UTC) FILETIME=[30A789D0:01C59940]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Shay.

Do you have a web site that we can visit to discover more about your
technology?

-----Original Message-----
From: Shay Banon [mailto:kimchy@mac.com] 
Sent: 04 August 2005 22:34
To: java-user@lucene.apache.org
Subject: Compass 0.5 Released

We are please to announce the 0.5 major feature release of Compass 
Object/Search Engine Mapping (OSEM) framework. This release makes 
integrating search capability with existing development frameworks (like 
Hibernate and Spring) even simpler. Compass uses declarative mapping 
technology, which means you: Write less code, find data faster.
 
Changes includes: GPS (extendable datasource integration) device 
technology for Hibernate 2/3, JDO, OJB and JDBC. Improved integration 
with Spring framework for configuration, MVC and ORM support.
 
Compass core changes includes, improved performance of reader/searcher 
and Optimizers, support for binary data indexing, cyclic references and 
extending the mapping capabilities. Plus many more features. It will 
change the way you search application data.

We consider Lucene developers and users as the prime source for 
information and feedback. So have a look at Compass, which provides a 
lot of enhancements on top of Lucene, and give us some feedback, so we 
can do better.

Shay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 22:13:43 2005
Return-Path: <java-user-return-15734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11167 invoked from network); 4 Aug 2005 22:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 22:13:42 -0000
Received: (qmail 20891 invoked by uid 500); 4 Aug 2005 22:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20866 invoked by uid 500); 4 Aug 2005 22:13:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20853 invoked by uid 99); 4 Aug 2005 22:13:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 15:13:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.85] (HELO smtpout.mac.com) (17.250.248.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 15:13:25 -0700
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id j74MDXhn008696
	for <java-user@lucene.apache.org>; Thu, 4 Aug 2005 15:13:34 -0700 (PDT)
Received: from [192.168.53.227] (i-195-137-67-86.freedom2surf.net [195.137.67.86])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 4.0) with ESMTP id j74MDT7W003425
	for <java-user@lucene.apache.org>; Thu, 4 Aug 2005 15:13:33 -0700 (PDT)
Message-ID: <42F29309.7070701@mac.com>
Date: Thu, 04 Aug 2005 23:13:29 +0100
From: Shay Banon <kimchy@mac.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Compass 0.5 Released
References: <BAY108-DAV4B5DF039194EE0673FA6BF0C40@phx.gbl>
In-Reply-To: <BAY108-DAV4B5DF039194EE0673FA6BF0C40@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Of course, sorry ;-(

    http://compass.sourceforge.net

Mark Benussi wrote:

>Shay.
>
>Do you have a web site that we can visit to discover more about your
>technology?
>
>-----Original Message-----
>From: Shay Banon [mailto:kimchy@mac.com] 
>Sent: 04 August 2005 22:34
>To: java-user@lucene.apache.org
>Subject: Compass 0.5 Released
>
>We are please to announce the 0.5 major feature release of Compass 
>Object/Search Engine Mapping (OSEM) framework. This release makes 
>integrating search capability with existing development frameworks (like 
>Hibernate and Spring) even simpler. Compass uses declarative mapping 
>technology, which means you: Write less code, find data faster.
> 
>Changes includes: GPS (extendable datasource integration) device 
>technology for Hibernate 2/3, JDO, OJB and JDBC. Improved integration 
>with Spring framework for configuration, MVC and ORM support.
> 
>Compass core changes includes, improved performance of reader/searcher 
>and Optimizers, support for binary data indexing, cyclic references and 
>extending the mapping capabilities. Plus many more features. It will 
>change the way you search application data.
>
>We consider Lucene developers and users as the prime source for 
>information and feedback. So have a look at Compass, which provides a 
>lot of enhancements on top of Lucene, and give us some feedback, so we 
>can do better.
>
>Shay
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 22:59:08 2005
Return-Path: <java-user-return-15736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38352 invoked from network); 4 Aug 2005 22:59:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 22:59:08 -0000
Received: (qmail 68902 invoked by uid 500); 4 Aug 2005 22:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68859 invoked by uid 500); 4 Aug 2005 22:58:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68823 invoked by uid 99); 4 Aug 2005 22:58:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 15:58:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.220.6.229] (HELO mail.roomity.com) (66.220.6.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 15:58:44 -0700
Received: from slave1.roomity.com (slave1.roomity.com [66.220.6.229])
	by mail.roomity.com (Postfix) with ESMTP id 5EEB1A798A
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 15:58:58 -0700 (PDT)
Message-ID: <3023915.01123196338193.JavaMail.tomcat5@slave1.roomity.com>
From: javabuddy <maillist@roomity.com>
To: java-user@lucene.apache.org
Subject: File Not Found Exception....
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Thu,  4 Aug 2005 15:58:58 -0700 (PDT)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

HI All,

I am a Lucene user for a month or so.. After some bad beat ups I learnt that only one thread can write into the index location. 

SO after that everything was smoooth, but not I am getting 

"File Not Found : (some index file)"......Exception.

Once I get this exception the search also stops to work and it gives the same exception. 

Then I learnt that I need to optimize the indexes. I did that .. that too only when I am "NOT" writing to the index.

Even that gave me the same problem.....

Then I decided to start from scratch... after some 4-5 hrs of continous Indexing I am getting the same kind of error...

Can anybody shed some light on it????

- Gana.


---------------------------------------------------------------------------------------------
People are conversing... without posting their email or filling up their mail box. ~~1123196337474~~
roomity.com http://roomity.com/launch.jsp No sign up to read or search this Rich Internet App
---------------------------------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 04 22:59:09 2005
Return-Path: <java-user-return-15735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38357 invoked from network); 4 Aug 2005 22:59:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Aug 2005 22:59:08 -0000
Received: (qmail 68885 invoked by uid 500); 4 Aug 2005 22:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68843 invoked by uid 500); 4 Aug 2005 22:58:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68822 invoked by uid 99); 4 Aug 2005 22:58:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 15:58:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.220.6.229] (HELO mail.roomity.com) (66.220.6.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 15:58:44 -0700
Received: from slave1.roomity.com (slave1.roomity.com [66.220.6.229])
	by mail.roomity.com (Postfix) with ESMTP id 6CBCAA7999
	for <java-user@lucene.apache.org>; Thu,  4 Aug 2005 15:58:58 -0700 (PDT)
Message-ID: <15369652.11123196338432.JavaMail.tomcat5@slave1.roomity.com>
From: javabuddy <maillist@roomity.com>
To: java-user@lucene.apache.org
Subject: File Not Found Exception....
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Thu,  4 Aug 2005 15:58:58 -0700 (PDT)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

HI All,

I am a Lucene user for a month or so.. After some bad beat ups I learnt that only one thread can write into the index location. 

SO after that everything was smoooth, but not I am getting 

"File Not Found : (some index file)"......Exception.

Once I get this exception the search also stops to work and it gives the same exception. 

Then I learnt that I need to optimize the indexes. I did that .. that too only when I am "NOT" writing to the index.

Even that gave me the same problem.....

Then I decided to start from scratch... after some 4-5 hrs of continous Indexing I am getting the same kind of error...

Can anybody shed some light on it????

- Gana.


---------------------------------------------------------------------------------------------
People are conversing... without posting their email or filling up their mail box. ~~1123196338427~~
roomity.com http://roomity.com/launch.jsp No sign up to read or search this Rich Internet App
---------------------------------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 00:08:30 2005
Return-Path: <java-user-return-15737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58951 invoked from network); 5 Aug 2005 00:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 00:08:30 -0000
Received: (qmail 45682 invoked by uid 500); 5 Aug 2005 00:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45642 invoked by uid 500); 5 Aug 2005 00:08:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45462 invoked by uid 99); 5 Aug 2005 00:08:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 17:08:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exch01.allegro.med) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 17:08:08 -0700
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
Subject: de pluralization
Date: Thu, 4 Aug 2005 17:08:15 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF32867401914EE6@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: de pluralization
thread-index: AcWWtXrtEQD4QFVLSMui5L4CjjQ9oQCm64Pw
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I am just posting this question out here since this might be a common
problem and some of you might have good pointers.

Is there algorithms/api built into lucene that would help de pluralize
words while indexing and/or while searching the index? Are there
analyzers that do this already?

There is tons of academic work on going in this area and I was wondering
the best way to solve this problem. We have ideas and heuristics
ourseleves, but would love input from the community here since this
might be a common problem.

Any pointers/ideas on this?

Thank you,
Mufaddal.
=20

-------------------------------------------------------------------------=
-----------------
This email and any files transmitted with it are confidential=20
and intended solely for the use of the individual or entity=20
to whom they are addressed. If you have received this=20
email in error please notify the system manager. Please
note that any views or opinions presented in this email=20
are solely those of the author and do not necessarily
represent those of the company. Finally, the recipient
should check this email and any attachments for the=20
presence of viruses. The company accepts no liability for
any damage caused by any virus transmitted by this email.
Consult your physician prior to the use of any medical
supplies or product.
-------------------------------------------------------------------------=
-----------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 00:14:54 2005
Return-Path: <java-user-return-15738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61181 invoked from network); 5 Aug 2005 00:14:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 00:14:54 -0000
Received: (qmail 51325 invoked by uid 500); 5 Aug 2005 00:14:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51258 invoked by uid 500); 5 Aug 2005 00:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51231 invoked by uid 99); 5 Aug 2005 00:14:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 17:14:44 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.212.179] (HELO adm1.bloglines.com) (216.148.212.179)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Aug 2005 17:14:33 -0700
Received: (qmail 17620 invoked from network); 5 Aug 2005 00:14:41 -0000
Received: from unknown (HELO w13.bloglines.com) (10.4.0.62)
  by 0 with SMTP; 5 Aug 2005 00:14:41 -0000
Received: (qmail 25387 invoked by uid 99); 5 Aug 2005 00:14:41 -0000
Message-ID: <1123200881.1277332100.25386.sendItem@bloglines.com>
Date: 5 Aug 2005 00:14:41 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Search shortly after adding a doc
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

i want to use lucene to search shortly (within a second) after adding a document.
 closing a writer to ensure the new document is written and then opening an
index reader seems to be too slow on large indexes.

how do other people
handle this?  

(i know this can be solved with a database but i'd like
to use the tokenization/stemming features of lucene).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 00:18:46 2005
Return-Path: <java-user-return-15739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62372 invoked from network); 5 Aug 2005 00:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 00:18:46 -0000
Received: (qmail 55875 invoked by uid 500); 5 Aug 2005 00:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55625 invoked by uid 500); 5 Aug 2005 00:18:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55612 invoked by uid 99); 5 Aug 2005 00:18:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 17:18:40 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.212.179] (HELO adm1.bloglines.com) (216.148.212.179)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Aug 2005 17:18:30 -0700
Received: (qmail 18378 invoked from network); 5 Aug 2005 00:18:38 -0000
Received: from unknown (HELO w13.bloglines.com) (10.4.0.62)
  by 0 with SMTP; 5 Aug 2005 00:18:38 -0000
Received: (qmail 944 invoked by uid 99); 5 Aug 2005 00:18:38 -0000
Message-ID: <1123201118.1285009978.942.sendItem@bloglines.com>
Date: 5 Aug 2005 00:18:38 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Anyone using Chandler Lucene / Berkeley DB?
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

how well does it work?  does it provide the ability to search shortly after
adding a document?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 05:47:49 2005
Return-Path: <java-user-return-15740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66754 invoked from network); 5 Aug 2005 05:47:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 05:47:49 -0000
Received: (qmail 28959 invoked by uid 500); 5 Aug 2005 05:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28460 invoked by uid 500); 5 Aug 2005 05:47:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28442 invoked by uid 99); 5 Aug 2005 05:47:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Aug 2005 22:47:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Aug 2005 22:47:31 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IKQJOZ00.F1T for <java-user@lucene.apache.org>; Fri, 5
          Aug 2005 11:37:47 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: Split Search Word
Date: Fri, 5 Aug 2005 11:26:41 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKMEOBCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0000_01C599B0.8DC021C0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C599B0.8DC021C0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0001_01C599B0.8DC021C0"


------=_NextPart_001_0001_01C599B0.8DC021C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi Luceners

Apologies.....

I  have along Search String as given below...



SearchWord =  "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis Gospodnetic"  +
"   " + "\"" + "Erik Hatcher" + "\""  + "  " +
                           "Authors of " + "\"" + "Lucene In Action" +"\"";

And prior to searching the Index ,I need the Words to be Split.

SearchWord   =

   1)   "\"" + "Dough Cutting" + "\""
   2)   "Otis Gospodnetic"
   3)  "\"" + "Erik Hatcher" + "\""
   4)  "Authors of "
   5) "\"" +"Lucene In Action" +"\""

I am shure some Analyzer within Lucene is performin the task.
So some body please Tell me Howto

[ I already used Analysis/Paralysis code to check ,but no help ]




WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0001_01C599B0.8DC021C0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><SPAN class=3D156324405-05082005><FONT face=3DVerdana =
size=3D2><STRONG>Hi=20
Luceners</STRONG></FONT></SPAN></P>
<P><SPAN class=3D156324405-05082005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies.....</FONT></STRONG></SPAN></P>
<P><STRONG><FONT face=3DVerdana><FONT size=3D2>I&nbsp; have along Search =
String<SPAN=20
class=3D156324405-05082005> as given =
below...</SPAN></FONT></FONT></STRONG></P>
<P><STRONG><FONT face=3DVerdana><FONT size=3D2><SPAN=20
class=3D156324405-05082005></SPAN></FONT></FONT></STRONG>&nbsp;</P>
<P><FONT face=3DVerdana><FONT size=3D2><SPAN=20
class=3D156324405-05082005><STRONG>SearchWord =3D&nbsp; "\"" + "Dough=20
Cutting</STRONG><STRONG>" + "\"" +&nbsp; "&nbsp; " +&nbsp; "Otis=20
Gospodnetic"&nbsp; + &nbsp;"&nbsp;&nbsp; " + "\"" + "Erik =
Hatcher<STRONG>" +=20
"\""&nbsp; + "&nbsp; "=20
+&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;=20
</STRONG></STRONG></SPAN></FONT></FONT><FONT face=3DVerdana><FONT =
size=3D2><SPAN=20
class=3D156324405-05082005><STRONG><STRONG>"Authors of " + "\"" + =
"Lucene In=20
Action" +"\"";</STRONG></STRONG></SPAN></FONT></FONT></P>
<P><SPAN class=3D156324405-05082005><FONT face=3DVerdana =
size=3D2><STRONG>And prior to=20
searching the Index ,I need the Words to be =
Split.</STRONG></FONT></SPAN></P>
<P><SPAN class=3D156324405-05082005><SPAN =
class=3D156324405-05082005><STRONG><FONT=20
face=3DVerdana size=3D2>SearchWord&nbsp;&nbsp; =3D =
</FONT></STRONG></SPAN></SPAN></P>
<P><SPAN class=3D156324405-05082005><SPAN =
class=3D156324405-05082005><STRONG><FONT=20
face=3DVerdana size=3D2>&nbsp;&nbsp; 1)&nbsp;&nbsp; "\"" + "Dough =
Cutting<STRONG>" +=20
"\""&nbsp;</STRONG></FONT></STRONG></SPAN></SPAN><SPAN=20
class=3D156324405-05082005>&nbsp;<BR>&nbsp;&nbsp; </SPAN><STRONG><FONT=20
face=3DVerdana><FONT size=3D2><SPAN =
class=3D156324405-05082005>2)</SPAN><SPAN=20
class=3D156324405-05082005><SPAN class=3D156324405-05082005>&nbsp;&nbsp; =
"Otis=20
Gospodnetic"<BR>&nbsp;&nbsp; 3)&nbsp; =
</SPAN></SPAN></FONT></FONT></STRONG><SPAN=20
class=3D156324405-05082005><SPAN =
class=3D156324405-05082005><STRONG><FONT=20
face=3DVerdana size=3D2>"\"" + "Erik Hatcher<STRONG>" +=20
"\""&nbsp;</STRONG></FONT></STRONG></SPAN></SPAN><SPAN=20
class=3D156324405-05082005>&nbsp;<BR>&nbsp;&nbsp; </SPAN><SPAN=20
class=3D156324405-05082005><STRONG><FONT face=3DVerdana =
size=3D2>4)&nbsp; <SPAN=20
class=3D156324405-05082005><STRONG><STRONG>"Authors of "<BR>&nbsp;&nbsp; =
5) "\""=20
+"Lucene In Action" =
+"\""</STRONG></STRONG></SPAN></FONT></STRONG></SPAN></P>
<P><SPAN class=3D156324405-05082005><STRONG><FONT face=3DVerdana =
size=3D2>I am shure=20
some Analyzer within Lucene is performin the=20
task.<BR></FONT></STRONG></SPAN><SPAN =
class=3D156324405-05082005><STRONG><FONT=20
face=3DVerdana size=3D2>So some body please Tell me Howto=20
</FONT></STRONG></SPAN></P>
<P><SPAN class=3D156324405-05082005><STRONG><FONT face=3DVerdana =
size=3D2>[ I already=20
used Analysis/Paralysis code to check ,but no help =
]</FONT></STRONG></SPAN></P>
<P>&nbsp;</P>
<P><IMG height=3D85 src=3D"cid:156324405@05082005-30c5" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0001_01C599B0.8DC021C0--

------=_NextPart_000_0000_01C599B0.8DC021C0--


From java-user-return-15741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 12:11:30 2005
Return-Path: <java-user-return-15741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75843 invoked from network); 5 Aug 2005 12:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 12:11:30 -0000
Received: (qmail 87788 invoked by uid 500); 5 Aug 2005 12:11:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87766 invoked by uid 500); 5 Aug 2005 12:11:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87753 invoked by uid 99); 5 Aug 2005 12:11:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 05:11:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 05:11:11 -0700
Received: by wproxy.gmail.com with SMTP id 69so29187wri
        for <java-user@lucene.apache.org>; Fri, 05 Aug 2005 05:11:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=V57o7NpboFQOg4GbwPJfMHmPEsxyQrUDaDumjS78D6y0WASCigLu/8tOcRbeGiXWZUaUO2WULao8qEHGEU9W25NBfK24L1EO2J7emLrKzPiNUuHo+z+ipouZFlTO3VxJe5UEoVsUWWm2bPqM1G9zL0G3uy55r0dbMQXw0S3rbbU=
Received: by 10.54.45.14 with SMTP id s14mr2476711wrs;
        Fri, 05 Aug 2005 05:11:19 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Fri, 5 Aug 2005 05:11:19 -0700 (PDT)
Message-ID: <8a484a7805080505112dd32c1a@mail.gmail.com>
Date: Fri, 5 Aug 2005 14:11:19 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
In-Reply-To: <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805080404346657105b@mail.gmail.com>
	 <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It seems it doesn't change the boost factors and that is strange, I
did as in the manual, I thought it was easy, I just use:

fieldname.setBoost(1.2f);

and then I add to the doc that field, and I index the doc.
All the indexing process goes ok, only these boost factors are
different from what I do in the code.

Any idea?


On 8/4/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Yes. use 1.2f there.  That method accepts floats, not doubles.  That
> could be an error in the Lucene book.
>=20
> Otis
>=20
>=20
> --- Riccardo Daviddi <rdaviddi@gmail.com> wrote:
>=20
> > Why I got this error by writing for example:
> >
> > Field senderNameField =3D Field.Text("senderName", senderName);
> > Field subjectField =3D Field.Text("subject", subject);
> > subjectField.setBoost(1.2);
> >
> > as in the manual lucene in action??
> >
> > 1.2 is a double, but the method wants a float?
> > --
> > Riccardo Daviddi
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi
University of Siena - Information Engeneering
rdaviddi@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 12:21:21 2005
Return-Path: <java-user-return-15742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78410 invoked from network); 5 Aug 2005 12:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 12:21:21 -0000
Received: (qmail 99262 invoked by uid 500); 5 Aug 2005 12:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99235 invoked by uid 500); 5 Aug 2005 12:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99222 invoked by uid 99); 5 Aug 2005 12:21:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 05:21:13 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erlend.bjorge@aftenposten.no designates 80.91.34.51 as permitted sender)
Received: from [80.91.34.51] (HELO mx1.aftenposten.no) (80.91.34.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 05:21:01 -0700
Received: from localhost (amavis-mx1.aftenposten.no [80.91.34.52])
	by mx1.aftenposten.no (Postfix) with ESMTP id 7D2758D8415
	for <java-user@lucene.apache.org>; Fri,  5 Aug 2005 14:21:08 +0200 (CEST)
Received: from smtp1.aftenposten.no (unknown [80.91.34.6])
	by mx1.aftenposten.no (Postfix) with ESMTP id 0AE558D8224
	for <java-user@lucene.apache.org>; Fri,  5 Aug 2005 14:21:08 +0200 (CEST)
Received: from sch-mail-06.schibsted.no (unverified) by smtp1.aftenposten.no
 (Content Technologies SMTPRS 4.3.14) with ESMTP id <T729370f6f6505b22062a8@smtp1.aftenposten.no> for <java-user@lucene.apache.org>;
 Fri, 5 Aug 2005 14:25:25 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: SV: Search in multi fields with cross field AND ?
Date: Fri, 5 Aug 2005 14:21:05 +0200
Message-ID: <013F0E81D349EC42A14CD3242BC61AFFF9A979@sch-mail-06.schibsted.no>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SV: Search in multi fields with cross field AND ?
Thread-Index: AcWY7GmoJsbIIHeDT+2zZis4L0YezwAyIppg
From: <erlend.bjorge@aftenposten.no>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Martin!

It's starts to work know, thanks !! :-)

>In my case "text" is everything. Whenever I add anything to the index, =
I=20
>also add a "text" Field. So in your case, I would build the index like=20
>you did with an additional

>doc.add(Field.Text("text", bean.getCompanyName()));

I see, but I don't quite like this way to do it, would have been much =
better=20
to  work with the different fields and use something like =
MultiFieldQueryParser
that supported a query over multi fields, cross field AND.

But there the only way to fix this is one field like your "text" ???=20

---

Now if you want to keep track, print out the fields too, you need to add =

the other fields as metadata in different fields.

Anyway it work pretty well now, search and scoring, doing muliti field =
and=20
cross AND search, but two things that I'm not sure about. I'm doing like =
this now:


            if(bean.getCompanyName() !=3D null) {
                doc.add(Field.Text("companyName", =
bean.getCompanyName()));
                doc.add(Field.Text("text", bean.getCompanyName()));
            }

            if(bean.getKeywords1() !=3D null) {
                doc.add(Field.Text("keywords1", bean.getKeywords1()));
                Field f =3D Field.Text("text", bean.getKeywords1());
                f.setBoost(3.0f);   // Works fine too :-)
                doc.add(f);
            }
		......

When I print out "text", after search, I only see the companyName in=20
the text field even if I have put keywords1, 2 +++ text too into it.
Should it be like that ? ... The search works just fine for all words =
added.

Strange ??

---

Else the sorting is strange too, it almost work, if I sort like this:

        Sort sort =3D new Sort(new SortField[] {new =
SortField("companyName", false)});
        Hits h =3D is.search(query, sort);

I get the hits list like this:

Aeroauto AS=20
Alfa Bilutleie=20
Asker Bilutleie AS=20
Billig Bilutleie=20
Bislet Bilutleie AS=20
Budget Bilutleie=20
B=E6rum Bilutleie AS       ('=E6' is after u in the norwegian alpha.)
Carent Bilutleie=20
Hertz Bilutleie=20
National Bilutleie=20
Budget Bilutleie Oslo Lufthavn=20
Oslo Bilutleie AS=20
Reisefeber=20
Saga Bilutleie=20
Scandinavia Bilutleie A/S=20
Budget Bilutleie Oslo Sentrum=20
Utleiekontor Oslo=20
=D8stre Aker Bilutleie AS=20

Both "Budget Bilutleie Oslo Lufthavn" and "Budget Bilutleie Oslo =
Sentrum"=20
are sorted wrong, very strange... Something to do with how I do it ? =
Hmmm
Even the special norwegian letter '=D8' is correct sorted (last).

Any clues ?

>Anyway you should definitely get "luke". Browse the index you created!

Got Luke... Great to look into, will it help me with the sort problem ? =
Hmm


Take care,
Erlend

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 13:25:42 2005
Return-Path: <java-user-return-15743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8846 invoked from network); 5 Aug 2005 13:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 13:25:42 -0000
Received: (qmail 93134 invoked by uid 500); 5 Aug 2005 13:25:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93102 invoked by uid 500); 5 Aug 2005 13:25:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93067 invoked by uid 99); 5 Aug 2005 13:25:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 06:25:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.196 as permitted sender)
Received: from [64.233.162.196] (HELO zproxy.gmail.com) (64.233.162.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 06:25:17 -0700
Received: by zproxy.gmail.com with SMTP id n29so366661nzf
        for <java-user@lucene.apache.org>; Fri, 05 Aug 2005 06:25:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=HIfPSRRRy7Iga89KMT5asd63Dep57TNppjBtO5cmZvw132ESK29AsEfP/DhzCDfdHQOR+akSq8msK4P1ONNtp6X+7tRiRoOBH5AxTc3jeHE5ZBKGOkIR+89nhJKQmVl2x8I2/N0He6GBR1QrjUlaafTSZdHfha/Ldz4PolkT3po=
Received: by 10.36.251.4 with SMTP id y4mr1313474nzh;
        Fri, 05 Aug 2005 06:25:25 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 36sm1641987nzk.2005.08.05.06.25.25;
        Fri, 05 Aug 2005 06:25:25 -0700 (PDT)
Message-ID: <42F368B5.6090907@gmail.com>
Date: Fri, 05 Aug 2005 08:25:09 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: de pluralization
References: <B5ADCC4EA669BF4697F6AF63FF32867401914EE6@exch01.allegro.med>
In-Reply-To: <B5ADCC4EA669BF4697F6AF63FF32867401914EE6@exch01.allegro.med>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mufaddal Khumri wrote:

>Are there
>analyzers that do this already?
>
>  
>
Its not an analyzer, but the "norm" feature of this tool does a good job 
at getting to the normalized form of the words...

http://umlslex.nlm.nih.gov/lvg/current/

http://umlslex.nlm.nih.gov/lvg/current/docs/userDoc/norm.html

Creating an analyzer from it is fairly straightforward.


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 13:45:26 2005
Return-Path: <java-user-return-15744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15908 invoked from network); 5 Aug 2005 13:45:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 13:45:26 -0000
Received: (qmail 21850 invoked by uid 500); 5 Aug 2005 13:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21829 invoked by uid 500); 5 Aug 2005 13:45:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21816 invoked by uid 99); 5 Aug 2005 13:45:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 06:45:18 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.28] (HELO pop04.mail.atl.earthlink.net) (207.69.200.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 06:45:08 -0700
Received: from mswamui-valley.atl.sa.earthlink.net ([209.86.224.52])
	by pop04.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E12Ve-0001Oe-00
	for java-user@lucene.apache.org; Fri, 05 Aug 2005 09:45:14 -0400
Message-ID: <11396855.1123249514631.JavaMail.root@mswamui-valley.atl.sa.earthlink.net>
Date: Fri, 5 Aug 2005 08:45:14 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: de pluralization
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You might want to look at stemming for "de pluralization"  it boils down words to their "root"

So bombs and bomming get stemmed to bomb.

I'm using the snowball stemmer, which handles different languages as well as english.
It is in the sandbox.  
org.apache.lucene.analysis.snowball.SnowballFilter;

Hope this helps,

Andrew

-----Original Message-----
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
Sent: Aug 5, 2005 8:25 AM
To: java-user@lucene.apache.org
Subject: Re: de pluralization

Mufaddal Khumri wrote:

>Are there
>analyzers that do this already?
>
>  
>
Its not an analyzer, but the "norm" feature of this tool does a good job 
at getting to the normalized form of the words...

http://umlslex.nlm.nih.gov/lvg/current/

http://umlslex.nlm.nih.gov/lvg/current/docs/userDoc/norm.html

Creating an analyzer from it is fairly straightforward.


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 14:24:52 2005
Return-Path: <java-user-return-15745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30927 invoked from network); 5 Aug 2005 14:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 14:24:52 -0000
Received: (qmail 75070 invoked by uid 500); 5 Aug 2005 14:24:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75046 invoked by uid 500); 5 Aug 2005 14:24:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75032 invoked by uid 99); 5 Aug 2005 14:24:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 07:24:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 07:24:30 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j75EOcG6020542
	for <java-user@lucene.apache.org>; Fri, 5 Aug 2005 10:24:38 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IKR00G016P2ZQ@lmco.com> for java-user@lucene.apache.org; Fri, 05 Aug 2005 10:24:38 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IKR008GG6P1VB@lmco.com> for java-user@lucene.apache.org; Fri, 05 Aug 2005 10:24:38 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Fri,
 05 Aug 2005 10:24:37 -0400
Date: Fri, 05 Aug 2005 10:24:37 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Search shortly after adding a doc
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3929@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: Search shortly after adding a doc
Thread-Index: AcWZUrWSD+igK4R7T0GKVC2GMms4MQAdjzUw
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 05 Aug 2005 14:24:37.0925 (UTC) FILETIME=[6903A550:01C599C9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can try working with two indexes one for all of today's messages
which will be pretty small, and another for past messages. Then once a
day merge the small index to the big one and start fresh. This way you
need only to open an IndexReader for the small index while the big one
does not change.

HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: yahootintin.11533894@bloglines.com
[mailto:yahootintin.11533894@bloglines.com] 
Sent: Thursday, August 04, 2005 8:15 PM
To: java-user@lucene.apache.org
Subject: Search shortly after adding a doc

i want to use lucene to search shortly (within a second) after adding a
document.
 closing a writer to ensure the new document is written and then opening
an index reader seems to be too slow on large indexes.

how do other people
handle this?  

(i know this can be solved with a database but i'd like to use the
tokenization/stemming features of lucene).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 14:28:11 2005
Return-Path: <java-user-return-15746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31805 invoked from network); 5 Aug 2005 14:28:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 14:28:11 -0000
Received: (qmail 78896 invoked by uid 500); 5 Aug 2005 14:28:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78872 invoked by uid 500); 5 Aug 2005 14:28:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78859 invoked by uid 99); 5 Aug 2005 14:28:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 07:28:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 07:27:53 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j75ES1G6022212
	for <java-user@lucene.apache.org>; Fri, 5 Aug 2005 10:28:01 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IKR00J016UO0M@lmco.com> for java-user@lucene.apache.org; Fri, 05 Aug 2005 10:28:00 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IKR00I8D6UOA8@lmco.com> for java-user@lucene.apache.org; Fri, 05 Aug 2005 10:28:00 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Fri,
 05 Aug 2005 10:28:00 -0400
Date: Fri, 05 Aug 2005 10:27:59 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Split Search Word
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE392A@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: multipart/alternative; boundary="Boundary_(ID_dk59yDtXX4OVyTQbylxlyA)"
Thread-Topic: Split Search Word
Thread-Index: AcWZgT0p4d/68ZSgSp2Qbs0ARzosEQASHxVw
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 05 Aug 2005 14:28:00.0093 (UTC) FILETIME=[E18408D0:01C599C9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Boundary_(ID_dk59yDtXX4OVyTQbylxlyA)
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT

The StandardAnalyzer should work just fine with it, It will break the
search string to 5 search terms.
 
HTH
 
Aviran
http://www.aviransplace.com

  _____  

From: Karthik N S [mailto:karthik@controlnet.co.in] 
Sent: Friday, August 05, 2005 1:57 AM
To: LUCENE
Subject: Split Search Word



Hi Luceners

Apologies.....

I  have along Search String as given below...

 

SearchWord =  "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis
Gospodnetic"  +  "   " + "\"" + "Erik Hatcher" + "\""  + "  " + 
                           "Authors of " + "\"" + "Lucene In Action"
+"\"";

And prior to searching the Index ,I need the Words to be Split.

SearchWord   = 

   1)   "\"" + "Dough Cutting" + "\""  
   2)   "Otis Gospodnetic"
   3)  "\"" + "Erik Hatcher" + "\""  
   4)  "Authors of "
   5) "\"" +"Lucene In Action" +"\""

I am shure some Analyzer within Lucene is performin the task.
So some body please Tell me Howto 

[ I already used Analysis/Paralysis code to check ,but no help ]

 


WITH WARM REGARDS 
HAVE A NICE DAY 
[ N.S.KARTHIK] 


--Boundary_(ID_dk59yDtXX4OVyTQbylxlyA)--

From java-user-return-15747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 16:15:44 2005
Return-Path: <java-user-return-15747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76361 invoked from network); 5 Aug 2005 16:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 16:15:44 -0000
Received: (qmail 61365 invoked by uid 500); 5 Aug 2005 16:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61336 invoked by uid 500); 5 Aug 2005 16:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61323 invoked by uid 99); 5 Aug 2005 16:15:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 09:15:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 09:15:24 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Lock Issue
Date: Fri, 5 Aug 2005 12:15:32 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D131038B2BD2@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lock Issue
Thread-Index: AcWZgT0p4d/68ZSgSp2Qbs0ARzosEQASHxVwAAOjiYA=
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Howdy all,

	I am running some tests against our search.  I have created a
script that will run 30 simultaneous executions of 25 searches each.
The 25 searches are randomized but the same data is used.  I am
consistently getting "Lock obtain timed out:
Lock@/tmp/lucene-77053e9cdda0a530f729e71c09817ed5-commit.loc" errors
when running this.  I get it when I run less than 30 simultaneous as
well.

I don't understand why there would be a lock on a search lookup.  I am
not writing to the index just doing a lookup.

I'm sure I have overlooked some setting and please excuse the ignorance
here as I am still very new to this, but any advice would be helpful

Thanks,
Tom


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 05 16:18:43 2005
Return-Path: <java-user-return-15748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77361 invoked from network); 5 Aug 2005 16:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Aug 2005 16:18:42 -0000
Received: (qmail 66501 invoked by uid 500); 5 Aug 2005 16:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66365 invoked by uid 500); 5 Aug 2005 16:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66349 invoked by uid 99); 5 Aug 2005 16:18:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 09:18:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.193.196] (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 09:18:25 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id AE27A1777DB
	for <java-user@lucene.apache.org>; Fri,  5 Aug 2005 19:18:25 +0300 (EEST)
Message-ID: <42F3916D.3050408@i-hypergrid.com>
Date: Fri, 05 Aug 2005 19:18:53 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lock Issue
References: <14FBF41EF1411B45B2EC4ADEAC53D131038B2BD2@MAIL01.wescodist.com>
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D131038B2BD2@MAIL01.wescodist.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

index is locked when IndexReader is opening index. After that (when 
index structure is read) lock is released.

Aigner, Thomas wrote:

>Howdy all,
>
>	I am running some tests against our search.  I have created a
>script that will run 30 simultaneous executions of 25 searches each.
>The 25 searches are randomized but the same data is used.  I am
>consistently getting "Lock obtain timed out:
>Lock@/tmp/lucene-77053e9cdda0a530f729e71c09817ed5-commit.loc" errors
>when running this.  I get it when I run less than 30 simultaneous as
>well.
>
>I don't understand why there would be a lock on a search lookup.  I am
>not writing to the index just doing a lookup.
>
>I'm sure I have overlooked some setting and please excuse the ignorance
>here as I am still very new to this, but any advice would be helpful
>
>Thanks,
>Tom
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

-- 
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 06 04:05:28 2005
Return-Path: <java-user-return-15749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9799 invoked from network); 6 Aug 2005 04:05:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2005 04:05:27 -0000
Received: (qmail 28692 invoked by uid 500); 6 Aug 2005 04:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28626 invoked by uid 500); 6 Aug 2005 04:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28591 invoked by uid 99); 6 Aug 2005 04:05:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 21:05:11 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ncdram@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Aug 2005 21:05:00 -0700
Received: by wproxy.gmail.com with SMTP id 71so782840wri
        for <java-user@lucene.apache.org>; Fri, 05 Aug 2005 21:05:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=scfASDlUlCtUJFWrnO+lvQ8znDWWNcCrcXBTfaV67nxFXlZeTZYytU/D+HBM8lORpxhWMTrQQS01UbD9nWJPMlcnWmOqP3Vi/9fYgly+ksZHgC64jA8LAEWbJNg+5lxqSDFv6zCdn1QfkxE20VFm/wFry75lyROVLBrVLUaWdbs=
Received: by 10.54.13.77 with SMTP id 77mr3094752wrm;
        Fri, 05 Aug 2005 21:05:08 -0700 (PDT)
Received: by 10.54.69.9 with HTTP; Fri, 5 Aug 2005 21:05:07 -0700 (PDT)
Message-ID: <266987a0050805210522b817f8@mail.gmail.com>
Date: Sat, 6 Aug 2005 09:35:07 +0530
From: "N. C. Deepak Ramesh" <ncdram@gmail.com>
To: java-user@lucene.apache.org
Subject: Index design question
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_353_24722520.1123301107367"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_353_24722520.1123301107367
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi list,

Let me describe my issue taking a simpler model. Lets say I were to build a=
=20
blog which allows each post to have multiple keywords. I want to provide a=
=20
search over the posts but restricted to a subset of the keywords (say -=20
python, windows, etc.). How can I structure the index in this case. I had=
=20
though of 2 fields, one a list of keyword ids and the other for post=20
contents. (The reason why I go for keyword ids is because the keyword is a=
=20
foreign key whose string could be changed independent of the post). What do=
=20
you think?

Also, from a design orientation for the use case I described above, would i=
t=20
be better to go for something like tsearch2 (I use postgres) in this case=
=20
because keyword searching is just one way of searching in my app. The data=
=20
could be searched across many other fields which are being done by sql's.=
=20
Does it really help in using something like lucene because I am worried=20
about the burden of maintaing the 2 data repositories (db and lucene index)=
=20
in sync. I am asking this because if I go for tsearch2 the data is in only =
1=20
place and also updates, deletes to the data are handled for free by the db=
=20
for me.

Does anybody have any suggestion?

Regards,
=20
Deepak

------=_Part_353_24722520.1123301107367--

From java-user-return-15750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 06 08:51:55 2005
Return-Path: <java-user-return-15750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26536 invoked from network); 6 Aug 2005 08:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2005 08:51:38 -0000
Received: (qmail 63002 invoked by uid 500); 6 Aug 2005 08:51:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62977 invoked by uid 500); 6 Aug 2005 08:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62957 invoked by uid 99); 6 Aug 2005 08:51:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Aug 2005 01:51:08 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Aug 2005 01:50:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1B3B75B792; Sat,  6 Aug 2005 01:51:02 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 18A247F460
	for <java-user@lucene.apache.org>; Sat,  6 Aug 2005 01:51:02 -0700 (PDT)
Date: Sat, 6 Aug 2005 01:51:02 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Lock Issue
In-Reply-To: <42F3916D.3050408@i-hypergrid.com>
Message-ID: <Pine.LNX.4.58.0508060149340.28056@hal.rescomp.berkeley.edu>
References: <14FBF41EF1411B45B2EC4ADEAC53D131038B2BD2@MAIL01.wescodist.com>
 <42F3916D.3050408@i-hypergrid.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: index is locked when IndexReader is opening index. After that (when
: index structure is read) lock is released.

which means it sounds like your 30 threads are each trying to open
seperate searchers, which should be unneccessary.  Try opening one
(Singleton) searcher and having all of your threads us it.

: >Howdy all,
: >
: >	I am running some tests against our search.  I have created a
: >script that will run 30 simultaneous executions of 25 searches each.
: >The 25 searches are randomized but the same data is used.  I am
: >consistently getting "Lock obtain timed out:
: >Lock@/tmp/lucene-77053e9cdda0a530f729e71c09817ed5-commit.loc" errors
: >when running this.  I get it when I run less than 30 simultaneous as
: >well.
: >
: >I don't understand why there would be a lock on a search lookup.  I am
: >not writing to the index just doing a lookup.
: >
: >I'm sure I have overlooked some setting and please excuse the ignorance
: >here as I am still very new to this, but any advice would be helpful
: >
: >Thanks,
: >Tom
: >
: >
: >---------------------------------------------------------------------
: >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: >For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: >
:
: --
: regards,
: Volodymyr Bychkoviak
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 06 16:30:39 2005
Return-Path: <java-user-return-15751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76614 invoked from network); 6 Aug 2005 16:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2005 16:30:39 -0000
Received: (qmail 95414 invoked by uid 500); 6 Aug 2005 16:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95382 invoked by uid 500); 6 Aug 2005 16:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95369 invoked by uid 99); 6 Aug 2005 16:30:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Aug 2005 09:30:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.77] (HELO web31115.mail.mud.yahoo.com) (68.142.201.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 06 Aug 2005 09:30:23 -0700
Received: (qmail 28148 invoked by uid 60001); 6 Aug 2005 16:30:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Iuu709+K6fpAzaYMAfvqUUb8ruyWEsZmVDRcDHCddWgBs/znmErdD6th0kaK1lNZm3O7IhguwsZV1zIgxt5mwAS87S178IdXP1Dbwd9DasfpmuQ1fBdKi1OZED6l0P6M0bbZtKpjK9vTc7qYxxdOyC05PkBy6fNn5dRpl8oOV7I=  ;
Message-ID: <20050806163031.28146.qmail@web31115.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31115.mail.mud.yahoo.com via HTTP; Sat, 06 Aug 2005 09:30:31 PDT
Date: Sat, 6 Aug 2005 09:30:31 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index design question
To: java-user@lucene.apache.org
In-Reply-To: <266987a0050805210522b817f8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> Let me describe my issue taking a simpler model. Lets say I were to
> build a 
> blog which allows each post to have multiple keywords. I want to
> provide a 
> search over the posts but restricted to a subset of the keywords (say
> - 
> python, windows, etc.). How can I structure the index in this case. I
> had 
> though of 2 fields, one a list of keyword ids and the other for post 
> contents. (The reason why I go for keyword ids is because the keyword
> is a 
> foreign key whose string could be changed independent of the post).
> What do you think?

If you store only IDs in Lucene, you won't be able to search using
keywords (text).

> Also, from a design orientation for the use case I described above,
> would it 
> be better to go for something like tsearch2 (I use postgres) in this
> case 
> because keyword searching is just one way of searching in my app. The
> data 
> could be searched across many other fields which are being done by
> sql's. 
> Does it really help in using something like lucene because I am
> worried 
> about the burden of maintaing the 2 data repositories (db and lucene
> index) 
> in sync. I am asking this because if I go for tsearch2 the data is in
> only 1 
> place and also updates, deletes to the data are handled for free by
> the db 
> for me.
> 
> Does anybody have any suggestion?

It's up to you to pick the route.  Going to PG-only route probably
means less powerful searching.  Going PG+Lucene route means you have to
maintain PG and Lucene data in sync.  In my experience, doing the
latter is not very hard.  Another option to consider is talking to PG
people and exposing them to Lucene4c, which they may want to embed in
PostgreSQL.  That way you get PG+Lucene in a single package.

Otis

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/ -- Find it. Tag it. Share it.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 06 17:12:00 2005
Return-Path: <java-user-return-15752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83995 invoked from network); 6 Aug 2005 17:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2005 17:12:00 -0000
Received: (qmail 26163 invoked by uid 500); 6 Aug 2005 17:11:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25900 invoked by uid 500); 6 Aug 2005 17:11:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25887 invoked by uid 99); 6 Aug 2005 17:11:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Aug 2005 10:11:54 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ncdram@gmail.com designates 64.233.184.201 as permitted sender)
Received: from [64.233.184.201] (HELO wproxy.gmail.com) (64.233.184.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Aug 2005 10:11:45 -0700
Received: by wproxy.gmail.com with SMTP id 71so832904wri
        for <java-user@lucene.apache.org>; Sat, 06 Aug 2005 10:11:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H+56vCj0y1+xuMdxDBGT61WwIT/MTDfM/I2MX3yiPjly3ycoe256Xgu2u4rSlf19SY2+e/Ogjihaqu5WW4Ymfdi5+qvq6qkvXAuKPQFpJGJZ3W7rddacT859nln2LYysbvhGNKpIN9nacsq4LOMcdRoDTRF6YNVyZV3MGfwupGM=
Received: by 10.54.116.17 with SMTP id o17mr1461232wrc;
        Sat, 06 Aug 2005 10:11:53 -0700 (PDT)
Received: by 10.54.69.9 with HTTP; Sat, 6 Aug 2005 10:11:53 -0700 (PDT)
Message-ID: <266987a005080610111682c922@mail.gmail.com>
Date: Sat, 6 Aug 2005 22:41:53 +0530
From: "N. C. Deepak Ramesh" <ncdram@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index design question
In-Reply-To: <20050806163031.28146.qmail@web31115.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1190_27459604.1123348313323"
References: <266987a0050805210522b817f8@mail.gmail.com>
	 <20050806163031.28146.qmail@web31115.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1190_27459604.1123348313323
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

If you store only IDs in Lucene, you won't be able to search using
> keywords (text).


Let me explain better. Suppose I have an index field called categories whic=
h=20
contains a list of ids for each post. For example - 1 2 45 198. Now I can=
=20
search on the contents field but restricted to all posts under a particular=
=20
category by using -

"content:java and category:45 or 198".=20

Note - Not exact syntax but I hope you get the picture. Anything wrong with=
=20
this approach?

That way you get PG+Lucene in a single package.
>=20

That would be a killer combo.=20

But what I would like to know is if anybody on this list has used tsearch2=
=20
but later moved on to lucene because of reasons of speed, search=20
flexibility, etc.

Thanks,

Deepak

------=_Part_1190_27459604.1123348313323--

From java-user-return-15753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 06 17:57:38 2005
Return-Path: <java-user-return-15753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96018 invoked from network); 6 Aug 2005 17:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Aug 2005 17:57:38 -0000
Received: (qmail 59521 invoked by uid 500); 6 Aug 2005 17:57:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58640 invoked by uid 500); 6 Aug 2005 17:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58625 invoked by uid 99); 6 Aug 2005 17:57:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Aug 2005 10:57:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.42] (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 06 Aug 2005 10:57:22 -0700
Received: (qmail 99337 invoked by uid 60001); 6 Aug 2005 17:57:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TWbIcMEZRp65GVbXnImUiRjciRTLNIHA+gj7CegS1Z3eIZA5c2W3y0KiGtkOgWuA+U748H2KAy6it42i0ao4Wd4icrQBaSHybJC35VhcM0V4g07jNQyhjDJcXb8Jr6n8pc0mg+KmgdioTjoAYIOGP/fe1Xkk8kf9zMRhD3nW5IQ=  ;
Message-ID: <20050806175730.99335.qmail@web31109.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31109.mail.mud.yahoo.com via HTTP; Sat, 06 Aug 2005 10:57:30 PDT
Date: Sat, 6 Aug 2005 10:57:30 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index design question
To: java-user@lucene.apache.org
In-Reply-To: <266987a005080610111682c922@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> If you store only IDs in Lucene, you won't be able to search using
> > keywords (text).
> 
> 
> Let me explain better. Suppose I have an index field called
> categories which 
> contains a list of ids for each post. For example - 1 2 45 198. Now I
> can 
> search on the contents field but restricted to all posts under a
> particular 
> category by using -
> 
> "content:java and category:45 or 198". 
> 
> Note - Not exact syntax but I hope you get the picture. Anything
> wrong with this approach?

Nothing wrong with this approach.  You'll likely want/need to write
your own Analyzer to make sure your numeric IDs are not discarded (some
Analyzers discard them).  Perhaps you'll want to use
PerFieldAnalyzerWrapper.

> That way you get PG+Lucene in a single package.
> > 
> 
> That would be a killer combo. 
> 
> But what I would like to know is if anybody on this list has used
> tsearch2 
> but later moved on to lucene because of reasons of speed, search 
> flexibility, etc.

Lots of people did that for reasons of speed, flexibility, as well as
disk usage.  If your application is a small one, you may be able to
stick with just PG.

Otis

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/ -- Find it. Tag it. Share it.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 11:47:14 2005
Return-Path: <java-user-return-15754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65200 invoked from network); 7 Aug 2005 11:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 11:47:13 -0000
Received: (qmail 97392 invoked by uid 500); 7 Aug 2005 11:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97364 invoked by uid 500); 7 Aug 2005 11:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97351 invoked by uid 99); 7 Aug 2005 11:47:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 04:47:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of newreaders@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 04:46:58 -0700
Received: by wproxy.gmail.com with SMTP id 71so910946wri
        for <java-user@lucene.apache.org>; Sun, 07 Aug 2005 04:47:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=KADQtJm7kt8anfe3Qtq3F2SUCfEG36A+v25qP55TkSlpK7XITKYfFRJrJRaJ1B+SOQ8H2O7ryDzKX9opfUDvVcE1rL8rOCfKjTGHNBoamycuAxeMiCmDOBv4pZRJ4Jif60FZEDX+MFDHa0OWacPo9xYeb/+ySNR9i05OicTn8MI=
Received: by 10.54.30.27 with SMTP id d27mr4048639wrd;
        Sun, 07 Aug 2005 04:47:07 -0700 (PDT)
Received: by 10.54.116.16 with HTTP; Sun, 7 Aug 2005 04:47:07 -0700 (PDT)
Message-ID: <5f4a646105080704477d6036fe@mail.gmail.com>
Date: Sun, 7 Aug 2005 21:47:07 +1000
From: Ben <newreaders@gmail.com>
To: Lucene <java-user@lucene.apache.org>
Subject: Count the total # of docs in the index?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Is it possible to count the total number of documents in the index
without requesting a search? I would like to count the total documents
in the index within a date range.

Thanks,
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 15:06:49 2005
Return-Path: <java-user-return-15755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96209 invoked from network); 7 Aug 2005 15:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 15:06:49 -0000
Received: (qmail 73286 invoked by uid 500); 7 Aug 2005 15:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73249 invoked by uid 500); 7 Aug 2005 15:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73235 invoked by uid 99); 7 Aug 2005 15:06:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 08:06:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 08:06:32 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AB9CE13E2007; Sun,  7 Aug 2005 11:06:40 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 4137413E2006
	for <java-user@lucene.apache.org>; Sun,  7 Aug 2005 11:06:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <5f4a646105080704477d6036fe@mail.gmail.com>
References: <5f4a646105080704477d6036fe@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2362AEE4-BA99-49E0-8CBD-EB0FCE9276B8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Count the total # of docs in the index?
Date: Sun, 7 Aug 2005 11:06:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You've asked to different questions - you can use IndexReader.numDocs 
() to find the total number of documents.

Within a date range - how did you index the dates?  If the dates are  
in lexicographical order, you can walk all the terms in that range  
using TermEnum from IndexReader.terms(Term t) where t is the first  
term in the date range.  You will then need to get the termDocs(t)  
for each of the matching terms.  So it is possible without a search.

     Erik


On Aug 7, 2005, at 7:47 AM, Ben wrote:

> Hi
>
> Is it possible to count the total number of documents in the index
> without requesting a search? I would like to count the total documents
> in the index within a date range.
>
> Thanks,
> Ben
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 16:17:44 2005
Return-Path: <java-user-return-15756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6800 invoked from network); 7 Aug 2005 16:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 16:17:43 -0000
Received: (qmail 10226 invoked by uid 500); 7 Aug 2005 16:17:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10197 invoked by uid 500); 7 Aug 2005 16:17:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10184 invoked by uid 99); 7 Aug 2005 16:17:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 09:17:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 09:17:28 -0700
Received: by wproxy.gmail.com with SMTP id i4so58379wra
        for <java-user@lucene.apache.org>; Sun, 07 Aug 2005 09:17:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=e8M8TcekK6gO24kuhYMdFP7czFCTwTZztYM0aCPAJJvPMtIucoIMmrC9FfqPozsKoYnkISMsi91S9/J32rwmXSiMeAPoDh6xr9D2NiMqtyCztwRm6xnIb4NZG+dORMImqyVhfUtNEz+LiASZ6I3pGT/VAGG0tZ82Y66ej5Wt1ZQ=
Received: by 10.54.54.39 with SMTP id c39mr4286737wra;
        Sun, 07 Aug 2005 09:17:37 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Sun, 7 Aug 2005 09:17:37 -0700 (PDT)
Message-ID: <8a484a7805080709175c18cd27@mail.gmail.com>
Date: Sun, 7 Aug 2005 18:17:37 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: binary of highlighting?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Where can I get the binary of all the classes for highlighting?

thx
--=20
Riccardo Daviddi
University of Siena - Information Engeneering
rdaviddi@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 17:05:26 2005
Return-Path: <java-user-return-15757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12386 invoked from network); 7 Aug 2005 17:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 17:05:26 -0000
Received: (qmail 31296 invoked by uid 500); 7 Aug 2005 17:05:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31276 invoked by uid 500); 7 Aug 2005 17:05:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31263 invoked by uid 99); 7 Aug 2005 17:05:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 10:05:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 10:05:09 -0700
Received: by wproxy.gmail.com with SMTP id i4so62379wra
        for <java-user@lucene.apache.org>; Sun, 07 Aug 2005 10:05:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GJQTKWpSEEWZd0XY7qmWxfEDA2QJpE6bJ1FhakA3ZdSQUGL3tTC247S3j60gNUcfkjerU8hp2TPzrJLFPnNynOHurcqBuaZiBQd3m2rOm+UAq6TCPqoFgbKg51VBVUgT3Gik6IJ7qUqji+2/+8lM8IFlIIqsm8lNkVQPFMr+95I=
Received: by 10.54.54.39 with SMTP id c39mr4316930wra;
        Sun, 07 Aug 2005 10:05:18 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Sun, 7 Aug 2005 10:05:18 -0700 (PDT)
Message-ID: <8a484a780508071005341a4a71@mail.gmail.com>
Date: Sun, 7 Aug 2005 19:05:18 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
In-Reply-To: <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805080404346657105b@mail.gmail.com>
	 <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't know where I am wrong...

I just do this:

IndexWriter writer =3D new IndexWriter(indexDir, new StandardAnalyzer(),
                                           !IndexReader.indexExists(indexDi=
r));
writer.setUseCompoundFile(true);
Document document =3D new Document();
document.add(Field.Keyword("DocId", Integer.toString(docId)));
Field f =3D Field.Text("boostfield", "text");
f.setBoost(3.0f);
document.add(f);
writer.addDocument(document);
        writer.optimize();
        writer.close();

if then i try to get the boost factor of the boostfield=20

System.out.println(IndexReader.open(indexDir).document(0).getField("boostfi=
eld").getBoost());

for the only one document indexed I get 1.0 instead of 3.0!

where is the error?

thx

On 8/4/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Yes. use 1.2f there.  That method accepts floats, not doubles.  That
> could be an error in the Lucene book.
>=20
> Otis
>=20
>=20
> --- Riccardo Daviddi <rdaviddi@gmail.com> wrote:
>=20
> > Why I got this error by writing for example:
> >
> > Field senderNameField =3D Field.Text("senderName", senderName);
> > Field subjectField =3D Field.Text("subject", subject);
> > subjectField.setBoost(1.2);
> >
> > as in the manual lucene in action??
> >
> > 1.2 is a double, but the method wants a float?
> > --
> > Riccardo Daviddi
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi
University of Siena - Information Engeneering
rdaviddi@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 17:23:41 2005
Return-Path: <java-user-return-15758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14880 invoked from network); 7 Aug 2005 17:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 17:23:41 -0000
Received: (qmail 46554 invoked by uid 500); 7 Aug 2005 17:23:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46304 invoked by uid 500); 7 Aug 2005 17:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46291 invoked by uid 99); 7 Aug 2005 17:23:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 10:23:36 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.43] (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 07 Aug 2005 10:23:24 -0700
Received: (qmail 91924 invoked by uid 60001); 7 Aug 2005 17:23:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=uVEhtrRCBsJ2K7p5Hb47q2SIpZ6XsfhnwVEl30plbRAt8c+5oxjl7yWSZGgzBxWK3JsIaCEv82r9KnjEpFpLBqUemdRxY2eCpRmHAqtreMDuS/oB6HDFy3DdSYJLjrA4aIUeOKcvW/aht7gjsbY8k1OzpnujG80o40oucbaDArU=  ;
Message-ID: <20050807172332.91922.qmail@web31110.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31110.mail.mud.yahoo.com via HTTP; Sun, 07 Aug 2005 10:23:32 PDT
Date: Sun, 7 Aug 2005 10:23:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
To: java-user@lucene.apache.org
In-Reply-To: <8a484a780508071005341a4a71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A Lucene Highlighter Jar is included in the Lucene in Action code.
The link to downloadable code is at http://lucenebook.com/

Otis

--- Riccardo Daviddi <rdaviddi@gmail.com> wrote:

> I don't know where I am wrong...
> 
> I just do this:
> 
> IndexWriter writer = new IndexWriter(indexDir, new
> StandardAnalyzer(),
>                                           
> !IndexReader.indexExists(indexDir));
> writer.setUseCompoundFile(true);
> Document document = new Document();
> document.add(Field.Keyword("DocId", Integer.toString(docId)));
> Field f = Field.Text("boostfield", "text");
> f.setBoost(3.0f);
> document.add(f);
> writer.addDocument(document);
>         writer.optimize();
>         writer.close();
> 
> if then i try to get the boost factor of the boostfield 
> 
>
System.out.println(IndexReader.open(indexDir).document(0).getField("boostfield").getBoost());
> 
> for the only one document indexed I get 1.0 instead of 3.0!
> 
> where is the error?
> 
> thx
> 
> On 8/4/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Yes. use 1.2f there.  That method accepts floats, not doubles. 
> That
> > could be an error in the Lucene book.
> > 
> > Otis
> > 
> > 
> > --- Riccardo Daviddi <rdaviddi@gmail.com> wrote:
> > 
> > > Why I got this error by writing for example:
> > >
> > > Field senderNameField = Field.Text("senderName", senderName);
> > > Field subjectField = Field.Text("subject", subject);
> > > subjectField.setBoost(1.2);
> > >
> > > as in the manual lucene in action??
> > >
> > > 1.2 is a double, but the method wants a float?
> > > --
> > > Riccardo Daviddi
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> -- 
> Riccardo Daviddi
> University of Siena - Information Engeneering
> rdaviddi@gmail.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 17:44:33 2005
Return-Path: <java-user-return-15759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19159 invoked from network); 7 Aug 2005 17:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 17:44:33 -0000
Received: (qmail 57082 invoked by uid 500); 7 Aug 2005 17:44:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57057 invoked by uid 500); 7 Aug 2005 17:44:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57044 invoked by uid 99); 7 Aug 2005 17:44:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 10:44:29 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 10:44:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BE97E5B783; Sun,  7 Aug 2005 10:44:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BBFB97F460
	for <java-user@lucene.apache.org>; Sun,  7 Aug 2005 10:44:24 -0700 (PDT)
Date: Sun, 7 Aug 2005 10:44:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: setBoost(float) in org.apache.lucene.document.Field cannot be
 applied to (double)???
In-Reply-To: <8a484a780508071005341a4a71@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0508071041280.27905@hal.rescomp.berkeley.edu>
References: <8a484a7805080404346657105b@mail.gmail.com> 
 <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com>
 <8a484a780508071005341a4a71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: Field f = Field.Text("boostfield", "text");
: f.setBoost(3.0f);
: document.add(f);

: if then i try to get the boost factor of the boostfield
:
: System.out.println(IndexReader.open(indexDir).document(0).getField("boostfield").getBoost());
:
: for the only one document indexed I get 1.0 instead of 3.0!
:
: where is the error?

Did you read the documentation for getBoost?

http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Document.html#getBoost()

if you search past messages for getBoost and setBoost you should be able
to find some explanations of how Document based boosts (as opposed to
Query boosts) are used at indexing time.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 17:52:40 2005
Return-Path: <java-user-return-15760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19993 invoked from network); 7 Aug 2005 17:52:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 17:52:39 -0000
Received: (qmail 59733 invoked by uid 500); 7 Aug 2005 17:52:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59703 invoked by uid 500); 7 Aug 2005 17:52:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59690 invoked by uid 99); 7 Aug 2005 17:52:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 10:52:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.196 as permitted sender)
Received: from [64.233.184.196] (HELO wproxy.gmail.com) (64.233.184.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 10:52:24 -0700
Received: by wproxy.gmail.com with SMTP id 69so347284wri
        for <java-user@lucene.apache.org>; Sun, 07 Aug 2005 10:52:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JJheq6i83AFbHFZhSsXDE6cnKjp3v4COrVqi7bspbzyDL6FMqq0utn3vgwkKf79WorJRCCrKiIBRH5eihOpZ4XurCiYF19dxvJC009yG/HAIPn3IlmNBhGePGJU4AjyAjdLczQ3R7olvDmInffgsR+fj9H++BDhKfSCov0kNdIY=
Received: by 10.54.158.13 with SMTP id g13mr4343062wre;
        Sun, 07 Aug 2005 10:52:33 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Sun, 7 Aug 2005 10:52:33 -0700 (PDT)
Message-ID: <8a484a7805080710526a4cefb1@mail.gmail.com>
Date: Sun, 7 Aug 2005 19:52:33 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
In-Reply-To: <Pine.LNX.4.58.0508071041280.27905@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805080404346657105b@mail.gmail.com>
	 <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com>
	 <8a484a780508071005341a4a71@mail.gmail.com>
	 <Pine.LNX.4.58.0508071041280.27905@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah, ok.

So what I am doing is correct, just the way to see the boost factor
was uncorrect.

sorry if I do newbie questions...

On 8/7/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : Field f =3D Field.Text("boostfield", "text");
> : f.setBoost(3.0f);
> : document.add(f);
>=20
> : if then i try to get the boost factor of the boostfield
> :
> : System.out.println(IndexReader.open(indexDir).document(0).getField("boo=
stfield").getBoost());
> :
> : for the only one document indexed I get 1.0 instead of 3.0!
> :
> : where is the error?
>=20
> Did you read the documentation for getBoost?
>=20
> http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Documen=
t.html#getBoost()
>=20
> if you search past messages for getBoost and setBoost you should be able
> to find some explanations of how Document based boosts (as opposed to
> Query boosts) are used at indexing time.
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi
University of Siena - Information Engeneering
rdaviddi@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 21:53:57 2005
Return-Path: <java-user-return-15761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64551 invoked from network); 7 Aug 2005 21:53:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 21:53:57 -0000
Received: (qmail 93795 invoked by uid 500); 7 Aug 2005 21:53:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93383 invoked by uid 500); 7 Aug 2005 21:53:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93370 invoked by uid 99); 7 Aug 2005 21:53:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 14:53:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 14:53:41 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7565D13E2007; Sun,  7 Aug 2005 17:53:46 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 8830113E2006
	for <java-user@lucene.apache.org>; Sun,  7 Aug 2005 17:53:02 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <8a484a7805080709175c18cd27@mail.gmail.com>
References: <8a484a7805080709175c18cd27@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AC9CF63D-E075-4B45-B3AB-AF7FBB1E93DC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: binary of highlighting?
Date: Sun, 7 Aug 2005 17:52:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 7, 2005, at 12:17 PM, Riccardo Daviddi wrote:
> Where can I get the binary of all the classes for highlighting?

There have never been any official releases of the Sandbox/contrib  
pieces (though that will change with Lucene 1.9/2.0 and beyond).  A  
Lucene 1.4.3 compatible binary exists within the Lucene in Action  
download available from http://www.lucenebook.com

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 22:17:14 2005
Return-Path: <java-user-return-15762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67807 invoked from network); 7 Aug 2005 22:17:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 22:17:14 -0000
Received: (qmail 9400 invoked by uid 500); 7 Aug 2005 22:17:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9140 invoked by uid 500); 7 Aug 2005 22:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9127 invoked by uid 99); 7 Aug 2005 22:17:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 15:17:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.19.185.234] (HELO mail.telparia.com) (67.19.185.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 15:16:58 -0700
Received: from [192.168.77.2] (68-65-6-113.bflony.adelphia.net [68.65.6.113])
	by mail.telparia.com (Postfix) with ESMTP id E6E0B5D84B2
	for <java-user@lucene.apache.org>; Sun,  7 Aug 2005 17:54:14 -0500 (CDT)
Message-ID: <42F6888D.9070308@cosmicrealms.com>
Date: Sun, 07 Aug 2005 18:17:49 -0400
From: Robert Schultz <robert@cosmicrealms.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: New Site Live Using Lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not sure if this is appropriate or not, but I just put live a web site 
that I have been working on for over a year, and it uses Lucene for all 
it's searching.

I have 46 million documents in 15 Lucene index's, although the vast 
majority of those consist of only a few words.
The Lucene index's take up about 6GB of space.

I wrote a Java daemon to listen on a socket, and accept connections from 
my PHP scripts in order to do the searching.

The results from Lucene include ID numbers that are linked up with MySQL 
records thus forming the resulting web page.

You can see the site here: http://csourcesearch.net

It's a website that allows you to search over 99 million lines of open 
source C/C++ code :)

Anyways, just wanted to say thanks a lot for such a great product (even 
if it is java *snicker*)

Thanks again Lucene! :)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 22:47:31 2005
Return-Path: <java-user-return-15763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72231 invoked from network); 7 Aug 2005 22:47:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 22:47:31 -0000
Received: (qmail 22016 invoked by uid 500); 7 Aug 2005 22:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21991 invoked by uid 500); 7 Aug 2005 22:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21978 invoked by uid 99); 7 Aug 2005 22:47:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 15:47:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 15:47:16 -0700
Received: by wproxy.gmail.com with SMTP id 71so957560wri
        for <java-user@lucene.apache.org>; Sun, 07 Aug 2005 15:47:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=icxHijgWROXvUjqGehFcNevXZtV6liiHbXFoGy+Q52TjlBhr1uB/xe4+5KH3qmt3BlOiOaXOx9SX4HFtVWhdE+XyZCOwPUUurM/NRRrEqk0ZnhVqMcMyq6Z6DnnyARUTn5rSJm8Eoj0knDSy6s2Hl3POu8zxiWQyw/PGulyR8Rc=
Received: by 10.54.52.27 with SMTP id z27mr914271wrz;
        Sun, 07 Aug 2005 15:47:24 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Sun, 7 Aug 2005 15:47:24 -0700 (PDT)
Message-ID: <6e3ae63105080715476a7aa68e@mail.gmail.com>
Date: Sun, 7 Aug 2005 17:47:24 -0500
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: New Site Live Using Lucene
In-Reply-To: <42F6888D.9070308@cosmicrealms.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42F6888D.9070308@cosmicrealms.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is cool!

Seems you parsed the C/C++ code. Is this easy to extend to other
languages, like Java?

And you choose to display the data stored in database, any reason for
that compared to reading it from Lucene index itself?

I feel using Lucene's highlighter may make it easier to read the search res=
ults.

--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net

On 8/7/05, Robert Schultz <robert@cosmicrealms.com> wrote:
> Not sure if this is appropriate or not, but I just put live a web site
> that I have been working on for over a year, and it uses Lucene for all
> it's searching.
>=20
> I have 46 million documents in 15 Lucene index's, although the vast
> majority of those consist of only a few words.
> The Lucene index's take up about 6GB of space.
>=20
> I wrote a Java daemon to listen on a socket, and accept connections from
> my PHP scripts in order to do the searching.
>=20
> The results from Lucene include ID numbers that are linked up with MySQL
> records thus forming the resulting web page.
>=20
> You can see the site here: http://csourcesearch.net
>=20
> It's a website that allows you to search over 99 million lines of open
> source C/C++ code :)
>=20
> Anyways, just wanted to say thanks a lot for such a great product (even
> if it is java *snicker*)
>=20
> Thanks again Lucene! :)
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 07 23:24:42 2005
Return-Path: <java-user-return-15764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77849 invoked from network); 7 Aug 2005 23:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Aug 2005 23:24:42 -0000
Received: (qmail 39885 invoked by uid 500); 7 Aug 2005 23:24:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39854 invoked by uid 500); 7 Aug 2005 23:24:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39834 invoked by uid 99); 7 Aug 2005 23:24:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 16:24:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.19.185.234] (HELO mail.telparia.com) (67.19.185.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 16:24:26 -0700
Received: from [192.168.77.2] (68-65-6-113.bflony.adelphia.net [68.65.6.113])
	by mail.telparia.com (Postfix) with ESMTP id 037285D8514
	for <java-user@lucene.apache.org>; Sun,  7 Aug 2005 19:01:41 -0500 (CDT)
Message-ID: <42F69874.8070308@cosmicrealms.com>
Date: Sun, 07 Aug 2005 19:25:40 -0400
From: Robert Schultz <robert@cosmicrealms.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: New Site Live Using Lucene
References: <42F6888D.9070308@cosmicrealms.com> <6e3ae63105080715476a7aa68e@mail.gmail.com>
In-Reply-To: <6e3ae63105080715476a7aa68e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yup, the C/C++ code is parsed using some templates I wrote utilizing 
CodeWorker.
It would be possible to do the same thing to any other language such as 
Java or PHP or Perl.
Although you'd need an expert understanding of that language's syntax in 
order to successfully parse it correctly :)

Initially Lucene was never part of the site.
I was using MySQL to store the data, and used MySQL's FULLTEXT searching.
However once I reached 25 million+ rows in a single table, MySQL's 
FULLTEXT searching ground to a halt.
After speaking with the MySQL folks, they told me to use Lucene as their 
FULLTEXT support doesn't scale well and Lucene is supposed to be one of 
the best engines around for that.

Since I was already several months into the project with the vast 
majority of the website written to use the MySQL database, converting 
entirely over to Lucene would have meant a complete code re-write.

I didn't want to do that so I combined both MySQL and Lucene and used both.

It took over 5 FULL MONTHS of 24/7 100% CPU time to PARSE the C/C++ code 
and insert it into the database.
And I only did 3,200 of the more than 25,000 projects I still need to parse.

In hindsight I might have chosen to house everything in Lucene, however 
it would be a major re-write at this point and I'm happy enough right 
now with my 'merged' approach of PHP, MySQL and Lucene.

Chris Lu wrote:
> This is cool!
> 
> Seems you parsed the C/C++ code. Is this easy to extend to other
> languages, like Java?
> 
> And you choose to display the data stored in database, any reason for
> that compared to reading it from Lucene index itself?
> 
> I feel using Lucene's highlighter may make it easier to read the search results.
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 03:57:20 2005
Return-Path: <java-user-return-15765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23635 invoked from network); 8 Aug 2005 03:57:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 03:57:20 -0000
Received: (qmail 85262 invoked by uid 500); 8 Aug 2005 03:57:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85233 invoked by uid 500); 8 Aug 2005 03:57:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85220 invoked by uid 99); 8 Aug 2005 03:57:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 20:57:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 07 Aug 2005 20:57:02 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IKVYL400.SFQ for <java-user@lucene.apache.org>; Mon, 8
          Aug 2005 09:47:28 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: Reply Split Search Word
Date: Mon, 8 Aug 2005 09:36:26 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKEEPJCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <92A278501EF50444AD3EE1FFB51219550BCE392A@emss10m03.rck.atm.lmco.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Luceners

Apologies.....

As I have already replied,Using Analysis I have tried on all Analyzers
(including Standard Analyzer)
But not able to achive the required COMPLETS WORD Split.

My I/p String would be a lengthy one as below

String sKey = "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis Gospodnetic"  +
"   " +
              "\"" + "Erik Hatcher" + "\""  + "  " +	"Authors of " + "\"" +
"Lucene In Action" + "\"";

The required split of complete words should return

   1) "Dough Cutting"
   2) Otis Gospodnetic
   3) "Erik Hatcher"
   4) Authors of
   5) "Lucene In Action"

Plz Note :- Words with "\"" are complete split words....

I am shure some Analyzer code inside Lucene is handling this task.


som how can one achive this task..

with regards
Karthik

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Friday, August 05, 2005 7:58 PM
To: java-user@lucene.apache.org
Subject: RE: Split Search Word


The StandardAnalyzer should work just fine with it, It will break the
search string to 5 search terms.

HTH

Aviran
http://www.aviransplace.com

  _____

From: Karthik N S [mailto:karthik@controlnet.co.in]
Sent: Friday, August 05, 2005 1:57 AM
To: LUCENE
Subject: Split Search Word



Hi Luceners

Apologies.....

I  have along Search String as given below...



SearchWord =  "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis
Gospodnetic"  +  "   " + "\"" + "Erik Hatcher" + "\""  + "  " +
                           "Authors of " + "\"" + "Lucene In Action"
+"\"";

And prior to searching the Index ,I need the Words to be Split.

SearchWord   =

   1)   "\"" + "Dough Cutting" + "\""
   2)   "Otis Gospodnetic"
   3)  "\"" + "Erik Hatcher" + "\""
   4)  "Authors of "
   5) "\"" +"Lucene In Action" +"\""

I am shure some Analyzer within Lucene is performin the task.
So some body please Tell me Howto

[ I already used Analysis/Paralysis code to check ,but no help ]




WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 05:31:09 2005
Return-Path: <java-user-return-15766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44533 invoked from network); 8 Aug 2005 05:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 05:31:08 -0000
Received: (qmail 53217 invoked by uid 500); 8 Aug 2005 05:31:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53193 invoked by uid 500); 8 Aug 2005 05:31:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53180 invoked by uid 99); 8 Aug 2005 05:31:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 22:31:02 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Aug 2005 22:30:49 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 193C85B792; Sun,  7 Aug 2005 22:30:53 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 168087F460
	for <java-user@lucene.apache.org>; Sun,  7 Aug 2005 22:30:53 -0700 (PDT)
Date: Sun, 7 Aug 2005 22:30:53 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: New Site Live Using Lucene
In-Reply-To: <6e3ae63105080715476a7aa68e@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0508072226060.2972@hal.rescomp.berkeley.edu>
References: <42F6888D.9070308@cosmicrealms.com> <6e3ae63105080715476a7aa68e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I feel using Lucene's highlighter may make it easier to read the search
: results.

I'm of the opinion that since the result pages are all source code, syntax
highlighting is definitely the way to go, but given the existing
presentation, it does seem like it would make sense to "highlight" the
lines containing results by emphasising those line numbers ... perhaps by
bolding or chaning the color of the line number (since that doesn't affect
the syntax highlighting of the code).  I would also suggest listing the
line number(s) of matches at the top of hte page as links to local (named)
anchors (one per line number with a match).


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 09:46:13 2005
Return-Path: <java-user-return-15767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23667 invoked from network); 8 Aug 2005 09:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 09:46:13 -0000
Received: (qmail 40285 invoked by uid 500); 8 Aug 2005 09:46:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40264 invoked by uid 500); 8 Aug 2005 09:46:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40243 invoked by uid 99); 8 Aug 2005 09:46:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 02:46:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 02:46:29 -0700
Received: by wproxy.gmail.com with SMTP id 69so441506wri
        for <java-user@lucene.apache.org>; Mon, 08 Aug 2005 02:46:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cTTN+iQk12ZvYmTN/jEXQg+M0MspdgK2Z/DInczMUv1FAgopHaSUooM8xon0tcNfeMRVqLZ+Qmgogy2N+nqis8R3z3hjzWyP+qqwCL3cFHLU8CGN2nzG4VAOZnXx14yCUjPxXdjV7n/3yLBMchWhq4oMHhi+/uP8uQE8PVWE2ww=
Received: by 10.54.29.72 with SMTP id c72mr4681714wrc;
        Mon, 08 Aug 2005 02:46:04 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Mon, 8 Aug 2005 02:46:04 -0700 (PDT)
Message-ID: <8a484a7805080802464ff1654@mail.gmail.com>
Date: Mon, 8 Aug 2005 11:46:04 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: binary of highlighting?
In-Reply-To: <AC9CF63D-E075-4B45-B3AB-AF7FBB1E93DC@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805080709175c18cd27@mail.gmail.com>
	 <AC9CF63D-E075-4B45-B3AB-AF7FBB1E93DC@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thank you!

On 8/7/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Aug 7, 2005, at 12:17 PM, Riccardo Daviddi wrote:
> > Where can I get the binary of all the classes for highlighting?
>=20
> There have never been any official releases of the Sandbox/contrib
> pieces (though that will change with Lucene 1.9/2.0 and beyond).  A
> Lucene 1.4.3 compatible binary exists within the Lucene in Action
> download available from http://www.lucenebook.com
>=20
>     Erik
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi
University of Siena - Information Engeneering
rdaviddi@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 10:54:00 2005
Return-Path: <java-user-return-15768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57150 invoked from network); 8 Aug 2005 10:54:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 10:54:00 -0000
Received: (qmail 1028 invoked by uid 500); 8 Aug 2005 10:53:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 995 invoked by uid 500); 8 Aug 2005 10:53:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 982 invoked by uid 99); 8 Aug 2005 10:53:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 03:53:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 03:54:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 82B3A13E2007; Mon,  8 Aug 2005 06:53:49 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 9F95813E2006
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 06:53:18 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKEEPJCEAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKEEPJCEAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EA9DC327-2971-49BC-A02E-5C3750EF1B99@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Reply Split Search Word
Date: Mon, 8 Aug 2005 06:53:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

To have an analyzer split that string into 1-5 as you have listed  
will require you write a custom Analyzer to tokenize with double  
quotes in mind like that.

     Erik

On Aug 8, 2005, at 12:06 AM, Karthik N S wrote:

> Hi
>
> Luceners
>
> Apologies.....
>
> As I have already replied,Using Analysis I have tried on all Analyzers
> (including Standard Analyzer)
> But not able to achive the required COMPLETS WORD Split.
>
> My I/p String would be a lengthy one as below
>
> String sKey = "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis  
> Gospodnetic"  +
> "   " +
>               "\"" + "Erik Hatcher" + "\""  + "  " +    "Authors of  
> " + "\"" +
> "Lucene In Action" + "\"";
>
> The required split of complete words should return
>
>    1) "Dough Cutting"
>    2) Otis Gospodnetic
>    3) "Erik Hatcher"
>    4) Authors of
>    5) "Lucene In Action"
>
> Plz Note :- Words with "\"" are complete split words....
>
> I am shure some Analyzer code inside Lucene is handling this task.
>
>
> som how can one achive this task..
>
> with regards
> Karthik
>
> -----Original Message-----
> From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
> Sent: Friday, August 05, 2005 7:58 PM
> To: java-user@lucene.apache.org
> Subject: RE: Split Search Word
>
>
> The StandardAnalyzer should work just fine with it, It will break the
> search string to 5 search terms.
>
> HTH
>
> Aviran
> http://www.aviransplace.com
>
>   _____
>
> From: Karthik N S [mailto:karthik@controlnet.co.in]
> Sent: Friday, August 05, 2005 1:57 AM
> To: LUCENE
> Subject: Split Search Word
>
>
>
> Hi Luceners
>
> Apologies.....
>
> I  have along Search String as given below...
>
>
>
> SearchWord =  "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis
> Gospodnetic"  +  "   " + "\"" + "Erik Hatcher" + "\""  + "  " +
>                            "Authors of " + "\"" + "Lucene In Action"
> +"\"";
>
> And prior to searching the Index ,I need the Words to be Split.
>
> SearchWord   =
>
>    1)   "\"" + "Dough Cutting" + "\""
>    2)   "Otis Gospodnetic"
>    3)  "\"" + "Erik Hatcher" + "\""
>    4)  "Authors of "
>    5) "\"" +"Lucene In Action" +"\""
>
> I am shure some Analyzer within Lucene is performin the task.
> So some body please Tell me Howto
>
> [ I already used Analysis/Paralysis code to check ,but no help ]
>
>
>
>
> WITH WARM REGARDS
> HAVE A NICE DAY
> [ N.S.KARTHIK]
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 11:30:08 2005
Return-Path: <java-user-return-15769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79710 invoked from network); 8 Aug 2005 11:30:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 11:30:07 -0000
Received: (qmail 45462 invoked by uid 500); 8 Aug 2005 11:30:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45441 invoked by uid 500); 8 Aug 2005 11:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45417 invoked by uid 99); 8 Aug 2005 11:30:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 04:30:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.32.221.50] (HELO mail.lou.emergint.com) (64.32.221.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 04:30:23 -0700
Content-class: urn:content-classes:message
Subject: RE: New Site Live Using Lucene
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 8 Aug 2005 07:30:24 -0400
Message-ID: <6C1FF371E2319F45BABA49F9BA1BD0391B1E98@mail.lou.emergint.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: New Site Live Using Lucene
thread-index: AcWbncURyT8D2hOEQaOcFiUQCYv4HwAbqBrg
From: "Kevin L. Cobb" <kevin.cobb@emergint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Open Source C/C++ only? When are you going to include Open Source Java?
We demand fair treatmant ;)


=20

-----Original Message-----
From: Robert Schultz [mailto:robert@cosmicrealms.com]=20
Sent: Sunday, August 07, 2005 6:18 PM
To: java-user@lucene.apache.org
Subject: New Site Live Using Lucene

Not sure if this is appropriate or not, but I just put live a web site
that I have been working on for over a year, and it uses Lucene for all
it's searching.

I have 46 million documents in 15 Lucene index's, although the vast
majority of those consist of only a few words.
The Lucene index's take up about 6GB of space.

I wrote a Java daemon to listen on a socket, and accept connections from
my PHP scripts in order to do the searching.

The results from Lucene include ID numbers that are linked up with MySQL
records thus forming the resulting web page.

You can see the site here: http://csourcesearch.net

It's a website that allows you to search over 99 million lines of open
source C/C++ code :)

Anyways, just wanted to say thanks a lot for such a great product (even
if it is java *snicker*)

Thanks again Lucene! :)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 11:33:14 2005
Return-Path: <java-user-return-15770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81334 invoked from network); 8 Aug 2005 11:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 11:33:14 -0000
Received: (qmail 52259 invoked by uid 500); 8 Aug 2005 11:33:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52230 invoked by uid 500); 8 Aug 2005 11:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52216 invoked by uid 99); 8 Aug 2005 11:33:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 04:33:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 04:33:30 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 40499E47E4
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 13:33:05 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 2C27AE47DF
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 13:33:05 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <42F229C7.4030007@programmfabrik.de>
References: <42F229C7.4030007@programmfabrik.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <06451662eb611395aeee8800ba74cdf4@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: performance: gcj, sun, ibm ?
Date: Mon, 8 Aug 2005 13:33:04 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I heard recently that the Wikipedia team actually switched off of using=20=

Java lucene because of Java licenses (which we know isn't that perfect)=20=

and went on to .NET mono (or something like this) where an=20
implementation of Lucene has been fine and stable, more stable than=20
using gcc, it seems.

paul


Le 4 ao=FBt 05, =E0 16:44, Martin Rode a =E9crit :

> hello all,
>
> lucene is already pretty fast, but i was wondering if you guys have=20
> experience with using gcj (on linux). how much faster is it for=20
> indexing? personally i have best performance with java-ibm, at least=20=

> under linux.
>
> it would be interesting to hear how your experiences are.
>
> thanks in advance,
> martin
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 11:34:53 2005
Return-Path: <java-user-return-15771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81868 invoked from network); 8 Aug 2005 11:34:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 11:34:52 -0000
Received: (qmail 53949 invoked by uid 500); 8 Aug 2005 11:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53726 invoked by uid 500); 8 Aug 2005 11:34:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53713 invoked by uid 99); 8 Aug 2005 11:34:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 04:34:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Aug 2005 04:35:10 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IKWJRR00.NJX for <java-user@lucene.apache.org>; Mon, 8
          Aug 2005 17:25:03 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: Reply Split Search Word
Date: Mon, 8 Aug 2005 17:14:01 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKEEPNCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <EA9DC327-2971-49BC-A02E-5C3750EF1B99@ehatchersolutions.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik

   I  would like to reformat the Question  slightly ,
   Words without double Quotes may also be present in the String.
   Also I have to apply the STOP - Analyzer  to filter out common English
words appearing within.

Do u mind giving me a bit of src hint for the same...
[ I am googled out of ideas ]


with regards
karthik


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Monday, August 08, 2005 4:23 PM
To: java-user@lucene.apache.org
Subject: Re: Reply Split Search Word


To have an analyzer split that string into 1-5 as you have listed
will require you write a custom Analyzer to tokenize with double
quotes in mind like that.

     Erik

On Aug 8, 2005, at 12:06 AM, Karthik N S wrote:

> Hi
>
> Luceners
>
> Apologies.....
>
> As I have already replied,Using Analysis I have tried on all Analyzers
> (including Standard Analyzer)
> But not able to achive the required COMPLETS WORD Split.
>
> My I/p String would be a lengthy one as below
>
> String sKey = "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis
> Gospodnetic"  +
> "   " +
>               "\"" + "Erik Hatcher" + "\""  + "  " +    "Authors of
> " + "\"" +
> "Lucene In Action" + "\"";
>
> The required split of complete words should return
>
>    1) "Dough Cutting"
>    2) Otis Gospodnetic
>    3) "Erik Hatcher"
>    4) Authors of
>    5) "Lucene In Action"
>
> Plz Note :- Words with "\"" are complete split words....
>
> I am shure some Analyzer code inside Lucene is handling this task.
>
>
> som how can one achive this task..
>
> with regards
> Karthik
>
> -----Original Message-----
> From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
> Sent: Friday, August 05, 2005 7:58 PM
> To: java-user@lucene.apache.org
> Subject: RE: Split Search Word
>
>
> The StandardAnalyzer should work just fine with it, It will break the
> search string to 5 search terms.
>
> HTH
>
> Aviran
> http://www.aviransplace.com
>
>   _____
>
> From: Karthik N S [mailto:karthik@controlnet.co.in]
> Sent: Friday, August 05, 2005 1:57 AM
> To: LUCENE
> Subject: Split Search Word
>
>
>
> Hi Luceners
>
> Apologies.....
>
> I  have along Search String as given below...
>
>
>
> SearchWord =  "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis
> Gospodnetic"  +  "   " + "\"" + "Erik Hatcher" + "\""  + "  " +
>                            "Authors of " + "\"" + "Lucene In Action"
> +"\"";
>
> And prior to searching the Index ,I need the Words to be Split.
>
> SearchWord   =
>
>    1)   "\"" + "Dough Cutting" + "\""
>    2)   "Otis Gospodnetic"
>    3)  "\"" + "Erik Hatcher" + "\""
>    4)  "Authors of "
>    5) "\"" +"Lucene In Action" +"\""
>
> I am shure some Analyzer within Lucene is performin the task.
> So some body please Tell me Howto
>
> [ I already used Analysis/Paralysis code to check ,but no help ]
>
>
>
>
> WITH WARM REGARDS
> HAVE A NICE DAY
> [ N.S.KARTHIK]
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 12:55:38 2005
Return-Path: <java-user-return-15772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23414 invoked from network); 8 Aug 2005 12:55:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 12:55:38 -0000
Received: (qmail 72745 invoked by uid 500); 8 Aug 2005 12:55:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72722 invoked by uid 500); 8 Aug 2005 12:55:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72709 invoked by uid 99); 8 Aug 2005 12:55:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 05:55:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 05:55:54 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 15A8E13E2006; Mon,  8 Aug 2005 08:55:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CBE2E13E2007
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 08:51:21 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKEEPNCEAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKEEPNCEAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7535A506-A551-4C14-84A0-B300E41440DA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Reply Split Search Word
Date: Mon, 8 Aug 2005 08:51:13 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 8, 2005, at 7:44 AM, Karthik N S wrote:
>    I  would like to reformat the Question  slightly ,
>    Words without double Quotes may also be present in the String.
>    Also I have to apply the STOP - Analyzer  to filter out common  
> English
> words appearing within.
>
> Do u mind giving me a bit of src hint for the same...
> [ I am googled out of ideas ]

Well, the Analyzers chapter in Lucene in Action will give you all the  
basics you need to write custom pieces of an analyzer :)

A custom Tokenizer is where you'll want to start with, perhaps,  
though there are other possibilities such as tokenizing quotes  
separately and then having a filter buffer when they are encountered  
and combine multiple tokens into one when within quotes.  The only  
hints I have would be examples from within Lucene's codebase itself.   
You'll need to maintain some state (whether within quotes or not),  
but otherwise it should be relatively straightforward.

To provide many more hints would require implementing it myself, I'm  
afraid.

     Erik


>
>
> with regards
> karthik
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, August 08, 2005 4:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Reply Split Search Word
>
>
> To have an analyzer split that string into 1-5 as you have listed
> will require you write a custom Analyzer to tokenize with double
> quotes in mind like that.
>
>      Erik
>
> On Aug 8, 2005, at 12:06 AM, Karthik N S wrote:
>
>
>> Hi
>>
>> Luceners
>>
>> Apologies.....
>>
>> As I have already replied,Using Analysis I have tried on all  
>> Analyzers
>> (including Standard Analyzer)
>> But not able to achive the required COMPLETS WORD Split.
>>
>> My I/p String would be a lengthy one as below
>>
>> String sKey = "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis
>> Gospodnetic"  +
>> "   " +
>>               "\"" + "Erik Hatcher" + "\""  + "  " +    "Authors of
>> " + "\"" +
>> "Lucene In Action" + "\"";
>>
>> The required split of complete words should return
>>
>>    1) "Dough Cutting"
>>    2) Otis Gospodnetic
>>    3) "Erik Hatcher"
>>    4) Authors of
>>    5) "Lucene In Action"
>>
>> Plz Note :- Words with "\"" are complete split words....
>>
>> I am shure some Analyzer code inside Lucene is handling this task.
>>
>>
>> som how can one achive this task..
>>
>> with regards
>> Karthik
>>
>> -----Original Message-----
>> From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
>> Sent: Friday, August 05, 2005 7:58 PM
>> To: java-user@lucene.apache.org
>> Subject: RE: Split Search Word
>>
>>
>> The StandardAnalyzer should work just fine with it, It will break the
>> search string to 5 search terms.
>>
>> HTH
>>
>> Aviran
>> http://www.aviransplace.com
>>
>>   _____
>>
>> From: Karthik N S [mailto:karthik@controlnet.co.in]
>> Sent: Friday, August 05, 2005 1:57 AM
>> To: LUCENE
>> Subject: Split Search Word
>>
>>
>>
>> Hi Luceners
>>
>> Apologies.....
>>
>> I  have along Search String as given below...
>>
>>
>>
>> SearchWord =  "\"" + "Dough Cutting" + "\"" +  "  " +  "Otis
>> Gospodnetic"  +  "   " + "\"" + "Erik Hatcher" + "\""  + "  " +
>>                            "Authors of " + "\"" + "Lucene In Action"
>> +"\"";
>>
>> And prior to searching the Index ,I need the Words to be Split.
>>
>> SearchWord   =
>>
>>    1)   "\"" + "Dough Cutting" + "\""
>>    2)   "Otis Gospodnetic"
>>    3)  "\"" + "Erik Hatcher" + "\""
>>    4)  "Authors of "
>>    5) "\"" +"Lucene In Action" +"\""
>>
>> I am shure some Analyzer within Lucene is performin the task.
>> So some body please Tell me Howto
>>
>> [ I already used Analysis/Paralysis code to check ,but no help ]
>>
>>
>>
>>
>> WITH WARM REGARDS
>> HAVE A NICE DAY
>> [ N.S.KARTHIK]
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 14:30:52 2005
Return-Path: <java-user-return-15773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69169 invoked from network); 8 Aug 2005 14:30:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 14:30:52 -0000
Received: (qmail 98168 invoked by uid 500); 8 Aug 2005 14:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98083 invoked by uid 500); 8 Aug 2005 14:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98014 invoked by uid 99); 8 Aug 2005 14:30:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 07:30:42 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fersher@hotmail.com designates 65.54.224.52 as permitted sender)
Received: from [65.54.224.52] (HELO hotmail.com) (65.54.224.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 07:31:03 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 8 Aug 2005 07:30:39 -0700
Message-ID: <BAY105-F42FEE820966AFE51BA33FCB2B80@phx.gbl>
Received: from 65.54.224.200 by by105fd.bay105.hotmail.msn.com with HTTP;
	Mon, 08 Aug 2005 14:30:39 GMT
X-Originating-IP: [65.54.224.200]
X-Originating-Email: [fersher@hotmail.com]
X-Sender: fersher@hotmail.com
From: "christopher may" <fersher@hotmail.com>
To: general-help@lucene.apache.org, java-user@lucene.apache.org
Subject: Excel Spreadsheet
Date: Mon, 08 Aug 2005 10:30:39 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 08 Aug 2005 14:30:39.0634 (UTC) FILETIME=[BFD94F20:01C59C25]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a spreadsheet with the first cell being the term and the next cells 
hold the description. Is there a way I can build this into the index easily 
or is this going to take a custom analyzer ? Any help or ideas would be 
greatly appreciated. Thanks



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 14:44:03 2005
Return-Path: <java-user-return-15774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74820 invoked from network); 8 Aug 2005 14:44:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 14:44:02 -0000
Received: (qmail 25818 invoked by uid 500); 8 Aug 2005 14:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25791 invoked by uid 500); 8 Aug 2005 14:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25778 invoked by uid 99); 8 Aug 2005 14:43:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 07:43:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO zproxy.gmail.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 07:44:19 -0700
Received: by zproxy.gmail.com with SMTP id i11so625622nzi
        for <java-user@lucene.apache.org>; Mon, 08 Aug 2005 07:43:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=dUbSdtX9Z0YkNSApLy8vIcv3ngSD+C+eg6CuI1rzvYeZuQZXYp8dXpL1Ex2TLXCzyGbdhM8Jrw6c81ZN+1Yugv6pzqvU0OYo4ZoxuFIpZkmy5OEuMCB8xyPG5Xs1Vz1CRPG/Xe6INhKeFFS9yYYqIMj7/8wwiZq2Qg2mr2DMAmE=
Received: by 10.36.91.15 with SMTP id o15mr2661289nzb;
        Mon, 08 Aug 2005 07:43:55 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 18sm7510469nzo.2005.08.08.07.43.54;
        Mon, 08 Aug 2005 07:43:55 -0700 (PDT)
Message-ID: <42F76FA9.10301@gmail.com>
Date: Mon, 08 Aug 2005 09:43:53 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Analyzer question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is my understanding that the StandardAnalyzer will remove underscores 
- so "some_word" be indexed as 'some' and 'word'.

I want to keep the underscores, so I was thinking of changing over to an 
Analyzer that uses the WhiteSpaceTokenizer, LowerCaseFilter, and StopFilter.

What other tokenizing magic will I lose by changing away from the 
StandardAnalyzer?

Thanks,

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 14:59:18 2005
Return-Path: <java-user-return-15775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80667 invoked from network); 8 Aug 2005 14:59:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 14:59:18 -0000
Received: (qmail 54876 invoked by uid 500); 8 Aug 2005 14:59:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54716 invoked by uid 500); 8 Aug 2005 14:59:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54703 invoked by uid 99); 8 Aug 2005 14:59:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 07:59:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 07:59:34 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AD24513E2006; Mon,  8 Aug 2005 10:59:08 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id CF8F513E2006
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 10:58:57 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <BAY105-F42FEE820966AFE51BA33FCB2B80@phx.gbl>
References: <BAY105-F42FEE820966AFE51BA33FCB2B80@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0E7A3D22-CCD5-4790-BD3C-7D15CAB35FB2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Excel Spreadsheet
Date: Mon, 8 Aug 2005 10:58:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.7 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 8, 2005, at 10:30 AM, christopher may wrote:
> I have a spreadsheet with the first cell being the term and the  
> next cells hold the description. Is there a way I can build this  
> into the index easily or is this going to take a custom analyzer ?  
> Any help or ideas would be greatly appreciated. Thanks

What are your searching needs?  That is the first question to ask  
yourself when deciding on an analyzer.  You will probably want to  
extract the cells separately and index them into separate fields, and  
you could start by trying the StandardAnalyzer to see if it meets  
your needs.  It is impossible to say for sure without seeing some  
details of what text you're dealing with and knowing how you want to  
search it.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 15:01:27 2005
Return-Path: <java-user-return-15776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81499 invoked from network); 8 Aug 2005 15:01:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 15:01:27 -0000
Received: (qmail 60599 invoked by uid 500); 8 Aug 2005 15:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60570 invoked by uid 500); 8 Aug 2005 15:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60542 invoked by uid 99); 8 Aug 2005 15:01:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 08:01:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 08:01:42 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6B49B13E2006; Mon,  8 Aug 2005 11:01:16 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1F42513E2007
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 11:01:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42F76FA9.10301@gmail.com>
References: <42F76FA9.10301@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <10320FAF-8067-4FDA-9F53-963CA70F24CE@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Analyzer question
Date: Mon, 8 Aug 2005 11:00:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 8, 2005, at 10:43 AM, Dan Armbrust wrote:
> It is my understanding that the StandardAnalyzer will remove  
> underscores - so "some_word" be indexed as 'some' and 'word'.
>
> I want to keep the underscores, so I was thinking of changing over  
> to an Analyzer that uses the WhiteSpaceTokenizer, LowerCaseFilter,  
> and StopFilter.
>
> What other tokenizing magic will I lose by changing away from the  
> StandardAnalyzer?

The best thing you can do is set up a test environment to try out  
sample text with various analyzers.  Lucene in Action's source code  
(http://www.lucenebook.com) comes with such a demo that you can  
easily tweak.  Here's a sample of running "ant AnalyzerDemo":

      [echo] Running lia.analysis.AnalyzerDemo...
      [java] Analyzing "some_word"
      [java]   WhitespaceAnalyzer:
      [java]     [some_word]

      [java]   SimpleAnalyzer:
      [java]     [some] [word]

      [java]   StopAnalyzer:
      [java]     [some] [word]

      [java]   StandardAnalyzer:
      [java]     [some] [word]

      [java]   SnowballAnalyzer:
      [java]     [some] [word]

      [java]   SnowballAnalyzer:
      [java]     [some] [word]

      [java]   SnowballAnalyzer:
      [java]     [some] [word]

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 16:21:51 2005
Return-Path: <java-user-return-15777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11133 invoked from network); 8 Aug 2005 16:21:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 16:21:50 -0000
Received: (qmail 6381 invoked by uid 500); 8 Aug 2005 16:21:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6348 invoked by uid 500); 8 Aug 2005 16:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6335 invoked by uid 99); 8 Aug 2005 16:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 09:21:45 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.74] (HELO web31112.mail.mud.yahoo.com) (68.142.201.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Aug 2005 09:22:07 -0700
Received: (qmail 4096 invoked by uid 60001); 8 Aug 2005 16:21:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=sPpb0rw25IFw5nZyzXhF/+ma969Lx/XOvkm8+Swfk88NBIhR+M2KFsI1OKOTUzyYyXhbld9SZFihIV7EU98ux+z8t/D54p7EtuVb2NbZSC/GgisWDKszhlpRRh/PeBvQAySzeZmjdXe9QbPWuZBng6AZ/fyjrpndskldkPnpp9c=  ;
Message-ID: <20050808162142.4094.qmail@web31112.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31112.mail.mud.yahoo.com via HTTP; Mon, 08 Aug 2005 09:21:42 PDT
Date: Mon, 8 Aug 2005 09:21:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: New Site Live Using Lucene
To: java-user@lucene.apache.org
In-Reply-To: <6C1FF371E2319F45BABA49F9BA1BD0391B1E98@mail.lou.emergint.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--- "Kevin L. Cobb" <kevin.cobb@emergint.com> wrote:

> Open Source C/C++ only? When are you going to include Open Source
> Java?  We demand fair treatmant ;)

There are several related sites:

http://www.searchmorph.com/
http://www.koders.com/
http://javadocs.org/
...

Otis

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/ -- Find it. Tag it. Share it.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 17:45:27 2005
Return-Path: <java-user-return-15778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41491 invoked from network); 8 Aug 2005 17:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 17:45:27 -0000
Received: (qmail 15501 invoked by uid 500); 8 Aug 2005 17:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15482 invoked by uid 500); 8 Aug 2005 17:45:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15469 invoked by uid 99); 8 Aug 2005 17:45:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 10:45:20 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DATE_IN_PAST_24_48,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.122.60.35] (HELO mslinux.media-style.com) (212.122.60.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 10:45:41 -0700
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id D7903144129
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 19:34:36 +0200 (CEST)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 20782-03 for <java-user@lucene.apache.org>;
	Mon, 8 Aug 2005 19:34:36 +0200 (CEST)
Received: from [192.168.8.2] (dsl-082-082-221-138.arcor-ip.net [82.82.221.138])
	by mslinux.media-style.com (Postfix) with ESMTP id F2178144127
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 19:34:30 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <8a484a780508071005341a4a71@mail.gmail.com>
References: <8a484a7805080404346657105b@mail.gmail.com> <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com> <8a484a780508071005341a4a71@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-11--901542518
Message-Id: <2B71582C-F375-498C-AB02-5B46BD3281D6@media-style.com>
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
Date: Sun, 7 Aug 2005 19:09:05 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-11--901542518
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi,
I run in the same problem some weeks ago as well.
You can find following in the java doc:

"Note: this value is not stored directly with the document in the  
index. Documents returned from IndexReader.document(int) and Hits.doc 
(int) may thus not have the same value present as when this field was  
indexed."

HTH
Stefan


Am 07.08.2005 um 19:05 schrieb Riccardo Daviddi:

> I don't know where I am wrong...
>
> I just do this:
>
> IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
>                                            !IndexReader.indexExists 
> (indexDir));
> writer.setUseCompoundFile(true);
> Document document = new Document();
> document.add(Field.Keyword("DocId", Integer.toString(docId)));
> Field f = Field.Text("boostfield", "text");
> f.setBoost(3.0f);
> document.add(f);
> writer.addDocument(document);
>         writer.optimize();
>         writer.close();
>
> if then i try to get the boost factor of the boostfield
>
> System.out.println(IndexReader.open(indexDir).document(0).getField 
> ("boostfield").getBoost());
>
> for the only one document indexed I get 1.0 instead of 3.0!
>
> where is the error?
>
> thx
>
> On 8/4/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
>> Yes. use 1.2f there.  That method accepts floats, not doubles.  That
>> could be an error in the Lucene book.
>>
>> Otis
>>
>>
>> --- Riccardo Daviddi <rdaviddi@gmail.com> wrote:
>>
>>
>>> Why I got this error by writing for example:
>>>
>>> Field senderNameField = Field.Text("senderName", senderName);
>>> Field subjectField = Field.Text("subject", subject);
>>> subjectField.setBoost(1.2);
>>>
>>> as in the manual lucene in action??
>>>
>>> 1.2 is a double, but the method wants a float?
>>> --
>>> Riccardo Daviddi
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> -- 
> Riccardo Daviddi
> University of Siena - Information Engeneering
> rdaviddi@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------
company:        http://www.media-style.com
forum:        http://www.text-mining.org
blog:            http://www.find23.net



--Apple-Mail-11--901542518--

From java-user-return-15779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 17:49:37 2005
Return-Path: <java-user-return-15779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43807 invoked from network); 8 Aug 2005 17:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 17:49:37 -0000
Received: (qmail 21645 invoked by uid 500); 8 Aug 2005 17:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21618 invoked by uid 500); 8 Aug 2005 17:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21604 invoked by uid 99); 8 Aug 2005 17:49:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 10:49:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.193.196] (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 10:49:54 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 34A14176000
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 20:49:24 +0300 (EEST)
Message-ID: <42F79B47.1040600@i-hypergrid.com>
Date: Mon, 08 Aug 2005 20:49:59 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: merging indexes together
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello All.

In my program I index new information to temporary dir and after then I 
delete outdated information from main index and add new information by 
calling indexWriter.addIndexes() method. This works fine when doc number 
is relatively small but when index size grows, every call to addIndexes 
can take very long. (NOTE: new information is ONLY part of all index)

The reason I'm using this approach is that I want old information to be 
available during indexing new information and then switch as fast as I 
can to new information.

current index 336Mb / 1100000 Docs. and growing...
current time to merge indexes is about 5min.

Any ideas how to optimize this?

-- 
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 18:44:00 2005
Return-Path: <java-user-return-15780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63740 invoked from network); 8 Aug 2005 18:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 18:44:00 -0000
Received: (qmail 8897 invoked by uid 500); 8 Aug 2005 18:43:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8874 invoked by uid 500); 8 Aug 2005 18:43:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8861 invoked by uid 99); 8 Aug 2005 18:43:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 11:43:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 11:44:15 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j78HvnmW016996
	for <java-user@lucene.apache.org>; Mon, 8 Aug 2005 14:43:50 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IKX00C010EQVZ@lmco.com> for java-user@lucene.apache.org; Mon, 08 Aug 2005 13:54:26 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IKX003370EQES@lmco.com> for java-user@lucene.apache.org; Mon, 08 Aug 2005 13:54:26 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 08 Aug 2005 13:54:26 -0400
Date: Mon, 08 Aug 2005 13:54:25 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: merging indexes together
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3936@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: merging indexes together
Thread-Index: AcWcQYziZkhO76CrRW2E9196APdwNwAAEd8w
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 08 Aug 2005 17:54:26.0107 (UTC) FILETIME=[376508B0:01C59C42]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Why don't you just add the new information directly to the main index ?
As long as you don't get a new IndexReader you should be able to access
the old information. Once your indexing and deletion is done just get a
new IndexReader instance to access the new documents.

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com] 
Sent: Monday, August 08, 2005 1:50 PM
To: java-user@lucene.apache.org
Subject: merging indexes together

Hello All.

In my program I index new information to temporary dir and after then I
delete outdated information from main index and add new information by
calling indexWriter.addIndexes() method. This works fine when doc number
is relatively small but when index size grows, every call to addIndexes
can take very long. (NOTE: new information is ONLY part of all index)

The reason I'm using this approach is that I want old information to be
available during indexing new information and then switch as fast as I
can to new information.

current index 336Mb / 1100000 Docs. and growing...
current time to merge indexes is about 5min.

Any ideas how to optimize this?

--
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 19:55:43 2005
Return-Path: <java-user-return-15781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90217 invoked from network); 8 Aug 2005 19:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 19:55:43 -0000
Received: (qmail 15999 invoked by uid 500); 8 Aug 2005 19:55:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15974 invoked by uid 500); 8 Aug 2005 19:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15961 invoked by uid 99); 8 Aug 2005 19:55:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 12:55:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 12:56:00 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 35A6913E2033; Mon,  8 Aug 2005 15:55:31 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3C1A513E2008
	for <java-user@lucene.apache.org>; Mon,  8 Aug 2005 15:55:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <1123200881.1277332100.25386.sendItem@bloglines.com>
References: <1123200881.1277332100.25386.sendItem@bloglines.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C7E33C65-DA74-46BF-A8D1-436BF2F18BE5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search shortly after adding a doc
Date: Mon, 8 Aug 2005 15:55:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you want to match a single document against a Query rapidly, try  
out the MemoryIndex as part of the contrib/memory codebase in  
Subversion.

     Erik


On Aug 4, 2005, at 8:14 PM, yahootintin.11533894@bloglines.com wrote:

> i want to use lucene to search shortly (within a second) after  
> adding a document.
>  closing a writer to ensure the new document is written and then  
> opening an
> index reader seems to be too slow on large indexes.
>
> how do other people
> handle this?
>
> (i know this can be solved with a database but i'd like
> to use the tokenization/stemming features of lucene).
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 20:05:55 2005
Return-Path: <java-user-return-15782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93962 invoked from network); 8 Aug 2005 20:05:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 20:05:55 -0000
Received: (qmail 27340 invoked by uid 500); 8 Aug 2005 20:05:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27320 invoked by uid 500); 8 Aug 2005 20:05:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27302 invoked by uid 99); 8 Aug 2005 20:05:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 13:05:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO zproxy.gmail.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 13:06:11 -0700
Received: by zproxy.gmail.com with SMTP id i11so675944nzi
        for <java-user@lucene.apache.org>; Mon, 08 Aug 2005 13:05:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=CLU0NH6uDBzAYhF49NoWaK9GE1FvNrTnZSeYFIe0w4ikPq/mNJ4qb0Qdu+1JYMS7m9EVpyD0dnMgU7EYzeC56bHbwtou50tMTolKIF8sgIbh3cTsnl9YkvblKi/jvbW+iiyB71tdzrmscfYaD2O6q1AMv7Enibo66KBhDx33tLQ=
Received: by 10.36.135.7 with SMTP id i7mr1971621nzd;
        Mon, 08 Aug 2005 13:05:47 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 18sm7981308nzo.2005.08.08.13.05.47;
        Mon, 08 Aug 2005 13:05:47 -0700 (PDT)
Message-ID: <42F7BB1A.9080102@gmail.com>
Date: Mon, 08 Aug 2005 15:05:46 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene score algorithm details?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I know there used to be a webpage that gave the algorithm used by Lucene 
for scoring, along with some info on what each variable controlled, to 
some extent... I was looking to brush up on what the idf controls (and 
what will happen if I override it) but I can't seem to find that page 
any longer...

Can someone point me to it?

Thanks,

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 20:08:44 2005
Return-Path: <java-user-return-15783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96271 invoked from network); 8 Aug 2005 20:08:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 20:08:43 -0000
Received: (qmail 37297 invoked by uid 500); 8 Aug 2005 20:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37273 invoked by uid 500); 8 Aug 2005 20:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37260 invoked by uid 99); 8 Aug 2005 20:08:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 13:08:38 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fersher@hotmail.com designates 65.54.224.27 as permitted sender)
Received: from [65.54.224.27] (HELO hotmail.com) (65.54.224.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 13:09:00 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 8 Aug 2005 13:08:36 -0700
Message-ID: <BAY105-F1775426545546C9AC2EE06B2B80@phx.gbl>
Received: from 65.54.224.200 by by105fd.bay105.hotmail.msn.com with HTTP;
	Mon, 08 Aug 2005 20:08:36 GMT
X-Originating-IP: [65.54.224.200]
X-Originating-Email: [fersher@hotmail.com]
X-Sender: fersher@hotmail.com
From: "christopher may" <fersher@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Excel Spreadsheet
Date: Mon, 08 Aug 2005 16:08:36 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 08 Aug 2005 20:08:36.0462 (UTC) FILETIME=[F5C7B8E0:01C59C54]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

   I think the easiest way to put it is my first cell will be a term. The 
following cells are then the summary or definition to the term and so on and 
so on. My search needs to find the term by letter since my page has that 
option and then return in two separate columns on the results page the Term 
sided by its definition. Thanks hope you can help.

>From: Erik Hatcher <erik@ehatchersolutions.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Excel Spreadsheet
>Date: Mon, 8 Aug 2005 10:58:55 -0400
>
>On Aug 8, 2005, at 10:30 AM, christopher may wrote:
>>I have a spreadsheet with the first cell being the term and the  next 
>>cells hold the description. Is there a way I can build this  into the 
>>index easily or is this going to take a custom analyzer ?  Any help or 
>>ideas would be greatly appreciated. Thanks
>
>What are your searching needs?  That is the first question to ask  yourself 
>when deciding on an analyzer.  You will probably want to  extract the cells 
>separately and index them into separate fields, and  you could start by 
>trying the StandardAnalyzer to see if it meets  your needs.  It is 
>impossible to say for sure without seeing some  details of what text you're 
>dealing with and knowing how you want to  search it.
>
>     Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 20:21:51 2005
Return-Path: <java-user-return-15784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2520 invoked from network); 8 Aug 2005 20:21:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 20:21:51 -0000
Received: (qmail 68185 invoked by uid 500); 8 Aug 2005 20:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68160 invoked by uid 500); 8 Aug 2005 20:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68146 invoked by uid 99); 8 Aug 2005 20:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 13:21:45 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.42] (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Aug 2005 13:22:06 -0700
Received: (qmail 81704 invoked by uid 60001); 8 Aug 2005 20:21:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=NxJhucpa2H+/wpJJ4XMjXFtaDMD+L2pNS9ijnuDtXfu0CKLn/yHbrI4rB0nNyfjlc46fEacTLCNgmkXfOVarTz0jv3m50uGz5svHrFU+qxgJOZlfwQo/EuKumxTm6/vig2zrF2XsGN8UI+QPj5O2CDfyX0YSqPCMNFp4xNSI/as=  ;
Message-ID: <20050808202142.81702.qmail@web31109.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31109.mail.mud.yahoo.com via HTTP; Mon, 08 Aug 2005 13:21:42 PDT
Date: Mon, 8 Aug 2005 13:21:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene score algorithm details?
To: java-user@lucene.apache.org
In-Reply-To: <42F7BB1A.9080102@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's in the Javadoc for Similarity class.
You can use that along with Explanation (class) to get a good picture
of what's going on with scoring.

Otis


--- Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:

> I know there used to be a webpage that gave the algorithm used by
> Lucene 
> for scoring, along with some info on what each variable controlled,
> to 
> some extent... I was looking to brush up on what the idf controls
> (and 
> what will happen if I override it) but I can't seem to find that page
> 
> any longer...
> 
> Can someone point me to it?
> 
> Thanks,
> 
> Dan
> 
> -- 
> ****************************
> Daniel Armbrust
> Biomedical Informatics
> Mayo Clinic Rochester
> daniel.armbrust(at)mayo.edu
> http://informatics.mayo.edu/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 20:34:22 2005
Return-Path: <java-user-return-15785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8933 invoked from network); 8 Aug 2005 20:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 20:34:21 -0000
Received: (qmail 89397 invoked by uid 500); 8 Aug 2005 20:34:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89333 invoked by uid 500); 8 Aug 2005 20:34:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 85553 invoked by uid 99); 8 Aug 2005 20:31:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andrewhudson@gmail.com designates 64.233.162.193 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XUWwHsVgIZ07GV+F0h7wRssW/nV1ylSmVoLugWECfnv0xbhbJKSgt0GCdg68Yus6aakU54rs6xySq8DmAExedU1gf1Lp8OBto8q91yyIHXsCfirXkgul7XsVjPWQpITXZEx8YHQ5yACFL4hcDx3ZCD+l1GmFHysgpRvVsem0wxc=
Message-ID: <9d8b72d90508081331488e209d@mail.gmail.com>
Date: Mon, 8 Aug 2005 15:31:42 -0500
From: Andrew Hudson <andrewhudson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene score algorithm details?
In-Reply-To: <20050808202142.81702.qmail@web31109.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42F7BB1A.9080102@gmail.com>
	 <20050808202142.81702.qmail@web31109.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is the docboost being used in scoring currently?  I haven't been able
to see a clear connection between it and the score that lucene
calculates both empirically and in the scoring code itself.

Andrew

On 8/8/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> It's in the Javadoc for Similarity class.
> You can use that along with Explanation (class) to get a good picture
> of what's going on with scoring.
>=20
> Otis
>=20
>=20
> --- Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:
>=20
> > I know there used to be a webpage that gave the algorithm used by
> > Lucene
> > for scoring, along with some info on what each variable controlled,
> > to
> > some extent... I was looking to brush up on what the idf controls
> > (and
> > what will happen if I override it) but I can't seem to find that page
> >
> > any longer...
> >
> > Can someone point me to it?
> >
> > Thanks,
> >
> > Dan
> >
> > --
> > ****************************
> > Daniel Armbrust
> > Biomedical Informatics
> > Mayo Clinic Rochester
> > daniel.armbrust(at)mayo.edu
> > http://informatics.mayo.edu/
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 21:06:54 2005
Return-Path: <java-user-return-15786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22032 invoked from network); 8 Aug 2005 21:06:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 21:06:53 -0000
Received: (qmail 61174 invoked by uid 500); 8 Aug 2005 21:06:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61153 invoked by uid 500); 8 Aug 2005 21:06:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61140 invoked by uid 99); 8 Aug 2005 21:06:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 14:06:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.198 as permitted sender)
Received: from [64.233.184.198] (HELO wproxy.gmail.com) (64.233.184.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 14:07:09 -0700
Received: by wproxy.gmail.com with SMTP id i23so1198325wra
        for <java-user@lucene.apache.org>; Mon, 08 Aug 2005 14:06:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AsMhaCKX8G0rcDqCddZ4xYk8t0GH5if/neHA1txGF8KlT2P3zLuIN12bhMJVtmQ9JjPuxlp/a96WDeL66MdKpx13sSMX5QV5TVcAzvVqz+Og1wngcYFTva6/1y/bAuDCc0uHJVOrxdp57hwqE25X/c7utDXAbiDCiKZKpY18K18=
Received: by 10.54.51.51 with SMTP id y51mr5092876wry;
        Mon, 08 Aug 2005 14:06:44 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Mon, 8 Aug 2005 14:06:44 -0700 (PDT)
Message-ID: <6e3ae6310508081406307c2188@mail.gmail.com>
Date: Mon, 8 Aug 2005 14:06:44 -0700
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene score algorithm details?
In-Reply-To: <9d8b72d90508081331488e209d@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42F7BB1A.9080102@gmail.com>
	 <20050808202142.81702.qmail@web31109.mail.mud.yahoo.com>
	 <9d8b72d90508081331488e209d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Document boost is distributed to each field when creating the index.

It is not stored anywhere. So it's not in the equation to calculate score.

--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net=20

On 8/8/05, Andrew Hudson <andrewhudson@gmail.com> wrote:
> Is the docboost being used in scoring currently?  I haven't been able
> to see a clear connection between it and the score that lucene
> calculates both empirically and in the scoring code itself.
>=20
> Andrew
>=20
> On 8/8/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > It's in the Javadoc for Similarity class.
> > You can use that along with Explanation (class) to get a good picture
> > of what's going on with scoring.
> >
> > Otis
> >
> >
> > --- Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:
> >
> > > I know there used to be a webpage that gave the algorithm used by
> > > Lucene
> > > for scoring, along with some info on what each variable controlled,
> > > to
> > > some extent... I was looking to brush up on what the idf controls
> > > (and
> > > what will happen if I override it) but I can't seem to find that page
> > >
> > > any longer...
> > >
> > > Can someone point me to it?
> > >
> > > Thanks,
> > >
> > > Dan
> > >
> > > --
> > > ****************************
> > > Daniel Armbrust
> > > Biomedical Informatics
> > > Mayo Clinic Rochester
> > > daniel.armbrust(at)mayo.edu
> > > http://informatics.mayo.edu/
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 21:31:10 2005
Return-Path: <java-user-return-15787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31711 invoked from network); 8 Aug 2005 21:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 21:31:10 -0000
Received: (qmail 25240 invoked by uid 500); 8 Aug 2005 21:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25219 invoked by uid 500); 8 Aug 2005 21:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25206 invoked by uid 99); 8 Aug 2005 21:31:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 14:31:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 14:31:26 -0700
Received: (qmail 17545 invoked by uid 532); 8 Aug 2005 21:31:01 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.4.  Clear:. 
 Processed in 0.06626 secs); 08 Aug 2005 21:31:01 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 8 Aug 2005 21:31:01 -0000
Message-ID: <42F7CF18.1040505@tropo.com>
Date: Mon, 08 Aug 2005 14:31:04 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: New Site Live Using Lucene
References: <20050808162142.4094.qmail@web31112.mail.mud.yahoo.com>
In-Reply-To: <20050808162142.4094.qmail@web31112.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

> --- "Kevin L. Cobb" <kevin.cobb@emergint.com> wrote:
> 
> 
>>Open Source C/C++ only? When are you going to include Open Source
>>Java?  We demand fair treatmant ;)
> 
> 
> There are several related sites:
> 
> http://www.searchmorph.com/
Thanks for ref Otis. I run this site, and primarily index javadoc, but 
some java trees are hit too. I've always meant to do something that 
auto-updates a bunch of CVS/SVN trees every night so you have the source 
and the docs indexed. I rebuilt the index recently - and am up to 
162,000 URLs indexed from ~700 trees of javadoc.

- Dave

PS see also http://www.docjar.com/.





> http://www.koders.com/
> http://javadocs.org/
> ...
> 
> Otis
> 
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/ -- Find it. Tag it. Share it.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 08 23:10:18 2005
Return-Path: <java-user-return-15788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59299 invoked from network); 8 Aug 2005 23:10:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Aug 2005 23:10:17 -0000
Received: (qmail 45787 invoked by uid 500); 8 Aug 2005 23:10:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45757 invoked by uid 500); 8 Aug 2005 23:10:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45743 invoked by uid 99); 8 Aug 2005 23:10:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 16:10:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 16:10:34 -0700
Received: by wproxy.gmail.com with SMTP id 71so1163911wri
        for <java-user@lucene.apache.org>; Mon, 08 Aug 2005 16:10:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=f7TMUtSzT0Am2EXtSS1+uuVsBAhfg8Xogm84un/TdfKHLFQUIqT6lnEt+4VpK/oOtnFcvAN9E6mAygZc/pMIHx9zT9yd8zF9F7/khJrckFubzgUK1rBeH01hqjcRxU9gqcYVZN0titdNnhkRuSdC8FZmqhhYR99qzJp1REhy5b0=
Received: by 10.54.5.42 with SMTP id 42mr455008wre;
        Mon, 08 Aug 2005 16:10:10 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Mon, 8 Aug 2005 16:10:10 -0700 (PDT)
Message-ID: <6e3ae631050808161022847528@mail.gmail.com>
Date: Mon, 8 Aug 2005 16:10:10 -0700
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: JDBC proxy implementing Lucene?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Just an idea to make Lucene work with databases more easily.

When I communicated with Shay Banon(Compass' author), it came to me
that maybe Lucene can be wrapped around JDBC drivers. Let's say it's
L-JDBC.

So whenever an object is stored through JDBC, according to some XML
configuration file, L-JDBC can index the updated object/document, or
delete it from the index.

Basically make Lucene indexing transparent to new/existing applications.

Not really a super idea. I am wondering anyone will find it helpful?

--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 01:20:13 2005
Return-Path: <java-user-return-15789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96732 invoked from network); 9 Aug 2005 01:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 01:20:13 -0000
Received: (qmail 68767 invoked by uid 500); 9 Aug 2005 01:20:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68742 invoked by uid 500); 9 Aug 2005 01:20:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68729 invoked by uid 99); 9 Aug 2005 01:20:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 18:20:08 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.74] (HELO web31112.mail.mud.yahoo.com) (68.142.201.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Aug 2005 18:20:30 -0700
Received: (qmail 48163 invoked by uid 60001); 9 Aug 2005 01:20:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=V6YkEUEtsqQyIyC+kBMpR41JqtP9suqLAbK/SU12kpHLT7yG5/5YXeW6ooDGgtI/sDThqiG9ZlD1W42a5zZh3NEEX+PzrpdQbiZ/UYGu1qjZhbxptKFaq5EL+EFetz9th1bXke/ckrp5tAd/2MfGpfmd2sORqc9YTxZcnDc0B0k=  ;
Message-ID: <20050809012005.48161.qmail@web31112.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31112.mail.mud.yahoo.com via HTTP; Mon, 08 Aug 2005 18:20:05 PDT
Date: Mon, 8 Aug 2005 18:20:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: JDBC proxy implementing Lucene?
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae631050808161022847528@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Chris,

--- Chris Lu <chris.lu@gmail.com> wrote:

> Hi, Just an idea to make Lucene work with databases more easily.
> 
> When I communicated with Shay Banon(Compass' author), it came to me
> that maybe Lucene can be wrapped around JDBC drivers. Let's say it's
> L-JDBC.
> 
> So whenever an object is stored through JDBC, according to some XML
> configuration file, L-JDBC can index the updated object/document, or
> delete it from the index.
> 
> Basically make Lucene indexing transparent to new/existing
> applications.
> 
> Not really a super idea. I am wondering anyone will find it helpful?

Yes, that would be handy, as lots of people have applications that use
both Lucene and a RDBMS and use various tricks to keep the two in sync.
 If an application uses Hibernate, then one can make use of various
Hibernate interceptors and use them to trigger operations on an
external Lucene index.  I know at least one application that does
something similar (see my .signature).

Otis

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/ -- Find it. Tag it. Share it.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 05:46:28 2005
Return-Path: <java-user-return-15790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74947 invoked from network); 9 Aug 2005 05:46:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 05:46:28 -0000
Received: (qmail 75338 invoked by uid 500); 9 Aug 2005 05:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75317 invoked by uid 500); 9 Aug 2005 05:46:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75304 invoked by uid 99); 9 Aug 2005 05:46:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 22:46:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 22:46:44 -0700
Received: by wproxy.gmail.com with SMTP id 71so1228329wri
        for <java-user@lucene.apache.org>; Mon, 08 Aug 2005 22:46:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=W3+b/Zcd3bFOcvqmzxi5e2shqevG16vNRAgjIKzJU8i0Ugkq2F3O43uoBgK62D04YB0Q7IyeWXI4qDRBHqI9v/RWSqIpd27YTBoPLrTRvg8PSEIFNmIbSaSXvfkwaishlzmdPNYdIqJ7W/xAH4x/daikyhIABw/1qzwVORqL/2I=
Received: by 10.54.33.17 with SMTP id g17mr3791787wrg;
        Mon, 08 Aug 2005 22:46:20 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Mon, 8 Aug 2005 22:46:20 -0700 (PDT)
Message-ID: <6e3ae63105080822461b1100e@mail.gmail.com>
Date: Tue, 9 Aug 2005 00:46:20 -0500
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JDBC proxy implementing Lucene?
In-Reply-To: <20050809012005.48161.qmail@web31112.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6e3ae631050808161022847528@mail.gmail.com>
	 <20050809012005.48161.qmail@web31112.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

An reuseable aspect will be extremely useful. And it's much more
feasible than the JDBC approach.

This will only benefit applications already using ORM tools. But this
should be the trend though.


On 8/8/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Chris,
>=20
> --- Chris Lu <chris.lu@gmail.com> wrote:
>=20
> > Hi, Just an idea to make Lucene work with databases more easily.
> >
> > When I communicated with Shay Banon(Compass' author), it came to me
> > that maybe Lucene can be wrapped around JDBC drivers. Let's say it's
> > L-JDBC.
> >
> > So whenever an object is stored through JDBC, according to some XML
> > configuration file, L-JDBC can index the updated object/document, or
> > delete it from the index.
> >
> > Basically make Lucene indexing transparent to new/existing
> > applications.
> >
> > Not really a super idea. I am wondering anyone will find it helpful?
>=20
> Yes, that would be handy, as lots of people have applications that use
> both Lucene and a RDBMS and use various tricks to keep the two in sync.
>  If an application uses Hibernate, then one can make use of various
> Hibernate interceptors and use them to trigger operations on an
> external Lucene index.  I know at least one application that does
> something similar (see my .signature).
>=20
> Otis
>=20
> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/ -- Find it. Tag it. Share it.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 06:27:47 2005
Return-Path: <java-user-return-15791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86653 invoked from network); 9 Aug 2005 06:27:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 06:27:47 -0000
Received: (qmail 26612 invoked by uid 500); 9 Aug 2005 06:27:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26570 invoked by uid 500); 9 Aug 2005 06:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26536 invoked by uid 99); 9 Aug 2005 06:27:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Aug 2005 23:27:27 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.142] (HELO web30709.mail.mud.yahoo.com) (68.142.200.142)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Aug 2005 23:27:49 -0700
Received: (qmail 45529 invoked by uid 60001); 9 Aug 2005 06:27:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=VouBMfQBh8jSrPVqQ/hjE9PeItDOGgtdtwRBfEjPfvIySGtCaE1UxC1Ayir8uIXyO1HU+XoN3B24YmDK89LQIcZOEGhj1MAvRestyH3C8khznx6QLT83cqbaQjQ0EkU03dXVXAjmfkWGX2+Q1H2GcyweZjJ/iMXhJZLOqjQfRwA=  ;
Message-ID: <20050809062724.45527.qmail@web30709.mail.mud.yahoo.com>
Received: from [203.101.1.5] by web30709.mail.mud.yahoo.com via HTTP; Mon, 08 Aug 2005 23:27:24 PDT
Date: Mon, 8 Aug 2005 23:27:24 -0700 (PDT)
From: santo santo <santo8892k@yahoo.com>
Subject: Regarding range queries.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
I am new user of lucene. This query is posted at least
once on alomost all lucene mailing lists. The query
being about handling of date fields. 

In my case I need to find documents with dates older
than a particular date. So ideally I am not supposed
to specify the lower bound. When using the default
date handling provdied by lucene in conjunction with
the RangeQuery, it results in a havaoc.

But recently during my search for a solution to this
problem I came across a solution  which said to
convert the dates to string format of the form
YYYY:MM:DD. This is beacuse - "Lucene can handle
String ranges without having to add every possible
value as a comparison clause". Here is the link
http://www.redhillconsulting.com.au/blogs/simon/archives/000232.html

Now my question is:-
(1) Is the above statement true?
(2) If yes will it work with YYYY:MM:DD HH:MM:SS
format  too?

Other solutions are also welcome.

Thanks alot.
Santo.


		
____________________________________________________
Start your day with Yahoo! - make it your home page 
http://www.yahoo.com/r/hs 
 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 09:53:42 2005
Return-Path: <java-user-return-15792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47808 invoked from network); 9 Aug 2005 09:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 09:53:42 -0000
Received: (qmail 50219 invoked by uid 500); 9 Aug 2005 09:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50198 invoked by uid 500); 9 Aug 2005 09:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50185 invoked by uid 99); 9 Aug 2005 09:53:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 02:53:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.193.196] (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 02:53:57 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 945621C9FF
	for <java-user@lucene.apache.org>; Tue,  9 Aug 2005 12:53:27 +0300 (EEST)
Message-ID: <42F87D3C.7060004@i-hypergrid.com>
Date: Tue, 09 Aug 2005 12:54:04 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: merging indexes together
References: <92A278501EF50444AD3EE1FFB51219550BCE3936@emss10m03.rck.atm.lmco.com>
In-Reply-To: <92A278501EF50444AD3EE1FFB51219550BCE3936@emss10m03.rck.atm.lmco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks. I didn't think about such simple solution:)

Mordo, Aviran (EXP N-NANNATEK) wrote:

>Why don't you just add the new information directly to the main index ?
>As long as you don't get a new IndexReader you should be able to access
>the old information. Once your indexing and deletion is done just get a
>new IndexReader instance to access the new documents.
>
>Aviran
>http://www.aviransplace.com
>
>-----Original Message-----
>From: Volodymyr Bychkoviak [mailto:vbychkoviak@i-hypergrid.com] 
>Sent: Monday, August 08, 2005 1:50 PM
>To: java-user@lucene.apache.org
>Subject: merging indexes together
>
>Hello All.
>
>In my program I index new information to temporary dir and after then I
>delete outdated information from main index and add new information by
>calling indexWriter.addIndexes() method. This works fine when doc number
>is relatively small but when index size grows, every call to addIndexes
>can take very long. (NOTE: new information is ONLY part of all index)
>
>The reason I'm using this approach is that I want old information to be
>available during indexing new information and then switch as fast as I
>can to new information.
>
>current index 336Mb / 1100000 Docs. and growing...
>current time to merge indexes is about 5min.
>
>Any ideas how to optimize this?
>
>--
>regards,
>Volodymyr Bychkoviak
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

-- 
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 10:56:40 2005
Return-Path: <java-user-return-15793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66721 invoked from network); 9 Aug 2005 10:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 10:56:40 -0000
Received: (qmail 21600 invoked by uid 500); 9 Aug 2005 10:56:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21372 invoked by uid 500); 9 Aug 2005 10:56:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21359 invoked by uid 99); 9 Aug 2005 10:56:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 03:56:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.89] (HELO smtpout.mac.com) (17.250.248.89)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 03:56:55 -0700
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout02/MantshX 4.0) with ESMTP id j79AuVqb018836
	for <java-user@lucene.apache.org>; Tue, 9 Aug 2005 03:56:31 -0700 (PDT)
Received: from [10.80.1.57] ([213.52.162.35])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id j79AuTdw004637
	for <java-user@lucene.apache.org>; Tue, 9 Aug 2005 03:56:31 -0700 (PDT)
Message-ID: <42F88BDD.1000807@mac.com>
Date: Tue, 09 Aug 2005 11:56:29 +0100
From: Shay Banon <kimchy@mac.com>
Reply-To: java-user@lucene.apache.org
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: JDBC proxy implementing Lucene?
References: <20050809012005.48161.qmail@web31112.mail.mud.yahoo.com>
In-Reply-To: <20050809012005.48161.qmail@web31112.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

    That is exactly the path I took with Compass and Hibernate. Compass 
integrates with Hibernate events (update/delete/create) and syncs the 
search engine using it. I had problems with Hibernate 2 interceptors 
(external id is null, and other stuff) so it currently works only with 
Hibernate events. The nice thing about Compass, is that once the 
application works on the Object level for the search as well (OSEM), 
than it becomes very simple to do it. Compass simply registers with 
Hibernate events, and persist to the search engine any changes made to 
objects that have both ORM (obviously) and OSEM definitions.

    One can than extend the notion of intercepting and actually define a 
generic Aspect (AOP) for search engine syncs. Which can be applied to 
any application, as long as it has OSEM - Object to Search Engine 
mappings (or any other type of mappings), since you must have some kind 
of knowledge how to combine the two.

    Shay

Otis Gospodnetic wrote:

>Hi Chris,
>
>--- Chris Lu <chris.lu@gmail.com> wrote:
>
>  
>
>>Hi, Just an idea to make Lucene work with databases more easily.
>>
>>When I communicated with Shay Banon(Compass' author), it came to me
>>that maybe Lucene can be wrapped around JDBC drivers. Let's say it's
>>L-JDBC.
>>
>>So whenever an object is stored through JDBC, according to some XML
>>configuration file, L-JDBC can index the updated object/document, or
>>delete it from the index.
>>
>>Basically make Lucene indexing transparent to new/existing
>>applications.
>>
>>Not really a super idea. I am wondering anyone will find it helpful?
>>    
>>
>
>Yes, that would be handy, as lots of people have applications that use
>both Lucene and a RDBMS and use various tricks to keep the two in sync.
> If an application uses Hibernate, then one can make use of various
>Hibernate interceptors and use them to trigger operations on an
>external Lucene index.  I know at least one application that does
>something similar (see my .signature).
>
>Otis
>
>. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>Simpy -- http://www.simpy.com/ -- Find it. Tag it. Share it.
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 12:42:19 2005
Return-Path: <java-user-return-15794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96676 invoked from network); 9 Aug 2005 12:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 12:42:18 -0000
Received: (qmail 42727 invoked by uid 500); 9 Aug 2005 12:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42703 invoked by uid 500); 9 Aug 2005 12:42:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42690 invoked by uid 99); 9 Aug 2005 12:42:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 05:42:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.74.127.3] (HELO svr.ftp1.com) (64.74.127.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 05:42:34 -0700
Received: from graphite by svr.ftp1.com with local (Exim 4.44)
	id 1E2TQm-0004AF-1S
	for java-user@lucene.apache.org; Tue, 09 Aug 2005 07:42:08 -0500
Received: from 192.223.163.5 ([192.223.163.5])
        (SquirrelMail authenticated user tony@simpleobjects.com)
        by www.simpleobjects.com with HTTP;
        Tue, 9 Aug 2005 08:42:08 -0400 (EDT)
Message-ID: <22901.192.223.163.5.1123591328.squirrel@www.simpleobjects.com>
In-Reply-To: <20050809062724.45527.qmail@web30709.mail.mud.yahoo.com>
References: <20050809062724.45527.qmail@web30709.mail.mud.yahoo.com>
Date: Tue, 9 Aug 2005 08:42:08 -0400 (EDT)
Subject: Re: Regarding range queries.
From: "Tony Schwartz" <tony@simpleobjects.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - svr.ftp1.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32036 808] / [47 12]
X-AntiAbuse: Sender Address Domain - simpleobjects.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

1.  Use RangeFilters on the lowest precision date you need.  If you only need to filter
to the day, index the date in a separate field with day precision.  This will speed up
filter creation a great deal.
2.  Use as few characters as possible when indexing, so if you can come up with your own
date representation as a String, that will work well for you.
3.  Try to update your index as little as possible.  If you need to update your index
regularly, consider having two indexes.  For example... 1 small index that allows many
updates that you use for TODAY.  1 large index that each night is updated with the
contents of index 1.  then swap out index 1 for a new one.  This is very handy if docs
are added in date order.  you can use this fact to sort more efficiently (i.e. no cross
index sorting - just append the sorted results of one index to the other).
4.  Use a robust filter caching scheme that is shared across users (give the users the
ability and ease of selecting common date ranges).  By robust, I mean, cache some in
memory and cache some to disk.  reading a filter from disk can be a heck of a lot
cheaper than recreating the filter.  Use a simple list and put recently used filters at
the front.  store a certain number of filters in memory, then store a certain number of
filters on disk, then drop the rest.



as a side note:

I think there are a few things that should be added to lucene to really give a huge
benefit to applications of lucene that are centered around dates.  If documents are
added in date order (generally but not exactly), you can use this fact to improve memory
usage of lucene in several ways.

1.  a sparse bitset can be used instead of a full array for Date RangeFilters.
2.  sorting can improved by storing the StringIndex (sort array) to disk when index is
updated.  Then, load only the portions required for a particular search.  If most people
will be searching more recent docs and so you can keep those portions of the sort array
in memory and load only those "older" portions when needed.
3.  use the same sparse (and reversible) bitset instead of the lucene BitVector for
storing the deleted docs for a particular segment. (very old docs are probably deleted
again, based on date).
4.  sorting can also be greatly improved by NOT storing the field values in memory if
the index is not used in a "multi-index" environment.

I have implemented these techniques for my particular implementation of an application
logs search tool and have seen incredible results.  I have many users searching 50
million application logs (1k each) with 512 MB memory for my app where users are sorting
and filtering on every search.

Again, these features will only be useful for indexes that have relative date to docid
correlation (which I believe happens to be very common).

Tony Schwartz
tony@simpleobjects.com
"What we need is more cowbell."

> Hi all,
> I am new user of lucene. This query is posted at least
> once on alomost all lucene mailing lists. The query
> being about handling of date fields.
>
> In my case I need to find documents with dates older
> than a particular date. So ideally I am not supposed
> to specify the lower bound. When using the default
> date handling provdied by lucene in conjunction with
> the RangeQuery, it results in a havaoc.
>
> But recently during my search for a solution to this
> problem I came across a solution  which said to
> convert the dates to string format of the form
> YYYY:MM:DD. This is beacuse - "Lucene can handle
> String ranges without having to add every possible
> value as a comparison clause". Here is the link
> http://www.redhillconsulting.com.au/blogs/simon/archives/000232.html
>
> Now my question is:-
> (1) Is the above statement true?
> (2) If yes will it work with YYYY:MM:DD HH:MM:SS
> format  too?
>
> Other solutions are also welcome.
>
> Thanks alot.
> Santo.
>
>
>
> ____________________________________________________
> Start your day with Yahoo! - make it your home page
> http://www.yahoo.com/r/hs
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 14:28:17 2005
Return-Path: <java-user-return-15795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41646 invoked from network); 9 Aug 2005 14:28:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 14:28:17 -0000
Received: (qmail 65986 invoked by uid 500); 9 Aug 2005 14:28:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65954 invoked by uid 500); 9 Aug 2005 14:28:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65941 invoked by uid 99); 9 Aug 2005 14:28:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 07:28:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 07:28:31 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 27F7513E2007; Tue,  9 Aug 2005 10:28:05 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 93C9D13E2006
	for <java-user@lucene.apache.org>; Tue,  9 Aug 2005 10:27:41 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050809062724.45527.qmail@web30709.mail.mud.yahoo.com>
References: <20050809062724.45527.qmail@web30709.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E65A612C-EF91-4904-A022-A1D2F8A82F1D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Regarding range queries.
Date: Tue, 9 Aug 2005 10:27:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 9, 2005, at 2:27 AM, santo santo wrote:

> Hi all,
> I am new user of lucene. This query is posted at least
> once on alomost all lucene mailing lists. The query
> being about handling of date fields.
>
> In my case I need to find documents with dates older
> than a particular date. So ideally I am not supposed
> to specify the lower bound. When using the default
> date handling provdied by lucene in conjunction with
> the RangeQuery, it results in a havaoc.

Could you elaborate on the havoc you've experienced?

> But recently during my search for a solution to this
> problem I came across a solution  which said to
> convert the dates to string format of the form
> YYYY:MM:DD. This is beacuse - "Lucene can handle
> String ranges without having to add every possible
> value as a comparison clause". Here is the link
> http://www.redhillconsulting.com.au/blogs/simon/archives/000232.html


> Now my question is:-
> (1) Is the above statement true?
> (2) If yes will it work with YYYY:MM:DD HH:MM:SS
> format  too?

Yes, and yes.  You still have to watch out for the TooManyClauses  
exception when doing a plain RangeQuery, but there is now a  
RangeFilter available to help with this situation (which may require  
changing how you construct Query objects in some way).

You need to ensure that the string representation of any terms used  
for range queries be in lexicographical order.  Every term in Lucene  
is essentially a string.

Hope this helps some.

     Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 16:48:46 2005
Return-Path: <java-user-return-15796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4335 invoked from network); 9 Aug 2005 16:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 16:48:45 -0000
Received: (qmail 71888 invoked by uid 500); 9 Aug 2005 16:48:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71855 invoked by uid 500); 9 Aug 2005 16:48:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71703 invoked by uid 99); 9 Aug 2005 16:48:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 09:48:37 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.74] (HELO ylpvm43.prodigy.net) (207.115.57.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 09:48:58 -0700
Received: from pimout1-ext.prodigy.net (pimout1-int.prodigy.net [207.115.5.65])
	by ylpvm43.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j79GmffW015614
	for <java-user@lucene.apache.org>; Tue, 9 Aug 2005 12:48:41 -0400
X-ORBL: [63.205.70.111]
Received: from [192.168.168.81] (adsl-63-205-70-111.dsl.snfc21.pacbell.net [63.205.70.111])
	by pimout1-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j79GmTdI157388;
	Tue, 9 Aug 2005 12:48:31 -0400
Message-ID: <42F8DE5C.7030303@apache.org>
Date: Tue, 09 Aug 2005 09:48:28 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.6-1.1.fc3 (X11/20050720)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Regarding range queries.
References: <20050809062724.45527.qmail@web30709.mail.mud.yahoo.com> <22901.192.223.163.5.1123591328.squirrel@www.simpleobjects.com>
In-Reply-To: <22901.192.223.163.5.1123591328.squirrel@www.simpleobjects.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tony,

If your improvements are of general utility, please contribute them. 
Even if they are not, post them as-is and perhaps someone will take the 
time to make them more reusable.

Cheers,

Doug

Tony Schwartz wrote:
> I think there are a few things that should be added to lucene to really give a huge
> benefit to applications of lucene that are centered around dates.  If documents are
> added in date order (generally but not exactly), you can use this fact to improve memory
> usage of lucene in several ways.
> 
> 1.  a sparse bitset can be used instead of a full array for Date RangeFilters.
> 2.  sorting can improved by storing the StringIndex (sort array) to disk when index is
> updated.  Then, load only the portions required for a particular search.  If most people
> will be searching more recent docs and so you can keep those portions of the sort array
> in memory and load only those "older" portions when needed.
> 3.  use the same sparse (and reversible) bitset instead of the lucene BitVector for
> storing the deleted docs for a particular segment. (very old docs are probably deleted
> again, based on date).
> 4.  sorting can also be greatly improved by NOT storing the field values in memory if
> the index is not used in a "multi-index" environment.
> 
> I have implemented these techniques for my particular implementation of an application
> logs search tool and have seen incredible results.  I have many users searching 50
> million application logs (1k each) with 512 MB memory for my app where users are sorting
> and filtering on every search.
> 
> Again, these features will only be useful for indexes that have relative date to docid
> correlation (which I believe happens to be very common).
> 
> Tony Schwartz
> tony@simpleobjects.com
> "What we need is more cowbell."

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 09 20:08:43 2005
Return-Path: <java-user-return-15797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77405 invoked from network); 9 Aug 2005 20:08:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Aug 2005 20:08:43 -0000
Received: (qmail 1812 invoked by uid 500); 9 Aug 2005 20:08:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1778 invoked by uid 500); 9 Aug 2005 20:08:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1746 invoked by uid 500); 9 Aug 2005 20:08:36 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 1741 invoked by uid 99); 9 Aug 2005 20:08:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 13:08:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [63.240.76.166] (HELO sccimhc92.asp.att.net) (63.240.76.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 13:08:57 -0700
Received: from [192.168.1.42] (rrcs-24-172-168-17.central.biz.rr.com[24.172.168.17])
          by sccimhc92.asp.att.net (sccimhc92) with SMTP
          id <20050809200831i9200r2acde>; Tue, 9 Aug 2005 20:08:32 +0000
Mime-Version: 1.0 (Apple Message framework v733)
Content-Transfer-Encoding: 7bit
Message-Id: <CA1AA3AF-B017-4EF4-B817-989BD4449732@ganyo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Scott Ganyo <scott@ganyo.com>
Subject: IBM Open-Sources New Search Technology
Date: Tue, 9 Aug 2005 15:08:43 -0500
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

FYI - as it is relevant to search technology.  I can't for the life  
of me figure out the current or future open source licensing, though...?

Scott


IBM Open-Sources New Search Technology
http://www.eweek.com/article2/0,1895,1844710,00.asp

"IBM plans to release as open-source a sophisticated new search and  
text analysis technology that is able to find relationships, trends  
and facts buried in a wide range of unstructured data, including e- 
mails, Web pages, text documents, images, audio and video.
Called the UIMA (Unstructured Information Management Architecture),  
the technology is able is able to go beyond the keyword analysis  
typically used by most search engines to discern the semantic  
meanings within text and other unstructured data, said Nelson Mattos,  
vice president of information integration with IBM in San Jose, Calif."

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 06:38:22 2005
Return-Path: <java-user-return-15798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4150 invoked from network); 10 Aug 2005 06:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 06:38:22 -0000
Received: (qmail 34543 invoked by uid 500); 10 Aug 2005 06:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34174 invoked by uid 500); 10 Aug 2005 06:38:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33304 invoked by uid 99); 10 Aug 2005 06:37:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 23:37:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rouhi.ali@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Aug 2005 23:38:16 -0700
Received: by wproxy.gmail.com with SMTP id 55so74599wri
        for <java-user@lucene.apache.org>; Tue, 09 Aug 2005 23:37:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ed77FvqG9RaGDdvIxdL9GHMirUsU6/p43tsli7XWIyFbQBqmL3MsotbKLUdhh3MXFkbn6jUfGNBAYLOQ+Bnuno/7sQFjWMOJZazuv+1pnk6FZUtdb1LpC3wU7d21X5GOywxLwN+Idiw9Gm3ninQ9IROEhTSpDUaroKxQ43Juk9g=
Received: by 10.54.34.20 with SMTP id h20mr261142wrh;
        Tue, 09 Aug 2005 23:37:52 -0700 (PDT)
Received: by 10.54.104.8 with HTTP; Tue, 9 Aug 2005 23:37:52 -0700 (PDT)
Message-ID: <2c7935ba050809233764f98259@mail.gmail.com>
Date: Tue, 9 Aug 2005 23:37:52 -0700
From: Ali Rouhi <rouhi.ali@gmail.com>
To: java-user@lucene.apache.org
Subject: Why is Hits.java not Serializable?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello

I am looking at the RemoteSearchable code for inspiration on how to do
remote searches (I will probably use something like SEDA to implement
the rpc to avoid heavy thread creation issues of rmi, my question
should apply to any implementation of a remote searcher however).

I see that RemoteSearchable does not extend Searcher, but implements
Searchable only. In particular this means that the "public Hits
search(){...}" interfaces of Searcher are not implemented in
RemoteSearchable. In my case, this is transparent to the client, since
I obtain RemoteSearchables from multiple remote indexes and combine
them using MultiSearcer (which does implement "public Hits
search(){...}").

I am concerned about what goes on under the hood here. Which form of
the Searchable interface gets called on the server? The javadoc for
example says that "void search(Query query, Filter filter,
HitCollector results)" should not be used unless one is after all of
the results. So if I'm only interested in the top 100 hits, this seems
not to be a good thing if this particular interface gets called. Maybe
the form that returns "TopDocs" gets called (the javadoc gives an
"expert" qualification for this interface). I could dig into the code
to see what happens, but I am hoping an expert can answer this
question in much shorter order.

Another way to ask this question is, why is  Hits.java not declared
serializable, so that the the search methods which return Hits objects
can be exposed via the Searchable interface rather than the abstract
class Searcher? Hits would have to declared Serializable since
Searchable implements java.rmi.Remote (presumably because it is
implemented by RemoteSearchable!).

I can think of  3 reasons why search methods returning Hits objects
are not exposed in Searchable:

1) Someone forgot to declare Hits Serializable
2) There is a fundamental reason the forms of search which return Hits
objects cannot be called remotely, some non optimal form of search
will get called on the server(s) and I can't do anything about it. For
example "void search(Query query, Filter filter, HitCollector
results)" gets called.
3) Under the hood everything takes care of itself. When I call the
"public Hits search(){...}" on the client, and use the Hits object to
retrieve the 100 most relevant or top sorting results, a non optimal
form of search does *not* get called on the server (maybe a form
returning "TopDocs" is called). In this case I'm worrying
unnecessarily!?

My hoped for answers are 3) or at least 1). Or I may be missing
something and there is another answer.

Sorry for the long winded question, I just can't seem to ask this
question in a few words.

Many thanks
Ali

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 07:48:38 2005
Return-Path: <java-user-return-15799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36877 invoked from network); 10 Aug 2005 07:48:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 07:48:37 -0000
Received: (qmail 52487 invoked by uid 500); 10 Aug 2005 07:48:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52469 invoked by uid 500); 10 Aug 2005 07:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52456 invoked by uid 99); 10 Aug 2005 07:48:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 00:48:30 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of MTrezzi@csas.cz designates 193.179.187.19 as permitted sender)
Received: from [193.179.187.19] (HELO mailgate01.csas.cz) (193.179.187.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Aug 2005 00:48:51 -0700
Received: from (unknown [10.189.146.32])
 with SMTP; Wed, 10 Aug 2005 07:48:22 -0000
 (envelope-from <MTrezzi@CSAS.CZ>)
Received: from MAIL1.cen.csin.cz ([10.99.1.111]) by bubsex01.cen.csin.cz with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 10 Aug 2005 09:48:18 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C59D7F.C1F8CD0E"
Subject: OutOfMemoryError on addIndexes()
Date: Wed, 10 Aug 2005 09:47:29 +0200
Message-ID: <9AA035F30CE9E54C80FD4901E402F49C03D4289A@MAIL1.cen.csin.cz>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemoryError on addIndexes()
Thread-Index: AcWdf8HZFMQgGBqVRYKJsXGeOsJUDw==
From: "Trezzi Michael" <MTrezzi@CSAS.CZ>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Aug 2005 07:48:18.0547 (UTC) FILETIME=[DF774430:01C59D7F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C59D7F.C1F8CD0E
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable

Hello,
I have a problem and i tried everything i could think of to solve it. TO =
understand my situation, i create indexes on several computers on our =
network and they are copied to one server. There, once a day, they are =
merged into one masterIndex, which is then searched. The problem is in =
merging. I use the following code:
=20
Directory[] ar =3D new Directory[fileList.length];
       for(int i=3D0; i<fileList.length;i++) {
           ar[i] =3D FSDirectory.getDirectory(fileList[i], false);
       }
       writer.addIndexes(ar);
       for(int i=3D0; i<fileList.length;i++) {
           ar[i].close();        =20
       }
      writer.optimize();
      writer.close();
=20
I also tried a longer way of opening every index separately and adding =
it document by document. The problem is i am getting OutOfMemory errors =
on this. When I use the per document way, it happens on the =
IndexReader.open command and only on indexes of approx 100M+ (The =
largest index I have is only about 150MB) When I run it on windows =
machine with JDK1.5 I get the following:
    Exception in thread "main" java.lang.OutOfMemoryError: Requested =
array size exceeds VM limit
On Linux I am running 1.4 and I get the message without the Array size =
information.
=20
I did try it also on test index that was made from 11359 files  (1,59GB) =
that had 120MB and I got this error too. In my opinion 120MB index is =
not that big. The machine it runs on is a Xeon 3,2GHz with 2GB of RAM, =
so it should be enough. Can you please help me?
=20
Thank you in advance,
=20
Michael Trezzi

------_=_NextPart_001_01C59D7F.C1F8CD0E--

From java-user-return-15800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 10:35:06 2005
Return-Path: <java-user-return-15800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88104 invoked from network); 10 Aug 2005 10:35:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 10:35:05 -0000
Received: (qmail 70011 invoked by uid 500); 10 Aug 2005 10:35:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69985 invoked by uid 500); 10 Aug 2005 10:35:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69972 invoked by uid 99); 10 Aug 2005 10:35:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 03:35:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 64.233.182.198 as permitted sender)
Received: from [64.233.182.198] (HELO nproxy.gmail.com) (64.233.182.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 03:35:22 -0700
Received: by nproxy.gmail.com with SMTP id d4so21402nfe
        for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 03:34:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TThXTqfZAeGGCbW21HpM6ayjlDkRkMXJoFHFcTOnzvlvMpafAvYzFHnlxnTooRiK8cOOJpM0Pc2dFdAxljWQIGvg6K6SwifPqS5eucsWYSUm9PvIlSsrMDBQFDfnMI0qQy7wgaFvbYOb+80AkU1Li8E2EKJAocmE447bKaysUHM=
Received: by 10.48.250.9 with SMTP id x9mr16513nfh;
        Wed, 10 Aug 2005 03:34:57 -0700 (PDT)
Received: by 10.48.143.16 with HTTP; Wed, 10 Aug 2005 03:34:57 -0700 (PDT)
Message-ID: <8c4e686105081003341700525d@mail.gmail.com>
Date: Wed, 10 Aug 2005 11:34:57 +0100
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()
In-Reply-To: <9AA035F30CE9E54C80FD4901E402F49C03D4289A@MAIL1.cen.csin.cz>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <9AA035F30CE9E54C80FD4901E402F49C03D4289A@MAIL1.cen.csin.cz>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How much memory are you giving your programs?

 java    -Xmx<size>        set maximum Java heap size

--
Ian.

On 10/08/05, Trezzi Michael <MTrezzi@csas.cz> wrote:
> Hello,
> I have a problem and i tried everything i could think of to solve it. TO =
understand my situation, i create indexes on several computers on our netwo=
rk and they are copied to one server. There, once a day, they are merged in=
to one masterIndex, which is then searched. The problem is in merging. I us=
e the following code:
>=20
> Directory[] ar =3D new Directory[fileList.length];
>        for(int i=3D0; i<fileList.length;i++) {
>            ar[i] =3D FSDirectory.getDirectory(fileList[i], false);
>        }
>        writer.addIndexes(ar);
>        for(int i=3D0; i<fileList.length;i++) {
>            ar[i].close();
>        }
>       writer.optimize();
>       writer.close();
>=20
> I also tried a longer way of opening every index separately and adding it=
 document by document. The problem is i am getting OutOfMemory errors on th=
is. When I use the per document way, it happens on the IndexReader.open com=
mand and only on indexes of approx 100M+ (The largest index I have is only =
about 150MB) When I run it on windows machine with JDK1.5 I get the followi=
ng:
>     Exception in thread "main" java.lang.OutOfMemoryError: Requested arra=
y size exceeds VM limit
> On Linux I am running 1.4 and I get the message without the Array size in=
formation.
>=20
> I did try it also on test index that was made from 11359 files  (1,59GB) =
that had 120MB and I got this error too. In my opinion 120MB index is not t=
hat big. The machine it runs on is a Xeon 3,2GHz with 2GB of RAM, so it sho=
uld be enough. Can you please help me?
>=20
> Thank you in advance,
>=20
> Michael Trezzi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 10:40:53 2005
Return-Path: <java-user-return-15801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89681 invoked from network); 10 Aug 2005 10:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 10:40:52 -0000
Received: (qmail 78747 invoked by uid 500); 10 Aug 2005 10:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78717 invoked by uid 500); 10 Aug 2005 10:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78704 invoked by uid 99); 10 Aug 2005 10:40:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 03:40:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of MTrezzi@csas.cz designates 193.179.187.19 as permitted sender)
Received: from [193.179.187.19] (HELO mailgate01.csas.cz) (193.179.187.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Aug 2005 03:41:09 -0700
Received: from (unknown [10.189.146.32])
 with SMTP; Wed, 10 Aug 2005 10:40:41 -0000
 (envelope-from <MTrezzi@CSAS.CZ>)
Received: from MAIL1.cen.csin.cz ([10.99.1.111]) by bubsex01.cen.csin.cz with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 10 Aug 2005 12:40:41 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C59D97.D7C462DE"
Subject: RE: OutOfMemoryError on addIndexes()
Date: Wed, 10 Aug 2005 12:37:53 +0200
Message-ID: <9AA035F30CE9E54C80FD4901E402F49C03D4289C@MAIL1.cen.csin.cz>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <9AA035F30CE9E54C80FD4901E402F49C03D4289C@MAIL1.cen.csin.cz>
Thread-Topic: OutOfMemoryError on addIndexes()
Thread-Index: AcWdly4gWoth6IJBQ+6FonHx+zuntgAAGI9O
From: "Trezzi Michael" <MTrezzi@CSAS.CZ>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Aug 2005 10:40:41.0837 (UTC) FILETIME=[F48C11D0:01C59D97]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C59D97.D7C462DE
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable

I tried it first without any parameter, and now just for test i tried it =
with -Xmx1000M, but still no luck. It gives the error almost instantly.
=20
Michael

________________________________

Od: Ian Lea [mailto:ian.lea@gmail.com]
Odesl=E1no: st 10.8.2005 12:34
Komu: java-user@lucene.apache.org
P=F8edm=ECt: Re: OutOfMemoryError on addIndexes()



How much memory are you giving your programs?

 java    -Xmx<size>        set maximum Java heap size

--
Ian.

On 10/08/05, Trezzi Michael <MTrezzi@csas.cz> wrote:
> Hello,
> I have a problem and i tried everything i could think of to solve it. =
TO understand my situation, i create indexes on several computers on our =
network and they are copied to one server. There, once a day, they are =
merged into one masterIndex, which is then searched. The problem is in =
merging. I use the following code:
>
> Directory[] ar =3D new Directory[fileList.length];
>        for(int i=3D0; i<fileList.length;i++) {
>            ar[i] =3D FSDirectory.getDirectory(fileList[i], false);
>        }
>        writer.addIndexes(ar);
>        for(int i=3D0; i<fileList.length;i++) {
>            ar[i].close();
>        }
>       writer.optimize();
>       writer.close();
>
> I also tried a longer way of opening every index separately and adding =
it document by document. The problem is i am getting OutOfMemory errors =
on this. When I use the per document way, it happens on the =
IndexReader.open command and only on indexes of approx 100M+ (The =
largest index I have is only about 150MB) When I run it on windows =
machine with JDK1.5 I get the following:
>     Exception in thread "main" java.lang.OutOfMemoryError: Requested =
array size exceeds VM limit
> On Linux I am running 1.4 and I get the message without the Array size =
information.
>
> I did try it also on test index that was made from 11359 files  =
(1,59GB) that had 120MB and I got this error too. In my opinion 120MB =
index is not that big. The machine it runs on is a Xeon 3,2GHz with 2GB =
of RAM, so it should be enough. Can you please help me?
>
> Thank you in advance,
>
> Michael Trezzi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C59D97.D7C462DE
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C59D97.D7C462DE--

From java-user-return-15802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 11:29:41 2005
Return-Path: <java-user-return-15802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7600 invoked from network); 10 Aug 2005 11:29:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 11:29:41 -0000
Received: (qmail 29753 invoked by uid 500); 10 Aug 2005 11:29:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29631 invoked by uid 500); 10 Aug 2005 11:29:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29617 invoked by uid 99); 10 Aug 2005 11:29:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 04:29:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 04:29:56 -0700
Received: from [87.80.32.34] (helo=[10.0.0.2])
	by mail.runtime-collective.com with asmtp (Exim 3.35 #1 (Debian))
	id 1E2olz-0003Tz-00
	for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 12:29:27 +0100
Subject: Re: Why is Hits.java not Serializable?
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <2c7935ba050809233764f98259@mail.gmail.com>
References: <2c7935ba050809233764f98259@mail.gmail.com>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Wed, 10 Aug 2005 12:28:54 +0100
Message-Id: <1123673335.21501.61.camel@goose.milesbarr.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2005-08-09 at 23:37 -0700, Ali Rouhi wrote:
> I can think of  3 reasons why search methods returning Hits objects
> are not exposed in Searchable:
> 
> 1) Someone forgot to declare Hits Serializable
> 2) There is a fundamental reason the forms of search which return Hits
> objects cannot be called remotely, some non optimal form of search
> will get called on the server(s) and I can't do anything about it. For
> example "void search(Query query, Filter filter, HitCollector
> results)" gets called.
> 3) Under the hood everything takes care of itself. When I call the
> "public Hits search(){...}" on the client, and use the Hits object to
> retrieve the 100 most relevant or top sorting results, a non optimal
> form of search does *not* get called on the server (maybe a form
> returning "TopDocs" is called). In this case I'm worrying
> unnecessarily!?
> 
> My hoped for answers are 3) or at least 1). Or I may be missing
> something and there is another answer.

I think the Hits object is lazy loading. I don't know if that means it
keep a reference to the IndexSearcher/IndexReader to load the data or
not, but it probably does. In which case you need to recreate the
reference when deserializing the object. If you deserialize it in
another JVM or another computer it's not obvious what this reference
should be.

But I could be totally off base here.


-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 14:09:14 2005
Return-Path: <java-user-return-15803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82327 invoked from network); 10 Aug 2005 14:09:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 14:09:14 -0000
Received: (qmail 75289 invoked by uid 500); 10 Aug 2005 14:09:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75253 invoked by uid 500); 10 Aug 2005 14:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75240 invoked by uid 99); 10 Aug 2005 14:09:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 07:09:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.99.47.59] (HELO host54a.simplicato.com) (207.99.47.59)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 07:09:28 -0700
Received: from host54a.simplicato.com (localhost.simplicato.com [127.0.0.1])
	by host54a.simplicato.com (Postfix) with ESMTP id 9BE486C0828
	for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 10:08:48 -0400 (EDT)
Received: from pangloss (unknown [216.195.213.27])
	by host54a.simplicato.com (Postfix) with SMTP id 9C2CB6C05FA
	for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 10:08:37 -0400 (EDT)
From: "Roy Klein" <klein@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: DOM or XML representation of a query?
Date: Wed, 10 Aug 2005 10:08:39 -0400
Message-ID: <OAELLNADBIAIBGFCBKEKOEFBDIAA.klein@sitescape.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

The "front-end" guys working on my application need a way to pass me complex
queries. I was thinking that it'd be pretty straightforward to hand them a
package which helps them to create a DOM object which describes a query
(i.e. nested Booleans combined with phrases and keyword searches, sort by
field, etc).   I did a few searches in the archive of this list, but didn't
find any examples, however, I suspect it's a common requirement amongst
members of this list.

Can anybody point be at an example of the above?

Thanks!

Roy



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 15:54:39 2005
Return-Path: <java-user-return-15804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31749 invoked from network); 10 Aug 2005 15:54:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 15:54:39 -0000
Received: (qmail 90843 invoked by uid 500); 10 Aug 2005 15:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90822 invoked by uid 500); 10 Aug 2005 15:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90809 invoked by uid 99); 10 Aug 2005 15:54:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 08:54:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 08:54:53 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j7AFsd919595
	for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 10:54:39 -0500
Message-ID: <42FA233E.7060006@getopt.org>
Date: Wed, 10 Aug 2005 17:54:38 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DOM or XML representation of a query?
References: <OAELLNADBIAIBGFCBKEKOEFBDIAA.klein@sitescape.com>
In-Reply-To: <OAELLNADBIAIBGFCBKEKOEFBDIAA.klein@sitescape.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Roy Klein wrote:
> Hi,
> 
> The "front-end" guys working on my application need a way to pass me complex
> queries. I was thinking that it'd be pretty straightforward to hand them a
> package which helps them to create a DOM object which describes a query
> (i.e. nested Booleans combined with phrases and keyword searches, sort by
> field, etc).   I did a few searches in the archive of this list, but didn't
> find any examples, however, I suspect it's a common requirement amongst
> members of this list.
> 
> Can anybody point be at an example of the above?
> 
> Thanks!

I suggest using OpenSearch API, this is what Nutch uses (oh, and also a 
company called Amazon ;)

http://opensearch.a9.com


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 16:22:55 2005
Return-Path: <java-user-return-15805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44659 invoked from network); 10 Aug 2005 16:22:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 16:22:54 -0000
Received: (qmail 64123 invoked by uid 500); 10 Aug 2005 16:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63938 invoked by uid 500); 10 Aug 2005 16:22:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63675 invoked by uid 99); 10 Aug 2005 16:22:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 09:22:28 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.40] (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Aug 2005 09:22:47 -0700
Received: (qmail 29008 invoked by uid 60001); 10 Aug 2005 16:22:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Aamp7fUFm2Wq+sRtQr9vGxiuudpUXS5+AM/JS1W9meB8w9pZzRuqrqZ1SptY7EgvR2jHtWvV+v7h0B3DpeRulDRnyRJbbse/TqmLcUoqRjK9OGYBZVkVdd18egsgMaRxKtTNPhe9ibwMAhvwy/rBD44+mruv9amh83Gorav/At8=  ;
Message-ID: <20050810162223.29006.qmail@web31107.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31107.mail.mud.yahoo.com via HTTP; Wed, 10 Aug 2005 09:22:23 PDT
Date: Wed, 10 Aug 2005 09:22:23 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: OutOfMemoryError on addIndexes()
To: java-user@lucene.apache.org
In-Reply-To: <9AA035F30CE9E54C80FD4901E402F49C03D4289C@MAIL1.cen.csin.cz>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is -Xmx case sensitive?  Should it be 1000m instead of 1000M?  Not
sure.

Otis

--- Trezzi Michael <MTrezzi@CSAS.CZ> wrote:

> I tried it first without any parameter, and now just for test i tried
> it with -Xmx1000M, but still no luck. It gives the error almost
> instantly.
>  
> Michael
> 
> ________________________________
> 
> Od: Ian Lea [mailto:ian.lea@gmail.com]
> Odeslno: st 10.8.2005 12:34
> Komu: java-user@lucene.apache.org
> Pedmt: Re: OutOfMemoryError on addIndexes()
> 
> 
> 
> How much memory are you giving your programs?
> 
>  java    -Xmx<size>        set maximum Java heap size
> 
> --
> Ian.
> 
> On 10/08/05, Trezzi Michael <MTrezzi@csas.cz> wrote:
> > Hello,
> > I have a problem and i tried everything i could think of to solve
> it. TO understand my situation, i create indexes on several computers
> on our network and they are copied to one server. There, once a day,
> they are merged into one masterIndex, which is then searched. The
> problem is in merging. I use the following code:
> >
> > Directory[] ar = new Directory[fileList.length];
> >        for(int i=0; i<fileList.length;i++) {
> >            ar[i] = FSDirectory.getDirectory(fileList[i], false);
> >        }
> >        writer.addIndexes(ar);
> >        for(int i=0; i<fileList.length;i++) {
> >            ar[i].close();
> >        }
> >       writer.optimize();
> >       writer.close();
> >
> > I also tried a longer way of opening every index separately and
> adding it document by document. The problem is i am getting
> OutOfMemory errors on this. When I use the per document way, it
> happens on the IndexReader.open command and only on indexes of approx
> 100M+ (The largest index I have is only about 150MB) When I run it on
> windows machine with JDK1.5 I get the following:
> >     Exception in thread "main" java.lang.OutOfMemoryError:
> Requested array size exceeds VM limit
> > On Linux I am running 1.4 and I get the message without the Array
> size information.
> >
> > I did try it also on test index that was made from 11359 files 
> (1,59GB) that had 120MB and I got this error too. In my opinion 120MB
> index is not that big. The machine it runs on is a Xeon 3,2GHz with
> 2GB of RAM, so it should be enough. Can you please help me?
> >
> > Thank you in advance,
> >
> > Michael Trezzi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 16:35:28 2005
Return-Path: <java-user-return-15806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50033 invoked from network); 10 Aug 2005 16:35:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 16:35:28 -0000
Received: (qmail 90124 invoked by uid 500); 10 Aug 2005 16:35:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90093 invoked by uid 500); 10 Aug 2005 16:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90074 invoked by uid 99); 10 Aug 2005 16:35:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 09:35:22 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.48] (HELO pop03.mail.atl.earthlink.net) (207.69.200.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 09:35:43 -0700
Received: from mswamui-andean.atl.sa.earthlink.net ([209.86.224.24])
	by pop03.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E2tXz-0005HN-00
	for java-user@lucene.apache.org; Wed, 10 Aug 2005 12:35:19 -0400
Message-ID: <23597190.1123691719784.JavaMail.root@mswamui-andean.atl.sa.earthlink.net>
Date: Wed, 10 Aug 2005 12:35:19 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: DOM or XML representation of a query?
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Query is Serializable  why not use that?

-----Original Message-----
From: Roy Klein <klein@sitescape.com>
Sent: Aug 10, 2005 10:08 AM
To: java-user@lucene.apache.org
Subject: DOM or XML representation of a query?

Hi,

The "front-end" guys working on my application need a way to pass me complex
queries. I was thinking that it'd be pretty straightforward to hand them a
package which helps them to create a DOM object which describes a query
(i.e. nested Booleans combined with phrases and keyword searches, sort by
field, etc).   I did a few searches in the archive of this list, but didn't
find any examples, however, I suspect it's a common requirement amongst
members of this list.

Can anybody point be at an example of the above?

Thanks!

Roy



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 16:45:36 2005
Return-Path: <java-user-return-15807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53894 invoked from network); 10 Aug 2005 16:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 16:45:36 -0000
Received: (qmail 12280 invoked by uid 500); 10 Aug 2005 16:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12255 invoked by uid 500); 10 Aug 2005 16:45:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12242 invoked by uid 99); 10 Aug 2005 16:45:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 09:45:30 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.74] (HELO ylpvm43.prodigy.net) (207.115.57.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 09:45:51 -0700
Received: from pimout1-ext.prodigy.net (pimout1-int.prodigy.net [207.115.5.65])
	by ylpvm43.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j7AGjYfW010244
	for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 12:45:34 -0400
X-ORBL: [63.202.21.70]
Received: from [192.168.168.81] (adsl-63-202-21-70.dsl.snfc21.pacbell.net [63.202.21.70])
	by pimout1-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j7AGjML5087704;
	Wed, 10 Aug 2005 12:45:24 -0400
Message-ID: <42FA2F21.20208@apache.org>
Date: Wed, 10 Aug 2005 09:45:21 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.6-1.1.fc3 (X11/20050720)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Why is Hits.java not Serializable?
References: <2c7935ba050809233764f98259@mail.gmail.com>
In-Reply-To: <2c7935ba050809233764f98259@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ali Rouhi wrote:
> I can think of  3 reasons why search methods returning Hits objects
> are not exposed in Searchable:
> 
> 1) Someone forgot to declare Hits Serializable
> 2) There is a fundamental reason the forms of search which return Hits
> objects cannot be called remotely, some non optimal form of search
> will get called on the server(s) and I can't do anything about it. For
> example "void search(Query query, Filter filter, HitCollector
> results)" gets called.
> 3) Under the hood everything takes care of itself. When I call the
> "public Hits search(){...}" on the client, and use the Hits object to
> retrieve the 100 most relevant or top sorting results, a non optimal
> form of search does *not* get called on the server (maybe a form
> returning "TopDocs" is called). In this case I'm worrying
> unnecessarily!?

The correct answer is (3).  Try it and see!

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 17:54:46 2005
Return-Path: <java-user-return-15808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81559 invoked from network); 10 Aug 2005 17:54:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 17:54:46 -0000
Received: (qmail 72697 invoked by uid 500); 10 Aug 2005 17:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72437 invoked by uid 500); 10 Aug 2005 17:54:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72413 invoked by uid 99); 10 Aug 2005 17:54:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 10:54:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 10:55:01 -0700
Received: by wproxy.gmail.com with SMTP id 71so186273wri
        for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 10:54:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=oHOvH6xHN/cs8HAyJsaK5TdtFPECMC2GfhLZWI9/dC1DS1JDUlNGfIyY4E/SWjWxs3KnfYUMN31WMXOeqUkCKemyctKaJ4yh5EKzCO9upFXTwDieSje2yVftYWtV8VjvSsH/qdXabWZlXacRTHrTQnwQ+vj1q38C01bsmYT8I54=
Received: by 10.54.36.61 with SMTP id j61mr607673wrj;
        Wed, 10 Aug 2005 10:54:38 -0700 (PDT)
Received: by 10.54.121.15 with HTTP; Wed, 10 Aug 2005 10:54:37 -0700 (PDT)
Message-ID: <34cc3b0a050810105477fe8262@mail.gmail.com>
Date: Wed, 10 Aug 2005 13:54:37 -0400
From: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing document instances and retrieving instance attributes
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm adding files to an index over time, so after some time I'm likely
to see the same file more than once. I would like to be able to search
for the information about that particular instance of the file
(Filename, date etc) For instance I index File1 and then File2 (which
are identical) at different times I want to be able to search for the
contents and retrieve all the Filenames and MIME.

The first way I did it was to add a seperate doc for every instance as foll=
ows

DOC   1
FILEID 123
MIME   test/html
CONTENT   blam blam blam etc.

DOC   2
FILEID 123
FILENAME  File1
DATE   090909

DOC   3
FILEID 123
FILENAME  File2
DATE   101010
AUTH   Jim Jones

The problem with this was that if the user needed all of the Filenames
that are associated with content:blam I would have to search for
fileID:123 to retrieve them. This gets slow with several thousand hits
because I have to do a search for every hit.

I solved that by using multiple fields of the same name.

DOC   1
FILEID 123
MIME   test/html
CONTENT   blam blam blam etc.
FILENAME  File1
DATE   090909
FILENAME  File2
DATE   101010
AUTH   Jim Jones

But now I have a problem where I can't retrieve specific information
about an instance of the file. I tried using getFields(String) but if
I wanted the author for instance 2 I have a problem, it should be Jim
jones but in the index it looks like he's the auther for instance 1.

One solution I see would be to fill all of the fields for each
instance with empty strings, but that seems like a bit of a hack.

Another that fell appart fairly quickly was to have a reference table.

DOCID =09=09=09=09 1
FILEID =09=09=09=09   123abd321
MIME/TYPE=09=09=09text/html
INSTANCE =09=09=09uri1 collectiondate1
URI1 =09=09=09=09    http://blam.com/
COLLECTIONDATE1=09=0912355
INSTANCE=09=09=09uri2 collectiondate2 author2
URI2=09=09=09=09     http://google.ca/
COLLECTIONDATE2=09=0912356
AUTHOR2=09=09=09=09Jim Brown

Now I can't search for URI without having to search for URI1:foo + URI2:foo=
 ...

How can I make specific attributes of an instance of the file
searchable without having to do a search for every hit?

Thanks,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 18:52:37 2005
Return-Path: <java-user-return-15809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5529 invoked from network); 10 Aug 2005 18:52:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 18:52:37 -0000
Received: (qmail 71127 invoked by uid 500); 10 Aug 2005 18:52:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70855 invoked by uid 500); 10 Aug 2005 18:52:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70842 invoked by uid 99); 10 Aug 2005 18:52:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 11:52:30 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO rproxy.gmail.com) (64.233.170.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 11:52:52 -0700
Received: by rproxy.gmail.com with SMTP id 1so68946rny
        for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 11:52:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hu7POC2ghLzn0qIux7lWhLSQx6E8X21DWspO2Zk5XGQNUzRfMIqkUcBpHDaR+Xn3kWrxJxxOobEWJuln3Ya/xfK2pY2pBRPySggM24+pLTi6vau2Mr0qbG8LB4bs/GEjWaZPj6kxuAwcmM4Q8a/ZWL05+g3KQQqIFKtbvlyP6pY=
Received: by 10.38.6.14 with SMTP id 14mr20690rnf;
        Wed, 10 Aug 2005 11:52:28 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Wed, 10 Aug 2005 11:52:28 -0700 (PDT)
Message-ID: <7ca1239105081011521919755f@mail.gmail.com>
Date: Wed, 10 Aug 2005 11:52:28 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
Subject: Re: DOM or XML representation of a query?
In-Reply-To: <23597190.1123691719784.JavaMail.root@mswamui-andean.atl.sa.earthlink.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <23597190.1123691719784.JavaMail.root@mswamui-andean.atl.sa.earthlink.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well, the good practice I think is to decouple the backend from the
front end as much as possible. You might have different versions of
java running for each end and also, there might be code compatibility
issues with different versions.

Jian

On 8/10/05, Andrew Boyd <andrew.boyd@mindspring.com> wrote:
> Query is Serializable  why not use that?
>=20
> -----Original Message-----
> From: Roy Klein <klein@sitescape.com>
> Sent: Aug 10, 2005 10:08 AM
> To: java-user@lucene.apache.org
> Subject: DOM or XML representation of a query?
>=20
> Hi,
>=20
> The "front-end" guys working on my application need a way to pass me comp=
lex
> queries. I was thinking that it'd be pretty straightforward to hand them =
a
> package which helps them to create a DOM object which describes a query
> (i.e. nested Booleans combined with phrases and keyword searches, sort by
> field, etc).   I did a few searches in the archive of this list, but didn=
't
> find any examples, however, I suspect it's a common requirement amongst
> members of this list.
>=20
> Can anybody point be at an example of the above?
>=20
> Thanks!
>=20
> Roy
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> Andrew Boyd
> Software Architect
> Sun Certified J2EE Architect
> B&B Technical Services Inc.
> 205.422.2557
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 19:29:58 2005
Return-Path: <java-user-return-15810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24543 invoked from network); 10 Aug 2005 19:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 19:29:57 -0000
Received: (qmail 24526 invoked by uid 500); 10 Aug 2005 19:29:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24501 invoked by uid 500); 10 Aug 2005 19:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24487 invoked by uid 99); 10 Aug 2005 19:29:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 12:29:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.115.178.55] (HELO saturn) (204.115.178.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 12:30:12 -0700
Received: from traveler ([192.168.1.70]) by saturn with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 10 Aug 2005 15:29:48 -0400
From: "Tim Johnson" <timothy.w.johnson@saic.com>
To: <java-user@lucene.apache.org>
Subject: Indexing terms limit
Date: Wed, 10 Aug 2005 15:29:44 -0400
Message-ID: <000401c59de1$dce22de0$4601a8c0@traveler>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-OriginalArrivalTime: 10 Aug 2005 19:29:48.0033 (UTC) FILETIME=[DEC12710:01C59DE1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm currently attempting to index the distinct list of terms found in a
Lucene index using the TermEnum.  I'm creating a document with each list
and indexing the document of terms.  It appears there's a limit of
10,000 distinct terms within a given document.  Can this be overcome??


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 19:43:08 2005
Return-Path: <java-user-return-15811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29963 invoked from network); 10 Aug 2005 19:43:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 19:43:07 -0000
Received: (qmail 54729 invoked by uid 500); 10 Aug 2005 19:43:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54705 invoked by uid 500); 10 Aug 2005 19:43:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54692 invoked by uid 99); 10 Aug 2005 19:43:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 12:43:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rouhi.ali@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 12:43:24 -0700
Received: by wproxy.gmail.com with SMTP id 55so219535wri
        for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 12:43:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AMmV9CHXkiF5HQgvjpTbtCt5InnhlvJ6tGeXUSzu5LN1pHIqGcUxBnVbUwcXwf5RSRToz90hGLKlLn+/km2I6whhPV8ID2oIC/d1oJ1UfPXXgJzhC5ogLGl8EuxN/TjPxp6PiQ+yqFLOcqIHUCyP766GECquP4NRxygGZOBOQfg=
Received: by 10.54.47.74 with SMTP id u74mr689468wru;
        Wed, 10 Aug 2005 12:43:00 -0700 (PDT)
Received: by 10.54.104.8 with HTTP; Wed, 10 Aug 2005 12:43:00 -0700 (PDT)
Message-ID: <2c7935ba05081012433030dcba@mail.gmail.com>
Date: Wed, 10 Aug 2005 12:43:00 -0700
From: Ali Rouhi <rouhi.ali@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is Hits.java not Serializable?
In-Reply-To: <42FA2F21.20208@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <2c7935ba050809233764f98259@mail.gmail.com>
	 <42FA2F21.20208@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the quick answer!

Ali

On 8/10/05, Doug Cutting <cutting@apache.org> wrote:
> Ali Rouhi wrote:
> > I can think of  3 reasons why search methods returning Hits objects
> > are not exposed in Searchable:
> >
> > 1) Someone forgot to declare Hits Serializable
> > 2) There is a fundamental reason the forms of search which return Hits
> > objects cannot be called remotely, some non optimal form of search
> > will get called on the server(s) and I can't do anything about it. For
> > example "void search(Query query, Filter filter, HitCollector
> > results)" gets called.
> > 3) Under the hood everything takes care of itself. When I call the
> > "public Hits search(){...}" on the client, and use the Hits object to
> > retrieve the 100 most relevant or top sorting results, a non optimal
> > form of search does *not* get called on the server (maybe a form
> > returning "TopDocs" is called). In this case I'm worrying
> > unnecessarily!?
>=20
> The correct answer is (3).  Try it and see!
>=20
> Doug
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 19:59:04 2005
Return-Path: <java-user-return-15812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36375 invoked from network); 10 Aug 2005 19:59:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 19:59:04 -0000
Received: (qmail 85526 invoked by uid 500); 10 Aug 2005 19:58:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85494 invoked by uid 500); 10 Aug 2005 19:58:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85481 invoked by uid 99); 10 Aug 2005 19:58:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 12:58:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 66.249.82.196 as permitted sender)
Received: from [66.249.82.196] (HELO xproxy.gmail.com) (66.249.82.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 12:59:21 -0700
Received: by xproxy.gmail.com with SMTP id h33so84832wxd
        for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 12:58:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=rPmq/lO2QvbMENmA+/lFcnyQnb0kMSpjYWT3Cndhky6bKD2CmQDDUORhaQK7/g7as+qw562h2IA+3C5Yjp2N/1Wze1XkYpgFOD6Qmkz4IpPohF/06gprVHvfADNH5invziiYKFxTrY4E9qFbIP/paYUBAQBoop8KKSREWE4HgHk=
Received: by 10.70.58.8 with SMTP id g8mr33690wxa;
        Wed, 10 Aug 2005 12:58:57 -0700 (PDT)
Received: by 10.70.55.14 with HTTP; Wed, 10 Aug 2005 12:58:57 -0700 (PDT)
Message-ID: <88c6a67205081012588cc8726@mail.gmail.com>
Date: Wed, 10 Aug 2005 14:58:57 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing terms limit
In-Reply-To: <000401c59de1$dce22de0$4601a8c0@traveler>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <000401c59de1$dce22de0$4601a8c0@traveler>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See IndexWriter.setMaxFieldLength(), I think it's what you want:

from javadocs:

public void setMaxFieldLength(int maxFieldLength)

The maximum number of terms that will be indexed for a single field in
a document. This limits the amount of memory required for indexing, so
that collections with very large files will not crash the indexing
process by running out of memory.
Note that this effectively truncates large documents, excluding from
the index terms that occur further in the document. If you know your
source documents are large, be sure to set this value high enough to
accomodate the expected size. If you set it to Integer.MAX_VALUE, then
the only limit is your memory, but you should anticipate an
OutOfMemoryError.

By default, no more than 10,000 terms will be indexed for a field.

On 8/10/05, Tim Johnson <timothy.w.johnson@saic.com> wrote:
> I'm currently attempting to index the distinct list of terms found in a
> Lucene index using the TermEnum.  I'm creating a document with each list
> and indexing the document of terms.  It appears there's a limit of
> 10,000 distinct terms within a given document.  Can this be overcome??
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 20:41:21 2005
Return-Path: <java-user-return-15813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53338 invoked from network); 10 Aug 2005 20:41:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 20:41:21 -0000
Received: (qmail 51484 invoked by uid 500); 10 Aug 2005 20:41:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51221 invoked by uid 500); 10 Aug 2005 20:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51208 invoked by uid 99); 10 Aug 2005 20:41:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 13:41:14 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 13:41:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EB5735B78F; Wed, 10 Aug 2005 13:41:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DF3C87F45E
	for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 13:41:07 -0700 (PDT)
Date: Wed, 10 Aug 2005 13:41:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Indexing terms limit
In-Reply-To: <000401c59de1$dce22de0$4601a8c0@traveler>
Message-ID: <Pine.LNX.4.58.0508101340380.30404@hal.rescomp.berkeley.edu>
References: <000401c59de1$dce22de0$4601a8c0@traveler>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm currently attempting to index the distinct list of terms found in a
: Lucene index using the TermEnum.  I'm creating a document with each list
: and indexing the document of terms.  It appears there's a limit of
: 10,000 distinct terms within a given document.  Can this be overcome??

Out of curiousity: why are you doing this?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 22:33:33 2005
Return-Path: <java-user-return-15814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4523 invoked from network); 10 Aug 2005 22:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 22:33:33 -0000
Received: (qmail 27255 invoked by uid 500); 10 Aug 2005 22:33:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27208 invoked by uid 500); 10 Aug 2005 22:33:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27195 invoked by uid 99); 10 Aug 2005 22:33:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 15:33:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.203.212] (HELO sccmmhc92.asp.att.net) (204.127.203.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 15:33:49 -0700
Received: from traveler (12-219-116-136.client.mchsi.com[12.219.116.136])
          by sccmmhc92.asp.att.net (sccmmhc92) with SMTP
          id <20050810223325m92009jbh8e>; Wed, 10 Aug 2005 22:33:25 +0000
From: "Tim Johnson" <timothy.w.johnson@saic.com>
To: <java-user@lucene.apache.org>
Subject: RE: Indexing terms limit
Date: Wed, 10 Aug 2005 18:33:21 -0400
Message-ID: <000401c59dfb$836873e0$6501a80a@traveler>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <Pine.LNX.4.58.0508101340380.30404@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I posted before with issues about searching multiple indexes to get a
total number of docs that match a query with a given category.  The best
performance I found was to have a separate index for each index and
iterate over each category and do a hits.length() to get the total hits.


Well each query had to iterate over about 500 categories and as you can
assume, not every search has hits within every category.  So some of the
iteration can be reduced by determining which categories have terms that
match a search and only iterate over those indexes to get a total hit
count.  

I've indexed the list of terms within each index and search that index
first to get a distinct list of categories where the terms match and
thus reducing (in theory) the number on indexes needed to iterate.

If you have any suggestions on getting at the total hits faster, please
feel free to offer and suggestions.

Thanks
Tim

-----Original Message-----
From: hossman@hal.rescomp.berkeley.edu
[mailto:hossman@hal.rescomp.berkeley.edu] On Behalf Of Chris Hostetter
Sent: Wednesday, August 10, 2005 4:41 PM
To: java-user@lucene.apache.org
Subject: Re: Indexing terms limit


: I'm currently attempting to index the distinct list of terms found in
a
: Lucene index using the TermEnum.  I'm creating a document with each
list
: and indexing the document of terms.  It appears there's a limit of
: 10,000 distinct terms within a given document.  Can this be overcome??

Out of curiousity: why are you doing this?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 10 22:47:51 2005
Return-Path: <java-user-return-15815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8460 invoked from network); 10 Aug 2005 22:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Aug 2005 22:47:50 -0000
Received: (qmail 44202 invoked by uid 500); 10 Aug 2005 22:47:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43573 invoked by uid 500); 10 Aug 2005 22:47:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43560 invoked by uid 99); 10 Aug 2005 22:47:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 15:47:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fraschetti@gmail.com designates 64.233.162.196 as permitted sender)
Received: from [64.233.162.196] (HELO zproxy.gmail.com) (64.233.162.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 15:48:06 -0700
Received: by zproxy.gmail.com with SMTP id n29so163755nzf
        for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 15:47:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JmSVWm4RflEAfmI3AvUYJ6Ggp70oNdHLDGsuqEQ7q/bFgUQziXoEONvO6XRApPrZaSVJBScND+VK+vmn9RiqVr9gjZz1I5UXFwJuOtFiE++VIg/McBg1PAboGxwCo0mLU7TBrA0vrNOt/ZiA+60J/zpHZ04/iQ7sCwfyJ2uYZek=
Received: by 10.36.222.45 with SMTP id u45mr1015154nzg;
        Wed, 10 Aug 2005 15:47:43 -0700 (PDT)
Received: by 10.36.55.4 with HTTP; Wed, 10 Aug 2005 15:47:43 -0700 (PDT)
Message-ID: <cbdebdf805081015476d53a7f8@mail.gmail.com>
Date: Wed, 10 Aug 2005 15:47:43 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
To: java-user@lucene.apache.org
Subject: max number of documents
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

maybe this is a stupid question, maybe not...

hits.id returns an int.. which would lead me to assume the obvious
limitations of the size of the index (size meaning number of docs) ...
assuming I reach this limit, can I expect lucene to throw some sort of
exception?

What is the best practice for this? watch my count and switch to a new
index when the time comes, then search across both indexes?


--=20
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 01:04:00 2005
Return-Path: <java-user-return-15816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52672 invoked from network); 11 Aug 2005 01:03:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 01:03:59 -0000
Received: (qmail 76742 invoked by uid 500); 11 Aug 2005 01:03:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75932 invoked by uid 500); 11 Aug 2005 01:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75919 invoked by uid 99); 11 Aug 2005 01:03:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 18:03:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 18:04:15 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0EF8C13E2007; Wed, 10 Aug 2005 21:03:45 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 19FE413E2006
	for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 21:03:33 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <cbdebdf805081015476d53a7f8@mail.gmail.com>
References: <cbdebdf805081015476d53a7f8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D27DD516-F071-447E-A838-9562697AE934@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: max number of documents
Date: Wed, 10 Aug 2005 21:03:35 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 10, 2005, at 6:47 PM, Chris Fraschetti wrote:
> maybe this is a stupid question, maybe not...
>
> hits.id returns an int.. which would lead me to assume the obvious
> limitations of the size of the index (size meaning number of docs) ...
> assuming I reach this limit, can I expect lucene to throw some sort of
> exception?
>
> What is the best practice for this? watch my count and switch to a new
> index when the time comes, then search across both indexes?

Who's got Lucene indexes nearing the maximum integer value?   I'm  
seriously curious.  That's over 4 billion documents.

As for scaling - at that point I recommend checking out Nutch's  
architecture, especially the new MapReduce branch.  It's made for  
this sort of big time scalability.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 03:55:41 2005
Return-Path: <java-user-return-15817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99933 invoked from network); 11 Aug 2005 03:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 03:55:41 -0000
Received: (qmail 51023 invoked by uid 500); 11 Aug 2005 03:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50982 invoked by uid 500); 11 Aug 2005 03:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50965 invoked by uid 99); 11 Aug 2005 03:55:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 20:55:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.170.201 as permitted sender)
Received: from [64.233.170.201] (HELO rproxy.gmail.com) (64.233.170.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 20:55:57 -0700
Received: by rproxy.gmail.com with SMTP id g11so236699rne
        for <java-user@lucene.apache.org>; Wed, 10 Aug 2005 20:55:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XDa+7vSPIg6l8rFLWKMZtkU049+c5nsCWMN7oIyVUGR61hMSJoKQwOpsR48TMraBcIsAFBqQfjHZ9dWoxFIUd5qqPMjFnnj8ecV/b4GredTGIsB3L/yPeJStb6Yu5JiGvgCuWtyKDW+/GCqu1XxTr0Tqb7JKC1eUiYjDLKdCVNA=
Received: by 10.38.12.40 with SMTP id 40mr494579rnl;
        Wed, 10 Aug 2005 20:55:33 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Wed, 10 Aug 2005 20:55:33 -0700 (PDT)
Message-ID: <c68e391705081020554bac1984@mail.gmail.com>
Date: Wed, 10 Aug 2005 23:55:33 -0400
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: max number of documents
In-Reply-To: <D27DD516-F071-447E-A838-9562697AE934@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <cbdebdf805081015476d53a7f8@mail.gmail.com>
	 <D27DD516-F071-447E-A838-9562697AE934@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think it would be 2 billion.  There are many places that woudn't
like the overflow to negative docids I think...

We have indexes up to 200M documents, so 1/10th the max.
64 bit ids are definitely something to think about for the near future.

> Who's got Lucene indexes nearing the maximum integer value?   I'm
> seriously curious.  That's over 4 billion documents.
>=20
> As for scaling - at that point I recommend checking out Nutch's
> architecture, especially the new MapReduce branch.  It's made for
> this sort of big time scalability.
>=20
>      Erik

I'm still trying to grok MapReduce...

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 04:45:41 2005
Return-Path: <java-user-return-15818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19315 invoked from network); 11 Aug 2005 04:45:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 04:45:40 -0000
Received: (qmail 2676 invoked by uid 500); 11 Aug 2005 04:45:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2656 invoked by uid 500); 11 Aug 2005 04:45:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2643 invoked by uid 99); 11 Aug 2005 04:45:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 21:45:35 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 21:45:56 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1E34vS-0002ug-Ux
	for java-user@lucene.apache.org; Thu, 11 Aug 2005 06:44:19 +0200
Received: from netblock-66-159-221-83.dslextreme.com ([66.159.221.83])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 06:44:18 +0200
Received: from aurora00 by netblock-66-159-221-83.dslextreme.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 06:44:18 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  aurora <aurora00@gmail.com>
Subject:  create a single or multiple index?
Date:  Wed, 10 Aug 2005 21:42:33 -0700
Lines: 28
Message-ID:  <op.svbt07ia6yt6e7@wtung-lt.ironportsystems.com>
Mime-Version:  1.0
Content-Type:  text/plain; format=flowed; delsp=yes; charset=iso-8859-15
Content-Transfer-Encoding:  Quoted-Printable
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: netblock-66-159-221-83.dslextreme.com
User-Agent: Opera M2/8.02 (Win32, build 7680)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have two sources of data, let's say one is a set of articles and one i=
s  =

 from forum messages. I'd like see the opinion on whether to create one =
 =

single index or separate index for each kind of document.

The user interface is not yet finalized. The search result may be  =

presented as separated set or they may be interleaved. The user may even=
  =

be able to set a preference.

I think it is easier to create and maintain separate index. Documents ar=
e  =

coming from difference source at different rate. in this case the  =

IndexWriter don't have to aware of the other. They can even reindex  =

independently. On the other hand it maybe easier for the search to be do=
ne  =

on a single index.

Is there any experience on this issue?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 05:12:43 2005
Return-Path: <java-user-return-15819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26354 invoked from network); 11 Aug 2005 05:12:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 05:12:43 -0000
Received: (qmail 43967 invoked by uid 500); 11 Aug 2005 05:12:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43711 invoked by uid 500); 11 Aug 2005 05:12:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43697 invoked by uid 99); 11 Aug 2005 05:12:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 22:12:36 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.77] (HELO web31115.mail.mud.yahoo.com) (68.142.201.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Aug 2005 22:12:57 -0700
Received: (qmail 28600 invoked by uid 60001); 11 Aug 2005 05:12:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=cbKCyJxeeCYH98AN4tIgzl7i78Knm0HBrDnWBYogJpTfCR4IGlU6tFBUWcAFOLUOIkBTMU4+slvyyIH5zOiEx221jxMZ3WAK3foEexePqlHAYAKIT2HiEmb+jly9PwNh/tk+jLLuDbjCF069Le8uzRGyBdXajoekPlb/kHL5Dl0=  ;
Message-ID: <20050811051233.28598.qmail@web31115.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31115.mail.mud.yahoo.com via HTTP; Wed, 10 Aug 2005 22:12:33 PDT
Date: Wed, 10 Aug 2005 22:12:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: create a single or multiple index?
To: java-user@lucene.apache.org
In-Reply-To: <op.svbt07ia6yt6e7@wtung-lt.ironportsystems.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Search against multiple indices is easy enough with MultiSearcher or
its Parallel cousin.  From the usage point of view, it's as simple as
using a single IndexSearcher.

Otis


--- aurora <aurora00@gmail.com> wrote:

> I have two sources of data, let's say one is a set of articles and
> one is  
>  from forum messages. I'd like see the opinion on whether to create
> one  
> single index or separate index for each kind of document.
> 
> The user interface is not yet finalized. The search result may be  
> presented as separated set or they may be interleaved. The user may
> even  
> be able to set a preference.
> 
> I think it is easier to create and maintain separate index. Documents
> are  
> coming from difference source at different rate. in this case the  
> IndexWriter don't have to aware of the other. They can even reindex  
> independently. On the other hand it maybe easier for the search to be
> done  
> on a single index.
> 
> Is there any experience on this issue?
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 06:09:59 2005
Return-Path: <java-user-return-15820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43338 invoked from network); 11 Aug 2005 06:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 06:09:59 -0000
Received: (qmail 93498 invoked by uid 500); 11 Aug 2005 06:09:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93472 invoked by uid 500); 11 Aug 2005 06:09:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93459 invoked by uid 99); 11 Aug 2005 06:09:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 23:09:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Aug 2005 23:10:15 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j7B69ot09966
	for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 01:09:51 -0500
Message-ID: <42FAEBB1.5040205@getopt.org>
Date: Thu, 11 Aug 2005 08:09:53 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: max number of documents
References: <cbdebdf805081015476d53a7f8@mail.gmail.com>	 <D27DD516-F071-447E-A838-9562697AE934@ehatchersolutions.com> <c68e391705081020554bac1984@mail.gmail.com>
In-Reply-To: <c68e391705081020554bac1984@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> I think it would be 2 billion.  There are many places that woudn't
> like the overflow to negative docids I think...
> 
> We have indexes up to 200M documents, so 1/10th the max.
> 64 bit ids are definitely something to think about for the near future.

Until/unless Java grows 64 bit array indexes we can just dream about 
this ...

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 10:05:25 2005
Return-Path: <java-user-return-15821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12839 invoked from network); 11 Aug 2005 10:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 10:05:24 -0000
Received: (qmail 39451 invoked by uid 500); 11 Aug 2005 10:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39318 invoked by uid 500); 11 Aug 2005 10:05:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39303 invoked by uid 99); 11 Aug 2005 10:05:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 03:05:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 03:05:32 -0700
Received: by wproxy.gmail.com with SMTP id 55so340224wri
        for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 03:05:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Px6a8ndmV80wPHHnW2W4V1A5IOMzxla5P6zvpU7jazFEMMf0YhZ0ADRjpDFcz8wiMjrqaPm+TcVsXNSf5OfnHU0NnnqiNnFI3rk2lNJ0Ivrnkxyx12jZyulhuGAKIslKfox8Ni0qOH/SR2Zfu44HWgQMFukHxZKN0MwHUuznyFY=
Received: by 10.54.57.32 with SMTP id f32mr1085771wra;
        Thu, 11 Aug 2005 03:05:09 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Thu, 11 Aug 2005 03:05:09 -0700 (PDT)
Message-ID: <8a484a7805081103053ed2ed55@mail.gmail.com>
Date: Thu, 11 Aug 2005 12:05:09 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: setBoost(float) in org.apache.lucene.document.Field cannot be applied to (double)???
In-Reply-To: <2B71582C-F375-498C-AB02-5B46BD3281D6@media-style.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805080404346657105b@mail.gmail.com>
	 <20050804212104.21827.qmail@web31113.mail.mud.yahoo.com>
	 <8a484a780508071005341a4a71@mail.gmail.com>
	 <2B71582C-F375-498C-AB02-5B46BD3281D6@media-style.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thx stefan:)

On 8/7/05, Stefan Groschupf <sg@media-style.com> wrote:
> Hi,
> I run in the same problem some weeks ago as well.
> You can find following in the java doc:
>=20
> "Note: this value is not stored directly with the document in the
> index. Documents returned from IndexReader.document(int) and Hits.doc
> (int) may thus not have the same value present as when this field was
> indexed."
>=20
> HTH
> Stefan
>=20
>=20
> Am 07.08.2005 um 19:05 schrieb Riccardo Daviddi:
>=20
> > I don't know where I am wrong...
> >
> > I just do this:
> >
> > IndexWriter writer =3D new IndexWriter(indexDir, new StandardAnalyzer()=
,
> >                                            !IndexReader.indexExists
> > (indexDir));
> > writer.setUseCompoundFile(true);
> > Document document =3D new Document();
> > document.add(Field.Keyword("DocId", Integer.toString(docId)));
> > Field f =3D Field.Text("boostfield", "text");
> > f.setBoost(3.0f);
> > document.add(f);
> > writer.addDocument(document);
> >         writer.optimize();
> >         writer.close();
> >
> > if then i try to get the boost factor of the boostfield
> >
> > System.out.println(IndexReader.open(indexDir).document(0).getField
> > ("boostfield").getBoost());
> >
> > for the only one document indexed I get 1.0 instead of 3.0!
> >
> > where is the error?
> >
> > thx
> >
> > On 8/4/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> >> Yes. use 1.2f there.  That method accepts floats, not doubles.  That
> >> could be an error in the Lucene book.
> >>
> >> Otis
> >>
> >>
> >> --- Riccardo Daviddi <rdaviddi@gmail.com> wrote:
> >>
> >>
> >>> Why I got this error by writing for example:
> >>>
> >>> Field senderNameField =3D Field.Text("senderName", senderName);
> >>> Field subjectField =3D Field.Text("subject", subject);
> >>> subjectField.setBoost(1.2);
> >>>
> >>> as in the manual lucene in action??
> >>>
> >>> 1.2 is a double, but the method wants a float?
> >>> --
> >>> Riccardo Daviddi
> >>>
> >>> --------------------------------------------------------------------
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
> > --
> > Riccardo Daviddi
> > University of Siena - Information Engeneering
> > rdaviddi@gmail.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>=20
> ---------------------------------------------------------------
> company:        http://www.media-style.com
> forum:        http://www.text-mining.org
> blog:            http://www.find23.net
>=20
>=20
>=20
>=20


--=20
Riccardo Daviddi
University of Siena - Information Engeneering
rdaviddi@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 12:37:37 2005
Return-Path: <java-user-return-15822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63513 invoked from network); 11 Aug 2005 12:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 12:37:37 -0000
Received: (qmail 10817 invoked by uid 500); 11 Aug 2005 12:37:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10712 invoked by uid 500); 11 Aug 2005 12:37:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10641 invoked by uid 99); 11 Aug 2005 12:37:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 05:37:19 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.7.81.164] (HELO mx1.idowa.net) (217.7.81.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 05:37:40 -0700
Received: from mx1.idowa.net (localhost [127.0.0.1])
	by mx1-int.idowa.de (Postfix) with ESMTP id C207C1013BA
	for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 14:37:11 +0200 (CEST)
Received: from mail0.vn.idowa.de (vl-gw-float.sr.idowa.net [217.7.81.140])
	by mx1-sa.idowa.net (Postfix) with ESMTP id B2D461013B9
	for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 14:37:11 +0200 (CEST)
Received: from [192.168.31.5] (unknown [192.168.31.5])
	by mail0.vn.idowa.de (Postfix) with ESMTP id E366C662E2
	for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 14:37:10 +0200 (CEST)
Message-ID: <42FB4632.7060700@idowa.de>
Date: Thu, 11 Aug 2005 14:36:02 +0200
From: Harald Stowasser <stowasser.h@idowa.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; de-AT; rv:1.7.11) Gecko/20050728
X-Accept-Language: de, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()
References: <20050810162223.29006.qmail@web31107.mail.mud.yahoo.com>
In-Reply-To: <20050810162223.29006.qmail@web31107.mail.mud.yahoo.com>
X-Enigmail-Version: 0.92.0.0
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enigFF28EECCD154C862E8C8813A"
X-Spam-Checker-Version: SpamAssassin 3.0.0 (2004-09-13) on hermes.idowa.de
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------enigFF28EECCD154C862E8C8813A
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Otis Gospodnetic schrieb:

> Is -Xmx case sensitive?  Should it be 1000m instead of 1000M?  Not
> sure.
>=20

I'am starting with:
java -Xms256M -Xmx512M -jar Suchmaschine.jar


--=20
Die analytische Maschine (der Computer) kann nur das ausf=FChren, was wir=

zu programmieren imstande sind. (Ada Lovelace)


--------------enigFF28EECCD154C862E8C8813A
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFC+0Y7d2ByLviqWmYRAodmAJ9330EJS3UVjgDPe5LuJeiuCkdXXQCdHpZl
h59oBvR7iIj1b6u5vbd13h8=
=vVnQ
-----END PGP SIGNATURE-----

--------------enigFF28EECCD154C862E8C8813A--


From java-user-return-15823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 15:15:01 2005
Return-Path: <java-user-return-15823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30436 invoked from network); 11 Aug 2005 15:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 15:15:01 -0000
Received: (qmail 83928 invoked by uid 500); 11 Aug 2005 15:14:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83074 invoked by uid 500); 11 Aug 2005 15:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83061 invoked by uid 99); 11 Aug 2005 15:14:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 08:14:56 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.42] (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Aug 2005 08:15:17 -0700
Received: (qmail 91763 invoked by uid 60001); 11 Aug 2005 15:14:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OrbI5QqJYfharCmdVsZxzdSrOH377nh6bJuQJP0jmIbBPSndkG5xipvohdB8I1tTk/UpaP2SgbgZ6jBkjL4MvIIUAntG44zFUI6kMwhJRX5GbEJ9JrHEj6gS+UoeKuC0YwP9et1dTBW2MRZy1+nYmKfKPpkkSqYB9OM9mjBHajM=  ;
Message-ID: <20050811151453.91756.qmail@web31109.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31109.mail.mud.yahoo.com via HTTP; Thu, 11 Aug 2005 08:14:53 PDT
Date: Thu, 11 Aug 2005 08:14:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: OutOfMemoryError on addIndexes()
To: java-user@lucene.apache.org
In-Reply-To: <42FB4632.7060700@idowa.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> > Is -Xmx case sensitive?  Should it be 1000m instead of 1000M?  Not
> > sure.
> > 
> 
> I'am starting with:
> java -Xms256M -Xmx512M -jar Suchmaschine.jar

And if you look at the size of your JVM, does it really use all 512 MB?
If it does not, maybe you can try this:

  java -Xms256m -Xmx512m -jar Suchmaschine.jar

If that doesn't help, it would be good to run this under a profiler and
see what eats your memory.

Otis
P.S.
I recall reading that using the same amount for Xms and Xmx results in
better performance.  Also, consider using -server option (Hotspot), if
you are using Sun's JVM.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 15:31:19 2005
Return-Path: <java-user-return-15824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38567 invoked from network); 11 Aug 2005 15:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 15:31:18 -0000
Received: (qmail 22638 invoked by uid 500); 11 Aug 2005 15:31:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22618 invoked by uid 500); 11 Aug 2005 15:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22605 invoked by uid 99); 11 Aug 2005 15:31:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 08:31:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 08:31:34 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: OutOfMemoryError on addIndexes()
Date: Thu, 11 Aug 2005 11:31:10 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D1310399EB31@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemoryError on addIndexes()
Thread-Index: AcWeiGW2CkQuF1RtQ+C8dgd5ROCWZAAAQgcg
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please forgive my jumping on this thread, but I have a similar issue.  I
have a server process on Linux that creates the java process (java
-Xms256m -Xmx512m -jar Suchmaschine.jar).  The problem is that after the
processing is done, the memory is retained.  Is there a collection
argument that would shrink the java memory pool back down to the min?

Thanks,
Tom

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Thursday, August 11, 2005 11:15 AM
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()

> > Is -Xmx case sensitive?  Should it be 1000m instead of 1000M?  Not
> > sure.
> >=20
>=20
> I'am starting with:
> java -Xms256M -Xmx512M -jar Suchmaschine.jar

And if you look at the size of your JVM, does it really use all 512 MB?
If it does not, maybe you can try this:

  java -Xms256m -Xmx512m -jar Suchmaschine.jar

If that doesn't help, it would be good to run this under a profiler and
see what eats your memory.

Otis
P.S.
I recall reading that using the same amount for Xms and Xmx results in
better performance.  Also, consider using -server option (Hotspot), if
you are using Sun's JVM.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 17:26:11 2005
Return-Path: <java-user-return-15825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74002 invoked from network); 11 Aug 2005 17:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 17:26:11 -0000
Received: (qmail 16371 invoked by uid 500); 11 Aug 2005 17:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16147 invoked by uid 500); 11 Aug 2005 17:26:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16134 invoked by uid 99); 11 Aug 2005 17:26:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 10:26:05 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.41] (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Aug 2005 10:26:26 -0700
Received: (qmail 49354 invoked by uid 60001); 11 Aug 2005 17:26:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=mXACp3MvL6pv/OTSvZbSb/8KdqR6sPEWvpQUp3W7zngPrvBMN0Ce2Uh81unED+T4K2zz5x2nE9PmyONfaK/SWKrqZkBQLhwVIn3dyi9FN40UmuRAtuX/i/blBfGx1Xh6G+Ozr+hDk7LUzPBefW7Pa36vpif3DRQou9XOSco36TE=  ;
Message-ID: <20050811172602.49352.qmail@web31108.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31108.mail.mud.yahoo.com via HTTP; Thu, 11 Aug 2005 10:26:02 PDT
Date: Thu, 11 Aug 2005 10:26:02 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: OutOfMemoryError on addIndexes()
To: java-user@lucene.apache.org
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D1310399EB31@MAIL01.wescodist.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can't really _force_ the JVM to perform the GC and clean up the
heap, although you can _suggest_ it via System.gc()

You can try playing with this:

    private static long gc()
    {
        long freeMemBefore = Runtime.getRuntime().freeMemory();
        System.out.println("Free Memory Before: " + freeMemBefore);
        System.gc();
        try {
            Thread.sleep(1000);
            System.runFinalization();
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.gc();
        long freeMemAfter = Runtime.getRuntime().freeMemory();
        System.out.println("Total Memory      : " +
Runtime.getRuntime().totalMemory());
        System.out.println("Max Memory        : " +
Runtime.getRuntime().maxMemory());
        System.out.println("Free Memory After : " + freeMemAfter);
        return freeMemBefore-freeMemAfter;
    }

Otis


--- "Aigner, Thomas" <TAigner@WescoDist.com> wrote:

> Please forgive my jumping on this thread, but I have a similar issue.
>  I
> have a server process on Linux that creates the java process (java
> -Xms256m -Xmx512m -jar Suchmaschine.jar).  The problem is that after
> the
> processing is done, the memory is retained.  Is there a collection
> argument that would shrink the java memory pool back down to the min?
> 
> Thanks,
> Tom
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Thursday, August 11, 2005 11:15 AM
> To: java-user@lucene.apache.org
> Subject: Re: OutOfMemoryError on addIndexes()
> 
> > > Is -Xmx case sensitive?  Should it be 1000m instead of 1000M? 
> Not
> > > sure.
> > > 
> > 
> > I'am starting with:
> > java -Xms256M -Xmx512M -jar Suchmaschine.jar
> 
> And if you look at the size of your JVM, does it really use all 512
> MB?
> If it does not, maybe you can try this:
> 
>   java -Xms256m -Xmx512m -jar Suchmaschine.jar
> 
> If that doesn't help, it would be good to run this under a profiler
> and
> see what eats your memory.
> 
> Otis
> P.S.
> I recall reading that using the same amount for Xms and Xmx results
> in
> better performance.  Also, consider using -server option (Hotspot),
> if
> you are using Sun's JVM.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 17:46:35 2005
Return-Path: <java-user-return-15826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81715 invoked from network); 11 Aug 2005 17:46:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 17:46:35 -0000
Received: (qmail 60083 invoked by uid 500); 11 Aug 2005 17:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60057 invoked by uid 500); 11 Aug 2005 17:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60044 invoked by uid 99); 11 Aug 2005 17:46:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 10:46:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 10:46:52 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id DCC481BB51
	for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 19:46:21 +0200 (CEST)
Message-ID: <42FB8EED.6070309@fib.upc.edu>
Date: Thu, 11 Aug 2005 19:46:21 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Close searcher
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everybody,
I have several weeks fighting with Multisearcher and now I have a question:

When I have to call the method multisearcher.close()? before I have to 
close all IndexSearchers that are included in multisearcher?
This question are produced because, I modify one index (my multisearcher 
are composed by 6 Index) i don't know when and how I have to "refresh" 
multisearcher (closeing and open another time)

Any advice using multisearcher was welcome. thks for all.

PD: I say fichting with Multisearcher, but really isn't true my problems 
are produced because I don't use correctly. For all the people who wants 
to work with a multisearcher I have to say that it is easy :D.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 18:12:38 2005
Return-Path: <java-user-return-15827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89150 invoked from network); 11 Aug 2005 18:12:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 18:12:38 -0000
Received: (qmail 93586 invoked by uid 500); 11 Aug 2005 18:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93559 invoked by uid 500); 11 Aug 2005 18:12:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93546 invoked by uid 99); 11 Aug 2005 18:12:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 11:12:32 -0700
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.113] (HELO web34115.mail.mud.yahoo.com) (66.163.178.113)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Aug 2005 11:12:52 -0700
Received: (qmail 54136 invoked by uid 60001); 11 Aug 2005 18:12:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=bYf89JZ1lP1q7MF58WdbBQlxz39Blrfw252kw3PtfCphqUHTEynoKLeg/H8UhEJuqfP8zTO9l4j8wjZhTt9girieM/zSwCfuptV/pSBEP8MEiJwDkL1ctGiFCLRrjaNUrV5bBTPREVQl+gBRQrOFrivI/oVvOdafxMPGDRSel0A=  ;
Message-ID: <20050811181227.54132.qmail@web34115.mail.mud.yahoo.com>
Received: from [65.205.199.122] by web34115.mail.mud.yahoo.com via HTTP; Thu, 11 Aug 2005 11:12:27 PDT
Date: Thu, 11 Aug 2005 11:12:27 -0700 (PDT)
From: John Smith <john_smith9910@yahoo.com>
Subject: Updating existing documents in index: Solutions 
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-473921079-1123783947=:53812"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-473921079-1123783947=:53812
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


Hi all

 

This is a slightly long email. Pardon me.

 

As Lucene does not allow for updating an existing document in the index, the only option is to delete and reindex the message.When you have too many updates, this gets a little cumbersome. In our case, as such the actual content of the document being indexed does 

not change, but the fields around the content, like say "LastReadby" or something like Folder associated with it etc change. These are all fields that have been indexed as a part of the original  document in the index.

 

I have been contemplating putting these "commonly changing fields" into one  index and allow for delete and reindex on this  index alone and keep the static data in another index. DocumentID will be a stored field and will be stored in both the static and dynamic index, as a way of identifying the document.

 

Static index: Contains content of document indexed and documentID stored.

Dynamic index: Contains all fields about the document which change frequently indexed  and documentID stored.

 

 

Questions

 

1. First of all, is there a better solution to this frequently changing fields having to be reindexed ?

 

2. Let's say I go  with the 2 index approach, 

 

Example query:  Content: "Hello world" AND Folder:Folder1 AND LastReadBy: jane. If we execute these queries on our static and dynamic indexes, they will obviously fail to get hits.



 

     Let's say I have a way of splitting my queries such that  all content queries go to static (content) index only and queries on other fields go to the dynamic index, basically allow for queries to come in such a way that it is always a AND between the dynamic index result set and static index result set. So on the results set, I would have to retrieve the document ID and make sure we have the same documentID in both the result sets, in order for it to be a match.

      In  cases where the result sets are really huge from  both the queries, then even to get the number of hits, I will have to retrieve each and every document from the results, in order to get the documentID for comparison. Queries can get really slow.

 

Has anyone faced similar problems, If so what was your solution?

Any comments/thoughts will be appreciated.

 

Thank you

JS



		
---------------------------------
 Start your day with Yahoo! - make it your home page 
--0-473921079-1123783947=:53812--

From java-user-return-15828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 18:34:55 2005
Return-Path: <java-user-return-15828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95588 invoked from network); 11 Aug 2005 18:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 18:34:55 -0000
Received: (qmail 28317 invoked by uid 500); 11 Aug 2005 18:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27822 invoked by uid 500); 11 Aug 2005 18:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27809 invoked by uid 99); 11 Aug 2005 18:34:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 11:34:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 11:35:10 -0700
Received: by wproxy.gmail.com with SMTP id 71so472171wri
        for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 11:34:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BBrL7UCh8LgmUmE+fjfFP0cRiIhlH91tsRit8tSDAGinGmy9BQPHzHLv8yTvwBMAFgMfJVGsoU2xwhy4uAM94FFEOWjVFCC4fkGgTPWQfsMYvw4g2UvrhpTEAMFwTkNC1UrJTPphe3PqZdNl7ycsxrNfIxHON1qwdzpPC3cKIiM=
Received: by 10.54.16.26 with SMTP id 26mr1387566wrp;
        Thu, 11 Aug 2005 11:34:46 -0700 (PDT)
Received: by 10.54.121.15 with HTTP; Thu, 11 Aug 2005 11:34:46 -0700 (PDT)
Message-ID: <34cc3b0a050811113411bcfea@mail.gmail.com>
Date: Thu, 11 Aug 2005 14:34:46 -0400
From: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing document instances and retrieving instance attributes
In-Reply-To: <34cc3b0a050810105477fe8262@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <34cc3b0a050810105477fe8262@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So I've decided I'm going to simply have empty fields, and that
brought up several other questions.

First, is there a limit on the number of fields per document?

Secondly why are fields in Document implemented with a Vector instead
of a HashSet or similar? Wouldn't retrieval be faster without
iterating through a list?

Lastly how difficult (or possible) is it to do something like extend
the Document class to have the functionality I want?

I know I'm likely missing a simple solution but I just can't see it.

Chris

On 8/10/05, Chris D <brogar@gmail.com> wrote:
> I'm adding files to an index over time, so after some time I'm likely
> to see the same file more than once. I would like to be able to search
> for the information about that particular instance of the file
> (Filename, date etc) For instance I index File1 and then File2 (which
> are identical) at different times I want to be able to search for the
> contents and retrieve all the Filenames and MIME.
>=20
> The first way I did it was to add a seperate doc for every instance as fo=
llows
>=20
> DOC   1
> FILEID 123
> MIME   test/html
> CONTENT   blam blam blam etc.
>=20
> DOC   2
> FILEID 123
> FILENAME  File1
> DATE   090909
>=20
> DOC   3
> FILEID 123
> FILENAME  File2
> DATE   101010
> AUTH   Jim Jones
>=20
> The problem with this was that if the user needed all of the Filenames
> that are associated with content:blam I would have to search for
> fileID:123 to retrieve them. This gets slow with several thousand hits
> because I have to do a search for every hit.
>=20
> I solved that by using multiple fields of the same name.
>=20
> DOC   1
> FILEID 123
> MIME   test/html
> CONTENT   blam blam blam etc.
> FILENAME  File1
> DATE   090909
> FILENAME  File2
> DATE   101010
> AUTH   Jim Jones
>=20
> But now I have a problem where I can't retrieve specific information
> about an instance of the file. I tried using getFields(String) but if
> I wanted the author for instance 2 I have a problem, it should be Jim
> jones but in the index it looks like he's the auther for instance 1.
>=20
> One solution I see would be to fill all of the fields for each
> instance with empty strings, but that seems like a bit of a hack.
>=20
> Another that fell appart fairly quickly was to have a reference table.
>=20
> DOCID                            1
> FILEID                             123abd321
> MIME/TYPE                       text/html
> INSTANCE                        uri1 collectiondate1
> URI1                                http://blam.com/
> COLLECTIONDATE1         12355
> INSTANCE                        uri2 collectiondate2 author2
> URI2                                 http://google.ca/
> COLLECTIONDATE2         12356
> AUTHOR2                         Jim Brown
>=20
> Now I can't search for URI without having to search for URI1:foo + URI2:f=
oo ...
>=20
> How can I make specific attributes of an instance of the file
> searchable without having to do a search for every hit?
>=20
> Thanks,
> Chris
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 18:48:21 2005
Return-Path: <java-user-return-15829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2176 invoked from network); 11 Aug 2005 18:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 18:48:21 -0000
Received: (qmail 57868 invoked by uid 500); 11 Aug 2005 18:48:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57856 invoked by uid 500); 11 Aug 2005 18:48:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 45605 invoked by uid 99); 11 Aug 2005 18:44:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 84.95.2.7 is neither permitted nor denied by domain of eyal.junk@gmail.com)
Date: Thu, 11 Aug 2005 21:44:39 +0300
From: Eyal <eyal.junk@gmail.com>
Subject: RE: Updating existing documents in index: Solutions
In-reply-to: <20050811181227.54132.qmail@web34115.mail.mud.yahoo.com>
To: java-user@lucene.apache.org
Message-id: <0IL200G4JMMHLXR0@i_mtaout3.012.net.il>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-index: AcWeoEPW6pFyFmbmT3m7MHavUOkAQQABBexw
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Run a search on "Lucene ParallelReader" in google - You'll find something
Doug Cutting wrote that I believe is what you're looking for.

Eyal 
 

> -----Original Message-----
> From: John Smith [mailto:john_smith9910@yahoo.com] 
> Sent: Thursday, August 11, 2005 21:12 PM
> To: java-user@lucene.apache.org
> Subject: Updating existing documents in index: Solutions 
> 
> 
> Hi all
> 
>  
> 
> This is a slightly long email. Pardon me.
> 
>  
> 
> As Lucene does not allow for updating an existing document in 
> the index, the only option is to delete and reindex the 
> message.When you have too many updates, this gets a little 
> cumbersome. In our case, as such the actual content of the 
> document being indexed does 
> 
> not change, but the fields around the content, like say 
> "LastReadby" or something like Folder associated with it etc 
> change. These are all fields that have been indexed as a part 
> of the original  document in the index.
> 
>  
> 
> I have been contemplating putting these "commonly changing 
> fields" into one  index and allow for delete and reindex on 
> this  index alone and keep the static data in another index. 
> DocumentID will be a stored field and will be stored in both 
> the static and dynamic index, as a way of identifying the document.
> 
>  
> 
> Static index: Contains content of document indexed and 
> documentID stored.
> 
> Dynamic index: Contains all fields about the document which 
> change frequently indexed  and documentID stored.
> 
>  
> 
>  
> 
> Questions
> 
>  
> 
> 1. First of all, is there a better solution to this 
> frequently changing fields having to be reindexed ?
> 
>  
> 
> 2. Let's say I go  with the 2 index approach, 
> 
>  
> 
> Example query:  Content: "Hello world" AND Folder:Folder1 AND 
> LastReadBy: jane. If we execute these queries on our static 
> and dynamic indexes, they will obviously fail to get hits.
> 
> 
> 
>  
> 
>      Let's say I have a way of splitting my queries such that 
>  all content queries go to static (content) index only and 
> queries on other fields go to the dynamic index, basically 
> allow for queries to come in such a way that it is always a 
> AND between the dynamic index result set and static index 
> result set. So on the results set, I would have to retrieve 
> the document ID and make sure we have the same documentID in 
> both the result sets, in order for it to be a match.
> 
>       In  cases where the result sets are really huge from  
> both the queries, then even to get the number of hits, I will 
> have to retrieve each and every document from the results, in 
> order to get the documentID for comparison. Queries can get 
> really slow.
> 
>  
> 
> Has anyone faced similar problems, If so what was your solution?
> 
> Any comments/thoughts will be appreciated.
> 
>  
> 
> Thank you
> 
> JS
> 
> 
> 
> 		
> ---------------------------------
>  Start your day with Yahoo! - make it your home page 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 18:52:14 2005
Return-Path: <java-user-return-15830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3148 invoked from network); 11 Aug 2005 18:52:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 18:52:14 -0000
Received: (qmail 61565 invoked by uid 500); 11 Aug 2005 18:52:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61541 invoked by uid 500); 11 Aug 2005 18:52:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61528 invoked by uid 99); 11 Aug 2005 18:52:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 11:52:09 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.40] (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Aug 2005 11:52:30 -0700
Received: (qmail 6000 invoked by uid 60001); 11 Aug 2005 18:52:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=IUin0Ie+WhB/UDrrl/ikii7oUvyLtZ7LLCpMOgY7gMoqzI8OIqDS7Fmvs/DWhUsGJ89U7ifBAmVNniUrcISTTgk9XLF+vQGaIF7x2XnobRdIC4nSf7THs4XyAkLfbER6lkRWMuc/+djlDjAlYN+qY9pvOEzpiUh7p2hP2lmPFZM=  ;
Message-ID: <20050811185206.5998.qmail@web31107.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31107.mail.mud.yahoo.com via HTTP; Thu, 11 Aug 2005 11:52:06 PDT
Date: Thu, 11 Aug 2005 11:52:06 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing document instances and retrieving instance attributes
To: java-user@lucene.apache.org
In-Reply-To: <34cc3b0a050811113411bcfea@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> So I've decided I'm going to simply have empty fields, and that
> brought up several other questions.
> 
> First, is there a limit on the number of fields per document?

I don't think so.

> Secondly why are fields in Document implemented with a Vector instead
> of a HashSet or similar? Wouldn't retrieval be faster without
> iterating through a list?

Field order may be important.  Maybe it could be done with Lists
instead of Vectors, though.

> Lastly how difficult (or possible) is it to do something like extend
> the Document class to have the functionality I want?

I'm not sure, I never had to do it.  I see the class is final, so you
won't be able to extend it.  Maybe the final modifier could be removed,
if you present a good use case.

Otis

> I know I'm likely missing a simple solution but I just can't see it.
> 
> Chris
> 
> On 8/10/05, Chris D <brogar@gmail.com> wrote:
> > I'm adding files to an index over time, so after some time I'm
> likely
> > to see the same file more than once. I would like to be able to
> search
> > for the information about that particular instance of the file
> > (Filename, date etc) For instance I index File1 and then File2
> (which
> > are identical) at different times I want to be able to search for
> the
> > contents and retrieve all the Filenames and MIME.
> > 
> > The first way I did it was to add a seperate doc for every instance
> as follows
> > 
> > DOC   1
> > FILEID 123
> > MIME   test/html
> > CONTENT   blam blam blam etc.
> > 
> > DOC   2
> > FILEID 123
> > FILENAME  File1
> > DATE   090909
> > 
> > DOC   3
> > FILEID 123
> > FILENAME  File2
> > DATE   101010
> > AUTH   Jim Jones
> > 
> > The problem with this was that if the user needed all of the
> Filenames
> > that are associated with content:blam I would have to search for
> > fileID:123 to retrieve them. This gets slow with several thousand
> hits
> > because I have to do a search for every hit.
> > 
> > I solved that by using multiple fields of the same name.
> > 
> > DOC   1
> > FILEID 123
> > MIME   test/html
> > CONTENT   blam blam blam etc.
> > FILENAME  File1
> > DATE   090909
> > FILENAME  File2
> > DATE   101010
> > AUTH   Jim Jones
> > 
> > But now I have a problem where I can't retrieve specific
> information
> > about an instance of the file. I tried using getFields(String) but
> if
> > I wanted the author for instance 2 I have a problem, it should be
> Jim
> > jones but in the index it looks like he's the auther for instance
> 1.
> > 
> > One solution I see would be to fill all of the fields for each
> > instance with empty strings, but that seems like a bit of a hack.
> > 
> > Another that fell appart fairly quickly was to have a reference
> table.
> > 
> > DOCID                            1
> > FILEID                             123abd321
> > MIME/TYPE                       text/html
> > INSTANCE                        uri1 collectiondate1
> > URI1                                http://blam.com/
> > COLLECTIONDATE1         12355
> > INSTANCE                        uri2 collectiondate2 author2
> > URI2                                 http://google.ca/
> > COLLECTIONDATE2         12356
> > AUTHOR2                         Jim Brown
> > 
> > Now I can't search for URI without having to search for URI1:foo +
> URI2:foo ...
> > 
> > How can I make specific attributes of an instance of the file
> > searchable without having to do a search for every hit?
> > 
> > Thanks,
> > Chris
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 19:41:35 2005
Return-Path: <java-user-return-15831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24549 invoked from network); 11 Aug 2005 19:41:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 19:41:35 -0000
Received: (qmail 38080 invoked by uid 500); 11 Aug 2005 19:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38060 invoked by uid 500); 11 Aug 2005 19:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38046 invoked by uid 99); 11 Aug 2005 19:41:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 12:41:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 12:41:50 -0700
Received: by wproxy.gmail.com with SMTP id 71so488325wri
        for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 12:41:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=n2Df+lMqKk+1UWx9ZDrg3k2geWJpLK7icduAxQ3jC0F59k3VAv+cUw2rWG425MeYWwzjNKzT7N3dcn0RFtZjg73E++xeYXOe1prtQJ/mlE3kjdk18AXh0WAYKZAzAHBENwLHWrS/1oDMGeAwJPu4yM2nGqGjPxKY5lVN1HcQmyc=
Received: by 10.54.10.61 with SMTP id 61mr1431954wrj;
        Thu, 11 Aug 2005 12:41:27 -0700 (PDT)
Received: by 10.54.121.15 with HTTP; Thu, 11 Aug 2005 12:41:26 -0700 (PDT)
Message-ID: <34cc3b0a05081112412a18a802@mail.gmail.com>
Date: Thu, 11 Aug 2005 15:41:27 -0400
From: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing document instances and retrieving instance attributes
In-Reply-To: <20050811185206.5998.qmail@web31107.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <34cc3b0a050811113411bcfea@mail.gmail.com>
	 <20050811185206.5998.qmail@web31107.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/11/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>=20
> > So I've decided I'm going to simply have empty fields, and that
> > brought up several other questions.
> >
> > First, is there a limit on the number of fields per document?
>=20
> I don't think so.
>=20
> > Secondly why are fields in Document implemented with a Vector instead
> > of a HashSet or similar? Wouldn't retrieval be faster without
> > iterating through a list?
>=20
> Field order may be important.  Maybe it could be done with Lists
> instead of Vectors, though.

> > Lastly how difficult (or possible) is it to do something like extend
> > the Document class to have the functionality I want?
>=20
> I'm not sure, I never had to do it.  I see the class is final, so you
> won't be able to extend it.  Maybe the final modifier could be removed,
> if you present a good use case.

Well in my case field order is important, but the order of the
individual fields isn't. So I can speed up getFields to roughly O(1)
by implementing Document as follows. (I think add() takes a bit of a
hit as a result)

  Hashtable fields =3D new Hashtable();
  private float boost =3D 1.0f;

  public final void add(Field field) {
    if(fields.contains(field.name)){
    =09((LinkedList)(fields.get(field.name))).addLast(field);
    } else {
    =09LinkedList al =3D new LinkedList();
    =09al.add(field);
    =09fields.add(al);
    }
  }

  public final void removeField(String name) {
    if(fields.contains(name)){
    =09((LinkedList)(fields.get(name))).removeFirst();
    }
  }
 =20
  public final void removeFields(String name) {
=09    if(fields.contains(name)){
=09    =09fields.remove(name);
=09    }
   }

  public final Field getField(String name) {
    if(fields.contains(name)){
    =09return ((LinkedList)(fields.get(name))).getFirst();
    }
    return null;
  }

  public final String get(String name) {
=09if(fields.contains(name)){
=09=09return ((Field)((LinkedList)(fields.get(name))).getFirst()).stringVal=
ue();
=09}
    return null;
  }

  /** Returns an Enumeration of all the fields in a document. */
  public final Enumeration fields() {
=09//This one is a little harder.
    return ((Vector)fields).elements();
  }

   public final Field[] getFields(String name) {
     List result =3D (LinkedList)(fields.get(name));
     if (result.size() =3D=3D 0)
       return null;
     return (Field[])result.toArray(new Field[result.size()]);
   }

  public final String[] getValues(String name) {
    List result =3D new ArrayList();
=09Field[] arr =3D getFields(name);
    for (int i =3D 0; i < arr.length; i++) {
      Field field =3D arr[i];
      if (!field.isBinary())
        result.add(field.stringValue());
    }
    if (result.size() =3D=3D 0)
      return null;
    return (String[])result.toArray(new String[result.size()]);
  }

(I missed some functions because I got tired and it's nearing the end
of the day.) This doesn't solve the original problem of having to have
empty string playing placeholder but at least it would lessen the pain
a bit.

Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 11 20:43:52 2005
Return-Path: <java-user-return-15832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38342 invoked from network); 11 Aug 2005 20:43:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Aug 2005 20:43:52 -0000
Received: (qmail 16194 invoked by uid 500); 11 Aug 2005 20:43:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16165 invoked by uid 500); 11 Aug 2005 20:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16152 invoked by uid 99); 11 Aug 2005 20:43:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 13:43:47 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,FROM_HAS_ULINE_NUMS,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.113] (HELO web34115.mail.mud.yahoo.com) (66.163.178.113)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Aug 2005 13:44:08 -0700
Received: (qmail 99402 invoked by uid 60001); 11 Aug 2005 20:43:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=noLZCXPiHCvDyGPQedLKBJHOYvBDsbUYNAwDZEI2NlPZiGWMITl1iDEWYsvK53zKyiVHWZf6j0A4EA3THTWPwP15auTUcMXdgkUVmUP24qneRjN+psaYIRAmidG37P2sCGayVGDja8dj7dDObQsxTY/6kbl/TP++ULzmmU0ztQk=  ;
Message-ID: <20050811204344.99400.qmail@web34115.mail.mud.yahoo.com>
Received: from [65.205.199.122] by web34115.mail.mud.yahoo.com via HTTP; Thu, 11 Aug 2005 13:43:44 PDT
Date: Thu, 11 Aug 2005 13:43:44 -0700 (PDT)
From: John Smith <john_smith9910@yahoo.com>
Subject: RE: Updating existing documents in index: Solutions
To: java-user@lucene.apache.org
In-Reply-To: <0IL200G4JMMHLXR0@i_mtaout3.012.net.il>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-894847110-1123793024=:99169"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-894847110-1123793024=:99169
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thank you . That does look like what I want
 
JS

Eyal <eyal.junk@gmail.com> wrote:
Run a search on "Lucene ParallelReader" in google - You'll find something
Doug Cutting wrote that I believe is what you're looking for.

Eyal 


> -----Original Message-----
> From: John Smith [mailto:john_smith9910@yahoo.com] 
> Sent: Thursday, August 11, 2005 21:12 PM
> To: java-user@lucene.apache.org
> Subject: Updating existing documents in index: Solutions 
> 
> 
> Hi all
> 
> 
> 
> This is a slightly long email. Pardon me.
> 
> 
> 
> As Lucene does not allow for updating an existing document in 
> the index, the only option is to delete and reindex the 
> message.When you have too many updates, this gets a little 
> cumbersome. In our case, as such the actual content of the 
> document being indexed does 
> 
> not change, but the fields around the content, like say 
> "LastReadby" or something like Folder associated with it etc 
> change. These are all fields that have been indexed as a part 
> of the original document in the index.
> 
> 
> 
> I have been contemplating putting these "commonly changing 
> fields" into one index and allow for delete and reindex on 
> this index alone and keep the static data in another index. 
> DocumentID will be a stored field and will be stored in both 
> the static and dynamic index, as a way of identifying the document.
> 
> 
> 
> Static index: Contains content of document indexed and 
> documentID stored.
> 
> Dynamic index: Contains all fields about the document which 
> change frequently indexed and documentID stored.
> 
> 
> 
> 
> 
> Questions
> 
> 
> 
> 1. First of all, is there a better solution to this 
> frequently changing fields having to be reindexed ?
> 
> 
> 
> 2. Let's say I go with the 2 index approach, 
> 
> 
> 
> Example query: Content: "Hello world" AND Folder:Folder1 AND 
> LastReadBy: jane. If we execute these queries on our static 
> and dynamic indexes, they will obviously fail to get hits.
> 
> 
> 
> 
> 
> Let's say I have a way of splitting my queries such that 
> all content queries go to static (content) index only and 
> queries on other fields go to the dynamic index, basically 
> allow for queries to come in such a way that it is always a 
> AND between the dynamic index result set and static index 
> result set. So on the results set, I would have to retrieve 
> the document ID and make sure we have the same documentID in 
> both the result sets, in order for it to be a match.
> 
> In cases where the result sets are really huge from 
> both the queries, then even to get the number of hits, I will 
> have to retrieve each and every document from the results, in 
> order to get the documentID for comparison. Queries can get 
> really slow.
> 
> 
> 
> Has anyone faced similar problems, If so what was your solution?
> 
> Any comments/thoughts will be appreciated.
> 
> 
> 
> Thank you
> 
> JS
> 
> 
> 
> 
> ---------------------------------
> Start your day with Yahoo! - make it your home page 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-894847110-1123793024=:99169--

From java-user-return-15833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 02:26:07 2005
Return-Path: <java-user-return-15833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37700 invoked from network); 12 Aug 2005 02:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 02:26:06 -0000
Received: (qmail 63503 invoked by uid 500); 12 Aug 2005 02:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62935 invoked by uid 500); 12 Aug 2005 02:25:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62922 invoked by uid 99); 12 Aug 2005 02:25:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 19:25:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of n.maisonneuve@gmail.com designates 64.233.182.203 as permitted sender)
Received: from [64.233.182.203] (HELO nproxy.gmail.com) (64.233.182.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Aug 2005 19:26:18 -0700
Received: by nproxy.gmail.com with SMTP id d4so113323nfe
        for <java-user@lucene.apache.org>; Thu, 11 Aug 2005 19:25:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=orIuSha4ET8Orm8tVWsZwmHuJsaNxS3z0ew3yWYLxyp1b/74kNS9mdI3rjEHPbm1u0uhXY/EuGIy7PZ8n2Kp7hmRb0YsqeS+l+G1dEkJSAtw3muPWX8S/Wj6lmpmRIdJVcXjX3r9pYiznx8t3MGNPwWqx42m0Q3jQ4ry5sUf/X0=
Received: by 10.48.143.9 with SMTP id q9mr79937nfd;
        Thu, 11 Aug 2005 19:25:53 -0700 (PDT)
Received: by 10.48.144.13 with HTTP; Thu, 11 Aug 2005 19:25:53 -0700 (PDT)
Message-ID: <7b870341050811192573e9bc87@mail.gmail.com>
Date: Fri, 12 Aug 2005 04:25:53 +0200
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Updating existing documents in index: Solutions
In-Reply-To: <20050811204344.99400.qmail@web34115.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <0IL200G4JMMHLXR0@i_mtaout3.012.net.il>
	 <20050811204344.99400.qmail@web34115.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

maybe this  code can be useful for you=20

http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34629

nicolas

On 8/11/05, John Smith <john_smith9910@yahoo.com> wrote:
> Thank you . That does look like what I want
>=20
> JS
>=20
> Eyal <eyal.junk@gmail.com> wrote:
> Run a search on "Lucene ParallelReader" in google - You'll find something
> Doug Cutting wrote that I believe is what you're looking for.
>=20
> Eyal
>=20
>=20
> > -----Original Message-----
> > From: John Smith [mailto:john_smith9910@yahoo.com]
> > Sent: Thursday, August 11, 2005 21:12 PM
> > To: java-user@lucene.apache.org
> > Subject: Updating existing documents in index: Solutions
> >
> >
> > Hi all
> >
> >
> >
> > This is a slightly long email. Pardon me.
> >
> >
> >
> > As Lucene does not allow for updating an existing document in
> > the index, the only option is to delete and reindex the
> > message.When you have too many updates, this gets a little
> > cumbersome. In our case, as such the actual content of the
> > document being indexed does
> >
> > not change, but the fields around the content, like say
> > "LastReadby" or something like Folder associated with it etc
> > change. These are all fields that have been indexed as a part
> > of the original document in the index.
> >
> >
> >
> > I have been contemplating putting these "commonly changing
> > fields" into one index and allow for delete and reindex on
> > this index alone and keep the static data in another index.
> > DocumentID will be a stored field and will be stored in both
> > the static and dynamic index, as a way of identifying the document.
> >
> >
> >
> > Static index: Contains content of document indexed and
> > documentID stored.
> >
> > Dynamic index: Contains all fields about the document which
> > change frequently indexed and documentID stored.
> >
> >
> >
> >
> >
> > Questions
> >
> >
> >
> > 1. First of all, is there a better solution to this
> > frequently changing fields having to be reindexed ?
> >
> >
> >
> > 2. Let's say I go with the 2 index approach,
> >
> >
> >
> > Example query: Content: "Hello world" AND Folder:Folder1 AND
> > LastReadBy: jane. If we execute these queries on our static
> > and dynamic indexes, they will obviously fail to get hits.
> >
> >
> >
> >
> >
> > Let's say I have a way of splitting my queries such that
> > all content queries go to static (content) index only and
> > queries on other fields go to the dynamic index, basically
> > allow for queries to come in such a way that it is always a
> > AND between the dynamic index result set and static index
> > result set. So on the results set, I would have to retrieve
> > the document ID and make sure we have the same documentID in
> > both the result sets, in order for it to be a match.
> >
> > In cases where the result sets are really huge from
> > both the queries, then even to get the number of hits, I will
> > have to retrieve each and every document from the results, in
> > order to get the documentID for comparison. Queries can get
> > really slow.
> >
> >
> >
> > Has anyone faced similar problems, If so what was your solution?
> >
> > Any comments/thoughts will be appreciated.
> >
> >
> >
> > Thank you
> >
> > JS
> >
> >
> >
> >
> > ---------------------------------
> > Start your day with Yahoo! - make it your home page
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 07:36:07 2005
Return-Path: <java-user-return-15834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25111 invoked from network); 12 Aug 2005 07:36:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 07:36:07 -0000
Received: (qmail 39519 invoked by uid 500); 12 Aug 2005 07:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39127 invoked by uid 500); 12 Aug 2005 07:35:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39101 invoked by uid 99); 12 Aug 2005 07:35:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 00:35:58 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.83.242.16] (HELO mail.anchormen.nl) (212.83.242.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 00:36:20 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: Library for easy write/read from Documents.
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C59F10.747BF120"
Date: Fri, 12 Aug 2005 09:35:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA0711D1@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Library for easy write/read from Documents.
Thread-Index: AcWfEHQIpUeeIqOBRPu9LJo33thpSg==
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C59F10.747BF120
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20
I`m currently developing a small library for easy reading/writing stuff
to and from the document. All primitives
(long,short,int,bool,byte,float,double,char) and non primitive Numbers
are supported, optionally they are compressed (a long doesn`t need 19
characters but only 2) and they are optionally lexographically and
lexographically compressed.=20
=20
I also have created a few functions that make it easy to insert text:
keywords, unstored, unindexed etc.
=20
I would like to make this library public on a very short time (I`m
currently writing and testing it) and I`m wondering what is the best way
to add/give it to Lucene.

Met vriendelijke groet,

Peter Veentjer
Anchor Men Interactive Solutions - duidelijk in zakelijke
internetoplossingen

Praediniussingel 41
9711 AE Groningen

T: 050-3115222
F: 050-5891696
E: p.veentjer@anchormen.nl
I : www.anchormen.nl <blocked::http://www.anchormen.nl/>=20

=20

------_=_NextPart_001_01C59F10.747BF120--

From java-user-return-15835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 07:45:05 2005
Return-Path: <java-user-return-15835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26921 invoked from network); 12 Aug 2005 07:45:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 07:45:05 -0000
Received: (qmail 44799 invoked by uid 500); 12 Aug 2005 07:45:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44774 invoked by uid 500); 12 Aug 2005 07:45:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44761 invoked by uid 99); 12 Aug 2005 07:44:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 00:44:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.83.242.16] (HELO mail.anchormen.nl) (212.83.242.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 00:45:20 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Library for easy write/read from Documents.
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 12 Aug 2005 09:44:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA0711D2@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Library for easy write/read from Documents.
Thread-Index: AcWfEHQIpUeeIqOBRPu9LJo33thpSgAARG8w
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A long (64 bits) needs 4 characters (each character =3D 16 bits), not 2 =
;)
My bad.=20

-----Oorspronkelijk bericht-----
Van: Peter Veentjer - Anchor Men [mailto:p.veentjer@anchormen.nl]=20
Verzonden: vrijdag 12 augustus 2005 9:36
Aan: java-user@lucene.apache.org
Onderwerp: Library for easy write/read from Documents.

=20
I`m currently developing a small library for easy reading/writing stuff
to and from the document. All primitives
(long,short,int,bool,byte,float,double,char) and non primitive Numbers
are supported, optionally they are compressed (a long doesn`t need 19
characters but only 2) and they are optionally lexographically and
lexographically compressed.=20
=20
I also have created a few functions that make it easy to insert text:
keywords, unstored, unindexed etc.
=20
I would like to make this library public on a very short time (I`m
currently writing and testing it) and I`m wondering what is the best way
to add/give it to Lucene.

Met vriendelijke groet,

Peter Veentjer
Anchor Men Interactive Solutions - duidelijk in zakelijke
internetoplossingen

Praediniussingel 41
9711 AE Groningen

T: 050-3115222
F: 050-5891696
E: p.veentjer@anchormen.nl
I : www.anchormen.nl <blocked::http://www.anchormen.nl/>=20

=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 07:45:59 2005
Return-Path: <java-user-return-15836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27175 invoked from network); 12 Aug 2005 07:45:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 07:45:59 -0000
Received: (qmail 45929 invoked by uid 500); 12 Aug 2005 07:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45901 invoked by uid 500); 12 Aug 2005 07:45:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45885 invoked by uid 99); 12 Aug 2005 07:45:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 00:45:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of MTrezzi@csas.cz designates 193.179.187.19 as permitted sender)
Received: from [193.179.187.19] (HELO mailgate01.csas.cz) (193.179.187.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Aug 2005 00:46:15 -0700
Received: from (unknown [10.189.210.32])
 with SMTP; Fri, 12 Aug 2005 07:45:48 -0000
 (envelope-from <MTrezzi@CSAS.CZ>)
Received: from MAIL1.cen.csin.cz ([10.99.1.111]) by BUDSEX01.cen.csin.cz with Microsoft SMTPSVC(6.0.3790.0);
	 Fri, 12 Aug 2005 09:45:41 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C59F11.D6297E0C"
Subject: RE: OutOfMemoryError on addIndexes()
Date: Fri, 12 Aug 2005 09:45:40 +0200
Message-ID: <9AA035F30CE9E54C80FD4901E402F49C03D428A2@MAIL1.cen.csin.cz>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <9AA035F30CE9E54C80FD4901E402F49C03D428A2@MAIL1.cen.csin.cz>
Thread-Topic: OutOfMemoryError on addIndexes()
Thread-Index: AcWdly4gWoth6IJBQ+6FonHx+zuntgBeZT3I
From: "Trezzi Michael" <MTrezzi@CSAS.CZ>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Aug 2005 07:45:41.0392 (UTC) FILETIME=[D69ED100:01C59F11]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C59F11.D6297E0C
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable

I did some more research and these are the results.
=20
The OutOfMemory occurs on line 82 of class TermInfosReader.java. That =
and two other lines are trying to create an array of the size that is =
get by the=20
int indexSize =3D (int)indexEnum.size;
For my 29MB index this indexSize integer is 811806819. So if creating 3 =
arrays of this size (line 82-84) it requires and enormous amount of =
memory, e.g. a model situation...a char array...char has 2 bytes * =
811806819 =3D> 1584MB. That seems to be a little much and objects =
created in those arrays Term, TermInfo and long are definately not =
simple chars. This way I would need several gigabytes of memory to merge =
several even small (30MB) indexes. Is this the standard way how it =
works, or is there a problem on my side?
=20
Thanks,
=20
Michael

________________________________

Od: Ian Lea [mailto:ian.lea@gmail.com]
Odesl=E1no: st 10.8.2005 12:34
Komu: java-user@lucene.apache.org
P=F8edm=ECt: Re: OutOfMemoryError on addIndexes()



How much memory are you giving your programs?

 java    -Xmx<size>        set maximum Java heap size

--
Ian.

On 10/08/05, Trezzi Michael <MTrezzi@csas.cz> wrote:
> Hello,
> I have a problem and i tried everything i could think of to solve it. =
TO understand my situation, i create indexes on several computers on our =
network and they are copied to one server. There, once a day, they are =
merged into one masterIndex, which is then searched. The problem is in =
merging. I use the following code:
>
> Directory[] ar =3D new Directory[fileList.length];
>        for(int i=3D0; i<fileList.length;i++) {
>            ar[i] =3D FSDirectory.getDirectory(fileList[i], false);
>        }
>        writer.addIndexes(ar);
>        for(int i=3D0; i<fileList.length;i++) {
>            ar[i].close();
>        }
>       writer.optimize();
>       writer.close();
>
> I also tried a longer way of opening every index separately and adding =
it document by document. The problem is i am getting OutOfMemory errors =
on this. When I use the per document way, it happens on the =
IndexReader.open command and only on indexes of approx 100M+ (The =
largest index I have is only about 150MB) When I run it on windows =
machine with JDK1.5 I get the following:
>     Exception in thread "main" java.lang.OutOfMemoryError: Requested =
array size exceeds VM limit
> On Linux I am running 1.4 and I get the message without the Array size =
information.
>
> I did try it also on test index that was made from 11359 files  =
(1,59GB) that had 120MB and I got this error too. In my opinion 120MB =
index is not that big. The machine it runs on is a Xeon 3,2GHz with 2GB =
of RAM, so it should be enough. Can you please help me?
>
> Thank you in advance,
>
> Michael Trezzi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C59F11.D6297E0C
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C59F11.D6297E0C--

From java-user-return-15837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 14:30:31 2005
Return-Path: <java-user-return-15837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92268 invoked from network); 12 Aug 2005 14:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 14:30:31 -0000
Received: (qmail 34429 invoked by uid 500); 12 Aug 2005 14:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34400 invoked by uid 500); 12 Aug 2005 14:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34386 invoked by uid 99); 12 Aug 2005 14:30:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 07:30:25 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.86.89.66] (HELO smtpauth06.mail.atl.earthlink.net) (209.86.89.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 07:30:45 -0700
Received: from [68.164.191.86] (helo=x1000.msqr.us)
	by smtpauth06.mail.atl.earthlink.net with asmtp (TLSv1:AES256-SHA:256)
	(Exim 4.34)
	id 1E3aYA-0002MX-9Q
	for java-user@lucene.apache.org; Fri, 12 Aug 2005 10:30:22 -0400
Received: from x1000.msqr.us (x1000.msqr.us [127.0.0.1])
	by x1000.msqr.us (8.13.1/8.13.1) with ESMTP id j7CEUKgP026554
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 07:30:20 -0700
Received: (from apache@localhost)
	by x1000.msqr.us (8.13.1/8.13.1/Submit) id j7CEUKjF026553;
	Fri, 12 Aug 2005 07:30:20 -0700
Received: from 204.56.114.37
        (SquirrelMail authenticated user matt);
        by msqr.us with HTTP;
        Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
Message-ID: <49265.204.56.114.37.1123857019.squirrel@msqr.us>
Date: Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
Subject: QueryParser exception on escaped backslash preceding ) character
From: "Matt Magoffin" <apache.org@msqr.us>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3a-12.EL4
X-Mailer: SquirrelMail/1.4.3a-12.EL4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-ELNK-Trace: c92cb0066eb52c129c7f779228e2f6aeda0071232e20db4db16cf049d70d1e7a9b3a55a02a02c31c350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 68.164.191.86
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When I try to parse a query with an escaped backslash character like this
(using Lucene 1.4.3):

-id:20677 +(addr:Street143 AND zip:\\)

the QueryParser thows an Exception:

Encountered "<EOF>" at line 1, column 289.
			Was expecting one of: <AND> ... <OR> ...
			<NOT> ... "+" ... "-" ... "(" ... ")" ... "^" ...
			<QUOTED> ... <TERM> ...
			<PREFIXTERM> ... <WILDTERM> ... "[" ...
			"{" ... <NUMBER> ...

However, if I insert a space between the backslash and the parenthesis:

-id:20677 +(addr:Street143 AND zip:\\ )

it works. Is this expected behavior or perhaps a bug in the QueryParser?

-- m@

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 16:12:30 2005
Return-Path: <java-user-return-15838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36454 invoked from network); 12 Aug 2005 16:12:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 16:12:30 -0000
Received: (qmail 25224 invoked by uid 500); 12 Aug 2005 16:12:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25194 invoked by uid 500); 12 Aug 2005 16:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25181 invoked by uid 99); 12 Aug 2005 16:12:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 09:12:21 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 09:12:42 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C97935B7AB; Fri, 12 Aug 2005 09:12:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C03E47F45E
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 09:12:16 -0700 (PDT)
Date: Fri, 12 Aug 2005 09:12:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: QueryParser exception on escaped backslash preceding ) character
In-Reply-To: <49265.204.56.114.37.1123857019.squirrel@msqr.us>
Message-ID: <Pine.LNX.4.58.0508120908340.30648@hal.rescomp.berkeley.edu>
References: <49265.204.56.114.37.1123857019.squirrel@msqr.us>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I think you are encountering a "double escape" problem in java literals.
QP is seeing a backslash in front of the ) and waiting for you to finish
the paren grouping.

how are you passing that string to the QP, is it embedded in your java
code?  if so the java compiler is interpreting your \\ and your java  app
is never seeing it.

: Date: Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
: From: Matt Magoffin <apache.org@msqr.us>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: QueryParser exception on escaped backslash preceding ) character
:
: When I try to parse a query with an escaped backslash character like this
: (using Lucene 1.4.3):
:
: -id:20677 +(addr:Street143 AND zip:\\)
:
: the QueryParser thows an Exception:
:
: Encountered "<EOF>" at line 1, column 289.
: 			Was expecting one of: <AND> ... <OR> ...
: 			<NOT> ... "+" ... "-" ... "(" ... ")" ... "^" ...
: 			<QUOTED> ... <TERM> ...
: 			<PREFIXTERM> ... <WILDTERM> ... "[" ...
: 			"{" ... <NUMBER> ...
:
: However, if I insert a space between the backslash and the parenthesis:
:
: -id:20677 +(addr:Street143 AND zip:\\ )
:
: it works. Is this expected behavior or perhaps a bug in the QueryParser?
:
: -- m@
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 16:27:34 2005
Return-Path: <java-user-return-15839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41565 invoked from network); 12 Aug 2005 16:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 16:27:33 -0000
Received: (qmail 62854 invoked by uid 500); 12 Aug 2005 16:27:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62827 invoked by uid 500); 12 Aug 2005 16:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62814 invoked by uid 99); 12 Aug 2005 16:27:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 09:27:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.93.150.34] (HELO mail.dessci.com) (66.93.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 09:27:47 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C59F5A.FE910B9E"
Subject: index files
Date: Fri, 12 Aug 2005 09:29:20 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD64089F8@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: index files
thread-index: AcWfWv3E0QHZTCv5QL2fCGrZAiQ0Ew==
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C59F5A.FE910B9E
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
         I am encountering a weird problem. Usually the IndexWriter
creates bunch of supporting files during indexing. But when I try
indexing files uploaded from a CVS repository the indexing doesnt seem
to create all the necessary files. It just created three files "cfs",
"deletable" and "segments". Contents looked fine when I tried to see the
contents of index using Luke. But dont get any results when search. What
am I missing?
=20
thanks,
=20
Rajesh Munavalli

------_=_NextPart_001_01C59F5A.FE910B9E--

From java-user-return-15840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 17:29:56 2005
Return-Path: <java-user-return-15840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63812 invoked from network); 12 Aug 2005 17:29:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 17:29:55 -0000
Received: (qmail 87087 invoked by uid 500); 12 Aug 2005 17:29:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87056 invoked by uid 500); 12 Aug 2005 17:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87033 invoked by uid 99); 12 Aug 2005 17:29:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 10:29:49 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.86.89.68] (HELO smtpauth08.mail.atl.earthlink.net) (209.86.89.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 10:30:09 -0700
Received: from [68.164.191.86] (helo=x1000.msqr.us)
	by smtpauth08.mail.atl.earthlink.net with asmtp (TLSv1:AES256-SHA:256)
	(Exim 4.34)
	id 1E3dLl-0003IC-Pq
	for java-user@lucene.apache.org; Fri, 12 Aug 2005 13:29:46 -0400
Received: from x1000.msqr.us (x1000.msqr.us [127.0.0.1])
	by x1000.msqr.us (8.13.1/8.13.1) with ESMTP id j7CHTfdW027935
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 10:29:42 -0700
Received: (from apache@localhost)
	by x1000.msqr.us (8.13.1/8.13.1/Submit) id j7CHTfG5027934;
	Fri, 12 Aug 2005 10:29:41 -0700
Received: from 204.56.114.37
        (SquirrelMail authenticated user matt);
        by msqr.us with HTTP;
        Fri, 12 Aug 2005 10:29:41 -0700 (PDT)
Message-ID: <49481.204.56.114.37.1123867781.squirrel@msqr.us>
In-Reply-To: <Pine.LNX.4.58.0508120908340.30648@hal.rescomp.berkeley.edu>
References: <49265.204.56.114.37.1123857019.squirrel@msqr.us>
    <Pine.LNX.4.58.0508120908340.30648@hal.rescomp.berkeley.edu>
Date: Fri, 12 Aug 2005 10:29:41 -0700 (PDT)
Subject: Re: QueryParser exception on escaped backslash preceding ) 
     character
From: "Matt Magoffin" <apache.org@msqr.us>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3a-12.EL4
X-Mailer: SquirrelMail/1.4.3a-12.EL4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-ELNK-Trace: c92cb0066eb52c129c7f779228e2f6aeda0071232e20db4dd09375b6ebd472e3b0a7d05fdf1155a1350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 68.164.191.86
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The strings are not coming from Java literals, actually, so I didn't think
that was the problem.

Any other thoughts?

-- m@

> I think you are encountering a "double escape" problem in java literals.
> QP is seeing a backslash in front of the ) and waiting for you to finish
> the paren grouping.
>
> how are you passing that string to the QP, is it embedded in your java
> code?  if so the java compiler is interpreting your \\ and your java  app
> is never seeing it.
>
> : Date: Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
> : From: Matt Magoffin <apache.org@msqr.us>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: QueryParser exception on escaped backslash preceding )
> character
> :
> : When I try to parse a query with an escaped backslash character like
> this
> : (using Lucene 1.4.3):
> :
> : -id:20677 +(addr:Street143 AND zip:\\)
> :
> : the QueryParser thows an Exception:
> :
> : Encountered "<EOF>" at line 1, column 289.
> : 			Was expecting one of: <AND> ... <OR> ...
> : 			<NOT> ... "+" ... "-" ... "(" ... ")" ... "^" ...
> : 			<QUOTED> ... <TERM> ...
> : 			<PREFIXTERM> ... <WILDTERM> ... "[" ...
> : 			"{" ... <NUMBER> ...
> :
> : However, if I insert a space between the backslash and the parenthesis:
> :
> : -id:20677 +(addr:Street143 AND zip:\\ )
> :
> : it works. Is this expected behavior or perhaps a bug in the QueryParser?
> :
> : -- m@
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 18:02:29 2005
Return-Path: <java-user-return-15841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76720 invoked from network); 12 Aug 2005 18:02:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 18:02:29 -0000
Received: (qmail 38636 invoked by uid 500); 12 Aug 2005 18:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38600 invoked by uid 500); 12 Aug 2005 18:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38534 invoked by uid 99); 12 Aug 2005 18:02:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 11:02:21 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_HELO_SOFTFAIL,SUBJ_HAS_SPACES
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 11:02:40 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 694EB5B7B3; Fri, 12 Aug 2005 11:02:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 66A227F45E
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 11:02:15 -0700 (PDT)
Date: Fri, 12 Aug 2005 11:02:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: QueryParser exception on escaped backslash preceding )     
 character
In-Reply-To: <49481.204.56.114.37.1123867781.squirrel@msqr.us>
Message-ID: <Pine.LNX.4.58.0508121100470.2229@hal.rescomp.berkeley.edu>
References: <49265.204.56.114.37.1123857019.squirrel@msqr.us>   
 <Pine.LNX.4.58.0508120908340.30648@hal.rescomp.berkeley.edu>
 <49481.204.56.114.37.1123867781.squirrel@msqr.us>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


can you provide a JUnit test that genertes the exception ... if it's
coming from the parse call it should only require a 1 line test.

: Date: Fri, 12 Aug 2005 10:29:41 -0700 (PDT)
: From: Matt Magoffin <apache.org@msqr.us>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: QueryParser exception on escaped backslash preceding )
:     character
:
: The strings are not coming from Java literals, actually, so I didn't think
: that was the problem.
:
: Any other thoughts?
:
: -- m@
:
: > I think you are encountering a "double escape" problem in java literals.
: > QP is seeing a backslash in front of the ) and waiting for you to finish
: > the paren grouping.
: >
: > how are you passing that string to the QP, is it embedded in your java
: > code?  if so the java compiler is interpreting your \\ and your java  app
: > is never seeing it.
: >
: > : Date: Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
: > : From: Matt Magoffin <apache.org@msqr.us>
: > : Reply-To: java-user@lucene.apache.org
: > : To: java-user@lucene.apache.org
: > : Subject: QueryParser exception on escaped backslash preceding )
: > character
: > :
: > : When I try to parse a query with an escaped backslash character like
: > this
: > : (using Lucene 1.4.3):
: > :
: > : -id:20677 +(addr:Street143 AND zip:\\)
: > :
: > : the QueryParser thows an Exception:
: > :
: > : Encountered "<EOF>" at line 1, column 289.
: > : 			Was expecting one of: <AND> ... <OR> ...
: > : 			<NOT> ... "+" ... "-" ... "(" ... ")" ... "^" ...
: > : 			<QUOTED> ... <TERM> ...
: > : 			<PREFIXTERM> ... <WILDTERM> ... "[" ...
: > : 			"{" ... <NUMBER> ...
: > :
: > : However, if I insert a space between the backslash and the parenthesis:
: > :
: > : -id:20677 +(addr:Street143 AND zip:\\ )
: > :
: > : it works. Is this expected behavior or perhaps a bug in the QueryParser?
: > :
: > : -- m@
: > :
: > : ---------------------------------------------------------------------
: > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > : For additional commands, e-mail: java-user-help@lucene.apache.org
: > :
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 18:26:51 2005
Return-Path: <java-user-return-15842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83803 invoked from network); 12 Aug 2005 18:26:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 18:26:51 -0000
Received: (qmail 72064 invoked by uid 500); 12 Aug 2005 18:26:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72037 invoked by uid 500); 12 Aug 2005 18:26:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72022 invoked by uid 99); 12 Aug 2005 18:26:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 11:26:45 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 11:27:07 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9927C5B788; Fri, 12 Aug 2005 11:26:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E2A387F45E
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 11:26:43 -0700 (PDT)
Date: Fri, 12 Aug 2005 11:26:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: OutOfMemoryError on addIndexes()
In-Reply-To: <9AA035F30CE9E54C80FD4901E402F49C03D428A2@MAIL1.cen.csin.cz>
Message-ID: <Pine.LNX.4.58.0508121114370.2229@hal.rescomp.berkeley.edu>
References: <9AA035F30CE9E54C80FD4901E402F49C03D428A2@MAIL1.cen.csin.cz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Okay, just for the record, I'm currently on vacation, and i don't have
access to any of my indexes at work in order to make a comparison, but the
number of unique terms in your index (which is i'm 99% sure what
indexEnum.size represents in the code you cited) seems HUGE!!!

You havne't given us a lot of details about what your index contains (ie:
the nature of the documents) .. in fact, for the number of terms you cite
(811806819) the only info we have is that the index containing that number
of terms is 29MB in size -- no idea how many documents are in that index.
But if we look at your previous email, you mentioend having a nother index
that cuases the same problem which is 120MB, which you built from 11359
files.  If we assume that index has no more then the same number of unique
terms indexed (which seems unlikely, but lets give it the benefit of the
doubt, and assume the added size is all stored fields) and assume that you
made one document per file, and that those files are 100% unique from each
other, and contain no terms in common -- that means that each file
contains roughtly 71,500 unique terms.

that seems like a lot.

A quick google search tells me that the english language contains
somewhere from 500,000 to 1,000,000 words - your index has 800 times that
many terms.  even assuming you index a lot of numerical or date based data
-- that seems like a lot.

I have to wonder if maybe you are indexing a lot of junk information by
mistake - perhaps some binary data is mistakenly getting treated as
strings?

can you tell us more about the nature of your indexes?


: Date: Fri, 12 Aug 2005 09:45:40 +0200
: From: Trezzi Michael <MTrezzi@CSAS.CZ>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: RE: OutOfMemoryError on addIndexes()
:
: I did some more research and these are the results.
:  The OutOfMemory occurs on line 82 of class TermInfosReader.java. That
: and two other lines are trying to create an array of the size that is
: get by the
L
: int indexSize =3D (int)indexEnum.size;
:
: For my 29MB index this indexSize integer is 811806819. So if creating 3
: arrays of this size (line 82-84) it requires and enormous amount of
: memory, e.g. a model situation...a char array...char has 2 bytes *
: 811806819 =3D> 1584MB. That seems to be a little much and objects created
: in those arrays Term, TermInfo and long are definately not simple chars.
: This way I would need several gigabytes of memory to merge several even
: small (30MB) indexes. Is this the standard way how it works, or is there
: a problem on my side?
:
: Thanks,
:
: Michael
:
: ________________________________
:
: Od: Ian Lea [mailto:ian.lea@gmail.com]
: Odesl=E1no: st 10.8.2005 12:34
: Komu: java-user@lucene.apache.org
: P?edm?t: Re: OutOfMemoryError on addIndexes()
:
:
:
: How much memory are you giving your programs?
:
:  java    -Xmx<size>        set maximum Java heap size
:
: --
: Ian.
:
: On 10/08/05, Trezzi Michael <MTrezzi@csas.cz> wrote:
: > Hello,
: > I have a problem and i tried everything i could think of to solve it. T=
O understand my situation, i create indexes on several computers on our net=
work and they are copied to one server. There, once a day, they are merged =
into one masterIndex, which is then searched. The problem is in merging. I =
use the following code:
: >
: > Directory[] ar =3D new Directory[fileList.length];
: >        for(int i=3D0; i<fileList.length;i++) {
: >            ar[i] =3D FSDirectory.getDirectory(fileList[i], false);
: >        }
: >        writer.addIndexes(ar);
: >        for(int i=3D0; i<fileList.length;i++) {
: >            ar[i].close();
: >        }
: >       writer.optimize();
: >       writer.close();
: >
: > I also tried a longer way of opening every index separately and adding =
it document by document. The problem is i am getting OutOfMemory errors on =
this. When I use the per document way, it happens on the IndexReader.open c=
ommand and only on indexes of approx 100M+ (The largest index I have is onl=
y about 150MB) When I run it on windows machine with JDK1.5 I get the follo=
wing:
: >     Exception in thread "main" java.lang.OutOfMemoryError: Requested ar=
ray size exceeds VM limit
: > On Linux I am running 1.4 and I get the message without the Array size =
information.
: >
: > I did try it also on test index that was made from 11359 files  (1,59GB=
) that had 120MB and I got this error too. In my opinion 120MB index is not=
 that big. The machine it runs on is a Xeon 3,2GHz with 2GB of RAM, so it s=
hould be enough. Can you please help me?
: >
: > Thank you in advance,
: >
: > Michael Trezzi
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 19:10:07 2005
Return-Path: <java-user-return-15843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97883 invoked from network); 12 Aug 2005 19:10:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 19:10:07 -0000
Received: (qmail 47307 invoked by uid 500); 12 Aug 2005 19:10:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47280 invoked by uid 500); 12 Aug 2005 19:10:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47267 invoked by uid 99); 12 Aug 2005 19:10:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 12:10:01 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FORGED_RCVD_HELO,SUBJ_HAS_SPACES
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.86.89.69] (HELO smtpauth09.mail.atl.earthlink.net) (209.86.89.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 12:10:21 -0700
Received: from [68.164.191.86] (helo=x1000.msqr.us)
	by smtpauth09.mail.atl.earthlink.net with asmtp (TLSv1:AES256-SHA:256)
	(Exim 4.34)
	id 1E3euj-0004eB-RL
	for java-user@lucene.apache.org; Fri, 12 Aug 2005 15:09:58 -0400
Received: from x1000.msqr.us (x1000.msqr.us [127.0.0.1])
	by x1000.msqr.us (8.13.1/8.13.1) with ESMTP id j7CJ9uIq028758
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 12:09:56 -0700
Received: (from apache@localhost)
	by x1000.msqr.us (8.13.1/8.13.1/Submit) id j7CJ9tdY028757;
	Fri, 12 Aug 2005 12:09:55 -0700
Received: from 204.56.114.37
        (SquirrelMail authenticated user matt);
        by msqr.us with HTTP;
        Fri, 12 Aug 2005 12:09:55 -0700 (PDT)
Message-ID: <49788.204.56.114.37.1123873795.squirrel@msqr.us>
In-Reply-To: <Pine.LNX.4.58.0508121100470.2229@hal.rescomp.berkeley.edu>
References: <49265.204.56.114.37.1123857019.squirrel@msqr.us>  
    <Pine.LNX.4.58.0508120908340.30648@hal.rescomp.berkeley.edu><49481.204.56.114.37.1123867781.squirrel@msqr.us>
    <Pine.LNX.4.58.0508121100470.2229@hal.rescomp.berkeley.edu>
Date: Fri, 12 Aug 2005 12:09:55 -0700 (PDT)
Subject: Re: QueryParser exception on escaped backslash preceding )     
     character
From: "Matt Magoffin" <apache.org@msqr.us>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3a-12.EL4
X-Mailer: SquirrelMail/1.4.3a-12.EL4
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="----=_20050812120955_22394"
X-Priority: 3 (Normal)
Importance: Normal
X-ELNK-Trace: c92cb0066eb52c129c7f779228e2f6aeda0071232e20db4d5a5d624cc0f4f56fd02de413dba5115f350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 68.164.191.86
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_20050812120955_22394
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Sure, here's a test case with the bug and the workaround.

-- m@

> can you provide a JUnit test that genertes the exception ... if it's
> coming from the parse call it should only require a 1 line test.
>
> : Date: Fri, 12 Aug 2005 10:29:41 -0700 (PDT)
> : From: Matt Magoffin <apache.org@msqr.us>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Re: QueryParser exception on escaped backslash preceding )
> :     character
> :
> : The strings are not coming from Java literals, actually, so I didn't
> think
> : that was the problem.
> :
> : Any other thoughts?
> :
> : -- m@
> :
> : > I think you are encountering a "double escape" problem in java
> literals.
> : > QP is seeing a backslash in front of the ) and waiting for you to
> finish
> : > the paren grouping.
> : >
> : > how are you passing that string to the QP, is it embedded in your java
> : > code?  if so the java compiler is interpreting your \\ and your java
> app
> : > is never seeing it.
> : >
> : > : Date: Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
> : > : From: Matt Magoffin <apache.org@msqr.us>
> : > : Reply-To: java-user@lucene.apache.org
> : > : To: java-user@lucene.apache.org
> : > : Subject: QueryParser exception on escaped backslash preceding )
> : > character
> : > :
> : > : When I try to parse a query with an escaped backslash character like
> : > this
> : > : (using Lucene 1.4.3):
> : > :
> : > : -id:20677 +(addr:Street143 AND zip:\\)
> : > :
> : > : the QueryParser thows an Exception:
> : > :
> : > : Encountered "<EOF>" at line 1, column 289.
> : > : 			Was expecting one of: <AND> ... <OR> ...
> : > : 			<NOT> ... "+" ... "-" ... "(" ... ")" ... "^" ...
> : > : 			<QUOTED> ... <TERM> ...
> : > : 			<PREFIXTERM> ... <WILDTERM> ... "[" ...
> : > : 			"{" ... <NUMBER> ...
> : > :
> : > : However, if I insert a space between the backslash and the
> parenthesis:
> : > :
> : > : -id:20677 +(addr:Street143 AND zip:\\ )
> : > :
> : > : it works. Is this expected behavior or perhaps a bug in the
> QueryParser?
> : > :
> : > : -- m@
> : > :
> : > :
> ---------------------------------------------------------------------
> : > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > : For additional commands, e-mail: java-user-help@lucene.apache.org
> : > :
> : >
> : >
> : >
> : > -Hoss
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


------=_20050812120955_22394
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_20050812120955_22394--


From java-user-return-15844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 19:11:33 2005
Return-Path: <java-user-return-15844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98360 invoked from network); 12 Aug 2005 19:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 19:11:33 -0000
Received: (qmail 50130 invoked by uid 500); 12 Aug 2005 19:11:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50112 invoked by uid 500); 12 Aug 2005 19:11:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50097 invoked by uid 99); 12 Aug 2005 19:11:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 12:11:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lasse.lindgaard@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 12:11:49 -0700
Received: by wproxy.gmail.com with SMTP id 55so660961wri
        for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 12:11:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=DhqDqOY+yZ4jhfT8R+nS4O0k+u5JyVXTWnBY1vlX/kLQ65TBqe0f/d0O1P9/oSQqPtZqT76sbFiXrR/jhVO/7tIm3eCefVPGkH8k+KqdoBiWzucvTjUdM45NAJQ88EU8OyJUQ8xbOffLvYn/zy5nJfsImnHpQJyKV2ZwwdnzWQc=
Received: by 10.54.49.72 with SMTP id w72mr2106059wrw;
        Fri, 12 Aug 2005 12:11:26 -0700 (PDT)
Received: by 10.54.146.15 with HTTP; Fri, 12 Aug 2005 12:11:26 -0700 (PDT)
Message-ID: <300d7b19050812121165dc7c04@mail.gmail.com>
Date: Fri, 12 Aug 2005 21:11:26 +0200
From: Lasse L <lasse.lindgaard@gmail.com>
To: java-user@lucene.apache.org
Subject: Query that doesn't match a term more than once
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am using the queryparser to search for names.

If I search for: john j*
I'd expect to get everybody called john j-something. john johnson,
john joe doe ect.
Instead I just all john and joes. In many of the hits there is not
second j-word.

Is there a way to get lucene to get "satisfied" after matching "john"
and then require a second j-word to return a match for j*

The error might be on my end though.
If I have the same person registered as "john carlson" and "john doe carlso=
n"
I add both values to the name field -- could that be it? If that is so
I wouldn't expect lucene to return the hit if I search for e.g. "john
joh* jo*" ?

At least I'd like to boost the ranking of the results that match
better. Right now "john j*" gives me john thompson as the top hit even
though there are heaps of john johnsons.

I hope you can point me in the right direction.
Thanks

/Lasse

My query parser code looks like this:
=09=09    QueryParser parser =3D new QueryParser(field, _analyzer);
=09=09    parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
=09=09    parser.setLocale(new Locale("DA", "dk"));
=09=09    Query q =3D parser.parse(value);
=09=09    query.add(q, required, false);

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 19:24:10 2005
Return-Path: <java-user-return-15845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8809 invoked from network); 12 Aug 2005 19:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 19:24:10 -0000
Received: (qmail 75747 invoked by uid 500); 12 Aug 2005 19:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75727 invoked by uid 500); 12 Aug 2005 19:24:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75714 invoked by uid 99); 12 Aug 2005 19:24:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 12:24:05 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_HELO_SOFTFAIL,SUBJ_HAS_SPACES
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 12:24:25 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9F0905B788; Fri, 12 Aug 2005 12:24:02 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9C2A37F45E
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 12:24:02 -0700 (PDT)
Date: Fri, 12 Aug 2005 12:24:02 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: QueryParser exception on escaped backslash preceding )        
  character
In-Reply-To: <49788.204.56.114.37.1123873795.squirrel@msqr.us>
Message-ID: <Pine.LNX.4.58.0508121223100.2229@hal.rescomp.berkeley.edu>
References: <49265.204.56.114.37.1123857019.squirrel@msqr.us>     
 <Pine.LNX.4.58.0508120908340.30648@hal.rescomp.berkeley.edu><49481.204.56.114.37.1123867781.squirrel@msqr.us>
    <Pine.LNX.4.58.0508121100470.2229@hal.rescomp.berkeley.edu>
 <49788.204.56.114.37.1123873795.squirrel@msqr.us>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


the mailing list isn't fond of attachemnts ... can you inline it in your
email?

: Date: Fri, 12 Aug 2005 12:09:55 -0700 (PDT)
: From: Matt Magoffin <apache.org@msqr.us>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: QueryParser exception on escaped backslash preceding )
:        character
:
: Sure, here's a test case with the bug and the workaround.
:
: -- m@
:
: > can you provide a JUnit test that genertes the exception ... if it's
: > coming from the parse call it should only require a 1 line test.
: >
: > : Date: Fri, 12 Aug 2005 10:29:41 -0700 (PDT)
: > : From: Matt Magoffin <apache.org@msqr.us>
: > : Reply-To: java-user@lucene.apache.org
: > : To: java-user@lucene.apache.org
: > : Subject: Re: QueryParser exception on escaped backslash preceding )
: > :     character
: > :
: > : The strings are not coming from Java literals, actually, so I didn't
: > think
: > : that was the problem.
: > :
: > : Any other thoughts?
: > :
: > : -- m@
: > :
: > : > I think you are encountering a "double escape" problem in java
: > literals.
: > : > QP is seeing a backslash in front of the ) and waiting for you to
: > finish
: > : > the paren grouping.
: > : >
: > : > how are you passing that string to the QP, is it embedded in your java
: > : > code?  if so the java compiler is interpreting your \\ and your java
: > app
: > : > is never seeing it.
: > : >
: > : > : Date: Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
: > : > : From: Matt Magoffin <apache.org@msqr.us>
: > : > : Reply-To: java-user@lucene.apache.org
: > : > : To: java-user@lucene.apache.org
: > : > : Subject: QueryParser exception on escaped backslash preceding )
: > : > character
: > : > :
: > : > : When I try to parse a query with an escaped backslash character like
: > : > this
: > : > : (using Lucene 1.4.3):
: > : > :
: > : > : -id:20677 +(addr:Street143 AND zip:\\)
: > : > :
: > : > : the QueryParser thows an Exception:
: > : > :
: > : > : Encountered "<EOF>" at line 1, column 289.
: > : > : 			Was expecting one of: <AND> ... <OR> ...
: > : > : 			<NOT> ... "+" ... "-" ... "(" ... ")" ... "^" ...
: > : > : 			<QUOTED> ... <TERM> ...
: > : > : 			<PREFIXTERM> ... <WILDTERM> ... "[" ...
: > : > : 			"{" ... <NUMBER> ...
: > : > :
: > : > : However, if I insert a space between the backslash and the
: > parenthesis:
: > : > :
: > : > : -id:20677 +(addr:Street143 AND zip:\\ )
: > : > :
: > : > : it works. Is this expected behavior or perhaps a bug in the
: > QueryParser?
: > : > :
: > : > : -- m@
: > : > :
: > : > :
: > ---------------------------------------------------------------------
: > : > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > : > : For additional commands, e-mail: java-user-help@lucene.apache.org
: > : > :
: > : >
: > : >
: > : >
: > : > -Hoss
: > : >
: > : >
: > : > ---------------------------------------------------------------------
: > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > : > For additional commands, e-mail: java-user-help@lucene.apache.org
: > : >
: > : >
: > :
: > :
: > : ---------------------------------------------------------------------
: > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > : For additional commands, e-mail: java-user-help@lucene.apache.org
: > :
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 20:20:44 2005
Return-Path: <java-user-return-15846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24415 invoked from network); 12 Aug 2005 20:20:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 20:20:44 -0000
Received: (qmail 53256 invoked by uid 500); 12 Aug 2005 20:20:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53229 invoked by uid 500); 12 Aug 2005 20:20:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53216 invoked by uid 99); 12 Aug 2005 20:20:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 13:20:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO rproxy.gmail.com) (64.233.170.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 13:20:58 -0700
Received: by rproxy.gmail.com with SMTP id g11so555612rne
        for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 13:20:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IXVyCUMlyDOFE8igJXLaakDklPh1raonnYhyeQwL4xdZZ/UymoELBDl6yLeKmxVNfpg7C5SYP4Fqs9mDNomIaTWR9tWg9mWCSsYaQJV6u+O7+QybapUuGR81ZY7EceXc891dc91+yNhIDHxXjh6ksavymDwtPNLeioGZ8Z5PTl8=
Received: by 10.39.1.39 with SMTP id d39mr1131195rni;
        Fri, 12 Aug 2005 13:20:35 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Fri, 12 Aug 2005 13:20:35 -0700 (PDT)
Message-ID: <c68e391705081213203848e79e@mail.gmail.com>
Date: Fri, 12 Aug 2005 16:20:35 -0400
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser exception on escaped backslash preceding ) character
In-Reply-To: <49481.204.56.114.37.1123867781.squirrel@msqr.us>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <49265.204.56.114.37.1123857019.squirrel@msqr.us>
	 <Pine.LNX.4.58.0508120908340.30648@hal.rescomp.berkeley.edu>
	 <49481.204.56.114.37.1123867781.squirrel@msqr.us>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I can verify that bad things are going on with backslashes and the
query parser in lucene 1.4.3
 foo:hi\\ =3D=3D> foo:hi\
 (foo:hi\\) =3D=3D> exception
 foo:"hi\\" =3D=3D> foo:hi\\
 foo:hi\\^3 =3D=3D> foo:hi\^3
foo:"hi \\ there" =3D=3D> foo:"hi \\ there"
foo:'hi there' =3D=3D> foo:'hi
foo:"\"" =3D=3D> exception
foo:hi\" =3D=3D> foo:hi"

So there appears to be no way to query for something with a quote and
a space in the same string...

IMHO, backslash should work as an escape inside quoted values.

-Yonik


On 8/12/05, Matt Magoffin <apache.org@msqr.us> wrote:
> The strings are not coming from Java literals, actually, so I didn't thin=
k
> that was the problem.
>=20
> Any other thoughts?
>=20
> -- m@
>=20
> > I think you are encountering a "double escape" problem in java literals=
.
> > QP is seeing a backslash in front of the ) and waiting for you to finis=
h
> > the paren grouping.
> >
> > how are you passing that string to the QP, is it embedded in your java
> > code?  if so the java compiler is interpreting your \\ and your java  a=
pp
> > is never seeing it.
> >
> > : Date: Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
> > : From: Matt Magoffin <apache.org@msqr.us>
> > : Reply-To: java-user@lucene.apache.org
> > : To: java-user@lucene.apache.org
> > : Subject: QueryParser exception on escaped backslash preceding )
> > character
> > :
> > : When I try to parse a query with an escaped backslash character like
> > this
> > : (using Lucene 1.4.3):
> > :
> > : -id:20677 +(addr:Street143 AND zip:\\)
> > :
> > : the QueryParser thows an Exception:
> > :
> > : Encountered "<EOF>" at line 1, column 289.
> > :                     Was expecting one of: <AND> ... <OR> ...
> > :                     <NOT> ... "+" ... "-" ... "(" ... ")" ... "^" ...
> > :                     <QUOTED> ... <TERM> ...
> > :                     <PREFIXTERM> ... <WILDTERM> ... "[" ...
> > :                     "{" ... <NUMBER> ...
> > :
> > : However, if I insert a space between the backslash and the parenthesi=
s:
> > :
> > : -id:20677 +(addr:Street143 AND zip:\\ )
> > :
> > : it works. Is this expected behavior or perhaps a bug in the QueryPars=
er?
> > :
> > : -- m@
> > :
> > : ---------------------------------------------------------------------
> > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > : For additional commands, e-mail: java-user-help@lucene.apache.org
> > :
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 21:04:23 2005
Return-Path: <java-user-return-15847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40776 invoked from network); 12 Aug 2005 21:04:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 21:04:22 -0000
Received: (qmail 16090 invoked by uid 500); 12 Aug 2005 21:04:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15922 invoked by uid 500); 12 Aug 2005 21:04:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15567 invoked by uid 99); 12 Aug 2005 21:04:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 14:04:11 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FORGED_RCVD_HELO,SUBJ_HAS_SPACES
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.86.89.69] (HELO smtpauth09.mail.atl.earthlink.net) (209.86.89.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 14:04:31 -0700
Received: from [68.164.191.86] (helo=x1000.msqr.us)
	by smtpauth09.mail.atl.earthlink.net with asmtp (TLSv1:AES256-SHA:256)
	(Exim 4.34)
	id 1E3ghD-00037S-J0
	for java-user@lucene.apache.org; Fri, 12 Aug 2005 17:04:07 -0400
Received: from x1000.msqr.us (x1000.msqr.us [127.0.0.1])
	by x1000.msqr.us (8.13.1/8.13.1) with ESMTP id j7CL45Jb029729
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 14:04:06 -0700
Received: (from apache@localhost)
	by x1000.msqr.us (8.13.1/8.13.1/Submit) id j7CL450Q029728;
	Fri, 12 Aug 2005 14:04:05 -0700
Received: from 204.56.114.37
        (SquirrelMail authenticated user matt);
        by msqr.us with HTTP;
        Fri, 12 Aug 2005 14:04:05 -0700 (PDT)
Message-ID: <49938.204.56.114.37.1123880645.squirrel@msqr.us>
In-Reply-To: <Pine.LNX.4.58.0508121223100.2229@hal.rescomp.berkeley.edu>
References: <49265.204.56.114.37.1123857019.squirrel@msqr.us>    
    <Pine.LNX.4.58.0508120908340.30648@hal.rescomp.berkeley.edu><49481.204.56.114.37.1123867781.squirrel@msqr.us><Pine.LNX.4.58.0508121100470.2229@hal.rescomp.berkeley.edu><49788.204.56.114.37.1123873795.squirrel@msqr.us>
    <Pine.LNX.4.58.0508121223100.2229@hal.rescomp.berkeley.edu>
Date: Fri, 12 Aug 2005 14:04:05 -0700 (PDT)
Subject: Re: QueryParser exception on escaped backslash preceding )        
     character
From: "Matt Magoffin" <apache.org@msqr.us>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3a-12.EL4
X-Mailer: SquirrelMail/1.4.3a-12.EL4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-ELNK-Trace: c92cb0066eb52c129c7f779228e2f6aeda0071232e20db4d45f8a81a36e3052ceb55900a8cad3f59350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 68.164.191.86
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sure:

import junit.framework.TestCase;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Query;

public class TestLuceneBackslashBug extends TestCase {

	public void testLuceneBackslashBug() throws Exception {
		// this fails
		Query q = new QueryParser("foo",new StandardAnalyzer()).parse(
			"-id:123 +(addr:Street143 AND zip:\\\\)");
	}

	public void testLuceneBackslashBugWorkaround() throws Exception {
		// this passes
		Query q = new QueryParser("foo",new StandardAnalyzer()).parse(
			"-id:123 +(addr:Street143 AND zip:\\\\ )");
	}

}

>
> the mailing list isn't fond of attachemnts ... can you inline it in your
> email?
>
> : Date: Fri, 12 Aug 2005 12:09:55 -0700 (PDT)
> : From: Matt Magoffin <apache.org@msqr.us>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Re: QueryParser exception on escaped backslash preceding )
> :        character
> :
> : Sure, here's a test case with the bug and the workaround.
> :
> : -- m@
> :
> : > can you provide a JUnit test that genertes the exception ... if it's
> : > coming from the parse call it should only require a 1 line test.
> : >
> : > : Date: Fri, 12 Aug 2005 10:29:41 -0700 (PDT)
> : > : From: Matt Magoffin <apache.org@msqr.us>
> : > : Reply-To: java-user@lucene.apache.org
> : > : To: java-user@lucene.apache.org
> : > : Subject: Re: QueryParser exception on escaped backslash preceding )
> : > :     character
> : > :
> : > : The strings are not coming from Java literals, actually, so I didn't
> : > think
> : > : that was the problem.
> : > :
> : > : Any other thoughts?
> : > :
> : > : -- m@
> : > :
> : > : > I think you are encountering a "double escape" problem in java
> : > literals.
> : > : > QP is seeing a backslash in front of the ) and waiting for you to
> : > finish
> : > : > the paren grouping.
> : > : >
> : > : > how are you passing that string to the QP, is it embedded in your
> java
> : > : > code?  if so the java compiler is interpreting your \\ and your
> java
> : > app
> : > : > is never seeing it.
> : > : >
> : > : > : Date: Fri, 12 Aug 2005 07:30:19 -0700 (PDT)
> : > : > : From: Matt Magoffin <apache.org@msqr.us>
> : > : > : Reply-To: java-user@lucene.apache.org
> : > : > : To: java-user@lucene.apache.org
> : > : > : Subject: QueryParser exception on escaped backslash preceding )
> : > : > character
> : > : > :
> : > : > : When I try to parse a query with an escaped backslash character
> like
> : > : > this
> : > : > : (using Lucene 1.4.3):
> : > : > :
> : > : > : -id:20677 +(addr:Street143 AND zip:\\)
> : > : > :
> : > : > : the QueryParser thows an Exception:
> : > : > :
> : > : > : Encountered "<EOF>" at line 1, column 289.
> : > : > : 			Was expecting one of: <AND> ... <OR> ...
> : > : > : 			<NOT> ... "+" ... "-" ... "(" ... ")" ... "^" ...
> : > : > : 			<QUOTED> ... <TERM> ...
> : > : > : 			<PREFIXTERM> ... <WILDTERM> ... "[" ...
> : > : > : 			"{" ... <NUMBER> ...
> : > : > :
> : > : > : However, if I insert a space between the backslash and the
> : > parenthesis:
> : > : > :
> : > : > : -id:20677 +(addr:Street143 AND zip:\\ )
> : > : > :
> : > : > : it works. Is this expected behavior or perhaps a bug in the
> : > QueryParser?
> : > : > :
> : > : > : -- m@
> : > : > :
> : > : > :
> : > ---------------------------------------------------------------------
> : > : > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > : > : For additional commands, e-mail:
> java-user-help@lucene.apache.org
> : > : > :
> : > : >
> : > : >
> : > : >
> : > : > -Hoss
> : > : >
> : > : >
> : > : >
> ---------------------------------------------------------------------
> : > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : > : >
> : > : >
> : > :
> : > :
> : > :
> ---------------------------------------------------------------------
> : > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > : For additional commands, e-mail: java-user-help@lucene.apache.org
> : > :
> : >
> : >
> : >
> : > -Hoss
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> :
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 12 23:59:09 2005
Return-Path: <java-user-return-15848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77961 invoked from network); 12 Aug 2005 23:59:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Aug 2005 23:59:09 -0000
Received: (qmail 96932 invoked by uid 500); 12 Aug 2005 23:59:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96908 invoked by uid 500); 12 Aug 2005 23:59:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96895 invoked by uid 99); 12 Aug 2005 23:59:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 16:59:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 16:59:23 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D931C13E2007; Fri, 12 Aug 2005 19:58:59 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id DACC613E2006
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 19:58:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <300d7b19050812121165dc7c04@mail.gmail.com>
References: <300d7b19050812121165dc7c04@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <43109124-584A-49F5-BB1E-BEEA8A28D1A9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query that doesn't match a term more than once
Date: Fri, 12 Aug 2005 19:58:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 12, 2005, at 3:11 PM, Lasse L wrote:
> I am using the queryparser to search for names.
>
> If I search for: john j*
> I'd expect to get everybody called john j-something. john johnson,
> john joe doe ect.
> Instead I just all john and joes. In many of the hits there is not
> second j-word.

That is an invalid assumption with QueryParser and how it forms  
queries.  And it actually is a tricky sort of query to do even  
programatically.

The query john j* (with default operator AND) searches for john AND  
j* regardless of position.

Programatically you can use PhrasePrefixQuery - see Lucene's test  
case code for examples of how it's used, but it is a bit of work to  
set up.

> Is there a way to get lucene to get "satisfied" after matching "john"
> and then require a second j-word to return a match for j*

In short, not easily, but it is possible with PhrasePrefixQuery  
programatically.  QueryParser does not support this at all currently.


     Erik

> The error might be on my end though.
> If I have the same person registered as "john carlson" and "john  
> doe carlson"
> I add both values to the name field -- could that be it? If that is so
> I wouldn't expect lucene to return the hit if I search for e.g. "john
> joh* jo*" ?
>
> At least I'd like to boost the ranking of the results that match
> better. Right now "john j*" gives me john thompson as the top hit even
> though there are heaps of john johnsons.
>
> I hope you can point me in the right direction.
> Thanks
>
> /Lasse
>
> My query parser code looks like this:
>             QueryParser parser = new QueryParser(field, _analyzer);
>             parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>             parser.setLocale(new Locale("DA", "dk"));
>             Query q = parser.parse(value);
>             query.add(q, required, false);
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 13 01:23:08 2005
Return-Path: <java-user-return-15849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2741 invoked from network); 13 Aug 2005 01:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2005 01:23:07 -0000
Received: (qmail 42249 invoked by uid 500); 13 Aug 2005 01:23:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42207 invoked by uid 500); 13 Aug 2005 01:23:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42187 invoked by uid 99); 13 Aug 2005 01:23:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 18:23:02 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Aug 2005 18:23:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 020F05B7B7; Fri, 12 Aug 2005 18:22:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F31D97F45E
	for <java-user@lucene.apache.org>; Fri, 12 Aug 2005 18:22:57 -0700 (PDT)
Date: Fri, 12 Aug 2005 18:22:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Query that doesn't match a term more than once
In-Reply-To: <43109124-584A-49F5-BB1E-BEEA8A28D1A9@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0508121816470.7891@hal.rescomp.berkeley.edu>
References: <300d7b19050812121165dc7c04@mail.gmail.com>
 <43109124-584A-49F5-BB1E-BEEA8A28D1A9@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Programatically you can use PhrasePrefixQuery - see Lucene's test
: case code for examples of how it's used, but it is a bit of work to
: set up.

That's only needed if you assume that the field contains tokenized text.
if the whole name is indexed as a single Term, then a regular prefix query
should work -- in fact, telling QueryParser to use an Analyzer that
doesn't do any tokenizing should work too.

: > Is there a way to get lucene to get "satisfied" after matching "john"
: > and then require a second j-word to return a match for j*
:
: In short, not easily, but it is possible with PhrasePrefixQuery
: programatically.  QueryParser does not support this at all currently.
:
:
:      Erik
:
: > The error might be on my end though.
: > If I have the same person registered as "john carlson" and "john
: > doe carlson"
: > I add both values to the name field -- could that be it? If that is so
: > I wouldn't expect lucene to return the hit if I search for e.g. "john
: > joh* jo*" ?
: >
: > At least I'd like to boost the ranking of the results that match
: > better. Right now "john j*" gives me john thompson as the top hit even
: > though there are heaps of john johnsons.
: >
: > I hope you can point me in the right direction.
: > Thanks
: >
: > /Lasse
: >
: > My query parser code looks like this:
: >             QueryParser parser = new QueryParser(field, _analyzer);
: >             parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
: >             parser.setLocale(new Locale("DA", "dk"));
: >             Query q = parser.parse(value);
: >             query.add(q, required, false);
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 13 10:20:24 2005
Return-Path: <java-user-return-15850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82184 invoked from network); 13 Aug 2005 10:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2005 10:20:24 -0000
Received: (qmail 52681 invoked by uid 500); 13 Aug 2005 10:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52643 invoked by uid 500); 13 Aug 2005 10:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 73978 invoked by uid 99); 13 Aug 2005 06:51:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Message-ID: <42FD9875.8000908@fischer.name>
Date: Sat, 13 Aug 2005 08:51:33 +0200
From: Markus Fischer <markus@fischer.name>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6) Gecko/20050317 Thunderbird/1.0.2 Mnenhy/0.7.2.0
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Public access to the stemmer (germanstemmer in my case)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: -27
X-Spam-Level: --
X-Spam-Report: Spam detection software, running on the system "genuine", has
	identified this incoming email as possible spam.  The original message
	has been attached to this so you can view it (if it isn't spam) or label
	similar future email.  If you have any questions, see
	the administrator of that system for details.
	Content preview:  Hi, I was wondering if there's a reason why the
	stemmers, e.g. GermanStemmer are not accessible from outside the lucene
	package. When I want to highlight the search terms, I need to know
	which terms have been found. Example: when searching for "Vitamine" the
	GermanStemmer produces "Vitami". "Vitami" is a word not directly used,
	but often it's "Vitamin", the noun. When I now try to highlight the
	matched words solely based on the user input, I certainly won't be able
	to highlight "Vitamin" or a part of the word, since I'm not aware of
	the stemmed word. [...] 
	Content analysis details:   (-2.8 points, 5.0 required)
	pts rule name              description
	---- ---------------------- --------------------------------------------------
	-2.8 ALL_TRUSTED            Did not pass through any untrusted hosts
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I was wondering if there's a reason why the stemmers, e.g. GermanStemmer 
are not accessible from outside the lucene package.

When I want to highlight the search terms, I need to know which terms 
have been found. Example: when searching for "Vitamine" the 
GermanStemmer produces "Vitami". "Vitami" is a word not directly used, 
but often it's "Vitamin", the noun. When I now try to highlight the 
matched words solely based on the user input, I certainly won't be able 
to highlight "Vitamin" or a part of the word, since I'm not aware of the 
stemmed word.

My frontend application is not Java, I'm only accessing Lucene through 
my package with XML-RPC. What I did now is I copied the GermanStemmer 
from lucene into my package and called it from there.

But I'm not sure if that's a clever idea and maybe I just overlooked a 
public interface to the stemmer output? Or I'm approaching the whole 
highlight search term from the wrong direction?

thanks for any pointers,
- Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 13 10:27:55 2005
Return-Path: <java-user-return-15851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83803 invoked from network); 13 Aug 2005 10:27:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2005 10:27:55 -0000
Received: (qmail 57985 invoked by uid 500); 13 Aug 2005 10:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57959 invoked by uid 500); 13 Aug 2005 10:27:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57946 invoked by uid 99); 13 Aug 2005 10:27:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 03:27:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 03:28:12 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7565C13E2006; Sat, 13 Aug 2005 06:27:49 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 3BE9B13E2005
	for <java-user@lucene.apache.org>; Sat, 13 Aug 2005 06:27:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <Pine.LNX.4.58.0508121816470.7891@hal.rescomp.berkeley.edu>
References: <300d7b19050812121165dc7c04@mail.gmail.com> <43109124-584A-49F5-BB1E-BEEA8A28D1A9@ehatchersolutions.com> <Pine.LNX.4.58.0508121816470.7891@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E369A642-AD62-4BD2-B1D4-3E0012252C43@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query that doesn't match a term more than once
Date: Sat, 13 Aug 2005 06:27:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 12, 2005, at 9:22 PM, Chris Hostetter wrote:
> : Programatically you can use PhrasePrefixQuery - see Lucene's test
> : case code for examples of how it's used, but it is a bit of work to
> : set up.
>
> That's only needed if you assume that the field contains tokenized  
> text.
> if the whole name is indexed as a single Term, then a regular  
> prefix query
> should work -- in fact, telling QueryParser to use an Analyzer that
> doesn't do any tokenizing should work too.

Thats a good point - thanks for mentioning that.  However you'd still  
have to deal with escaping the space.  I haven't tried it, but would  
a query of john\ j* using the KeywordAnalyzer do the trick?  This  
requires that "john jacob... schmidt" be left as a single token  
during indexing.

     Erik


>
> : > Is there a way to get lucene to get "satisfied" after matching  
> "john"
> : > and then require a second j-word to return a match for j*
> :
> : In short, not easily, but it is possible with PhrasePrefixQuery
> : programatically.  QueryParser does not support this at all  
> currently.
> :
> :
> :      Erik
> :
> : > The error might be on my end though.
> : > If I have the same person registered as "john carlson" and "john
> : > doe carlson"
> : > I add both values to the name field -- could that be it? If  
> that is so
> : > I wouldn't expect lucene to return the hit if I search for e.g.  
> "john
> : > joh* jo*" ?
> : >
> : > At least I'd like to boost the ranking of the results that match
> : > better. Right now "john j*" gives me john thompson as the top  
> hit even
> : > though there are heaps of john johnsons.
> : >
> : > I hope you can point me in the right direction.
> : > Thanks
> : >
> : > /Lasse
> : >
> : > My query parser code looks like this:
> : >             QueryParser parser = new QueryParser(field,  
> _analyzer);
> : >             parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
> : >             parser.setLocale(new Locale("DA", "dk"));
> : >             Query q = parser.parse(value);
> : >             query.add(q, required, false);
> : >
> : >  
> ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> :
> :
> :  
> ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 13 19:13:45 2005
Return-Path: <java-user-return-15852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64734 invoked from network); 13 Aug 2005 19:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2005 19:13:45 -0000
Received: (qmail 31451 invoked by uid 500); 13 Aug 2005 19:13:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31417 invoked by uid 500); 13 Aug 2005 19:13:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31400 invoked by uid 99); 13 Aug 2005 19:13:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 12:13:40 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.41] (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 13 Aug 2005 12:14:00 -0700
Received: (qmail 70365 invoked by uid 60001); 13 Aug 2005 19:13:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=euyJMBsnZmwMGAP1vfuS6GKTJHtkJlfjgTTs/oLzv72H2OpaQyBb7BDj2OqxUwxEFu/uDpov2FJRlrhDAFX09P9YaZurnYrD6zkwXjhOJP8NyDmL88/II7CXRbQw41TAA8JQ8VTEL36bdE7kN6hRbzF884iewcPPynMWFCna1sY=  ;
Message-ID: <20050813191337.70355.qmail@web31108.mail.mud.yahoo.com>
Received: from [69.201.138.158] by web31108.mail.mud.yahoo.com via HTTP; Sat, 13 Aug 2005 12:13:37 PDT
Date: Sat, 13 Aug 2005 12:13:37 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Public access to the stemmer (germanstemmer in my case)
To: java-user@lucene.apache.org
In-Reply-To: <42FD9875.8000908@fischer.name>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can use Lucene highlighter.  It lives in Lucene's contrib/
directory (not released as a separate Jar, but you can either build it,
or grab it from, for example, Lucene in Action's code download).  It
lets you highlight search terms like this:
  http://www.lucenebook.com/search?query=highlighter

Otis

--- Markus Fischer <markus@fischer.name> wrote:

> Hi,
> 
> I was wondering if there's a reason why the stemmers, e.g.
> GermanStemmer 
> are not accessible from outside the lucene package.
> 
> When I want to highlight the search terms, I need to know which terms
> 
> have been found. Example: when searching for "Vitamine" the 
> GermanStemmer produces "Vitami". "Vitami" is a word not directly
> used, 
> but often it's "Vitamin", the noun. When I now try to highlight the 
> matched words solely based on the user input, I certainly won't be
> able 
> to highlight "Vitamin" or a part of the word, since I'm not aware of
> the 
> stemmed word.
> 
> My frontend application is not Java, I'm only accessing Lucene
> through 
> my package with XML-RPC. What I did now is I copied the GermanStemmer
> 
> from lucene into my package and called it from there.
> 
> But I'm not sure if that's a clever idea and maybe I just overlooked
> a 
> public interface to the stemmer output? Or I'm approaching the whole 
> highlight search term from the wrong direction?
> 
> thanks for any pointers,
> - Markus
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 13 21:23:20 2005
Return-Path: <java-user-return-15853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86186 invoked from network); 13 Aug 2005 21:23:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2005 21:23:20 -0000
Received: (qmail 1292 invoked by uid 500); 13 Aug 2005 21:23:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1042 invoked by uid 500); 13 Aug 2005 21:23:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1029 invoked by uid 99); 13 Aug 2005 21:23:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 14:23:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lasse.lindgaard@gmail.com designates 64.233.184.198 as permitted sender)
Received: from [64.233.184.198] (HELO wproxy.gmail.com) (64.233.184.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 14:23:33 -0700
Received: by wproxy.gmail.com with SMTP id 37so814426wra
        for <java-user@lucene.apache.org>; Sat, 13 Aug 2005 14:23:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bRiKdxWv8qfLpbOSoc01uvZWCDGCGy5EEeo+C1Zw3CiTbTbezlVZ8nqgcNSpyAI4ayWj6du5NOeSZN9jBt5h69cMIO45Xo3I2aPB/aJO4CYd5Bn9WjRpxvtXaas2ACNN9BOfVJrhgszVv0EvGn54PqQVA5Rx5OCIgvHxfoiVkhE=
Received: by 10.54.57.77 with SMTP id f77mr2596569wra;
        Sat, 13 Aug 2005 14:23:10 -0700 (PDT)
Received: by 10.54.146.15 with HTTP; Sat, 13 Aug 2005 14:23:10 -0700 (PDT)
Message-ID: <300d7b19050813142377889d08@mail.gmail.com>
Date: Sat, 13 Aug 2005 23:23:10 +0200
From: Lasse L <lasse.lindgaard@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query that doesn't match a term more than once
In-Reply-To: <E369A642-AD62-4BD2-B1D4-3E0012252C43@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <300d7b19050812121165dc7c04@mail.gmail.com>
	 <43109124-584A-49F5-BB1E-BEEA8A28D1A9@ehatchersolutions.com>
	 <Pine.LNX.4.58.0508121816470.7891@hal.rescomp.berkeley.edu>
	 <E369A642-AD62-4BD2-B1D4-3E0012252C43@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

However leaving the name as a single term would make me miss a hit
like "john doe johnson" -- which is unacceptable.

Is there a way I could boost the queryresults that match better?
Will the score rise if a query is matched more than once? "j*" in
"john johnson"?

It wouldn't matter that much that I get the extra matches if only I'd
get the best ones on top.

/Lasse

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 13 22:15:59 2005
Return-Path: <java-user-return-15854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91238 invoked from network); 13 Aug 2005 22:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2005 22:15:59 -0000
Received: (qmail 28636 invoked by uid 500); 13 Aug 2005 22:15:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28608 invoked by uid 500); 13 Aug 2005 22:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28595 invoked by uid 99); 13 Aug 2005 22:15:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 15:15:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.184.196 as permitted sender)
Received: from [64.233.184.196] (HELO wproxy.gmail.com) (64.233.184.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 15:16:15 -0700
Received: by wproxy.gmail.com with SMTP id 55so797600wri
        for <java-user@lucene.apache.org>; Sat, 13 Aug 2005 15:15:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=G3jnRxqGHymyxWuD4Q80cQjW6UALf52VIUaKw5DPcZsWyqxfXtkG01FXj0G65nD+ptAdWHSx5Qspi1UPgjXAddthBMl1YzMpWVQa3kEceeCEsZhwKSBMYRAANj7C4FUlJr3wV9yagPkvoUkFounA5hvbsWRqMGbOG3UYjruV/Ow=
Received: by 10.54.34.20 with SMTP id h20mr2783768wrh;
        Sat, 13 Aug 2005 15:15:52 -0700 (PDT)
Received: by 10.54.147.18 with HTTP; Sat, 13 Aug 2005 15:15:52 -0700 (PDT)
Message-ID: <1cbd6f83050813151511147bf5@mail.gmail.com>
Date: Sat, 13 Aug 2005 18:15:52 -0400
From: Mag Gam <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Integrate Lucene with Derby
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are there any documens or plans to integrate Lucene With Apache Derby
(database)?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 13 22:26:29 2005
Return-Path: <java-user-return-15855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92961 invoked from network); 13 Aug 2005 22:26:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2005 22:26:29 -0000
Received: (qmail 38932 invoked by uid 500); 13 Aug 2005 22:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38442 invoked by uid 500); 13 Aug 2005 22:26:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38429 invoked by uid 99); 13 Aug 2005 22:26:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 15:26:25 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO rproxy.gmail.com) (64.233.170.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 15:26:45 -0700
Received: by rproxy.gmail.com with SMTP id 1so173398rny
        for <java-user@lucene.apache.org>; Sat, 13 Aug 2005 15:26:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=utxmhA6h7xsT+b0lzhjZ8im6h6xx7W2mu99JnXXMLa5IzTMtAkLuP7xZT4z8BUkrG2XMnJes0nVG8hQZlbPZ9Aw3iYjZj3ZdvbNjZb9YsLniWb6hYMgwKXACAKsps/hjamTY9PmPqWFxEFFQailKnO41dABLPM7r2AmBtte2IRE=
Received: by 10.38.6.14 with SMTP id 14mr79107rnf;
        Sat, 13 Aug 2005 15:26:23 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Sat, 13 Aug 2005 15:26:23 -0700 (PDT)
Message-ID: <7ca123910508131526e689909@mail.gmail.com>
Date: Sat, 13 Aug 2005 15:26:23 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Integrate Lucene with Derby
In-Reply-To: <1cbd6f83050813151511147bf5@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1cbd6f83050813151511147bf5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,=20

I am also interested in that. I haven't used Derby before, but it
seems the java database of choice as it is open source and a full
relational database.

I plant to learn the simple usage of Derby and then think about
integrating Derby with Lucene.

May we should post our progress for the integration and various
schemes of integration in this thread or somewhere else?

Thanks,

Jian

On 8/13/05, Mag Gam <magawake@gmail.com> wrote:
> Are there any documens or plans to integrate Lucene With Apache Derby
> (database)?
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 13 23:49:20 2005
Return-Path: <java-user-return-15856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2188 invoked from network); 13 Aug 2005 23:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Aug 2005 23:49:19 -0000
Received: (qmail 90092 invoked by uid 500); 13 Aug 2005 23:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89250 invoked by uid 500); 13 Aug 2005 23:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89235 invoked by uid 99); 13 Aug 2005 23:49:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 16:49:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fraschetti@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 16:49:35 -0700
Received: by zproxy.gmail.com with SMTP id n29so637743nzf
        for <java-user@lucene.apache.org>; Sat, 13 Aug 2005 16:49:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=kOb8O1VJD1MUKaxl4BJ1EnF4p4deStp0ygLN66cL30fnE9+sOKg+mRLUkY3gmLh9wG0yRfj2Z9ZFZvQhko9QHKzFNvfof2E/2ETDEMjMA1MLDpfGj+tJj9jpg9ACYgFsbaGk/zdICYl9aWfyDGh5u2djmlLUrKMFcApLmDFhg4s=
Received: by 10.36.80.14 with SMTP id d14mr3333110nzb;
        Sat, 13 Aug 2005 16:49:12 -0700 (PDT)
Received: by 10.36.55.4 with HTTP; Sat, 13 Aug 2005 16:49:12 -0700 (PDT)
Message-ID: <cbdebdf80508131649614aa6ba@mail.gmail.com>
Date: Sat, 13 Aug 2005 16:49:12 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
To: java-user@lucene.apache.org
Subject: post-normalization score filter
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've seen a few posts which reference using a HitCollector to help
filter the returned document's scores.. but are there any
implementations out there that perform this filter of results by score
after they've already been normalized, short of walking the hits
array.... If i was to walk hits until i reach my threshold, just
checking the hits.score() ... what am I looking performance wise, are
the scores all calculated at this point and I'm simply accessing them
or are they normalized on the fly?

Obviously I can trim my results a bit for results that score a million
documents only allow the first few thousand as results, but even in
the case of where I might get two thousand results, the lower end
results have such minimal scores in comparison to the earlier that it
seems unintuitive for them to be accessible.

thanks as always!

--=20
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 14 03:52:36 2005
Return-Path: <java-user-return-15857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31802 invoked from network); 14 Aug 2005 03:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2005 03:52:35 -0000
Received: (qmail 87163 invoked by uid 500); 14 Aug 2005 03:52:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87127 invoked by uid 500); 14 Aug 2005 03:52:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87114 invoked by uid 99); 14 Aug 2005 03:52:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 20:52:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 20:52:51 -0700
Received: by wproxy.gmail.com with SMTP id 55so819612wri
        for <java-user@lucene.apache.org>; Sat, 13 Aug 2005 20:52:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=M3uXatothHQKeka/FP04LRDBHO37Qhzmvffry8zaGlD2OKhReDoSn21ZFoLxHtO0L+rpoTq8YUUw3wQFOApCqh4v7Yd6ljOnlCNBKOCIHCXWyHWXM6dKt6DYLzV10WkW2xL139pvkFi4xrTEQPm3ullOfLcS8r6pXGBJhM+pz3M=
Received: by 10.54.49.72 with SMTP id w72mr2948676wrw;
        Sat, 13 Aug 2005 20:52:29 -0700 (PDT)
Received: by 10.54.147.18 with HTTP; Sat, 13 Aug 2005 20:52:28 -0700 (PDT)
Message-ID: <1cbd6f83050813205258d7e6ae@mail.gmail.com>
Date: Sat, 13 Aug 2005 23:52:29 -0400
From: Mag Gam <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Integrate Lucene with Derby
In-Reply-To: <7ca123910508131526e689909@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1cbd6f83050813151511147bf5@mail.gmail.com>
	 <7ca123910508131526e689909@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

yes. I have been looking for solutions for a while now. I am not too
good with Java but I am learning it...

I have asked the kind people of Derby-users, and they say there is no
solution for this yet.

I guess we can ask the people on the -developer list....


On 8/13/05, jian chen <chenjian1227@gmail.com> wrote:
> Hi,
>=20
> I am also interested in that. I haven't used Derby before, but it
> seems the java database of choice as it is open source and a full
> relational database.
>=20
> I plant to learn the simple usage of Derby and then think about
> integrating Derby with Lucene.
>=20
> May we should post our progress for the integration and various
> schemes of integration in this thread or somewhere else?
>=20
> Thanks,
>=20
> Jian
>=20
> On 8/13/05, Mag Gam <magawake@gmail.com> wrote:
> > Are there any documens or plans to integrate Lucene With Apache Derby
> > (database)?
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 14 04:07:59 2005
Return-Path: <java-user-return-15858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38816 invoked from network); 14 Aug 2005 04:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2005 04:07:59 -0000
Received: (qmail 93076 invoked by uid 500); 14 Aug 2005 04:07:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93051 invoked by uid 500); 14 Aug 2005 04:07:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93038 invoked by uid 99); 14 Aug 2005 04:07:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 21:07:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.201 as permitted sender)
Received: from [64.233.170.201] (HELO rproxy.gmail.com) (64.233.170.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Aug 2005 21:08:16 -0700
Received: by rproxy.gmail.com with SMTP id 1so178137rny
        for <java-user@lucene.apache.org>; Sat, 13 Aug 2005 21:07:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OB8IawInwkXCWNgb5RqPJHBW61t/dMfoLTzjVm4UM4uiLsqNRu+5+EQXc7h+xuQlvZDi4b30depcCVUqWvuflijC1fctrCnjRusEbUSWYUzew6ei1PP/D+M0BE/1m/91mPXLp7IKmG0HQkSDMmMKDAAOLN7ybKVEEeHcq+TgU+g=
Received: by 10.38.8.76 with SMTP id 76mr101234rnh;
        Sat, 13 Aug 2005 21:07:53 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Sat, 13 Aug 2005 21:07:53 -0700 (PDT)
Message-ID: <7ca1239105081321071a971a33@mail.gmail.com>
Date: Sat, 13 Aug 2005 21:07:53 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Integrate Lucene with Derby
In-Reply-To: <1cbd6f83050813205258d7e6ae@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1cbd6f83050813151511147bf5@mail.gmail.com>
	 <7ca123910508131526e689909@mail.gmail.com>
	 <1cbd6f83050813205258d7e6ae@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I just downloaded a copy of the derby binary and successfully run the
simple example java program. It seems derby is extremely easy to use
as an embeded java database engine.

This gave me some confidence that I could integrate Lucene with Derby
and possibly Jetty server, to make a complete java based solution for
a hobby search project.

I will post more regarding this integration as I go along.

Cheers,

Jian
www.jhsystems.net

On 8/13/05, Mag Gam <magawake@gmail.com> wrote:
> yes. I have been looking for solutions for a while now. I am not too
> good with Java but I am learning it...
>=20
> I have asked the kind people of Derby-users, and they say there is no
> solution for this yet.
>=20
> I guess we can ask the people on the -developer list....
>=20
>=20
> On 8/13/05, jian chen <chenjian1227@gmail.com> wrote:
> > Hi,
> >
> > I am also interested in that. I haven't used Derby before, but it
> > seems the java database of choice as it is open source and a full
> > relational database.
> >
> > I plant to learn the simple usage of Derby and then think about
> > integrating Derby with Lucene.
> >
> > May we should post our progress for the integration and various
> > schemes of integration in this thread or somewhere else?
> >
> > Thanks,
> >
> > Jian
> >
> > On 8/13/05, Mag Gam <magawake@gmail.com> wrote:
> > > Are there any documens or plans to integrate Lucene With Apache Derby
> > > (database)?
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 14 10:09:02 2005
Return-Path: <java-user-return-15859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80198 invoked from network); 14 Aug 2005 10:09:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Aug 2005 10:09:02 -0000
Received: (qmail 33806 invoked by uid 500); 14 Aug 2005 10:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33781 invoked by uid 500); 14 Aug 2005 10:08:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33768 invoked by uid 99); 14 Aug 2005 10:08:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Aug 2005 03:08:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.83.242.16] (HELO mail.anchormen.nl) (212.83.242.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Aug 2005 03:09:17 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C5A0B8.26C5B066"
Subject: RE: Library for easy write/read from Documents - initial version.
Date: Sun, 14 Aug 2005 12:08:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07CA00@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <24CFCE44DCB015489FB96D38BDF4FCAA07CA00@gerard.anchormen.nl>
Thread-Topic: Library for easy write/read from Documents - initial version.
Thread-Index: AcWfEHQIpUeeIqOBRPu9LJo33thpSgBpv/WV
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5A0B8.26C5B066
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I have extracted the sources from another project and created a new one. =
You can download a preliminary version here:
=20
http://members.home.nl/peter-veentjer01/lucenefields.zip
=20
There is a lot to do. Documentation, reading/writing of non primitives, =
a few primitives are not quite finished. But I`m using parts of it in =
another projects and it works fine. I would like to head what you think =
of it.=20

________________________________

From: Peter Veentjer - Anchor Men [mailto:p.veentjer@anchormen.nl]
Sent: Fri 12-8-2005 9:35
To: java-user@lucene.apache.org
Subject: Library for easy write/read from Documents.




I`m currently developing a small library for easy reading/writing stuff
to and from the document. All primitives
(long,short,int,bool,byte,float,double,char) and non primitive Numbers
are supported, optionally they are compressed (a long doesn`t need 19
characters but only 2) and they are optionally lexographically and
lexographically compressed.

I also have created a few functions that make it easy to insert text:
keywords, unstored, unindexed etc.

I would like to make this library public on a very short time (I`m
currently writing and testing it) and I`m wondering what is the best way
to add/give it to Lucene.

Met vriendelijke groet,

Peter Veentjer
Anchor Men Interactive Solutions - duidelijk in zakelijke
internetoplossingen

Praediniussingel 41
9711 AE Groningen

T: 050-3115222
F: 050-5891696
E: p.veentjer@anchormen.nl
I : www.anchormen.nl <blocked::http://www.anchormen.nl/>






------_=_NextPart_001_01C5A0B8.26C5B066
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C5A0B8.26C5B066--

From java-user-return-15860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 05:17:45 2005
Return-Path: <java-user-return-15860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31598 invoked from network); 15 Aug 2005 05:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 05:17:45 -0000
Received: (qmail 38321 invoked by uid 500); 15 Aug 2005 05:17:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38297 invoked by uid 500); 15 Aug 2005 05:17:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38284 invoked by uid 99); 15 Aug 2005 05:17:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Aug 2005 22:17:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rbpandey@gmail.com designates 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Aug 2005 22:18:00 -0700
Received: by wproxy.gmail.com with SMTP id 71so997583wri
        for <java-user@lucene.apache.org>; Sun, 14 Aug 2005 22:17:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IK1luekuJc0VXjHe6kSmKXMzLSNwsGyFkhkMnkJlkHb3AwdPFV+Yj88bZlU7AuegQgiHICv5VSx9h4O95ql2QDGESeWdV6LH/+M3QtzeDSRe6UB6ubxCmwR2b33IkXvden2AGD7GWueTMxXaVjt5x/W3kyuli12fmjXUOOkFIrY=
Received: by 10.54.50.65 with SMTP id x65mr3400746wrx;
        Sun, 14 Aug 2005 22:17:37 -0700 (PDT)
Received: by 10.54.66.6 with HTTP; Sun, 14 Aug 2005 22:17:37 -0700 (PDT)
Message-ID: <80d298bc0508142217564c5962@mail.gmail.com>
Date: Mon, 15 Aug 2005 01:17:37 -0400
From: Rasik Pandey <rbpandey@gmail.com>
To: java-user@lucene.apache.org, Chris Lu <chris.lu@gmail.com>
Subject: Re: Very large number of indices in distributed environment
In-Reply-To: <6e3ae63105080408541956bf37@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <9eaa7ce50508040154168bc460@mail.gmail.com>
	 <6e3ae63105080408541956bf37@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> A big index is slow to merge, slow to search, and as you mentioned,
> it's slow to sync. An 1G index took me several hours to merge on a P3
> 1GHz 512MRam

Don't forget "slow to back-up".

--=20
Regards,
Rus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 13:52:19 2005
Return-Path: <java-user-return-15861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16326 invoked from network); 15 Aug 2005 13:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 13:52:19 -0000
Received: (qmail 19271 invoked by uid 500); 15 Aug 2005 13:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19239 invoked by uid 500); 15 Aug 2005 13:52:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19225 invoked by uid 99); 15 Aug 2005 13:52:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 06:52:12 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.28] (HELO pop04.mail.atl.earthlink.net) (207.69.200.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 06:52:32 -0700
Received: from mswamui-blood.atl.sa.earthlink.net ([209.86.224.28])
	by pop04.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E4fNp-0006at-00
	for java-user@lucene.apache.org; Mon, 15 Aug 2005 09:52:09 -0400
Message-ID: <28158767.1124113929856.JavaMail.root@mswamui-blood.atl.sa.earthlink.net>
Date: Mon, 15 Aug 2005 08:52:09 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Integrating lucene search with adobe search
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,
  After I do my search and display the hits I get back I would like to pass the seach string that I used with lucene to acrobat reader when it opens.  Has any one done this or has anyone seen any documents on how to do it?

Thanks,

Andrew

Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 15:53:43 2005
Return-Path: <java-user-return-15862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69560 invoked from network); 15 Aug 2005 15:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 15:53:43 -0000
Received: (qmail 55692 invoked by uid 500); 15 Aug 2005 15:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55672 invoked by uid 500); 15 Aug 2005 15:53:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55659 invoked by uid 99); 15 Aug 2005 15:53:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 08:53:36 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.58] (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 08:53:56 -0700
Received: from mswamui-swiss.atl.sa.earthlink.net ([209.86.224.50])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E4hHK-0001Mu-00
	for java-user@lucene.apache.org; Mon, 15 Aug 2005 11:53:34 -0400
Message-ID: <19894198.1124121214045.JavaMail.root@mswamui-swiss.atl.sa.earthlink.net>
Date: Mon, 15 Aug 2005 11:53:33 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: QueryParser Exceptions only under load?
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
  I'm running lucene 1.9-rc with jdk 1.5/5.0 on JBoss 3.6 with tomcat 5.0.
I'm using JMeter to do my load testing.  I'm getting several different exceptions (NullPointer, ArrayIndexOutofBounds and ParseException) from QueryParser when I simulate 5 users (threads in JMeter)with no pausing between http queries.  The exceptions are sporatic meaning I had to run it about 10 or more times so I could copy the stacktraces for you:

///// NullPointer
10:40:26,266 ERROR [Utils] QueryString : bomb
10:40:26,282 INFO  [STDOUT] java.lang.NullPointerException
10:40:26,282 INFO  [STDOUT]     at java.lang.String.<init>(String.java:205)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.FastCharStream.GetImage(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.jjFillToken(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_ntk(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Modifiers(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:60) 

/////ArrayIndexOutOfBoundsException
10:43:19,972 ERROR [Utils] QueryString : mines playgrounds
10:43:19,988 INFO  [STDOUT] java.lang.ArrayIndexOutOfBoundsException: -1
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.jjMoveNfa_3(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.jjMoveStringLiteralDfa0_3(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_scan_token(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_3_1(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_2_1(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Clause(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:60)

10:47:58,167 ERROR [Utils] QueryString : explosives camp
10:47:58,494 INFO  [STDOUT] org.apache.lucene.queryParser.ParseException: Encountered "<EOF>" at line 1, column 4.
Was expecting one of:
    <AND> ...
    <OR> ...
    <NOT> ...
    "+" ...
    "-" ...
    "(" ...
    "^" ...
    <QUOTED> ...
    <TERM> ...
    <FUZZY_SLOP> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...
    ":" ...

10:47:58,494 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.generateParseException(Unknown Source)
10:47:58,494 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_consume_token(Unknown Source)
10:47:58,494 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Clause(Unknown Source)
10:47:58,494 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:47:58,525 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:47:58,541 INFO  [STDOUT]     at net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:66)

My load test is running on the same box as my search engine a Thinkpad G41 with a P4 3.33GHz with 1.5 GB of RAM.

The queries are the same whether I'm running one user or 5 users.  I expect that these exceptions are happining just because of the load but I thought I'd post them to get comments recomendations?

Thanks,

Andrew


Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 15:53:49 2005
Return-Path: <java-user-return-15863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69603 invoked from network); 15 Aug 2005 15:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 15:53:49 -0000
Received: (qmail 56534 invoked by uid 500); 15 Aug 2005 15:53:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56497 invoked by uid 500); 15 Aug 2005 15:53:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56469 invoked by uid 99); 15 Aug 2005 15:53:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 08:53:41 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.58] (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 08:54:01 -0700
Received: from mswamui-swiss.atl.sa.earthlink.net ([209.86.224.50])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E4hHN-0001Og-00
	for java-user@lucene.apache.org; Mon, 15 Aug 2005 11:53:37 -0400
Message-ID: <18496418.1124121217715.JavaMail.root@mswamui-swiss.atl.sa.earthlink.net>
Date: Mon, 15 Aug 2005 11:53:37 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: QueryParser Exceptions only under load?
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
  I'm running lucene 1.9-rc with jdk 1.5/5.0 on JBoss 3.6 with tomcat 5.0.
I'm using JMeter to do my load testing.  I'm getting several different exceptions (NullPointer, ArrayIndexOutofBounds and ParseException) from QueryParser when I simulate 5 users (threads in JMeter)with no pausing between http queries.  The exceptions are sporatic meaning I had to run it about 10 or more times so I could copy the stacktraces for you:

///// NullPointer
10:40:26,266 ERROR [Utils] QueryString : bomb
10:40:26,282 INFO  [STDOUT] java.lang.NullPointerException
10:40:26,282 INFO  [STDOUT]     at java.lang.String.<init>(String.java:205)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.FastCharStream.GetImage(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.jjFillToken(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_ntk(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Modifiers(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:60) 

/////ArrayIndexOutOfBoundsException
10:43:19,972 ERROR [Utils] QueryString : mines playgrounds
10:43:19,988 INFO  [STDOUT] java.lang.ArrayIndexOutOfBoundsException: -1
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.jjMoveNfa_3(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.jjMoveStringLiteralDfa0_3(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_scan_token(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_3_1(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_2_1(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Clause(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:60)

10:47:58,167 ERROR [Utils] QueryString : explosives camp
10:47:58,494 INFO  [STDOUT] org.apache.lucene.queryParser.ParseException: Encountered "<EOF>" at line 1, column 4.
Was expecting one of:
    <AND> ...
    <OR> ...
    <NOT> ...
    "+" ...
    "-" ...
    "(" ...
    "^" ...
    <QUOTED> ...
    <TERM> ...
    <FUZZY_SLOP> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...
    ":" ...

10:47:58,494 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.generateParseException(Unknown Source)
10:47:58,494 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.jj_consume_token(Unknown Source)
10:47:58,494 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Clause(Unknown Source)
10:47:58,494 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:47:58,525 INFO  [STDOUT]     at org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:47:58,541 INFO  [STDOUT]     at net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:66)

My load test is running on the same box as my search engine a Thinkpad G41 with a P4 3.33GHz with 1.5 GB of RAM.

The queries are the same whether I'm running one user or 5 users.  I expect that these exceptions are happining just because of the load but I thought I'd post them to get comments recomendations?

Thanks,

Andrew


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 16:03:44 2005
Return-Path: <java-user-return-15864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74038 invoked from network); 15 Aug 2005 16:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 16:03:43 -0000
Received: (qmail 73225 invoked by uid 500); 15 Aug 2005 16:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73202 invoked by uid 500); 15 Aug 2005 16:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73189 invoked by uid 99); 15 Aug 2005 16:03:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 09:03:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [82.109.82.162] (HELO mmi044surmsx02.enterprisenet.org) (82.109.82.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 09:03:56 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: QueryParser Exceptions only under load?
Date: Mon, 15 Aug 2005 17:03:20 +0100
Message-ID: <5E7B95B618BA914AAE0AF7E9BF1F40190B287B@mmi044surmsx02.enterprisenet.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser Exceptions only under load?
Thread-Index: AcWhsZCivAK4VnPGQvmOfQV2QC4eIAAAOWYw
From: "Palmer, Andrew MMI Woking" <andrew.palmer@vnuinc.co.uk>
To: <java-user@lucene.apache.org>,
	"Andrew Boyd" <Andrew.Boyd@bbtech.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrew,

My initial thought is that you are reusing the QueryParser for each of
the requests.  It is not a thread safe object.

I was getting similar problems and changing the way that I used the
QueryParser fixed it.  This was on 1.4.3 so it might be different.

Andrew


-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com]=20
Sent: 15 August 2005 16:54
To: java-user@lucene.apache.org
Subject: QueryParser Exceptions only under load?

Hi all,
  I'm running lucene 1.9-rc with jdk 1.5/5.0 on JBoss 3.6 with tomcat
5.0.
I'm using JMeter to do my load testing.  I'm getting several different
exceptions (NullPointer, ArrayIndexOutofBounds and ParseException) from
QueryParser when I simulate 5 users (threads in JMeter)with no pausing
between http queries.  The exceptions are sporatic meaning I had to run
it about 10 or more times so I could copy the stacktraces for you:

///// NullPointer
10:40:26,266 ERROR [Utils] QueryString : bomb
10:40:26,282 INFO  [STDOUT] java.lang.NullPointerException
10:40:26,282 INFO  [STDOUT]     at
java.lang.String.<init>(String.java:205)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.FastCharStream.GetImage(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.jjFillToken(Unknow
n Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(Unkno
wn Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_ntk(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Modifiers(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:60)=20

/////ArrayIndexOutOfBoundsException
10:43:19,972 ERROR [Utils] QueryString : mines playgrounds
10:43:19,988 INFO  [STDOUT] java.lang.ArrayIndexOutOfBoundsException: -1
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.jjMoveNfa_3(Unknow
n Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.jjMoveStringLitera
lDfa0_3(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(Unkno
wn Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_scan_token(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_3_1(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_2_1(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Clause(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:60)

10:47:58,167 ERROR [Utils] QueryString : explosives camp
10:47:58,494 INFO  [STDOUT]
org.apache.lucene.queryParser.ParseException: Encountered "<EOF>" at
line 1, column 4.
Was expecting one of:
    <AND> ...
    <OR> ...
    <NOT> ...
    "+" ...
    "-" ...
    "(" ...
    "^" ...
    <QUOTED> ...
    <TERM> ...
    <FUZZY_SLOP> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...
    ":" ...

10:47:58,494 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.generateParseException(Unknown
Source)
10:47:58,494 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_consume_token(Unknown
Source)
10:47:58,494 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Clause(Unknown Source)
10:47:58,494 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:47:58,525 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:47:58,541 INFO  [STDOUT]     at
net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:66)

My load test is running on the same box as my search engine a Thinkpad
G41 with a P4 3.33GHz with 1.5 GB of RAM.

The queries are the same whether I'm running one user or 5 users.  I
expect that these exceptions are happining just because of the load but
I thought I'd post them to get comments recomendations?

Thanks,

Andrew


Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 16:30:23 2005
Return-Path: <java-user-return-15865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82864 invoked from network); 15 Aug 2005 16:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 16:30:22 -0000
Received: (qmail 6912 invoked by uid 500); 15 Aug 2005 16:30:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6871 invoked by uid 500); 15 Aug 2005 16:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6857 invoked by uid 99); 15 Aug 2005 16:30:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 09:30:18 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.58] (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 09:30:37 -0700
Received: from mswamui-swiss.atl.sa.earthlink.net ([209.86.224.50])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E4hqp-0004xs-00
	for java-user@lucene.apache.org; Mon, 15 Aug 2005 12:30:15 -0400
Message-ID: <1492393.1124123415452.JavaMail.root@mswamui-swiss.atl.sa.earthlink.net>
Date: Mon, 15 Aug 2005 12:30:15 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: RE: QueryParser Exceptions only under load?
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the reply.  I believe your initial thought is probably the correct one!

Thanks,

Andrew

-----Original Message-----
From: "Palmer, Andrew MMI Woking" <andrew.palmer@vnuinc.co.uk>
Sent: Aug 15, 2005 12:03 PM
To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
Subject: RE: QueryParser Exceptions only under load?

Andrew,

My initial thought is that you are reusing the QueryParser for each of
the requests.  It is not a thread safe object.

I was getting similar problems and changing the way that I used the
QueryParser fixed it.  This was on 1.4.3 so it might be different.

Andrew


-----Original Message-----
From: Andrew Boyd [mailto:andrew.boyd@mindspring.com] 
Sent: 15 August 2005 16:54
To: java-user@lucene.apache.org
Subject: QueryParser Exceptions only under load?

Hi all,
  I'm running lucene 1.9-rc with jdk 1.5/5.0 on JBoss 3.6 with tomcat
5.0.
I'm using JMeter to do my load testing.  I'm getting several different
exceptions (NullPointer, ArrayIndexOutofBounds and ParseException) from
QueryParser when I simulate 5 users (threads in JMeter)with no pausing
between http queries.  The exceptions are sporatic meaning I had to run
it about 10 or more times so I could copy the stacktraces for you:

///// NullPointer
10:40:26,266 ERROR [Utils] QueryString : bomb
10:40:26,282 INFO  [STDOUT] java.lang.NullPointerException
10:40:26,282 INFO  [STDOUT]     at
java.lang.String.<init>(String.java:205)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.FastCharStream.GetImage(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.jjFillToken(Unknow
n Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(Unkno
wn Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_ntk(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Modifiers(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:40:26,282 INFO  [STDOUT]     at
net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:60) 

/////ArrayIndexOutOfBoundsException
10:43:19,972 ERROR [Utils] QueryString : mines playgrounds
10:43:19,988 INFO  [STDOUT] java.lang.ArrayIndexOutOfBoundsException: -1
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.jjMoveNfa_3(Unknow
n Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.jjMoveStringLitera
lDfa0_3(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParserTokenManager.getNextToken(Unkno
wn Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_scan_token(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_3_1(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_2_1(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Clause(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:43:19,988 INFO  [STDOUT]     at
net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:60)

10:47:58,167 ERROR [Utils] QueryString : explosives camp
10:47:58,494 INFO  [STDOUT]
org.apache.lucene.queryParser.ParseException: Encountered "<EOF>" at
line 1, column 4.
Was expecting one of:
    <AND> ...
    <OR> ...
    <NOT> ...
    "+" ...
    "-" ...
    "(" ...
    "^" ...
    <QUOTED> ...
    <TERM> ...
    <FUZZY_SLOP> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...
    ":" ...

10:47:58,494 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.generateParseException(Unknown
Source)
10:47:58,494 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.jj_consume_token(Unknown
Source)
10:47:58,494 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Clause(Unknown Source)
10:47:58,494 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.Query(Unknown Source)
10:47:58,525 INFO  [STDOUT]     at
org.apache.lucene.queryParser.QueryParser.parse(Unknown Source)
10:47:58,541 INFO  [STDOUT]     at
net.bbtech.kat.search.BaseSearchType.getQuery(BaseSearchType.java:66)

My load test is running on the same box as my search engine a Thinkpad
G41 with a P4 3.33GHz with 1.5 GB of RAM.

The queries are the same whether I'm running one user or 5 users.  I
expect that these exceptions are happining just because of the load but
I thought I'd post them to get comments recomendations?

Thanks,

Andrew


Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 18:46:20 2005
Return-Path: <java-user-return-15866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26529 invoked from network); 15 Aug 2005 18:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 18:46:20 -0000
Received: (qmail 23719 invoked by uid 500); 15 Aug 2005 18:46:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23695 invoked by uid 500); 15 Aug 2005 18:46:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23682 invoked by uid 99); 15 Aug 2005 18:46:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 11:46:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 11:46:35 -0700
Received: by wproxy.gmail.com with SMTP id 71so1121389wri
        for <java-user@lucene.apache.org>; Mon, 15 Aug 2005 11:46:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YdcT/w8Y1puwDpdRw4bfApnXIO6KgZyhzHVjFDN3nMa07coS8gaEoAFMT+vw18YHdJaAxXOxi3Vm9fEHlcjHGZCspYwvPFS/XSdE5FR419cLipiQ/sU9o9u2CtuxN8LB4IBVnehslZJJpyT50BqvoBl0gxMlcVlEpZhIkRZkP9Y=
Received: by 10.54.30.40 with SMTP id d40mr3757195wrd;
        Mon, 15 Aug 2005 11:46:12 -0700 (PDT)
Received: by 10.54.121.15 with HTTP; Mon, 15 Aug 2005 11:46:12 -0700 (PDT)
Message-ID: <34cc3b0a050815114650157e9a@mail.gmail.com>
Date: Mon, 15 Aug 2005 14:46:12 -0400
From: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing document instances and retrieving instance attributes
In-Reply-To: <34cc3b0a05081112412a18a802@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <34cc3b0a050811113411bcfea@mail.gmail.com>
	 <20050811185206.5998.qmail@web31107.mail.mud.yahoo.com>
	 <34cc3b0a05081112412a18a802@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm still having problems finding a clean way of doing this. Currently
my index has
"_" filling in for empty fields in instances

DOC            1
FILEID         123
MIME           test/html
CONTENT    blam blam blam etc.
FILENAME   File1
DATE          090909
AUTH          _
SESSION    111111
FILENAME   File2
DATE          101010
AUTH          Jim Jones
SESSION    111112

I need to be able to search for session 111112 and return all of the
fields from the second instance. Is it possible to determine which
field a hit came from? (There could be a lot of instances, so I woud
prefer not to iterate through all of them doing String comparisons.)

Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 19:05:53 2005
Return-Path: <java-user-return-15867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35705 invoked from network); 15 Aug 2005 19:05:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 19:05:52 -0000
Received: (qmail 61711 invoked by uid 500); 15 Aug 2005 19:05:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61690 invoked by uid 500); 15 Aug 2005 19:05:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61677 invoked by uid 99); 15 Aug 2005 19:05:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 12:05:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.7.7.100] (HELO mail.monsur.com) (64.7.7.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 12:06:07 -0700
Received: from chicago [64.7.7.99] by mail.monsur.com with ESMTP
  (SMTPD32-8.05) id A7711607013C; Mon, 15 Aug 2005 15:05:21 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: QueryParser exception on escaped backslash preceding ) character
Date: Mon, 15 Aug 2005 15:05:41 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
thread-index: AcWfSlFIWhpXOoUvTDONr+/pgSgkDgCgaAQg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <49265.204.56.114.37.1123857019.squirrel@msqr.us>
Message-Id: <200508151505780.SM01832@chicago>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We've actually been running into this sort of issue a lot, since we take a
user generated query from a web page and then push it into a QueryParser.
In general we've learned that escaping special characters is not enough to
create a well formed query.  Since our users aren't running complicated
queries, we decided instead to completely parse out any non-alphanumerics.
But we still have issues when, for example, someone will search for:

Portland, OR

And Lucene will interpret that "OR" as a special word, rather than "Oregon".
I'm wondering how others are dealing with this type of scenario.  If it'll
help, I can provide more queries that will cause errors similar to the one
below.

Thanks,
Monsur

 

> -----Original Message-----
> From: Matt Magoffin [mailto:apache.org@msqr.us] 
> Sent: Friday, August 12, 2005 10:30 AM
> To: java-user@lucene.apache.org
> Subject: QueryParser exception on escaped backslash preceding 
> ) character
> 
> When I try to parse a query with an escaped backslash 
> character like this
> (using Lucene 1.4.3):
> 
> -id:20677 +(addr:Street143 AND zip:\\)
> 
> the QueryParser thows an Exception:
> 
> Encountered "<EOF>" at line 1, column 289.
> 			Was expecting one of: <AND> ... <OR> ...
> 			<NOT> ... "+" ... "-" ... "(" ... ")" 
> ... "^" ...
> 			<QUOTED> ... <TERM> ...
> 			<PREFIXTERM> ... <WILDTERM> ... "[" ...
> 			"{" ... <NUMBER> ...
> 
> However, if I insert a space between the backslash and the 
> parenthesis:
> 
> -id:20677 +(addr:Street143 AND zip:\\ )
> 
> it works. Is this expected behavior or perhaps a bug in the 
> QueryParser?
> 
> -- m@
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 19:49:18 2005
Return-Path: <java-user-return-15868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55921 invoked from network); 15 Aug 2005 19:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 19:49:17 -0000
Received: (qmail 13059 invoked by uid 500); 15 Aug 2005 19:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12407 invoked by uid 500); 15 Aug 2005 19:49:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12394 invoked by uid 99); 15 Aug 2005 19:49:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 12:49:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 12:49:32 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 04D3013E2007; Mon, 15 Aug 2005 15:49:07 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id B89D513E2006
	for <java-user@lucene.apache.org>; Mon, 15 Aug 2005 15:48:21 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200508151505780.SM01832@chicago>
References: <200508151505780.SM01832@chicago>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <542F028B-3056-4E06-AD9A-60F6E66065A5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser exception on escaped backslash preceding ) character
Date: Mon, 15 Aug 2005 15:48:28 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 15, 2005, at 3:05 PM, Monsur Hossain wrote:
> We've actually been running into this sort of issue a lot, since we  
> take a
> user generated query from a web page and then push it into a  
> QueryParser.
> In general we've learned that escaping special characters is not  
> enough to
> create a well formed query.  Since our users aren't running  
> complicated
> queries, we decided instead to completely parse out any non- 
> alphanumerics.
> But we still have issues when, for example, someone will search for:
>
> Portland, OR
>
> And Lucene will interpret that "OR" as a special word, rather than  
> "Oregon".
> I'm wondering how others are dealing with this type of scenario.   
> If it'll
> help, I can provide more queries that will cause errors similar to  
> the one
> below.

If you're ripping out non-alphanumerics, you may as well simply  
create the Query through the API instead of using QueryParser.  I do  
this for all the structured search options on the Rossetti Archive  
search page: http://www.rossettiarchive.org/rose/

I analyze (or string tokenize) the text for a field, and then build a  
Query from it rather than allowing QueryParser expression syntax.   
QueryParser is probably overkill for most applications needs anyway,  
and can end up getting in the way in the cases described in this thread.

     Erik

>
> Thanks,
> Monsur
>
>
>
>
>> -----Original Message-----
>> From: Matt Magoffin [mailto:apache.org@msqr.us]
>> Sent: Friday, August 12, 2005 10:30 AM
>> To: java-user@lucene.apache.org
>> Subject: QueryParser exception on escaped backslash preceding
>> ) character
>>
>> When I try to parse a query with an escaped backslash
>> character like this
>> (using Lucene 1.4.3):
>>
>> -id:20677 +(addr:Street143 AND zip:\\)
>>
>> the QueryParser thows an Exception:
>>
>> Encountered "<EOF>" at line 1, column 289.
>>             Was expecting one of: <AND> ... <OR> ...
>>             <NOT> ... "+" ... "-" ... "(" ... ")"
>> ... "^" ...
>>             <QUOTED> ... <TERM> ...
>>             <PREFIXTERM> ... <WILDTERM> ... "[" ...
>>             "{" ... <NUMBER> ...
>>
>> However, if I insert a space between the backslash and the
>> parenthesis:
>>
>> -id:20677 +(addr:Street143 AND zip:\\ )
>>
>> it works. Is this expected behavior or perhaps a bug in the
>> QueryParser?
>>
>> -- m@
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 20:35:23 2005
Return-Path: <java-user-return-15869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70013 invoked from network); 15 Aug 2005 20:35:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 20:35:23 -0000
Received: (qmail 80567 invoked by uid 500); 15 Aug 2005 20:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80536 invoked by uid 500); 15 Aug 2005 20:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80523 invoked by uid 99); 15 Aug 2005 20:35:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 13:35:19 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mdesai@gmail.com designates 64.233.184.198 as permitted sender)
Received: from [64.233.184.198] (HELO wproxy.gmail.com) (64.233.184.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 13:35:39 -0700
Received: by wproxy.gmail.com with SMTP id 71so1141751wri
        for <java-user@lucene.apache.org>; Mon, 15 Aug 2005 13:35:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=JIziIJX3nOsVog8Y1tzKWVWX8IGOQ9ZEsSJrBA0h3MDSO/ZMTSfAzAyx8wCgmyx9uVJIBB+hyF9v4AyO6XgRxQjJwe5dCHM3rVdrKtid6yYfdNTqC52XHZt7/AkERu84RTcGtriBdi1RinuQjzbnfRpdgl677/og9A8a0qtmPf0=
Received: by 10.54.107.6 with SMTP id f6mr3795541wrc;
        Mon, 15 Aug 2005 13:35:17 -0700 (PDT)
Received: by 10.54.72.2 with HTTP; Mon, 15 Aug 2005 13:35:17 -0700 (PDT)
Message-ID: <1b81191e050815133524a9b4c3@mail.gmail.com>
Date: Mon, 15 Aug 2005 13:35:17 -0700
From: Malay Desai <mdesai@gmail.com>
To: java-user@lucene.apache.org
Subject: coord factor and MultiFieldSearch
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1434_7344308.1124138117712"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1434_7344308.1124138117712
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I have a question on the way coord factors affects multi-field searches. It=
=20
looks like the sum of individual field hit scores is multiplied by a coord=
=20
factor of (x/y) where x =3D no. of fields matched and y =3D total fields. T=
his=20
seems to penalize some results, where we get a very good quality hits just=
=20
in one field (say in the heading field) compared to less important matches=
=20
in multiple fields. I understand that I can tune field boosts but even with=
=20
that this coord factor seems to play a role. Can anyone explain how this is=
=20
supposed to work and also how overriding the coord in the similarity would=
=20
affect other things?

Thanks.

------=_Part_1434_7344308.1124138117712--

From java-user-return-15870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 22:16:21 2005
Return-Path: <java-user-return-15870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2304 invoked from network); 15 Aug 2005 22:16:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 22:16:20 -0000
Received: (qmail 15472 invoked by uid 500); 15 Aug 2005 22:16:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15446 invoked by uid 500); 15 Aug 2005 22:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15433 invoked by uid 99); 15 Aug 2005 22:16:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 15:16:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO rproxy.gmail.com) (64.233.170.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 15:16:36 -0700
Received: by rproxy.gmail.com with SMTP id g11so919210rne
        for <java-user@lucene.apache.org>; Mon, 15 Aug 2005 15:16:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Pupqyn5vxqp5UrCgXYDoODUMhvfQ9771KsnyM1QxCJZOZQw9zsJBKVgSlE2k68ixGj+BD6X/Faofb23cxdrEqBhMG0bsXgl6pDqkS8lxlnbPGpDshAl9dpo5PooaDAHqmpVi2+yploVFEh0rXk8904Pxynp7JJhvFqasLstV4/k=
Received: by 10.38.207.19 with SMTP id e19mr2083550rng;
        Mon, 15 Aug 2005 15:16:11 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Mon, 15 Aug 2005 15:16:11 -0700 (PDT)
Message-ID: <c68e391705081515163446eda4@mail.gmail.com>
Date: Mon, 15 Aug 2005 18:16:11 -0400
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: intra-word delimiters
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does anyone have solutions for handling intraword delimiters (case
changes, non-alphanumeric chars, and alpha-numeric transitions)?

If the source text is Wi-Fi, we want to be able to match the following
user queries:

wi fi
wifi
wi-fi
wi+fi
WiFi

One way is to index "wi", "fi", and "wifi".
However, indexing all combinations of subwords gets a bit messy when
the number of subwords gets larger.  I need to handle product names,
serial numbers, SKUs, etc.

Another example:
Source Text contains "Canon Powershot SD500 7MP Digital Elph"

And I want to be able to match the following user queries:
Power Shot SD 500
CanonPowerShotSD500
SD 500 7 MP digitalelph
Canon-Powershot-SD 500

Any ideas?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 23:33:35 2005
Return-Path: <java-user-return-15871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15494 invoked from network); 15 Aug 2005 23:33:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 23:33:35 -0000
Received: (qmail 92302 invoked by uid 500); 15 Aug 2005 23:33:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92271 invoked by uid 500); 15 Aug 2005 23:33:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92258 invoked by uid 99); 15 Aug 2005 23:33:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 16:33:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 16:33:50 -0700
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP
	id 17AA624BF; Mon, 15 Aug 2005 19:33:28 -0400 (EDT)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id C19641549; Mon, 15 Aug 2005 19:33:27 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP
	id 9BE651514; Mon, 15 Aug 2005 19:33:27 -0400 (EDT)
Date: Mon, 15 Aug 2005 19:33:27 -0400 (EDT)
From: Ben Litchfield <ben@csh.rit.edu>
To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
Subject: Re: Integrating lucene search with adobe search
In-Reply-To: <28158767.1124113929856.JavaMail.root@mswamui-blood.atl.sa.earthlink.net>
Message-ID: <Pine.GSO.4.53.0508151931070.7793@fury.csh.rit.edu>
References: <28158767.1124113929856.JavaMail.root@mswamui-blood.atl.sa.earthlink.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Andrew,

There are a couple different open parameters that can be passed in when
opening a PDF.  See
http://partners.adobe.com/public/developer/en/acrobat/PDFOpenParameters.pdf
for the complete specification but an example for a url would be

http://www.pdfbox.org/index.pdf#search="pdfbox"

It also possible to pass it in when opening from the command line.

Ben Litchfield

On Mon, 15 Aug 2005, Andrew Boyd wrote:

> Hello all,
>   After I do my search and display the hits I get back I would like to pass the seach string that I used with lucene to acrobat reader when it opens.  Has any one done this or has anyone seen any documents on how to do it?
>
> Thanks,
>
> Andrew
>
> Andrew Boyd
> Software Architect
> Sun Certified J2EE Architect
> B&B Technical Services Inc.
> 205.422.2557
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 15 23:54:07 2005
Return-Path: <java-user-return-15872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19143 invoked from network); 15 Aug 2005 23:54:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Aug 2005 23:54:06 -0000
Received: (qmail 11603 invoked by uid 500); 15 Aug 2005 23:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11578 invoked by uid 500); 15 Aug 2005 23:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11565 invoked by uid 99); 15 Aug 2005 23:54:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 16:54:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 16:54:22 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1E4opd-000OrR-1R
	for java-user@lucene.apache.org; Mon, 15 Aug 2005 16:57:29 -0700
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <c68e391705081515163446eda4@mail.gmail.com>
References: <c68e391705081515163446eda4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <CA96854C-F6FD-483D-A1E1-2FC12D2FFFB0@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: intra-word delimiters
Date: Mon, 15 Aug 2005 16:53:59 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 15, 2005, at 3:16 PM, Yonik Seeley wrote:

> Another example:
> Source Text contains "Canon Powershot SD500 7MP Digital Elph"
>
> And I want to be able to match the following user queries:
> Power Shot SD 500
> CanonPowerShotSD500
> SD 500 7 MP digitalelph
> Canon-Powershot-SD 500
>
> Any ideas?

How about this?

1) Lowercase.
2) Convert non-alphanumeric characters to spaces.
3) Introduce a space at every boundary between a letter and a number.
4) concatenate all 1, 2, 3 .. n term combinations and index them.
5) Don't stem.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 16 02:47:07 2005
Return-Path: <java-user-return-15873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54339 invoked from network); 16 Aug 2005 02:47:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2005 02:47:06 -0000
Received: (qmail 39626 invoked by uid 500); 16 Aug 2005 02:47:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39593 invoked by uid 500); 16 Aug 2005 02:47:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39580 invoked by uid 99); 16 Aug 2005 02:47:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 19:47:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO rproxy.gmail.com) (64.233.170.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 19:47:22 -0700
Received: by rproxy.gmail.com with SMTP id g11so947255rne
        for <java-user@lucene.apache.org>; Mon, 15 Aug 2005 19:47:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kVStB8o+YR0NakTX6+EjaVIjMuKWNFNyau7QpkRY3GSFU7KRPlu6O8pNQgGucfanhAzBYpv4zlPkPin3ZFxqgGJG7+iQKuBdMxQaa/DHeVWaCSSbJemhzM71ePKr3z5kWyDoqIXkAof+E9YRpFFrzGy5EGvIo0VH6kASNErNlXA=
Received: by 10.38.9.11 with SMTP id 11mr2148056rni;
        Mon, 15 Aug 2005 19:47:01 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Mon, 15 Aug 2005 19:47:00 -0700 (PDT)
Message-ID: <c68e3917050815194730ac00bb@mail.gmail.com>
Date: Mon, 15 Aug 2005 22:47:00 -0400
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: intra-word delimiters
In-Reply-To: <CA96854C-F6FD-483D-A1E1-2FC12D2FFFB0@rectangular.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <c68e391705081515163446eda4@mail.gmail.com>
	 <CA96854C-F6FD-483D-A1E1-2FC12D2FFFB0@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That was the plan, but step (4) really seems problematic.

- term expansion this way can lead to a lot of false matches
- phrase queries with many bordering words break
- settingt term positions such that phrase queries work on all combos
of subwords is non-trivial.

It seems like a better approach might be a new query type that can
handle things like this.

As an example, consider a-b-c-d (4 subwords)... one way of indexing
the tokens would be:

Pos0: a
Pos1: b,  ab,  a
Pos2: c,  bc,  abc,  cd
Pos3: d,  abcd

There are only 10 uniqe tokens n(n/2+1/2), but I needed to index 11 in
order to satisfy all possible phrase queries of catenated subwords.=20
Notice how many other things will now match though (ac, aab,
aababcabcd, etc).

In addition, any algorithm I come up with to generate those term
position uses even more terms than the hand-generated one above.

By using index expansion in this manner, we have lost info about the
original ordering.  A new type of fuzzy phrase query seems like it
might be able to do a better job in many circumstances.

-Yonik


On 8/15/05, Marvin Humphrey <marvin@rectangular.com> wrote:
> 1) Lowercase.
> 2) Convert non-alphanumeric characters to spaces.
> 3) Introduce a space at every boundary between a letter and a number.
> 4) concatenate all 1, 2, 3 .. n term combinations and index them.
> 5) Don't stem.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 16 03:54:01 2005
Return-Path: <java-user-return-15874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70347 invoked from network); 16 Aug 2005 03:54:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2005 03:54:01 -0000
Received: (qmail 92343 invoked by uid 500); 16 Aug 2005 03:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92312 invoked by uid 500); 16 Aug 2005 03:53:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92299 invoked by uid 99); 16 Aug 2005 03:53:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 20:53:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 20:54:15 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1E4sZq-000P87-3I
	for java-user@lucene.apache.org; Mon, 15 Aug 2005 20:57:26 -0700
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <c68e3917050815194730ac00bb@mail.gmail.com>
References: <c68e391705081515163446eda4@mail.gmail.com> <CA96854C-F6FD-483D-A1E1-2FC12D2FFFB0@rectangular.com> <c68e3917050815194730ac00bb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3633D3B6-9B32-42DA-A6C1-5B9511F7DF13@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: intra-word delimiters
Date: Mon, 15 Aug 2005 20:53:52 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 15, 2005, at 7:47 PM, Yonik Seeley wrote:

> That was the plan, but step (4) really seems problematic.
>
> - term expansion this way can lead to a lot of false matches
> - phrase queries with many bordering words break
> - settingt term positions such that phrase queries work on all combos
> of subwords is non-trivial.

Tag every term with its length in tokens.  :)

Index at these positions.

Pos0: a ab abc abcd
Pos1: b bc bcd
Pos2: c cd
Pos3: d

Create a phrase query that when it encounters ab => { tokenlength =>  
2 } knows to look for something at position 3.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 16 03:56:41 2005
Return-Path: <java-user-return-15875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70635 invoked from network); 16 Aug 2005 03:56:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2005 03:56:41 -0000
Received: (qmail 95244 invoked by uid 500); 16 Aug 2005 03:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94410 invoked by uid 500); 16 Aug 2005 03:56:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94397 invoked by uid 99); 16 Aug 2005 03:56:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 20:56:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 20:56:56 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1E4scR-000P8k-ET
	for java-user@lucene.apache.org; Mon, 15 Aug 2005 21:00:07 -0700
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <3633D3B6-9B32-42DA-A6C1-5B9511F7DF13@rectangular.com>
References: <c68e391705081515163446eda4@mail.gmail.com> <CA96854C-F6FD-483D-A1E1-2FC12D2FFFB0@rectangular.com> <c68e3917050815194730ac00bb@mail.gmail.com> <3633D3B6-9B32-42DA-A6C1-5B9511F7DF13@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4E6D09B9-FB09-4136-BA4A-47D0B97CD574@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: intra-word delimiters
Date: Mon, 15 Aug 2005 20:56:33 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 15, 2005, at 8:53 PM, Marvin Humphrey wrote:

> Create a phrase query that when it encounters ab => { tokenlength  
> => 2 } knows to look for something at position 3.

Fencepost error!  That should have been "position 2".

Not that correcting the error makes the algo any more practical.  ;)

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 16 04:06:58 2005
Return-Path: <java-user-return-15876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77495 invoked from network); 16 Aug 2005 04:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2005 04:06:58 -0000
Received: (qmail 746 invoked by uid 500); 16 Aug 2005 04:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 716 invoked by uid 500); 16 Aug 2005 04:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 702 invoked by uid 99); 16 Aug 2005 04:06:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 21:06:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.93.150.34] (HELO mail.dessci.com) (66.93.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Aug 2005 21:07:13 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C5A218.36443362"
Subject: RE: intra-word delimiters
Date: Mon, 15 Aug 2005 21:08:52 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD63BBC05@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <D1EFB337111B674B8F1BE155B01C6DD63BBC05@franklin.corp.dessci>
Thread-Topic: intra-word delimiters
thread-index: AcWiDRphvWg4nzm9Qv6yI/NaWo0SxwACHEBG
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5A218.36443362
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

How about this....

(1) Follow the first three steps mentioned by Marvin
(2) For step 4 instead of trying to come up with all concatenation, =
create concatenations of 3 words

For example an entity of length n, W1 W2 W3....Wn will have the index =
positions as follows

Index Position   Value
0                W1W2W3
                 W1W2
                 W1
1                W2W3W4
                 W2W3
                 W4

and so on...

(3) At the time of querying follow the steps 1 and 2 to create the query =
terms with respective BOOST levels as follows....
QUERY: Power Shot SD 500
PROCESSED QUERY: power shot sd 500

Query Terms ORed:
powershotsd^3, powershot^2, power
shotsd500^3, shotsd^2, shot
sd500^2, sd
500

QUERY: CanonPowerShotSD500
PROCESSED QUERY: canonpowershotsd 500
Query Terms ORed:
canonpowershotsd500^2, canonpowershotsd

QUERY: Canon-Powershot-SD 500
PROCESSED QUERY: canon powershot sd 500
Query Terms ORed:
canonpowershotsd^3, canonpowershot^2, canon
powershotsd500^3, powershotsd^2, powershot
sd500^2, sd
500

Hopefully 3 grams should be good enough to capture enough information to =
retrieve useful documents. You can adjust the boost levels and assess =
the performance.

Hope it helps...

Rajesh Munavalli


-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]
Sent: Mon 8/15/2005 7:47 PM
To: java-user@lucene.apache.org
Subject: Re: intra-word delimiters
=20
That was the plan, but step (4) really seems problematic.

- term expansion this way can lead to a lot of false matches
- phrase queries with many bordering words break
- settingt term positions such that phrase queries work on all combos
of subwords is non-trivial.

It seems like a better approach might be a new query type that can
handle things like this.

As an example, consider a-b-c-d (4 subwords)... one way of indexing
the tokens would be:

Pos0: a
Pos1: b,  ab,  a
Pos2: c,  bc,  abc,  cd
Pos3: d,  abcd

There are only 10 uniqe tokens n(n/2+1/2), but I needed to index 11 in
order to satisfy all possible phrase queries of catenated subwords.=20
Notice how many other things will now match though (ac, aab,
aababcabcd, etc).

In addition, any algorithm I come up with to generate those term
position uses even more terms than the hand-generated one above.

By using index expansion in this manner, we have lost info about the
original ordering.  A new type of fuzzy phrase query seems like it
might be able to do a better job in many circumstances.

-Yonik


On 8/15/05, Marvin Humphrey <marvin@rectangular.com> wrote:
> 1) Lowercase.
> 2) Convert non-alphanumeric characters to spaces.
> 3) Introduce a space at every boundary between a letter and a number.
> 4) concatenate all 1, 2, 3 .. n term combinations and index them.
> 5) Don't stem.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C5A218.36443362
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C5A218.36443362--

From java-user-return-15877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 16 10:55:21 2005
Return-Path: <java-user-return-15877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96786 invoked from network); 16 Aug 2005 10:55:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2005 10:55:20 -0000
Received: (qmail 58212 invoked by uid 500); 16 Aug 2005 10:55:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58181 invoked by uid 500); 16 Aug 2005 10:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58168 invoked by uid 99); 16 Aug 2005 10:55:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 03:55:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 03:55:35 -0700
Received: by wproxy.gmail.com with SMTP id 55so1158969wri
        for <java-user@lucene.apache.org>; Tue, 16 Aug 2005 03:55:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CLYz/o/OhNSHcQOzmSR2CQZYdNZy8pmGfkhfllo8jay2mWE1I3Vzdz745uNfn+jqm/kdOu8M7dcn8c1y6aSjsv3YfXpNf1UW5kKr1+95QvUNWUTNwAlT5t0JlVyEk6JdlZyl22RF4GeasKBw2GqqBSGctzYukLoEbqX7ljLOKYo=
Received: by 10.54.47.74 with SMTP id u74mr4230451wru;
        Tue, 16 Aug 2005 03:55:13 -0700 (PDT)
Received: by 10.54.147.18 with HTTP; Tue, 16 Aug 2005 03:55:13 -0700 (PDT)
Message-ID: <1cbd6f83050816035544a03770@mail.gmail.com>
Date: Tue, 16 Aug 2005 06:55:13 -0400
From: Mag Gam <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Integrate Lucene with Derby
In-Reply-To: <7ca1239105081321071a971a33@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1cbd6f83050813151511147bf5@mail.gmail.com>
	 <7ca123910508131526e689909@mail.gmail.com>
	 <1cbd6f83050813205258d7e6ae@mail.gmail.com>
	 <7ca1239105081321071a971a33@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thanks for looking into it. Yes, I do agree DERBY is very easy to use
and get started.

I am looking for a solution more on the line of tsearch2=20
(http://www.google.com/url?sa=3Dt&ct=3Dres&cd=3D1&url=3Dhttp%3A//www.sai.ms=
u.su/%7Emegera/postgres/gist/tsearch/V2/&ei=3DzcUBQ9aGCYmm-gGPr9DcAg)

I guess all we need is a data type of vector=20

for example:

        SELECT 'Our first string used today'::tsvector;
                        tsvector
        ---------------------------------------
         'Our' 'used' 'first' 'today' 'string'
        (1 row)



On 8/14/05, jian chen <chenjian1227@gmail.com> wrote:
> I just downloaded a copy of the derby binary and successfully run the
> simple example java program. It seems derby is extremely easy to use
> as an embeded java database engine.
>=20
> This gave me some confidence that I could integrate Lucene with Derby
> and possibly Jetty server, to make a complete java based solution for
> a hobby search project.
>=20
> I will post more regarding this integration as I go along.
>=20
> Cheers,
>=20
> Jian
> www.jhsystems.net
>=20
> On 8/13/05, Mag Gam <magawake@gmail.com> wrote:
> > yes. I have been looking for solutions for a while now. I am not too
> > good with Java but I am learning it...
> >
> > I have asked the kind people of Derby-users, and they say there is no
> > solution for this yet.
> >
> > I guess we can ask the people on the -developer list....
> >
> >
> > On 8/13/05, jian chen <chenjian1227@gmail.com> wrote:
> > > Hi,
> > >
> > > I am also interested in that. I haven't used Derby before, but it
> > > seems the java database of choice as it is open source and a full
> > > relational database.
> > >
> > > I plant to learn the simple usage of Derby and then think about
> > > integrating Derby with Lucene.
> > >
> > > May we should post our progress for the integration and various
> > > schemes of integration in this thread or somewhere else?
> > >
> > > Thanks,
> > >
> > > Jian
> > >
> > > On 8/13/05, Mag Gam <magawake@gmail.com> wrote:
> > > > Are there any documens or plans to integrate Lucene With Apache Der=
by
> > > > (database)?
> > > >
> > > > -------------------------------------------------------------------=
--
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 16 20:12:46 2005
Return-Path: <java-user-return-15878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25871 invoked from network); 16 Aug 2005 20:12:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Aug 2005 20:12:46 -0000
Received: (qmail 28172 invoked by uid 500); 16 Aug 2005 20:12:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28154 invoked by uid 500); 16 Aug 2005 20:12:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28133 invoked by uid 99); 16 Aug 2005 20:12:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 13:12:40 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.48] (HELO pop03.mail.atl.earthlink.net) (207.69.200.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 13:13:00 -0700
Received: from mswamui-valley.atl.sa.earthlink.net ([209.86.224.52])
	by pop03.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E57na-0005AF-00
	for java-user@lucene.apache.org; Tue, 16 Aug 2005 16:12:38 -0400
Message-ID: <4627147.1124223158314.JavaMail.root@mswamui-valley.atl.sa.earthlink.net>
Date: Tue, 16 Aug 2005 15:12:38 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: Integrating lucene search with adobe search
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Ben!

-----Original Message-----
From: Ben Litchfield <ben@csh.rit.edu>
Sent: Aug 15, 2005 6:33 PM
To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
Subject: Re: Integrating lucene search with adobe search


Andrew,

There are a couple different open parameters that can be passed in when
opening a PDF.  See
http://partners.adobe.com/public/developer/en/acrobat/PDFOpenParameters.pdf
for the complete specification but an example for a url would be

http://www.pdfbox.org/index.pdf#search="pdfbox"

It also possible to pass it in when opening from the command line.

Ben Litchfield

On Mon, 15 Aug 2005, Andrew Boyd wrote:

> Hello all,
>   After I do my search and display the hits I get back I would like to pass the seach string that I used with lucene to acrobat reader when it opens.  Has any one done this or has anyone seen any documents on how to do it?
>
> Thanks,
>
> Andrew
>
> Andrew Boyd
> Software Architect
> Sun Certified J2EE Architect
> B&B Technical Services Inc.
> 205.422.2557
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 02:39:07 2005
Return-Path: <java-user-return-15879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59520 invoked from network); 17 Aug 2005 02:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 02:39:07 -0000
Received: (qmail 68043 invoked by uid 500); 17 Aug 2005 02:39:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67921 invoked by uid 500); 17 Aug 2005 02:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67886 invoked by uid 99); 17 Aug 2005 02:39:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 19:39:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO zproxy.gmail.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 19:39:21 -0700
Received: by zproxy.gmail.com with SMTP id n29so58182nzf
        for <java-user@lucene.apache.org>; Tue, 16 Aug 2005 19:38:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=B8W/Jy1ONEFfFBlpFNxfKKyxw/YAG0lHDsf6GE9W77/IgSpmdw30NTdnVRrMwP778Awglktkklm+5Y2AKXO5Y1fz9YDc6/A/ElH2zOLzQv0fdGbqZPFZMJ7vSiPyPBabpo2nrTJNopMC3J50mc3YaZSaM3Z8rn3MmyOoRhMgIoY=
Received: by 10.36.146.20 with SMTP id t20mr122300nzd;
        Tue, 16 Aug 2005 19:38:59 -0700 (PDT)
Received: by 10.36.10.11 with HTTP; Tue, 16 Aug 2005 19:38:59 -0700 (PDT)
Message-ID: <8837fb77050816193852988e4d@mail.gmail.com>
Date: Tue, 16 Aug 2005 19:38:59 -0700
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()
In-Reply-To: <Pine.LNX.4.58.0508121114370.2229@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <9AA035F30CE9E54C80FD4901E402F49C03D428A2@MAIL1.cen.csin.cz>
	 <Pine.LNX.4.58.0508121114370.2229@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Under many usecases a date field is often indexed. If the granularity
of the date value is in milliseconds, the number of unique terms in
the index could potentially be huge.

So if this is indeed the case, it is a potential scalability
bottleneck in lucene index size.

Thanks

-John

On 8/12/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>=20
> Okay, just for the record, I'm currently on vacation, and i don't have
> access to any of my indexes at work in order to make a comparison, but th=
e
> number of unique terms in your index (which is i'm 99% sure what
> indexEnum.size represents in the code you cited) seems HUGE!!!
>=20
> You havne't given us a lot of details about what your index contains (ie:
> the nature of the documents) .. in fact, for the number of terms you cite
> (811806819) the only info we have is that the index containing that numbe=
r
> of terms is 29MB in size -- no idea how many documents are in that index.
> But if we look at your previous email, you mentioend having a nother inde=
x
> that cuases the same problem which is 120MB, which you built from 11359
> files.  If we assume that index has no more then the same number of uniqu=
e
> terms indexed (which seems unlikely, but lets give it the benefit of the
> doubt, and assume the added size is all stored fields) and assume that yo=
u
> made one document per file, and that those files are 100% unique from eac=
h
> other, and contain no terms in common -- that means that each file
> contains roughtly 71,500 unique terms.
>=20
> that seems like a lot.
>=20
> A quick google search tells me that the english language contains
> somewhere from 500,000 to 1,000,000 words - your index has 800 times that
> many terms.  even assuming you index a lot of numerical or date based dat=
a
> -- that seems like a lot.
>=20
> I have to wonder if maybe you are indexing a lot of junk information by
> mistake - perhaps some binary data is mistakenly getting treated as
> strings?
>=20
> can you tell us more about the nature of your indexes?
>=20
>=20
> : Date: Fri, 12 Aug 2005 09:45:40 +0200
> : From: Trezzi Michael <MTrezzi@CSAS.CZ>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: RE: OutOfMemoryError on addIndexes()
> :
> : I did some more research and these are the results.
> :  The OutOfMemory occurs on line 82 of class TermInfosReader.java. That
> : and two other lines are trying to create an array of the size that is
> : get by the
> L
> : int indexSize =3D (int)indexEnum.size;
> :
> : For my 29MB index this indexSize integer is 811806819. So if creating 3
> : arrays of this size (line 82-84) it requires and enormous amount of
> : memory, e.g. a model situation...a char array...char has 2 bytes *
> : 811806819 =3D> 1584MB. That seems to be a little much and objects creat=
ed
> : in those arrays Term, TermInfo and long are definately not simple chars=
.
> : This way I would need several gigabytes of memory to merge several even
> : small (30MB) indexes. Is this the standard way how it works, or is ther=
e
> : a problem on my side?
> :
> : Thanks,
> :
> : Michael
> :
> : ________________________________
> :
> : Od: Ian Lea [mailto:ian.lea@gmail.com]
> : Odesl=E1no: st 10.8.2005 12:34
> : Komu: java-user@lucene.apache.org
> : P?edm?t: Re: OutOfMemoryError on addIndexes()
> :
> :
> :
> : How much memory are you giving your programs?
> :
> :  java    -Xmx<size>        set maximum Java heap size
> :
> : --
> : Ian.
> :
> : On 10/08/05, Trezzi Michael <MTrezzi@csas.cz> wrote:
> : > Hello,
> : > I have a problem and i tried everything i could think of to solve it.=
 TO understand my situation, i create indexes on several computers on our n=
etwork and they are copied to one server. There, once a day, they are merge=
d into one masterIndex, which is then searched. The problem is in merging. =
I use the following code:
> : >
> : > Directory[] ar =3D new Directory[fileList.length];
> : >        for(int i=3D0; i<fileList.length;i++) {
> : >            ar[i] =3D FSDirectory.getDirectory(fileList[i], false);
> : >        }
> : >        writer.addIndexes(ar);
> : >        for(int i=3D0; i<fileList.length;i++) {
> : >            ar[i].close();
> : >        }
> : >       writer.optimize();
> : >       writer.close();
> : >
> : > I also tried a longer way of opening every index separately and addin=
g it document by document. The problem is i am getting OutOfMemory errors o=
n this. When I use the per document way, it happens on the IndexReader.open=
 command and only on indexes of approx 100M+ (The largest index I have is o=
nly about 150MB) When I run it on windows machine with JDK1.5 I get the fol=
lowing:
> : >     Exception in thread "main" java.lang.OutOfMemoryError: Requested =
array size exceeds VM limit
> : > On Linux I am running 1.4 and I get the message without the Array siz=
e information.
> : >
> : > I did try it also on test index that was made from 11359 files  (1,59=
GB) that had 120MB and I got this error too. In my opinion 120MB index is n=
ot that big. The machine it runs on is a Xeon 3,2GHz with 2GB of RAM, so it=
 should be enough. Can you please help me?
> : >
> : > Thank you in advance,
> : >
> : > Michael Trezzi
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> :
> :
> :
> :
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 02:46:24 2005
Return-Path: <java-user-return-15880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60572 invoked from network); 17 Aug 2005 02:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 02:46:24 -0000
Received: (qmail 71487 invoked by uid 500); 17 Aug 2005 02:46:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71458 invoked by uid 500); 17 Aug 2005 02:46:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71445 invoked by uid 99); 17 Aug 2005 02:46:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 19:46:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 19:46:40 -0700
Received: by zproxy.gmail.com with SMTP id n29so58770nzf
        for <java-user@lucene.apache.org>; Tue, 16 Aug 2005 19:46:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ZxdfXmMU9lAW1BL5+WKYGflWCx1elG9IFS+huwKtdyxTB+8nrUavg6w3CLj/MEG4sdCmXawNIuoITqffDQKdvEYTdJJH6zC2xM+4GX9Y69GHxKdD4b5JYeIBmw9JTTMQUSBy+6eDUFHbDXiduHrqiAVuzEqW+EoC86WVvFqj4Dc=
Received: by 10.36.158.12 with SMTP id g12mr120721nze;
        Tue, 16 Aug 2005 19:46:19 -0700 (PDT)
Received: by 10.36.10.11 with HTTP; Tue, 16 Aug 2005 19:46:19 -0700 (PDT)
Message-ID: <8837fb7705081619464dbf95c2@mail.gmail.com>
Date: Tue, 16 Aug 2005 19:46:19 -0700
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: search performance enhancement
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi:

   I posted a bug (36147) a few days ago and didn't hear anything, so
I thought I'd try my luck on this list.

   The idea is to avoid score calculations on documents to be filtered
out anyway. (e.g. via Filter object passed to the searcher class)

   This seems to be an easy change.

   Also it would be nice to expose a method to return a score given a
docid, e.g.

   float getScore(int docid)

   on the Scorer class.

   I am gonna make the change locally and do some performance analysis
on it and will post some numbers later.

Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 06:44:40 2005
Return-Path: <java-user-return-15881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19149 invoked from network); 17 Aug 2005 06:44:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 06:44:16 -0000
Received: (qmail 27937 invoked by uid 500); 17 Aug 2005 06:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27900 invoked by uid 500); 17 Aug 2005 06:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27886 invoked by uid 99); 17 Aug 2005 06:44:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 23:44:11 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Aug 2005 23:44:30 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7H6i7Xs096953
	for <java-user@lucene.apache.org>; Wed, 17 Aug 2005 08:44:08 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: search performance enhancement
Date: Wed, 17 Aug 2005 08:44:09 +0200
User-Agent: KMail/1.5.4
References: <8837fb7705081619464dbf95c2@mail.gmail.com>
In-Reply-To: <8837fb7705081619464dbf95c2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508170844.09122.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi John,

On Wednesday 17 August 2005 04:46, John Wang wrote:
> Hi:
> 
>    I posted a bug (36147) a few days ago and didn't hear anything, so
> I thought I'd try my luck on this list.
> 
>    The idea is to avoid score calculations on documents to be filtered
> out anyway. (e.g. via Filter object passed to the searcher class)
> 
>    This seems to be an easy change.

Have a look here:
http://issues.apache.org/bugzilla/show_bug.cgi?id=32965

>    Also it would be nice to expose a method to return a score given a
> docid, e.g.
> 
>    float getScore(int docid)
> 
>    on the Scorer class.

skipTo(int docid) and score() will do that.
 
>    I am gonna make the change locally and do some performance analysis
> on it and will post some numbers later.

The default score computations are mostly table lookups, and pretty fast.
So, unless you have large indexes, this will probably not make
much difference, but any performance improvement is wellcome.
In larger indexes, it helps to use skipTo() while searching.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 08:19:16 2005
Return-Path: <java-user-return-15882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48651 invoked from network); 17 Aug 2005 08:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 08:19:16 -0000
Received: (qmail 17311 invoked by uid 500); 17 Aug 2005 08:19:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17288 invoked by uid 500); 17 Aug 2005 08:19:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17268 invoked by uid 99); 17 Aug 2005 08:19:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 01:19:11 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_MESSAGE,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Aug 2005 01:19:30 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ILCTYR00.KVY for <java-user@lucene.apache.org>; Wed, 17
          Aug 2005 12:26:51 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: DEFAULT_OPERATOR_AND
Date: Wed, 17 Aug 2005 12:15:58 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKOECCCFAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0000_01C5A325.6CAD47A0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C5A325.6CAD47A0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0001_01C5A325.6CAD47A0"


------=_NextPart_001_0001_01C5A325.6CAD47A0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit



Hi  Lucener's

Apologies..........

I have seen forms using  'DEFAULT_OPERATOR_AND'  with  something like below

 > QueryParser parser = new QueryParser( "terms", analyzer);
 > parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
 > query = parser.parse(TextParameters);

How to use the DEFAULT_OPERATOR_AND  when using MultiFieldQueryParser  as
below

"query = MultiFieldQueryParser.parse("text",fields,analyzer);" ?

[ I also searched the other Form's for same but no answers.]

Thx in advance
Karthik




























WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0001_01C5A325.6CAD47A0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><SPAN class=3D765313806-17082005><FONT face=3DVerdana =
size=3D2><STRONG>Hi&nbsp;=20
Lucener's</STRONG></FONT></SPAN></P>
<P><SPAN class=3D765313806-17082005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies..........</FONT></STRONG></SPAN></P>
<P><SPAN class=3D765313806-17082005><FONT face=3DVerdana =
size=3D2><STRONG>I have seen=20
forms using&nbsp;<!--StartFragment --></STRONG><FONT size=3D3> =
</FONT><FONT=20
size=3D2><STRONG>'</STRONG><STRONG>DEFAULT_OPERATOR_AND'&nbsp; =
with&nbsp;=20
something like below<BR></STRONG></FONT></FONT></SPAN><SPAN=20
class=3D765313806-17082005><FONT face=3DVerdana =
size=3D2><STRONG><BR>&nbsp;&gt;=20
QueryParser parser =3D new QueryParser( "terms", analyzer); =
<BR>&nbsp;&gt;=20
parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND); <BR>&nbsp;&gt; =
query =3D=20
parser.parse(TextParameters);</STRONG></P></FONT></SPAN>
<P><SPAN class=3D765313806-17082005><FONT face=3DVerdana =
size=3D2><STRONG>How to use=20
the DEFAULT_OPERATOR_AND&nbsp; when =
using&nbsp;MultiFieldQueryParser&nbsp; as=20
below</STRONG></FONT></SPAN></P>
<P><SPAN class=3D765313806-17082005><FONT face=3DVerdana =
size=3D2><STRONG><FONT=20
size=3D2><FONT size=3D2>"query =3D=20
MultiFieldQueryParser.parse("text",fields,analyzer);"=20
?</FONT></FONT></STRONG></FONT></SPAN></P>
<P><SPAN class=3D765313806-17082005><FONT face=3DVerdana =
size=3D2><STRONG><FONT=20
size=3D2>[ I also searched the other&nbsp;Form's for same but no=20
answers.]</FONT></STRONG></FONT></SPAN></P>
<P><SPAN class=3D765313806-17082005><FONT face=3DVerdana =
size=3D2><STRONG><FONT=20
size=3D2>Thx in advance<BR></FONT></STRONG></FONT></SPAN><SPAN=20
class=3D765313806-17082005><FONT face=3DVerdana size=3D2><STRONG><FONT=20
size=3D2>Karthik</P></FONT></STRONG></FONT></SPAN>
<P><SPAN class=3D765313806-17082005><FONT face=3DVerdana=20
size=3D2><STRONG></STRONG>&nbsp;</P></FONT></SPAN>
<P><SPAN class=3D765313806-17082005><STRONG><FONT face=3DVerdana=20
size=3D2></FONT></STRONG></SPAN>&nbsp;</P>
<P><SPAN class=3D765313806-17082005><STRONG><FONT face=3DVerdana=20
size=3D2></FONT></STRONG></SPAN>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><IMG height=3D85 src=3D"cid:765313806@17082005-1aea" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0001_01C5A325.6CAD47A0--

------=_NextPart_000_0000_01C5A325.6CAD47A0--


From java-user-return-15883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 17:50:24 2005
Return-Path: <java-user-return-15883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80819 invoked from network); 17 Aug 2005 17:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 17:50:23 -0000
Received: (qmail 98813 invoked by uid 500); 17 Aug 2005 17:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98788 invoked by uid 500); 17 Aug 2005 17:50:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98774 invoked by uid 99); 17 Aug 2005 17:50:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 10:50:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Aug 2005 10:50:36 -0700
Received: (qmail 9841 invoked by uid 0); 17 Aug 2005 17:50:14 -0000
Received: from 193.63.235.44 by www56.gmx.net with HTTP;
	Wed, 17 Aug 2005 19:50:14 +0200 (MEST)
Date: Wed, 17 Aug 2005 19:50:14 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?[Lucene_1.2]_Boolean_OR_on_all_query_terms?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <18010.1124301014@www56.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello experts,

I have the following code:

Query query = QueryParser.parse(queryString, searchFields[0], analyser);
Hits hits = searcher.search(query);

and the following code for search across multiple fields:

Query query = MultiFieldQueryParser.parse(queryString, searchFields,
analyser);
hits = searcher.search(query);

I have some questions. 

The query string in my application is of in a very simple format. Basically
a number of words are separated by spaces (e.g. "dog cat"). No additional
orperators (e.g. "+", OR, AND, etc. shall be used). But, I wand that all of
these terms are "OR"ed by default to maximise recall (the amount of
results). How can I do that with Lucene 1.2? (I am running the search engine
on a PDA which does not allow me to go beyong version 1.2. In the Lucene
Book I have found parser. I have found the setOperator(int operator) method
which however works only from Lucene 1.3 onwards. Can sombod help me out? 

If somebody knows how to make Lucene 1.3 run with Java 1.2.2, I am also
happy to hear about :-).

Kind Regards,
Karl

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 17:50:34 2005
Return-Path: <java-user-return-15884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80943 invoked from network); 17 Aug 2005 17:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 17:50:34 -0000
Received: (qmail 573 invoked by uid 500); 17 Aug 2005 17:50:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 542 invoked by uid 500); 17 Aug 2005 17:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 528 invoked by uid 99); 17 Aug 2005 17:50:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 10:50:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Aug 2005 10:50:47 -0700
Received: (qmail 19438 invoked by uid 0); 17 Aug 2005 17:50:25 -0000
Received: from 193.63.235.44 by www56.gmx.net with HTTP;
	Wed, 17 Aug 2005 19:50:25 +0200 (MEST)
Date: Wed, 17 Aug 2005 19:50:25 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?[Lucene_1.2]_Boolean_OR_on_all_query_terms?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <18534.1124301025@www56.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello experts,

I have the following code:

Query query = QueryParser.parse(queryString, searchFields[0], analyser);
Hits hits = searcher.search(query);

and the following code for search across multiple fields:

Query query = MultiFieldQueryParser.parse(queryString, searchFields,
analyser);
hits = searcher.search(query);

I have some questions. 

The query string in my application is of in a very simple format. Basically
a number of words are separated by spaces (e.g. "dog cat"). No additional
orperators (e.g. "+", OR, AND, etc. shall be used). But, I wand that all of
these terms are "OR"ed by default to maximise recall (the amount of
results). How can I do that with Lucene 1.2? (I am running the search engine
on a PDA which does not allow me to go beyong version 1.2. In the Lucene
Book I have found parser. I have found the setOperator(int operator) method
which however works only from Lucene 1.3 onwards. Can sombod help me out? 

If somebody knows how to make Lucene 1.3 run with Java 1.2.2, I am also
happy to hear about :-).

Kind Regards,
Karl

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 17:57:30 2005
Return-Path: <java-user-return-15885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84372 invoked from network); 17 Aug 2005 17:57:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 17:57:30 -0000
Received: (qmail 20944 invoked by uid 500); 17 Aug 2005 17:57:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20752 invoked by uid 500); 17 Aug 2005 17:57:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20641 invoked by uid 99); 17 Aug 2005 17:57:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 10:57:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Aug 2005 10:57:41 -0700
Received: (qmail 20837 invoked by uid 0); 17 Aug 2005 17:57:18 -0000
Received: from 193.63.235.44 by www56.gmx.net with HTTP;
	Wed, 17 Aug 2005 19:57:19 +0200 (MEST)
Date: Wed, 17 Aug 2005 19:57:19 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?[Lucene_1.2]_Change_the_Scoring=3F?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <7367.1124301439@www56.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Lucene experts,

I would like to insert my own scoring algorithm in Lucene 1.2 (I need to use
this old Lucene version due to hardware limitations (PDA and Java 1.2)). Has
somebody done things like that (eventually in the past) and can suggest
approaches and perhaps a code example? Workarounds or even examples in
Lucene 1.3 and 1.4?

I would be especially interested in anything related with comparing
different IR algorithms using Lucene as a framework.

Kind Regards,
Karl

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 17:58:23 2005
Return-Path: <java-user-return-15886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84809 invoked from network); 17 Aug 2005 17:58:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 17:58:23 -0000
Received: (qmail 23358 invoked by uid 500); 17 Aug 2005 17:58:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23337 invoked by uid 500); 17 Aug 2005 17:58:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23324 invoked by uid 99); 17 Aug 2005 17:58:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 10:58:18 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [141.99.1.42] (HELO mailf2.uni-siegen.de) (141.99.1.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 10:58:37 -0700
Received: from linux.site ([141.99.26.131]) by mailf2.uni-siegen.de with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 17 Aug 2005 19:58:05 +0200
Subject: saving additional data in the index .....????
From: Patricio Galeas <galeas@informatik.uni-siegen.de>
To: java-user@lucene.apache.org
In-Reply-To: <42F368B5.6090907@gmail.com>
References: <B5ADCC4EA669BF4697F6AF63FF32867401914EE6@exch01.allegro.med>
	 <42F368B5.6090907@gmail.com>
Content-Type: text/plain; charset=UTF-8
Organization: =?ISO-8859-1?Q?Universit=E4t?= Siegen
Date: Wed, 17 Aug 2005 19:57:25 +0200
Message-Id: <1124301445.13211.8.camel@linux.site>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.1 
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 17 Aug 2005 17:58:05.0397 (UTC) FILETIME=[37D1C850:01C5A355]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,
I have indexed a document collection using the option =E2=80=9CWITH_POSITIO=
NS=E2=80=9D:

doc.add(new Field("contents", new FileReader(f),
Field.TermVector.WITH_POSITIONS));

...to get the positions in which each of the terms is found:

wordPositionsVector =3D termPositionVector.getTermPositions(wordIndex) ;


Now I would like to include two statistical parameters in the =E2=80=9CLuce=
ne
Index=E2=80=9D containing additional information about the position of word=
s on
the document.
It is possible to modify a =E2=80=9CLucene class (document/Field.java????)=
=E2=80=9D to
save this additional information in the index?
My idea is to request the saved data later by the search process, ...
something like :

int[] wordPositionsStatistics =3D
termPositionVector.getTermPositionsStatistics(wordIndex)=20

Have somebody any idea?

thank you in advance.

Patricio



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 18:06:08 2005
Return-Path: <java-user-return-15887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89974 invoked from network); 17 Aug 2005 18:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 18:06:08 -0000
Received: (qmail 46532 invoked by uid 500); 17 Aug 2005 18:06:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46513 invoked by uid 500); 17 Aug 2005 18:06:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46500 invoked by uid 99); 17 Aug 2005 18:06:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 11:06:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Aug 2005 11:06:21 -0700
Received: (qmail 8457 invoked by uid 0); 17 Aug 2005 18:05:59 -0000
Received: from 193.63.235.44 by www56.gmx.net with HTTP;
	Wed, 17 Aug 2005 20:05:58 +0200 (MEST)
Date: Wed, 17 Aug 2005 20:05:58 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?Applied_Lucene:_Search_functionality_on_PDAs?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <32593.1124301958@www56.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I am developing code for Lucene 1.2 on a Sharp Zaurus using Java 1.1/1.2.
(Unfortunately I was not able to run version 1.3 on this setting.) Does
somebody know projects (eventually Open Source) also concerned with running
Lucene on platforms that only allow small footprint applications. 

Does anybody know mailinglists, forums, books, etc. with this topic?

Best Regards,
Karl

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 18:50:05 2005
Return-Path: <java-user-return-15888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4743 invoked from network); 17 Aug 2005 18:50:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 18:50:05 -0000
Received: (qmail 24583 invoked by uid 500); 17 Aug 2005 18:50:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24550 invoked by uid 500); 17 Aug 2005 18:50:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24535 invoked by uid 99); 17 Aug 2005 18:50:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 11:50:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Aug 2005 11:50:19 -0700
Received: (qmail 10161 invoked by uid 0); 17 Aug 2005 18:49:57 -0000
Received: from 193.63.235.44 by www56.gmx.net with HTTP;
	Wed, 17 Aug 2005 20:49:57 +0200 (MEST)
Date: Wed, 17 Aug 2005 20:49:57 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?Books_about_Lucene=3F?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <830.1124304597@www56.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are there any other books (despite "Lucene in Action") perhaps written in a
different perspective (e.g. different applications or problem areas)?

Karl

-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse fr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 19:34:16 2005
Return-Path: <java-user-return-15889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29037 invoked from network); 17 Aug 2005 19:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 19:34:15 -0000
Received: (qmail 19634 invoked by uid 500); 17 Aug 2005 19:34:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19613 invoked by uid 500); 17 Aug 2005 19:34:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19600 invoked by uid 99); 17 Aug 2005 19:34:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 12:34:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [131.167.253.61] (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 12:34:28 -0700
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <Y1F008Q8P3OKBD02WK@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Wed,
 17 Aug 2005 15:29:33 -0400 (Eastern Daylight Time)
Date: Wed, 17 Aug 2005 15:29:07 -0400
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: to filter or not to filter
To: Lucene Users List <java-user@lucene.apache.org>
Message-id: <43039003.1040302@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Currently I'm working with a single index where content is indexed by 
it's original printed page. I have to show the total number of matching 
documents, so I end up running through all the hits and taking an order 
of magnitude hit on performance as I calculate the number of unique 
documents.  It's stupid for many many reasons.

To correct all this, I've decided to create two (maybe three) indexes 
for the same set of documents: in the first index there is a one to one 
relationship between the original document and the Lucene Document 
object.  The other index is a paragraph index, where each lucene 
document represents a single paragraph.   I may even throw in a third 
index where each lucene document represents a logical section/chapter.

When I'm building the search results page I'll have to execute a fair 
number of queries. The first query will execute on the Document-Index, 
then for each of the 10 to 2o results I'm displaying at the time, I'll 
execute another query to find the best paragraph and or section.

Is this a reasonable solution to the problem? 

Thanks for the advice.
Dan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 20:02:38 2005
Return-Path: <java-user-return-15890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42205 invoked from network); 17 Aug 2005 20:02:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 20:02:37 -0000
Received: (qmail 76944 invoked by uid 500); 17 Aug 2005 20:02:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76912 invoked by uid 500); 17 Aug 2005 20:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76837 invoked by uid 99); 17 Aug 2005 20:02:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 13:02:32 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.34] (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Aug 2005 13:02:51 -0700
Received: (qmail 15168 invoked by uid 60001); 17 Aug 2005 20:02:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=T6N5+456N56e1TNGaEqGPgh3HnWtB4b3+hCm/26uqqtn7mMpUtQ33qXRdmtLFzXUo3nRAIWzTYIK+0f9xRnQz6tLJZUylvHiP/F2IqUDCgPs0rL8Cvwj502uu7UEnZSoM8XDETtr07mIb+Gulae8S0DY4+1KTN9CJCcMRQgF2RU=  ;
Message-ID: <20050817200229.15166.qmail@web31101.mail.mud.yahoo.com>
Received: from [69.201.142.21] by web31101.mail.mud.yahoo.com via HTTP; Wed, 17 Aug 2005 13:02:29 PDT
Date: Wed, 17 Aug 2005 13:02:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Books about Lucene?
To: java-user@lucene.apache.org
In-Reply-To: <830.1124304597@www56.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't know of any.
A search for "lucene" on Amazon.com will find a few other books, but as
far as I know, those books cover Lucene only briefly, in passing.

Otis


--- Karl Koch <TheRanger@gmx.net> wrote:

> Are there any other books (despite "Lucene in Action") perhaps
> written in a
> different perspective (e.g. different applications or problem areas)?
> 
> Karl
> 
> -- 
> 5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
> +++ GMX - die erste Adresse fr Mail, Message, More +++
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 20:36:37 2005
Return-Path: <java-user-return-15891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51941 invoked from network); 17 Aug 2005 20:36:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 20:36:37 -0000
Received: (qmail 39644 invoked by uid 500); 17 Aug 2005 20:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39623 invoked by uid 500); 17 Aug 2005 20:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39610 invoked by uid 99); 17 Aug 2005 20:36:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 13:36:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.74.127.3] (HELO svr.ftp1.com) (64.74.127.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 13:36:50 -0700
Received: from graphite by svr.ftp1.com with local (Exim 4.44)
	id 1E5UeB-0003Ei-Jt
	for java-user@lucene.apache.org; Wed, 17 Aug 2005 15:36:27 -0500
Received: from 192.223.163.5 ([192.223.163.5])
        (SquirrelMail authenticated user tony@simpleobjects.com)
        by www.simpleobjects.com with HTTP;
        Wed, 17 Aug 2005 16:36:27 -0400 (EDT)
Message-ID: <37406.192.223.163.5.1124310987.squirrel@www.simpleobjects.com>
Date: Wed, 17 Aug 2005 16:36:27 -0400 (EDT)
Subject: Re: OutOfMemoryError on addIndexes()
From: "Tony Schwartz" <tony@simpleobjects.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - svr.ftp1.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32036 808] / [47 12]
X-AntiAbuse: Sender Address Domain - simpleobjects.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Has anyone done any work on getting these types of terms or all terms for that matter
into a collection that spilled onto the disk if necessary to avoid this problem?  I'm
just wondering if anyone has had any luck without crippling the search speed.  This is
definitely a problem that has burned me in the past.  I am going to start working on and
testing a solution to this, but was wondering if anyone had already messed with it or
had any ideas up front?

Thanks,

Tony Schwartz
tony@simpleobjects.com





From: John Wang <john.wang@gmail.com>
Subject: Re: OutOfMemoryError on addIndexes()


--------------------------------------------------------------------------------

Under many usecases a date field is often indexed. If the granularity
of the date value is in milliseconds, the number of unique terms in
the index could potentially be huge.

So if this is indeed the case, it is a potential scalability
bottleneck in lucene index size.

Thanks

-John

On 8/12/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> Okay, just for the record, I'm currently on vacation, and i don't have
> access to any of my indexes at work in order to make a comparison, but the
> number of unique terms in your index (which is i'm 99% sure what
> indexEnum.size represents in the code you cited) seems HUGE!!!
>
> You havne't given us a lot of details about what your index contains (ie:
> the nature of the documents) .. in fact, for the number of terms you cite
> (811806819) the only info we have is that the index containing that number
> of terms is 29MB in size -- no idea how many documents are in that index.
> But if we look at your previous email, you mentioend having a nother index
> that cuases the same problem which is 120MB, which you built from 11359
> files.  If we assume that index has no more then the same number of unique
> terms indexed (which seems unlikely, but lets give it the benefit of the
> doubt, and assume the added size is all stored fields) and assume that you
> made one document per file, and that those files are 100% unique from each
> other, and contain no terms in common -- that means that each file
> contains roughtly 71,500 unique terms.
>
> that seems like a lot.
>
> A quick google search tells me that the english language contains
> somewhere from 500,000 to 1,000,000 words - your index has 800 times that
> many terms.  even assuming you index a lot of numerical or date based data
> -- that seems like a lot.
>

...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 20:49:45 2005
Return-Path: <java-user-return-15892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55921 invoked from network); 17 Aug 2005 20:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 20:49:44 -0000
Received: (qmail 60606 invoked by uid 500); 17 Aug 2005 20:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60586 invoked by uid 500); 17 Aug 2005 20:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60573 invoked by uid 99); 17 Aug 2005 20:49:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 13:49:38 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 13:49:57 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7HKnYiw075246
	for <java-user@lucene.apache.org>; Wed, 17 Aug 2005 22:49:34 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()
Date: Wed, 17 Aug 2005 22:49:34 +0200
User-Agent: KMail/1.5.4
References: <37406.192.223.163.5.1124310987.squirrel@www.simpleobjects.com>
In-Reply-To: <37406.192.223.163.5.1124310987.squirrel@www.simpleobjects.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508172249.34445.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 17 August 2005 22:36, Tony Schwartz wrote:
> Has anyone done any work on getting these types of terms or all terms for that matter
> into a collection that spilled onto the disk if necessary to avoid this problem?  I'm
> just wondering if anyone has had any luck without crippling the search speed.  This is
> definitely a problem that has burned me in the past.  I am going to start working on and
> testing a solution to this, but was wondering if anyone had already messed with it or
> had any ideas up front?
> 
> Thanks,
> 
> Tony Schwartz
> tony@simpleobjects.com
> 
> 
> 
> 
> 
> From: John Wang <john.wang@gmail.com>
> Subject: Re: OutOfMemoryError on addIndexes()
> 
> 
> --------------------------------------------------------------------------------
> 
> Under many usecases a date field is often indexed. If the granularity
> of the date value is in milliseconds, the number of unique terms in
> the index could potentially be huge.
> 
> So if this is indeed the case, it is a potential scalability
> bottleneck in lucene index size.

Splitting the date field into century, year in century, month, day, hour, seconds, and
milliseconds will reduce the total number of indexed terms to 2300 or so.
That's probably overdoing it a bit, but even a more crude split can
help to reduce the number of indexed terms quite drastically.
The downside is that you'll need to adapt searching for dates to
your indexed format.

Regards,
Paul Elschot

> 
> Thanks
> 
> -John
> 
> On 8/12/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> > Okay, just for the record, I'm currently on vacation, and i don't have
> > access to any of my indexes at work in order to make a comparison, but the
> > number of unique terms in your index (which is i'm 99% sure what
> > indexEnum.size represents in the code you cited) seems HUGE!!!
> >
> > You havne't given us a lot of details about what your index contains (ie:
> > the nature of the documents) .. in fact, for the number of terms you cite
> > (811806819) the only info we have is that the index containing that number
> > of terms is 29MB in size -- no idea how many documents are in that index.
> > But if we look at your previous email, you mentioend having a nother index
> > that cuases the same problem which is 120MB, which you built from 11359
> > files.  If we assume that index has no more then the same number of unique
> > terms indexed (which seems unlikely, but lets give it the benefit of the
> > doubt, and assume the added size is all stored fields) and assume that you
> > made one document per file, and that those files are 100% unique from each
> > other, and contain no terms in common -- that means that each file
> > contains roughtly 71,500 unique terms.
> >
> > that seems like a lot.
> >
> > A quick google search tells me that the english language contains
> > somewhere from 500,000 to 1,000,000 words - your index has 800 times that
> > many terms.  even assuming you index a lot of numerical or date based data
> > -- that seems like a lot.
> >
> 
> ...
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 17 20:54:27 2005
Return-Path: <java-user-return-15893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57327 invoked from network); 17 Aug 2005 20:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Aug 2005 20:54:27 -0000
Received: (qmail 70046 invoked by uid 500); 17 Aug 2005 20:54:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70025 invoked by uid 500); 17 Aug 2005 20:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70012 invoked by uid 99); 17 Aug 2005 20:54:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 13:54:22 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 13:54:41 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7HKsJgX063402
	for <java-user@lucene.apache.org>; Wed, 17 Aug 2005 22:54:19 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()
Date: Wed, 17 Aug 2005 22:54:18 +0200
User-Agent: KMail/1.5.4
References: <37406.192.223.163.5.1124310987.squirrel@www.simpleobjects.com> <200508172249.34445.paul.elschot@xs4all.nl>
In-Reply-To: <200508172249.34445.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508172254.18925.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 17 August 2005 22:49, Paul Elschot wrote:
> > the index could potentially be huge.
> > 
> > So if this is indeed the case, it is a potential scalability
> > bottleneck in lucene index size.
> 
> Splitting the date field into century, year in century, month, day, hour, seconds, and
> milliseconds will reduce the total number of indexed terms to 2300 or so.

1300 is closer, I forgot that I had split off the centuries.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 00:28:13 2005
Return-Path: <java-user-return-15894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13879 invoked from network); 18 Aug 2005 00:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 00:28:13 -0000
Received: (qmail 11037 invoked by uid 500); 18 Aug 2005 00:28:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10562 invoked by uid 500); 18 Aug 2005 00:28:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10549 invoked by uid 99); 18 Aug 2005 00:28:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 17:28:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 17:28:26 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E0D4413E2034; Wed, 17 Aug 2005 20:28:04 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 9DF6613E2033
	for <java-user@lucene.apache.org>; Wed, 17 Aug 2005 20:28:00 -0400 (EDT)
In-Reply-To: <830.1124304597@www56.gmx.net>
References: <830.1124304597@www56.gmx.net>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F498110A-A31D-4AD6-88A0-BF679349F276@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Books about Lucene?
Date: Wed, 17 Aug 2005 20:28:09 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 17, 2005, at 2:49 PM, Karl Koch wrote:
> Are there any other books (despite "Lucene in Action") perhaps  
> written in a
> different perspective (e.g. different applications or problem areas)?

To echo what Otis said - I don't know of any myself.

I'd be very interested to hear yours, and others, thoughts on what  
Lucene in Action 2nd edition should add/remove to its coverage.   
There are lots of topics that I've researched and worked on since  
that book that I think make sense to add, but community feedback will  
decide ultimately how LIA 2.0 unfolds.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 01:11:04 2005
Return-Path: <java-user-return-15895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20308 invoked from network); 18 Aug 2005 01:11:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 01:11:04 -0000
Received: (qmail 37668 invoked by uid 500); 18 Aug 2005 01:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37396 invoked by uid 500); 18 Aug 2005 01:10:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37380 invoked by uid 99); 18 Aug 2005 01:10:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 18:10:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 18:11:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7EF0E13E2007; Wed, 17 Aug 2005 21:10:56 -0400 (EDT)
Received: from [172.16.1.101] (unknown [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 5636613E2007
	for <java-user@lucene.apache.org>; Wed, 17 Aug 2005 21:10:51 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <43039003.1040302@battelle.org>
References: <43039003.1040302@battelle.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <840BD47E-75DC-4A3B-8E8D-17387D2E9A78@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: to filter or not to filter
Date: Wed, 17 Aug 2005 21:11:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 17, 2005, at 3:29 PM, Dan Funk wrote:
> Currently I'm working with a single index where content is indexed  
> by it's original printed page. I have to show the total number of  
> matching documents, so I end up running through all the hits and  
> taking an order of magnitude hit on performance as I calculate the  
> number of unique documents.  It's stupid for many many reasons.
>
> To correct all this, I've decided to create two (maybe three)  
> indexes for the same set of documents: in the first index there is  
> a one to one relationship between the original document and the  
> Lucene Document object.  The other index is a paragraph index,  
> where each lucene document represents a single paragraph.   I may  
> even throw in a third index where each lucene document represents a  
> logical section/chapter.
>
> When I'm building the search results page I'll have to execute a  
> fair number of queries. The first query will execute on the  
> Document-Index, then for each of the 10 to 2o results I'm  
> displaying at the time, I'll execute another query to find the best  
> paragraph and or section.
>
> Is this a reasonable solution to the problem?
> Thanks for the advice.

Just one design alternative - a Lucene index does not have to be  
homogenous in terms of the fields for a document.  So you could index  
all those various granularities into a single index with an  
additional field per document indicating whether it is a document,  
paragraph, or section/chapter.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 01:39:36 2005
Return-Path: <java-user-return-15896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37409 invoked from network); 18 Aug 2005 01:39:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 01:39:36 -0000
Received: (qmail 65444 invoked by uid 500); 18 Aug 2005 01:39:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65416 invoked by uid 500); 18 Aug 2005 01:39:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65402 invoked by uid 99); 18 Aug 2005 01:39:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 18:39:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 18:39:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0ADA613E2033; Wed, 17 Aug 2005 21:39:23 -0400 (EDT)
Received: from [172.16.1.101] (unknown [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 7084713E2007
	for <java-user@lucene.apache.org>; Wed, 17 Aug 2005 21:39:05 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKOECCCFAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKOECCCFAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A11C241C-20C1-4C10-BD7D-1BE2630BFA8B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: DEFAULT_OPERATOR_AND
Date: Wed, 17 Aug 2005 21:39:15 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 17, 2005, at 2:45 AM, Karthik N S wrote:
> Hi  Lucener's
>
> Apologies..........
>
> I have seen forms using  'DEFAULT_OPERATOR_AND'  with  something  
> like below
>
>  > QueryParser parser = new QueryParser( "terms", analyzer);
>  > parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>  > query = parser.parse(TextParameters);
>
> How to use the DEFAULT_OPERATOR_AND  when using  
> MultiFieldQueryParser  as below
>
> "query = MultiFieldQueryParser.parse("text",fields,analyzer);" ?
>
> [ I also searched the other Form's for same but no answers.]

MultiFieldQueryParser does not adhere to the default operator  
setting, and will always use OR.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 01:57:21 2005
Return-Path: <java-user-return-15897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45764 invoked from network); 18 Aug 2005 01:57:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 01:57:21 -0000
Received: (qmail 74472 invoked by uid 500); 18 Aug 2005 01:57:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74442 invoked by uid 500); 18 Aug 2005 01:57:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74429 invoked by uid 99); 18 Aug 2005 01:57:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 18:57:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 18:57:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9697913E2007; Wed, 17 Aug 2005 21:57:14 -0400 (EDT)
Received: from [172.16.1.101] (unknown [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id C830013E2007
	for <java-user@lucene.apache.org>; Wed, 17 Aug 2005 21:57:10 -0400 (EDT)
In-Reply-To: <18010.1124301014@www56.gmx.net>
References: <18010.1124301014@www56.gmx.net>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <503A91F6-C456-4E98-9B52-B968AACCC8D8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: [Lucene 1.2] Boolean OR on all query terms
Date: Wed, 17 Aug 2005 21:57:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 17, 2005, at 1:50 PM, Karl Koch wrote:
>

> Hello experts,
>
> I have the following code:
>
> Query query = QueryParser.parse(queryString, searchFields[0],  
> analyser);
> Hits hits = searcher.search(query);
>
> and the following code for search across multiple fields:
>
> Query query = MultiFieldQueryParser.parse(queryString, searchFields,
> analyser);
> hits = searcher.search(query);
>
> I have some questions.
>
> The query string in my application is of in a very simple format.  
> Basically
> a number of words are separated by spaces (e.g. "dog cat"). No  
> additional
> orperators (e.g. "+", OR, AND, etc. shall be used). But, I wand  
> that all of
> these terms are "OR"ed by default to maximise recall (the amount of
> results). How can I do that with Lucene 1.2? (I am running the  
> search engine
> on a PDA which does not allow me to go beyong version 1.2. In the  
> Lucene
> Book I have found parser. I have found the setOperator(int  
> operator) method
> which however works only from Lucene 1.3 onwards. Can sombod help  
> me out?

Given your description, you don't need a query parser at all.  Simply  
tokenize the field at whitespace boundaries (you could use an  
analyzer to do this if you like, or simply StringTokenizer).  Then  
build a BooleanQuery with nested TermQuery's all unrequired which  
will give the OR nature.

     Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 05:38:39 2005
Return-Path: <java-user-return-15898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5979 invoked from network); 18 Aug 2005 05:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 05:38:39 -0000
Received: (qmail 78272 invoked by uid 500); 18 Aug 2005 05:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78239 invoked by uid 500); 18 Aug 2005 05:38:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78226 invoked by uid 99); 18 Aug 2005 05:38:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Aug 2005 22:38:34 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Aug 2005 22:38:46 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ILELY900.7Y5 for <java-user@lucene.apache.org>; Thu, 18
          Aug 2005 11:28:57 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: DEFAULT_OPERATOR_AND
Date: Thu, 18 Aug 2005 11:18:05 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKCECLCFAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
In-Reply-To: <A11C241C-20C1-4C10-BD7D-1BE2630BFA8B@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Luceners..

Apologies...........


Does this mean MultiFieldQueryParser will always have to use
'DEFAULT_OPERATOR_OR' instead of DEFAULT_OPERATOR_AND
operations.

  Is there any alternative in handling this processs ( other then API
'replaceAll(" ", " AND ")' substution)


Please enlighten me



With regards
Karthik


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Thursday, August 18, 2005 7:09 AM
To: java-user@lucene.apache.org
Subject: Re: DEFAULT_OPERATOR_AND



On Aug 17, 2005, at 2:45 AM, Karthik N S wrote:
> Hi  Lucener's
>
> Apologies..........
>
> I have seen forms using  'DEFAULT_OPERATOR_AND'  with  something
> like below
>
>  > QueryParser parser = new QueryParser( "terms", analyzer);
>  > parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>  > query = parser.parse(TextParameters);
>
> How to use the DEFAULT_OPERATOR_AND  when using
> MultiFieldQueryParser  as below
>
> "query = MultiFieldQueryParser.parse("text",fields,analyzer);" ?
>
> [ I also searched the other Form's for same but no answers.]

MultiFieldQueryParser does not adhere to the default operator
setting, and will always use OR.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 08:18:02 2005
Return-Path: <java-user-return-15899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57746 invoked from network); 18 Aug 2005 08:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 08:18:02 -0000
Received: (qmail 3952 invoked by uid 500); 18 Aug 2005 08:17:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3651 invoked by uid 500); 18 Aug 2005 08:17:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3638 invoked by uid 99); 18 Aug 2005 08:17:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 01:17:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tom.e.white@gmail.com designates 64.233.182.198 as permitted sender)
Received: from [64.233.182.198] (HELO nproxy.gmail.com) (64.233.182.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 01:18:14 -0700
Received: by nproxy.gmail.com with SMTP id d4so57576nfe
        for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 01:17:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=mK908vg5udwFFtIyw6tDI6j9M/I6ApRUV+TaGjq+GCSNEpy1rFtgBb2TsRXyzJJ0Mdg+dMcyWn+hos6LpA8PPvBVPT9kvu4WzfsxD3G8x1gkxLEZVPmG2UJ1Yl2rm8TOUct0NpaBItSO7zVv4cjSwoef2N05Xm5h96scGIpoIik=
Received: by 10.48.43.14 with SMTP id q14mr24795nfq;
        Thu, 18 Aug 2005 01:17:52 -0700 (PDT)
Received: by 10.48.144.12 with HTTP; Thu, 18 Aug 2005 01:17:52 -0700 (PDT)
Message-ID: <b23e01b505081801174e42a414@mail.gmail.com>
Date: Thu, 18 Aug 2005 09:17:52 +0100
From: Tom White <tom.e.white@gmail.com>
To: java-user@lucene.apache.org
Subject: [ANN] Lucene "Did You Mean" article on java.net
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In case subscribers to this list missed it, my article on how to add a
"did you mean" facility to Lucene searches was published last week:
http://today.java.net/pub/a/today/2005/08/09/didyoumean.html.

Regards,

Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 08:49:02 2005
Return-Path: <java-user-return-15900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66799 invoked from network); 18 Aug 2005 08:49:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 08:49:02 -0000
Received: (qmail 41052 invoked by uid 500); 18 Aug 2005 08:49:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40187 invoked by uid 500); 18 Aug 2005 08:48:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40171 invoked by uid 99); 18 Aug 2005 08:48:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 01:48:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.238.164.5] (HELO elvira.ekonomikum.uu.se) (130.238.164.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 01:49:15 -0700
Received: by elvira.ekonomikum.uu.se (Postfix, from userid 204)
	id F1ABE358; Thu, 18 Aug 2005 10:48:52 +0200 (MSZ)
Received: from elvira.ekonomikum.uu.se(127.0.0.1) by elvira.ekonomikum.uu.se via virus-scan 
	id s26638; Thu, 18 Aug 05 10:48:48 +0200
Received: from [130.238.171.116] (pc171-116.ub.UU.SE [130.238.171.116])
	by elvira.ekonomikum.uu.se (Postfix) with ESMTP id 6702E2E9
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 10:48:48 +0200 (MSZ)
Message-ID: <43044B6F.2080107@ub.uu.se>
Date: Thu, 18 Aug 2005 10:48:47 +0200
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: [ANN] Lucene "Did You Mean" article on java.net
References: <b23e01b505081801174e42a414@mail.gmail.com>
In-Reply-To: <b23e01b505081801174e42a414@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nice article!

And for those interested in the different "did you mean" techniques can
also look at my simple implementation using the first approach mentioned
in the article, minimum edit distance, along with document frequency.
This implementation can easily be applied over an existing index.

http://issues.apache.org/bugzilla/show_bug.cgi?id=36101

/Ronnie

Tom White wrote:
> In case subscribers to this list missed it, my article on how to add a
> "did you mean" facility to Lucene searches was published last week:
> http://today.java.net/pub/a/today/2005/08/09/didyoumean.html.
> 
> Regards,
> 
> Tom
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 10:37:06 2005
Return-Path: <java-user-return-15901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93091 invoked from network); 18 Aug 2005 10:37:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 10:37:05 -0000
Received: (qmail 62110 invoked by uid 500); 18 Aug 2005 10:36:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62088 invoked by uid 500); 18 Aug 2005 10:36:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61923 invoked by uid 99); 18 Aug 2005 10:36:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 03:36:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 03:37:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2C3C213E2007; Thu, 18 Aug 2005 06:36:53 -0400 (EDT)
Received: from [172.16.1.101] (unknown [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 1D29713E2007
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 06:36:45 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKCECLCFAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKCECLCFAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <77D15601-6C15-4B8C-B212-7BBF5A2A079E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: DEFAULT_OPERATOR_AND
Date: Thu, 18 Aug 2005 06:36:52 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 18, 2005, at 1:48 AM, Karthik N S wrote:
> Does this mean MultiFieldQueryParser will always have to use
> 'DEFAULT_OPERATOR_OR' instead of DEFAULT_OPERATOR_AND
> operations.

Yup, that's what I said :)

>   Is there any alternative in handling this processs ( other then API
> 'replaceAll(" ", " AND ")' substution)

Of course there are alternatives!   MFQP is merely a thin layer on  
top of QueryParser.  You're free to create Query's anyway you like.   
Here's one of the parse methods from MFQP:

   public static Query parse(String[] queries, String[] fields,
       Analyzer analyzer) throws ParseException
   {
     if (queries.length != fields.length)
       throw new IllegalArgumentException("queries.length !=  
fields.length");
     BooleanQuery bQuery = new BooleanQuery();
     for (int i = 0; i < fields.length; i++)
     {
       QueryParser qp = new QueryParser(fields[i], analyzer);
       Query q = qp.parse(queries[i]);
       bQuery.add(q, BooleanClause.Occur.SHOULD);
     }
     return bQuery;
   }

You could simply create a piece of code like that with the  
setOperator in there.

     Erik



>
>
> Please enlighten me
>
>
>
> With regards
> Karthik
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, August 18, 2005 7:09 AM
> To: java-user@lucene.apache.org
> Subject: Re: DEFAULT_OPERATOR_AND
>
>
>
> On Aug 17, 2005, at 2:45 AM, Karthik N S wrote:
>
>> Hi  Lucener's
>>
>> Apologies..........
>>
>> I have seen forms using  'DEFAULT_OPERATOR_AND'  with  something
>> like below
>>
>>
>>> QueryParser parser = new QueryParser( "terms", analyzer);
>>> parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>>> query = parser.parse(TextParameters);
>>>
>>
>> How to use the DEFAULT_OPERATOR_AND  when using
>> MultiFieldQueryParser  as below
>>
>> "query = MultiFieldQueryParser.parse("text",fields,analyzer);" ?
>>
>> [ I also searched the other Form's for same but no answers.]
>>
>
> MultiFieldQueryParser does not adhere to the default operator
> setting, and will always use OR.
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 11:22:03 2005
Return-Path: <java-user-return-15902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9618 invoked from network); 18 Aug 2005 11:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 11:22:02 -0000
Received: (qmail 1162 invoked by uid 500); 18 Aug 2005 11:21:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 852 invoked by uid 500); 18 Aug 2005 11:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 838 invoked by uid 99); 18 Aug 2005 11:21:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 04:21:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.254.108.74] (HELO enigmastation.com) (209.254.108.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 04:22:15 -0700
Received: from joeo (helo=localhost)
	by enigmastation.com with local-esmtp (Exim 4.52)
	id 1E5iT2-00077w-FW
	for java-user@lucene.apache.org; Thu, 18 Aug 2005 07:21:52 -0400
Date: Thu, 18 Aug 2005 06:21:52 -0500 (EST)
From: "Joseph B. Ottinger" <joeo@enigmastation.com>
To: java-user@lucene.apache.org
Subject: Re: [ANN] Lucene "Did You Mean" article on java.net
In-Reply-To: <b23e01b505081801174e42a414@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0508180621450.12681@enigmastation.com>
References: <b23e01b505081801174e42a414@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

TSS referred to it, too. :)

On Thu, 18 Aug 2005, Tom White wrote:

> In case subscribers to this list missed it, my article on how to add a
> "did you mean" facility to Lucene searches was published last week:
> http://today.java.net/pub/a/today/2005/08/09/didyoumean.html.
>
> Regards,
>
> Tom
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-----------------------------------------------------------------------
Joseph B. Ottinger                             http://enigmastation.com
Editor, http://www.TheServerSide.com             joeo@enigmastation.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 11:33:50 2005
Return-Path: <java-user-return-15903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12687 invoked from network); 18 Aug 2005 11:33:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 11:33:50 -0000
Received: (qmail 16236 invoked by uid 500); 18 Aug 2005 11:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16209 invoked by uid 500); 18 Aug 2005 11:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16192 invoked by uid 99); 18 Aug 2005 11:33:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 04:33:46 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Aug 2005 04:34:04 -0700
Received: (qmail 17323 invoked by uid 0); 18 Aug 2005 11:33:42 -0000
Received: from 80.136.163.190 by www14.gmx.net with HTTP;
	Thu, 18 Aug 2005 13:33:42 +0200 (MEST)
Date: Thu, 18 Aug 2005 13:33:42 +0200 (MEST)
From: dozean@gmx.de
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?_w.fnm_(System_can_not_find_file.)?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <12960.1124364822@www14.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

i have a problem with the indexing.
It concerns the following... i index documents in one directory.
In this directory there are many other directories with documents... etc.
Above 1000 directories! And i have one Index directory.

So i get the Exception: Exception in thread "main"
java.io.FileNotFoundException: \\??\??\Index\_w.fnm (System can not find
file.)

And it doesn't matter which index structure i use (the mutifile or the
compound index) i get this exception if i want to search in the index,
Luke also show the same exception!

Funny is that it works when i delimit the number of directories which sould
be indexed lesser than 1000!!!!

What can i do!?

-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse fr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 12:32:35 2005
Return-Path: <java-user-return-15904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34137 invoked from network); 18 Aug 2005 12:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 12:32:35 -0000
Received: (qmail 11926 invoked by uid 500); 18 Aug 2005 12:32:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11787 invoked by uid 500); 18 Aug 2005 12:32:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11725 invoked by uid 99); 18 Aug 2005 12:32:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 05:32:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.74.127.3] (HELO svr.ftp1.com) (64.74.127.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 05:32:44 -0700
Received: from graphite by svr.ftp1.com with local (Exim 4.44)
	id 1E5jZG-0005c0-8r
	for java-user@lucene.apache.org; Thu, 18 Aug 2005 07:32:22 -0500
Received: from 192.223.163.5 ([192.223.163.5])
        (SquirrelMail authenticated user tony@simpleobjects.com)
        by www.simpleobjects.com with HTTP;
        Thu, 18 Aug 2005 08:32:22 -0400 (EDT)
Message-ID: <26260.192.223.163.5.1124368342.squirrel@www.simpleobjects.com>
In-Reply-To: <200508172254.18925.paul.elschot@xs4all.nl>
References: <37406.192.223.163.5.1124310987.squirrel@www.simpleobjects.com>
    <200508172249.34445.paul.elschot@xs4all.nl>
    <200508172254.18925.paul.elschot@xs4all.nl>
Date: Thu, 18 Aug 2005 08:32:22 -0400 (EDT)
Subject: Re: OutOfMemoryError on addIndexes()
From: "Tony Schwartz" <tony@simpleobjects.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - svr.ftp1.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32036 808] / [47 12]
X-AntiAbuse: Sender Address Domain - simpleobjects.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is this a viable solution?
Doesn't this make sorting and filtering much more complex and much more expensive as well?

Tony Schwartz
tony@simpleobjects.com


> On Wednesday 17 August 2005 22:49, Paul Elschot wrote:
>> > the index could potentially be huge.
>> >
>> > So if this is indeed the case, it is a potential scalability
>> > bottleneck in lucene index size.
>>
>> Splitting the date field into century, year in century, month, day, hour, seconds, and
>> milliseconds will reduce the total number of indexed terms to 2300 or so.
>
> 1300 is closer, I forgot that I had split off the centuries.
>
> Regards,
> Paul Elschot
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 13:29:32 2005
Return-Path: <java-user-return-15905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67224 invoked from network); 18 Aug 2005 13:29:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 13:29:32 -0000
Received: (qmail 12573 invoked by uid 500); 18 Aug 2005 13:29:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12437 invoked by uid 500); 18 Aug 2005 13:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12412 invoked by uid 99); 18 Aug 2005 13:29:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 06:29:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 06:29:36 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7IDTFje027907
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 09:29:15 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILF00E016SR7D@lmco.com> for java-user@lucene.apache.org; Thu, 18 Aug 2005 09:29:15 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILF00JQ16SQQS@lmco.com> for java-user@lucene.apache.org; Thu, 18 Aug 2005 09:29:14 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 18 Aug 2005 09:29:14 -0400
Date: Thu, 18 Aug 2005 09:29:14 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: [ANN] Lucene "Did You Mean" article on java.net
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE393D@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: [ANN] Lucene "Did You Mean" article on java.net
Thread-Index: AcWj5xDGZAr6OU2QSJqztJN9OlXl5AAEbdFw
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 18 Aug 2005 13:29:14.0683 (UTC) FILETIME=[D393E8B0:01C5A3F8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, Very nice article :)

Aviran
http://www.aviransplace.com 

-----Original Message-----
From: Joseph B. Ottinger [mailto:joeo@enigmastation.com] 
Sent: Thursday, August 18, 2005 7:22 AM
To: java-user@lucene.apache.org
Subject: Re: [ANN] Lucene "Did You Mean" article on java.net

TSS referred to it, too. :)

On Thu, 18 Aug 2005, Tom White wrote:

> In case subscribers to this list missed it, my article on how to add a

> "did you mean" facility to Lucene searches was published last week:
> http://today.java.net/pub/a/today/2005/08/09/didyoumean.html.
>
> Regards,
>
> Tom
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-----------------------------------------------------------------------
Joseph B. Ottinger                             http://enigmastation.com
Editor, http://www.TheServerSide.com             joeo@enigmastation.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 13:34:20 2005
Return-Path: <java-user-return-15906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69622 invoked from network); 18 Aug 2005 13:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 13:34:20 -0000
Received: (qmail 26488 invoked by uid 500); 18 Aug 2005 13:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26445 invoked by uid 500); 18 Aug 2005 13:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26392 invoked by uid 99); 18 Aug 2005 13:34:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 06:34:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 06:34:31 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7IDY9je000676
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 09:34:10 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILF00H0170XEN@lmco.com> for java-user@lucene.apache.org; Thu, 18 Aug 2005 09:34:09 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILF00EUA70XW6@lmco.com> for java-user@lucene.apache.org; Thu, 18 Aug 2005 09:34:09 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 18 Aug 2005 09:34:09 -0400
Date: Thu, 18 Aug 2005 09:34:09 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE:  w.fnm (System can not find file.)
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE393E@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-Topic: w.fnm (System can not find file.)
Thread-Index: AcWj6LrBEKFFPXh2TSyiN+6VF/DtMwAEIsFA
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 18 Aug 2005 13:34:09.0724 (UTC) FILETIME=[836F97C0:01C5A3F9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Try to decrease the merge factor, and I would also check the Max number =
of files allowed to be opened in the OS.

HTH

Aviran
http://www.aviransplace.com=20

-----Original Message-----
From: dozean@gmx.de [mailto:dozean@gmx.de]=20
Sent: Thursday, August 18, 2005 7:34 AM
To: java-user@lucene.apache.org
Subject: w.fnm (System can not find file.)

Hi,

i have a problem with the indexing.
It concerns the following... i index documents in one directory.
In this directory there are many other directories with documents... =
etc.
Above 1000 directories! And i have one Index directory.

So i get the Exception: Exception in thread "main"
java.io.FileNotFoundException: \\??\??\Index\_w.fnm (System can not find
file.)

And it doesn't matter which index structure i use (the mutifile or the =
compound index) i get this exception if i want to search in the index, =
Luke also show the same exception!

Funny is that it works when i delimit the number of directories which =
sould be indexed lesser than 1000!!!!

What can i do!?

--
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse f=FCr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 13:36:42 2005
Return-Path: <java-user-return-15907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70348 invoked from network); 18 Aug 2005 13:36:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 13:36:42 -0000
Received: (qmail 31089 invoked by uid 500); 18 Aug 2005 13:36:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31069 invoked by uid 500); 18 Aug 2005 13:36:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31056 invoked by uid 99); 18 Aug 2005 13:36:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 06:36:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 06:36:56 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7IDaZje001922
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 09:36:35 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILF00I0174YUW@lmco.com> for java-user@lucene.apache.org; Thu, 18 Aug 2005 09:36:34 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILF00E5174YF1@lmco.com> for java-user@lucene.apache.org; Thu, 18 Aug 2005 09:36:34 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 18 Aug 2005 09:36:34 -0400
Date: Thu, 18 Aug 2005 09:36:34 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: OutOfMemoryError on addIndexes()
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE393F@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: OutOfMemoryError on addIndexes()
Thread-Index: AcWj8OnuVcg6LRu/R3S01Ol//XwVlAACM0NA
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 18 Aug 2005 13:36:34.0830 (UTC) FILETIME=[D9ED02E0:01C5A3F9]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can still have the complete date as a separate field, and sort or
filter by it, just don't use this field in your query.

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Tony Schwartz [mailto:tony@simpleobjects.com] 
Sent: Thursday, August 18, 2005 8:32 AM
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()

Is this a viable solution?
Doesn't this make sorting and filtering much more complex and much more
expensive as well?

Tony Schwartz
tony@simpleobjects.com


> On Wednesday 17 August 2005 22:49, Paul Elschot wrote:
>> > the index could potentially be huge.
>> >
>> > So if this is indeed the case, it is a potential scalability 
>> > bottleneck in lucene index size.
>>
>> Splitting the date field into century, year in century, month, day, 
>> hour, seconds, and milliseconds will reduce the total number of
indexed terms to 2300 or so.
>
> 1300 is closer, I forgot that I had split off the centuries.
>
> Regards,
> Paul Elschot
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 13:56:23 2005
Return-Path: <java-user-return-15908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76874 invoked from network); 18 Aug 2005 13:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 13:56:23 -0000
Received: (qmail 63924 invoked by uid 500); 18 Aug 2005 13:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63899 invoked by uid 500); 18 Aug 2005 13:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63886 invoked by uid 99); 18 Aug 2005 13:56:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 06:56:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.74.127.3] (HELO svr.ftp1.com) (64.74.127.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 06:56:34 -0700
Received: from graphite by svr.ftp1.com with local (Exim 4.44)
	id 1E5ksN-0001if-80
	for java-user@lucene.apache.org; Thu, 18 Aug 2005 08:56:11 -0500
Received: from 192.223.163.5 ([192.223.163.5])
        (SquirrelMail authenticated user tony@simpleobjects.com)
        by www.simpleobjects.com with HTTP;
        Thu, 18 Aug 2005 09:56:11 -0400 (EDT)
Message-ID: <9901.192.223.163.5.1124373371.squirrel@www.simpleobjects.com>
In-Reply-To: 
     <92A278501EF50444AD3EE1FFB51219550BCE393F@emss10m03.us.lmco.com>
References:
    <92A278501EF50444AD3EE1FFB51219550BCE393F@emss10m03.us.lmco.com>
Date: Thu, 18 Aug 2005 09:56:11 -0400 (EDT)
Subject: RE: OutOfMemoryError on addIndexes()
From: "Tony Schwartz" <tony@simpleobjects.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - svr.ftp1.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32036 808] / [47 12]
X-AntiAbuse: Sender Address Domain - simpleobjects.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think you're jumping into the conversation too late.  What you have said here does not
address the problem at hand.  That is, in TermInfosReader, all terms in the segment get
loaded into three very large arrays.  If your index is massive and has many fields
indexed (dates for example), you need huge amounts of memory to accommodate for it.  The
only way around this is to change lucene in such a way that it does not store all these
terms in memory.  It is possible that an implementation can be made that will be fast
for regular fields, but go to disk for fields that are "special" (i.e. dates) or some
such thing.

Tony Schwartz
tony@simpleobjects.com
"What we need is more cowbell."




> You can still have the complete date as a separate field, and sort or
> filter by it, just don't use this field in your query.
>
> Aviran
> http://www.aviransplace.com
>
> -----Original Message-----
> From: Tony Schwartz [mailto:tony@simpleobjects.com]
> Sent: Thursday, August 18, 2005 8:32 AM
> To: java-user@lucene.apache.org
> Subject: Re: OutOfMemoryError on addIndexes()
>
> Is this a viable solution?
> Doesn't this make sorting and filtering much more complex and much more
> expensive as well?
>
> Tony Schwartz
> tony@simpleobjects.com
>
>
>> On Wednesday 17 August 2005 22:49, Paul Elschot wrote:
>>> > the index could potentially be huge.
>>> >
>>> > So if this is indeed the case, it is a potential scalability
>>> > bottleneck in lucene index size.
>>>
>>> Splitting the date field into century, year in century, month, day,
>>> hour, seconds, and milliseconds will reduce the total number of
> indexed terms to 2300 or so.
>>
>> 1300 is closer, I forgot that I had split off the centuries.
>>
>> Regards,
>> Paul Elschot
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 15:28:43 2005
Return-Path: <java-user-return-15909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7129 invoked from network); 18 Aug 2005 15:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 15:28:43 -0000
Received: (qmail 8552 invoked by uid 500); 18 Aug 2005 15:28:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8508 invoked by uid 500); 18 Aug 2005 15:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8487 invoked by uid 99); 18 Aug 2005 15:28:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 08:28:38 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.58] (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 08:28:56 -0700
Received: from mswamui-valley.atl.sa.earthlink.net ([209.86.224.52])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E5mJn-0000pQ-00
	for java-user@lucene.apache.org; Thu, 18 Aug 2005 11:28:35 -0400
Message-ID: <5636420.1124378915736.JavaMail.root@mswamui-valley.atl.sa.earthlink.net>
Date: Thu, 18 Aug 2005 10:28:35 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: RE: DEFAULT_OPERATOR_AND
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What about trying something like:

        BooleanQuery booQuery = new BooleanQuery();
        Query titleQuery = null;

            QueryParser.Operator operator = contentParser.getDefaultOperator();

            if(QueryParser.Operator.AND == operator){
                //logger.debug("Content Operator is AND");
                booQuery.add(contentParser.parse(searchStr), BooleanClause.Occur.MUST);
            } else{
                //logger.debug("Content Operator is OR");
                booQuery.add(contentParser.parse(searchStr), BooleanClause.Occur.SHOULD);
            }

            titleQuery = titleParser.parse(searchStr);

            titleQuery.setBoost(Document.TITLE_BOOST);
            booQuery.add(titleQuery, BooleanClause.Occur.SHOULD);

Instead of using MultiFieldQueryParser just use multiple QueryParsers and knit them together with a BooleanQuery.

Andrew

-----Original Message-----
From: Karthik N S <karthik@controlnet.co.in>
Sent: Aug 18, 2005 12:48 AM
To: java-user@lucene.apache.org
Subject: RE: DEFAULT_OPERATOR_AND

Hi Luceners..

Apologies...........


Does this mean MultiFieldQueryParser will always have to use
'DEFAULT_OPERATOR_OR' instead of DEFAULT_OPERATOR_AND
operations.

  Is there any alternative in handling this processs ( other then API
'replaceAll(" ", " AND ")' substution)


Please enlighten me



With regards
Karthik


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Thursday, August 18, 2005 7:09 AM
To: java-user@lucene.apache.org
Subject: Re: DEFAULT_OPERATOR_AND



On Aug 17, 2005, at 2:45 AM, Karthik N S wrote:
> Hi  Lucener's
>
> Apologies..........
>
> I have seen forms using  'DEFAULT_OPERATOR_AND'  with  something
> like below
>
>  > QueryParser parser = new QueryParser( "terms", analyzer);
>  > parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>  > query = parser.parse(TextParameters);
>
> How to use the DEFAULT_OPERATOR_AND  when using
> MultiFieldQueryParser  as below
>
> "query = MultiFieldQueryParser.parse("text",fields,analyzer);" ?
>
> [ I also searched the other Form's for same but no answers.]

MultiFieldQueryParser does not adhere to the default operator
setting, and will always use OR.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 15:30:27 2005
Return-Path: <java-user-return-15910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7515 invoked from network); 18 Aug 2005 15:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 15:30:27 -0000
Received: (qmail 11135 invoked by uid 500); 18 Aug 2005 15:30:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10865 invoked by uid 500); 18 Aug 2005 15:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10852 invoked by uid 99); 18 Aug 2005 15:30:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 08:30:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.159.1.214] (HELO epost.start.no) (195.159.1.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 08:30:40 -0700
Received: (from apache@localhost)
	by epost.start.no (8.11.6/8.11.2) id j7IFTvs08264
	for java-user@lucene.apache.org; Thu, 18 Aug 2005 17:29:57 +0200
To: java-user@lucene.apache.org
Subject: OutOfMemory error when searching
Message-ID: <1124378997.4304a9758b225@epost.start.no>
Date: Thu, 18 Aug 2005 17:29:57 +0200 (CEST)
From: Fredrik <fredrio@start.no>
References: <92A278501EF50444AD3EE1FFB51219550BCE393F@emss10m03.us.lmco.com> <9901.192.223.163.5.1124373371.squirrel@www.simpleobjects.com>
In-Reply-To: <9901.192.223.163.5.1124373371.squirrel@www.simpleobjects.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: IMP/PHP IMAP webmail program 2.2.8
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We have an index with approximately 1,2 million documents. Web site
users search this index, but we get sporadic out of memory errors,
as Lucene tries to allocate over 500 MB of memory.

Opening the index with Luke, I can see the following:
Number of fields: 17
Number of documents: 1165726
Number of terms: 6721726

The size of the index is approx 5,3 GB.
Lucene version is 1.4.3.

The index contains Norwegian terms, but lots of inline HTML, etc
is probably increasing the index term count (should 'wash' these
unwanted terms away when indexing documents). The analysis below
shows that TermInfosReader.java:132 -> get() is trying to allocate
a huge memory slab.

----------- analysis -----------
<AF[338]: Allocation Failure. need 532676624 bytes, 105670 ms since last AF>
<AF[338]: managing allocation failure, action=2 (64317856/2044721664)>
<GC(750): GC cycle started Thu Jun 9 10:48:00 2005
<GC(750): freed 593221816 bytes, 32% free (657539672/2044721664), in 10944 ms>
<GC(750): mark: 2888 ms, sweep: 239 ms, compact: 7817 ms>
<GC(750): refs: soft 0 (age >= 32), weak 356, final 1083, phantom 0>
<GC(750): moved 16099123 objects, 1183312592 bytes, reason=1, used 13328 more bytes>
<AF[338]: managing allocation failure, action=3 (657539672/2044721664)>
<AF[338]: managing allocation failure, action=4 (657539672/2044721664)>
<AF[338]: managing allocation failure, action=6 (657539672/2044721664)>
JVMDG217: Dump Handler is Processing OutOfMemory - Please Wait.
---------- end of analysis ------------

An analysis of the heap dump shows that the two largest contiguous
memory segmets at the time, was 512,230,096 and 137,232,560 bytes large.

'need 532676624 bytes' means that something is allocating a 500Mb slab
of memory.
'action=2' means that this much memory was not available at all; and it
goes through a normal GC cycle. The GC cycle needs to perform a
compaction to be able to make a 500Mb slab available, which takes around
8 seconds.
'action=3', 4 and 6 indicate that the compaction did not help, and that
even though there is around 650Mb free space in the heap, there is no
block large enough to hold the requestet array.

This, in turn triggers a normal OutOfMemory, which we have configured to
trigger a thread dump. (see below)

--------- thread dump -------------
1XMCURTHDINFO Current Thread Details
NULL ----------------------
3XMTHREADINFO "tcpConnection-6802-91" (TID:10D10D70, sys_thread_t:A3A96D50,
state:R, native ID:4F8097) prio=5
4XESTACKTRACE at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:132)
4XESTACKTRACE at
org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:253)
4XESTACKTRACE at
org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:69)
4XESTACKTRACE at org.apache.lucene.search.Similarity.idf(Similarity.java:255)
4XESTACKTRACE at
org.apache.lucene.search.TermQuery$TermWeight.sumOfSquaredWeights(TermQuery.java:47)
4XESTACKTRACE at
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110)
4XESTACKTRACE at
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110)
4XESTACKTRACE at org.apache.lucene.search.Query.weight(Query.java:86)
4XESTACKTRACE at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
4XESTACKTRACE at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
4XESTACKTRACE at org.apache.lucene.search.Hits.<init>(Hits.java:43)
4XESTACKTRACE at org.apache.lucene.search.Searcher.search(Searcher.java:33)
[lots more non-apache stuff underneath cropped]
--------- end thread dump -------------

The thread dump indicates that it is lucene which is the culprit, trying
to allocate the 500+Mb slab. What is interesting is that the number of
bytes it tries to allocate is exactly the same every time (532676624 bytes)

Can anyone please help me out here? Have anyone experienced similar problems
(and solved them)?

Thank you,
Fredrik Omland

-------------------------------------------------------------------------
Start.no tilbyr n raskere bredbnd til lavere pris.
Sjekk http://www.start.no/bredband/ for mer informasjon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 16:37:16 2005
Return-Path: <java-user-return-15911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31681 invoked from network); 18 Aug 2005 16:37:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 16:37:16 -0000
Received: (qmail 24316 invoked by uid 500); 18 Aug 2005 16:37:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24195 invoked by uid 500); 18 Aug 2005 16:37:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24104 invoked by uid 99); 18 Aug 2005 16:37:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 09:37:07 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 09:37:26 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7IGb4el086683
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 18:37:04 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()
Date: Thu, 18 Aug 2005 18:37:04 +0200
User-Agent: KMail/1.5.4
References: <37406.192.223.163.5.1124310987.squirrel@www.simpleobjects.com> <200508172254.18925.paul.elschot@xs4all.nl> <26260.192.223.163.5.1124368342.squirrel@www.simpleobjects.com>
In-Reply-To: <26260.192.223.163.5.1124368342.squirrel@www.simpleobjects.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508181837.04131.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 18 August 2005 14:32, Tony Schwartz wrote:
> Is this a viable solution?
> Doesn't this make sorting and filtering much more complex and much more expensive as well?

Sorting would have to be done on more than one field.
I would expect that to be possible.

As for filtering: would you need (milli)second resolution for that?

> 
> Tony Schwartz
> tony@simpleobjects.com
> 
> 
> > On Wednesday 17 August 2005 22:49, Paul Elschot wrote:
> >> > the index could potentially be huge.
> >> >
> >> > So if this is indeed the case, it is a potential scalability
> >> > bottleneck in lucene index size.
> >>
> >> Splitting the date field into century, year in century, month, day, hour, seconds, and
> >> milliseconds will reduce the total number of indexed terms to 2300 or so.
> >
> > 1300 is closer, I forgot that I had split off the centuries.

I still forgot the minutes.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 17:42:31 2005
Return-Path: <java-user-return-15912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57266 invoked from network); 18 Aug 2005 17:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 17:42:31 -0000
Received: (qmail 48315 invoked by uid 500); 18 Aug 2005 17:42:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48258 invoked by uid 500); 18 Aug 2005 17:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48245 invoked by uid 99); 18 Aug 2005 17:42:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 10:42:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Aug 2005 10:42:44 -0700
Received: (qmail 5160 invoked by uid 0); 18 Aug 2005 17:42:22 -0000
Received: from 193.63.235.44 by www13.gmx.net with HTTP;
	Thu, 18 Aug 2005 19:42:22 +0200 (MEST)
Date: Thu, 18 Aug 2005 19:42:22 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <F498110A-A31D-4AD6-88A0-BF679349F276@ehatchersolutions.com>
Subject: =?ISO-8859-1?Q?Re:_Books_about_Lucene=3F?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <22825.1124386942@www13.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Erik,

I find "Lucene in Action" an extemely well written and easy accessable book
and I must say: Well done (including of course everybody who participated to
the book). 

Naturally the book is very strong on the latest version on Lucene. I
currently, and you may have realised that on all my other postings, have the
problem that I cannot go for the latest version due to hardware limitations
in mobile computing. I think I am not alone. I think it would be great to
have articles on how to run Lucene on small footprint devices such as Java
enabled PDAs or even MIDP on mobile phones. I am not really convinced that
this shouild go in a book such a LIA but I am sure there is a demand to know
about how to do such things.

There are certainly people out there that want to try out more IR intensic
stuff with Lucene. This is, for a good reason, not addressed in the book. I 
think it would be good to have perhaps some in-deep information on Lucene
available that goes into this direction. I am not sure if I am talking about
another book here or if this could be some sort of appendix chapters in the
next LIA. Since you are an IR expert, it could actually be a great idea to
write an IR book for Students in Information Science and Information
Retrieval with Lucene as the tool used for examples (like you find
statistical books with SPSS examples).

Karl

> --- Ursprngliche Nachricht ---
> Von: Erik Hatcher <erik@ehatchersolutions.com>
> An: java-user@lucene.apache.org
> Betreff: Re: Books about Lucene?
> Datum: Wed, 17 Aug 2005 20:28:09 -0400
> 
> On Aug 17, 2005, at 2:49 PM, Karl Koch wrote:
> > Are there any other books (despite "Lucene in Action") perhaps  
> > written in a
> > different perspective (e.g. different applications or problem areas)?
> 
> To echo what Otis said - I don't know of any myself.
> 
> I'd be very interested to hear yours, and others, thoughts on what  
> Lucene in Action 2nd edition should add/remove to its coverage.   
> There are lots of topics that I've researched and worked on since  
> that book that I think make sense to add, but community feedback will  
> decide ultimately how LIA 2.0 unfolds.
> 
>      Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 18:00:46 2005
Return-Path: <java-user-return-15913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63504 invoked from network); 18 Aug 2005 18:00:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 18:00:46 -0000
Received: (qmail 84447 invoked by uid 500); 18 Aug 2005 18:00:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84422 invoked by uid 500); 18 Aug 2005 18:00:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84407 invoked by uid 500); 18 Aug 2005 18:00:41 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 84399 invoked by uid 99); 18 Aug 2005 18:00:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 11:00:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Aug 2005 11:00:59 -0700
Received: (qmail 21897 invoked by uid 0); 18 Aug 2005 18:00:38 -0000
Received: from 193.63.235.44 by www13.gmx.net with HTTP;
	Thu, 18 Aug 2005 20:00:38 +0200 (MEST)
Date: Thu, 18 Aug 2005 20:00:38 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: "User " <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?MySimilarity_with_Lucene_1.2_=3F?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <11479.1124388038@www13.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Lucene experts,

as you might have seen in my previous postings, I am bound to use not more
than Lucene 1.2 (due to hardware limitations I can only use Java 1.1 or
1.2). 

I would like to do my own Similarity implementation which, I think, would
allow me to insert other algorithms in Lucene which would enable me to
compare different IR algoritms with Lucene as a framework. I got advice from
here to use DefaultSimiliarity. However, this class was, accoding to the
JavaDoc and the CHANGE text file, only introduced in Lucene 1.3. In Lucene
1.2 it seems to be all hard and solid coded without the intension to have
flexiblility at this point.

Now some questions:

1) Am I wrong here and does somebody know a strategy which could allow me to
have an enhancement that could allow me to add my own IR similarity
algoritm?

2) Does somebody know how to hack the Lucene code in order to make it
happen? I presume some code changes could do that: Either changes in the
Similarity class directly or a change of Similarity to non-final (plus
setters to set new similarities like in Lucene 1.3).

Any other suggestions? I generally like the small-ness of Lucene 1.2 but it
is just that I would like to have a little bit more flexiblity at one
point...

Karl

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 18:01:58 2005
Return-Path: <java-user-return-15914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63958 invoked from network); 18 Aug 2005 18:01:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 18:01:57 -0000
Received: (qmail 87930 invoked by uid 500); 18 Aug 2005 18:01:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87903 invoked by uid 500); 18 Aug 2005 18:01:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87890 invoked by uid 99); 18 Aug 2005 18:01:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 11:01:52 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.60] (HELO ylpvm29.prodigy.net) (207.115.57.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 11:02:11 -0700
Received: from pimout4-ext.prodigy.net (pimout4-int.prodigy.net [207.115.4.203])
	by ylpvm29.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j7II1j4w015077
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 14:01:45 -0400
X-ORBL: [63.205.64.255]
Received: from [192.168.168.81] (adsl-63-205-64-255.dsl.snfc21.pacbell.net [63.205.64.255])
	by pimout4-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j7II1iRQ022848;
	Thu, 18 Aug 2005 14:01:46 -0400
Message-ID: <4304CD07.2040305@apache.org>
Date: Thu, 18 Aug 2005 11:01:43 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.6-1.1.fc3 (X11/20050720)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()
References: <92A278501EF50444AD3EE1FFB51219550BCE393F@emss10m03.us.lmco.com> <9901.192.223.163.5.1124373371.squirrel@www.simpleobjects.com>
In-Reply-To: <9901.192.223.163.5.1124373371.squirrel@www.simpleobjects.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tony Schwartz wrote:
> I think you're jumping into the conversation too late.  What you have said here does not
> address the problem at hand.  That is, in TermInfosReader, all terms in the segment get
> loaded into three very large arrays.

That's not true.  Only 1/128th of the terms are loaded by default, and 
that is configurable in the current sources.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 18:09:34 2005
Return-Path: <java-user-return-15915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66619 invoked from network); 18 Aug 2005 18:09:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 18:09:34 -0000
Received: (qmail 603 invoked by uid 500); 18 Aug 2005 18:09:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99658 invoked by uid 500); 18 Aug 2005 18:09:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99645 invoked by uid 99); 18 Aug 2005 18:09:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 11:09:29 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.60] (HELO ylpvm29.prodigy.net) (207.115.57.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 11:09:48 -0700
Received: from pimout3-ext.prodigy.net (pimout3-int.prodigy.net [207.115.4.218])
	by ylpvm29.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j7II9M4w008477
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 14:09:22 -0400
X-ORBL: [63.205.64.255]
Received: from [192.168.168.81] (adsl-63-205-64-255.dsl.snfc21.pacbell.net [63.205.64.255])
	by pimout3-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j7II9LMR138934;
	Thu, 18 Aug 2005 14:09:23 -0400
Message-ID: <4304CED0.5020600@apache.org>
Date: Thu, 18 Aug 2005 11:09:20 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.6-1.1.fc3 (X11/20050720)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory error when searching
References: <92A278501EF50444AD3EE1FFB51219550BCE393F@emss10m03.us.lmco.com> <9901.192.223.163.5.1124373371.squirrel@www.simpleobjects.com> <1124378997.4304a9758b225@epost.start.no>
In-Reply-To: <1124378997.4304a9758b225@epost.start.no>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Fredrik wrote:
> Opening the index with Luke, I can see the following:
> Number of fields: 17
> Number of documents: 1165726
> Number of terms: 6721726
> 
> The size of the index is approx 5,3 GB.
> Lucene version is 1.4.3.
> 
> The index contains Norwegian terms, but lots of inline HTML, etc
> is probably increasing the index term count (should 'wash' these
> unwanted terms away when indexing documents). The analysis below
> shows that TermInfosReader.java:132 -> get() is trying to allocate
> a huge memory slab.
[ ... ]
> 'need 532676624 bytes' means that something is allocating a 500Mb slab
> of memory.

Lucene will try to allocate an array of 6721726/128 ~= 50k terms.  The 
array alone will require a 200kB "slab" and the terms perhaps 1MB or 
more.  But not 500MB.  So I think something else is the culprit here.

Have you tried inserting print statements at the suspected allocations, 
to see how big the arrays actually are?  Are you perhaps creating a new 
IndexSearcher per search, rather than reusing a single IndexSearcher? 
1MB per query could quickly exhaust RAM if the GC can't keep up.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 18:13:28 2005
Return-Path: <java-user-return-15916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68743 invoked from network); 18 Aug 2005 18:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 18:13:27 -0000
Received: (qmail 6138 invoked by uid 500); 18 Aug 2005 18:13:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5737 invoked by uid 500); 18 Aug 2005 18:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5724 invoked by uid 99); 18 Aug 2005 18:13:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 11:13:22 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.60] (HELO ylpvm29.prodigy.net) (207.115.57.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 11:13:40 -0700
Received: from pimout4-ext.prodigy.net (pimout4-int.prodigy.net [207.115.4.203])
	by ylpvm29.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j7IIDE4w021832
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 14:13:14 -0400
X-ORBL: [63.205.64.255]
Received: from [192.168.168.81] (adsl-63-205-64-255.dsl.snfc21.pacbell.net [63.205.64.255])
	by pimout4-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j7IIDHVV041614;
	Thu, 18 Aug 2005 14:13:17 -0400
Message-ID: <4304CFBD.2030908@apache.org>
Date: Thu, 18 Aug 2005 11:13:17 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.6-1.1.fc3 (X11/20050720)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing document instances and retrieving instance attributes
References: <34cc3b0a050811113411bcfea@mail.gmail.com>	 <20050811185206.5998.qmail@web31107.mail.mud.yahoo.com> <34cc3b0a05081112412a18a802@mail.gmail.com>
In-Reply-To: <34cc3b0a05081112412a18a802@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris D wrote:
> Well in my case field order is important, but the order of the
> individual fields isn't. So I can speed up getFields to roughly O(1)
> by implementing Document as follows.

Have you actually found getFields to be a performance bottleneck in your 
application?  I'd be surprised if it was.  If it isn't, then this looks 
like a premature optimization.

Doug



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 18:54:35 2005
Return-Path: <java-user-return-15917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86759 invoked from network); 18 Aug 2005 18:54:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 18:54:35 -0000
Received: (qmail 81925 invoked by uid 500); 18 Aug 2005 18:54:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81900 invoked by uid 500); 18 Aug 2005 18:54:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81887 invoked by uid 99); 18 Aug 2005 18:54:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 11:54:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Aug 2005 11:54:48 -0700
Received: (qmail 10790 invoked by uid 0); 18 Aug 2005 18:54:26 -0000
Received: from 193.63.235.44 by www13.gmx.net with HTTP;
	Thu, 18 Aug 2005 20:54:26 +0200 (MEST)
Date: Thu, 18 Aug 2005 20:54:26 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?MySimilarity_with_Lucene_1.2_=3F?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <1737.1124391266@www13.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Lucene experts,

as you might have seen in my previous postings, I am bound to use not more
than Lucene 1.2 (due to hardware limitations I can only use Java 1.1 or
1.2).

I would like to do my own Similarity implementation which, I think, would
allow me to insert other algorithms in Lucene which would enable me to
compare different IR algoritms with Lucene as a framework. I got advice from
here to use DefaultSimiliarity. However, this class was, accoding to the
JavaDoc and the CHANGE text file, only introduced in Lucene 1.3. In Lucene
1.2 it seems to be all hard and solid coded without the intension to have
flexiblility at this point.

Now some questions:

1) Am I wrong here and does somebody know a strategy which could allow me to
have an enhancement that could allow me to add my own IR similarity
algoritm?

2) Does somebody know how to hack the Lucene code in order to make it
happen? I presume some code changes could do that: Either changes in the
Similarity class directly or a change of Similarity to non-final (plus
setters to set new similarities like in Lucene 1.3).

Any other suggestions? I generally like the small-ness of Lucene 1.2 but it
is just that I would like to have a little bit more flexiblity at one
point...

Karl

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 19:02:11 2005
Return-Path: <java-user-return-15918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97069 invoked from network); 18 Aug 2005 19:02:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 19:02:11 -0000
Received: (qmail 96243 invoked by uid 500); 18 Aug 2005 19:02:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96220 invoked by uid 500); 18 Aug 2005 19:02:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96207 invoked by uid 99); 18 Aug 2005 19:02:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:02:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Aug 2005 12:02:24 -0700
Received: (qmail 22012 invoked by uid 0); 18 Aug 2005 19:02:02 -0000
Received: from 193.63.235.44 by www13.gmx.net with HTTP;
	Thu, 18 Aug 2005 21:02:02 +0200 (MEST)
Date: Thu, 18 Aug 2005 21:02:02 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: "User " <java-user@lucene.apache.org>
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?Lucene_1.3_on_Java_1.2_=3F?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <23591.1124391722@www13.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does Lucene 1.3 theoretically run on Java 1.2 ? I have tried and got JIT
errors when trying to search an index on the harddisk:

----------------------- output from Eclipse Java IDE-------------------
A nonfatal internal JIT (3.10.107(x)) error 'chgTarg: Conditional' has
occurred in : 
  'org/apache/lucene/store/FSDirectory.getDirectory
(Ljava/io/File;Z)Lorg/apache/lucene/store/FSDirectory;': Interpreting
method.
  Please report this error in detail to
http://java.sun.com/cgi-bin/bugreport.cgi

Error while indexing and creating initial ContentSelection!
java.lang.IllegalMonitorStateException: current thread not owner
	at org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:151)
	at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:132)
	at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:113)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:151)
	at phd.ir.index.SnowballIndexer.index(SnowballIndexer.java:72)
	at phd.application.Application.configureSearch(Application.java:163)....
----------------------- end of output from Eclipse Java IDE------------

Would there be a difference (regarding running on Java 1.2) between the
different release candidates / final version of 1.3?

Kind Regards,
Karl


-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 19:28:42 2005
Return-Path: <java-user-return-15919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19072 invoked from network); 18 Aug 2005 19:28:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 19:28:42 -0000
Received: (qmail 46861 invoked by uid 500); 18 Aug 2005 19:28:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46584 invoked by uid 500); 18 Aug 2005 19:28:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46571 invoked by uid 99); 18 Aug 2005 19:28:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:28:36 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [141.149.165.226] (HELO ponyexpress2.ad.openratings.com) (141.149.165.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:28:56 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5A42B.03D367E4"
Subject: java.io.IOException: term out of order
Date: Thu, 18 Aug 2005 15:28:30 -0400
Message-ID: <9951857AC27D97449C62F7DD6C6122481D9982@ponyexpress2.ad.openratings.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: java.io.IOException: term out of order
Thread-Index: AcWkKwOvGx+p/DucToS/4yyiJeNjhA==
From: "Dan Quaroni" <dquaroni@OPENRATINGS.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5A42B.03D367E4
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello, all.

I'm trying to optimize an index, and I get this exception...  A copy of =
this index made a couple weeks ago optimized correctly, and I don't =
THINK there have been any changes made to this index since there.  (but =
there may have been) =20

I also couldn't find anything about this in the faq or the archives that =
I looked at.

java.io.IOException: term out of order
        at =
org.apache.lucene.index.TermInfosWriter.add(TermInfosWriter.java:93)
        at =
org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:32=
3)
        at =
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:2=
90)
        at =
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:254)
        at =
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:93)
        at =
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
        at =
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
        at com.openratings.matcher.OptimizeIdx.main(OptimizeIdx.java:30)

------_=_NextPart_001_01C5A42B.03D367E4--

From java-user-return-15920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 19:48:41 2005
Return-Path: <java-user-return-15920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31747 invoked from network); 18 Aug 2005 19:48:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 19:48:41 -0000
Received: (qmail 92011 invoked by uid 500); 18 Aug 2005 19:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91990 invoked by uid 500); 18 Aug 2005 19:48:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91976 invoked by uid 99); 18 Aug 2005 19:48:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:48:35 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.60] (HELO ylpvm29.prodigy.net) (207.115.57.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:48:54 -0700
Received: from pimout4-ext.prodigy.net (pimout4-int.prodigy.net [207.115.4.203])
	by ylpvm29.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j7IJmR4w018415
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 15:48:28 -0400
X-ORBL: [63.205.64.255]
Received: from [192.168.168.81] (adsl-63-205-64-255.dsl.snfc21.pacbell.net [63.205.64.255])
	by pimout4-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j7IJmMGv076616;
	Thu, 18 Aug 2005 15:48:27 -0400
Message-ID: <4304E605.1050301@apache.org>
Date: Thu, 18 Aug 2005 12:48:21 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.6-1.1.fc3 (X11/20050720)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on addIndexes()
References: <92A278501EF50444AD3EE1FFB51219550BCE393F@emss10m03.us.lmco.com>    <9901.192.223.163.5.1124373371.squirrel@www.simpleobjects.com>    <4304CD07.2040305@apache.org> <26186.192.223.163.5.1124392952.squirrel@www.simpleobjects.com>
In-Reply-To: <26186.192.223.163.5.1124392952.squirrel@www.simpleobjects.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tony Schwartz wrote:
> What about the TermInfosReader class?  It appears to read the entire term set for the
> segment into 3 arrays.  Am I seeing double on this one?
> 
> p.s.  I am looking at the current sources.
> 
> see TermInfosReader.ensureIndexIsRead();

The index only has 1/128 of the terms, by default.  You're right however
that there are three arrays, not just one, I'd forgotten that.  So, with
6M terms you'd have a 50k term index.  Two 200kB arrays (pointer) and
one 400kB array (long) would be allocated, plus the data to fill them.
So the total might be closer to a few MB.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 19:50:29 2005
Return-Path: <java-user-return-15921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32794 invoked from network); 18 Aug 2005 19:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 19:50:28 -0000
Received: (qmail 95838 invoked by uid 500); 18 Aug 2005 19:50:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95819 invoked by uid 500); 18 Aug 2005 19:50:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95793 invoked by uid 99); 18 Aug 2005 19:50:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:50:22 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:50:40 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j7IJoISu021819
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 14:50:18 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Thu, 18 Aug 2005 14:50:18 -0500 (CDT)
Message-ID: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>
Date: Thu, 18 Aug 2005 14:50:18 -0500 (CDT)
Subject: Case-sensitive search
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there any way to do a case-sensitive search?

Thanks
Tareque
ControlDOCS


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 19:52:11 2005
Return-Path: <java-user-return-15922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34431 invoked from network); 18 Aug 2005 19:52:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 19:52:11 -0000
Received: (qmail 98574 invoked by uid 500); 18 Aug 2005 19:52:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98555 invoked by uid 500); 18 Aug 2005 19:52:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98541 invoked by uid 99); 18 Aug 2005 19:52:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:52:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO zproxy.gmail.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:52:23 -0700
Received: by zproxy.gmail.com with SMTP id i11so368907nzi
        for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 12:52:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=E743DTLRrUR6v12FGlWaAtL5srnj8AjDZ+lNvbCDC34s6KW6BawunoorJZ+91Ay5X74B7GYHF7yq4mGC6dg+oegX/wYKnk3ocnbovvGPi5jKD/8DcBhtpznbISutLklcOEmGrPaalpZJ8TIFiiLQVm9vCscBn7P+f5lhZ7r7tCY=
Received: by 10.36.120.16 with SMTP id s16mr1873700nzc;
        Thu, 18 Aug 2005 12:52:01 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id j7sm842419nzd.2005.08.18.12.51.59;
        Thu, 18 Aug 2005 12:52:01 -0700 (PDT)
Message-ID: <4304E6DF.5030405@gmail.com>
Date: Thu, 18 Aug 2005 14:51:59 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Token Filter question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am implementing a filter that will remove certain characters from the 
tokens - thing like '(', etc - but the chars to be removed will be 
customizable.

This is what I have come up with - but it doesn't seem very efficient.  
Is there a better way?
Should I be adjusting the token endOffset when I remove characters?  If 
I end up removing all characters, should I be returning null, rather 
than returning a token with no text?



public class CharRemovingFilter extends TokenFilter
{
    StringBuffer temp = new StringBuffer();
    Set          charsToRemove;

    /**
     * Builds a Set from an array of chars to remove, appropriate for 
passing into the
     * CharRemovingFilter constructor.
     */
    public static final Set makeCharRemovalSet(char[] charsToRemove)
    {
        HashSet temp = new HashSet(charsToRemove.length);
        for (int i = 0; i < charsToRemove.length; i++)
        {
            temp.add(new Character(charsToRemove[i]));
        }
        return temp;
    }

    public CharRemovingFilter(TokenStream in, Set charsToRemove)
    {
        super(in);
        this.charsToRemove = charsToRemove;
    }

    public Token next() throws IOException
    {
        Token t = input.next();

        if (t == null)
        {
            return null;
        }

        temp.setLength(0);

        for (int i = 0; i < t.termText().length(); i++)
        {
            if (!charsToRemove.contains(new 
Character(t.termText().charAt(i))))
            {
                temp.append(t.termText().charAt(i));
            }
        }

        Token returnValue = new Token(temp.toString(), t.startOffset(), 
t.endOffset());

        return returnValue;
    }


And here is part of the Analyzer that uses it:

    public final TokenStream tokenStream(String fieldname, final Reader 
reader)
    {
        TokenStream result = new WhitespaceTokenizer(reader);
        result = new LowerCaseFilter(result);
        if (stopTable != null)
        {
            result = new StopFilter(result, stopTable);
        }
        if (charRemovalTable != null)
        {
            result = new CharRemovingFilter(result, charRemovalTable);
        }

        return result;
    }

Thanks,

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 19:53:10 2005
Return-Path: <java-user-return-15923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34920 invoked from network); 18 Aug 2005 19:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 19:53:09 -0000
Received: (qmail 1465 invoked by uid 500); 18 Aug 2005 19:53:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1433 invoked by uid 500); 18 Aug 2005 19:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1383 invoked by uid 99); 18 Aug 2005 19:53:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:53:03 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.42] (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Aug 2005 12:53:20 -0700
Received: (qmail 99996 invoked by uid 60001); 18 Aug 2005 19:52:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=byFQnUsz/VmK/FBGOjH+TNaUJD21fjFoHb0Uy2vmR5tK6NR0vnUFHPOziFA48KK7Xl6zjghEDwAP9RUtMczOxycy8q3Dr0kkWXoAqrx2II9q4vjFgDNdciowxyAekoTAWW93SadvVrS3mr+nfBGEOECKuAu40IuW+NP0judy36U=  ;
Message-ID: <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>
Received: from [69.201.142.21] by web31109.mail.mud.yahoo.com via HTTP; Thu, 18 Aug 2005 12:52:58 PDT
Date: Thu, 18 Aug 2005 12:52:58 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Case-sensitive search
To: java-user@lucene.apache.org
In-Reply-To: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The search really is case sensitive, it's just that all input is
usually lower-cased, so it feels like it's case insensitive.  In other
words, don't lower-case your input before indexing, and don't
lower-case your queries (i.e. pick an Analyzer that doesn't
lower-case).

Otis


--- tareque@controldocs.com wrote:

> Is there any way to do a case-sensitive search?
> 
> Thanks
> Tareque
> ControlDOCS
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 19:54:00 2005
Return-Path: <java-user-return-15924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35247 invoked from network); 18 Aug 2005 19:54:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 19:54:00 -0000
Received: (qmail 5956 invoked by uid 500); 18 Aug 2005 19:53:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5915 invoked by uid 500); 18 Aug 2005 19:53:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5881 invoked by uid 99); 18 Aug 2005 19:53:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:53:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 12:54:06 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C062D13E2007; Thu, 18 Aug 2005 15:53:44 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 71AAA13E2007
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 15:53:39 -0400 (EDT)
In-Reply-To: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>
Mime-Version: 1.0 (Apple Message framework v733)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D6B01EE4-33C4-4972-8956-E49723953F79@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Case-sensitive search
Date: Thu, 18 Aug 2005 15:53:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 18, 2005, at 3:50 PM, tareque@controldocs.com wrote:
> Is there any way to do a case-sensitive search?

All Lucene searches are case-sensitive, actually.

But most often a lowercasing analyzer is used.  So the trick is to  
change the analysis process to not lowercase.  It gets more fun when  
you need case sensitive or insensitive searching both in the same  
situation, where the trick is to either build two different indexes  
or to use different fields that use different analysis on the same  
text (though this gets tricky with QueryParser generated queries and  
the potential for user field selection).

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 20:16:14 2005
Return-Path: <java-user-return-15925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42364 invoked from network); 18 Aug 2005 20:16:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 20:16:14 -0000
Received: (qmail 53530 invoked by uid 500); 18 Aug 2005 20:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53502 invoked by uid 500); 18 Aug 2005 20:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53489 invoked by uid 99); 18 Aug 2005 20:16:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 13:16:08 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 13:16:27 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j7IKG3Y6022140
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 15:16:04 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Thu, 18 Aug 2005 15:16:04 -0500 (CDT)
Message-ID: <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>
In-Reply-To: <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>
    <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>
Date: Thu, 18 Aug 2005 15:16:04 -0500 (CDT)
Subject: Re: Case-sensitive search
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks! I have used StopAnalyzer to index. Does it lower-case before
indexing? I don't touch the query string before sending for searching, so
the query string is not lower-cases.

> The search really is case sensitive, it's just that all input is
> usually lower-cased, so it feels like it's case insensitive.  In other
> words, don't lower-case your input before indexing, and don't
> lower-case your queries (i.e. pick an Analyzer that doesn't
> lower-case).
>
> Otis
>
>
> --- tareque@controldocs.com wrote:
>
>> Is there any way to do a case-sensitive search?
>>
>> Thanks
>> Tareque
>> ControlDOCS
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 20:18:45 2005
Return-Path: <java-user-return-15926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43263 invoked from network); 18 Aug 2005 20:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 20:18:45 -0000
Received: (qmail 56785 invoked by uid 500); 18 Aug 2005 20:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56512 invoked by uid 500); 18 Aug 2005 20:18:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56493 invoked by uid 99); 18 Aug 2005 20:18:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 13:18:39 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 13:18:58 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j7IKIbSS022216
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 15:18:37 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Thu, 18 Aug 2005 15:18:37 -0500 (CDT)
Message-ID: <33651.65.117.150.250.1124396317.squirrel@65.117.150.250>
In-Reply-To: <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>   
    <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>
    <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>
Date: Thu, 18 Aug 2005 15:18:37 -0500 (CDT)
Subject: Re: Case-sensitive search
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok, seems like it does is a LowerCaseFilter. Is there any analyzer that do
the same thing as StopAnalyzer does, except for lowering the case? Cuz
StopAnalyzer best fits my purpose.

> Thanks! I have used StopAnalyzer to index. Does it lower-case before
> indexing? I don't touch the query string before sending for searching, so
> the query string is not lower-cases.
>
>> The search really is case sensitive, it's just that all input is
>> usually lower-cased, so it feels like it's case insensitive.  In other
>> words, don't lower-case your input before indexing, and don't
>> lower-case your queries (i.e. pick an Analyzer that doesn't
>> lower-case).
>>
>> Otis
>>
>>
>> --- tareque@controldocs.com wrote:
>>
>>> Is there any way to do a case-sensitive search?
>>>
>>> Thanks
>>> Tareque
>>> ControlDOCS
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 20:21:13 2005
Return-Path: <java-user-return-15927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44037 invoked from network); 18 Aug 2005 20:21:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 20:21:12 -0000
Received: (qmail 65038 invoked by uid 500); 18 Aug 2005 20:21:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65011 invoked by uid 500); 18 Aug 2005 20:21:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64998 invoked by uid 99); 18 Aug 2005 20:21:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 13:21:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 13:21:26 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0963A13E2007; Thu, 18 Aug 2005 16:21:02 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3D14613E2035
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 16:20:52 -0400 (EDT)
In-Reply-To: <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250> <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com> <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>
Mime-Version: 1.0 (Apple Message framework v733)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Case-sensitive search
Date: Thu, 18 Aug 2005 16:20:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 18, 2005, at 4:16 PM, tareque@controldocs.com wrote:
> Thanks! I have used StopAnalyzer to index. Does it lower-case before
> indexing? I don't touch the query string before sending for  
> searching, so
> the query string is not lower-cases.

Pretty much all built-in Lucene analyzers lower-case:

     http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/ 
apache/lucene/analysis/StopAnalyzer.java
(scroll to the bottom to see the tokenStream method - the heart of an  
analyzer)

The exception is the WhitespaceAnalyzer, which is probably not what  
you want to use.  You can write your own Analyzer (copy/paste one and  
remove the lowercasing filter - though some analyzers use a  
lowercasing tokenizer, not a filter).

     Erik



>
>
>> The search really is case sensitive, it's just that all input is
>> usually lower-cased, so it feels like it's case insensitive.  In  
>> other
>> words, don't lower-case your input before indexing, and don't
>> lower-case your queries (i.e. pick an Analyzer that doesn't
>> lower-case).
>>
>> Otis
>>
>>
>> --- tareque@controldocs.com wrote:
>>
>>
>>> Is there any way to do a case-sensitive search?
>>>
>>> Thanks
>>> Tareque
>>> ControlDOCS
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 20:59:39 2005
Return-Path: <java-user-return-15928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62489 invoked from network); 18 Aug 2005 20:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 20:59:39 -0000
Received: (qmail 51861 invoked by uid 500); 18 Aug 2005 20:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51831 invoked by uid 500); 18 Aug 2005 20:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51818 invoked by uid 99); 18 Aug 2005 20:59:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 13:59:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 13:59:53 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9263513E2007; Thu, 18 Aug 2005 16:59:27 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id A514013E2007
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 16:58:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <4304E6DF.5030405@gmail.com>
References: <4304E6DF.5030405@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3E8CA75A-12BC-46E7-AF68-B41E3C125574@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Token Filter question
Date: Thu, 18 Aug 2005 16:58:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 18, 2005, at 3:51 PM, Dan Armbrust wrote:
> I am implementing a filter that will remove certain characters from  
> the tokens - thing like '(', etc - but the chars to be removed will  
> be customizable.
>
> This is what I have come up with - but it doesn't seem very  
> efficient.  Is there a better way?

Without taking the time to look at your code much, here are some  
things to note....

> Should I be adjusting the token endOffset when I remove characters?

This really depends on what you plan on doing with the offsets.  If  
you're not using them at all, then it doesn't matter.  But if you're  
doing hit highlighting then it will matter and the offsets provide  
the positions to highlight.  If you've got text that says "(foo)" and  
you want searches for "foo" to highlight only "foo" but not "(foo)"  
then you'll want to adjust the offsets accordingly (this is presuming  
your filter is seeing "(foo)" as a token)

>   If I end up removing all characters, should I be returning null,  
> rather than returning a token with no text?

If you return null, the analysis process ends thinking that is the  
end of the token stream.  Rather what you want to do is grab the next  
token and process it and be sure to return successive tokens through  
your filter, and only null at the end of them all.

     Erik


>
>
>
> public class CharRemovingFilter extends TokenFilter
> {
>    StringBuffer temp = new StringBuffer();
>    Set          charsToRemove;
>
>    /**
>     * Builds a Set from an array of chars to remove, appropriate  
> for passing into the
>     * CharRemovingFilter constructor.
>     */
>    public static final Set makeCharRemovalSet(char[] charsToRemove)
>    {
>        HashSet temp = new HashSet(charsToRemove.length);
>        for (int i = 0; i < charsToRemove.length; i++)
>        {
>            temp.add(new Character(charsToRemove[i]));
>        }
>        return temp;
>    }
>
>    public CharRemovingFilter(TokenStream in, Set charsToRemove)
>    {
>        super(in);
>        this.charsToRemove = charsToRemove;
>    }
>
>    public Token next() throws IOException
>    {
>        Token t = input.next();
>
>        if (t == null)
>        {
>            return null;
>        }
>
>        temp.setLength(0);
>
>        for (int i = 0; i < t.termText().length(); i++)
>        {
>            if (!charsToRemove.contains(new Character(t.termText 
> ().charAt(i))))
>            {
>                temp.append(t.termText().charAt(i));
>            }
>        }
>
>        Token returnValue = new Token(temp.toString(), t.startOffset 
> (), t.endOffset());
>
>        return returnValue;
>    }
>
>
> And here is part of the Analyzer that uses it:
>
>    public final TokenStream tokenStream(String fieldname, final  
> Reader reader)
>    {
>        TokenStream result = new WhitespaceTokenizer(reader);
>        result = new LowerCaseFilter(result);
>        if (stopTable != null)
>        {
>            result = new StopFilter(result, stopTable);
>        }
>        if (charRemovalTable != null)
>        {
>            result = new CharRemovingFilter(result, charRemovalTable);
>        }
>
>        return result;
>    }
>
> Thanks,
>
> Dan
>
> -- 
> ****************************
> Daniel Armbrust
> Biomedical Informatics
> Mayo Clinic Rochester
> daniel.armbrust(at)mayo.edu
> http://informatics.mayo.edu/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 22:16:31 2005
Return-Path: <java-user-return-15929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92579 invoked from network); 18 Aug 2005 22:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 22:16:30 -0000
Received: (qmail 59519 invoked by uid 500); 18 Aug 2005 22:16:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59294 invoked by uid 500); 18 Aug 2005 22:16:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59281 invoked by uid 99); 18 Aug 2005 22:16:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 15:16:24 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 15:16:43 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j7IMGLiZ023717
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 17:16:21 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Thu, 18 Aug 2005 17:16:21 -0500 (CDT)
Message-ID: <34271.65.117.150.250.1124403381.squirrel@65.117.150.250>
In-Reply-To: <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>
    <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>
    <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>
    <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com>
Date: Thu, 18 Aug 2005 17:16:21 -0500 (CDT)
Subject: Re: Case-sensitive search
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks again! The analyzer is working now. But seems like actually the
QueryParser I am using is probably converting the queries to lowercase
first. Is there any way to stop that? Here is the line of code where I am
parsing:

Query query = QueryParser.parse(line, "contents", analyzer);

As for analyzer, I have tried both StardaAnalyzer and StopAnalyzer.



> On Aug 18, 2005, at 4:16 PM, tareque@controldocs.com wrote:
>> Thanks! I have used StopAnalyzer to index. Does it lower-case before
>> indexing? I don't touch the query string before sending for
>> searching, so
>> the query string is not lower-cases.
>
> Pretty much all built-in Lucene analyzers lower-case:
>
>      http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/
> apache/lucene/analysis/StopAnalyzer.java
> (scroll to the bottom to see the tokenStream method - the heart of an
> analyzer)
>
> The exception is the WhitespaceAnalyzer, which is probably not what
> you want to use.  You can write your own Analyzer (copy/paste one and
> remove the lowercasing filter - though some analyzers use a
> lowercasing tokenizer, not a filter).
>
>      Erik
>
>
>
>>
>>
>>> The search really is case sensitive, it's just that all input is
>>> usually lower-cased, so it feels like it's case insensitive.  In
>>> other
>>> words, don't lower-case your input before indexing, and don't
>>> lower-case your queries (i.e. pick an Analyzer that doesn't
>>> lower-case).
>>>
>>> Otis
>>>
>>>
>>> --- tareque@controldocs.com wrote:
>>>
>>>
>>>> Is there any way to do a case-sensitive search?
>>>>
>>>> Thanks
>>>> Tareque
>>>> ControlDOCS
>>>>
>>>>
>>>> --------------------------------------------------------------------
>>>> -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 22:18:40 2005
Return-Path: <java-user-return-15930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93232 invoked from network); 18 Aug 2005 22:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 22:18:40 -0000
Received: (qmail 61112 invoked by uid 500); 18 Aug 2005 22:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61085 invoked by uid 500); 18 Aug 2005 22:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61072 invoked by uid 99); 18 Aug 2005 22:18:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 15:18:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.40.184.222] (HELO mail2.intranetsolutions.com) (12.40.184.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 15:18:54 -0700
Received: from [10.10.20.20] ([10.10.20.20]) by mail2.intranetsolutions.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Aug 2005 17:18:28 -0500
Subject: Re: Case-sensitive search
From: Luke Francl <luke.francl@stellent.com>
To: java-user@lucene.apache.org
In-Reply-To: <34271.65.117.150.250.1124403381.squirrel@65.117.150.250>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>
	 <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>
	 <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>
	 <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com>
	 <34271.65.117.150.250.1124403381.squirrel@65.117.150.250>
Content-Type: text/plain
Message-Id: <1124403498.6381.5.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Thu, 18 Aug 2005 17:18:19 -0500
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Aug 2005 22:18:28.0367 (UTC) FILETIME=[C23F91F0:01C5A442]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2005-08-18 at 17:16, tareque@controldocs.com wrote:
> Thanks again! The analyzer is working now. But seems like actually the
> QueryParser I am using is probably converting the queries to lowercase
> first. Is there any way to stop that? Here is the line of code where I am
> parsing:
> 
> Query query = QueryParser.parse(line, "contents", analyzer);
> 
> As for analyzer, I have tried both StardaAnalyzer and StopAnalyzer.

You need to use the same analyzer for parsing queries as you do for
indexing content.

Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 18 22:23:05 2005
Return-Path: <java-user-return-15931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94833 invoked from network); 18 Aug 2005 22:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Aug 2005 22:23:05 -0000
Received: (qmail 68617 invoked by uid 500); 18 Aug 2005 22:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68247 invoked by uid 500); 18 Aug 2005 22:23:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68234 invoked by uid 99); 18 Aug 2005 22:23:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 15:23:00 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 15:23:19 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j7IMMwoZ023805
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 17:22:58 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Thu, 18 Aug 2005 17:22:58 -0500 (CDT)
Message-ID: <34288.65.117.150.250.1124403778.squirrel@65.117.150.250>
In-Reply-To: <1124403498.6381.5.camel@localhost>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250> 
    <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com> 
    <33647.65.117.150.250.1124396164.squirrel@65.117.150.250> 
    <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com> 
    <34271.65.117.150.250.1124403381.squirrel@65.117.150.250>
    <1124403498.6381.5.camel@localhost>
Date: Thu, 18 Aug 2005 17:22:58 -0500 (CDT)
Subject: Re: Case-sensitive search
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> On Thu, 2005-08-18 at 17:16, tareque@controldocs.com wrote:
>> Thanks again! The analyzer is working now. But seems like actually the
>> QueryParser I am using is probably converting the queries to lowercase
>> first. Is there any way to stop that? Here is the line of code where I
>> am
>> parsing:
>>
>> Query query = QueryParser.parse(line, "contents", analyzer);
>>
>> As for analyzer, I have tried both StardaAnalyzer and StopAnalyzer.
>
> You need to use the same analyzer for parsing queries as you do for
> indexing content.
>
> Luke Francl
>

Actually I have used StopAn for indexing. So used the same for parsing
queries, but it's still converting the queries to lowercase before running
the actually search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 00:51:05 2005
Return-Path: <java-user-return-15932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40598 invoked from network); 19 Aug 2005 00:51:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 00:51:05 -0000
Received: (qmail 95200 invoked by uid 500); 19 Aug 2005 00:50:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95175 invoked by uid 500); 19 Aug 2005 00:50:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95155 invoked by uid 99); 19 Aug 2005 00:50:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 17:50:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 17:51:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 08C3B13E2036; Thu, 18 Aug 2005 20:50:54 -0400 (EDT)
Received: from [172.16.1.101] (unknown [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 2D9A513E2007
	for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 20:50:24 -0400 (EDT)
In-Reply-To: <34288.65.117.150.250.1124403778.squirrel@65.117.150.250>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>  <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>  <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>  <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com>  <34271.65.117.150.250.1124403381.squirrel@65.117.150.250> <1124403498.6381.5.camel@localhost> <34288.65.117.150.250.1124403778.squirrel@65.117.150.250>
Mime-Version: 1.0 (Apple Message framework v733)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <27034F9C-8B79-49A4-B04B-A6C355CB9104@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Case-sensitive search
Date: Thu, 18 Aug 2005 20:50:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 18, 2005, at 6:22 PM, tareque@controldocs.com wrote:

>> On Thu, 2005-08-18 at 17:16, tareque@controldocs.com wrote:
>>
>>> Thanks again! The analyzer is working now. But seems like  
>>> actually the
>>> QueryParser I am using is probably converting the queries to  
>>> lowercase
>>> first. Is there any way to stop that? Here is the line of code  
>>> where I
>>> am
>>> parsing:
>>>
>>> Query query = QueryParser.parse(line, "contents", analyzer);
>>>
>>> As for analyzer, I have tried both StardaAnalyzer and StopAnalyzer.
>>>
>>
>> You need to use the same analyzer for parsing queries as you do for
>> indexing content.
>>
>> Luke Francl
>>
>>
>
> Actually I have used StopAn for indexing. So used the same for parsing
> queries, but it's still converting the queries to lowercase before  
> running
> the actually search

Both of those analyzers lowercase.  When you said it was working,  
what did you mean?   To prevent lowercasing and get stop words  
removed you *will* have to write a custom analyzer.  Also keep in  
mind that StopFilter is case-sensitive and that the stop word list is  
all lowercase - so you will need to account for this with a custom  
stop filter probably too.

It is highly recommended to "analyze the analyzer" - a topic covered  
in depth in the Analysis chapter in Lucene in Action, and one of my  
java.net articles.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 03:26:25 2005
Return-Path: <java-user-return-15933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87964 invoked from network); 19 Aug 2005 03:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 03:26:25 -0000
Received: (qmail 1837 invoked by uid 500); 19 Aug 2005 03:26:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1808 invoked by uid 500); 19 Aug 2005 03:26:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1795 invoked by uid 99); 19 Aug 2005 03:26:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 20:26:20 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Aug 2005 20:26:39 -0700
Received: by rproxy.gmail.com with SMTP id 1so126386rny
        for <java-user@lucene.apache.org>; Thu, 18 Aug 2005 20:26:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=f345XxM7S7MV2Ta+FDdchGm+jt5HmKf5v5wgCafO1gDhM4gxD8dzPqJ9Ksd998hKpsIDdnNiPdQvNZXDQlMn9I88qD5e7BgNGmAvrGVYhJk39YEhdXAOlSLKDPjfslcv5D9dy7SJZFJt15eJ7KE3nCnpnXRLKyh2r74PskyGQNQ=
Received: by 10.38.195.30 with SMTP id s30mr8734rnf;
        Thu, 18 Aug 2005 20:26:18 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Thu, 18 Aug 2005 20:26:18 -0700 (PDT)
Message-ID: <7ca123910508182026399013d3@mail.gmail.com>
Date: Thu, 18 Aug 2005 20:26:18 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MySimilarity with Lucene 1.2 ?
In-Reply-To: <11479.1124388038@www13.gmx.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <11479.1124388038@www13.gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,=20

I hacked the lucene 1.2 a little while ago and I am trying to use my
own similarity algorithm. If you are interested in the changes I have
made to the Lucene 1.2, you can email me back at chenjian1227 at
gmail.com

Cheers,

Jian


On 8/18/05, Karl Koch <TheRanger@gmx.net> wrote:
> Hello Lucene experts,
>=20
> as you might have seen in my previous postings, I am bound to use not mor=
e
> than Lucene 1.2 (due to hardware limitations I can only use Java 1.1 or
> 1.2).
>=20
> I would like to do my own Similarity implementation which, I think, would
> allow me to insert other algorithms in Lucene which would enable me to
> compare different IR algoritms with Lucene as a framework. I got advice f=
rom
> here to use DefaultSimiliarity. However, this class was, accoding to the
> JavaDoc and the CHANGE text file, only introduced in Lucene 1.3. In Lucen=
e
> 1.2 it seems to be all hard and solid coded without the intension to have
> flexiblility at this point.
>=20
> Now some questions:
>=20
> 1) Am I wrong here and does somebody know a strategy which could allow me=
 to
> have an enhancement that could allow me to add my own IR similarity
> algoritm?
>=20
> 2) Does somebody know how to hack the Lucene code in order to make it
> happen? I presume some code changes could do that: Either changes in the
> Similarity class directly or a change of Similarity to non-final (plus
> setters to set new similarities like in Lucene 1.3).
>=20
> Any other suggestions? I generally like the small-ness of Lucene 1.2 but =
it
> is just that I would like to have a little bit more flexiblity at one
> point...
>=20
> Karl
>=20
> --
> Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
> Satte Provisionen f=FCr GMX Partner: http://www.gmx.net/de/go/partner
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 07:03:09 2005
Return-Path: <java-user-return-15934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46117 invoked from network); 19 Aug 2005 07:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 07:03:09 -0000
Received: (qmail 63090 invoked by uid 500); 19 Aug 2005 07:03:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62729 invoked by uid 500); 19 Aug 2005 07:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62607 invoked by uid 99); 19 Aug 2005 07:03:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 00:03:00 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Aug 2005 00:03:18 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ILGKJ700.A7U for <java-user@lucene.apache.org>; Fri, 19
          Aug 2005 12:53:31 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: DEFAULT_OPERATOR_AND
Date: Fri, 19 Aug 2005 12:42:39 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKCEDECFAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <77D15601-6C15-4B8C-B212-7BBF5A2A079E@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik

 Apologies...........


 With refrence to the code as below


public static Query Sparse(String texts, String[] fields, Analyzer analyzer)
{
	Query bQuery = null;
	try {
		for (int i = 0; i < fields.length; i++) {
			QueryParser qp = new QueryParser(fields[i], analyzer);

qp.setOperator(org.apache.lucene.queryParser.QueryParser.DEFAULT_OPERATOR_AN
D);
			bQuery = qp.parse(texts);
			System.out.println("QUERY ANDED :" + bQuery.toString());
		}
	} catch(Exception pxe) {pxe.printStackTrace();}
	return bQuery;
}

Using a search word  = 'blue dial watch'

The Query Represented as   +(content:blue content:dial content:watch)

returned me more then 100+ hits

But When used the Query representation on the same Index using LUKE

+content:blue +content:dial +content:watch

returned 10+ hits

Please can u give enlighten me  with more some ideas....


With regards
Karthik




-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Thursday, August 18, 2005 4:07 PM
To: java-user@lucene.apache.org
Subject: Re: DEFAULT_OPERATOR_AND



On Aug 18, 2005, at 1:48 AM, Karthik N S wrote:
> Does this mean MultiFieldQueryParser will always have to use
> 'DEFAULT_OPERATOR_OR' instead of DEFAULT_OPERATOR_AND
> operations.

Yup, that's what I said :)

>   Is there any alternative in handling this processs ( other then API
> 'replaceAll(" ", " AND ")' substution)

Of course there are alternatives!   MFQP is merely a thin layer on
top of QueryParser.  You're free to create Query's anyway you like.
Here's one of the parse methods from MFQP:

   public static Query parse(String[] queries, String[] fields,
       Analyzer analyzer) throws ParseException
   {
     if (queries.length != fields.length)
       throw new IllegalArgumentException("queries.length !=
fields.length");
     BooleanQuery bQuery = new BooleanQuery();
     for (int i = 0; i < fields.length; i++)
     {
       QueryParser qp = new QueryParser(fields[i], analyzer);
       Query q = qp.parse(queries[i]);
       bQuery.add(q, BooleanClause.Occur.SHOULD);
     }
     return bQuery;
   }

You could simply create a piece of code like that with the
setOperator in there.

     Erik



>
>
> Please enlighten me
>
>
>
> With regards
> Karthik
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, August 18, 2005 7:09 AM
> To: java-user@lucene.apache.org
> Subject: Re: DEFAULT_OPERATOR_AND
>
>
>
> On Aug 17, 2005, at 2:45 AM, Karthik N S wrote:
>
>> Hi  Lucener's
>>
>> Apologies..........
>>
>> I have seen forms using  'DEFAULT_OPERATOR_AND'  with  something
>> like below
>>
>>
>>> QueryParser parser = new QueryParser( "terms", analyzer);
>>> parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>>> query = parser.parse(TextParameters);
>>>
>>
>> How to use the DEFAULT_OPERATOR_AND  when using
>> MultiFieldQueryParser  as below
>>
>> "query = MultiFieldQueryParser.parse("text",fields,analyzer);" ?
>>
>> [ I also searched the other Form's for same but no answers.]
>>
>
> MultiFieldQueryParser does not adhere to the default operator
> setting, and will always use OR.
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 07:13:51 2005
Return-Path: <java-user-return-15935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48384 invoked from network); 19 Aug 2005 07:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 07:13:51 -0000
Received: (qmail 76087 invoked by uid 500); 19 Aug 2005 07:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75574 invoked by uid 500); 19 Aug 2005 07:13:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75561 invoked by uid 99); 19 Aug 2005 07:13:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 00:13:45 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 00:14:04 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7J7DgiI050155
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 09:13:42 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Token Filter question
Date: Fri, 19 Aug 2005 09:13:41 +0200
User-Agent: KMail/1.5.4
References: <4304E6DF.5030405@gmail.com>
In-Reply-To: <4304E6DF.5030405@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508190913.42173.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 18 August 2005 21:51, Dan Armbrust wrote:
> I am implementing a filter that will remove certain characters from the 
> tokens - thing like '(', etc - but the chars to be removed will be 
> customizable.
> 
> This is what I have come up with - but it doesn't seem very efficient.  
> Is there a better way?
> Should I be adjusting the token endOffset when I remove characters?  If 
> I end up removing all characters, should I be returning null, rather 
> than returning a token with no text?
> 
> 
> 
> public class CharRemovingFilter extends TokenFilter
> {
>     StringBuffer temp = new StringBuffer();
>     Set          charsToRemove;
> 
>     /**
>      * Builds a Set from an array of chars to remove, appropriate for 
> passing into the
>      * CharRemovingFilter constructor.
>      */
>     public static final Set makeCharRemovalSet(char[] charsToRemove)
>     {
>         HashSet temp = new HashSet(charsToRemove.length);
>         for (int i = 0; i < charsToRemove.length; i++)
>         {
>             temp.add(new Character(charsToRemove[i]));
>         }
>         return temp;
>     }
> 
>     public CharRemovingFilter(TokenStream in, Set charsToRemove)
>     {
>         super(in);
>         this.charsToRemove = charsToRemove;
>     }
> 
>     public Token next() throws IOException
>     {
>         Token t = input.next();
> 
>         if (t == null)
>         {
>             return null;
>         }
> 
>         temp.setLength(0);
> 
>         for (int i = 0; i < t.termText().length(); i++)
>         {
>             if (!charsToRemove.contains(new 
> Character(t.termText().charAt(i))))

I'd expect String.indexOf( .... .charAt(i)) to be faster than
creating a new Character.

For this for loop, using String.replace() of java 1.5 might be faster
than hashing. Removing the replaced characters would need
one more scan.
What is the maximum int value of a Unicode character anyway?

Other than that, when the int value of the input characters
is small enough, one can create a table mapping
all chars to their replacements and index this table.

Removing the replaced chars can then be done by not
incrementing the target index for a replacement character
indicating deletion.

Inlining the t.termText() method call will probably help in any case.


Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 10:41:50 2005
Return-Path: <java-user-return-15936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10443 invoked from network); 19 Aug 2005 10:41:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 10:41:50 -0000
Received: (qmail 89261 invoked by uid 500); 19 Aug 2005 10:41:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88739 invoked by uid 500); 19 Aug 2005 10:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88726 invoked by uid 99); 19 Aug 2005 10:41:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 03:41:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.50] (HELO rivette.int.mediasurface.com) (193.123.241.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 03:42:03 -0700
Received: from rivette.int.mediasurface.com (localhost [127.0.0.1])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j7JAfdX09544
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 11:41:39 +0100 (BST)
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j7JAfcm09540
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 11:41:38 +0100 (BST)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: OutOfMemory error when searching
Date: Fri, 19 Aug 2005 11:41:38 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308AD38DA3@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemory error when searching
Thread-Index: AcWkH/3QzDtNVl2NQ/CAanRkTo/B8wAijbvg
From: "Peter Gelderbloem" <Peter.Gelderbloem@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
I foresee that I may run into similar problems as I am opening and
closing IndexSearchers all over the place.=20
Unfortunately I do not see a way to keep the IndexSearcher open as
indexing occurs at random times in my system and the searches need to be
current.
Any suggestions on how to reuse the IndexSearcher in this situation?

Peter=20
-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org]=20
Sent: 18 August 2005 19:09
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory error when searching

Fredrik wrote:
> Opening the index with Luke, I can see the following:
> Number of fields: 17
> Number of documents: 1165726
> Number of terms: 6721726
>=20
> The size of the index is approx 5,3 GB.
> Lucene version is 1.4.3.
>=20
> The index contains Norwegian terms, but lots of inline HTML, etc
> is probably increasing the index term count (should 'wash' these
> unwanted terms away when indexing documents). The analysis below
> shows that TermInfosReader.java:132 -> get() is trying to allocate
> a huge memory slab.
[ ... ]
> 'need 532676624 bytes' means that something is allocating a 500Mb slab
> of memory.

Lucene will try to allocate an array of 6721726/128 ~=3D 50k terms.  The =

array alone will require a 200kB "slab" and the terms perhaps 1MB or=20
more.  But not 500MB.  So I think something else is the culprit here.

Have you tried inserting print statements at the suspected allocations,=20
to see how big the arrays actually are?  Are you perhaps creating a new=20
IndexSearcher per search, rather than reusing a single IndexSearcher?=20
1MB per query could quickly exhaust RAM if the GC can't keep up.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 10:43:04 2005
Return-Path: <java-user-return-15937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10554 invoked from network); 19 Aug 2005 10:43:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 10:43:04 -0000
Received: (qmail 89988 invoked by uid 500); 19 Aug 2005 10:42:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89953 invoked by uid 500); 19 Aug 2005 10:42:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89939 invoked by uid 99); 19 Aug 2005 10:42:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 03:42:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.74.127.3] (HELO svr.ftp1.com) (64.74.127.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 03:43:18 -0700
Received: from graphite by svr.ftp1.com with local (Exim 4.44)
	id 1E64Kt-00027Y-Jw
	for java-user@lucene.apache.org; Fri, 19 Aug 2005 05:42:55 -0500
Received: from 192.223.163.5 ([192.223.163.5])
        (SquirrelMail authenticated user tony@simpleobjects.com)
        by www.simpleobjects.com with HTTP;
        Fri, 19 Aug 2005 06:42:55 -0400 (EDT)
Message-ID: <29603.192.223.163.5.1124448175.squirrel@www.simpleobjects.com>
In-Reply-To: <4304E605.1050301@apache.org>
References: <92A278501EF50444AD3EE1FFB51219550BCE393F@emss10m03.us.lmco.com> 
      <9901.192.223.163.5.1124373371.squirrel@www.simpleobjects.com>   
    <4304CD07.2040305@apache.org>
    <26186.192.223.163.5.1124392952.squirrel@www.simpleobjects.com>
    <4304E605.1050301@apache.org>
Date: Fri, 19 Aug 2005 06:42:55 -0400 (EDT)
Subject: Re: OutOfMemoryError on addIndexes()
From: "Tony Schwartz" <tony@simpleobjects.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - svr.ftp1.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32036 808] / [47 12]
X-AntiAbuse: Sender Address Domain - simpleobjects.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Aha, it's not initially clear, but after looking at it more closely, I see how it works
now.  This is very good to know.

Tony Schwartz
tony@simpleobjects.com




> Tony Schwartz wrote:
>> What about the TermInfosReader class?  It appears to read the entire term set for the
>> segment into 3 arrays.  Am I seeing double on this one?
>>
>> p.s.  I am looking at the current sources.
>>
>> see TermInfosReader.ensureIndexIsRead();
>
> The index only has 1/128 of the terms, by default.  You're right however
> that there are three arrays, not just one, I'd forgotten that.  So, with
> 6M terms you'd have a 50k term index.  Two 200kB arrays (pointer) and
> one 400kB array (long) would be allocated, plus the data to fill them.
> So the total might be closer to a few MB.
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 10:47:03 2005
Return-Path: <java-user-return-15938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11515 invoked from network); 19 Aug 2005 10:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 10:47:03 -0000
Received: (qmail 93747 invoked by uid 500); 19 Aug 2005 10:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93722 invoked by uid 500); 19 Aug 2005 10:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93709 invoked by uid 99); 19 Aug 2005 10:46:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 03:46:59 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.193.196] (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 03:47:17 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 6CD552E0E1
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 13:46:52 +0300 (EEST)
Message-ID: <4305B8D5.6070109@i-hypergrid.com>
Date: Fri, 19 Aug 2005 13:47:49 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory error when searching
References: <BE3E7BC7F7553B4A9362D4192ECD308AD38DA3@neptune.int.mediasurface.com>
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308AD38DA3@neptune.int.mediasurface.com>
Content-Type: multipart/alternative;
 boundary="------------040409090504080903080105"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------040409090504080903080105
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,
IndexReader class has static method getCurrentVersion.
you can check index version and if was changed since last time then 
reopen IndexSearcher.

Peter Gelderbloem wrote:

>Hi,
>I foresee that I may run into similar problems as I am opening and
>closing IndexSearchers all over the place. 
>Unfortunately I do not see a way to keep the IndexSearcher open as
>indexing occurs at random times in my system and the searches need to be
>current.
>Any suggestions on how to reuse the IndexSearcher in this situation?
>
>Peter 
>-----Original Message-----
>From: Doug Cutting [mailto:cutting@apache.org] 
>Sent: 18 August 2005 19:09
>To: java-user@lucene.apache.org
>Subject: Re: OutOfMemory error when searching
>
>Fredrik wrote:
>  
>
>>Opening the index with Luke, I can see the following:
>>Number of fields: 17
>>Number of documents: 1165726
>>Number of terms: 6721726
>>
>>The size of the index is approx 5,3 GB.
>>Lucene version is 1.4.3.
>>
>>The index contains Norwegian terms, but lots of inline HTML, etc
>>is probably increasing the index term count (should 'wash' these
>>unwanted terms away when indexing documents). The analysis below
>>shows that TermInfosReader.java:132 -> get() is trying to allocate
>>a huge memory slab.
>>    
>>
>[ ... ]
>  
>
>>'need 532676624 bytes' means that something is allocating a 500Mb slab
>>of memory.
>>    
>>
>
>Lucene will try to allocate an array of 6721726/128 ~= 50k terms.  The 
>array alone will require a 200kB "slab" and the terms perhaps 1MB or 
>more.  But not 500MB.  So I think something else is the culprit here.
>
>Have you tried inserting print statements at the suspected allocations, 
>to see how big the arrays actually are?  Are you perhaps creating a new 
>IndexSearcher per search, rather than reusing a single IndexSearcher? 
>1MB per query could quickly exhaust RAM if the GC can't keep up.
>
>Doug
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

-- 
regards,
Volodymyr Bychkoviak


--------------040409090504080903080105--

From java-user-return-15939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 11:12:07 2005
Return-Path: <java-user-return-15939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23399 invoked from network); 19 Aug 2005 11:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 11:12:06 -0000
Received: (qmail 33941 invoked by uid 500); 19 Aug 2005 11:12:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33743 invoked by uid 500); 19 Aug 2005 11:12:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33730 invoked by uid 99); 19 Aug 2005 11:12:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 04:12:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.50] (HELO rivette.int.mediasurface.com) (193.123.241.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 04:12:20 -0700
Received: from rivette.int.mediasurface.com (localhost [127.0.0.1])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j7JBBvX12957
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 12:11:57 +0100 (BST)
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j7JBBum12953
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 12:11:56 +0100 (BST)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Case-sensitive search
Date: Fri, 19 Aug 2005 12:11:56 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308AD38DB4@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case-sensitive search
Thread-Index: AcWkWBL5Sc5x3KczTbem2EH2l3jQKgAVpfow
From: "Peter Gelderbloem" <Peter.Gelderbloem@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't really need this at the moment, but need to know:

Is it conceivable to make a configurable analyzer with dynamically added
filters?

Peter=20
-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 19 August 2005 01:50
To: java-user@lucene.apache.org
Subject: Re: Case-sensitive search


On Aug 18, 2005, at 6:22 PM, tareque@controldocs.com wrote:

>> On Thu, 2005-08-18 at 17:16, tareque@controldocs.com wrote:
>>
>>> Thanks again! The analyzer is working now. But seems like =20
>>> actually the
>>> QueryParser I am using is probably converting the queries to =20
>>> lowercase
>>> first. Is there any way to stop that? Here is the line of code =20
>>> where I
>>> am
>>> parsing:
>>>
>>> Query query =3D QueryParser.parse(line, "contents", analyzer);
>>>
>>> As for analyzer, I have tried both StardaAnalyzer and StopAnalyzer.
>>>
>>
>> You need to use the same analyzer for parsing queries as you do for
>> indexing content.
>>
>> Luke Francl
>>
>>
>
> Actually I have used StopAn for indexing. So used the same for parsing
> queries, but it's still converting the queries to lowercase before =20
> running
> the actually search

Both of those analyzers lowercase.  When you said it was working, =20
what did you mean?   To prevent lowercasing and get stop words =20
removed you *will* have to write a custom analyzer.  Also keep in =20
mind that StopFilter is case-sensitive and that the stop word list is =20
all lowercase - so you will need to account for this with a custom =20
stop filter probably too.

It is highly recommended to "analyze the analyzer" - a topic covered =20
in depth in the Analysis chapter in Lucene in Action, and one of my =20
java.net articles.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 11:14:01 2005
Return-Path: <java-user-return-15940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24072 invoked from network); 19 Aug 2005 11:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 11:14:01 -0000
Received: (qmail 38273 invoked by uid 500); 19 Aug 2005 11:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38237 invoked by uid 500); 19 Aug 2005 11:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38224 invoked by uid 99); 19 Aug 2005 11:13:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 04:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 04:14:12 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9C3A913E2034; Fri, 19 Aug 2005 07:13:50 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dhcp.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 7D36D13E200A
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 07:13:21 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKCEDECFAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKCEDECFAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v733)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BE9E3CDF-1ADA-4A92-91BE-948253F381FF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: DEFAULT_OPERATOR_AND
Date: Fri, 19 Aug 2005 07:13:19 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 19, 2005, at 3:12 AM, Karthik N S wrote:
>  With refrence to the code as below
>
>
> public static Query Sparse(String texts, String[] fields, Analyzer  
> analyzer)
> {
>     Query bQuery = null;
>     try {
>         for (int i = 0; i < fields.length; i++) {
>             QueryParser qp = new QueryParser(fields[i], analyzer);
>
> qp.setOperator 
> (org.apache.lucene.queryParser.QueryParser.DEFAULT_OPERATOR_AN
> D);
>             bQuery = qp.parse(texts);
>             System.out.println("QUERY ANDED :" + bQuery.toString());
>         }
>     } catch(Exception pxe) {pxe.printStackTrace();}
>     return bQuery;
> }
>
> Using a search word  = 'blue dial watch'
>
> The Query Represented as   +(content:blue content:dial content:watch)
>
> returned me more then 100+ hits
>
> But When used the Query representation on the same Index using LUKE
>
> +content:blue +content:dial +content:watch
>
> returned 10+ hits
>
> Please can u give enlighten me  with more some ideas....

Well sure.... you're not building a BooleanQuery as shown in the  
original code from MFQP.  Simply copy the code I provided, and add  
the setOperator into it.  You left out important stuff!

     Erik

>
>
> With regards
> Karthik
>
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, August 18, 2005 4:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: DEFAULT_OPERATOR_AND
>
>
>
> On Aug 18, 2005, at 1:48 AM, Karthik N S wrote:
>
>> Does this mean MultiFieldQueryParser will always have to use
>> 'DEFAULT_OPERATOR_OR' instead of DEFAULT_OPERATOR_AND
>> operations.
>>
>
> Yup, that's what I said :)
>
>
>>   Is there any alternative in handling this processs ( other then API
>> 'replaceAll(" ", " AND ")' substution)
>>
>
> Of course there are alternatives!   MFQP is merely a thin layer on
> top of QueryParser.  You're free to create Query's anyway you like.
> Here's one of the parse methods from MFQP:
>
>    public static Query parse(String[] queries, String[] fields,
>        Analyzer analyzer) throws ParseException
>    {
>      if (queries.length != fields.length)
>        throw new IllegalArgumentException("queries.length !=
> fields.length");
>      BooleanQuery bQuery = new BooleanQuery();
>      for (int i = 0; i < fields.length; i++)
>      {
>        QueryParser qp = new QueryParser(fields[i], analyzer);
>        Query q = qp.parse(queries[i]);
>        bQuery.add(q, BooleanClause.Occur.SHOULD);
>      }
>      return bQuery;
>    }
>
> You could simply create a piece of code like that with the
> setOperator in there.
>
>      Erik
>
>
>
>
>>
>>
>> Please enlighten me
>>
>>
>>
>> With regards
>> Karthik
>>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Thursday, August 18, 2005 7:09 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: DEFAULT_OPERATOR_AND
>>
>>
>>
>> On Aug 17, 2005, at 2:45 AM, Karthik N S wrote:
>>
>>
>>> Hi  Lucener's
>>>
>>> Apologies..........
>>>
>>> I have seen forms using  'DEFAULT_OPERATOR_AND'  with  something
>>> like below
>>>
>>>
>>>
>>>> QueryParser parser = new QueryParser( "terms", analyzer);
>>>> parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
>>>> query = parser.parse(TextParameters);
>>>>
>>>>
>>>
>>> How to use the DEFAULT_OPERATOR_AND  when using
>>> MultiFieldQueryParser  as below
>>>
>>> "query = MultiFieldQueryParser.parse("text",fields,analyzer);" ?
>>>
>>> [ I also searched the other Form's for same but no answers.]
>>>
>>>
>>
>> MultiFieldQueryParser does not adhere to the default operator
>> setting, and will always use OR.
>>
>>      Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 11:31:27 2005
Return-Path: <java-user-return-15941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28868 invoked from network); 19 Aug 2005 11:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 11:31:26 -0000
Received: (qmail 59278 invoked by uid 500); 19 Aug 2005 11:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59252 invoked by uid 500); 19 Aug 2005 11:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59239 invoked by uid 99); 19 Aug 2005 11:31:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 04:31:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.159.1.214] (HELO epost.start.no) (195.159.1.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 04:31:39 -0700
Received: (from apache@localhost)
	by epost.start.no (8.11.6/8.11.2) id j7JBTFX27356
	for java-user@lucene.apache.org; Fri, 19 Aug 2005 13:29:15 +0200
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory error when searching
Message-ID: <1124450955.4305c28b1bdad@epost.start.no>
Date: Fri, 19 Aug 2005 13:29:15 +0200 (CEST)
From: Fredrik <fredrio@start.no>
References: <BE3E7BC7F7553B4A9362D4192ECD308AD38DA3@neptune.int.mediasurface.com> <4305B8D5.6070109@i-hypergrid.com>
In-Reply-To: <4305B8D5.6070109@i-hypergrid.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: IMP/PHP IMAP webmail program 2.2.8
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry about the previous stack trace -- that was a wild goose-chase. 
Here is the real culprit:

 at
org.apache.lucene.index.SegmentTermEnum.growBuffer(SegmentTermEnum.java(Compiled
Code))
 at
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java(Compiled
Code))
 at
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java(Compiled
Code))
 at
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java(Compiled
Code))
 at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java(Compiled
Code))
 at
org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java(Compiled
Code))
 at
org.apache.lucene.index.MultiReader.docFreq(MultiReader.java(Compiled Code))
 at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:69)
 at org.apache.lucene.search.Similarity.idf(Similarity.java:255)
 at
org.apache.lucene.search.TermQuery$TermWeight.sumOfSquaredWeights(TermQuery.java:47)
 at
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110)
 at
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110)
 at org.apache.lucene.search.Query.weight(Query.java(Compiled Code))
 at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java(Compiled
Code))
 at org.apache.lucene.search.Hits.getMoreDocs(Hits.java(Compiled Code))
 at org.apache.lucene.search.Hits.<init>(Hits.java:43)
 at org.apache.lucene.search.Searcher.search(Searcher.java(Compiled Code))

the growBuffer contains:
  buffer = new char[length]
length is the result of two readVInt() on the "tii" file (start + length)

I made a local copy of the largest "tii" file and (using beanshell) read
the two "variable ints":
bsh % d = org.apache.lucene.store.FSDirectory.getDirectory("/tmp/", false);
bsh % i = d.openFile("copy.tii");
bsh % print (i.readVInt());
266338303
bsh % print (i.readVInt());
0

In other words (If I read the code correctly) _start_ is set to
266338303 while 'length' is set to 0.  growBuffer allocates a char
array, and (according to our GC logs) allocates 532676624 bytes (which
is 266338303*2 + 18)  I am guessing the 18 additional bytes is type
information, which is probably JVM-dependent.

So now the question becomes more direct:  Why on earth does our biggest
segment think that it starts at 266 million characters?

I just noticed that the hex value of the 266-million-tingy is ... ...
drumroll ... ... fdfffff

Now I'm thinking that either the read/write-operations dont work 100% or
that there's a corrupt index.  However we _have_ tried to rebuild the
index from scratch, so I don't think it's a corrupt index.


And finally, the start of the 'tii' file is as follows:

$ hexdump /tmp/test.tii | head
0000000 ffff feff 0000 0000 0000 f3cc 0000 8000
0000010 0000 1000 0000 0000 0000 0014 3107 3030
0000020 3130 3831 0104 02fd 897f 0407 3203 3034
0000030 0104 0380 0180 0788 0304 3633 0430 8001


Regards,
Fredrik


-------------------------------------------------------------------------
Start.no tilbyr n raskere bredbnd til lavere pris.
Sjekk http://www.start.no/bredband/ for mer informasjon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 12:40:07 2005
Return-Path: <java-user-return-15942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49326 invoked from network); 19 Aug 2005 12:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 12:40:06 -0000
Received: (qmail 43889 invoked by uid 500); 19 Aug 2005 12:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43861 invoked by uid 500); 19 Aug 2005 12:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43848 invoked by uid 99); 19 Aug 2005 12:40:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 05:40:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 05:40:19 -0700
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id j7JCdsJL021103
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 15:39:55 +0300
Message-ID: <4305D31A.8030607@sirma.bg>
Date: Fri, 19 Aug 2005 15:39:54 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: QueryParser issue
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Recently I found that it makes difference whether your query looks like:
A AND NOT B
or it is
A AND (NOT B)
Some research using Luke showed that in the first case the query is 
rewritten as:
+A -B
while the second is rewritten as
+A +(-B)
after the usual "wtf?" I've recalled that there was a dicussion on this 
issue on the lucene uses list.
I found it and yes, it was explaining that QueryParser is rather 
primitive and does not take the usual
operator precedence into account.
Then I read the explanation of types of queries in the "Lucene in 
Action" and everything seemed clear for a moment,
except:
Why the two above mentioned queries return different results?
Is it because the first one means: "get all docs that contain A and do 
not contain B"
and the second one means "get all docs that contain A and intersect them 
with the docs returned from the query (-B)"
and (-B) as a pure negative query returns 0 results ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 15:40:00 2005
Return-Path: <java-user-return-15943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3188 invoked from network); 19 Aug 2005 15:40:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 15:40:00 -0000
Received: (qmail 81951 invoked by uid 500); 19 Aug 2005 14:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81922 invoked by uid 500); 19 Aug 2005 14:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81909 invoked by uid 99); 19 Aug 2005 14:35:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 07:35:56 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 07:36:14 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j7JEZrQF029927
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 09:35:53 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Fri, 19 Aug 2005 09:35:53 -0500 (CDT)
Message-ID: <38371.65.117.150.250.1124462153.squirrel@65.117.150.250>
In-Reply-To: <27034F9C-8B79-49A4-B04B-A6C355CB9104@ehatchersolutions.com>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250> 
    <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com> 
    <33647.65.117.150.250.1124396164.squirrel@65.117.150.250> 
    <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com> 
    <34271.65.117.150.250.1124403381.squirrel@65.117.150.250>
    <1124403498.6381.5.camel@localhost>
    <34288.65.117.150.250.1124403778.squirrel@65.117.150.250>
    <27034F9C-8B79-49A4-B04B-A6C355CB9104@ehatchersolutions.com>
Date: Fri, 19 Aug 2005 09:35:53 -0500 (CDT)
Subject: Re: Case-sensitive search
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>
> On Aug 18, 2005, at 6:22 PM, tareque@controldocs.com wrote:
>
>>> On Thu, 2005-08-18 at 17:16, tareque@controldocs.com wrote:
>>>
>>>> Thanks again! The analyzer is working now. But seems like
>>>> actually the
>>>> QueryParser I am using is probably converting the queries to
>>>> lowercase
>>>> first. Is there any way to stop that? Here is the line of code
>>>> where I
>>>> am
>>>> parsing:
>>>>
>>>> Query query = QueryParser.parse(line, "contents", analyzer);
>>>>
>>>> As for analyzer, I have tried both StardaAnalyzer and StopAnalyzer.
>>>>
>>>
>>> You need to use the same analyzer for parsing queries as you do for
>>> indexing content.
>>>
>>> Luke Francl
>>>
>>>
>>
>> Actually I have used StopAn for indexing. So used the same for parsing
>> queries, but it's still converting the queries to lowercase before
>> running
>> the actually search
>
> Both of those analyzers lowercase.  When you said it was working,
> what did you mean?   To prevent lowercasing and get stop words
> removed you *will* have to write a custom analyzer.  Also keep in
> mind that StopFilter is case-sensitive and that the stop word list is
> all lowercase - so you will need to account for this with a custom
> stop filter probably too.
>
> It is highly recommended to "analyze the analyzer" - a topic covered
> in depth in the Analysis chapter in Lucene in Action, and one of my
> java.net articles.
>
>      Erik
>

It's all working now. I did write a custom analyzer using the
StopAnalyzer, which correctly indexed. The problem was, when I was parsing
the query I forgot to use my new analyzer and was using the old
StopAnalyzer instead. Thanks for all the help!

Tareque


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 16:09:03 2005
Return-Path: <java-user-return-15944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26600 invoked from network); 19 Aug 2005 16:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 16:09:03 -0000
Received: (qmail 46859 invoked by uid 500); 19 Aug 2005 15:04:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46838 invoked by uid 500); 19 Aug 2005 15:04:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46824 invoked by uid 99); 19 Aug 2005 15:04:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 08:04:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jadavis@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO rproxy.gmail.com) (64.233.170.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 08:05:15 -0700
Received: by rproxy.gmail.com with SMTP id g11so557750rne
        for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 08:04:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=sdWWi5rNlcgrvjXZ6O1gD62jibIY5+Vlb/pbPzIYOQyxt7Exa4DvdFio1XXBYm1YObhvKvwvCHUy8O78jaVLiubmFISiCG3ZWvjZgSh/YmQuXDdXI/GyL+bRfbBwCh6PCoTp9Je7T3xfBRnFJWkCynVbcqoYrVuUuQCAfyQbE/8=
Received: by 10.39.1.26 with SMTP id d26mr164489rni;
        Fri, 19 Aug 2005 08:04:55 -0700 (PDT)
Received: by 10.39.1.13 with HTTP; Fri, 19 Aug 2005 08:04:55 -0700 (PDT)
Message-ID: <418eb29d05081908043ad525e9@mail.gmail.com>
Date: Fri, 19 Aug 2005 10:04:55 -0500
From: Jeff Davis <jadavis@gmail.com>
To: java-user@lucene.apache.org
Subject: Most efficient "all documents" query?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am using Lucene to index system and application log files.  When a
user first goes to the Log Viewer, I want them to see all log
messages.  From there, they can choose to search for something more
specific.

Since the "all" query will be by far the most frequently used one, I'd
like to make it as efficient as possible.  Right now I'm using a
default query that I know will match all messages in all logs, sort of
like this:

LogType:(type1 type2 type3)

...where each log message (Document) has a Field called "LogType",
whose value is one of those three types.  I'm running it through the
query parser at present; if I end up sticking with this method I'll
just build a BooleanQuery with a clause for each log type to avoid the
parsing overhead.

Other than the BooleanQuery, is there a more efficient way of asking
for all Documents?

Thanks,
Jeff

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 16:09:30 2005
Return-Path: <java-user-return-15945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26856 invoked from network); 19 Aug 2005 16:09:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 16:09:30 -0000
Received: (qmail 75084 invoked by uid 500); 19 Aug 2005 16:09:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74897 invoked by uid 500); 19 Aug 2005 16:09:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74884 invoked by uid 99); 19 Aug 2005 16:09:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 09:09:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 09:09:43 -0700
Received: by zproxy.gmail.com with SMTP id n29so463075nzf
        for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 09:09:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=j++/Tufr2mQayaARwsNjmyBzSVuBwHbCvk9Wqc+7pEfMVScl7D2GicUZd4Q32ocGtcmir/3CDw/qjmL2cgzQu/ayAgD8Mb59R63NAU+ka6K27D3lqcLCJqsk+NwuA8oP99fIDcg8Ng4VMllKNmLc9dfCNKZCofqEJfzE8uzAlO8=
Received: by 10.37.2.57 with SMTP id e57mr1034045nzi;
        Fri, 19 Aug 2005 09:09:23 -0700 (PDT)
Received: by 10.36.10.11 with HTTP; Fri, 19 Aug 2005 09:09:23 -0700 (PDT)
Message-ID: <8837fb77050819090960266323@mail.gmail.com>
Date: Fri, 19 Aug 2005 09:09:23 -0700
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search performance enhancement
In-Reply-To: <200508170844.09122.paul.elschot@xs4all.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8837fb7705081619464dbf95c2@mail.gmail.com>
	 <200508170844.09122.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Paul:

      Thanks for the pointer.

       How would I extend from the patch you submitted to filter out
more documents not using a Filter. e.g.

      have a class to skip documents based on a docID: boolean
isValid(int docID)

      My problem is I want to discard documents at query time without
having to construct a BitSet via filter. I have my own memory
structure to help me skip documents based the query and a docid.

Thanks

-John

On 8/16/05, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> Hi John,
>=20
> On Wednesday 17 August 2005 04:46, John Wang wrote:
> > Hi:
> >
> >    I posted a bug (36147) a few days ago and didn't hear anything, so
> > I thought I'd try my luck on this list.
> >
> >    The idea is to avoid score calculations on documents to be filtered
> > out anyway. (e.g. via Filter object passed to the searcher class)
> >
> >    This seems to be an easy change.
>=20
> Have a look here:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=3D32965
>=20
> >    Also it would be nice to expose a method to return a score given a
> > docid, e.g.
> >
> >    float getScore(int docid)
> >
> >    on the Scorer class.
>=20
> skipTo(int docid) and score() will do that.
>=20
> >    I am gonna make the change locally and do some performance analysis
> > on it and will post some numbers later.
>=20
> The default score computations are mostly table lookups, and pretty fast.
> So, unless you have large indexes, this will probably not make
> much difference, but any performance improvement is wellcome.
> In larger indexes, it helps to use skipTo() while searching.
>=20
> Regards,
> Paul Elschot
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 17:01:19 2005
Return-Path: <java-user-return-15946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51099 invoked from network); 19 Aug 2005 17:01:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 17:01:19 -0000
Received: (qmail 68529 invoked by uid 500); 19 Aug 2005 17:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68427 invoked by uid 500); 19 Aug 2005 17:00:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68386 invoked by uid 99); 19 Aug 2005 17:00:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 10:00:51 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.173.108.19] (HELO mail21.messagelabs.com) (62.173.108.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Aug 2005 10:01:09 -0700
X-VirusChecked: Checked
X-Env-Sender: lee.turner@oyster.com
X-Msg-Ref: server-8.tower-21.messagelabs.com!1124470839!26648099!1
X-StarScan-Version: 5.4.15; banners=oyster.com,-,-
X-Originating-IP: [193.132.201.148]
Received: (qmail 4075 invoked from network); 19 Aug 2005 17:00:39 -0000
Received: from mail.oyster.co.uk (HELO opexch2.ad.oyster.com) (193.132.201.148)
  by server-8.tower-21.messagelabs.com with SMTP; 19 Aug 2005 17:00:39 -0000
Received: from opexch1.ad.oyster.com ([10.10.10.83]) by opexch2.ad.oyster.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 19 Aug 2005 18:00:40 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5A4DF.87A0A53D"
Subject: Use of ThreadLocal in TermInfosReader
Date: Fri, 19 Aug 2005 17:59:31 +0100
Message-ID: <B2467B4F52C33C4FB81F5B5433C3D1AC025BB410@opexch1.ad.oyster.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Use of ThreadLocal in TermInfosReader
Thread-Index: AcWk31580oBk19mvTqCA8MqWllsTNQ==
From: "Lee Turner" <Lee.Turner@oyster.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 Aug 2005 17:00:40.0778 (UTC) FILETIME=[877E22A0:01C5A4DF]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5A4DF.87A0A53D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi

=20

We=20am=20currently=20investigating=20an=20issue=20I=20have=20with=20our=20=
application
around=20its=20memory=20consumption.=20=20We=20are=20running=20our=20web=20=
application=20under
load=20with=2020=20users=20and=201GB=20heap=20size=20and=20at=20around=207=
=20hours=20it=20runs=20out
of=20memory.=20=20We=20are=20using=20Lucene=201.4.3=20and=20JDK=201.4.2_06=
.

=20

We=20are=20working=20with=20a=20file=20based=20index=20of=20around=2050000=
=20documents=20with
frequent=20updates.=20=20On=20profiling=20the=20application=20we=20saw=20a=
=20large=20number=20of
ThreadLocal=20entries=20being=20created=20containing=20SegmentTermEnum's.=20=
=20We
tracked=20the=20use=20of=20ThreadLocals=20to=20the=20TermInfosReader=20cla=
ss=20where=20we
noticed=20the=20enumerator=20ThreadLocal=20wasn't=20being=20nulled.=20=20W=
e=20added=20a
finalize=20method=20to=20make=20sure=20this=20happened,=20which=20also=20s=
eems=20to=20have
been=20added=20to=20the=20latest=20source=20code=20in=20the=20lucene=20rep=
ository.=20=20This=20was
the=20method=20we=20added:

=20

=20=20protected=20void=20finalize()=20throws=20Throwable=20{=20=20=20=20tr=
y=20{

=20=20=20=20=20=20=20=20enumerators.set(null);

=20=20=20=20}

=20=20=20=20finally=20{

=20=20=20=20=20=20=20=20super.finalize();

=20=20=20=20}

=20=20}

=20

However,=20this=20didn't=20seem=20to=20clear=20up=20the=20Threadlocal's=20=
that=20were
hanging=20around.=20=20Upon=20further=20investigation=20of=20the=20lucene=20=
source=20we
realised=20that=20the=20SegmentTermEnum=20class=20has=20a=20close=20method=
=20that=20doesn't
seem=20to=20be=20being=20called=20before=20the=20enumerator.set(null)=20me=
thod=20is
called.=20=20We=20therefore=20made=20sure=20that=20this=20was=20called=20i=
n=20the=20finalize=20by
adding=20the=20following:

=20

=20=20protected=20void=20finalize()=20throws=20Throwable=20{

=20=20=20=20//=20System.out.println("Calling=20finalize=20in=20TermInfosRe=
ader");

=20=20=20=20try=20{

=20=20=20=20=20=20=20=20try=20{

=20=20=20=20=20=20=20=20=20=20=20=20getEnum().close();

=20=20=20=20=20=20=20=20}

=20=20=20=20=20=20=20=20catch(IOException=20ioe)

=20=20=20=20=20=20=20=20{}

=20=20=20=20=20=20=20=20enumerators.set(null);

=20=20=20=20}

=20=20=20=20finally=20{

=20=20=20=20=20=20=20=20super.finalize();

=20=20=20=20}

=20=20}

=20

After=20adding=20the=20call=20to=20close()=20on=20the=20SegmentTermEnum=20=
we=20saw=20the
number=20of=20ThreadLocal=20entries=20drop=20dramatically.=20=20However,=20=
when=20we=20now
try=20to=20added=20things=20to=20the=20index=20we=20are=20getting
ArrayIndexOutOfBoundsException's:

=20

java.lang.ArrayIndexOutOfBoundsException:=20159

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:142)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:253)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.index.MultiReader.docFreq(MultiReader.java:192)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:69)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.Similarity.idf(Similarity.java:255)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.TermQuery$TermWeight.sumOfSquaredWeights(TermQu
ery.java:47)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(
BooleanQuery.java:110)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.FilteredQuery$1.sumOfSquaredWeights(FilteredQue
ry.java:65)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(
BooleanQuery.java:110)

=20=20=20=20=20=20=20=20=20=20=20=20at=20org.apache.lucene.search.Query.we=
ight(Query.java:86)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)

=20=20=20=20=20=20=20=20=20=20=20=20at=20org.apache.lucene.search.Hits.get=
MoreDocs(Hits.java:64)

=20=20=20=20=20=20=20=20=20=20=20=20at=20org.apache.lucene.search.Hits.<in=
it>(Hits.java:43)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.Searcher.search(Searcher.java:33)

=20=20=20=20=20=20=20=20=20=20=20=20at
org.apache.lucene.search.Searcher.search(Searcher.java:27)

=20=20=20=20=20=20=20=20=20=20=20=20at
com.oyster.mom.search.SearchImpl.doSearch(SearchImpl.java:93)

=20

We=20are=20really=20sorry=20for=20the=20long=20email=20and=20we=20have=20t=
o=20admit=20that=20we
don't=20know=20the=20lucene=20source=20very=20well=20but=20we=20were=20won=
dering=20whether
anyone=20could=20explain=20why=20when=20the=20SegmentTermEnum=20is=20close=
d=20in=20the
finalize=20it=20causes=20problems=20and=20whether=20anyone=20else=20has=20=
had=20issues=20with
ThreadLocals=20hanging=20around=20?

=20

Any=20help=20would=20be=20greatly=20appreciated.

=20

Many=20thanks

Lee

=20

Lee=20Turner=20|=20Java=20Developer=20|=20Oyster=20Partners=20

D.=20+44=20(0)20=2074461418
T.=20+44=20(0)20=207446=207500=20

www.oyster.com

=20


__________________________________________________________________________=
_______________________________________________
Internet=20communications=20are=20not=20secure=20and=20therefore=20Oyster=20=
Partners=20Ltd=20does=20not=20accept=20legal=20responsibility=20for=20the=20=
contents=20of=20this=20message.=20Any=20views=20or=20opinions=20presented=20=
are=20solely=20those=20of=20the=20author=20and=20do=20not=20necessarily=20=
represent=20those=20of=20Oyster=20Partners=20Ltd.
------_=_NextPart_001_01C5A4DF.87A0A53D--

From java-user-return-15947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 17:37:22 2005
Return-Path: <java-user-return-15947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59332 invoked from network); 19 Aug 2005 17:37:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 17:37:22 -0000
Received: (qmail 19552 invoked by uid 500); 19 Aug 2005 17:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19444 invoked by uid 500); 19 Aug 2005 17:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19382 invoked by uid 99); 19 Aug 2005 17:37:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 10:37:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 10:37:32 -0700
Received: (qmail 10668 invoked from network); 19 Aug 2005 17:37:08 -0000
Received: from unknown (HELO p5496F857.dip.t-dialin.net) ([pbs]695637@[84.150.248.87])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 19 Aug 2005 17:37:08 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Most efficient "all documents" query?
Date: Fri, 19 Aug 2005 19:37:59 +0200
User-Agent: KMail/1.8
References: <418eb29d05081908043ad525e9@mail.gmail.com>
In-Reply-To: <418eb29d05081908043ad525e9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200508191937.59506@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 19 August 2005 17:04, Jeff Davis wrote:

> I am using Lucene to index system and application log files. =C2=A0When a
> user first goes to the Log Viewer, I want them to see all log
> messages. =C2=A0From there, they can choose to search for something more
> specific.

This might be what you are looking for:
http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34946

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 19 18:17:25 2005
Return-Path: <java-user-return-15948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74791 invoked from network); 19 Aug 2005 18:17:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Aug 2005 18:17:25 -0000
Received: (qmail 87275 invoked by uid 500); 19 Aug 2005 18:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86872 invoked by uid 500); 19 Aug 2005 18:17:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86859 invoked by uid 99); 19 Aug 2005 18:17:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 11:17:19 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Aug 2005 11:17:38 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7JIHGeK061703
	for <java-user@lucene.apache.org>; Fri, 19 Aug 2005 20:17:16 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: search performance enhancement
Date: Fri, 19 Aug 2005 20:17:16 +0200
User-Agent: KMail/1.5.4
References: <8837fb7705081619464dbf95c2@mail.gmail.com> <200508170844.09122.paul.elschot@xs4all.nl> <8837fb77050819090960266323@mail.gmail.com>
In-Reply-To: <8837fb77050819090960266323@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508192017.16216.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 19 August 2005 18:09, John Wang wrote:
> Hi Paul:
> 
>       Thanks for the pointer.
> 
>        How would I extend from the patch you submitted to filter out
> more documents not using a Filter. e.g.
> 
>       have a class to skip documents based on a docID: boolean
> isValid(int docID)
> 
>       My problem is I want to discard documents at query time without
> having to construct a BitSet via filter. I have my own memory
> structure to help me skip documents based the query and a docid.

Basically, you need to implement the next() and skipTo(int targetDoc)
methods from Scorer on your memory structure. They are somewhat
redundant (skipTo(doc() + 1) has the same semantics as next(), except
initially), but that is for a mix of historical and performance reasons.
Have a look at how this is done in the posted FilteredQuery class
for SortedVIntList and BitSet.
With only isValid(docId) these next() and skipTo() methods would
have to count over the document numbers, which is less than ideal.

When you use the posted code, iirc it is only necessary to implement the
SkipFilter interface on your memory structure. One can use that interface
to build/cache  such memory structures using an IndexReader, and
from there the DocNrSkipper interface will do the rest (of the top of
my head).
One slight problem with the current Lucene implementation is that
java.lang.BitSet is not interface.

Regards,
Paul Elschot.

> Thanks
> 
> -John
> 
> On 8/16/05, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > Hi John,
> > 
> > On Wednesday 17 August 2005 04:46, John Wang wrote:
> > > Hi:
> > >
> > >    I posted a bug (36147) a few days ago and didn't hear anything, so
> > > I thought I'd try my luck on this list.
> > >
> > >    The idea is to avoid score calculations on documents to be filtered
> > > out anyway. (e.g. via Filter object passed to the searcher class)
> > >
> > >    This seems to be an easy change.
> > 
> > Have a look here:
> > http://issues.apache.org/bugzilla/show_bug.cgi?id=32965
> > 
> > >    Also it would be nice to expose a method to return a score given a
> > > docid, e.g.
> > >
> > >    float getScore(int docid)
> > >
> > >    on the Scorer class.
> > 
> > skipTo(int docid) and score() will do that.
> > 
> > >    I am gonna make the change locally and do some performance analysis
> > > on it and will post some numbers later.
> > 
> > The default score computations are mostly table lookups, and pretty fast.
> > So, unless you have large indexes, this will probably not make
> > much difference, but any performance improvement is wellcome.
> > In larger indexes, it helps to use skipTo() while searching.
> > 
> > Regards,
> > Paul Elschot
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 20 14:39:25 2005
Return-Path: <java-user-return-15949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95569 invoked from network); 20 Aug 2005 14:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2005 14:38:36 -0000
Received: (qmail 93415 invoked by uid 500); 20 Aug 2005 14:38:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93309 invoked by uid 500); 20 Aug 2005 14:38:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 86805 invoked by uid 99); 19 Aug 2005 21:42:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of burtonator@gmail.com designates 64.233.162.197 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Rgo8QL1raW4BJvztW3kJiKc9/VMt0VaqhOOIsYj/a90V17APdNoS5H9uWq+7yjHe1BWf5JcoJbufqa5EKHbDaszyvw5ewK04qa17UzrvFtqarG5Q0sPDA1OztcyT5dZO4ZHVUCOQPDQgvxpKMvJU5JzQlnA9RquVtCfl+MnTMr4=
Message-ID: <30c6373b050819144231447954@mail.gmail.com>
Date: Fri, 19 Aug 2005 14:42:26 -0700
From: Kevin Burton <burtonator@gmail.com>
To: java-user@lucene.apache.org
Subject: NGram Language Categorization Source
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey lucene guys.

I know for a fact that a bunch of you have been curious about language
categorization for a long time now and Java has lacked a solid way to
solve this problem.

Anyway.  This new library that I just released should be easy to tie
into your lucene indexers.  Just use the library on a text (strip the
HTML) and then create a new field in Lucene called LANG (or soemthing)
and then create a filter before you search with JUST that language
code.

I'd love some help with filling out missing languages if anyone has
some spare time.  That help make up for all the hard work I've done
here (nudge.. nudge)

I did a full research of the lang categorization space for Java and I
think this is basically the only library out there.

Good luck
...

I'm working on a blog post describing how blog search engines like
Technorati, PubSub, and Feedster could/should use language
categorization to help deal with the chaos of tagging and full-text
search. Google has done this for a long time now and Technorati has it
in beta.

http://www.feedblog.org/2005/08/ngram_language_.html

--=20
 Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://www.feedblog.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 20 15:41:38 2005
Return-Path: <java-user-return-15950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11212 invoked from network); 20 Aug 2005 15:41:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2005 15:41:38 -0000
Received: (qmail 24090 invoked by uid 500); 20 Aug 2005 15:41:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24072 invoked by uid 500); 20 Aug 2005 15:41:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24059 invoked by uid 99); 20 Aug 2005 15:41:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Aug 2005 08:41:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.211] (HELO smtp112.sbc.mail.mud.yahoo.com) (68.142.198.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 20 Aug 2005 08:41:50 -0700
Received: (qmail 99510 invoked from network); 20 Aug 2005 15:41:29 -0000
Received: from unknown (HELO ?192.168.1.42?) (kkrugler@pacbell.net@63.200.72.125 with plain)
  by smtp112.sbc.mail.mud.yahoo.com with SMTP; 20 Aug 2005 15:41:29 -0000
Mime-Version: 1.0
Message-Id: <p0623096ebf2cfe97c5d7@[192.168.1.42]>
In-Reply-To: <30c6373b050819144231447954@mail.gmail.com>
References: <30c6373b050819144231447954@mail.gmail.com>
Date: Sat, 20 Aug 2005 08:41:18 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: NGram Language Categorization Source
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Kevin,

>I know for a fact that a bunch of you have been curious about language
>categorization for a long time now and Java has lacked a solid way to
>solve this problem.
>
>Anyway.  This new library that I just released should be easy to tie
>into your lucene indexers.  Just use the library on a text (strip the
>HTML) and then create a new field in Lucene called LANG (or soemthing)
>and then create a filter before you search with JUST that language
>code.
>
>I'd love some help with filling out missing languages if anyone has
>some spare time.  That help make up for all the hard work I've done
>here (nudge.. nudge)
>
>I did a full research of the lang categorization space for Java and I
>think this is basically the only library out there.

[snip]

Recently I'd posted the following to the Nutch mailing list, since 
the topic of determining web page languages had come up there as well:

>Given the recent discussion regarding charset/language detection on 
>this list, people might find this IBM reseearch paper interesting:
>
><ftp://ftp.software.ibm.com/software/globalization/documents/linguini.pdf>ftp://ftp.software.ibm.com/software/globalization/documents/linguini.pdf
>
>     Linguini: Language Identification for Multilingual Documents
>     John M. Prager

Prager also uses an n-gram approach, so you might be able to take 
advantage of some of his research into optimal values for <n>.

The code to Linguini doesn't seem to be available (you have to 
purchase some IBM product(s) to get it) so what you've done is great 
for the open source community - thanks!

Also I could post to the Unicode list re training data in multiple 
languages, as that's a good place to find out about multilingual 
corpora.

-- Ken
-- 
Ken Krugler
TransPac Software, Inc.
<http://www.transpac.com>
+1 530-470-9200

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 20 20:25:17 2005
Return-Path: <java-user-return-15951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87980 invoked from network); 20 Aug 2005 20:25:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2005 20:25:17 -0000
Received: (qmail 46326 invoked by uid 500); 20 Aug 2005 20:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46295 invoked by uid 500); 20 Aug 2005 20:25:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46282 invoked by uid 99); 20 Aug 2005 20:25:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Aug 2005 13:25:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Aug 2005 13:25:30 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j7KKPOR08412
	for <java-user@lucene.apache.org>; Sat, 20 Aug 2005 15:25:25 -0500
Message-ID: <430791A4.3080700@getopt.org>
Date: Sat, 20 Aug 2005 22:25:08 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NGram Language Categorization Source
References: <30c6373b050819144231447954@mail.gmail.com>
In-Reply-To: <30c6373b050819144231447954@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Kevin Burton wrote:
> Hey lucene guys.
> 
> I know for a fact that a bunch of you have been curious about language
> categorization for a long time now and Java has lacked a solid way to
> solve this problem.
> 
> Anyway.  This new library that I just released should be easy to tie
> into your lucene indexers.  Just use the library on a text (strip the
> HTML) and then create a new field in Lucene called LANG (or soemthing)
> and then create a filter before you search with JUST that language
> code.
> 
> I'd love some help with filling out missing languages if anyone has
> some spare time.  That help make up for all the hard work I've done
> here (nudge.. nudge)
> 
> I did a full research of the lang categorization space for Java and I
> think this is basically the only library out there.

Erhm... Not to rain on your parade, but Googling for "ngram java" gives 
a lot of hits. http://sourceforge.net/projects/ngramj and also 
"languageidentifier" in Nutch are two examples of Open Source Java 
implementations. Each can be used with Lucene.

A lot depends on the reference profiles (which in turn depend on the 
quality of your training corpus - in this case, your corpus is not the 
best choice, because each text contains a lot of foreign words). It was 
also found that the way you create ngram profiles (e.g. with or without 
surrounding spaces, single length or mixed length) affects the LI 
performance. For documents with mixed languages it was also found that 
methods, which combine ngrams with stopwords, work better.

Additionally, simple methods based on cosine similarity (or delta 
ranking) don't give correct results for documents with mixed languages. 
In such cases input texts are chunked, and each chunk is analyzed 
separately, and then the scores are combined... etc, etc... millions of 
ways you can do this - and of course no method is perfect. :-)

So, there is still a lot to do in this area, if you come up with some 
unique way of improving LI performance...

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 20 20:29:23 2005
Return-Path: <java-user-return-15952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88744 invoked from network); 20 Aug 2005 20:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Aug 2005 20:29:23 -0000
Received: (qmail 49802 invoked by uid 500); 20 Aug 2005 20:29:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49773 invoked by uid 500); 20 Aug 2005 20:29:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49760 invoked by uid 99); 20 Aug 2005 20:29:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Aug 2005 13:29:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tom.e.white@gmail.com designates 64.233.182.201 as permitted sender)
Received: from [64.233.182.201] (HELO nproxy.gmail.com) (64.233.182.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Aug 2005 13:29:34 -0700
Received: by nproxy.gmail.com with SMTP id d4so143746nfe
        for <java-user@lucene.apache.org>; Sat, 20 Aug 2005 13:29:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=C55Lfp1vWII+b4nHv6z3EM1izVON4oy72onL2UgNLc8DIB4rUA6YTGqk6yHaP28maIpH9bbA8MnzVsiN4rB2e8YVmQfrhjpne5MYFXmEEbOedq8ry+aapxU1Knf++l8m6zFDFSCniL29Fwt+QaFdneDKPTU2WwMjolWq4zNA2dY=
Received: by 10.48.161.20 with SMTP id j20mr98177nfe;
        Sat, 20 Aug 2005 13:29:13 -0700 (PDT)
Received: by 10.48.144.12 with HTTP; Sat, 20 Aug 2005 13:29:12 -0700 (PDT)
Message-ID: <b23e01b505082013292c276600@mail.gmail.com>
Date: Sat, 20 Aug 2005 21:29:12 +0100
From: Tom White <tom.e.white@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NGram Language Categorization Source
In-Reply-To: <30c6373b050819144231447954@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <30c6373b050819144231447954@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Kevin,

On 8/19/05, Kevin Burton <burtonator@gmail.com> wrote:
> Hey lucene guys.
>=20
> I know for a fact that a bunch of you have been curious about language
> categorization for a long time now and Java has lacked a solid way to
> solve this problem.
>=20
> Anyway.  This new library that I just released should be easy to tie
> into your lucene indexers.  Just use the library on a text (strip the
> HTML) and then create a new field in Lucene called LANG (or soemthing)
> and then create a filter before you search with JUST that language
> code.
>=20
> I'd love some help with filling out missing languages if anyone has
> some spare time.  That help make up for all the hard work I've done
> here (nudge.. nudge)
>=20
> I did a full research of the lang categorization space for Java and I
> think this is basically the only library out there.

I know of the following existing Java implementations of language
categorization:

* A Nutch implementation:
http://cvs.sourceforge.net/viewcvs.py/nutch/nutch/src/plugin/languageidenti=
fier/

* A Lucene patch: http://issues.apache.org/bugzilla/show_bug.cgi?id=3D26763

* JTextCat (http://www.jedi.be/JTextCat/index.html),  a Java wrapper
for libtextcat

* NGramJ (http://ngramj.sourceforge.net/), a general n-gram Java library

Of these, the Nutch one is certainly under active development, the
others don't seem to be as far as I can tell.

>=20
> Good luck
> ...
>=20
> I'm working on a blog post describing how blog search engines like
> Technorati, PubSub, and Feedster could/should use language
> categorization to help deal with the chaos of tagging and full-text
> search. Google has done this for a long time now and Technorati has it
> in beta.
>=20
> http://www.feedblog.org/2005/08/ngram_language_.html
>=20

I like your idea of using Wikipedia translations as the training
corpus - it's a good way to get fairly reliable sources for lots of
languages.

Regards,

Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 21 22:44:59 2005
Return-Path: <java-user-return-15953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98395 invoked from network); 21 Aug 2005 22:44:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2005 22:44:59 -0000
Received: (qmail 38106 invoked by uid 500); 21 Aug 2005 22:44:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38083 invoked by uid 500); 21 Aug 2005 22:44:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 48806 invoked by uid 99); 21 Aug 2005 20:39:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of burtonator@gmail.com designates 64.233.162.206 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZPKe1LXSSLsLp2hSWA382U/9Q6iVvhKTB/vsaKTLnPQWPfTP7nh6P1NA47X4Tq3lmiQ3dHtn/hCksEL2v7TlQFm7XjlsdWzSoQE7VKliFJEmjgkmStRlwYCJ3le3kzM0mObp67zDURpC/sQuE0/Bxn9TkyVHLqYpJCIBrM4z5ao=
Message-ID: <30c6373b050821133960d58a5d@mail.gmail.com>
Date: Sun, 21 Aug 2005 13:39:43 -0700
From: Kevin Burton <burtonator@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NGram Language Categorization Source
In-Reply-To: <p0623096ebf2cfe97c5d7@192.168.1.42>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <30c6373b050819144231447954@mail.gmail.com>
	 <p0623096ebf2cfe97c5d7@192.168.1.42>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

><ftp://ftp.software.ibm.com/software/globalization/documents/linguini.pdf>=
ftp://ftp.software.ibm.com/software/globalization/documents/linguini.pdf
> >
> >     Linguini: Language Identification for Multilingual Documents
> >     John M. Prager
>=20
> Prager also uses an n-gram approach, so you might be able to take
> advantage of some of his research into optimal values for <n>.

Yeah.. though to be honest I as long as you're on the long tail
portion of N the values won't matter much I think.

All you'll do is waste a bit of memory (like 1k)
=20
> The code to Linguini doesn't seem to be available (you have to
> purchase some IBM product(s) to get it) so what you've done is great
> for the open source community - thanks!
>=20
> Also I could post to the Unicode list re training data in multiple
> languages, as that's a good place to find out about multilingual
> corpora.

Yeah. That was my biggest problem. This area had never really been
solved in the OSS world.

--=20
 Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://www.feedblog.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 21 22:45:13 2005
Return-Path: <java-user-return-15954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98457 invoked from network); 21 Aug 2005 22:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2005 22:45:13 -0000
Received: (qmail 39571 invoked by uid 500); 21 Aug 2005 22:45:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39093 invoked by uid 500); 21 Aug 2005 22:45:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 50377 invoked by uid 99); 21 Aug 2005 20:45:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of burtonator@gmail.com designates 64.233.162.204 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=udqC7PCBSMGd3viJx2zi4UH0aqZ+SQl3w6yO3Kek1ylM92NW0Af67p/ut1VX90GU353LctQFZuvjABXF0CjZRz25+W02hFZPGl59GryRX54WNMU/6jzrv3bUA1tGDSpsAYcgTKDUbNajU/6odYnVgBIXylJL/FRcSx9cHyA9bjc=
Message-ID: <30c6373b050821134560a3bb11@mail.gmail.com>
Date: Sun, 21 Aug 2005 13:45:15 -0700
From: Kevin Burton <burtonator@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NGram Language Categorization Source
In-Reply-To: <430791A4.3080700@getopt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <30c6373b050819144231447954@mail.gmail.com>
	 <430791A4.3080700@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Erhm... Not to rain on your parade, but Googling for "ngram java" gives
> a lot of hits. http://sourceforge.net/projects/ngramj and also
> "languageidentifier" in Nutch are two examples of Open Source Java
> implementations. Each can be used with Lucene.

I think I've played with ngramj and found it very lacking.=20
=20
I haven't played with 'languageidentifier' in Nutch ...=20

> A lot depends on the reference profiles (which in turn depend on the
> quality of your training corpus - in this case, your corpus is not the
> best choice, because each text contains a lot of foreign words).

I realize that my corpus isnt' the best.  That's one of the reason's
I've open source'd it.  The main improvement in ngramcat (my code) is
that if the result isn't obvious we throw an Exception so
theoreticallyi we won't see any false positives unless the language
categorization is WAY off.

> It was
> also found that the way you create ngram profiles (e.g. with or without
> surrounding spaces, single length or mixed length) affects the LI
> performance.=20

LI???

I haven't benchmarked it but I'd be interested in any suggestions you have.

> For documents with mixed languages it was also found that
> methods, which combine ngrams with stopwords, work better.

Hm.. interesting.. where?  URL I can reads?
=20
> Additionally, simple methods based on cosine similarity (or delta
> ranking) don't give correct results for documents with mixed languages.
> In such cases input texts are chunked, and each chunk is analyzed
> separately, and then the scores are combined... etc, etc... millions of
> ways you can do this - and of course no method is perfect. :-)

Yes.  We don't handle the mixed language case very well.  The chunking
method is something I wanted to approach.

> So, there is still a lot to do in this area, if you come up with some
> unique way of improving LI performance...

Maybe I'm being dense but what is LI performance?

Thanks.

Kevin

--=20
 Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://www.feedblog.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 21 22:47:03 2005
Return-Path: <java-user-return-15955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98957 invoked from network); 21 Aug 2005 22:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Aug 2005 22:47:03 -0000
Received: (qmail 41943 invoked by uid 500); 21 Aug 2005 22:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41696 invoked by uid 500); 21 Aug 2005 22:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 52446 invoked by uid 99); 21 Aug 2005 20:48:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of burtonator@gmail.com designates 64.233.162.204 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=QMZXuSRyqG0Ysy9gyV/ncdxM0FpGzcKqrxElU7ToxkOzNIAxfUK65b1x72ndkBmP0BXEIUVgAdby9kdCjuM8JfYP/XyyddzB+GsnrkKJA+lcbFNI1/OxTxtD+3dMk3pGrRWhMPiNxabLhbwuUHzZiSonQ0EMPScMM5L8+H1Vejc=
Message-ID: <30c6373b05082113485cd3dfa3@mail.gmail.com>
Date: Sun, 21 Aug 2005 13:48:15 -0700
From: Kevin Burton <burtonator@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NGram Language Categorization Source
In-Reply-To: <b23e01b505082013292c276600@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <30c6373b050819144231447954@mail.gmail.com>
	 <b23e01b505082013292c276600@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> * A Nutch implementation:
> http://cvs.sourceforge.net/viewcvs.py/nutch/nutch/src/plugin/languageiden=
tifier/
>=20
> * A Lucene patch: http://issues.apache.org/bugzilla/show_bug.cgi?id=3D267=
63

A step in the right direction. It doesn't have other language
categories created though.

> * JTextCat (http://www.jedi.be/JTextCat/index.html),  a Java wrapper
> for libtextcat

Yes. I saw JTextCat.. I didn't want any JNI used.=20

> * NGramJ (http://ngramj.sourceforge.net/), a general n-gram Java library

LGPL.. yuk. That said I think I reviewed this package and found it
lacking.  I started off just trying to find a library to use in our
crawler but never found anything.  Which is why I ended up writing my
own.

> Of these, the Nutch one is certainly under active development, the
> others don't seem to be as far as I can tell.

They should just use ngramcat :)

Kevin

--=20
 Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://www.feedblog.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 03:52:27 2005
Return-Path: <java-user-return-15956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58086 invoked from network); 22 Aug 2005 03:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 03:52:27 -0000
Received: (qmail 97316 invoked by uid 500); 22 Aug 2005 03:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97292 invoked by uid 500); 22 Aug 2005 03:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97279 invoked by uid 99); 22 Aug 2005 03:52:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Aug 2005 20:52:23 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.34] (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 21 Aug 2005 20:52:40 -0700
Received: (qmail 8201 invoked by uid 60001); 22 Aug 2005 03:52:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Yi+KA+rwt6/FN/xDSkeN/wm1eBQe3GRHNtHg+bpBV3yG3hf9raNPr/CUEuOgHqc60yNsp0FymLEUJu2twi2ZSf54AFhV5Vgd1DQckm/2a0ngopS5DdXalXo1TtLlplHr8JYspLsoGS2GUkqwkMqHmmMOQgQejMw7qOC2JavFwEM=  ;
Message-ID: <20050822035220.8199.qmail@web31101.mail.mud.yahoo.com>
Received: from [69.201.142.21] by web31101.mail.mud.yahoo.com via HTTP; Sun, 21 Aug 2005 20:52:19 PDT
Date: Sun, 21 Aug 2005 20:52:19 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: NGram Language Categorization Source
To: java-user@lucene.apache.org
In-Reply-To: <30c6373b050821134560a3bb11@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Sounds like that LI acronym was confusing -Language Identification.

Otis


> > It was
> > also found that the way you create ngram profiles (e.g. with or
> without
> > surrounding spaces, single length or mixed length) affects the LI
> > performance. 
> 
> LI???
> 
> I haven't benchmarked it but I'd be interested in any suggestions you
> have.
> 
> > So, there is still a lot to do in this area, if you come up with
> some
> > unique way of improving LI performance...
> 
> Maybe I'm being dense but what is LI performance?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 06:27:28 2005
Return-Path: <java-user-return-15957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1702 invoked from network); 22 Aug 2005 06:27:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 06:27:28 -0000
Received: (qmail 43288 invoked by uid 500); 22 Aug 2005 06:27:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43262 invoked by uid 500); 22 Aug 2005 06:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43249 invoked by uid 99); 22 Aug 2005 06:27:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Aug 2005 23:27:21 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rohitlodha@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Aug 2005 23:27:39 -0700
Received: by zproxy.gmail.com with SMTP id n29so660316nzf
        for <java-user@lucene.apache.org>; Sun, 21 Aug 2005 23:27:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=PVvbtN6v1yskAAjLUC3OhBlKfgGMubA06yO2K/d10Z6sxzYVCNxjOK385me35H42vp8+w6nFGDPe7yYnQH8sTixWErc3XEJVtyg7e3VrWt3efZuAPyFa4e2rCiWnO+MYPa414qkGOTvCvlQYZXy9kOrG0rWS20GNjDnT96xUub8=
Received: by 10.36.74.13 with SMTP id w13mr1255770nza;
        Sun, 21 Aug 2005 23:27:19 -0700 (PDT)
Received: by 10.36.227.37 with HTTP; Sun, 21 Aug 2005 23:27:19 -0700 (PDT)
Message-ID: <c0edae75050821232716184f67@mail.gmail.com>
Date: Mon, 22 Aug 2005 11:57:19 +0530
From: Rohit Lodha <rohitlodha@gmail.com>
To: java-user@lucene.apache.org
Subject: Hierarchical Documents
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9052_22573502.1124692039150"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9052_22573502.1124692039150
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi All,

Currently, Documents cannot contain other documents. I have a Graph of=20
Objects (Documents) to search in.

I could flatten them and search but...

Is there any nice way to do it?

Rohit

------=_Part_9052_22573502.1124692039150--

From java-user-return-15958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 07:51:56 2005
Return-Path: <java-user-return-15958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31742 invoked from network); 22 Aug 2005 07:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 07:51:56 -0000
Received: (qmail 42525 invoked by uid 500); 22 Aug 2005 07:51:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42492 invoked by uid 500); 22 Aug 2005 07:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42479 invoked by uid 99); 22 Aug 2005 07:51:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 00:51:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 00:52:07 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j7M7pki02575
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 02:51:46 -0500
Message-ID: <4309840F.3040008@getopt.org>
Date: Mon, 22 Aug 2005 09:51:43 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NGram Language Categorization Source
References: <30c6373b050819144231447954@mail.gmail.com>	 <430791A4.3080700@getopt.org> <30c6373b050821134560a3bb11@mail.gmail.com>
In-Reply-To: <30c6373b050821134560a3bb11@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Kevin Burton wrote:

>>A lot depends on the reference profiles (which in turn depend on the
>>quality of your training corpus - in this case, your corpus is not the
>>best choice, because each text contains a lot of foreign words).
> 
> 
> I realize that my corpus isnt' the best.  That's one of the reason's
> I've open source'd it.  The main improvement in ngramcat (my code) is
> that if the result isn't obvious we throw an Exception so
> theoreticallyi we won't see any false positives unless the language
> categorization is WAY off.

That's also how other implementations do it - you need to set an 
arbitrary threshold, and if the profiles score below that threshold then 
an "unknown" value is returned (or null, or Exception).

> 
> 
>>It was
>>also found that the way you create ngram profiles (e.g. with or without
>>surrounding spaces, single length or mixed length) affects the LI
>>performance. 
> 
> 
> LI???
> 

LI = Language Identification. Sorry for the confusion.

> I haven't benchmarked it but I'd be interested in any suggestions you have.
> 
> 
>>For documents with mixed languages it was also found that
>>methods, which combine ngrams with stopwords, work better.
> 
> 
> Hm.. interesting.. where?  URL I can reads?

Someone mentioned the Linguini paper, where they found that using "short 
words" features gives similarly good performance as using ngrams.

See also the following papers :

http://www.xrce.xerox.com/Publications/Attachments/1995-012/Gref---Comparing-two-language-identification-schemes.pdf
http://citeseer.ist.psu.edu/40861.html
http://www.xs4all.nl/~ajwp/langident.pdf

In general, using stop words works only for texts above certain minimum 
length (greater than with n-gram methods), and then gives nearly 100% 
accuracy.


>>So, there is still a lot to do in this area, if you come up with some
>>unique way of improving LI performance...
> 
> 
> Maybe I'm being dense but what is LI performance?

Language Identification performance - in the sense that a given 
identifier "performs" better if it can correctly identify more 
languages, using shorter input text.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 08:29:42 2005
Return-Path: <java-user-return-15959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40108 invoked from network); 22 Aug 2005 08:29:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 08:29:42 -0000
Received: (qmail 74785 invoked by uid 500); 22 Aug 2005 08:29:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74560 invoked by uid 500); 22 Aug 2005 08:29:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74547 invoked by uid 99); 22 Aug 2005 08:29:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 01:29:34 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.89.8.178] (HELO ayalga.fundacionctic.org) (212.89.8.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 01:29:51 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5A6F3.87F91936"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: Store index in database
Date: Mon, 22 Aug 2005 10:28:53 +0200
Message-ID: <09700B613C4DD84FA9F2FEA5218828197FC812@ayalga.fundacionctic.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Store index in database
Thread-Index: AcWm84ftOHrkIvPYSbWEXRKT9KYMrg==
From: "Ivan Frade Ortea" <Ivan.Frade@fundacionctic.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5A6F3.87F91936
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

SGVsbG8sDQoNCiBJJ20gd29ya2luZyBpbiBhIGJpZyBqMmVlIGFwcGxpY2F0aW9uIHdpdGggc29t
ZSBkb2N1bWVudHMgKDUwMDAgYXByb3guKSBpbiBhIGRhdGFiYXNlLiBOb3cgaSdtIGluZGV4aW5n
IGl0IHdpdGhvdXQgYW55IHByb2JsZW0gdXNpbmcgbHVjZW5lIHdpdGggRlNEaXJlY3RvcnkuIEJ1
dCB0aGUgdXNlIG9mIGZpbGVzIGluIGoyZWUgYXBwIGlzIG5vdCBhICJnb29kLWRlc2lnbiIgY2hv
aWNlLiBTbyBpIHdhcyB0aGlua2luZyBpbiBzdG9yZSBpbmRleCBpbiBkYXRhYmFzZSAodXNpbmcg
SkRCQ0RpcmVjdG9yeSwgZm9yIGluc3RhbmNlKSBidXQgaSBjYW5ub3QgZmluZCByZWZlcmVuY2Vz
IHRvIHRoaXMgYXBwcm9hY2ggb25saW5lLCBzZWVtcyB0aGF0IG5vYm9keSB1c2UgaXQuDQoNCiBJ
cyB0aGVyZSBhbnkgInNvLWVhc3ktdGhhdC1pLWNhbm5vdC1wZXJjZWl2ZSIgcXVlc3Rpb24gdG8g
YXZvaWQgdGhpcyBhcHByb2FjaD8gY291bGQgYmUgYSBwZXJmb3JtYW5jZSBwcm9ibGVtPyBIYXZl
IGFueWJvZHkgYW4gaWRlYSBvZiBwZXJmb3JtYW5jZSB1c2luZyBkYXRhYmFzZSBpbnN0ZWFkIG9m
IGZpbGVzeXN0ZW0gdG8gc3RvcmUgdGhlIGluZGV4Pw0KDQogVGhhbmsgeW91IGluIGFkdmFuY2Vk
Lg0KDQpJdsOhbiBGcmFkZS4NCg==

------_=_NextPart_001_01C5A6F3.87F91936--

From java-user-return-15960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 09:07:04 2005
Return-Path: <java-user-return-15960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47583 invoked from network); 22 Aug 2005 09:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 09:07:04 -0000
Received: (qmail 9964 invoked by uid 500); 22 Aug 2005 09:06:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9870 invoked by uid 500); 22 Aug 2005 09:06:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9856 invoked by uid 99); 22 Aug 2005 09:06:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 02:06:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 66.249.82.207 as permitted sender)
Received: from [66.249.82.207] (HELO xproxy.gmail.com) (66.249.82.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 02:07:17 -0700
Received: by xproxy.gmail.com with SMTP id h28so258188wxd
        for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 02:06:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=E5yfcW2f2PFfLD6K5xBFOiHN/HJzt7m1AHIVQYczM39F6bMYp19tuGyg1c5xNW/E+W6erBNUB9FqrRtJCE6rYRoxLjEqAYe3+S+sxZvir7KIlANNMEO+IH544qxpIiAkVpADWXsc9Yril8Bn9fCKpC50im7MWPepZ0zAQNspHv8=
Received: by 10.70.43.6 with SMTP id q6mr25336wxq;
        Mon, 22 Aug 2005 02:06:57 -0700 (PDT)
Received: by 10.70.50.20 with HTTP; Mon, 22 Aug 2005 02:06:57 -0700 (PDT)
Message-ID: <6e3ae63105082202065fedbc2f@mail.gmail.com>
Date: Mon, 22 Aug 2005 02:06:57 -0700
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Store index in database
In-Reply-To: <09700B613C4DD84FA9F2FEA5218828197FC812@ayalga.fundacionctic.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <09700B613C4DD84FA9F2FEA5218828197FC812@ayalga.fundacionctic.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

1. storing index in database will definitely slow down the search,
using JDBCDirectory only.
2. You can try to read the index from database into RAMDirectory

What do you mean by "good-design"? You dislike filesystem? :)
I guess you don't want to have several copies of index when your
system grows. In that case, you can have one server dedicated for
indexing and searching.

This is what DBSight is doing.
--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net

On 8/22/05, Ivan Frade Ortea <Ivan.Frade@fundacionctic.org> wrote:
> Hello,
>=20
>  I'm working in a big j2ee application with some documents (5000 aprox.) =
in a database. Now i'm indexing it without any problem using lucene with FS=
Directory. But the use of files in j2ee app is not a "good-design" choice. =
So i was thinking in store index in database (using JDBCDirectory, for inst=
ance) but i cannot find references to this approach online, seems that nobo=
dy use it.
>=20
>  Is there any "so-easy-that-i-cannot-perceive" question to avoid this app=
roach? could be a performance problem? Have anybody an idea of performance =
using database instead of filesystem to store the index?
>=20
>  Thank you in advanced.
>=20
> Iv=E1n Frade.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 12:20:37 2005
Return-Path: <java-user-return-15961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40927 invoked from network); 22 Aug 2005 12:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 12:20:36 -0000
Received: (qmail 21661 invoked by uid 500); 22 Aug 2005 12:20:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21598 invoked by uid 500); 22 Aug 2005 12:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 32179 invoked by uid 99); 22 Aug 2005 11:41:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
From: "Anil Kumar E D" <adhotre@cellexchange.com>
To: <java-user@lucene.apache.org>
Subject: setPhraseSlop return the same results irrespective of int parameter
Date: Mon, 22 Aug 2005 17:14:45 +0530
Message-ID: <GJEIJOELKEGHNFMOFNLDIEJACEAA.adhotre@cellexchange.com>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0032_01C5A73C.FE5AD850"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0032_01C5A73C.FE5AD850
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0033_01C5A73C.FE5AD850"


------=_NextPart_001_0033_01C5A73C.FE5AD850
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

BlankIn reference to the bug
no:36296http://issues.apache.org/bugzilla/show_bug.cgi?id=36296Hi
Eric,Thanks for the reply.Query toString println was toString : data:dhotre
data:anilThen i changed my query text value to include escaped (") value.
something like this search("\"Dhotre Anil\"");Now the result is I get 1 hot
count for search("\"Anil Dhotre\""); and 0 hit count for search("\"Dhotre
Anil\""); Following is the source snippet with SOP's below it.
queryParser.setPhraseSlop(2);   System.out.println("Slop : " +
queryParser.getPhraseSlop());   Query query =
queryParser.parse(termsNameAndValues,"data",DEFAULT_ANALYZER) ;
System.out.println("toString : " + query.toString());Slop : 2
toString : data:"dhotre anil"
Hits count 0



------=_NextPart_001_0033_01C5A73C.FE5AD850
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE id=3DridTitle>Blank</TITLE>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body  { font-family: Arial, Helvetica; font-size: 10pt; =
color: #000000; margin-top: 25px; margin-left: 25px; } P.msoNormal, =
LI.msoNormal  { font-family: Helvetica, "Times New Roman"; font-size: =
10pt; margin-top: 0px; margin-left: 0px; color: "#ffffcc"; } --></STYLE>

<META content=3D"MSHTML 6.00.2800.1515" name=3DGENERATOR></HEAD>
<BODY id=3DridBody background=3Dcid:905103411@22082005-1f8e>
<DIV><PRE id=3Dcomment_text_0><SPAN class=3D905103411-22082005><P><SPAN =
class=3D905103411-22082005>In reference to the bug no:<U><FONT =
color=3D#800080>36296</FONT></U></SPAN></P><PRE><SPAN =
class=3D905103411-22082005></SPAN><SPAN class=3D905103411-22082005><A =
href=3D"http://issues.apache.org/bugzilla/show_bug.cgi?id=3D36296">http:/=
/issues.apache.org/bugzilla/show_bug.cgi?id=3D36296</A></SPAN></PRE></SPA=
N></PRE><PRE><SPAN class=3D905103411-22082005>Hi =
Eric,</SPAN></PRE><PRE><SPAN class=3D905103411-22082005>Thanks for the =
reply.</SPAN></PRE><PRE><SPAN class=3D905103411-22082005>Query toString =
println was <BR></SPAN><SPAN class=3D905103411-22082005>toString : =
data:dhotre data:anil</SPAN></PRE><PRE><SPAN =
class=3D905103411-22082005><BR></SPAN><SPAN =
class=3D905103411-22082005><BR></SPAN><SPAN =
class=3D905103411-22082005><SPAN class=3D905103411-22082005>Then i =
changed my query text value to include escaped (") value. =
</SPAN></SPAN></PRE><PRE><P><SPAN class=3D905103411-22082005><SPAN =
class=3D905103411-22082005>something like this </SPAN></SPAN><SPAN =
class=3D905103411-22082005><SPAN =
class=3D905103411-22082005>search("\"Dhotre =
Anil\"");</SPAN></SPAN></P></PRE><PRE><SPAN =
class=3D905103411-22082005><SPAN class=3D905103411-22082005>Now the =
result is I get 1 hot count for <SPAN class=3D905103411-22082005><SPAN =
class=3D905103411-22082005>search("\"Anil Dhotre\"");</SPAN></SPAN> and =
<BR></SPAN></SPAN><SPAN class=3D905103411-22082005><SPAN =
class=3D905103411-22082005>0 hit count for <SPAN =
class=3D905103411-22082005><SPAN =
class=3D905103411-22082005>search("\"Dhotre Anil\""); =
</SPAN></SPAN></SPAN></SPAN></PRE><PRE><SPAN =
class=3D905103411-22082005><SPAN class=3D905103411-22082005><SPAN =
class=3D905103411-22082005><SPAN class=3D905103411-22082005>Following is =
the source snippet with SOP's below =
it.</SPAN></SPAN></SPAN></SPAN></PRE><PRE><SPAN =
class=3D905103411-22082005><SPAN class=3D905103411-22082005><SPAN =
class=3D905103411-22082005><SPAN =
class=3D905103411-22082005></SPAN></SPAN></SPAN></SPAN><SPAN =
class=3D905103411-22082005><SPAN =
class=3D905103411-22082005>&nbsp;&nbsp;&nbsp;queryParser.setPhraseSlop(2)=
;<BR>&nbsp;&nbsp;&nbsp;System.out.println("Slop : " + =
queryParser.getPhraseSlop());<BR>&nbsp;&nbsp;&nbsp;Query query =3D =
queryParser.parse(termsNameAndValues,"data",DEFAULT_ANALYZER) =
;<BR>&nbsp;&nbsp;&nbsp;System.out.println("toString : " + =
query.toString());<BR></PRE></SPAN><SPAN=20
class=3D905103411-22082005><FONT face=3DArial color=3D#0000ff>
<P>Slop : 2<BR>toString : data:"dhotre anil"<BR>Hits count =
0</P></FONT></SPAN>
<P></SPAN><FONT color=3D#0000ff></FONT><SPAN=20
class=3D905103411-22082005></SPAN>&nbsp;</P></DIV></BODY></HTML>

------=_NextPart_001_0033_01C5A73C.FE5AD850--

------=_NextPart_000_0032_01C5A73C.FE5AD850--



From java-user-return-15962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 13:11:30 2005
Return-Path: <java-user-return-15962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61050 invoked from network); 22 Aug 2005 13:11:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 13:11:29 -0000
Received: (qmail 95360 invoked by uid 500); 22 Aug 2005 13:11:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95335 invoked by uid 500); 22 Aug 2005 13:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95321 invoked by uid 99); 22 Aug 2005 13:11:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 06:11:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 06:11:42 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 614E113E200A; Mon, 22 Aug 2005 09:11:21 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 2889013E200A
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 09:10:50 -0400 (EDT)
In-Reply-To: <GJEIJOELKEGHNFMOFNLDIEJACEAA.adhotre@cellexchange.com>
References: <GJEIJOELKEGHNFMOFNLDIEJACEAA.adhotre@cellexchange.com>
Mime-Version: 1.0 (Apple Message framework v734)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EB28EFED-527E-4C69-B94E-6930063995B1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: setPhraseSlop return the same results irrespective of int parameter
Date: Mon, 22 Aug 2005 09:10:43 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How have you indexed the "data" field and what is DEFAULT_ANALYZER?

     Erik


On Aug 22, 2005, at 7:44 AM, Anil Kumar E D wrote:

> In reference to the bug no:36296
>
> http://issues.apache.org/bugzilla/show_bug.cgi?id=36296Hi  
> Eric,Thanks for the reply.Query toString println was
> toString : data:dhotre data:anil
>
> Then i changed my query text value to include escaped (") value.
> something like this search("\"Dhotre Anil\"");
>
> Now the result is I get 1 hot count for search("\"Anil Dhotre\""); and
> 0 hit count for search("\"Dhotre Anil\""); Following is the source  
> snippet with SOP's below it.   queryParser.setPhraseSlop(2);
>    System.out.println("Slop : " + queryParser.getPhraseSlop());
>    Query query = queryParser.parse 
> (termsNameAndValues,"data",DEFAULT_ANALYZER) ;
>    System.out.println("toString : " + query.toString());
> Slop : 2
> toString : data:"dhotre anil"
> Hits count 0
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 13:30:44 2005
Return-Path: <java-user-return-15963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73640 invoked from network); 22 Aug 2005 13:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 13:30:44 -0000
Received: (qmail 31399 invoked by uid 500); 22 Aug 2005 13:30:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31219 invoked by uid 500); 22 Aug 2005 13:30:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31206 invoked by uid 99); 22 Aug 2005 13:30:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 06:30:37 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Aug 2005 06:30:54 -0700
Received: (qmail 3076 invoked by uid 0); 22 Aug 2005 13:30:33 -0000
Received: from 80.136.132.37 by www84.gmx.net with HTTP;
	Mon, 22 Aug 2005 15:30:33 +0200 (MEST)
Date: Mon, 22 Aug 2005 15:30:33 +0200 (MEST)
From: dozean@gmx.de
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <25696.1124717433@www84.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

i wrote an Index update, where first the IndexReader 
delete all files from index which are changed.
Than add documents which are not in the index!

Alone the deletion take so long, because i have 2 "for" loops!

file = array with all files in a directory

for (int i = 0; i<file.length; i++) {
	if (file[i].isFile()) {
   for (int j =0; j<reader.numDocs(); j++) {
	if (file[i].getName() == reader.document(j).get("name") &&
	file[i].lastModified() > Integer.parseInt(reader.document(j).get("date")))
{						reader.delete(j); 
     }
}

Maybe this is the wrong way?

Bye Derya


-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse fr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 13:43:17 2005
Return-Path: <java-user-return-15964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78993 invoked from network); 22 Aug 2005 13:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 13:43:17 -0000
Received: (qmail 56984 invoked by uid 500); 22 Aug 2005 13:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56330 invoked by uid 500); 22 Aug 2005 13:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56317 invoked by uid 99); 22 Aug 2005 13:43:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 06:43:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 06:43:28 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7MDh5je012379
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 09:43:08 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILM00701M3TDC@lmco.com> for java-user@lucene.apache.org; Mon, 22 Aug 2005 09:43:05 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILM009E0M3TJ3@lmco.com> for java-user@lucene.apache.org; Mon, 22 Aug 2005 09:43:05 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 22 Aug 2005 09:43:05 -0400
Date: Mon, 22 Aug 2005 09:43:05 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: UpdateIndex
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3943@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-Topic: UpdateIndex
Thread-Index: AcWnHeqj8MWvkaGISPipF8iV/KV7QwAAQyVA
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 22 Aug 2005 13:43:05.0295 (UTC) FILETIME=[6C503DF0:01C5A71F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In your approach, you are reading all the documents in your index. You =
should instead query the index for the file name instead of reading the =
entire index for each file.

HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: dozean@gmx.de [mailto:dozean@gmx.de]=20
Sent: Monday, August 22, 2005 9:31 AM
To: java-user@lucene.apache.org
Subject: UpdateIndex

Hi,

i wrote an Index update, where first the IndexReader delete all files =
from index which are changed.
Than add documents which are not in the index!

Alone the deletion take so long, because i have 2 "for" loops!

file =3D array with all files in a directory

for (int i =3D 0; i<file.length; i++) {
	if (file[i].isFile()) {
   for (int j =3D0; j<reader.numDocs(); j++) {
	if (file[i].getName() =3D=3D reader.document(j).get("name") &&
	file[i].lastModified() > =
Integer.parseInt(reader.document(j).get("date")))
{						reader.delete(j);=20
     }
}

Maybe this is the wrong way?

Bye Derya


--
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse f=FCr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 14:22:20 2005
Return-Path: <java-user-return-15965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96846 invoked from network); 22 Aug 2005 14:22:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 14:22:20 -0000
Received: (qmail 28916 invoked by uid 500); 22 Aug 2005 14:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28875 invoked by uid 500); 22 Aug 2005 14:22:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28850 invoked by uid 99); 22 Aug 2005 14:22:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 07:22:12 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Aug 2005 07:22:28 -0700
Received: (qmail 17848 invoked by uid 0); 22 Aug 2005 14:22:08 -0000
Received: from 80.136.132.37 by www18.gmx.net with HTTP;
	Mon, 22 Aug 2005 16:22:08 +0200 (MEST)
Date: Mon, 22 Aug 2005 16:22:08 +0200 (MEST)
From: dozean@gmx.de
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <92A278501EF50444AD3EE1FFB51219550BCE3943@emss10m03.rck.atm.lmco.com>
Subject: =?ISO-8859-1?Q?RE:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <13213.1124720528@www18.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yeah, that is a good idea,
but i have the following problem of doing the update that way.

I can not query the index for the file name, because it could be
that i have many files with the same name in different directories.
So i have to query the index for the path!
I store the path in a Keyword field but i can not search after the path!
It won't work and i don't know why?  Have you an idea?

Derya

> --- Ursprngliche Nachricht ---
> Von: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
> An: java-user@lucene.apache.org
> Betreff: RE: UpdateIndex
> Datum: Mon, 22 Aug 2005 09:43:05 -0400
> 
> In your approach, you are reading all the documents in your index. You
> should instead query the index for the file name instead of reading the
entire
> index for each file.
> 
> HTH
> 
> Aviran
> http://www.aviransplace.com
> 
> -----Original Message-----
> From: dozean@gmx.de [mailto:dozean@gmx.de] 
> Sent: Monday, August 22, 2005 9:31 AM
> To: java-user@lucene.apache.org
> Subject: UpdateIndex
> 
> Hi,
> 
> i wrote an Index update, where first the IndexReader delete all files
> >from index which are changed.
> Than add documents which are not in the index!
> 
> Alone the deletion take so long, because i have 2 "for" loops!
> 
> file = array with all files in a directory
> 
> for (int i = 0; i<file.length; i++) {
> 	if (file[i].isFile()) {
>    for (int j =0; j<reader.numDocs(); j++) {
> 	if (file[i].getName() == reader.document(j).get("name") &&
> 	file[i].lastModified() >
> Integer.parseInt(reader.document(j).get("date")))
> {						reader.delete(j); 
>      }
> }
> 
> Maybe this is the wrong way?
> 
> Bye Derya
> 
> 
> --
> 5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
> +++ GMX - die erste Adresse fr Mail, Message, More +++
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 14:27:20 2005
Return-Path: <java-user-return-15966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99515 invoked from network); 22 Aug 2005 14:27:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 14:27:20 -0000
Received: (qmail 38978 invoked by uid 500); 22 Aug 2005 14:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38773 invoked by uid 500); 22 Aug 2005 14:27:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38760 invoked by uid 99); 22 Aug 2005 14:27:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 07:27:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 07:27:32 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7MERCje008228
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 10:27:12 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILM00C01O394V@lmco.com> for java-user@lucene.apache.org; Mon, 22 Aug 2005 10:27:11 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILM00M0GO3KBO@lmco.com> for java-user@lucene.apache.org; Mon, 22 Aug 2005 10:26:09 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 22 Aug 2005 10:26:08 -0400
Date: Mon, 22 Aug 2005 10:26:08 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: UpdateIndex
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3944@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-Topic: UpdateIndex
Thread-Index: AcWnJOoXq1BYfSi7Tj6lz5+Lg2tNUAAADkzQ
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 22 Aug 2005 14:26:08.0494 (UTC) FILETIME=[700520E0:01C5A725]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You might be doing something wrong, you shouldn't have any problem =
searching on keywords.

Note that keyword is case sensitive, thus you need to write your search =
term EXACTLY as it was indexed (case sensitive, spaces and all)=20

HTH=20

Aviran
http://www.aviransplace.com

-----Original Message-----
From: dozean@gmx.de [mailto:dozean@gmx.de]=20
Sent: Monday, August 22, 2005 10:22 AM
To: java-user@lucene.apache.org
Subject: RE: UpdateIndex

Yeah, that is a good idea,
but i have the following problem of doing the update that way.

I can not query the index for the file name, because it could be that i =
have many files with the same name in different directories.
So i have to query the index for the path!
I store the path in a Keyword field but i can not search after the path!
It won't work and i don't know why?  Have you an idea?

Derya

> --- Urspr=FCngliche Nachricht ---
> Von: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
> An: java-user@lucene.apache.org
> Betreff: RE: UpdateIndex
> Datum: Mon, 22 Aug 2005 09:43:05 -0400
>=20
> In your approach, you are reading all the documents in your index. You =

> should instead query the index for the file name instead of reading=20
> the
entire
> index for each file.
>=20
> HTH
>=20
> Aviran
> http://www.aviransplace.com
>=20
> -----Original Message-----
> From: dozean@gmx.de [mailto:dozean@gmx.de]
> Sent: Monday, August 22, 2005 9:31 AM
> To: java-user@lucene.apache.org
> Subject: UpdateIndex
>=20
> Hi,
>=20
> i wrote an Index update, where first the IndexReader delete all files
> >from index which are changed.
> Than add documents which are not in the index!
>=20
> Alone the deletion take so long, because i have 2 "for" loops!
>=20
> file =3D array with all files in a directory
>=20
> for (int i =3D 0; i<file.length; i++) {
> 	if (file[i].isFile()) {
>    for (int j =3D0; j<reader.numDocs(); j++) {
> 	if (file[i].getName() =3D=3D reader.document(j).get("name") &&
> 	file[i].lastModified() >
> Integer.parseInt(reader.document(j).get("date")))
> {						reader.delete(j);=20
>      }
> }
>=20
> Maybe this is the wrong way?
>=20
> Bye Derya
>=20
>=20
> --
> 5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
> +++ GMX - die erste Adresse f=FCr Mail, Message, More +++
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen f=FCr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 14:40:51 2005
Return-Path: <java-user-return-15967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13820 invoked from network); 22 Aug 2005 14:40:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 14:40:50 -0000
Received: (qmail 54017 invoked by uid 500); 22 Aug 2005 14:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53636 invoked by uid 500); 22 Aug 2005 14:40:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53622 invoked by uid 99); 22 Aug 2005 14:40:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 07:40:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 07:41:02 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j7MEefbr021674
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 09:40:42 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Mon, 22 Aug 2005 09:40:42 -0500 (CDT)
Message-ID: <57255.65.117.150.250.1124721642.squirrel@65.117.150.250>
In-Reply-To: <38371.65.117.150.250.1124462153.squirrel@65.117.150.250>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>    
    <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>    
    <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>    
    <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com>    
    <34271.65.117.150.250.1124403381.squirrel@65.117.150.250>   
    <1124403498.6381.5.camel@localhost>   
    <34288.65.117.150.250.1124403778.squirrel@65.117.150.250>   
    <27034F9C-8B79-49A4-B04B-A6C355CB9104@ehatchersolutions.com>
    <38371.65.117.150.250.1124462153.squirrel@65.117.150.250>
Date: Mon, 22 Aug 2005 09:40:42 -0500 (CDT)
Subject: Re: Case-sensitive search
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>>
>> On Aug 18, 2005, at 6:22 PM, tareque@controldocs.com wrote:
>>
>>>> On Thu, 2005-08-18 at 17:16, tareque@controldocs.com wrote:
>>>>
>>>>> Thanks again! The analyzer is working now. But seems like
>>>>> actually the
>>>>> QueryParser I am using is probably converting the queries to
>>>>> lowercase
>>>>> first. Is there any way to stop that? Here is the line of code
>>>>> where I
>>>>> am
>>>>> parsing:
>>>>>
>>>>> Query query = QueryParser.parse(line, "contents", analyzer);
>>>>>
>>>>> As for analyzer, I have tried both StardaAnalyzer and StopAnalyzer.
>>>>>
>>>>
>>>> You need to use the same analyzer for parsing queries as you do for
>>>> indexing content.
>>>>
>>>> Luke Francl
>>>>
>>>>
>>>
>>> Actually I have used StopAn for indexing. So used the same for parsing
>>> queries, but it's still converting the queries to lowercase before
>>> running
>>> the actually search
>>
>> Both of those analyzers lowercase.  When you said it was working,
>> what did you mean?   To prevent lowercasing and get stop words
>> removed you *will* have to write a custom analyzer.  Also keep in
>> mind that StopFilter is case-sensitive and that the stop word list is
>> all lowercase - so you will need to account for this with a custom
>> stop filter probably too.
>>
>> It is highly recommended to "analyze the analyzer" - a topic covered
>> in depth in the Analysis chapter in Lucene in Action, and one of my
>> java.net articles.
>>
>>      Erik
>>
>
> It's all working now. I did write a custom analyzer using the
> StopAnalyzer, which correctly indexed. The problem was, when I was parsing
> the query I forgot to use my new analyzer and was using the old
> StopAnalyzer instead. Thanks for all the help!
>
> Tareque
>


Is there any way to index as case-sensitive and then, while searching,
making the search case-sensitive and case-insensitive using the same index
as needed?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 15:01:08 2005
Return-Path: <java-user-return-15968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21517 invoked from network); 22 Aug 2005 15:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 15:01:08 -0000
Received: (qmail 84672 invoked by uid 500); 22 Aug 2005 15:01:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84648 invoked by uid 500); 22 Aug 2005 15:01:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84635 invoked by uid 99); 22 Aug 2005 15:01:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:01:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:01:18 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7MEoZju016569
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 11:00:48 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILM00001OX4B3@lmco.com> for java-user@lucene.apache.org; Mon, 22 Aug 2005 10:43:52 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILM00M64OX4BO@lmco.com> for java-user@lucene.apache.org; Mon, 22 Aug 2005 10:43:52 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 22 Aug 2005 10:43:52 -0400
Date: Mon, 22 Aug 2005 10:43:52 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Case-sensitive search
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3945@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Case-sensitive search
Thread-Index: AcWnJ36hMsYHt8XESge+q3v3OzzyygAAD4EQ
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 22 Aug 2005 14:43:52.0342 (UTC) FILETIME=[EA1F7360:01C5A727]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You'll need to have two fields in your index, one for case sensitive and
one for case insensitive

HTH

Aviran
http://www.aviransplace.com

Is there any way to index as case-sensitive and then, while searching,
making the search case-sensitive and case-insensitive using the same
index as needed?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 15:04:38 2005
Return-Path: <java-user-return-15969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22742 invoked from network); 22 Aug 2005 15:04:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 15:04:38 -0000
Received: (qmail 88609 invoked by uid 500); 22 Aug 2005 15:04:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88457 invoked by uid 500); 22 Aug 2005 15:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88442 invoked by uid 99); 22 Aug 2005 15:04:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:04:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:04:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2336013E2039; Mon, 22 Aug 2005 11:04:27 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 48BF513E200A
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 11:03:51 -0400 (EDT)
In-Reply-To: <57255.65.117.150.250.1124721642.squirrel@65.117.150.250>
References: <33552.65.117.150.250.1124394618.squirrel@65.117.150.250>     <20050818195258.99994.qmail@web31109.mail.mud.yahoo.com>     <33647.65.117.150.250.1124396164.squirrel@65.117.150.250>     <934C8604-7089-41DD-B07C-E6D29552F02D@ehatchersolutions.com>     <34271.65.117.150.250.1124403381.squirrel@65.117.150.250>    <1124403498.6381.5.camel@localhost>    <34288.65.117.150.250.1124403778.squirrel@65.117.150.250>    <27034F9C-8B79-49A4-B04B-A6C355CB9104@ehatchersolutions.com> <38371.65.117.150.250.1124462153.squirrel@65.117.150.250> <57255.65.117.150.250.1124721642.squirrel@65.117.150.250>
Mime-Version: 1.0 (Apple Message framework v734)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3C8CC062-19AD-4B0A-8D27-E92F08A17A6C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Case-sensitive search
Date: Mon, 22 Aug 2005 11:03:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 22, 2005, at 10:40 AM, tareque@controldocs.com wrote:
> Is there any way to index as case-sensitive and then, while searching,
> making the search case-sensitive and case-insensitive using the  
> same index
> as needed?

Not really.  Terms in the index are ordered lexicographically,  
including case.  It certainly would be possible to write customized  
Query subclasses to do this sort of thing at the expense of performance.

The only techniques I'm aware of are to either build separate indexes  
or index the same information into separate fields of the same  
documents using different analyzers per field.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 15:09:00 2005
Return-Path: <java-user-return-15970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23501 invoked from network); 22 Aug 2005 15:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 15:09:00 -0000
Received: (qmail 91791 invoked by uid 500); 22 Aug 2005 15:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90955 invoked by uid 500); 22 Aug 2005 15:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90942 invoked by uid 99); 22 Aug 2005 15:08:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:08:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.93.150.34] (HELO mail.dessci.com) (66.93.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:09:13 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Case-sensitive search
Date: Mon, 22 Aug 2005 08:10:55 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD640918E@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case-sensitive search
thread-index: AcWnKyE87YguZPrsSZqmkcF4UIJ1pQAAGl1w
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could also treat the case-sensitive and case-insensitive as Synonyms
and index them at the same position. This would be helpful in phrase
queries.

Rajesh Munavalli=20

> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
> Sent: Monday, August 22, 2005 10:04 AM
> To: java-user@lucene.apache.org
> Subject: Re: Case-sensitive search
>=20
>=20
> On Aug 22, 2005, at 10:40 AM, tareque@controldocs.com wrote:
> > Is there any way to index as case-sensitive and then, while=20
> searching,=20
> > making the search case-sensitive and case-insensitive using=20
> the same=20
> > index as needed?
>=20
> Not really.  Terms in the index are ordered=20
> lexicographically, including case.  It certainly would be=20
> possible to write customized Query subclasses to do this sort=20
> of thing at the expense of performance.
>=20
> The only techniques I'm aware of are to either build separate=20
> indexes or index the same information into separate fields of=20
> the same documents using different analyzers per field.
>=20
>      Erik
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 15:20:58 2005
Return-Path: <java-user-return-15971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27947 invoked from network); 22 Aug 2005 15:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 15:20:58 -0000
Received: (qmail 11307 invoked by uid 500); 22 Aug 2005 15:20:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11287 invoked by uid 500); 22 Aug 2005 15:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11274 invoked by uid 99); 22 Aug 2005 15:20:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:20:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:21:10 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BA14113E2037; Mon, 22 Aug 2005 11:20:48 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id A84AF13E200A
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 11:20:23 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v734)
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD640918E@franklin.corp.dessci>
References: <D1EFB337111B674B8F1BE155B01C6DD640918E@franklin.corp.dessci>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <01006EE8-2FEB-4747-8828-BE75FAFAF5E2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Case-sensitive search
Date: Mon, 22 Aug 2005 11:20:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 22, 2005, at 11:10 AM, Rajesh Munavalli wrote:
> You could also treat the case-sensitive and case-insensitive as  
> Synonyms
> and index them at the same position. This would be helpful in phrase
> queries.

You wouldn't be able to selectively toggle between case-sensitive and  
-insensitive searching this way, though, so I'm not sure if there is  
merit in doing both cases in the same position or not.

     Erik


>
> Rajesh Munavalli
>
>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Monday, August 22, 2005 10:04 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Case-sensitive search
>>
>>
>> On Aug 22, 2005, at 10:40 AM, tareque@controldocs.com wrote:
>>
>>> Is there any way to index as case-sensitive and then, while
>>>
>> searching,
>>
>>> making the search case-sensitive and case-insensitive using
>>>
>> the same
>>
>>> index as needed?
>>>
>>
>> Not really.  Terms in the index are ordered
>> lexicographically, including case.  It certainly would be
>> possible to write customized Query subclasses to do this sort
>> of thing at the expense of performance.
>>
>> The only techniques I'm aware of are to either build separate
>> indexes or index the same information into separate fields of
>> the same documents using different analyzers per field.
>>
>>      Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 15:41:49 2005
Return-Path: <java-user-return-15972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38094 invoked from network); 22 Aug 2005 15:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 15:41:49 -0000
Received: (qmail 43492 invoked by uid 500); 22 Aug 2005 15:41:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43444 invoked by uid 500); 22 Aug 2005 15:41:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43413 invoked by uid 99); 22 Aug 2005 15:41:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:41:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.93.150.34] (HELO mail.dessci.com) (66.93.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:42:00 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Case-sensitive search
Date: Mon, 22 Aug 2005 08:43:45 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD640919D@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case-sensitive search
thread-index: AcWnLWnPdJT8301nQmiCT0Qs7/0wjwAAb9mQ
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

At the query time I was thinking of two queries ORed toegether. One with
user entered query and the other case insensitive query. For example:

The user query "Java Virtual machine" would be translated into
"Java Virtual machine" OR "java virtual machine".=20

Eventhough the user mistyped the case ("machine" instead of "Machine"),
the query would retrieve documents. I am not sure about the performance
though. Erik would be the right person to help us understand performance
constraints in doing so.

Rajesh Munavalli

> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
> Sent: Monday, August 22, 2005 10:20 AM
> To: java-user@lucene.apache.org
> Subject: Re: Case-sensitive search
>=20
>=20
> On Aug 22, 2005, at 11:10 AM, Rajesh Munavalli wrote:
> > You could also treat the case-sensitive and case-insensitive as=20
> > Synonyms and index them at the same position. This would be=20
> helpful in=20
> > phrase queries.
>=20
> You wouldn't be able to selectively toggle between=20
> case-sensitive and -insensitive searching this way, though,=20
> so I'm not sure if there is merit in doing both cases in the=20
> same position or not.
>=20
>      Erik
>=20
>=20
> >
> > Rajesh Munavalli
> >
> >
> >> -----Original Message-----
> >> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> >> Sent: Monday, August 22, 2005 10:04 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Case-sensitive search
> >>
> >>
> >> On Aug 22, 2005, at 10:40 AM, tareque@controldocs.com wrote:
> >>
> >>> Is there any way to index as case-sensitive and then, while
> >>>
> >> searching,
> >>
> >>> making the search case-sensitive and case-insensitive using
> >>>
> >> the same
> >>
> >>> index as needed?
> >>>
> >>
> >> Not really.  Terms in the index are ordered lexicographically,=20
> >> including case.  It certainly would be possible to write=20
> customized=20
> >> Query subclasses to do this sort of thing at the expense of=20
> >> performance.
> >>
> >> The only techniques I'm aware of are to either build=20
> separate indexes=20
> >> or index the same information into separate fields of the same=20
> >> documents using different analyzers per field.
> >>
> >>      Erik
> >>
> >>
> >>=20
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 15:49:38 2005
Return-Path: <java-user-return-15973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40824 invoked from network); 22 Aug 2005 15:49:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 15:49:38 -0000
Received: (qmail 59056 invoked by uid 500); 22 Aug 2005 15:49:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58688 invoked by uid 500); 22 Aug 2005 15:49:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58675 invoked by uid 99); 22 Aug 2005 15:49:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:49:33 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.117.150.145] (HELO mail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 08:49:51 -0700
Received: from webmail.controldocs.com (localhost [127.0.0.1])
	by mail.controldocs.com (8.12.11/8.12.11) with ESMTP id j7MFnU8l022525
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 10:49:30 -0500
Received: from 65.117.150.250
        (SquirrelMail authenticated user tareque);
        by webmail.controldocs.com with HTTP;
        Mon, 22 Aug 2005 10:49:30 -0500 (CDT)
Message-ID: <58322.65.117.150.250.1124725770.squirrel@65.117.150.250>
In-Reply-To: <01006EE8-2FEB-4747-8828-BE75FAFAF5E2@ehatchersolutions.com>
References: <D1EFB337111B674B8F1BE155B01C6DD640918E@franklin.corp.dessci>
    <01006EE8-2FEB-4747-8828-BE75FAFAF5E2@ehatchersolutions.com>
Date: Mon, 22 Aug 2005 10:49:30 -0500 (CDT)
Subject: Re: Case-sensitive search
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3-RC1
X-Mailer: SquirrelMail/1.4.3-RC1
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yeah, since I will need to toggle selectively, it may not work. Also as
for writing customized query subclasses, only way I can think of is to
create several queries with all possible upper/lower case combinations of
the main query, which may really degrade the performance. Creating two
different indexes means more overhead for maintaining the index with new
docs coming in. Creating two separate fields sounds to be the better
option.

>
> On Aug 22, 2005, at 11:10 AM, Rajesh Munavalli wrote:
>> You could also treat the case-sensitive and case-insensitive as
>> Synonyms
>> and index them at the same position. This would be helpful in phrase
>> queries.
>
> You wouldn't be able to selectively toggle between case-sensitive and
> -insensitive searching this way, though, so I'm not sure if there is
> merit in doing both cases in the same position or not.
>
>      Erik
>
>
>>
>> Rajesh Munavalli
>>
>>
>>> -----Original Message-----
>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>> Sent: Monday, August 22, 2005 10:04 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Case-sensitive search
>>>
>>>
>>> On Aug 22, 2005, at 10:40 AM, tareque@controldocs.com wrote:
>>>
>>>> Is there any way to index as case-sensitive and then, while
>>>>
>>> searching,
>>>
>>>> making the search case-sensitive and case-insensitive using
>>>>
>>> the same
>>>
>>>> index as needed?
>>>>
>>>
>>> Not really.  Terms in the index are ordered
>>> lexicographically, including case.  It certainly would be
>>> possible to write customized Query subclasses to do this sort
>>> of thing at the expense of performance.
>>>
>>> The only techniques I'm aware of are to either build separate
>>> indexes or index the same information into separate fields of
>>> the same documents using different analyzers per field.
>>>
>>>      Erik
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 16:56:35 2005
Return-Path: <java-user-return-15974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80378 invoked from network); 22 Aug 2005 16:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 16:56:34 -0000
Received: (qmail 80225 invoked by uid 500); 22 Aug 2005 16:56:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79599 invoked by uid 500); 22 Aug 2005 16:56:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79586 invoked by uid 99); 22 Aug 2005 16:56:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 09:56:29 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.77] (HELO web31115.mail.mud.yahoo.com) (68.142.201.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Aug 2005 09:56:46 -0700
Received: (qmail 29074 invoked by uid 60001); 22 Aug 2005 16:55:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=MOjvukhozgw6AFqzUkIFsE/gPhkQY8AFGCW5yF0dBEVPOIK37s2O/ux/CnufgC/dljU/E93tglDqiEcEz+w9ZZ0mSZPO1Ob4B91dFmFaePNAGoe+HLbNj+0ksQhxvzsoDrruVpv1EYVUp6ACtB8QPbL0o1HXQ9+oIg+E8xCGGY8=  ;
Message-ID: <20050822165528.29072.qmail@web31115.mail.mud.yahoo.com>
Received: from [69.201.142.21] by web31115.mail.mud.yahoo.com via HTTP; Mon, 22 Aug 2005 09:55:28 PDT
Date: Mon, 22 Aug 2005 09:55:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: UpdateIndex
To: java-user@lucene.apache.org
In-Reply-To: <25696.1124717433@www84.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, this is not how you should do it.
Use reader.delete(Term) method to delete documents:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#delete(org.apache.lucene.index.Term)

Otis

--- dozean@gmx.de wrote:

> Hi,
> 
> i wrote an Index update, where first the IndexReader 
> delete all files from index which are changed.
> Than add documents which are not in the index!
> 
> Alone the deletion take so long, because i have 2 "for" loops!
> 
> file = array with all files in a directory
> 
> for (int i = 0; i<file.length; i++) {
> 	if (file[i].isFile()) {
>    for (int j =0; j<reader.numDocs(); j++) {
> 	if (file[i].getName() == reader.document(j).get("name") &&
> 	file[i].lastModified() >
> Integer.parseInt(reader.document(j).get("date")))
> {						reader.delete(j); 
>      }
> }
> 
> Maybe this is the wrong way?
> 
> Bye Derya
> 
> 
> -- 
> 5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
> +++ GMX - die erste Adresse fr Mail, Message, More +++
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 19:54:34 2005
Return-Path: <java-user-return-15975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27080 invoked from network); 22 Aug 2005 19:54:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 19:54:31 -0000
Received: (qmail 61006 invoked by uid 500); 22 Aug 2005 19:54:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60969 invoked by uid 500); 22 Aug 2005 19:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60863 invoked by uid 99); 22 Aug 2005 19:54:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 12:54:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO zproxy.gmail.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 12:54:30 -0700
Received: by zproxy.gmail.com with SMTP id n29so745922nzf
        for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 12:54:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=Ie+hIvmZETo9JlHRKut636t4cR4kDccOUdH5iiFkR/+5nCLLw9OOPbQShidiZlcGzJrrKTwJHDfuTbeae/LI64RoEySwIWwhdt/vU87at+fB/VyDcXmDGKJ0KJXjgFXWx6bVupLN2Z95ZU9fLMQszdbYnuqoBe7ABGiWstffoNU=
Received: by 10.36.220.4 with SMTP id s4mr4446476nzg;
        Mon, 22 Aug 2005 12:54:09 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 22sm2457960nzn.2005.08.22.12.54.07;
        Mon, 22 Aug 2005 12:54:09 -0700 (PDT)
Message-ID: <430A2D5E.2090605@gmail.com>
Date: Mon, 22 Aug 2005 14:54:06 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Query Parser custom analyzer question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a custom Analyzer which performs normalization on all of the 
terms as they pass through.

It does normalization like the following:

trees -> tree

Sometimes my normalizer returns multiple words for a normalization - for 
example:

leaves -> leaf leave

The second and all subsequent terms have the position increment set to 0.

The problem I am having now is that the QueryParser seems to ignore the 
positionIncrement values. 

If I create a QueryParser with my normalizing analyzer, and ask it to 
parse the following (default field of 'body'):

'something about leaves' - the query it generates is:  'body:something 
body:about body:"leaf leave"'

which does not find results, due to the double quotes.

I would have expected: 'body:something body:about body:leaf body:leave'

Is there any way I can fix this?  It is a bug?  Or just a mis-use and/or 
unsupported use case of the Query Parser?

Thanks,

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 20:07:50 2005
Return-Path: <java-user-return-15976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43162 invoked from network); 22 Aug 2005 20:07:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 20:07:50 -0000
Received: (qmail 90261 invoked by uid 500); 22 Aug 2005 20:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90241 invoked by uid 500); 22 Aug 2005 20:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90228 invoked by uid 99); 22 Aug 2005 20:07:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 13:07:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 13:08:02 -0700
Received: (qmail 16751 invoked from network); 22 Aug 2005 20:07:40 -0000
Received: from unknown (HELO p5496D1DA.dip.t-dialin.net) ([pbs]695637@[84.150.209.218])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 22 Aug 2005 20:07:40 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Query Parser custom analyzer question
Date: Mon, 22 Aug 2005 22:08:37 +0200
User-Agent: KMail/1.8
References: <430A2D5E.2090605@gmail.com>
In-Reply-To: <430A2D5E.2090605@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508222208.37753@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 22 August 2005 21:54, Dan Armbrust wrote:

> The problem I am having now is that the QueryParser seems to ignore the
> positionIncrement values.

Correct handling of multiple terms per position was only added to SVN, it's 
not part of Lucene 1.4.3.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 20:33:19 2005
Return-Path: <java-user-return-15977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71517 invoked from network); 22 Aug 2005 20:33:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 20:33:19 -0000
Received: (qmail 36190 invoked by uid 500); 22 Aug 2005 20:33:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36156 invoked by uid 500); 22 Aug 2005 20:33:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36143 invoked by uid 99); 22 Aug 2005 20:33:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 13:33:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 13:33:30 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A2FDA13E2037; Mon, 22 Aug 2005 16:33:10 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id EEB0513E2039
	for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 16:32:55 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v734)
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD640919D@franklin.corp.dessci>
References: <D1EFB337111B674B8F1BE155B01C6DD640919D@franklin.corp.dessci>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D841E4DE-80EF-4F4D-9003-E052277D1EC6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Case-sensitive search
Date: Mon, 22 Aug 2005 16:32:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 22, 2005, at 11:43 AM, Rajesh Munavalli wrote:

> At the query time I was thinking of two queries ORed toegether. One  
> with
> user entered query and the other case insensitive query. For example:
>
> The user query "Java Virtual machine" would be translated into
> "Java Virtual machine" OR "java virtual machine".
>
> Eventhough the user mistyped the case ("machine" instead of  
> "Machine"),
> the query would retrieve documents. I am not sure about the  
> performance
> though. Erik would be the right person to help us understand  
> performance
> constraints in doing so.

Performance issues aside (as they aren't really a factor in this  
equation), I still don't understand what good ORing queries with  
various cases does in the scenario you describe.  If you're going to  
index lower case, and then OR in the lowercase, then there is really  
no need to even have the case-sensitive parts there in the index or  
in the query.

     Erik



>
> Rajesh Munavalli
>
>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Monday, August 22, 2005 10:20 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Case-sensitive search
>>
>>
>> On Aug 22, 2005, at 11:10 AM, Rajesh Munavalli wrote:
>>
>>> You could also treat the case-sensitive and case-insensitive as
>>> Synonyms and index them at the same position. This would be
>>>
>> helpful in
>>
>>> phrase queries.
>>>
>>
>> You wouldn't be able to selectively toggle between
>> case-sensitive and -insensitive searching this way, though,
>> so I'm not sure if there is merit in doing both cases in the
>> same position or not.
>>
>>      Erik
>>
>>
>>
>>>
>>> Rajesh Munavalli
>>>
>>>
>>>
>>>> -----Original Message-----
>>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>>> Sent: Monday, August 22, 2005 10:04 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Case-sensitive search
>>>>
>>>>
>>>> On Aug 22, 2005, at 10:40 AM, tareque@controldocs.com wrote:
>>>>
>>>>
>>>>> Is there any way to index as case-sensitive and then, while
>>>>>
>>>>>
>>>> searching,
>>>>
>>>>
>>>>> making the search case-sensitive and case-insensitive using
>>>>>
>>>>>
>>>> the same
>>>>
>>>>
>>>>> index as needed?
>>>>>
>>>>>
>>>>
>>>> Not really.  Terms in the index are ordered lexicographically,
>>>> including case.  It certainly would be possible to write
>>>>
>> customized
>>
>>>> Query subclasses to do this sort of thing at the expense of
>>>> performance.
>>>>
>>>> The only techniques I'm aware of are to either build
>>>>
>> separate indexes
>>
>>>> or index the same information into separate fields of the same
>>>> documents using different analyzers per field.
>>>>
>>>>      Erik
>>>>
>>>>
>>>>
>>>>
>> ---------------------------------------------------------------------
>>
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 20:43:38 2005
Return-Path: <java-user-return-15978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82430 invoked from network); 22 Aug 2005 20:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 20:43:38 -0000
Received: (qmail 60766 invoked by uid 500); 22 Aug 2005 20:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60178 invoked by uid 500); 22 Aug 2005 20:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60165 invoked by uid 99); 22 Aug 2005 20:43:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 13:43:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.93.150.34] (HELO mail.dessci.com) (66.93.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 13:43:50 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Case-sensitive search
Date: Mon, 22 Aug 2005 13:45:35 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD640925D@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case-sensitive search
thread-index: AcWnWQyOIYTkxvwpQ/+mkpLW55JKgQAAJCcg
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If the original document contains the case-sensitive content that
document will be retrieved with higher score.=20

For example:
Document 1: "Java Virtual Machine is ...."
Document 2: "java virtual machine is ...."

Index Contents of Document 1:
Java java
Virtual virtual
Machine machine
Is

Index contents of Document 2:
java
virtual
machine
is

If I understand correct, the query "Java Virtual machine" should
retrieve with Document 1 ranked higher than Document 2 because the query
is matched twice in Document 1 but only once in Document 2. In the case
of all lower case queries we don't have to OR the queries.

Rajesh Munavalli

> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
> Sent: Monday, August 22, 2005 3:33 PM
> To: java-user@lucene.apache.org
> Subject: Re: Case-sensitive search
>=20
>=20
> On Aug 22, 2005, at 11:43 AM, Rajesh Munavalli wrote:
>=20
> > At the query time I was thinking of two queries ORed toegether. One=20
> > with user entered query and the other case insensitive query. For=20
> > example:
> >
> > The user query "Java Virtual machine" would be translated=20
> into "Java=20
> > Virtual machine" OR "java virtual machine".
> >
> > Eventhough the user mistyped the case ("machine" instead of=20
> > "Machine"), the query would retrieve documents. I am not sure about=20
> > the performance though. Erik would be the right person to help us=20
> > understand performance constraints in doing so.
>=20
> Performance issues aside (as they aren't really a factor in=20
> this equation), I still don't understand what good ORing=20
> queries with various cases does in the scenario you describe.=20
>  If you're going to index lower case, and then OR in the=20
> lowercase, then there is really no need to even have the=20
> case-sensitive parts there in the index or in the query.
>=20
>      Erik
>=20
>=20
>=20
> >
> > Rajesh Munavalli
> >
> >
> >> -----Original Message-----
> >> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> >> Sent: Monday, August 22, 2005 10:20 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Case-sensitive search
> >>
> >>
> >> On Aug 22, 2005, at 11:10 AM, Rajesh Munavalli wrote:
> >>
> >>> You could also treat the case-sensitive and case-insensitive as
> >>> Synonyms and index them at the same position. This would be
> >>>
> >> helpful in
> >>
> >>> phrase queries.
> >>>
> >>
> >> You wouldn't be able to selectively toggle between
> >> case-sensitive and -insensitive searching this way, though,
> >> so I'm not sure if there is merit in doing both cases in the
> >> same position or not.
> >>
> >>      Erik
> >>
> >>
> >>
> >>>
> >>> Rajesh Munavalli
> >>>
> >>>
> >>>
> >>>> -----Original Message-----
> >>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> >>>> Sent: Monday, August 22, 2005 10:04 AM
> >>>> To: java-user@lucene.apache.org
> >>>> Subject: Re: Case-sensitive search
> >>>>
> >>>>
> >>>> On Aug 22, 2005, at 10:40 AM, tareque@controldocs.com wrote:
> >>>>
> >>>>
> >>>>> Is there any way to index as case-sensitive and then, while
> >>>>>
> >>>>>
> >>>> searching,
> >>>>
> >>>>
> >>>>> making the search case-sensitive and case-insensitive using
> >>>>>
> >>>>>
> >>>> the same
> >>>>
> >>>>
> >>>>> index as needed?
> >>>>>
> >>>>>
> >>>>
> >>>> Not really.  Terms in the index are ordered lexicographically,
> >>>> including case.  It certainly would be possible to write
> >>>>
> >> customized
> >>
> >>>> Query subclasses to do this sort of thing at the expense of
> >>>> performance.
> >>>>
> >>>> The only techniques I'm aware of are to either build
> >>>>
> >> separate indexes
> >>
> >>>> or index the same information into separate fields of the same
> >>>> documents using different analyzers per field.
> >>>>
> >>>>      Erik
> >>>>
> >>>>
> >>>>
> >>>>
> >>=20
> ---------------------------------------------------------------------
> >>
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>>
> >>>
> >>>
> >>=20
> ---------------------------------------------------------------------
> >>
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >>=20
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 20:46:33 2005
Return-Path: <java-user-return-15979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85033 invoked from network); 22 Aug 2005 20:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 20:46:32 -0000
Received: (qmail 64264 invoked by uid 500); 22 Aug 2005 20:46:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64226 invoked by uid 500); 22 Aug 2005 20:46:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63403 invoked by uid 99); 22 Aug 2005 20:46:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 13:46:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO zproxy.gmail.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 13:46:35 -0700
Received: by zproxy.gmail.com with SMTP id i11so796388nzi
        for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 13:46:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=klW8X/3d5HtPUq1+NESGy4c6+QMLbjvSJZpKYB4q3JMLpXmE0a6xtc04yKbayTZGcvbdFfYnsyZ9JJ51vaNkqg+qXtDkqCA4XBfHqQ3QQRDJ+nfiR7m6RksNgJ1qL61G3B5qnLKgb/Oj9yHcLTeW4sE22QL60jUjUohTAo4VGVQ=
Received: by 10.36.43.13 with SMTP id q13mr1605422nzq;
        Mon, 22 Aug 2005 13:46:11 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 15sm6215310nzo.2005.08.22.13.46.11;
        Mon, 22 Aug 2005 13:46:11 -0700 (PDT)
Message-ID: <430A3991.8040902@gmail.com>
Date: Mon, 22 Aug 2005 15:46:09 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: 1.9 official betas WAS: Query Parser custom analyzer question
References: <430A2D5E.2090605@gmail.com> <200508222208.37753@danielnaber.de>
In-Reply-To: <200508222208.37753@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:

>Correct handling of multiple terms per position was only added to SVN, it's 
>not part of Lucene 1.4.3.
>
>Regards
> Daniel
>
Cool - is there a daily build somewhere, or do I have to roll my own?  I 
couldn't find a daily build or a 1.9 alpha, beta, etc. on the site.

Any idea when 1.9 might be released, even as an alpha?  The dates in the 
Lucene2Whiteboard on the wiki no longer look realistic (unless the 1.9 
release is going to happen at the same time as the 2.0 release - which I 
could understand, if the 2.0 will only differ by removing all of the 
depreciated methods.

Thanks,


Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 21:18:59 2005
Return-Path: <java-user-return-15980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97075 invoked from network); 22 Aug 2005 21:18:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 21:18:59 -0000
Received: (qmail 26747 invoked by uid 500); 22 Aug 2005 21:18:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26717 invoked by uid 500); 22 Aug 2005 21:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26704 invoked by uid 99); 22 Aug 2005 21:18:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 14:18:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brogar@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 14:19:12 -0700
Received: by wproxy.gmail.com with SMTP id 71so1179316wri
        for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 14:18:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Rnz4Qrm/F7MK/XvvxFCbbPfjJZirogX4QmCYQBWSMXkuMueDrlelOXGHQBcImJx+x1BZMpQhwvl5tVx9Tc8BuP6wFj+QHT4LjlPKsc9PbMu93jRIJkoPpN20HjT1Azhq24DkdDH9vabmM2Dnuj+ojM60CDgWFlmq+EtqCqCClFA=
Received: by 10.54.24.13 with SMTP id 13mr1704208wrx;
        Mon, 22 Aug 2005 14:18:52 -0700 (PDT)
Received: by 10.54.121.15 with HTTP; Mon, 22 Aug 2005 14:18:52 -0700 (PDT)
Message-ID: <34cc3b0a05082214182fd7b268@mail.gmail.com>
Date: Mon, 22 Aug 2005 17:18:52 -0400
From: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing document instances and retrieving instance attributes
In-Reply-To: <4304CFBD.2030908@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <34cc3b0a050811113411bcfea@mail.gmail.com>
	 <20050811185206.5998.qmail@web31107.mail.mud.yahoo.com>
	 <34cc3b0a05081112412a18a802@mail.gmail.com>
	 <4304CFBD.2030908@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/18/05, Doug Cutting <cutting@apache.org> wrote:
> Chris D wrote:
> > Well in my case field order is important, but the order of the
> > individual fields isn't. So I can speed up getFields to roughly O(1)
> > by implementing Document as follows.
>=20
> Have you actually found getFields to be a performance bottleneck in your
> application?  I'd be surprised if it was.  If it isn't, then this looks
> like a premature optimization.
>=20
> Doug

I did actually, mind you my index is a little strange in that there
may be 1000 fields or so sometimes (Which is why I started this thread
to begin with :-)). But when I do a getFields("author") for each hit,
it would have to iterate through all of the fields for every hit... So
for 100 hits it iterates through all 1000 fields everytime that's a
total of 100000 iterations. If the number of hits get reasonably large
it might take a fair amount of time. I don't have a test case proving
an actual time benefit but I could probably write one tomorrow if you
think it would be interesting. (It's the end of the work day here so
I'm going home now to non-lucene activities)

Cheers,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 21:28:10 2005
Return-Path: <java-user-return-15981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1558 invoked from network); 22 Aug 2005 21:28:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 21:28:10 -0000
Received: (qmail 41985 invoked by uid 500); 22 Aug 2005 21:28:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41964 invoked by uid 500); 22 Aug 2005 21:28:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41951 invoked by uid 99); 22 Aug 2005 21:28:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 14:28:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 14:28:22 -0700
Received: (qmail 19154 invoked from network); 22 Aug 2005 21:28:00 -0000
Received: from unknown (HELO p5496E4A9.dip.t-dialin.net) ([pbs]695637@[84.150.228.169])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 22 Aug 2005 21:28:00 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: 1.9 official betas WAS: Query Parser custom analyzer question
Date: Mon, 22 Aug 2005 23:28:58 +0200
User-Agent: KMail/1.8
References: <430A2D5E.2090605@gmail.com> <200508222208.37753@danielnaber.de> <430A3991.8040902@gmail.com>
In-Reply-To: <430A3991.8040902@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200508222328.58725@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 22 August 2005 22:46, Dan Armbrust wrote:

> Cool - is there a daily build somewhere, or do I have to roll my own? =C2=
=A0I
> couldn't find a daily build or a 1.9 alpha, beta, etc. on the site.

You need to get it from SVN and then build it yourself.

> Any idea when 1.9 might be released, even as an alpha?

In my opinion the code is ready, it's just that someone needs to start with=
=20
the release process (which is not as trivial as it may sound).

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 22 23:07:14 2005
Return-Path: <java-user-return-15982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43985 invoked from network); 22 Aug 2005 23:07:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Aug 2005 23:07:14 -0000
Received: (qmail 51568 invoked by uid 500); 22 Aug 2005 23:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51546 invoked by uid 500); 22 Aug 2005 23:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51531 invoked by uid 99); 22 Aug 2005 23:07:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 16:07:09 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 16:07:26 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1E7LNj-0006W3-Aw
	for java-user@lucene.apache.org; Mon, 22 Aug 2005 16:07:07 -0700
Message-ID: <685553.post@talk.nabble.com>
Date: Mon, 22 Aug 2005 16:07:07 -0700 (PDT)
From: "Will (sent by Nabble.com)" <lists@nabble.com>
Reply-To: Will <will.lin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: AW: How does Lucene to compute score ?
In-Reply-To: <FGEOLCMJNPHDGDBDEILDEEBJGEAA.kguelzau@novomind.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68_25094691.1124752027333"
X-Nabble-Sender: Nabble Forums <lists@nabble.com>
X-Nabble-From: Will <will.lin@gmail.com>
References: <OF9A7C02A3.02A1466A-ONC1256FFF.002B13AF-C1256FFF.002BAADC@urssaf.fr> <FGEOLCMJNPHDGDBDEILDEEBJGEAA.kguelzau@novomind.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_68_25094691.1124752027333
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hey guys, here is the exact thing you want, check out this searchable archive hosted by Nabble: http://www.nabble.com/Lucene-f44.html - it archives all Lucene mailing lists into a forum, you can cross search all or drill down and search a single list. You can also narrow search by author, sort by date or relevance. By the way, the Nabble people use lucene for search.
--
Sent from the Lucene - Java Users forum at Nabble.com:
http://www.nabble.com/How-does-Lucene-to-compute-score--t10288.html#a685553

------=_Part_68_25094691.1124752027333--


From java-user-return-15983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 01:49:10 2005
Return-Path: <java-user-return-15983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88418 invoked from network); 23 Aug 2005 01:49:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 01:49:10 -0000
Received: (qmail 81155 invoked by uid 500); 23 Aug 2005 01:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81120 invoked by uid 500); 23 Aug 2005 01:49:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81005 invoked by uid 99); 23 Aug 2005 01:49:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 18:49:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Aug 2005 18:49:20 -0700
Received: by wproxy.gmail.com with SMTP id i5so1399837wra
        for <java-user@lucene.apache.org>; Mon, 22 Aug 2005 18:48:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FDoRtlQtErmCgvuZFgdSEPWfcqh8aUjq/4gPye5r2cocGNn3jmNTK978FtkPirpwAplbBW0orNYzhPOBNFjO1uEmoJJnVZut41G4l9exqPdt6y+ku3U3sbBXEXpF0YxuCFFB0DOdVkIpTJfu0Qncj3CxZ2ZnuRoj39eXB4Hoe70=
Received: by 10.54.156.1 with SMTP id d1mr1880324wre;
        Mon, 22 Aug 2005 18:48:59 -0700 (PDT)
Received: by 10.54.125.18 with HTTP; Mon, 22 Aug 2005 18:48:59 -0700 (PDT)
Message-ID: <fb9748c90508221848688c5a41@mail.gmail.com>
Date: Tue, 23 Aug 2005 09:48:59 +0800
From: Ray Tsang <saturnism@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: UpdateIndex
In-Reply-To: <20050822165528.29072.qmail@web31115.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <25696.1124717433@www84.gmx.net>
	 <20050822165528.29072.qmail@web31115.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This could be off topic, but I made something that updates indices
that worked like the following, wonder if anybody has the same ideas?=20
I found something like IndexAccessControl in the mailing list before.=20
An implementation of the following uses IAC.

ManagedIndex index =3D ManagedIndex.getInstance(configuration); // could
return different implemetnations of the ManagedIndex

Searcher searcher =3D index.getSearcher();  // could return different
implementations of Searcher

ManagedUpdateSession session =3D index.beginUpdate();  // start a update se=
ssion

session.addDocument(...); // use session to add, delete, update documents
session.deleteDocument(...);
session.updateDocument(...);

// lastly
index.endUpdate(); // or.. session.commit()?  marks the end of the
update sequence, refresh the searchers.

IndexReader, IndexWriter, indexSearcher would be managed, and there
can be multiple implementations of how index is structured, e.g.
RotatingIndex, AlternatingIndex, that rotates document updates to
different indices.

Ray,

On 8/23/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Yes, this is not how you should do it.
> Use reader.delete(Term) method to delete documents:
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReade=
r.html#delete(org.apache.lucene.index.Term)
>=20
> Otis
>=20
> --- dozean@gmx.de wrote:
>=20
> > Hi,
> >
> > i wrote an Index update, where first the IndexReader
> > delete all files from index which are changed.
> > Than add documents which are not in the index!
> >
> > Alone the deletion take so long, because i have 2 "for" loops!
> >
> > file =3D array with all files in a directory
> >
> > for (int i =3D 0; i<file.length; i++) {
> >       if (file[i].isFile()) {
> >    for (int j =3D0; j<reader.numDocs(); j++) {
> >       if (file[i].getName() =3D=3D reader.document(j).get("name") &&
> >       file[i].lastModified() >
> > Integer.parseInt(reader.document(j).get("date")))
> > {                                             reader.delete(j);
> >      }
> > }
> >
> > Maybe this is the wrong way?
> >
> > Bye Derya
> >
> >
> > --
> > 5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
> > +++ GMX - die erste Adresse f=FCr Mail, Message, More +++
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 07:59:10 2005
Return-Path: <java-user-return-15984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91596 invoked from network); 23 Aug 2005 07:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 07:59:10 -0000
Received: (qmail 59007 invoked by uid 500); 23 Aug 2005 07:59:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58981 invoked by uid 500); 23 Aug 2005 07:59:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58968 invoked by uid 99); 23 Aug 2005 07:59:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 00:59:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [193.229.0.44] (HELO fep02-app.kolumbus.fi) (193.229.0.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 00:59:21 -0700
Received: from mikkon4 ([84.230.183.156]) by fep02-app.kolumbus.fi
          with ESMTP
          id <20050823075859.WAVC8199.fep02-app.kolumbus.fi@mikkon4>
          for <java-user@lucene.apache.org>;
          Tue, 23 Aug 2005 10:58:59 +0300
From: "Mikko Noromaa" <mikko@noromaa.fi>
To: <java-user@lucene.apache.org>
Subject: Why is delete() part of IndexREADER?
Date: Tue, 23 Aug 2005 10:58:59 +0300
Message-ID: <42b801c5a7b8$8508e1a0$152ca8c0@mikkon4>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Why IndexReader allows me to do write-operations like delete? I'd think =
this
should be part of the IndexWriter class instead.

I had created a wrapper class that callers can open for either writing =
or
searching. It creates either an IndexWriter or an IndexSearches and =
stores
that inside itself for later use in methods like MyAddDocument and =
MySearch.
Implementation of MyUpdateDocument, however, became very ugly:

// Open the index for "reading" first.
writer.close();
reader =3D IndexReader.open(CurrentIndexPath);

// Delete the requested document.
reader.delete(new Term("id", String.valueOf(ID)));
reader.close();

// Re-open the IndexWriter.
writer =3D new IndexWriter(CurrentIndexPath, analyzer, false);

// Add the new document through normal add-logic.
DoAddDocument (DocText, ID);


Could the delete() method be moved from IndexReader to IndexWriter? Or
perhaps IndexWriter should implement IndexReader, so delete() would be
callable on IndexWriter as well?

--

Mikko Noromaa (mikko@noromaa.fi) - tel. +358 40 7348034
Noromaa Solutions - see http://www.nm-sol.com/
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 09:12:12 2005
Return-Path: <java-user-return-15985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14992 invoked from network); 23 Aug 2005 09:12:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 09:12:12 -0000
Received: (qmail 35971 invoked by uid 500); 23 Aug 2005 09:12:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35949 invoked by uid 500); 23 Aug 2005 09:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35936 invoked by uid 99); 23 Aug 2005 09:12:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 02:12:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 02:12:22 -0700
Received: by wproxy.gmail.com with SMTP id i5so1514975wra
        for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 02:12:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ddzJmaD2GKeaCCUr4Z+2RQc6a8rp/faOAERU/ra+z0cGcaAte/EKsfhp6B7lmdwi0xD2vVut0FySmIn7e2IR7QJXzQBhK+vnZiSZ9I7sHJh04pIaa8Y00wm1kHMEM0PL3/YQQFVOgFmncP7Ew4cDxOYzXpwA4RBzrKuWWaYQhts=
Received: by 10.54.28.31 with SMTP id b31mr2081874wrb;
        Tue, 23 Aug 2005 02:12:03 -0700 (PDT)
Received: by 10.54.125.18 with HTTP; Tue, 23 Aug 2005 02:12:03 -0700 (PDT)
Message-ID: <fb9748c905082302124985323c@mail.gmail.com>
Date: Tue, 23 Aug 2005 17:12:03 +0800
From: Ray Tsang <saturnism@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is delete() part of IndexREADER?
In-Reply-To: <42b801c5a7b8$8508e1a0$152ca8c0@mikkon4>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42b801c5a7b8$8508e1a0$152ca8c0@mikkon4>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have come to peace with this problem.  Basically, I think it's
because you need to read/find what you are deleting first? hehe

Writer just need to write whatever it's been told to write.

ray,

On 8/23/05, Mikko Noromaa <mikko@noromaa.fi> wrote:
> Hi,
>=20
> Why IndexReader allows me to do write-operations like delete? I'd think t=
his
> should be part of the IndexWriter class instead.
>=20
> I had created a wrapper class that callers can open for either writing or
> searching. It creates either an IndexWriter or an IndexSearches and store=
s
> that inside itself for later use in methods like MyAddDocument and MySear=
ch.
> Implementation of MyUpdateDocument, however, became very ugly:
>=20
> // Open the index for "reading" first.
> writer.close();
> reader =3D IndexReader.open(CurrentIndexPath);
>=20
> // Delete the requested document.
> reader.delete(new Term("id", String.valueOf(ID)));
> reader.close();
>=20
> // Re-open the IndexWriter.
> writer =3D new IndexWriter(CurrentIndexPath, analyzer, false);
>=20
> // Add the new document through normal add-logic.
> DoAddDocument (DocText, ID);
>=20
>=20
> Could the delete() method be moved from IndexReader to IndexWriter? Or
> perhaps IndexWriter should implement IndexReader, so delete() would be
> callable on IndexWriter as well?
>=20
> --
>=20
> Mikko Noromaa (mikko@noromaa.fi) - tel. +358 40 7348034
> Noromaa Solutions - see http://www.nm-sol.com/
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 09:34:50 2005
Return-Path: <java-user-return-15986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22593 invoked from network); 23 Aug 2005 09:34:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 09:34:50 -0000
Received: (qmail 67815 invoked by uid 500); 23 Aug 2005 09:34:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67763 invoked by uid 500); 23 Aug 2005 09:34:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67719 invoked by uid 99); 23 Aug 2005 09:34:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 02:34:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 02:34:50 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4AA7A13E2039; Tue, 23 Aug 2005 05:34:28 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dhcp.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id B437413E2039
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 05:34:18 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v734)
In-Reply-To: <c0edae75050821232716184f67@mail.gmail.com>
References: <c0edae75050821232716184f67@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F4B83803-8A22-4CAE-B44F-3F9587DD22D2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Hierarchical Documents
Date: Tue, 23 Aug 2005 05:34:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 22, 2005, at 2:27 AM, Rohit Lodha wrote:
> Currently, Documents cannot contain other documents. I have a Graph of
> Objects (Documents) to search in.
>
> I could flatten them and search but...
>
> Is there any nice way to do it?

I have used a technique of encoding a hierarchical path (like "/ 
category/subcategory/sub-subcategory") into an indexed untokenized  
field.  This allows for flat or hierarchical queries.  A hierarchical  
PrefixQuery of "/category" returns all documents from "/category"  
downward, for example.

I suspect others have done more interesting techniques for this sort  
of thing - I'd love to hear about them.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 10:33:34 2005
Return-Path: <java-user-return-15987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42607 invoked from network); 23 Aug 2005 10:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 10:33:33 -0000
Received: (qmail 27201 invoked by uid 500); 23 Aug 2005 10:33:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27129 invoked by uid 500); 23 Aug 2005 10:33:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27116 invoked by uid 99); 23 Aug 2005 10:33:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 03:33:27 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 03:33:44 -0700
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id LAA26011
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 11:35:54 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma026009; Tue, 23 Aug 05 11:35:46 +0100
In-Reply-To: <F4B83803-8A22-4CAE-B44F-3F9587DD22D2@ehatchersolutions.com>
Subject: Re: Hierarchical Documents
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.1 January 21, 2004
Message-ID: <OF1249863A.001C0227-ON80257066.00359212-80257066.003A00BC@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Tue, 23 Aug 2005 11:36:04 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 23/08/2005 11:36:05
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






I have been struggling with this sort of problem for some time and still
haven't got an ideal solution.

Initially I was going to go for the approach Erik has suggested for similar
reasons - it allowed me to search within categories and within sub
categories of those categories very simply. Unfortunately in my system the
categorisation is dynamic. If a user wants to rename a category then all
the documents within those categories or any of the subcategories would
have to be reindexed. Similarly, if the user moves a category from one
place to another then again this can result in lots of reindexing.

The reindexing problem can be avoided by using identifiers for the
categories. I simply index a list of the ids for the categories the
document belongs to when indexing the document. This allows me to
dynamically change and restructure the category hierarchy without impacting
the index. The downside is that for searching I need to map the category
path to the category id. This I do using a database look-up prior to
searching Lucene. To carry out sub category searching I will be looking up
all the sub categories in the database using a wildcard and then probably
building either Boolean expression (for small numbers of subcategories) or
a Lucene filter combined with the ConstantScoreQuery (from the sandbox) for
large number of subcategories - the user having to understand that
searching lots of subcategories may take some time. In my case the
subcategory searching is not the norm so this isn't too much of a problem.

There's some useful articles here
http://www.intelligententerprise.com/001020/celko1_1.jhtml?_requestid=36367
and here http://www.dbazine.com/oracle/or-articles/tropashko4 that discuss
tree structures in SQL that I found useful.

Regards

PaulI.

Erik Hatcher <erik@ehatchersolutions.com> wrote on 23/08/2005 10:34:16:

>
> On Aug 22, 2005, at 2:27 AM, Rohit Lodha wrote:
> > Currently, Documents cannot contain other documents. I have a Graph of
> > Objects (Documents) to search in.
> >
> > I could flatten them and search but...
> >
> > Is there any nice way to do it?
>
> I have used a technique of encoding a hierarchical path (like "/
> category/subcategory/sub-subcategory") into an indexed untokenized
> field.  This allows for flat or hierarchical queries.  A hierarchical
> PrefixQuery of "/category" returns all documents from "/category"
> downward, for example.
>
> I suspect others have done more interesting techniques for this sort
> of thing - I'd love to hear about them.
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 10:38:17 2005
Return-Path: <java-user-return-15988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43684 invoked from network); 23 Aug 2005 10:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 10:38:17 -0000
Received: (qmail 32146 invoked by uid 500); 23 Aug 2005 10:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32027 invoked by uid 500); 23 Aug 2005 10:38:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32011 invoked by uid 99); 23 Aug 2005 10:38:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 03:38:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Aug 2005 03:38:27 -0700
Received: (qmail 21315 invoked by uid 0); 23 Aug 2005 10:38:06 -0000
Received: from 80.136.168.135 by www33.gmx.net with HTTP;
	Tue, 23 Aug 2005 12:38:06 +0200 (MEST)
Date: Tue, 23 Aug 2005 12:38:06 +0200 (MEST)
From: "Derya Kasapoglu" <dozean@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <fb9748c90508221848688c5a41@mail.gmail.com>
Subject: =?ISO-8859-1?Q?Re:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <16905.1124793486@www33.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

i'm writing the deletion now and i do it that way:

i query the index for the path of the files in the directory and compare the
dates.
But i have a Problem!
I find out the files which have changed but i can not delete the documet
from the index, i don't know why!

In the Field "pathLC" is he path of documnts in lower case.
Term term = new Term("pathLC", file[i].getAbsolutePath().toLowerCase());
delete(Term);

Than i close the IndexReader!!!

But i can still searching for the file which sould be deleted.

Derya



> --- Ursprngliche Nachricht ---
> Von: Ray Tsang <saturnism@gmail.com>
 An: java-user@lucene.apache.org
 Betreff: Re: UpdateIndex
> Datum: Tue, 23 Aug 2005 09:48:59 +0800
> 
> This could be off topic, but I made something that updates indices
> that worked like the following, wonder if anybody has the same ideas? 
> I found something like IndexAccessControl in the mailing list before. 
> An implementation of the following uses IAC.
> 
> ManagedIndex index = ManagedIndex.getInstance(configuration); // could
> return different implemetnations of the ManagedIndex
> 
> Searcher searcher = index.getSearcher();  // could return different
> implementations of Searcher
> 
> ManagedUpdateSession session = index.beginUpdate();  // start a update
> session
> 
> session.addDocument(...); // use session to add, delete, update documents
> session.deleteDocument(...);
> session.updateDocument(...);
> 
> // lastly
> index.endUpdate(); // or.. session.commit()?  marks the end of the
> update sequence, refresh the searchers.
> 
> IndexReader, IndexWriter, indexSearcher would be managed, and there
> can be multiple implementations of how index is structured, e.g.
> RotatingIndex, AlternatingIndex, that rotates document updates to
> different indices.
> 
> Ray,
> 
> On 8/23/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Yes, this is not how you should do it.
> > Use reader.delete(Term) method to delete documents:
> >
>
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#delete(org.apache.lucene.index.Term)
> > 
> > Otis
> > 
> > --- dozean@gmx.de wrote:
> > 
> > > Hi,
> > >
> > > i wrote an Index update, where first the IndexReader
> > > delete all files from index which are changed.
> > > Than add documents which are not in the index!
> > >
> > > Alone the deletion take so long, because i have 2 "for" loops!
> > >
> > > file = array with all files in a directory
> > >
> > > for (int i = 0; i<file.length; i++) {
> > >       if (file[i].isFile()) {
> > >    for (int j =0; j<reader.numDocs(); j++) {
> > >       if (file[i].getName() == reader.document(j).get("name") &&
> > >       file[i].lastModified() >
> > > Integer.parseInt(reader.document(j).get("date")))
> > > {                                             reader.delete(j);
> > >      }
> > > }
> > >
> > > Maybe this is the wrong way?
> > >
> > > Bye Derya
> > >
> > >
> > > --
> > > 5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
> > > +++ GMX - die erste Adresse fr Mail, Message, More +++
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse fr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 10:47:06 2005
Return-Path: <java-user-return-15989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45658 invoked from network); 23 Aug 2005 10:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 10:47:04 -0000
Received: (qmail 36570 invoked by uid 500); 23 Aug 2005 10:47:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36548 invoked by uid 500); 23 Aug 2005 10:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36535 invoked by uid 99); 23 Aug 2005 10:46:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 03:46:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 03:47:15 -0700
Received: from [81.168.89.246] (helo=[192.168.1.3])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1E7WIs-0005rI-00
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 11:46:51 +0100
Subject: Re: UpdateIndex
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <16905.1124793486@www33.gmx.net>
References: <fb9748c90508221848688c5a41@mail.gmail.com>
	 <16905.1124793486@www33.gmx.net>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 23 Aug 2005 11:47:22 +0100
Message-Id: <1124794042.11257.21.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2005-08-23 at 12:38 +0200, Derya Kasapoglu wrote:
> i query the index for the path of the files in the directory and compare the
> dates.
> But i have a Problem!
> I find out the files which have changed but i can not delete the documet
> from the index, i don't know why!
> 
> In the Field "pathLC" is he path of documnts in lower case.
> Term term = new Term("pathLC", file[i].getAbsolutePath().toLowerCase());
> delete(Term);
> 
> Than i close the IndexReader!!!
> 
> But i can still searching for the file which sould be deleted.

When you call IndexReader#delete(Term) what value is returned? It should
return the number of matching documents it has deleted.

If this value is 0, then your term is incorrect.


-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 10:54:54 2005
Return-Path: <java-user-return-15990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48003 invoked from network); 23 Aug 2005 10:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 10:54:54 -0000
Received: (qmail 42535 invoked by uid 500); 23 Aug 2005 10:54:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42282 invoked by uid 500); 23 Aug 2005 10:54:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42268 invoked by uid 99); 23 Aug 2005 10:54:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 03:54:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Aug 2005 03:55:07 -0700
Received: (qmail 27420 invoked by uid 0); 23 Aug 2005 10:54:46 -0000
Received: from 80.136.168.135 by www33.gmx.net with HTTP;
	Tue, 23 Aug 2005 12:54:46 +0200 (MEST)
Date: Tue, 23 Aug 2005 12:54:46 +0200 (MEST)
From: "Derya Kasapoglu" <dozean@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <1124794042.11257.21.camel@localhost.localdomain>
Subject: =?ISO-8859-1?Q?Re:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <22234.1124794486@www33.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, it returns null.
But this is a little bit funny because the searching is correct
and it finds the document whitch have changed!
So want can i do!?

Is there an opportunity to get the document id?


> --- Ursprngliche Nachricht ---
> Von: Miles Barr <miles@runtime-collective.com>
> An: java-user@lucene.apache.org
> Betreff: Re: UpdateIndex
> Datum: Tue, 23 Aug 2005 11:47:22 +0100
> 
> On Tue, 2005-08-23 at 12:38 +0200, Derya Kasapoglu wrote:
> > i query the index for the path of the files in the directory and compare
> the
> > dates.
> > But i have a Problem!
> > I find out the files which have changed but i can not delete the documet
> > from the index, i don't know why!
> > 
> > In the Field "pathLC" is he path of documnts in lower case.
> > Term term = new Term("pathLC", file[i].getAbsolutePath().toLowerCase());
> > delete(Term);
> > 
> > Than i close the IndexReader!!!
> > 
> > But i can still searching for the file which sould be deleted.
> 
> When you call IndexReader#delete(Term) what value is returned? It should
> return the number of matching documents it has deleted.
> 
> If this value is 0, then your term is incorrect.
> 
> 
> -- 
> Miles Barr <miles@runtime-collective.com>
> Runtime Collective Ltd.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 11:08:45 2005
Return-Path: <java-user-return-15991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54802 invoked from network); 23 Aug 2005 11:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 11:08:45 -0000
Received: (qmail 65039 invoked by uid 500); 23 Aug 2005 11:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64490 invoked by uid 500); 23 Aug 2005 11:08:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64477 invoked by uid 99); 23 Aug 2005 11:08:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 04:08:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 04:08:57 -0700
Received: from [81.168.89.246] (helo=[192.168.1.3])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1E7Wdu-0007No-00
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 12:08:34 +0100
Subject: Re: UpdateIndex
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <22234.1124794486@www33.gmx.net>
References: <1124794042.11257.21.camel@localhost.localdomain>
	 <22234.1124794486@www33.gmx.net>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 23 Aug 2005 12:09:07 +0100
Message-Id: <1124795347.11257.34.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2005-08-23 at 12:54 +0200, Derya Kasapoglu wrote:
> Yes, it returns null.
> But this is a little bit funny because the searching is correct
> and it finds the document whitch have changed!
> So want can i do!?
> 
> Is there an opportunity to get the document id?

It can't return null since the return type is 'int'. But assuming you
meant 0, that means the term isn't matching. The most likely cause is
you used a analyzer when first creating the document, which would have
altered the value of 'pathLC' to be something slightly different.

What analyzer did you pass to the IndexWriter? 

Also you shouldn't rely on the document ID because it is not fixed for a
given document. I believe it changes when you optimize the index.




-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 11:33:14 2005
Return-Path: <java-user-return-15992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65937 invoked from network); 23 Aug 2005 11:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 11:33:14 -0000
Received: (qmail 84730 invoked by uid 500); 23 Aug 2005 11:33:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84709 invoked by uid 500); 23 Aug 2005 11:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84696 invoked by uid 99); 23 Aug 2005 11:33:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 04:33:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Aug 2005 04:33:25 -0700
Received: (qmail 1596 invoked by uid 0); 23 Aug 2005 11:33:05 -0000
Received: from 80.136.168.135 by www33.gmx.net with HTTP;
	Tue, 23 Aug 2005 13:33:05 +0200 (MEST)
Date: Tue, 23 Aug 2005 13:33:05 +0200 (MEST)
From: "Derya Kasapoglu" <dozean@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <1124795347.11257.34.camel@localhost.localdomain>
Subject: =?ISO-8859-1?Q?Re:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <21660.1124796785@www33.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I meant the reader.hasDeletions() returns null and reader.delete(term)
returns 0.

So...!
I store the path that way in the index:
document.add(Field.Text("pathLC", file[i].getAbsolutePath()));
and i use the StandardAnalyzer.
I can not search for the path if i store it as Keyword like that:
document.add(Field.Keyword("pathLC",
file[i].getAbsolutePath().toLowerCase()));
so i store it as a Text!!!

so i think i have to use the analyzer bevor i call delete(term) ?
i'm right? 


> --- Ursprngliche Nachricht ---
> Von: Miles Barr <miles@runtime-collective.com>
> An: java-user@lucene.apache.org
> Betreff: Re: UpdateIndex
> Datum: Tue, 23 Aug 2005 12:09:07 +0100
> 
> On Tue, 2005-08-23 at 12:54 +0200, Derya Kasapoglu wrote:
> > Yes, it returns null.
> > But this is a little bit funny because the searching is correct
> > and it finds the document whitch have changed!
> > So want can i do!?
> > 
> > Is there an opportunity to get the document id?
> 
> It can't return null since the return type is 'int'. But assuming you
> meant 0, that means the term isn't matching. The most likely cause is
> you used a analyzer when first creating the document, which would have
> altered the value of 'pathLC' to be something slightly different.
> 
> What analyzer did you pass to the IndexWriter? 
> 
> Also you shouldn't rely on the document ID because it is not fixed for a
> given document. I believe it changes when you optimize the index.
> 
> 
> 
> 
> -- 
> Miles Barr <miles@runtime-collective.com>
> Runtime Collective Ltd.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 11:53:59 2005
Return-Path: <java-user-return-15993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70461 invoked from network); 23 Aug 2005 11:53:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 11:53:57 -0000
Received: (qmail 94511 invoked by uid 500); 23 Aug 2005 11:53:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94461 invoked by uid 500); 23 Aug 2005 11:53:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94411 invoked by uid 99); 23 Aug 2005 11:53:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 04:53:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Aug 2005 04:54:11 -0700
Received: (qmail 1609 invoked by uid 0); 23 Aug 2005 11:53:51 -0000
Received: from 80.136.168.135 by www33.gmx.net with HTTP;
	Tue, 23 Aug 2005 13:53:51 +0200 (MEST)
Date: Tue, 23 Aug 2005 13:53:51 +0200 (MEST)
From: "Derya Kasapoglu" <dozean@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <21660.1124796785@www33.gmx.net>
Subject: =?ISO-8859-1?Q?Re:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <12648.1124798031@www33.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you for your help!!!

I try it without Analyzer!

document.add(Field.Keyword("path", file[i].getAbsolutePath()));

then

Term term = new Term("path", file[i].getAbsolutePath());
Query query = new TermQuery(term);
reader.delete(term);

so is better! :) and it works!!!!



> --- Ursprngliche Nachricht ---
> Von: "Derya Kasapoglu" <dozean@gmx.de>
> An: java-user@lucene.apache.org
> Betreff: Re: UpdateIndex
> Datum: Tue, 23 Aug 2005 13:33:05 +0200 (MEST)
> 
> I meant the reader.hasDeletions() returns null and reader.delete(term)
> returns 0.
> 
> So...!
> I store the path that way in the index:
> document.add(Field.Text("pathLC", file[i].getAbsolutePath()));
> and i use the StandardAnalyzer.
> I can not search for the path if i store it as Keyword like that:
> document.add(Field.Keyword("pathLC",
> file[i].getAbsolutePath().toLowerCase()));
> so i store it as a Text!!!
> 
> so i think i have to use the analyzer bevor i call delete(term) ?
> i'm right? 
> 
> 
> > --- Ursprngliche Nachricht ---
> > Von: Miles Barr <miles@runtime-collective.com>
> > An: java-user@lucene.apache.org
> > Betreff: Re: UpdateIndex
> > Datum: Tue, 23 Aug 2005 12:09:07 +0100
> > 
> > On Tue, 2005-08-23 at 12:54 +0200, Derya Kasapoglu wrote:
> > > Yes, it returns null.
> > > But this is a little bit funny because the searching is correct
> > > and it finds the document whitch have changed!
> > > So want can i do!?
> > > 
> > > Is there an opportunity to get the document id?
> > 
> > It can't return null since the return type is 'int'. But assuming you
> > meant 0, that means the term isn't matching. The most likely cause is
> > you used a analyzer when first creating the document, which would have
> > altered the value of 'pathLC' to be something slightly different.
> > 
> > What analyzer did you pass to the IndexWriter? 
> > 
> > Also you shouldn't rely on the document ID because it is not fixed for a
> > given document. I believe it changes when you optimize the index.
> > 
> > 
> > 
> > 
> > -- 
> > Miles Barr <miles@runtime-collective.com>
> > Runtime Collective Ltd.
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> -- 
> Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
> Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse fr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 12:25:21 2005
Return-Path: <java-user-return-15994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80660 invoked from network); 23 Aug 2005 12:25:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 12:25:21 -0000
Received: (qmail 23651 invoked by uid 500); 23 Aug 2005 12:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23405 invoked by uid 500); 23 Aug 2005 12:25:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23392 invoked by uid 99); 23 Aug 2005 12:25:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 05:25:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 05:25:32 -0700
Received: from [81.168.89.246] (helo=[192.168.1.3])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1E7Xq0-0003kK-00
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 13:25:09 +0100
Subject: Re: UpdateIndex
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <12648.1124798031@www33.gmx.net>
References: <21660.1124796785@www33.gmx.net>
	 <12648.1124798031@www33.gmx.net>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 23 Aug 2005 13:25:41 +0100
Message-Id: <1124799942.11257.54.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2005-08-23 at 13:53 +0200, Derya Kasapoglu wrote:
> Thank you for your help!!!
> 
> I try it without Analyzer!
> 
> document.add(Field.Keyword("path", file[i].getAbsolutePath()));
> 
> then
> 
> Term term = new Term("path", file[i].getAbsolutePath());
> Query query = new TermQuery(term);
> reader.delete(term);
> 
> so is better! :) and it works!!!!

That's the easiest way to do it, keep one copy of the field that has
gone through the StandardAnalyzer and one version as a keyword. Then you
can use the keyword version when you need to look up a particular
document, e.g. to delete it.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 12:38:50 2005
Return-Path: <java-user-return-15995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85423 invoked from network); 23 Aug 2005 12:38:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 12:38:49 -0000
Received: (qmail 40027 invoked by uid 500); 23 Aug 2005 12:38:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39864 invoked by uid 500); 23 Aug 2005 12:38:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39851 invoked by uid 99); 23 Aug 2005 12:38:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 05:38:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [131.167.253.61] (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 05:39:00 -0700
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <P3H408QCX3IGBT02BW@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Tue,
 23 Aug 2005 08:38:37 -0400 (Eastern Daylight Time)
Date: Tue, 23 Aug 2005 08:38:23 -0400
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: Re: Hierarchical Documents
In-reply-to: <c0edae75050821232716184f67@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <430B18BF.2090408@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
References: <c0edae75050821232716184f67@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

People indexing XML documents tend to deal with the same kind of problem,
 there is an excellent article at the URL below showing how they handled 
some fairly
complex hierarchical queries.

http://www.idealliance.org/papers/xmle02/dx_xmle02/papers/03-02-08/03-02-08.html

Rohit Lodha wrote:

>Hi All,
>
>Currently, Documents cannot contain other documents. I have a Graph of 
>Objects (Documents) to search in.
>
>I could flatten them and search but...
>
>Is there any nice way to do it?
>
>Rohit
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 12:41:28 2005
Return-Path: <java-user-return-15996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86414 invoked from network); 23 Aug 2005 12:41:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 12:41:27 -0000
Received: (qmail 44464 invoked by uid 500); 23 Aug 2005 12:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44432 invoked by uid 500); 23 Aug 2005 12:41:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44419 invoked by uid 99); 23 Aug 2005 12:41:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 05:41:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of appler@gmail.com designates 64.233.170.196 as permitted sender)
Received: from [64.233.170.196] (HELO rproxy.gmail.com) (64.233.170.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 05:41:37 -0700
Received: by rproxy.gmail.com with SMTP id c51so1164377rne
        for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 05:41:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dtWmpi4++bGxn+hFh8wWjl+mJaXdlgjc5US4e7+lAhSJavednRtUYj9ERHiin8uUCeeY5ADsjLCkpyJ8+enRc6Q7Pe6WiF+CkMRlAjpPmuZrjCNv4cVPqjqqAbAv/u/FBAL+MrsZWRlSq/Xij1TTaQN4CFO89rq9zyaY9uTtDnY=
Received: by 10.38.101.4 with SMTP id y4mr410239rnb;
        Tue, 23 Aug 2005 05:41:18 -0700 (PDT)
Received: by 10.38.101.75 with HTTP; Tue, 23 Aug 2005 05:41:18 -0700 (PDT)
Message-ID: <48b708490508230541556565e3@mail.gmail.com>
Date: Tue, 23 Aug 2005 21:41:18 +0900
From: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is delete() part of IndexREADER?
In-Reply-To: <fb9748c905082302124985323c@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42b801c5a7b8$8508e1a0$152ca8c0@mikkon4>
	 <fb9748c905082302124985323c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's because of Lucene's index structure. IndexWriter creates a new
segment(one Lucene index is composed of several segments) when a
document added and doesn't care about old indexes already exist. So,
IndexWriter should not have delete() operation for old indexes. And
so, the IndexReader have control of read and delete over all the
documents indexed before.


On 8/23/05, Ray Tsang <saturnism@gmail.com> wrote:
> I have come to peace with this problem.  Basically, I think it's
> because you need to read/find what you are deleting first? hehe
>=20
> Writer just need to write whatever it's been told to write.
>=20
> ray,
>=20
> On 8/23/05, Mikko Noromaa <mikko@noromaa.fi> wrote:
> > Hi,
> >
> > Why IndexReader allows me to do write-operations like delete? I'd think=
 this
> > should be part of the IndexWriter class instead.
> >
> > I had created a wrapper class that callers can open for either writing =
or
> > searching. It creates either an IndexWriter or an IndexSearches and sto=
res
> > that inside itself for later use in methods like MyAddDocument and MySe=
arch.
> > Implementation of MyUpdateDocument, however, became very ugly:
> >
> > // Open the index for "reading" first.
> > writer.close();
> > reader =3D IndexReader.open(CurrentIndexPath);
> >
> > // Delete the requested document.
> > reader.delete(new Term("id", String.valueOf(ID)));
> > reader.close();
> >
> > // Re-open the IndexWriter.
> > writer =3D new IndexWriter(CurrentIndexPath, analyzer, false);
> >
> > // Add the new document through normal add-logic.
> > DoAddDocument (DocText, ID);
> >
> >
> > Could the delete() method be moved from IndexReader to IndexWriter? Or
> > perhaps IndexWriter should implement IndexReader, so delete() would be
> > callable on IndexWriter as well?
> >
> > --
> >
> > Mikko Noromaa (mikko@noromaa.fi) - tel. +358 40 7348034
> > Noromaa Solutions - see http://www.nm-sol.com/
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Regards,
Cheolgoo Kang

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 14:13:36 2005
Return-Path: <java-user-return-15997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33670 invoked from network); 23 Aug 2005 14:13:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 14:13:35 -0000
Received: (qmail 79281 invoked by uid 500); 23 Aug 2005 14:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79239 invoked by uid 500); 23 Aug 2005 14:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79226 invoked by uid 99); 23 Aug 2005 14:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 07:13:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Aug 2005 07:13:45 -0700
Received: (qmail 26732 invoked by uid 0); 23 Aug 2005 14:13:24 -0000
Received: from 80.136.168.135 by www33.gmx.net with HTTP;
	Tue, 23 Aug 2005 16:13:24 +0200 (MEST)
Date: Tue, 23 Aug 2005 16:13:24 +0200 (MEST)
From: "Derya Kasapoglu" <dozean@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?hslf_ppt_files?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <27993.1124806404@www33.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

is there anybody who have the poi hslf classes to extract text from Power
Point files. I know the classes are on the poi sites but they are not
packaged in a jar!
If i download all of them by myself i get version problems!
So maybe someone has a jar file and can send me?

Thanks in forward
Bye

-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse fr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 15:32:24 2005
Return-Path: <java-user-return-15998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69462 invoked from network); 23 Aug 2005 15:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 15:32:24 -0000
Received: (qmail 40881 invoked by uid 500); 23 Aug 2005 15:32:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40855 invoked by uid 500); 23 Aug 2005 15:32:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40842 invoked by uid 99); 23 Aug 2005 15:32:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 08:32:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 08:32:36 -0700
Received: by zproxy.gmail.com with SMTP id i11so901574nzi
        for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 08:32:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=FEA+GCumMPN0wOq/e9iPqBV44wr51mdeBiNDinv1KFaeb0LL1L5nG6GL0IHEgFH1gHbG55z4ZnfQEdN9ddUiI4VkfmCpr1nkfZ0/l121qx7j/E9eEe7gCGOTSfpXSzAJfSYC47TiPtxYs8l6QflvruEvf1IKw/NK2pB7sSd+wkg=
Received: by 10.36.96.6 with SMTP id t6mr1052789nzb;
        Tue, 23 Aug 2005 08:32:17 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id c1sm3997986nzd.2005.08.23.08.32.14;
        Tue, 23 Aug 2005 08:32:17 -0700 (PDT)
Message-ID: <430B417D.2050507@gmail.com>
Date: Tue, 23 Aug 2005 10:32:13 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: WhiteSpace Tokenizer question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I wrote a slightly modified version of the WhiteSpaceTokenizer that 
allows me to treat other characters as whitespace.  My thought was that 
this would be an easy way to make it tokenize on characters such as "-".

My tokenizer looks like this:

public class CustomWhiteSpaceTokenizer extends CharTokenizer
{

    protected boolean isTokenChar(char c)
    {
        if (Character.isWhitespace(c) || whiteSpaceChars_.contains(new 
Character(c)))
        {
            return false;
        }
        else
        {
            return true;
        }
    }

<snip other stuff>
}

When I use my Analyzer which uses this tokenizer in the QueryParser with 
the character "-" defined as whitespace, the following query gets parsed 
like this:

"title:(john  a) body:(john  a) " -> (title:john title:a) (body:john body:a)

which is what I expect.  But then the following query:

"title:(john--a) body:(john--a) " -> title:"john a" body:"john a"

Isn't what I want.  I can't seem to figure out why it is behaving 
differently on these characters (space vs hyphen) when I am specifying 
them both as a non-token.

This is with the svn trunk as of yesterday.
Any help appreciated,

Thanks,

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 16:26:47 2005
Return-Path: <java-user-return-15999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95808 invoked from network); 23 Aug 2005 16:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 16:26:47 -0000
Received: (qmail 72777 invoked by uid 500); 23 Aug 2005 16:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72756 invoked by uid 500); 23 Aug 2005 16:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72743 invoked by uid 99); 23 Aug 2005 16:26:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 09:26:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.194.158.19] (HELO exchange.bvdep.com) (193.194.158.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 09:26:58 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: WhiteSpace Tokenizer question
Date: Tue, 23 Aug 2005 18:26:37 +0200
Message-ID: <950FF7DE40C2B64CAF80B564732927E1048109AC@exchange.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WhiteSpace Tokenizer question
thread-index: AcWn990IHZn/atCiT8OSFDlNJlmgpAABcnrw
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The query string is first parsed by QueryParser and what it believes to
be single terms are then passed on to your analyzer.  QueryParser only
considers space, tab, \n and \r to be white space (See QueryParser.jj)

QueryParser itself is not aware that '-' should be treated as white
space so in your second example it treats john--a as a single term.
Your analyzer then converts this into two tokens and that is then
treated as a phrase query.

Try:
title:(john- -a) body:(john- -a)

I would expect the result to be:
(title:john title:a) (body:john body:a)
since QueryParser will break on the extra spaces now and your analyzer
will strip the remaining '-' afterwards.

I guess the best solution is to convert all characters that you consider
to be white-space to real spaces before passing the query string to
QueryParser.

Luc

-----Original Message-----
From: Dan Armbrust [mailto:daniel.armbrust.list@gmail.com]=20
Sent: dinsdag 23 augustus 2005 17:32
To: java-user@lucene.apache.org
Subject: WhiteSpace Tokenizer question

I wrote a slightly modified version of the WhiteSpaceTokenizer that=20
allows me to treat other characters as whitespace.  My thought was that=20
this would be an easy way to make it tokenize on characters such as "-".

My tokenizer looks like this:

public class CustomWhiteSpaceTokenizer extends CharTokenizer
{

    protected boolean isTokenChar(char c)
    {
        if (Character.isWhitespace(c) || whiteSpaceChars_.contains(new=20
Character(c)))
        {
            return false;
        }
        else
        {
            return true;
        }
    }

<snip other stuff>
}

When I use my Analyzer which uses this tokenizer in the QueryParser with

the character "-" defined as whitespace, the following query gets parsed

like this:

"title:(john  a) body:(john  a) " -> (title:john title:a) (body:john
body:a)

which is what I expect.  But then the following query:

"title:(john--a) body:(john--a) " -> title:"john a" body:"john a"

Isn't what I want.  I can't seem to figure out why it is behaving=20
differently on these characters (space vs hyphen) when I am specifying=20
them both as a non-token.

This is with the svn trunk as of yesterday.
Any help appreciated,

Thanks,

Dan

--=20
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 16:31:12 2005
Return-Path: <java-user-return-16000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98056 invoked from network); 23 Aug 2005 16:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 16:31:11 -0000
Received: (qmail 86131 invoked by uid 500); 23 Aug 2005 16:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86112 invoked by uid 500); 23 Aug 2005 16:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86093 invoked by uid 99); 23 Aug 2005 16:31:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 09:31:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 09:31:22 -0700
Received: by rproxy.gmail.com with SMTP id g11so1228679rne
        for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 09:31:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ERlHRKJAeG1J58PhrhYVoymzCIVKPDQrS9FH2y6kTtBIjZlxyex3bfZs6pdITZNzJbk3CWIyE7bGnDRtBsIy3MGuRz1USPSeP7xtCxsd7PtwmAAfGFFvlPckTRa2MW/3t909QGo7zzcgzeGdDjajKI00Ne14U4Ji7EwLy9FZN0M=
Received: by 10.38.90.52 with SMTP id n52mr492372rnb;
        Tue, 23 Aug 2005 09:31:02 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Tue, 23 Aug 2005 09:31:02 -0700 (PDT)
Message-ID: <c68e391705082309312b953267@mail.gmail.com>
Date: Tue, 23 Aug 2005 12:31:02 -0400
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: WhiteSpace Tokenizer question
In-Reply-To: <430B417D.2050507@gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <430B417D.2050507@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's the QueryParser, not the Analyzer.
When the query parser sees multiple tokens from what looks like a
single word, it puts them in a phrase query.

I think the only way to change that behavior would be to modify the
QueryParser.

-Yonik

On 8/23/05, Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:
> I wrote a slightly modified version of the WhiteSpaceTokenizer that
> allows me to treat other characters as whitespace.  My thought was that
> this would be an easy way to make it tokenize on characters such as "-".
>=20
> My tokenizer looks like this:
>=20
> public class CustomWhiteSpaceTokenizer extends CharTokenizer
> {
>=20
>     protected boolean isTokenChar(char c)
>     {
>         if (Character.isWhitespace(c) || whiteSpaceChars_.contains(new
> Character(c)))
>         {
>             return false;
>         }
>         else
>         {
>             return true;
>         }
>     }
>=20
> <snip other stuff>
> }
>=20
> When I use my Analyzer which uses this tokenizer in the QueryParser with
> the character "-" defined as whitespace, the following query gets parsed
> like this:
>=20
> "title:(john  a) body:(john  a) " -> (title:john title:a) (body:john body=
:a)
>=20
> which is what I expect.  But then the following query:
>=20
> "title:(john--a) body:(john--a) " -> title:"john a" body:"john a"
>=20
> Isn't what I want.  I can't seem to figure out why it is behaving
> differently on these characters (space vs hyphen) when I am specifying
> them both as a non-token.
>=20
> This is with the svn trunk as of yesterday.
> Any help appreciated,
>=20
> Thanks,
>=20
> Dan
>=20
> --
> ****************************
> Daniel Armbrust
> Biomedical Informatics
> Mayo Clinic Rochester
> daniel.armbrust(at)mayo.edu
> http://informatics.mayo.edu/
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 16:47:43 2005
Return-Path: <java-user-return-16001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7856 invoked from network); 23 Aug 2005 16:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 16:47:42 -0000
Received: (qmail 14504 invoked by uid 500); 23 Aug 2005 16:47:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14484 invoked by uid 500); 23 Aug 2005 16:47:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14471 invoked by uid 99); 23 Aug 2005 16:47:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 09:47:37 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [24.232.0.225] (HELO avas-mr12.fibertel.com.ar) (24.232.0.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 09:47:54 -0700
Received: from [10.10.10.228] ([10.10.10.228]:17930 "EHLO fibertel.com.ar"
	smtp-auth: <none>) by avas-mr12.fibertel.com.ar with ESMTP
	id S16482AbVHWQrW; Tue, 23 Aug 2005 13:47:22 -0300
Received: from [10.10.10.171] (Forwarded-For: 10.4.5.27,
 [200.41.238.14]) by stov2.fibertel.com.ar (mshttpd); Tue, 23 Aug 2005
 13:47:22 -0300
From:	<jhandl@fibertel.com.ar>
To:	java-user@lucene.apache.org
Message-ID: <f4c78503c21c.430b28ea@fibertel.com.ar>
Date:	Tue, 23 Aug 2005 13:47:22 -0300
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built
 Jan 28 2005)
MIME-Version: 1.0
Content-Language: es
Subject: QueryParser not thread-safe
X-Accept-Language: es
Priority: normal
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
X-Fib-Al-Info: Al
X-Fib-Al-MRId: d0727ac8e7e02284e6fb0943f892b772
X-Fib-Al-From: jhandl@fibertel.com.ar
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi! I've been having problems with lucene's QueryParser, apparently it is not thread-safe. 

That means I can't parse queries in threads where the queryparser object is created once and reused for each query. If I do, the resulting queries may have all kinds of weird problems, for example missing terms, duplicate terms, etc. 

I don't like the idea of creating a new queryparser for each query, so I am looking for alternatives. Any ideas?

Thanks!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 16:58:16 2005
Return-Path: <java-user-return-16002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10897 invoked from network); 23 Aug 2005 16:58:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 16:58:16 -0000
Received: (qmail 32393 invoked by uid 500); 23 Aug 2005 16:58:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31532 invoked by uid 500); 23 Aug 2005 16:58:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31519 invoked by uid 99); 23 Aug 2005 16:58:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 09:58:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 09:58:29 -0700
Received: from grenache.internal.torchbox.com ([192.168.1.81])
	by fluffy.torchbox.com with esmtp (Exim 4.50)
	id 1E7c6C-0006mq-VK
	for java-user@lucene.apache.org; Tue, 23 Aug 2005 17:58:09 +0100
Date: Tue, 23 Aug 2005 17:16:28 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@localhost.localdomain
To: java-user@lucene.apache.org
Subject: Re: =?ISO-8859-1?Q?hslf_ppt_files?=
In-Reply-To: <27993.1124806404@www33.gmx.net>
Message-ID: <Pine.LNX.4.61.0508231715010.2638@localhost.localdomain>
References: <27993.1124806404@www33.gmx.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam-Score: -105.9 (---------------------------------------------------)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 23 Aug 2005, Derya Kasapoglu wrote:
> is there anybody who have the poi hslf classes to extract text from 
> Power Point files. I know the classes are on the poi sites but they are 
> not packaged in a jar!

You'll need to either download it yourself from CVS and compile with ant, 
or grab a nightly build:
 	http://encore.torchbox.com/poi-cvs-build/
(you'll need both a nightly build of poi and of poi-scratchpad)

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 17:01:24 2005
Return-Path: <java-user-return-16003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12427 invoked from network); 23 Aug 2005 17:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 17:01:24 -0000
Received: (qmail 40262 invoked by uid 500); 23 Aug 2005 17:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40240 invoked by uid 500); 23 Aug 2005 17:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40227 invoked by uid 99); 23 Aug 2005 17:01:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:01:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:01:36 -0700
Received: from [81.168.89.246] (helo=[192.168.1.3])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1E7c93-0004hD-00
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 18:01:09 +0100
Subject: Re: QueryParser not thread-safe
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <f4c78503c21c.430b28ea@fibertel.com.ar>
References: <f4c78503c21c.430b28ea@fibertel.com.ar>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 23 Aug 2005 18:01:29 +0100
Message-Id: <1124816490.11257.81.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2005-08-23 at 13:47 -0300, jhandl@fibertel.com.ar wrote:
> Hi! I've been having problems with lucene's QueryParser, apparently it is not thread-safe. 
> 
> That means I can't parse queries in threads where the queryparser object is created once and reused for each query. If I do, the resulting queries may have all kinds of weird problems, for example missing terms, duplicate terms, etc. 
> 
> I don't like the idea of creating a new queryparser for each query, so I am looking for alternatives. Any ideas?

Using a non-threadsafe object in a threaded environment is fairly
standard in Java, just wrap it in a synchronized block. 

If you don't want all threads waiting on one query parser, create a pool
of them. 


-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 17:15:25 2005
Return-Path: <java-user-return-16004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17180 invoked from network); 23 Aug 2005 17:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 17:15:25 -0000
Received: (qmail 63495 invoked by uid 500); 23 Aug 2005 17:15:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63474 invoked by uid 500); 23 Aug 2005 17:15:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63461 invoked by uid 99); 23 Aug 2005 17:15:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:15:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.wang@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:15:37 -0700
Received: by zproxy.gmail.com with SMTP id n29so867529nzf
        for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 10:15:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Mo0q29f+CVIFlveG7Oat08MYwuCeLqyKA2lBT54e0mPZKPdC1rs2ROKCKYQ0jd2UdsaBUuKkAUzGLHDdjqGk6JrbbVUzNWQqiVqlY2N8iPvV5LPuvEzF2B8TZFsD3HbwUZFI9Gu4me4qE7o73ZWlO+wkTq7XH/Wjgn+vKe+YUOM=
Received: by 10.36.222.75 with SMTP id u75mr1504298nzg;
        Tue, 23 Aug 2005 10:15:17 -0700 (PDT)
Received: by 10.36.10.11 with HTTP; Tue, 23 Aug 2005 10:15:17 -0700 (PDT)
Message-ID: <8837fb77050823101542a557e7@mail.gmail.com>
Date: Tue, 23 Aug 2005 10:15:17 -0700
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: i18n query normalization
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi:

   We have a multi-languaged index and we need to match accented
characters with non accented characters. For example, if a document
contains: m=E2ng=E3o, the query: mangao should match it.

    I guess I would have to build some sort of analyzer/tokenizer for this.

    I was wondering if there are tokenizers already built for lucene.


Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 17:20:08 2005
Return-Path: <java-user-return-16005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19250 invoked from network); 23 Aug 2005 17:20:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 17:20:07 -0000
Received: (qmail 69695 invoked by uid 500); 23 Aug 2005 17:20:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69677 invoked by uid 500); 23 Aug 2005 17:20:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69664 invoked by uid 99); 23 Aug 2005 17:20:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:20:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.40.184.222] (HELO mail2.intranetsolutions.com) (12.40.184.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:20:19 -0700
Received: from [10.10.20.20] ([10.10.20.20]) by mail2.intranetsolutions.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 23 Aug 2005 12:19:56 -0500
Subject: Re: QueryParser not thread-safe
From: Luke Francl <luke.francl@stellent.com>
To: java-user@lucene.apache.org
In-Reply-To: <1124816490.11257.81.camel@localhost.localdomain>
References: <f4c78503c21c.430b28ea@fibertel.com.ar>
	 <1124816490.11257.81.camel@localhost.localdomain>
Content-Type: text/plain
Message-Id: <1124817587.17809.11.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 23 Aug 2005 12:19:47 -0500
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 23 Aug 2005 17:19:56.0368 (UTC) FILETIME=[E1EE2D00:01C5A806]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2005-08-23 at 12:01, Miles Barr wrote:
> Using a non-threadsafe object in a threaded environment is fairly
> standard in Java, just wrap it in a synchronized block. 
> 
> If you don't want all threads waiting on one query parser, create a pool
> of them. 

Based on doing the simplest possible thing, I would recommend creating a
new parser for every thread using QueryParser.parse( String, String,
Analyzer) until/unless you determine this is a performance bottleneck.

Regards,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 17:20:25 2005
Return-Path: <java-user-return-16006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19327 invoked from network); 23 Aug 2005 17:20:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 17:20:25 -0000
Received: (qmail 70774 invoked by uid 500); 23 Aug 2005 17:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70753 invoked by uid 500); 23 Aug 2005 17:20:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70739 invoked by uid 99); 23 Aug 2005 17:20:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:20:20 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:20:37 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7NHKFDr025287
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 19:20:15 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: QueryParser not thread-safe
Date: Tue, 23 Aug 2005 19:20:15 +0200
User-Agent: KMail/1.5.4
References: <f4c78503c21c.430b28ea@fibertel.com.ar> <1124816490.11257.81.camel@localhost.localdomain>
In-Reply-To: <1124816490.11257.81.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508231920.15236.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 23 August 2005 19:01, Miles Barr wrote:
> On Tue, 2005-08-23 at 13:47 -0300, jhandl@fibertel.com.ar wrote:
> > Hi! I've been having problems with lucene's QueryParser, apparently it is 
not thread-safe. 
> > 
> > That means I can't parse queries in threads where the queryparser object 
is created once and reused for each query. If I do, the resulting queries may 
have all kinds of weird problems, for example missing terms, duplicate terms, 
etc. 
> > 
> > I don't like the idea of creating a new queryparser for each query, so I 
am looking for alternatives. Any ideas?
> 
> Using a non-threadsafe object in a threaded environment is fairly
> standard in Java, just wrap it in a synchronized block. 
> 
> If you don't want all threads waiting on one query parser, create a pool
> of them. 

Or use one parser per thread.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 17:41:44 2005
Return-Path: <java-user-return-16007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31873 invoked from network); 23 Aug 2005 17:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 17:41:44 -0000
Received: (qmail 7482 invoked by uid 500); 23 Aug 2005 17:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7452 invoked by uid 500); 23 Aug 2005 17:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7439 invoked by uid 99); 23 Aug 2005 17:41:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:41:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 10:41:54 -0700
Received: (qmail 20644 invoked from network); 23 Aug 2005 17:41:33 -0000
Received: from unknown (HELO p5496CBF6.dip.t-dialin.net) ([pbs]695637@[84.150.203.246])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 23 Aug 2005 17:41:33 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: i18n query normalization
Date: Tue, 23 Aug 2005 19:42:31 +0200
User-Agent: KMail/1.8
References: <8837fb77050823101542a557e7@mail.gmail.com>
In-Reply-To: <8837fb77050823101542a557e7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200508231942.31797@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 23 August 2005 19:15, John Wang wrote:

> =C2=A0We have a multi-languaged index and we need to match accented
> characters with non accented characters. For example, if a document
> contains: m=C3=A2ng=C3=A3o, the query: mangao should match it.

See ISOLatin1AccentFilter in contrib/analyzers in SVN.

regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 18:31:05 2005
Return-Path: <java-user-return-16008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56898 invoked from network); 23 Aug 2005 18:31:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 18:31:04 -0000
Received: (qmail 85617 invoked by uid 500); 23 Aug 2005 18:30:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85590 invoked by uid 500); 23 Aug 2005 18:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85577 invoked by uid 99); 23 Aug 2005 18:30:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 11:30:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.201] (HELO smtp102.sbc.mail.mud.yahoo.com) (68.142.198.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Aug 2005 11:31:15 -0700
Received: (qmail 24780 invoked from network); 23 Aug 2005 18:30:55 -0000
Received: from unknown (HELO ?192.168.1.42?) (kkrugler@pacbell.net@63.200.72.125 with plain)
  by smtp102.sbc.mail.mud.yahoo.com with SMTP; 23 Aug 2005 18:30:54 -0000
Mime-Version: 1.0
Message-Id: <p06230915bf310f4caf3e@[192.168.1.42]>
In-Reply-To: <8837fb77050823101542a557e7@mail.gmail.com>
References: <8837fb77050823101542a557e7@mail.gmail.com>
Date: Tue, 23 Aug 2005 10:38:12 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: i18n query normalization
Content-Type: text/plain; charset="iso-8859-1" ; format="flowed"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>    We have a multi-languaged index and we need to match accented
>characters with non accented characters. For example, if a document
>contains: m=E2ng=E3o, the query: mangao should match it.
>
>     I guess I would have to build some sort of analyzer/tokenizer for this=
=2E
>
>     I was wondering if there are tokenizers already built for lucene.

Search the archives for a discussion about this,=20
back in June I believe. I'd suggested using ICU=20
to generate sort keys, and indexing those.

-- Ken
-- 
Ken Krugler
TransPac Software, Inc.
<http://www.transpac.com>
+1 530-470-9200

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 19:38:15 2005
Return-Path: <java-user-return-16009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28004 invoked from network); 23 Aug 2005 19:38:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 19:38:14 -0000
Received: (qmail 90616 invoked by uid 500); 23 Aug 2005 19:38:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90578 invoked by uid 500); 23 Aug 2005 19:38:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90565 invoked by uid 99); 23 Aug 2005 19:38:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 12:38:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO rproxy.gmail.com) (64.233.170.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 12:38:24 -0700
Received: by rproxy.gmail.com with SMTP id 1so24358rny
        for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 12:38:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=i1WohuhHYp0ts3Bj4B/uzbLY2WkbD0KQHW6pQfMOWbjravZJiOx/lh9r2vXAq2Q84pqZ5cJiBMHTo/iYVPOY43o9wLO1vp6bnyfFuf/Nm30KRZnNfgge1SldmAiqlFgTlv/0iB07rIyt04zWW4hicZhCgsS6Bxx0PPW1CRKIqDY=
Received: by 10.38.8.15 with SMTP id 15mr13755rnh;
        Tue, 23 Aug 2005 12:38:02 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Tue, 23 Aug 2005 12:38:02 -0700 (PDT)
Message-ID: <7ca1239105082312382df9c57e@mail.gmail.com>
Date: Tue, 23 Aug 2005 12:38:02 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser not thread-safe
In-Reply-To: <200508231920.15236.paul.elschot@xs4all.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f4c78503c21c.430b28ea@fibertel.com.ar>
	 <1124816490.11257.81.camel@localhost.localdomain>
	 <200508231920.15236.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Right. My philosophy is that, make it work, then, make it better.=20

Don't waste time on something that you are not sure if it would cause
performance problem.

Jian

On 8/23/05, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Tuesday 23 August 2005 19:01, Miles Barr wrote:
> > On Tue, 2005-08-23 at 13:47 -0300, jhandl@fibertel.com.ar wrote:
> > > Hi! I've been having problems with lucene's QueryParser, apparently i=
t is
> not thread-safe.
> > >
> > > That means I can't parse queries in threads where the queryparser obj=
ect
> is created once and reused for each query. If I do, the resulting queries=
 may
> have all kinds of weird problems, for example missing terms, duplicate te=
rms,
> etc.
> > >
> > > I don't like the idea of creating a new queryparser for each query, s=
o I
> am looking for alternatives. Any ideas?
> >
> > Using a non-threadsafe object in a threaded environment is fairly
> > standard in Java, just wrap it in a synchronized block.
> >
> > If you don't want all threads waiting on one query parser, create a poo=
l
> > of them.
>=20
> Or use one parser per thread.
>=20
> Regards,
> Paul Elschot
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 22:11:15 2005
Return-Path: <java-user-return-16010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12162 invoked from network); 23 Aug 2005 22:11:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 22:11:15 -0000
Received: (qmail 19268 invoked by uid 500); 23 Aug 2005 21:41:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19246 invoked by uid 500); 23 Aug 2005 21:41:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19224 invoked by uid 99); 23 Aug 2005 21:41:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 14:41:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sean@oconeco.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 14:42:07 -0700
Received: from [127.0.0.1] (68-235-161-43.chvlva.adelphia.net [68.235.161.43])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 166821407816
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 14:41:48 -0700 (PDT)
Message-ID: <430B9840.5050407@oconeco.com>
Date: Tue, 23 Aug 2005 17:42:24 -0400
From: Sean O'Connor <sean@oconeco.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Example of Field.TermVector.WITH_POSITIONS_OFFSETS usage?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
    I am trying to work through term positions and how to get them from 
a collection of hits. Does setting TermVector.WITH_POSITIONS_OFFSETS to 
true save the start/end position of the term in the source text file? (I 
_think_ it does).

     If so, where would I start for trying to make that information 
accessible in a "result set"? I believe it would be extending a query, a 
scorer, a hit, and/or a weight object. I will be wanting to process ALL 
hits, so I think will need to implement a hitcollector.

    As an example of what I want, if I were looking for the offset 
position of "brown" in a properly indexed field containing "the lazy 
brown fox", I would like to get:
start==10
end==15 (assuming my counting is right)

    Based on Paul Elschot's previous response to a similar question I 
had (which I am still working on), I _think_ I need to extend something 
like the ExactPhraseScorer. While debugging with my IDE (Eclipse) I can 
see that the weight object in the scorer contains a reference to the 
query. The query contains the fields:
    Vector positions (just has ints of term positions in phrase?)
    Vector terms (vector of Term, just field name and field contents?)

    The weight also seems to have an array of TermPositions, which have 
SegmentTermPositions. I thought this was what I wanted, but I don't see 
the proper start/end fields, or anything which seems to be on the right 
track.

    Can anyone point me in the right direction?
Thanks,

Sean



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 23 22:13:48 2005
Return-Path: <java-user-return-16011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13315 invoked from network); 23 Aug 2005 22:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Aug 2005 22:13:48 -0000
Received: (qmail 22141 invoked by uid 500); 23 Aug 2005 21:45:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22117 invoked by uid 500); 23 Aug 2005 21:45:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22103 invoked by uid 99); 23 Aug 2005 21:45:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 14:45:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.83.242.16] (HELO mail.anchormen.nl) (212.83.242.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 14:46:03 -0700
Content-class: urn:content-classes:message
Subject: how to get newest library version?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 23 Aug 2005 23:45:28 +0200
X-MIMEOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA07CA19@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to get newest library version?
Thread-index: AcWoK/pedPofb72DQYqVWh3C7tYxEw==
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does anyone know how I can download the newest version of Lucene from =
the SVN? I have been trying (even the website) but I only get timeouts. =
I would even be happy with a newly build jar (based on the newest =
sources). So I help someone can help me out so I can remove a =
MultiFieldQueryParser bug out of the system that should have been =
removed on the newest version (and troubles)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 02:27:12 2005
Return-Path: <java-user-return-16012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84514 invoked from network); 24 Aug 2005 02:27:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 02:27:12 -0000
Received: (qmail 62817 invoked by uid 500); 24 Aug 2005 02:27:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62754 invoked by uid 500); 24 Aug 2005 02:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 560 invoked by uid 99); 23 Aug 2005 22:51:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
From: "Monsur Hossain" <monsur@xanga.net>
To: <java-user@lucene.apache.org>
Subject: Lucene and Xanga.com
Date: Tue, 23 Aug 2005 18:50:59 -0400
Organization: Xanga.com
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
thread-index: AcWoNSFlvBcZX184TxaV2sOGEDUX8w==
Message-Id: <200508231850717.SM01824@chicago>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey all.  We just relaunched our search feature over here at Xanga.com; the
Blogs, Metros and Blogrings sections are powered by Lucene.NET!  You can
check it out here:

http://search.xanga.com/

This is only the beginning of what we want to do with search and Lucene.  I
want to thank everyone on this list for all the help over the months.  Its
great to see a project like Lucene thriving!

Monsur



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 02:35:05 2005
Return-Path: <java-user-return-16013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85796 invoked from network); 24 Aug 2005 02:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 02:35:04 -0000
Received: (qmail 70767 invoked by uid 500); 24 Aug 2005 02:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70519 invoked by uid 500); 24 Aug 2005 02:34:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70506 invoked by uid 99); 24 Aug 2005 02:34:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 19:34:59 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 19:35:16 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C004B5B76C; Tue, 23 Aug 2005 19:34:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BD4157F477
	for <java-user@lucene.apache.org>; Tue, 23 Aug 2005 19:34:54 -0700 (PDT)
Date: Tue, 23 Aug 2005 19:34:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: post-normalization score filter
In-Reply-To: <cbdebdf80508131649614aa6ba@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0508231924300.23162@hal.rescomp.berkeley.edu>
References: <cbdebdf80508131649614aa6ba@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


It doesn't look like there were any replies to this while i've been away,
so i just wanted to point out that this isn't really a practicle thing to
do because the score's don't have any meaningfulll absolute value (ie: you
can't compare the scores from one search with the scores of another).  the
first Hit will allways have a score of "1" and the score of the other hits
will be normalized against the first one.

I've added this to the FAQ as "Can I filter by score?"
http://wiki.apache.org/jakarta-lucene/LuceneFAQ
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03

: Date: Sat, 13 Aug 2005 16:49:12 -0700
: From: Chris Fraschetti <fraschetti@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: post-normalization score filter
:
: I've seen a few posts which reference using a HitCollector to help
: filter the returned document's scores.. but are there any
: implementations out there that perform this filter of results by score
: after they've already been normalized, short of walking the hits
: array.... If i was to walk hits until i reach my threshold, just
: checking the hits.score() ... what am I looking performance wise, are
: the scores all calculated at this point and I'm simply accessing them
: or are they normalized on the fly?
:
: Obviously I can trim my results a bit for results that score a million
: documents only allow the first few thousand as results, but even in
: the case of where I might get two thousand results, the lower end
: results have such minimal scores in comparison to the earlier that it
: seems unintuitive for them to be accessible.
:
: thanks as always!
:
: --
: ___________________________________________________
: Chris Fraschetti
: e fraschetti@gmail.com
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 04:51:13 2005
Return-Path: <java-user-return-16014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28670 invoked from network); 24 Aug 2005 04:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 04:51:13 -0000
Received: (qmail 65973 invoked by uid 500); 24 Aug 2005 04:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65057 invoked by uid 500); 24 Aug 2005 04:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65044 invoked by uid 99); 24 Aug 2005 04:51:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 21:51:08 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.76] (HELO web31114.mail.mud.yahoo.com) (68.142.201.76)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Aug 2005 21:51:25 -0700
Received: (qmail 87923 invoked by uid 60001); 24 Aug 2005 04:51:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=KIBfKEP93aGyPbgXZK+7YqiwJlGKq2lO8gFsFrRUDo4ah5c5A82rRDSzx0hEPpcLw0WbaNjtD9sT7AHqY0ixf0Cyg8CniRttbk06uR0VEYUreD/4YpBo9gBrHaeQ5bcEwQsBTH9OE73wL37O2rihujMYgz0DF62Gp1Guq86tALQ=  ;
Message-ID: <20050824045105.87921.qmail@web31114.mail.mud.yahoo.com>
Received: from [69.201.142.21] by web31114.mail.mud.yahoo.com via HTTP; Tue, 23 Aug 2005 21:51:05 PDT
Date: Tue, 23 Aug 2005 21:51:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene and Xanga.com
To: java-user@lucene.apache.org
In-Reply-To: <200508231850717.SM01824@chicago>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nicely done, looks pretty and seems fast.

How much data is being searched there?

Otis


--- Monsur Hossain <monsur@xanga.net> wrote:

> Hey all.  We just relaunched our search feature over here at
> Xanga.com; the
> Blogs, Metros and Blogrings sections are powered by Lucene.NET!  You
> can
> check it out here:
> 
> http://search.xanga.com/
> 
> This is only the beginning of what we want to do with search and
> Lucene.  I
> want to thank everyone on this list for all the help over the months.
>  Its
> great to see a project like Lucene thriving!
> 
> Monsur
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 06:30:41 2005
Return-Path: <java-user-return-16015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66482 invoked from network); 24 Aug 2005 06:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 06:30:40 -0000
Received: (qmail 75362 invoked by uid 500); 24 Aug 2005 06:30:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75270 invoked by uid 500); 24 Aug 2005 06:30:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75255 invoked by uid 99); 24 Aug 2005 06:30:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 23:30:35 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Aug 2005 23:30:52 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7O6UW0r082578
	for <java-user@lucene.apache.org>; Wed, 24 Aug 2005 08:30:32 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: how to get newest library version?
Date: Wed, 24 Aug 2005 08:30:27 +0200
User-Agent: KMail/1.5.4
References: <24CFCE44DCB015489FB96D38BDF4FCAA07CA19@gerard.anchormen.nl>
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA07CA19@gerard.anchormen.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508240830.27513.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 23 August 2005 23:45, Peter Veentjer - Anchor Men wrote:
> Does anyone know how I can download the newest version of Lucene from the 
SVN? I have been trying (even the website) but I only get timeouts. I would 
even be happy with a newly build jar (based on the newest sources). So I help 
someone can help me out so I can remove a MultiFieldQueryParser bug out of 
the system that should have been removed on the newest version (and troubles)

This checkout command worked for me:

  svn checkout http://svn.apache.org/repos/asf/lucene/java/trunk

and currently the command:

  svn update 

is working fine here, so I'd expect a checkout to work now, too.
Once you have a working copy use:

  ant jar

in  the trunk directory to create the latest jar in the build directory.


Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 07:11:55 2005
Return-Path: <java-user-return-16016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83194 invoked from network); 24 Aug 2005 07:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 07:11:54 -0000
Received: (qmail 97516 invoked by uid 500); 24 Aug 2005 07:11:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97216 invoked by uid 500); 24 Aug 2005 07:11:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97203 invoked by uid 99); 24 Aug 2005 07:11:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 00:11:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.83.242.16] (HELO mail.anchormen.nl) (212.83.242.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 00:12:04 -0700
Content-class: urn:content-classes:message
Subject: RE: how to get newest library version?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 24 Aug 2005 09:11:34 +0200
X-MIMEOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA0711F0@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to get newest library version?
Thread-index: AcWodVTXL+oVLRwJQEeWHUTXDVLmpwABaoLg
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok thanks, this works *is building the new jar at the moment*

-----Oorspronkelijk bericht-----
Van: Paul Elschot [mailto:paul.elschot@xs4all.nl]=20
Verzonden: woensdag 24 augustus 2005 8:30
Aan: java-user@lucene.apache.org
Onderwerp: Re: how to get newest library version?

On Tuesday 23 August 2005 23:45, Peter Veentjer - Anchor Men wrote:
> Does anyone know how I can download the newest version of Lucene from=20
> the
SVN? I have been trying (even the website) but I only get timeouts. I
would even be happy with a newly build jar (based on the newest
sources). So I help someone can help me out so I can remove a
MultiFieldQueryParser bug out of the system that should have been
removed on the newest version (and troubles)

This checkout command worked for me:

  svn checkout http://svn.apache.org/repos/asf/lucene/java/trunk

and currently the command:

  svn update=20

is working fine here, so I'd expect a checkout to work now, too.
Once you have a working copy use:

  ant jar

in  the trunk directory to create the latest jar in the build directory.


Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 07:46:54 2005
Return-Path: <java-user-return-16017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4262 invoked from network); 24 Aug 2005 07:46:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 07:46:54 -0000
Received: (qmail 32231 invoked by uid 500); 24 Aug 2005 07:46:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32210 invoked by uid 500); 24 Aug 2005 07:46:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32197 invoked by uid 99); 24 Aug 2005 07:46:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 00:46:49 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 00:47:06 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1E7pyA-0004Gl-LS
	for java-user@lucene.apache.org; Wed, 24 Aug 2005 00:46:46 -0700
Message-ID: <696937.post@talk.nabble.com>
Date: Wed, 24 Aug 2005 00:46:46 -0700 (PDT)
From: "kapilChhabra (sent by Nabble.com)" <lists@nabble.com>
Reply-To: kapilChhabra <kapil.chhabra@naukri.com>
To: java-user@lucene.apache.org
Subject: Search Results Clustering
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_137_16206531.1124869606647"
X-Nabble-Sender: Nabble Forums <lists@nabble.com>
X-Nabble-From: kapilChhabra <kapil.chhabra@naukri.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_137_16206531.1124869606647
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi All,
I have been using Lucene in my application to search over 4 million recordes updated daily.
I am currently using a single index with 21 fields.
Some of my fields contain numbers that are foreign keys to my data. I have provided a dropdown of values to select from, on my search form, to search on these fields.

A typical scenario of my index/search  is:
FIELD-1:token;index - formatted text using WhitespaceAnalyzer
FIELD-2:token;index - formatted text using WhitespaceAnalyzer
FIELD-3:ndex - integers[foreign keys] stored as string.
FIELD-4:ndex - integers[foreign keys] stored as string.

Sample Search Query:

(FIELD-1:apple OR FILED-1:orange) AND (FIELD-3:4 OR FILED-3:5) 

The results are Sorted on FILED-4.

I am getting results as expected.

An additional requirement is to bunch the search results display the count.
eg. ouput:
Search Results:
1. Doc 100
2. Doc 209
3. Doc 897
etc...

Search Clusters:
Total Results = 540
+results in [FILED-3:4] = 400
---results in [FILED-4:1] = 150
---results in [FILED-4:7] = 130
---results in [FILED-4:3] = 100
---results in [FILED-4:others] = 20

+results in [FILED-3:5] = 140
---results in [FILED-4:2] = 90
---results in [FILED-4:1] = 30
---results in [FILED-4:others] = 20

I have no clue how to do it using a single index.
Any pointers in this will be highly appreciated.

Thanks in advance,

Regards,
KapilChhabra
--
Sent from the Lucene - Java Users forum at Nabble.com:
http://www.nabble.com/Search-Results-Clustering-t249355.html#a696937

------=_Part_137_16206531.1124869606647--


From java-user-return-16018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 07:53:36 2005
Return-Path: <java-user-return-16018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6492 invoked from network); 24 Aug 2005 07:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 07:53:36 -0000
Received: (qmail 41232 invoked by uid 500); 24 Aug 2005 07:53:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41215 invoked by uid 500); 24 Aug 2005 07:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41202 invoked by uid 99); 24 Aug 2005 07:53:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 00:53:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 00:53:47 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id AA56A1600F0; Wed, 24 Aug 2005 04:05:42 -0400
Message-ID: <430C2774.8040800@bayt.net>
Date: Wed, 24 Aug 2005 11:53:24 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Search Results Clustering
References: <696937.post@talk.nabble.com>
In-Reply-To: <696937.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: D2a550a1600f00938.SMD
X-Declude-Note: Scanned by Declude 1.82 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 04:05:44 on 24 Aug 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't understand your requirement, what do you want to bunch your 
results by?

Can you explain so I can help

Nader Henein

kapilChhabra (sent by Nabble.com) wrote:

>Hi All,
>I have been using Lucene in my application to search over 4 million recordes updated daily.
>I am currently using a single index with 21 fields.
>Some of my fields contain numbers that are foreign keys to my data. I have provided a dropdown of values to select from, on my search form, to search on these fields.
>
>A typical scenario of my index/search  is:
>FIELD-1:token;index - formatted text using WhitespaceAnalyzer
>FIELD-2:token;index - formatted text using WhitespaceAnalyzer
>FIELD-3:ndex - integers[foreign keys] stored as string.
>FIELD-4:ndex - integers[foreign keys] stored as string.
>
>Sample Search Query:
>
>(FIELD-1:apple OR FILED-1:orange) AND (FIELD-3:4 OR FILED-3:5) 
>
>The results are Sorted on FILED-4.
>
>I am getting results as expected.
>
>An additional requirement is to bunch the search results display the count.
>eg. ouput:
>Search Results:
>1. Doc 100
>2. Doc 209
>3. Doc 897
>etc...
>
>Search Clusters:
>Total Results = 540
>+results in [FILED-3:4] = 400
>---results in [FILED-4:1] = 150
>---results in [FILED-4:7] = 130
>---results in [FILED-4:3] = 100
>---results in [FILED-4:others] = 20
>
>+results in [FILED-3:5] = 140
>---results in [FILED-4:2] = 90
>---results in [FILED-4:1] = 30
>---results in [FILED-4:others] = 20
>
>I have no clue how to do it using a single index.
>Any pointers in this will be highly appreciated.
>
>Thanks in advance,
>
>Regards,
>KapilChhabra
>--
>Sent from the Lucene - Java Users forum at Nabble.com:
>http://www.nabble.com/Search-Results-Clustering-t249355.html#a696937
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 09:11:44 2005
Return-Path: <java-user-return-16019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34657 invoked from network); 24 Aug 2005 09:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 09:11:43 -0000
Received: (qmail 25092 invoked by uid 500); 24 Aug 2005 09:11:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25059 invoked by uid 500); 24 Aug 2005 09:11:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25046 invoked by uid 99); 24 Aug 2005 09:11:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 02:11:38 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 02:11:55 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1E7rIG-0005Jz-Aq
	for java-user@lucene.apache.org; Wed, 24 Aug 2005 02:11:36 -0700
Message-ID: <697377.post@talk.nabble.com>
Date: Wed, 24 Aug 2005 02:11:36 -0700 (PDT)
From: "kapilChhabra (sent by Nabble.com)" <lists@nabble.com>
Reply-To: kapilChhabra <kapil.chhabra@naukri.com>
To: java-user@lucene.apache.org
Subject: Re: Search Results Clustering
In-Reply-To: <430C2774.8040800@bayt.net>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_139_3064720.1124874696329"
X-Nabble-Sender: Nabble Forums <lists@nabble.com>
X-Nabble-From: kapilChhabra <kapil.chhabra@naukri.com>
References: <696937.post@talk.nabble.com> <430C2774.8040800@bayt.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_139_3064720.1124874696329
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Thanks for the prompt reply.
I have to bunch the results [only the count] on the basis of value of one of the FIELDS.
lets say FILED-3 and with in it FILED-4.

It is very much similar to using "group by"

What can be the options of doing this? And which is the best way to do it?


Thanks in anticipation,
Regards,
kapilChhabra

--
Sent from the Lucene - Java Users forum at Nabble.com:
http://www.nabble.com/Search-Results-Clustering-t249355.html#a697377

------=_Part_139_3064720.1124874696329--


From java-user-return-16020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 09:45:49 2005
Return-Path: <java-user-return-16020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45830 invoked from network); 24 Aug 2005 09:45:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 09:45:49 -0000
Received: (qmail 65543 invoked by uid 500); 24 Aug 2005 09:45:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65523 invoked by uid 500); 24 Aug 2005 09:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65510 invoked by uid 99); 24 Aug 2005 09:45:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 02:45:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.194.158.19] (HELO exchange.bvdep.com) (193.194.158.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 02:46:00 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: QueryParser not thread-safe
Date: Wed, 24 Aug 2005 11:45:40 +0200
Message-ID: <950FF7DE40C2B64CAF80B564732927E104810B62@exchange.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser not thread-safe
thread-index: AcWoGjStybizD+d3T46gezHgKhDRaAAb8vKg
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for pointing that out!
I checked the source and QueryParser is indeed not thread-safe (the
presence of local variables like jj_lastpos that are used *during* the
parsing makes this obvious)

Perhaps it should be explicitly mentioned in the javadoc.

The solution I'll probably go for is using ThreadLocal variables
(available since jdk 1.2, but there was a problem in the sun jvm with
deallocation when threads stop until jdk 1.4 or so)

an example (not compiled, nor tested):

public class MyQueryFactory {
    public Query createQuery(String expression) {
        return threadLocalQueryParser.get().parse(expression);
    }
   =20
    private ThreadLocal<QueryParser> threadLocalQueryParser=3Dnew
ThreadLocal<QueryParser>() {
        protected QueryParser initialValue() {
            return new QueryParser("defaultField", new MyAnalyzer());
        }
    };
}

(I used jdk 1.5 generics because the code is clearer, remove the
<QueryParser> and put a few casts where needed if you want this in 1.4
or lower)

initialValue() will be only be called once for every thread that calls
threadLocalQueryParser.get().

See the javadoc for java.lang.ThreadLocal

Luc


-----Original Message-----
From: jian chen [mailto:chenjian1227@gmail.com]=20
Sent: dinsdag 23 augustus 2005 21:38
To: java-user@lucene.apache.org
Subject: Re: QueryParser not thread-safe

Right. My philosophy is that, make it work, then, make it better.=20

Don't waste time on something that you are not sure if it would cause
performance problem.

Jian

On 8/23/05, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Tuesday 23 August 2005 19:01, Miles Barr wrote:
> > On Tue, 2005-08-23 at 13:47 -0300, jhandl@fibertel.com.ar wrote:
> > > Hi! I've been having problems with lucene's QueryParser,
apparently it is
> not thread-safe.
> > >
> > > That means I can't parse queries in threads where the queryparser
object
> is created once and reused for each query. If I do, the resulting
queries may
> have all kinds of weird problems, for example missing terms, duplicate
terms,
> etc.
> > >
> > > I don't like the idea of creating a new queryparser for each
query, so I
> am looking for alternatives. Any ideas?
> >
> > Using a non-threadsafe object in a threaded environment is fairly
> > standard in Java, just wrap it in a synchronized block.
> >
> > If you don't want all threads waiting on one query parser, create a
pool
> > of them.
>=20
> Or use one parser per thread.
>=20
> Regards,
> Paul Elschot
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 10:20:37 2005
Return-Path: <java-user-return-16021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59299 invoked from network); 24 Aug 2005 10:20:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 10:20:37 -0000
Received: (qmail 9059 invoked by uid 500); 24 Aug 2005 10:20:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9022 invoked by uid 500); 24 Aug 2005 10:20:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9009 invoked by uid 99); 24 Aug 2005 10:20:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 03:20:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 66.249.82.195 as permitted sender)
Received: from [66.249.82.195] (HELO xproxy.gmail.com) (66.249.82.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 03:20:46 -0700
Received: by xproxy.gmail.com with SMTP id h33so78902wxd
        for <java-user@lucene.apache.org>; Wed, 24 Aug 2005 03:20:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hMyp7VCxRzB8BJUTPRCL1WWgzSXdPTD5SS53oEk+7mRcEmOD2lTnSIWU8HnR8+bOAnqTRoAfrn2r+wdxQKZ1re+LsMcaJ7E9QsPfXE1w9CoPsj0nVWTJ7JvRv4b+SW4yBlmEYfs/viCF10iqjQz7oTwU1bZh5/vejEBclC1srig=
Received: by 10.70.57.3 with SMTP id f3mr31368wxa;
        Wed, 24 Aug 2005 03:20:26 -0700 (PDT)
Received: by 10.70.55.14 with HTTP; Wed, 24 Aug 2005 03:20:26 -0700 (PDT)
Message-ID: <88c6a67205082403204514dc7c@mail.gmail.com>
Date: Wed, 24 Aug 2005 05:20:26 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser not thread-safe
In-Reply-To: <950FF7DE40C2B64CAF80B564732927E104810B62@exchange.be.bvd>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <950FF7DE40C2B64CAF80B564732927E104810B62@exchange.be.bvd>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would just create a new QueryParser for each query.  Allocating
short-lived objects is just about free in java, and the time spent
performing the actual search will by far dominate any time spent
constructing QueryParser objects.

On 8/24/05, Vanlerberghe, Luc <Luc.Vanlerberghe@bvdep.com> wrote:
> Thanks for pointing that out!
> I checked the source and QueryParser is indeed not thread-safe (the
> presence of local variables like jj_lastpos that are used *during* the
> parsing makes this obvious)
>=20
> Perhaps it should be explicitly mentioned in the javadoc.
>=20
> The solution I'll probably go for is using ThreadLocal variables
> (available since jdk 1.2, but there was a problem in the sun jvm with
> deallocation when threads stop until jdk 1.4 or so)
>=20
> an example (not compiled, nor tested):
>=20
> public class MyQueryFactory {
>    public Query createQuery(String expression) {
>        return threadLocalQueryParser.get().parse(expression);
>    }
>=20
>    private ThreadLocal<QueryParser> threadLocalQueryParser=3Dnew
> ThreadLocal<QueryParser>() {
>        protected QueryParser initialValue() {
>            return new QueryParser("defaultField", new MyAnalyzer());
>        }
>    };
> }
>=20
> (I used jdk 1.5 generics because the code is clearer, remove the
> <QueryParser> and put a few casts where needed if you want this in 1.4
> or lower)
>=20
> initialValue() will be only be called once for every thread that calls
> threadLocalQueryParser.get().
>=20
> See the javadoc for java.lang.ThreadLocal
>=20
> Luc
>=20
>=20
> -----Original Message-----
> From: jian chen [mailto:chenjian1227@gmail.com]
> Sent: dinsdag 23 augustus 2005 21:38
> To: java-user@lucene.apache.org
> Subject: Re: QueryParser not thread-safe
>=20
> Right. My philosophy is that, make it work, then, make it better.
>=20
> Don't waste time on something that you are not sure if it would cause
> performance problem.
>=20
> Jian
>=20
> On 8/23/05, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > On Tuesday 23 August 2005 19:01, Miles Barr wrote:
> > > On Tue, 2005-08-23 at 13:47 -0300, jhandl@fibertel.com.ar wrote:
> > > > Hi! I've been having problems with lucene's QueryParser,
> apparently it is
> > not thread-safe.
> > > >
> > > > That means I can't parse queries in threads where the queryparser
> object
> > is created once and reused for each query. If I do, the resulting
> queries may
> > have all kinds of weird problems, for example missing terms, duplicate
> terms,
> > etc.
> > > >
> > > > I don't like the idea of creating a new queryparser for each
> query, so I
> > am looking for alternatives. Any ideas?
> > >
> > > Using a non-threadsafe object in a threaded environment is fairly
> > > standard in Java, just wrap it in a synchronized block.
> > >
> > > If you don't want all threads waiting on one query parser, create a
> pool
> > > of them.
> >
> > Or use one parser per thread.
> >
> > Regards,
> > Paul Elschot
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 10:23:19 2005
Return-Path: <java-user-return-16022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59845 invoked from network); 24 Aug 2005 10:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 10:23:17 -0000
Received: (qmail 11366 invoked by uid 500); 24 Aug 2005 10:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11123 invoked by uid 500); 24 Aug 2005 10:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11110 invoked by uid 99); 24 Aug 2005 10:23:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 03:23:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 03:23:28 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id AD6DB59013C; Wed, 24 Aug 2005 06:35:25 -0400
Message-ID: <430C4A8A.8010406@bayt.net>
Date: Wed, 24 Aug 2005 14:23:06 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Search Results Clustering
References: <696937.post@talk.nabble.com> <430C2774.8040800@bayt.net> <697377.post@talk.nabble.com>
In-Reply-To: <697377.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: D4d6c0b59013c11ae.SMD
X-Declude-Note: Scanned by Declude 1.82 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 06:35:26 on 24 Aug 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

well you're not going to like my answer, to that, if what you're looking 
for is a group by result depending on the unique values of a field or a 
combination of fields ( field-3 field-4 ), something that in SQL would 
look like this :

select field-3 , field-4 , count(*) from ... where ..... group by 
field-3 , field-4

Then short of doing X Lucene queries to get total result counts, I'm nor 
really sure how you would get this, depending on how many unique 
combinations you have, you could always denormalize the count(*) in a 
separate table or Lucene Index and run two queries, the first to get the 
counts and the second to get the results which you could group on display.

So the question is, how many unique values do you have, it would help if 
you gave me a real world example because there are work arounds to these 
things, that can be a lot more performant and intelligent than a 
straight DB hit.

Nader Henein


kapilChhabra (sent by Nabble.com) wrote:

>Thanks for the prompt reply.
>I have to bunch the results [only the count] on the basis of value of one of the FIELDS.
>lets say FILED-3 and with in it FILED-4.
>
>It is very much similar to using "group by"
>
>What can be the options of doing this? And which is the best way to do it?
>
>
>Thanks in anticipation,
>Regards,
>kapilChhabra
>
>--
>Sent from the Lucene - Java Users forum at Nabble.com:
>http://www.nabble.com/Search-Results-Clustering-t249355.html#a697377
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 10:47:31 2005
Return-Path: <java-user-return-16023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68426 invoked from network); 24 Aug 2005 10:47:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 10:47:31 -0000
Received: (qmail 41546 invoked by uid 500); 24 Aug 2005 10:47:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41123 invoked by uid 500); 24 Aug 2005 10:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41110 invoked by uid 99); 24 Aug 2005 10:47:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 03:47:26 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Aug 2005 03:47:43 -0700
Received: (qmail 30087 invoked by uid 0); 24 Aug 2005 10:47:23 -0000
Received: from 80.136.134.100 by www43.gmx.net with HTTP;
	Wed, 24 Aug 2005 12:47:23 +0200 (MEST)
Date: Wed, 24 Aug 2005 12:47:23 +0200 (MEST)
From: dozean@gmx.de
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <1124799942.11257.54.camel@localhost.localdomain>
Subject: =?ISO-8859-1?Q?Re:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <32070.1124880443@www43.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

what can i do with files which are deleted from the document directory?
How can i delete them from the index, if i start an update?

Currently i start a search in the index for existing documents and delete
them, when they have changed! After that session i add all the documents,
which are not in the index by searching in the index.

So it could not work thatway because i can not search for a file, witch
does't exists!!! And the reading of the index with the indexreader take so
much time!!! so? you have an idea?

Bye



-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 11:08:36 2005
Return-Path: <java-user-return-16024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78574 invoked from network); 24 Aug 2005 11:08:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 11:08:35 -0000
Received: (qmail 60153 invoked by uid 500); 24 Aug 2005 11:08:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59295 invoked by uid 500); 24 Aug 2005 11:08:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59282 invoked by uid 99); 24 Aug 2005 11:08:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 04:08:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.159.1.214] (HELO epost.start.no) (195.159.1.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 04:08:47 -0700
Received: (from apache@localhost)
	by epost.start.no (8.11.6/8.11.2) id j7OB7aA05773
	for java-user@lucene.apache.org; Wed, 24 Aug 2005 13:07:36 +0200
To: java-user@lucene.apache.org
Subject: OutOfMemory when calling SegmentTermEnum.growBuffer(..) during search
Message-ID: <1124881655.430c54f78368d@epost.start.no>
Date: Wed, 24 Aug 2005 13:07:35 +0200 (CEST)
From: Fredrik <fredrio@start.no>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: IMP/PHP IMAP webmail program 2.2.8
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We have a Lucene powered search with approx 1,2 million documents indexed.
We get sporadic OutOfMemory errors when users search this index (have tried
rebuilding the index several times from scratch), as Lucene tries to allocate
over 500 MB of memory.

Luke reports the following details:
Number of fields: 17
Number of documents: 1165726
Number of terms: 6721726
The size of the index is approx 5,3 GB.
Lucene version is 1.4.3.

The index contains Norwegian terms, but lots of inline HTML, etc
is probably increasing the index term count (should 'wash' these
unwanted terms away when indexing documents).

----------- analysis -----------
<aF[338]: Allocation Failure. need 532676624 bytes, 105670 ms since last AF>
<aF[338]: managing allocation failure, action=2 (64317856/2044721664)>
<GC(750): GC cycle started Thu Jun 9 10:48:00 2005
<GC(750): freed 593221816 bytes, 32% free (657539672/2044721664), in 10944 ms>
<GC(750): mark: 2888 ms, sweep: 239 ms, compact: 7817 ms>
<GC(750): refs: soft 0 (age >= 32), weak 356, final 1083, phantom 0>
<GC(750): moved 16099123 objects, 1183312592 bytes, reason=1, used 13328 more bytes>
<aF[338]: managing allocation failure, action=3 (657539672/2044721664)>
<aF[338]: managing allocation failure, action=4 (657539672/2044721664)>
<aF[338]: managing allocation failure, action=6 (657539672/2044721664)>
JVMDG217: Dump Handler is Processing OutOfMemory - Please Wait.
---------- end of analysis ------------

An analysis of the heap dump shows that the two largest contiguous
memory segmets at the time, was 512,230,096 and 137,232,560 bytes large.

'need 532676624 bytes' means that something is allocating a 500Mb slab
of memory.
'action=2' means that this much memory was not available at all; and it
goes through a normal GC cycle. The GC cycle needs to perform a
compaction to be able to make a 500Mb slab available, which takes around
8 seconds.
'action=3', 4 and 6 indicate that the compaction did not help, and that
even though there is around 650Mb free space in the heap, there is no
block large enough to hold the requestet array.

This, in turn triggers a normal OutOfMemory, which we have configured to
trigger a thread dump. (see below)

--------- thread dump -------------
 at
org.apache.lucene.index.SegmentTermEnum.growBuffer(SegmentTermEnum.java(Compiled
Code))
 at
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java(Compiled
Code))
 at
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java(Compiled
Code))
 at
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java(Compiled
Code))
 at
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java(Compiled
Code))
 at
org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java(Compiled
Code))
 at
org.apache.lucene.index.MultiReader.docFreq(MultiReader.java(Compiled Code))
 at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:69)
 at org.apache.lucene.search.Similarity.idf(Similarity.java:255)
 at
org.apache.lucene.search.TermQuery$TermWeight.sumOfSquaredWeights(TermQuery.java:47)
 at
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110)
 at
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110)
 at org.apache.lucene.search.Query.weight(Query.java(Compiled Code))
 at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java(Compiled
Code))
 at org.apache.lucene.search.Hits.getMoreDocs(Hits.java(Compiled Code))
 at org.apache.lucene.search.Hits.<init>(Hits.java:43)
 at org.apache.lucene.search.Searcher.search(Searcher.java(Compiled Code))


the growBuffer contains:
  buffer = new char[length]
length is the result of two readVInt() on the "tii" file (start +
length)



I made a local copy of the largest "tii" file and (using beanshell)
read the two "variable ints":
bsh % d = org.apache.lucene.store.FSDirectory.getDirectory("/tmp/",
false);
bsh % i = d.openFile("copy.tii");
bsh % print (i.readVInt());
266338303
bsh % print (i.readVInt());
0

In other words (If I read the code correctly) _start_ is set to
266338303 while 'length' is set to 0.  growBuffer allocates a char
array, and (according to our GC logs) allocates 532676624 bytes (which
is 266338303*2 + 18)  I am guessing the 18 additional bytes is type
information, which is probably JVM-dependent.

=======================
So he question becomes:
=======================
Why on earth does our biggest segment think that it starts at 266 million
characters?

I just noticed that the hex value of the 266-million-tingy is ... ...
drumroll ... ... fdfffff

Now I'm thinking that either the read/write-operations dont work 100% or
that there's a corrupt index.  However we _have_ tried to rebuild the
index from scratch, so I don't think it's a corrupt index.

And finally, the start of the 'tii' file is as follows:

$ hexdump /tmp/test.tii | head
0000000 ffff feff 0000 0000 0000 f3cc 0000 8000
0000010 0000 1000 0000 0000 0000 0014 3107 3030
0000020 3130 3831 0104 02fd 897f 0407 3203 3034
0000030 0104 0380 0180 0788 0304 3633 0430 8001

Can anyone please help?? :)

Thank you,
Fredrik Omland

-------------------------------------------------------------------------
Start.no tilbyr n raskere bredbnd til lavere pris.
Sjekk http://www.start.no/bredband/ for mer informasjon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 12:41:30 2005
Return-Path: <java-user-return-16025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13933 invoked from network); 24 Aug 2005 12:41:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 12:41:30 -0000
Received: (qmail 24267 invoked by uid 500); 24 Aug 2005 12:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24249 invoked by uid 500); 24 Aug 2005 12:41:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24235 invoked by uid 99); 24 Aug 2005 12:41:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 05:41:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_HELO_PASS,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [193.229.0.41] (HELO fep01-app.kolumbus.fi) (193.229.0.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 05:41:41 -0700
Received: from mikkon4 ([84.230.183.156]) by fep01-app.kolumbus.fi
          with ESMTP
          id <20050824124119.BZQV23558.fep01-app.kolumbus.fi@mikkon4>
          for <java-user@lucene.apache.org>;
          Wed, 24 Aug 2005 15:41:19 +0300
From: "Mikko Noromaa" <mikko@noromaa.fi>
To: <java-user@lucene.apache.org>
Subject: RE: Example of Field.TermVector.WITH_POSITIONS_OFFSETS usage?
Date: Wed, 24 Aug 2005 15:41:23 +0300
Message-ID: <4e6201c5a8a9$22813680$152ca8c0@mikkon4>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
In-Reply-To: <430B9840.5050407@oconeco.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I create my index with TermVector.WITH_POSITIONS_OFFSETS and get the =
term
offsets with the following code. The code collects two arrays: HFIDs =
(unique
ID's stored with documents) and Highlights (strings with offset info).

Please note that this code requires the patch from bug #36292
(http://issues.apache.org/bugzilla/show_bug.cgi?id=3D36292) to work with
prefix queries.


QueryParser parser =3D new QueryParser("text", analyzer);
parser.setDefaultOperator(QueryParser.AND_OPERATOR);
Query query=3Dparser.parse(querystr);

IndexSearcher searcher=3Dnew IndexSearcher(reader);
Hits hits =3D searcher.search(query);

//System.out.println("query.getClass()=3D\""+query.getClass().toString()+=
"\"")
;
HashSet QueryTerms=3Dnew HashSet();
query.extractTerms(QueryTerms);

int NumHits=3Dhits.length();
int[] HFIDs=3Dnew int[NumHits];
String[] Highlights=3Dnew String[NumHits];

for (int i =3D 0; i < NumHits; i++) {
	Document doc =3D hits.doc(i);
	HFIDs[i]=3DInteger.parseInt(doc.get("hfid"));
	String HiliString=3D"";

	TermPositionVector
tpv=3D(TermPositionVector)reader.getTermFreqVector(hits.id(i), "text");

	String[] DocTerms=3Dtpv.getTerms();         =20
	int[] freq=3Dtpv.getTermFrequencies();
	for (int t =3D 0; t < freq.length; t++) {
		if (QueryTerms.contains(new Term("text",DocTerms[t]))) {
		    TermVectorOffsetInfo[] offsets=3Dtpv.getOffsets(t);
		    int[] pos=3Dtpv.getTermPositions(t);

			for (int tp =3D 0; tp < pos.length; tp++) {
=09
HiliString+=3D(HiliString!=3D""?",":"")+offsets[tp].getStartOffset()+"-"+=
offsets
[tp].getEndOffset();
			}
		}
	}

	Highlights[i]=3DHiliString;
}


--

Mikko Noromaa (mikko@noromaa.fi) - tel. +358 40 7348034
Noromaa Solutions - see http://www.nm-sol.com/
=20

> -----Original Message-----
> From: Sean O'Connor [mailto:sean@oconeco.com]=20
> Sent: Wednesday, August 24, 2005 12:42 AM
> To: java-user@lucene.apache.org
> Subject: Example of Field.TermVector.WITH_POSITIONS_OFFSETS usage?
>=20
>=20
> Hello,
>     I am trying to work through term positions and how to get=20
> them from=20
> a collection of hits. Does setting=20
> TermVector.WITH_POSITIONS_OFFSETS to=20
> true save the start/end position of the term in the source=20
> text file? (I=20
> _think_ it does).
>=20
>      If so, where would I start for trying to make that information=20
> accessible in a "result set"? I believe it would be extending=20
> a query, a=20
> scorer, a hit, and/or a weight object. I will be wanting to=20
> process ALL=20
> hits, so I think will need to implement a hitcollector.
>=20
>     As an example of what I want, if I were looking for the offset=20
> position of "brown" in a properly indexed field containing "the lazy=20
> brown fox", I would like to get:
> start=3D=3D10
> end=3D=3D15 (assuming my counting is right)
>=20
>     Based on Paul Elschot's previous response to a similar question I=20
> had (which I am still working on), I _think_ I need to extend=20
> something=20
> like the ExactPhraseScorer. While debugging with my IDE=20
> (Eclipse) I can=20
> see that the weight object in the scorer contains a reference to the=20
> query. The query contains the fields:
>     Vector positions (just has ints of term positions in phrase?)
>     Vector terms (vector of Term, just field name and field contents?)
>=20
>     The weight also seems to have an array of TermPositions,=20
> which have=20
> SegmentTermPositions. I thought this was what I wanted, but I=20
> don't see=20
> the proper start/end fields, or anything which seems to be on=20
> the right=20
> track.
>=20
>     Can anyone point me in the right direction?
> Thanks,
>=20
> Sean
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 13:06:01 2005
Return-Path: <java-user-return-16026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26790 invoked from network); 24 Aug 2005 13:06:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 13:06:00 -0000
Received: (qmail 69473 invoked by uid 500); 24 Aug 2005 13:05:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69461 invoked by uid 500); 24 Aug 2005 13:05:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 33722 invoked by uid 99); 24 Aug 2005 11:53:16 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of SRS0=RT2n=W3=danielnaber.de=lucenelist@srs.kundenserver.de designates 212.227.126.186 as permitted sender)
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: UpdateIndex
Date: Wed, 24 Aug 2005 13:53:08 +0200
User-Agent: KMail/1.7.1
References: <1124799942.11257.54.camel@localhost.localdomain> <32070.1124880443@www43.gmx.net>
In-Reply-To: <32070.1124880443@www43.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508241353.08812.lucenelist@danielnaber.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 24 August 2005 12:47, dozean@gmx.de wrote:

> what can i do with files which are deleted from the document directory?
> How can i delete them from the index, if i start an update?

See IndexHTML.java in the Lucene demos.

Regards
 Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 13:08:58 2005
Return-Path: <java-user-return-16027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27658 invoked from network); 24 Aug 2005 13:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 13:08:58 -0000
Received: (qmail 71821 invoked by uid 500); 24 Aug 2005 13:08:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71807 invoked by uid 500); 24 Aug 2005 13:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 41240 invoked by uid 99); 24 Aug 2005 12:01:08 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of SRS0=RT2n=W3=danielnaber.de=lucenelist@srs.kundenserver.de designates 212.227.126.188 as permitted sender)
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory when calling SegmentTermEnum.growBuffer(..) during search
Date: Wed, 24 Aug 2005 14:00:34 +0200
User-Agent: KMail/1.7.1
References: <1124881655.430c54f78368d@epost.start.no>
In-Reply-To: <1124881655.430c54f78368d@epost.start.no>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508241400.34894.lucenelist@danielnaber.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 24 August 2005 13:07, Fredrik wrote:

> bsh % i = d.openFile("copy.tii");
> bsh % print (i.readVInt());
> 266338303

I haven't looked in the source, but according to the documentation the first 
value is supposed to be a version number:
http://lucene.apache.org/java/docs/fileformats.html

Regards
 Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 15:11:16 2005
Return-Path: <java-user-return-16028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96557 invoked from network); 24 Aug 2005 15:11:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 15:11:15 -0000
Received: (qmail 50450 invoked by uid 500); 24 Aug 2005 15:11:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50339 invoked by uid 500); 24 Aug 2005 15:11:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50316 invoked by uid 99); 24 Aug 2005 15:11:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 08:11:06 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [24.232.0.225] (HELO avas-mr12.fibertel.com.ar) (24.232.0.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 08:11:23 -0700
Received: from [10.10.10.228] ([10.10.10.228]:43580 "EHLO fibertel.com.ar"
	smtp-auth: <none>) by avas-mr12.fibertel.com.ar with ESMTP
	id S147527AbVHXPK4 convert rfc822-to-8bit; Wed, 24 Aug 2005 12:10:56 -0300
Received: from [10.10.10.171] (Forwarded-For: 10.4.5.27,
 [200.41.238.14]) by stov2.fibertel.com.ar (mshttpd); Wed, 24 Aug 2005
 12:10:51 -0300
From:	<jhandl@fibertel.com.ar>
To:	java-user@lucene.apache.org
Message-ID: <63259f28d1bd.430c63cb@fibertel.com.ar>
Date:	Wed, 24 Aug 2005 12:10:51 -0300
X-Mailer: Sun Java(tm) System Messenger Express 6.1 HotFix 0.11 (built
 Jan 28 2005)
MIME-Version: 1.0
Content-Language: es
Subject: Re: QueryParser not thread-safe
X-Accept-Language: es
Priority: normal
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8BIT
X-Fib-Al-Info: Al
X-Fib-Al-MRId: ba1dbe462cf21f64e6e0ff1572294050
X-Fib-Al-From: jhandl@fibertel.com.ar
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for all the answers! 

Now, while I agree that simple is better, I think QueryParser should 
be made thread-safe through the use of a wrapper class (along the 
line of what Luc suggested) or by using something other than javacc, 
so this is no longer an issue in future lucene versions.

I caught the error through a load test on a system with low memory 
and slow processor, which exacerbates the concurrency issues. 
It was a hard to catch bug: even when it showed up the query results 
still kinda made sense, because missing or duplicate search terms 
don't produce complete garbage.

I'm a beginner, so I may be missing something big, but if not, many 
lucene installations out there may be having this problem without 
knowing it.


> -----Mensaje original-----
> De: Chris Lamprecht [mailto:clamprecht@gmail.com]
> Enviado el: Mircoles, 24 de Agosto de 2005 07:20
> Para: java-user@lucene.apache.org
> Asunto: Re: QueryParser not thread-safe
> 
> 
> I would just create a new QueryParser for each query.  Allocating
> short-lived objects is just about free in java, and the time spent
> performing the actual search will by far dominate any time spent
> constructing QueryParser objects.
> 
> On 8/24/05, Vanlerberghe, Luc <Luc.Vanlerberghe@bvdep.com> wrote:
> > Thanks for pointing that out!
> > I checked the source and QueryParser is indeed not thread-safe (the
> > presence of local variables like jj_lastpos that are used *during* the
> > parsing makes this obvious)
> > 
> > Perhaps it should be explicitly mentioned in the javadoc.
> > 
> > The solution I'll probably go for is using ThreadLocal variables
> > (available since jdk 1.2, but there was a problem in the sun jvm with
> > deallocation when threads stop until jdk 1.4 or so)
> > 
> > an example (not compiled, nor tested):
> > 
> > public class MyQueryFactory {
> >    public Query createQuery(String expression) {
> >        return threadLocalQueryParser.get().parse(expression);
> >    }
> > 
> >    private ThreadLocal<QueryParser> threadLocalQueryParser=new
> > ThreadLocal<QueryParser>() {
> >        protected QueryParser initialValue() {
> >            return new QueryParser("defaultField", new MyAnalyzer());
> >        }
> >    };
> > }
> > 
> > (I used jdk 1.5 generics because the code is clearer, remove the
> > <QueryParser> and put a few casts where needed if you want this in 1.4
> > or lower)
> > 
> > initialValue() will be only be called once for every thread that calls
> > threadLocalQueryParser.get().
> > 
> > See the javadoc for java.lang.ThreadLocal
> > 
> > Luc
> > 
> > 
> > -----Original Message-----
> > From: jian chen [mailto:chenjian1227@gmail.com]
> > Sent: dinsdag 23 augustus 2005 21:38
> > To: java-user@lucene.apache.org
> > Subject: Re: QueryParser not thread-safe
> > 
> > Right. My philosophy is that, make it work, then, make it better.
> > 
> > Don't waste time on something that you are not sure if it would cause
> > performance problem.
> > 
> > Jian
> > 
> > On 8/23/05, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > On Tuesday 23 August 2005 19:01, Miles Barr wrote:
> > > > On Tue, 2005-08-23 at 13:47 -0300, jhandl@fibertel.com.ar wrote:
> > > > > Hi! I've been having problems with lucene's QueryParser, apparently it is not thread-safe.
> > > > >
> > > > > That means I can't parse queries in threads where the queryparser object
> > > > > is created once and reused for each query. If I do, the resulting queries may
> > > > > have all kinds of weird problems, for example missing terms, duplicate terms, etc.
> > > > >
> > > > > I don't like the idea of creating a new queryparser for each query, so I
> > > > > am looking for alternatives. Any ideas?
> > > >
> > > > Using a non-threadsafe object in a threaded environment is fairly
> > > > standard in Java, just wrap it in a synchronized block.
> > > >
> > > > If you don't want all threads waiting on one query parser, create a pool
> > > > of them.
> > >
> > > Or use one parser per thread.
> > >
> > > Regards,
> > > Paul Elschot



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 16:09:57 2005
Return-Path: <java-user-return-16029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26748 invoked from network); 24 Aug 2005 16:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 16:09:56 -0000
Received: (qmail 86529 invoked by uid 500); 24 Aug 2005 16:09:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86505 invoked by uid 500); 24 Aug 2005 16:09:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86492 invoked by uid 99); 24 Aug 2005 16:09:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 09:09:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 09:10:07 -0700
Received: from [81.168.89.246] (helo=[192.168.1.3])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1E7xoq-0002pe-00
	for <java-user@lucene.apache.org>; Wed, 24 Aug 2005 17:09:41 +0100
Subject: Re: QueryParser not thread-safe
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <63259f28d1bd.430c63cb@fibertel.com.ar>
References: <63259f28d1bd.430c63cb@fibertel.com.ar>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Wed, 24 Aug 2005 17:10:12 +0100
Message-Id: <1124899812.19348.35.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 2005-08-24 at 12:10 -0300, jhandl@fibertel.com.ar wrote:
> Now, while I agree that simple is better, I think QueryParser should 
> be made thread-safe through the use of a wrapper class (along the 
> line of what Luc suggested) or by using something other than javacc, 
> so this is no longer an issue in future lucene versions.
> 
> I caught the error through a load test on a system with low memory 
> and slow processor, which exacerbates the concurrency issues. 
> It was a hard to catch bug: even when it showed up the query results 
> still kinda made sense, because missing or duplicate search terms 
> don't produce complete garbage.
> 
> I'm a beginner, so I may be missing something big, but if not, many 
> lucene installations out there may be having this problem without 
> knowing it.

I think a mention in the Javadoc that QueryParser isn't thread-safe
should be enough. Not everything needs to be thread-safe.

Are your tests showing the creation of QueryParser objects taking a
significant amount of time and/or memory? Just having one QueryParser
per thread should be fine, or just create a new one per query.

Given that QueryParser is generated by JavaCC, short of changing JavaCC
so all its fields are wrapped in ThreadLocals, you'd need to wrap all
the methods with synchronized. You could create something like
java.util.Collections's synchronizedXXX methods.

But my gut feeling is having all parsing go through one synchronized
class in a multi-threaded environment will be slower than calling
QueryParser's static parse method for each request. 

IMHO it's better to spot when you need to be careful with threads and
handle it appropriately rather trying to make every class you write
thread-safe. Check out this article for more:

http://www-128.ibm.com/developerworks/java/library/j-threads1.html



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 19:02:12 2005
Return-Path: <java-user-return-16030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98976 invoked from network); 24 Aug 2005 19:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 19:02:12 -0000
Received: (qmail 89790 invoked by uid 500); 24 Aug 2005 19:02:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89762 invoked by uid 500); 24 Aug 2005 19:02:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89749 invoked by uid 99); 24 Aug 2005 19:02:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 12:02:07 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.138] (HELO web32207.mail.mud.yahoo.com) (68.142.207.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Aug 2005 12:02:24 -0700
Received: (qmail 17697 invoked by uid 60001); 24 Aug 2005 19:02:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hvwducXzffWKitjwyVi54pTEuewdMuLsixn/f83ZLxgJDzWoklSH1D9oaye8PR1aiViHN5TCMkpJdkBv+L3jh6O0zsvhzhz9ZPot44OLZqdpxoMRqeA7AxOCOGaHRK9qgYkAyiCGK83QWEUBwx6FyAVRPnnbYWdS8H5kXEJFU4w=  ;
Message-ID: <20050824190204.17695.qmail@web32207.mail.mud.yahoo.com>
Received: from [12.21.236.10] by web32207.mail.mud.yahoo.com via HTTP; Wed, 24 Aug 2005 12:02:04 PDT
Date: Wed, 24 Aug 2005 12:02:04 -0700 (PDT)
From: Brian <okmred@yahoo.com>
Subject: Re: UpdateIndex
To: java-user@lucene.apache.org
In-Reply-To: <fb9748c90508221848688c5a41@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Would you want to update, or could you just append to
an existing Index?
Thanks, B

--- Ray Tsang <saturnism@gmail.com> wrote:

> This could be off topic, but I made something that
> updates indices
> that worked like the following, wonder if anybody
> has the same ideas? 
> I found something like IndexAccessControl in the
> mailing list before. 
> An implementation of the following uses IAC.
> 
> ManagedIndex index =
> ManagedIndex.getInstance(configuration); // could
> return different implemetnations of the ManagedIndex
> 
> Searcher searcher = index.getSearcher();  // could
> return different
> implementations of Searcher
> 
> ManagedUpdateSession session = index.beginUpdate(); 
> // start a update session
> 
> session.addDocument(...); // use session to add,
> delete, update documents
> session.deleteDocument(...);
> session.updateDocument(...);
> 
> // lastly
> index.endUpdate(); // or.. session.commit()?  marks
> the end of the
> update sequence, refresh the searchers.
> 
> IndexReader, IndexWriter, indexSearcher would be
> managed, and there
> can be multiple implementations of how index is
> structured, e.g.
> RotatingIndex, AlternatingIndex, that rotates
> document updates to
> different indices.
> 
> Ray,
> 
> On 8/23/05, Otis Gospodnetic
> <otis_gospodnetic@yahoo.com> wrote:
> > Yes, this is not how you should do it.
> > Use reader.delete(Term) method to delete
> documents:
> >
>
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#delete(org.apache.lucene.index.Term)
> > 
> > Otis
> > 
> > --- dozean@gmx.de wrote:
> > 
> > > Hi,
> > >
> > > i wrote an Index update, where first the
> IndexReader
> > > delete all files from index which are changed.
> > > Than add documents which are not in the index!
> > >
> > > Alone the deletion take so long, because i have
> 2 "for" loops!
> > >
> > > file = array with all files in a directory
> > >
> > > for (int i = 0; i<file.length; i++) {
> > >       if (file[i].isFile()) {
> > >    for (int j =0; j<reader.numDocs(); j++) {
> > >       if (file[i].getName() ==
> reader.document(j).get("name") &&
> > >       file[i].lastModified() >
> > >
> Integer.parseInt(reader.document(j).get("date")))
> > > {                                            
> reader.delete(j);
> > >      }
> > > }
> > >
> > > Maybe this is the wrong way?
> > >
> > > Bye Derya
> > >
> > >
> > > --
> > > 5 GB Mailbox, 50 FreeSMS
> http://www.gmx.net/de/go/promail
> > > +++ GMX - die erste Adresse fr Mail, Message,
> More +++
> > >
> > >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >
> > >
> > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> >
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 24 23:22:19 2005
Return-Path: <java-user-return-16031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98179 invoked from network); 24 Aug 2005 23:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Aug 2005 23:22:18 -0000
Received: (qmail 83890 invoked by uid 500); 24 Aug 2005 23:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83526 invoked by uid 500); 24 Aug 2005 23:22:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83503 invoked by uid 99); 24 Aug 2005 23:22:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 16:22:10 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 16:22:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BB8885B781; Wed, 24 Aug 2005 16:22:04 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B26C77F478
	for <java-user@lucene.apache.org>; Wed, 24 Aug 2005 16:22:04 -0700 (PDT)
Date: Wed, 24 Aug 2005 16:22:04 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Search Results Clustering
In-Reply-To: <696937.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0508241616380.8920@hal.rescomp.berkeley.edu>
References: <696937.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


the approach(es) I described in this thread...

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3cPine.LNX.4.58.0505111358460.9671@hal.rescomp.berkeley.edu%3e

...should work, but you have the added complexity of whating the counts
not just for all unique values in a field, but all the permutations of
values from two fields -- which just means you need to compute a lot more
intersections.  Fortunately, Filters cache nicely so you only have to pay
the cost of computing them when your index changes.

Having done an *extensive* amount of work along this line recently, I can
tell you that something worth considering is to only precompute the
Filters for the individual terms in each field, and then find the
intersection of all the permutations at search time -- it reduces the
amount of precomputation needed, and in many cases can make a huge
difference in the amount of RAM needed to cache all of the Filters.


: Date: Wed, 24 Aug 2005 00:46:46 -0700 (PDT)
: From: "kapilChhabra (sent by Nabble.com)" <lists@nabble.com>
: Reply-To: java-user@lucene.apache.org,
:      kapilChhabra <kapil.chhabra@naukri.com>
: To: java-user@lucene.apache.org
: Subject: Search Results Clustering
:
:
: Hi All,
: I have been using Lucene in my application to search over 4 million recordes updated daily.
: I am currently using a single index with 21 fields.
: Some of my fields contain numbers that are foreign keys to my data. I have provided a dropdown of values to select from, on my search form, to search on these fields.
:
: A typical scenario of my index/search  is:
: FIELD-1:token;index - formatted text using WhitespaceAnalyzer
: FIELD-2:token;index - formatted text using WhitespaceAnalyzer
: FIELD-3:ndex - integers[foreign keys] stored as string.
: FIELD-4:ndex - integers[foreign keys] stored as string.
:
: Sample Search Query:
:
: (FIELD-1:apple OR FILED-1:orange) AND (FIELD-3:4 OR FILED-3:5)
:
: The results are Sorted on FILED-4.
:
: I am getting results as expected.
:
: An additional requirement is to bunch the search results display the count.
: eg. ouput:
: Search Results:
: 1. Doc 100
: 2. Doc 209
: 3. Doc 897
: etc...
:
: Search Clusters:
: Total Results = 540
: +results in [FILED-3:4] = 400
: ---results in [FILED-4:1] = 150
: ---results in [FILED-4:7] = 130
: ---results in [FILED-4:3] = 100
: ---results in [FILED-4:others] = 20
:
: +results in [FILED-3:5] = 140
: ---results in [FILED-4:2] = 90
: ---results in [FILED-4:1] = 30
: ---results in [FILED-4:others] = 20
:
: I have no clue how to do it using a single index.
: Any pointers in this will be highly appreciated.
:
: Thanks in advance,
:
: Regards,
: KapilChhabra
: --
: Sent from the Lucene - Java Users forum at Nabble.com:
: http://www.nabble.com/Search-Results-Clustering-t249355.html#a696937
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 01:06:36 2005
Return-Path: <java-user-return-16032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25737 invoked from network); 25 Aug 2005 01:06:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 01:06:35 -0000
Received: (qmail 91052 invoked by uid 500); 25 Aug 2005 01:06:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91026 invoked by uid 500); 25 Aug 2005 01:06:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91013 invoked by uid 99); 25 Aug 2005 01:06:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 18:06:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dcliman@keepmedia.com designates 63.82.1.162 as permitted sender)
Received: from [63.82.1.162] (HELO mx1.keepmedia.com) (63.82.1.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 18:06:48 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx1.keepmedia.com (Postfix) with ESMTP id 528EF233325
	for <java-user@lucene.apache.org>; Wed, 24 Aug 2005 18:06:09 -0700 (PDT)
Received: from mx1.keepmedia.com ([127.0.0.1])
 by localhost (lucky.corp.keepmedia.int [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 03033-09 for <java-user@lucene.apache.org>;
 Wed, 24 Aug 2005 18:06:09 -0700 (PDT)
Received: from KEEP14 (keep14.corp.keepmedia.int [192.168.1.140])
	by mx1.keepmedia.com (Postfix) with ESMTP id 8A8FF2332E6
	for <java-user@lucene.apache.org>; Wed, 24 Aug 2005 18:06:07 -0700 (PDT)
From: "Dan Climan" <dcliman@keepmedia.com>
To: <java-user@lucene.apache.org>
Subject: Document visible by Term, but not search
Date: Wed, 24 Aug 2005 18:06:26 -0700
Organization: KeepMedia, Inc.
Message-ID: <001b01c5a911$390193b0$7101a8c0@corp.keepmedia.int>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Scanned: by amavisd-new at keepmedia.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have the following strange behavior for an index. The index has been
optimized and has no deletions. It's in compound file format.

Using Luke 0.6 I can browse by Term and find my term (ItemId:727680). =
It's a
Keyword field.  It shows a docfreq of this term is 1. It also shows all =
the
document fields including the correct ItemId value. If I build a =
TermQuery
and search for the term I get no results. Similarly, if I click on the =
Show
All Docs button in Luke, I get no results.
Is my index corrupted? Is there some state or some way of doing a =
TermQuery
search that is making both Luke and my direct query fail?

One thing that makes me suspicious is that the behavior seems to apply =
to
the 4 highest lucene docids (each with there own unique term), but not
earlier docs (as far as I can tell). There are 14,337 docs in this =
index.

Any ideas on what could cause this or how I could construct a search =
that
finds this document?

Thanks,
Dan=A0



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 01:15:01 2005
Return-Path: <java-user-return-16033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27360 invoked from network); 25 Aug 2005 01:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 01:15:01 -0000
Received: (qmail 96374 invoked by uid 500); 25 Aug 2005 01:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96349 invoked by uid 500); 25 Aug 2005 01:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96336 invoked by uid 99); 25 Aug 2005 01:14:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 18:14:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 18:15:13 -0700
Received: from [192.168.101.96] ([213.80.34.34])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j7P1FDm28234
	for <java-user@lucene.apache.org>; Wed, 24 Aug 2005 20:15:13 -0500
Message-ID: <430D1B8C.5010804@getopt.org>
Date: Thu, 25 Aug 2005 03:14:52 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document visible by Term, but not search
References: <001b01c5a911$390193b0$7101a8c0@corp.keepmedia.int>
In-Reply-To: <001b01c5a911$390193b0$7101a8c0@corp.keepmedia.int>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dan Climan wrote:
> I have the following strange behavior for an index. The index has been
> optimized and has no deletions. It's in compound file format.
> 
> Using Luke 0.6 I can browse by Term and find my term (ItemId:727680). It's a
> Keyword field.  It shows a docfreq of this term is 1. It also shows all the
> document fields including the correct ItemId value. If I build a TermQuery
> and search for the term I get no results. Similarly, if I click on the Show
> All Docs button in Luke, I get no results.
> Is my index corrupted? Is there some state or some way of doing a TermQuery
> search that is making both Luke and my direct query fail?
> 
> One thing that makes me suspicious is that the behavior seems to apply to
> the 4 highest lucene docids (each with there own unique term), but not
> earlier docs (as far as I can tell). There are 14,337 docs in this index.
> 
> Any ideas on what could cause this or how I could construct a search that
> finds this document?

If the index is not too bulky, and doesn't contain proprietary 
information, you could send it to me privately (ab at getopt dot org) 
and I could take a look at this problem.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 02:17:10 2005
Return-Path: <java-user-return-16034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47206 invoked from network); 25 Aug 2005 02:17:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 02:17:10 -0000
Received: (qmail 41576 invoked by uid 500); 25 Aug 2005 02:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41551 invoked by uid 500); 25 Aug 2005 02:17:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41538 invoked by uid 99); 25 Aug 2005 02:17:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 19:17:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [205.152.59.72] (HELO imf24aec.mail.bellsouth.net) (205.152.59.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 19:17:22 -0700
Received: from ibm70aec.bellsouth.net ([65.12.150.225])
          by imf24aec.mail.bellsouth.net with ESMTP
          id <20050825021702.SFKD13200.imf24aec.mail.bellsouth.net@ibm70aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Wed, 24 Aug 2005 22:17:02 -0400
Received: from w2ks.synernet.com ([65.12.150.225])
          by ibm70aec.bellsouth.net with ESMTP
          id <20050825021701.JWSD21411.ibm70aec.bellsouth.net@w2ks.synernet.com>
          for <java-user@lucene.apache.org>;
          Wed, 24 Aug 2005 22:17:01 -0400
Message-Id: <6.2.3.4.2.20050824221452.0642f4d0@fast.synernet.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4
Date: Wed, 24 Aug 2005 22:17:57 -0400
To: java-user@lucene.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: Re: Document visible by Term, but not search
In-Reply-To: <001b01c5a911$390193b0$7101a8c0@corp.keepmedia.int>
References: <001b01c5a911$390193b0$7101a8c0@corp.keepmedia.int>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Dan,

What's the term? Could this be an analyzer problem? Are you using
the same analyzer for indexing and searching?

Fred

At 09:06 PM 8/24/2005, you wrote:
>I have the following strange behavior for an index. The index has been
>optimized and has no deletions. It's in compound file format.
>
>Using Luke 0.6 I can browse by Term and find my term (ItemId:727680). It's a
>Keyword field.  It shows a docfreq of this term is 1. It also shows all the
>document fields including the correct ItemId value. If I build a TermQuery
>and search for the term I get no results. Similarly, if I click on the Show
>All Docs button in Luke, I get no results.
>Is my index corrupted? Is there some state or some way of doing a TermQuery
>search that is making both Luke and my direct query fail?
>
>One thing that makes me suspicious is that the behavior seems to apply to
>the 4 highest lucene docids (each with there own unique term), but not
>earlier docs (as far as I can tell). There are 14,337 docs in this index.
>
>Any ideas on what could cause this or how I could construct a search that
>finds this document?
>
>Thanks,
>Dan
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 02:50:56 2005
Return-Path: <java-user-return-16035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54179 invoked from network); 25 Aug 2005 02:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 02:50:56 -0000
Received: (qmail 77987 invoked by uid 500); 25 Aug 2005 02:50:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77968 invoked by uid 500); 25 Aug 2005 02:50:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77953 invoked by uid 99); 25 Aug 2005 02:50:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 19:50:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [205.152.59.69] (HELO imf21aec.mail.bellsouth.net) (205.152.59.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 19:51:07 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf21aec.mail.bellsouth.net with ESMTP
          id <20050825024606.SONA3198.imf21aec.mail.bellsouth.net@w2ks.synernet.com>
          for <java-user@lucene.apache.org>;
          Wed, 24 Aug 2005 22:46:06 -0400
Message-Id: <6.2.3.4.2.20050824222105.0680ad38@fast.synernet.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4
Date: Wed, 24 Aug 2005 22:47:02 -0400
To: java-user@lucene.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: Thinking about better highlighting
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,

First, my thanks to those who've contributed to the current
best practices for highlighting. We use your code!

However, after reviewing recent discussions about highlighting,
and struggling with our own highlighting issues, I'm wondering if
there's a better way.

Others have certainly thought more about this (but I've thought
about it a lot).

Isn't it true that the fundamental problem is that all of the highlighting
approaches are struggling with trying to recreate what the lucene core
has already done at search time?

My simplest example is a phrase query, "brown fox". Why should we
have to attempt to simulate what lucene does in the highlighting code?
There are several attempts out there to solve this using various approaches,
span queries, custom hacks, etc., but all suffer from the same problem.
Namely, it's a lot of difficult work to correctly find the same terms 
in the highlighting
code that lucene has already found moments before. So we end up
highlighting "brown" and "fox" wherever they occur, not just the phrase.

I read with interest the recent discussion of using span queries to search
a single document to determine phrases, taking into account slop factor, etc.
Again, why all this work when lucene has already found specific terms
in the document that matched a specific query (however complex, involving
phrases or prefixes or slop factors, etc.)?

I'm not familiar with core lucene, but is it possible that lucene could return
additional information about specific terms matched? This could be optional
so that those not using it would incur no performance hits. The matched terms
could contain offsets or other information stored at indexing time.

No matter how complex a lucene query, when core lucene returns a hit, it must
have determined exactly which terms satisfy the query, right? So why do we
have to redo the work? (often incorrectly)

Again, I freely admit my ignorance of lucene core. This may be architecturally
impractical for all I know.

But, maybe not! Have others considered this? Please discuss.

Verity has solved this, by the way. It correctly highlights phrases 
without highlighting
additional occurrences of the phrase terms.

Thanks,

Fred





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 03:53:51 2005
Return-Path: <java-user-return-16036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69194 invoked from network); 25 Aug 2005 03:53:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 03:53:51 -0000
Received: (qmail 34375 invoked by uid 500); 25 Aug 2005 03:53:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33462 invoked by uid 500); 25 Aug 2005 03:53:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33449 invoked by uid 99); 25 Aug 2005 03:53:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 20:53:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.7.7.100] (HELO mail.monsur.com) (64.7.7.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 20:54:02 -0700
Received: from woodbridge [66.108.17.173] by mail.monsur.com with ESMTP
  (SMTPD32-8.05) id A0C71D190154; Wed, 24 Aug 2005 23:53:43 -0400
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene and Xanga.com
Date: Wed, 24 Aug 2005 23:53:42 -0400
Message-ID: <004101c5a928$961f3220$0200a8c0@woodbridge>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <20050824045105.87921.qmail@web31114.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Otis, we've been continually impressed with the performance of Lucene.
We've been ever increasing the load we are putting on it (from our small
help section, to our slightly larger metros, to our big groups, and then
our gigantic weblogs), and it has meet each of these challenges
wonderfully.  

We are currently indexing only a few weeks worth of data (about a 6.5
gig index)..  I think we can increase that even more and over the next
few weeks I'm going to play with it to find an optimal index size.  At
some point beyond that, we might consider partitioning the index into
chunks so that we can allow users to search beyond just the recent
posts.

Monsur



> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Wednesday, August 24, 2005 12:51 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene and Xanga.com
> 
> 
> Nicely done, looks pretty and seems fast.
> 
> How much data is being searched there?
> 
> Otis
> 
> 
> --- Monsur Hossain <monsur@xanga.net> wrote:
> 
> > Hey all.  We just relaunched our search feature over here at 
> > Xanga.com; the Blogs, Metros and Blogrings sections are powered by 
> > Lucene.NET!  You can
> > check it out here:
> > 
> > http://search.xanga.com/
> > 
> > This is only the beginning of what we want to do with search and 
> > Lucene.  I want to thank everyone on this list for all the 
> help over 
> > the months.  Its
> > great to see a project like Lucene thriving!
> > 
> > Monsur
> > 
> > 
> > 
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 04:42:12 2005
Return-Path: <java-user-return-16037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91134 invoked from network); 25 Aug 2005 04:42:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 04:42:12 -0000
Received: (qmail 74353 invoked by uid 500); 25 Aug 2005 04:42:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74325 invoked by uid 500); 25 Aug 2005 04:42:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74312 invoked by uid 99); 25 Aug 2005 04:42:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 21:42:08 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [163.231.12.68] (HELO mailout-tlr.thomson.com) (163.231.12.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Aug 2005 21:42:24 -0700
Received: from mailout-tlr.thomson.com (localhost [127.0.0.1])
	by mailout-tlr.thomson.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id j7P4g5o0010969
	for <java-user@lucene.apache.org>; Thu, 25 Aug 2005 04:42:05 GMT
Received: from tlrusmneagfe01.ERF.THOMSON.COM (tlrusmneagfe01.erf.thomson.com [163.231.22.161])
	by mailout-tlr.thomson.com (Switch-3.1.4/Switch-3.1.0) with ESMTP id j7P4g4ik010964
	for <java-user@lucene.apache.org>; Thu, 25 Aug 2005 04:42:05 GMT
Received: from TLRUSMNEAGMBX12.ERF.THOMSON.COM ([163.231.30.193]) by tlrusmneagfe01.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.211);
	 Wed, 24 Aug 2005 23:42:25 -0500
x-mimeole: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C5A92F.64E34AA1"
Subject: Phrase frequency
Date: Wed, 24 Aug 2005 23:40:14 -0500
Message-ID: <91FEAABA260526469EF505043DBF3DA2A57869@TLRUSMNEAGMBX12.ERF.THOMSON.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <91FEAABA260526469EF505043DBF3DA2A57869@TLRUSMNEAGMBX12.ERF.THOMSON.COM>
Thread-Topic: Phrase frequency
Thread-Index: AcWpKKnT3yYkaAK6TzWrtNshQqFAVwABmw64
From: <Ravikumar.Kondadadi@thomson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Aug 2005 04:42:25.0539 (UTC) FILETIME=[63F38D30:01C5A92F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5A92F.64E34AA1
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

How can I get phrase frequency in an index? termDocs/termPositions in =
IndexReader work only with words=20
=20
Thanks
Ravi.
=20


------_=_NextPart_001_01C5A92F.64E34AA1
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C5A92F.64E34AA1--

From java-user-return-16038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 07:36:06 2005
Return-Path: <java-user-return-16038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38520 invoked from network); 25 Aug 2005 07:36:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 07:36:06 -0000
Received: (qmail 35153 invoked by uid 500); 25 Aug 2005 07:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34572 invoked by uid 500); 25 Aug 2005 07:35:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34557 invoked by uid 99); 25 Aug 2005 07:35:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 00:35:59 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 00:36:15 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7P7Zt4n019314
	for <java-user@lucene.apache.org>; Thu, 25 Aug 2005 09:35:55 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Thinking about better highlighting
Date: Thu, 25 Aug 2005 09:35:55 +0200
User-Agent: KMail/1.5.4
References: <6.2.3.4.2.20050824222105.0680ad38@fast.synernet.com>
In-Reply-To: <6.2.3.4.2.20050824222105.0680ad38@fast.synernet.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508250935.55283.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 25 August 2005 04:47, Fred Toth wrote:
> All,
> 
> First, my thanks to those who've contributed to the current
> best practices for highlighting. We use your code!
> 
> However, after reviewing recent discussions about highlighting,
> and struggling with our own highlighting issues, I'm wondering if
> there's a better way.
> 
> Others have certainly thought more about this (but I've thought
> about it a lot).
> 
> Isn't it true that the fundamental problem is that all of the highlighting
> approaches are struggling with trying to recreate what the lucene core
> has already done at search time?

Because storing those results takes memory, and most of these results
would not be needed lateron. In Lucene only the score is kept during
search, and then only when it is high enough.
One could extend the search core to keep only the highlighting info of
these higher scoring docs, but that would slow down searching.

> 
> My simplest example is a phrase query, "brown fox". Why should we
> have to attempt to simulate what lucene does in the highlighting code?
> There are several attempts out there to solve this using various approaches,
> span queries, custom hacks, etc., but all suffer from the same problem.
> Namely, it's a lot of difficult work to correctly find the same terms 
> in the highlighting
> code that lucene has already found moments before. So we end up
> highlighting "brown" and "fox" wherever they occur, not just the phrase.
> 
> I read with interest the recent discussion of using span queries to search
> a single document to determine phrases, taking into account slop factor, 
etc.
...

Getting PhraseQuery to work as a SpanQuery and as efficiently as it works
now will not be straightforward but it might be possible.
The NearSpansOrdered posted here might be a good starting point:
http://issues.apache.org/bugzilla/show_bug.cgi?id=35823

One approach could be to redo the search, but limited to
the documents to be highlighted, and only gathering the highlight
positions from the Spans during that redone search.
This can be fast when the search was just done and most index info
needed is still cached by the operating system, and has the
advantage that the highlights will be the same as the ones used to
compute the document scores.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 08:04:30 2005
Return-Path: <java-user-return-16039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51429 invoked from network); 25 Aug 2005 08:04:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 08:04:30 -0000
Received: (qmail 68461 invoked by uid 500); 25 Aug 2005 08:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67564 invoked by uid 500); 25 Aug 2005 08:04:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67551 invoked by uid 99); 25 Aug 2005 08:04:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 01:04:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of giulio.cesare@gmail.com designates 64.233.184.192 as permitted sender)
Received: from [64.233.184.192] (HELO wproxy.gmail.com) (64.233.184.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 01:04:43 -0700
Received: by wproxy.gmail.com with SMTP id 71so265112wri
        for <java-user@lucene.apache.org>; Thu, 25 Aug 2005 01:04:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UhbI8ynuzeRLc4lAzEZgKEXZm9xjQQNNbEJeBrGoFAhKyaUuaFFJLJolj0QGJ7bJ6uim9SHo7fppmz/Gq2NDGKW6GxlC/Df1l4bwuI9qca5/nHSuflGi5QMMo4/FEuFo6vriDDUCIy1uXKQmB1anRrXTlgMT8CQPWMAMDRfU84k=
Received: by 10.54.15.23 with SMTP id 23mr1627497wro;
        Thu, 25 Aug 2005 01:04:23 -0700 (PDT)
Received: by 10.54.41.43 with HTTP; Thu, 25 Aug 2005 01:04:23 -0700 (PDT)
Message-ID: <ff737ac305082501041e2366c2@mail.gmail.com>
Date: Thu, 25 Aug 2005 10:04:23 +0200
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Thinking about better highlighting
In-Reply-To: <200508250935.55283.paul.elschot@xs4all.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6.2.3.4.2.20050824222105.0680ad38@fast.synernet.com>
	 <200508250935.55283.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

on our setup, we are using two completely separated processes, one to
search and another to highlight the found documents. Both this
processes are used by other applications through xml-rpc calls.

Our index is used to search the content of an Oracle DB; for this
reason, there are no stored field on the lucene index besides the ID
of the document on the DB schema (not the Lucene docID, but the
primary key of the record of the DB where the document content is
stored).

The ID returned by the lucene search result is used to fetch the
document content from the DB.

When we need to highlight some text, the main application invoke the
highlighter application passing the text of the original query, and
the content of the document.
The highlighter application creates a brand new in memory index, and
indexes the passed document straight away. After indexing the
document, it is able to find the matching text and return the original
text, enhanced with tags matching the text to highlight.

The only requirement for this arrangement to work, is that the
searcher and the highlighter share the same analyzer implementation
with the process that has populated the main index. Otherwise, the
highlighter could be a completely independent application.

Our arrangement is probably not convenient for every use but did work
fine for us.

Hope this helps.

Regards,

Giulio Cesare


On 8/25/05, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Thursday 25 August 2005 04:47, Fred Toth wrote:
> > All,
> >
> > First, my thanks to those who've contributed to the current
> > best practices for highlighting. We use your code!
> >
> > However, after reviewing recent discussions about highlighting,
> > and struggling with our own highlighting issues, I'm wondering if
> > there's a better way.
> >
> > Others have certainly thought more about this (but I've thought
> > about it a lot).
> >
> > Isn't it true that the fundamental problem is that all of the highlight=
ing
> > approaches are struggling with trying to recreate what the lucene core
> > has already done at search time?
>=20
> Because storing those results takes memory, and most of these results
> would not be needed lateron. In Lucene only the score is kept during
> search, and then only when it is high enough.
> One could extend the search core to keep only the highlighting info of
> these higher scoring docs, but that would slow down searching.
>=20
> >
> > My simplest example is a phrase query, "brown fox". Why should we
> > have to attempt to simulate what lucene does in the highlighting code?
> > There are several attempts out there to solve this using various approa=
ches,
> > span queries, custom hacks, etc., but all suffer from the same problem.
> > Namely, it's a lot of difficult work to correctly find the same terms
> > in the highlighting
> > code that lucene has already found moments before. So we end up
> > highlighting "brown" and "fox" wherever they occur, not just the phrase=
.
> >
> > I read with interest the recent discussion of using span queries to sea=
rch
> > a single document to determine phrases, taking into account slop factor=
,
> etc.
> ...
>=20
> Getting PhraseQuery to work as a SpanQuery and as efficiently as it works
> now will not be straightforward but it might be possible.
> The NearSpansOrdered posted here might be a good starting point:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=3D35823
>=20
> One approach could be to redo the search, but limited to
> the documents to be highlighted, and only gathering the highlight
> positions from the Spans during that redone search.
> This can be fast when the search was just done and most index info
> needed is still cached by the operating system, and has the
> advantage that the highlights will be the same as the ones used to
> compute the document scores.
>=20
> Regards,
> Paul Elschot
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 08:27:40 2005
Return-Path: <java-user-return-16040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67993 invoked from network); 25 Aug 2005 08:27:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 08:27:39 -0000
Received: (qmail 94362 invoked by uid 500); 25 Aug 2005 08:27:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94337 invoked by uid 500); 25 Aug 2005 08:27:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94324 invoked by uid 99); 25 Aug 2005 08:27:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 01:27:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.194.158.19] (HELO exchange.bvdep.com) (193.194.158.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 01:27:51 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Document visible by Term, but not search
Date: Thu, 25 Aug 2005 10:27:30 +0200
Message-ID: <950FF7DE40C2B64CAF80B564732927E104810EC9@exchange.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Document visible by Term, but not search
thread-index: AcWpGx7Ug+w1Y9spRKSAbiO7wznFAgAMnHlg
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is your Analyzer aware that that particular field does not need to be
tokenized?

During indexation, if a field is passed that is passed as
tokenize=3Dfalse, the analyzer won't be called so the string will be
stored as-is.

During searching, the queryparser doesn't know which fields should be
tokenized or not and passes them all to your analyzer.

Your analyzer should pass a KeywordTokenizer when asked for a
TokenStream for that field. It passes the entire string as one token.

It's in the contrib area on svn:
See
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/
java/org/apache/lucene/analysis/KeywordTokenizer.java

and
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/
java/org/apache/lucene/analysis/KeywordAnalyzer.java

Something like:
public class MyAnalyzer extends Analyzer {
  public TokenStream tokenStream(String fieldName,
                                 final Reader reader) {
    if (fieldName=3D=3D"myKeywordField") { // fieldNames are "intern"ed =
so
=3D=3D can be used.
      return new KeywordTokenizer(reader);
    } else {
      // original analyzer code...
    }
  }
}

That should also solve the issue in Luke...

Luc


-----Original Message-----
From: Fred Toth [mailto:ftoth@synernet.com]=20
Sent: donderdag 25 augustus 2005 4:18
To: java-user@lucene.apache.org
Subject: Re: Document visible by Term, but not search

Hi Dan,

What's the term? Could this be an analyzer problem? Are you using
the same analyzer for indexing and searching?

Fred

At 09:06 PM 8/24/2005, you wrote:
>I have the following strange behavior for an index. The index has been
>optimized and has no deletions. It's in compound file format.
>
>Using Luke 0.6 I can browse by Term and find my term (ItemId:727680).
It's a
>Keyword field.  It shows a docfreq of this term is 1. It also shows all
the
>document fields including the correct ItemId value. If I build a
TermQuery
>and search for the term I get no results. Similarly, if I click on the
Show
>All Docs button in Luke, I get no results.
>Is my index corrupted? Is there some state or some way of doing a
TermQuery
>search that is making both Luke and my direct query fail?
>
>One thing that makes me suspicious is that the behavior seems to apply
to
>the 4 highest lucene docids (each with there own unique term), but not
>earlier docs (as far as I can tell). There are 14,337 docs in this
index.
>
>Any ideas on what could cause this or how I could construct a search
that
>finds this document?
>
>Thanks,
>Dan
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 08:41:46 2005
Return-Path: <java-user-return-16041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89622 invoked from network); 25 Aug 2005 08:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 08:41:45 -0000
Received: (qmail 12311 invoked by uid 500); 25 Aug 2005 08:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12237 invoked by uid 500); 25 Aug 2005 08:41:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12224 invoked by uid 99); 25 Aug 2005 08:41:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 01:41:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.108.181.138] (HELO quimby.programmfabrik.de) (193.108.181.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 01:41:50 -0700
Received: from [84.188.198.226] (helo=xen)
	by quimby.programmfabrik.de with asmtp (Exim 3.35 #1 (Debian))
	id 1E8C9F-0002D1-00
	for <java-user@lucene.apache.org>; Thu, 25 Aug 2005 09:27:42 +0200
Received: from [192.168.0.222] (helo=[127.0.0.1])
	by xen with esmtp (Exim 4.34 #1 (Debian))
	id 1E8DIY-0004tW-Me
	for <java-user@lucene.apache.org>; Thu, 25 Aug 2005 10:41:22 +0200
Message-ID: <430D8454.8000104@programmfabrik.de>
Date: Thu, 25 Aug 2005 10:41:56 +0200
From: Martin Rode <martin.rode@programmfabrik.de>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Document visible by Term, but not search
References: <950FF7DE40C2B64CAF80B564732927E104810EC9@exchange.be.bvd>
In-Reply-To: <950FF7DE40C2B64CAF80B564732927E104810EC9@exchange.be.bvd>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can also use the

PerFieldAnalyzerWrapper to search in KeywordFields using QueryParser.

Best,
Martin


Vanlerberghe, Luc wrote:

>Is your Analyzer aware that that particular field does not need to be
>tokenized?
>
>During indexation, if a field is passed that is passed as
>tokenize=false, the analyzer won't be called so the string will be
>stored as-is.
>
>During searching, the queryparser doesn't know which fields should be
>tokenized or not and passes them all to your analyzer.
>
>Your analyzer should pass a KeywordTokenizer when asked for a
>TokenStream for that field. It passes the entire string as one token.
>
>It's in the contrib area on svn:
>See
>http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/
>java/org/apache/lucene/analysis/KeywordTokenizer.java
>
>and
>http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/
>java/org/apache/lucene/analysis/KeywordAnalyzer.java
>
>Something like:
>public class MyAnalyzer extends Analyzer {
>  public TokenStream tokenStream(String fieldName,
>                                 final Reader reader) {
>    if (fieldName=="myKeywordField") { // fieldNames are "intern"ed so
>== can be used.
>      return new KeywordTokenizer(reader);
>    } else {
>      // original analyzer code...
>    }
>  }
>}
>
>That should also solve the issue in Luke...
>
>Luc
>
>
>-----Original Message-----
>From: Fred Toth [mailto:ftoth@synernet.com] 
>Sent: donderdag 25 augustus 2005 4:18
>To: java-user@lucene.apache.org
>Subject: Re: Document visible by Term, but not search
>
>Hi Dan,
>
>What's the term? Could this be an analyzer problem? Are you using
>the same analyzer for indexing and searching?
>
>Fred
>
>At 09:06 PM 8/24/2005, you wrote:
>  
>
>>I have the following strange behavior for an index. The index has been
>>optimized and has no deletions. It's in compound file format.
>>
>>Using Luke 0.6 I can browse by Term and find my term (ItemId:727680).
>>    
>>
>It's a
>  
>
>>Keyword field.  It shows a docfreq of this term is 1. It also shows all
>>    
>>
>the
>  
>
>>document fields including the correct ItemId value. If I build a
>>    
>>
>TermQuery
>  
>
>>and search for the term I get no results. Similarly, if I click on the
>>    
>>
>Show
>  
>
>>All Docs button in Luke, I get no results.
>>Is my index corrupted? Is there some state or some way of doing a
>>    
>>
>TermQuery
>  
>
>>search that is making both Luke and my direct query fail?
>>
>>One thing that makes me suspicious is that the behavior seems to apply
>>    
>>
>to
>  
>
>>the 4 highest lucene docids (each with there own unique term), but not
>>earlier docs (as far as I can tell). There are 14,337 docs in this
>>    
>>
>index.
>  
>
>>Any ideas on what could cause this or how I could construct a search
>>    
>>
>that
>  
>
>>finds this document?
>>
>>Thanks,
>>Dan
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>    
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 09:11:52 2005
Return-Path: <java-user-return-16042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12687 invoked from network); 25 Aug 2005 09:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 09:11:52 -0000
Received: (qmail 43873 invoked by uid 500); 25 Aug 2005 09:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43021 invoked by uid 500); 25 Aug 2005 09:11:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43005 invoked by uid 99); 25 Aug 2005 09:11:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 02:11:47 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.221] (HELO web26010.mail.ukl.yahoo.com) (217.12.10.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Aug 2005 02:12:02 -0700
Received: (qmail 72917 invoked by uid 60001); 25 Aug 2005 09:11:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=xZfyqXhMi+tn3ZHoGp2hLocPBUlrETjYN5lDBGi5tuSp2N6myVuCqDxnI3MaNhUei/CsarM0O2VzHNetwpEBACQm74Flx2CWEWE7B+xOIXt6q4ZS9u9xu0YedvoSvxDdrZGaZs54bzXOE3ej5A5hbryd5pcx/v6RPTX1sOjTtso=  ;
Message-ID: <20050825091141.72915.qmail@web26010.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26010.mail.ukl.yahoo.com via HTTP; Thu, 25 Aug 2005 10:11:41 BST
Date: Thu, 25 Aug 2005 10:11:41 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Thinking about better highlighting
To: java-user@lucene.apache.org
In-Reply-To: <6.2.3.4.2.20050824222105.0680ad38@fast.synernet.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Unfortunately I've not had the time to address the
phrase highlighting issues in the current highlighter
but I think I've an idea as to how best to fix it:

I would suggest rewriting the highlighter to use Spans
not Terms to find the relevant sections in a text.
Most of the code required for such a solution is
around in one form or another but needs bringing
together:

* The SpansExtractor class here:
http://issues.apache.org/bugzilla/show_bug.cgi?id=35518
This can be used to get Spans for a given query and
IndexReader to show where all query hits for a
document lie.

* The contrib section includes a MemoryIndex that can
provide a fast IndexReader for a single document
(faster than using RAMDirectory).

* The LuceneInAction code example for SpanQueries
includes a rudimentary highlighter that uses Spans to
control where markup is introduced given a collection
of Spans (This does not attempt to summarise long docs
however).


The overall approach using this code would be to index
each doc to be highlighted in MemoryIndex, run
SpansExtractor using the (rewritten) user query and
the MemoryIndex's IndexReader, give the resulting
spans to an adapted LIA highlighter/summariser.

Some issues with this:
1) The contrib section would now have inter-project
dependencies (highlighter -> MemIndex) which would
need to be catered for in the Ant build process.
2) We may need to think about how we factor in IDF
weighting of individual terms to the summarising
process so that the more important terms influence the
selection of highlights.


Does this sound reasonable?





		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 10:45:32 2005
Return-Path: <java-user-return-16043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45289 invoked from network); 25 Aug 2005 10:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 10:45:31 -0000
Received: (qmail 71970 invoked by uid 500); 25 Aug 2005 10:45:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71952 invoked by uid 500); 25 Aug 2005 10:45:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 36214 invoked by uid 99); 25 Aug 2005 09:00:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of burtonator@gmail.com designates 64.233.162.197 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=scCLq+MFFYb0z+ccqrOKkunlkrVw3V71rLYIXhtDyunnR0W7BfQpol4KskToVYNRkeAzZ/8s64mTTk+sY10isgjZHxuWTkh2hjfYEcZqJgNU4qvdjr6XrRDKo6AyeJne+uEIb0UhrLIEjcpma493WjMWUw5CjKWpNrqKTE5GuLo=
Message-ID: <30c6373b05082502001a95a242@mail.gmail.com>
Date: Thu, 25 Aug 2005 02:00:38 -0700
From: Kevin Burton <burtonator@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and Xanga.com
In-Reply-To: <004101c5a928$961f3220$0200a8c0@woodbridge>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050824045105.87921.qmail@web31114.mail.mud.yahoo.com>
	 <004101c5a928$961f3220$0200a8c0@woodbridge>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 8/24/05, Monsur Hossain <monsur@monsur.com> wrote:
>=20
> Otis, we've been continually impressed with the performance of Lucene.
> We've been ever increasing the load we are putting on it (from our small
> help section, to our slightly larger metros, to our big groups, and then
> our gigantic weblogs), and it has meet each of these challenges
> wonderfully.
>=20
> We are currently indexing only a few weeks worth of data (about a 6.5
> gig index)..  I think we can increase that even more and over the next

I've only found Lucene to fall down when optimizing REALLY huge
indexes like 300G or so.  Then you run out of available system memory
(4G on 32bit machines) and you hit disk.  Then it starts to take weeks
to optimize :-)

Of course you coudl use multiple machines or get more memory. =20

Kevin

--=20
 Kevin A. Burton, Location - San Francisco, CA
      AIM/YIM - sfburtonator,  Web - http://www.feedblog.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 11:42:54 2005
Return-Path: <java-user-return-16044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65494 invoked from network); 25 Aug 2005 11:42:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 11:42:54 -0000
Received: (qmail 47554 invoked by uid 500); 25 Aug 2005 11:42:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47248 invoked by uid 500); 25 Aug 2005 11:42:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47232 invoked by uid 500); 25 Aug 2005 11:42:48 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 47228 invoked by uid 99); 25 Aug 2005 11:42:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 04:42:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.32.221.50] (HELO mail.lou.emergint.com) (64.32.221.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 04:43:05 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5A96A.1BE4C91D"
Subject: Serialized Java Objects
Date: Thu, 25 Aug 2005 07:42:50 -0400
Message-ID: <6C1FF371E2319F45BABA49F9BA1BD0391B28E1@mail.lou.emergint.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Serialized Java Objects
Thread-Index: AcWpah8yAaFeGyg1Q+SMw+NuRhGUAg==
From: "Kevin L. Cobb" <kevin.cobb@emergint.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5A96A.1BE4C91D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I just had a thought this morning. Does Lucene have the ability to store
Serialized Java Objects for return during a search. I was thinking that
this would be a nifty way to package up all of the return values for a
search. Of course, I wouldn't expect the serialized objects would not be
searchable.=20
=20
Thanks,
=20
-Kevin
=20
=20

------_=_NextPart_001_01C5A96A.1BE4C91D--

From java-user-return-16045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 13:47:58 2005
Return-Path: <java-user-return-16045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18087 invoked from network); 25 Aug 2005 13:47:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 13:47:58 -0000
Received: (qmail 73730 invoked by uid 500); 25 Aug 2005 13:47:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73709 invoked by uid 500); 25 Aug 2005 13:47:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73696 invoked by uid 99); 25 Aug 2005 13:47:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 06:47:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO rproxy.gmail.com) (64.233.170.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 06:48:07 -0700
Received: by rproxy.gmail.com with SMTP id 1so85040rny
        for <java-user@lucene.apache.org>; Thu, 25 Aug 2005 06:47:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YEfQYL1s8cX1uhNZ+unEU2bvJbrHoW8kR0kHdubout58VhXb9wDZjOaArBeuPWFWDd/Vv7N4oc5xazFBMQxPmTpeyzcvXCUYbGh787xTFZ/au6MYo5nNlc0Y4LIzuLB1avrIRVwlZ+RU5ZDP6Jz6BX51WtTvmPbDx8Xc0NiDYOU=
Received: by 10.38.95.10 with SMTP id s10mr52240rnb;
        Thu, 25 Aug 2005 06:47:48 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Thu, 25 Aug 2005 06:47:48 -0700 (PDT)
Message-ID: <7ca1239105082506473241eb73@mail.gmail.com>
Date: Thu, 25 Aug 2005 06:47:48 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Serialized Java Objects
In-Reply-To: <6C1FF371E2319F45BABA49F9BA1BD0391B28E1@mail.lou.emergint.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6C1FF371E2319F45BABA49F9BA1BD0391B28E1@mail.lou.emergint.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I don't think by default it does so. But, you can certainly serialize
the java object and use base 64 to encode it into a text string, then,
you can store it as a field.

Cheers,

Jian

On 8/25/05, Kevin L. Cobb <kevin.cobb@emergint.com> wrote:
> I just had a thought this morning. Does Lucene have the ability to store
> Serialized Java Objects for return during a search. I was thinking that
> this would be a nifty way to package up all of the return values for a
> search. Of course, I wouldn't expect the serialized objects would not be
> searchable.
>=20
> Thanks,
>=20
> -Kevin
>=20
>=20
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 15:21:29 2005
Return-Path: <java-user-return-16046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55352 invoked from network); 25 Aug 2005 15:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 15:21:29 -0000
Received: (qmail 72197 invoked by uid 500); 25 Aug 2005 15:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72166 invoked by uid 500); 25 Aug 2005 15:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72153 invoked by uid 99); 25 Aug 2005 15:21:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 08:21:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [205.152.59.64] (HELO imf16aec.mail.bellsouth.net) (205.152.59.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 08:21:38 -0700
Received: from ibm56aec.bellsouth.net ([65.12.150.225])
          by imf16aec.mail.bellsouth.net with ESMTP
          id <20050825152119.JSBX25946.imf16aec.mail.bellsouth.net@ibm56aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Thu, 25 Aug 2005 11:21:19 -0400
Received: from w2ks.synernet.com ([65.12.150.225])
          by ibm56aec.bellsouth.net with ESMTP
          id <20050825152119.NZOX17065.ibm56aec.bellsouth.net@w2ks.synernet.com>
          for <java-user@lucene.apache.org>;
          Thu, 25 Aug 2005 11:21:19 -0400
Message-Id: <6.2.3.4.2.20050825095248.0674e6d0@fast.synernet.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4
Date: Thu, 25 Aug 2005 11:22:05 -0400
To: java-user@lucene.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: Re: Thinking about better highlighting
In-Reply-To: <20050825091141.72915.qmail@web26010.mail.ukl.yahoo.com>
References: <6.2.3.4.2.20050824222105.0680ad38@fast.synernet.com>
 <20050825091141.72915.qmail@web26010.mail.ukl.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Based on this discussion, I've gone back and re-read everything
in LIA on SpanQuery, etc.

Isn't this just another manifestation of the same problem? How
do I reliably, correctly convert an arbitrary lucene query into its
equivalent SpanQuery?

Here's one, for example:

+text:"jurassic barnea" +author:zofer +year:[1987 TO 1987]

As you can imagine, ideally I would like to display the document with
the phrase highlighted, the author name highlighted and the year
highlighted.

Am I correct that there is no simple mechanism to get from the
above "standard" lucene query to a SpanQuery that can give me
the offsets of the terms that actually matched? I'm forced to
pick apart the query, essentially reparse it with a different methodology
to get "close" to what lucene has already done?

Even if I could reliably convert a standard phrase query to a
SpanQuery, that's just the tip of the iceberg, right? What about prefix
queries, complex booleans, etc. Is this a slippery slope?

Isn't it true that lucene has already identified (somewhere) exactly which
occurrences of "jurassic" and "barnea" caused the phrase match?
I like the idea of reindexing and requerying the matched ducument at
highlight time, but I'm still lost on how to convert everything to SpanQuery
variants.

Or am I missing something here (always a distinct possibility)?

Thanks,

Fred

At 05:11 AM 8/25/2005, you wrote:
>Unfortunately I've not had the time to address the
>phrase highlighting issues in the current highlighter
>but I think I've an idea as to how best to fix it:
>
>I would suggest rewriting the highlighter to use Spans
>not Terms to find the relevant sections in a text.
>Most of the code required for such a solution is
>around in one form or another but needs bringing
>together:
>
>* The SpansExtractor class here:
>http://issues.apache.org/bugzilla/show_bug.cgi?id=35518
>This can be used to get Spans for a given query and
>IndexReader to show where all query hits for a
>document lie.
>
>* The contrib section includes a MemoryIndex that can
>provide a fast IndexReader for a single document
>(faster than using RAMDirectory).
>
>* The LuceneInAction code example for SpanQueries
>includes a rudimentary highlighter that uses Spans to
>control where markup is introduced given a collection
>of Spans (This does not attempt to summarise long docs
>however).
>
>
>The overall approach using this code would be to index
>each doc to be highlighted in MemoryIndex, run
>SpansExtractor using the (rewritten) user query and
>the MemoryIndex's IndexReader, give the resulting
>spans to an adapted LIA highlighter/summariser.
>
>Some issues with this:
>1) The contrib section would now have inter-project
>dependencies (highlighter -> MemIndex) which would
>need to be catered for in the Ant build process.
>2) We may need to think about how we factor in IDF
>weighting of individual terms to the summarising
>process so that the more important terms influence the
>selection of highlights.
>
>
>Does this sound reasonable?
>
>
>
>
>
>
>___________________________________________________________
>To help you stay safe and secure online, we've developed the all new 
>Yahoo! Security Centre. http://uk.security.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 25 15:53:16 2005
Return-Path: <java-user-return-16047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68589 invoked from network); 25 Aug 2005 15:53:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Aug 2005 15:53:16 -0000
Received: (qmail 21745 invoked by uid 500); 25 Aug 2005 15:53:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21724 invoked by uid 500); 25 Aug 2005 15:53:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21711 invoked by uid 99); 25 Aug 2005 15:53:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 08:53:10 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Aug 2005 08:53:26 -0700
Received: (qmail 83380 invoked by uid 60001); 25 Aug 2005 15:53:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=cPlwQlkpWVPnwyc0SZj6Nj/wKXO/2HUXGUVjrdheTEm1b1zpTxVwVflo0eGf1ia0qJC8BQihLLqRYPg79hVhPqnDmXBFG27jNOJIWeMIMqmlQiXy7nuO6+x4SjwwOkIbbd57eZ4X3YcMNikV6b2yVpaueviZXvj2lSgr6nuDzfg=  ;
Message-ID: <20050825155306.83378.qmail@web26001.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Thu, 25 Aug 2005 16:53:06 BST
Date: Thu, 25 Aug 2005 16:53:06 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Thinking about better highlighting
To: java-user@lucene.apache.org
In-Reply-To: <6.2.3.4.2.20050825095248.0674e6d0@fast.synernet.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>> but I'm still lost on how to convert
> everything to SpanQuery
> variants.

See the QuerySpansExtractor I linked to here:
http://issues.apache.org/bugzilla/show_bug.cgi?id=35518

This uses SpanTermQuery for individual TermQuerys. As
for all of the other query types eg fuzzy, prefix,
range etc these are always rewritten to TermQuerys
anyway (using Query.rewrite(reader)) so passing
re-written queries to the highlighter solves all these
issues. That has always been the advice in using the
existing term-based highlighter. This would also be
required when calling any new span-based highlighter.




		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 07:02:56 2005
Return-Path: <java-user-return-16048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31880 invoked from network); 26 Aug 2005 07:02:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 07:02:55 -0000
Received: (qmail 67340 invoked by uid 500); 25 Aug 2005 23:57:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66711 invoked by uid 500); 25 Aug 2005 23:57:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66698 invoked by uid 99); 25 Aug 2005 23:57:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 16:57:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of david.medinets@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 16:57:28 -0700
Received: by xproxy.gmail.com with SMTP id h33so190437wxd
        for <java-user@lucene.apache.org>; Thu, 25 Aug 2005 16:57:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=p5Ak2sZyJqDT9BzOD+e5sAD1Cyrg/mSRSEicTt4+/culty/U97D8C9BsPAOovccpGgbAh6YXXR47/wsf2pbgGJN51MhC8ge1GGhH76saiPbq0Ec6BuuVdsmzJ+KNDwF24OzYNkzQWkijMKw/ZuO4+N5e8pbZkpDGNJkCM+RubhY=
Received: by 10.70.57.3 with SMTP id f3mr81286wxa;
        Thu, 25 Aug 2005 16:57:09 -0700 (PDT)
Received: by 10.70.57.2 with HTTP; Thu, 25 Aug 2005 16:57:09 -0700 (PDT)
Message-ID: <e6281ffe0508251657635581e3@mail.gmail.com>
Date: Thu, 25 Aug 2005 19:57:09 -0400
From: David Medinets <david.medinets@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Serialized Java Objects
In-Reply-To: <6C1FF371E2319F45BABA49F9BA1BD0391B28E1@mail.lou.emergint.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6C1FF371E2319F45BABA49F9BA1BD0391B28E1@mail.lou.emergint.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I believe that Java 1.4 and 1.5 can serialize and deserialize objects
directly to XML. Therefore you can store the XML directly into Lucene
as an unindexed field. You could also use one of the XML analyzers to
parse and index the fields.

On 8/25/05, Kevin L. Cobb <kevin.cobb@emergint.com> wrote:
> I just had a thought this morning. Does Lucene have the ability to store
> Serialized Java Objects for return during a search.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 08:31:43 2005
Return-Path: <java-user-return-16049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34667 invoked from network); 26 Aug 2005 08:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 08:31:43 -0000
Received: (qmail 24965 invoked by uid 500); 26 Aug 2005 08:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18850 invoked by uid 500); 26 Aug 2005 08:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16560 invoked by uid 99); 26 Aug 2005 08:27:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 01:27:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Aug 2005 20:59:40 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1E8VPJ-000Dgz-N1
	for java-user@lucene.apache.org; Thu, 25 Aug 2005 21:01:33 -0700
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <6.2.3.4.2.20050824222105.0680ad38@fast.synernet.com>
References: <6.2.3.4.2.20050824222105.0680ad38@fast.synernet.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <074F305A-1C59-4DFE-8903-30089C7993FA@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: Thinking about better highlighting
Date: Thu, 25 Aug 2005 20:59:20 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 24, 2005, at 7:47 PM, Fred Toth wrote:
> However, after reviewing recent discussions about highlighting,
> and struggling with our own highlighting issues, I'm wondering if
> there's a better way.

Here's one way.  This is the algo used by a developer's version of my  
Perl/C search engine library Kinosearch, which is on hold in Alpha  
while I have a go at optimizing Plucene.

Every ResultSet is an object which keeps track of document numbers,  
scores, and positions.

When two ResultSets are merged, the positions associated with  
document 1 in ResultSet A and the positions associated with the same  
document 1 in ResultSet B are merged into a single array.

Positions are used by the phrase matching engine while two ResultSets  
with a phrase relationship are being merged.  In the resulting merged  
ResultSet, positions which didn't take part in a phrase match will  
have been filtered out.

[I can build an ascii illustration of this if it isn't clear.]

Conveniently, when we arrive at a final result set, each document is  
associated with an array of positions.  If a search term wasn't part  
of a phrase query, then all the positions it occurred in are  
represented.  If a term was part of a phrase query, only the  
positions that were part of a phrase match are represented.

Next, Kinosearch builds an array of actual token start offsets  
(measured in characters) in the target document. (The start offsets  
are stored using delta encoding alongside stored fields at index- 
time).  The start offsets which represent matched terms are extracted  
out into an array.  Each position is assigned a score based on its  
distance to other positions within a limited range (using an inverse  
log formula).  The position with the highest score determines where  
the excerpt will be taken from.

Since we know the token start offsets, it's trivial to insert the  
highlight tags.

The downside of this approach is that it's quite expensive to load  
and keep track of all those positions during set merging.  The  
upsides are that it is unnecessary to load the full analysis  
apparatus, it works fine with stemmed words, and there's no need to  
go back to retrieve positions from disk later.  The larger your  
index, the more the downsides outweigh the upsides, because the work  
necessary to process the increasing number of positions grows  
linearly with index size, while the amount of work to perform post- 
search analysis on matched documents stays constant.

It occurs to me that a hybrid approach may be possible which  
addresses the phrase-matching conundrum.  I'm not yet familiar with  
the guts of Lucene's searching, but from a high level it looks  
similar, so this might work...

Keep track of positions matched during phrase-matching.  Use those  
for highlighting terms which are part of the phrase match.  Use post- 
search analysis for highlighting anything that isn't part of a phrase.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 13:55:45 2005
Return-Path: <java-user-return-16050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79265 invoked from network); 26 Aug 2005 13:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 13:55:45 -0000
Received: (qmail 10175 invoked by uid 500); 26 Aug 2005 13:55:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10157 invoked by uid 500); 26 Aug 2005 13:55:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10143 invoked by uid 99); 26 Aug 2005 13:55:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 06:55:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Aug 2005 06:55:54 -0700
Received: (qmail 18136 invoked by uid 0); 26 Aug 2005 13:55:35 -0000
Received: from 193.63.235.44 by www58.gmx.net with HTTP;
	Fri, 26 Aug 2005 15:55:35 +0200 (MEST)
Date: Fri, 26 Aug 2005 15:55:35 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?Re:_Books_about_Lucene=3F?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <9893.1125064535@www58.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Otis,

I do agree with Otis that somebody, preferably Erik, would provide a more
detailed list of reasons why 1.3 does not run on Java 1.2. This list could
then be used by others to adapt the code of version 1.3+ in order to make it
run for their individual purposes (if this is necessary). 

The information provided in the CHANGES file is a good start but I am sure
some more information on the technical side would help (e.g. classes and
methods effected, changed in data structures, etc.).

I think Erik would perhaps be in the best position to do that since he knows
all the insides of this excellent piece of Open Source - almost everybody of
us whould spend months to find out what he already knows.

Kind Regards,
Karl


> --- Ursprngliche Nachricht ---
> Von: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> An: Erik Hatcher <erik@ehatchersolutions.com>, Karl Koch
> <TheRanger@gmx.net>
> Betreff: Re: Books about Lucene?
> Datum: Thu, 18 Aug 2005 12:49:16 -0700 (PDT)
> 
> I was going to suggest the same!  I'd love it if we could cover Lucene
> on a PDA in the next edition of Lucene in Action.
> 
> Btw., you should write to lucene-user and say why you can't go with
> 1.4.3 or 1.9 versions.  What changed since Lucene 1.2 that prevents you
> >from using the latest version?  I think you should share that on
> lucene-user list.
> 
> Otis
> 
> 
> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:
> 
> > Karl,
> > 
> > Thanks for your feedback!
> > 
> > Maybe you'd be up for contributing a section on Lucene on mobile  
> > devices for LIA 2.0?  :)  I have no experience with it myself, and  
> > wish I could help with your Lucene 1.2 woes, but I came into Lucene  
> > myself with 1.3 and up.
> > 
> >      Erik
> > 
> > On Aug 18, 2005, at 1:42 PM, Karl Koch wrote:
> > 
> > > Hello Erik,
> > >
> > > I find "Lucene in Action" an extemely well written and easy  
> > > accessable book
> > > and I must say: Well done (including of course everybody who  
> > > participated to
> > > the book).
> > >
> > > Naturally the book is very strong on the latest version on Lucene.
> > I
> > > currently, and you may have realised that on all my other postings,
> >  
> > > have the
> > > problem that I cannot go for the latest version due to hardware  
> > > limitations
> > > in mobile computing. I think I am not alone. I think it would be  
> > > great to
> > > have articles on how to run Lucene on small footprint devices such 
> > 
> > > as Java
> > > enabled PDAs or even MIDP on mobile phones. I am not really  
> > > convinced that
> > > this shouild go in a book such a LIA but I am sure there is a  
> > > demand to know
> > > about how to do such things.
> > >
> > > There are certainly people out there that want to try out more IR  
> > > intensic
> > > stuff with Lucene. This is, for a good reason, not addressed in the
> >  
> > > book. I
> > > think it would be good to have perhaps some in-deep information on 
> > 
> > > Lucene
> > > available that goes into this direction. I am not sure if I am  
> > > talking about
> > > another book here or if this could be some sort of appendix  
> > > chapters in the
> > > next LIA. Since you are an IR expert, it could actually be a great 
> > 
> > > idea to
> > > write an IR book for Students in Information Science and
> > Information
> > > Retrieval with Lucene as the tool used for examples (like you find
> > > statistical books with SPSS examples).
> > >
> > > Karl
> > >
> > >
> > >> --- Ursprngliche Nachricht ---
> > >> Von: Erik Hatcher <erik@ehatchersolutions.com>
> > >> An: java-user@lucene.apache.org
> > >> Betreff: Re: Books about Lucene?
> > >> Datum: Wed, 17 Aug 2005 20:28:09 -0400
> > >>
> > >> On Aug 17, 2005, at 2:49 PM, Karl Koch wrote:
> > >>
> > >>> Are there any other books (despite "Lucene in Action") perhaps
> > >>> written in a
> > >>> different perspective (e.g. different applications or problem  
> > >>> areas)?
> > >>>
> > >>
> > >> To echo what Otis said - I don't know of any myself.
> > >>
> > >> I'd be very interested to hear yours, and others, thoughts on what
> > >> Lucene in Action 2nd edition should add/remove to its coverage.
> > >> There are lots of topics that I've researched and worked on since
> > >> that book that I think make sense to add, but community feedback
> > will
> > >> decide ultimately how LIA 2.0 unfolds.
> > >>
> > >>      Erik
> > >>
> > >>
> > >>
> > ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > > -- 
> > > GMX DSL = Maximale Leistung zum minimalen Preis!
> > > 2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/ 
> > > de/go/dsl
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > 
> > 
> 

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 15:25:55 2005
Return-Path: <java-user-return-16051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16135 invoked from network); 26 Aug 2005 15:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 15:25:55 -0000
Received: (qmail 86084 invoked by uid 500); 26 Aug 2005 15:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86058 invoked by uid 500); 26 Aug 2005 15:25:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86045 invoked by uid 99); 26 Aug 2005 15:25:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 08:25:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Aug 2005 08:26:05 -0700
Received: (qmail 9150 invoked by uid 0); 26 Aug 2005 15:25:46 -0000
Received: from 193.63.235.44 by www41.gmx.net with HTTP;
	Fri, 26 Aug 2005 17:25:46 +0200 (MEST)
Date: Fri, 26 Aug 2005 17:25:46 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: "User " <java-user@lucene.apache.org>
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?Lucene_in_IR_Research?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <23694.1125069946@www41.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I would like to know about papers that where written and used Lucene as the
unerlying search engine. E.g. Lucene as baseline search engine and some
modifications to compare it with baseline Lucene system etc.

Please provide links to published papers if possible.

Kind regards,
Karl

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 15:41:18 2005
Return-Path: <java-user-return-16052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21154 invoked from network); 26 Aug 2005 15:41:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 15:41:18 -0000
Received: (qmail 14664 invoked by uid 500); 26 Aug 2005 15:41:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14640 invoked by uid 500); 26 Aug 2005 15:41:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14616 invoked by uid 99); 26 Aug 2005 15:41:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 08:41:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [205.152.59.73] (HELO imf25aec.mail.bellsouth.net) (205.152.59.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 08:41:28 -0700
Received: from ibm68aec.bellsouth.net ([65.12.150.225])
          by imf24aec.mail.bellsouth.net with ESMTP
          id <20050826153325.EPBV12559.imf24aec.mail.bellsouth.net@ibm68aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Fri, 26 Aug 2005 11:33:25 -0400
Received: from w2ks.synernet.com ([65.12.150.225])
          by ibm68aec.bellsouth.net with ESMTP
          id <20050826153324.FISQ27902.ibm68aec.bellsouth.net@w2ks.synernet.com>
          for <java-user@lucene.apache.org>;
          Fri, 26 Aug 2005 11:33:24 -0400
Message-Id: <6.2.3.4.2.20050826112908.0704dff8@fast.synernet.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4
Date: Fri, 26 Aug 2005 11:34:02 -0400
To: java-user@lucene.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: Re: Thinking about better highlighting
In-Reply-To: <20050825155306.83378.qmail@web26001.mail.ukl.yahoo.com>
References: <6.2.3.4.2.20050825095248.0674e6d0@fast.synernet.com>
 <20050825155306.83378.qmail@web26001.mail.ukl.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Mark for your pointers. I'm deep into this, trying to wire
something up.

Am I right that the MemoryIndex with getReader() is not available
anywhere at this point?

Thanks,

Fred

At 11:53 AM 8/25/2005, mark harwood wrote:
> >> but I'm still lost on how to convert
> > everything to SpanQuery
> > variants.
>
>See the QuerySpansExtractor I linked to here:
>http://issues.apache.org/bugzilla/show_bug.cgi?id=35518
>
>This uses SpanTermQuery for individual TermQuerys. As
>for all of the other query types eg fuzzy, prefix,
>range etc these are always rewritten to TermQuerys
>anyway (using Query.rewrite(reader)) so passing
>re-written queries to the highlighter solves all these
>issues. That has always been the advice in using the
>existing term-based highlighter. This would also be
>required when calling any new span-based highlighter.
>
>
>
>
>
>___________________________________________________________
>How much free photo storage do you get? Store your holiday
>snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 15:42:14 2005
Return-Path: <java-user-return-16053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21295 invoked from network); 26 Aug 2005 15:42:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 15:42:13 -0000
Received: (qmail 15901 invoked by uid 500); 26 Aug 2005 15:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15871 invoked by uid 500); 26 Aug 2005 15:42:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15853 invoked by uid 99); 26 Aug 2005 15:42:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 08:42:08 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.34] (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Aug 2005 08:42:25 -0700
Received: (qmail 37542 invoked by uid 60001); 26 Aug 2005 15:42:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=JIMBLjZ6m+Xbuc/aV/u8NqxrfUNhb85ddrdJ+tfE6H6ZVDhf1nzw+5rFPrb2kFsL1koFqZRG8eo+CLcaNrguDl4jb8RwldFmfQLZpaFhbh+fZ384ovUs9mYQJ4viSCphOiQazhJ12cvVr++eUxmBmIUZYwFKlx/XvPUacqi3DOk=  ;
Message-ID: <20050826154206.37540.qmail@web31101.mail.mud.yahoo.com>
Received: from [69.201.142.21] by web31101.mail.mud.yahoo.com via HTTP; Fri, 26 Aug 2005 08:42:05 PDT
Date: Fri, 26 Aug 2005 08:42:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene in IR Research
To: java-user@lucene.apache.org
In-Reply-To: <23694.1125069946@www41.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Karl,

A good place to start would be a list of Doug Cuttin's papers.  We have
a list of them in Appendix C, section C.9 of Lucene in Action, but the
list is also available online (don't have the URL, but I'm sure Google
has it indexed).

Otis


--- Karl Koch <TheRanger@gmx.net> wrote:

> Hello all,
> 
> I would like to know about papers that where written and used Lucene
> as the
> unerlying search engine. E.g. Lucene as baseline search engine and
> some
> modifications to compare it with baseline Lucene system etc.
> 
> Please provide links to published papers if possible.
> 
> Kind regards,
> Karl
> 
> -- 
> GMX DSL = Maximale Leistung zum minimalen Preis!
> 2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat:
> http://www.gmx.net/de/go/dsl
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 15:56:10 2005
Return-Path: <java-user-return-16054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26910 invoked from network); 26 Aug 2005 15:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 15:56:10 -0000
Received: (qmail 61145 invoked by uid 500); 26 Aug 2005 15:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61112 invoked by uid 500); 26 Aug 2005 15:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61099 invoked by uid 99); 26 Aug 2005 15:56:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 08:56:04 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 08:56:21 -0700
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id QAA24038
	for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 16:58:41 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma024034; Fri, 26 Aug 05 16:58:28 +0100
Subject: Does order of BooleanQuery clauses affect search performance?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.1 January 21, 2004
Message-ID: <OFACB54F66.172A5E94-ON80257069.0056E746-80257069.0057895E@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Fri, 26 Aug 2005 16:58:45 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 26/08/2005 16:58:45
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N





A simple question and I guess it may have been asked before.

Does the order of Querys in a BooleanQuery affect search speed? By this I
mean if the first clause of a BooleanQuery only returns a few results and
the second clause returns lots of results and the two are ANDed is this
faster than the other way around? Similarly, does searching stop if no
results are found and the logical operations would mean no results can be
found (similar to Javas "short circuiting" of logical operations)?

I ask because I am creating some reasonably complex queries and if I can
get a boost by simply organising the logic sensibly then I will.

Regards

Paul I.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 16:07:18 2005
Return-Path: <java-user-return-16055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30497 invoked from network); 26 Aug 2005 16:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 16:07:18 -0000
Received: (qmail 84904 invoked by uid 500); 26 Aug 2005 16:07:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84529 invoked by uid 500); 26 Aug 2005 16:07:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84516 invoked by uid 99); 26 Aug 2005 16:07:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 09:07:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 09:07:28 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j7QG79Cs026783
	for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 17:07:09 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j7QG79Lk026778
	for java-user@lucene.apache.org; Fri, 26 Aug 2005 17:07:09 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from haggis.cache.ed.ac.uk (haggis.cache.ed.ac.uk [129.215.13.83]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Fri, 26 Aug 2005 17:07:08 +0100
Message-ID: <1125072428.430f3e2ce32f4@sms.ed.ac.uk>
Date: Fri, 26 Aug 2005 17:07:08 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Re: Lucene in IR Research
References: <23694.1125069946@www41.gmx.net>
In-Reply-To: <23694.1125069946@www41.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quoting Karl Koch <TheRanger@gmx.net>:

> Hello all,
>
> I would like to know about papers that where written and used Lucene as the
> unerlying search engine. E.g. Lucene as baseline search engine and some
> modifications to compare it with baseline Lucene system etc.
>
> Please provide links to published papers if possible.

I have some work on Question Answering that extensively uses Lucene for TREC
this year, but the paper is only half written (due november) so I'm afraid I
can't release it at the moment. Some other papers I can point out are:

Phrasal Queries with LingPipe and Lucene: Ad Hoc Genomics Text Retrieval,
by B. Carpenter, Alias-i, Inc.
http://trec.nist.gov/pubs/trec13/papers/alias-i.geo.pdf

Boris Katz and his team at MIT uses Lucene for a lot of their QA work, here's a
paper that compares Lucene with PRISE (The IR engine NIST uses for TREC).
Quantitative Evaluation of Passage Retrieval Algorithms for Question Answering
http://groups.csail.mit.edu/infolab/publications/Tellex-etal-SIGIR03.pdf

A comparison of off-the-shelf IR engines for question answering
by Jorg Tiedemann
http://www.let.rug.nl/~gosse/Imix/clin04_tiedemann.pdf

I hope this helps.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 16:23:01 2005
Return-Path: <java-user-return-16056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35694 invoked from network); 26 Aug 2005 16:23:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 16:23:01 -0000
Received: (qmail 15191 invoked by uid 500); 26 Aug 2005 16:22:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15170 invoked by uid 500); 26 Aug 2005 16:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15157 invoked by uid 99); 26 Aug 2005 16:22:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 09:22:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 09:23:09 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7QGKsjg019855
	for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 12:22:40 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILU0030182JW7@lmco.com> for java-user@lucene.apache.org; Fri, 26 Aug 2005 12:20:43 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILU00HRQ82JQJ@lmco.com> for java-user@lucene.apache.org; Fri, 26 Aug 2005 12:20:43 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Fri,
 26 Aug 2005 12:20:42 -0400
Date: Fri, 26 Aug 2005 12:20:42 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Does order of BooleanQuery clauses affect search performance?
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE394C@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Does order of BooleanQuery clauses affect search performance?
Thread-Index: AcWqVq3WCgbiycSzRlCDSOn8W/9joAAAygAw
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 26 Aug 2005 16:20:42.0980 (UTC) FILETIME=[1B2F7240:01C5AA5A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As far as I remember the order of Queries in a BooleanQuery does not
affect performance. (but I may be wrong)

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Paul.Illingworth@saaconsultants.com
[mailto:Paul.Illingworth@saaconsultants.com] 
Sent: Friday, August 26, 2005 11:59 AM
To: java-user@lucene.apache.org
Subject: Does order of BooleanQuery clauses affect search performance?





A simple question and I guess it may have been asked before.

Does the order of Querys in a BooleanQuery affect search speed? By this
I mean if the first clause of a BooleanQuery only returns a few results
and the second clause returns lots of results and the two are ANDed is
this faster than the other way around? Similarly, does searching stop if
no results are found and the logical operations would mean no results
can be found (similar to Javas "short circuiting" of logical
operations)?

I ask because I am creating some reasonably complex queries and if I can
get a boost by simply organising the logic sensibly then I will.

Regards

Paul I.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 16:25:14 2005
Return-Path: <java-user-return-16057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36777 invoked from network); 26 Aug 2005 16:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 16:25:14 -0000
Received: (qmail 23300 invoked by uid 500); 26 Aug 2005 16:25:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23274 invoked by uid 500); 26 Aug 2005 16:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23257 invoked by uid 99); 26 Aug 2005 16:25:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 09:25:09 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Aug 2005 09:25:23 -0700
Received: (qmail 49854 invoked by uid 60001); 26 Aug 2005 16:25:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=nmRsq5/LXvaRDejR4MNJG4yCl6gImbFBj6e9wOzkkTCokZcLrUeFTl+riFzpfJmeoQzBzd2vFdWfLj/kAsgnuiYa3fYCJiUk5cflGnDsWTwJQnVRp71gzVZrgM6xT9OYWabmusTEegQDyfmLFQ+EoFJLi4RQPWBAnP72k7eRLNI=  ;
Message-ID: <20050826162504.49852.qmail@web26007.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26007.mail.ukl.yahoo.com via HTTP; Fri, 26 Aug 2005 17:25:04 BST
Date: Fri, 26 Aug 2005 17:25:04 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Thinking about better highlighting
To: java-user@lucene.apache.org
In-Reply-To: <6.2.3.4.2.20050826112908.0704dff8@fast.synernet.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Am I right that the MemoryIndex with getReader() is
> not available
> anywhere at this point?


createReader() is the method you need. I think the
latest SVN version has it.



		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 17:33:12 2005
Return-Path: <java-user-return-16058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58632 invoked from network); 26 Aug 2005 17:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 17:33:12 -0000
Received: (qmail 60475 invoked by uid 500); 26 Aug 2005 17:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60455 invoked by uid 500); 26 Aug 2005 17:33:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60442 invoked by uid 99); 26 Aug 2005 17:33:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 10:33:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 10:33:23 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j7QHXF818232
	for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 12:33:15 -0500
Message-ID: <430F524E.8070109@getopt.org>
Date: Fri, 26 Aug 2005 19:33:02 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Solved (Re: Document visible by Term, but not search)
References: <001b01c5a911$390193b0$7101a8c0@corp.keepmedia.int>
In-Reply-To: <001b01c5a911$390193b0$7101a8c0@corp.keepmedia.int>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi list,

This is just to let you know that I found the reason (Dan sent me a 
small sample index off-list), and I thought that the reason for this 
error was obscure and tricky enough that you might be interested in the 
solution.

The problem lied in custom boost values. It was impossible to find the 
documents using the high-level search() interface. If you remember, this 
interface skips the lowest-scoring hits, among others documents with 
score==0  :-)

How can the score be 0 if the document matches (and it matched, because 
it clearly contained the term from the query)? I implemented a version 
of HitCollector that collects all hits, in order to investigate this. 
Running a query "testField:test" against that sample index I got 1 hit 
with score 0, and this explanation:

     0.0000 fieldWeight(testField:test in 0), product of:
       1.0000 tf(termFreq(testField:test)=1)
       0.3069 idf(docFreq=1)
       0.0000 fieldNorm(field=testField, doc=0)

Under normal circumstances fieldNorm is never 0 ... unless a boosting 
has been applied. In this case the original poster didn't apply boost=0, 
but some other (small) value. Boost values are encoded floats with very 
coarse resolution. In this case this resulted in fieldNorm falling below 
resolution of the encoded float. The fractional part was lost in this 
case, because it was too small to be encoded, so that the fieldNorm 
became 0. As a consequence, the score became 0 too, even though the 
document matched ...

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 17:43:39 2005
Return-Path: <java-user-return-16059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62305 invoked from network); 26 Aug 2005 17:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 17:43:39 -0000
Received: (qmail 74636 invoked by uid 500); 26 Aug 2005 17:43:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74617 invoked by uid 500); 26 Aug 2005 17:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74604 invoked by uid 99); 26 Aug 2005 17:43:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 10:43:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 10:43:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A465A13E203C; Fri, 26 Aug 2005 13:43:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 793A013E203B
	for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 13:42:42 -0400 (EDT)
In-Reply-To: <9893.1125064535@www58.gmx.net>
References: <9893.1125064535@www58.gmx.net>
Mime-Version: 1.0 (Apple Message framework v734)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <7C762377-E44E-4F91-967A-8AD249287B22@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Books about Lucene?
Date: Fri, 26 Aug 2005 13:42:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 
	autolearn=unavailable version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I appreciate the vote of confidence on this, but I am not afraid to =20
admit that I do not consider myself an expert on the deep innards of =20
Lucene.  I understand the concepts, and a bit of the internals, but I =20=

certainly do not live up to the hype you just bestowed upon me.  *blush*

Regarding JDK 1.2 - I came to Java at 1.3, and have never used a JDK =20
earlier than that.  All the apps I build now are currently on JDK 1.5 =20=

(err... 5.0).  I do not currently know what would be involved in =20
running Lucene on a 1.2 VM.  The first question to ask is whether an =20
earlier version of Lucene is sufficient for the needs of those =20
constrained to JDK 1.2.  If not, then we move forward to defining =20
what needs to be changed - a simple compilation of the trunk source =20
code with a 1.2 VM would give away most of the details.

As with open source in general, it is about scratching our own =20
itches.  If you're using Lucene (or need to use Lucene) in a 1.2 VM, =20
that is your itch to scratch and I would happily support your efforts =20=

in some way in documenting this (either on the wiki or embedded in =20
Lucene's own built-in documentation) or in providing an alternative =20
version of Lucene that is suitable for 1.2 (perhaps by having =20
alternative code in a separate directory within our code =20
repository).  If you create such documentation, perhaps you'd be =20
willing to donate it with full attribution to the 2nd edition of =20
LIA.  But please don't wait for me to do it, as it really is not =20
something I need personally for any project - all my projects are at =20
JDK 1.5 currently.

     Erik


On Aug 26, 2005, at 9:55 AM, Karl Koch wrote:

> Hello Otis,
>
> I do agree with Otis that somebody, preferably Erik, would provide =20
> a more
> detailed list of reasons why 1.3 does not run on Java 1.2. This =20
> list could
> then be used by others to adapt the code of version 1.3+ in order =20
> to make it
> run for their individual purposes (if this is necessary).
>
> The information provided in the CHANGES file is a good start but I =20
> am sure
> some more information on the technical side would help (e.g. =20
> classes and
> methods effected, changed in data structures, etc.).
>
> I think Erik would perhaps be in the best position to do that since =20=

> he knows
> all the insides of this excellent piece of Open Source - almost =20
> everybody of
> us whould spend months to find out what he already knows.
>
> Kind Regards,
> Karl
>
>
>
>> --- Urspr=FCngliche Nachricht ---
>> Von: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> An: Erik Hatcher <erik@ehatchersolutions.com>, Karl Koch
>> <TheRanger@gmx.net>
>> Betreff: Re: Books about Lucene?
>> Datum: Thu, 18 Aug 2005 12:49:16 -0700 (PDT)
>>
>> I was going to suggest the same!  I'd love it if we could cover =20
>> Lucene
>> on a PDA in the next edition of Lucene in Action.
>>
>> Btw., you should write to lucene-user and say why you can't go with
>> 1.4.3 or 1.9 versions.  What changed since Lucene 1.2 that =20
>> prevents you
>>
>>> from using the latest version?  I think you should share that on
>>>
>> lucene-user list.
>>
>> Otis
>>
>>
>> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>>
>>> Karl,
>>>
>>> Thanks for your feedback!
>>>
>>> Maybe you'd be up for contributing a section on Lucene on mobile
>>> devices for LIA 2.0?  :)  I have no experience with it myself, and
>>> wish I could help with your Lucene 1.2 woes, but I came into Lucene
>>> myself with 1.3 and up.
>>>
>>>      Erik
>>>
>>> On Aug 18, 2005, at 1:42 PM, Karl Koch wrote:
>>>
>>>
>>>> Hello Erik,
>>>>
>>>> I find "Lucene in Action" an extemely well written and easy
>>>> accessable book
>>>> and I must say: Well done (including of course everybody who
>>>> participated to
>>>> the book).
>>>>
>>>> Naturally the book is very strong on the latest version on Lucene.
>>>>
>>> I
>>>
>>>> currently, and you may have realised that on all my other postings,
>>>>
>>>
>>>
>>>> have the
>>>> problem that I cannot go for the latest version due to hardware
>>>> limitations
>>>> in mobile computing. I think I am not alone. I think it would be
>>>> great to
>>>> have articles on how to run Lucene on small footprint devices such
>>>>
>>>
>>>
>>>> as Java
>>>> enabled PDAs or even MIDP on mobile phones. I am not really
>>>> convinced that
>>>> this shouild go in a book such a LIA but I am sure there is a
>>>> demand to know
>>>> about how to do such things.
>>>>
>>>> There are certainly people out there that want to try out more IR
>>>> intensic
>>>> stuff with Lucene. This is, for a good reason, not addressed in the
>>>>
>>>
>>>
>>>> book. I
>>>> think it would be good to have perhaps some in-deep information on
>>>>
>>>
>>>
>>>> Lucene
>>>> available that goes into this direction. I am not sure if I am
>>>> talking about
>>>> another book here or if this could be some sort of appendix
>>>> chapters in the
>>>> next LIA. Since you are an IR expert, it could actually be a great
>>>>
>>>
>>>
>>>> idea to
>>>> write an IR book for Students in Information Science and
>>>>
>>> Information
>>>
>>>> Retrieval with Lucene as the tool used for examples (like you find
>>>> statistical books with SPSS examples).
>>>>
>>>> Karl
>>>>
>>>>
>>>>
>>>>> --- Urspr=FCngliche Nachricht ---
>>>>> Von: Erik Hatcher <erik@ehatchersolutions.com>
>>>>> An: java-user@lucene.apache.org
>>>>> Betreff: Re: Books about Lucene?
>>>>> Datum: Wed, 17 Aug 2005 20:28:09 -0400
>>>>>
>>>>> On Aug 17, 2005, at 2:49 PM, Karl Koch wrote:
>>>>>
>>>>>
>>>>>> Are there any other books (despite "Lucene in Action") perhaps
>>>>>> written in a
>>>>>> different perspective (e.g. different applications or problem
>>>>>> areas)?
>>>>>>
>>>>>>
>>>>>
>>>>> To echo what Otis said - I don't know of any myself.
>>>>>
>>>>> I'd be very interested to hear yours, and others, thoughts on what
>>>>> Lucene in Action 2nd edition should add/remove to its coverage.
>>>>> There are lots of topics that I've researched and worked on since
>>>>> that book that I think make sense to add, but community feedback
>>>>>
>>> will
>>>
>>>>> decide ultimately how LIA 2.0 unfolds.
>>>>>
>>>>>      Erik
>>>>>
>>>>>
>>>>>
>>>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>>
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>> --=20
>>>> GMX DSL =3D Maximale Leistung zum minimalen Preis!
>>>> 2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/
>>>> de/go/dsl
>>>>
>>>>
>>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>>
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>
>>
>
> --=20
> GMX DSL =3D Maximale Leistung zum minimalen Preis!
> 2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/=20
> de/go/dsl
>
> --=20
> Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
> Satte Provisionen f=FCr GMX Partner: http://www.gmx.net/de/go/partner
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 18:40:54 2005
Return-Path: <java-user-return-16060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77156 invoked from network); 26 Aug 2005 18:40:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 18:40:54 -0000
Received: (qmail 70498 invoked by uid 500); 26 Aug 2005 18:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70474 invoked by uid 500); 26 Aug 2005 18:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70453 invoked by uid 99); 26 Aug 2005 18:40:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 11:40:48 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 11:41:04 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7QIejpT004619
	for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 20:40:45 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Does order of BooleanQuery clauses affect search performance?
Date: Fri, 26 Aug 2005 20:40:44 +0200
User-Agent: KMail/1.5.4
References: <OFACB54F66.172A5E94-ON80257069.0056E746-80257069.0057895E@SAAConsultants.com>
In-Reply-To: <OFACB54F66.172A5E94-ON80257069.0056E746-80257069.0057895E@SAAConsultants.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508262040.44974.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 26 August 2005 17:58, Paul.Illingworth@saaconsultants.com wrote:
> 
> A simple question and I guess it may have been asked before.
> 
> Does the order of Querys in a BooleanQuery affect search speed? By this I
> mean if the first clause of a BooleanQuery only returns a few results and
> the second clause returns lots of results and the two are ANDed is this
> faster than the other way around? Similarly, does searching stop if no

Subqueries of BooleanQuery are called clauses in Lucene.
The order of clauses does not matter.
Having only required clauses does matter, normally a lot.

> results are found and the logical operations would mean no results can be
> found (similar to Javas "short circuiting" of logical operations)?

The development version tries to do as much "short circuiting" as possible.
Lucene 1.4.3 neither short circuits for "or" (optional clauses)
nor for "not" (prohibited clauses).
Both do short circuiting for "and" (required clauses).

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 19:13:01 2005
Return-Path: <java-user-return-16061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85708 invoked from network); 26 Aug 2005 19:13:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 19:13:01 -0000
Received: (qmail 12860 invoked by uid 500); 26 Aug 2005 19:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12649 invoked by uid 500); 26 Aug 2005 19:12:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12636 invoked by uid 99); 26 Aug 2005 19:12:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 12:12:55 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=FROM_ENDS_IN_NUMS,HTML_20_30,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.198 as permitted sender)
Received: from [64.233.170.198] (HELO rproxy.gmail.com) (64.233.170.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 12:13:12 -0700
Received: by rproxy.gmail.com with SMTP id 1so129495rny
        for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 12:12:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oIv6XF1OixBXk10i2k8xpXionYEf7FmrxS+CSZ69i4boFHYK3WxLX6FPVUa6eZtWJBQHB7Wb06vIoj1mVYFTsHTKfKP8wdkdPK3xUTlLzcNmpI+SQBoaK7fXXzfHtRlJZh3PDsrAdpHiQzYTY38LmIXek/a/N8v8YTXfkRguQh4=
Received: by 10.38.8.15 with SMTP id 15mr78355rnh;
        Fri, 26 Aug 2005 12:12:54 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Fri, 26 Aug 2005 12:12:54 -0700 (PDT)
Message-ID: <7ca123910508261212648b0666@mail.gmail.com>
Date: Fri, 26 Aug 2005 12:12:54 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Books about Lucene?
In-Reply-To: <7C762377-E44E-4F91-967A-8AD249287B22@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_225_13591786.1125083574286"
References: <9893.1125064535@www58.gmx.net>
	 <7C762377-E44E-4F91-967A-8AD249287B22@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_225_13591786.1125083574286
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi, Erik,

I some time ago played with the Lucene 1.2 source code and made some=20
modifications to it, trying to add my own ranking algorithm. I am not sure=
=20
if Licence wise, it is permissible to modify the earlier source code, also=
=20
if it is allowed to put the modified version or the description of what I=
=20
have done on wiki?

Thanks for your reply.

Jian


On 8/26/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> I appreciate the vote of confidence on this, but I am not afraid to
> admit that I do not consider myself an expert on the deep innards of
> Lucene. I understand the concepts, and a bit of the internals, but I
> certainly do not live up to the hype you just bestowed upon me. *blush*
>=20
> Regarding JDK 1.2 - I came to Java at 1.3, and have never used a JDK
> earlier than that. All the apps I build now are currently on JDK 1.5
> (err... 5.0). I do not currently know what would be involved in
> running Lucene on a 1.2 VM. The first question to ask is whether an
> earlier version of Lucene is sufficient for the needs of those
> constrained to JDK 1.2. If not, then we move forward to defining
> what needs to be changed - a simple compilation of the trunk source
> code with a 1.2 VM would give away most of the details.
>=20
> As with open source in general, it is about scratching our own
> itches. If you're using Lucene (or need to use Lucene) in a 1.2 VM,
> that is your itch to scratch and I would happily support your efforts
> in some way in documenting this (either on the wiki or embedded in
> Lucene's own built-in documentation) or in providing an alternative
> version of Lucene that is suitable for 1.2 (perhaps by having
> alternative code in a separate directory within our code
> repository). If you create such documentation, perhaps you'd be
> willing to donate it with full attribution to the 2nd edition of
> LIA. But please don't wait for me to do it, as it really is not
> something I need personally for any project - all my projects are at
> JDK 1.5 currently.
>=20
> Erik
>=20
>

------=_Part_225_13591786.1125083574286--

From java-user-return-16062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 20:12:06 2005
Return-Path: <java-user-return-16062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8324 invoked from network); 26 Aug 2005 20:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 20:12:06 -0000
Received: (qmail 91702 invoked by uid 500); 26 Aug 2005 20:12:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91408 invoked by uid 500); 26 Aug 2005 20:12:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91395 invoked by uid 99); 26 Aug 2005 20:12:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 13:12:01 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.40] (HELO pop06.mail.atl.earthlink.net) (207.69.200.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 13:12:17 -0700
Received: from mswamui-thinleaf.atl.sa.earthlink.net ([209.86.224.51])
	by pop06.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1E8kYR-0000eO-00
	for java-user@lucene.apache.org; Fri, 26 Aug 2005 16:11:59 -0400
Message-ID: <26976269.1125087119190.JavaMail.root@mswamui-thinleaf.atl.sa.earthlink.net>
Date: Fri, 26 Aug 2005 15:11:59 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Should I use span query?
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,
  I'm trying to find all the terms that are within x number of terms of given query terms.  Should I be using span query or something else.  If you have any code samples I would greatly appreciated it.

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 20:24:04 2005
Return-Path: <java-user-return-16063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10398 invoked from network); 26 Aug 2005 20:24:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 20:24:04 -0000
Received: (qmail 2702 invoked by uid 500); 26 Aug 2005 20:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2681 invoked by uid 500); 26 Aug 2005 20:23:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2668 invoked by uid 99); 26 Aug 2005 20:23:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 13:23:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 13:24:14 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CC14813E203B; Fri, 26 Aug 2005 16:23:54 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9F88213E2035
	for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 16:23:05 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v734)
In-Reply-To: <26976269.1125087119190.JavaMail.root@mswamui-thinleaf.atl.sa.earthlink.net>
References: <26976269.1125087119190.JavaMail.root@mswamui-thinleaf.atl.sa.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B4A09AD9-088D-4125-B9D9-8706B97DF1C0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Should I use span query?
Date: Fri, 26 Aug 2005 16:23:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 26, 2005, at 4:11 PM, Andrew Boyd wrote:
> Hi All,
>   I'm trying to find all the terms that are within x number of  
> terms of given query terms.  Should I be using span query or  
> something else.  If you have any code samples I would greatly  
> appreciated it.

PhraseQuery, or "termA termB"~10 syntax with QueryParser, provides  
term distance capability as well.  SpanNearQuery certainly will do  
the trick, and has an advantage over PhraseQuery in that it can be  
ordered or unordered whereas PhraseQuery is always irrelevant of order.

There are code examples in the Lucene in Action code found at http:// 
www.lucenebook.com

By the way, did you see we got slashdotted?  <http:// 
books.slashdot.org/books/05/08/24/1645211.shtml>

     Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 20:30:05 2005
Return-Path: <java-user-return-16064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11715 invoked from network); 26 Aug 2005 20:30:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 20:30:05 -0000
Received: (qmail 7534 invoked by uid 500); 26 Aug 2005 20:30:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7509 invoked by uid 500); 26 Aug 2005 20:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7496 invoked by uid 99); 26 Aug 2005 20:30:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 13:30:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 13:30:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CA14813E203B; Fri, 26 Aug 2005 16:29:58 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 17D4513E2035
	for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 16:29:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v734)
In-Reply-To: <7ca123910508261212648b0666@mail.gmail.com>
References: <9893.1125064535@www58.gmx.net> <7C762377-E44E-4F91-967A-8AD249287B22@ehatchersolutions.com> <7ca123910508261212648b0666@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4D4986E2-81CE-4EDC-A23F-93CF87DE216C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Books about Lucene?
Date: Fri, 26 Aug 2005 16:29:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's absolutely permissible.  Lucene is licensed with the Apache  
Software License, which is quite liberal with what you can do with  
the code.

If the demand for a 1.2-compatible version of Lucene is enough that  
there some folks willing to develop it and maintain it, I would be  
happy to have it within Lucene's own codebase.  I think keeping as  
much of the code that can be identical as possible is important, and  
if it can be demonstrated that switching Lucene's trunk codebase in  
parts to be 1.2 compatible is not detrimental to performance or  
resource usage of Lucene then we'd strongly consider making those  
changes.

     Erik


On Aug 26, 2005, at 3:12 PM, jian chen wrote:

> Hi, Erik,
>
> I some time ago played with the Lucene 1.2 source code and made some
> modifications to it, trying to add my own ranking algorithm. I am  
> not sure
> if Licence wise, it is permissible to modify the earlier source  
> code, also
> if it is allowed to put the modified version or the description of  
> what I
> have done on wiki?
>
> Thanks for your reply.
>
> Jian
>
>
> On 8/26/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>>
>> I appreciate the vote of confidence on this, but I am not afraid to
>> admit that I do not consider myself an expert on the deep innards of
>> Lucene. I understand the concepts, and a bit of the internals, but I
>> certainly do not live up to the hype you just bestowed upon me.  
>> *blush*
>>
>> Regarding JDK 1.2 - I came to Java at 1.3, and have never used a JDK
>> earlier than that. All the apps I build now are currently on JDK 1.5
>> (err... 5.0). I do not currently know what would be involved in
>> running Lucene on a 1.2 VM. The first question to ask is whether an
>> earlier version of Lucene is sufficient for the needs of those
>> constrained to JDK 1.2. If not, then we move forward to defining
>> what needs to be changed - a simple compilation of the trunk source
>> code with a 1.2 VM would give away most of the details.
>>
>> As with open source in general, it is about scratching our own
>> itches. If you're using Lucene (or need to use Lucene) in a 1.2 VM,
>> that is your itch to scratch and I would happily support your efforts
>> in some way in documenting this (either on the wiki or embedded in
>> Lucene's own built-in documentation) or in providing an alternative
>> version of Lucene that is suitable for 1.2 (perhaps by having
>> alternative code in a separate directory within our code
>> repository). If you create such documentation, perhaps you'd be
>> willing to donate it with full attribution to the 2nd edition of
>> LIA. But please don't wait for me to do it, as it really is not
>> something I need personally for any project - all my projects are at
>> JDK 1.5 currently.
>>
>> Erik
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 20:31:57 2005
Return-Path: <java-user-return-16065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11872 invoked from network); 26 Aug 2005 20:31:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 20:31:57 -0000
Received: (qmail 9088 invoked by uid 500); 26 Aug 2005 20:31:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9058 invoked by uid 500); 26 Aug 2005 20:31:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9045 invoked by uid 99); 26 Aug 2005 20:31:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 13:31:53 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of thomlep@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO zproxy.gmail.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 13:32:09 -0700
Received: by zproxy.gmail.com with SMTP id n29so383695nzf
        for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 13:31:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=NjvHAXkuyIczWv5d0fOT2WyVL/IWASW/G6ZYfKnTtVD9d+22ocguhLhRHMks8rUuPr7/eSMW9DXOLHzwmzNfyRQSJkZjJ5STvnlyTiRT3GFwJm4QRRvz4Kw84M5pDDtCAJvnasXdHcI3SPUDz5v4QaTsrGSnE8wcv3cCr2xLpZ8=
Received: by 10.36.215.10 with SMTP id n10mr303642nzg;
        Fri, 26 Aug 2005 13:31:50 -0700 (PDT)
Received: by 10.36.25.4 with HTTP; Fri, 26 Aug 2005 13:31:50 -0700 (PDT)
Message-ID: <d76e85360508261331e7cb1e@mail.gmail.com>
Date: Fri, 26 Aug 2005 16:31:50 -0400
From: Thomas Lepkowski <thomlep@gmail.com>
To: java-user@lucene.apache.org
Subject: index files in jar file
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8088_14616747.1125088310796"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8088_14616747.1125088310796
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,

I have a set of index files that I'd like to distribute with my Java=20
application. The only way this seems practical is to place the index files=
=20
in a jar file. I tries this, but the search choked when I told IndexSearche=
r=20
the index path inside the jar file ( and placed the jar file in the=20
CLASSPATH.

Anybody out there successfully put their index files in a jar file?

Thanks in advance for any advise.

-Tom

------=_Part_8088_14616747.1125088310796--

From java-user-return-16066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 21:19:45 2005
Return-Path: <java-user-return-16066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22076 invoked from network); 26 Aug 2005 21:19:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 21:19:45 -0000
Received: (qmail 64420 invoked by uid 500); 26 Aug 2005 21:19:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64359 invoked by uid 500); 26 Aug 2005 21:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64272 invoked by uid 99); 26 Aug 2005 21:19:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 14:19:24 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=FROM_ENDS_IN_NUMS,HTML_20_30,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.201 as permitted sender)
Received: from [64.233.170.201] (HELO rproxy.gmail.com) (64.233.170.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 14:19:39 -0700
Received: by rproxy.gmail.com with SMTP id 1so133191rny
        for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 14:19:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iK/2tMf5VQ5sAUIY8/nDcdBqNs5sFIgBUP2KvU8faDtASfXhZUz7/6c7GfufEBdHT3z5Zp5O9bmZ2Cztvf6dfiK0NmpJC5bHN+wZDhxnKpCP1EuTmZsrz4VfB8Cajw2t/RZ8yQZKvVMz+yXKS4fst2vnUe/XGZostZD6ok3jf10=
Received: by 10.38.95.10 with SMTP id s10mr80405rnb;
        Fri, 26 Aug 2005 14:19:21 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Fri, 26 Aug 2005 14:19:21 -0700 (PDT)
Message-ID: <7ca12391050826141967c7d1d8@mail.gmail.com>
Date: Fri, 26 Aug 2005 14:19:21 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Books about Lucene?
In-Reply-To: <4D4986E2-81CE-4EDC-A23F-93CF87DE216C@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_486_31005555.1125091161287"
References: <9893.1125064535@www58.gmx.net>
	 <7C762377-E44E-4F91-967A-8AD249287B22@ehatchersolutions.com>
	 <7ca123910508261212648b0666@mail.gmail.com>
	 <4D4986E2-81CE-4EDC-A23F-93CF87DE216C@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_486_31005555.1125091161287
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi, Erik,

Thanks. I think I will dig out my changes against Lucene 1.2 and then let=
=20
you know what in detail they are. It will take some days though.

Thanks,

Jian


On 8/26/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> It's absolutely permissible. Lucene is licensed with the Apache
> Software License, which is quite liberal with what you can do with
> the code.
>=20
> If the demand for a 1.2-compatible version of Lucene is enough that
> there some folks willing to develop it and maintain it, I would be
> happy to have it within Lucene's own codebase. I think keeping as
> much of the code that can be identical as possible is important, and
> if it can be demonstrated that switching Lucene's trunk codebase in
> parts to be 1.2 compatible is not detrimental to performance or
> resource usage of Lucene then we'd strongly consider making those
> changes.
>=20
> Erik
>=20
>=20
> On Aug 26, 2005, at 3:12 PM, jian chen wrote:
>=20
> > Hi, Erik,
> >
> > I some time ago played with the Lucene 1.2 source code and made some
> > modifications to it, trying to add my own ranking algorithm. I am
> > not sure
> > if Licence wise, it is permissible to modify the earlier source
> > code, also
> > if it is allowed to put the modified version or the description of
> > what I
> > have done on wiki?
> >
> > Thanks for your reply.
> >
> > Jian
> >
> >
> > On 8/26/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >
> >>
> >> I appreciate the vote of confidence on this, but I am not afraid to
> >> admit that I do not consider myself an expert on the deep innards of
> >> Lucene. I understand the concepts, and a bit of the internals, but I
> >> certainly do not live up to the hype you just bestowed upon me.
> >> *blush*
> >>
> >> Regarding JDK 1.2 - I came to Java at 1.3, and have never used a JDK
> >> earlier than that. All the apps I build now are currently on JDK 1.5
> >> (err... 5.0). I do not currently know what would be involved in
> >> running Lucene on a 1.2 VM. The first question to ask is whether an
> >> earlier version of Lucene is sufficient for the needs of those
> >> constrained to JDK 1.2. If not, then we move forward to defining
> >> what needs to be changed - a simple compilation of the trunk source
> >> code with a 1.2 VM would give away most of the details.
> >>
> >> As with open source in general, it is about scratching our own
> >> itches. If you're using Lucene (or need to use Lucene) in a 1.2 VM,
> >> that is your itch to scratch and I would happily support your efforts
> >> in some way in documenting this (either on the wiki or embedded in
> >> Lucene's own built-in documentation) or in providing an alternative
> >> version of Lucene that is suitable for 1.2 (perhaps by having
> >> alternative code in a separate directory within our code
> >> repository). If you create such documentation, perhaps you'd be
> >> willing to donate it with full attribution to the 2nd edition of
> >> LIA. But please don't wait for me to do it, as it really is not
> >> something I need personally for any project - all my projects are at
> >> JDK 1.5 currently.
> >>
> >> Erik
> >>
> >>
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_486_31005555.1125091161287--

From java-user-return-16067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 23:47:58 2005
Return-Path: <java-user-return-16067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55429 invoked from network); 26 Aug 2005 23:47:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 23:47:58 -0000
Received: (qmail 60164 invoked by uid 500); 26 Aug 2005 23:47:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60135 invoked by uid 500); 26 Aug 2005 23:47:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60122 invoked by uid 99); 26 Aug 2005 23:47:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 16:47:54 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.34] (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Aug 2005 16:48:09 -0700
Received: (qmail 64740 invoked by uid 60001); 26 Aug 2005 23:47:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DYtqi6Kfv39yt98GzjEFOsO4fllZjUeu733xOh4ccvEa/dIp+J8mTsnIk1R+aUuiSlbiEFn1WXcEtMu5i+CrywZsCeVgLBvy3MyqpI84A6aIM1HIFNIii24PsG0QVaherjRr17G6DUI1Gk9Xn2fjci7TY7qhdFJTHSQjNnbkQ2c=  ;
Message-ID: <20050826234750.64738.qmail@web31101.mail.mud.yahoo.com>
Received: from [69.201.142.21] by web31101.mail.mud.yahoo.com via HTTP; Fri, 26 Aug 2005 16:47:50 PDT
Date: Fri, 26 Aug 2005 16:47:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Books about Lucene?
To: java-user@lucene.apache.org
In-Reply-To: <4D4986E2-81CE-4EDC-A23F-93CF87DE216C@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> If the demand for a 1.2-compatible version of Lucene is enough that  
> there some folks willing to develop it and maintain it, I would be  
> happy to have it within Lucene's own codebase.  I think keeping as  
> much of the code that can be identical as possible is important, and 
> 
> if it can be demonstrated that switching Lucene's trunk codebase in  
> parts to be 1.2 compatible is not detrimental to performance or  
> resource usage of Lucene then we'd strongly consider making those  
> changes.

I think Lucene version 1.2 was mentioned simply because it worked with
an earlier JDK that must be shipped on some PDA.  Perhaps the JDK (I
J2ME) on that PDA can be upgraded instead?

If not, Karl should run the current version of Lucene on that device
and provide a list of errors... want to do that, Karl?

Otis


  So, the real goal is to get Lucene working on that PDA


> On Aug 26, 2005, at 3:12 PM, jian chen wrote:
> 
> > Hi, Erik,
> >
> > I some time ago played with the Lucene 1.2 source code and made
> some
> > modifications to it, trying to add my own ranking algorithm. I am  
> > not sure
> > if Licence wise, it is permissible to modify the earlier source  
> > code, also
> > if it is allowed to put the modified version or the description of 
> 
> > what I
> > have done on wiki?
> >
> > Thanks for your reply.
> >
> > Jian
> >
> >
> > On 8/26/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >
> >>
> >> I appreciate the vote of confidence on this, but I am not afraid
> to
> >> admit that I do not consider myself an expert on the deep innards
> of
> >> Lucene. I understand the concepts, and a bit of the internals, but
> I
> >> certainly do not live up to the hype you just bestowed upon me.  
> >> *blush*
> >>
> >> Regarding JDK 1.2 - I came to Java at 1.3, and have never used a
> JDK
> >> earlier than that. All the apps I build now are currently on JDK
> 1.5
> >> (err... 5.0). I do not currently know what would be involved in
> >> running Lucene on a 1.2 VM. The first question to ask is whether
> an
> >> earlier version of Lucene is sufficient for the needs of those
> >> constrained to JDK 1.2. If not, then we move forward to defining
> >> what needs to be changed - a simple compilation of the trunk
> source
> >> code with a 1.2 VM would give away most of the details.
> >>
> >> As with open source in general, it is about scratching our own
> >> itches. If you're using Lucene (or need to use Lucene) in a 1.2
> VM,
> >> that is your itch to scratch and I would happily support your
> efforts
> >> in some way in documenting this (either on the wiki or embedded in
> >> Lucene's own built-in documentation) or in providing an
> alternative
> >> version of Lucene that is suitable for 1.2 (perhaps by having
> >> alternative code in a separate directory within our code
> >> repository). If you create such documentation, perhaps you'd be
> >> willing to donate it with full attribution to the 2nd edition of
> >> LIA. But please don't wait for me to do it, as it really is not
> >> something I need personally for any project - all my projects are
> at
> >> JDK 1.5 currently.
> >>
> >> Erik
> >>
> >>
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 23:49:18 2005
Return-Path: <java-user-return-16068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55805 invoked from network); 26 Aug 2005 23:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 23:49:18 -0000
Received: (qmail 62020 invoked by uid 500); 26 Aug 2005 23:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61981 invoked by uid 500); 26 Aug 2005 23:49:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61966 invoked by uid 99); 26 Aug 2005 23:49:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 16:49:12 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.74] (HELO web31112.mail.mud.yahoo.com) (68.142.201.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Aug 2005 16:49:28 -0700
Received: (qmail 89879 invoked by uid 60001); 26 Aug 2005 23:49:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=4twrTbv/rY/iq/mObinLJ4YGQ6yXGuStyiJSzxHTwIz+6fPqcKirresTNh2NMG9E8xUNGvrRKpuJal27x6D4vBYogdGAH4RNUt5mQhecInVC8+unHtLq0QyUQSQTWLv2RY6HBZDXVscJCMJQ1XNQpuKpAP+FTKSBvdwiy9zcDfw=  ;
Message-ID: <20050826234909.89877.qmail@web31112.mail.mud.yahoo.com>
Received: from [69.201.142.21] by web31112.mail.mud.yahoo.com via HTTP; Fri, 26 Aug 2005 16:49:09 PDT
Date: Fri, 26 Aug 2005 16:49:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Books about Lucene?
To: java-user@lucene.apache.org
In-Reply-To: <7ca123910508261212648b0666@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik already answer that, but let me emphasize that this is not only
allowed, but encouraged.  I believe anyone can add information to the
Lucene Wiki, so if you have information that you would like to share
and that may help others, please do it.

Otis


--- jian chen <chenjian1227@gmail.com> wrote:

> Hi, Erik,
> 
> I some time ago played with the Lucene 1.2 source code and made some 
> modifications to it, trying to add my own ranking algorithm. I am not
> sure 
> if Licence wise, it is permissible to modify the earlier source code,
> also 
> if it is allowed to put the modified version or the description of
> what I 
> have done on wiki?
> 
> Thanks for your reply.
> 
> Jian
> 
> 
> On 8/26/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> > 
> > I appreciate the vote of confidence on this, but I am not afraid to
> > admit that I do not consider myself an expert on the deep innards
> of
> > Lucene. I understand the concepts, and a bit of the internals, but
> I
> > certainly do not live up to the hype you just bestowed upon me.
> *blush*
> > 
> > Regarding JDK 1.2 - I came to Java at 1.3, and have never used a
> JDK
> > earlier than that. All the apps I build now are currently on JDK
> 1.5
> > (err... 5.0). I do not currently know what would be involved in
> > running Lucene on a 1.2 VM. The first question to ask is whether an
> > earlier version of Lucene is sufficient for the needs of those
> > constrained to JDK 1.2. If not, then we move forward to defining
> > what needs to be changed - a simple compilation of the trunk source
> > code with a 1.2 VM would give away most of the details.
> > 
> > As with open source in general, it is about scratching our own
> > itches. If you're using Lucene (or need to use Lucene) in a 1.2 VM,
> > that is your itch to scratch and I would happily support your
> efforts
> > in some way in documenting this (either on the wiki or embedded in
> > Lucene's own built-in documentation) or in providing an alternative
> > version of Lucene that is suitable for 1.2 (perhaps by having
> > alternative code in a separate directory within our code
> > repository). If you create such documentation, perhaps you'd be
> > willing to donate it with full attribution to the 2nd edition of
> > LIA. But please don't wait for me to do it, as it really is not
> > something I need personally for any project - all my projects are
> at
> > JDK 1.5 currently.
> > 
> > Erik
> > 
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 26 23:51:37 2005
Return-Path: <java-user-return-16069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56221 invoked from network); 26 Aug 2005 23:51:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Aug 2005 23:51:37 -0000
Received: (qmail 64144 invoked by uid 500); 26 Aug 2005 23:51:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64119 invoked by uid 500); 26 Aug 2005 23:51:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64106 invoked by uid 99); 26 Aug 2005 23:51:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 16:51:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 16:51:48 -0700
Received: from 207-55-102-169.dyn.qwest.continet.com ([207.55.102.169] helo=[192.168.1.101])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1E8o1H-000GBd-7l
	for java-user@lucene.apache.org; Fri, 26 Aug 2005 16:53:59 -0700
Mime-Version: 1.0 (Apple Message framework v733)
Content-Transfer-Encoding: 7bit
Message-Id: <0A17D76B-DF8B-40B9-84F2-1A5A0C83E053@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Standard or Modified UTF-8?
Date: Fri, 26 Aug 2005 16:51:27 -0700
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Greets,

As part of my attempt to speed up Plucene and establishing index  
compatibility between Plucene and Java Lucene, I'm porting  
InputStream and OutputStream to XS (the C API for accessing Perl's  
guts), and I believe I have found a documentation bug in the file- 
format spec at...

http://lucene.apache.org/java/docs/fileformats.html

"Lucene writes unicode character sequences using the standard UTF-8  
encoding."

Snooping the code in OutputStream, it looks like you are writing  
modified UTF-8 -- NOT standard -- because a null byte is written  
using the two-byte form.

       else if (((code >= 0x80) && (code <= 0x7FF)) || code == 0) {
     writeByte((byte)(0xC0 | (code >> 6)));
     writeByte((byte)(0x80 | (code & 0x3F)));

http://en.wikipedia.org/wiki/UTF-8#Modified_UTF-8

Can someone please confirm that the intention is to write modified  
UTF-8?

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 27 04:18:30 2005
Return-Path: <java-user-return-16070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12490 invoked from network); 27 Aug 2005 04:18:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2005 04:18:30 -0000
Received: (qmail 31375 invoked by uid 500); 27 Aug 2005 04:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31321 invoked by uid 500); 27 Aug 2005 04:18:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31308 invoked by uid 99); 27 Aug 2005 04:18:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 21:18:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 21:18:41 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1E8sBc-000Iho-46; Fri, 26 Aug 2005 21:20:56 -0700
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <0A17D76B-DF8B-40B9-84F2-1A5A0C83E053@rectangular.com>
References: <0A17D76B-DF8B-40B9-84F2-1A5A0C83E053@rectangular.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8B302856-A72E-497D-9858-59C32B55B9ED@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Lucene does NOT use UTF-8.
Date: Fri, 26 Aug 2005 21:18:21 -0700
To: java-user@lucene.apache.org,
 plucene@kasei.com
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Greets,

[crossposted to java-user@lucene.apache.org and plucene@kasei.com]

I've delved into the matter of Lucene and UTF-8 a little further, and  
I am discouraged by what I believe I've uncovered.

Lucene should not be advertising that it uses "standard UTF-8" -- or  
even UTF-8 at all, since "Modified UTF-8" is _illegal_ UTF-8.  The  
two distinguishing characteristics of "Modified UTF-8" are the  
treatment of codepoints above the BMP (which are written as surrogate  
pairs), and the encoding of null bytes as 1100 0000 1000 0000 rather  
than 0000 0000.  Both of these became illegal as of Unicode 3.1  
(IIRC), because they are not shortest-form and non-shortest-form  
UTF-8 presents a security risk.

The documentation should really state that Lucene stores strings in a  
Java-only adulteration of UTF-8, unsuitable for interchange.  Since  
Perl uses true shortest-form UTF-8 as its native encoding, Plucene  
would have to jump through two efficiency-killing hoops in order to  
write files that would not choke Lucene: instead of writing out its  
true, legal UTF-8 directly, it would be necessary to first translate  
to UTF-16, then duplicate the Lucene encoding algorithm from  
OutputStream.  In theory.

Below you will find a simple Perl script which illustrates what  
happens when Perl encounters malformed UTF-8.  Run it (you need Perl  
5.8 or higher) and you will see why even if I thought it was a good  
idea to emulate the Java hack for encoding "Modified UTF-8", trying  
to make it work in practice would be a nightmare.

If Plucene were to write legal UTF-8 strings to its index files, Java  
Lucene would misbehave and possibly blow up any time a string  
contained either a 4-byte character or a null byte.  On the flip  
side, Perl will spew warnings like crazy and possibly blow up  
whenever it encounters a Lucene-encoded null or surrogate pair.  The  
potential blowups are due to the fact that Lucene and Plucene will  
not agree on how many characters a string contains, resulting in  
overruns or underruns.

I am hoping that the answer to this will be a fix to the encoding  
mechanism in Lucene so that it really does use legal UTF-8.  The most  
efficient way to go about this has not yet presented itself.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/

#----------------------------------------

#!/usr/bin/perl
use strict;
use warnings;

# illegal_null.plx -- Perl complains about non-shortest-form null.

my $data = "foo\xC0\x80\n";

open (my $virtual_filehandle, "+<:utf8", \$data);
print <$virtual_filehandle>;


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 27 07:15:10 2005
Return-Path: <java-user-return-16071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30546 invoked from network); 27 Aug 2005 07:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2005 07:15:10 -0000
Received: (qmail 67544 invoked by uid 500); 27 Aug 2005 07:14:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64184 invoked by uid 500); 27 Aug 2005 07:14:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60557 invoked by uid 99); 27 Aug 2005 07:13:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 00:13:50 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=FROM_ENDS_IN_NUMS,HTML_20_30,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.201 as permitted sender)
Received: from [64.233.170.201] (HELO rproxy.gmail.com) (64.233.170.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Aug 2005 22:14:58 -0700
Received: by rproxy.gmail.com with SMTP id 1so140404rny
        for <java-user@lucene.apache.org>; Fri, 26 Aug 2005 22:14:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=J3LOam6uo1veKoCj0HIrlYnRon6DrkczuQ+5tjHuAk96+HS30kKcYD7E5UnoP2I70dWAc4kHYkbbJhyVGHMaKtNFEeyamJH1X2yoVfMu5LSgK8YwBIvzVUzEADpv3N5l1NCFNSp1IbrurgIY+8AQxVWHBL1R6gjUD8pnyh6Zcrg=
Received: by 10.38.95.10 with SMTP id s10mr84230rnb;
        Fri, 26 Aug 2005 22:14:40 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Fri, 26 Aug 2005 22:14:40 -0700 (PDT)
Message-ID: <7ca1239105082622143f506f18@mail.gmail.com>
Date: Fri, 26 Aug 2005 22:14:40 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene does NOT use UTF-8.
In-Reply-To: <8B302856-A72E-497D-9858-59C32B55B9ED@rectangular.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_926_28412963.1125119680359"
References: <0A17D76B-DF8B-40B9-84F2-1A5A0C83E053@rectangular.com>
	 <8B302856-A72E-497D-9858-59C32B55B9ED@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_926_28412963.1125119680359
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

It seems to me that in theory, Lucene storage code could use true UTF-8 to=
=20
store terms. Maybe it is just a legacy issue that the modified UTF-8 is=20
used?

Cheers,

Jian

On 8/26/05, Marvin Humphrey <marvin@rectangular.com> wrote:
>=20
> Greets,
>=20
> [crossposted to java-user@lucene.apache.org and plucene@kasei.com]
>=20
> I've delved into the matter of Lucene and UTF-8 a little further, and
> I am discouraged by what I believe I've uncovered.
>=20
> Lucene should not be advertising that it uses "standard UTF-8" -- or
> even UTF-8 at all, since "Modified UTF-8" is _illegal_ UTF-8. The
> two distinguishing characteristics of "Modified UTF-8" are the
> treatment of codepoints above the BMP (which are written as surrogate
> pairs), and the encoding of null bytes as 1100 0000 1000 0000 rather
> than 0000 0000. Both of these became illegal as of Unicode 3.1
> (IIRC), because they are not shortest-form and non-shortest-form
> UTF-8 presents a security risk.
>=20
> The documentation should really state that Lucene stores strings in a
> Java-only adulteration of UTF-8, unsuitable for interchange. Since
> Perl uses true shortest-form UTF-8 as its native encoding, Plucene
> would have to jump through two efficiency-killing hoops in order to
> write files that would not choke Lucene: instead of writing out its
> true, legal UTF-8 directly, it would be necessary to first translate
> to UTF-16, then duplicate the Lucene encoding algorithm from
> OutputStream. In theory.
>=20
> Below you will find a simple Perl script which illustrates what
> happens when Perl encounters malformed UTF-8. Run it (you need Perl
> 5.8 or higher) and you will see why even if I thought it was a good
> idea to emulate the Java hack for encoding "Modified UTF-8", trying
> to make it work in practice would be a nightmare.
>=20
> If Plucene were to write legal UTF-8 strings to its index files, Java
> Lucene would misbehave and possibly blow up any time a string
> contained either a 4-byte character or a null byte. On the flip
> side, Perl will spew warnings like crazy and possibly blow up
> whenever it encounters a Lucene-encoded null or surrogate pair. The
> potential blowups are due to the fact that Lucene and Plucene will
> not agree on how many characters a string contains, resulting in
> overruns or underruns.
>=20
> I am hoping that the answer to this will be a fix to the encoding
> mechanism in Lucene so that it really does use legal UTF-8. The most
> efficient way to go about this has not yet presented itself.
>=20
> Marvin Humphrey
> Rectangular Research
> http://www.rectangular.com/
>=20
> #----------------------------------------
>=20
> #!/usr/bin/perl
> use strict;
> use warnings;
>=20
> # illegal_null.plx -- Perl complains about non-shortest-form null.
>=20
> my $data =3D "foo\xC0\x80\n";
>=20
> open (my $virtual_filehandle, "+<:utf8", \$data);
> print <$virtual_filehandle>;
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_926_28412963.1125119680359--

From java-user-return-16072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 27 14:07:41 2005
Return-Path: <java-user-return-16072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11202 invoked from network); 27 Aug 2005 14:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2005 14:07:41 -0000
Received: (qmail 87728 invoked by uid 500); 27 Aug 2005 14:07:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87515 invoked by uid 500); 27 Aug 2005 14:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87502 invoked by uid 99); 27 Aug 2005 14:07:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 07:07:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 07:07:51 -0700
Received: from [67.189.26.9] (helo=[10.0.1.2])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1E91Nv-000JoD-87; Sat, 27 Aug 2005 07:10:15 -0700
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <7ca1239105082622143f506f18@mail.gmail.com>
References: <0A17D76B-DF8B-40B9-84F2-1A5A0C83E053@rectangular.com> <8B302856-A72E-497D-9858-59C32B55B9ED@rectangular.com> <7ca1239105082622143f506f18@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <773C33C0-3553-44B3-B4BA-532B4FCEABBD@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: Lucene does NOT use UTF-8.
Date: Sat, 27 Aug 2005 07:07:31 -0700
To: java-user@lucene.apache.org,
 plucene@kasei.com
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 26, 2005, at 10:14 PM, jian chen wrote:

> Hi,
>
> It seems to me that in theory, Lucene storage code could use true  
> UTF-8 to
> store terms. Maybe it is just a legacy issue that the modified  
> UTF-8 is
> used?

It has been suggested that this discussion should move to the  
developer's list, so I'm sending my reply there (and cc'ing Jian).

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 27 17:46:00 2005
Return-Path: <java-user-return-16073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88713 invoked from network); 27 Aug 2005 17:45:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2005 17:45:59 -0000
Received: (qmail 46279 invoked by uid 500); 27 Aug 2005 17:45:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46241 invoked by uid 500); 27 Aug 2005 17:45:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46228 invoked by uid 99); 27 Aug 2005 17:45:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 10:45:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=TO_ADDRESS_EQ_REAL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [141.146.126.228] (HELO agminet01.oracle.com) (141.146.126.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 10:46:09 -0700
Received: from rgmsgw301.us.oracle.com (rgmsgw301.us.oracle.com [138.1.186.50])
	by agminet01.oracle.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j7RHjpSr003889
	for <java-user@lucene.apache.org>; Sat, 27 Aug 2005 12:45:52 -0500
Received: from rgmsgw301.us.oracle.com (localhost [127.0.0.1])
	by rgmsgw301.us.oracle.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j7RHjpYf024397
	for <java-user@lucene.apache.org>; Sat, 27 Aug 2005 11:45:51 -0600
Received: from us.oracle.com (dhcp-4op5-4op6-west-144-25-174-214.us.oracle.com [144.25.174.214])
	by rgmsgw301.us.oracle.com (Switch-3.1.7/Switch-3.1.7) with ESMTP id j7RHjoNs024390
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 27 Aug 2005 11:45:51 -0600
From: "Ouyang, Hui" <hui.ouyang@oracle.com>
Reply-To: "hui.ouyang@oracle.com" <hui.ouyang@oracle.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: read past EOF 
Date: Sat, 27 Aug 2005 10:44:52 -0700
Organization: Oracle ST
X-Mailer: Oracle Connector for Outlook 10.1.1.0.2 70418 (11.0.5608)
Message-ID: <20050827104452312.00000005488@huixp>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
X-Brightmail-Tracker: AAAAAQAAAAI=
X-Whitelist: TRUE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I had lots of "docs out of order" issues when the index is optimized. I did=
 the changes based on the suggestion in this link
http://nagoya.apache.org/bugzilla/show_bug.cgi?id=3D23650
 =

It seems this issue is solved. But some index have "read past EOF" when I d=
o optimization. The index is over 2G and there are some documents deleted f=
rom the index. It is based on Lucene 1.4.3 on Windows.
Does anyone know how to avoid this issue? Thx.
 =

Regards,
hui
 =


 =


merging segments _1ny5 (38708 docs) _1ot0 (1000 docs) _1t2m (4810 docs)java=
.io.I

OException: read past EOF

        at

org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal

(CompoundFileReader.java:218)

        at

org.apache.lucene.store.InputStream.readBytes(InputStream.java:61)

        at

org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:356)

        at

org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:323)

        at

org.apache.lucene.index.SegmentMerger.mergeNorms(SegmentMerger.java:4

29)

        at

org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:94)

        at

org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:51

0)

        at

org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:370)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 27 18:57:12 2005
Return-Path: <java-user-return-16074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3073 invoked from network); 27 Aug 2005 18:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2005 18:57:12 -0000
Received: (qmail 94174 invoked by uid 500); 27 Aug 2005 18:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94157 invoked by uid 500); 27 Aug 2005 18:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94144 invoked by uid 99); 27 Aug 2005 18:57:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 11:57:07 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,HTML_30_40,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.205 as permitted sender)
Received: from [64.233.170.205] (HELO rproxy.gmail.com) (64.233.170.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 11:57:22 -0700
Received: by rproxy.gmail.com with SMTP id 1so149683rny
        for <java-user@lucene.apache.org>; Sat, 27 Aug 2005 11:57:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=M5Sy8jYV5Bt89uP2CBGD3DOjXe0o2Kjrg9KUjGPi0a39ZC7NvpF36yhfwuebhjsBsocMd3FCtj8O4Eb7b4zi2K8MRieaTjEFIHN8lm4Au23xSmEbHbivLWOcLVzjdloOr3E79KaRLifmeilhO+Uz76u7S0dOQIjS1JpiX2P4q3U=
Received: by 10.38.8.10 with SMTP id 10mr1785rnh;
        Sat, 27 Aug 2005 11:57:04 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Sat, 27 Aug 2005 11:57:04 -0700 (PDT)
Message-ID: <7ca1239105082711571f4ecc6d@mail.gmail.com>
Date: Sat, 27 Aug 2005 11:57:04 -0700
From: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org, "hui.ouyang@oracle.com" <hui.ouyang@oracle.com>
Subject: Re: read past EOF
In-Reply-To: <20050827104452312.00000005488@huixp>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1517_18786608.1125169024598"
References: <20050827104452312.00000005488@huixp>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1517_18786608.1125169024598
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

It seems this problem only happens when the index files get really large.=
=20
Could it be because java has trouble handling very large files on windows=
=20
machine (guess there is max file size on windows)?

In Lucene, I think there is a maxDoc kind of parameter that you can use to=
=20
specify, when the index gets really large containing more than that many of=
=20
documents, it will not try to merge the index files into one. Could this be=
=20
used to stop the index files from growing forever?

Cheers,

Jian

On 8/27/05, Ouyang, Hui <hui.ouyang@oracle.com> wrote:
>=20
> Hi,
> I had lots of "docs out of order" issues when the index is optimized. I=
=20
> did the changes based on the suggestion in this link
> http://nagoya.apache.org/bugzilla/show_bug.cgi?id=3D23650
>=20
> It seems this issue is solved. But some index have "read past EOF" when I=
=20
> do optimization. The index is over 2G and there are some documents delete=
d=20
> from the index. It is based on Lucene 1.4.3 on Windows.
> Does anyone know how to avoid this issue? Thx.
>=20
> Regards,
> hui
>=20
>=20
>=20
>=20
> merging segments _1ny5 (38708 docs) _1ot0 (1000 docs) _1t2m (4810=20
> docs)java.io.I
>=20
> OException: read past EOF
>=20
> at
>=20
> org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal
>=20
> (CompoundFileReader.java:218)
>=20
> at
>=20
> org.apache.lucene.store.InputStream.readBytes(InputStream.java:61)
>=20
> at
>=20
> org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:356)
>=20
> at
>=20
> org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:323)
>=20
> at
>=20
> org.apache.lucene.index.SegmentMerger.mergeNorms(SegmentMerger.java:4
>=20
> 29)
>=20
> at
>=20
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:94)
>=20
> at
>=20
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:51
>=20
> 0)
>=20
> at
>=20
> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:370)
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_1517_18786608.1125169024598--

From java-user-return-16075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 27 21:11:56 2005
Return-Path: <java-user-return-16075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27951 invoked from network); 27 Aug 2005 21:11:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Aug 2005 21:11:55 -0000
Received: (qmail 64265 invoked by uid 500); 27 Aug 2005 21:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64229 invoked by uid 500); 27 Aug 2005 21:11:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64213 invoked by uid 99); 27 Aug 2005 21:11:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 14:11:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.204] (HELO smtp105.sbc.mail.mud.yahoo.com) (68.142.198.204)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 27 Aug 2005 14:12:06 -0700
Received: (qmail 30336 invoked from network); 27 Aug 2005 21:11:47 -0000
Received: from unknown (HELO ?192.168.1.42?) (kkrugler@pacbell.net@63.200.72.125 with plain)
  by smtp105.sbc.mail.mud.yahoo.com with SMTP; 27 Aug 2005 21:11:47 -0000
Mime-Version: 1.0
Message-Id: <p0623090abf3685b5b3f4@[192.168.1.42]>
In-Reply-To: <8B302856-A72E-497D-9858-59C32B55B9ED@rectangular.com>
References: <0A17D76B-DF8B-40B9-84F2-1A5A0C83E053@rectangular.com>
 <8B302856-A72E-497D-9858-59C32B55B9ED@rectangular.com>
Date: Sat, 27 Aug 2005 14:11:34 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Lucene does NOT use UTF-8.
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>I've delved into the matter of Lucene and UTF-8 a little further, 
>and I am discouraged by what I believe I've uncovered.
>
>Lucene should not be advertising that it uses "standard UTF-8" -- or 
>even UTF-8 at all, since "Modified UTF-8" is _illegal_ UTF-8.

Unfortunately this is how Sun documents the format they use for 
serialized strings.

>The two distinguishing characteristics of "Modified UTF-8" are the 
>treatment of codepoints above the BMP (which are written as 
>surrogate pairs), and the encoding of null bytes as 1100 0000 1000 
>0000 rather than 0000 0000.  Both of these became illegal as of 
>Unicode 3.1 (IIRC), because they are not shortest-form and 
>non-shortest-form UTF-8 presents a security risk.

For UTF-8 these were always invalid, but the standard wasn't very 
clear about it. Unfortunately the fuzzy nature of the 1.0/2.0 specs 
encouraged some sloppy implementations.

>The documentation should really state that Lucene stores strings in 
>a Java-only adulteration of UTF-8,

Yes, good point. I don't know who's in charge of that page, but it 
should be fixed.

>unsuitable for interchange.

Other than as an internal representation for Java serialization.

>Since Perl uses true shortest-form UTF-8 as its native encoding, 
>Plucene would have to jump through two efficiency-killing hoops in 
>order to write files that would not choke Lucene: instead of writing 
>out its true, legal UTF-8 directly, it would be necessary to first 
>translate to UTF-16, then duplicate the Lucene encoding algorithm 
>from OutputStream.  In theory.

Actually I don't think it would be all that bad. Since a null in the 
middle of a string is rare, as is a character outside of the BMP, a 
quick scan of the text should be sufficient to determine if it can be 
written as-is.

The ICU project has C code that can be used to quickly walk a string. 
I believe these would find/report such invalid code points, if you 
use the safe (versus faster unsafe) versions.

>Below you will find a simple Perl script which illustrates what 
>happens when Perl encounters malformed UTF-8.  Run it (you need Perl 
>5.8 or higher) and you will see why even if I thought it was a good 
>idea to emulate the Java hack for encoding "Modified UTF-8", trying 
>to make it work in practice would be a nightmare.
>
>If Plucene were to write legal UTF-8 strings to its index files, 
>Java Lucene would misbehave and possibly blow up any time a string 
>contained either a 4-byte character or a null byte.  On the flip 
>side, Perl will spew warnings like crazy and possibly blow up 
>whenever it encounters a Lucene-encoded null or surrogate pair.  The 
>potential blowups are due to the fact that Lucene and Plucene will 
>not agree on how many characters a string contains, resulting in 
>overruns or underruns.
>
>I am hoping that the answer to this will be a fix to the encoding 
>mechanism in Lucene so that it really does use legal UTF-8.  The 
>most efficient way to go about this has not yet presented itself.

I'd need to look at the code more, but using something other than the 
Java serialized format would probably incur a performance penalty for 
the Java implementation. Or at least make it harder to handle the 
strings using the standard Java serialization support. So I doubt 
this would be a slam-dunk in the Lucene community.

-- Ken


>#----------------------------------------
>
>#!/usr/bin/perl
>use strict;
>use warnings;
>
># illegal_null.plx -- Perl complains about non-shortest-form null.
>
>my $data = "foo\xC0\x80\n";
>
>open (my $virtual_filehandle, "+<:utf8", \$data);
>print <$virtual_filehandle>;

-- 
Ken Krugler
TransPac Software, Inc.
<http://www.transpac.com>
+1 530-470-9200

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 28 01:56:44 2005
Return-Path: <java-user-return-16076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80574 invoked from network); 28 Aug 2005 01:56:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2005 01:56:43 -0000
Received: (qmail 16950 invoked by uid 500); 28 Aug 2005 01:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16928 invoked by uid 500); 28 Aug 2005 01:56:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16915 invoked by uid 99); 28 Aug 2005 01:56:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Aug 2005 18:56:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 27 Aug 2005 18:56:55 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <170403(1)>; Sat, 27 Aug 2005 18:56:24 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Sat, 27 Aug 2005 18:56:22 PDT
To: java-user@lucene.apache.org
cc: plucene@kasei.com
Subject: Re: Lucene does NOT use UTF-8. 
In-Reply-To: Your message of "Fri, 26 Aug 2005 21:18:21 PDT."
             <8B302856-A72E-497D-9858-59C32B55B9ED@rectangular.com> 
Date: Sat, 27 Aug 2005 18:56:16 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <05Aug27.185622pdt."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for pointing this out, Marvin.  I wish Sun (or someone) would
document and register this particular character set encoding with
IANA, so that it could be used outside of Java.  As it stands now,
it's essentially a bastard encoding, good for nothing, and one of the
warts of Java.

Lucene probably shouldn't be using it in its file formats.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 28 14:23:21 2005
Return-Path: <java-user-return-16077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97920 invoked from network); 28 Aug 2005 14:23:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2005 14:23:21 -0000
Received: (qmail 74131 invoked by uid 500); 28 Aug 2005 14:23:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74104 invoked by uid 500); 28 Aug 2005 14:23:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74091 invoked by uid 99); 28 Aug 2005 14:23:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Aug 2005 07:23:16 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Aug 2005 07:23:32 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1E9O42-0005sZ-7y
	for java-user@lucene.apache.org; Sun, 28 Aug 2005 07:23:14 -0700
Message-ID: <728669.post@talk.nabble.com>
Date: Sun, 28 Aug 2005 07:23:14 -0700 (PDT)
From: "orens (sent by Nabble.com)" <lists@nabble.com>
Reply-To: orens <orens@relegence.co.il>
To: java-user@lucene.apache.org
Subject: Re: Hierarchical Documents
In-Reply-To: <430B18BF.2090408@battelle.org>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_238_22090014.1125238994242"
X-Nabble-Sender: Nabble Forums <lists@nabble.com>
X-Nabble-From: orens <orens@relegence.co.il>
References: <c0edae75050821232716184f67@mail.gmail.com> <430B18BF.2090408@battelle.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_238_22090014.1125238994242
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi All, 

In the article they mention source code for their work, but I couldn't find it. Did anyone implement the ideas mentiond in the article?

Thanks,
Orens
--
Sent from the Lucene - Java Users forum at Nabble.com:
http://www.nabble.com/Hierarchical-Documents-t242604.html#a728669

------=_Part_238_22090014.1125238994242--


From java-user-return-16078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 28 22:24:00 2005
Return-Path: <java-user-return-16078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95519 invoked from network); 28 Aug 2005 22:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Aug 2005 22:24:00 -0000
Received: (qmail 99388 invoked by uid 500); 28 Aug 2005 22:23:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99350 invoked by uid 500); 28 Aug 2005 22:23:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99337 invoked by uid 99); 28 Aug 2005 22:23:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Aug 2005 15:23:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Aug 2005 15:24:11 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j7SMNqCs023888
	for <java-user@lucene.apache.org>; Sun, 28 Aug 2005 23:23:52 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j7SMNquD023887
	for java-user@lucene.apache.org; Sun, 28 Aug 2005 23:23:52 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from haggis.cache.ed.ac.uk (haggis.cache.ed.ac.uk [129.215.13.83]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Sun, 28 Aug 2005 23:23:52 +0100
Message-ID: <1125267832.4312397856421@sms.ed.ac.uk>
Date: Sun, 28 Aug 2005 23:23:52 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Re: Lucene does NOT use UTF-8. 
References: <05Aug27.185622pdt."58617"@synergy1.parc.xerox.com>
In-Reply-To: <05Aug27.185622pdt."58617"@synergy1.parc.xerox.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


http://java.sun.com/docs/books/tutorial/i18n/text/stream.html

Yes, its confusing. Sun calls its own encoding format as "Unicode" and the above
webpage talks about how to convert between Java's Unicode format and the UTF-8
format.

Its just a matter of specifying "UTF-8" when creating output streams. I may have
remembered wrongly, but I do seem to recall old Lucene code that was designed to
run on JDK 1.1 actually did this "UTF-8" conversion.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 04:55:01 2005
Return-Path: <java-user-return-16079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99068 invoked from network); 29 Aug 2005 04:55:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 04:55:01 -0000
Received: (qmail 43864 invoked by uid 500); 29 Aug 2005 04:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43828 invoked by uid 500); 29 Aug 2005 04:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43815 invoked by uid 99); 29 Aug 2005 04:54:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Aug 2005 21:54:56 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Aug 2005 21:55:12 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1E9bfa-0005oD-8u
	for java-user@lucene.apache.org; Sun, 28 Aug 2005 21:54:54 -0700
Message-ID: <731549.post@talk.nabble.com>
Date: Sun, 28 Aug 2005 21:54:54 -0700 (PDT)
From: "kapilChhabra (sent by Nabble.com)" <lists@nabble.com>
Reply-To: kapilChhabra <kapil.chhabra@naukri.com>
To: java-user@lucene.apache.org
Subject: Re: Search Results Clustering
In-Reply-To: <Pine.LNX.4.58.0508241616380.8920@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_247_20185941.1125291294270"
X-Nabble-Sender: Nabble Forums <lists@nabble.com>
X-Nabble-From: kapilChhabra <kapil.chhabra@naukri.com>
References: <696937.post@talk.nabble.com> <Pine.LNX.4.58.0508241616380.8920@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_247_20185941.1125291294270
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


thanks for the response.
I understand that using Filters can do the trick, but there are other issues invloved.
Suppose I cluster the results only on the 1st field i.e. I do not show the constituent clusters.
Even in this case, i'll require around 900 Filters[i have 900 unique terms] in memory and will have to run the same query 900 times, 1 on each Filter.
I am sitting at a situation where I get around 15 queries/sec on an average. Even if I spare another machine to return me the clustering results, I'll be firing 15*90 = 1350 queries/sec.

1. Am I thinking in the right direction?
2. If yes, then what else can be a more feasible solution?


Thanks in anticipation,
kapilChhabra
--
Sent from the Lucene - Java Users forum at Nabble.com:
http://www.nabble.com/Search-Results-Clustering-t249355.html#a731549

------=_Part_247_20185941.1125291294270--


From java-user-return-16080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 08:50:37 2005
Return-Path: <java-user-return-16080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60023 invoked from network); 29 Aug 2005 08:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 08:50:37 -0000
Received: (qmail 1283 invoked by uid 500); 29 Aug 2005 08:50:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1253 invoked by uid 500); 29 Aug 2005 08:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1152 invoked by uid 99); 29 Aug 2005 08:50:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 01:50:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.108.181.138] (HELO quimby.programmfabrik.de) (193.108.181.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 01:50:42 -0700
Received: from [84.188.197.115] (helo=xen)
	by quimby.programmfabrik.de with asmtp (Exim 3.35 #1 (Debian))
	id 1E9eBf-0002bv-00
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 09:36:11 +0200
Received: from [192.168.0.222] (helo=[127.0.0.1])
	by xen with esmtp (Exim 4.34 #1 (Debian))
	id 1E9fLL-0003Qe-Pe
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 10:50:15 +0200
Message-ID: <4312CC6A.2050301@programmfabrik.de>
Date: Mon, 29 Aug 2005 10:50:50 +0200
From: Martin Rode <martin.rode@programmfabrik.de>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Did you mean?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everybody,

Has anyone tried to code a solution like Google's "Did you mean?" in 
Lucene?

I would be very happy to hear your ideas, approaches, suggestions.

Best,
Martin




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 09:51:06 2005
Return-Path: <java-user-return-16081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71757 invoked from network); 29 Aug 2005 09:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 09:51:06 -0000
Received: (qmail 79740 invoked by uid 500); 29 Aug 2005 09:50:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79706 invoked by uid 500); 29 Aug 2005 09:50:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79686 invoked by uid 99); 29 Aug 2005 09:50:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 02:50:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 02:51:15 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j7T9ouCs029105
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 10:50:56 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j7T9ou1N029104
	for java-user@lucene.apache.org; Mon, 29 Aug 2005 10:50:56 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from sausages.cache.ed.ac.uk (sausages.cache.ed.ac.uk [129.215.16.39]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Mon, 29 Aug 2005 10:50:56 +0100
Message-ID: <1125309056.4312da80489a1@sms.ed.ac.uk>
Date: Mon, 29 Aug 2005 10:50:56 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Re: Did you mean?
References: <4312CC6A.2050301@programmfabrik.de>
In-Reply-To: <4312CC6A.2050301@programmfabrik.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quoting Martin Rode <martin.rode@programmfabrik.de>:

> Hi everybody,
>
> Has anyone tried to code a solution like Google's "Did you mean?" in
> Lucene?
>
> I would be very happy to hear your ideas, approaches, suggestions.

I know that what Google does is look at consecutive queries by the same user
that are similar. If the two queries are very similar, with only one or two
characters changed, there is a very high probability that one of the query is a
correct spelling while the other is a "common" misspelling. Its easy to figure
which is the correct spelling by looking up the words in a dictionary. All they
have to do now is add the mispelt store the correct and mispelt word pair in a
mapping table and reference that table for every query.

Of course, this only works because Google's huge query volume ensures that they
can get sufficient quantities of such query pairs.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 10:12:24 2005
Return-Path: <java-user-return-16082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76798 invoked from network); 29 Aug 2005 10:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 10:12:23 -0000
Received: (qmail 14007 invoked by uid 500); 29 Aug 2005 10:12:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13969 invoked by uid 500); 29 Aug 2005 10:12:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13955 invoked by uid 99); 29 Aug 2005 10:12:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 03:12:16 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Martin.Stein@materna.de designates 193.96.115.65 as permitted sender)
Received: from [193.96.115.65] (HELO relay.materna.de) (193.96.115.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 03:12:32 -0700
Received: from ganymed.materna.de (ganymed.materna.de [139.2.34.141])
	by relay.materna.de (Postfix) with ESMTP id 48534680D
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 12:12:14 +0200 (MEST)
Received: from ganymed.materna.de (localhost [127.0.0.1])
	by mail.materna.de (Postfix) with ESMTP id 19C40249CB
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 12:12:14 +0200 (MEST)
Received: from msmailgw1.materna.com (msmailgw1.materna.com [139.2.34.77])
	by mail.materna.de (Postfix) with ESMTP id 045DC249C6
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 12:12:14 +0200 (MEST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Did you mean?
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Mon, 29 Aug 2005 12:12:13 +0200
Message-ID: <FA8D2061DD37E848AD6D4244EF0DED5602C69ACA@ntexc3mat.materna.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Did you mean?
Thread-Index: AcWsdrryn1WY9+rJTA+ZnReSIbXIoQACP+Ug
From: <Martin.Stein@materna.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Martin,


you might want to have a look at=20

http://today.java.net/pub/a/today/2005/08/09/didyoumean.html

This article discusses a solution that uses a separate index consisting =
of n-grams as a dictionary. I haven't tried it myself yet, but I will =
give it a try in the near future.

Regards,

Martin


-----Urspr=FCngliche Nachricht-----
Von: Martin Rode [mailto:martin.rode@programmfabrik.de]
Gesendet: Montag, 29. August 2005 10:51
An: java-user@lucene.apache.org
Betreff: Did you mean?


Hi everybody,

Has anyone tried to code a solution like Google's "Did you mean?" in=20
Lucene?

I would be very happy to hear your ideas, approaches, suggestions.

Best,
Martin




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 10:44:30 2005
Return-Path: <java-user-return-16083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85577 invoked from network); 29 Aug 2005 10:44:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 10:44:30 -0000
Received: (qmail 58618 invoked by uid 500); 29 Aug 2005 10:44:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57677 invoked by uid 500); 29 Aug 2005 10:44:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57660 invoked by uid 99); 29 Aug 2005 10:44:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 03:44:26 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=HTML_IMAGE_ONLY_16,HTML_MESSAGE,SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Aug 2005 03:44:41 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ILZDGL00.8J3 for <java-user@lucene.apache.org>; Mon, 29
          Aug 2005 16:35:09 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: ASK JEEVES
Date: Mon, 29 Aug 2005 16:24:29 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKEEHGCFAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0000_01C5ACB6.21353E50"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C5ACB6.21353E50
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0001_01C5ACB6.21353E50"


------=_NextPart_001_0001_01C5ACB6.21353E50
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi  Luceners

Apologies......



Has any body on the Form attempted  to use  Lucene   for  search  on  FAQ
like the website

"ASK JEEVES"

If So ,Please enlighten me with some ideas...


WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0001_01C5ACB6.21353E50
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><SPAN class=3D687065110-29082005><FONT face=3DVerdana =
size=3D2><STRONG>Hi&nbsp;=20
Luceners</STRONG></FONT></SPAN></P>
<P><SPAN class=3D687065110-29082005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies......</FONT></STRONG></SPAN></P>
<P><SPAN class=3D687065110-29082005><STRONG><FONT face=3DVerdana=20
size=3D2></FONT></STRONG></SPAN>&nbsp;</P>
<P><SPAN class=3D687065110-29082005><STRONG><FONT face=3DVerdana =
size=3D2>Has any body=20
on the Form attempted&nbsp; to use&nbsp; Lucene&nbsp;&nbsp; for&nbsp;=20
search&nbsp;&nbsp;on&nbsp; FAQ&nbsp;&nbsp;&nbsp;like the=20
website</FONT></STRONG></SPAN></P>
<P><SPAN class=3D687065110-29082005><STRONG><FONT face=3DVerdana =
size=3D2>"ASK=20
JEEVES"</FONT></STRONG></SPAN></P>
<P><SPAN class=3D687065110-29082005><STRONG><FONT face=3DVerdana =
size=3D2>If So=20
,Please enlighten me with some ideas...</FONT></STRONG></SPAN></P>
<P><IMG height=3D85 src=3D"cid:687065110@29082005-3184" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0001_01C5ACB6.21353E50--

------=_NextPart_000_0000_01C5ACB6.21353E50--


From java-user-return-16084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 11:26:11 2005
Return-Path: <java-user-return-16084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6284 invoked from network); 29 Aug 2005 11:26:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 11:26:10 -0000
Received: (qmail 5781 invoked by uid 500); 29 Aug 2005 11:26:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5536 invoked by uid 500); 29 Aug 2005 11:26:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5523 invoked by uid 99); 29 Aug 2005 11:26:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 04:26:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.254.108.74] (HELO enigmastation.com) (209.254.108.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 04:26:19 -0700
Received: from joeo (helo=localhost)
	by enigmastation.com with local-esmtp (Exim 4.52)
	id 1E9hm3-0005jN-HQ
	for java-user@lucene.apache.org; Mon, 29 Aug 2005 07:25:59 -0400
Date: Mon, 29 Aug 2005 06:25:59 -0500 (EST)
From: "Joseph B. Ottinger" <joeo@enigmastation.com>
To: java-user@lucene.apache.org
Subject: Re: Did you mean?
In-Reply-To: <4312CC6A.2050301@programmfabrik.de>
Message-ID: <Pine.LNX.4.62.0508290624480.544@enigmastation.com>
References: <4312CC6A.2050301@programmfabrik.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

java.net had an article on this not long ago. See 
http://today.java.net/pub/a/today/2005/08/09/didyoumean.html .

On Mon, 29 Aug 2005, Martin Rode wrote:

> Hi everybody,
>
> Has anyone tried to code a solution like Google's "Did you mean?" in Lucene?
>
> I would be very happy to hear your ideas, approaches, suggestions.
>
> Best,
> Martin
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-----------------------------------------------------------------------
Joseph B. Ottinger                             http://enigmastation.com
Editor, http://www.TheServerSide.com             joeo@enigmastation.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 11:31:45 2005
Return-Path: <java-user-return-16085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7952 invoked from network); 29 Aug 2005 11:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 11:31:44 -0000
Received: (qmail 14212 invoked by uid 500); 29 Aug 2005 11:31:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13611 invoked by uid 500); 29 Aug 2005 11:31:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13598 invoked by uid 99); 29 Aug 2005 11:31:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 04:31:39 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Aug 2005 04:31:54 -0700
Received: (qmail 3551 invoked by uid 0); 29 Aug 2005 11:31:35 -0000
Received: from 80.136.177.190 by www26.gmx.net with HTTP;
	Mon, 29 Aug 2005 13:31:35 +0200 (MEST)
Date: Mon, 29 Aug 2005 13:31:35 +0200 (MEST)
From: dozean@gmx.de
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <20050824190204.17695.qmail@web32207.mail.mud.yahoo.com>
Subject: =?ISO-8859-1?Q?Re:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <24497.1125315095@www26.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

over again a question about updating!
I update my index by first deletion all the documents from index which are
not anymore in the document directories, then i delete all documents from
index which have changed and at last i add all documents to the index which
are not in the index but in the document directories!!!
But i is like that... that all works very good!
But the problem is that it doesn't find all documents to add or delete by
the first running!!! For example i deleted 12 documents from the directory
or i changed them. If i start the application it delete only 7 from index.
If i start the application again it delete the other rest!!! But why?

Why doesn't do it by the first time!!!?

Thanks in forward!
Bye

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 12:52:27 2005
Return-Path: <java-user-return-16086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30378 invoked from network); 29 Aug 2005 12:52:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 12:52:27 -0000
Received: (qmail 60920 invoked by uid 500); 29 Aug 2005 12:52:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60891 invoked by uid 500); 29 Aug 2005 12:52:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60871 invoked by uid 99); 29 Aug 2005 12:52:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 05:52:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 05:52:35 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Mon, 29 Aug 2005 08:52:17 -0400
Message-Id: <s312ccc1.022@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Mon, 29 Aug 2005 08:51:01 -0400
From: "Grant Ingersoll" <GSIngers@syr.edu>
To: <java-user@lucene.apache.org>
Subject: Re: ASK JEEVES
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not sure what Jeeves does, but we index the answers and also store the
questions in a lookup table.  During a search we submit a regular search
to the FAQ index and we also do some query side analysis to see if the
input query is similar to any of the stored questions.

-Grant

>>> karthik@controlnet.co.in 08/29/05 6:54 AM >>>
Hi  Luceners

Apologies......



Has any body on the Form attempted  to use  Lucene   for  search  on 
FAQ
like the website

"ASK JEEVES"

If So ,Please enlighten me with some ideas...


WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 13:05:39 2005
Return-Path: <java-user-return-16087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33488 invoked from network); 29 Aug 2005 13:05:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 13:05:39 -0000
Received: (qmail 90042 invoked by uid 500); 29 Aug 2005 13:05:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89750 invoked by uid 500); 29 Aug 2005 13:05:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89737 invoked by uid 99); 29 Aug 2005 13:05:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 06:05:34 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.46.255.26] (HELO viefep12-int.chello.at) (213.46.255.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 06:05:48 -0700
Received: from genuine ([80.108.136.197]) by viefep12-int.chello.at
          (InterMail vM.6.01.04.04 201-2131-118-104-20050224) with ESMTP
          id <20050829130529.PHNW1634.viefep12-int.chello.at@genuine>
          for <java-user@lucene.apache.org>;
          Mon, 29 Aug 2005 15:05:29 +0200
Received: from [213.164.23.137] (helo=[10.15.10.17])
	by genuine with esmtpa (Exim 4.50)
	id 1E9jIA-0000VY-LX
	for java-user@lucene.apache.org; Mon, 29 Aug 2005 15:03:15 +0200
Message-ID: <43130817.2020706@fischer.name>
Date: Mon, 29 Aug 2005 15:05:27 +0200
From: Markus Fischer <markus@fischer.name>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Creating parser query "by hand"
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0
X-Spam-Level: /
X-Spam-Report: Spam detection software, running on the system "genuine", has
	identified this incoming email as possible spam.  The original message
	has been attached to this so you can view it (if it isn't spam) or label
	similar future email.  If you have any questions, see
	the administrator of that system for details.
	Content preview:  Hi, I currently pass the search tokens as Vector to my
	query function and construct the string to pass to the
	QueryParse.parse() by hand. StringBuffer qStr = new StringBuffer();
	qStr.append("title:" + queryString.trim() + "^7 "); [...] [...] 
	Content analysis details:   (0.0 points, 5.0 required)
	pts rule name              description
	---- ---------------------- --------------------------------------------------
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I currently pass the search tokens as Vector to my query function and 
construct the string to pass to the QueryParse.parse() by hand.

StringBuffer qStr = new StringBuffer();
qStr.append("title:" + queryString.trim() + "^7 ");
[...]

and this append for every field I want to search in.

When I started with lucene I had found a site saying that the 
performance would be better to craft the query token by hand and not 
having QueryParse.parse() parse my string again when I've already 
everything to built the tokens myself.

Unfortuantely I can't find this site again and I can't find an example 
on how it works to actually create the tokens myself and pass them to 
the searcher.

Any help would be appriciated.

thanks,
- Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 13:29:33 2005
Return-Path: <java-user-return-16088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46680 invoked from network); 29 Aug 2005 13:29:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 13:29:33 -0000
Received: (qmail 22167 invoked by uid 500); 29 Aug 2005 13:29:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21855 invoked by uid 500); 29 Aug 2005 13:29:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21842 invoked by uid 99); 29 Aug 2005 13:29:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 06:29:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 06:29:43 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7TDTPje009770
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 09:29:25 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILZ00601K4X2N@lmco.com> for java-user@lucene.apache.org; Mon, 29 Aug 2005 09:29:24 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILZ006XCK4CGF@lmco.com> for java-user@lucene.apache.org; Mon, 29 Aug 2005 09:29:00 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 29 Aug 2005 09:29:00 -0400
Date: Mon, 29 Aug 2005 09:28:59 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: UpdateIndex
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE394D@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-Topic: UpdateIndex
Thread-Index: AcWsjTyCtEy0CqdlQ/C+x5PYfGvbDQAED37A
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 29 Aug 2005 13:29:00.0122 (UTC) FILETIME=[9D7153A0:01C5AC9D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

After you delete / add documents, you need to get a new IndexReader =
instance to reflect the changes.

HTH=20

Aviran
http://www.aviransplace.com=20

-----Original Message-----
From: dozean@gmx.de [mailto:dozean@gmx.de]=20
Sent: Monday, August 29, 2005 7:32 AM
To: java-user@lucene.apache.org
Subject: Re: UpdateIndex

Hi,

over again a question about updating!
I update my index by first deletion all the documents from index which =
are not anymore in the document directories, then i delete all documents =
from index which have changed and at last i add all documents to the =
index which are not in the index but in the document directories!!!
But i is like that... that all works very good!
But the problem is that it doesn't find all documents to add or delete =
by the first running!!! For example i deleted 12 documents from the =
directory or i changed them. If i start the application it delete only 7 =
from index.
If i start the application again it delete the other rest!!! But why?

Why doesn't do it by the first time!!!?

Thanks in forward!
Bye

--
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen f=FCr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 14:04:21 2005
Return-Path: <java-user-return-16089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56971 invoked from network); 29 Aug 2005 14:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 14:04:20 -0000
Received: (qmail 78599 invoked by uid 500); 29 Aug 2005 14:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78578 invoked by uid 500); 29 Aug 2005 14:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78558 invoked by uid 99); 29 Aug 2005 14:04:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 07:04:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 07:04:30 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C874D13E2036; Mon, 29 Aug 2005 10:04:09 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id D219B13E200A
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 10:03:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v734)
In-Reply-To: <43130817.2020706@fischer.name>
References: <43130817.2020706@fischer.name>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BE37A9BF-159D-4467-8661-4874DAC84502@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Creating parser query "by hand"
Date: Mon, 29 Aug 2005 10:03:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Aug 29, 2005, at 9:05 AM, Markus Fischer wrote:
> I currently pass the search tokens as Vector to my query function  
> and construct the string to pass to the QueryParse.parse() by hand.
>
> StringBuffer qStr = new StringBuffer();
> qStr.append("title:" + queryString.trim() + "^7 ");
> [...]
>
> and this append for every field I want to search in.
>
> When I started with lucene I had found a site saying that the  
> performance would be better to craft the query token by hand and  
> not having QueryParse.parse() parse my string again when I've  
> already everything to built the tokens myself.
>
> Unfortuantely I can't find this site again and I can't find an  
> example on how it works to actually create the tokens myself and  
> pass them to the searcher.
>
> Any help would be appriciated.

Whether you parse or not in this case depends on whether the tokens  
in the Vector are exactly the tokens you indexed or not.  If they  
are, then you could create a BooleanQuery, construct a TermQuery for  
each token and add it to the BooleanQuery.  Eliminating the use of  
QueryParser when not needed may not be a performance booster, but it  
certainly eliminates a source of confusion or unexpected queries  
because of QP morphing them via parsing and analysis.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 14:09:43 2005
Return-Path: <java-user-return-16090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59376 invoked from network); 29 Aug 2005 14:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 14:09:43 -0000
Received: (qmail 88557 invoked by uid 500); 29 Aug 2005 14:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88538 invoked by uid 500); 29 Aug 2005 14:09:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88525 invoked by uid 99); 29 Aug 2005 14:09:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 07:09:36 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Aug 2005 07:09:51 -0700
Received: (qmail 23711 invoked by uid 0); 29 Aug 2005 14:09:33 -0000
Received: from 80.136.177.190 by www26.gmx.net with HTTP;
	Mon, 29 Aug 2005 16:09:32 +0200 (MEST)
Date: Mon, 29 Aug 2005 16:09:32 +0200 (MEST)
From: dozean@gmx.de
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <92A278501EF50444AD3EE1FFB51219550BCE394D@emss10m03.rck.atm.lmco.com>
Subject: =?ISO-8859-1?Q?RE:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <12804.1125324572@www26.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

for (int i=0; i<reader.numDocs(); i++) {
  Document doc =reader.document(i);
  String path = doc.get("path");
  File file = new File(path);
  long dl = Long.parseLong(doc.get("date"));
  long fl = new File(path).lastModified();

if (!file.exists()) {reader.delete(i);}

}

i need a new IndexReader for each i?


> --- Ursprngliche Nachricht ---
> Von: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
> An: java-user@lucene.apache.org
> Betreff: RE: UpdateIndex
> Datum: Mon, 29 Aug 2005 09:28:59 -0400
> 
> After you delete / add documents, you need to get a new IndexReader
> instance to reflect the changes.
> 
> HTH 
> 
> Aviran
> http://www.aviransplace.com 
> 
> -----Original Message-----
> From: dozean@gmx.de [mailto:dozean@gmx.de] 
> Sent: Monday, August 29, 2005 7:32 AM
> To: java-user@lucene.apache.org
> Subject: Re: UpdateIndex
> 
> Hi,
> 
> over again a question about updating!
> I update my index by first deletion all the documents from index which are
> not anymore in the document directories, then i delete all documents >from
> index which have changed and at last i add all documents to the index
> which are not in the index but in the document directories!!!
> But i is like that... that all works very good!
> But the problem is that it doesn't find all documents to add or delete by
> the first running!!! For example i deleted 12 documents from the directory
> or i changed them. If i start the application it delete only 7 >from
index.
> If i start the application again it delete the other rest!!! But why?
> 
> Why doesn't do it by the first time!!!?
> 
> Thanks in forward!
> Bye
> 
> --
> Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
> Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 14:30:29 2005
Return-Path: <java-user-return-16091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67897 invoked from network); 29 Aug 2005 14:30:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 14:30:29 -0000
Received: (qmail 32538 invoked by uid 500); 29 Aug 2005 14:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32511 invoked by uid 500); 29 Aug 2005 14:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32498 invoked by uid 99); 29 Aug 2005 14:30:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 07:30:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 07:30:36 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7TEUIje015800
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 10:30:19 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0ILZ00M01MYI7D@lmco.com> for java-user@lucene.apache.org; Mon, 29 Aug 2005 10:30:18 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0ILZ00CX7MYI2Y@lmco.com> for java-user@lucene.apache.org; Mon, 29 Aug 2005 10:30:18 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 29 Aug 2005 10:30:18 -0400
Date: Mon, 29 Aug 2005 10:30:18 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: UpdateIndex
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE394F@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-Topic: UpdateIndex
Thread-Index: AcWso4VbJpQV6M31Tsm2W9B2uT8WrQAAnTpA
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 29 Aug 2005 14:30:18.0661 (UTC) FILETIME=[2E05D550:01C5ACA6]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No, just at the end of the delete loop get a new reader instance.

Aviran
http://www.aviransplace.com=20


-----Original Message-----
From: dozean@gmx.de [mailto:dozean@gmx.de]=20
Sent: Monday, August 29, 2005 10:10 AM
To: java-user@lucene.apache.org
Subject: RE: UpdateIndex

for (int i=3D0; i<reader.numDocs(); i++) {
  Document doc =3Dreader.document(i);
  String path =3D doc.get("path");
  File file =3D new File(path);
  long dl =3D Long.parseLong(doc.get("date"));
  long fl =3D new File(path).lastModified();

if (!file.exists()) {reader.delete(i);}

}

i need a new IndexReader for each i?


> --- Urspr=FCngliche Nachricht ---
> Von: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
> An: java-user@lucene.apache.org
> Betreff: RE: UpdateIndex
> Datum: Mon, 29 Aug 2005 09:28:59 -0400
>=20
> After you delete / add documents, you need to get a new IndexReader=20
> instance to reflect the changes.
>=20
> HTH
>=20
> Aviran
> http://www.aviransplace.com
>=20
> -----Original Message-----
> From: dozean@gmx.de [mailto:dozean@gmx.de]
> Sent: Monday, August 29, 2005 7:32 AM
> To: java-user@lucene.apache.org
> Subject: Re: UpdateIndex
>=20
> Hi,
>=20
> over again a question about updating!
> I update my index by first deletion all the documents from index which =

> are not anymore in the document directories, then i delete all=20
> documents >from index which have changed and at last i add all=20
> documents to the index which are not in the index but in the document =
directories!!!
> But i is like that... that all works very good!
> But the problem is that it doesn't find all documents to add or delete =

> by the first running!!! For example i deleted 12 documents from the=20
> directory or i changed them. If i start the application it delete only =

> 7 >from
index.
> If i start the application again it delete the other rest!!! But why?
>=20
> Why doesn't do it by the first time!!!?
>=20
> Thanks in forward!
> Bye
>=20
> --
> Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
> Satte Provisionen f=FCr GMX Partner: http://www.gmx.net/de/go/partner
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen f=FCr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 14:45:18 2005
Return-Path: <java-user-return-16092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72200 invoked from network); 29 Aug 2005 14:45:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 14:45:18 -0000
Received: (qmail 60031 invoked by uid 500); 29 Aug 2005 14:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60001 invoked by uid 500); 29 Aug 2005 14:45:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59966 invoked by uid 99); 29 Aug 2005 14:45:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 07:45:12 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.115.67.77] (HELO trixi.wincor-nixdorf.com) (217.115.67.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 07:45:28 -0700
Received: from zipp.wincor-nixdorf.com (this.is.a.RFC1918.address [172.24.192.70] (may be forged))
	by trixi.wincor-nixdorf.com (8.12.11/8.12.11) with ESMTP id j7TEqYT9005643
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 16:52:34 +0200
Received: from deexcs02.wincor-nixdorf.com (deexcs02.wincor-nixdorf.com [172.18.160.72])
	by zipp.wincor-nixdorf.com (8.12.8/8.12.8) with ESMTP id j7TEj9WB001855
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 16:45:09 +0200
Received: from DEEXVS01.wincor-nixdorf.com ([172.18.160.81]) by deexcs02.wincor-nixdorf.com with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 29 Aug 2005 16:45:09 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5ACA8.3C8F8B81"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: Inconsistent tokenizing of words containing underscores.
Date: Mon, 29 Aug 2005 16:45:02 +0200
Message-ID: <9391EFF529350A4A9AAC16AAAAD9B5C60A3A05@DEEXVS01.wincor-nixdorf.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inconsistent tokenizing of words containing underscores.
Thread-Index: AcWsqEBBKSeJ7iasRVWQHHAo4NBDQw==
From: "Is, Studcio" <Studcio.is@wincor-nixdorf.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Aug 2005 14:45:09.0104 (UTC) FILETIME=[40C4A700:01C5ACA8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5ACA8.3C8F8B81
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
I'm using Lucene for a few weeks now in a small project and just ran
into a problem. My index contains words that contain one or more
underlines, e.g. XYZZZY_DE_SA0001 or XYZZZY_AT0001. Unfortunately the
tokenizer tokenizes / splits the word into multiple tokens at the
underscores, except the last underscore.=20
=20
For example the word XYZZZY_DE_SA0001 is tokenized as follows:
=20
1. Token: XYZZY=20
2. Token: DE_SA0001
=20
which is not conforming to expectations. Either the tokenizer should
split at every underscore or at none.
=20
I'm using Lucene 1.4.3 with
org.apache.lucene.analysis.standard.StandardAnalyzer and Java 1.4.2_08.
=20
Has anybody experienced the same behaviour or can explain it? Could it
be a bug in the StandardTokenizer?
=20
Many thanks in advance
=20
Sebastian Seitz

------_=_NextPart_001_01C5ACA8.3C8F8B81--

From java-user-return-16093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 15:01:04 2005
Return-Path: <java-user-return-16093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76448 invoked from network); 29 Aug 2005 15:01:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 15:01:03 -0000
Received: (qmail 84405 invoked by uid 500); 29 Aug 2005 15:01:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83478 invoked by uid 500); 29 Aug 2005 15:01:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83463 invoked by uid 99); 29 Aug 2005 15:01:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 08:01:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Aug 2005 08:01:14 -0700
Received: (qmail 17179 invoked by uid 0); 29 Aug 2005 15:00:56 -0000
Received: from 80.136.177.190 by www26.gmx.net with HTTP;
	Mon, 29 Aug 2005 17:00:56 +0200 (MEST)
Date: Mon, 29 Aug 2005 17:00:56 +0200 (MEST)
From: "Derya Kasapoglu" <dozean@gmx.de>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <92A278501EF50444AD3EE1FFB51219550BCE394F@emss10m03.rck.atm.lmco.com>
Subject: =?ISO-8859-1?Q?RE:_UpdateIndex?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <20713.1125327656@www26.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you for your help!
But it doesn't work that way!!

My code is: 

IndexReader reader = IndexReader.open(dir);

for (int i=0; i<reader.numDocs(); i++) {

        Document doc =reader.document(i);
        String path = doc.get("path");
	File file = new File(path);

        if (!file.exists()) reader.delete(i); 
}

reader.close();

So... but it doesn't delete the documents by the first start!
I mean if i say 
if (!file.exists()) System.out.println(path);
i get all documents which are not in the directory 
but if i say reader.delete(i) it deletes in first run
for example only 12 of 20 documents (it's different)!!

> --- Ursprngliche Nachricht ---
> Von: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
> An: java-user@lucene.apache.org
> Betreff: RE: UpdateIndex
> Datum: Mon, 29 Aug 2005 10:30:18 -0400
> 
> No, just at the end of the delete loop get a new reader instance.
> 
> Aviran
> http://www.aviransplace.com 
> 
> 
> -----Original Message-----
> From: dozean@gmx.de [mailto:dozean@gmx.de] 
> Sent: Monday, August 29, 2005 10:10 AM
> To: java-user@lucene.apache.org
> Subject: RE: UpdateIndex
> 
> for (int i=0; i<reader.numDocs(); i++) {
>   Document doc =reader.document(i);
>   String path = doc.get("path");
>   File file = new File(path);
>   long dl = Long.parseLong(doc.get("date"));
>   long fl = new File(path).lastModified();
> 
> if (!file.exists()) {reader.delete(i);}
> 
> }
> 
> i need a new IndexReader for each i?
> 
> 
> > --- Ursprngliche Nachricht ---
> > Von: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
> > An: java-user@lucene.apache.org
> > Betreff: RE: UpdateIndex
> > Datum: Mon, 29 Aug 2005 09:28:59 -0400
> > 
> > After you delete / add documents, you need to get a new IndexReader 
> > instance to reflect the changes.
> > 
> > HTH
> > 
> > Aviran
> > http://www.aviransplace.com
> > 
> > -----Original Message-----
> > From: dozean@gmx.de [mailto:dozean@gmx.de]
> > Sent: Monday, August 29, 2005 7:32 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: UpdateIndex
> > 
> > Hi,
> > 
> > over again a question about updating!
> > I update my index by first deletion all the documents from index which 
> > are not anymore in the document directories, then i delete all 
> > documents >from index which have changed and at last i add all 
> > documents to the index which are not in the index but in the document
> directories!!!
> > But i is like that... that all works very good!
> > But the problem is that it doesn't find all documents to add or delete 
> > by the first running!!! For example i deleted 12 documents from the 
> > directory or i changed them. If i start the application it delete only 
> > 7 >from
> index.
> > If i start the application again it delete the other rest!!! But why?
> > 
> > Why doesn't do it by the first time!!!?
> > 
> > Thanks in forward!
> > Bye
> > 
> > --
> > Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
> > Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> --
> Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
> Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
Satte Provisionen fr GMX Partner: http://www.gmx.net/de/go/partner

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 15:25:20 2005
Return-Path: <java-user-return-16094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83699 invoked from network); 29 Aug 2005 15:25:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 15:25:20 -0000
Received: (qmail 22453 invoked by uid 500); 29 Aug 2005 15:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22433 invoked by uid 500); 29 Aug 2005 15:25:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22417 invoked by uid 99); 29 Aug 2005 15:25:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 08:25:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.151.65.48] (HELO msmail.textwise.com) (67.151.65.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 08:25:28 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: query performance behavior not as expected
Date: Mon, 29 Aug 2005 11:24:56 -0400
Message-ID: <6134F668515B04409948FBEB644A3E0D3A7448@msmail.textwise.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: query performance behavior not as expected
Thread-Index: AcWsrtfaxzmDVcp6ScKvL1z2T57jZg==
From: "Greg Conway" <gconway@textwise.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello.  I've got a problem perhaps some of you have  help with.

I have an application that has to use fairly long queries (containing =
about 30 terms or'ed together) against an index of about 500K documents. =
 Because of the limited vocabulary I'm indexing and querying over (~2000 =
terms), the size of the query, and the number of documents involved my =
search times are running a little long.  I'd like to speed them up a =
little more if possible.

One approach I've tried is structuring the queries such that one (or =
more) of a subset of the entire 30 terms is required, the rest being =
optional, as in:

+(term1 term2 term3 ... term10) term11 term12 term13 ... term30

this yielded a search time (on average) of about 50 msecs.

I then assumed that if I reduced the size of the required set from 10 to =
5, I would get fewer documents to score against and query performance =
would increase.  So I tried something like this:

+(term1 term2 term3 term4 term5) term6 term7 ... term30

To my surprise, the performance of the overall query didn't change =
(actually, it was slower, at about 63 msecs on average).   My =
expectation about the way lucene would interpret and execute this query =
was apparently incorrect.  =20

The obvious answer here might be to use a filter for the first =
(required) clause and then query again using that filter for the other  =
terms.  The problem I forsee with that solution is that I can't easily =
re-use the filters because of the sheer number of combinations of terms =
and the need to re-open my readers/searchers every few minutes to expose =
the steady stream of updates to querying on a regular basis.  As I =
understand it re-using a filter (rather than creating it, using it, and =
discarding it) is integral to it's value as a time saver and thus maybe =
not appropriate in this case.

Any thoughts or advice would be appreciated.  Many thanks in advance!

Greg Conway
Textwise Labs






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 15:43:03 2005
Return-Path: <java-user-return-16095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88893 invoked from network); 29 Aug 2005 15:43:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 15:43:03 -0000
Received: (qmail 47067 invoked by uid 500); 29 Aug 2005 15:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46727 invoked by uid 500); 29 Aug 2005 15:42:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46712 invoked by uid 99); 29 Aug 2005 15:42:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 08:42:56 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of thomlep@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 08:43:12 -0700
Received: by zproxy.gmail.com with SMTP id n29so597811nzf
        for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 08:42:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Gzg8m9IEytg3bOmDuMQ9aiqq8wo2DFWf6Kjbii73tDYJ+7VGqeLcFq9qbXkgeh0wDEeZ48DCrhIbKQaN5ZcWD+TutDHioC0sBQIxfeG7HNFg1ywBYkTwjcyYSlV4u6JzAYkR1Hy7BmlZ4qev1cWiq6TM9gZPUuameVijuGDV13Q=
Received: by 10.36.65.13 with SMTP id n13mr995094nza;
        Mon, 29 Aug 2005 08:42:54 -0700 (PDT)
Received: by 10.36.25.4 with HTTP; Mon, 29 Aug 2005 08:42:54 -0700 (PDT)
Message-ID: <d76e8536050829084264fac01a@mail.gmail.com>
Date: Mon, 29 Aug 2005 11:42:54 -0400
From: Thomas Lepkowski <thomlep@gmail.com>
To: java-user@lucene.apache.org
Subject: Index files in jar
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13589_30089781.1125330174830"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13589_30089781.1125330174830
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,

I have a set of index files that I'd like to distribute with my Java=20
application. The only way this seems practical is to place the index files=
=20
in a jar file. I tried this, but the search choked when I told IndexSearche=
r=20
the index path inside the jar file ( and placed the jar file path in the=20
CLASSPATH ).

Any ideas on wrapping my index files inside a jar file?

Thanks in advance for any help.

-Tom

------=_Part_13589_30089781.1125330174830--

From java-user-return-16096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 16:29:20 2005
Return-Path: <java-user-return-16096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1247 invoked from network); 29 Aug 2005 16:29:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 16:29:20 -0000
Received: (qmail 13441 invoked by uid 500); 29 Aug 2005 16:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13413 invoked by uid 500); 29 Aug 2005 16:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13400 invoked by uid 99); 29 Aug 2005 16:29:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 09:29:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.238.9.116] (HELO exchange.allegromedical.com) (66.238.9.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 09:29:29 -0700
Received: from localhost [127.0.0.1]
	by exchange.allegromedical.com
	with XWall v3.34 ;
	Mon, 29 Aug 2005 09:29:03 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: Index location
Date: Mon, 29 Aug 2005 09:29:03 -0700
Message-ID: <B5ADCC4EA669BF4697F6AF63FF32867401AA10D6@exch01.allegro.med>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index location
Thread-Index: AcWZw+0pCNvTFTC8RKOsvjkQuTQ8yAS8Mx5A
From: "Mufaddal Khumri" <MKhumri@allegromedical.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have been trying to control where lucene creates the search index for
my web application.

I am tweaking the following code in order to specify the location for
the index, but it seems that lucene is creating the index in the
location from where my CreateIndex.class is invoked.

Here is the code:

public class CreateSearchIndex
{ =20
  // ....
  // .....
  public static void main(String[] args)
  {   =20
    try
    {     =20
	  String indexPath =3D=20
        "/xyz/default-site/WEB-INF/products-search-index";
        initIndex(indexPath);
    }
    catch(Exception ex)
    {
      ex.printStackTrace();
    }
  }

  // ...
  // ...
=09
  public void initIndex(String indexPath) throws IOException
  {
     fsWriter =3D new IndexWriter(indexPath, analyzer, true);
  }
}

I invoke the above class via an ant task from the default-site directory
and my index gets created in the same directory. I want to create it in
the default-site/WEB-INF directory instead? Any pointers as to where I
might be going wrong?

Thanks,
Mufaddal.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 16:56:17 2005
Return-Path: <java-user-return-16097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9421 invoked from network); 29 Aug 2005 16:56:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 16:56:17 -0000
Received: (qmail 51775 invoked by uid 500); 29 Aug 2005 16:56:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51748 invoked by uid 500); 29 Aug 2005 16:56:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51732 invoked by uid 99); 29 Aug 2005 16:56:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 09:56:12 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.35] (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Aug 2005 09:56:27 -0700
Received: (qmail 49768 invoked by uid 60001); 29 Aug 2005 16:56:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=oYSWbY2gkeJK73xe+jCvfh6p9B9gWmglt8wub87tTqEuWgwIH2CEIg5KBmPTx+e92Ro8F+1KNfkvQdo7FeL/+vged0OvX7alKUvporMmv89sUcaFxoU7PjOHjhxwNYEIe0SeDsoxn3+4G7uKyVRKLHQ4uOxwNgLbmqwCVIGv+ek=  ;
Message-ID: <20050829165608.49766.qmail@web31102.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31102.mail.mud.yahoo.com via HTTP; Mon, 29 Aug 2005 09:56:08 PDT
Date: Mon, 29 Aug 2005 09:56:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Inconsistent tokenizing of words containing underscores.
To: java-user@lucene.apache.org
In-Reply-To: <9391EFF529350A4A9AAC16AAAAD9B5C60A3A05@DEEXVS01.wincor-nixdorf.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That's StandardAnalyzer's expeceted behaviour.  If you want
tokenization to occur only on white spaces, use WhitespaceAnalyzer.  If
you want custom behaviour, you should write an Analyzer (there should
be a FAQ entry with an example).

Otis

--- "Is, Studcio" <Studcio.is@wincor-nixdorf.com> wrote:

> Hello,
>  
> I'm using Lucene for a few weeks now in a small project and just ran
> into a problem. My index contains words that contain one or more
> underlines, e.g. XYZZZY_DE_SA0001 or XYZZZY_AT0001. Unfortunately the
> tokenizer tokenizes / splits the word into multiple tokens at the
> underscores, except the last underscore. 
>  
> For example the word XYZZZY_DE_SA0001 is tokenized as follows:
>  
> 1. Token: XYZZY 
> 2. Token: DE_SA0001
>  
> which is not conforming to expectations. Either the tokenizer should
> split at every underscore or at none.
>  
> I'm using Lucene 1.4.3 with
> org.apache.lucene.analysis.standard.StandardAnalyzer and Java
> 1.4.2_08.
>  
> Has anybody experienced the same behaviour or can explain it? Could
> it
> be a bug in the StandardTokenizer?
>  
> Many thanks in advance
>  
> Sebastian Seitz
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 17:08:42 2005
Return-Path: <java-user-return-16098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12647 invoked from network); 29 Aug 2005 17:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 17:08:42 -0000
Received: (qmail 74958 invoked by uid 500); 29 Aug 2005 17:08:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74928 invoked by uid 500); 29 Aug 2005 17:08:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74915 invoked by uid 99); 29 Aug 2005 17:08:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 10:08:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 66.249.82.200 as permitted sender)
Received: from [66.249.82.200] (HELO xproxy.gmail.com) (66.249.82.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 10:08:51 -0700
Received: by xproxy.gmail.com with SMTP id h28so655057wxd
        for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 10:08:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IwZdtBvM9dKelnZQ+BOtMkc3OfcPval0FFIPDqqu/Gq2eWvPWLuYWfU5ah9QuvH5CyBdiWgwKr2y7wFu4bLFVCOVpEaIyW4DhRgxOsokvd5E4pEGBWd5zOGiL6RmruHSq9K6FRPH2Glpai+RbR/xWD9JrhTOjXRK5OuuUJELDvY=
Received: by 10.70.22.10 with SMTP id 10mr100566wxv;
        Mon, 29 Aug 2005 10:08:34 -0700 (PDT)
Received: by 10.70.23.8 with HTTP; Mon, 29 Aug 2005 10:08:34 -0700 (PDT)
Message-ID: <6e3ae631050829100817417e77@mail.gmail.com>
Date: Mon, 29 Aug 2005 10:08:34 -0700
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Did you mean?
In-Reply-To: <Pine.LNX.4.62.0508290624480.544@enigmastation.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4312CC6A.2050301@programmfabrik.de>
	 <Pine.LNX.4.62.0508290624480.544@enigmastation.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Constructing a separated index as a dictionary is one part of solution.

The other part is to construct a dictionary with a list of possible
"good words".
By "good words", I mean all leagal queries, not necessarily "correct words"=
.
Two approaches I can think of:
* Use a word list(it may not be the word list you want, but it is just
a compromise).
* Analyze your original index, listing out all words inside.

There should be other approaches. Anyone?

--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net

On 8/29/05, Joseph B. Ottinger <joeo@enigmastation.com> wrote:
> java.net had an article on this not long ago. See
> http://today.java.net/pub/a/today/2005/08/09/didyoumean.html .
>=20
> On Mon, 29 Aug 2005, Martin Rode wrote:
>=20
> > Hi everybody,
> >
> > Has anyone tried to code a solution like Google's "Did you mean?" in Lu=
cene?
> >
> > I would be very happy to hear your ideas, approaches, suggestions.
> >
> > Best,
> > Martin
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> -----------------------------------------------------------------------
> Joseph B. Ottinger                             http://enigmastation.com
> Editor, http://www.TheServerSide.com             joeo@enigmastation.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 17:22:12 2005
Return-Path: <java-user-return-16099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17676 invoked from network); 29 Aug 2005 17:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 17:22:12 -0000
Received: (qmail 88799 invoked by uid 500); 29 Aug 2005 17:22:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88772 invoked by uid 500); 29 Aug 2005 17:22:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88759 invoked by uid 99); 29 Aug 2005 17:22:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 10:22:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [71.4.78.4] (HELO mail.part.net) (71.4.78.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 10:22:21 -0700
Received: from americium ([192.168.5.195])
  by mail.part.net with esmtp; Mon, 29 Aug 2005 11:22:01 -0600
From: "Jeremy Meyer" <jmeyer@part.net>
To: java-user@lucene.apache.org
Subject: RE: Inconsistent tokenizing of words containing underscores.
Date: Mon, 29 Aug 2005 11:21:21 -0600
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <20050829165608.49766.qmail@web31102.mail.mud.yahoo.com>
Thread-Index: AcWsupaS35QSre9ySC26mBmhmyVMigAAyBKQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20050829172222.B11D610FB2B1@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The expected behavior is to sometimes treat a character as indicating a new
token and other times to ignore the same character?

This sounds like behavior that should be much better documented than it
currently is.

Why would this be the default? What cases is it meant for?

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Monday, August 29, 2005 10:56 AM
To: java-user@lucene.apache.org
Subject: Re: Inconsistent tokenizing of words containing underscores.

That's StandardAnalyzer's expeceted behaviour.  If you want
tokenization to occur only on white spaces, use WhitespaceAnalyzer.  If
you want custom behaviour, you should write an Analyzer (there should
be a FAQ entry with an example).

Otis

--- "Is, Studcio" <Studcio.is@wincor-nixdorf.com> wrote:

> Hello,
>  
> I'm using Lucene for a few weeks now in a small project and just ran
> into a problem. My index contains words that contain one or more
> underlines, e.g. XYZZZY_DE_SA0001 or XYZZZY_AT0001. Unfortunately the
> tokenizer tokenizes / splits the word into multiple tokens at the
> underscores, except the last underscore. 
>  
> For example the word XYZZZY_DE_SA0001 is tokenized as follows:
>  
> 1. Token: XYZZY 
> 2. Token: DE_SA0001
>  
> which is not conforming to expectations. Either the tokenizer should
> split at every underscore or at none.
>  
> I'm using Lucene 1.4.3 with
> org.apache.lucene.analysis.standard.StandardAnalyzer and Java
> 1.4.2_08.
>  
> Has anybody experienced the same behaviour or can explain it? Could
> it
> be a bug in the StandardTokenizer?
>  
> Many thanks in advance
>  
> Sebastian Seitz
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 17:31:51 2005
Return-Path: <java-user-return-16100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21187 invoked from network); 29 Aug 2005 17:31:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 17:31:51 -0000
Received: (qmail 99165 invoked by uid 500); 29 Aug 2005 17:31:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99136 invoked by uid 500); 29 Aug 2005 17:31:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99121 invoked by uid 99); 29 Aug 2005 17:31:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 10:31:45 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jharuska@gmail.com designates 66.249.82.206 as permitted sender)
Received: from [66.249.82.206] (HELO xproxy.gmail.com) (66.249.82.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 10:32:01 -0700
Received: by xproxy.gmail.com with SMTP id h33so1253wxd
        for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 10:31:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LRml9HmzXU0B4dPWYMfLpMqXK0JPcsgZXIbrm3GYtAClSY7DbaEn+1wxcpOgFearQJfJoVdaqg5bj/CjX0TWZQ/iChS/fmq7l7T//c/fE7zJGlIvtmJvHgKWD0vVgk1fvWr1R5qa0fwKi113xkvvAzyOTNnp1vp05n2M08QFCkA=
Received: by 10.70.56.20 with SMTP id e20mr1090wxa;
        Mon, 29 Aug 2005 10:31:43 -0700 (PDT)
Received: by 10.70.55.8 with HTTP; Mon, 29 Aug 2005 10:31:43 -0700 (PDT)
Message-ID: <5fbbcd140508291031670f656d@mail.gmail.com>
Date: Mon, 29 Aug 2005 13:31:43 -0400
From: Jason Haruska <jharuska@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Did you mean?
In-Reply-To: <6e3ae631050829100817417e77@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_193_6469188.1125336703658"
References: <4312CC6A.2050301@programmfabrik.de>
	 <Pine.LNX.4.62.0508290624480.544@enigmastation.com>
	 <6e3ae631050829100817417e77@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_193_6469188.1125336703658
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

To add to other comments:

This functionality should also look at how common a term is in the corpus.=
=20
Using the corpus as "correct" set of terms to search on isn't always what=
=20
you want if the corpus is unclean (misspellings, etc.)

I believe this is why if you search on an uncommon term, Google will try to=
=20
suggest something more common, even if you spelled the term correctly.

On 8/29/05, Chris Lu <chris.lu@gmail.com> wrote:
>=20
> Constructing a separated index as a dictionary is one part of solution.
>=20
> The other part is to construct a dictionary with a list of possible
> "good words".
> By "good words", I mean all leagal queries, not necessarily "correct=20
> words".
> Two approaches I can think of:
> * Use a word list(it may not be the word list you want, but it is just
> a compromise).
> * Analyze your original index, listing out all words inside.
>=20
> There should be other approaches. Anyone?
>=20
> --
> Chris Lu
> ------------
> Lucene Search RAD on Any Database
> http://www.dbsight.net
>=20
> On 8/29/05, Joseph B. Ottinger <joeo@enigmastation.com> wrote:
> > java.net <http://java.net> had an article on this not long ago. See
> > http://today.java.net/pub/a/today/2005/08/09/didyoumean.html .
> >
> > On Mon, 29 Aug 2005, Martin Rode wrote:
> >
> > > Hi everybody,
> > >
> > > Has anyone tried to code a solution like Google's "Did you mean?" in=
=20
> Lucene?
> > >
> > > I would be very happy to hear your ideas, approaches, suggestions.
> > >
> > > Best,
> > > Martin
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > -----------------------------------------------------------------------
> > Joseph B. Ottinger http://enigmastation.com
> > Editor, http://www.TheServerSide.com joeo@enigmastation.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_193_6469188.1125336703658--

From java-user-return-16101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 17:47:12 2005
Return-Path: <java-user-return-16101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28719 invoked from network); 29 Aug 2005 17:47:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 17:47:11 -0000
Received: (qmail 27976 invoked by uid 500); 29 Aug 2005 17:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27743 invoked by uid 500); 29 Aug 2005 17:47:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 66338 invoked by uid 99); 29 Aug 2005 15:59:43 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_WHOIS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dsale@eb.com designates 216.146.93.140 as permitted sender)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C5ACB2.A9F6C920"
Subject: RE: Index files in jar
Date: Mon, 29 Aug 2005 10:59:40 -0500
Message-ID: <A4139F39D61F9B4AA7A5F8A5B92F1B1701DD9735@exc054corp.britannica.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <A4139F39D61F9B4AA7A5F8A5B92F1B1701DD9735@exc054corp.britannica.net>
Thread-Topic: Index files in jar
Thread-Index: AcWssFnJR/PJbl+uRRism/fE9EvsawAAMW3P
From: "Sale, Doug" <dsale@eb.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5ACB2.A9F6C920
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

this would indeed be useful, it's something i've considered doing as =
well.  i'm assuming a read-only implementation (perhaps with some static =
method for creating a JAR from an existing Directory); not a =
concurrently indexed and searched impl.

does anybody know of such code, or of any limitations that would prevent =
such code from being implemented?  would performance suffer over a =
FSDirectory?

-doug

-----Original Message-----
From: Thomas Lepkowski [mailto:thomlep@gmail.com]
Sent: Mon 8/29/2005 10:42 AM
To: java-user@lucene.apache.org
Subject: Index files in jar
=20
Hello,

I have a set of index files that I'd like to distribute with my Java=20
application. The only way this seems practical is to place the index =
files=20
in a jar file. I tried this, but the search choked when I told =
IndexSearcher=20
the index path inside the jar file ( and placed the jar file path in the =

CLASSPATH ).

Any ideas on wrapping my index files inside a jar file?

Thanks in advance for any help.

-Tom



------_=_NextPart_001_01C5ACB2.A9F6C920
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C5ACB2.A9F6C920--

From java-user-return-16102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 17:49:15 2005
Return-Path: <java-user-return-16102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29507 invoked from network); 29 Aug 2005 17:49:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 17:49:15 -0000
Received: (qmail 29916 invoked by uid 500); 29 Aug 2005 17:49:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29897 invoked by uid 500); 29 Aug 2005 17:49:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 72610 invoked by uid 99); 29 Aug 2005 17:07:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Index files in jar
Date: Mon, 29 Aug 2005 10:07:47 -0700
Message-ID: <1A6B6A5A3597C340BB63728001DC787902330FB0@kodos.na.wrq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index files in jar
thread-index: AcWssFRMXsX5lJXCR0ihR0mgWwpU2QABKEwA
From: "Jon Schuster" <jons@attachmatewrq.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Aug 2005 17:07:48.0216 (UTC) FILETIME=[2E657F80:01C5ACBC]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Tom,

You could distribute your index files in a plain old directory outside
of a jar file and install them with your application, then use
FSDirectory to read from the installed location.

But I can think of at least two ways to get the index files packaged
into the application jar. One would be to write your own subclass of
Directory (and perhaps IndexReader) that knows how to read entries
directly from the jar file using JarInputStream. The other would be to
use a RAMDirectory and populate the directory with the index files,
perhaps reading the files using Class.getResourceAsStream or by creating
a JarInputStream from an URL to the application jar.

You can easily get an InputStream to your own application jar like this:

	CodeSource cs =3D theClass.getProtectionDomain().getCodeSource();
	URL providerURL =3D cs.getLocation();
	InputStream is =3D providerURL.openStream();

Have fun,
--Jon


-----Original Message-----
From: Thomas Lepkowski [mailto:thomlep@gmail.com]=20
Sent: Monday, August 29, 2005 8:43 AM
To: java-user@lucene.apache.org
Subject: Index files in jar


Hello,

I have a set of index files that I'd like to distribute with my Java=20
application. The only way this seems practical is to place the index
files=20
in a jar file. I tried this, but the search choked when I told
IndexSearcher=20
the index path inside the jar file ( and placed the jar file path in the

CLASSPATH ).

Any ideas on wrapping my index files inside a jar file?

Thanks in advance for any help.

-Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 18:21:44 2005
Return-Path: <java-user-return-16103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49411 invoked from network); 29 Aug 2005 18:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 18:21:44 -0000
Received: (qmail 94728 invoked by uid 500); 29 Aug 2005 18:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94706 invoked by uid 500); 29 Aug 2005 18:21:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94692 invoked by uid 99); 29 Aug 2005 18:21:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 11:21:37 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 11:21:52 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.3/8.13.3) with ESMTP id j7TILYgG006665
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 20:21:34 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: query performance behavior not as expected
Date: Mon, 29 Aug 2005 20:21:33 +0200
User-Agent: KMail/1.5.4
References: <6134F668515B04409948FBEB644A3E0D3A7448@msmail.textwise.com>
In-Reply-To: <6134F668515B04409948FBEB644A3E0D3A7448@msmail.textwise.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508292021.33739.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 29 August 2005 17:24, Greg Conway wrote:
> Hello.  I've got a problem perhaps some of you have  help with.
> 
> I have an application that has to use fairly long queries (containing about 
30 terms or'ed together) against an index of about 500K documents.  Because 
of the limited vocabulary I'm indexing and querying over (~2000 terms), the 
size of the query, and the number of documents involved my search times are 
running a little long.  I'd like to speed them up a little more if possible.
> 
> One approach I've tried is structuring the queries such that one (or more) 
of a subset of the entire 30 terms is required, the rest being optional, as 
in:
> 
> +(term1 term2 term3 ... term10) term11 term12 term13 ... term30
> 
> this yielded a search time (on average) of about 50 msecs.
> 
> I then assumed that if I reduced the size of the required set from 10 to 5, 
I would get fewer documents to score against and query performance would 
increase.  So I tried something like this:
> 
> +(term1 term2 term3 term4 term5) term6 term7 ... term30
> 
> To my surprise, the performance of the overall query didn't change 
(actually, it was slower, at about 63 msecs on average).   My expectation 
about the way lucene would interpret and execute this query was apparently 
incorrect.
> 
> The obvious answer here might be to use a filter for the first (required) 
clause and then query again using that filter for the other  terms.  The 
problem I forsee with that solution is that I can't easily re-use the filters 
because of the sheer number of combinations of terms and the need to re-open 
my readers/searchers every few minutes to expose the steady stream of updates 
to querying on a regular basis.  As I understand it re-using a filter (rather 
than creating it, using it, and discarding it) is integral to it's value as a 
time saver and thus maybe not appropriate in this case.
> 
> Any thoughts or advice would be appreciated.  Many thanks in advance!

The development version uses the query structure as you would
expect, but it also uses a slightly slower way to evalute OR queries.
Your query:
+(term1 term2 term3 term4 term5) term6 term7 ... term30
is transformed into something like this:
RequiredOptional( (term1 or term2 or .. or term5), (term6 or term7 .. or 
term30))
For every hit doc in the required subquery, it skips to the optional one
instead of evaluating the optional one completely as it is done in 1.4.3.
When the required subquery occurs infrequently enough, the development
version could be faster than 1.4.3.
Anyway, I'd expect the development version to be faster on the more
restricted query than on the less restricted one.

With a filter instead of the required subquery, the score of the required
subquery is lost, and filters indeed do not work over index updates.
Nevertheless, you can QueryFilter and FilteredQuery a try.

As a side note, the development version has no limitation on the
maximum number of terms/subqueries that can be required or prohibited.
It does have the BooleanQuery.maxClauseCount as in 1.4.3.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 18:30:11 2005
Return-Path: <java-user-return-16104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57999 invoked from network); 29 Aug 2005 18:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 18:30:11 -0000
Received: (qmail 15899 invoked by uid 500); 29 Aug 2005 18:30:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15877 invoked by uid 500); 29 Aug 2005 18:30:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15864 invoked by uid 99); 29 Aug 2005 18:30:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 11:30:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Aug 2005 11:30:18 -0700
Received: (qmail invoked by alias); 29 Aug 2005 18:29:59 -0000
Received: from p5088C21C.dip.t-dialin.net (EHLO [192.168.0.2]) [80.136.194.28]
  by mail.gmx.net (mp033) with SMTP; 29 Aug 2005 20:29:59 +0200
X-Authenticated: #9227561
Message-ID: <4313541E.3030800@gmx.de>
Date: Mon, 29 Aug 2005 20:29:50 +0200
From: Derya Kasapoglu <dozean@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: IndexReader delete(int i)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

if i delete a document from index, what does the it do?
I want to know because if i delete documents from index which are
not anymore in the dokument directories like that:

IndexReader reader = IndexReader.open(dir);

for (int i=0; i<reader.numDocs(); i++) {

        Document doc =reader.document(i);
        String path = doc.get("path");
	File file = new File(path);

        if (!file.exists()) reader.delete(i); 
}

reader.close();

the IndexReader doesn't delete all dokuments by the first run!!!!

I mean if i say  
if (!file.exists()) System.out.println(path);
i get all documents which are not in the directory  but if i say reader.delete(i)
it deletes only a part of the documents which are not exists!!!
If i start the application again it delets the rest, sometimes not all of the rest,
but if i start it again and again it deletes all documents which are not exists.

But why it doen't do it by the first run?
Does delete() do something  with the document IDs? Or something else?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 19:14:26 2005
Return-Path: <java-user-return-16105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79968 invoked from network); 29 Aug 2005 19:14:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 19:14:26 -0000
Received: (qmail 97465 invoked by uid 500); 29 Aug 2005 19:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97446 invoked by uid 500); 29 Aug 2005 19:14:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97433 invoked by uid 99); 29 Aug 2005 19:14:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 12:14:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 12:14:35 -0700
Received: (qmail 15485 invoked from network); 29 Aug 2005 19:14:17 -0000
Received: from unknown (HELO p5496C3E1.dip.t-dialin.net) ([pbs]695637@[84.150.195.225])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 29 Aug 2005 19:14:17 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Inconsistent tokenizing of words containing underscores.
Date: Mon, 29 Aug 2005 21:15:26 +0200
User-Agent: KMail/1.8
References: <20050829172222.B11D610FB2B1@asf.osuosl.org>
In-Reply-To: <20050829172222.B11D610FB2B1@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200508292115.26313@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 29 August 2005 19:21, Jeremy Meyer wrote:

> The expected behavior is to sometimes treat a character as indicating a
> new token and other times to ignore the same character?

It depends on whether there are digits in the token.  It's documented in 
the javacc source for the tokenizer(?).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 19:55:34 2005
Return-Path: <java-user-return-16106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99613 invoked from network); 29 Aug 2005 19:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 19:55:34 -0000
Received: (qmail 71258 invoked by uid 500); 29 Aug 2005 19:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70997 invoked by uid 500); 29 Aug 2005 19:55:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70984 invoked by uid 99); 29 Aug 2005 19:55:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 12:55:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 12:55:44 -0700
Received: by rproxy.gmail.com with SMTP id g11so1035916rne
        for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 12:55:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SZJUdQb/zh1VzE6cMazDS5CNZKynbZd2owrXDORYGcPgnxD86ymMDaHfpY1wRIfJ65017M+LbOSsLCM3GvjDA0ukgVcPXjLcw7suM3P7EoXZDAuy9DMnpEpwvh+Vz5mnRF5alu6Gd5ddmisEP4VnSpUFq/06lLX/Gkt1UhT5Vxo=
Received: by 10.38.98.66 with SMTP id v66mr488884rnb;
        Mon, 29 Aug 2005 12:55:26 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Mon, 29 Aug 2005 12:55:26 -0700 (PDT)
Message-ID: <c68e391705082912554cb25043@mail.gmail.com>
Date: Mon, 29 Aug 2005 15:55:26 -0400
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader delete(int i)
In-Reply-To: <4313541E.3030800@gmx.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4313541E.3030800@gmx.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Perhaps because you are not iterating over all the documents?
numDocs() =3D=3D maxDocs() - numer_of_deleted_docs
So first try replacing numDocs() with maxDocs()

-Yonik


On 8/29/05, Derya Kasapoglu <dozean@gmx.de> wrote:
> Hi,
>=20
> if i delete a document from index, what does the it do?
> I want to know because if i delete documents from index which are
> not anymore in the dokument directories like that:
>=20
> IndexReader reader =3D IndexReader.open(dir);
>=20
> for (int i=3D0; i<reader.numDocs(); i++) {
>=20
>         Document doc =3Dreader.document(i);
>         String path =3D doc.get("path");
>         File file =3D new File(path);
>=20
>         if (!file.exists()) reader.delete(i);
> }
>=20
> reader.close();
>=20
> the IndexReader doesn't delete all dokuments by the first run!!!!
>=20
> I mean if i say
> if (!file.exists()) System.out.println(path);
> i get all documents which are not in the directory  but if i say reader.d=
elete(i)
> it deletes only a part of the documents which are not exists!!!
> If i start the application again it delets the rest, sometimes not all of=
 the rest,
> but if i start it again and again it deletes all documents which are not =
exists.
>=20
> But why it doen't do it by the first run?
> Does delete() do something  with the document IDs? Or something else?
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 20:18:25 2005
Return-Path: <java-user-return-16107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7393 invoked from network); 29 Aug 2005 20:18:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 20:18:25 -0000
Received: (qmail 97406 invoked by uid 500); 29 Aug 2005 20:18:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97381 invoked by uid 500); 29 Aug 2005 20:18:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97368 invoked by uid 99); 29 Aug 2005 20:18:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 13:18:21 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_20_30,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 13:18:36 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1E9q5D-0002yU-BZ
	for java-user@lucene.apache.org; Mon, 29 Aug 2005 13:18:19 -0700
Message-ID: <737222.post@talk.nabble.com>
Date: Mon, 29 Aug 2005 13:18:19 -0700 (PDT)
From: "raymondcreel (sent by Nabble.com)" <lists@nabble.com>
Reply-To: raymondcreel <raymondcreel@yahoo.com>
To: java-user@lucene.apache.org
Subject: custom sort
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9_4222601.1125346699353"
X-Nabble-Sender: Nabble Forums <lists@nabble.com>
X-Nabble-From: raymondcreel <raymondcreel@yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9_4222601.1125346699353
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Is it possible to write a custom sort for a query such that the first N documents that match a certain additional criteria get pushed to the top of the sort?  For instance say you sort your query based on field A, but you want to tweak the results such that the first 10 documents in the result set which have field B = some criteria will appear at the beginning of the resulting hits collection?   

thanks much,
raymond
--
Sent from the Lucene - Java Users forum at Nabble.com:
http://www.nabble.com/custom-sort-t262833.html#a737222

------=_Part_9_4222601.1125346699353--


From java-user-return-16108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 20:53:01 2005
Return-Path: <java-user-return-16108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24962 invoked from network); 29 Aug 2005 20:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 20:53:01 -0000
Received: (qmail 46474 invoked by uid 500); 29 Aug 2005 20:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46436 invoked by uid 500); 29 Aug 2005 20:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46418 invoked by uid 99); 29 Aug 2005 20:52:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 13:52:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [131.167.253.61] (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 13:53:10 -0700
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <6ERN08Q9PQQGCB03M0@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Mon,
 29 Aug 2005 16:51:09 -0400 (Eastern Daylight Time)
Date: Mon, 29 Aug 2005 16:50:55 -0400
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: Re: Index files in jar
In-reply-to: <d76e8536050829084264fac01a@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <4313752F.1050809@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
References: <d76e8536050829084264fac01a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Why not build a self-extracting jar file and extract the contents of the 
index to a temp directory?

http://www.javaworld.com/javaworld/javatips/jw-javatip120.html

Thomas Lepkowski wrote:

>Hello,
>
>I have a set of index files that I'd like to distribute with my Java 
>application. The only way this seems practical is to place the index files 
>in a jar file. I tried this, but the search choked when I told IndexSearcher 
>the index path inside the jar file ( and placed the jar file path in the 
>CLASSPATH ).
>
>Any ideas on wrapping my index files inside a jar file?
>
>Thanks in advance for any help.
>
>-Tom
>
>  
>

-- 
Dan Funk
Software Engineer

Information Technology Solutions
Battelle Charlottesville Operations
1000 Research Park Boulevard, Suite 105
Charlottesville, Virginia 22911

434.984.0951 x244
434.984.0947 (fax)
FunkD@Battelle.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 21:18:25 2005
Return-Path: <java-user-return-16109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36591 invoked from network); 29 Aug 2005 21:18:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 21:18:24 -0000
Received: (qmail 87785 invoked by uid 500); 29 Aug 2005 21:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87764 invoked by uid 500); 29 Aug 2005 21:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87751 invoked by uid 99); 29 Aug 2005 21:18:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 14:18:19 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.198.39] (HELO rwcrmhc12.comcast.net) (204.127.198.39)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 14:18:34 -0700
Received: from firelizards.com ([66.31.183.250])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20050829211816015009o1soe>; Mon, 29 Aug 2005 21:18:16 +0000
Received: from [10.10.4.18] (unknown [10.10.4.18])
	by firelizards.com (Postfix) with ESMTP id EDDA321D4A
	for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 17:18:15 -0400 (EDT)
Subject: Corrupted indexes
From: Eric Bressler <eric.bressler@coreblox.com>
Reply-To: eric.bressler@coreblox.com
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Mon, 29 Aug 2005 17:18:22 -0400
Message-Id: <1125350302.22871.13.camel@silk.firelizards.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4-3mdk 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am running lucene 1.4.3 and I have a situation where after adding and
removing some objects, my index becomes corrupt.  I have been careful to
make sure that all adds and removes happen in a single thread (although
I know that isn't necessarly needed) and it still occurs.  I am not sure
how to go about debugging the index corruption, so any pointers will be
welcome.  Oh, this only appears to happen when the index and removals
happen rapidly.  I cannot do it when there are all adds or removals w/o
it being a rapid change between adds and removes.
Thanks

Eric


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 29 22:12:37 2005
Return-Path: <java-user-return-16110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56604 invoked from network); 29 Aug 2005 22:12:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Aug 2005 22:12:37 -0000
Received: (qmail 54222 invoked by uid 500); 29 Aug 2005 22:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54202 invoked by uid 500); 29 Aug 2005 22:12:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54189 invoked by uid 99); 29 Aug 2005 22:12:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 15:12:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 15:12:47 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Inconsistent tokenizing of words containing underscores.
Date: Mon, 29 Aug 2005 18:12:29 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D13103C0A4F8@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inconsistent tokenizing of words containing underscores.
Thread-Index: AcWszezTBwZ3sFrBRx+vMSlhgEKP5AAGG69A
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What seems to be working for me is a punctuation filter that removes / -
_ etc and makes the token without them.  Then "most" of the time the
word XYZZZY_DE_SA0001 will be tokenized as XYZZZYDESA0001.  For this to
work, you will have to use the same punctuation filter on the strings
before you search for them. =20

Tom

-----Original Message-----
From: Daniel Naber [mailto:lucenelist@danielnaber.de]=20
Sent: Monday, August 29, 2005 3:15 PM
To: java-user@lucene.apache.org
Subject: Re: Inconsistent tokenizing of words containing underscores.

On Monday 29 August 2005 19:21, Jeremy Meyer wrote:

> The expected behavior is to sometimes treat a character as indicating
a
> new token and other times to ignore the same character?

It depends on whether there are digits in the token.  It's documented in

the javacc source for the tokenizer(?).

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 04:35:34 2005
Return-Path: <java-user-return-16111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18028 invoked from network); 30 Aug 2005 04:35:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 04:35:33 -0000
Received: (qmail 58088 invoked by uid 500); 30 Aug 2005 04:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57404 invoked by uid 500); 30 Aug 2005 04:35:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57391 invoked by uid 99); 30 Aug 2005 04:35:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 21:35:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 66.249.82.206 as permitted sender)
Received: from [66.249.82.206] (HELO xproxy.gmail.com) (66.249.82.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 21:35:43 -0700
Received: by xproxy.gmail.com with SMTP id h28so810670wxd
        for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 21:35:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bG9sqHr9LVpIiVrrCIV8Q9IGZTcmA+DbjFVBZYJkbNGsvpzdcqKzoTT22ABKTgrNkoeYOGFRQQWostDoO0lvK2855T9p0V58+j9PoA7C9+nRBMRv4PNf5Y7EtdoXEun8at42Dm5b7Y28Gw7zMaNjCbhlkeircC1ySnOyxMjt100=
Received: by 10.70.46.14 with SMTP id t14mr119487wxt;
        Mon, 29 Aug 2005 21:35:26 -0700 (PDT)
Received: by 10.70.23.8 with HTTP; Mon, 29 Aug 2005 21:35:26 -0700 (PDT)
Message-ID: <6e3ae6310508292135fc5dd96@mail.gmail.com>
Date: Mon, 29 Aug 2005 21:35:26 -0700
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org, raymondcreel <raymondcreel@yahoo.com>
Subject: Re: custom sort
In-Reply-To: <737222.post@talk.nabble.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <737222.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can just assign the field B some weight when creating the index?

--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net

On 8/29/05, raymondcreel (sent by Nabble.com) <lists@nabble.com> wrote:
>=20
> Is it possible to write a custom sort for a query such that the first N d=
ocuments that match a certain additional criteria get pushed to the top of =
the sort?  For instance say you sort your query based on field A, but you w=
ant to tweak the results such that the first 10 documents in the result set=
 which have field B =3D some criteria will appear at the beginning of the r=
esulting hits collection?
>=20
> thanks much,
> raymond
> --
> Sent from the Lucene - Java Users forum at Nabble.com:
> http://www.nabble.com/custom-sort-t262833.html#a737222
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 04:47:32 2005
Return-Path: <java-user-return-16112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22301 invoked from network); 30 Aug 2005 04:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 04:47:32 -0000
Received: (qmail 69683 invoked by uid 500); 30 Aug 2005 04:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69637 invoked by uid 500); 30 Aug 2005 04:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69622 invoked by uid 99); 30 Aug 2005 04:47:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 21:47:26 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of seemasandeeppai@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Aug 2005 21:47:41 -0700
Received: by zproxy.gmail.com with SMTP id i11so741778nzi
        for <java-user@lucene.apache.org>; Mon, 29 Aug 2005 21:47:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=gv+tF3ApXO8Ls+zwQvQyz1BVq5No3keKZ9zpAeVSl8oMAv1pQYs63cjz6ymOmo79R/FAcgLwWuMg4vOvXt3s8rpE0ugugda7ButJhg6XAGhiwt840Co2u275e10arVuI6LpqpxPSF/AcRPDgrhxR+THVZUpNOtj3lM5OCz/wQxM=
Received: by 10.36.118.3 with SMTP id q3mr1143009nzc;
        Mon, 29 Aug 2005 21:47:24 -0700 (PDT)
Received: by 10.36.41.4 with HTTP; Mon, 29 Aug 2005 21:47:24 -0700 (PDT)
Message-ID: <66df4ae405082921474d90545a@mail.gmail.com>
Date: Tue, 30 Aug 2005 10:17:24 +0530
From: seema pai <seemasandeeppai@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org, 
	ruby-dev@lucene.apache.org
Subject: permission control or category-wise search with Lucene
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_971_108139.1125377244483"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_971_108139.1125377244483
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi=20

My site has large database of Television and Movie titles, in English,=20
Spanish language. The movie data starts from year 1928 till date for=20
selected studios like MGM, Disney etc . The site user should be capable to=
=20
search movie or tv series by title, description, actors or characters. The=
=20
site-admin may provide some meta-data like actors, media-type for image=20
assets in stills, logos section for each title. The user will be permitted=
=20
to view features by specific category based on permissions. i.e if the user=
=20
doe not have permission for 'james bond' category, then the search should=
=20
not display any titles belonging to that category.
--how to use lucene with such access control ? what api's can be used ?=20
--the DB may have some in-active titles, how can I not index in-active=20
titles and be sure that they are not shown in search results ?
--other than providing meta-data for image files, is there anyother way=20
lucene can search image assets ?
--the description or synopsis of movie title will be stored in Html format,=
=20
is there any need to parse and store only the text ?
--how to show search results based on the zone or category chosen ? i.e sho=
w=20
results of news article first and then features and then television grouped=
?

rgds,
Seema

------=_Part_971_108139.1125377244483--

From java-user-return-16113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 08:06:04 2005
Return-Path: <java-user-return-16113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12030 invoked from network); 30 Aug 2005 08:06:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 08:06:04 -0000
Received: (qmail 49920 invoked by uid 500); 30 Aug 2005 08:05:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49882 invoked by uid 500); 30 Aug 2005 08:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49869 invoked by uid 99); 30 Aug 2005 08:05:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 01:05:57 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dozean@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Aug 2005 01:06:12 -0700
Received: (qmail 3214 invoked by uid 0); 30 Aug 2005 08:05:54 -0000
Received: from 80.136.134.164 by www76.gmx.net with HTTP;
	Tue, 30 Aug 2005 10:05:54 +0200 (MEST)
Date: Tue, 30 Aug 2005 10:05:54 +0200 (MEST)
From: dozean@gmx.de
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <c68e391705082912554cb25043@mail.gmail.com>
Subject: =?ISO-8859-1?Q?Re:_IndexReader_delete(int_i)?=
X-Priority: 3 (Normal)
X-Authenticated: #9227561
Message-ID: <27988.1125389154@www76.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Yonik,

thank you very much!!
Now it works very well!! 
The formula "numDocs() == maxDocs() - numer_of_deleted_docs" should be stand
in the API! :)

Thank you again!
Bye Derya

> --- Ursprngliche Nachricht ---
> Von: Yonik Seeley <yseeley@gmail.com>
> An: java-user@lucene.apache.org
> Betreff: Re: IndexReader delete(int i)
> Datum: Mon, 29 Aug 2005 15:55:26 -0400
> 
> Perhaps because you are not iterating over all the documents?
> numDocs() == maxDocs() - numer_of_deleted_docs
> So first try replacing numDocs() with maxDocs()
> 
> -Yonik
> 
> 
> On 8/29/05, Derya Kasapoglu <dozean@gmx.de> wrote:
> > Hi,
> > 
> > if i delete a document from index, what does the it do?
> > I want to know because if i delete documents from index which are
> > not anymore in the dokument directories like that:
> > 
> > IndexReader reader = IndexReader.open(dir);
> > 
> > for (int i=0; i<reader.numDocs(); i++) {
> > 
> >         Document doc =reader.document(i);
> >         String path = doc.get("path");
> >         File file = new File(path);
> > 
> >         if (!file.exists()) reader.delete(i);
> > }
> > 
> > reader.close();
> > 
> > the IndexReader doesn't delete all dokuments by the first run!!!!
> > 
> > I mean if i say
> > if (!file.exists()) System.out.println(path);
> > i get all documents which are not in the directory  but if i say
> reader.delete(i)
> > it deletes only a part of the documents which are not exists!!!
> > If i start the application again it delets the rest, sometimes not all
> of the rest,
> > but if i start it again and again it deletes all documents which are not
> exists.
> > 
> > But why it doen't do it by the first run?
> > Does delete() do something  with the document IDs? Or something else?
> > 
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse fr Mail, Message, More +++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 08:14:57 2005
Return-Path: <java-user-return-16114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18829 invoked from network); 30 Aug 2005 08:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 08:14:57 -0000
Received: (qmail 66979 invoked by uid 500); 30 Aug 2005 08:14:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66954 invoked by uid 500); 30 Aug 2005 08:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66941 invoked by uid 99); 30 Aug 2005 08:14:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 01:14:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_20_30,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tom.e.white@gmail.com designates 64.233.182.200 as permitted sender)
Received: from [64.233.182.200] (HELO nproxy.gmail.com) (64.233.182.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 01:15:06 -0700
Received: by nproxy.gmail.com with SMTP id g2so223246nfe
        for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 01:14:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TQFxAS+iJfp4lTGBbpdj74zJfTH4DYRfqFCwerZLMcoR4NlzA9PP9n/1mjpAcvgpj8CD5rf+dMeHl6n2iprX1mRsHPQ5vSg2o/s9iaj6lvKWzsA11EXZoOv1yFJEWoywTk5OvYPAkbREHh8XU3Id86t40Oq8pUhXkwuo6H7r5h4=
Received: by 10.48.236.4 with SMTP id j4mr169558nfh;
        Tue, 30 Aug 2005 01:14:47 -0700 (PDT)
Received: by 10.48.144.12 with HTTP; Tue, 30 Aug 2005 01:14:47 -0700 (PDT)
Message-ID: <b23e01b50508300114727b5b3b@mail.gmail.com>
Date: Tue, 30 Aug 2005 09:14:47 +0100
From: Tom White <tom.e.white@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Did you mean?
In-Reply-To: <6e3ae631050829100817417e77@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1118_20255956.1125389687956"
References: <4312CC6A.2050301@programmfabrik.de>
	 <Pine.LNX.4.62.0508290624480.544@enigmastation.com>
	 <6e3ae631050829100817417e77@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1118_20255956.1125389687956
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 8/29/05, Chris Lu <chris.lu@gmail.com> wrote:
>=20
>=20
> Two approaches I can think of:
> * Use a word list(it may not be the word list you want, but it is just
> a compromise).
> * Analyze your original index, listing out all words inside.
>=20
>=20
Using a word list suffers from two problems:
1. (Coverage) No word list is complete, they need to be maintained as new=
=20
words are coined, and word lists for different languages vary in quality.
2. (Useless suggestions) There is little point in making a suggestion for=
=20
words that aren't in the original index (as they wouldn't produce any hits)=
.

For these reasons it is better to use the original index as a source of=20
words. It is true that the index will likely contain spelling errors,=20
however Lucene Spell Checker provides a way to restrict suggestions to word=
s=20
that are more popular than the query term. As misspellings are typically=20
rarer than correct spellings this should ensure that misspelled suggestions=
=20
are almost never made. The article quoted above (which I wrote), provides a=
=20
bit more discussion.

Tom

------=_Part_1118_20255956.1125389687956--

From java-user-return-16115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 09:14:16 2005
Return-Path: <java-user-return-16115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44928 invoked from network); 30 Aug 2005 09:14:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 09:14:16 -0000
Received: (qmail 34054 invoked by uid 500); 30 Aug 2005 09:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33832 invoked by uid 500); 30 Aug 2005 09:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33818 invoked by uid 99); 30 Aug 2005 09:14:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 02:14:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 02:14:23 -0700
Received: from [81.168.89.246] (helo=[192.168.1.3])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1EA2Bv-0006K7-00
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 10:14:03 +0100
Subject: Re: index files in jar file
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <d76e85360508261331e7cb1e@mail.gmail.com>
References: <d76e85360508261331e7cb1e@mail.gmail.com>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 30 Aug 2005 10:14:09 +0100
Message-Id: <1125393250.19348.163.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, 2005-08-26 at 16:31 -0400, Thomas Lepkowski wrote:
> I have a set of index files that I'd like to distribute with my Java 
> application. The only way this seems practical is to place the index files 
> in a jar file. I tries this, but the search choked when I told IndexSearcher 
> the index path inside the jar file ( and placed the jar file in the 
> CLASSPATH.
> 
> Anybody out there successfully put their index files in a jar file?
> 
> Thanks in advance for any advise.

I haven't but I have an idea of how you would. What path did you give
IndexSearcher? Did you use the IndexSearcher(String) constructor? 

I don't think there's any chance you could load an index from a JAR file
out of the box. First a JAR file is zipped, secondly you'll look it up
from the classpath rather than giving a file system path. 

I would guess you need to extend:

org.apache.lucene.store.Directory

and create a JARDirectory class, which can find the appropriate bits
within the JAR for Lucene. 

First get the JAR file:

ClassLoader.getSystemResourceAsStream(jarFilename)

then use the java.util.jar.JarInputStream class to read it.

One potential problem might be random access, since I think streams are
sequentially accessed. If the index isn't too big you could have your
JARDirectory class just wrap a RAMDirectory and just load the contents
of the JAR into memory.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 10:23:40 2005
Return-Path: <java-user-return-16116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81097 invoked from network); 30 Aug 2005 10:23:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 10:23:40 -0000
Received: (qmail 6581 invoked by uid 500); 30 Aug 2005 10:23:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6560 invoked by uid 500); 30 Aug 2005 10:23:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6547 invoked by uid 99); 30 Aug 2005 10:23:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 03:23:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.83.242.16] (HELO mail.anchormen.nl) (212.83.242.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 03:23:48 -0700
Content-class: urn:content-classes:message
Subject: RE: Corrupted indexes
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 30 Aug 2005 12:23:18 +0200
X-MIMEOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <24CFCE44DCB015489FB96D38BDF4FCAA071208@gerard.anchormen.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Corrupted indexes
Thread-index: AcWs3ytwe4cYm9d5Q7m5MYNb6z+5qgAbXd+w
From: "Peter Veentjer - Anchor Men" <p.veentjer@anchormen.nl>
To: <java-user@lucene.apache.org>,
	<eric.bressler@coreblox.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What kind of corruption do you get? Do the files get corrupted
(unusable/unreadable), or do you get multiple items in the index?=20

-----Oorspronkelijk bericht-----
Van: Eric Bressler [mailto:eric.bressler@coreblox.com]=20
Verzonden: maandag 29 augustus 2005 23:18
Aan: java-user@lucene.apache.org
Onderwerp: Corrupted indexes

I am running lucene 1.4.3 and I have a situation where after adding and
removing some objects, my index becomes corrupt.  I have been careful to
make sure that all adds and removes happen in a single thread (although
I know that isn't necessarly needed) and it still occurs.  I am not sure
how to go about debugging the index corruption, so any pointers will be
welcome.  Oh, this only appears to happen when the index and removals
happen rapidly.  I cannot do it when there are all adds or removals w/o
it being a rapid change between adds and removes.
Thanks

Eric


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 10:52:02 2005
Return-Path: <java-user-return-16117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92372 invoked from network); 30 Aug 2005 10:52:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 10:52:01 -0000
Received: (qmail 34365 invoked by uid 500); 30 Aug 2005 10:51:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34260 invoked by uid 500); 30 Aug 2005 10:51:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34246 invoked by uid 99); 30 Aug 2005 10:51:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 03:51:56 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.115.67.77] (HELO trixi.wincor-nixdorf.com) (217.115.67.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 03:52:11 -0700
Received: from zipp.wincor-nixdorf.com (this.is.a.RFC1918.address [172.24.192.70] (may be forged))
	by trixi.wincor-nixdorf.com (8.12.11/8.12.11) with ESMTP id j7UAxMlT005768
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 12:59:22 +0200
Received: from deexcs02.wincor-nixdorf.com (deexcs02.wincor-nixdorf.com [172.18.160.72])
	by zipp.wincor-nixdorf.com (8.12.8/8.12.8) with ESMTP id j7UApqWB031588
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 12:51:52 +0200
Received: from DEEXVS01.wincor-nixdorf.com ([172.18.160.81]) by deexcs02.wincor-nixdorf.com with Microsoft SMTPSVC(6.0.3790.0);
	 Tue, 30 Aug 2005 12:51:52 +0200
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: Inconsistent tokenizing of words containing underscores.
Date: Tue, 30 Aug 2005 12:52:29 +0200
Message-ID: <9391EFF529350A4A9AAC16AAAAD9B5C60A3A07@DEEXVS01.wincor-nixdorf.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inconsistent tokenizing of words containing underscores.
Thread-Index: AcWszezTBwZ3sFrBRx+vMSlhgEKP5AAGG69AABllElA=
From: "Is, Studcio" <Studcio.is@wincor-nixdorf.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Aug 2005 10:51:52.0125 (UTC) FILETIME=[D454E6D0:01C5AD50]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

first of all thanks to everyone for replies and suggestions. I solved my
problem by adapting the StandardTokenizer.jj and compiling it using
javacc.

I replaced line 90:

<ALPHANUM: (<LETTER>|<DIGIT>)+ >

with

<ALPHANUM: (<LETTER>|<DIGIT>|"_")+ >

so that underscore is treated like alphanumeric characters. In my first
tests, it seems to work perfectly. Anyhow, the problem remains that I
can't understand how the described bevaviour might be the expected
behaviour. I couldn't find the appropriate documentation in the javacc
source of the tokenizer either. I suppose the source of the problem with
underscores lies in the definition of NUM (floating point, serial, model
numbers, ip addresses, etc.). No matter what, I guess my problem is
solved.

Thanks again and regards

Sebastian

=20




-----Original Message-----
From: Aigner, Thomas [mailto:TAigner@WescoDist.com]=20
Sent: Tuesday, August 30, 2005 12:12 AM
To: java-user@lucene.apache.org
Subject: RE: Inconsistent tokenizing of words containing underscores.

What seems to be working for me is a punctuation filter that removes / -
_ etc and makes the token without them.  Then "most" of the time the
word XYZZZY_DE_SA0001 will be tokenized as XYZZZYDESA0001.  For this to
work, you will have to use the same punctuation filter on the strings
before you search for them. =20

Tom

-----Original Message-----
From: Daniel Naber [mailto:lucenelist@danielnaber.de]=20
Sent: Monday, August 29, 2005 3:15 PM
To: java-user@lucene.apache.org
Subject: Re: Inconsistent tokenizing of words containing underscores.

On Monday 29 August 2005 19:21, Jeremy Meyer wrote:

> The expected behavior is to sometimes treat a character as indicating
a
> new token and other times to ignore the same character?

It depends on whether there are digits in the token.  It's documented in

the javacc source for the tokenizer(?).

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 11:43:26 2005
Return-Path: <java-user-return-16118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21215 invoked from network); 30 Aug 2005 11:43:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 11:43:26 -0000
Received: (qmail 94807 invoked by uid 500); 30 Aug 2005 11:43:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94782 invoked by uid 500); 30 Aug 2005 11:43:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94768 invoked by uid 99); 30 Aug 2005 11:43:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 04:43:20 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.202.56] (HELO sccrmhc12.comcast.net) (204.127.202.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 04:43:35 -0700
Received: from firelizards.com ([66.31.183.250])
          by comcast.net (sccrmhc12) with ESMTP
          id <20050830114316012000979he>; Tue, 30 Aug 2005 11:43:17 +0000
Received: from [10.10.1.141] (unknown [10.10.1.141])
	by firelizards.com (Postfix) with ESMTP id 7DB5C21418
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 07:43:16 -0400 (EDT)
Subject: RE: Corrupted indexes
From: Eric Bressler <eric.bressler@coreblox.com>
Reply-To: eric.bressler@coreblox.com
To: java-user@lucene.apache.org
In-Reply-To: <24CFCE44DCB015489FB96D38BDF4FCAA071208@gerard.anchormen.nl>
References: <24CFCE44DCB015489FB96D38BDF4FCAA071208@gerard.anchormen.nl>
Content-Type: text/plain
Date: Tue, 30 Aug 2005 07:43:23 -0400
Message-Id: <1125402203.19390.5.camel@silk.firelizards.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4-3mdk 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was going to send out the answer to this problem this morning. I found
it around 2am last night.  I was mistaken that I had corrupt the
indexes.  The real problem was that I had forgotten the constructor I
was using for the index reader an had it like 

writer = new IndexWriter(indexlocation, new StandardAnalyzer(), true);

instead of 

if ( !IndexReader.indexExists(indexlocation)) {
       writer = new IndexWriter(indexlocation, new StandardAnalyzer(),
true);
}				
else
	writer = new IndexWriter(indexlocation, new StandardAnalyzer(), false);


So I was basically always making a new index.  Really a beginner mistake
but I had written that portion so long ago I didn't look.

Eric


On Tue, 2005-08-30 at 12:23 +0200, Peter Veentjer - Anchor Men wrote:
> What kind of corruption do you get? Do the files get corrupted
> (unusable/unreadable), or do you get multiple items in the index? 
> 
> -----Oorspronkelijk bericht-----
> Van: Eric Bressler [mailto:eric.bressler@coreblox.com] 
> Verzonden: maandag 29 augustus 2005 23:18
> Aan: java-user@lucene.apache.org
> Onderwerp: Corrupted indexes
> 
> I am running lucene 1.4.3 and I have a situation where after adding and
> removing some objects, my index becomes corrupt.  I have been careful to
> make sure that all adds and removes happen in a single thread (although
> I know that isn't necessarly needed) and it still occurs.  I am not sure
> how to go about debugging the index corruption, so any pointers will be
> welcome.  Oh, this only appears to happen when the index and removals
> happen rapidly.  I cannot do it when there are all adds or removals w/o
> it being a rapid change between adds and removes.
> Thanks
> 
> Eric
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 12:07:55 2005
Return-Path: <java-user-return-16119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32405 invoked from network); 30 Aug 2005 12:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 12:07:55 -0000
Received: (qmail 30620 invoked by uid 500); 30 Aug 2005 12:07:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30591 invoked by uid 500); 30 Aug 2005 12:07:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30562 invoked by uid 99); 30 Aug 2005 12:07:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 05:07:49 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of seemasandeeppai@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO zproxy.gmail.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 05:08:05 -0700
Received: by zproxy.gmail.com with SMTP id i11so776507nzi
        for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 05:07:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rD4pgX4GmdYfzTep6cLlVwIfJpViebtoyddFUNzwtRlKIjxuCjUIJWOXzULNBJ0DlTPaKAu8/5KDNrFJCE6chn4OvzIBHFwz4yBaWM4AdtEFvvgqkyRL1YTVqKPVrnCWkUwVToeUt9+jzMrtq9L6+XDjffwcMo87KCPm8X56gW8=
Received: by 10.37.14.76 with SMTP id r76mr1209811nzi;
        Tue, 30 Aug 2005 05:07:47 -0700 (PDT)
Received: by 10.36.41.4 with HTTP; Tue, 30 Aug 2005 05:07:47 -0700 (PDT)
Message-ID: <66df4ae405083005076683c1f@mail.gmail.com>
Date: Tue, 30 Aug 2005 17:37:47 +0530
From: seema pai <seemasandeeppai@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org, 
	ruby-dev@lucene.apache.org
Subject: Re: Lucene in clustered environment
In-Reply-To: <66df4ae405082921474d90545a@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2289_1379316.1125403667554"
References: <66df4ae405082921474d90545a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2289_1379316.1125403667554
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

How to use Lucene with File system Indexing on WebSphere application server=
=20
deployed in a cluster ?=20

 On 8/30/05, seema pai <seemasandeeppai@gmail.com> wrote:=20
>=20
> Hi=20
>=20
> My site has large database of Television and Movie titles, in English,=20
> Spanish language. The movie data starts from year 1928 till date for=20
> selected studios like MGM, Disney etc . The site user should be capable t=
o=20
> search movie or tv series by title, description, actors or characters. Th=
e=20
> site-admin may provide some meta-data like actors, media-type for image=
=20
> assets in stills, logos section for each title. The user will be permitte=
d=20
> to view features by specific category based on permissions. i.e if the=20
> user doe not have permission for 'james bond' category, then the search=
=20
> should not display any titles belonging to that category.
> --how to use lucene with such access control ? what api's can be used ?=
=20
> --the DB may have some in-active titles, how can I not index in-active=20
> titles and be sure that they are not shown in search results ?=20
> --other than providing meta-data for image files, is there anyother way=
=20
> lucene can search image assets ?
> --the description or synopsis of movie title will be stored in Html=20
> format, is there any need to parse and store only the text ?=20
> --how to show search results based on the zone or category chosen ? i.esh=
ow results of news article first and then features and then television=20
> grouped?
>=20
> rgds,
> Seema
>

------=_Part_2289_1379316.1125403667554--

From java-user-return-16120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 13:25:16 2005
Return-Path: <java-user-return-16120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74427 invoked from network); 30 Aug 2005 13:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 13:25:16 -0000
Received: (qmail 67373 invoked by uid 500); 30 Aug 2005 13:25:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67350 invoked by uid 500); 30 Aug 2005 13:25:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67336 invoked by uid 99); 30 Aug 2005 13:25:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 06:25:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 06:25:24 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id j7UDP6je009000
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 09:25:07 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IM100801ELUNH@lmco.com> for java-user@lucene.apache.org; Tue, 30 Aug 2005 09:25:06 -0400 (EDT)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IM100HOAELUYW@lmco.com> for java-user@lucene.apache.org; Tue, 30 Aug 2005 09:25:06 -0400 (EDT)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Tue,
 30 Aug 2005 09:25:06 -0400
Date: Tue, 30 Aug 2005 09:25:05 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: custom sort
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3951@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: custom sort
Thread-Index: AcWtHJAqT1f1shvATT60RHUAxLc9QgASXCEg
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 30 Aug 2005 13:25:06.0155 (UTC) FILETIME=[3C668BB0:01C5AD66]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When using sort there is no meaning for weight. 

Aviran
http://www.aviransplace.com 

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com] 
Sent: Tuesday, August 30, 2005 12:35 AM
To: java-user@lucene.apache.org; raymondcreel
Subject: Re: custom sort

You can just assign the field B some weight when creating the index?

--
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net

On 8/29/05, raymondcreel (sent by Nabble.com) <lists@nabble.com> wrote:
> 
> Is it possible to write a custom sort for a query such that the first
N documents that match a certain additional criteria get pushed to the
top of the sort?  For instance say you sort your query based on field A,
but you want to tweak the results such that the first 10 documents in
the result set which have field B = some criteria will appear at the
beginning of the resulting hits collection?
> 
> thanks much,
> raymond
> --
> Sent from the Lucene - Java Users forum at Nabble.com:
> http://www.nabble.com/custom-sort-t262833.html#a737222
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 13:46:43 2005
Return-Path: <java-user-return-16121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86363 invoked from network); 30 Aug 2005 13:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 13:46:43 -0000
Received: (qmail 15378 invoked by uid 500); 30 Aug 2005 13:46:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15353 invoked by uid 500); 30 Aug 2005 13:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15340 invoked by uid 99); 30 Aug 2005 13:46:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 06:46:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TheRanger@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Aug 2005 06:46:52 -0700
Received: (qmail 19346 invoked by uid 0); 30 Aug 2005 13:46:34 -0000
Received: from 193.63.235.44 by www10.gmx.net with HTTP;
	Tue, 30 Aug 2005 15:46:34 +0200 (MEST)
Date: Tue, 30 Aug 2005 15:46:34 +0200 (MEST)
From: "Karl Koch" <TheRanger@gmx.net>
To: java-user@lucene.apache.org
MIME-Version: 1.0
References: <20050826234750.64738.qmail@web31101.mail.mud.yahoo.com>
Subject: =?ISO-8859-1?Q?Re:_Books_about_Lucene=3F?=
X-Priority: 3 (Normal)
X-Authenticated: #21808356
Message-ID: <9602.1125409594@www10.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello group,

thank you for all your discussion, suggestios and help. I thought I will run
some investgations on that sourcecode with Lucene 1.2 and document them.
With the help of chen I might be able to create a version that can do the
job. Perhaps we can then create some small footprint solution that will
alows mobile search engines on PDAs. 

Since my time is very limited I am not sure how fast I can do that. I will
use the developer list for correspondance with the Lucene expertise.

Kind Regards,
Karl


> --- Ursprngliche Nachricht ---
> Von: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> An: java-user@lucene.apache.org
> Betreff: Re: Books about Lucene?
> Datum: Fri, 26 Aug 2005 16:47:50 -0700 (PDT)
> 
> Hi,
> 
> > If the demand for a 1.2-compatible version of Lucene is enough that  
> > there some folks willing to develop it and maintain it, I would be  
> > happy to have it within Lucene's own codebase.  I think keeping as  
> > much of the code that can be identical as possible is important, and 
> > 
> > if it can be demonstrated that switching Lucene's trunk codebase in  
> > parts to be 1.2 compatible is not detrimental to performance or  
> > resource usage of Lucene then we'd strongly consider making those  
> > changes.
> 
> I think Lucene version 1.2 was mentioned simply because it worked with
> an earlier JDK that must be shipped on some PDA.  Perhaps the JDK (I
> J2ME) on that PDA can be upgraded instead?
> 
> If not, Karl should run the current version of Lucene on that device
> and provide a list of errors... want to do that, Karl?
> 
> Otis
> 
> 
>   So, the real goal is to get Lucene working on that PDA
> 
> 
> > On Aug 26, 2005, at 3:12 PM, jian chen wrote:
> > 
> > > Hi, Erik,
> > >
> > > I some time ago played with the Lucene 1.2 source code and made
> > some
> > > modifications to it, trying to add my own ranking algorithm. I am  
> > > not sure
> > > if Licence wise, it is permissible to modify the earlier source  
> > > code, also
> > > if it is allowed to put the modified version or the description of 
> > 
> > > what I
> > > have done on wiki?
> > >
> > > Thanks for your reply.
> > >
> > > Jian
> > >
> > >
> > > On 8/26/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> > >
> > >>
> > >> I appreciate the vote of confidence on this, but I am not afraid
> > to
> > >> admit that I do not consider myself an expert on the deep innards
> > of
> > >> Lucene. I understand the concepts, and a bit of the internals, but
> > I
> > >> certainly do not live up to the hype you just bestowed upon me.  
> > >> *blush*
> > >>
> > >> Regarding JDK 1.2 - I came to Java at 1.3, and have never used a
> > JDK
> > >> earlier than that. All the apps I build now are currently on JDK
> > 1.5
> > >> (err... 5.0). I do not currently know what would be involved in
> > >> running Lucene on a 1.2 VM. The first question to ask is whether
> > an
> > >> earlier version of Lucene is sufficient for the needs of those
> > >> constrained to JDK 1.2. If not, then we move forward to defining
> > >> what needs to be changed - a simple compilation of the trunk
> > source
> > >> code with a 1.2 VM would give away most of the details.
> > >>
> > >> As with open source in general, it is about scratching our own
> > >> itches. If you're using Lucene (or need to use Lucene) in a 1.2
> > VM,
> > >> that is your itch to scratch and I would happily support your
> > efforts
> > >> in some way in documenting this (either on the wiki or embedded in
> > >> Lucene's own built-in documentation) or in providing an
> > alternative
> > >> version of Lucene that is suitable for 1.2 (perhaps by having
> > >> alternative code in a separate directory within our code
> > >> repository). If you create such documentation, perhaps you'd be
> > >> willing to donate it with full attribution to the 2nd edition of
> > >> LIA. But please don't wait for me to do it, as it really is not
> > >> something I need personally for any project - all my projects are
> > at
> > >> JDK 1.5 currently.
> > >>
> > >> Erik
> > >>
> > >>
> > >
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 14:01:28 2005
Return-Path: <java-user-return-16122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93783 invoked from network); 30 Aug 2005 14:01:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 14:01:27 -0000
Received: (qmail 48389 invoked by uid 500); 30 Aug 2005 14:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48366 invoked by uid 500); 30 Aug 2005 14:01:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48353 invoked by uid 99); 30 Aug 2005 14:01:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 07:01:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 07:01:32 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 41B8C13E2033; Tue, 30 Aug 2005 10:01:11 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1B5B113E2033
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 10:00:34 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v734)
In-Reply-To: <9391EFF529350A4A9AAC16AAAAD9B5C60A3A07@DEEXVS01.wincor-nixdorf.com>
References: <9391EFF529350A4A9AAC16AAAAD9B5C60A3A07@DEEXVS01.wincor-nixdorf.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DE4DEEA7-7B90-4E12-9B90-678AAC8F08F7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Inconsistent tokenizing of words containing underscores.
Date: Tue, 30 Aug 2005 10:00:42 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Another solution would be for you to create a custom TokenFilter that  
split tokens at "_" characters and then a custom Analyzer that used  
that filter after the StandardTokenizer.

     Erik


On Aug 30, 2005, at 6:52 AM, Is, Studcio wrote:

> Hello,
>
> first of all thanks to everyone for replies and suggestions. I  
> solved my
> problem by adapting the StandardTokenizer.jj and compiling it using
> javacc.
>
> I replaced line 90:
>
> <ALPHANUM: (<LETTER>|<DIGIT>)+ >
>
> with
>
> <ALPHANUM: (<LETTER>|<DIGIT>|"_")+ >
>
> so that underscore is treated like alphanumeric characters. In my  
> first
> tests, it seems to work perfectly. Anyhow, the problem remains that I
> can't understand how the described bevaviour might be the expected
> behaviour. I couldn't find the appropriate documentation in the javacc
> source of the tokenizer either. I suppose the source of the problem  
> with
> underscores lies in the definition of NUM (floating point, serial,  
> model
> numbers, ip addresses, etc.). No matter what, I guess my problem is
> solved.
>
> Thanks again and regards
>
> Sebastian
>
>
>
>
>
>
> -----Original Message-----
> From: Aigner, Thomas [mailto:TAigner@WescoDist.com]
> Sent: Tuesday, August 30, 2005 12:12 AM
> To: java-user@lucene.apache.org
> Subject: RE: Inconsistent tokenizing of words containing underscores.
>
> What seems to be working for me is a punctuation filter that  
> removes / -
> _ etc and makes the token without them.  Then "most" of the time the
> word XYZZZY_DE_SA0001 will be tokenized as XYZZZYDESA0001.  For  
> this to
> work, you will have to use the same punctuation filter on the strings
> before you search for them.
>
> Tom
>
> -----Original Message-----
> From: Daniel Naber [mailto:lucenelist@danielnaber.de]
> Sent: Monday, August 29, 2005 3:15 PM
> To: java-user@lucene.apache.org
> Subject: Re: Inconsistent tokenizing of words containing underscores.
>
> On Monday 29 August 2005 19:21, Jeremy Meyer wrote:
>
>
>> The expected behavior is to sometimes treat a character as indicating
>>
> a
>
>> new token and other times to ignore the same character?
>>
>
> It depends on whether there are digits in the token.  It's  
> documented in
>
> the javacc source for the tokenizer(?).
>
> Regards
>  Daniel
>
> -- 
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 14:06:49 2005
Return-Path: <java-user-return-16123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96397 invoked from network); 30 Aug 2005 14:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 14:06:49 -0000
Received: (qmail 54822 invoked by uid 500); 30 Aug 2005 14:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54797 invoked by uid 500); 30 Aug 2005 14:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54783 invoked by uid 99); 30 Aug 2005 14:06:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 07:06:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 07:06:59 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4F00A13E2033; Tue, 30 Aug 2005 10:06:41 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP
	id D4CB013E2038; Tue, 30 Aug 2005 10:06:27 -0400 (EDT)
In-Reply-To: <66df4ae405083005076683c1f@mail.gmail.com>
References: <66df4ae405082921474d90545a@mail.gmail.com> <66df4ae405083005076683c1f@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v734)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CCE89A76-2FAB-47D5-8713-48C735FD7ABC@ehatchersolutions.com>
Cc: seemasandeeppai@gmail.com
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene in clustered environment
Date: Tue, 30 Aug 2005 10:06:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Seema - please stop cross-posting your mails to those three e-mail  
lists.  java-user is the most appropriate list for your posts.

     Erik


On Aug 30, 2005, at 8:07 AM, seema pai wrote:

> How to use Lucene with File system Indexing on WebSphere  
> application server
> deployed in a cluster ?
>
>  On 8/30/05, seema pai <seemasandeeppai@gmail.com> wrote:
>
>>
>> Hi
>>
>> My site has large database of Television and Movie titles, in  
>> English,
>> Spanish language. The movie data starts from year 1928 till date for
>> selected studios like MGM, Disney etc . The site user should be  
>> capable to
>> search movie or tv series by title, description, actors or  
>> characters. The
>> site-admin may provide some meta-data like actors, media-type for  
>> image
>> assets in stills, logos section for each title. The user will be  
>> permitted
>> to view features by specific category based on permissions. i.e if  
>> the
>> user doe not have permission for 'james bond' category, then the  
>> search
>> should not display any titles belonging to that category.
>> --how to use lucene with such access control ? what api's can be  
>> used ?
>> --the DB may have some in-active titles, how can I not index in- 
>> active
>> titles and be sure that they are not shown in search results ?
>> --other than providing meta-data for image files, is there  
>> anyother way
>> lucene can search image assets ?
>> --the description or synopsis of movie title will be stored in Html
>> format, is there any need to parse and store only the text ?
>> --how to show search results based on the zone or category  
>> chosen ? i.eshow results of news article first and then features  
>> and then television
>> grouped?
>>
>> rgds,
>> Seema
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 14:52:43 2005
Return-Path: <java-user-return-16124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19204 invoked from network); 30 Aug 2005 14:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 14:52:43 -0000
Received: (qmail 27347 invoked by uid 500); 30 Aug 2005 14:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27308 invoked by uid 500); 30 Aug 2005 14:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27293 invoked by uid 99); 30 Aug 2005 14:52:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 07:52:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.50] (HELO rivette.int.mediasurface.com) (193.123.241.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 07:52:49 -0700
Received: from rivette.int.mediasurface.com (localhost [127.0.0.1])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j7UEqQX15016
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 15:52:26 +0100 (BST)
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j7UEqKm14973
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 15:52:22 +0100 (BST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: Lucene + Persistence
Date: Tue, 30 Aug 2005 15:52:20 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308AD397A4@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene + Persistence
Thread-Index: AcWZw+0pCNvTFTC8RKOsvjkQuTQ8yAS8Mx5AAC9WtEA=
From: "Peter Gelderbloem" <Peter.Gelderbloem@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
First off, I would just like to thank everyone who has contributed to
the gem we all know was Lucene.

I am thinking of using Lucene purely for text indexing and using a
persistence mechanism like hibernate to search structured data. Would it
be a good idea to use filters that do hibernate queries as criteria with
Lucene queries?

Thanks,
Peter Gelderbloem=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 15:13:42 2005
Return-Path: <java-user-return-16125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29277 invoked from network); 30 Aug 2005 15:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 15:13:41 -0000
Received: (qmail 67381 invoked by uid 500); 30 Aug 2005 15:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67357 invoked by uid 500); 30 Aug 2005 15:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67322 invoked by uid 99); 30 Aug 2005 15:13:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 08:13:34 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.36] (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Aug 2005 08:13:48 -0700
Received: (qmail 9829 invoked by uid 60001); 30 Aug 2005 15:13:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=t0f/NNURGfRZcvjs4TIHCtTISs8Z/HmF38Yzqj7+tqIZFfCkGVYbZ2hTHHlhNMV9AgTAWwC+H4HQAEqaYmc0zWUes0uqAp+ELzI0w4r9VqnpBBQ9hrSqLDtTrsetLXBxD5DBxxnF2Yehdsjo4+TE6bwVQFDeN4BQ1uyNHOBiF78=  ;
Message-ID: <20050830151330.9827.qmail@web31103.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31103.mail.mud.yahoo.com via HTTP; Tue, 30 Aug 2005 08:13:30 PDT
Date: Tue, 30 Aug 2005 08:13:30 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Did you mean?
To: java-user@lucene.apache.org
In-Reply-To: <b23e01b50508300114727b5b3b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I wonder if it would further help for the spell checked to make use of
something like WordNet (for English only), where low-frequency words
are "double-checked" against WordNet before considered correct.

Otis

--- Tom White <tom.e.white@gmail.com> wrote:

> On 8/29/05, Chris Lu <chris.lu@gmail.com> wrote:
> > 
> > 
> > Two approaches I can think of:
> > * Use a word list(it may not be the word list you want, but it is
> just
> > a compromise).
> > * Analyze your original index, listing out all words inside.
> > 
> > 
> Using a word list suffers from two problems:
> 1. (Coverage) No word list is complete, they need to be maintained as
> new 
> words are coined, and word lists for different languages vary in
> quality.
> 2. (Useless suggestions) There is little point in making a suggestion
> for 
> words that aren't in the original index (as they wouldn't produce any
> hits).
> 
> For these reasons it is better to use the original index as a source
> of 
> words. It is true that the index will likely contain spelling errors,
> 
> however Lucene Spell Checker provides a way to restrict suggestions
> to words 
> that are more popular than the query term. As misspellings are
> typically 
> rarer than correct spellings this should ensure that misspelled
> suggestions 
> are almost never made. The article quoted above (which I wrote),
> provides a 
> bit more discussion.
> 
> Tom
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 17:52:26 2005
Return-Path: <java-user-return-16126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98181 invoked from network); 30 Aug 2005 17:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 17:52:25 -0000
Received: (qmail 44451 invoked by uid 500); 30 Aug 2005 17:52:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44431 invoked by uid 500); 30 Aug 2005 17:52:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44418 invoked by uid 99); 30 Aug 2005 17:52:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 10:52:19 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.32] (HELO smtp001.mail.ukl.yahoo.com) (217.12.11.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Aug 2005 10:52:33 -0700
Received: (qmail 7702 invoked from network); 30 Aug 2005 17:52:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=S0QerLfhYj5l9gppZGasES4PVYBk+8703nTbi3ebP1gNOCqudC9rQQmKasqpcvtLuYSh1GylUcRQlZKbcE64GdOsg1L30R7UFAxXwEwrsZGBYwkFt89r0wp4WZpxw5cBvHG70xXrQIudWFDz4N6vGvBVkdnSw4B/aFDnZ+TIau8=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp001.mail.ukl.yahoo.com with SMTP; 30 Aug 2005 17:52:15 -0000
Message-ID: <43149CCA.8040806@yahoo.co.uk>
Date: Tue, 30 Aug 2005 18:52:10 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Did you mean?
References: <20050830151330.9827.qmail@web31103.mail.mud.yahoo.com>
In-Reply-To: <20050830151330.9827.qmail@web31103.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The "did you mean" implementation should ideally use all of the other 
words in a query as context to guide the selection of spelling 
alternatives. Google appear to do this - not sure if they use the doc 
content or user queries to suggest the alternatives.
I've got some colocation finding code which can be run on an existing 
index to discover commonly colocated  terms from doc contents. This 
could be of use here.


		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 19:06:38 2005
Return-Path: <java-user-return-16127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21269 invoked from network); 30 Aug 2005 19:06:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 19:06:38 -0000
Received: (qmail 73262 invoked by uid 500); 30 Aug 2005 19:06:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73224 invoked by uid 500); 30 Aug 2005 19:06:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73211 invoked by uid 99); 30 Aug 2005 19:06:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 12:06:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [141.149.165.226] (HELO ponyexpress2.ad.openratings.com) (141.149.165.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 12:06:47 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Empty index after building?
Date: Tue, 30 Aug 2005 15:06:21 -0400
Message-ID: <9951857AC27D97449C62F7DD6C6122481D99BD@ponyexpress2.ad.openratings.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: UpdateIndex
Thread-Index: AcWso4VbJpQV6M31Tsm2W9B2uT8WrQAAnTpAADvjqXA=
From: "Dan Quaroni" <dquaroni@OPENRATINGS.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I didn't notice any exceptions and unfortunately I built these 2 long =
enough ago that I have no logs left.

Anyway, I built 2 indexes using a process that I've built hundreds of =
indexes successfully with, and these two indexes seem to contain no =
documents despite being pretty large (about a gig). =20

Has anyone observed anything like this happening with lucene?  I'll do =
my best to reproduce the problem, but am not hopeful.  The only thing I =
could imagine is running out of disk space or something but I don't =
think that's possible.

Anyway, just wondering if anyone else has seen this.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 20:52:16 2005
Return-Path: <java-user-return-16128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58349 invoked from network); 30 Aug 2005 20:52:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 20:52:16 -0000
Received: (qmail 16044 invoked by uid 500); 30 Aug 2005 20:52:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16024 invoked by uid 500); 30 Aug 2005 20:52:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16009 invoked by uid 99); 30 Aug 2005 20:52:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 13:52:11 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 13:52:25 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 23E335B784; Tue, 30 Aug 2005 13:52:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 214767F475
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 13:52:07 -0700 (PDT)
Date: Tue, 30 Aug 2005 13:52:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Search Results Clustering
In-Reply-To: <731549.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0508301344531.23529@hal.rescomp.berkeley.edu>
References: <696937.post@talk.nabble.com> <Pine.LNX.4.58.0508241616380.8920@hal.rescomp.berkeley.edu>
 <731549.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Suppose I cluster the results only on the 1st field i.e. I do not show
: the constituent clusters. Even in this case, i'll require around 900
: Filters[i have 900 unique terms] in memory and will have to run the same
: query 900 times, 1 on each Filter. I am sitting at a situation where I
: get around 15 queries/sec on an average. Even if I spare another machine
: to return me the clustering results, I'll be firing 15*90 = 1350
: queries/sec.

1) If I remember correctly, just because query X takes S seconds to
complete, doesn't mean issuing executing X N times in rapid succession
will take N * S seconds.  There is some internal caching taking place.

2) Regardless of what type of complex Query objects you need to generate
the set of products that match your users search, or the set of products
in each category (what you've been calling cluster), or which search
method you use to generate the main list of results, you can use the
QueryFilter class to translate that Query into a Filter, and call
Filter.bits to get a BitSet for each categories Filter (and for your
main result set) which can be intersected to find the counts you need.
These BitSets can be cached for as long as your index remains unmodified
-- using CachingWrapperFilter for example, which means the work required
to do those 900 (category specific) queries only happens once each time
the index is changed -- not once per user search.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 21:04:25 2005
Return-Path: <java-user-return-16129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62416 invoked from network); 30 Aug 2005 21:04:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 21:04:25 -0000
Received: (qmail 39908 invoked by uid 500); 30 Aug 2005 21:04:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39867 invoked by uid 500); 30 Aug 2005 21:04:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39838 invoked by uid 99); 30 Aug 2005 21:04:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 14:04:13 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 14:04:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 25EE25B784; Tue, 30 Aug 2005 14:04:09 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 24C3C7F475
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 14:04:09 -0700 (PDT)
Date: Tue, 30 Aug 2005 14:04:09 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: query performance behavior not as expected
In-Reply-To: <6134F668515B04409948FBEB644A3E0D3A7448@msmail.textwise.com>
Message-ID: <Pine.LNX.4.58.0508301358380.23529@hal.rescomp.berkeley.edu>
References: <6134F668515B04409948FBEB644A3E0D3A7448@msmail.textwise.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The obvious answer here might be to use a filter for the first
: (required) clause and then query again using that filter for the other
: terms.  The problem I forsee with that solution is that I can't easily
: re-use the filters because of the sheer number of combinations of terms
: and the need to re-open my readers/searchers every few minutes to expose
: the steady stream of updates to querying on a regular basis.  As I
: understand it re-using a filter (rather than creating it, using it, and
: discarding it) is integral to it's value as a time saver and thus maybe
: not appropriate in this case.

In my opinion, the second integral aspect ot using a Filter is when you
want to limit which documents are returned without affecting the scores of
the documents -- as Paul pointed out in his reply, that may not be what
you want.

If scores are not important to you (ie: you are sorting by something else)
or if you are happy to have the score only influenced by the "optional"
parts of your initial query, then you can still get abig win out of using
Filters -- the key is to build a filter for each of the individual
required terms, and cache those using CacheWrappingFilter (so the number
of combinations is irrelevant to the cache size) and then use something
like a ChainedFilter to build up the specific combination you need to
Filter you search...

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/contrib/miscellaneous/src/java/org/apache/lucene/misc/ChainedFilter.java?view=markup


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 21:12:34 2005
Return-Path: <java-user-return-16130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65055 invoked from network); 30 Aug 2005 21:12:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 21:12:33 -0000
Received: (qmail 61204 invoked by uid 500); 30 Aug 2005 21:12:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61177 invoked by uid 500); 30 Aug 2005 21:12:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61164 invoked by uid 99); 30 Aug 2005 21:12:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 14:12:28 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 14:12:44 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 418AC5B7BA; Tue, 30 Aug 2005 14:12:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3ED537F476
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 14:12:27 -0700 (PDT)
Date: Tue, 30 Aug 2005 14:12:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: Index files in jar
In-Reply-To: <1A6B6A5A3597C340BB63728001DC787902330FB0@kodos.na.wrq.com>
Message-ID: <Pine.LNX.4.58.0508301410480.23529@hal.rescomp.berkeley.edu>
References: <1A6B6A5A3597C340BB63728001DC787902330FB0@kodos.na.wrq.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


As discussed in the past...

> The problem is that a jar file entry becomes an InputStream, but
> InputStream is not random access, and Lucene requires random access.  So
> you need to extract the index either to disk or RAM in order to get

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200501.mbox/%3c41EC0DB9.8030706@apache.org%3e


: Date: Mon, 29 Aug 2005 10:07:47 -0700
: From: Jon Schuster <jons@attachmatewrq.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: RE: Index files in jar
:
: Hi Tom,
:
: You could distribute your index files in a plain old directory outside
: of a jar file and install them with your application, then use
: FSDirectory to read from the installed location.
:
: But I can think of at least two ways to get the index files packaged
: into the application jar. One would be to write your own subclass of
: Directory (and perhaps IndexReader) that knows how to read entries
: directly from the jar file using JarInputStream. The other would be to
: use a RAMDirectory and populate the directory with the index files,
: perhaps reading the files using Class.getResourceAsStream or by creating
: a JarInputStream from an URL to the application jar.
:
: You can easily get an InputStream to your own application jar like this:
:
: 	CodeSource cs = theClass.getProtectionDomain().getCodeSource();
: 	URL providerURL = cs.getLocation();
: 	InputStream is = providerURL.openStream();
:
: Have fun,
: --Jon
:
:
: -----Original Message-----
: From: Thomas Lepkowski [mailto:thomlep@gmail.com]
: Sent: Monday, August 29, 2005 8:43 AM
: To: java-user@lucene.apache.org
: Subject: Index files in jar
:
:
: Hello,
:
: I have a set of index files that I'd like to distribute with my Java
: application. The only way this seems practical is to place the index
: files
: in a jar file. I tried this, but the search choked when I told
: IndexSearcher
: the index path inside the jar file ( and placed the jar file path in the
:
: CLASSPATH ).
:
: Any ideas on wrapping my index files inside a jar file?
:
: Thanks in advance for any help.
:
: -Tom
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 21:20:42 2005
Return-Path: <java-user-return-16131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67427 invoked from network); 30 Aug 2005 21:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 21:20:42 -0000
Received: (qmail 72419 invoked by uid 500); 30 Aug 2005 21:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72400 invoked by uid 500); 30 Aug 2005 21:20:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72387 invoked by uid 99); 30 Aug 2005 21:20:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 14:20:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [199.43.54.103] (HELO mlnyb905er.ml.com) (199.43.54.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 14:20:51 -0700
Received: from MLNYB853BH.amrs.win.ml.com (unknown [146.125.94.131])
	by mlnyb905er.ml.com (Postfix) with ESMTP id AF393E000304
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 17:20:31 -0400 (EDT)
Received: from mlnyb802bh.amrs.win.ml.com ([146.125.97.61]) by MLNYB853BH.amrs.win.ml.com with Microsoft SMTPSVC(5.0.2195.6713); Tue, 30 Aug 2005 17:20:31 -0400
Received: from mlnyb706mb.amrs.win.ml.com ([146.125.92.6]) by mlnyb802bh.amrs.win.ml.com with Microsoft SMTPSVC(5.0.2195.6713); Tue, 30 Aug 2005 17:20:31 -0400
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene + Persistence
Date: Tue, 30 Aug 2005 17:20:31 -0400
Importance: normal
Priority: normal
Message-ID: <82D2BB25EFABA3478B75FF11C88148D5147A2740@mlnyb706mb.amrs.win.ml.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene + Persistence
thread-index: AcWZw+0pCNvTFTC8RKOsvjkQuTQ8yAS8Mx5AAC9WtEAADaCpEA==
From: "Friedland, Zachary (EDS - Strategy)" <zachary_friedland@ml.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Aug 2005 21:20:31.0397 (UTC) FILETIME=[A6C50D50:01C5ADA8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Peter,

Check out Compass:
http://compass.sourceforge.net/

It is a layer that can integrate Hibernate and Lucene for you...

Thanks,
Zach

-----Original Message-----
From: Peter Gelderbloem [mailto:Peter.Gelderbloem@mediasurface.com]=20
Sent: Tuesday, August 30, 2005 10:52 AM
To: java-user@lucene.apache.org
Subject: Lucene + Persistence

Hi,
First off, I would just like to thank everyone who has contributed to
the gem we all know was Lucene.

I am thinking of using Lucene purely for text indexing and using a
persistence mechanism like hibernate to search structured data. Would it
be a good idea to use filters that do hibernate queries as criteria with
Lucene queries?

Thanks,
Peter Gelderbloem=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------------------------------------------------

If you are not an intended recipient of this e-mail, please notify the =
sender, delete it and do not read, act upon, print, disclose, copy, =
retain or redistribute it. Click here for important additional terms =
relating to this e-mail.     http://www.ml.com/email_terms/
--------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 21:20:55 2005
Return-Path: <java-user-return-16132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67470 invoked from network); 30 Aug 2005 21:20:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 21:20:55 -0000
Received: (qmail 73465 invoked by uid 500); 30 Aug 2005 21:20:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73447 invoked by uid 500); 30 Aug 2005 21:20:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73434 invoked by uid 99); 30 Aug 2005 21:20:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 14:20:50 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 14:21:05 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 88EB75B7AC; Tue, 30 Aug 2005 14:20:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 7F9D87F476; Tue, 30 Aug 2005 14:20:48 -0700 (PDT)
Date: Tue, 30 Aug 2005 14:20:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Cc: raymondcreel <raymondcreel@yahoo.com>
Subject: Re: custom sort
In-Reply-To: <6e3ae6310508292135fc5dd96@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0508301414560.23529@hal.rescomp.berkeley.edu>
References: <737222.post@talk.nabble.com> <6e3ae6310508292135fc5dd96@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: You can just assign the field B some weight when creating the index?

that implies that the field "A" being sorted on is SCORE ... which isn't
allways the case.

: Is it possible to write a custom sort for a query such that the first
: N documents that match a certain additional criteria get pushed to the
: top of the sort?  For instance say you sort your query based on field A,
: but you want to tweak the results such that the first 10 documents in
: the result set which have field B = some criteria will appear at the

absolutely, you can put juse about any code you want in a custom
SortComparatorSource to order documents using whatever rules you want.
You'll probably need to hard code your special field name "B" into the
code hosever, either that or fetch it from a global variable or a system
property.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 30 22:35:15 2005
Return-Path: <java-user-return-16133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90668 invoked from network); 30 Aug 2005 22:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Aug 2005 22:35:15 -0000
Received: (qmail 82928 invoked by uid 500); 30 Aug 2005 22:35:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82904 invoked by uid 500); 30 Aug 2005 22:35:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82890 invoked by uid 99); 30 Aug 2005 22:35:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 15:35:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [199.43.54.103] (HELO mlnyb905er.ml.com) (199.43.54.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 15:35:25 -0700
Received: from MLNYA351BH.amrs.win.ml.com (unknown [146.125.98.1])
	by mlnyb905er.ml.com (Postfix) with ESMTP id 5A34FE000307
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 18:35:08 -0400 (EDT)
Received: from mlnya303bh.amrs.win.ml.com ([146.125.109.53]) by MLNYA351BH.amrs.win.ml.com with Microsoft SMTPSVC(5.0.2195.6713); Tue, 30 Aug 2005 18:35:08 -0400
Received: from mlnyb706mb.amrs.win.ml.com ([146.125.92.6]) by mlnya303bh.amrs.win.ml.com with Microsoft SMTPSVC(5.0.2195.6713); Tue, 30 Aug 2005 18:34:53 -0400
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Ideal Index Fragmentation
Importance: normal
Priority: normal
Date: Tue, 30 Aug 2005 18:34:53 -0400
Message-ID: <82D2BB25EFABA3478B75FF11C88148D518D90530@mlnyb706mb.amrs.win.ml.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Ideal Index Fragmentation
Thread-Index: AcWZw+0pCNvTFTC8RKOsvjkQuTQ8yAS8Mx5AAC9WtEAADaCpEAACcduQ
From: "Friedland, Zachary (EDS - Strategy)" <zachary_friedland@ml.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Aug 2005 22:34:53.0515 (UTC) FILETIME=[0A6639B0:01C5ADB3]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does anyone have experience using lots of indexes simultaneously with
the multisearcher?  I'm looking to index 15 distinct objects for
searching, and was thinking of creating 15 distinct indexes for better
manageability & performance (for certain searches when I know which
index to search).

Certain indexes will be very large (2-3 million documents), but most
will be 50,000-500,000 documents.  Each document will contain a good
number of fields (20-50).

I know there are issues with file handles, but what happens to search
performance (parallel vs. sequential) over lots of indexes.  Am I better
off combining them into one huge index (2GB file limit may be an issue),
or some fragmentation in-between....

Any advice that you have had with a similar project would be greatly
appreciated.

Thanks,
Zach
--------------------------------------------------------

If you are not an intended recipient of this e-mail, please notify the =
sender, delete it and do not read, act upon, print, disclose, copy, =
retain or redistribute it. Click here for important additional terms =
relating to this e-mail.     http://www.ml.com/email_terms/
--------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 00:01:19 2005
Return-Path: <java-user-return-16134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12809 invoked from network); 31 Aug 2005 00:01:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 00:01:18 -0000
Received: (qmail 82877 invoked by uid 500); 31 Aug 2005 00:01:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82688 invoked by uid 500); 31 Aug 2005 00:01:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82671 invoked by uid 99); 31 Aug 2005 00:01:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 17:01:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 17:01:25 -0700
Received: by xproxy.gmail.com with SMTP id h33so95608wxd
        for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 17:01:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HFt5gPXEQc6Xc4HYzr7kmnM8rnzZrsuDvZAlNjPZTkrof86/Nh/d46ISz2ReCdPXb9mrHXChI10F1qqrDXiBC0UcVOP4578GJDVbBQL7q27VfJAgbD0sd3eDkE/Hptyc2nVvYKO1FpWP5HVHHVsp8zKCYq+5CYjJJ2WmgA9kNDc=
Received: by 10.70.56.18 with SMTP id e18mr37557wxa;
        Tue, 30 Aug 2005 17:01:08 -0700 (PDT)
Received: by 10.70.55.14 with HTTP; Tue, 30 Aug 2005 17:01:08 -0700 (PDT)
Message-ID: <88c6a67205083017015e595b8d@mail.gmail.com>
Date: Tue, 30 Aug 2005 19:01:08 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Ideal Index Fragmentation
In-Reply-To: <82D2BB25EFABA3478B75FF11C88148D518D90530@mlnyb706mb.amrs.win.ml.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <82D2BB25EFABA3478B75FF11C88148D518D90530@mlnyb706mb.amrs.win.ml.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Zach,
It probably won't help performance to split the index and then search
it on the same machine unless you search the indexes in parallel (with
a multiprocessor or multi-core machine).  Even in this case, the disk
is often a bottleneck, essentially preventing the search from really
running in parallel.  Although if your index is in the filesystem
cache this may be fast.

Notice I said "probably", "often", "may be" in the above paragraph --
you just have to performance test it and measure it to see.  Start
with a simple, one-index setup and see if that works.  A 2GB index
isn't itself a problem (under linux at least).    Then your queries
and any pre/post-query processing become the bigger factors.  I
haven't run into any filesize limits under linux with indexes up to
12GB (and others here with even larger indexes).  The one exception is
using Lucene 1.9's MMapDirectory-- it's limited to (I believe) 4GB on
a 32-bit platform.


On 8/30/05, Friedland, Zachary (EDS - Strategy)
<zachary_friedland@ml.com> wrote:
> Does anyone have experience using lots of indexes simultaneously with
> the multisearcher?  I'm looking to index 15 distinct objects for
> searching, and was thinking of creating 15 distinct indexes for better
> manageability & performance (for certain searches when I know which
> index to search).
>=20
> Certain indexes will be very large (2-3 million documents), but most
> will be 50,000-500,000 documents.  Each document will contain a good
> number of fields (20-50).
>=20
> I know there are issues with file handles, but what happens to search
> performance (parallel vs. sequential) over lots of indexes.  Am I better
> off combining them into one huge index (2GB file limit may be an issue),
> or some fragmentation in-between....
>=20
> Any advice that you have had with a similar project would be greatly
> appreciated.
>=20
> Thanks,
> Zach
> --------------------------------------------------------
>=20
> If you are not an intended recipient of this e-mail, please notify the se=
nder, delete it and do not read, act upon, print, disclose, copy, retain or=
 redistribute it. Click here for important additional terms relating to thi=
s e-mail.     http://www.ml.com/email_terms/
> --------------------------------------------------------
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 01:04:47 2005
Return-Path: <java-user-return-16135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24319 invoked from network); 31 Aug 2005 01:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 01:04:46 -0000
Received: (qmail 25236 invoked by uid 500); 31 Aug 2005 01:04:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25211 invoked by uid 500); 31 Aug 2005 01:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25198 invoked by uid 99); 31 Aug 2005 01:04:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 18:04:42 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=RCVD_BY_IP,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of david.medinets@gmail.com designates 66.249.82.206 as permitted sender)
Received: from [66.249.82.206] (HELO xproxy.gmail.com) (66.249.82.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 18:04:56 -0700
Received: by xproxy.gmail.com with SMTP id h33so98137wxd
        for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 18:04:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=rfoClCfCKEZbHkaZQ4D8a7pF5V3FuBTxEw8H9d61efbIm7AxqarD5nIRDXwieuAQXbD5P8t8TLp2r29LRg0gRXTw9EE4OHGR2X1aQonFsStGyeRGdCnmUiJfeaJoLLmnFqeFSdx0tjBuIvvQw5hdE2R4ZgUoZ1g6TVmM75u9HbA=
Received: by 10.70.56.20 with SMTP id e20mr38647wxa;
        Tue, 30 Aug 2005 18:04:39 -0700 (PDT)
Received: by 10.70.57.2 with HTTP; Tue, 30 Aug 2005 18:04:39 -0700 (PDT)
Message-ID: <e6281ffe05083018047b87aeb6@mail.gmail.com>
Date: Tue, 30 Aug 2005 21:04:39 -0400
From: David Medinets <david.medinets@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: permission control or category-wise search with Lucene
In-Reply-To: <66df4ae405082921474d90545a@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <66df4ae405082921474d90545a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I explored the idea of Role-Based Access Control using Lucene at
http://affy.blogspot.com/2003/04/using-lucene-for-role-based-access.html.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 01:54:04 2005
Return-Path: <java-user-return-16136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42694 invoked from network); 31 Aug 2005 01:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 01:54:04 -0000
Received: (qmail 70379 invoked by uid 500); 31 Aug 2005 01:53:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70346 invoked by uid 500); 31 Aug 2005 01:53:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70333 invoked by uid 99); 31 Aug 2005 01:53:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 18:53:59 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [199.43.54.100] (HELO mlnyb902er.ml.com) (199.43.54.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 18:54:13 -0700
Received: from MLNYA354BH.amrs.win.ml.com (unknown [146.125.98.4])
	by mlnyb902er.ml.com (Postfix) with ESMTP id AE8ABF0005FE
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 21:53:55 -0400 (EDT)
Received: from mlnya301bh.amrs.win.ml.com ([146.125.109.51]) by MLNYA354BH.amrs.win.ml.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 30 Aug 2005 21:53:55 -0400
Received: from mlnyb706mb.amrs.win.ml.com ([146.125.92.6]) by mlnya301bh.amrs.win.ml.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 30 Aug 2005 21:53:55 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5ADCE.D820E0CE"
Subject: RE: Ideal Index Fragmentation
Date: Tue, 30 Aug 2005 21:53:55 -0400
Message-ID: <82D2BB25EFABA3478B75FF11C88148D518D90531@mlnyb706mb.amrs.win.ml.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Ideal Index Fragmentation
Thread-Index: AcWtvxxmZ7wFvHfATiqPzqy+octUoQACB+CY
From: "Friedland, Zachary (EDS - Strategy)" <zachary_friedland@ml.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 31 Aug 2005 01:53:55.0533 (UTC) FILETIME=[D8658FD0:01C5ADCE]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5ADCE.D820E0CE
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64

Q2hyaXMsDQoNCiANCg0KVGhhbmtzIGZvciB5b3VyIGNvbW1lbnRzIC0tIGl0J3MgZ3JlYXQgdG8g
aGVhciB0aGF0IHBlb3BsZSBoYXZlIGhhZCBzdWNjZXNzIHdpdGggdmVyeSBsYXJnZSBpbmRleGVz
Lg0KDQogDQoNCkknbGwgYmUgcnVubmluZyBvbiBhIDQtQ1BVICgzLjhHSHosIDJHQiBSQU0pIFdp
bmRvd3MgMjAwMCBib3gsIHNvIGhvcGVmdWxseSBJJ2xsIGdldCBzb21lIGFkdmFudGFnZXMgd2l0
aCB0aGUgUGFyYWxsZWxNdWx0aVNlYXJjaGVyLi4uIElmIGFueW9uZSBoYXMgc29tZSBtZXRyaWNz
IHRvIHBvc3Qgb24gdXNpbmcgdGhlIFBhcmFsbGVsTXVsdGlTZWFyY2hlciBvbiBhIG11bHRpLUNQ
VSBib3gsIEknZCByZWFsbHkgYXBwcmVjaWF0ZSBpdC4NCg0KIA0KDQpNb3JlIGFzc29ydGVkIHF1
ZXN0aW9uczoNCg0KKglUbyBzdW1tYXJpemUgZnJvbSBiZWxvdzogSSd2ZSBnb3QgbG90cyBvZiBk
aXN0aW5jdCBvYmplY3RzLCBlYWNoIHdpdGggbG90cyBvZiBkaWZmZXJlbnQgZmllbGRzIChvZnRl
biB3aXRoIGRpZmZlcmVudCBib29zdHMpLiAgSSBoYXZlIHRyaWVkIGhhdmluZyB0aGUgc2VydmVy
IGJlIGF3YXJlIG9mIGFsbCB0aGUgaW5kZXhlcyBhbmQgY29uc3RydWN0IGxhcmdlIE9SIHF1ZXJp
ZXMsIGJ1dCB0aGF0IHRha2VzIHRvbnMgb2YgbWVtb3J5IHRvIHJ1biB0aGVzZSBxdWVyaWVzLiAg
QXMgYW4gYWx0ZXJuYXRpdmUsIEkndmUgY29uY2F0ZW5hdGVkIGFsbCB0aGUgY29yZSBzZWFyY2hh
YmxlIGZpZWxkcyBpbnRvIGdyb3VwcyBiYXNlZCBvbiB0aGVpciBib29zdHMuICBTbyBJIGVuZCB1
cCB3aXRoIHRoZSBzYW1lIGZpdmUgZmllbGRzIGluIGFsbCBpbmRleGVzLCBhbmQgYWRqdXN0IHRo
ZSBib29zdCBhY2NvcmRpbmdseSAoU2VhcmNoQWxsMTMwLCBTZWFyY2hBbGwxMjAsIFNlYXJjaEFs
bDEwMCwgU2VhcmNoQWxsOTAsIFNlYXJjaEFsbDc1KS4gIFRoaXMgd29ya3MgcHJldHR5IHdlbGwg
aW4gdGVybXMgb2YgcmVzdWx0cyBhbmQgaXMgYmV0dGVyIHdpdGggbWVtb3J5LiAgSGFzIGFueWJv
ZHkgZWxzZSB0cmllZCB0byBkbyBhbnl0aGluZyBsaWtlIHRoaXMgLSBob3cgZGlkIGl0IHdvcmsg
b3V0PyAgSXMgdGhlcmUgYSBiZXR0ZXIgc3RyYXRlZ3kgdG8gc2VhcmNoIGxvdHMgb2YgZGlzdGlu
Y3QgZmllbGRzIGluIGxvdHMgb2YgaW5kZXhlcz8NCioJSSBoYXZlIGJlZW4gcmVhZGluZyB0aGUg
cG9zdHMgb24gdXNpbmcgRmlsdGVyIHZzLiBCb29sZWFuUXVlcnkuICBUbyBpbXBsZW1lbnQgYSBz
ZWFyY2gtd2l0aGluLWEtc2VhcmNoLCBpdCBzZWVtcyB0aGUgRmlsdGVyIGlzIGFkdmFudGFnZW91
cyBkdWUgdG8gaXRzIGNhY2hlYWJpbGl0eSwgYnV0IGFyZSB0aGVyZSBvdGhlciBwcm9zIG9yIGNv
bnMgdGhhdCBzaG91bGQgYmUgY29uc2lkZXJlZCAobWVtb3J5LCBzcGVlZCwgZXRjKS4NCioJSSdt
IGludGVyZXN0ZWQgaW4gaW1wbGVtZW50aW5nIGEgImR5bmFtaWMgZmlsdGVyIiBjb21wb25lbnQg
dGhhdCB3aWxsIHdhbGsgdGhyb3VnaCB0aGUgaGl0c1tdIG9iamVjdCBhbmQgcHVsbCBvdXQgZGlz
dGluY3QgdmFsdWVzIGZvciBjZXJ0YWluIGZpZWxkcyB0byBkaXNwbGF5IGFzIHNlYXJjaC13aXRo
aW4tYS1zZWFyY2ggb3B0aW9ucyAoYWxsIG9mIHRoZW0gd2lsbCByZXR1cm4gYXQgbGVhc3Qgb25l
IHJlc3VsdCBzaW5jZSB0aGV5IGFyZSBpbiB0aGUgaGl0c1tdKS4gIEhhcyBhbnlvbmUgaW1wbGVt
ZW50ZWQgc29tZXRoaW5nIGxpa2UgdGhpcyAtLSBob3cgZGlkIGl0IHdvcmsgb3V0Pw0KKglXaGVu
IHVzaW5nIGEgUGFyYWxsZWxNdWx0aVNlYXJjaGVyLCBpcyB0aGVyZSBhbiBlYXN5IHdheSB0byBr
bm93IGhvdyBtYW55IG1hdGNoZXMgY2FtZSBmcm9tIGVhY2ggaW5kZXggc2VhcmNoZWQ/ICBJJ2Qg
bGlrZSB0byBiZSBhYmxlIHRvIGRpc3BsYXkgaG93IG1hbnkgb2YgZWFjaCBvYmplY3QgYXJlIGlu
IHRoZSBjb21iaW5lZCBoaXRzW10uICBTaW5jZSBJJ20gc3RvcmluZyBvbmUgb2JqZWN0IHR5cGUg
cGVyIGluZGV4LCB0aGUgY291bnQgb2YgaGl0cyBmcm9tIGVhY2ggaW5kZXggd2lsbCBnaXZlIG1l
IHRoYXQgbnVtYmVyLg0KKglEb2VzIGFueW9uZSBrbm93IHdoZW4gMS45LzIuMCB3aWxsIGJlIHJl
bGVhc2VkPw0KDQpTb3JyeSBmb3IgdGhlIGxvbmcgcG9zdC4uLi4NCg0KVGhhbmtzLA0KDQpaYWNo
DQoNCiANCg0KIA0KDQoJLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0gDQoJRnJvbTogQ2hyaXMg
TGFtcHJlY2h0IFttYWlsdG86Y2xhbXByZWNodEBnbWFpbC5jb21dIA0KCVNlbnQ6IFR1ZSA4LzMw
LzIwMDUgODowMSBQTSANCglUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnIA0KCUNjOiAN
CglTdWJqZWN0OiBSZTogSWRlYWwgSW5kZXggRnJhZ21lbnRhdGlvbg0KCQ0KCQ0KDQoJWmFjaCwN
CglJdCBwcm9iYWJseSB3b24ndCBoZWxwIHBlcmZvcm1hbmNlIHRvIHNwbGl0IHRoZSBpbmRleCBh
bmQgdGhlbiBzZWFyY2gNCglpdCBvbiB0aGUgc2FtZSBtYWNoaW5lIHVubGVzcyB5b3Ugc2VhcmNo
IHRoZSBpbmRleGVzIGluIHBhcmFsbGVsICh3aXRoDQoJYSBtdWx0aXByb2Nlc3NvciBvciBtdWx0
aS1jb3JlIG1hY2hpbmUpLiAgRXZlbiBpbiB0aGlzIGNhc2UsIHRoZSBkaXNrDQoJaXMgb2Z0ZW4g
YSBib3R0bGVuZWNrLCBlc3NlbnRpYWxseSBwcmV2ZW50aW5nIHRoZSBzZWFyY2ggZnJvbSByZWFs
bHkNCglydW5uaW5nIGluIHBhcmFsbGVsLiAgQWx0aG91Z2ggaWYgeW91ciBpbmRleCBpcyBpbiB0
aGUgZmlsZXN5c3RlbQ0KCWNhY2hlIHRoaXMgbWF5IGJlIGZhc3QuDQoJDQoJTm90aWNlIEkgc2Fp
ZCAicHJvYmFibHkiLCAib2Z0ZW4iLCAibWF5IGJlIiBpbiB0aGUgYWJvdmUgcGFyYWdyYXBoIC0t
DQoJeW91IGp1c3QgaGF2ZSB0byBwZXJmb3JtYW5jZSB0ZXN0IGl0IGFuZCBtZWFzdXJlIGl0IHRv
IHNlZS4gIFN0YXJ0DQoJd2l0aCBhIHNpbXBsZSwgb25lLWluZGV4IHNldHVwIGFuZCBzZWUgaWYg
dGhhdCB3b3Jrcy4gIEEgMkdCIGluZGV4DQoJaXNuJ3QgaXRzZWxmIGEgcHJvYmxlbSAodW5kZXIg
bGludXggYXQgbGVhc3QpLiAgICBUaGVuIHlvdXIgcXVlcmllcw0KCWFuZCBhbnkgcHJlL3Bvc3Qt
cXVlcnkgcHJvY2Vzc2luZyBiZWNvbWUgdGhlIGJpZ2dlciBmYWN0b3JzLiAgSQ0KCWhhdmVuJ3Qg
cnVuIGludG8gYW55IGZpbGVzaXplIGxpbWl0cyB1bmRlciBsaW51eCB3aXRoIGluZGV4ZXMgdXAg
dG8NCgkxMkdCIChhbmQgb3RoZXJzIGhlcmUgd2l0aCBldmVuIGxhcmdlciBpbmRleGVzKS4gIFRo
ZSBvbmUgZXhjZXB0aW9uIGlzDQoJdXNpbmcgTHVjZW5lIDEuOSdzIE1NYXBEaXJlY3RvcnktLSBp
dCdzIGxpbWl0ZWQgdG8gKEkgYmVsaWV2ZSkgNEdCIG9uDQoJYSAzMi1iaXQgcGxhdGZvcm0uDQoJ
DQoJDQoJT24gOC8zMC8wNSwgRnJpZWRsYW5kLCBaYWNoYXJ5IChFRFMgLSBTdHJhdGVneSkNCgk8
emFjaGFyeV9mcmllZGxhbmRAbWwuY29tPiB3cm90ZToNCgk+IERvZXMgYW55b25lIGhhdmUgZXhw
ZXJpZW5jZSB1c2luZyBsb3RzIG9mIGluZGV4ZXMgc2ltdWx0YW5lb3VzbHkgd2l0aA0KCT4gdGhl
IG11bHRpc2VhcmNoZXI/ICBJJ20gbG9va2luZyB0byBpbmRleCAxNSBkaXN0aW5jdCBvYmplY3Rz
IGZvcg0KCT4gc2VhcmNoaW5nLCBhbmQgd2FzIHRoaW5raW5nIG9mIGNyZWF0aW5nIDE1IGRpc3Rp
bmN0IGluZGV4ZXMgZm9yIGJldHRlcg0KCT4gbWFuYWdlYWJpbGl0eSAmIHBlcmZvcm1hbmNlIChm
b3IgY2VydGFpbiBzZWFyY2hlcyB3aGVuIEkga25vdyB3aGljaA0KCT4gaW5kZXggdG8gc2VhcmNo
KS4NCgk+DQoJPiBDZXJ0YWluIGluZGV4ZXMgd2lsbCBiZSB2ZXJ5IGxhcmdlICgyLTMgbWlsbGlv
biBkb2N1bWVudHMpLCBidXQgbW9zdA0KCT4gd2lsbCBiZSA1MCwwMDAtNTAwLDAwMCBkb2N1bWVu
dHMuICBFYWNoIGRvY3VtZW50IHdpbGwgY29udGFpbiBhIGdvb2QNCgk+IG51bWJlciBvZiBmaWVs
ZHMgKDIwLTUwKS4NCgk+DQoJPiBJIGtub3cgdGhlcmUgYXJlIGlzc3VlcyB3aXRoIGZpbGUgaGFu
ZGxlcywgYnV0IHdoYXQgaGFwcGVucyB0byBzZWFyY2gNCgk+IHBlcmZvcm1hbmNlIChwYXJhbGxl
bCB2cy4gc2VxdWVudGlhbCkgb3ZlciBsb3RzIG9mIGluZGV4ZXMuICBBbSBJIGJldHRlcg0KCT4g
b2ZmIGNvbWJpbmluZyB0aGVtIGludG8gb25lIGh1Z2UgaW5kZXggKDJHQiBmaWxlIGxpbWl0IG1h
eSBiZSBhbiBpc3N1ZSksDQoJPiBvciBzb21lIGZyYWdtZW50YXRpb24gaW4tYmV0d2Vlbi4uLi4N
Cgk+DQoJPiBBbnkgYWR2aWNlIHRoYXQgeW91IGhhdmUgaGFkIHdpdGggYSBzaW1pbGFyIHByb2pl
Y3Qgd291bGQgYmUgZ3JlYXRseQ0KCT4gYXBwcmVjaWF0ZWQuDQoJPg0KCT4gVGhhbmtzLA0KCT4g
WmFjaA0KCT4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0NCgk+DQoJPiBJZiB5b3UgYXJlIG5vdCBhbiBpbnRlbmRlZCByZWNpcGllbnQgb2Yg
dGhpcyBlLW1haWwsIHBsZWFzZSBub3RpZnkgdGhlIHNlbmRlciwgZGVsZXRlIGl0IGFuZCBkbyBu
b3QgcmVhZCwgYWN0IHVwb24sIHByaW50LCBkaXNjbG9zZSwgY29weSwgcmV0YWluIG9yIHJlZGlz
dHJpYnV0ZSBpdC4gQ2xpY2sgaGVyZSBmb3IgaW1wb3J0YW50IGFkZGl0aW9uYWwgdGVybXMgcmVs
YXRpbmcgdG8gdGhpcyBlLW1haWwuICAgICBodHRwOi8vd3d3Lm1sLmNvbS9lbWFpbF90ZXJtcy8N
Cgk+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tDQoJPg0KCT4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoJPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZh
LXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCgk+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoJPg0KCT4N
CgkNCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NCglUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCglGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KCQ0KCQ0KDQo=

------_=_NextPart_001_01C5ADCE.D820E0CE--

From java-user-return-16137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 02:25:25 2005
Return-Path: <java-user-return-16137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50111 invoked from network); 31 Aug 2005 02:25:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 02:25:24 -0000
Received: (qmail 91415 invoked by uid 500); 31 Aug 2005 02:25:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91380 invoked by uid 500); 31 Aug 2005 02:25:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91361 invoked by uid 99); 31 Aug 2005 02:25:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 19:25:20 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 19:25:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D5F575B825; Tue, 30 Aug 2005 19:25:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D4C7C7F476
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 19:25:14 -0700 (PDT)
Date: Tue, 30 Aug 2005 19:25:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Announcement: Lucene powering CNET.com Product Category Listings
Message-ID: <Pine.LNX.4.58.0508301921310.5975@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I'm pleased to announce that for about a month now, CNET's "Product
Listing" pages are powered by Lucene 1.4.3.  These pages not only allow
users to browse CNET's catalog of tech products by category, but also to
"Filter" the lists according to category specific Attribute Filters which
are displayed along with counts of how many products they will get if they
apply that Filter.  Multiple Filters can be applied (in any order) to
rapidly narrow down the list of products.

Examples of these pages can be seen here...

Digital Cameras
http://reviews.cnet.com/4566-6501_7-0.html

Inkjet Printers
http://reviews.cnet.com/4566-3156_7-0.html

Epson Inkjet Printers
http://reviews.cnet.com/4566-3156_7-0.html?filter=1000036_5251152_

Epson Inkjet Printers that can print on Transparencies
http://reviews.cnet.com/4566-3156_7-0.html?filter=1000036_5251152_500193_5314692_

These pages work much the same way as I've described in past threads
regarding "category counts", except that the logic determining which
filter links to display is not as simple as just pulling out the most
frequent terms per field, or based on a fixed list.  As you can see from
the example links, each category has it's own unique list of attributes
(ie: Price, Manufacturer, etc...) and for each of those attributes, there
is a list of Queries which map one to one with a possible "Find by" link.
Even if an Attribute is common between two categories, the list of Queries
to filter by may be different -- note the differences in the "Find by
price" lists between the various links above.  We have several thousand
unique categories, and some of these have as many as a thousand unique
Filter Queries which are needed to determine the counts to display on any
given page for that category, but using some very aggressive Filter
caching the time for a single request is kept very manageable.

For those who are interested, I can elaborate a little more on how these
pages work....



At a high level there are four major pieces...

1) A Servlet which abstracts away most of the Lucene index modification
APIs into an HTTP/XML based "web service" by accepting POSTed XML
documents to add/update in the index.  It also replies to GET search
requests using query plugins that have access to an IndexReader.

2) A ProductData index updater, which is executed as part of our "product
publishing" process.  Anytime a product is added (or modified) in our
database the updater creates an XML document describing the product and
POSTs it to the above mentioned Servlet (which indexes it).

3) A Metadata index updater, which is executed as part of our "category
metadata publishing" process.  Anytime someone decides to change the
metadata that describes a category, this process creates an XML document
containing that metadata, and POSTs it to the above mentioned Servlet
(I'll elaborate more on these category documents in a moment).

4) A Query Plugin used by the Servlet specificly to generate the product
result lists and counts needed for these product listing pages.


The Category Metadata documents are what really drive the behavior of the
Plugin.  They contain the following information...

  * A Query whose results are all products to display in this category
  * An ordered list of Attributes that can be filtered on
    - A datatype for each Attribute
    - An ordered list of "Filters" for each Attribute
      + A label to display for each Filter
      + A Query to define what products match that Filter

When a request comes in for a category, the first thing the Plugin does is
an initial query on the category Id to get the category's Metadata
document.  From that document, the field containing the Query that defines
that category is extracted, and a search is issued against it (using
whatever Sort options have been specified).  This Category Query is also
used to build a QueryFilter so that a BitSet of every matching product can
be obtained.  For each Filter in each Attribute found in the Category's
document, the Query is extracted, and again a QueryFilter is built to
obtain a BitSet of all products which match.  The intersection of that
BitSet with the BitSet from the initial Category Query is computed to
determine the "count" to display next to the Filter label.  Once all of
this is done the list of products, all of the data from the Category
Metadata document, and the counts for each of the Category Filters are
bundled up into an XML response document.  The client which initiated the
search can then apply additional Business logic to decide which
attributes/filters to display counts for -- the simple case is to display
the first N attributes, and for each attribute display the Filter links
with the highest counts, but in some cases the links may be displayed in
different orders based on the datatype of the attribute.

When a user clicks on a Filter link the process is the same as before, but
the initial Category Query is augmented by the Filter that has been
selected -- so the results to display on the first page (and the BitSet of
all matching products) are correct.  The new counts (which take into
account the selected Filter) are computed exactly as before -- using
BitSet intersections.


What makes all of this feasible to do during a single user request, and
what keeps the load on our servers manageable, is an aggressive caching
strategy.

The Servlet maintains a single IndexReader for use by the any requests to
the Query Plugin.  The Servlet also maintains a fixed size Cache of [
Filter => BitSet] (This cache currently uses LRU replacement, but ideally
it would be LFU).  The Servlet keeps track of when it makes modifications
to the index, and once it's decided that it is time to make those
modifications visible to the plugin it uses a background thread to open a
new IndexReader, and create a new Cache instance which it warms up by
"pre-computing" the BitSets for the top N Filters in the Cache already in
use.  It then swaps out the "old" IndexReader/Cache pair with the new
IndexReader/Cache for all subsequent searches.

Given a large amount of RAM, and infrequent updates to the index, page
hits to most categories rarely involve anything more then Cache lookups.
But even when we make frequent updates, the Cache warming we do with a
newly constructed IndexReader prior to actually *using* the IndexReader
allows us to remain very responsive on our most popular categories.
Through configuration, we can decide: Is it more important to open new
IndexReaders as fast as possible (and display new results immediately) at
the expense of not being able to pre-warm the cache very much? (resulting
in slower page loads) ... Or: Is it more important to keep our page load
times very low, by pre-warming our cache with everything and the kitchen
sink (which means results take a while to update because we are opening
new IndexReaders less frequently).  Our current configuration results in
~95% cache hit rate for our Filters.



Hopefully I've explained the overall design of our system well enough that
people interested in doing "category counts" and "drilling down" can see
that it is possible, even when you are dealing with a very large number of
Filters.  I'm sure my familiarity with the system has caused me to write
something that makes perfect sense to me, but is totally unintelligible to
everyone else -- if so, please feel free to ask any questions you have,
I'll try to answer them as best I can.  Some questions regarding the
internals of the Servlet and the Caching it does may be beyond my ability
to answer because they were developed by my coworker -- but he is also an
active participant on this list, and (time permitting) I'm sure he'd
happily answer any questions I can not.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 02:54:40 2005
Return-Path: <java-user-return-16138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57518 invoked from network); 31 Aug 2005 02:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 02:54:40 -0000
Received: (qmail 20394 invoked by uid 500); 31 Aug 2005 02:54:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20369 invoked by uid 500); 31 Aug 2005 02:54:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20352 invoked by uid 99); 31 Aug 2005 02:54:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 19:54:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 19:54:51 -0700
Received: by xproxy.gmail.com with SMTP id i28so74338wxd
        for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 19:54:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Tzq1We8nmteAAHxhk74BoulJmKfIZHHQ53jJTZkfGAz/bFV2nGOZh+5wbzrfdnnwPpOHiSjAQTCZqNU8m4sbpsRzxtwzcjNxKn3aq39I7oORl1x6s6LP37eptyh758NuYrWaodVsQejEKLyTF+Jo8ReqiSujHO/x2RaQt5E0pIQ=
Received: by 10.70.50.16 with SMTP id x16mr17815wxx;
        Tue, 30 Aug 2005 19:54:33 -0700 (PDT)
Received: by 10.70.23.8 with HTTP; Tue, 30 Aug 2005 19:54:33 -0700 (PDT)
Message-ID: <6e3ae63105083019546c4e3bfe@mail.gmail.com>
Date: Tue, 30 Aug 2005 19:54:33 -0700
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering CNET.com Product Category Listings
In-Reply-To: <Pine.LNX.4.58.0508301921310.5975@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <Pine.LNX.4.58.0508301921310.5975@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Very nice implementation and a great write up.

How large is the index?
And when you keep posting new content to the index, will you optimize the i=
ndex?

--=20
Chris Lu
------------
Lucene Search RAD on Any Database
http://www.dbsight.net

On 8/30/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>=20
> I'm pleased to announce that for about a month now, CNET's "Product
> Listing" pages are powered by Lucene 1.4.3.  These pages not only allow
> users to browse CNET's catalog of tech products by category, but also to
> "Filter" the lists according to category specific Attribute Filters which
> are displayed along with counts of how many products they will get if the=
y
> apply that Filter.  Multiple Filters can be applied (in any order) to
> rapidly narrow down the list of products.
>=20
> Examples of these pages can be seen here...
>=20
> Digital Cameras
> http://reviews.cnet.com/4566-6501_7-0.html
>=20
> Inkjet Printers
> http://reviews.cnet.com/4566-3156_7-0.html
>=20
> Epson Inkjet Printers
> http://reviews.cnet.com/4566-3156_7-0.html?filter=3D1000036_5251152_
>=20
> Epson Inkjet Printers that can print on Transparencies
> http://reviews.cnet.com/4566-3156_7-0.html?filter=3D1000036_5251152_50019=
3_5314692_
>=20
> These pages work much the same way as I've described in past threads
> regarding "category counts", except that the logic determining which
> filter links to display is not as simple as just pulling out the most
> frequent terms per field, or based on a fixed list.  As you can see from
> the example links, each category has it's own unique list of attributes
> (ie: Price, Manufacturer, etc...) and for each of those attributes, there
> is a list of Queries which map one to one with a possible "Find by" link.
> Even if an Attribute is common between two categories, the list of Querie=
s
> to filter by may be different -- note the differences in the "Find by
> price" lists between the various links above.  We have several thousand
> unique categories, and some of these have as many as a thousand unique
> Filter Queries which are needed to determine the counts to display on any
> given page for that category, but using some very aggressive Filter
> caching the time for a single request is kept very manageable.
>=20
> For those who are interested, I can elaborate a little more on how these
> pages work....
>=20
>=20
>=20
> At a high level there are four major pieces...
>=20
> 1) A Servlet which abstracts away most of the Lucene index modification
> APIs into an HTTP/XML based "web service" by accepting POSTed XML
> documents to add/update in the index.  It also replies to GET search
> requests using query plugins that have access to an IndexReader.
>=20
> 2) A ProductData index updater, which is executed as part of our "product
> publishing" process.  Anytime a product is added (or modified) in our
> database the updater creates an XML document describing the product and
> POSTs it to the above mentioned Servlet (which indexes it).
>=20
> 3) A Metadata index updater, which is executed as part of our "category
> metadata publishing" process.  Anytime someone decides to change the
> metadata that describes a category, this process creates an XML document
> containing that metadata, and POSTs it to the above mentioned Servlet
> (I'll elaborate more on these category documents in a moment).
>=20
> 4) A Query Plugin used by the Servlet specificly to generate the product
> result lists and counts needed for these product listing pages.
>=20
>=20
> The Category Metadata documents are what really drive the behavior of the
> Plugin.  They contain the following information...
>=20
>   * A Query whose results are all products to display in this category
>   * An ordered list of Attributes that can be filtered on
>     - A datatype for each Attribute
>     - An ordered list of "Filters" for each Attribute
>       + A label to display for each Filter
>       + A Query to define what products match that Filter
>=20
> When a request comes in for a category, the first thing the Plugin does i=
s
> an initial query on the category Id to get the category's Metadata
> document.  From that document, the field containing the Query that define=
s
> that category is extracted, and a search is issued against it (using
> whatever Sort options have been specified).  This Category Query is also
> used to build a QueryFilter so that a BitSet of every matching product ca=
n
> be obtained.  For each Filter in each Attribute found in the Category's
> document, the Query is extracted, and again a QueryFilter is built to
> obtain a BitSet of all products which match.  The intersection of that
> BitSet with the BitSet from the initial Category Query is computed to
> determine the "count" to display next to the Filter label.  Once all of
> this is done the list of products, all of the data from the Category
> Metadata document, and the counts for each of the Category Filters are
> bundled up into an XML response document.  The client which initiated the
> search can then apply additional Business logic to decide which
> attributes/filters to display counts for -- the simple case is to display
> the first N attributes, and for each attribute display the Filter links
> with the highest counts, but in some cases the links may be displayed in
> different orders based on the datatype of the attribute.
>=20
> When a user clicks on a Filter link the process is the same as before, bu=
t
> the initial Category Query is augmented by the Filter that has been
> selected -- so the results to display on the first page (and the BitSet o=
f
> all matching products) are correct.  The new counts (which take into
> account the selected Filter) are computed exactly as before -- using
> BitSet intersections.
>=20
>=20
> What makes all of this feasible to do during a single user request, and
> what keeps the load on our servers manageable, is an aggressive caching
> strategy.
>=20
> The Servlet maintains a single IndexReader for use by the any requests to
> the Query Plugin.  The Servlet also maintains a fixed size Cache of [
> Filter =3D> BitSet] (This cache currently uses LRU replacement, but ideal=
ly
> it would be LFU).  The Servlet keeps track of when it makes modifications
> to the index, and once it's decided that it is time to make those
> modifications visible to the plugin it uses a background thread to open a
> new IndexReader, and create a new Cache instance which it warms up by
> "pre-computing" the BitSets for the top N Filters in the Cache already in
> use.  It then swaps out the "old" IndexReader/Cache pair with the new
> IndexReader/Cache for all subsequent searches.
>=20
> Given a large amount of RAM, and infrequent updates to the index, page
> hits to most categories rarely involve anything more then Cache lookups.
> But even when we make frequent updates, the Cache warming we do with a
> newly constructed IndexReader prior to actually *using* the IndexReader
> allows us to remain very responsive on our most popular categories.
> Through configuration, we can decide: Is it more important to open new
> IndexReaders as fast as possible (and display new results immediately) at
> the expense of not being able to pre-warm the cache very much? (resulting
> in slower page loads) ... Or: Is it more important to keep our page load
> times very low, by pre-warming our cache with everything and the kitchen
> sink (which means results take a while to update because we are opening
> new IndexReaders less frequently).  Our current configuration results in
> ~95% cache hit rate for our Filters.
>=20
>=20
>=20
> Hopefully I've explained the overall design of our system well enough tha=
t
> people interested in doing "category counts" and "drilling down" can see
> that it is possible, even when you are dealing with a very large number o=
f
> Filters.  I'm sure my familiarity with the system has caused me to write
> something that makes perfect sense to me, but is totally unintelligible t=
o
> everyone else -- if so, please feel free to ask any questions you have,
> I'll try to answer them as best I can.  Some questions regarding the
> internals of the Servlet and the Caching it does may be beyond my ability
> to answer because they were developed by my coworker -- but he is also an
> active participant on this list, and (time permitting) I'm sure he'd
> happily answer any questions I can not.
>=20
>=20
>=20
> -Hoss
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 04:41:05 2005
Return-Path: <java-user-return-16139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84809 invoked from network); 31 Aug 2005 04:41:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 04:41:05 -0000
Received: (qmail 98045 invoked by uid 500); 31 Aug 2005 04:41:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98021 invoked by uid 500); 31 Aug 2005 04:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98008 invoked by uid 99); 31 Aug 2005 04:41:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 21:41:00 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 21:41:15 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1EAKPB-0007Ro-Vu
	for java-user@lucene.apache.org; Tue, 30 Aug 2005 21:40:58 -0700
Message-ID: <748901.post@talk.nabble.com>
Date: Tue, 30 Aug 2005 21:40:57 -0700 (PDT)
From: "kapilChhabra (sent by Nabble.com)" <lists@nabble.com>
Reply-To: kapilChhabra <kapil.chhabra@naukri.com>
To: java-user@lucene.apache.org
Subject: Re: Search Results Clustering
In-Reply-To: <Pine.LNX.4.58.0508301344531.23529@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49_16692412.1125463257948"
X-Nabble-Sender: Nabble Forums <lists@nabble.com>
X-Nabble-From: kapilChhabra <kapil.chhabra@naukri.com>
References: <696937.post@talk.nabble.com> <Pine.LNX.4.58.0508241616380.8920@hal.rescomp.berkeley.edu> <731549.post@talk.nabble.com> <Pine.LNX.4.58.0508301344531.23529@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_49_16692412.1125463257948
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


thanks a lot for your suggestion.
I'll try it and get back if need be.

Meanwhile, I gave it a thought and concluded that the best time to do the categorization/clustering should be lucene calculates Hits/in the Scrorer.
I am not sure if I am right. 
In addition to the current functionality can we modify the Scorer class add the following feature:
The class generates a 2 dimentional array for the clustered field, the first dimention contains the distinct values of the field and the second dimention contains the count of results under this field. This value is incremented for an acceptible hit.
Does it make sense? 
If it is possible, i'll dig deeper into the code of the Hits/Scorer classes.

Thanks in advance,
kapilChhabra


--
Sent from the Lucene - Java Users forum at Nabble.com:
http://www.nabble.com/Search-Results-Clustering-t249355.html#a748901

------=_Part_49_16692412.1125463257948--


From java-user-return-16140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 05:10:42 2005
Return-Path: <java-user-return-16140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91965 invoked from network); 31 Aug 2005 05:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 05:10:42 -0000
Received: (qmail 25624 invoked by uid 500); 31 Aug 2005 05:10:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25598 invoked by uid 500); 31 Aug 2005 05:10:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25585 invoked by uid 99); 31 Aug 2005 05:10:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 22:10:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 22:10:52 -0700
Received: by wproxy.gmail.com with SMTP id i5so51951wra
        for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 22:10:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hqXP2feLukkKgEhi42I6W1WBlKg7NDPDLdhLLaMPeQ7o1HMUhWpwFjNdh88mI1TM9kpEGGUBeVwYBnRk/5p4bmO8dYivmOzBfqtoFJsnjlthajnFiynu3c+jSulRv+gza13onKUHyeijleuBW6jCFoIKPDmVbQKmhRhl7pG3dck=
Received: by 10.54.137.20 with SMTP id k20mr425120wrd;
        Tue, 30 Aug 2005 22:10:36 -0700 (PDT)
Received: by 10.54.125.18 with HTTP; Tue, 30 Aug 2005 22:10:36 -0700 (PDT)
Message-ID: <fb9748c905083022103e411ffe@mail.gmail.com>
Date: Wed, 31 Aug 2005 13:10:36 +0800
From: Ray Tsang <saturnism@gmail.com>
To: java-user@lucene.apache.org, kapilChhabra <kapil.chhabra@naukri.com>
Subject: Re: Search Results Clustering
In-Reply-To: <748901.post@talk.nabble.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <696937.post@talk.nabble.com>
	 <Pine.LNX.4.58.0508241616380.8920@hal.rescomp.berkeley.edu>
	 <731549.post@talk.nabble.com>
	 <Pine.LNX.4.58.0508301344531.23529@hal.rescomp.berkeley.edu>
	 <748901.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SSBoYWQgc2ltaWxhciByZXF1aXJlbWVudHMgb2YgImNvdW50IiBhbmQgImdyb3VwIGJ5IiBvbiBv
dmVyIDEzMG1pbApyZWNvcmRzLCBpdCdzIHJlYWxseSBhIHBhaW4uICBJdCdzIGN1cnJlbnRseSB1
c2FibGUgYnV0IG5vdApzYXRpc2ZhY3RvcnkuCgpDdXJyZW50bHkgaXQncyBncm91cGluZyBhdCBy
dW4tdGltZSBieSBpdGVyYXRpbmcgdGhyb3VnaCB1bmdyb3VwZWQKaXRlbXMuICBJdCBjb2xsZWN0
cyBtYXRjaGluZyBkb2N1bWVudHMgaW50byBCaXRTZXQsIHNvIHN1YnNlcXVlbnQKcXVlcmllcyBj
YW4gdXNlIEJpdFNldCB0byByZXRyaWV2ZSB0aGUgcmVzdWx0cyBvZiBvcmlnaW5hbCBxdWVyeS4g
Ck1vcmVvdmVyLCBpdCBjYW4gbWFyayBvZmYgZG9jdW1lbnRzIHRoYXQgYXJlIGFscmVhZHkgYmVp
bmcgZ3JvdXBlZApmcm9tIHRoZSBCaXRTZXQuCgpJbiBhIHBhZ2UgdGhhdCBzaG93cyAxMCByZWNv
cmRzL3BhZ2UsIGl0IHdpbGwgb25seSBncm91cCAxMCByZWNvcmRzIGF0CmEgdGltZS4gQ29uc2Vx
dWVudGx5LCB0aGVyZSBpcyBubyB3YXkgdG8ga25vdyB0aGUgdG90YWwgbnVtYmVyIGdyb3VwZWQK
cmVjb3JkcyBpbiB0aGUgYmVnaW5uaW5nLgoKSW4gYWRkaXRpb24sIGl0IGZlZWxzIGxpa2UgcmVh
ZGluZyB0aGUgZmllbGQgdmFsdWVzIGZyb20gdGhlIGRvY3VtZW50CmluIG9yZGVyIHRvIGxvb2sg
Zm9yIGdyb3VwLWJ5IHJlc3VsdHMgaXMgbW9zdCB0aW1lIGNvbnN1bWluZy4KCkhvdyBkb2VzIFJE
Qk1TIGRvIGl0PwoKcmF5LAoKT24gOC8zMS8wNSwga2FwaWxDaGhhYnJhIChzZW50IGJ5IE5hYmJs
ZS5jb20pIDxsaXN0c0BuYWJibGUuY29tPiB3cm90ZToKPiAKPiB0aGFua3MgYSBsb3QgZm9yIHlv
dXIgc3VnZ2VzdGlvbi4KPiBJJ2xsIHRyeSBpdCBhbmQgZ2V0IGJhY2sgaWYgbmVlZCBiZS4KPiAK
PiBNZWFud2hpbGUsIEkgZ2F2ZSBpdCBhIHRob3VnaHQgYW5kIGNvbmNsdWRlZCB0aGF0IHRoZSBi
ZXN0IHRpbWUgdG8gZG8gdGhlIGNhdGVnb3JpemF0aW9uL2NsdXN0ZXJpbmcgc2hvdWxkIGJlIGx1
Y2VuZSBjYWxjdWxhdGVzIEhpdHMvaW4gdGhlIFNjcm9yZXIuCj4gSSBhbSBub3Qgc3VyZSBpZiBJ
IGFtIHJpZ2h0Lgo+IEluIGFkZGl0aW9uIHRvIHRoZSBjdXJyZW50IGZ1bmN0aW9uYWxpdHkgY2Fu
IHdlIG1vZGlmeSB0aGUgU2NvcmVyIGNsYXNzIGFkZCB0aGUgZm9sbG93aW5nIGZlYXR1cmU6Cj4g
VGhlIGNsYXNzIGdlbmVyYXRlcyBhIDIgZGltZW50aW9uYWwgYXJyYXkgZm9yIHRoZSBjbHVzdGVy
ZWQgZmllbGQsIHRoZSBmaXJzdCBkaW1lbnRpb24gY29udGFpbnMgdGhlIGRpc3RpbmN0IHZhbHVl
cyBvZiB0aGUgZmllbGQgYW5kIHRoZSBzZWNvbmQgZGltZW50aW9uIGNvbnRhaW5zIHRoZSBjb3Vu
dCBvZiByZXN1bHRzIHVuZGVyIHRoaXMgZmllbGQuIFRoaXMgdmFsdWUgaXMgaW5jcmVtZW50ZWQg
Zm9yIGFuIGFjY2VwdGlibGUgaGl0Lgo+IERvZXMgaXQgbWFrZSBzZW5zZT8KPiBJZiBpdCBpcyBw
b3NzaWJsZSwgaSdsbCBkaWcgZGVlcGVyIGludG8gdGhlIGNvZGUgb2YgdGhlIEhpdHMvU2NvcmVy
IGNsYXNzZXMuCj4gCj4gVGhhbmtzIGluIGFkdmFuY2UsCj4ga2FwaWxDaGhhYnJhCj4gCj4gCj4g
LS0KPiBTZW50IGZyb20gdGhlIEx1Y2VuZSAtIEphdmEgVXNlcnMgZm9ydW0gYXQgTmFiYmxlLmNv
bToKPiBodHRwOi8vd3d3Lm5hYmJsZS5jb20vU2VhcmNoLVJlc3VsdHMtQ2x1c3RlcmluZy10MjQ5
MzU1Lmh0bWwjYTc0ODkwMQo+IAo+Cg==


From java-user-return-16141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 05:18:50 2005
Return-Path: <java-user-return-16141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93379 invoked from network); 31 Aug 2005 05:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 05:18:49 -0000
Received: (qmail 42395 invoked by uid 500); 31 Aug 2005 05:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42374 invoked by uid 500); 31 Aug 2005 05:18:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42361 invoked by uid 99); 31 Aug 2005 05:18:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 22:18:42 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=NORMAL_HTTP_TO_IP,SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Aug 2005 22:18:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B85735B8B0; Tue, 30 Aug 2005 22:18:36 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AE6287F475
	for <java-user@lucene.apache.org>; Tue, 30 Aug 2005 22:18:36 -0700 (PDT)
Date: Tue, 30 Aug 2005 22:18:36 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering CNET.com Product Category Listings
In-Reply-To: <6e3ae63105083019546c4e3bfe@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0508302128430.12596@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0508301921310.5975@hal.rescomp.berkeley.edu>
 <6e3ae63105083019546c4e3bfe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: How large is the index?

I'm not sure if i'm permitted to give out that info, but I do happen to
recall seeing this page before...

http://64.233.179.104/search?q=cache:qkHzwrcO1AAJ:www.cnetchannel.com/products/datasource.aspx+%22SKUs+in+production%22&hl=en

...so, yeah... you can draw whatever conclusions you want from that.

: And when you keep posting new content to the index, will you optimize
: the index?

Ah, good question.  A cron runs once a day which pauses the
updaters and optimizes the indexes.  When it's finished, the updaters
resume and they "catch up" with any changes that were missed.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 09:56:31 2005
Return-Path: <java-user-return-16142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87617 invoked from network); 31 Aug 2005 09:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 09:56:31 -0000
Received: (qmail 82788 invoked by uid 500); 31 Aug 2005 09:56:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82750 invoked by uid 500); 31 Aug 2005 09:56:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82737 invoked by uid 99); 31 Aug 2005 09:56:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 02:56:24 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.46.255.18] (HELO viefep16-int.chello.at) (213.46.255.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 02:56:38 -0700
Received: from genuine ([80.108.136.197]) by viefep16-int.chello.at
          (InterMail vM.6.01.04.04 201-2131-118-104-20050224) with ESMTP
          id <20050831095618.HAHH7335.viefep16-int.chello.at@genuine>
          for <java-user@lucene.apache.org>;
          Wed, 31 Aug 2005 11:56:18 +0200
Received: from [213.164.23.137] (helo=[10.15.10.17])
	by genuine with esmtpa (Exim 4.50)
	id 1EAPHv-0005Z6-Ld
	for java-user@lucene.apache.org; Wed, 31 Aug 2005 11:53:48 +0200
Message-ID: <43157EC0.5000600@fischer.name>
Date: Wed, 31 Aug 2005 11:56:16 +0200
From: Markus Fischer <markus@fischer.name>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Using one physical lucene index for multiple projects
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0
X-Spam-Level: /
X-Spam-Report: Spam detection software, running on the system "genuine", has
	identified this incoming email as possible spam.  The original message
	has been attached to this so you can view it (if it isn't spam) or label
	similar future email.  If you have any questions, see
	the administrator of that system for details.
	Content preview:  Hi, I've about five different projects which would need
	to access a lucene index for searching. The projects are completely
	unrelated to each other however it's all about the same: indexing HTML
	documents. [...] 
	Content analysis details:   (0.0 points, 5.0 required)
	pts rule name              description
	---- ---------------------- --------------------------------------------------
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I've about five different projects which would need to access a lucene 
index for searching. The projects are completely unrelated to each other 
however it's all about the same: indexing HTML documents.

Since all these projects are also runnig inside the same hosting 
company, I thought about being nice to resources and actually only use 
one luceneindex for all projects.

I'm running XML-RPC to allow access to the index.

My idea was that I share a SecretKey between the projects indexers and 
projects clients. So the indexer can only add/remove documents with his 
key and the client can only access documents with his key.

The goal is not about the ultimate security solution but not to have run 
multiple Lucene instances on the machines.

I this a good idea to do it that way or would someone recommend another 
practice?

thanks,
- Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 16:25:04 2005
Return-Path: <java-user-return-16143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47182 invoked from network); 31 Aug 2005 16:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 16:25:04 -0000
Received: (qmail 86371 invoked by uid 500); 31 Aug 2005 16:24:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86336 invoked by uid 500); 31 Aug 2005 16:24:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86321 invoked by uid 99); 31 Aug 2005 16:24:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 09:24:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 09:25:11 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CEFE013E2034; Wed, 31 Aug 2005 12:24:52 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E8F7213E2006
	for <java-user@lucene.apache.org>; Wed, 31 Aug 2005 12:24:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v734)
In-Reply-To: <82D2BB25EFABA3478B75FF11C88148D518D90531@mlnyb706mb.amrs.win.ml.com>
References: <82D2BB25EFABA3478B75FF11C88148D518D90531@mlnyb706mb.amrs.win.ml.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <49B69A6C-8401-41EC-934D-7ECE9103E669@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Ideal Index Fragmentation
Date: Wed, 31 Aug 2005 12:24:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.734)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Aug 30, 2005, at 9:53 PM, Friedland, Zachary (EDS - Strategy) wrote:
> More assorted questions:
>
> *    I have been reading the posts on using Filter vs.  
> BooleanQuery.  To implement a search-within-a-search, it seems the  
> Filter is advantageous due to its cacheability, but are there other  
> pros or cons that should be considered (memory, speed, etc).

It's only advantageous when the Filters are long-lived over multiple  
searches.  It's not really recommended for search-within-search when  
the initial search is transient.  Combining queries within a  
BooleanQuery is more recommended in that case.

> *    I'm interested in implementing a "dynamic filter" component  
> that will walk through the hits[] object and pull out distinct  
> values for certain fields to display as search-within-a-search  
> options (all of them will return at least one result since they are  
> in the hits[]).  Has anyone implemented something like this -- how  
> did it work out?

Walking all Hits and extracting a field is an expensive operation, so  
be forewarned on that.

> *    When using a ParallelMultiSearcher, is there an easy way to  
> know how many matches came from each index searched?  I'd like to  
> be able to display how many of each object are in the combined hits 
> [].  Since I'm storing one object type per index, the count of hits  
> from each index will give me that number.

I'm not sure if you can get at each indexes results in that way, but  
you can tell which index an individual hit came from (see API docs  
for details on that).

> *    Does anyone know when 1.9/2.0 will be released?

Your guess is as good as any at this point.  I'm not sure what is  
still left to be done for a 1.9 release.  I haven't heard any prods  
to release it any time soon, but you're welcome to push us to  
consider it if need be.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 17:09:27 2005
Return-Path: <java-user-return-16144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66689 invoked from network); 31 Aug 2005 17:09:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 17:09:27 -0000
Received: (qmail 71197 invoked by uid 500); 31 Aug 2005 17:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71156 invoked by uid 500); 31 Aug 2005 17:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71130 invoked by uid 99); 31 Aug 2005 17:09:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 10:09:16 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of blizzy-keyword-lucene_user.f5486d@blizzy.de designates 217.160.200.68 as permitted sender)
Received: from [217.160.200.68] (HELO iceman.iq-computing.de) (217.160.200.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 10:09:29 -0700
Received: (qmail 12698 invoked from network); 31 Aug 2005 19:09:11 +0200
Received: from d068152.adsl.hansenet.de (HELO wolverine.hh.iq-computing.de) (mickey@80.171.68.152)
  by iceman.iq-computing.de with AES256-SHA encrypted SMTP; 31 Aug 2005 19:09:11 +0200
Received: (qmail 11636 invoked from network); 31 Aug 2005 19:09:10 +0200
Received: from localhost (HELO ?127.0.0.1?) (127.0.0.1)
  by localhost with SMTP; 31 Aug 2005 19:09:10 +0200
Message-ID: <4315E435.1040506@blizzy.de>
Date: Wed, 31 Aug 2005 19:09:09 +0200
From: Maik Schreiber <blizzy-keyword-lucene_user.f5486d@blizzy.de>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050806)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Using one physical lucene index for multiple projects
References: <43157EC0.5000600@fischer.name>
In-Reply-To: <43157EC0.5000600@fischer.name>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I'm running XML-RPC to allow access to the index.
> 
> My idea was that I share a SecretKey between the projects indexers and 
> projects clients. So the indexer can only add/remove documents with his 
> key and the client can only access documents with his key.

In our projects we're using HTTP authentication for XML-RPC requests.

-- 
Maik Schreiber   *   http://www.blizzy.de

GPG public key: http://pgp.mit.edu:11371/pks/lookup?op=get&search=0x1F11D713
Key fingerprint: CF19 AFCE 6E3D 5443 9599 18B5 5640 1F11 D713

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 18:38:12 2005
Return-Path: <java-user-return-16145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2376 invoked from network); 31 Aug 2005 18:38:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 18:38:12 -0000
Received: (qmail 26991 invoked by uid 500); 31 Aug 2005 18:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26855 invoked by uid 500); 31 Aug 2005 18:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26792 invoked by uid 99); 31 Aug 2005 18:38:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 11:38:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 11:38:19 -0700
Received: (qmail 2069 invoked by uid 532); 31 Aug 2005 18:38:01 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.4.  Clear:. 
 Processed in 0.173747 secs); 31 Aug 2005 18:38:01 -0000
Received: from unknown (HELO ?172.31.1.2?) (127.0.0.1)
  by 0 with SMTP; 31 Aug 2005 18:38:01 -0000
Message-ID: <4315F908.1030507@tropo.com>
Date: Wed, 31 Aug 2005 11:38:00 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041217
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering CNET.com Product Category Listings
References: <Pine.LNX.4.58.0508301921310.5975@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0508301921310.5975@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Nice write up.

One other nice thing I noticed is you seem to sort numeric attributes 
numerically instead of alphabetically e.g. here:

http://reviews.cnet.com/4566-3156_7-0.html?filter=500193_5314692_

see the 3rd col, "Find by max speed", and note that has has choices in 
this order:
    < 2 char/sec
      2 char/sec
      3 char/sec
     40 char/sec
    236 char/sec
    480 char/sec

The usual way lame, low tech vendors display such a list is 
alphabetically i.e.

    < 2 char/sec
      2 char/sec
    236 char/sec         <== argh
      3 char/sec
     40 char/sec
    480 char/sec

So this is a nice small human-friendly touch.

    - Dave


Chris Hostetter wrote:

> I'm pleased to announce that for about a month now, CNET's "Product
> Listing" pages are powered by Lucene 1.4.3.  These pages not only allow
> users to browse CNET's catalog of tech products by category, but also to
> "Filter" the lists according to category specific Attribute Filters which
> are displayed along with counts of how many products they will get if they
> apply that Filter.  Multiple Filters can be applied (in any order) to
> rapidly narrow down the list of products.
> 
> Examples of these pages can be seen here...
> 
> Digital Cameras
> http://reviews.cnet.com/4566-6501_7-0.html
> 
> Inkjet Printers
> http://reviews.cnet.com/4566-3156_7-0.html
> 
> Epson Inkjet Printers
> http://reviews.cnet.com/4566-3156_7-0.html?filter=1000036_5251152_
> 
> Epson Inkjet Printers that can print on Transparencies
> http://reviews.cnet.com/4566-3156_7-0.html?filter=1000036_5251152_500193_5314692_
> 
> These pages work much the same way as I've described in past threads
> regarding "category counts", except that the logic determining which
> filter links to display is not as simple as just pulling out the most
> frequent terms per field, or based on a fixed list.  As you can see from
> the example links, each category has it's own unique list of attributes
> (ie: Price, Manufacturer, etc...) and for each of those attributes, there
> is a list of Queries which map one to one with a possible "Find by" link.
> Even if an Attribute is common between two categories, the list of Queries
> to filter by may be different -- note the differences in the "Find by
> price" lists between the various links above.  We have several thousand
> unique categories, and some of these have as many as a thousand unique
> Filter Queries which are needed to determine the counts to display on any
> given page for that category, but using some very aggressive Filter
> caching the time for a single request is kept very manageable.
> 
> For those who are interested, I can elaborate a little more on how these
> pages work....
> 
> 
> 
> At a high level there are four major pieces...
> 
> 1) A Servlet which abstracts away most of the Lucene index modification
> APIs into an HTTP/XML based "web service" by accepting POSTed XML
> documents to add/update in the index.  It also replies to GET search
> requests using query plugins that have access to an IndexReader.
> 
> 2) A ProductData index updater, which is executed as part of our "product
> publishing" process.  Anytime a product is added (or modified) in our
> database the updater creates an XML document describing the product and
> POSTs it to the above mentioned Servlet (which indexes it).
> 
> 3) A Metadata index updater, which is executed as part of our "category
> metadata publishing" process.  Anytime someone decides to change the
> metadata that describes a category, this process creates an XML document
> containing that metadata, and POSTs it to the above mentioned Servlet
> (I'll elaborate more on these category documents in a moment).
> 
> 4) A Query Plugin used by the Servlet specificly to generate the product
> result lists and counts needed for these product listing pages.
> 
> 
> The Category Metadata documents are what really drive the behavior of the
> Plugin.  They contain the following information...
> 
>   * A Query whose results are all products to display in this category
>   * An ordered list of Attributes that can be filtered on
>     - A datatype for each Attribute
>     - An ordered list of "Filters" for each Attribute
>       + A label to display for each Filter
>       + A Query to define what products match that Filter
> 
> When a request comes in for a category, the first thing the Plugin does is
> an initial query on the category Id to get the category's Metadata
> document.  From that document, the field containing the Query that defines
> that category is extracted, and a search is issued against it (using
> whatever Sort options have been specified).  This Category Query is also
> used to build a QueryFilter so that a BitSet of every matching product can
> be obtained.  For each Filter in each Attribute found in the Category's
> document, the Query is extracted, and again a QueryFilter is built to
> obtain a BitSet of all products which match.  The intersection of that
> BitSet with the BitSet from the initial Category Query is computed to
> determine the "count" to display next to the Filter label.  Once all of
> this is done the list of products, all of the data from the Category
> Metadata document, and the counts for each of the Category Filters are
> bundled up into an XML response document.  The client which initiated the
> search can then apply additional Business logic to decide which
> attributes/filters to display counts for -- the simple case is to display
> the first N attributes, and for each attribute display the Filter links
> with the highest counts, but in some cases the links may be displayed in
> different orders based on the datatype of the attribute.
> 
> When a user clicks on a Filter link the process is the same as before, but
> the initial Category Query is augmented by the Filter that has been
> selected -- so the results to display on the first page (and the BitSet of
> all matching products) are correct.  The new counts (which take into
> account the selected Filter) are computed exactly as before -- using
> BitSet intersections.
> 
> 
> What makes all of this feasible to do during a single user request, and
> what keeps the load on our servers manageable, is an aggressive caching
> strategy.
> 
> The Servlet maintains a single IndexReader for use by the any requests to
> the Query Plugin.  The Servlet also maintains a fixed size Cache of [
> Filter => BitSet] (This cache currently uses LRU replacement, but ideally
> it would be LFU).  The Servlet keeps track of when it makes modifications
> to the index, and once it's decided that it is time to make those
> modifications visible to the plugin it uses a background thread to open a
> new IndexReader, and create a new Cache instance which it warms up by
> "pre-computing" the BitSets for the top N Filters in the Cache already in
> use.  It then swaps out the "old" IndexReader/Cache pair with the new
> IndexReader/Cache for all subsequent searches.
> 
> Given a large amount of RAM, and infrequent updates to the index, page
> hits to most categories rarely involve anything more then Cache lookups.
> But even when we make frequent updates, the Cache warming we do with a
> newly constructed IndexReader prior to actually *using* the IndexReader
> allows us to remain very responsive on our most popular categories.
> Through configuration, we can decide: Is it more important to open new
> IndexReaders as fast as possible (and display new results immediately) at
> the expense of not being able to pre-warm the cache very much? (resulting
> in slower page loads) ... Or: Is it more important to keep our page load
> times very low, by pre-warming our cache with everything and the kitchen
> sink (which means results take a while to update because we are opening
> new IndexReaders less frequently).  Our current configuration results in
> ~95% cache hit rate for our Filters.
> 
> 
> 
> Hopefully I've explained the overall design of our system well enough that
> people interested in doing "category counts" and "drilling down" can see
> that it is possible, even when you are dealing with a very large number of
> Filters.  I'm sure my familiarity with the system has caused me to write
> something that makes perfect sense to me, but is totally unintelligible to
> everyone else -- if so, please feel free to ask any questions you have,
> I'll try to answer them as best I can.  Some questions regarding the
> internals of the Servlet and the Caching it does may be beyond my ability
> to answer because they were developed by my coworker -- but he is also an
> active participant on this list, and (time permitting) I'm sure he'd
> happily answer any questions I can not.
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 19:14:59 2005
Return-Path: <java-user-return-16146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17674 invoked from network); 31 Aug 2005 19:14:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 19:14:58 -0000
Received: (qmail 1491 invoked by uid 500); 31 Aug 2005 19:14:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1459 invoked by uid 500); 31 Aug 2005 19:14:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1446 invoked by uid 99); 31 Aug 2005 19:14:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 12:14:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.46.255.16] (HELO viefep13-int.chello.at) (213.46.255.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 12:15:04 -0700
Received: from genuine ([80.108.136.197]) by viefep13-int.chello.at
          (InterMail vM.6.01.04.04 201-2131-118-104-20050224) with ESMTP
          id <20050831191444.OKUY2153.viefep13-int.chello.at@genuine>
          for <java-user@lucene.apache.org>;
          Wed, 31 Aug 2005 21:14:44 +0200
Received: from laptop.home ([192.168.1.50])
	by genuine with esmtpa (Exim 4.50)
	id 1EAY0J-0004w4-9Q
	for java-user@lucene.apache.org; Wed, 31 Aug 2005 21:12:11 +0200
Message-ID: <431601AD.9050502@fischer.name>
Date: Wed, 31 Aug 2005 21:14:53 +0200
From: Markus Fischer <markus@fischer.name>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6) Gecko/20050317 Thunderbird/1.0.2 Mnenhy/0.7.2.0
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Using one physical lucene index for multiple projects
References: <43157EC0.5000600@fischer.name> <4315E435.1040506@blizzy.de>
In-Reply-To: <4315E435.1040506@blizzy.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: -27
X-Spam-Level: --
X-Spam-Report: Spam detection software, running on the system "genuine", has
	identified this incoming email as possible spam.  The original message
	has been attached to this so you can view it (if it isn't spam) or label
	similar future email.  If you have any questions, see
	the administrator of that system for details.
	Content preview:  Maik Schreiber wrote: >> I'm running XML-RPC to allow
	access to the index. >> >> My idea was that I share a SecretKey between
	the projects indexers and >> projects clients. So the indexer can only
	add/remove documents with >> his key and the client can only access
	documents with his key. > > > In our projects we're using HTTP
	authentication for XML-RPC requests. > [...] 
	Content analysis details:   (-2.8 points, 5.0 required)
	pts rule name              description
	---- ---------------------- --------------------------------------------------
	-2.8 ALL_TRUSTED            Did not pass through any untrusted hosts
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maik Schreiber wrote:
>> I'm running XML-RPC to allow access to the index.
>>
>> My idea was that I share a SecretKey between the projects indexers and 
>> projects clients. So the indexer can only add/remove documents with 
>> his key and the client can only access documents with his key.
> 
> 
> In our projects we're using HTTP authentication for XML-RPC requests.
> 

Is any of the authentication incredentials actually put into the index 
for this verifyication?

Currently, I also store the SecretKey (hash of it) in the index so I 
know when e.g. the request comes to delete all documents I also which ones.

- Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 19:20:59 2005
Return-Path: <java-user-return-16147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21100 invoked from network); 31 Aug 2005 19:20:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 19:20:56 -0000
Received: (qmail 12240 invoked by uid 500); 31 Aug 2005 19:20:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12082 invoked by uid 500); 31 Aug 2005 19:20:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12068 invoked by uid 99); 31 Aug 2005 19:20:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 12:20:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of axelclk@gmail.com designates 64.233.182.197 as permitted sender)
Received: from [64.233.182.197] (HELO nproxy.gmail.com) (64.233.182.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 12:20:56 -0700
Received: by nproxy.gmail.com with SMTP id i2so2267nfe
        for <java-user@lucene.apache.org>; Wed, 31 Aug 2005 12:20:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=k6fmjG5qW5yDsBl7W2YwTZG4edJsSSCd6QN4uv4/p+1CCU0P7RoMMK/K9apg3jWgqchZDDYNp/R1nHEcOpCLp8KiMnA2OUC8qxU/iqZf2aYkJdb2APTfplFAjAesEMwUYDl3wGxWfgZU0pRKO/NoUGJRK0sCyevS1fImKU2HMcw=
Received: by 10.48.250.3 with SMTP id x3mr27366nfh;
        Wed, 31 Aug 2005 12:20:39 -0700 (PDT)
Received: by 10.48.43.6 with HTTP; Wed, 31 Aug 2005 12:20:39 -0700 (PDT)
Message-ID: <7a49c63505083112204f02a672@mail.gmail.com>
Date: Wed, 31 Aug 2005 21:20:39 +0200
From: Axel <axelclk@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing source files
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I'm quite new to lucene, and I'm looking for information, how I can
start implementing a search engine for code completion, phpdoc
hovering etc.
Currently I'm using an approach similar to ctags: http://ctags.sourceforge.=
net/,
which isn't very fast in the startup time for large projects.
For the PHP scripting language I've already created a parser which
extracts something like
function-, class-, methodnames, phpdoc sections... for a given file.
I've also created a reduced binary AST of the php file, which I would
like to store with the lucene document.

What's the best way to store all these informations in an lucene search ind=
ex?
Something like:
Field.Text("content", <string of all parsed identifiers>);

or is it better to write something like this for every identifier::
Field.Keyword("function","myfunction");
Field.Keyword("class","myclass");
...

Is it possible to store the complete AST (in an serializable format)
in the document or should the extra information be stored for every
(function-)identifier (like for example number of arguments, source
start, source end, javadoc start, javadoc end,...)

Did someone already implemented something similar?
Is Lucene the right tool for such a task?

--=20
Axel Kramer
http://www.phpeclipse.de - PHP Eclipse Plugin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 19:38:22 2005
Return-Path: <java-user-return-16148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36475 invoked from network); 31 Aug 2005 19:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 19:38:22 -0000
Received: (qmail 38708 invoked by uid 500); 31 Aug 2005 19:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38476 invoked by uid 500); 31 Aug 2005 19:38:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38463 invoked by uid 99); 31 Aug 2005 19:38:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 12:38:17 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 12:38:30 -0700
Received: from localhost ([127.0.0.1] helo=talk.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1EAYPV-0002Je-FZ
	for java-user@lucene.apache.org; Wed, 31 Aug 2005 12:38:13 -0700
Message-ID: <750675.post@talk.nabble.com>
Date: Wed, 31 Aug 2005 12:38:13 -0700 (PDT)
From: "raymondcreel (sent by Nabble.com)" <lists@nabble.com>
Reply-To: raymondcreel <raymondcreel@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: custom sort
In-Reply-To: <Pine.LNX.4.58.0508301414560.23529@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_0_16649525.1125517093451"
X-Nabble-Sender: Nabble Forums <lists@nabble.com>
X-Nabble-From: raymondcreel <raymondcreel@yahoo.com>
References: <737222.post@talk.nabble.com> <6e3ae6310508292135fc5dd96@mail.gmail.com> <Pine.LNX.4.58.0508301414560.23529@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_0_16649525.1125517093451
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Actually in this case I am sorting by score already but I'm not sure if that helps.  Regardless of how I do my primary sort, I want to tweak the results such that some hardcoded number of documents that match some criteria get pushed or frontloaded to the top of the results.  For instance think of a search engine where you generally are displaying a list of pages sorted by score, but you want 10 pages from a featured site to always show at the top of the first page, while leaving the rest of the sort order as it is.  That's why it's not something I can really do at the index stage by assigning boosts - I only want to boost those first 10 items that match the criteria, not all of them.

What I'm doing now is taking the whole resulting document collection, iterating through it and manually moving these 10 documents to the front of the collection.  This is slow and ugly.  I was hoping there might be a slicker way to do it as part of the actual sort.  I will play around with the custom sorting and report back if I figure out an elegant way to do it.

Thanks for all your replies.
Raymond
--
Sent from the Lucene - Java Users forum at Nabble.com:
http://www.nabble.com/custom-sort-t262833.html#a750675

------=_Part_0_16649525.1125517093451--


From java-user-return-16149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 21:12:54 2005
Return-Path: <java-user-return-16149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74296 invoked from network); 31 Aug 2005 21:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 21:12:54 -0000
Received: (qmail 4538 invoked by uid 500); 31 Aug 2005 21:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4521 invoked by uid 500); 31 Aug 2005 21:12:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4495 invoked by uid 99); 31 Aug 2005 21:12:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 14:12:47 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,RCVD_BY_IP,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jharuska@gmail.com designates 66.249.82.201 as permitted sender)
Received: from [66.249.82.201] (HELO xproxy.gmail.com) (66.249.82.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 14:13:02 -0700
Received: by xproxy.gmail.com with SMTP id h33so151932wxd
        for <java-user@lucene.apache.org>; Wed, 31 Aug 2005 14:12:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=P5B8bajtCeze/02Zy0AP+ElMCU2HkfyPl7Ii4qpIxD312x1N+zUm+xZ9wqpEjOMvBqjVGCrVxvM8Kl4Sf5EOX9nQoTAtWA7hbI+aBAFfhj6mehHQPbH7m7hZrr4IB9bFFhuXFT6LZK0lB4vzL793P19Pfkz32fd7kAyBm8HGZCg=
Received: by 10.70.58.8 with SMTP id g8mr60039wxa;
        Wed, 31 Aug 2005 14:12:45 -0700 (PDT)
Received: by 10.70.55.8 with HTTP; Wed, 31 Aug 2005 14:12:45 -0700 (PDT)
Message-ID: <5fbbcd14050831141241f01022@mail.gmail.com>
Date: Wed, 31 Aug 2005 17:12:45 -0400
From: Jason Haruska <jharuska@gmail.com>
To: java-user@lucene.apache.org, raymondcreel <raymondcreel@yahoo.com>
Subject: Re: custom sort
In-Reply-To: <750675.post@talk.nabble.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7041_28586107.1125522765330"
References: <737222.post@talk.nabble.com>
	 <6e3ae6310508292135fc5dd96@mail.gmail.com>
	 <Pine.LNX.4.58.0508301414560.23529@hal.rescomp.berkeley.edu>
	 <750675.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7041_28586107.1125522765330
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I had to do something similar, but I plan on re-writing it into something=
=20
more elegant. I hope this helps give you some ideas.

1. Create a QueryFilter on only those items that matched the criteria (have=
=20
a required clause in your boolean query)
2. Create a BitFilter which takes a BitSet from step 1 and flip the bits
3. Perform a search with each Filter and display results for each search

Here is my BitFilter code:
--------------------------------------------------
package org.apache.lucene.search;

import java.io.IOException;
import java.util.BitSet;

import org.apache.lucene.index.IndexReader;

public class BitFilter extends Filter {
private BitSet bitSet;

public BitFilter(BitSet bs) {
bitSet =3D bs;
}

public void flipAll() {
bitSet.flip(0, bitSet.size()-1);
}

/* (non-Javadoc)
* @see org.apache.lucene.search.Filter#bits(
org.apache.lucene.index.IndexReader)
*/
public BitSet bits(IndexReader reader) throws IOException {
return bitSet;
}
}
---------------------------------------------------------------------------=
-----

On 8/31/05, raymondcreel (sent by Nabble.com <http://Nabble.com>) <
lists@nabble.com> wrote:
>=20
>=20
> Actually in this case I am sorting by score already but I'm not sure if=
=20
> that helps. Regardless of how I do my primary sort, I want to tweak the=
=20
> results such that some hardcoded number of documents that match some=20
> criteria get pushed or frontloaded to the top of the results. For instanc=
e=20
> think of a search engine where you generally are displaying a list of pag=
es=20
> sorted by score, but you want 10 pages from a featured site to always sho=
w=20
> at the top of the first page, while leaving the rest of the sort order as=
 it=20
> is. That's why it's not something I can really do at the index stage by=
=20
> assigning boosts - I only want to boost those first 10 items that match t=
he=20
> criteria, not all of them.
>=20
> What I'm doing now is taking the whole resulting document collection,=20
> iterating through it and manually moving these 10 documents to the front =
of=20
> the collection. This is slow and ugly. I was hoping there might be a slic=
ker=20
> way to do it as part of the actual sort. I will play around with the cust=
om=20
> sorting and report back if I figure out an elegant way to do it.
>=20
> Thanks for all your replies.
> Raymond
> --
> Sent from the Lucene - Java Users forum at Nabble.com <http://Nabble.com>=
:
> http://www.nabble.com/custom-sort-t262833.html#a750675
>=20
>

------=_Part_7041_28586107.1125522765330--

From java-user-return-16150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 21:18:40 2005
Return-Path: <java-user-return-16150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76504 invoked from network); 31 Aug 2005 21:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 21:18:40 -0000
Received: (qmail 9299 invoked by uid 500); 31 Aug 2005 21:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9262 invoked by uid 500); 31 Aug 2005 21:18:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9209 invoked by uid 99); 31 Aug 2005 21:18:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 14:18:34 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: error (asf.osuosl.org: encountered temporary error during SPF processing of domain of Mark.Horan@xplana.com)
Received: from [209.61.175.228] (HELO server1.takeexit33.com) (209.61.175.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 31 Aug 2005 14:18:48 -0700
Received: (qmail 32296 invoked from network); 31 Aug 2005 21:18:30 -0000
Received: from w184.z064221044.bos-ma.dsl.cnc.net (HELO xplana.com) (64.221.44.184)
  by x33labs.com with SMTP; 31 Aug 2005 21:18:30 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Problem With RAMDirectory.
Date: Wed, 31 Aug 2005 17:17:21 -0400
Message-ID: <666F5DC00A92964896146F60A828D32B5978F0@ms.xplana.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem With RAMDirectory.
Thread-Index: AcWuY4tFnQmbCU1HRe+PfxJsXNVfogAB5ToQ
From: "Mark Horan" <Mark.Horan@xplana.com>
To: <java-user@lucene.apache.org>,
	"raymondcreel" <raymondcreel@yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm using the Lucene demo to create an index for 10 text files, just for
testing. I use the demo to do searches on the created index, and all
seems well. I want to perform the search via an applet, for reasons not
relevant to the problem I'm having. I zip up the three files in the
index so the applet can fetch the index from disk or across the network.
I use the java.util.zip library to unpack the three files as byte
arrays, which I use to create three files in the RAMDirectory. I have
print statements in my code and RAMDirectory member functions to confirm
that the three files are named correctly, and they contain same number
of bytes as the three uncompressed files in my index on disk. I then
perform searches against this RAMDirectory index, and it behaves just
fine.

Now the problem. If I increase the number of files indexed to 20, files
with random text in them, actually paragraphs from Moby Dick, no search
results
Whatsoever can be obtained from using the RAMDirectory as the index in
my applet. I can perform queries accurately from the command line with
the Lucene demo against the uncompressed index on disk, but the
RAMDirectory index in my applet appears worthless, and the only variable
that appears to have changed is the number of files indexed, in either
case a small number.

Is there some gotcha in my methodology which is to populate the
RAMDirectory index in my applet with the three index files as byte
arrays obtained via URL and URLConnection? Why does this methodology
work perfectly with 10, or even up to 17 documents indexed, but fail
with just one additional document?
Has anyone used this method of populating the RAMDirectory index from
already created index files? Again, the system works fine with a very
small index, and fails predictably with just slightly larger ones,
larger indexes which are still many orders of magnitude smaller than
what my actual use case is.

I would appreciate any feedback.

Thanks,
 Mark Horan
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 21:32:52 2005
Return-Path: <java-user-return-16151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83146 invoked from network); 31 Aug 2005 21:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 21:32:52 -0000
Received: (qmail 36064 invoked by uid 500); 31 Aug 2005 21:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36044 invoked by uid 500); 31 Aug 2005 21:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36030 invoked by uid 99); 31 Aug 2005 21:32:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 14:32:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.153.20.66] (HELO dns1-vir.paetec.net) (66.153.20.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 14:33:01 -0700
Received: from mail.perspectivepartners.com (www.perspectivepartners.com [63.138.29.34])
	by dns1-vir.paetec.net (8.13.3/8.13.3) with ESMTP id j7VLWc6C007073
	for <java-user@lucene.apache.org>; Wed, 31 Aug 2005 17:32:43 -0400 (EDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.perspectivepartners.com (Postfix) with ESMTP id 63EAB10034
	for <java-user@lucene.apache.org>; Wed, 31 Aug 2005 17:32:38 -0400 (EDT)
Received: from mail.perspectivepartners.com ([127.0.0.1])
 by localhost (mail.perspectivepartners.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 19095-04 for <java-user@lucene.apache.org>;
 Wed, 31 Aug 2005 17:32:36 -0400 (EDT)
Received: from taggert.perspectivepartners.com (taggert.perspectivepartners.com [10.10.0.11])
	by mail.perspectivepartners.com (Postfix) with ESMTP
	for <java-user@lucene.apache.org>; Wed, 31 Aug 2005 17:32:35 -0400 (EDT)
Subject: JDBCDirectory Information
From: Anthony Vito <vito@perspectivepartners.com>
To: LuceneUsers <java-user@lucene.apache.org>
Content-Type: text/plain
Date: Wed, 31 Aug 2005 17:32:35 -0400
Message-Id: <1125523955.22771.3.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.2 (2.0.2-16) 
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at perspectivepartners.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I finally put up a small page on my site with the JDBCDirectory
information. Nothing special, but centralized information makes
progress... Now.. to write the manual....

http://www.anthonyvito.com/xwiki/bin/view/Main/JDBCDirectory

-vito


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 22:11:31 2005
Return-Path: <java-user-return-16152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95008 invoked from network); 31 Aug 2005 22:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 22:11:30 -0000
Received: (qmail 87177 invoked by uid 500); 31 Aug 2005 22:11:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87145 invoked by uid 500); 31 Aug 2005 22:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87132 invoked by uid 99); 31 Aug 2005 22:11:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 15:11:25 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 15:11:39 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 73A765B821; Wed, 31 Aug 2005 15:11:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 70F027F477; Wed, 31 Aug 2005 15:11:20 -0700 (PDT)
Date: Wed, 31 Aug 2005 15:11:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org,
	raymondcreel <raymondcreel@yahoo.com>
Subject: Re: custom sort
In-Reply-To: <750675.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0508311346560.3669@hal.rescomp.berkeley.edu>
References: <737222.post@talk.nabble.com> <6e3ae6310508292135fc5dd96@mail.gmail.com>
 <Pine.LNX.4.58.0508301414560.23529@hal.rescomp.berkeley.edu>
 <750675.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: What I'm doing now is taking the whole resulting document collection,
: iterating through it and manually moving these 10 documents to the front
: of the collection.  This is slow and ugly.  I was hoping there might be
: a slicker way to do it as part of the actual sort.  I will play around
: with the custom sorting and report back if I figure out an elegant way
: to do it.

you could definitely do this with a Custom Sort ... but a simpler way to
go would be to do two searches.  if the users's basic search criteria is
soemthing like "foo:bar +yak:wak" and the criteria for identifying the
documents you want to return is "promote:yes" then first issue a search
for "+promote:yes +(foo:bar +yak:wak)" and display the first N, and keep
track of hte identity of the N that you display  Then do
a search for "foo:bar +yak:wak -id:id1 -id:id2 -id:id3 ... -id:idN"

this is assuming that you you only want to display the first N (sounds
like N is ten) but there might be a lot more then N which match but you
want the rest to display in their regular spots.  if you want them *ALL*
to be in the front, then making your second search "-promote:yes +(foo:bar
+yak:wak)" should work just fine.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-16153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 31 22:54:49 2005
Return-Path: <java-user-return-16153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4527 invoked from network); 31 Aug 2005 22:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Aug 2005 22:54:49 -0000
Received: (qmail 17354 invoked by uid 500); 31 Aug 2005 22:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17303 invoked by uid 500); 31 Aug 2005 22:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17269 invoked by uid 99); 31 Aug 2005 22:54:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 15:54:42 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Aug 2005 15:54:56 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C747A5B830; Wed, 31 Aug 2005 15:54:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C48CC7F478
	for <java-user@lucene.apache.org>; Wed, 31 Aug 2005 15:54:37 -0700 (PDT)
Date: Wed, 31 Aug 2005 15:54:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: Announcement: Lucene powering CNET.com Product Category Listings
In-Reply-To: <82D2BB25EFABA3478B75FF11C88148D5147A2743@mlnyb706mb.amrs.win.ml.com>
Message-ID: <Pine.LNX.4.58.0508311539520.3669@hal.rescomp.berkeley.edu>
References: <82D2BB25EFABA3478B75FF11C88148D5147A2743@mlnyb706mb.amrs.win.ml.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Zach,

Let's simplify the issue to displaying counts for a single "Attribute"
-- manufacturer.

Imagine that the main search you are executing is "+category:cameras
+price:[0 to 10]" and you want to sort it by name.  You also want to
display the counts per manufacturer for all products that match that query
(ie: mfg:cannon, mfg:kodak, mfg:hp, mfg:sony, etc...

First you make a Query object for "+category:cameras +price:[0 to 10]" and
you do a search on it sorted by name.  Now 90% of the page is done.  Next
you mke a QueryFilter out of that Query object, and you call the bits
method on it and you hang on to it.

Next you make a QueryFilter for each of the manufacturers you have that
you want counts for, and you call the bits method on each of them.  For
each of those BitSets, you intersect each one with the BitSet you got from
the orriginal query and then then cardinality tells you the number of
products in your result that match.

it might make more sense in psuedo-java...

  String[] mfgs = ...;
  String query = "+category:cameras +price:[0 to 10]";
  Query q = QueryParser.parse(query);
  Hits results = searcher.search(q, mySort)
  BitSet all = (new QueryFilter(q)).bits(reader)
  int[] mfg_counts = new int[mfgs.length];
  for i in (0 to mfgs.length) {
     BitSet these = (new QueryFilter(new TermQuery("mfg",mfgs[i]))).bits(reader);
     these.and(all)
     mfg_counts[i] = these.cardinality();
  }

Now results contains what you need to display the main results, and
mfgs and mfg_counts contain what you need to display the manufacturer
counts.



: Date: Wed, 31 Aug 2005 09:35:13 -0400
: From: "Friedland, Zachary (EDS - Strategy)"
: To: Chris Hostetter
: Subject: RE: Announcement: Lucene powering CNET.com Product Category
:     Listings
:
: Hoss -
:
: I'm interested in doing counts of various categories, but I didn't
: understand this statement:
:
: " For each Filter in each Attribute found in the Category's
: document, the Query is extracted, and again a QueryFilter is built to
: obtain a BitSet of all products which match.  The intersection of that
: BitSet with the BitSet from the initial Category Query is computed to
: determine the "count" to display next to the Filter label.  "
:
: Can you explain this a bit more?
:
: Thanks,
: Zach


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


