From java-user-return-28462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 09:59:20 2007
Return-Path: <java-user-return-28462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79029 invoked from network); 1 Jun 2007 09:59:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 09:59:18 -0000
Received: (qmail 32872 invoked by uid 500); 1 Jun 2007 09:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31910 invoked by uid 500); 1 Jun 2007 09:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31899 invoked by uid 99); 1 Jun 2007 09:29:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 02:29:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 02:29:50 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id B3B2D22AC09
	for <java-user@lucene.apache.org>; Fri,  1 Jun 2007 05:29:29 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Fri, 01 Jun 2007 05:29:29 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 91B9610F6A; Fri,  1 Jun 2007 05:29:29 -0400 (EDT)
Message-Id: <1180690169.22146.1192886037@webmail.messagingengine.com>
X-Sasl-Enc: rr1/I9S+8GISaSh7uWZQxxmgGxQIcZHCUWGWkkta9Ozp 1180690169
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <839ba01c0705312002j4ce50108nc54c923254f71dd@mail.gmail.com>
Subject: Re: exception during optimze
In-Reply-To: <839ba01c0705312002j4ce50108nc54c923254f71dd@mail.gmail.com>
Date: Fri, 01 Jun 2007 05:29:29 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Cedric Ho" <cedric.ho@gmail.com> wrote:

> When I tried to build an index last night, the following exception
> occurred during call to IndexWriter.optimze():
> 
> java.lang.NullPointerException
>         at org.apache.lucene.index.IndexFileDeleter.findDeletableFiles(IndexFileDeleter.java:88)
>         at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1570)
>         at org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1351)
>         at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:891)
>         ......
> 
> The mergeFactor is set to 500. And the final index file size is about
> 10Gb.
> 
> Also since the writer.close() is not called. There's an write.lock
> file in the index directory. After deleting the write.lock file, I
> called optimze() again and it complete successfully. Is the indexing
> successful then? Will any documents be lost due to the above
> exception?

Hmmm, this means Directory.list() returned null.  We improved the
error handling on receiving a null from directory.lost(), but after
2.1 was released, see here:

    http://issues.apache.org/jira/browse/LUCENE-825

But that fix just ensures you get a proper IOException when null is
returned; we still need to explain the "root cause" of why you're
getting a null return in the first place.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 11:28:17 2007
Return-Path: <java-user-return-28463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1866 invoked from network); 1 Jun 2007 11:28:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 11:28:15 -0000
Received: (qmail 72138 invoked by uid 500); 1 Jun 2007 11:28:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72107 invoked by uid 500); 1 Jun 2007 11:28:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72096 invoked by uid 99); 1 Jun 2007 11:28:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 04:28:08 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 04:28:02 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hu5IE-0007ZE-An
	for java-user@lucene.apache.org; Fri, 01 Jun 2007 04:27:42 -0700
Message-ID: <10911002.post@talk.nabble.com>
Date: Fri, 1 Jun 2007 04:27:42 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Lucene index content
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello all,
I am printing luecene index content and I successed but I don't know how to
print the indexed file names.

    
 System.out.println(dok.doc() );

here it printed the doc ID , but I need the document name. for exxample doc
ID =1 , the file name = F1, how to print the file name F1. 

thanks in advance 
       
-- 
View this message in context: http://www.nabble.com/Lucene-index-content-tf3851690.html#a10911002
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 11:32:26 2007
Return-Path: <java-user-return-28464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4276 invoked from network); 1 Jun 2007 11:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 11:32:25 -0000
Received: (qmail 81546 invoked by uid 500); 1 Jun 2007 11:32:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81510 invoked by uid 500); 1 Jun 2007 11:32:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81497 invoked by uid 99); 1 Jun 2007 11:32:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 04:32:18 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.81.148.13] (HELO bcn.isoco.net) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 04:32:10 -0700
Received: by bcn.isoco.net (Postfix, from userid 65534)
	id 4C20B63D0E; Fri,  1 Jun 2007 13:30:07 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on 
	kilimanjaro.bcn.isoco.net
X-Spam-Level: 
Received: from [172.18.2.125] (lrodrigow.mad.isoco.net [172.18.2.125])
	by bcn.isoco.net (Postfix) with ESMTP id 231F863CF4
	for <java-user@lucene.apache.org>; Fri,  1 Jun 2007 13:30:03 +0200 (CEST)
Message-ID: <4660039B.9000809@isoco.com>
Date: Fri, 01 Jun 2007 13:31:39 +0200
From: Luis Rodrigo <lrodrigo@isoco.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene index content
References: <10911002.post@talk.nabble.com>
In-Reply-To: <10911002.post@talk.nabble.com>
Content-Type: multipart/alternative;
 boundary="------------070002070508090705010402"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.2 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	EXCUSE_ES_06,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.1.7

--------------070002070508090705010402
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Try Luke:

http://www.getopt.org/luke/

It is a great tool to inspect the index contents.

Luis.


starz10de escribió:
> Hello all,
> I am printing luecene index content and I successed but I don't know how to
> print the indexed file names.
>
>     
>  System.out.println(dok.doc() );
>
> here it printed the doc ID , but I need the document name. for exxample doc
> ID =1 , the file name = F1, how to print the file name F1. 
>
> thanks in advance 
>        
>   

-- 

*Luis Rodrigo Aguado*

Innovation and R&D

Research Manager

lrodrigo(at)isoco.com

#T  +34913349777

C/Pedro de Valdivia, 10

28006, Madrid, Spain

* *

*iSOCO** *

            intelligent software for the networked economy

            www.isoco.com <http://www.isoco.com/>

 

Este mensaje se dirige exclusivamente a su destinatario y puede contener 
información privilegiada o confidencial. Si no es vd. el destinatario 
indicado, queda notificado de que la utilización, divulgación y/o copia 
sin autorización está prohibida en virtud de la legislación vigente. Si 
ha recibido este mensaje por error, le rogamos que nos lo comunique 
inmediatamente por esta misma vía y proceda a su destrucción.

 

This message is intended exclusively for its addressee and may contain 
information that is CONFIDENTIAL and protected by professional 
privilege. If you are not the intended recipient you are hereby notified 
that any dissemination, copy or disclosure of this communication is 
strictly prohibited by law. If this message has been received in error, 
please immediately notify us via e-mail and delete it.


--------------070002070508090705010402--

From java-user-return-28466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 12:23:57 2007
Return-Path: <java-user-return-28466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5948 invoked from network); 1 Jun 2007 12:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 12:23:56 -0000
Received: (qmail 60220 invoked by uid 500); 1 Jun 2007 12:15:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60182 invoked by uid 500); 1 Jun 2007 12:15:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60162 invoked by uid 99); 1 Jun 2007 12:15:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 05:15:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 05:15:51 -0700
Received: by mu-out-0910.google.com with SMTP id g7so531111muf
        for <java-user@lucene.apache.org>; Fri, 01 Jun 2007 05:15:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G4qhxxkQa9I5YRHqno1tAxc64ghMa77fPTckTwLUKix9eEwTq5JqEkjsrzATRr4ZjNygFlGd0BnTTZ2b3vM+Wob3vn9cNMVAlfijJwc0fsg8Tp4vxjMVbqaOxJZ1ct5xiSfRi9NpB91qj8AtsbQEahRZhMJq99Jw75SV6gBmJMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R8SbgUD+UJRPMFqJRkjOWj9t/Dmb1RzVWAe0loIkmeaWaaNpTaOvljLVYaaxZvYJEd3Fe+GExvV2RjTFE4TczEexvf97RUGG1t00YxnSt1YJXjmT6F1Xq1ofr5XdnthYTN7PTKBoycRFRIDg4amVVOygjv5NE9Rseop5M0BOZb8=
Received: by 10.82.105.13 with SMTP id d13mr1227711buc.1180700129768;
        Fri, 01 Jun 2007 05:15:29 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 1 Jun 2007 05:15:29 -0700 (PDT)
Message-ID: <359a92830706010515n2188248axdab4a235373dad7e@mail.gmail.com>
Date: Fri, 1 Jun 2007 08:15:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index content
In-Reply-To: <10911002.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2964_25537756.1180700129724"
References: <10911002.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2964_25537756.1180700129724
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Let's say you indexed the filename in "fname", as in
doc.add(new Field("fname", "blah.txt", Field.Store.Yes,
Field.Index.TOKENIZED).

Something like dok.get("fname") should do it.

Erick

On 6/1/07, starz10de <farag_ahmed@yahoo.com> wrote:
>
>
> Hello all,
> I am printing luecene index content and I successed but I don't know how
> to
> print the indexed file names.
>
>
> System.out.println(dok.doc() );
>
> here it printed the doc ID , but I need the document name. for exxample
> doc
> ID =1 , the file name = F1, how to print the file name F1.
>
> thanks in advance
>
> --
> View this message in context:
> http://www.nabble.com/Lucene-index-content-tf3851690.html#a10911002
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2964_25537756.1180700129724--

From java-user-return-28467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 12:26:31 2007
Return-Path: <java-user-return-28467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8484 invoked from network); 1 Jun 2007 12:26:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 12:26:29 -0000
Received: (qmail 64263 invoked by uid 500); 1 Jun 2007 12:18:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64220 invoked by uid 500); 1 Jun 2007 12:18:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64205 invoked by uid 99); 1 Jun 2007 12:18:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 05:18:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 05:18:25 -0700
Received: by wr-out-0506.google.com with SMTP id i4so497254wra
        for <java-user@lucene.apache.org>; Fri, 01 Jun 2007 05:18:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Bo+K9lAhxsYTry2s7S//iGfvh7MqHcrRuJn91vm05FoK/yi2IvMN+Vvi7Q3sWb8ZAioisYCnIeFERoDQVh3Uazfl4Dwo4eBnMHE1c0Lrdz6iYiafpHT/4nxDhNU3cNsnagWALrh4X8CbkMvoW9aUhs9r88rD9AI7DwRNELWDHRg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tQerH6O3fYI2L3WK2Ygqv4CeQNfpkw3XyoFIwJZ3QatETCSUEYgBVsXYKTYE0KdOxcJcAwM/1S8EKnq97u2PkI09zsn92rRSFBkz/rVnW1ZC4KtrKUHTq1O8tU1TiakZNljz9uCnUrQT1uwpKXAb98FVEbF1w7TahKk8N4ocamk=
Received: by 10.82.170.2 with SMTP id s2mr1126877bue.1180700284113;
        Fri, 01 Jun 2007 05:18:04 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 1 Jun 2007 05:18:04 -0700 (PDT)
Message-ID: <359a92830706010518u6c0739e6ofaee37e64d791392@mail.gmail.com>
Date: Fri, 1 Jun 2007 08:18:04 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about lucene
In-Reply-To: <002f01c7a445$ad3ca540$6900a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3040_24407281.1180700284084"
References: <002f01c7a445$ad3ca540$6900a8c0@dhcp.fnal.gov>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3040_24407281.1180700284084
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No. Lucene is an *engine*, not an app that has a lot of stuff built on top
of it out of the box.

You have to index enough information to figure this out somehow.

Best
Erick

On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
>
> Hi,
>
>
>
> I've just downloaded Lucene, tried demo and looked at the documentation.
> The
> Indexing and Searching work great and fast but  I also need to display all
> the actual "hits":  the lines from the files that match a particular
> query.
> Does Lucene provide means to do it?
>
>
>
> Thanks a lot,
>
>
>
> Tanya
>
>
>
>

------=_Part_3040_24407281.1180700284084--

From java-user-return-28468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 12:31:08 2007
Return-Path: <java-user-return-28468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12334 invoked from network); 1 Jun 2007 12:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 12:31:05 -0000
Received: (qmail 88501 invoked by uid 500); 1 Jun 2007 12:31:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88473 invoked by uid 500); 1 Jun 2007 12:31:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88462 invoked by uid 99); 1 Jun 2007 12:31:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 05:31:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Jun 2007 05:30:57 -0700
Received: (qmail 91061 invoked from network); 1 Jun 2007 12:25:32 -0000
Received: from unknown (HELO CD92922) (71.201.177.115)
  by host412.ipowerweb.com with SMTP; 1 Jun 2007 12:25:32 -0000
From: "Tanya Levshina" <tanya@volvovski.com>
To: <java-user@lucene.apache.org>
References: <002f01c7a445$ad3ca540$6900a8c0@dhcp.fnal.gov> <359a92830706010518u6c0739e6ofaee37e64d791392@mail.gmail.com>
Subject: RE: question about lucene
Date: Fri, 1 Jun 2007 07:30:23 -0500
Message-ID: <003d01c7a448$a08f3990$6900a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-reply-to: <359a92830706010518u6c0739e6ofaee37e64d791392@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcekRkJHGNG2dRO2THupyKcLHTCl0QAAhjXg
X-Virus-Checked: Checked by ClamAV on apache.org

Wow, it was fast! Thanks. Do you know about any existing application that is
built on top of lucene that provides this functionality?

Tanya

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Friday, June 01, 2007 7:18 AM
To: java-user@lucene.apache.org
Subject: Re: question about lucene

No. Lucene is an *engine*, not an app that has a lot of stuff built on top
of it out of the box.

You have to index enough information to figure this out somehow.

Best
Erick

On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
>
> Hi,
>
>
>
> I've just downloaded Lucene, tried demo and looked at the documentation.
> The
> Indexing and Searching work great and fast but  I also need to display all
> the actual "hits":  the lines from the files that match a particular
> query.
> Does Lucene provide means to do it?
>
>
>
> Thanks a lot,
>
>
>
> Tanya
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 12:40:53 2007
Return-Path: <java-user-return-28465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22610 invoked from network); 1 Jun 2007 12:40:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 12:40:45 -0000
Received: (qmail 48863 invoked by uid 500); 1 Jun 2007 12:10:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48838 invoked by uid 500); 1 Jun 2007 12:10:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48827 invoked by uid 99); 1 Jun 2007 12:10:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 05:10:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Jun 2007 05:09:54 -0700
Received: (qmail 76525 invoked from network); 1 Jun 2007 12:04:27 -0000
Received: from unknown (HELO CD92922) (71.201.177.115)
  by host412.ipowerweb.com with SMTP; 1 Jun 2007 12:04:27 -0000
From: "Tanya Levshina" <tanya@volvovski.com>
To: <java-user@lucene.apache.org>
Subject: question about lucene
Date: Fri, 1 Jun 2007 07:09:14 -0500
Message-ID: <002f01c7a445$ad3ca540$6900a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0030_01C7A41B.C4669D40"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcekRasZ3PAHOhYzQWSYCELRd7bB8g==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0030_01C7A41B.C4669D40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

I've just downloaded Lucene, tried demo and looked at the documentation. The
Indexing and Searching work great and fast but  I also need to display all
the actual "hits":  the lines from the files that match a particular query.
Does Lucene provide means to do it?

 

Thanks a lot,

 

Tanya

 


------=_NextPart_000_0030_01C7A41B.C4669D40--



From java-user-return-28469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 12:58:00 2007
Return-Path: <java-user-return-28469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35651 invoked from network); 1 Jun 2007 12:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 12:57:58 -0000
Received: (qmail 58629 invoked by uid 500); 1 Jun 2007 12:57:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58590 invoked by uid 500); 1 Jun 2007 12:57:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58579 invoked by uid 99); 1 Jun 2007 12:57:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 05:57:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 05:57:48 -0700
Received: by wr-out-0506.google.com with SMTP id i4so508143wra
        for <java-user@lucene.apache.org>; Fri, 01 Jun 2007 05:57:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bTgaD6yp8tN9Q+nRilTJJEfkw6DKZ5eO8I1sMoxPP7a+4HNnK56hkJtRGhXdky/y7/UV8/d6LPmxcckKZPS9W9g3ycyQWTHDpahl7vamLO/QuLZdoSeqyDvucnXziiSp3mvfNFtmkgC+833m3dBSdDfYybd6XbmZvvSjWZWXEGQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RYs12Zgb5BKvh9svBsK3Y1RxhpSgiG95FqiDEuxFUyLa6sE5ifPzjmKRgvF3qP4BU7iiiIIXF+jxj0pY5mYJcyUWM1KauMiX6mRnvI+4VXkNDiFYFQKjLSy5NZRtYq7c4k9dj378vWIi0VTM/bbAd5lLf0giV+AY8K7MOPljUjk=
Received: by 10.82.136.4 with SMTP id j4mr1244849bud.1180702645672;
        Fri, 01 Jun 2007 05:57:25 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 1 Jun 2007 05:57:25 -0700 (PDT)
Message-ID: <359a92830706010557q70d95c29y5a333d1a8eb557a@mail.gmail.com>
Date: Fri, 1 Jun 2007 08:57:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about lucene
In-Reply-To: <003d01c7a448$a08f3990$6900a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3317_4459327.1180702645563"
References: <002f01c7a445$ad3ca540$6900a8c0@dhcp.fnal.gov>
	 <359a92830706010518u6c0739e6ofaee37e64d791392@mail.gmail.com>
	 <003d01c7a448$a08f3990$6900a8c0@dhcp.fnal.gov>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3317_4459327.1180702645563
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Nope. But here's what I think you can do (although I haven't
tried this exactly, so caveat emptor).

Document doc = new Document();
doc.add("text", line1);
doc.add("text", line2);
doc.add("text", line3);
writer.add(doc);

Now, when searching, you can get the document back and

String[] lines = doc.getValues();

At this point, lines[0] contains line1, lines[1] contains line2, etc.

Perhaps something with Highlighter would work here, or you can
use a MemoryIndex to manipulate them....

But you have some issues here. What is the "correct" line to display if
you search on, say, "Erick AND Tanya" and "Erick" is on one line but
"Tanya" is on another?

Perhaps it would help if you posted a statement of the actual problem
you're trying to solve, there may be other, easier approaches.....

Erick


On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
>
> Wow, it was fast! Thanks. Do you know about any existing application that
> is
> built on top of lucene that provides this functionality?
>
> Tanya
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, June 01, 2007 7:18 AM
> To: java-user@lucene.apache.org
> Subject: Re: question about lucene
>
> No. Lucene is an *engine*, not an app that has a lot of stuff built on top
> of it out of the box.
>
> You have to index enough information to figure this out somehow.
>
> Best
> Erick
>
> On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
> >
> > Hi,
> >
> >
> >
> > I've just downloaded Lucene, tried demo and looked at the documentation.
> > The
> > Indexing and Searching work great and fast but  I also need to display
> all
> > the actual "hits":  the lines from the files that match a particular
> > query.
> > Does Lucene provide means to do it?
> >
> >
> >
> > Thanks a lot,
> >
> >
> >
> > Tanya
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3317_4459327.1180702645563--

From java-user-return-28470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 13:02:51 2007
Return-Path: <java-user-return-28470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37490 invoked from network); 1 Jun 2007 13:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 13:02:49 -0000
Received: (qmail 69683 invoked by uid 500); 1 Jun 2007 13:02:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69304 invoked by uid 500); 1 Jun 2007 13:02:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69293 invoked by uid 99); 1 Jun 2007 13:02:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 06:02:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [207.31.238.50] (HELO athena.getconnectedinc.com) (207.31.238.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 06:02:41 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: question about lucene
Date: Fri, 1 Jun 2007 09:02:17 -0400
Message-ID: <3D97BD422499564FA26C6F7160FA95520AA97BF3@athena.getconnectedinc.com>
In-Reply-To: <359a92830706010557q70d95c29y5a333d1a8eb557a@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: question about lucene
Thread-Index: AcekTHa3+eccORq2RbOzpilrm3/IaQAAIHUg
References: <002f01c7a445$ad3ca540$6900a8c0@dhcp.fnal.gov> <359a92830706010518u6c0739e6ofaee37e64d791392@mail.gmail.com> <003d01c7a448$a08f3990$6900a8c0@dhcp.fnal.gov> <359a92830706010557q70d95c29y5a333d1a8eb557a@mail.gmail.com>
From: "Will Johnson" <wjohnson@GETCONNECTED.COM>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Solr, which is built on top of lucene and adds highlighting among other
features, gets close to what you want.  Check out:

http://wiki.apache.org/solr/HighlightingParameters

- will

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Friday, June 01, 2007 8:57 AM
To: java-user@lucene.apache.org
Subject: Re: question about lucene

Nope. But here's what I think you can do (although I haven't
tried this exactly, so caveat emptor).

Document doc =3D new Document();
doc.add("text", line1);
doc.add("text", line2);
doc.add("text", line3);
writer.add(doc);

Now, when searching, you can get the document back and

String[] lines =3D doc.getValues();

At this point, lines[0] contains line1, lines[1] contains line2, etc.

Perhaps something with Highlighter would work here, or you can
use a MemoryIndex to manipulate them....

But you have some issues here. What is the "correct" line to display if
you search on, say, "Erick AND Tanya" and "Erick" is on one line but
"Tanya" is on another?

Perhaps it would help if you posted a statement of the actual problem
you're trying to solve, there may be other, easier approaches.....

Erick


On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
>
> Wow, it was fast! Thanks. Do you know about any existing application
that
> is
> built on top of lucene that provides this functionality?
>
> Tanya
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, June 01, 2007 7:18 AM
> To: java-user@lucene.apache.org
> Subject: Re: question about lucene
>
> No. Lucene is an *engine*, not an app that has a lot of stuff built on
top
> of it out of the box.
>
> You have to index enough information to figure this out somehow.
>
> Best
> Erick
>
> On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
> >
> > Hi,
> >
> >
> >
> > I've just downloaded Lucene, tried demo and looked at the
documentation.
> > The
> > Indexing and Searching work great and fast but  I also need to
display
> all
> > the actual "hits":  the lines from the files that match a particular
> > query.
> > Does Lucene provide means to do it?
> >
> >
> >
> > Thanks a lot,
> >
> >
> >
> > Tanya
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 13:45:15 2007
Return-Path: <java-user-return-28471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61413 invoked from network); 1 Jun 2007 13:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 13:45:14 -0000
Received: (qmail 39692 invoked by uid 500); 1 Jun 2007 13:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39649 invoked by uid 500); 1 Jun 2007 13:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39638 invoked by uid 99); 1 Jun 2007 13:45:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 06:45:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Jun 2007 06:45:05 -0700
Received: (qmail 85133 invoked by uid 60001); 1 Jun 2007 13:44:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ark7FxNJ6MMSZ7r/fHips8w99PnOplbd87RZ4XjAhI+hcE88C2H5XfidFsOG84HwbQi+ZqP/rmo3Uxk/pSVUdbeEJHkSWa9n9/53qvhz6mx9RwrWVUIUxyLviVl551Gvt0RgCgWLI5AxHda/HJ3h5cCCUgi9bFiFr86YkFKpNew=;
X-YMail-OSG: Forb0CwVM1lr9igU.L__Tb8L6yKBOZROSZpNzf5eqaQzXlq2mbFr0ocKKyS4HJOLvphhmjANPJ_GcWQEcFwaNcJkSA0aHFOJAMYSJNcM9RRyX.4h
Received: from [62.189.26.100] by web26008.mail.ukl.yahoo.com via HTTP; Fri, 01 Jun 2007 13:44:42 GMT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Fri, 1 Jun 2007 13:44:42 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: question about lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <321731.84773.qm@web26008.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I suspect the Highlighter (in "contrib" section) is what you're after.

There is a patch in JIRA from Mark Miller which adds support for "proper" highlighting of phrases which I promise to take a look at when I get some time (hang in there Mark!)

----- Original Message ----
From: Will Johnson <wjohnson@GETCONNECTED.COM>
To: java-user@lucene.apache.org
Sent: Friday, 1 June, 2007 2:02:17 PM
Subject: RE: question about lucene

Solr, which is built on top of lucene and adds highlighting among other
features, gets close to what you want.  Check out:

http://wiki.apache.org/solr/HighlightingParameters

- will

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Friday, June 01, 2007 8:57 AM
To: java-user@lucene.apache.org
Subject: Re: question about lucene

Nope. But here's what I think you can do (although I haven't
tried this exactly, so caveat emptor).

Document doc = new Document();
doc.add("text", line1);
doc.add("text", line2);
doc.add("text", line3);
writer.add(doc);

Now, when searching, you can get the document back and

String[] lines = doc.getValues();

At this point, lines[0] contains line1, lines[1] contains line2, etc.

Perhaps something with Highlighter would work here, or you can
use a MemoryIndex to manipulate them....

But you have some issues here. What is the "correct" line to display if
you search on, say, "Erick AND Tanya" and "Erick" is on one line but
"Tanya" is on another?

Perhaps it would help if you posted a statement of the actual problem
you're trying to solve, there may be other, easier approaches.....

Erick


On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
>
> Wow, it was fast! Thanks. Do you know about any existing application
that
> is
> built on top of lucene that provides this functionality?
>
> Tanya
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, June 01, 2007 7:18 AM
> To: java-user@lucene.apache.org
> Subject: Re: question about lucene
>
> No. Lucene is an *engine*, not an app that has a lot of stuff built on
top
> of it out of the box.
>
> You have to index enough information to figure this out somehow.
>
> Best
> Erick
>
> On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
> >
> > Hi,
> >
> >
> >
> > I've just downloaded Lucene, tried demo and looked at the
documentation.
> > The
> > Indexing and Searching work great and fast but  I also need to
display
> all
> > the actual "hits":  the lines from the files that match a particular
> > query.
> > Does Lucene provide means to do it?
> >
> >
> >
> > Thanks a lot,
> >
> >
> >
> > Tanya
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________ 
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 16:22:07 2007
Return-Path: <java-user-return-28472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24374 invoked from network); 1 Jun 2007 16:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 16:22:05 -0000
Received: (qmail 42364 invoked by uid 500); 1 Jun 2007 16:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42326 invoked by uid 500); 1 Jun 2007 16:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42315 invoked by uid 99); 1 Jun 2007 16:22:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 09:22:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 09:21:56 -0700
Received: by wr-out-0506.google.com with SMTP id i4so576173wra
        for <java-user@lucene.apache.org>; Fri, 01 Jun 2007 09:21:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uiMCCdkNxxuW7rND3p5dYST6mr/zye3tcUywloZQJUmqQEiMzg+4UrHyVu4ATdNm7CnoO74IfehZN6+9BhaHFvjLu2khclsWaM1Ugqb5bus0rObynOEsK9ZdH+oDQgwjOMXRFzhWLAN15gouisp1QIkkynoJiFXj/cPQmaBAlJM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ibhDi4z7WBs2WJUxSXlaIk1SL5LzDpAu5xGA3RSWvxOivohI513AzHo69ggmrEErw8TLS218LZlCUs+6Musn3z6xBksIECWmLo7u0AwShKDveZfqHNKmTIB5l5/tST/OcxOJ1QE8lkTcywhFncSafE92AQFqY6cSThjvJoxDIGQ=
Received: by 10.78.132.2 with SMTP id f2mr1322525hud.1180714893407;
        Fri, 01 Jun 2007 09:21:33 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Fri, 1 Jun 2007 09:21:33 -0700 (PDT)
Message-ID: <6e3ae6310706010921k4969a922y63cc25aae6c1bba9@mail.gmail.com>
Date: Fri, 1 Jun 2007 09:21:33 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about lucene
In-Reply-To: <003d01c7a448$a08f3990$6900a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <002f01c7a445$ad3ca540$6900a8c0@dhcp.fnal.gov>
	 <359a92830706010518u6c0739e6ofaee37e64d791392@mail.gmail.com>
	 <003d01c7a448$a08f3990$6900a8c0@dhcp.fnal.gov>
X-Virus-Checked: Checked by ClamAV on apache.org

If your data is in database, DBSight can get you started easily in 3 minutes!

http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

Highlighter is the part you want when you display the search results.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
> Wow, it was fast! Thanks. Do you know about any existing application that is
> built on top of lucene that provides this functionality?
>
> Tanya
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, June 01, 2007 7:18 AM
> To: java-user@lucene.apache.org
> Subject: Re: question about lucene
>
> No. Lucene is an *engine*, not an app that has a lot of stuff built on top
> of it out of the box.
>
> You have to index enough information to figure this out somehow.
>
> Best
> Erick
>
> On 6/1/07, Tanya Levshina <tanya@volvovski.com> wrote:
> >
> > Hi,
> >
> >
> >
> > I've just downloaded Lucene, tried demo and looked at the documentation.
> > The
> > Indexing and Searching work great and fast but  I also need to display all
> > the actual "hits":  the lines from the files that match a particular
> > query.
> > Does Lucene provide means to do it?
> >
> >
> >
> > Thanks a lot,
> >
> >
> >
> > Tanya
> >
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 20:45:57 2007
Return-Path: <java-user-return-28473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31462 invoked from network); 1 Jun 2007 20:45:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 20:45:55 -0000
Received: (qmail 81187 invoked by uid 500); 1 Jun 2007 20:45:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81146 invoked by uid 500); 1 Jun 2007 20:45:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81135 invoked by uid 99); 1 Jun 2007 20:45:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 13:45:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 13:45:46 -0700
Received: by wa-out-1112.google.com with SMTP id k17so856213waf
        for <java-user@lucene.apache.org>; Fri, 01 Jun 2007 13:45:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=KtokUaHzgLrSuaHioKCVk6saAC3B34uxiUgnN2jUQ788kasYomyKW7Pveqk7lQzSUwCjF3dxfzlq3HZ2kz6vYpjRvKsL7juQjEr57kUza6rPfhefEQ3lS8gUXmU27g/lyY6tWlTGzNvOdBXZhGxrYTOWiXjM1O+3JE9L0ggVfk8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=sKQXNmDn47OVamjv3d3tUuRcKSHBScFW3awC3EDyzeD41rtcBPJZZRYViY6d76BtaTAdUdGzDvLfw9k72BYaZ6B+DPcLZkfhrc1KcTR4EspSiO+dCOLu/0qi4L7i6SONoTdqpGFwyRHGWeSG8daXCS+ZkvI77OCDK3rfdcO0t8s=
Received: by 10.114.108.15 with SMTP id g15mr2178428wac.1180730726260;
        Fri, 01 Jun 2007 13:45:26 -0700 (PDT)
Received: by 10.115.32.13 with HTTP; Fri, 1 Jun 2007 13:45:26 -0700 (PDT)
Message-ID: <ae6f38f60706011345j1f6416b8x5f06b2837028ed6c@mail.gmail.com>
Date: Fri, 1 Jun 2007 16:45:26 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: The values which compute scores. - Part II
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I've managed to build my own Similarity class, plug it in, and use
Explain to convince myself that I am, indeed, getting the correct
weightings that I desire.  My test case documents are yielding
precisely the intermediate values needed for alternate scoring.

There's just one thing...

When I do an .explain(), I'm getting values back for the fieldNorm()
that are improperly biasing my scores.

According to http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg06275.html,
this value is actually computed at index time.

Indeed, that is the case, for if I generate a new index using my
custom Similarity class, the bias disappears and all is right with the
world.

However, I'm not exactly thrilled at the prospect of maintaining a
second index.  Recall from the initial message that users will be
toggling between the standard scoring and the alternative.

And while, yes, I know that this value is precomputed and stored in
the index, what I'd like to be able to do is simply ignore it.

Somewhere the code that computes that big huge scoring equation has to
pull that value and use it.  I figure if I override -that-, I can
simply ignore the value and treat fieldNorm() as 1 when the custom
version is used.

Only problem is, I'm not sure if this is a property set somewhere, a
method override in a replacement class, or some more brain surgery on
my one-off version of Lucene.

Gurus, may I approach?

-wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 20:59:58 2007
Return-Path: <java-user-return-28474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36735 invoked from network); 1 Jun 2007 20:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 20:59:57 -0000
Received: (qmail 17346 invoked by uid 500); 1 Jun 2007 20:59:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17313 invoked by uid 500); 1 Jun 2007 20:59:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17268 invoked by uid 99); 1 Jun 2007 20:59:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 13:59:50 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 13:59:45 -0700
Received: by wa-out-1112.google.com with SMTP id k17so860421waf
        for <java-user@lucene.apache.org>; Fri, 01 Jun 2007 13:59:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=QSFXXDp4dTriANxfPnsWuL29IXg4unLY0atgmcCEhOgucVuY6y5ZDcajhQU9bvczuNhAXhckE1r1fEshuCIpyptjjueI904NcQCkHMXqpkajEanH2bA3sirpGy51NcSSJpsAtFXh/49VCq9JmewzN+moQlBFr5maqPvLOQS2s8s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=UtuQ6So/Yznd8qGRPGrIv4FIZ7upJy9P6JttVN/7cYxXg1PxVDjlye09+rmTBN3T5M5LXEBvC+8XadTC8bBgzneSuMjls9lBFoBWEWd1DXCHGu7ZAm/Z1v92LzUq9HP0UgV9OTIpW+K2fp6GORHSriC6kXNz2rRDjhIj0Yi1w5o=
Received: by 10.114.15.1 with SMTP id 1mr2238467wao.1180731565159;
        Fri, 01 Jun 2007 13:59:25 -0700 (PDT)
Received: by 10.114.255.16 with HTTP; Fri, 1 Jun 2007 13:59:25 -0700 (PDT)
Message-ID: <7798eaa0706011359r71da61c2r791dab531d461650@mail.gmail.com>
Date: Fri, 1 Jun 2007 17:59:25 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Two differently sorted result sets from the same search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12270_6862262.1180731565136"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12270_6862262.1180731565136
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I need to find a couple of result sets at the same time from the same
search-criteria. The two sets are sorted according different sort-criteria.
>From both I need just the few top N results, but anyway, because of business
rules, I need to process the entire hit set for the search. Till now I have
implemented this search for just one result set on top of custom
TopFieldDocCollector, Filter and Sort (w/ custom ScoreDocComparator). But
now, having to generate the two different sets, I see two choices:

1) Keep the same implementation, but search twice, switching the Sort on
each search. Here not only the search is done twice but the HitCollector
iterates along all documentIds twice also.

2) Instead of a TopFieldDocCollector use some kind of bounded priority queue
optimized for top-N results. With a HitCollector, a Filter and two of these
queues it's easy and efficient to find both result sets on one simple pass.
Do you know of a good implementation of this data structure? This seems nice
http://www.alias-i.com/lingpipe/docs/api/com/aliasi/util/BoundedPriorityQueue.htmlbut
it has some license issues. Is there something similar that I can
borrow
from lucene sources?

Any other suggestion?

Thank you very much in advance.
Regards,
Carlos

------=_Part_12270_6862262.1180731565136--

From java-user-return-28475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 21:28:07 2007
Return-Path: <java-user-return-28475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47848 invoked from network); 1 Jun 2007 21:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 21:28:05 -0000
Received: (qmail 68408 invoked by uid 500); 1 Jun 2007 21:28:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68369 invoked by uid 500); 1 Jun 2007 21:28:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68358 invoked by uid 99); 1 Jun 2007 21:28:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 14:28:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of carlosjosepita@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 14:27:56 -0700
Received: by nz-out-0506.google.com with SMTP id x7so562267nzc
        for <java-user@lucene.apache.org>; Fri, 01 Jun 2007 14:27:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f/bW1S14Vwc9pwbQejKkCJARCRs8DyrqvGj6Cj9UDPh84wIEtxiFdSd7VsjJ9siin/VWkHllJG1bj1fU2rlIQjIFKPb1Au2XeHFGHpzOUuSK6b+GPBZH6RQj53b08RxS2sai/JfzgNeJd06r/YENWovZ5lHA7pBFfGrZVYkZ8bo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rEJGeuDh+59suiZ5PhY1RUPQt5JmrTMkLCwI0R5OoJ0Uk70++V6ui03tm6uA8AvRQoYEW1GfTfdn06Fi9ISzfUqjX43F6Ekd41aX0A7FJ22LJthWsY2MGaJvH9+39ZilXXtWEp86ezXzpZuOsXLeUHyz06FFogPuDOYfe8HE/o8=
Received: by 10.114.120.1 with SMTP id s1mr2193925wac.1180733255404;
        Fri, 01 Jun 2007 14:27:35 -0700 (PDT)
Received: by 10.114.255.16 with HTTP; Fri, 1 Jun 2007 14:27:35 -0700 (PDT)
Message-ID: <7798eaa0706011427u3582168dke513371bb4b2c4a0@mail.gmail.com>
Date: Fri, 1 Jun 2007 18:27:35 -0300
From: "Carlos Pita" <carlosjosepita@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Two differently sorted result sets from the same search
In-Reply-To: <7798eaa0706011359r71da61c2r791dab531d461650@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12670_3926883.1180733255374"
References: <7798eaa0706011359r71da61c2r791dab531d461650@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12670_3926883.1180733255374
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mh, now I found out that latests sdks provide a priority queue too, although
unbounded. But, supposing the queue has already top-n elements, I could
compare the current heap with the head (O(1)), if it is smaller or equal
just discard it, and another way remove the head ((O(log(top-n))) and insert
the current element ((O(log(top-n)) again). In overall, the entire algorithm
will be O(n log(top-n)) as wished. Do you think this is a good idea? Do you
know of a better way to achieve the same recurring to lucene arcana?

Cheers,
Carlos

http://java.sun.com/j2se/1.5.0/docs/api/java/util/PriorityQueue.html

On 6/1/07, Carlos Pita <carlosjosepita@gmail.com> wrote:
>
> Hi all,
>
> I need to find a couple of result sets at the same time from the same
> search-criteria. The two sets are sorted according different sort-criteria.
> From both I need just the few top N results, but anyway, because of business
> rules, I need to process the entire hit set for the search. Till now I have
> implemented this search for just one result set on top of custom
> TopFieldDocCollector, Filter and Sort (w/ custom ScoreDocComparator). But
> now, having to generate the two different sets, I see two choices:
>
> 1) Keep the same implementation, but search twice, switching the Sort on
> each search. Here not only the search is done twice but the HitCollector
> iterates along all documentIds twice also.
>
> 2) Instead of a TopFieldDocCollector use some kind of bounded priority
> queue optimized for top-N results. With a HitCollector, a Filter and two of
> these queues it's easy and efficient to find both result sets on one simple
> pass. Do you know of a good implementation of this data structure? This
> seems nice
> http://www.alias-i.com/lingpipe/docs/api/com/aliasi/util/BoundedPriorityQueue.htmlbut it has some license issues. Is there something similar that I can borrow
> from lucene sources?
>
> Any other suggestion?
>
> Thank you very much in advance.
> Regards,
> Carlos
>
>

------=_Part_12670_3926883.1180733255374--

From java-user-return-28476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 22:03:04 2007
Return-Path: <java-user-return-28476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60093 invoked from network); 1 Jun 2007 22:03:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 22:03:03 -0000
Received: (qmail 21096 invoked by uid 500); 1 Jun 2007 22:02:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21064 invoked by uid 500); 1 Jun 2007 22:02:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21053 invoked by uid 99); 1 Jun 2007 22:02:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 15:02:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 15:02:53 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l51M2VTF141274
	for <java-user@lucene.apache.org>; Fri, 1 Jun 2007 22:02:31 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l51M2UpS3817588
	for <java-user@lucene.apache.org>; Sat, 2 Jun 2007 00:02:30 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l51M2UUt013680
	for <java-user@lucene.apache.org>; Sat, 2 Jun 2007 00:02:30 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l51M2UR2013677
	for <java-user@lucene.apache.org>; Sat, 2 Jun 2007 00:02:30 +0200
In-Reply-To: <7798eaa0706011359r71da61c2r791dab531d461650@mail.gmail.com>
Subject: Re: Two differently sorted result sets from the same search
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB28F72F3.F19246F7-ON882572ED.0078673A-882572ED.0078B51C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 1 Jun 2007 14:58:26 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 02/06/2007 01:02:29
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Carlos Pita wrote on 01/06/2007 13:59:25:

> 2) Instead of a TopFieldDocCollector use some
> kind of bounded priority queue optimized for
> top-N results. With a HitCollector, a Filter
> and two of these queues it's easy and efficient
> to find both result sets on one  simple pass.
> Do you know of a good implementation of this data structure?

> Is there something similar that I can borrow from lucene sources?

You can collect into (your) subclass(es) of
o.a.lucene.util.PriorityQueue:
  Provide a lessThan().
  Call initialize(maxSize) with the limit.

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 01 22:43:28 2007
Return-Path: <java-user-return-28477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69316 invoked from network); 1 Jun 2007 22:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2007 22:43:27 -0000
Received: (qmail 72284 invoked by uid 500); 1 Jun 2007 22:43:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72247 invoked by uid 500); 1 Jun 2007 22:43:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72236 invoked by uid 99); 1 Jun 2007 22:43:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 15:43:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jun 2007 15:43:18 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l51Mgud0481360
	for <java-user@lucene.apache.org>; Fri, 1 Jun 2007 22:42:56 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l51Mgugq3657956
	for <java-user@lucene.apache.org>; Sat, 2 Jun 2007 00:42:56 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l51Mgu3F001467
	for <java-user@lucene.apache.org>; Sat, 2 Jun 2007 00:42:56 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l51Mguqb001464
	for <java-user@lucene.apache.org>; Sat, 2 Jun 2007 00:42:56 +0200
In-Reply-To: <ae6f38f60706011345j1f6416b8x5f06b2837028ed6c@mail.gmail.com>
Subject: Re: The values which compute scores. - Part II
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF35D099BB.104818FB-ON882572ED.007BA76C-882572ED.007C934D@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 1 Jun 2007 15:40:41 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 02/06/2007 01:42:55
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Walt,

AFAIK there is no flag guiding scorers to "ignore norms".
I guess you could hack a "all norms are 1" behavior by
writing something similar to OneNormsReader in
org.apache.lucene.demo.SearchFiles.

Doron

Walt Stoneburner wrote on 01/06/2007 13:45:26:

> I've managed to build my own Similarity class, plug it in, and use
> Explain to convince myself that I am, indeed, getting the correct
> weightings that I desire.  My test case documents are yielding
> precisely the intermediate values needed for alternate scoring.
>
> There's just one thing...
>
> When I do an .explain(), I'm getting values back for the fieldNorm()
> that are improperly biasing my scores.
>
> According to http://www.mail-archive.com/lucene-user@jakarta.
> apache.org/msg06275.html,
> this value is actually computed at index time.
>
> Indeed, that is the case, for if I generate a new index using my
> custom Similarity class, the bias disappears and all is right with the
> world.
>
> However, I'm not exactly thrilled at the prospect of maintaining a
> second index.  Recall from the initial message that users will be
> toggling between the standard scoring and the alternative.
>
> And while, yes, I know that this value is precomputed and stored in
> the index, what I'd like to be able to do is simply ignore it.
>
> Somewhere the code that computes that big huge scoring equation has to
> pull that value and use it.  I figure if I override -that-, I can
> simply ignore the value and treat fieldNorm() as 1 when the custom
> version is used.
>
> Only problem is, I'm not sure if this is a property set somewhere, a
> method override in a replacement class, or some more brain surgery on
> my one-off version of Lucene.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 03 15:46:04 2007
Return-Path: <java-user-return-28478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13414 invoked from network); 3 Jun 2007 15:46:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2007 15:46:03 -0000
Received: (qmail 32437 invoked by uid 500); 3 Jun 2007 15:46:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32387 invoked by uid 500); 3 Jun 2007 15:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32376 invoked by uid 99); 3 Jun 2007 15:46:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jun 2007 08:46:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [195.238.4.100] (HELO outmx003.isp.belgacom.be) (195.238.4.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jun 2007 08:45:55 -0700
Received: from outmx003.isp.belgacom.be (localhost.localdomain [127.0.0.1])
        by outmx003.isp.belgacom.be (8.13.4/8.12.11/Skynet-OUT-2.22) with ESMTP id l53FjSOH008943
        for <java-user@lucene.apache.org>; Sun, 3 Jun 2007 17:45:28 +0200
        (envelope-from <jp.dzisiak@skynet.be>)
Received: from JPDZISIAK (66.246-64-87.adsl-dyn.isp.belgacom.be [87.64.246.66])
        by outmx003.isp.belgacom.be (8.13.4/8.13.4/Skynet-OUT-2.22) with ESMTP id l53FjMS6008906
        for <java-user@lucene.apache.org>; Sun, 3 Jun 2007 17:45:22 +0200
        (envelope-from <jp.dzisiak@skynet.be>)
From: "DZISIAK Jean-Paul" <jp.dzisiak@skynet.be>
To: <java-user@lucene.apache.org>
Subject: Unable to compile FrenchAnalyser and DutchAnalyser
Date: Sun, 3 Jun 2007 17:45:38 +0200
Message-ID: <000501c7a5f6$3bddd4c0$2700000a@JPDZISIAK>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0006_01C7A606.FF66A4C0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0006_01C7A606.FF66A4C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,

=20

I=92m trying to recompile the FrenchAnalyser and DutchAnalyser but I =
have the
following errors (among many others of the same type):

=20

.................................

                        private boolean isVowel(char ch) {

                        switch (ch)

                        {

                                   case '=C3=A2':

                                   case '=C3 ':

                                   case '=C3=AB':

                                   case '=C3=A9':

                                   case '=C3=AA':

                                   case '=C3=A8':

                                   case '=C3=AF':

                                   case '=C3=AE':

                                   case '=C3=B4':

                                   case '=C3=BC':

.................................

                                  =20

=20

The IDE says =93Too many characters in character litteral=94 and the =
compilation
=93unclosed character literal=92

=20

Help would be very appreciated !

=20

Jean-Paul


------=_NextPart_000_0006_01C7A606.FF66A4C0--


From java-user-return-28479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 03 16:02:48 2007
Return-Path: <java-user-return-28479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17396 invoked from network); 3 Jun 2007 16:02:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2007 16:02:46 -0000
Received: (qmail 55234 invoked by uid 500); 3 Jun 2007 16:02:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54205 invoked by uid 500); 3 Jun 2007 16:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54193 invoked by uid 99); 3 Jun 2007 16:02:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jun 2007 09:02:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jun 2007 09:02:39 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l53G2H8L393124
	for <java-user@lucene.apache.org>; Sun, 3 Jun 2007 16:02:17 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l53G2HhD3309786
	for <java-user@lucene.apache.org>; Sun, 3 Jun 2007 18:02:17 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l53G2HTu028858
	for <java-user@lucene.apache.org>; Sun, 3 Jun 2007 18:02:17 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l53G2Hwo028855
	for <java-user@lucene.apache.org>; Sun, 3 Jun 2007 18:02:17 +0200
In-Reply-To: <000501c7a5f6$3bddd4c0$2700000a@JPDZISIAK>
Subject: Re: Unable to compile FrenchAnalyser and DutchAnalyser
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF40B7FC65.1622992B-ON882572EF.00578050-882572EF.0057EA9E@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sun, 3 Jun 2007 09:00:16 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 03/06/2007 19:02:16
MIME-Version: 1.0
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: base64
X-Virus-Checked: Checked by ClamAV on apache.org

RFpJU0lBSyBKZWFuLVBhdWwgd3JvdGUgb24gMDMvMDYvMjAwNyAwODo0NTozODoNCg0KPiBJ4oCZ
bSB0cnlpbmcgdG8gcmVjb21waWxlIHRoZSBGcmVuY2hBbmFseXNlciBhbmQgRHV0Y2hBbmFseXNl
cg0KPiBidXQgSSBoYXZlIHRoZQ0KPiBmb2xsb3dpbmcgZXJyb3JzIChhbW9uZyBtYW55IG90aGVy
cyBvZiB0aGUgc2FtZSB0eXBlKToNCj4NCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjYXNlICfDgyAnOg0KPg0KPiBUaGUgSURFIHNheXMg4oCcVG9vIG1hbnkgY2hhcmFjdGVy
cyBpbiBjaGFyYWN0ZXIgbGl0dGVyYWzigJ0gYW5kDQo+IHRoZSBjb21waWxhdGlvbiDigJx1bmNs
b3NlZCBjaGFyYWN0ZXIgbGl0ZXJhbOKAmQ0KPg0KPiBIZWxwIHdvdWxkIGJlIHZlcnkgYXBwcmVj
aWF0ZWQgIQ0KPg0KDQpTZXR0aW5nIHRoZSBJREUncyB0ZXh0LWZpbGUtZW5jb2RpbmcgdG8gdXRm
LTggc2hvdWxkDQpmaXggdGhpcy4gSWYgeW91ciBJREUgZG9lcyBub3QgYWxsb3cgY29udHJvbCBv
ZiB0aGlzDQpzZXR0aW5nIChFY2xpcHNlIGRvZXMsIGJ0dykgeW91IGNhbiBjb21waWxlIGZyb20N
CmNvbW1hbmQgbGluZSAtICJhbnQgY29tcGlsZSIuDQoNCkRvcm9u




From java-user-return-28480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 03 22:37:19 2007
Return-Path: <java-user-return-28480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90535 invoked from network); 3 Jun 2007 22:37:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2007 22:37:18 -0000
Received: (qmail 69003 invoked by uid 500); 3 Jun 2007 22:37:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68974 invoked by uid 500); 3 Jun 2007 22:37:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68963 invoked by uid 99); 3 Jun 2007 22:37:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jun 2007 15:37:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jun 2007 15:37:07 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 062165B764; Sun,  3 Jun 2007 15:36:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F28D47F403
	for <java-user@lucene.apache.org>; Sun,  3 Jun 2007 15:36:46 -0700 (PDT)
Date: Sun, 3 Jun 2007 15:36:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: The values which compute scores. - Part II
In-Reply-To: <OF35D099BB.104818FB-ON882572ED.007BA76C-882572ED.007C934D@il.ibm.com>
Message-ID: <Pine.LNX.4.58.0706031533060.15967@hal.rescomp.berkeley.edu>
References: <OF35D099BB.104818FB-ON882572ED.007BA76C-882572ED.007C934D@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I guess you could hack a "all norms are 1" behavior by
: writing something similar to OneNormsReader in
: org.apache.lucene.demo.SearchFiles.

Wow ... that's quite the little hidden gem in the Demo.

The gist of the impl is pretty much exactly what you need, but
SegmentReader has a static utility to make things easy...

  public class FlatNormsIndexReader extends FilterIndexReader {
    public FlatNormsIndexReader(IndexReder r) { super(r); }
    public byte[] norms(String field) {
      return SegmentReader.createFakeNorms(maxDoc());
    }
  }



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 04 21:47:02 2007
Return-Path: <java-user-return-28481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52540 invoked from network); 4 Jun 2007 21:47:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jun 2007 21:47:01 -0000
Received: (qmail 50181 invoked by uid 500); 4 Jun 2007 21:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50145 invoked by uid 500); 4 Jun 2007 21:46:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50134 invoked by uid 99); 4 Jun 2007 21:46:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jun 2007 14:46:57 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of goodell@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jun 2007 14:46:51 -0700
Received: by py-out-1112.google.com with SMTP id a25so366855pyi
        for <java-user@lucene.apache.org>; Mon, 04 Jun 2007 14:46:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=AtZ/Vt7lWM8KtY5nM0DFLQhyHdpxNUG9IBOsCgmm7oOLwceUNAF7Yx9xxnbNTI/rbIPizgR/0xPvRjECUk0Odtq2FSPifZBVaHsdxfVxGXnT+Oe0gxRbRYjPcrtjSuwxQGmcjtoySxvZHW+9hLqYrf0omcTvly3q8n68tfZ2JvU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=W7wo08fP/Rv/Hy/FDaAXTRw9bThz+/vcXtVL/FyQbwaEKfUfYD1Ruuj6nUj7ny3/UCMPUOC/As6MBf/N0pKWTWIQN/H+m0InXeKEYqe9sf2SAbsmsLoOkNGf32vh/VtKKk0Q6vrbDTlKxzOjii6UYvK4EiGhucPbM0tNQmgvzfE=
Received: by 10.35.64.8 with SMTP id r8mr8946224pyk.1180993590465;
        Mon, 04 Jun 2007 14:46:30 -0700 (PDT)
Received: by 10.35.31.6 with HTTP; Mon, 4 Jun 2007 14:46:30 -0700 (PDT)
Message-ID: <55b2c6b90706041446g4dfe6932l6ca6de95ea5768f3@mail.gmail.com>
Date: Mon, 4 Jun 2007 14:46:30 -0700
From: "Andy Goodell" <agoodell@discoverymining.com>
Sender: goodell@gmail.com
To: java-user@lucene.apache.org
Subject: Searching with a score cutoff
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6397_18837211.1180993590276"
X-Google-Sender-Auth: 5931f0db0cdbb426
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6397_18837211.1180993590276
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Currently our application implements a score cutoff by iterating through the
hits and then stopping once it reaches a hit whose score is below our
threshold.  We'd like to optimize this (and avoid looking at the entire hits
when we don't need to) by having the score cutoff applied when the hits are
gathered.  The only way I can see of doing this is by over-riding
Similarity, which seems like an incredibly complex procedure.  What am I
missing?

- andy g.

------=_Part_6397_18837211.1180993590276--

From java-user-return-28482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 04 22:13:18 2007
Return-Path: <java-user-return-28482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64645 invoked from network); 4 Jun 2007 22:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jun 2007 22:13:17 -0000
Received: (qmail 2118 invoked by uid 500); 4 Jun 2007 22:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2080 invoked by uid 500); 4 Jun 2007 22:13:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2065 invoked by uid 99); 4 Jun 2007 22:13:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jun 2007 15:13:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jun 2007 15:13:09 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1002703nzc
        for <java-user@lucene.apache.org>; Mon, 04 Jun 2007 15:12:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=pvQiLjB993qlOjIXhuzVxltBKRbE90yAJcjPeKRqddkqMbNeK/iHtqJ49hi4Gclps9EaxsAVTrutZ+R34JsRVWxIb162AOsLggUJWrmBbO+MTMDWoCukdFpiK5YtZ8nt6KuhOxH/SBBT00d+P0bhA6jtWZh9sgB0OIoz177SYPU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=mlDYo8wEmjK6LqXzx33Yq16sIMrdi4nMhcvQnCxxgqzEHobsNbJl02kqC9rpO/4tDb0IZvTbdJZQoJanQFEmFOLF8GoOckq3yRTYA4zpODRXxakJxNdxS51Qi0tLJ3iU+n5C5Hy73h+idS5HHNVqrAgD3NkXG/yRt5iaMKquDOM=
Received: by 10.142.106.18 with SMTP id e18mr245262wfc.1180995167725;
        Mon, 04 Jun 2007 15:12:47 -0700 (PDT)
Received: by 10.143.166.17 with HTTP; Mon, 4 Jun 2007 15:12:47 -0700 (PDT)
Message-ID: <c68e39170706041512m1ba9f52ay5da9df75527db933@mail.gmail.com>
Date: Mon, 4 Jun 2007 18:12:47 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Searching with a score cutoff
In-Reply-To: <55b2c6b90706041446g4dfe6932l6ca6de95ea5768f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <55b2c6b90706041446g4dfe6932l6ca6de95ea5768f3@mail.gmail.com>
X-Google-Sender-Auth: 370a2099a3d41da2
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/4/07, Andy Goodell <agoodell@discoverymining.com> wrote:
> Currently our application implements a score cutoff by iterating through the
> hits and then stopping once it reaches a hit whose score is below our
> threshold.  We'd like to optimize this (and avoid looking at the entire hits
> when we don't need to) by having the score cutoff applied when the hits are
> gathered.  The only way I can see of doing this is by over-riding
> Similarity, which seems like an incredibly complex procedure.  What am I
> missing?

Look at the search methods that accept a HitCollector.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 05:29:15 2007
Return-Path: <java-user-return-28483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24996 invoked from network); 5 Jun 2007 05:29:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 05:29:15 -0000
Received: (qmail 13153 invoked by uid 500); 5 Jun 2007 05:29:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13099 invoked by uid 500); 5 Jun 2007 05:29:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13088 invoked by uid 99); 5 Jun 2007 05:29:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jun 2007 22:29:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jun 2007 22:29:04 -0700
Received: from mailhyd1.hyd.deshaw.com (mailhyd1-hba1.hyd.deshaw.com [149.77.160.72])
 by master.hyd.deshaw.com (8.13.7/8.13.7/2.0.kim.desco.357) with ESMTP id l555Sc9p000464
 for <java-user@lucene.apache.org>; Tue, 5 Jun 2007 10:58:40 +0530 (IST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Maintain a backup index
Date: Tue, 5 Jun 2007 10:58:37 +0530
Message-ID: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4BBB@mailhyd1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Maintain a backup index
Thread-Index: AcenMl5/kCaeAgceRYq7OetX3RfttA==
From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

We want to maintain a backup of our production index directory. We are
using Lucene 2.0 v. The normal way to have backup is to run a small
reindex script every 5 mins, which would pick up only those files which
were modified in that time frame and reindex them. This is one way to
rebuild and update a backup index from a master index. Is there any
other simpler way in Lucene v2.0, which would help us do the same task?
please let us know.
Please help
Thanks !


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 09:32:41 2007
Return-Path: <java-user-return-28484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6925 invoked from network); 5 Jun 2007 09:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 09:32:40 -0000
Received: (qmail 53890 invoked by uid 500); 5 Jun 2007 09:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53846 invoked by uid 500); 5 Jun 2007 09:32:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53835 invoked by uid 99); 5 Jun 2007 09:32:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 02:32:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 02:32:30 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1HvVOa-0003ap-Bf
	for java-user@lucene.apache.org; Tue, 05 Jun 2007 11:32:08 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4m2sfU8usS2i for <java-user@lucene.apache.org>;
	Tue,  5 Jun 2007 11:31:56 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1HvVOO-0003ZM-Gh
	for java-user@lucene.apache.org; Tue, 05 Jun 2007 11:31:56 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <KSS1N7SJ>; Tue, 5 Jun 2007 11:31:56 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C526BD@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Should I synchronize searching to cache the IndexSearcher?
Date: Tue, 5 Jun 2007 11:31:56 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi folks!

In the docs it says that I should cache the IndexSearcher for best
performance, and not build a new one for each query.

The problem is that when I want to switch to a new index, I would have =
to
synchronize my search() method while my update check runs (which is =
also
synchronized), so searching and switching to a new index never happen =
at the
same time.

I'm running a Tomcat application and realize that serializing all =
searches
would be bad for performance, so the question is:

- what is (probably) faster, having a cached IndexSearcher but a
synchronized search() method, or a non-cached search() method but =
building a
new IndexSearcher for every query?

My Index is not very big, less than 5MB.


Thanks for any comments!

Regards,


Michael


--=20
Michael B=F6ckling
Java Engineer
dmc digital media center GmbH=20
Rommelstra=DFe 11=20
70376 Stuttgart (Germany)=20
Telefon: +49 711 601747-0
Telefax: +49 711 601747-141=20
E-Mail: Michael.Boeckling@dmc.de=20
Internet: www.dmc.de=20

Handelsregister: AG Stuttgart HRB 18974
Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend

---------------------------------------------
Besseres E-Business.
dmc ist die kreative Vernetzung von Agentur, Systemhaus und Service. =
Seit
=FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen Kunden =
z=E4hlen
neckermann.de, Kodak und Telekom Training.

dmc auf Platz 8 im aktuellen New Media Service Ranking.
Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren wir =
mit einem
Umsatz von 13,50 Mio. Euro zu den Top 10 der erfolgreichsten New Media
Dienstleister in Deutschland.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 13:09:03 2007
Return-Path: <java-user-return-28485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74753 invoked from network); 5 Jun 2007 13:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 13:09:01 -0000
Received: (qmail 45929 invoked by uid 500); 5 Jun 2007 13:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45875 invoked by uid 500); 5 Jun 2007 13:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45848 invoked by uid 99); 5 Jun 2007 13:08:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 06:08:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 06:08:44 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1157001nzc
        for <java-user@lucene.apache.org>; Tue, 05 Jun 2007 06:08:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=eywNccRR4qny4NNzicnVjOF/P+BdyhcNqdHnWZuX/CPt48NFsNnH+Jb+3bZYx7i3RybbnY2Uq8JhLlCELH+aofDgmiYYitdL0oIEe/kECNZKab6fuH5tOQ4+2k837CJIeXPcHIUyNeZ5uZZQPdYaKSOIOvPw3SvcA6TL/sNSh+U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=MSUOB+HqotSWxqrqFClqSOTN8Z0pIb06SholeDTct2mNMGE/MCozSgOEFEGNEgKbD+ygws5Thyid8VEvBM4E0bBccYMCalTsIg+tY2hiSdH46p46fDpMY2q+zkTEz9jhvu/Y4vupD1X1shiF4vr22AWKjKOexxqQbScilst+5Ys=
Received: by 10.142.72.21 with SMTP id u21mr273991wfa.1181048902956;
        Tue, 05 Jun 2007 06:08:22 -0700 (PDT)
Received: by 10.143.166.17 with HTTP; Tue, 5 Jun 2007 06:08:22 -0700 (PDT)
Message-ID: <c68e39170706050608s7dd2823o1af982ee60335c11@mail.gmail.com>
Date: Tue, 5 Jun 2007 09:08:22 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Should I synchronize searching to cache the IndexSearcher?
In-Reply-To: <F60407925D044842B7E21677C8B8CE2818C526BD@fafnir.intra.dmc.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <F60407925D044842B7E21677C8B8CE2818C526BD@fafnir.intra.dmc.de>
X-Google-Sender-Auth: a59fbb9f741c11a5
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/5/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
> In the docs it says that I should cache the IndexSearcher for best
> performance, and not build a new one for each query.
>
> The problem is that when I want to switch to a new index, I would have to
> synchronize my search() method while my update check runs (which is also
> synchronized), so searching and switching to a new index never happen at =
the
> same time.

You only have to synchronize handing out the searcher to another query
thread... the search method itself shouldn't need to be synchronized.
When a new searcher is opened, it can be handed to new request threads
while old request threads finish up with the old searcher... after the
old searcher is no longer used, close it (requires ref counting).

Check out how Solr does it: SolrCore.getSearcher() / registerSearcher()

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 13:38:20 2007
Return-Path: <java-user-return-28486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90463 invoked from network); 5 Jun 2007 13:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 13:38:18 -0000
Received: (qmail 19652 invoked by uid 500); 5 Jun 2007 13:38:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19617 invoked by uid 500); 5 Jun 2007 13:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19603 invoked by uid 99); 5 Jun 2007 13:38:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 06:38:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of hans-christian.stadler@psi.ch designates 129.129.191.54 as permitted sender)
Received: from [129.129.191.54] (HELO MAILSEND02.psi.ch) (129.129.191.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 06:38:10 -0700
Received: from pc5443.psi.ch ([129.129.195.206]) by MAILSEND02.psi.ch with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 5 Jun 2007 15:37:48 +0200
From: Stadler Hans-Christian <hans-christian.stadler@psi.ch>
Organization: PSI
To: java-user@lucene.apache.org
Subject: Retrieving field names from an index
Date: Tue, 5 Jun 2007 15:37:47 +0200
User-Agent: KMail/1.9.1
References: <465C4241.1080501@yahoo.de> <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B6@emss10m02.us.lmco.com>
In-Reply-To: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B6@emss10m02.us.lmco.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706051537.48033.hans-christian.stadler@psi.ch>
X-OriginalArrivalTime: 05 Jun 2007 13:37:48.0333 (UTC) FILETIME=[B4B8ADD0:01C7A776]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

how would I efficently retrieve the names of all possible fields present in an index?

One way would be to iterate over all terms and extract the field names, but it doesn't
look like this method is efficient for large indices.

Murphy for president!
HC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 14:24:40 2007
Return-Path: <java-user-return-28487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6153 invoked from network); 5 Jun 2007 14:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 14:24:38 -0000
Received: (qmail 50740 invoked by uid 500); 5 Jun 2007 14:24:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50708 invoked by uid 500); 5 Jun 2007 14:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50697 invoked by uid 99); 5 Jun 2007 14:24:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 07:24:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 07:24:29 -0700
Received: by ug-out-1314.google.com with SMTP id m2so194621uge
        for <java-user@lucene.apache.org>; Tue, 05 Jun 2007 07:24:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Y2PSzklH/bnnXGMQ7bKwl788xJnOZP8WK/5Q5bXAAa8l/gFOc4kLPC+PAojIOWA6rSMnfwcDyv36WjM57z7AUm/ydyEx79L04pxx+BePVNkh/NH9S48MXNDbBJ97LLFsnp9xKQirTsqXH2H5Wi91/3QUjcALu40344Lm1TM/WP8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LDrhjLSy34MNZclpqrqowdZcM89+5g+Y/NoIucfCPGpaJ24nRi1z+Uw+zH78xxXPDgytsixoV9U6gNqgiREgwalYuVJSEDVTSVHUdpucQhrnzD7iPkGCDcV3K6+YvPX9wbq6t5Lh2uXvdNAR1jBXwVlfxxPRcp2vETgA1CztI5g=
Received: by 10.82.111.8 with SMTP id j8mr8975204buc.1181053447546;
        Tue, 05 Jun 2007 07:24:07 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 5 Jun 2007 07:24:07 -0700 (PDT)
Message-ID: <359a92830706050724n44036482t3c8876c1b2181186@mail.gmail.com>
Date: Tue, 5 Jun 2007 10:24:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieving field names from an index
In-Reply-To: <200706051537.48033.hans-christian.stadler@psi.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14264_22238538.1181053447514"
References: <465C4241.1080501@yahoo.de>
	 <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B6@emss10m02.us.lmco.com>
	 <200706051537.48033.hans-christian.stadler@psi.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14264_22238538.1181053447514
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Would IndexReader.getFieldNames work?

Erick

On 6/5/07, Stadler Hans-Christian <hans-christian.stadler@psi.ch> wrote:
>
> Hi,
>
> how would I efficently retrieve the names of all possible fields present
> in an index?
>
> One way would be to iterate over all terms and extract the field names,
> but it doesn't
> look like this method is efficient for large indices.
>
> Murphy for president!
> HC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14264_22238538.1181053447514--

From java-user-return-28488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 14:25:26 2007
Return-Path: <java-user-return-28488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6399 invoked from network); 5 Jun 2007 14:25:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 14:25:25 -0000
Received: (qmail 52842 invoked by uid 500); 5 Jun 2007 14:25:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52801 invoked by uid 500); 5 Jun 2007 14:25:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52789 invoked by uid 99); 5 Jun 2007 14:25:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 07:25:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 07:25:17 -0700
Received: by an-out-0708.google.com with SMTP id b20so420172ana
        for <java-user@lucene.apache.org>; Tue, 05 Jun 2007 07:24:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BJKnD0BVMrQ7rixMtPCK6h/nxObR4GOedKhiniMKS+DSJtEhRo7PbXSi4g/MgeQBastRlkXcLQ0uPlN7wQfRyzzyjVqh7yZKkMfvr+RwN35WsCWkYz7E5aybL2xVD9a/zaXeWvuuSvHAEq+1qT9SEk8VREZ7n81DxLr3wBKWan0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mnBNWsNwpTFW6YmEqGRK1BRXupWiVHyCc7Fd1wHg/UzCL+OLpNT4PPiuIXKcHbjH/JC1e35WM0Y4xG2duYxfIKGzy83ePln4K/0/Egv1tHFNgmhm4b4RFJ8gLD5PGn9ZnfHtR89+DD0ssTuEBBdRwXxPQgdOLotrv3OETQsYrKQ=
Received: by 10.100.42.7 with SMTP id p7mr3286357anp.1181053496462;
        Tue, 05 Jun 2007 07:24:56 -0700 (PDT)
Received: by 10.100.11.17 with HTTP; Tue, 5 Jun 2007 07:24:56 -0700 (PDT)
Message-ID: <34b8543c0706050724u58aec679vf822bd50c5bcae69@mail.gmail.com>
Date: Tue, 5 Jun 2007 17:54:56 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieving field names from an index
In-Reply-To: <200706051537.48033.hans-christian.stadler@psi.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26881_30184980.1181053496417"
References: <465C4241.1080501@yahoo.de>
	 <A79A2D741A822A46B9F0BFF4F4585DDB3EC4B6@emss10m02.us.lmco.com>
	 <200706051537.48033.hans-christian.stadler@psi.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26881_30184980.1181053496417
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
you can get them from searcher, if documents in your index are the same

Enumeration fields = searcher.doc(0).fields();



On 6/5/07, Stadler Hans-Christian <hans-christian.stadler@psi.ch> wrote:
>
> Hi,
>
> how would I efficently retrieve the names of all possible fields present
> in an index?
>
> One way would be to iterate over all terms and extract the field names,
> but it doesn't
> look like this method is efficient for large indices.
>
> Murphy for president!
> HC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/

------=_Part_26881_30184980.1181053496417--

From java-user-return-28489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 14:35:53 2007
Return-Path: <java-user-return-28489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9356 invoked from network); 5 Jun 2007 14:35:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 14:35:53 -0000
Received: (qmail 72245 invoked by uid 500); 5 Jun 2007 14:35:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72217 invoked by uid 500); 5 Jun 2007 14:35:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72206 invoked by uid 99); 5 Jun 2007 14:35:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 07:35:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 07:35:44 -0700
Received: from mailhyd1.hyd.deshaw.com (mailhyd1-hba1.hyd.deshaw.com [149.77.160.72])
 by master.hyd.deshaw.com (8.13.7/8.13.7/2.0.kim.desco.357) with ESMTP id l55EZKUS027611
 for <java-user@lucene.apache.org>; Tue, 5 Jun 2007 20:05:21 +0530 (IST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Maintain a backup index
Date: Tue, 5 Jun 2007 20:05:19 +0530
Message-ID: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4BCA@mailhyd1.hyd.deshaw.com>
In-Reply-To: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4BBB@mailhyd1.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Maintain a backup index
Thread-Index: AcenMl5/kCaeAgceRYq7OetX3RfttAATECbA
References: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4BBB@mailhyd1.hyd.deshaw.com>
From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,  Any advice on this would be of great help.

Thanks

-----Original Message-----
From: Rajendranath, Divya=20
Sent: Tuesday, June 05, 2007 10:59 AM
To: java-user@lucene.apache.org
Subject: Maintain a backup index

We want to maintain a backup of our production index directory. We are
using Lucene 2.0 v. The normal way to have backup is to run a small
reindex script every 5 mins, which would pick up only those files which
were modified in that time frame and reindex them. This is one way to
rebuild and update a backup index from a master index. Is there any
other simpler way in Lucene v2.0, which would help us do the same task?
please let us know.
Please help
Thanks !


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 14:51:23 2007
Return-Path: <java-user-return-28490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14138 invoked from network); 5 Jun 2007 14:51:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 14:51:22 -0000
Received: (qmail 2555 invoked by uid 500); 5 Jun 2007 14:51:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2515 invoked by uid 500); 5 Jun 2007 14:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2504 invoked by uid 99); 5 Jun 2007 14:51:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 07:51:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 07:51:13 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1642A7BC@mailer.syr.edu>; Tue, 5 Jun 2007 10:50:51 -0400
Message-ID: <466577F8.7080506@syr.edu>
Date: Tue, 05 Jun 2007 10:49:28 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Maintain a backup index
References: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4BBB@mailhyd1.hyd.deshaw.com> <A1C9CFAF5B94574892B0B5AD7874E8BE010E4BCA@mailhyd1.hyd.deshaw.com>
In-Reply-To: <A1C9CFAF5B94574892B0B5AD7874E8BE010E4BCA@mailhyd1.hyd.deshaw.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Divya,

The Lucene library itself provides no support for "backup".

You might be interested in the Solr project[1], which extends Lucene,
and which automates index replication.  From the Solr Introduction /
Features page[2]:

  Replication
    *  Efficient distribution of index parts that have changed via rsync
transport
    * Pull strategy allows for easy addition of searchers
    * Configurable distribution interval allows tradeoff between
timeliness and cache utilization

[1] http://lucene.apache.org/solr/index.html
[2] http://lucene.apache.org/solr/features.html

Rajendranath, Divya wrote:
> We want to maintain a backup of our production index directory. We are
> using Lucene 2.0 v. The normal way to have backup is to run a small
> reindex script every 5 mins, which would pick up only those files which
> were modified in that time frame and reindex them. This is one way to
> rebuild and update a backup index from a master index. Is there any
> other simpler way in Lucene v2.0, which would help us do the same task?
> please let us know.

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 18:05:07 2007
Return-Path: <java-user-return-28491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82358 invoked from network); 5 Jun 2007 18:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 18:05:05 -0000
Received: (qmail 2040 invoked by uid 500); 5 Jun 2007 18:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1846 invoked by uid 500); 5 Jun 2007 18:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1834 invoked by uid 99); 5 Jun 2007 18:05:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 11:05:01 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of hilton.campbell@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 11:04:57 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1238807nzc
        for <java-user@lucene.apache.org>; Tue, 05 Jun 2007 11:04:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=NL2HQNL0kfehQgK5/nPlkw5UjGU+qUFUA4ppz9j7KoSNeqSQGvQImQKeoTKkQB2cQSmPY+UjA9PlzMMBFv7lb7e7L3dmaV+NusTYF/dszRSRUcu6a95OM7J3MgHGWKDtUIqEG32stBFz6V8dsBL3AUld/4mLz3p85EsbTRaSebc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=smIzsycH7G/5n7ANBqUxAVevNWwQnQZ3pSmiJ4g3cl/foKX4521dSR08Gu0MFOMpQZysf5MhAqb72LeC3UP5B7ucYXyU4ivnGVSC/fQKFIhNmXwqAm5MxvVO5ZPUKSvYL3Fh5lo9p6IEUSQfrBXEnE2eHs4Ur89DLfp2rQ3YcfI=
Received: by 10.114.88.1 with SMTP id l1mr6203518wab.1181066673834;
        Tue, 05 Jun 2007 11:04:33 -0700 (PDT)
Received: by 10.114.200.11 with HTTP; Tue, 5 Jun 2007 11:04:33 -0700 (PDT)
Message-ID: <8d6059bb0706051104o32fd328ci42a8744db959f44c@mail.gmail.com>
Date: Tue, 5 Jun 2007 12:04:33 -0600
From: "Hilton Campbell" <hilton.campbell@gmail.com>
To: java-user@lucene.apache.org
Subject: How can I search over all documents NOT in a certain subset?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26638_21808257.1181066673812"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26638_21808257.1181066673812
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all,

In my application I want to perform a search over all the documents that are
NOT in a certain subset, and I'm not sure how I should do it.

Specifically, the application performs a search and the top N results are
shown to the user.  The user may then opt to see the next top N results.  By
the time the user chooses to see the next N results, however, there may be
new, highly-relevant documents in the index (as indexing is occurring
concurrently).  So instead of just skipping to the next N, I need to perform
a new search and get the top N that haven't been seen yet.  Is anyone aware
of an efficient way to implement this?

I can think of at least one way: I can keep track of the documents that have
been seen and iterate through all the hits, skipping those that have already
been seen.  I just want to see if there isn't a better way that doesn't
iterate through potentially hundreds of already seen hits, or if anyone has
any pointers on an efficient implementation of this idea.

Thanks!
Hilton Campbell

------=_Part_26638_21808257.1181066673812--

From java-user-return-28492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 20:20:26 2007
Return-Path: <java-user-return-28492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22398 invoked from network); 5 Jun 2007 20:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 20:20:23 -0000
Received: (qmail 98023 invoked by uid 500); 5 Jun 2007 20:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97987 invoked by uid 500); 5 Jun 2007 20:20:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97976 invoked by uid 99); 5 Jun 2007 20:20:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 13:20:19 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of luz290@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 13:20:15 -0700
Received: by wr-out-0506.google.com with SMTP id i4so1190392wra
        for <java-user@lucene.apache.org>; Tue, 05 Jun 2007 13:19:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=DCYBPsQ1fIuXh9rSbeTx7XfM3rwKGThPutCA8tvzoKMWmRmQAXITDwaf9nNgCSkYlxjnGFFzkUqzIPFXJ1C22XI5IkaZQzZqrk4of1fy+wtojhHKNbPrbo3wBeO4HVOU970jyQ81g2or/RsLCJjiQggr3JzXIcfCiX2sWS3dHo0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=plKmmy7w/F2z4IxkMH8xLqImpTL8AqWZknarCR/vRWlAo0syuEoNYWcqv3pd/P72dwKa+B+oZx2kD1YedKZG+mW6jTBCQ1Iqu4TQPdthrxhihsiTbVNJAP+AxHZt3gAkOm7POKVvw47qDt9VdOZWAlcqYra1xgUmYXimJaJxhG8=
Received: by 10.90.115.4 with SMTP id n4mr5593069agc.1181074794231;
        Tue, 05 Jun 2007 13:19:54 -0700 (PDT)
Received: by 10.90.96.17 with HTTP; Tue, 5 Jun 2007 13:19:54 -0700 (PDT)
Message-ID: <cec089090706051319x37b298c4h1bf46711e0872eae@mail.gmail.com>
Date: Tue, 5 Jun 2007 15:19:54 -0500
From: "lucene user" <luz290@gmail.com>
To: java-user@lucene.apache.org
Subject: Whats the best way to filter based on a function of an indexed term or field value
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19472_21984265.1181074794209"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19472_21984265.1181074794209
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We have a large and growing number of articles (< 60k but growing) and we
want to divide
articles from some sources into groups so that we can do queries against
just members of
one or two groups and not find articles from publications that are outside
these publication
groups.

We would like to be able to move things from one group to another but this
is far less
important than blinding speed.

What are the best ways of doing this? What experience do others have doing
this sort of thing?
Below please find all of my ideas/suspicions - but dont assume I am correct
about any of this.
If I knew the answer, I would not be asking! Feel free to ignore the below
and just tell me how
you handle this sort of issue.

Query based on the source name

Each article is tagged which the name of its publication.
We use a big OR query listing all the allowed publications.

Advantages
Which sources belong to which packages can be maintained in our database,
and eaisily changed.

Disadvantages
With hundreds on sources in each package the queries will be very long.
Slow performance, possible "Too Many Clauses" Error.

Query based on the package name
Instead of Taging the documents with source names, use the package names.

Advantages
Should be very fast at search time.
Can search on any boolean combination of packages
Very easy to implement.

Disadvantages
Documents would have to be assigned to packages at the time they are added
to the index.
This assignment could not be changed without deleting and re-adding the
document to the index.
This is not practical because a huge number of documents would have to be
re-indexed just
because one source was moved to a different package.

Use a Filtered Query
A Filtered Query combines any Query with a Filter object which independently
restricts
which documents will appear in the output. A Filter takes an IndexReader as
input and
produces a BitSet as output. The output has one bit for each document in the
index,
those bits which are 'on' represent documents that are allowed in the output

(provided they are also selected by the query).

Advantages
This is likely to work. It is the preferred method of doing such things.

Disadvantages
It requires you to make a full pass through the entire index to set all the
bits,
rather than operating on documents as they are encountered.
With a large archive, that bitset will take up quite a bit of memory.

Use FilterIndexReader
A Class FilterIndexReader is provided in Lucene to make it easy to override
the
index reader. One would think that this would allow you to simply skip
documents
you don't want whenever they are encountered in the index.

For my purposes the FilterIndexReader will contain a HashSet of source names
that
will be permitted in the query. As each document is encountered, we will
extract its
source name from the index and see if it is present in the HashSet, if not
we will go
on to the next document.

An index reader has 3 nested classes that one can override within the
FilterIndexReader.

termEnum - lists distinct terms in the index, with the number of documents
each appears in.
termDocs - lists the terms in the index, with the id number of each document
they appear in.
termPositions - lists the terms, with there document numbers and word
position of each occurance.

I modified termDocs and termPositions to skip to the next document whenever
they would
otherwise settle on a document whos source name is not in the hash set.

But I did not modify termEnum and its document Frequency.
The only way to get the correct document frequency would be to iterate
through all the
documents and see which ones will be included. This would be just almost bad
as using a Filter.

Advantages
This method provides a way to include only documents from a query time
selection of sources.
It is efficent because an in-memory hashtable is used for the look up.
It skips documents as they are encountered, rather than having to iterate
through the
whole index at once.

Disadvantages
It didn't work - although my termDocs and termPositions objects ran, and
skiped the
unwanted documents, those documents still appeared in the result set.

------=_Part_19472_21984265.1181074794209--

From java-user-return-28493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 20:51:20 2007
Return-Path: <java-user-return-28493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74592 invoked from network); 5 Jun 2007 20:51:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 20:51:18 -0000
Received: (qmail 64795 invoked by uid 500); 5 Jun 2007 20:51:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64457 invoked by uid 500); 5 Jun 2007 20:51:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64446 invoked by uid 99); 5 Jun 2007 20:51:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 13:51:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 13:51:09 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1642D83C@mailer.syr.edu>; Tue, 5 Jun 2007 16:50:48 -0400
Message-ID: <4665CC5E.5010000@syr.edu>
Date: Tue, 05 Jun 2007 16:49:34 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How can I search over all documents NOT in a certain subset?
References: <8d6059bb0706051104o32fd328ci42a8744db959f44c@mail.gmail.com>
In-Reply-To: <8d6059bb0706051104o32fd328ci42a8744db959f44c@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Hilton,

Hilton Campbell wrote:
> Hello all,
> 
> In my application I want to perform a search over all the documents
> that are NOT in a certain subset, and I'm not sure how I should do
> it.
> 
> Specifically, the application performs a search and the top N results
> are shown to the user. The user may then opt to see the next top N 
> results. By the time the user chooses to see the next N results,
> however, there may be new, highly-relevant documents in the index (as
> indexing is occurring concurrently). So instead of just skipping to
> the next N, I need to perform a new search and get the top N that
> haven't been seen yet. Is anyone aware of an efficient way to
> implement this?
> 
> I can think of at least one way: I can keep track of the documents 
> that have been seen and iterate through all the hits, skipping those 
> that have already been seen. I just want to see if there isn't a 
> better way that doesn't iterate through potentially hundreds of 
> already seen hits, or if anyone has any pointers on an efficient
> implementation of this idea.

Conceptually (caveat: untested), you could:

1. Extend Filter[1] (call it DejaVuFilter) to hold a BitSet per
IndexReader.  The BitSet would hold one bit per doc[2], each initialized
to true.

2. Unset a DejaVuFilter instance's bit for each of your top N docs by
walking the TopDocs returned by Searcher.search(Query,Filter,int)[3].
Initially, you could pass in null for the Filter, and then for all
following calls, an instance of DejaVuFilter.

3. Repeat step #2 as many times as necessary.

Steve

[1]
<http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/search/Filter.html>
[2]
<http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/index/IndexReader.html#maxDoc()>
[3]
<http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/search/Searcher.html#search(org.apache.lucene.search.Query,%20org.apache.lucene.search.Filter,%20int)>

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 05 21:31:26 2007
Return-Path: <java-user-return-28494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82117 invoked from network); 5 Jun 2007 21:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2007 21:31:25 -0000
Received: (qmail 29543 invoked by uid 500); 5 Jun 2007 21:31:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29496 invoked by uid 500); 5 Jun 2007 21:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29481 invoked by uid 99); 5 Jun 2007 21:31:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 14:31:22 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jun 2007 14:31:17 -0700
Received: by ug-out-1314.google.com with SMTP id m2so322568uge
        for <java-user@lucene.apache.org>; Tue, 05 Jun 2007 14:30:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K8c9ieWtKDFxAMGkUdlVcTvtx+NUbexlFBzciwXuC+/ZdByIwYX3Zc8AYHu89/vXFPN8/FR+10yV7YYjd7V3OD4/GgfoQEofF5BZpck8Ft5CjMhOygxyX9qf0YUs3H5NTgBbTnKx7CFVFd2Rasm+ipem1hkkFVSYRctJXenxSr0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NUSiTcUl35FN2RE3/tF20B2xsgRW7fenqw6jeNvk6EZeDVOauRs93olUmPgzaA14TSbMIukHzqMRlX+52QXqf5Wy2GjYG6+LlipHVLROVkD2Eoyqi5YXah5Kvj6uRW0GY9wRwp6/JPu6VDgnPOmjuLHUYU/cF+qa4RyYuYMkGK0=
Received: by 10.82.160.2 with SMTP id i2mr9642962bue.1181079052318;
        Tue, 05 Jun 2007 14:30:52 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 5 Jun 2007 14:30:52 -0700 (PDT)
Message-ID: <359a92830706051430p38d93131o10e04d25bfa180af@mail.gmail.com>
Date: Tue, 5 Jun 2007 17:30:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Whats the best way to filter based on a function of an indexed term or field value
In-Reply-To: <cec089090706051319x37b298c4h1bf46711e0872eae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18357_22154917.1181079052282"
References: <cec089090706051319x37b298c4h1bf46711e0872eae@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18357_22154917.1181079052282
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd think about the filter option first, see below


On 6/5/07, lucene user <luz290@gmail.com> wrote:
>
> We have a large and growing number of articles (< 60k but growing) and we
> want to divide
> articles from some sources into groups so that we can do queries against
> just members of
> one or two groups and not find articles from publications that are outside
> these publication
> groups.
>
> We would like to be able to move things from one group to another but this
> is far less
> important than blinding speed.
>
> What are the best ways of doing this? What experience do others have doing
> this sort of thing?
> Below please find all of my ideas/suspicions - but dont assume I am
> correct
> about any of this.
> If I knew the answer, I would not be asking! Feel free to ignore the below
> and just tell me how
> you handle this sort of issue.
>
> Query based on the source name
>
> Each article is tagged which the name of its publication.
> We use a big OR query listing all the allowed publications.
>
> Advantages
> Which sources belong to which packages can be maintained in our database,
> and eaisily changed.
>
> Disadvantages
> With hundreds on sources in each package the queries will be very long.
> Slow performance, possible "Too Many Clauses" Error.



I was surprised by how quickly Lucene handles this. You can always bump
the TooManyClauses limit. That said, I'm not too keen on this solution...


Query based on the package name
> Instead of Taging the documents with source names, use the package names.
>
> Advantages
> Should be very fast at search time.
> Can search on any boolean combination of packages
> Very easy to implement.
>
> Disadvantages
> Documents would have to be assigned to packages at the time they are added
> to the index.
> This assignment could not be changed without deleting and re-adding the
> document to the index.
> This is not practical because a huge number of documents would have to be
> re-indexed just
> because one source was moved to a different package.


Pretty much sums it up for me.


Use a Filtered Query
> A Filtered Query combines any Query with a Filter object which
> independently
> restricts
> which documents will appear in the output. A Filter takes an IndexReader
> as
> input and
> produces a BitSet as output. The output has one bit for each document in
> the
> index,
> those bits which are 'on' represent documents that are allowed in the
> output
>
> (provided they are also selected by the query).
>
> Advantages
> This is likely to work. It is the preferred method of doing such things.
>
> Disadvantages
> It requires you to make a full pass through the entire index to set all
> the
> bits,
> rather than operating on documents as they are encountered.
> With a large archive, that bitset will take up quite a bit of memory.




First, I don't think the space requirement is as large as you suspect.
It's roughly (# docs / 8) bytes. So 60K is a paltry number of bytes.
1M docs isn't prohibitive either, do you expect the size to get huge?
Plus, these could be singletons to conserve space amongst many
threads (Does CachingWrapperFilter do this already???).

Second, you can build up your filters beforehand and store them, say
at searcher startup time. See CachingWrapperFilter (?) or roll your own.

Third, assembling filters surprised me with how fast it runs, I don't think
the penalty is as great as you fear.

Fourth, since it's supported, you can do it quickly and then
you'd be able to get some performance numbers and only if
performance is unsatisfactory do you need to go to a more
complex solution....



Use FilterIndexReader
> A Class FilterIndexReader is provided in Lucene to make it easy to
> override
> the
> index reader. One would think that this would allow you to simply skip
> documents
> you don't want whenever they are encountered in the index.
>
> For my purposes the FilterIndexReader will contain a HashSet of source
> names
> that
> will be permitted in the query. As each document is encountered, we will
> extract its
> source name from the index and see if it is present in the HashSet, if not
> we will go
> on to the next document.
>
> An index reader has 3 nested classes that one can override within the
> FilterIndexReader.
>
> termEnum - lists distinct terms in the index, with the number of documents
> each appears in.
> termDocs - lists the terms in the index, with the id number of each
> document
> they appear in.
> termPositions - lists the terms, with there document numbers and word
> position of each occurance.
>
> I modified termDocs and termPositions to skip to the next document
> whenever
> they would
> otherwise settle on a document whos source name is not in the hash set.
>
> But I did not modify termEnum and its document Frequency.
> The only way to get the correct document frequency would be to iterate
> through all the
> documents and see which ones will be included. This would be just almost
> bad
> as using a Filter.
>
> Advantages
> This method provides a way to include only documents from a query time
> selection of sources.
> It is efficent because an in-memory hashtable is used for the look up.
> It skips documents as they are encountered, rather than having to iterate
> through the
> whole index at once.


Without a clue why it didn't work <G>, this may not be as efficient as
you think, since extracting the string you hash can be expensive. See
the caution about calling IndexReader.document()(?) in inner loops. And
wouldn't a hash table be more space-wasting than a filter?



Disadvantages
> It didn't work - although my termDocs and termPositions objects ran, and
> skiped the
> unwanted documents, those documents still appeared in the result set.
>


 Kudos for doing as much homework as you did before
posting, it's nice to see.

Perhaps others will chime in with other responses..


Best
Erick

------=_Part_18357_22154917.1181079052282--

From java-user-return-28495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 07:48:42 2007
Return-Path: <java-user-return-28495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69635 invoked from network); 6 Jun 2007 07:48:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 07:48:40 -0000
Received: (qmail 26004 invoked by uid 500); 6 Jun 2007 07:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25967 invoked by uid 500); 6 Jun 2007 07:48:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25956 invoked by uid 99); 6 Jun 2007 07:48:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 00:48:35 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.147.97.92] (HELO web63707.mail.re1.yahoo.com) (69.147.97.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Jun 2007 00:48:31 -0700
Received: (qmail 10780 invoked by uid 60001); 6 Jun 2007 07:48:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=I+PIbRJXzMRos5+du/4APY0KGLD561WPijFY31Rwns/5fZdIoOGPemiC8oJwgjlOfuKPznoDEywpuwNB9XJGEgRi7qszAcNYl4vXTWjuSQlXEp5Otcer9eEt64aRRv/xk6zbD9t+iTXPw+fuBLOarcjFlP7nYD1PLEBtYNC5mlQ=;
X-YMail-OSG: DXe5NhgVM1mqitTF1NHXBjPnFpxY_P.ODP2mU8eJRUYEwqe0m6swPSbYaC9Eb4ar.hL3bbVwF_g7ASfEaIzxRu0MfB8bSB74FzBh9ZhsT85mB5rBDolnEA--
Received: from [80.98.146.223] by web63707.mail.re1.yahoo.com via HTTP; Wed, 06 Jun 2007 00:48:10 PDT
Date: Wed, 6 Jun 2007 00:48:10 -0700 (PDT)
From: Tim Smith <forusewith@yahoo.com>
Subject: I need 'cat???' to match 'cat' again!
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <492150.10642.qm@web63707.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

How can I restore the behavior of the old
WildcardQuery under 2.1?
I badly need 'cat???' to match 'cat' again just like
in the older versions.

I could modify my istance of lucene by removing those
"new" lines, but I don't want to maintain a custom
lucene package.

Please help!

Tim




Source: LUCENE-306
>
********************************************************************
> --- WildcardTermEnum.org	2004-05-11
11:42:10.000000000 -0400
> +++ WildcardTermEnum.java	2004-11-08
14:35:14.823610500 -0500
> @@ -132,6 +132,10 @@
>              }
>              else
>              {
> +	      //to prevent "cat" matches "ca??"
> +	      if(wildchar == WILDCARD_CHAR){
> +		return false;
> +	      }	      
>                // Look at the next character
>                wildcardSearchPos++;
>              }
>
**********************************************************************



 
____________________________________________________________________________________
Sucker-punch spam with award-winning protection. 
Try the free Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/features_spam.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 14:26:33 2007
Return-Path: <java-user-return-28496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59661 invoked from network); 6 Jun 2007 14:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 14:26:32 -0000
Received: (qmail 34689 invoked by uid 500); 6 Jun 2007 14:26:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34441 invoked by uid 500); 6 Jun 2007 14:26:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34425 invoked by uid 99); 6 Jun 2007 14:26:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 07:26:27 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 07:26:21 -0700
Received: by ug-out-1314.google.com with SMTP id m2so488068uge
        for <java-user@lucene.apache.org>; Wed, 06 Jun 2007 07:26:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jyEqVyEjECgrLYq4Q7DvdMmcAuAGXIjEaJcgsNqxQvhM8CzvEqxzXtj5ram3sDlacfciIlfvnlA5y1cOpwSxnJjQJebUZEN0v+txyAsUhW3ktZp9DpuaNFqah+T5fDDph+fQ1YcktP1CYw2mO9GhDI14DPbfeaztD/KxBYBlKTQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SegIMezQnImFtIpK35AcXSpqIW7G3Whev9b7mC8rXQYx/wgwArLz4XpzlT0AtCOq03Hk1Y8KuK0vKk1iWmRpMXlUnoJjPUQKU71HL//EhYNGoiaNncdEKewvq8xwtlAdI2sLSxaaYTUrLuUnmyAFtQO8kh6C1W7uoU476qrj6cw=
Received: by 10.82.175.17 with SMTP id x17mr1106296bue.1181139959164;
        Wed, 06 Jun 2007 07:25:59 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Wed, 6 Jun 2007 07:25:59 -0700 (PDT)
Message-ID: <359a92830706060725x6c54e5f4s32773e28e71b999a@mail.gmail.com>
Date: Wed, 6 Jun 2007 10:25:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need 'cat???' to match 'cat' again!
In-Reply-To: <492150.10642.qm@web63707.mail.re1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23547_2295956.1181139959136"
References: <492150.10642.qm@web63707.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23547_2295956.1181139959136
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, having your application depend upon incorrect behavior
is...er...fraught.

It looks like what you really want is custom behavior for multiple
question marks, perhaps only with multiple question marks
at the end of your query?

If this is the case, I'd think about substituting splat (*) in this
case at query time. So you simply transform
cat??? to cat*....

If that doesn't satisfy your requirements, perhaps you could
post a more detailed explanation of what you're trying to
accomplish.

Best
Erick

On 6/6/07, Tim Smith <forusewith@yahoo.com> wrote:
>
> Hi!
>
> How can I restore the behavior of the old
> WildcardQuery under 2.1?
> I badly need 'cat???' to match 'cat' again just like
> in the older versions.
>
> I could modify my istance of lucene by removing those
> "new" lines, but I don't want to maintain a custom
> lucene package.
>
> Please help!
>
> Tim
>
>
>
>
> Source: LUCENE-306
> >
> ********************************************************************
> > --- WildcardTermEnum.org      2004-05-11
> 11:42:10.000000000 -0400
> > +++ WildcardTermEnum.java     2004-11-08
> 14:35:14.823610500 -0500
> > @@ -132,6 +132,10 @@
> >              }
> >              else
> >              {
> > +           //to prevent "cat" matches "ca??"
> > +           if(wildchar == WILDCARD_CHAR){
> > +             return false;
> > +           }
> >                // Look at the next character
> >                wildcardSearchPos++;
> >              }
> >
> **********************************************************************
>
>
>
>
>
> ____________________________________________________________________________________
> Sucker-punch spam with award-winning protection.
> Try the free Yahoo! Mail Beta.
> http://advision.webevents.yahoo.com/mailbeta/features_spam.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23547_2295956.1181139959136--

From java-user-return-28497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 14:54:02 2007
Return-Path: <java-user-return-28497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91912 invoked from network); 6 Jun 2007 14:54:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 14:54:01 -0000
Received: (qmail 13650 invoked by uid 500); 6 Jun 2007 14:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13603 invoked by uid 500); 6 Jun 2007 14:53:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13592 invoked by uid 99); 6 Jun 2007 14:53:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 07:53:57 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 07:53:52 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.16433CD5@mailer.syr.edu>; Wed, 6 Jun 2007 10:53:31 -0400
Message-ID: <4666CA22.3050401@syr.edu>
Date: Wed, 06 Jun 2007 10:52:18 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: I need 'cat???' to match 'cat' again!
References: <492150.10642.qm@web63707.mail.re1.yahoo.com>
In-Reply-To: <492150.10642.qm@web63707.mail.re1.yahoo.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Tim,

Tim Smith wrote:
> How can I restore the behavior of the old
> WildcardQuery under 2.1?
> I badly need 'cat???' to match 'cat' again just like
> in the older versions.

The behavior you want was last sighted in Java Lucene four releases ago
(v1.4.3).

See Doug Cutting's response to a similar request:

<http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200602.mbox/%3C43FC80B3.5090606@apache.org%3E>

In short, although the behavior you want might eventually be restored in
future releases through diligence on your part, it would almost
certainly have to be expressed using a different syntax.

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 17:48:05 2007
Return-Path: <java-user-return-28498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76511 invoked from network); 6 Jun 2007 17:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 17:48:03 -0000
Received: (qmail 49687 invoked by uid 500); 6 Jun 2007 17:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49642 invoked by uid 500); 6 Jun 2007 17:47:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49631 invoked by uid 99); 6 Jun 2007 17:47:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 10:47:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 10:47:53 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HvzbZ-0007Qt-Di
	for java-user@lucene.apache.org; Wed, 06 Jun 2007 10:47:33 -0700
Message-ID: <10993751.post@talk.nabble.com>
Date: Wed, 6 Jun 2007 10:47:33 -0700 (PDT)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: issues with optimizer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I'm running into the "WARN | Compass Scheduled Optimizer | AdaptiveOptimizer
| ne.optimizer.AdaptiveOptimizer 104 | Failed to obtain lock on sub-index
[book], will do it next time."  messages more frequently, most likely due to
the lucene index getting enormous. The adaptive optimizer is scheduled to
run every 10 seconds. My application seems to be crashing (due to stalling
for waiting on the lock via the optimizer).

Are there any best practices on the optimizer for very large indexes?
Otherwise is there a better way to manage the lucene indexes such that as it
grows, the optimizer's optimization time doesn't grow with it?

Thanks in advance!

-los 
-- 
View this message in context: http://www.nabble.com/issues-with-optimizer-tf3879377.html#a10993751
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 18:07:49 2007
Return-Path: <java-user-return-28499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85947 invoked from network); 6 Jun 2007 18:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 18:07:48 -0000
Received: (qmail 97691 invoked by uid 500); 6 Jun 2007 18:07:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97641 invoked by uid 500); 6 Jun 2007 18:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97628 invoked by uid 99); 6 Jun 2007 18:07:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 11:07:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [168.144.250.211] (HELO xsmtp01.mail2web.com) (168.144.250.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 11:07:40 -0700
Received: from [10.5.14.9] (helo=exfe04.ad2.softcom.biz)
	by xsmtp01.mail2web.com with esmtp (Exim 4.63)
	(envelope-from <anna@sendmemobile.com>)
	id 1Hvzuf-00088m-5j
	for java-user@lucene.apache.org; Wed, 06 Jun 2007 14:07:19 -0400
Received: from CL4EXBE03.ad2.softcom.biz ([10.5.13.16]) by exfe04.ad2.softcom.biz with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 6 Jun 2007 14:09:06 -0400
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7A865.A90B9800"
Date: Wed, 6 Jun 2007 14:06:24 -0400
Message-ID: <18D8E943D728594C864C7AA427FDC6220FA9C975@CL4EXBE03.ad2.softcom.biz>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case Insensitive but not Tokenized
Thread-Index: AceoZWT8sLFjEUHrT3ay049llaBm1g==
From: "Anna Putnam" <anna@sendmemobile.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Jun 2007 18:09:06.0072 (UTC) FILETIME=[C56C4980:01C7A865]
X-Spam-Relays-External: [ ip=10.5.14.9 rdns= helo=exfe04.ad2.softcom.biz 
	by=xsmtp01.mail2web.com ident= envfrom=anna@sendmemobile.com intl=0 
	id=1Hvzuf-00088m-5j auth= ] [ ip=10.5.13.16 rdns= 
	helo=CL4EXBE03.ad2.softcom.biz by=exfe04.ad2.softcom.biz ident= 
	envfrom= intl=0 id= auth= ]
X-Spam-Relays-Internal: 
X-Spam-Relays-Untrusted: 
X-Spam-Relays-Trusted: [ ip=10.5.14.9 rdns= helo=exfe04.ad2.softcom.biz 
	by=xsmtp01.mail2web.com ident= envfrom=anna@sendmemobile.com intl=0 
	id=1Hvzuf-00088m-5j auth= ] [ ip=10.5.13.16 rdns= 
	helo=CL4EXBE03.ad2.softcom.biz by=exfe04.ad2.softcom.biz ident= 
	envfrom= intl=0 id= auth= ]
Subject: Case Insensitive but not Tokenized
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7A865.A90B9800
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am trying to implement a prefix query search where I want the
searching to be case insensitive but not tokenized (I want to preserve
exact phrases). =20

=20

For now, I am storing both the exact phrase (as is, for retrieval) and
the string lower-cased (to search against) with no analyzers in the
index.  When I search, I lower-case my query string and search against
my lower-cased index, I give the matching exact phrase back to the user.
This doesn't seem like the best approach but I can't seem to make it
work any other way.  Any suggestions?

=20

Thanks in advance.


------_=_NextPart_001_01C7A865.A90B9800--

From java-user-return-28500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 18:15:03 2007
Return-Path: <java-user-return-28500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89609 invoked from network); 6 Jun 2007 18:15:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 18:15:02 -0000
Received: (qmail 11762 invoked by uid 500); 6 Jun 2007 18:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11730 invoked by uid 500); 6 Jun 2007 18:14:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11719 invoked by uid 99); 6 Jun 2007 18:14:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 11:14:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 11:14:54 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DF99F5B76C; Wed,  6 Jun 2007 11:14:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 405847F403
	for <java-user@lucene.apache.org>; Wed,  6 Jun 2007 11:14:33 -0700 (PDT)
Date: Wed, 6 Jun 2007 11:14:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: issues with optimizer
In-Reply-To: <10993751.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0706061113410.9019@hal.rescomp.berkeley.edu>
References: <10993751.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I have no idea what it is you are asking ... it seems to be very compass
specifci .. perhaps you should be consulting a Compass User group?

: I'm running into the "WARN | Compass Scheduled Optimizer | AdaptiveOptimizer
: | ne.optimizer.AdaptiveOptimizer 104 | Failed to obtain lock on sub-index


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 18:25:24 2007
Return-Path: <java-user-return-28501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93080 invoked from network); 6 Jun 2007 18:25:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 18:25:22 -0000
Received: (qmail 31705 invoked by uid 500); 6 Jun 2007 18:25:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31656 invoked by uid 500); 6 Jun 2007 18:25:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31644 invoked by uid 99); 6 Jun 2007 18:25:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 11:25:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 11:25:14 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 478BD5B771; Wed,  6 Jun 2007 11:24:44 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8B6EA7F404
	for <java-user@lucene.apache.org>; Wed,  6 Jun 2007 11:24:44 -0700 (PDT)
Date: Wed, 6 Jun 2007 11:24:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Case Insensitive but not Tokenized
In-Reply-To: <18D8E943D728594C864C7AA427FDC6220FA9C975@CL4EXBE03.ad2.softcom.biz>
Message-ID: <Pine.LNX.4.58.0706061122540.9019@hal.rescomp.berkeley.edu>
References: <18D8E943D728594C864C7AA427FDC6220FA9C975@CL4EXBE03.ad2.softcom.biz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: For now, I am storing both the exact phrase (as is, for retrieval) and
: the string lower-cased (to search against) with no analyzers in the
: index.  When I search, I lower-case my query string and search against
: my lower-cased index, I give the matching exact phrase back to the user.
: This doesn't seem like the best approach but I can't seem to make it
: work any other way.  Any suggestions?

1) if you only ever return the exact string, then you only need to store
it and you don't need to store the lowercase version
2) if you only ever want to do case-insensitive searching, you only need
to index the lowercase field, and you dont' need to index the exact
string.
3) the KeywordTokenizer along with a LowerCaseFilter should take vare of
everything you want, without needing to preprocess the input to lowercase
it before using lucene.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 18:27:15 2007
Return-Path: <java-user-return-28502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93715 invoked from network); 6 Jun 2007 18:27:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 18:27:14 -0000
Received: (qmail 35723 invoked by uid 500); 6 Jun 2007 18:27:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35460 invoked by uid 500); 6 Jun 2007 18:27:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35449 invoked by uid 99); 6 Jun 2007 18:27:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 11:27:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 11:27:06 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hw0DV-0000F1-Ry
	for java-user@lucene.apache.org; Wed, 06 Jun 2007 11:26:45 -0700
Message-ID: <10994523.post@talk.nabble.com>
Date: Wed, 6 Jun 2007 11:26:45 -0700 (PDT)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: issues with optimizer
In-Reply-To: <Pine.LNX.4.58.0706061113410.9019@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
References: <10993751.post@talk.nabble.com> <Pine.LNX.4.58.0706061113410.9019@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hoss,

actually its more of a "general" question rather than a compass specific
one.  Here's my complete process:
I have incoming data being indexed every hour.  The data varies from 100 to
10000 documents.  I'm also having the index optimized via Compass (using its
Adaptive or Aggressive optimizer, which in turn uses Lucene).  Its currently
scheduled every 10 seconds.  In the beginning, when my index just started to
build, optimization was instantaneous.  Now, currently at 20GB, each
optimization takes a while.  Because each optimization takes a bit of time,
there is a lock on the index.  If the index is locked too long, the
application that is trying to index new data will stall and...

So, for the "general" question, what would be an ideal situation of
optimizing an index that may reach 100GB in size?  Currently I don't split
anything up (just one big index).  Any suggestions?  Thanks.

-los



hossman_lucene wrote:
> 
> 
> I have no idea what it is you are asking ... it seems to be very compass
> specifci .. perhaps you should be consulting a Compass User group?
> 
> : I'm running into the "WARN | Compass Scheduled Optimizer |
> AdaptiveOptimizer
> : | ne.optimizer.AdaptiveOptimizer 104 | Failed to obtain lock on
> sub-index
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/issues-with-optimizer-tf3879377.html#a10994523
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 22:16:45 2007
Return-Path: <java-user-return-28503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34548 invoked from network); 6 Jun 2007 22:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 22:16:44 -0000
Received: (qmail 61690 invoked by uid 500); 6 Jun 2007 22:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61561 invoked by uid 500); 6 Jun 2007 22:16:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61550 invoked by uid 99); 6 Jun 2007 22:16:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 15:16:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.44 as permitted sender)
Received: from [206.46.252.44] (HELO vms044pub.verizon.net) (206.46.252.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 15:16:34 -0700
Received: from dorthy ([68.238.97.169])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JJ8000JQJ6I5AAJ@vms044.mailsrvcs.net> for
 java-user@lucene.apache.org; Wed, 06 Jun 2007 17:15:54 -0500 (CDT)
Date: Wed, 06 Jun 2007 17:16:54 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Indexing PDF document
To: <java-user@lucene.apache.org>
Message-id: <006c01c7a888$643a27e0$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=UTF-8; reply-type=response
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com>
 <01c301c79eef$f156abf0$2e01a8c0@dorthy> <465726A3.3090004@getopt.org>
 <01cf01c79f03$248d5970$2e01a8c0@dorthy> <46574A20.3050701@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Well I got no where trying to index openoffice documents so I thought I try 
indexing PDF documents. Seemed Like PDFBox was a good bet, claimed to offer 
Lucene support and was on the Lucene recommended list. But after numerious 
attempts failed I decided try the IndexFiles.java that comes with PDFBox and 
I get the same error my modified Lucene demo code gets.

C:\PDFBox-0.7.3\classes>java 
org.pdfbox.searchengine.lucene.IndexFiles -create -index c:\index c:\test 
root=c:\test
Skipping c:\test\HTMLParser.java
Skipping c:\test\SearchFiles.java
Indexing PDF document: c:\test\doc.pdf
Exception in thread "main" java.lang.NoSuchMethodError: 
org.apache.lucene.document.Document.add(Lo
rg/apache/lucene/document/Field;)V
        at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.addUnindexedField(LucenePDFDocument.java:224)
        at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.convertDocument(LucenePDFDocument.java:265)
        at 
org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDocument.java:377)
        at 
org.pdfbox.searchengine.lucene.IndexFiles.addDocument(IndexFiles.java:295)
        at 
org.pdfbox.searchengine.lucene.IndexFiles.indexDocs(IndexFiles.java:269)
        at 
org.pdfbox.searchengine.lucene.IndexFiles.indexDocs(IndexFiles.java:236)
        at 
org.pdfbox.searchengine.lucene.IndexFiles.indexDocs(IndexFiles.java:223)
        at 
org.pdfbox.searchengine.lucene.IndexFiles.index(IndexFiles.java:165)
        at 
org.pdfbox.searchengine.lucene.IndexFiles.main(IndexFiles.java:140)


This is quite curious since my code to index text documents does this 
suscessfully

  /*
   * Add title
   */
  document.add(new Field("title", title, Field.Store.YES, 
Field.Index.UN_TOKENIZED));

  And looking at the failing PDFBox code it is doing the EXACT SAME THING

  document.add( new Field( name, value, Field.Store.YES, Field.Index.NO ) );


Very strange since the exception is NoSuchMethod  Document.add(Field)

And my custom code doing a doc.add(Field) works but PDFBox's code doing a 
doc.add(Field) does not.

As a classpath problem check I tried this

public class IndexMain
{
     public void indexDoc(String filename, String title, String objectId, 
String nodeId) throws Exception
     {
          File INDEX_DIR = new File("index");
          KcmiDocument kcmiDoc=null;
          Document pdfDocument=null;
          LucenePDFDocument lpdf = new LucenePDFDocument();

          IndexWriter writer = new IndexWriter(INDEX_DIR, new 
StandardAnalyzer());

          File file = new File(filename);

          if (filename.endsWith("pdf"))
               pdfDocument = lpdf.getDocument(file);
          else
               kcmiDoc = new KcmiDocument(objectId, title);
 }

Where KcmiDocument does the doc.add(Field) and lpdf.getDocument does the 
doc.add(Field)

when I send in a .txt file all is well, when I send in a .pdf file the 
exception is thrown.

If anyone knows that I am doing wrong or of another easy method to extract 
text from a pdf file I would centrainly like to know. I can live without 
openoffice (for a while) but not being able to index pdf would be a Lucene 
show stopper.


thanks
jim s















---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 22:33:32 2007
Return-Path: <java-user-return-28504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50153 invoked from network); 6 Jun 2007 22:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 22:33:32 -0000
Received: (qmail 85672 invoked by uid 500); 6 Jun 2007 22:33:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85640 invoked by uid 500); 6 Jun 2007 22:33:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85629 invoked by uid 99); 6 Jun 2007 22:33:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 15:33:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 15:33:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1025E5B772; Wed,  6 Jun 2007 15:33:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DA1527F403
	for <java-user@lucene.apache.org>; Wed,  6 Jun 2007 15:33:01 -0700 (PDT)
Date: Wed, 6 Jun 2007 15:33:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Indexing PDF document
In-Reply-To: <006c01c7a888$643a27e0$2e01a8c0@dorthy>
Message-ID: <Pine.LNX.4.58.0706061530170.28895@hal.rescomp.berkeley.edu>
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com>
 <01c301c79eef$f156abf0$2e01a8c0@dorthy> <465726A3.3090004@getopt.org>
 <01cf01c79f03$248d5970$2e01a8c0@dorthy> <46574A20.3050701@getopt.org>
 <006c01c7a888$643a27e0$2e01a8c0@dorthy>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Exception in thread "main" java.lang.NoSuchMethodError:
: org.apache.lucene.document.Document.add(Lo
: rg/apache/lucene/document/Field;)V

: Very strange since the exception is NoSuchMethod  Document.add(Field)

I *believe* the problem is that there is actually no such method
(Document.add(Field)) in the Lucene trunk -- that method use to exist, but
was replaced with Document.add(Fieldable) ... Field is an instance of
Fieldable so your code will compil and run, but binary class files which
were compiled against older versions of Lucene will not.

if you compile all of the PDFBox code from source, it might work ..
laternately you could use the version of Lucene that PDFBox was compiled
against.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 22:49:15 2007
Return-Path: <java-user-return-28505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55087 invoked from network); 6 Jun 2007 22:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 22:49:13 -0000
Received: (qmail 13423 invoked by uid 500); 6 Jun 2007 22:49:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13393 invoked by uid 500); 6 Jun 2007 22:49:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13382 invoked by uid 99); 6 Jun 2007 22:49:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 15:49:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.46 as permitted sender)
Received: from [206.46.252.46] (HELO vms046pub.verizon.net) (206.46.252.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 15:49:06 -0700
Received: from dorthy ([68.238.97.169])
 by vms046.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JJ800957KOOL62H@vms046.mailsrvcs.net> for
 java-user@lucene.apache.org; Wed, 06 Jun 2007 17:48:24 -0500 (CDT)
Date: Wed, 06 Jun 2007 17:49:24 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: Indexing PDF document
To: <java-user@lucene.apache.org>
Message-id: <007201c7a88c$ee8240f0$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com>
 <01c301c79eef$f156abf0$2e01a8c0@dorthy> <465726A3.3090004@getopt.org>
 <01cf01c79f03$248d5970$2e01a8c0@dorthy> <46574A20.3050701@getopt.org>
 <006c01c7a888$643a27e0$2e01a8c0@dorthy>
 <Pine.LNX.4.58.0706061530170.28895@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks I rebuilt PDFbox  and got past that problem but now I am getting

Exception in thread "main" java.lang.NoClassDefFoundError: 
org/bouncycastle/jce/provider/BouncyCastleProvider

seems my test pdf file is provider locked so I tried a Lucene pdf file and 
got

java.lang.NoClassDefFoundError: org/fontbox/afm/AFMParser

googling trying to find the jar that contains AFMPaser

thanks for the help

jim s


----- Original Message ----- 
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: <java-user@lucene.apache.org>
Sent: Wednesday, June 06, 2007 5:33 PM
Subject: Re: Indexing PDF document


>
> : Exception in thread "main" java.lang.NoSuchMethodError:
> : org.apache.lucene.document.Document.add(Lo
> : rg/apache/lucene/document/Field;)V
>
> : Very strange since the exception is NoSuchMethod  Document.add(Field)
>
> I *believe* the problem is that there is actually no such method
> (Document.add(Field)) in the Lucene trunk -- that method use to exist, but
> was replaced with Document.add(Fieldable) ... Field is an instance of
> Fieldable so your code will compil and run, but binary class files which
> were compiled against older versions of Lucene will not.
>
> if you compile all of the PDFBox code from source, it might work ..
> laternately you could use the version of Lucene that PDFBox was compiled
> against.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 23:15:15 2007
Return-Path: <java-user-return-28506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65121 invoked from network); 6 Jun 2007 23:15:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 23:15:14 -0000
Received: (qmail 51707 invoked by uid 500); 6 Jun 2007 23:15:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51676 invoked by uid 500); 6 Jun 2007 23:15:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51661 invoked by uid 99); 6 Jun 2007 23:15:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 16:15:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.128.80.6] (HELO yorktown.networkredux.net) (64.128.80.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 16:15:05 -0700
Received: from cpanel by yorktown.networkredux.net with local (Exim 4.63)
	(envelope-from <ben@benlitchfield.com>)
	id 1Hw4iL-0000oJ-M6
	for java-user@lucene.apache.org; Wed, 06 Jun 2007 16:14:53 -0700
Received: from 129.21.60.26 ([129.21.60.26]) by localhost (Horde MIME
	library) with HTTP; Wed, 06 Jun 2007 19:14:53 -0400
Message-ID: <20070606191453.3d9sbwiruscws0ck@localhost>
Date: Wed, 06 Jun 2007 19:14:53 -0400
From: Ben Litchfield <ben@benlitchfield.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing PDF document
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com>
	<01c301c79eef$f156abf0$2e01a8c0@dorthy> <465726A3.3090004@getopt.org>
	<01cf01c79f03$248d5970$2e01a8c0@dorthy> <46574A20.3050701@getopt.org>
	<006c01c7a888$643a27e0$2e01a8c0@dorthy>
	<Pine.LNX.4.58.0706061530170.28895@hal.rescomp.berkeley.edu>
	<007201c7a88c$ee8240f0$2e01a8c0@dorthy>
In-Reply-To: <007201c7a88c$ee8240f0$2e01a8c0@dorthy>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.3)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - yorktown.networkredux.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32001 32003] / [47 12]
X-AntiAbuse: Sender Address Domain - benlitchfield.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/horde/imp/compose.php 
X-Source-Dir: :/base/horde/imp
X-Virus-Checked: Checked by ClamAV on apache.org

you need to include the both the bouncy castle jars and FontBox jar.  =20
Both are included with the PDFBox distribution.

Ben

Quoting jim shirreffs <jpsb@verizon.net>:

> Thanks I rebuilt PDFbox  and got past that problem but now I am getting
>
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/bouncycastle/jce/provider/BouncyCastleProvider
>
> seems my test pdf file is provider locked so I tried a Lucene pdf  =20
> file and got
>
> java.lang.NoClassDefFoundError: org/fontbox/afm/AFMParser
>
> googling trying to find the jar that contains AFMPaser
>
> thanks for the help
>
> jim s
>
>
> ----- Original Message ----- From: "Chris Hostetter"
> <hossman_lucene@fucit.org>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, June 06, 2007 5:33 PM
> Subject: Re: Indexing PDF document
>
>
>>
>> : Exception in thread "main" java.lang.NoSuchMethodError:
>> : org.apache.lucene.document.Document.add(Lo
>> : rg/apache/lucene/document/Field;)V
>>
>> : Very strange since the exception is NoSuchMethod  Document.add(Field)
>>
>> I *believe* the problem is that there is actually no such method
>> (Document.add(Field)) in the Lucene trunk -- that method use to exist, bu=
t
>> was replaced with Document.add(Fieldable) ... Field is an instance of
>> Fieldable so your code will compil and run, but binary class files which
>> were compiled against older versions of Lucene will not.
>>
>> if you compile all of the PDFBox code from source, it might work ..
>> laternately you could use the version of Lucene that PDFBox was compiled
>> against.
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 06 23:24:40 2007
Return-Path: <java-user-return-28507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75864 invoked from network); 6 Jun 2007 23:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2007 23:24:38 -0000
Received: (qmail 68070 invoked by uid 500); 6 Jun 2007 23:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68032 invoked by uid 500); 6 Jun 2007 23:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68021 invoked by uid 99); 6 Jun 2007 23:24:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 16:24:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.46 as permitted sender)
Received: from [206.46.252.46] (HELO vms046pub.verizon.net) (206.46.252.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 16:24:29 -0700
Received: from dorthy ([68.238.97.169])
 by vms046.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JJ8009G0MBOLCX7@vms046.mailsrvcs.net> for
 java-user@lucene.apache.org; Wed, 06 Jun 2007 18:23:49 -0500 (CDT)
Date: Wed, 06 Jun 2007 18:24:48 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: Indexing PDF document
To: <java-user@lucene.apache.org>
Message-id: <008201c7a891$e07e0cf0$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=response
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References: <20070525154307.61618.qmail@web50312.mail.re2.yahoo.com>
 <01c301c79eef$f156abf0$2e01a8c0@dorthy> <465726A3.3090004@getopt.org>
 <01cf01c79f03$248d5970$2e01a8c0@dorthy> <46574A20.3050701@getopt.org>
 <006c01c7a888$643a27e0$2e01a8c0@dorthy>
 <Pine.LNX.4.58.0706061530170.28895@hal.rescomp.berkeley.edu>
 <007201c7a88c$ee8240f0$2e01a8c0@dorthy>
 <20070606191453.3d9sbwiruscws0ck@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

ok thnaks found FontBox/jar on the net, but now I see the included jars with 
pdfbox.  I expected them to be in /lib not /external my bad. thanks again



jim s

----- Original Message ----- 
From: "Ben Litchfield" <ben@benlitchfield.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, June 06, 2007 6:14 PM
Subject: Re: Indexing PDF document


you need to include the both the bouncy castle jars and FontBox jar.
Both are included with the PDFBox distribution.

Ben

Quoting jim shirreffs <jpsb@verizon.net>:

> Thanks I rebuilt PDFbox  and got past that problem but now I am getting
>
> Exception in thread "main" java.lang.NoClassDefFoundError:
> org/bouncycastle/jce/provider/BouncyCastleProvider
>
> seems my test pdf file is provider locked so I tried a Lucene pdf   file 
> and got
>
> java.lang.NoClassDefFoundError: org/fontbox/afm/AFMParser
>
> googling trying to find the jar that contains AFMPaser
>
> thanks for the help
>
> jim s
>
>
> ----- Original Message ----- From: "Chris Hostetter"
> <hossman_lucene@fucit.org>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, June 06, 2007 5:33 PM
> Subject: Re: Indexing PDF document
>
>
>>
>> : Exception in thread "main" java.lang.NoSuchMethodError:
>> : org.apache.lucene.document.Document.add(Lo
>> : rg/apache/lucene/document/Field;)V
>>
>> : Very strange since the exception is NoSuchMethod  Document.add(Field)
>>
>> I *believe* the problem is that there is actually no such method
>> (Document.add(Field)) in the Lucene trunk -- that method use to exist, 
>> but
>> was replaced with Document.add(Fieldable) ... Field is an instance of
>> Fieldable so your code will compil and run, but binary class files which
>> were compiled against older versions of Lucene will not.
>>
>> if you compile all of the PDFBox code from source, it might work ..
>> laternately you could use the version of Lucene that PDFBox was compiled
>> against.
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 00:03:26 2007
Return-Path: <java-user-return-28508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32119 invoked from network); 7 Jun 2007 00:03:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 00:03:25 -0000
Received: (qmail 38734 invoked by uid 500); 7 Jun 2007 00:03:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38121 invoked by uid 500); 7 Jun 2007 00:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38110 invoked by uid 99); 7 Jun 2007 00:03:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 17:03:21 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 17:03:16 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 7667B4A8175
	for <java-user@lucene.apache.org>; Thu,  7 Jun 2007 10:06:47 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: I need 'cat???' to match 'cat' again!
Date: Thu, 7 Jun 2007 10:02:35 +1000
User-Agent: KMail/1.9.7
References: <492150.10642.qm@web63707.mail.re1.yahoo.com>
In-Reply-To: <492150.10642.qm@web63707.mail.re1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706071002.36000.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 06 June 2007 17:48:10 Tim Smith wrote:
> Hi!
>
> How can I restore the behavior of the old
> WildcardQuery under 2.1?
> I badly need 'cat???' to match 'cat' again just like
> in the older versions.
>
> I could modify my istance of lucene by removing those
> "new" lines, but I don't want to maintain a custom
> lucene package.
>
> Please help!

Can you not use RegexQuery instead?

Daniel


-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 00:08:15 2007
Return-Path: <java-user-return-28509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47086 invoked from network); 7 Jun 2007 00:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 00:08:14 -0000
Received: (qmail 49115 invoked by uid 500); 7 Jun 2007 00:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48840 invoked by uid 500); 7 Jun 2007 00:08:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48829 invoked by uid 99); 7 Jun 2007 00:08:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 17:08:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 17:08:06 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D863B5B772; Wed,  6 Jun 2007 17:07:45 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C1CFE7F403
	for <java-user@lucene.apache.org>; Wed,  6 Jun 2007 17:07:45 -0700 (PDT)
Date: Wed, 6 Jun 2007 17:07:45 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: issues with optimizer
In-Reply-To: <10994523.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0706061704500.3968@hal.rescomp.berkeley.edu>
References: <10993751.post@talk.nabble.com> <Pine.LNX.4.58.0706061113410.9019@hal.rescomp.berkeley.edu>
 <10994523.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: actually its more of a "general" question rather than a compass specific
: one.  Here's my complete process:
: I have incoming data being indexed every hour.  The data varies from 100 to
: 10000 documents.  I'm also having the index optimized via Compass (using its
: Adaptive or Aggressive optimizer, which in turn uses Lucene).  Its currently

the first problem is, most people on this list really have no idea what
you mean by "Adaptive or Aggressive optimizer" ... jsut because it "in
turn uses Lucene" doesn't mean we know what it does ... there is only one
"optimize" method in Lucene ... so what is an Adaptive optimizer?  what is
an Aggressive optimizer?

: scheduled every 10 seconds.  In the beginning, when my index just started to

Optimizing every 10 seconds sounds extremely ridiculous to me ... i can't
imagine any use case where that would make sense.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 01:21:05 2007
Return-Path: <java-user-return-28510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92407 invoked from network); 7 Jun 2007 01:21:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 01:21:03 -0000
Received: (qmail 46713 invoked by uid 500); 7 Jun 2007 01:20:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46667 invoked by uid 500); 7 Jun 2007 01:20:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46656 invoked by uid 99); 7 Jun 2007 01:20:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 18:20:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of hilton.campbell@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 18:20:53 -0700
Received: by wa-out-1112.google.com with SMTP id j40so466061wah
        for <java-user@lucene.apache.org>; Wed, 06 Jun 2007 18:20:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:references:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:in-reply-to:x-mimeole;
        b=TPBIDIlXSatJ6JdWzwzuYwET46rZCpgbZtq/Om95pKjFWA8pkpbiSrN25WqehQp3AAJLq6e1QPQhdjaJGIYI3EPSFVacFFOQbec8PzXWYMysYG34sKJvPLGCCtbwZWZTjsP0Ns58ER3cuWzSMK3spFlGku4HtEV2SlIhp0M/7IY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:references:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:in-reply-to:x-mimeole;
        b=kMgD4LOoWd2Bn7Cn1wocZIF61mvQIR2MFgn/IFiYfctrb/9pWtCUekVzu8HwwpQIUsvsR0mt8Z+UC7Ij25IV5hN/LqSCtxaLU43JrLsqIa0UIjg3ksa0fev1XAHtZ9MehBojkg7mNGgyXGg0mPyJFJ1kIiXclv4BCtRkSPB6vNA=
Received: by 10.114.144.1 with SMTP id r1mr1007840wad.1181179233391;
        Wed, 06 Jun 2007 18:20:33 -0700 (PDT)
Received: from george ( [128.187.188.207])
        by mx.google.com with ESMTP id j21sm227800wah.2007.06.06.18.20.32
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 06 Jun 2007 18:20:32 -0700 (PDT)
From: "Hilton Campbell" <hilton.campbell@gmail.com>
To: <java-user@lucene.apache.org>
References: <8d6059bb0706051104o32fd328ci42a8744db959f44c@mail.gmail.com> <4665CC5E.5010000@syr.edu>
Subject: RE: How can I search over all documents NOT in a certain subset?
Date: Wed, 6 Jun 2007 19:20:31 -0600
Message-ID: <005101c7a8a2$0a951820$824e070a@george>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acens0J/rf94YdLjQM2iV3ti/rKwSQA7qwGA
In-Reply-To: <4665CC5E.5010000@syr.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

Steve,

Thanks for the great reply!  That worked like a charm.  I really appreciate
it.

Thanks,
Hilton Campbell

-----Original Message-----
From: Steven Rowe [mailto:sarowe@syr.edu] 
Sent: Tuesday, June 05, 2007 2:50 PM
To: java-user@lucene.apache.org
Subject: Re: How can I search over all documents NOT in a certain subset?

Hi Hilton,

Hilton Campbell wrote:
> Hello all,
> 
> In my application I want to perform a search over all the documents
> that are NOT in a certain subset, and I'm not sure how I should do
> it.
> 
> Specifically, the application performs a search and the top N results
> are shown to the user. The user may then opt to see the next top N 
> results. By the time the user chooses to see the next N results,
> however, there may be new, highly-relevant documents in the index (as
> indexing is occurring concurrently). So instead of just skipping to
> the next N, I need to perform a new search and get the top N that
> haven't been seen yet. Is anyone aware of an efficient way to
> implement this?
> 
> I can think of at least one way: I can keep track of the documents 
> that have been seen and iterate through all the hits, skipping those 
> that have already been seen. I just want to see if there isn't a 
> better way that doesn't iterate through potentially hundreds of 
> already seen hits, or if anyone has any pointers on an efficient
> implementation of this idea.

Conceptually (caveat: untested), you could:

1. Extend Filter[1] (call it DejaVuFilter) to hold a BitSet per
IndexReader.  The BitSet would hold one bit per doc[2], each initialized
to true.

2. Unset a DejaVuFilter instance's bit for each of your top N docs by
walking the TopDocs returned by Searcher.search(Query,Filter,int)[3].
Initially, you could pass in null for the Filter, and then for all
following calls, an instance of DejaVuFilter.

3. Repeat step #2 as many times as necessary.

Steve

[1]
<http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/search/Filter.htm
l>
[2]
<http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/index/IndexReader
.html#maxDoc()>
[3]
<http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/search/Searcher.h
tml#search(org.apache.lucene.search.Query,%20org.apache.lucene.search.Filter
,%20int)>

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 02:47:25 2007
Return-Path: <java-user-return-28511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25194 invoked from network); 7 Jun 2007 02:47:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 02:47:24 -0000
Received: (qmail 74575 invoked by uid 500); 7 Jun 2007 02:47:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74538 invoked by uid 500); 7 Jun 2007 02:47:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74526 invoked by uid 99); 7 Jun 2007 02:47:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 19:47:20 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [218.249.153.227] (HELO mail.yikey.com) (218.249.153.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 19:47:14 -0700
Subject: IndexWriter.Optimize()  is too slow and IOException!  How Can I do?
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7A8AE.6B4A2F63"
Date: Thu, 7 Jun 2007 10:49:22 +0800
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <28C622BA8A7A474589924466E6303BE00CC773@EXCH01.yikey.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexWriter.Optimize()  is too slow and IOException!  How Can I do?
Thread-Index: AceornP09oPPBv62QxaPECwSSQbr+w==
From: =?gb2312?B?za/Qob78?= <tongxiaojun@yikey.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7A8AE.6B4A2F63
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

my indexfile to 8G when I optionze() the index.program is too slow . and =
some time IOException. And use TOO memory .

=20

xiaojun tong

=20

010-64489518-613

tongxiaojun@msn.com

www.feedsky.com

=20


------_=_NextPart_001_01C7A8AE.6B4A2F63--

From java-user-return-28512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 02:51:45 2007
Return-Path: <java-user-return-28512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31024 invoked from network); 7 Jun 2007 02:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 02:51:45 -0000
Received: (qmail 88130 invoked by uid 500); 7 Jun 2007 02:51:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87834 invoked by uid 500); 7 Jun 2007 02:51:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87822 invoked by uid 99); 7 Jun 2007 02:51:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 19:51:41 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of liuping.james@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 19:51:36 -0700
Received: by ug-out-1314.google.com with SMTP id m2so637609uge
        for <java-user@lucene.apache.org>; Wed, 06 Jun 2007 19:51:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GRI145LDzSt8pIi9lp0A/DhYj6WfgeKQmIKvZAji0oPseEx+vse6gfb0u9ieRC/NKsoNw0XuoZek44kb65Dh8DxFumbfyku2lJp2mtsvDUS9l8hsJTiJzju2poBZBTKBcXO4jw63Yjsz6yKIN39GXuCZG3smpRg3JRRjd5YPKOI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DmuOxqL9dqSf+CAyLERvLAY5HQij42sDNaAhyRk49Ruhv8qtS7KDDjSCplEL2o62L3q3wnl+b7ggMFPCfuHHG+ZEdRNY2K5H7tnVY7/CsqaJttvRRDDTkEvsoZeqZcyH3bDhi4s3zrudDlj1+zaT8tzLJh7c59k/VfGgynECp7k=
Received: by 10.78.130.6 with SMTP id c6mr541655hud.1181184675155;
        Wed, 06 Jun 2007 19:51:15 -0700 (PDT)
Received: by 10.78.160.15 with HTTP; Wed, 6 Jun 2007 19:51:15 -0700 (PDT)
Message-ID: <5d5204510706061951i2dba539ew5de35b463309ff65@mail.gmail.com>
Date: Thu, 7 Jun 2007 10:51:15 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.Optimize() is too slow and IOException! How Can I do?
In-Reply-To: <28C622BA8A7A474589924466E6303BE00CC773@EXCH01.yikey.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31291_21890436.1181184675077"
References: <28C622BA8A7A474589924466E6303BE00CC773@EXCH01.yikey.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31291_21890436.1181184675077
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

VSBzaG91bGQgc3BsaXQgeW91ciBpbmRleC4KCmxhcmdlIGluZGV4IHdpbGwgY2F1c2UgcXVlcnkg
c3BlZWQsIG9wdGltaXplIHNwZWVkIHdoZW4gdSBpbmRleC4KCjIwMDcvNi83LCDNr9ChvvwgPHRv
bmd4aWFvanVuQHlpa2V5LmNvbT46Cj4KPiBteSBpbmRleGZpbGUgdG8gOEcgd2hlbiBJIG9wdGlv
bnplKCkgdGhlIGluZGV4LnByb2dyYW0gaXMgdG9vIHNsb3cgLiBhbmQKPiBzb21lIHRpbWUgSU9F
eGNlcHRpb24uIEFuZCB1c2UgVE9PIG1lbW9yeSAuCj4KPgo+Cj4geGlhb2p1biB0b25nCj4KPgo+
Cj4gMDEwLTY0NDg5NTE4LTYxMwo+Cj4gdG9uZ3hpYW9qdW5AbXNuLmNvbQo+Cj4gd3d3LmZlZWRz
a3kuY29tCj4KPgo+Cj4KCgotLSAKcmVnYXJkcwpqbAo=
------=_Part_31291_21890436.1181184675077--

From java-user-return-28513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 04:49:21 2007
Return-Path: <java-user-return-28513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38327 invoked from network); 7 Jun 2007 04:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 04:49:19 -0000
Received: (qmail 91855 invoked by uid 500); 7 Jun 2007 04:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91688 invoked by uid 500); 7 Jun 2007 04:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91673 invoked by uid 99); 7 Jun 2007 04:49:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 21:49:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 21:49:08 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hw9vU-0005OE-2P
	for java-user@lucene.apache.org; Wed, 06 Jun 2007 21:48:48 -0700
Message-ID: <11001907.post@talk.nabble.com>
Date: Wed, 6 Jun 2007 21:48:47 -0700 (PDT)
From: lucenebuyer <bgerald@gmail.com>
To: java-user@lucene.apache.org
Subject: Need Lucene Compression help -- can pay nominal fee
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bgerald@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


All,

I need to store all the attributes of the document i index as part of the
index. And I need to get the size of the files as close to 20% of the
original size as possible. If anyone can help with this I can pay a nominal
fee. Please contact me if anyone can help.

BG.
-- 
View this message in context: http://www.nabble.com/Need-Lucene-Compression-help----can-pay-nominal-fee-tf3881801.html#a11001907
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 05:37:58 2007
Return-Path: <java-user-return-28514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46518 invoked from network); 7 Jun 2007 05:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 05:37:56 -0000
Received: (qmail 38564 invoked by uid 500); 7 Jun 2007 05:37:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38138 invoked by uid 500); 7 Jun 2007 05:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38127 invoked by uid 99); 7 Jun 2007 05:37:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 22:37:52 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 22:37:46 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l575bG5J006580
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 08:37:16 +0300
Received: from [10.142.130.117] ([10.142.130.117]) by nimitz with ESMTP
	 id m6781iq5; 7 Jun 2007 08:37:00 +0300
Message-ID: <46679948.9040102@teamware.com>
Date: Thu, 07 Jun 2007 08:36:08 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How can I search over all documents NOT in a certain subset?
References: <8d6059bb0706051104o32fd328ci42a8744db959f44c@mail.gmail.com> <4665CC5E.5010000@syr.edu>
In-Reply-To: <4665CC5E.5010000@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 07 Jun 2007 08:37:16 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Steven Rowe wrote:
> Conceptually (caveat: untested), you could:
> 
> 1. Extend Filter[1] (call it DejaVuFilter) to hold a BitSet per
> IndexReader.  The BitSet would hold one bit per doc[2], each initialized
> to true.
> 
> 2. Unset a DejaVuFilter instance's bit for each of your top N docs by
> walking the TopDocs returned by Searcher.search(Query,Filter,int)[3].
> Initially, you could pass in null for the Filter, and then for all
> following calls, an instance of DejaVuFilter.

Just a thought...

If Hilton wants to be aware of new Documents in the index since the previous 
search, this requires opening a new IndexReader.

If only Documents have been added to the index I expect, but am not sure, that 
the bits from the old IndexReader are still valid for the document numbers in 
the new Reader.  However, if there have been deletions or optimisation has 
occurred between reader instances, then the document ids from the old reader may 
not represent the same documents in the new reader, so the Filter for the old 
reader will not be valid for the new search against the new reader and you may 
get false matches.

I don't think there will be a problem if there are no deletions.

Antony






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 06:04:33 2007
Return-Path: <java-user-return-28515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55845 invoked from network); 7 Jun 2007 06:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 06:04:32 -0000
Received: (qmail 68172 invoked by uid 500); 7 Jun 2007 06:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67976 invoked by uid 500); 7 Jun 2007 06:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67964 invoked by uid 99); 7 Jun 2007 06:04:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 23:04:28 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.147.97.95] (HELO web63710.mail.re1.yahoo.com) (69.147.97.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Jun 2007 23:04:22 -0700
Received: (qmail 77574 invoked by uid 60001); 7 Jun 2007 06:04:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=fNUIGbflr/BrIr3UF09uVkcSoL8tpWn/KDHFQ6qSvdGgNsDqeQLIBG2T7Gh2cnr4YRfk44TbGM+ehAgxaJFaSLxThHiTWgaGtwZD1er+3GmHTnPAWeVcIvdwd6PAk6V2SlxfxUzBVLOjSAa+KMD4iDqz/fbIHpSnxudeXeDNwms=;
X-YMail-OSG: UalEtRgVM1na3.SesPcfhglqLEYNqEeciz.MOWM5ib137fTnx8OV58m8_7xlKwqP0A--
Received: from [80.98.146.223] by web63710.mail.re1.yahoo.com via HTTP; Wed, 06 Jun 2007 23:04:00 PDT
Date: Wed, 6 Jun 2007 23:04:00 -0700 (PDT)
From: Tim Smith <forusewith@yahoo.com>
Subject: Re: I need 'cat???' to match 'cat' again!
To: java-user@lucene.apache.org
In-Reply-To: <359a92830706060725x6c54e5f4s32773e28e71b999a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <540663.77392.qm@web63710.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

The situation is the following:

In my native language, stemming is not available for
lucene AFAIK. ..and there are pleny of forms of words
that needs to be stemmed. People usually search with
'*' at the end of the word because of the reason, but
because of the nature of our language, in most of the
cases, it expands to much more words than acceptable.
We've limited the number of Query clauses because of
performance reasons.
That's where '???' comes in picture. We were running
on 1.4.x until now and our Help and FAQ suggests for
people using '???' for stemming, since '*' will work
only for long words (fewer expanded variations). (our
stems are mostly 1-2 or 3 chars long)
'???' was almost perfect for this reason. It returned
the original word and most of the stemmed variations.
Now it is completly broken, so we need to find a
solution.
I know this is a special case for a special language,
but this is a real problem for us now.

Thanks,
Tim

--- Erick Erickson <erickerickson@gmail.com> wrote:

> Well, having your application depend upon incorrect
> behavior
> is...er...fraught.
> 
> It looks like what you really want is custom
> behavior for multiple
> question marks, perhaps only with multiple question
> marks
> at the end of your query?
> 
> If this is the case, I'd think about substituting
> splat (*) in this
> case at query time. So you simply transform
> cat??? to cat*....
> 
> If that doesn't satisfy your requirements, perhaps
> you could
> post a more detailed explanation of what you're
> trying to
> accomplish.
> 
> Best
> Erick
> 
> On 6/6/07, Tim Smith <forusewith@yahoo.com> wrote:
> >
> > Hi!
> >
> > How can I restore the behavior of the old
> > WildcardQuery under 2.1?
> > I badly need 'cat???' to match 'cat' again just
> like
> > in the older versions.
> >
> > I could modify my istance of lucene by removing
> those
> > "new" lines, but I don't want to maintain a custom
> > lucene package.
> >
> > Please help!
> >
> > Tim
> >
> >
> >
> >
> > Source: LUCENE-306
> > >
> >
>
********************************************************************
> > > --- WildcardTermEnum.org      2004-05-11
> > 11:42:10.000000000 -0400
> > > +++ WildcardTermEnum.java     2004-11-08
> > 14:35:14.823610500 -0500
> > > @@ -132,6 +132,10 @@
> > >              }
> > >              else
> > >              {
> > > +           //to prevent "cat" matches "ca??"
> > > +           if(wildchar == WILDCARD_CHAR){
> > > +             return false;
> > > +           }
> > >                // Look at the next character
> > >                wildcardSearchPos++;
> > >              }
> > >
> >
>
**********************************************************************
> >
> >
> >
> >
> >
> >
>
____________________________________________________________________________________
> > Sucker-punch spam with award-winning protection.
> > Try the free Yahoo! Mail Beta.
> >
>
http://advision.webevents.yahoo.com/mailbeta/features_spam.html
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> 



       
____________________________________________________________________________________
Get the free Yahoo! toolbar and rest assured with the added security of spyware protection.
http://new.toolbar.yahoo.com/toolbar/features/norton/index.php

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 06:05:38 2007
Return-Path: <java-user-return-28516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58226 invoked from network); 7 Jun 2007 06:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 06:05:36 -0000
Received: (qmail 70312 invoked by uid 500); 7 Jun 2007 06:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70263 invoked by uid 500); 7 Jun 2007 06:05:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70252 invoked by uid 99); 7 Jun 2007 06:05:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 23:05:32 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.147.97.97] (HELO web63712.mail.re1.yahoo.com) (69.147.97.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Jun 2007 23:05:27 -0700
Received: (qmail 98391 invoked by uid 60001); 7 Jun 2007 06:05:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=oDSOCYc2byZGFkiWabCGmIy/zble2CB9tckVtOu02XAH9gx+eXs1KsqFDTNy6NahxVcEH/koJUe7AN9TaR71PA6JIaS0CmlMa+1o5fE//YkPcuCWyvCy/cGolbTIFq2fBzDRnOCVpEBn6YWwck8JueLvSBklbDPXH4wN5dzTB6k=;
X-YMail-OSG: zkYEjSoVM1lPOYlf91IpQda8FbhRmnO7sFRRu4dxQLq31tX5YwTMZWJ9K0y5J7ojsgElEfTK3A0tlCyXBgD_WVZZE2..smP.rG_b
Received: from [80.98.146.223] by web63712.mail.re1.yahoo.com via HTTP; Wed, 06 Jun 2007 23:05:06 PDT
Date: Wed, 6 Jun 2007 23:05:06 -0700 (PDT)
From: Tim Smith <forusewith@yahoo.com>
Subject: Re: I need 'cat???' to match 'cat' again!
To: java-user@lucene.apache.org
In-Reply-To: <200706071002.36000.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <96195.97954.qm@web63712.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

Isn't RegexQuery slower than '???' at the end of a
word?

Thanks,
Tim

--- Daniel Noll <daniel@nuix.com> wrote:

> On Wednesday 06 June 2007 17:48:10 Tim Smith wrote:
> > Hi!
> >
> > How can I restore the behavior of the old
> > WildcardQuery under 2.1?
> > I badly need 'cat???' to match 'cat' again just
> like
> > in the older versions.
> >
> > I could modify my istance of lucene by removing
> those
> > "new" lines, but I don't want to maintain a custom
> > lucene package.
> >
> > Please help!
> 
> Can you not use RegexQuery instead?
> 
> Daniel
> 
> 
> -- 
> Daniel Noll
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia   
> Ph: +61 2 9280 0699
> Web: http://nuix.com/                              
> Fax: +61 2 9212 6902
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



       
____________________________________________________________________________________
Sick sense of humor? Visit Yahoo! TV's 
Comedy with an Edge to see what's on, when. 
http://tv.yahoo.com/collections/222

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 06:08:35 2007
Return-Path: <java-user-return-28517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64923 invoked from network); 7 Jun 2007 06:08:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 06:08:33 -0000
Received: (qmail 75199 invoked by uid 500); 7 Jun 2007 06:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75163 invoked by uid 500); 7 Jun 2007 06:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75152 invoked by uid 99); 7 Jun 2007 06:08:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jun 2007 23:08:28 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.237.93] (HELO n8.bullet.re3.yahoo.com) (68.142.237.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Jun 2007 23:08:23 -0700
Received: from [68.142.230.29] by n8.bullet.re3.yahoo.com with NNFMP; 07 Jun 2007 06:08:02 -0000
Received: from [66.196.101.132] by t2.bullet.re2.yahoo.com with NNFMP; 07 Jun 2007 06:08:02 -0000
Received: from [127.0.0.1] by rrr3.mail.re1.yahoo.com with NNFMP; 07 Jun 2007 06:08:02 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 473682.95963.bm@rrr3.mail.re1.yahoo.com
Received: (qmail 19697 invoked by uid 60001); 7 Jun 2007 06:08:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=lPaK6SlR7D2RJaBMS9td9hP7Z0h7X2NcBFwzYaljtlBnlnNtp/w+KOsQmzIm5Yis+jVvh6B9mlJC6dqns/ea/b6eCt/rDWfOd3dCnLPfrGHJwN5Z//CN1SIsmxAdaNUq8jyfIwS2rJMmukveQuleN6MyB1sdqUontXVViSaW/L8=;
X-YMail-OSG: GW3PRBEVM1nVstphd3kLgm80p6BMhQ_aTnZs1LRFs40gxRspAXfiiWFgNqTrt5qj5iEOiDj.A5YGZ79YirWp3GrNTQ--
Received: from [80.98.146.223] by web63702.mail.re1.yahoo.com via HTTP; Wed, 06 Jun 2007 23:08:02 PDT
Date: Wed, 6 Jun 2007 23:08:02 -0700 (PDT)
From: Tim Smith <forusewith@yahoo.com>
Subject: Re: I need 'cat???' to match 'cat' again!
To: java-user@lucene.apache.org
In-Reply-To: <4666CA22.3050401@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <282333.19436.qm@web63702.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

Doug's suggestion would make me perfectly happy if
that patch were available now(!)..

Thanks,
Tim

--- Steven Rowe <sarowe@syr.edu> wrote:

> Hi Tim,
> 
> Tim Smith wrote:
> > How can I restore the behavior of the old
> > WildcardQuery under 2.1?
> > I badly need 'cat???' to match 'cat' again just
> like
> > in the older versions.
> 
> The behavior you want was last sighted in Java
> Lucene four releases ago
> (v1.4.3).
> 
> See Doug Cutting's response to a similar request:
> 
>
<http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200602.mbox/%3C43FC80B3.5090606@apache.org%3E>
> 
> In short, although the behavior you want might
> eventually be restored in
> future releases through diligence on your part, it
> would almost
> certainly have to be expressed using a different
> syntax.
> 
> Steve
> 
> -- 
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



       
____________________________________________________________________________________
Need a vacation? Get great deals
to amazing places on Yahoo! Travel.
http://travel.yahoo.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 07:40:50 2007
Return-Path: <java-user-return-28518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69069 invoked from network); 7 Jun 2007 07:40:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 07:40:49 -0000
Received: (qmail 84997 invoked by uid 500); 7 Jun 2007 07:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84835 invoked by uid 500); 7 Jun 2007 07:40:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84820 invoked by uid 99); 7 Jun 2007 07:40:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 00:40:45 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 00:40:40 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6978D5B772; Thu,  7 Jun 2007 00:40:19 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 437D37F403
	for <java-user@lucene.apache.org>; Thu,  7 Jun 2007 00:40:19 -0700 (PDT)
Date: Thu, 7 Jun 2007 00:40:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: I need 'cat???' to match 'cat' again!
In-Reply-To: <96195.97954.qm@web63712.mail.re1.yahoo.com>
Message-ID: <Pine.LNX.4.58.0706070030020.29381@hal.rescomp.berkeley.edu>
References: <96195.97954.qm@web63712.mail.re1.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Isn't RegexQuery slower than '???' at the end of a
: word?

I've nevered used RegexQuery but a quick glance at the regex javadocs
indicates that some "RegexCapabilities" can optimize the cases with a
fixed prefix, and JakartaRegexpCapabilities is one of those cases ... so
if you construct a RegexQuery and call setRegexImplementation(new
JakartaRegexpCapabilities()) it should be just as fast sa a WildCardQuery

(both will start at the first term with a prefix in common, and then test
each successive term against a common pattern)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 12:44:08 2007
Return-Path: <java-user-return-28519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65705 invoked from network); 7 Jun 2007 12:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 12:43:44 -0000
Received: (qmail 67724 invoked by uid 500); 7 Jun 2007 12:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67673 invoked by uid 500); 7 Jun 2007 12:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67662 invoked by uid 99); 7 Jun 2007 12:43:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 05:43:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 05:43:34 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id CA47B163382
	for <java-user@lucene.apache.org>; Thu,  7 Jun 2007 05:42:57 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <11001907.post@talk.nabble.com>
References: <11001907.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8A378FD3-F15F-44F5-A3B5-38EF941364EF@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Need Lucene Compression help -- can pay nominal fee
Date: Thu, 7 Jun 2007 08:42:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at http://www.gossamer-threads.com/lists/lucene/java-dev/ 
38880?search_string=compression;#38880

The upshot is that you should compress the data yourself and then  
store it as a binary field (Field Constructor: public Field(String  
name, byte[] value, Store store)   ).  This way you can choose  
whatever compression model you think is best.  I guess I would start  
by trying the zip functionality in Java to see if it gives you the  
level of compression you desire and then go from there.

-Grant

On Jun 7, 2007, at 12:48 AM, lucenebuyer wrote:

>
> All,
>
> I need to store all the attributes of the document i index as part  
> of the
> index. And I need to get the size of the files as close to 20% of the
> original size as possible. If anyone can help with this I can pay a  
> nominal
> fee. Please contact me if anyone can help.
>
> BG.
> -- 
> View this message in context: http://www.nabble.com/Need-Lucene- 
> Compression-help----can-pay-nominal-fee-tf3881801.html#a11001907
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 13:17:10 2007
Return-Path: <java-user-return-28520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22330 invoked from network); 7 Jun 2007 13:17:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 13:17:09 -0000
Received: (qmail 44691 invoked by uid 500); 7 Jun 2007 13:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44648 invoked by uid 500); 7 Jun 2007 13:17:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44637 invoked by uid 99); 7 Jun 2007 13:17:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 06:17:05 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 06:17:00 -0700
Received: by mu-out-0910.google.com with SMTP id g7so496014muf
        for <java-user@lucene.apache.org>; Thu, 07 Jun 2007 06:16:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ajtdLVilslDtx5Al56DbnXAuyDAQ3tRqxdk0y/5sUq3vHnX0B93MI9ABQlyxCk0SV+YGqiF0j+lYEWpuuZl1dsG3RHkj1kEF0cJK3fsQRqzLvNUEY2mbLldUdZZYyP1C2T2pi6Mfq7cbDh1875f9tQReWH92c7tgdf384UurGbk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z+KmahNrmC+j5jvtRTo1Q6V5JpJ1U5RNq92GPj/k2BtoRF9KWHakiTBbdrIBl2U5ATHY5bx842s36DTqIcH4SAGI4Fr2vKGmRjvHoOfR1WLkyPZeNZh6cuotkx/6FbVwRrO7f8P/bvfft81YnU6G68+UXExjOhqrbUTAiys/HFw=
Received: by 10.82.105.13 with SMTP id d13mr3180157buc.1181222198543;
        Thu, 07 Jun 2007 06:16:38 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Thu, 7 Jun 2007 06:16:38 -0700 (PDT)
Message-ID: <359a92830706070616x5cb10c5w7da43ef3b9b6c1a5@mail.gmail.com>
Date: Thu, 7 Jun 2007 09:16:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need 'cat???' to match 'cat' again!
In-Reply-To: <540663.77392.qm@web63710.mail.re1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31685_9406754.1181222198341"
References: <359a92830706060725x6c54e5f4s32773e28e71b999a@mail.gmail.com>
	 <540663.77392.qm@web63710.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31685_9406754.1181222198341
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, what you're really doing, in your example, is searching
on all the terms that start with cat and are less than 7 characters
long.

So it seems to me that you can pick out terms yourself and assemble
your own bit OR clause rather than rely on Lucene's old behavior.

By that, I mean use a WildcardTermEnum on cat*. As you enumerate
over all the terms, add the term to an OR clause if it's less than
7 characters long.

Really, this is what was happening under the covers before, but
since the behavior has changed (actually been corrected), you probably
can emulate it like this.

Hope this helps
Erick

On 6/7/07, Tim Smith <forusewith@yahoo.com> wrote:
>
> Hi!
>
> The situation is the following:
>
> In my native language, stemming is not available for
> lucene AFAIK. ..and there are pleny of forms of words
> that needs to be stemmed. People usually search with
> '*' at the end of the word because of the reason, but
> because of the nature of our language, in most of the
> cases, it expands to much more words than acceptable.
> We've limited the number of Query clauses because of
> performance reasons.
> That's where '???' comes in picture. We were running
> on 1.4.x until now and our Help and FAQ suggests for
> people using '???' for stemming, since '*' will work
> only for long words (fewer expanded variations). (our
> stems are mostly 1-2 or 3 chars long)
> '???' was almost perfect for this reason. It returned
> the original word and most of the stemmed variations.
> Now it is completly broken, so we need to find a
> solution.
> I know this is a special case for a special language,
> but this is a real problem for us now.
>
> Thanks,
> Tim
>
> --- Erick Erickson <erickerickson@gmail.com> wrote:
>
> > Well, having your application depend upon incorrect
> > behavior
> > is...er...fraught.
> >
> > It looks like what you really want is custom
> > behavior for multiple
> > question marks, perhaps only with multiple question
> > marks
> > at the end of your query?
> >
> > If this is the case, I'd think about substituting
> > splat (*) in this
> > case at query time. So you simply transform
> > cat??? to cat*....
> >
> > If that doesn't satisfy your requirements, perhaps
> > you could
> > post a more detailed explanation of what you're
> > trying to
> > accomplish.
> >
> > Best
> > Erick
> >
> > On 6/6/07, Tim Smith <forusewith@yahoo.com> wrote:
> > >
> > > Hi!
> > >
> > > How can I restore the behavior of the old
> > > WildcardQuery under 2.1?
> > > I badly need 'cat???' to match 'cat' again just
> > like
> > > in the older versions.
> > >
> > > I could modify my istance of lucene by removing
> > those
> > > "new" lines, but I don't want to maintain a custom
> > > lucene package.
> > >
> > > Please help!
> > >
> > > Tim
> > >
> > >
> > >
> > >
> > > Source: LUCENE-306
> > > >
> > >
> >
> ********************************************************************
> > > > --- WildcardTermEnum.org      2004-05-11
> > > 11:42:10.000000000 -0400
> > > > +++ WildcardTermEnum.java     2004-11-08
> > > 14:35:14.823610500 -0500
> > > > @@ -132,6 +132,10 @@
> > > >              }
> > > >              else
> > > >              {
> > > > +           //to prevent "cat" matches "ca??"
> > > > +           if(wildchar == WILDCARD_CHAR){
> > > > +             return false;
> > > > +           }
> > > >                // Look at the next character
> > > >                wildcardSearchPos++;
> > > >              }
> > > >
> > >
> >
> **********************************************************************
> > >
> > >
> > >
> > >
> > >
> > >
> >
>
> ____________________________________________________________________________________
> > > Sucker-punch spam with award-winning protection.
> > > Try the free Yahoo! Mail Beta.
> > >
> >
> http://advision.webevents.yahoo.com/mailbeta/features_spam.html
> > >
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
>
>
>
> ____________________________________________________________________________________
> Get the free Yahoo! toolbar and rest assured with the added security of
> spyware protection.
> http://new.toolbar.yahoo.com/toolbar/features/norton/index.php
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31685_9406754.1181222198341--

From java-user-return-28521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 13:18:14 2007
Return-Path: <java-user-return-28521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23423 invoked from network); 7 Jun 2007 13:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 13:18:05 -0000
Received: (qmail 47761 invoked by uid 500); 7 Jun 2007 13:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47727 invoked by uid 500); 7 Jun 2007 13:18:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47716 invoked by uid 99); 7 Jun 2007 13:18:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 06:18:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of hilton.campbell@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 06:17:57 -0700
Received: by nz-out-0506.google.com with SMTP id x7so413750nzc
        for <java-user@lucene.apache.org>; Thu, 07 Jun 2007 06:17:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:references:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:in-reply-to:x-mimeole;
        b=AII/ado9kNGiXxuuKyptxKCP+o5y4KBpDJg+J45gXj5pZBFyNcnrE74T2vm3PPtI4JFYkmbrlut3Nl+9aYbq89KZjoNQ0t3cDFB1S8tg18yPMqupLLShcqjrCGCCmqIqW/zlZJaXeDs9K1gxj5E5Ve7H19OJhKngoHZo/AD4gmk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:references:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:in-reply-to:x-mimeole;
        b=mzOV0U6qNFDr7inQnaxDUV8g7yfh0DorXcZ7nUcdRsEv+Fc8u3caATxUhwVo5BO8JvMxm76rFxeFsF6F5FCAbOt4Sr3+ijWTEVVaAwo5zgS0RJJfl9nscdgV3Rfu4pnfz+Te/nGpCHfNGpQvY0WvFADLSE/AXfUFmTwqVOAV53E=
Received: by 10.114.126.1 with SMTP id y1mr1560237wac.1181222255244;
        Thu, 07 Jun 2007 06:17:35 -0700 (PDT)
Received: from george ( [128.187.132.81])
        by mx.google.com with ESMTP id l22sm1617446waf.2007.06.07.06.17.34
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 07 Jun 2007 06:17:34 -0700 (PDT)
From: "Hilton Campbell" <hilton.campbell@gmail.com>
To: <java-user@lucene.apache.org>
References: <8d6059bb0706051104o32fd328ci42a8744db959f44c@mail.gmail.com> <4665CC5E.5010000@syr.edu> <46679948.9040102@teamware.com>
Subject: RE: How can I search over all documents NOT in a certain subset?
Date: Thu, 7 Jun 2007 07:17:32 -0600
Message-ID: <008701c7a906$35971460$824e070a@george>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AceoxgJd3bzjNUnxQ6+m6GSLT0S6LwAP8cDw
In-Reply-To: <46679948.9040102@teamware.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, that's actually come up.  The document ids are indeed changing which is
causing problems.  I'm still trying to work it out myself, but any help
would most definitely be appreciated.

Thanks,
Hilton Campbell

-----Original Message-----
From: Antony Bowesman [mailto:adb@teamware.com] 
Sent: Wednesday, June 06, 2007 11:36 PM
To: java-user@lucene.apache.org
Subject: Re: How can I search over all documents NOT in a certain subset?

Steven Rowe wrote:
> Conceptually (caveat: untested), you could:
> 
> 1. Extend Filter[1] (call it DejaVuFilter) to hold a BitSet per
> IndexReader.  The BitSet would hold one bit per doc[2], each initialized
> to true.
> 
> 2. Unset a DejaVuFilter instance's bit for each of your top N docs by
> walking the TopDocs returned by Searcher.search(Query,Filter,int)[3].
> Initially, you could pass in null for the Filter, and then for all
> following calls, an instance of DejaVuFilter.

Just a thought...

If Hilton wants to be aware of new Documents in the index since the previous

search, this requires opening a new IndexReader.

If only Documents have been added to the index I expect, but am not sure,
that 
the bits from the old IndexReader are still valid for the document numbers
in 
the new Reader.  However, if there have been deletions or optimisation has 
occurred between reader instances, then the document ids from the old reader
may 
not represent the same documents in the new reader, so the Filter for the
old 
reader will not be valid for the new search against the new reader and you
may 
get false matches.

I don't think there will be a problem if there are no deletions.

Antony






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 14:29:07 2007
Return-Path: <java-user-return-28522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50717 invoked from network); 7 Jun 2007 14:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 14:29:06 -0000
Received: (qmail 12367 invoked by uid 500); 7 Jun 2007 14:29:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12118 invoked by uid 500); 7 Jun 2007 14:29:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12094 invoked by uid 99); 7 Jun 2007 14:29:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 07:29:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 07:28:56 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HwIyZ-0002D4-EZ
	for java-user@lucene.apache.org; Thu, 07 Jun 2007 07:28:35 -0700
Message-ID: <11008997.post@talk.nabble.com>
Date: Thu, 7 Jun 2007 07:28:35 -0700 (PDT)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: FNFE on the index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm encountering this error and not sure why this is happening:

********************************
java.io.FileNotFoundException: /index/book/_19b87.tis (Too many open files)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
	at org.apache.lucene.store.FSIndexOutput.<init>(FSDirectory.java:498)
	at org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:324)
	at
org.apache.lucene.index.TermInfosWriter.initialize(TermInfosWriter.java:82)
	at org.apache.lucene.index.TermInfosWriter.<init>(TermInfosWriter.java:67)
	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:230)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:89)
	at org.apache.lucene.index.TransIndex.firstPhase(TransIndex.java:317)
	...
********************************

Any ideas on how to tackle this problem would be appreciated.  Thanks in
advance.

-los
-- 
View this message in context: http://www.nabble.com/FNFE-on-the-index-tf3884165.html#a11008997
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 15:57:35 2007
Return-Path: <java-user-return-28523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2662 invoked from network); 7 Jun 2007 15:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 15:57:33 -0000
Received: (qmail 42878 invoked by uid 500); 7 Jun 2007 15:57:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42834 invoked by uid 500); 7 Jun 2007 15:57:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42823 invoked by uid 99); 7 Jun 2007 15:57:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 08:57:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 08:57:22 -0700
Received: from [192.168.1.4] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 171AE3C440
	for <java-user@lucene.apache.org>; Fri,  8 Jun 2007 00:57:00 +0900 (JST)
Message-ID: <46682AA3.2000701@r.email.ne.jp>
Date: Fri, 08 Jun 2007 00:56:19 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FNFE on the index
References: <11008997.post@talk.nabble.com>
In-Reply-To: <11008997.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Have you read the following article at Lucene FAQ?

Why am I getting an IOException that says "Too many open files"?
http://wiki.apache.org/lucene-java/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82

Thank you,

Koji

moraleslos wrote:
> Hi,
>
> I'm encountering this error and not sure why this is happening:
>
> ********************************
> java.io.FileNotFoundException: /index/book/_19b87.tis (Too many open files)
> 	at java.io.RandomAccessFile.open(Native Method)
> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> 	at org.apache.lucene.store.FSIndexOutput.<init>(FSDirectory.java:498)
> 	at org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:324)
> 	at
> org.apache.lucene.index.TermInfosWriter.initialize(TermInfosWriter.java:82)
> 	at org.apache.lucene.index.TermInfosWriter.<init>(TermInfosWriter.java:67)
> 	at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:230)
> 	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:89)
> 	at org.apache.lucene.index.TransIndex.firstPhase(TransIndex.java:317)
> 	...
> ********************************
>
> Any ideas on how to tackle this problem would be appreciated.  Thanks in
> advance.
>
> -los
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 18:02:15 2007
Return-Path: <java-user-return-28524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7826 invoked from network); 7 Jun 2007 18:02:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 18:02:13 -0000
Received: (qmail 12440 invoked by uid 500); 7 Jun 2007 18:02:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12155 invoked by uid 500); 7 Jun 2007 18:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12144 invoked by uid 99); 7 Jun 2007 18:02:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 11:02:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 11:02:04 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7A92D.D29A8374"
Subject: np-pandock search problem (again, with more detail)
Date: Thu, 7 Jun 2007 13:01:06 -0500
Message-ID: <764F4310231D1541ABC1CBE540218E000289F0@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: np-pandock search problem (again, with more detail)
Thread-Index: AcepLdHUVnxJeDpDS5KxTDZxBe37lA==
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7A92D.D29A8374
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello

=20

I've asked before on this issue, and I think I have more information
now.

=20

I have in a lucene 1.4 index, some Field.Text fields stored.    I've
been focusing on the one called "name"

=20

In luke 0.7 , run on the command line from a jar, if I do a search for=20

=20

Name:"np-pandock*" I get two results:

=20

Np-pandock

Np-pandock-L

=20

If I do a search for "name:pandock*" I get

=20

Np-pandock

Np-pandock-1

Np-pandock-2

Np-pandock-L

Np-pandock-L1

Np-pandock-L2

=20

I'd like to be able to have a user search on "np-pandock" and they get
this full list.     But I can't seem to get there.

A search on "pandock" (and then I put the astrick on afterwards) gets
six results, but "np-pandock" gets two.   =20

=20

I'm using the standardanalyzer.... I can't imagine I need anything
fancy, so I stuck with the first one.

=20

A search for=20

=20

Name:pandock gets me the two

Name:pandock* gets me six

=20

What confuses me is that it finds the "-L" one in the smaller resultset.
Why "-L" and not "-L1" or "-L2"?

=20

Any help is greatly appreciated.

=20

--jN


------_=_NextPart_001_01C7A92D.D29A8374--

From java-user-return-28525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 18:11:53 2007
Return-Path: <java-user-return-28525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15775 invoked from network); 7 Jun 2007 18:11:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 18:11:48 -0000
Received: (qmail 44049 invoked by uid 500); 7 Jun 2007 18:11:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43995 invoked by uid 500); 7 Jun 2007 18:11:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43984 invoked by uid 99); 7 Jun 2007 18:11:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 11:11:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.196.96.91] (HELO smtp118.sbc.mail.re3.yahoo.com) (66.196.96.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jun 2007 11:11:38 -0700
Received: (qmail 9981 invoked from network); 7 Jun 2007 18:11:17 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@76.226.194.36 with plain)
  by smtp118.sbc.mail.re3.yahoo.com with SMTP; 7 Jun 2007 18:11:16 -0000
X-YMail-OSG: thdwkzYVM1lkyvBwL58e00yrXn.zj.2Ns87S_iZlERmcDaW9Ds3kO9qN_hX0M7noJ62ZoA5Jdw--
Message-ID: <46684A45.9070505@curtin.com>
Date: Thu, 07 Jun 2007 14:11:17 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: np-pandock search problem (again, with more detail)
References: <764F4310231D1541ABC1CBE540218E000289F0@bettylou.configureone.net>
In-Reply-To: <764F4310231D1541ABC1CBE540218E000289F0@bettylou.configureone.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

John Powers wrote:

> Np-pandock
> 
> Np-pandock-1
> 
> Np-pandock-2
> 
> Np-pandock-L
> 
> Np-pandock-L1
> 
> Np-pandock-L2

I'm not positive, but I think StandardAnalyzer splits this input at the 
hyphens.  That is, it gives the terms "Np", "pandock", "1", "2", "L", 
"L1", and "L2", but NOT "Np-pandoc", etc.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 18:41:25 2007
Return-Path: <java-user-return-28526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42911 invoked from network); 7 Jun 2007 18:40:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 18:40:43 -0000
Received: (qmail 14783 invoked by uid 500); 7 Jun 2007 18:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14743 invoked by uid 500); 7 Jun 2007 18:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14728 invoked by uid 99); 7 Jun 2007 18:40:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 11:40:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 11:40:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 486065B772; Thu,  7 Jun 2007 11:40:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 192727F403
	for <java-user@lucene.apache.org>; Thu,  7 Jun 2007 11:40:15 -0700 (PDT)
Date: Thu, 7 Jun 2007 11:40:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Need Lucene Compression help -- can pay nominal fee
In-Reply-To: <11001907.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0706071129120.18130@hal.rescomp.berkeley.edu>
References: <11001907.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I need to store all the attributes of the document i index as part of the
: index. And I need to get the size of the files as close to 20% of the
: original size as possible. If anyone can help with this I can pay a nominal
: fee. Please contact me if anyone can help.

Let's be clear about something here: Lucene is an "indexing" technology,
not a compression technology.  Lucene indexes *can* be smaller then the
source corpus they index for a variety of reasons (most notably because
the inverted index structure allows a more susinect represetation of the
same words appearing in multiple docuemnts, but things like stop word
removal play a big part as well) but this reduced size only applies to the
*indexed* fields.  If you "store" data in Lucene there is nothing
intrinisic in the Lucene that makes it smaller.  If you have a chunk of
text, and you tell Lucene to store that text, and index that text, it
doesn't matter how space efficient the "index" is, Lucene still still
needs to store all of that text.

Here's a few simple steps to achieve what you want, and i won't charge you
anything for it...

  1) take your existing code for building an index, and change it so that
all of the options to "store" field values are commented out, and only the
"indexed" fields exist.
  2) index your corpus of size X, note the size of the index Y.  compute
the value Z such that:    Z = (0.20 * X) - Y
  3) go find a compression library A that can compress your corpus of size
X down to size Z
  4) go edit your orriginal code to use algorithm A to compress all of
your stored fields before adding them to Lucene.

Viola!



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 20:25:15 2007
Return-Path: <java-user-return-28527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10706 invoked from network); 7 Jun 2007 20:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 20:25:14 -0000
Received: (qmail 19503 invoked by uid 500); 7 Jun 2007 20:25:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19307 invoked by uid 500); 7 Jun 2007 20:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19265 invoked by uid 99); 7 Jun 2007 20:25:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 13:25:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 13:25:04 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l57KOgif090848
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 20:24:42 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l57KOgBP3850464
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 22:24:42 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l57KOgqN003374
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 22:24:42 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l57KOfTA003371
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 22:24:42 +0200
In-Reply-To: <46684A45.9070505@curtin.com>
Subject: Re: np-pandock search problem (again, with more detail)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF1118F1A3.E7B0FF16-ON882572F3.006D73BE-882572F3.006FD1D5@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 7 Jun 2007 13:21:22 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 07/06/2007 23:24:41
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Michael D. Curtin wrote:

> > Np-pandock-L1
> > Np-pandock-L2
>
> I'm not positive, but I think StandardAnalyzer splits this input at the
> hyphens.  That is, it gives the terms "Np", "pandock", "1", "2", "L",
> "L1", and "L2", but NOT "Np-pandoc", etc.

I think it splits by hyphens unless the no-hyphen
part has digits, so:
  np-pandock-a7
becomes
  np
  pandock-a7
This is for the indexing part.
For the query part, prefixQuery is not subject to standard analysis
(just lower casing), so you could be even more surprised that
this query:
  Np-pandock-L2
would find that document (it would become a phrase
query "np pandock-l2"), but this query:
  Np-pandock-L2*
would not find any document, because it would become
a prefix query
  np-pandock-l2*
and at indexing such token (np-pandock-l2) was never created.

Using Luke you should be able to see the tokens in the
index as well as how the query is parsed (under
query details).

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 20:31:01 2007
Return-Path: <java-user-return-28528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16341 invoked from network); 7 Jun 2007 20:31:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 20:31:00 -0000
Received: (qmail 35429 invoked by uid 500); 7 Jun 2007 20:30:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35388 invoked by uid 500); 7 Jun 2007 20:30:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35377 invoked by uid 99); 7 Jun 2007 20:30:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 13:30:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.196.96.97] (HELO smtp124.sbc.mail.re3.yahoo.com) (66.196.96.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jun 2007 13:30:50 -0700
Received: (qmail 78833 invoked from network); 7 Jun 2007 20:30:28 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@76.226.194.36 with plain)
  by smtp124.sbc.mail.re3.yahoo.com with SMTP; 7 Jun 2007 20:30:28 -0000
X-YMail-OSG: 5HcsGsEVM1laZ1ebu2Z.PjeFnYQ9m9MKrNqSvs.AFvO_YrxrtIWrTDjdh2jmtQXXWGDeLPmRFw--
Message-ID: <46686AE4.8050808@curtin.com>
Date: Thu, 07 Jun 2007 16:30:28 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: np-pandock search problem (again, with more detail)
References: <OF1118F1A3.E7B0FF16-ON882572F3.006D73BE-882572F3.006FD1D5@il.ibm.com>
In-Reply-To: <OF1118F1A3.E7B0FF16-ON882572F3.006D73BE-882572F3.006FD1D5@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:

> I think it splits by hyphens unless the no-hyphen
> part has digits, so:
>   np-pandock-a7
> becomes
>   np
>   pandock-a7
> This is for the indexing part.

Wow!  Do you know the thinking behind that, i.e. why a number in a 
hyphenated expression prevents the split?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 21:07:44 2007
Return-Path: <java-user-return-28529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32582 invoked from network); 7 Jun 2007 21:07:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 21:07:43 -0000
Received: (qmail 16984 invoked by uid 500); 7 Jun 2007 21:07:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16956 invoked by uid 500); 7 Jun 2007 21:07:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16945 invoked by uid 99); 7 Jun 2007 21:07:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 14:07:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 14:07:34 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l57L7Ceh153868
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 21:07:12 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l57L7Cbe4165684
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 23:07:12 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l57L7CuN024513
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 23:07:12 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l57L7CNt024506
	for <java-user@lucene.apache.org>; Thu, 7 Jun 2007 23:07:12 +0200
In-Reply-To: <46686AE4.8050808@curtin.com>
Subject: Re: np-pandock search problem (again, with more detail)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFDFF02ED6.C306FBDB-ON882572F3.0071292B-882572F3.0073DCBD@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 7 Jun 2007 14:05:31 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 08/06/2007 00:07:11
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Michael D. Curtin" <mike@curtin.com> wrote on 07/06/2007 13:30:28:

> > I think it splits by hyphens unless the no-hyphen
> > part has digits, so:
> >   np-pandock-a7
> > becomes
> >   np
> >   pandock-a7
> > This is for the indexing part.
>
> Wow!  Do you know the thinking behind that, i.e. why a number in a
> hyphenated expression prevents the split?

I actually asked myself the same question before the previous
post - javadocs for StandardAnalyzer just has the obvious - a
grammar-based tokenizer constructed with JavaCC.... - the wiki
page AnalysisParalysis also didn't explain much on the logic
behind it.

>From the StandardAnalyzer javacc grammar :
  // floating point, serial, model numbers, ip addresses, etc.
  // every other segment must have at least one digit
  <NUM: (<ALPHANUM> <P> <HAS_DIGIT> .... etc.
  <#P: ("_"|"-"|"/"|"."|",") >
My understanding of this: a non-whitespace sequence is broken
at either of these 5 chars
   _  -  /  .  ,
unless the part that follows part has a digit, in which case
it is assumed to be (part of) a serial no., model, etc.

Seems we can improve the documentation here.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 21:15:53 2007
Return-Path: <java-user-return-28530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36097 invoked from network); 7 Jun 2007 21:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 21:15:51 -0000
Received: (qmail 34545 invoked by uid 500); 7 Jun 2007 21:15:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34510 invoked by uid 500); 7 Jun 2007 21:15:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34489 invoked by uid 99); 7 Jun 2007 21:15:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 14:15:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 14:15:42 -0700
Received: by wr-out-0506.google.com with SMTP id i4so546933wra
        for <java-user@lucene.apache.org>; Thu, 07 Jun 2007 14:15:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=ZxzylAAZ/cqla35ksv7LZC/vWK6yVrboOzrttVSvzmWKzGhwqpKc8OeyP1242QlNjUQ9NHrfm/gxEkyFEsmOuCtjaoPrhEF199uINvFFTgBaAl3oCbmf2GWl2kBOT9EKC46KrnoqrHStHsD3NT3uRP8j/Q25j957GYEzxaoGfT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=XJePFz+qOMoS+xcpMZrYoJVhVER6dc12+9aGXzxSZD1vfsYtUY+gZg8/TBjNNGzX7/9oSD7cpxwymmuGLR5NL0VgHh4Q5twBlaj9TtUpjjlnmAKrZCiVlsRxVqRuY/aF6g6oClGFl0T2YSUPB15D3K6mhOpjeoxmv02/OsCqCAY=
Received: by 10.90.63.16 with SMTP id l16mr2178450aga.1181250921176;
        Thu, 07 Jun 2007 14:15:21 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id m6sm1219797wrm.2007.06.07.14.15.19
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 07 Jun 2007 14:15:20 -0700 (PDT)
Message-ID: <4668755F.90306@gmail.com>
Date: Thu, 07 Jun 2007 17:15:11 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: [ANN] Qsol 1.0 - First version of my proximity/precedence/customizable
 Query parser
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

http://myhardshadow.com/qsol.php

Qsol 1.0 has been released. Qsol is my very customizable query parser 
i.e. customizable syntax, order of operations, etc.

A handful of the features:

1.Proximity Operators in the search syntax

2.Paragraph/Sentence proximity searching

3.FieldBreaker for proximity searching

4.Query abbreviation tokens

5.SuggestedQuery support

6.Very customizable search syntax

7.Easily replaceable Date Parser

8.A fully precedence aware syntax

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 21:39:25 2007
Return-Path: <java-user-return-28531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54101 invoked from network); 7 Jun 2007 21:39:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 21:39:23 -0000
Received: (qmail 81379 invoked by uid 500); 7 Jun 2007 21:39:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81330 invoked by uid 500); 7 Jun 2007 21:39:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81319 invoked by uid 99); 7 Jun 2007 21:39:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 14:39:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.68.230] (HELO web36204.mail.mud.yahoo.com) (209.191.68.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jun 2007 14:39:15 -0700
Received: (qmail 84316 invoked by uid 60001); 7 Jun 2007 21:38:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=wyUwqJE95o6hLi06azcoQf6a22Gea73+cfpYtCmy1pQVFDdKjFexUIfcjQ0SXie5xJANsfmzEualfaS0/l2LjFz2YSHlDhf8v41t7W+7ziAtIy2J1718xUCxylNanylPpZG4Mr0HszUz+9r0bOyJscFYGK0WQhehx0Zo0IOIS8E=;
X-YMail-OSG: me_HfAwVM1l.tLQaTlBeQ1DT2GImFkH3Hty5kVbWzTmNKJuAPHkb5q9buqt6ATf3.Gl.RnJP15LmHUSRddUlxfYt64.cUT1562a1TkJalgUU22GVCtA0jVGywpAzoQ--
Received: from [129.55.200.20] by web36204.mail.mud.yahoo.com via HTTP; Thu, 07 Jun 2007 14:38:53 PDT
Date: Thu, 7 Jun 2007 14:38:53 -0700 (PDT)
From: Lindsey Hess <lindseyhess83@yahoo.com>
Subject: Lucene & MySql
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1516605453-1181252333=:84109"
Content-Transfer-Encoding: 8bit
Message-ID: <7508.84109.qm@web36204.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1516605453-1181252333=:84109
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,

I'm new to Lucene...very new.  I'd like to use Lucene to index a MySQL database (six tables, actually), and then use it to search the database in lieu of using SQL.  I can't seem to find any sample code to do this, so I was hoping that someone could share some or point me in the right direction.

Thanks,

Lindsey

       
---------------------------------
Pinpoint customers who are looking for what you sell. 
--0-1516605453-1181252333=:84109--

From java-user-return-28532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 21:44:27 2007
Return-Path: <java-user-return-28532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56663 invoked from network); 7 Jun 2007 21:44:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 21:44:25 -0000
Received: (qmail 92783 invoked by uid 500); 7 Jun 2007 21:44:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92755 invoked by uid 500); 7 Jun 2007 21:44:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92743 invoked by uid 99); 7 Jun 2007 21:44:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 14:44:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.196.96.90] (HELO smtp117.sbc.mail.re3.yahoo.com) (66.196.96.90)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jun 2007 14:44:16 -0700
Received: (qmail 12968 invoked from network); 7 Jun 2007 21:43:54 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@76.226.194.36 with plain)
  by smtp117.sbc.mail.re3.yahoo.com with SMTP; 7 Jun 2007 21:43:54 -0000
X-YMail-OSG: LsVNEpQVM1lirzUw0thFiH92MsY2JmHT.jqh4_RDsZDwCeutpoWLFxqmjFu3iRd1piNy488p8A--
Message-ID: <46687C1A.3000504@curtin.com>
Date: Thu, 07 Jun 2007 17:43:54 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: np-pandock search problem (again, with more detail)
References: <OFDFF02ED6.C306FBDB-ON882572F3.0071292B-882572F3.0073DCBD@il.ibm.com>
In-Reply-To: <OFDFF02ED6.C306FBDB-ON882572F3.0071292B-882572F3.0073DCBD@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:

>>>From the StandardAnalyzer javacc grammar :
>   // floating point, serial, model numbers, ip addresses, etc.
>   // every other segment must have at least one digit
>   <NUM: (<ALPHANUM> <P> <HAS_DIGIT> .... etc.
>   <#P: ("_"|"-"|"/"|"."|",") >
> My understanding of this: a non-whitespace sequence is broken
> at either of these 5 chars
>    _  -  /  .  ,
> unless the part that follows part has a digit, in which case
> it is assumed to be (part of) a serial no., model, etc.

Weird.  The definition seems to allow expressions of the form 
A-B-C-D-E-..., where
-   "-" can be one of the five characters you mentioned
-   the A, B, C, ... are alphanumeric pseudo-words
-   A, C, E, ... or B, D, F, ... must have digits, i.e. alternating
     digit components
So "A-1-B-2" and "1-A-2-B" would be kept as single tokens, but "A-B-1-2" 
would not.  Seems more than a little hokey, but I suppose it's been 
working for a long time, for the most part.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 22:07:45 2007
Return-Path: <java-user-return-28533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70934 invoked from network); 7 Jun 2007 22:07:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 22:07:44 -0000
Received: (qmail 44420 invoked by uid 500); 7 Jun 2007 22:07:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44389 invoked by uid 500); 7 Jun 2007 22:07:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44378 invoked by uid 99); 7 Jun 2007 22:07:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 15:07:40 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.90.178 as permitted sender)
Received: from [66.249.90.178] (HELO ik-out-1112.google.com) (66.249.90.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 15:07:35 -0700
Received: by ik-out-1112.google.com with SMTP id b32so563353ika
        for <java-user@lucene.apache.org>; Thu, 07 Jun 2007 15:07:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jDmngMsPf+6/GI0tESx8GicF9WD52FKn6Z4G//8luA554KCrex7y/GLaI0TX0OhdmGuvwJAqXg+VsdIbZpRCCXvLgNUkW2MCCaG2rBiuPyUNgqqbb+D3brRExPPVRybwvi44DeEMap/iCijZg+xRg5LZIHNo/h3pKk8UAS/6TKg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZOEMlnuDFw7Xue4/lihZODReLSLU2VW4lTvZKpT9teHIsImr5pMfvZ6LlvAwi62QttJ5Pb+U0pOk2Zb6Asz5PIAe6WKoHvCp9yjc66Aq6QztDgf0hdgVZwtjhqIFLbTPmP/g/QzFQzCuhpZKoDJYvF0tjEaCGeuQb47NMTnmeHw=
Received: by 10.78.160.2 with SMTP id i2mr947348hue.1181254033374;
        Thu, 07 Jun 2007 15:07:13 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Thu, 7 Jun 2007 15:07:13 -0700 (PDT)
Message-ID: <6e3ae6310706071507v29797227qddaad0f706853bd5@mail.gmail.com>
Date: Thu, 7 Jun 2007 15:07:13 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene & MySq
In-Reply-To: <7508.84109.qm@web36204.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7508.84109.qm@web36204.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think DBSight can be a great learning tool for Lucene. You can just
use the web UI to configure for all your tables and flatten objects
into Lucene's documents.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 6/7/07, Lindsey Hess <lindseyhess83@yahoo.com> wrote:
> Hi,
>
> I'm new to Lucene...very new.  I'd like to use Lucene to index a MySQL database (six tables, actually), and then use it to search the database in lieu of using SQL.  I can't seem to find any sample code to do this, so I was hoping that someone could share some or point me in the right direction.
>
> Thanks,
>
> Lindsey
>
>
> ---------------------------------
> Pinpoint customers who are looking for what you sell.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 22:31:03 2007
Return-Path: <java-user-return-28534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80833 invoked from network); 7 Jun 2007 22:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 22:31:02 -0000
Received: (qmail 82458 invoked by uid 500); 7 Jun 2007 22:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82413 invoked by uid 500); 7 Jun 2007 22:30:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82401 invoked by uid 99); 7 Jun 2007 22:30:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 15:30:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 15:30:53 -0700
Received: by ug-out-1314.google.com with SMTP id m2so858027uge
        for <java-user@lucene.apache.org>; Thu, 07 Jun 2007 15:30:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rb7s4isVX8111CzOuK85/X0jmFLsRDFzm3LDzjuvJ0nBMZEUZS3flRf53/C71SpkAf8K9d7PUr1m7e27YMC7eMXTV6PpGj8AgoCwg/XRQTtSV1kLVnxJ1vFFNFn+SAqb1xxmrnqDKTG1ZZ7ZWaRlSfPA6Q3EiOhpcPtgYTPg7Ck=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qQm2b3+hySatmU2WnbWyFDSBiPPTpUaYavjprtvudvxMeNJp8aPD0VFXgFxCIPD3P9dIETd4rpKHD+9R+g3Fwd9bLQp4Xq7Eb/iw5zKktqjvxSFL50ElhzDtK4n7gi2WoX9Njxsi0IlTQErdGdvJcPBzAaboqc3zwBiDol/9E04=
Received: by 10.82.175.17 with SMTP id x17mr4191345bue.1181255431660;
        Thu, 07 Jun 2007 15:30:31 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Thu, 7 Jun 2007 15:30:31 -0700 (PDT)
Message-ID: <359a92830706071530k6697931cl5bdfc80f2ca573b3@mail.gmail.com>
Date: Thu, 7 Jun 2007 18:30:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: np-pandock search problem (again, with more detail)
In-Reply-To: <46687C1A.3000504@curtin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36200_11616863.1181255431637"
References: <OFDFF02ED6.C306FBDB-ON882572F3.0071292B-882572F3.0073DCBD@il.ibm.com>
	 <46687C1A.3000504@curtin.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36200_11616863.1181255431637
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Actually, my mind kind of overloaded when I read the following from
the (2.1)  javadoc....


   - Splits words at punctuation characters, removing punctuation.
   However, a dot that's not followed by whitespace is considered part of a
   token.
   - Splits words at hyphens, unless there's a number in the token, in
   which case the whole token is interpreted as a product number and is not
   split.
   - Recognizes email addresses and internet hostnames as one token.


All of which is just fine and I'm glad someone else wrote the grammar,
but I'm finding more and more that I'm constructing my own
analyzers/tokenizers instead since I'm in a specialized space, often
massaging the input stream outside the analyzer. For instance, is
O'Hara best tokenized as one, two, or three tokens? In genealogy,
it's best tokenized as ohara, which none of the standard analyzers
would treat "properly". As in "just the way I want it to be treated" <G>....

Best
Erick


On 6/7/07, Michael D. Curtin <mike@curtin.com> wrote:
>
> Doron Cohen wrote:
>
> >>From the StandardAnalyzer javacc grammar :
> >   // floating point, serial, model numbers, ip addresses, etc.
> >   // every other segment must have at least one digit
> >   <NUM: (<ALPHANUM> <P> <HAS_DIGIT> .... etc.
> >   <#P: ("_"|"-"|"/"|"."|",") >
> > My understanding of this: a non-whitespace sequence is broken
> > at either of these 5 chars
> >    _  -  /  .  ,
> > unless the part that follows part has a digit, in which case
> > it is assumed to be (part of) a serial no., model, etc.
>
> Weird.  The definition seems to allow expressions of the form
> A-B-C-D-E-..., where
> -   "-" can be one of the five characters you mentioned
> -   the A, B, C, ... are alphanumeric pseudo-words
> -   A, C, E, ... or B, D, F, ... must have digits, i.e. alternating
>      digit components
> So "A-1-B-2" and "1-A-2-B" would be kept as single tokens, but "A-B-1-2"
> would not.  Seems more than a little hokey, but I suppose it's been
> working for a long time, for the most part.
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36200_11616863.1181255431637--

From java-user-return-28535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 22:37:51 2007
Return-Path: <java-user-return-28535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84560 invoked from network); 7 Jun 2007 22:37:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 22:37:49 -0000
Received: (qmail 94517 invoked by uid 500); 7 Jun 2007 22:37:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94474 invoked by uid 500); 7 Jun 2007 22:37:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94463 invoked by uid 99); 7 Jun 2007 22:37:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 15:37:45 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 15:37:39 -0700
Received: by ug-out-1314.google.com with SMTP id m2so859120uge
        for <java-user@lucene.apache.org>; Thu, 07 Jun 2007 15:37:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CCN+pIRbJfbyAYlew1tViehtSwWc9UWRJXEq4oXTPQHIW6kSJw2N2OIZn2g7bwyXHGypsxL2A0ZMhdo+0MHaIPt42JuxMVnLkMgVLzpuVFWPcztaWVZy18tKxC/RIsY4fXF2UZKcyFkpOmx7y6poWh9zdRQ92/v5btSj+BB6O30=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FGZy9FMxO3OrTO/nTchxwxZGyzoZ30imstBRlfQnNZo43qCAJ3z3UvJx88ySIOSM9tcpCX31AdKhJqymdLFfqzfMj58zGb++K7gDXg3vb5rxEbUm6RnChTNxT2yg47SIxUTKn3aX9fTzl9eWg2vXWWZ0o9g0dePWNP3wTKNr77M=
Received: by 10.82.146.14 with SMTP id t14mr4209038bud.1181255838032;
        Thu, 07 Jun 2007 15:37:18 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Thu, 7 Jun 2007 15:37:18 -0700 (PDT)
Message-ID: <359a92830706071537u1bb20ab5ya1241348ffc632fe@mail.gmail.com>
Date: Thu, 7 Jun 2007 18:37:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene & MySq
In-Reply-To: <7508.84109.qm@web36204.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36284_30457024.1181255838005"
References: <7508.84109.qm@web36204.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36284_30457024.1181255838005
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Understand that Lucene is an indexing engine. "out of the box", there's
no understanding of databases etc. built in. But as Chris Lu points out,
there are applications out there that do this for you.....

If you try to roll your own, you'll have to write some code that
queries the database, and use Lucene to index that data. Then
you'll have to write code that searches your index and "does
the right thing"....

Best
Erick

On 6/7/07, Lindsey Hess <lindseyhess83@yahoo.com> wrote:
>
> Hi,
>
> I'm new to Lucene...very new.  I'd like to use Lucene to index a MySQL
> database (six tables, actually), and then use it to search the database in
> lieu of using SQL.  I can't seem to find any sample code to do this, so I
> was hoping that someone could share some or point me in the right direction.
>
> Thanks,
>
> Lindsey
>
>
> ---------------------------------
> Pinpoint customers who are looking for what you sell.

------=_Part_36284_30457024.1181255838005--

From java-user-return-28536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 07 23:10:24 2007
Return-Path: <java-user-return-28536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94444 invoked from network); 7 Jun 2007 23:10:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2007 23:10:23 -0000
Received: (qmail 32298 invoked by uid 500); 7 Jun 2007 23:10:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32268 invoked by uid 500); 7 Jun 2007 23:10:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32257 invoked by uid 99); 7 Jun 2007 23:10:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 16:10:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [168.144.250.246] (HELO xsmtp06.mail2web.com) (168.144.250.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 16:10:14 -0700
Received: from [10.5.14.7] (helo=exfe02.ad2.softcom.biz)
	by xsmtp06.mail2web.com with esmtp (Exim 4.63)
	(envelope-from <anna@sendmemobile.com>)
	id 1HwR72-0004Pg-TV
	for java-user@lucene.apache.org; Thu, 07 Jun 2007 19:09:54 -0400
Received: from CL4EXBE03.ad2.softcom.biz ([10.5.13.16]) by exfe02.ad2.softcom.biz with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 7 Jun 2007 19:11:02 -0400
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 7 Jun 2007 19:03:16 -0400
Message-ID: <18D8E943D728594C864C7AA427FDC6220FC1DE16@CL4EXBE03.ad2.softcom.biz>
In-Reply-To: <Pine.LNX.4.58.0706061122540.9019@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case Insensitive but not Tokenized
Thread-Index: AceoaE6S1/7ZGneETryoKuAdp74srgA75nxA
References: <18D8E943D728594C864C7AA427FDC6220FA9C975@CL4EXBE03.ad2.softcom.biz> <Pine.LNX.4.58.0706061122540.9019@hal.rescomp.berkeley.edu>
From: "Anna Putnam" <anna@sendmemobile.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Jun 2007 23:11:02.0965 (UTC) FILETIME=[1E588650:01C7A959]
X-Spam-Relays-External: [ ip=10.5.14.7 rdns= helo=exfe02.ad2.softcom.biz 
	by=xsmtp06.mail2web.com ident= envfrom=anna@sendmemobile.com intl=0 
	id=1HwR72-0004Pg-TV auth= ] [ ip=10.5.13.16 rdns= 
	helo=CL4EXBE03.ad2.softcom.biz by=exfe02.ad2.softcom.biz ident= 
	envfrom= intl=0 id= auth= ]
X-Spam-Relays-Internal: 
X-Spam-Relays-Untrusted: 
X-Spam-Relays-Trusted: [ ip=10.5.14.7 rdns= helo=exfe02.ad2.softcom.biz 
	by=xsmtp06.mail2web.com ident= envfrom=anna@sendmemobile.com intl=0 
	id=1HwR72-0004Pg-TV auth= ] [ ip=10.5.13.16 rdns= 
	helo=CL4EXBE03.ad2.softcom.biz by=exfe02.ad2.softcom.biz ident= 
	envfrom= intl=0 id= auth= ]
Subject: RE: Case Insensitive but not Tokenized
X-Virus-Checked: Checked by ClamAV on apache.org

Hoss,

The KeywordTokenizer and LowerCaseFilter worked great and was exactly
what I needed.

Thanks!

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Wednesday, June 06, 2007 11:25 AM
To: java-user@lucene.apache.org
Subject: Re: Case Insensitive but not Tokenized


: For now, I am storing both the exact phrase (as is, for retrieval) and
: the string lower-cased (to search against) with no analyzers in the
: index.  When I search, I lower-case my query string and search against
: my lower-cased index, I give the matching exact phrase back to the
user.
: This doesn't seem like the best approach but I can't seem to make it
: work any other way.  Any suggestions?

1) if you only ever return the exact string, then you only need to store
it and you don't need to store the lowercase version
2) if you only ever want to do case-insensitive searching, you only need
to index the lowercase field, and you dont' need to index the exact
string.
3) the KeywordTokenizer along with a LowerCaseFilter should take vare of
everything you want, without needing to preprocess the input to
lowercase
it before using lucene.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 01:32:11 2007
Return-Path: <java-user-return-28537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40737 invoked from network); 8 Jun 2007 01:32:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 01:32:10 -0000
Received: (qmail 13284 invoked by uid 500); 8 Jun 2007 01:32:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13242 invoked by uid 500); 8 Jun 2007 01:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13230 invoked by uid 99); 8 Jun 2007 01:32:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 18:32:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 18:32:02 -0700
Received: by ug-out-1314.google.com with SMTP id m2so885587uge
        for <java-user@lucene.apache.org>; Thu, 07 Jun 2007 18:31:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=SAMTSPaCsqNncQWt1D9FDc79AEc36g7uRp3WBLhO5xag2erdh2SbtWDcOJa4SL3Jex87FSi+8FiBTaTri1iW5kTc2VquIn0T9JyB6qaJnFlLw5gzOksTfS/K6/WhJbq3g+GpnD/sUWFwXNloWxqujnUPiuxFjS8yLwnDiNTSCYA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=iE1+ABub4DDsSDF9P1uXgJpMKimqd9sldf93k7HOyo9KRGi9sglvc50PLVs0376g+I9jnXrX7+VvMhBMIQXLyZvUoMCNT9CHBiix2Ly3nbU3FE61comwtkrmkm7ex3zzU9nwwaySfVlhJoa0I/bZnA7dAkudhtwP8q+cqQooBT4=
Received: by 10.78.130.6 with SMTP id c6mr993385hud.1181266301316;
        Thu, 07 Jun 2007 18:31:41 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Thu, 7 Jun 2007 18:31:41 -0700 (PDT)
Message-ID: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
Date: Thu, 7 Jun 2007 18:31:41 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: How to implement AJAX search~Lucene Search part?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I would like to implement an AJAX search. Basically when user types in
several characters,  I will try to search the Lucene index and found
all possible matching items.

Seems I need to use wildcard query like "test*" to matching anything.
Is this the only way to do it? It doesn't seems quite efficient,
especially when you just typed in the first character.

I guess the "good" way is to go through the terms, and return as soon
as, for example, 10 terms are found.

I am wondering is there anything like this already built?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 02:32:45 2007
Return-Path: <java-user-return-28538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62377 invoked from network); 8 Jun 2007 02:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 02:32:43 -0000
Received: (qmail 89988 invoked by uid 500); 8 Jun 2007 02:32:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89946 invoked by uid 500); 8 Jun 2007 02:32:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89935 invoked by uid 99); 8 Jun 2007 02:32:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 19:32:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 19:32:36 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id C0F93FE2B8
	for <java-user@lucene.apache.org>; Thu,  7 Jun 2007 19:32:14 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <6D7B242B-D562-43EE-BB7A-47A880F198DF@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Grant Ingersoll <gsingers@apache.org>
Subject: Documentation Promotion is in Motion!
Date: Thu, 7 Jun 2007 22:32:13 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Calling all Lucene Users!

You know you love Lucene for a whole variety of reasons (fast,  
friendly, fun, did I say fast?) so how about showing a little love  
back?  :-)

We (as in the committers and contributors) are trying out a new  
release mechanism whereby we are implementing a code freeze on the  
trunk (well, technically not a freeze, but...)  We are doing this so  
we can nail down things like Maven artifacts and also to improve the  
overall release process and, here's where you come in, improve the  
documentation.  We did the freeze/branch today and are planning on  
spending the next 10 days or so documenting as much as we can (or  
just improving the documentation, or, even, just identifying where  
more docs are needed).  Then, we will do the official release and you  
all can enjoy Lucene 2.2.

So, what I would like to ask, is that people take the time to help us  
out with the documentation.  See http://wiki.apache.org/lucene-java/ 
Documentation_Improvements (be sure to read the java-dev mail thread:  
http://www.nabble.com/Documentation-Brainstorming- 
tf3818348.html#a10810352) for ideas on where to start (and please  
feel free to add your own, it is a Wiki after all!)  Obviously we  
can't address everything in 10 days, but we can take a crack at it  
and little by little we will get there.

But how can I help, you might ask?  Here are some tips:

1. Edit the wiki page above (getting a Wiki account takes zero time)
2. Contribute a Use Case:  http://wiki.apache.org/lucene-java/UseCases
3. Contribute a Best Practice: http://wiki.apache.org/lucene-java/ 
BestPractices

4. Add a JIRA issue for real, live issues related to documentation.   
Think the website docs could be improved in a specific way?  Let us  
know.  Same goes for javadocs, etc.

5. Supply a patch!  Make a case for it, bug us to apply it (but not  
too much).  See http://wiki.apache.org/lucene-java/HowToContribute  
for how this all works.  It really is quite easy, trust me.

6. Close any old issues you may have put into JIRA that are no longer  
valid.

7.  Let us know where in particular the docs are, shall we say,  
insufficient (but, please, be nice about it, we all want things to be  
better, right?)  Let us know where you are confused by the docs.

Even if we just get a bunch of things identified during this round  
for the next time around (2.3), this will be a great step in the  
right direction.  Somehow, t I bet we can do better than that.

So, spare us 5 minutes or more of your time and help us help you!

Cheers,
Grant

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 04:19:36 2007
Return-Path: <java-user-return-28539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14949 invoked from network); 8 Jun 2007 04:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 04:19:35 -0000
Received: (qmail 54769 invoked by uid 500); 8 Jun 2007 04:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54740 invoked by uid 500); 8 Jun 2007 04:19:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54719 invoked by uid 99); 8 Jun 2007 04:19:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 21:19:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [168.144.250.215] (HELO xsmtp02.mail2web.com) (168.144.250.215)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jun 2007 21:19:25 -0700
Received: from [10.5.14.7] (helo=exfe02.ad2.softcom.biz)
	by xsmtp02.mail2web.com with esmtp (Exim 4.63)
	(envelope-from <anna@sendmemobile.com>)
	id 1HwVwE-00023Q-PQ
	for java-user@lucene.apache.org; Fri, 08 Jun 2007 00:19:04 -0400
Received: from CL4EXBE03.ad2.softcom.biz ([10.5.13.16]) by exfe02.ad2.softcom.biz with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 8 Jun 2007 00:15:55 -0400
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 8 Jun 2007 00:12:56 -0400
Message-ID: <18D8E943D728594C864C7AA427FDC6220FC1E0EC@CL4EXBE03.ad2.softcom.biz>
In-Reply-To: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to implement AJAX search~Lucene Search part?
Thread-Index: AcepbRkeLaMjFiTGQXyjHXpHHph09QAFcaKw
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
From: "Anna Putnam" <anna@sendmemobile.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Jun 2007 04:15:55.0840 (UTC) FILETIME=[B5BFBC00:01C7A983]
X-Spam-Relays-External: [ ip=10.5.14.7 rdns= helo=exfe02.ad2.softcom.biz 
	by=xsmtp02.mail2web.com ident= envfrom=anna@sendmemobile.com intl=0 
	id=1HwVwE-00023Q-PQ auth= ] [ ip=10.5.13.16 rdns= 
	helo=CL4EXBE03.ad2.softcom.biz by=exfe02.ad2.softcom.biz ident= 
	envfrom= intl=0 id= auth= ]
X-Spam-Relays-Internal: 
X-Spam-Relays-Untrusted: 
X-Spam-Relays-Trusted: [ ip=10.5.14.7 rdns= helo=exfe02.ad2.softcom.biz 
	by=xsmtp02.mail2web.com ident= envfrom=anna@sendmemobile.com intl=0 
	id=1HwVwE-00023Q-PQ auth= ] [ ip=10.5.13.16 rdns= 
	helo=CL4EXBE03.ad2.softcom.biz by=exfe02.ad2.softcom.biz ident= 
	envfrom= intl=0 id= auth= ]
Subject: RE: How to implement AJAX search~Lucene Search part?
X-Virus-Checked: Checked by ClamAV on apache.org

Check out
http://www.brandspankingnew.net/specials/ajax_autosuggest/ajax_autosugge
st_autocomplete.html

It takes an XML response as input (which could be backed by lucene). =20

I have implemented this and it works pretty fast, although I do have a
small dataset.

-Anna

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com]=20
Sent: Thursday, June 07, 2007 6:32 PM
To: java-user@lucene.apache.org
Subject: How to implement AJAX search~Lucene Search part?

Hi,

I would like to implement an AJAX search. Basically when user types in
several characters,  I will try to search the Lucene index and found
all possible matching items.

Seems I need to use wildcard query like "test*" to matching anything.
Is this the only way to do it? It doesn't seems quite efficient,
especially when you just typed in the first character.

I guess the "good" way is to go through the terms, and return as soon
as, for example, 10 terms are found.

I am wondering is there anything like this already built?

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n
_3_minutes

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 07:06:14 2007
Return-Path: <java-user-return-28540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62282 invoked from network); 8 Jun 2007 07:06:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 07:06:13 -0000
Received: (qmail 46049 invoked by uid 500); 8 Jun 2007 07:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46011 invoked by uid 500); 8 Jun 2007 07:06:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45995 invoked by uid 99); 8 Jun 2007 07:06:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 00:06:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 00:06:01 -0700
Received: by nf-out-0910.google.com with SMTP id d3so22973nfc
        for <java-user@lucene.apache.org>; Fri, 08 Jun 2007 00:05:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=tF/btvAXI020K6z3Muq3C+vRZi4ZNURDqw45bwxxdHV+/IWcx+7dO2jui+8ToKti3MVSOR4poGr8O3H301ZfvUhoXKpQXCHwzvwu5kFPmQJLYpygBRLItepJ1eWBnT9pyPyj2bQHX7mgexdss+xzY3guq8oIjiYFHY8MJdlJ9Bk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=D+35PI7EIuY+13R/mw1XvyGH1TgQJ+mWo8qG/7Ugy/Q/UjwZg7C5JY+DAMLKy6hopAWA3IcTn9xSDgFBj8SE2dxs1bGcT7HubuWax1cfMXNE1eGmix9pgGiwLZ/SAgJzBydlcwU6rGzr5hrNMA99HcVXG5NYnGqdUeChEtJFWfs=
Received: by 10.82.112.16 with SMTP id k16mr4712196buc.1181286338393;
        Fri, 08 Jun 2007 00:05:38 -0700 (PDT)
Received: from ?192.168.1.4? ( [83.249.100.221])
        by mx.google.com with ESMTP id 35sm4105379nfu.2007.06.08.00.05.37
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 08 Jun 2007 00:05:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0202934E-2CFB-41B6-ADCC-13B0F3B210DF@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: How to implement AJAX search~Lucene Search part?
Date: Fri, 8 Jun 2007 09:03:31 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


8 jun 2007 kl. 03.31 skrev Chris Lu:

> Hi,
>
> I would like to implement an AJAX search. Basically when user types in
> several characters,  I will try to search the Lucene index and found
> all possible matching items.
>
> Seems I need to use wildcard query like "test*" to matching anything.
> Is this the only way to do it? It doesn't seems quite efficient,
> especially when you just typed in the first character.
>
> I guess the "good" way is to go through the terms, and return as soon
> as, for example, 10 terms are found.
>
> I am wondering is there anything like this already built?

The simplest solution is to tokenize your index and queries as  
ngrams. However, it can turn out to be quite expensive to bash the  
index with 2-10 times as many queries as it is used to. If you have a  
really busy system, try to reduce the auto-complete corpus to what is  
popular.

LUCENE-625 is a solution that use a trie-pattern rather than Lucene.  
It learn and adapt on user behavior. I.e. it require user activity.  
But if you have that, this is what I recommend for a speedy auto- 
complete. 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 09:59:42 2007
Return-Path: <java-user-return-28541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23984 invoked from network); 8 Jun 2007 09:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 09:59:41 -0000
Received: (qmail 15118 invoked by uid 500); 8 Jun 2007 09:59:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14867 invoked by uid 500); 8 Jun 2007 09:59:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14856 invoked by uid 99); 8 Jun 2007 09:59:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 02:59:36 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 5E86A98FE2
	for <java-user@lucene.apache.org>; Fri,  8 Jun 2007 11:58:39 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <EB5CB495-B13E-47E4-9E96-25DBA24AC68B@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: How to implement AJAX search~Lucene Search part?
Date: Fri, 8 Jun 2007 11:58:37 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

have a look of opensearch.org specification, your self-completion =20
will work with IE7 and Firefox 2.
JSON serialization is quicker than XML stuff.
Be careful to limit the number of responses.
A search in "test*" works very well in my project with ten thousands =20
of documents.
Begin completion only when you have 3 letters or more, less gives you =20=

too many words.

M.

Le 8 juin 07 =E0 03:31, Chris Lu a =E9crit :

> Hi,
>
> I would like to implement an AJAX search. Basically when user types in
> several characters,  I will try to search the Lucene index and found
> all possible matching items.
>
> Seems I need to use wildcard query like "test*" to matching anything.
> Is this the only way to do it? It doesn't seems quite efficient,
> especially when you just typed in the first character.
>
> I guess the "good" way is to go through the terms, and return as soon
> as, for example, 10 terms are found.
>
> I am wondering is there anything like this already built?
>
> --=20
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?=20
> title=3DCreate_Lucene_Database_Search_in_3_minutes
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 10:57:06 2007
Return-Path: <java-user-return-28542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43135 invoked from network); 8 Jun 2007 10:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 10:57:06 -0000
Received: (qmail 31331 invoked by uid 500); 8 Jun 2007 10:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31133 invoked by uid 500); 8 Jun 2007 10:57:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31114 invoked by uid 99); 8 Jun 2007 10:57:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 03:57:02 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 03:56:58 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l58AuKRC027872
	for <java-user@lucene.apache.org>; Fri, 8 Jun 2007 13:56:20 +0300
Received: from [10.142.130.117] ([10.142.130.117]) by nimitz with ESMTP
	 id m68dk9iv; 8 Jun 2007 13:56:00 +0300
Message-ID: <4669358E.5070805@teamware.com>
Date: Fri, 08 Jun 2007 13:55:10 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How can I search over all documents NOT in a certain subset?
References: <8d6059bb0706051104o32fd328ci42a8744db959f44c@mail.gmail.com> <4665CC5E.5010000@syr.edu> <46679948.9040102@teamware.com> <008701c7a906$35971460$824e070a@george>
In-Reply-To: <008701c7a906$35971460$824e070a@george>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 08 Jun 2007 13:56:20 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hilton Campbell wrote:
> Yes, that's actually come up.  The document ids are indeed changing which is
> causing problems.  I'm still trying to work it out myself, but any help
> would most definitely be appreciated.

If you have an application Id per document, then you could cache that field for 
each reader and when you open the new reader, create a new cache of the IDs for 
that reader and then re-evaluate the bitmap according to the changed Ids.

You may be able to optimise the case for two readers by calculating the mapping 
once and then use that for each bitmap that needs reevaluating.

Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 12:48:43 2007
Return-Path: <java-user-return-28543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89696 invoked from network); 8 Jun 2007 12:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 12:48:42 -0000
Received: (qmail 82880 invoked by uid 500); 8 Jun 2007 12:48:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82680 invoked by uid 500); 8 Jun 2007 12:48:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82669 invoked by uid 99); 8 Jun 2007 12:48:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 05:48:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 05:48:33 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.16444F2D@mailer.syr.edu>; Fri, 8 Jun 2007 8:48:12 -0400
Message-ID: <46694FBF.2050809@syr.edu>
Date: Fri, 08 Jun 2007 08:46:55 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How can I search over all documents NOT in a certain subset?
References: <8d6059bb0706051104o32fd328ci42a8744db959f44c@mail.gmail.com> <4665CC5E.5010000@syr.edu> <46679948.9040102@teamware.com> <008701c7a906$35971460$824e070a@george>
In-Reply-To: <008701c7a906$35971460$824e070a@george>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Hilton,

Hilton Campbell wrote:
> Yes, that's actually come up.  The document ids are indeed changing which is
> causing problems.  I'm still trying to work it out myself, but any help
> would most definitely be appreciated.
> 
> Thanks,
> Hilton Campbell
> 
> -----Original Message-----
> From: Antony Bowesman [mailto:adb@teamware.com] 
> Sent: Wednesday, June 06, 2007 11:36 PM
> To: java-user@lucene.apache.org
> Subject: Re: How can I search over all documents NOT in a certain subset?
> 
> Steven Rowe wrote:
>> Conceptually (caveat: untested), you could:
>>
>> 1. Extend Filter[1] (call it DejaVuFilter) to hold a BitSet per
>> IndexReader.  The BitSet would hold one bit per doc[2], each initialized
>> to true.
>>
>> 2. Unset a DejaVuFilter instance's bit for each of your top N docs by
>> walking the TopDocs returned by Searcher.search(Query,Filter,int)[3].
>> Initially, you could pass in null for the Filter, and then for all
>> following calls, an instance of DejaVuFilter.
> 
> Just a thought...
> 
> If Hilton wants to be aware of new Documents in the index since the previous
> search, this requires opening a new IndexReader.
> 
> If only Documents have been added to the index I expect, but am not 
> sure, that the bits from the old IndexReader are still valid for the 
> document numbers in the new Reader. However, if there have been 
> deletions or optimisation has occurred between reader instances, then
> the document ids from the old reader may not represent the same
> documents in the new reader, so the Filter for the old reader will
> not be valid for the new search against the new reader and you may
> get false matches.
> 
> I don't think there will be a problem if there are no deletions.

My bad for not pointing out this shortcoming.

Karl Wettin's patch may be useful to you:

  <https://issues.apache.org/jira/browse/LUCENE-879>

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 12:58:12 2007
Return-Path: <java-user-return-28544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93376 invoked from network); 8 Jun 2007 12:57:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 12:57:55 -0000
Received: (qmail 16415 invoked by uid 500); 8 Jun 2007 12:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16379 invoked by uid 500); 8 Jun 2007 12:57:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16368 invoked by uid 99); 8 Jun 2007 12:57:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 05:57:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.210.244.92] (HELO smtpi1.usherbrooke.ca) (132.210.244.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 05:57:46 -0700
Received: from [192.168.1.13] ([132.210.142.98])
	by smtpi1.usherbrooke.ca (8.13.1/8.13.1) with ESMTP id l58Cv36Y028513
	for <java-user@lucene.apache.org>; Fri, 8 Jun 2007 08:57:04 -0400
Message-ID: <4669521F.7050101@usherbrooke.ca>
Date: Fri, 08 Jun 2007 08:57:03 -0400
From: Patrick Turcotte <patrick.turcotte@usherbrooke.ca>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to implement AJAX search~Lucene Search part?
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
In-Reply-To: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-UdeS-MailScanner-Information: Veuillez consulter le http://www.usherbrooke.ca/vers/virus-courriel
X-UdeS-MailScanner: Aucun code suspect =?ISO-8859-1?Q?d=E9tect=E9?=
X-MailScanner-SpamCheck: n'est pas un polluriel, SpamAssassin (score=-2.499,
	requis 5, BAYES_00 -2.60, RDNS_NONE 0.10)
X-UdeS-MailScanner-From: patrick.turcotte@usherbrooke.ca
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

What we did was this:

1) When you application starts, it scans the index for terms values and
store them in a map or something.

2) When you receive "ajax requests", you compare with the map data and
return the relevant part. Works quite fast for us, without round trips
to Lucene.

Patrick

Chris Lu wrote:
> Hi,
>
> I would like to implement an AJAX search. Basically when user types in
> several characters,  I will try to search the Lucene index and found
> all possible matching items.
>
> Seems I need to use wildcard query like "test*" to matching anything.
> Is this the only way to do it? It doesn't seems quite efficient,
> especially when you just typed in the first character.
>
> I guess the "good" way is to go through the terms, and return as soon
> as, for example, 10 terms are found.
>
> I am wondering is there anything like this already built?
>


-- 
Patrick Turcotte
Analyste
Projet Franqus : http://franqus.usherbrooke.ca
----------------------------------------------
patrick.turcotte@USherbrooke.ca
(819) 821-8000, poste 63234
1-800-267-8337 puis 63234


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 14:08:12 2007
Return-Path: <java-user-return-28545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58687 invoked from network); 8 Jun 2007 14:08:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 14:08:11 -0000
Received: (qmail 86472 invoked by uid 500); 8 Jun 2007 14:08:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86440 invoked by uid 500); 8 Jun 2007 14:08:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86424 invoked by uid 99); 8 Jun 2007 14:08:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 07:08:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 07:08:01 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1036420uge
        for <java-user@lucene.apache.org>; Fri, 08 Jun 2007 07:07:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Mlhu4cYKU5FEXSFsE1g0YOPgsHzJTsKGccI09TzzSsDcIh7NKGUqKdW0LYYvN2RzCkZ9EQ48IYBuPHv2sKpwWuvAZgcshFED/GUqhJH1c4yhO1dIoY1JUaBLWVU4UaoVjfAwKw1GVnX1KlVBV4Wjyety8tZl6Dk5WIzV77oRS+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ImxvkB2C3k8A7+0KauIui7fhqZd4r1g3bL9G3X2T06lMe8gYKIB/ESZ35UULukfXM5PkthpIM9FXY4E2EkZLU0APf4S6igFuz/CuFAMWnsHctwv7JMZuRo9HtAxip7MtK9A9VqwmsZdttejteD/BkEoSX9f3sBYi6Rcebzt9yFk=
Received: by 10.82.183.19 with SMTP id g19mr5463026buf.1181311659751;
        Fri, 08 Jun 2007 07:07:39 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 8 Jun 2007 07:07:39 -0700 (PDT)
Message-ID: <359a92830706080707q23e927dfj7197633f124a17c1@mail.gmail.com>
Date: Fri, 8 Jun 2007 10:07:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Documentation Promotion is in Motion!
In-Reply-To: <6D7B242B-D562-43EE-BB7A-47A880F198DF@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40494_3627811.1181311659730"
References: <6D7B242B-D562-43EE-BB7A-47A880F198DF@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40494_3627811.1181311659730
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I actually added a page. Now if anyone would like to make it
pretty, please feel free. I assume that the first few entries will be
heavily edited
to establish a "look and feel" so the ensuing pages can use them as a
model.....

Best
Erick

On 6/7/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Calling all Lucene Users!
>
> You know you love Lucene for a whole variety of reasons (fast,
> friendly, fun, did I say fast?) so how about showing a little love
> back?  :-)
>
> We (as in the committers and contributors) are trying out a new
> release mechanism whereby we are implementing a code freeze on the
> trunk (well, technically not a freeze, but...)  We are doing this so
> we can nail down things like Maven artifacts and also to improve the
> overall release process and, here's where you come in, improve the
> documentation.  We did the freeze/branch today and are planning on
> spending the next 10 days or so documenting as much as we can (or
> just improving the documentation, or, even, just identifying where
> more docs are needed).  Then, we will do the official release and you
> all can enjoy Lucene 2.2.
>
> So, what I would like to ask, is that people take the time to help us
> out with the documentation.  See http://wiki.apache.org/lucene-java/
> Documentation_Improvements (be sure to read the java-dev mail thread:
> http://www.nabble.com/Documentation-Brainstorming-
> tf3818348.html#a10810352) for ideas on where to start (and please
> feel free to add your own, it is a Wiki after all!)  Obviously we
> can't address everything in 10 days, but we can take a crack at it
> and little by little we will get there.
>
> But how can I help, you might ask?  Here are some tips:
>
> 1. Edit the wiki page above (getting a Wiki account takes zero time)
> 2. Contribute a Use Case:  http://wiki.apache.org/lucene-java/UseCases
> 3. Contribute a Best Practice: http://wiki.apache.org/lucene-java/
> BestPractices
>
> 4. Add a JIRA issue for real, live issues related to documentation.
> Think the website docs could be improved in a specific way?  Let us
> know.  Same goes for javadocs, etc.
>
> 5. Supply a patch!  Make a case for it, bug us to apply it (but not
> too much).  See http://wiki.apache.org/lucene-java/HowToContribute
> for how this all works.  It really is quite easy, trust me.
>
> 6. Close any old issues you may have put into JIRA that are no longer
> valid.
>
> 7.  Let us know where in particular the docs are, shall we say,
> insufficient (but, please, be nice about it, we all want things to be
> better, right?)  Let us know where you are confused by the docs.
>
> Even if we just get a bunch of things identified during this round
> for the next time around (2.3), this will be a great step in the
> right direction.  Somehow, t I bet we can do better than that.
>
> So, spare us 5 minutes or more of your time and help us help you!
>
> Cheers,
> Grant
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40494_3627811.1181311659730--

From java-user-return-28546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 14:10:34 2007
Return-Path: <java-user-return-28546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59944 invoked from network); 8 Jun 2007 14:10:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 14:10:32 -0000
Received: (qmail 94138 invoked by uid 500); 8 Jun 2007 14:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94102 invoked by uid 500); 8 Jun 2007 14:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94091 invoked by uid 99); 8 Jun 2007 14:10:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 07:10:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 07:10:22 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1036993uge
        for <java-user@lucene.apache.org>; Fri, 08 Jun 2007 07:10:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QqFgWMCnvLN5d5CGpkS95q970B/USfCxfVDRCAbwyTECa816go08/kKIgxrh3nabFJhXGg37fZxMRpxh9apuTFa5QPQKe3gIq1KmZtiYkLw1YdcCBfZiq4wN5Gk7TkqyXU8yGUn0usVoe5ELRleuiLycU6s3eK0IgHCkt0LtFps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZE0RIqaeidLS7mdPKmgtHJB+OJCZAGZwwn8W6aN/VQmhsGOOT+ZVECysIxDtHHQfkmfYdZpEAp2uoiapkdV1ogd2x/fHQx6cxziiWmMtpNFp2/ZZdpWTv13FT5yv5kB8nWmpGkMb5aNv6VG9SIG9zMFy7lisjE+sWaguwQ9ce40=
Received: by 10.82.175.17 with SMTP id x17mr5470166bue.1181311800449;
        Fri, 08 Jun 2007 07:10:00 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 8 Jun 2007 07:10:00 -0700 (PDT)
Message-ID: <359a92830706080710q4df331ddve6f9b804a9c1c823@mail.gmail.com>
Date: Fri, 8 Jun 2007 10:10:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to implement AJAX search~Lucene Search part?
In-Reply-To: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40522_27660099.1181311800381"
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40522_27660099.1181311800381
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can get the information pretty quickly by using a
WildcardTermEnum (NOT query). Especially if you
terminate after some number of characters....

Erick

On 6/7/07, Chris Lu <chris.lu@gmail.com> wrote:
>
> Hi,
>
> I would like to implement an AJAX search. Basically when user types in
> several characters,  I will try to search the Lucene index and found
> all possible matching items.
>
> Seems I need to use wildcard query like "test*" to matching anything.
> Is this the only way to do it? It doesn't seems quite efficient,
> especially when you just typed in the first character.
>
> I guess the "good" way is to go through the terms, and return as soon
> as, for example, 10 terms are found.
>
> I am wondering is there anything like this already built?
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40522_27660099.1181311800381--

From java-user-return-28547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 15:51:32 2007
Return-Path: <java-user-return-28547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30521 invoked from network); 8 Jun 2007 15:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 15:51:31 -0000
Received: (qmail 81127 invoked by uid 500); 8 Jun 2007 15:51:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81090 invoked by uid 500); 8 Jun 2007 15:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81079 invoked by uid 99); 8 Jun 2007 15:51:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 08:51:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 08:51:21 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 9CACC99005
	for <java-user@lucene.apache.org>; Fri,  8 Jun 2007 17:50:59 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4669521F.7050101@usherbrooke.ca>
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com> <4669521F.7050101@usherbrooke.ca>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <30B18185-E382-4DF7-A0A1-FA3AD811F7EE@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: How to implement AJAX search~Lucene Search part?
Date: Fri, 8 Jun 2007 17:50:58 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

If you do that, you enumerate every terms!!!
If you use a alphabeticaly sorted collection, you can stop, when =20
match stop, but, you have to test every terms before matching.
Lucene gives you tools to match begining of a term, just use it!!

M.
Le 8 juin 07 =E0 14:57, Patrick Turcotte a =E9crit :

> Hi,
>
> What we did was this:
>
> 1) When you application starts, it scans the index for terms values =20=

> and
> store them in a map or something.
>
> 2) When you receive "ajax requests", you compare with the map data and
> return the relevant part. Works quite fast for us, without round trips
> to Lucene.
>
> Patrick
>
> Chris Lu wrote:
>> Hi,
>>
>> I would like to implement an AJAX search. Basically when user =20
>> types in
>> several characters,  I will try to search the Lucene index and found
>> all possible matching items.
>>
>> Seems I need to use wildcard query like "test*" to matching anything.
>> Is this the only way to do it? It doesn't seems quite efficient,
>> especially when you just typed in the first character.
>>
>> I guess the "good" way is to go through the terms, and return as soon
>> as, for example, 10 terms are found.
>>
>> I am wondering is there anything like this already built?
>>
>
>
> --=20
> Patrick Turcotte
> Analyste
> Projet Franqus : http://franqus.usherbrooke.ca
> ----------------------------------------------
> patrick.turcotte@USherbrooke.ca
> (819) 821-8000, poste 63234
> 1-800-267-8337 puis 63234
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 17:08:11 2007
Return-Path: <java-user-return-28548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59323 invoked from network); 8 Jun 2007 17:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 17:08:10 -0000
Received: (qmail 26620 invoked by uid 500); 8 Jun 2007 17:08:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26575 invoked by uid 500); 8 Jun 2007 17:08:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26564 invoked by uid 99); 8 Jun 2007 17:08:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:08:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [195.238.6.176] (HELO outmx039.isp.belgacom.be) (195.238.6.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:08:01 -0700
Received: from outmx039.isp.belgacom.be (localhost.localdomain [127.0.0.1])
	by outmx039.isp.belgacom.be (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id l58H7b9p023948
	for <java-user@lucene.apache.org>; Fri, 8 Jun 2007 19:07:39 +0200
Received: from JPDZISIAK (4.229-246-81.adsl-dyn.isp.belgacom.be [81.246.229.4])
        by outmx039.isp.belgacom.be (8.13.4/8.13.4/Skynet-OUT-2.22) with ESMTP id l58H7SPg023927
        for <java-user@lucene.apache.org>; Fri, 8 Jun 2007 19:07:28 +0200
        (envelope-from <jp.dzisiak@skynet.be>)
From: "DZISIAK Jean-Paul" <jp.dzisiak@skynet.be>
To: <java-user@lucene.apache.org>
Subject: RE : How to implement AJAX search~Lucene Search part?
Date: Fri, 8 Jun 2007 19:07:44 +0200
Message-ID: <000001c7a9ef$87d06d50$2700000a@JPDZISIAK>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
Importance: Normal
In-Reply-To: <359a92830706080710q4df331ddve6f9b804a9c1c823@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have implemented with success a keyword-based search feature with =
MyFaces
/ Tomahawk. Tomahawk has an Ajax-based component:

JSF page:

<t:div styleClass=3D"menuLevelFloatDiv">
        <t:panelGrid columns=3D"3">
            <s:inputSuggestAjax styleClass=3D"menuLevelItem" =
charset=3D"utf-8"
                                autoComplete=3D"false"
=20
suggestedItemsMethod=3D"#{searchKeywordBean.getSuggestedKeywords}"
                                style=3D"width=3D130px;"
                                maxSuggestedItems=3D"10"
value=3D"#{searchKeywordBean.userKeyword}"/>
            <t:commandButton styleClass=3D"menuLevelItem"
value=3D"#{msg.searchButton}"
                             onclick=3D"dojoWaitDialogKeyWord.show()"
                             action=3D"#{searchKeywordBean.lookup}"/>
            <t:commandButton styleClass=3D"menuLevelItem"
value=3D"#{msg.queryButton}" action=3D"query"/>
        </t:panelGrid>
</t:div>

<%-- wait dialog box --%>
<s:modalDialog dialogId=3D"dojoWaitDialogIDKeyWord"
dialogVar=3D"dojoWaitDialogKeyWord"
               dialogAttr=3D"bgColor=3D'white' bgOpacity=3D'0.5' =
toggle=3D'fade'
toggleDuration=3D'250'"
               styleClass=3D"dojoWaitDialog" hiderIds=3D"okID">
    <h:graphicImage styleClass=3D"waitImage" value=3D"images/wait.gif"/>
</s:modalDialog>

Backing Bean:

  /**
     * Suggested keywords for Ajax listbox
     */
    public List<String> getSuggestedKeywords(String userPrefix, Integer
maxSize) {
        List<String> foundKeywords =3D new ArrayList<String>();
        String userPrefixUC =3D userPrefix.toUpperCase();
..............................................
..............................................

And I do call a Lucene index here.


Best,


-----Message d'origine-----
De=A0: Erick Erickson [mailto:erickerickson@gmail.com]=20
Envoy=E9=A0: vendredi 8 juin 2007 16:10
=C0=A0: java-user@lucene.apache.org
Objet=A0: Re: How to implement AJAX search~Lucene Search part?

You can get the information pretty quickly by using a
WildcardTermEnum (NOT query). Especially if you
terminate after some number of characters....

Erick

On 6/7/07, Chris Lu <chris.lu@gmail.com> wrote:
>
> Hi,
>
> I would like to implement an AJAX search. Basically when user types in
> several characters,  I will try to search the Lucene index and found
> all possible matching items.
>
> Seems I need to use wildcard query like "test*" to matching anything.
> Is this the only way to do it? It doesn't seems quite efficient,
> especially when you just typed in the first character.
>
> I guess the "good" way is to go through the terms, and return as soon
> as, for example, 10 terms are found.
>
> I am wondering is there anything like this already built?
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
>
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_m
inutes
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 17:19:29 2007
Return-Path: <java-user-return-28549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62856 invoked from network); 8 Jun 2007 17:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 17:19:28 -0000
Received: (qmail 44601 invoked by uid 500); 8 Jun 2007 17:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44555 invoked by uid 500); 8 Jun 2007 17:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44542 invoked by uid 99); 8 Jun 2007 17:19:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:19:24 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.44 as permitted sender)
Received: from [206.46.252.44] (HELO vms044pub.verizon.net) (206.46.252.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:19:20 -0700
Received: from dorthy ([71.248.153.228])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JJB0092RUR6WA30@vms044.mailsrvcs.net> for
 java-user@lucene.apache.org; Fri, 08 Jun 2007 12:18:43 -0500 (CDT)
Date: Fri, 08 Jun 2007 12:18:42 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: IndexWriter.Optimize() is too slow and IOException! How Can I do?
To: <java-user@lucene.apache.org>
Message-id: <00aa01c7a9f1$10edc960$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=GB2312; reply-type=original
Content-transfer-encoding: 8BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <28C622BA8A7A474589924466E6303BE00CC773@EXCH01.yikey.com>
 <5d5204510706061951i2dba539ew5de35b463309ff65@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I am trying to index msword documents. I¡¯ve got things working but I do not 
think I am doing things properly.

To index msword docs I use an extractor to extract the text. Then I write 
the text to a .txt file and index that using an HTLMDocument object. Seems 
to me that since I have the text I should be able to just do a

        Doc.add("content", the_text_from_the_word_doc, ???, ???);

But looking at Document.java it seems the field "content" requires a reader. 
So I write a temporary file to satified that requirement.

What I would like to have is an MSWORDDocument class that would take the 
extracted text as a argument to the constructor and create a Ducument object 
that I could get.

If any one has any idea, please let me know.

Here is a code segment. Notice the msword hack,


/*

* make a document

*/

try

{

   if (ftype.startsWith("text"))

   {

      doc = HTMLDocument.Document(f);

   }

   else if (ftype.equals("application/pdf"))

   {

      doc = LucenePDFDocument.getDocument(f);

   }

   else if (ftype.equals("application/msword"))

   {

      FileInputStream fin = new FileInputStream(f.getAbsolutePath());

      WordExtractor extractor = new WordExtractor(fin);

      String content = extractor.getText();

      if(debug) System.out.println(content);

      String tempFileName=f.getAbsolutePath() + ".txt";

      BufferedWriter bw = new BufferedWriter(new FileWriter(tempFileName, 
false));

      bw.write((String) content.toString());

      bw.close();

      File df = new File(tempFileName);

      doc = HTMLDocument.Document(df);

      df.delete();

   }

   else if (ftype.equals("binary"))

   {

      return null;

   }

   else

   {

      if(debug) System.out.println("Unknown file type not ascii or pdf.");

      doc = HTMLDocument.Document(f);

   }

}

catch(java.lang.InterruptedException ie)

{

   throw ie;

}

catch(java.io.IOException ioe)

{

   throw ioe;

}





Thanks in advance


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 17:24:20 2007
Return-Path: <java-user-return-28550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64979 invoked from network); 8 Jun 2007 17:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 17:24:11 -0000
Received: (qmail 51443 invoked by uid 500); 8 Jun 2007 17:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51408 invoked by uid 500); 8 Jun 2007 17:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51394 invoked by uid 99); 8 Jun 2007 17:24:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:24:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.44 as permitted sender)
Received: from [206.46.252.44] (HELO vms044pub.verizon.net) (206.46.252.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:24:01 -0700
Received: from dorthy ([71.248.153.228])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JJB0098ZUZ2UN30@vms044.mailsrvcs.net> for
 java-user@lucene.apache.org; Fri, 08 Jun 2007 12:23:29 -0500 (CDT)
Date: Fri, 08 Jun 2007 12:23:27 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Indexing MSword Documents
To: <java-user@lucene.apache.org>
Message-id: <00b701c7a9f1$bb4bada0$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=response
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I am trying to index msword documents. I've got things working but I do not 
think I am doing things properly.

To index msword docs I use an extractor to extract the text. Then I write 
the text to a .txt file and index that using an HTMLDocument object. Seems 
to me that since I have the text I should be able to just do a

        Doc.add("content", the_text_from_the_word_doc, ???, ???);

But looking at Document.java it seems the field "content" requires a reader. 
So I write a temporary file to satified that requirement.

What I would like to have is an MSWORDDocument class that would take the 
extracted text as a argument to the constructor and create a Ducument object 
that I could get.

If any one has any idea, please let me know.

Here is my code segment. Notice the msword hack,


/*
* make a document
*/

try
{
   if (ftype.startsWith("text"))
   {
      doc = HTMLDocument.Document(f);
   }
   else if (ftype.equals("application/pdf"))
   {
      doc = LucenePDFDocument.getDocument(f);
   }
   else if (ftype.equals("application/msword"))
   {
      FileInputStream fin = new FileInputStream(f.getAbsolutePath());
      WordExtractor extractor = new WordExtractor(fin);
      String content = extractor.getText();
      if(debug) System.out.println(content);
      String tempFileName=f.getAbsolutePath() + ".txt";
      BufferedWriter bw = new BufferedWriter(new FileWriter(tempFileName, 
false));
      bw.write((String) content.toString());
      bw.close();
      File df = new File(tempFileName);
      doc = HTMLDocument.Document(df);
      df.delete();
   }
   else if (ftype.equals("binary"))
   {
      return null;
   }
   else
   {
      if(debug) System.out.println("Unknown file type not ascii or pdf.");
      doc = HTMLDocument.Document(f);
   }
}
catch(java.lang.InterruptedException ie)
{
   throw ie;
}
catch(java.io.IOException ioe)
{
   throw ioe;
}





Thanks in advance


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 17:49:10 2007
Return-Path: <java-user-return-28551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76687 invoked from network); 8 Jun 2007 17:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 17:49:09 -0000
Received: (qmail 1022 invoked by uid 500); 8 Jun 2007 17:49:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 991 invoked by uid 500); 8 Jun 2007 17:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 980 invoked by uid 99); 8 Jun 2007 17:49:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:49:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:49:00 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 2CEDA99019
	for <java-user@lucene.apache.org>; Fri,  8 Jun 2007 19:48:38 +0200 (CEST)
In-Reply-To: <00b701c7a9f1$bb4bada0$2e01a8c0@dorthy>
References: <00b701c7a9f1$bb4bada0$2e01a8c0@dorthy>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <E0928E5E-F6DC-4782-97B0-8EB1799C40E7@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: Indexing MSword Documents
Date: Fri, 8 Jun 2007 19:48:36 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Why don't use Document?
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/=20=

org/apache/lucene/document/Document.html

HTMLDocument manage HTML stuff like encoding, header, and other =20
specificity.

Nutch use specific word tools (http://lucene.apache.org/nutch/apidocs/=20=

org/apache/nutch/parse/msword/package-summary.html), but, IMHO, it's =20
not the more difficult part.

M.

Le 8 juin 07 =E0 19:23, jim shirreffs a =E9crit :

> Hi,
> I am trying to index msword documents. I've got things working but =20
> I do not think I am doing things properly.
>
> To index msword docs I use an extractor to extract the text. Then I =20=

> write the text to a .txt file and index that using an HTMLDocument =20
> object. Seems to me that since I have the text I should be able to =20
> just do a
>
>        Doc.add("content", the_text_from_the_word_doc, ???, ???);
>
> But looking at Document.java it seems the field "content" requires =20
> a reader. So I write a temporary file to satified that requirement.
>
> What I would like to have is an MSWORDDocument class that would =20
> take the extracted text as a argument to the constructor and create =20=

> a Ducument object that I could get.
>
> If any one has any idea, please let me know.
>
> Here is my code segment. Notice the msword hack,
>
>
> /*
> * make a document
> */
>
> try
> {
>   if (ftype.startsWith("text"))
>   {
>      doc =3D HTMLDocument.Document(f);
>   }
>   else if (ftype.equals("application/pdf"))
>   {
>      doc =3D LucenePDFDocument.getDocument(f);
>   }
>   else if (ftype.equals("application/msword"))
>   {
>      FileInputStream fin =3D new FileInputStream(f.getAbsolutePath());
>      WordExtractor extractor =3D new WordExtractor(fin);
>      String content =3D extractor.getText();
>      if(debug) System.out.println(content);
>      String tempFileName=3Df.getAbsolutePath() + ".txt";
>      BufferedWriter bw =3D new BufferedWriter(new FileWriter=20
> (tempFileName, false));
>      bw.write((String) content.toString());
>      bw.close();
>      File df =3D new File(tempFileName);
>      doc =3D HTMLDocument.Document(df);
>      df.delete();
>   }
>   else if (ftype.equals("binary"))
>   {
>      return null;
>   }
>   else
>   {
>      if(debug) System.out.println("Unknown file type not ascii or =20
> pdf.");
>      doc =3D HTMLDocument.Document(f);
>   }
> }
> catch(java.lang.InterruptedException ie)
> {
>   throw ie;
> }
> catch(java.io.IOException ioe)
> {
>   throw ioe;
> }
>
>
>
>
>
> Thanks in advance
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 17:53:16 2007
Return-Path: <java-user-return-28552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78353 invoked from network); 8 Jun 2007 17:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 17:53:15 -0000
Received: (qmail 9631 invoked by uid 500); 8 Jun 2007 17:53:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9369 invoked by uid 500); 8 Jun 2007 17:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9355 invoked by uid 99); 8 Jun 2007 17:53:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:53:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.141 as permitted sender)
Received: from [32.97.182.141] (HELO e1.ny.us.ibm.com) (32.97.182.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 10:53:06 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e1.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l58HqjeR017433
	for <java-user@lucene.apache.org>; Fri, 8 Jun 2007 13:52:45 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l58HqjpC339688
	for <java-user@lucene.apache.org>; Fri, 8 Jun 2007 13:52:45 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l58Hqjof017924
	for <java-user@lucene.apache.org>; Fri, 8 Jun 2007 13:52:45 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l58HqjRj017921
	for <java-user@lucene.apache.org>; Fri, 8 Jun 2007 13:52:45 -0400
In-Reply-To: <00b701c7a9f1$bb4bada0$2e01a8c0@dorthy>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Indexing MSword Documents
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFBB9CC0D3.937F923B-ON852572F4.00621A18-852572F4.00623653@us.ibm.com>
Date: Fri, 8 Jun 2007 13:52:41 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M5_05202007|May 20, 2007) at
 06/08/2007 13:52:45,
	Serialize complete at 06/08/2007 13:52:45
Content-Type: multipart/alternative; boundary="=_alternative 006235C4852572F4_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006235C4852572F4_=
Content-Type: text/plain; charset="US-ASCII"

I do this exact thing. "text" (the second input to the Field constructor) 
is MSWord text that I've extracted from the Word document

textField = new org.apache.lucene.document.Field(textFieldName,text, 
org.apache.lucene.document.Field.Store.NO,
 org.apache.lucene.document.Field.Index.TOKENIZED);
doc.add(textField);

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 006235C4852572F4_=--

From java-user-return-28553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 18:31:35 2007
Return-Path: <java-user-return-28553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98389 invoked from network); 8 Jun 2007 18:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 18:31:33 -0000
Received: (qmail 9406 invoked by uid 500); 8 Jun 2007 18:31:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9355 invoked by uid 500); 8 Jun 2007 18:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9308 invoked by uid 99); 8 Jun 2007 18:31:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 11:31:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.44 as permitted sender)
Received: from [206.46.252.44] (HELO vms044pub.verizon.net) (206.46.252.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 11:31:20 -0700
Received: from dorthy ([71.248.153.228])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JJB0095RY3JW390@vms044.mailsrvcs.net> for
 java-user@lucene.apache.org; Fri, 08 Jun 2007 13:30:56 -0500 (CDT)
Date: Fri, 08 Jun 2007 13:30:57 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: Indexing MSword Documents
To: <java-user@lucene.apache.org>
Message-id: <00db01c7a9fb$27f87bf0$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 7bit
X-Priority: 3
X-MSMail-priority: Normal
References:
 <OFBB9CC0D3.937F923B-ON852572F4.00621A18-852572F4.00623653@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

many thanks I will try that, thanks again!

jim s


----- Original Message ----- 
From: "Donna L Gresh" <gresh@us.ibm.com>
To: <java-user@lucene.apache.org>
Sent: Friday, June 08, 2007 12:52 PM
Subject: Re: Indexing MSword Documents


>I do this exact thing. "text" (the second input to the Field constructor) 
> is MSWord text that I've extracted from the Word document
> 
> textField = new org.apache.lucene.document.Field(textFieldName,text, 
> org.apache.lucene.document.Field.Store.NO,
> org.apache.lucene.document.Field.Index.TOKENIZED);
> doc.add(textField);
> 
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 18:36:30 2007
Return-Path: <java-user-return-28554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 792 invoked from network); 8 Jun 2007 18:36:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 18:36:28 -0000
Received: (qmail 21433 invoked by uid 500); 8 Jun 2007 18:36:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21389 invoked by uid 500); 8 Jun 2007 18:36:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21351 invoked by uid 99); 8 Jun 2007 18:36:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 11:36:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.40 as permitted sender)
Received: from [206.46.252.40] (HELO vms040pub.verizon.net) (206.46.252.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 11:36:17 -0700
Received: from dorthy ([71.248.153.228])
 by vms040.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JJB001OVYBG2SA0@vms040.mailsrvcs.net> for
 java-user@lucene.apache.org; Fri, 08 Jun 2007 13:35:43 -0500 (CDT)
Date: Fri, 08 Jun 2007 13:35:42 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: Indexing MSword Documents
To: <java-user@lucene.apache.org>
Message-id: <00e301c7a9fb$d338f800$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=response
Content-transfer-encoding: 8BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <00b701c7a9f1$bb4bada0$2e01a8c0@dorthy>
 <E0928E5E-F6DC-4782-97B0-8EB1799C40E7@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

I looked at nutches code but it is too complicated for me to follow.

I do not understand the guts of Lucene and how analyzers, parsers, readers, 
etc all fit together. I suppose I will be forced to learn it all someday but 
at the moment I am adhering to KISS, Keep It Simple Stupid.

thanks for taking the time to reply


jim s

----- Original Message ----- 
From: "Mathieu Lecarme" <mathieu@garambrogne.net>
To: <java-user@lucene.apache.org>
Sent: Friday, June 08, 2007 12:48 PM
Subject: Re: Indexing MSword Documents


Why don't use Document?
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/
org/apache/lucene/document/Document.html

HTMLDocument manage HTML stuff like encoding, header, and other
specificity.

Nutch use specific word tools (http://lucene.apache.org/nutch/apidocs/
org/apache/nutch/parse/msword/package-summary.html), but, IMHO, it's
not the more difficult part.

M.

Le 8 juin 07 à 19:23, jim shirreffs a écrit :

> Hi,
> I am trying to index msword documents. I've got things working but  I do 
> not think I am doing things properly.
>
> To index msword docs I use an extractor to extract the text. Then I  write 
> the text to a .txt file and index that using an HTMLDocument  object. 
> Seems to me that since I have the text I should be able to  just do a
>
>        Doc.add("content", the_text_from_the_word_doc, ???, ???);
>
> But looking at Document.java it seems the field "content" requires  a 
> reader. So I write a temporary file to satified that requirement.
>
> What I would like to have is an MSWORDDocument class that would  take the 
> extracted text as a argument to the constructor and create  a Ducument 
> object that I could get.
>
> If any one has any idea, please let me know.
>
> Here is my code segment. Notice the msword hack,
>
>
> /*
> * make a document
> */
>
> try
> {
>   if (ftype.startsWith("text"))
>   {
>      doc = HTMLDocument.Document(f);
>   }
>   else if (ftype.equals("application/pdf"))
>   {
>      doc = LucenePDFDocument.getDocument(f);
>   }
>   else if (ftype.equals("application/msword"))
>   {
>      FileInputStream fin = new FileInputStream(f.getAbsolutePath());
>      WordExtractor extractor = new WordExtractor(fin);
>      String content = extractor.getText();
>      if(debug) System.out.println(content);
>      String tempFileName=f.getAbsolutePath() + ".txt";
>      BufferedWriter bw = new BufferedWriter(new FileWriter (tempFileName, 
> false));
>      bw.write((String) content.toString());
>      bw.close();
>      File df = new File(tempFileName);
>      doc = HTMLDocument.Document(df);
>      df.delete();
>   }
>   else if (ftype.equals("binary"))
>   {
>      return null;
>   }
>   else
>   {
>      if(debug) System.out.println("Unknown file type not ascii or  pdf.");
>      doc = HTMLDocument.Document(f);
>   }
> }
> catch(java.lang.InterruptedException ie)
> {
>   throw ie;
> }
> catch(java.io.IOException ioe)
> {
>   throw ioe;
> }
>
>
>
>
>
> Thanks in advance
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 18:54:57 2007
Return-Path: <java-user-return-28555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5831 invoked from network); 8 Jun 2007 18:54:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 18:54:56 -0000
Received: (qmail 64507 invoked by uid 500); 8 Jun 2007 18:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64464 invoked by uid 500); 8 Jun 2007 18:54:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64453 invoked by uid 99); 8 Jun 2007 18:54:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 11:54:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.194.80.196] (HELO dc1.storediq.com) (66.194.80.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 11:54:47 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Question about querying for files in a zip file
Date: Fri, 8 Jun 2007 13:54:26 -0500
Message-ID: <E387E2E9622FDD408359F98BF183879ED2BDAA@dc1.storediq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question about querying for files in a zip file
Thread-Index: Acep/m+SpWOahlFDRciYIgxcoJMKXA==
From: "Eric Scott" <escott@storediq.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

This isn't a "How do I index a zip file?" question.  It's a bit more
complicated than that.

We have an index where zip files are broken apart and the contained
files are indexed.  The index also contains a doc for the zip file
itself.  The user has the option of (A) querying for the contained files
that match the query (a vanilla query), or (B) querying for the unique
set of zip files that have contained files that match the query.  My
question is how to *efficiently* accomplish option (B) in Lucene.

In case it helps, here's another way to explain the requirement in a
relational model.  If you had a table of docs with these columns:

    MyDocs table
    =3D=3D=3D=3D=3D=3D=3D=3D=3D
    Docid
    ZipfileName
    Filename
    Other columns to match on...

then option (B) can be returned with a simple join:

    select distinct zip.docid, zip.other-columns, ...
    from mydocs zip, mydocs contained
    where
        contained.zipfilename =3D zip.filename
        and contained.docid matches lucene query...

In lucene, the conceptual, straght-forward solution is something like
this:

    Do a lucene query to get the matching contained docs.
    For each matching doc:
        Look up the zip filename via a field on the doc.
        If the zip file is not part of our zipfile result set yet, then
            Save the zip filename in the result set.
    Run another lucene query to look up the zipfile docids in the
zipfile result set.
    Read any required fields for each zipfile doc.
    Return the zipfile result set with the required fields.

The trouble with this solution is that it is very slow and a memory hog.
Does anyone have any nifty ideas that beat this straight-forward
approach?

We would also entertain alternative indexing approaches.  We even
considered concatenating all the text of the contained docs into a doc
indexed as the zipfile, but lucene only indexes part of a large file and
even if that were resolved, proximity searches can return false
positives.

And FYI, scoring is not an issue on the zip file.  It's purely match or
no-match semantics.

Thanks,

- Eric Scott


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 19:11:07 2007
Return-Path: <java-user-return-28556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11271 invoked from network); 8 Jun 2007 19:11:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 19:11:06 -0000
Received: (qmail 2254 invoked by uid 500); 8 Jun 2007 19:11:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2220 invoked by uid 500); 8 Jun 2007 19:11:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2207 invoked by uid 99); 8 Jun 2007 19:11:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 12:11:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of wsgrah@wm.edu designates 128.239.35.14 as permitted sender)
Received: from [128.239.35.14] (HELO mail3.wm.edu) (128.239.35.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 12:10:57 -0700
Received: from [127.0.0.1] (wm159-115.admin.wm.edu [128.239.115.159])
	by mail3.wm.edu (MOS 3.8.3-GA)
	with ESMTP id AIM61697 (AUTH wsgrah);
	Fri, 8 Jun 2007 15:10:36 -0400 (EDT)
Message-ID: <4669A9A6.1070108@wm.edu>
Date: Fri, 08 Jun 2007 15:10:30 -0400
From: Wayne Graham <wsgrah@wm.edu>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing MSword Documents
References: <00b701c7a9f1$bb4bada0$2e01a8c0@dorthy> <E0928E5E-F6DC-4782-97B0-8EB1799C40E7@garambrogne.net> <00e301c7a9fb$d338f800$2e01a8c0@dorthy>
In-Reply-To: <00e301c7a9fb$d338f800$2e01a8c0@dorthy>
X-Enigmail-Version: 0.95.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Junkmail-Whitelist: YES (by domain whitelist at mail3.wm.edu)
X-Virus-Checked: Checked by ClamAV on apache.org

Jim,

There are a few things you can do to make extracting text easier on
yourself. There are several libraries that can assist you, POI and
TextMining.org both have excellent text extractors for Word.

As Mathieu suggests, you need to take a look at Document. Essentially,
you do everything you're doing and when it gets time to insert your
content, you'll do something along the lines of (this is using
TextMining.org's extractor):

String content = new WordExtractor().extractText(new FileInputStream(file));

doc.add(new Field("content", content, Field.Store.NO,
Field.Index.TOKENIZED));

You should be able to edit the example code you're working with fairly
easily with the above.

HTH,
Wayne

jim shirreffs wrote:
> I looked at nutches code but it is too complicated for me to follow.
> 
> I do not understand the guts of Lucene and how analyzers, parsers,
> readers, etc all fit together. I suppose I will be forced to learn it
> all someday but at the moment I am adhering to KISS, Keep It Simple Stupid.
> 
> thanks for taking the time to reply
> 
> 
> jim s
> 
> ----- Original Message ----- From: "Mathieu Lecarme"
> <mathieu@garambrogne.net>
> To: <java-user@lucene.apache.org>
> Sent: Friday, June 08, 2007 12:48 PM
> Subject: Re: Indexing MSword Documents
> 
> 
> Why don't use Document?
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/
> org/apache/lucene/document/Document.html
> 
> HTMLDocument manage HTML stuff like encoding, header, and other
> specificity.
> 
> Nutch use specific word tools (http://lucene.apache.org/nutch/apidocs/
> org/apache/nutch/parse/msword/package-summary.html), but, IMHO, it's
> not the more difficult part.
> 
> M.
> 
> Le 8 juin 07 à 19:23, jim shirreffs a écrit :
> 
>> Hi,
>> I am trying to index msword documents. I've got things working but  I
>> do not think I am doing things properly.
>>
>> To index msword docs I use an extractor to extract the text. Then I 
>> write the text to a .txt file and index that using an HTMLDocument 
>> object. Seems to me that since I have the text I should be able to 
>> just do a
>>
>>        Doc.add("content", the_text_from_the_word_doc, ???, ???);
>>
>> But looking at Document.java it seems the field "content" requires  a
>> reader. So I write a temporary file to satified that requirement.
>>
>> What I would like to have is an MSWORDDocument class that would  take
>> the extracted text as a argument to the constructor and create  a
>> Ducument object that I could get.
>>
>> If any one has any idea, please let me know.
>>
>> Here is my code segment. Notice the msword hack,
>>
>>
>> /*
>> * make a document
>> */
>>
>> try
>> {
>>   if (ftype.startsWith("text"))
>>   {
>>      doc = HTMLDocument.Document(f);
>>   }
>>   else if (ftype.equals("application/pdf"))
>>   {
>>      doc = LucenePDFDocument.getDocument(f);
>>   }
>>   else if (ftype.equals("application/msword"))
>>   {
>>      FileInputStream fin = new FileInputStream(f.getAbsolutePath());
>>      WordExtractor extractor = new WordExtractor(fin);
>>      String content = extractor.getText();
>>      if(debug) System.out.println(content);
>>      String tempFileName=f.getAbsolutePath() + ".txt";
>>      BufferedWriter bw = new BufferedWriter(new FileWriter
>> (tempFileName, false));
>>      bw.write((String) content.toString());
>>      bw.close();
>>      File df = new File(tempFileName);
>>      doc = HTMLDocument.Document(df);
>>      df.delete();
>>   }
>>   else if (ftype.equals("binary"))
>>   {
>>      return null;
>>   }
>>   else
>>   {
>>      if(debug) System.out.println("Unknown file type not ascii or 
>> pdf.");
>>      doc = HTMLDocument.Document(f);
>>   }
>> }
>> catch(java.lang.InterruptedException ie)
>> {
>>   throw ie;
>> }
>> catch(java.io.IOException ioe)
>> {
>>   throw ioe;
>> }
>>
>>
>>
>>
>>
>> Thanks in advance
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
/**
 * Wayne Graham
 * Earl Gregg Swem Library
 * PO Box 8794
 * Williamsburg, VA 23188
 * 757.221.3112
 * http://swem.wm.edu/blogs/waynegraham/
 */


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 19:33:10 2007
Return-Path: <java-user-return-28557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29938 invoked from network); 8 Jun 2007 19:33:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 19:33:09 -0000
Received: (qmail 42071 invoked by uid 500); 8 Jun 2007 19:33:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42046 invoked by uid 500); 8 Jun 2007 19:33:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42034 invoked by uid 99); 8 Jun 2007 19:33:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 12:33:04 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 12:32:59 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1109517uge
        for <java-user@lucene.apache.org>; Fri, 08 Jun 2007 12:32:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lma9XCyjgoJ3/CXhO6K8J0s5pd9Ot2QNGWMpZLf5/Wwl8RQ7LCYFOpAzJKvRJw//oe824RKEwGh5lIWif87oKcJ2/zZYoeSu6uF1arIruDQlUN+/sP2hLcAj/v378ulTBTGZWJwlE5Y97rTEoO+uBKfnTYzTQMjXvwu3Y1Q3fl0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dW1TYygqd/zGF3ancEuBRNie23Tfd3x7MY/E9RcpY6zV+Jno2G5eAl+KWxFOsbO3n2Tma3U6W+9nNrVSBgPrz1MZLl+cY2Wk1gVoiP9S1FV54Irq6/QLe+YKH/WUyFFi5Eg0GQfAlGjv2zT7vgAVFlzc78e6v/DgX9Fs3yYFf2A=
Received: by 10.82.111.8 with SMTP id j8mr6074101buc.1181331158133;
        Fri, 08 Jun 2007 12:32:38 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Fri, 8 Jun 2007 12:32:38 -0700 (PDT)
Message-ID: <359a92830706081232s393a350ep866f40030e56cbdf@mail.gmail.com>
Date: Fri, 8 Jun 2007 15:32:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.Optimize() is too slow and IOException! How Can I do?
In-Reply-To: <00aa01c7a9f1$10edc960$2e01a8c0@dorthy>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43011_14314294.1181331158105"
References: <28C622BA8A7A474589924466E6303BE00CC773@EXCH01.yikey.com>
	 <5d5204510706061951i2dba539ew5de35b463309ff65@mail.gmail.com>
	 <00aa01c7a9f1$10edc960$2e01a8c0@dorthy>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43011_14314294.1181331158105
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, when asking a new question, it's best to start a new subject.
Your question has nothing to do with the rest of the thread....

That said, you want to create a Reader to pass along. I'd think about
doing this by subclassing your MSWord class from the Reader class
and providing the necessary implementation of the abstract read method.

Best
Erick

On 6/8/07, jim shirreffs <jpsb@verizon.net> wrote:
>
>
> I am trying to index msword documents. I've got things working but I do
> not
> think I am doing things properly.
>
> To index msword docs I use an extractor to extract the text. Then I write
> the text to a .txt file and index that using an HTLMDocument object. Seems
> to me that since I have the text I should be able to just do a
>
>         Doc.add("content", the_text_from_the_word_doc, ???, ???);
>
> But looking at Document.java it seems the field "content" requires a
> reader.
> So I write a temporary file to satified that requirement.
>
> What I would like to have is an MSWORDDocument class that would take the
> extracted text as a argument to the constructor and create a Ducument
> object
> that I could get.
>
> If any one has any idea, please let me know.
>
> Here is a code segment. Notice the msword hack,
>
>
> /*
>
> * make a document
>
> */
>
> try
>
> {
>
>    if (ftype.startsWith("text"))
>
>    {
>
>       doc = HTMLDocument.Document(f);
>
>    }
>
>    else if (ftype.equals("application/pdf"))
>
>    {
>
>       doc = LucenePDFDocument.getDocument(f);
>
>    }
>
>    else if (ftype.equals("application/msword"))
>
>    {
>
>       FileInputStream fin = new FileInputStream(f.getAbsolutePath());
>
>       WordExtractor extractor = new WordExtractor(fin);
>
>       String content = extractor.getText();
>
>       if(debug) System.out.println(content);
>
>       String tempFileName=f.getAbsolutePath() + ".txt";
>
>       BufferedWriter bw = new BufferedWriter(new FileWriter(tempFileName,
> false));
>
>       bw.write((String) content.toString());
>
>       bw.close();
>
>       File df = new File(tempFileName);
>
>       doc = HTMLDocument.Document(df);
>
>       df.delete();
>
>    }
>
>    else if (ftype.equals("binary"))
>
>    {
>
>       return null;
>
>    }
>
>    else
>
>    {
>
>       if(debug) System.out.println("Unknown file type not ascii or pdf.");
>
>       doc = HTMLDocument.Document(f);
>
>    }
>
> }
>
> catch(java.lang.InterruptedException ie)
>
> {
>
>    throw ie;
>
> }
>
> catch(java.io.IOException ioe)
>
> {
>
>    throw ioe;
>
> }
>
>
>
>
>
> Thanks in advance
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43011_14314294.1181331158105--

From java-user-return-28558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 22:05:31 2007
Return-Path: <java-user-return-28558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17155 invoked from network); 8 Jun 2007 22:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 22:05:30 -0000
Received: (qmail 60044 invoked by uid 500); 8 Jun 2007 22:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60015 invoked by uid 500); 8 Jun 2007 22:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60004 invoked by uid 99); 8 Jun 2007 22:05:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 15:05:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 15:05:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1AEDC5B779; Fri,  8 Jun 2007 15:05:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E97497F403
	for <java-user@lucene.apache.org>; Fri,  8 Jun 2007 15:05:00 -0700 (PDT)
Date: Fri, 8 Jun 2007 15:05:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question about querying for files in a zip file
In-Reply-To: <E387E2E9622FDD408359F98BF183879ED2BDAA@dc1.storediq.com>
Message-ID: <Pine.LNX.4.58.0706081501520.23591@hal.rescomp.berkeley.edu>
References: <E387E2E9622FDD408359F98BF183879ED2BDAA@dc1.storediq.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: We would also entertain alternative indexing approaches.  We even
: considered concatenating all the text of the contained docs into a doc
: indexed as the zipfile, but lucene only indexes part of a large file and
: even if that were resolved, proximity searches can return false
: positives.

problem #1 can be resolved using this...
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/index/IndexWriter.html#setMaxFieldLength(int)

problem #2 can be resolved by making sure you add the contents of each
file in the zip as a seperate Field objects (with the same name) and
making sure you use an Analyzer where this method...
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/analysis/Analyzer.html#getPositionIncrementGap(java.lang.String)
...returns a number significantly larger then whatever the biggest slop
value you use intend to use when doing proximity queries.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 08 22:11:07 2007
Return-Path: <java-user-return-28559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18841 invoked from network); 8 Jun 2007 22:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2007 22:11:05 -0000
Received: (qmail 71381 invoked by uid 500); 8 Jun 2007 22:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71325 invoked by uid 500); 8 Jun 2007 22:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71308 invoked by uid 99); 8 Jun 2007 22:10:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 15:10:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jun 2007 15:10:19 -0700
Received: by wr-out-0506.google.com with SMTP id i4so890801wra
        for <java-user@lucene.apache.org>; Fri, 08 Jun 2007 15:09:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hT5PKpkuVm+tk4502XtjBVJpvyVRzgDkm8HSC9Db231V5mjI1S1dUJylBZbuglb/Q77o1wP7UfFahhCB/8LSSfeEUndcbpGEhOonZiMdwoZLW7bYA3NDUiSGTNjsc8UdoyZx6GTBfmoKtXA2AtaDqqMuXa4oeKOOg2fFZ3VFbZc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=aHqFq0nbFKXT4uSvvsqVTlKxd3wFGUbMNOCBcc8XJsB93OdtZ/FB7yEJ6/7sN+92dzKiYeW8IYboRygXJGCATvqLw/vI3PYY4UtgVyvjYjO+V4jiK8gxXOEKt3xid52GwAGAhhchsB0+Yh/rTXEMVoCGkjkvK1FF/0oWq7H9gbc=
Received: by 10.78.160.4 with SMTP id i4mr1435004hue.1181340595213;
        Fri, 08 Jun 2007 15:09:55 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Fri, 8 Jun 2007 15:09:55 -0700 (PDT)
Message-ID: <6e3ae6310706081509m9650425t907a324a981d0b16@mail.gmail.com>
Date: Fri, 8 Jun 2007 15:09:55 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to implement AJAX search~Lucene Search part?
In-Reply-To: <359a92830706080710q4df331ddve6f9b804a9c1c823@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
	 <359a92830706080710q4df331ddve6f9b804a9c1c823@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks to all who answered with their experience and insights!

LUCENE-625 is very interesting, but not sure about the scalability.
"Begin completion only with 3 letters or more" is reasonable for
special cases, but not ideal. What I wanted to implement is a pretty
general software.

WildcardTermEnum seems closest to what I planned to search on existing
Lucene index, possibly pretty large. I can use it to list, say top 10
matching terms, and I can use another search to find all matching
docs. This is actually 2 searches.

Sounds pertty good?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 6/8/07, Erick Erickson <erickerickson@gmail.com> wrote:
> You can get the information pretty quickly by using a
> WildcardTermEnum (NOT query). Especially if you
> terminate after some number of characters....
>
> Erick
>
> On 6/7/07, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > Hi,
> >
> > I would like to implement an AJAX search. Basically when user types in
> > several characters,  I will try to search the Lucene index and found
> > all possible matching items.
> >
> > Seems I need to use wildcard query like "test*" to matching anything.
> > Is this the only way to do it? It doesn't seems quite efficient,
> > especially when you just typed in the first character.
> >
> > I guess the "good" way is to go through the terms, and return as soon
> > as, for example, 10 terms are found.
> >
> > I am wondering is there anything like this already built?
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> > http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 09 14:56:28 2007
Return-Path: <java-user-return-28560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97698 invoked from network); 9 Jun 2007 14:56:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2007 14:56:27 -0000
Received: (qmail 61017 invoked by uid 500); 9 Jun 2007 14:56:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60249 invoked by uid 500); 9 Jun 2007 14:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60234 invoked by uid 99); 9 Jun 2007 14:56:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jun 2007 07:56:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsb@verizon.net designates 206.46.252.40 as permitted sender)
Received: from [206.46.252.40] (HELO vms040pub.verizon.net) (206.46.252.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jun 2007 07:56:18 -0700
Received: from dorthy ([71.248.153.228])
 by vms040.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JJD0015AIT420X2@vms040.mailsrvcs.net> for
 java-user@lucene.apache.org; Sat, 09 Jun 2007 09:55:53 -0500 (CDT)
Date: Sat, 09 Jun 2007 09:55:55 -0500
From: "jim shirreffs" <jpsb@verizon.net>
Subject: Re: Indexing MSword Documents
To: <java-user@lucene.apache.org>
Message-id: <012801c7aaa6$48800130$2e01a8c0@dorthy>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
Content-type: text/plain; format=flowed; charset=iso-8859-1; reply-type=original
Content-transfer-encoding: 8BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <00b701c7a9f1$bb4bada0$2e01a8c0@dorthy>
 <E0928E5E-F6DC-4782-97B0-8EB1799C40E7@garambrogne.net>
 <00e301c7a9fb$d338f800$2e01a8c0@dorthy> <4669A9A6.1070108@wm.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

thanks the apprach you and Donna Gresh suggested worked out fine. I now have 
a much better understanding of the Document class.


here is the create Document code in case another newie is interested. as 
more mine types are added I will expand the in if

thanks again

jim s


public class KcmiDocument
{
 String objectId;
 String title;
 String mtype;

 private boolean debug=true;

 public KcmiDocument(String oId, String t, String f)
 {
  objectId=oId;
  title = t;
  mtype=f;
  if(debug) System.out.println("In KcmiDocument with " + oId + ":" + t + ":" 
+ f);
 }

 /*
  * Makes a document for a file.
  * The document has four custom fields:
  * path, modified date, title and objectId
  */
 public Document document(File f) throws java.io.FileNotFoundException,
  java.io.IOException, java.lang.InterruptedException
 {
  if(debug) System.out.println("In KcmiDocument.document with " + 
f.getAbsolutePath());

  Document doc = null;

  /*
   * make a document
   */
  try
  {
   if (mtype.startsWith("text"))
   {
    doc = HTMLDocument.Document(f);
   }
   else if (mtype.equals("application/pdf"))
   {
    doc = LucenePDFDocument.getDocument(f);
   }
   else if (mtype.equals("application/msword"))
   {
    FileInputStream fin = new FileInputStream(f.getAbsolutePath());
    WordExtractor extractor = new WordExtractor(fin);
    String content = extractor.getText();

    if(debug) System.out.println(content);

    doc = new Document();
    doc.add(new Field("contents", content, Field.Store.NO, 
Field.Index.TOKENIZED));
   }
   else if (mtype.equals("???")) //binary
   {
    throw new java.io.IOException(f.getName() +
     " mime type can not be determined unable to extract doument content");
   }
   else
   {
    if(debug) System.out.println("Unknown using trying htmldocument.");
    doc = HTMLDocument.Document(f);
   }
  }
  catch(java.lang.InterruptedException ie)
  {
   throw ie;
  }
  catch(java.io.IOException ioe)
  {
   throw ioe;
  }

  /*
   * Add the path of the file as a field named "path".  Use a field that is
   * indexed (i.e. searchable), but don't tokenize the field into words.
   */
  doc.add(new Field("path", f.getPath(), Field.Store.YES, 
Field.Index.UN_TOKENIZED));

  /*
   * Add ObjectId
   */
  doc.add(new Field("objectId",
   objectId,
   Field.Store.YES,
   Field.Index.UN_TOKENIZED));

  /*
   * Add title
   */
  doc.add(new Field("kcmititle",
   title,
   Field.Store.YES,
   Field.Index.UN_TOKENIZED));

  /*
   * return the document
   */
  return doc;
 }
}
----- Original Message ----- 
From: "Wayne Graham" <wsgrah@wm.edu>
To: <java-user@lucene.apache.org>
Sent: Friday, June 08, 2007 2:10 PM
Subject: Re: Indexing MSword Documents


> Jim,
>
> There are a few things you can do to make extracting text easier on
> yourself. There are several libraries that can assist you, POI and
> TextMining.org both have excellent text extractors for Word.
>
> As Mathieu suggests, you need to take a look at Document. Essentially,
> you do everything you're doing and when it gets time to insert your
> content, you'll do something along the lines of (this is using
> TextMining.org's extractor):
>
> String content = new WordExtractor().extractText(new 
> FileInputStream(file));
>
> doc.add(new Field("content", content, Field.Store.NO,
> Field.Index.TOKENIZED));
>
> You should be able to edit the example code you're working with fairly
> easily with the above.
>
> HTH,
> Wayne
>
> jim shirreffs wrote:
>> I looked at nutches code but it is too complicated for me to follow.
>>
>> I do not understand the guts of Lucene and how analyzers, parsers,
>> readers, etc all fit together. I suppose I will be forced to learn it
>> all someday but at the moment I am adhering to KISS, Keep It Simple 
>> Stupid.
>>
>> thanks for taking the time to reply
>>
>>
>> jim s
>>
>> ----- Original Message ----- From: "Mathieu Lecarme"
>> <mathieu@garambrogne.net>
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, June 08, 2007 12:48 PM
>> Subject: Re: Indexing MSword Documents
>>
>>
>> Why don't use Document?
>> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/
>> org/apache/lucene/document/Document.html
>>
>> HTMLDocument manage HTML stuff like encoding, header, and other
>> specificity.
>>
>> Nutch use specific word tools (http://lucene.apache.org/nutch/apidocs/
>> org/apache/nutch/parse/msword/package-summary.html), but, IMHO, it's
>> not the more difficult part.
>>
>> M.
>>
>> Le 8 juin 07 à 19:23, jim shirreffs a écrit :
>>
>>> Hi,
>>> I am trying to index msword documents. I've got things working but  I
>>> do not think I am doing things properly.
>>>
>>> To index msword docs I use an extractor to extract the text. Then I
>>> write the text to a .txt file and index that using an HTMLDocument
>>> object. Seems to me that since I have the text I should be able to
>>> just do a
>>>
>>>        Doc.add("content", the_text_from_the_word_doc, ???, ???);
>>>
>>> But looking at Document.java it seems the field "content" requires  a
>>> reader. So I write a temporary file to satified that requirement.
>>>
>>> What I would like to have is an MSWORDDocument class that would  take
>>> the extracted text as a argument to the constructor and create  a
>>> Ducument object that I could get.
>>>
>>> If any one has any idea, please let me know.
>>>
>>> Here is my code segment. Notice the msword hack,
>>>
>>>
>>> /*
>>> * make a document
>>> */
>>>
>>> try
>>> {
>>>   if (ftype.startsWith("text"))
>>>   {
>>>      doc = HTMLDocument.Document(f);
>>>   }
>>>   else if (ftype.equals("application/pdf"))
>>>   {
>>>      doc = LucenePDFDocument.getDocument(f);
>>>   }
>>>   else if (ftype.equals("application/msword"))
>>>   {
>>>      FileInputStream fin = new FileInputStream(f.getAbsolutePath());
>>>      WordExtractor extractor = new WordExtractor(fin);
>>>      String content = extractor.getText();
>>>      if(debug) System.out.println(content);
>>>      String tempFileName=f.getAbsolutePath() + ".txt";
>>>      BufferedWriter bw = new BufferedWriter(new FileWriter
>>> (tempFileName, false));
>>>      bw.write((String) content.toString());
>>>      bw.close();
>>>      File df = new File(tempFileName);
>>>      doc = HTMLDocument.Document(df);
>>>      df.delete();
>>>   }
>>>   else if (ftype.equals("binary"))
>>>   {
>>>      return null;
>>>   }
>>>   else
>>>   {
>>>      if(debug) System.out.println("Unknown file type not ascii or
>>> pdf.");
>>>      doc = HTMLDocument.Document(f);
>>>   }
>>> }
>>> catch(java.lang.InterruptedException ie)
>>> {
>>>   throw ie;
>>> }
>>> catch(java.io.IOException ioe)
>>> {
>>>   throw ioe;
>>> }
>>>
>>>
>>>
>>>
>>>
>>> Thanks in advance
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> -- 
> /**
> * Wayne Graham
> * Earl Gregg Swem Library
> * PO Box 8794
> * Williamsburg, VA 23188
> * 757.221.3112
> * http://swem.wm.edu/blogs/waynegraham/
> */
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 09 15:08:56 2007
Return-Path: <java-user-return-28561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99815 invoked from network); 9 Jun 2007 15:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2007 15:08:55 -0000
Received: (qmail 78335 invoked by uid 500); 9 Jun 2007 15:08:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78293 invoked by uid 500); 9 Jun 2007 15:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78282 invoked by uid 99); 9 Jun 2007 15:08:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jun 2007 08:08:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jun 2007 08:08:48 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 85AC498ED3
	for <java-user@lucene.apache.org>; Sat,  9 Jun 2007 17:08:25 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6e3ae6310706081509m9650425t907a324a981d0b16@mail.gmail.com>
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com> <359a92830706080710q4df331ddve6f9b804a9c1c823@mail.gmail.com> <6e3ae6310706081509m9650425t907a324a981d0b16@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <C0F959D8-CC3E-4C03-9C9A-CBEC12109EBF@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: How to implement AJAX search~Lucene Search part?
Date: Sat, 9 Jun 2007 17:08:23 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You can work like with lucene spelling.
A specific Index with word as Document, boost with something =20
proportionnal of number of occurences (with log and math magic)
The magical stuff is n Fields with starting ngram, not stored, no =20
tokenized.
For example, if you wont to index the word "carott", you will index =20
the fields carott, carot, caro, car, ca, c.
With this huge index, you can search quickly, ordered by what you wont.
Two improvement, for reducing index size, you can limit the number of =20=

letter (min and max), and extract the right one in a little set, =20
after a request.
What about bad words?
This index could be extended with two words suggestion like Google =20
and co do.

M.


Le 9 juin 07 =E0 00:09, Chris Lu a =E9crit :

> Thanks to all who answered with their experience and insights!
>
> LUCENE-625 is very interesting, but not sure about the scalability.
> "Begin completion only with 3 letters or more" is reasonable for
> special cases, but not ideal. What I wanted to implement is a pretty
> general software.
>
> WildcardTermEnum seems closest to what I planned to search on existing
> Lucene index, possibly pretty large. I can use it to list, say top 10
> matching terms, and I can use another search to find all matching
> docs. This is actually 2 searches.
>
> Sounds pertty good?
>
> --=20
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?=20
> title=3DCreate_Lucene_Database_Search_in_3_minutes
>
>
> On 6/8/07, Erick Erickson <erickerickson@gmail.com> wrote:
>> You can get the information pretty quickly by using a
>> WildcardTermEnum (NOT query). Especially if you
>> terminate after some number of characters....
>>
>> Erick
>>
>> On 6/7/07, Chris Lu <chris.lu@gmail.com> wrote:
>> >
>> > Hi,
>> >
>> > I would like to implement an AJAX search. Basically when user =20
>> types in
>> > several characters,  I will try to search the Lucene index and =20
>> found
>> > all possible matching items.
>> >
>> > Seems I need to use wildcard query like "test*" to matching =20
>> anything.
>> > Is this the only way to do it? It doesn't seems quite efficient,
>> > especially when you just typed in the first character.
>> >
>> > I guess the "good" way is to go through the terms, and return as =20=

>> soon
>> > as, for example, 10 terms are found.
>> >
>> > I am wondering is there anything like this already built?
>> >
>> > --
>> > Chris Lu
>> > -------------------------
>> > Instant Scalable Full-Text Search On Any Database/Application
>> > site: http://www.dbsight.net
>> > demo: http://search.dbsight.com
>> > Lucene Database Search in 3 minutes:
>> >
>> > http://wiki.dbsight.com/index.php?=20
>> title=3DCreate_Lucene_Database_Search_in_3_minutes
>> >
>> > =20
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 09 15:19:28 2007
Return-Path: <java-user-return-28562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2008 invoked from network); 9 Jun 2007 15:19:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2007 15:19:27 -0000
Received: (qmail 96131 invoked by uid 500); 9 Jun 2007 15:19:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96094 invoked by uid 500); 9 Jun 2007 15:19:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96083 invoked by uid 99); 9 Jun 2007 15:19:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jun 2007 08:19:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.209.148.227] (HELO dd1618.kasserver.com) (81.209.148.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jun 2007 08:19:19 -0700
Received: from [192.168.32.109] (225.112.77.83.cust.bluewin.ch [83.77.112.225])
	by dd1618.kasserver.com (Postfix) with ESMTP id B163A16553
	for <java-user@lucene.apache.org>; Sat,  9 Jun 2007 17:18:57 +0200 (CEST)
Message-ID: <466AC4E8.8010803@rssowl.org>
Date: Sat, 09 Jun 2007 17:19:04 +0200
From: Benjamin Pasero <bpasero@rssowl.org>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Retrieving TermVectors from a Field over the full index?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I wonder if this is possible:

Return all Terms of a Field in the Index together with the number of
occurances
in all documents.

E.g. have 10 Documents with the Field "author" in the index, 5 of them
having
the value "foo" and 5 "bar" I would like to build a map with:

[foo] -> 5
[bar] -> 5

I looked at what Luke is doing to show the top terms of a given field in the
index and it seems to iterate over all terms (using
IndexReader#terms()). Isnt
that quite un-efficient? I would at least expect a method
IndexReader#terms(String field)
to limit the terms on the desired field.

Thanks for helping,
Ben


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 09 18:28:19 2007
Return-Path: <java-user-return-28563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54771 invoked from network); 9 Jun 2007 18:28:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2007 18:28:18 -0000
Received: (qmail 34368 invoked by uid 500); 9 Jun 2007 18:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34344 invoked by uid 500); 9 Jun 2007 18:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34333 invoked by uid 99); 9 Jun 2007 18:28:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jun 2007 11:28:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jun 2007 11:28:08 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1282160uge
        for <java-user@lucene.apache.org>; Sat, 09 Jun 2007 11:27:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TThPHt22K9jngd4YpflS9iXa+anAKVppj6p2OU4W6MFRMvA16biokACL2KLYlh3iKa0vMNDgoMdsHRHai+jUsPLx3xYD9dvbz26tCwPD4poUTEOQSqWL24P0zhbhzDdmZY3Ow+Kk82gwYPG2vpEDw1AoyEe500zhL0UwNbqax24=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Zrf3ICyAIc9fh47UkPMRGer2bdqdJ1Ed9G+8KTipO8s77wC1+N+Y4WfWL0mo6YN0Hl7iBMVeYdj02lCWpiNExVObuWxZlrz21hhxrPbUaw/EDQT5SUtsBluSZmMtQv6dFgq8hjzqBj62tjBxwRW2VhD0x9al9lsfgkJhWvlR2ds=
Received: by 10.78.178.5 with SMTP id a5mr1634569huf.1181413666564;
        Sat, 09 Jun 2007 11:27:46 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Sat, 9 Jun 2007 11:27:46 -0700 (PDT)
Message-ID: <6e3ae6310706091127w1365f5a5va06f52eddfc0e7db@mail.gmail.com>
Date: Sat, 9 Jun 2007 11:27:46 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to implement AJAX search~Lucene Search part?
In-Reply-To: <C0F959D8-CC3E-4C03-9C9A-CBEC12109EBF@garambrogne.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
	 <359a92830706080710q4df331ddve6f9b804a9c1c823@mail.gmail.com>
	 <6e3ae6310706081509m9650425t907a324a981d0b16@mail.gmail.com>
	 <C0F959D8-CC3E-4C03-9C9A-CBEC12109EBF@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for this suggestion. This coincide what Karl Wettin suggested
ngram approach.

This is a good alternative and very simple. However, two drawbacks:
extra indexing and non-linear index size.

A more complicated alternative solution can combine this approach with
wildcard query. For the first character search, like the "c" in
"carrot", There are only 26 letters after all, the results can be
cached. Maybe I can cache 2 characters and let wildcard take care of
prefix with 3 or more letters after that.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes

On 6/9/07, Mathieu Lecarme <mathieu@garambrogne.net> wrote:
> You can work like with lucene spelling.
> A specific Index with word as Document, boost with something
> proportionnal of number of occurences (with log and math magic)
> The magical stuff is n Fields with starting ngram, not stored, no
> tokenized.
> For example, if you wont to index the word "carott", you will index
> the fields carott, carot, caro, car, ca, c.
> With this huge index, you can search quickly, ordered by what you wont.
> Two improvement, for reducing index size, you can limit the number of
> letter (min and max), and extract the right one in a little set,
> after a request.
> What about bad words?
> This index could be extended with two words suggestion like Google
> and co do.
>
> M.
>
>
> Le 9 juin 07 =E0 00:09, Chris Lu a =E9crit :
>
> > Thanks to all who answered with their experience and insights!
> >
> > LUCENE-625 is very interesting, but not sure about the scalability.
> > "Begin completion only with 3 letters or more" is reasonable for
> > special cases, but not ideal. What I wanted to implement is a pretty
> > general software.
> >
> > WildcardTermEnum seems closest to what I planned to search on existing
> > Lucene index, possibly pretty large. I can use it to list, say top 10
> > matching terms, and I can use another search to find all matching
> > docs. This is actually 2 searches.
> >
> > Sounds pertty good?
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> > http://wiki.dbsight.com/index.php?
> > title=3DCreate_Lucene_Database_Search_in_3_minutes
> >
> >
> > On 6/8/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >> You can get the information pretty quickly by using a
> >> WildcardTermEnum (NOT query). Especially if you
> >> terminate after some number of characters....
> >>
> >> Erick
> >>
> >> On 6/7/07, Chris Lu <chris.lu@gmail.com> wrote:
> >> >
> >> > Hi,
> >> >
> >> > I would like to implement an AJAX search. Basically when user
> >> types in
> >> > several characters,  I will try to search the Lucene index and
> >> found
> >> > all possible matching items.
> >> >
> >> > Seems I need to use wildcard query like "test*" to matching
> >> anything.
> >> > Is this the only way to do it? It doesn't seems quite efficient,
> >> > especially when you just typed in the first character.
> >> >
> >> > I guess the "good" way is to go through the terms, and return as
> >> soon
> >> > as, for example, 10 terms are found.
> >> >
> >> > I am wondering is there anything like this already built?
> >> >
> >> > --
> >> > Chris Lu
> >> > -------------------------
> >> > Instant Scalable Full-Text Search On Any Database/Application
> >> > site: http://www.dbsight.net
> >> > demo: http://search.dbsight.com
> >> > Lucene Database Search in 3 minutes:
> >> >
> >> > http://wiki.dbsight.com/index.php?
> >> title=3DCreate_Lucene_Database_Search_in_3_minutes
> >> >
> >> >
> >> ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 10 17:32:23 2007
Return-Path: <java-user-return-28564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37223 invoked from network); 10 Jun 2007 17:32:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2007 17:32:21 -0000
Received: (qmail 3747 invoked by uid 500); 10 Jun 2007 17:32:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3675 invoked by uid 500); 10 Jun 2007 17:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3663 invoked by uid 99); 10 Jun 2007 17:32:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 10:32:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 10:32:12 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1424928uge
        for <java-user@lucene.apache.org>; Sun, 10 Jun 2007 10:31:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=enxswXKYd4fWizn+VQfAhv8gqC8b3DXIhHk6EjeinR1j8U2O/cFi6D+PDBi6KlMXi9kx3d2tfEI5nXPfQtGIeOAIBqvwekv851phnAT8RX1VDSoZ4qOO+P67oZKRbrsPW0Aa/fAHvmoP26SWo28ku71djjXTI1pljJa3mHQRX5A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KzBSFHwhraZ39/Mrzst4ukwXVZtHsQg0fSzNYwSooqG/4CX9snSDMAcLFbmWayn0ZUTzh13ok1vtD0h39j+9dMU1CECr2xbZhXw7CAqTLoZ+GToUXyWMq1G22llXtu9oLUAJRr1alxg4u8pCVTaZoY18rZIgDmA4f2LuLz/8MUM=
Received: by 10.82.112.16 with SMTP id k16mr9339697buc.1181496709640;
        Sun, 10 Jun 2007 10:31:49 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sun, 10 Jun 2007 10:31:49 -0700 (PDT)
Message-ID: <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>
Date: Sun, 10 Jun 2007 13:31:49 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieving TermVectors from a Field over the full index?
In-Reply-To: <466AC4E8.8010803@rssowl.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52715_25406505.1181496709595"
References: <466AC4E8.8010803@rssowl.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52715_25406505.1181496709595
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Um, to return all counts of all terms in a field, what other option
*is* there except to walk the whole thing?

Have you looked at TermEnum, TermDocs, and TermFreqVector?
For that matter, TermPositionVector might also be of some use.

It would be easier to provide some help if you
1> mentioned what you'd tried already
2> mentioned what's inadequate about what you've tried.

Best
Erick

On 6/9/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>
> Hi,
>
> I wonder if this is possible:
>
> Return all Terms of a Field in the Index together with the number of
> occurances
> in all documents.
>
> E.g. have 10 Documents with the Field "author" in the index, 5 of them
> having
> the value "foo" and 5 "bar" I would like to build a map with:
>
> [foo] -> 5
> [bar] -> 5
>
> I looked at what Luke is doing to show the top terms of a given field in
> the
> index and it seems to iterate over all terms (using
> IndexReader#terms()). Isnt
> that quite un-efficient? I would at least expect a method
> IndexReader#terms(String field)
> to limit the terms on the desired field.
>
> Thanks for helping,
> Ben
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_52715_25406505.1181496709595--

From java-user-return-28565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 10 17:37:54 2007
Return-Path: <java-user-return-28565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37702 invoked from network); 10 Jun 2007 17:37:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2007 17:37:52 -0000
Received: (qmail 10729 invoked by uid 500); 10 Jun 2007 17:37:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10696 invoked by uid 500); 10 Jun 2007 17:37:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10685 invoked by uid 99); 10 Jun 2007 17:37:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 10:37:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 10:37:44 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1425720uge
        for <java-user@lucene.apache.org>; Sun, 10 Jun 2007 10:37:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nwg8MyAvPd/RDm8rZUASdYZFW6kjfxeppQmAyHN+zbP9FMMIwfFWay2NGjYJKoM6wnVnsxVxZw0K2vjmdauJHmkpo3okqgqMoX4QIji2rqPaCzjCWY38svM/t4TWCn0vuF/UuVbH0EYPNnOcBiWooKg5xkWRlh6ayUr2L3arU7Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TzLb50a9jgVVdfkvjGzytVbkl+KE7+egn9VZaaEXfWuLH63Xe/+5TfXas8Y1DH2JBV8xfh0QImgrfdr7yrwHZFMogatFqbYHbRgr/I6ddcFcB2QBpSiUdMSvfAliQa2ufBjP4HcG6I2BuOC4c+ZyICgqOvWe5U17bpqedJDW9uI=
Received: by 10.82.174.20 with SMTP id w20mr9317734bue.1181497041413;
        Sun, 10 Jun 2007 10:37:21 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sun, 10 Jun 2007 10:37:21 -0700 (PDT)
Message-ID: <359a92830706101037y1e545d1bi4e8d9bad0d5d5421@mail.gmail.com>
Date: Sun, 10 Jun 2007 13:37:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to implement AJAX search~Lucene Search part?
In-Reply-To: <6e3ae6310706081509m9650425t907a324a981d0b16@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52767_18187825.1181497041351"
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com>
	 <359a92830706080710q4df331ddve6f9b804a9c1c823@mail.gmail.com>
	 <6e3ae6310706081509m9650425t907a324a981d0b16@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52767_18187825.1181497041351
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...

On 6/8/07, Chris Lu <chris.lu@gmail.com> wrote:
>
> Thanks to all who answered with their experience and insights!
>
> LUCENE-625 is very interesting, but not sure about the scalability.
> "Begin completion only with 3 letters or more" is reasonable for
> special cases, but not ideal. What I wanted to implement is a pretty
> general software.
>
> WildcardTermEnum seems closest to what I planned to search on existing
> Lucene index, possibly pretty large. I can use it to list, say top 10
> matching terms, and I can use another search to find all matching
> docs. This is actually 2 searches.


Not really. WildcardTermEnum is actually MUCH less costly than
a search. Imagine a list that contains every term in the index, already
ordered lexically. A *trailing* wildcard character is really a prefix,
right?
So all that's really happening is something (and I've never looked at the
code, so beware <G>)

get the index of the first matching term.
starting with that index, increment until the term you find doesn't have
that prefix.

That's it. Way, way, way different than queries which find *all* the
terms that could possibly match your prefix. Find *all* the documents
that have *any* of those terms. Calculate the relevancy scores.
Optionally sort them.

But try it. In fact, try enumerating all the terms for a given prefix
and take some timings. I think you'll be impressed how fast it
is and you can lay your fears to rest.


Sounds pertty good?
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
>
> On 6/8/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > You can get the information pretty quickly by using a
> > WildcardTermEnum (NOT query). Especially if you
> > terminate after some number of characters....
> >
> > Erick
> >
> > On 6/7/07, Chris Lu <chris.lu@gmail.com> wrote:
> > >
> > > Hi,
> > >
> > > I would like to implement an AJAX search. Basically when user types in
> > > several characters,  I will try to search the Lucene index and found
> > > all possible matching items.
> > >
> > > Seems I need to use wildcard query like "test*" to matching anything.
> > > Is this the only way to do it? It doesn't seems quite efficient,
> > > especially when you just typed in the first character.
> > >
> > > I guess the "good" way is to go through the terms, and return as soon
> > > as, for example, 10 terms are found.
> > >
> > > I am wondering is there anything like this already built?
> > >
> > > --
> > > Chris Lu
> > > -------------------------
> > > Instant Scalable Full-Text Search On Any Database/Application
> > > site: http://www.dbsight.net
> > > demo: http://search.dbsight.com
> > > Lucene Database Search in 3 minutes:
> > >
> > >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_52767_18187825.1181497041351--

From java-user-return-28566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 10 17:45:15 2007
Return-Path: <java-user-return-28566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38458 invoked from network); 10 Jun 2007 17:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2007 17:45:14 -0000
Received: (qmail 19827 invoked by uid 500); 10 Jun 2007 17:45:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19800 invoked by uid 500); 10 Jun 2007 17:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19789 invoked by uid 99); 10 Jun 2007 17:45:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 10:45:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.209.148.227] (HELO dd1618.kasserver.com) (81.209.148.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 10:45:05 -0700
Received: from [192.168.32.109] (36.78.76.83.cust.bluewin.ch [83.76.78.36])
	by dd1618.kasserver.com (Postfix) with ESMTP id 4B86E555AF
	for <java-user@lucene.apache.org>; Sun, 10 Jun 2007 19:44:42 +0200 (CEST)
Message-ID: <466C3890.9060006@rssowl.org>
Date: Sun, 10 Jun 2007 19:44:48 +0200
From: Benjamin Pasero <bpasero@rssowl.org>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Retrieving TermVectors from a Field over the full index?
References: <466AC4E8.8010803@rssowl.org> <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>
In-Reply-To: <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Erick Erickson wrote:
> Um, to return all counts of all terms in a field, what other option
> *is* there except to walk the whole thing?
>
> Have you looked at TermEnum, TermDocs, and TermFreqVector?
> For that matter, TermPositionVector might also be of some use.
>
> It would be easier to provide some help if you
> 1> mentioned what you'd tried already
> 2> mentioned what's inadequate about what you've tried.
Sorry for not being clear what I am trying to achieve. I am storing
documents in my index that are made of 5 Fields. One of the Fields
contains keywords that describe the document. Now, I need a fast
way of retrieving these keywords together with their frequency from
the index.

My current solution is to use IndexReader#terms() to walk over all
terms and count the ones that appear in the keyword-Field.

As you can assume, this is not scaling well. The content in the keywords
field is usually quite small, however, the other fields may store
up to thousands of terms.

What I am asking for is a way to walk all the terms of just the 
keyword-field
in order to avoid having to walk all terms in all fields.

Of course, even better would be some API that would return a TermVector from
the keyword-field. But I guess TermVectors are only supported on a per
Document level and not index level?

Regards,
Ben
>
> Best
> Erick
>
> On 6/9/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>>
>> Hi,
>>
>> I wonder if this is possible:
>>
>> Return all Terms of a Field in the Index together with the number of
>> occurances
>> in all documents.
>>
>> E.g. have 10 Documents with the Field "author" in the index, 5 of them
>> having
>> the value "foo" and 5 "bar" I would like to build a map with:
>>
>> [foo] -> 5
>> [bar] -> 5
>>
>> I looked at what Luke is doing to show the top terms of a given field in
>> the
>> index and it seems to iterate over all terms (using
>> IndexReader#terms()). Isnt
>> that quite un-efficient? I would at least expect a method
>> IndexReader#terms(String field)
>> to limit the terms on the desired field.
>>
>> Thanks for helping,
>> Ben
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 10 20:00:37 2007
Return-Path: <java-user-return-28567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64320 invoked from network); 10 Jun 2007 20:00:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2007 20:00:36 -0000
Received: (qmail 22006 invoked by uid 500); 10 Jun 2007 20:00:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21964 invoked by uid 500); 10 Jun 2007 20:00:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21953 invoked by uid 99); 10 Jun 2007 20:00:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 13:00:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 13:00:29 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1446302uge
        for <java-user@lucene.apache.org>; Sun, 10 Jun 2007 13:00:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JnANSMDzdwrngkS9M1rGaeJW/6QqqYi91cjV9Ehyi5AhtWqQDILUn5aeI+53HniUOldNxon0tNRBqbh4RvhQe6/D+V7nTKdjN4atrz8YGepTGnXhOx5wmQ+2PBvL4pljT92aJ/hIzZA0YLEinn2qEzeRprWKWW6wCtgmS8p6pQU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fp4kzfsW4Kw6Z411Y0bTYG7zq/uTbyn2dBe/2KX40TH6ZnWcNMPzcyldUnC/Nia4mCkL4F8c4L9snaGaH98Fg7rjP6nO5ht/8oxE6ijs6Apvg1md/r3N1GKhn+pKCPRsh0x5QgyOmPMVFbPpRJ/nBuRe2md+KVzXipQK+PfBl4o=
Received: by 10.82.108.9 with SMTP id g9mr9595240buc.1181505607643;
        Sun, 10 Jun 2007 13:00:07 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sun, 10 Jun 2007 13:00:07 -0700 (PDT)
Message-ID: <359a92830706101300jd54d938n522b14aef2dd660b@mail.gmail.com>
Date: Sun, 10 Jun 2007 16:00:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieving TermVectors from a Field over the full index?
In-Reply-To: <466C3890.9060006@rssowl.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53075_1509552.1181505607620"
References: <466AC4E8.8010803@rssowl.org>
	 <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>
	 <466C3890.9060006@rssowl.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53075_1509552.1181505607620
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Maybe I'm missing the boat, but I don't understand why TermEnum doesn't
work for you.
Try something like...

       TermEnum te = this.reader.terms();
        te.skipTo(new Term("keyword", ""));
        while (te.next()) {
            Term term = te.term();
            if (! term.field().equals("keyword")) {
                break;
            }
            System.out.println(term.text());
        }



On 6/10/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>
>
>
> Erick Erickson wrote:
> > Um, to return all counts of all terms in a field, what other option
> > *is* there except to walk the whole thing?
> >
> > Have you looked at TermEnum, TermDocs, and TermFreqVector?
> > For that matter, TermPositionVector might also be of some use.
> >
> > It would be easier to provide some help if you
> > 1> mentioned what you'd tried already
> > 2> mentioned what's inadequate about what you've tried.
> Sorry for not being clear what I am trying to achieve. I am storing
> documents in my index that are made of 5 Fields. One of the Fields
> contains keywords that describe the document. Now, I need a fast
> way of retrieving these keywords together with their frequency from
> the index.
>
> My current solution is to use IndexReader#terms() to walk over all
> terms and count the ones that appear in the keyword-Field.
>
> As you can assume, this is not scaling well. The content in the keywords
> field is usually quite small, however, the other fields may store
> up to thousands of terms.
>
> What I am asking for is a way to walk all the terms of just the
> keyword-field
> in order to avoid having to walk all terms in all fields.
>
> Of course, even better would be some API that would return a TermVector
> from
> the keyword-field. But I guess TermVectors are only supported on a per
> Document level and not index level?
>
> Regards,
> Ben
> >
> > Best
> > Erick
> >
> > On 6/9/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
> >>
> >> Hi,
> >>
> >> I wonder if this is possible:
> >>
> >> Return all Terms of a Field in the Index together with the number of
> >> occurances
> >> in all documents.
> >>
> >> E.g. have 10 Documents with the Field "author" in the index, 5 of them
> >> having
> >> the value "foo" and 5 "bar" I would like to build a map with:
> >>
> >> [foo] -> 5
> >> [bar] -> 5
> >>
> >> I looked at what Luke is doing to show the top terms of a given field
> in
> >> the
> >> index and it seems to iterate over all terms (using
> >> IndexReader#terms()). Isnt
> >> that quite un-efficient? I would at least expect a method
> >> IndexReader#terms(String field)
> >> to limit the terms on the desired field.
> >>
> >> Thanks for helping,
> >> Ben
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53075_1509552.1181505607620--

From java-user-return-28568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 10 21:06:18 2007
Return-Path: <java-user-return-28568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76347 invoked from network); 10 Jun 2007 21:06:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2007 21:06:17 -0000
Received: (qmail 96145 invoked by uid 500); 10 Jun 2007 21:06:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95625 invoked by uid 500); 10 Jun 2007 21:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95614 invoked by uid 99); 10 Jun 2007 21:06:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 14:06:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.162] (HELO mo-p00-ob.rzone.de) (81.169.146.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 14:06:10 -0700
Received: from [192.168.1.10]
	(frnk-d933c5eb.pool.mediaWays.net [217.51.197.235])
	by post.webmailer.de (mrclete mo64) (RZmta 7.2)
	with ESMTP id G01530j5AKseZa for <java-user@lucene.apache.org>;
	Sun, 10 Jun 2007 23:05:47 +0200 (MEST)
Message-ID: <466C67AB.50702@j-hohwiller.de>
Date: Sun, 10 Jun 2007 23:05:47 +0200
From: Joerg Hohwiller <joerg@j-hohwiller.de>
User-Agent: Thunderbird 1.5.0.9 (X11/20061206)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene out of the box
X-Enigmail-Version: 0.94.1.1
OpenPGP: id=60DCBFFF
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
X-RZG-AUTH: iBOV3jhHSigu+CPDZ4XlORG6WsF0K7j6ahgFeEaVRKniQta4ZYFx7NCJZiRLIeJ+
X-RZG-CLASS-ID: mo00
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi there,

at the open-source project mmm we provide a generic search-solution based on lucene:

http://m-m-m.sourceforge.net/maven/mmm-search/

This covers the typical gaps like indexing binary documents as well as providing
an example web-frontend with paging and all those features.
This allows to get a search-solution with lucene (for documents indexed from
local disc) up and running in 5 minutes. At the moment we do not yet have a
release so you need to checkout from subversion and build the project with maven
what will take a lot longer, but this is just a matter of time...

If you like it, I would be very pleased if you put a link at your contributions:

http://lucene.apache.org/java/docs/contributions.html

Thanks
  Jörg
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGbGermPuec2Dcv/8RAnSzAJ4/cVo38BoBShmXxt1puMZdLyzE6wCfacYc
pV6m9nhmVZXrlsFnL8sqolQ=
=OM1m
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 10 21:51:08 2007
Return-Path: <java-user-return-28569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91794 invoked from network); 10 Jun 2007 21:51:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2007 21:51:07 -0000
Received: (qmail 42145 invoked by uid 500); 10 Jun 2007 21:51:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42115 invoked by uid 500); 10 Jun 2007 21:51:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42102 invoked by uid 99); 10 Jun 2007 21:51:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 14:51:01 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of luz290@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 14:50:57 -0700
Received: by wx-out-0506.google.com with SMTP id t8so1155483wxc
        for <java-user@lucene.apache.org>; Sun, 10 Jun 2007 14:50:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=crDwizUEwlGa/wM0wJnYfNt+UOyom71j0FhkzmAvLyWftVgEAutHRvVs5ei7NEebudyGCAyGVywzofCyhyBsZbkUt9RFQTA3PRExQAzJtKHPJfeFmjWBeKryjnJvIWVrGwFySG3VjyRIIl+aDN+VQU02QTfehgtCYNYi96IdPH4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=EkQ5LddQoqvLNVXKH6M4MUuo6++90IRlrlt7yNC8H1VG5v2NFb7KJ+DLCRzyVRtnUe6mqvlnJqX4yfqE33WfAkI2m/XkGEdRr/B1g8WfYNESaRQPEd3rqvczgcI1pmgoy9+bKqzMX8VYDcoRixSQowU7e7a/Ssk4oTrD0+1Ents=
Received: by 10.90.102.20 with SMTP id z20mr4662822agb.1181512236739;
        Sun, 10 Jun 2007 14:50:36 -0700 (PDT)
Received: by 10.90.78.18 with HTTP; Sun, 10 Jun 2007 14:50:36 -0700 (PDT)
Message-ID: <cec089090706101450l15b316d3x562c8e4bbecfc3d9@mail.gmail.com>
Date: Sun, 10 Jun 2007 16:50:36 -0500
From: "lucene user" <luz290@gmail.com>
To: java-user@lucene.apache.org
Subject: next() not called in FilterIndexReader.FilterTermDocs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70228_30570582.1181512236721"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70228_30570582.1181512236721
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am trying to use a Filter Index Reader to
provide access only to the subset of my archive
for which a certain field contains one of a given
list of values.

The idea is to create a special term for this field
that means 'any term in the list', and add an 'AND'
clause to every query, to enforce the condition.

I override the seek() and next() methods of FilterTermDocs.

In the seek(Term t) method I check if t is my special term.
If it is, I initialize an instance variable in the FilterTermDocs,
with an Iterator over my List. I then call super.seek(s) for
a term 's' which has the same field name and a value which
is the next element from the interator.

In the next() method, If super.next() returns false,
but the iterator is there and has a next element,
I call super.seek(s) for the next element and try
again.

The problem is the although my seek() method is being called,
my next() method is not. Thus I never get to iterate through
my list, and only receive results corrasponding to its first
element.

------=_Part_70228_30570582.1181512236721--

From java-user-return-28570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 00:34:04 2007
Return-Path: <java-user-return-28570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9104 invoked from network); 11 Jun 2007 00:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 00:34:03 -0000
Received: (qmail 70509 invoked by uid 500); 11 Jun 2007 00:34:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70473 invoked by uid 500); 11 Jun 2007 00:34:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70461 invoked by uid 99); 11 Jun 2007 00:34:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 17:34:00 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 17:33:56 -0700
Received: by mu-out-0910.google.com with SMTP id g7so707874muf
        for <java-user@lucene.apache.org>; Sun, 10 Jun 2007 17:33:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iTS5qqlJThV790jPrWSUsIrJv//MP2xpfx5ykVp7cnfWJHUKFIXH2YnYBhuSsqUBTD2Ex+P3k2GrGp+krzmrWQsyUU1/YDN3yudMOdNT6G5SC5lZxQZaZ/81INicqNsffQMVgDas6bU5MhGKHw5+qNfu7OmeLaZMsdE5LjgG5+s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DrUVX1Nk1zJFeG9IBaXiFvUNoYQrreHwUpYai/Ap54qZdfj190oWcns5RqcsCQ03m833AiBcUyxsSWBYhORBdsHQJCp7j9tWe/8ka0lncY4+qsFOmNlMRBDDQaPhzRS08ohaBSdTba6CPjObM0lUdo9nosPXQt5qv8xjqo7po6c=
Received: by 10.82.156.12 with SMTP id d12mr9952347bue.1181522014022;
        Sun, 10 Jun 2007 17:33:34 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Sun, 10 Jun 2007 17:33:33 -0700 (PDT)
Message-ID: <359a92830706101733w30535e44gb77c56292d5dc31d@mail.gmail.com>
Date: Sun, 10 Jun 2007 20:33:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: next() not called in FilterIndexReader.FilterTermDocs
In-Reply-To: <cec089090706101450l15b316d3x562c8e4bbecfc3d9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54745_28703126.1181522014000"
References: <cec089090706101450l15b316d3x562c8e4bbecfc3d9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54745_28703126.1181522014000
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Wouldn't it be easier to just make a Filter? That's what they were
intended for.

Especially, if by "certain set", you mean that these are pre-defined
values, you could create your filters at start-up time and use
CachingWrapperFilter to keep them around.

Either way, I suspect it would be much simpler.

Best
Erick


On 6/10/07, lucene user <luz290@gmail.com> wrote:
>
> I am trying to use a Filter Index Reader to
> provide access only to the subset of my archive
> for which a certain field contains one of a given
> list of values.
>
> The idea is to create a special term for this field
> that means 'any term in the list', and add an 'AND'
> clause to every query, to enforce the condition.
>
> I override the seek() and next() methods of FilterTermDocs.
>
> In the seek(Term t) method I check if t is my special term.
> If it is, I initialize an instance variable in the FilterTermDocs,
> with an Iterator over my List. I then call super.seek(s) for
> a term 's' which has the same field name and a value which
> is the next element from the interator.
>
> In the next() method, If super.next() returns false,
> but the iterator is there and has a next element,
> I call super.seek(s) for the next element and try
> again.
>
> The problem is the although my seek() method is being called,
> my next() method is not. Thus I never get to iterate through
> my list, and only receive results corrasponding to its first
> element.
>

------=_Part_54745_28703126.1181522014000--

From java-user-return-28571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 04:46:49 2007
Return-Path: <java-user-return-28571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63080 invoked from network); 11 Jun 2007 04:46:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 04:46:48 -0000
Received: (qmail 58658 invoked by uid 500); 11 Jun 2007 04:46:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58594 invoked by uid 500); 11 Jun 2007 04:46:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58583 invoked by uid 99); 11 Jun 2007 04:46:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 21:46:43 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of luz290@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 21:46:39 -0700
Received: by wx-out-0506.google.com with SMTP id t8so1208716wxc
        for <java-user@lucene.apache.org>; Sun, 10 Jun 2007 21:46:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QWU34MErrVypRMHE1Vl16WQQIcIXRQevsYnN20gOM8mZ9OpfKQ+j9ZBoTMWaa20yGAsybFyjosqR458W1j4ePQRo5IbfZZ8rDBinmSApWIOMs6b+zPc5/12ro0XIhkS4BR5OzrhWak3qEaXbSnLoaN16qCQDJRak4aSqjlSgDTM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jlKAgFbrFrofSnaimCYw7DXZqX7lG+XAf7kSKnr5wrM0GIKGlbf8w7XcNAusjUOitDeLBgYnEwtYa9ccbNvcFn8drG59Sgt+BODIwn8EwBzKgA3OxVWzSKHNR6NwwIFNPomYs0XMZp1yXgEO4x7lIrrF/5bRw14laj0U5A9gFIw=
Received: by 10.90.68.15 with SMTP id q15mr4812647aga.1181537178629;
        Sun, 10 Jun 2007 21:46:18 -0700 (PDT)
Received: by 10.90.78.18 with HTTP; Sun, 10 Jun 2007 21:46:18 -0700 (PDT)
Message-ID: <cec089090706102146w47adc317qb1df17c288eda1c9@mail.gmail.com>
Date: Sun, 10 Jun 2007 23:46:18 -0500
From: "lucene user" <luz290@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: next() not called in FilterIndexReader.FilterTermDocs
In-Reply-To: <359a92830706101733w30535e44gb77c56292d5dc31d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73280_16482305.1181537178607"
References: <cec089090706101450l15b316d3x562c8e4bbecfc3d9@mail.gmail.com>
	 <359a92830706101733w30535e44gb77c56292d5dc31d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73280_16482305.1181537178607
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I already have this implemented with a filter. Its working alright, but
sends my running time
from .1 sec to .4 sec - thats no big deal now but we hope to eventually grow
the archive to
an insanely large size. Besides, I think the FilterIndexReader is a
powerfull tool, and I'd
like to get it working...  I'd also like too know if my concept of how the
index works at the
low level is correct, and if this is my bug or a bug in lucene.




On 6/10/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Wouldn't it be easier to just make a Filter? That's what they were
> intended for.
>
> Especially, if by "certain set", you mean that these are pre-defined
> values, you could create your filters at start-up time and use
> CachingWrapperFilter to keep them around.
>
> Either way, I suspect it would be much simpler.
>
> Best
> Erick
>
>
> On 6/10/07, lucene user <luz290@gmail.com> wrote:
> >
> > I am trying to use a Filter Index Reader to
> > provide access only to the subset of my archive
> > for which a certain field contains one of a given
> > list of values.
> >
> > The idea is to create a special term for this field
> > that means 'any term in the list', and add an 'AND'
> > clause to every query, to enforce the condition.
> >
> > I override the seek() and next() methods of FilterTermDocs.
> >
> > In the seek(Term t) method I check if t is my special term.
> > If it is, I initialize an instance variable in the FilterTermDocs,
> > with an Iterator over my List. I then call super.seek(s) for
> > a term 's' which has the same field name and a value which
> > is the next element from the interator.
> >
> > In the next() method, If super.next() returns false,
> > but the iterator is there and has a next element,
> > I call super.seek(s) for the next element and try
> > again.
> >
> > The problem is the although my seek() method is being called,
> > my next() method is not. Thus I never get to iterate through
> > my list, and only receive results corrasponding to its first
> > element.
> >
>

------=_Part_73280_16482305.1181537178607--

From java-user-return-28572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 05:49:24 2007
Return-Path: <java-user-return-28572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73970 invoked from network); 11 Jun 2007 05:49:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 05:49:23 -0000
Received: (qmail 24160 invoked by uid 500); 11 Jun 2007 05:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24118 invoked by uid 500); 11 Jun 2007 05:49:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24107 invoked by uid 99); 11 Jun 2007 05:49:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 22:49:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [203.84.221.125] (HELO web8704.mail.in.yahoo.com) (203.84.221.125)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 10 Jun 2007 22:49:14 -0700
Received: (qmail 74045 invoked by uid 60001); 11 Jun 2007 05:48:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=0RaEKdrDNRqxlPCO9wgELU7Ea7Xvxw914GD7S+evTOzeCtWUu0D6yQT6NIYpW9I+5L665I7uEPvkimJK19hHcNm9VHTf/8CbHXK5nrHomHdo63rtd1XPXo3BrLSFDfEzIELDptABJeTod/cFj9D97FCERiVLfwgzDaF1Fc/8EeA=;
X-YMail-OSG: XsvwLWQVM1m0vGzBK1mZ8kemBwlTyFlWuJba1T5K413dPf8ljcpla1Uzh4uq7mSb9w--
Received: from [203.99.213.12] by web8704.mail.in.yahoo.com via HTTP; Mon, 11 Jun 2007 06:48:50 BST
Date: Mon, 11 Jun 2007 06:48:50 +0100 (BST)
From: sagar khetkade <skhetkade@yahoo.co.in>
Subject: multi field search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1137757360-1181540930=:73780"
Content-Transfer-Encoding: 8bit
Message-ID: <811014.73780.qm@web8704.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1137757360-1181540930=:73780
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

right now there is field level search avilable.
   
   But if we dont want to search on field but on the whole document then to the query parseer  the whole contet is to be passed. 
   
  If we append the titles (captions or fields) to say 
index content(which is having all the captions or fields) for every caption 
indexcontent is created.(which could be found on the limo software) to avoid the index content, so for a query without the "field:quey" how is it possible and what to pass to the query 
analyser as a input so it searches on the whole document and not on the fields.


       
---------------------------------
 Looking for people who are YOUR TYPE?  Find them here!
--0-1137757360-1181540930=:73780--

From java-user-return-28573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 06:28:37 2007
Return-Path: <java-user-return-28573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84225 invoked from network); 11 Jun 2007 06:28:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 06:28:36 -0000
Received: (qmail 75225 invoked by uid 500); 11 Jun 2007 06:28:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75167 invoked by uid 500); 11 Jun 2007 06:28:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75156 invoked by uid 99); 11 Jun 2007 06:28:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 23:28:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jun 2007 23:28:28 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A029D5B774; Sun, 10 Jun 2007 23:28:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7BBC17F403
	for <java-user@lucene.apache.org>; Sun, 10 Jun 2007 23:28:07 -0700 (PDT)
Date: Sun, 10 Jun 2007 23:28:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: next() not called in FilterIndexReader.FilterTermDocs
In-Reply-To: <cec089090706101450l15b316d3x562c8e4bbecfc3d9@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0706102322360.22992@hal.rescomp.berkeley.edu>
References: <cec089090706101450l15b316d3x562c8e4bbecfc3d9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I override the seek() and next() methods of FilterTermDocs.

: The problem is the although my seek() method is being called,
: my next() method is not. Thus I never get to iterate through
: my list, and only receive results corrasponding to its first
: element.

It's pretty much impossible to guess what the problem might be without
seeing some code demonstrating your problem.  Can you please post a
self contained JUnit test demonstrating the problem?  even if your
FilteredIndexReader is really big, it seems like the problem you describe
would be pretty easy to demonstrate with a simple FilteredIndexReader that
just prints out "next" whenever the next method is called.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 07:20:23 2007
Return-Path: <java-user-return-28574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95882 invoked from network); 11 Jun 2007 07:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 07:20:21 -0000
Received: (qmail 51549 invoked by uid 500); 11 Jun 2007 07:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51501 invoked by uid 500); 11 Jun 2007 07:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51490 invoked by uid 99); 11 Jun 2007 07:20:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 00:20:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.209.148.227] (HELO dd1618.kasserver.com) (81.209.148.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 00:20:12 -0700
Received: from [192.168.32.109] (18.116.77.83.cust.bluewin.ch [83.77.116.18])
	by dd1618.kasserver.com (Postfix) with ESMTP id 791ACCEF7D
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 09:19:49 +0200 (CEST)
Message-ID: <466CF79B.1090403@rssowl.org>
Date: Mon, 11 Jun 2007 09:19:55 +0200
From: Benjamin Pasero <bpasero@rssowl.org>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Retrieving TermVectors from a Field over the full index?
References: <466AC4E8.8010803@rssowl.org>	 <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>	 <466C3890.9060006@rssowl.org> <359a92830706101300jd54d938n522b14aef2dd660b@mail.gmail.com>
In-Reply-To: <359a92830706101300jd54d938n522b14aef2dd660b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



This is what I coded up till now:

TermEnum terms = reader.terms();
while (terms.next()) {
  String field = terms.term().field();
  if ("keywords".equals(field))
    keywords.put(terms.term().text(), terms.docFreq());
}

Your solution is doing more or less the same right?

Ben
> Maybe I'm missing the boat, but I don't understand why TermEnum doesn't
> work for you.
> Try something like...
>
>       TermEnum te = this.reader.terms();
>        te.skipTo(new Term("keyword", ""));
>        while (te.next()) {
>            Term term = te.term();
>            if (! term.field().equals("keyword")) {
>                break;
>            }
>            System.out.println(term.text());
>        }
>
>
>
> On 6/10/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>>
>>
>>
>> Erick Erickson wrote:
>> > Um, to return all counts of all terms in a field, what other option
>> > *is* there except to walk the whole thing?
>> >
>> > Have you looked at TermEnum, TermDocs, and TermFreqVector?
>> > For that matter, TermPositionVector might also be of some use.
>> >
>> > It would be easier to provide some help if you
>> > 1> mentioned what you'd tried already
>> > 2> mentioned what's inadequate about what you've tried.
>> Sorry for not being clear what I am trying to achieve. I am storing
>> documents in my index that are made of 5 Fields. One of the Fields
>> contains keywords that describe the document. Now, I need a fast
>> way of retrieving these keywords together with their frequency from
>> the index.
>>
>> My current solution is to use IndexReader#terms() to walk over all
>> terms and count the ones that appear in the keyword-Field.
>>
>> As you can assume, this is not scaling well. The content in the keywords
>> field is usually quite small, however, the other fields may store
>> up to thousands of terms.
>>
>> What I am asking for is a way to walk all the terms of just the
>> keyword-field
>> in order to avoid having to walk all terms in all fields.
>>
>> Of course, even better would be some API that would return a TermVector
>> from
>> the keyword-field. But I guess TermVectors are only supported on a per
>> Document level and not index level?
>>
>> Regards,
>> Ben
>> >
>> > Best
>> > Erick
>> >
>> > On 6/9/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>> >>
>> >> Hi,
>> >>
>> >> I wonder if this is possible:
>> >>
>> >> Return all Terms of a Field in the Index together with the number of
>> >> occurances
>> >> in all documents.
>> >>
>> >> E.g. have 10 Documents with the Field "author" in the index, 5 of 
>> them
>> >> having
>> >> the value "foo" and 5 "bar" I would like to build a map with:
>> >>
>> >> [foo] -> 5
>> >> [bar] -> 5
>> >>
>> >> I looked at what Luke is doing to show the top terms of a given field
>> in
>> >> the
>> >> index and it seems to iterate over all terms (using
>> >> IndexReader#terms()). Isnt
>> >> that quite un-efficient? I would at least expect a method
>> >> IndexReader#terms(String field)
>> >> to limit the terms on the desired field.
>> >>
>> >> Thanks for helping,
>> >> Ben
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 08:51:13 2007
Return-Path: <java-user-return-28575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35563 invoked from network); 11 Jun 2007 08:51:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 08:51:11 -0000
Received: (qmail 84947 invoked by uid 500); 11 Jun 2007 08:51:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84899 invoked by uid 500); 11 Jun 2007 08:51:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84888 invoked by uid 99); 11 Jun 2007 08:51:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 01:51:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 01:51:02 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 02375D9B
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 04:50:42 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Mon, 11 Jun 2007 04:50:42 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id D5EEA897B; Mon, 11 Jun 2007 04:50:41 -0400 (EDT)
Message-Id: <1181551841.23337.1194483819@webmail.messagingengine.com>
X-Sasl-Enc: 1kupEmwmXWfkTjFitHEDG+kyvuWS2XJVXaR3S230x7f0 1181551841
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <466AC4E8.8010803@rssowl.org>
   <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>
   <466C3890.9060006@rssowl.org>
   <359a92830706101300jd54d938n522b14aef2dd660b@mail.gmail.com>
   <466CF79B.1090403@rssowl.org>
Subject: Re: Retrieving TermVectors from a Field over the full index?
In-Reply-To: <466CF79B.1090403@rssowl.org>
Date: Mon, 11 Jun 2007 04:50:41 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


I see the issue.  If your "keywords" field has a tiny set of terms
(say 1000) vs the rest of your fields (say 1 million) then linear
search is a very slow way to step through the terms for the field
"keywords".

It seems like what's missing is the efficient ability for
TermDocs/TermInfosReader to seek to the first term of a given field.
They already can seek to a given specific term; with some small
changes to look only at the field name part of a Term presumably
TermInfosReader could be fixed to seek to fields as well.

But in the meantime maybe one workaround is to insert a false keyword
that you know will always sort before all of your real keywords (eg
something like ".start"), and then seek to that term before running
your code below?

Alternatively you could name your keywords field such that it's always
the first field, eg ".keywords" or something?

Mike

"Benjamin Pasero" <bpasero@rssowl.org> wrote:
> 
> 
> This is what I coded up till now:
> 
> TermEnum terms = reader.terms();
> while (terms.next()) {
>   String field = terms.term().field();
>   if ("keywords".equals(field))
>     keywords.put(terms.term().text(), terms.docFreq());
> }
> 
> Your solution is doing more or less the same right?
> 
> Ben
> > Maybe I'm missing the boat, but I don't understand why TermEnum doesn't
> > work for you.
> > Try something like...
> >
> >       TermEnum te = this.reader.terms();
> >        te.skipTo(new Term("keyword", ""));
> >        while (te.next()) {
> >            Term term = te.term();
> >            if (! term.field().equals("keyword")) {
> >                break;
> >            }
> >            System.out.println(term.text());
> >        }
> >
> >
> >
> > On 6/10/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
> >>
> >>
> >>
> >> Erick Erickson wrote:
> >> > Um, to return all counts of all terms in a field, what other option
> >> > *is* there except to walk the whole thing?
> >> >
> >> > Have you looked at TermEnum, TermDocs, and TermFreqVector?
> >> > For that matter, TermPositionVector might also be of some use.
> >> >
> >> > It would be easier to provide some help if you
> >> > 1> mentioned what you'd tried already
> >> > 2> mentioned what's inadequate about what you've tried.
> >> Sorry for not being clear what I am trying to achieve. I am storing
> >> documents in my index that are made of 5 Fields. One of the Fields
> >> contains keywords that describe the document. Now, I need a fast
> >> way of retrieving these keywords together with their frequency from
> >> the index.
> >>
> >> My current solution is to use IndexReader#terms() to walk over all
> >> terms and count the ones that appear in the keyword-Field.
> >>
> >> As you can assume, this is not scaling well. The content in the keywords
> >> field is usually quite small, however, the other fields may store
> >> up to thousands of terms.
> >>
> >> What I am asking for is a way to walk all the terms of just the
> >> keyword-field
> >> in order to avoid having to walk all terms in all fields.
> >>
> >> Of course, even better would be some API that would return a TermVector
> >> from
> >> the keyword-field. But I guess TermVectors are only supported on a per
> >> Document level and not index level?
> >>
> >> Regards,
> >> Ben
> >> >
> >> > Best
> >> > Erick
> >> >
> >> > On 6/9/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
> >> >>
> >> >> Hi,
> >> >>
> >> >> I wonder if this is possible:
> >> >>
> >> >> Return all Terms of a Field in the Index together with the number of
> >> >> occurances
> >> >> in all documents.
> >> >>
> >> >> E.g. have 10 Documents with the Field "author" in the index, 5 of 
> >> them
> >> >> having
> >> >> the value "foo" and 5 "bar" I would like to build a map with:
> >> >>
> >> >> [foo] -> 5
> >> >> [bar] -> 5
> >> >>
> >> >> I looked at what Luke is doing to show the top terms of a given field
> >> in
> >> >> the
> >> >> index and it seems to iterate over all terms (using
> >> >> IndexReader#terms()). Isnt
> >> >> that quite un-efficient? I would at least expect a method
> >> >> IndexReader#terms(String field)
> >> >> to limit the terms on the desired field.
> >> >>
> >> >> Thanks for helping,
> >> >> Ben
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 11:49:14 2007
Return-Path: <java-user-return-28576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17696 invoked from network); 11 Jun 2007 11:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 11:49:13 -0000
Received: (qmail 19007 invoked by uid 500); 11 Jun 2007 11:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18966 invoked by uid 500); 11 Jun 2007 11:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18955 invoked by uid 99); 11 Jun 2007 11:49:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 04:49:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 04:49:02 -0700
Received: by mu-out-0910.google.com with SMTP id g7so846931muf
        for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 04:48:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=It28Dr4N7pVCSf6FzLxhse2T+8Jeu2GaUYU9Y6NE9myWicgMH/207ncPV4ID7dsifNgK2eXLvHReqA52kr1z4jWS+bFOFIIDe5ypQLoMDdkxNKNDLJ0fOW17hH7kiXr/JxHptCvvFbmXIJNtqfbhpFiVBI+assDZGhbBjD0bdiY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=gCKDpogp1Ki7orvNT6WTiZgBhjPxBowAxEfDlCWt8AM/U2pvJYUpGTONI19DLnA4J6QNNKnxdQudj4aPbEqL7qlGuDVY8m0u/KaMUgI2My5OS9ydawj9YoNGsYi5fxyVdQ8jALKkLoOMEf7RwiBh0+WLS2UA6/d6lO1cyjr7Xk4=
Received: by 10.82.134.12 with SMTP id h12mr10708509bud.1181562521555;
        Mon, 11 Jun 2007 04:48:41 -0700 (PDT)
Received: from ?192.168.1.6? ( [83.249.118.219])
        by mx.google.com with ESMTP id d23sm288218nfh.2007.06.11.04.48.40
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 11 Jun 2007 04:48:41 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <811014.73780.qm@web8704.mail.in.yahoo.com>
References: <811014.73780.qm@web8704.mail.in.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BCD7CDF3-2890-4705-8B21-FB0C9DA6F25F@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: multi field search
Date: Mon, 11 Jun 2007 13:46:25 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


11 jun 2007 kl. 07.48 skrev sagar khetkade:
>
>    But if we dont want to search on field but on the whole document

Is it MultiFieldQueryParser you are looking for?

<http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
javadoc/org/apache/lucene/queryParser/MultiFieldQueryParser.html>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 13:17:01 2007
Return-Path: <java-user-return-28577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54325 invoked from network); 11 Jun 2007 13:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 13:17:00 -0000
Received: (qmail 10053 invoked by uid 500); 11 Jun 2007 13:16:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9876 invoked by uid 500); 11 Jun 2007 13:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9865 invoked by uid 99); 11 Jun 2007 13:16:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:16:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:16:51 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id A7283FEA39
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 06:16:03 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <466AC4E8.8010803@rssowl.org>
References: <466AC4E8.8010803@rssowl.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <14EDCCA6-5082-4610-94BA-D9D8BB6B5A3C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Retrieving TermVectors from a Field over the full index?
Date: Mon, 11 Jun 2007 09:16:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I am curious as to what you are going to do with this information.   
Is it strictly for display, or are you doing some sort of reranking  
algorithm?  Having this insight may help us think of other ways to  
solve the problem.

On Jun 9, 2007, at 11:19 AM, Benjamin Pasero wrote:

> Hi,
>
> I wonder if this is possible:
>
> Return all Terms of a Field in the Index together with the number of
> occurances
> in all documents.
>
> E.g. have 10 Documents with the Field "author" in the index, 5 of them
> having
> the value "foo" and 5 "bar" I would like to build a map with:
>
> [foo] -> 5
> [bar] -> 5
>
> I looked at what Luke is doing to show the top terms of a given  
> field in the
> index and it seems to iterate over all terms (using
> IndexReader#terms()). Isnt
> that quite un-efficient? I would at least expect a method
> IndexReader#terms(String field)
> to limit the terms on the desired field.
>
> Thanks for helping,
> Ben
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 13:23:47 2007
Return-Path: <java-user-return-28578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62542 invoked from network); 11 Jun 2007 13:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 13:23:45 -0000
Received: (qmail 28860 invoked by uid 500); 11 Jun 2007 13:23:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28815 invoked by uid 500); 11 Jun 2007 13:23:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28804 invoked by uid 99); 11 Jun 2007 13:23:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:23:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of martin.kobele@netsweeper.com designates 216.171.98.92 as permitted sender)
Received: from [216.171.98.92] (HELO mail.netsweeper.com) (216.171.98.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:23:36 -0700
Received: (qmail 1065 invoked by uid 89); 11 Jun 2007 13:23:15 -0000
Received: from unknown (HELO kobele.intranet) (216.171.98.93)
  by mail.netsweeper.com with (DHE-RSA-AES256-SHA encrypted) SMTP; 11 Jun 2007 13:23:15 -0000
From: Martin Kobele <martin.kobele@netsweeper.com>
Reply-To: martin.kobele@netsweeper.com
Organization: Netsweeper Inc
To: java-user@lucene.apache.org
Subject: How to view deleted documents and undelete(int docID)
Date: Mon, 11 Jun 2007 09:23:14 -0400
User-Agent: KMail/1.9.6
X-Face: 'Hg*nnc?-\\wB.#~W"O5hQ,b%:&[TGXGb4s<t+.W~W!/_mV@xzrS=pN0(=?utf-8?q?ETzKvX3=5E=25eqTj=0A=09=2E=23=7BUNfQz=5EhwgOKc=2Es=23rw!?=,7^!mGYLwvK
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart1427914.9y3SAeopkm";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200706110923.14453.martin.kobele@netsweeper.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart1427914.9y3SAeopkm
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I am wondering whether this is possible at all....
Regarding SegmentReader.document(n,..), an exception is thrown if=20
(isDeleted(n) =3D=3D true). So I cannot get a hold of document n if it is=20
deleted.=20
Despite that, is there a way to view the deleted document and undelete a=20
single document? (Luke has a "reconstruct & edit" button which does not see=
m=20
to work on deleted documents, if it ever was designed to undelete a=20
document).

Thank you!

Regards,
Martin

--nextPart1427914.9y3SAeopkm
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGbUzCtFAZVxKupnURAt6HAJ9TAUHxiGN5DP21/5eqDOqgh4wzeACdGIFQ
OkvrXnZaB8Yskuayug9tU1o=
=q+Se
-----END PGP SIGNATURE-----

--nextPart1427914.9y3SAeopkm--

From java-user-return-28579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 13:49:49 2007
Return-Path: <java-user-return-28579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77010 invoked from network); 11 Jun 2007 13:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 13:49:48 -0000
Received: (qmail 95113 invoked by uid 500); 11 Jun 2007 13:49:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94828 invoked by uid 500); 11 Jun 2007 13:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94817 invoked by uid 99); 11 Jun 2007 13:49:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:49:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of dckorah@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:49:40 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1603270uge
        for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 06:49:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:thread-index:message-id;
        b=NSiFZD5FOlPXv72rcrkEcxM1VZZ8+QM2S0Ycib2xTZfAjEzrXWC3YwZwuE9+EGER1TkRDkzybf8eXznucBb3ZJ6focI+6NSOEyLFKxmgLXwBNaoYWC/n+cHg6ex+0D464yCoW1atxPK90BSzqA/2I/zwHXsKe+5zJgpISziRd3s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:thread-index:message-id;
        b=B0vd+hwhVoPR3RdqfQ0Jl8zASbmQE7N5pVBn34g9CVRc1w1h8iNWwYfaqH1Q2lrY2QeoEtH5+SDwF19Dh9/8Diuwa4C4tYSeH9b633pOmREJrNJwZiccv6de1iQIB1pTgHVi57bX2U9iFnZtGHsqjzMFAwwpaUtSzJZ/4mGNvLI=
Received: by 10.82.183.19 with SMTP id g19mr10928830buf.1181569758564;
        Mon, 11 Jun 2007 06:49:18 -0700 (PDT)
Received: from devdinovmxp ( [62.249.212.129])
        by mx.google.com with ESMTP id k9sm798011nfh.2007.06.11.06.49.17
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 11 Jun 2007 06:49:17 -0700 (PDT)
From: "Dino" <dckorah@gmail.com>
To: <java-user@lucene.apache.org>
Subject: searching for empty field
Date: Mon, 11 Jun 2007 14:53:54 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
thread-index: AcesL/K603VEi710SPeUJOrSQSyzwQ==
Message-ID: <466d52dd.51d8c6e0.0f23.fffffbff@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everyone,

I have a lucene index were I add a document with a set of metadata. In my
system, all the fields in the metadata set needn't be there all the time for
a given document.

Say if I am expecting a metadata set like
	Field1:{yes|no}
	[Field2:{val_1[,val_2]... }]
	Field3:val_X


Here the Field2 is the one that I am having trouble with.

Currently when I get a document with a bunch of Field:Value metadata, I run
them in a loop and create Field object relying on the metadata input. That
way the data source decides the number of fields attached to a particular
document. Fields like Field2 will be left out if it didn't appear in the
input.

So if I get a document like 

	Field1:yes
	Field3:val_X
	~~~~~~~~~~~~~~~~~~~
	DATA DATA DATA DATA ..... DATA

The document in the index wouldn't have field2 attached to it.

Now my question is how will I search for all the documents with *empty*
Field2?

Cheerio



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 13:56:40 2007
Return-Path: <java-user-return-28580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79932 invoked from network); 11 Jun 2007 13:56:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 13:56:39 -0000
Received: (qmail 16512 invoked by uid 500); 11 Jun 2007 13:56:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16483 invoked by uid 500); 11 Jun 2007 13:56:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16472 invoked by uid 99); 11 Jun 2007 13:56:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:56:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:56:30 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1604936uge
        for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 06:56:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NhioRPcpx/j7xh4RJNkWn+luxvuwm/0nU1mUCHAlpuJY2oeI5bERecSEy/jNyoxsS9HWMPN6+xqzfUIJMtTwObu0xEAXgLh6WJltuTNuji/KDESG//QMMIDnKIYI9fQk7XCdgksxWYm+jFyUfYFbbcsb42PnaSNZ2amLGMi9q+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UeQzAijNbQzyc13wUq8+t+Oz0vbZgzN3cQZLk0SzCK+HTB0oIcEGSbKY0ghqlQQcFbZh9Uji3KHQ3qmzLuGbRW6WawAYcxc8WKtWo59V2pA0/+7PdpXhur0aITi3PLl/E+3CUhE6P2owl425Xh/hZFJ3T579ZkKv0cipPjhlnx0=
Received: by 10.82.178.11 with SMTP id a11mr10932556buf.1181570168519;
        Mon, 11 Jun 2007 06:56:08 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 11 Jun 2007 06:56:08 -0700 (PDT)
Message-ID: <359a92830706110656g77659cafm3fc534a68bb38555@mail.gmail.com>
Date: Mon, 11 Jun 2007 09:56:08 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieving TermVectors from a Field over the full index?
In-Reply-To: <466CF79B.1090403@rssowl.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60389_17792967.1181570168487"
References: <466AC4E8.8010803@rssowl.org>
	 <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>
	 <466C3890.9060006@rssowl.org>
	 <359a92830706101300jd54d938n522b14aef2dd660b@mail.gmail.com>
	 <466CF79B.1090403@rssowl.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60389_17792967.1181570168487
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, the code I posted is not doing nearly as much work. Try it.

    TermEnum te = this.reader.terms();
        te.skipTo(new Term("keyword", ""));     *********skips terms NOT in
the keyword field.
        while (te.next()) {
            Term term = te.term();
            if (! term.field().equals("keyword")) {
                break;          ***********stops looking at terms as soon as
the keywords field is exhausted.
            }

Your code examines all the terms in the index. Mine only looks at terms in
the keywords field. Which is what you said you wanted. That combined with
docfreq might be what you need.

Erick



On 6/11/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>
>
>
> This is what I coded up till now:
>
> TermEnum terms = reader.terms();
> while (terms.next()) {
>   String field = terms.term().field();
>   if ("keywords".equals(field))
>     keywords.put(terms.term().text(), terms.docFreq());
> }
>
> Your solution is doing more or less the same right?
>
> Ben
> > Maybe I'm missing the boat, but I don't understand why TermEnum doesn't
> > work for you.
> > Try something like...
> >
> >       TermEnum te = this.reader.terms();
> >        te.skipTo(new Term("keyword", ""));
> >        while (te.next()) {
> >            Term term = te.term();
> >            if (! term.field().equals("keyword")) {
> >                break;
> >            }
> >            System.out.println(term.text());
> >        }
> >
> >
> >
> > On 6/10/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
> >>
> >>
> >>
> >> Erick Erickson wrote:
> >> > Um, to return all counts of all terms in a field, what other option
> >> > *is* there except to walk the whole thing?
> >> >
> >> > Have you looked at TermEnum, TermDocs, and TermFreqVector?
> >> > For that matter, TermPositionVector might also be of some use.
> >> >
> >> > It would be easier to provide some help if you
> >> > 1> mentioned what you'd tried already
> >> > 2> mentioned what's inadequate about what you've tried.
> >> Sorry for not being clear what I am trying to achieve. I am storing
> >> documents in my index that are made of 5 Fields. One of the Fields
> >> contains keywords that describe the document. Now, I need a fast
> >> way of retrieving these keywords together with their frequency from
> >> the index.
> >>
> >> My current solution is to use IndexReader#terms() to walk over all
> >> terms and count the ones that appear in the keyword-Field.
> >>
> >> As you can assume, this is not scaling well. The content in the
> keywords
> >> field is usually quite small, however, the other fields may store
> >> up to thousands of terms.
> >>
> >> What I am asking for is a way to walk all the terms of just the
> >> keyword-field
> >> in order to avoid having to walk all terms in all fields.
> >>
> >> Of course, even better would be some API that would return a TermVector
> >> from
> >> the keyword-field. But I guess TermVectors are only supported on a per
> >> Document level and not index level?
> >>
> >> Regards,
> >> Ben
> >> >
> >> > Best
> >> > Erick
> >> >
> >> > On 6/9/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
> >> >>
> >> >> Hi,
> >> >>
> >> >> I wonder if this is possible:
> >> >>
> >> >> Return all Terms of a Field in the Index together with the number of
> >> >> occurances
> >> >> in all documents.
> >> >>
> >> >> E.g. have 10 Documents with the Field "author" in the index, 5 of
> >> them
> >> >> having
> >> >> the value "foo" and 5 "bar" I would like to build a map with:
> >> >>
> >> >> [foo] -> 5
> >> >> [bar] -> 5
> >> >>
> >> >> I looked at what Luke is doing to show the top terms of a given
> field
> >> in
> >> >> the
> >> >> index and it seems to iterate over all terms (using
> >> >> IndexReader#terms()). Isnt
> >> >> that quite un-efficient? I would at least expect a method
> >> >> IndexReader#terms(String field)
> >> >> to limit the terms on the desired field.
> >> >>
> >> >> Thanks for helping,
> >> >> Ben
> >> >>
> >> >>
> >> >>
> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_60389_17792967.1181570168487--

From java-user-return-28581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 13:57:51 2007
Return-Path: <java-user-return-28581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80542 invoked from network); 11 Jun 2007 13:57:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 13:57:50 -0000
Received: (qmail 20025 invoked by uid 500); 11 Jun 2007 13:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19983 invoked by uid 500); 11 Jun 2007 13:57:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19972 invoked by uid 99); 11 Jun 2007 13:57:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:57:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.31.106.7] (HELO mailgw1a.lmco.com) (192.31.106.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:57:41 -0700
Received: from emss07g01.ems.lmco.com (relay5.ems.lmco.com [166.29.2.16])by mailgw1a.lmco.com  (LM-6) with ESMTP id l5BDvKHu014515for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 07:57:20 -0600 (MDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JJH000015FKVN@lmco.com> for java-user@lucene.apache.org; Mon, 11 Jun 2007 07:57:20 -0600 (MDT)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JJH00L8V5F9WH@lmco.com> for java-user@lucene.apache.org; Mon, 11 Jun 2007 07:57:10 -0600 (MDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 11 Jun 2007 09:57:09 -0400
Date: Mon, 11 Jun 2007 09:57:09 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: searching for empty field
In-reply-to: <466d52dd.51d8c6e0.0f23.fffffbff@mx.google.com>
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4C2@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: searching for empty field
Thread-Index: AcesL/K603VEi710SPeUJOrSQSyzwQAADIYA
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <466d52dd.51d8c6e0.0f23.fffffbff@mx.google.com>
X-OriginalArrivalTime: 11 Jun 2007 13:57:09.0863 (UTC) FILETIME=[67869770:01C7AC30]
X-Virus-Checked: Checked by ClamAV on apache.org

AFAIK there is no strait way of doing that, however you can create
another field (field4) which can indicate if field2 exists.

HTH

Aviran
http://www.aviransplace.com
http://shaveh.co.il 

-----Original Message-----
From: Dino [mailto:dckorah@gmail.com] 
Sent: Monday, June 11, 2007 9:54 AM
To: java-user@lucene.apache.org
Subject: searching for empty field

Hi Everyone,

I have a lucene index were I add a document with a set of metadata. In
my system, all the fields in the metadata set needn't be there all the
time for a given document.

Say if I am expecting a metadata set like
	Field1:{yes|no}
	[Field2:{val_1[,val_2]... }]
	Field3:val_X


Here the Field2 is the one that I am having trouble with.

Currently when I get a document with a bunch of Field:Value metadata, I
run them in a loop and create Field object relying on the metadata
input. That way the data source decides the number of fields attached to
a particular document. Fields like Field2 will be left out if it didn't
appear in the input.

So if I get a document like 

	Field1:yes
	Field3:val_X
	~~~~~~~~~~~~~~~~~~~
	DATA DATA DATA DATA ..... DATA

The document in the index wouldn't have field2 attached to it.

Now my question is how will I search for all the documents with *empty*
Field2?

Cheerio



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 14:00:02 2007
Return-Path: <java-user-return-28582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81796 invoked from network); 11 Jun 2007 14:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 14:00:01 -0000
Received: (qmail 30529 invoked by uid 500); 11 Jun 2007 13:59:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30494 invoked by uid 500); 11 Jun 2007 13:59:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30483 invoked by uid 99); 11 Jun 2007 13:59:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:59:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 06:59:51 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1605750uge
        for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 06:59:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t/cXRh6Ck6clRJeEyZhcP+qFKa9XjEQsKKGcxPinw2uDgX7ga3CRl/TYQXYn52/s8NSpOg9B8K1znqzKEXBtxI9uD1R/Clnfo4fAbkGvTglurO9KccztO0khXacwH/PnMGQbH/XhDLfF2O8odf71cnIenSJ6F/rA0P/WOtyxpnk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jMBw4Rq/w/3XBjSygLhfpkAXfhHA7xxUu+lomUs8bKsKAfnwvFSvDXDNIq7yblIpT+bZarVyu5EK0ExXHO3ZWAYHSvy68arQ1ROp0j/mXtombZ6tB8Afr/2P8Ea4F5uNSqbEopfWeAHg8DLqpKhCtMM4pWYzNaiC/N9mX16FdbY=
Received: by 10.82.175.17 with SMTP id x17mr10956389bue.1181570369762;
        Mon, 11 Jun 2007 06:59:29 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Mon, 11 Jun 2007 06:59:29 -0700 (PDT)
Message-ID: <359a92830706110659r4c339241heb5af9ae3ab19350@mail.gmail.com>
Date: Mon, 11 Jun 2007 09:59:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching for empty field
In-Reply-To: <466d52dd.51d8c6e0.0f23.fffffbff@mx.google.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60449_6508170.1181570369737"
References: <466d52dd.51d8c6e0.0f23.fffffbff@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60449_6508170.1181570369737
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You don't as far as I know. One solution that has been suggested is
to always index field2, but with a noop value. This works pretty well
if you choose a value you'd never search for, say xzxzxzxzxzxzxzx.
Then you can search field2 for that special value to get the *empty*
case.

Best
Erick

On 6/11/07, Dino <dckorah@gmail.com> wrote:
>
> Hi Everyone,
>
> I have a lucene index were I add a document with a set of metadata. In my
> system, all the fields in the metadata set needn't be there all the time
> for
> a given document.
>
> Say if I am expecting a metadata set like
>         Field1:{yes|no}
>         [Field2:{val_1[,val_2]... }]
>         Field3:val_X
>
>
> Here the Field2 is the one that I am having trouble with.
>
> Currently when I get a document with a bunch of Field:Value metadata, I
> run
> them in a loop and create Field object relying on the metadata input. That
> way the data source decides the number of fields attached to a particular
> document. Fields like Field2 will be left out if it didn't appear in the
> input.
>
> So if I get a document like
>
>         Field1:yes
>         Field3:val_X
>         ~~~~~~~~~~~~~~~~~~~
>         DATA DATA DATA DATA ..... DATA
>
> The document in the index wouldn't have field2 attached to it.
>
> Now my question is how will I search for all the documents with *empty*
> Field2?
>
> Cheerio
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_60449_6508170.1181570369737--

From java-user-return-28583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 14:31:28 2007
Return-Path: <java-user-return-28583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92935 invoked from network); 11 Jun 2007 14:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 14:31:27 -0000
Received: (qmail 7849 invoked by uid 500); 11 Jun 2007 14:31:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7691 invoked by uid 500); 11 Jun 2007 14:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7676 invoked by uid 99); 11 Jun 2007 14:31:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 07:31:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 07:31:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7988730EFC17; Mon, 11 Jun 2007 08:30:57 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.70] (d-128-193-70.bootp.Virginia.EDU [128.143.193.70])
	by ehatchersolutions.com (Postfix) with ESMTP id 6D77D30EFC16
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 08:30:53 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <466d52dd.51d8c6e0.0f23.fffffbff@mx.google.com>
References: <466d52dd.51d8c6e0.0f23.fffffbff@mx.google.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FD6878C1-0F3B-4819-ACAF-315097713939@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: searching for empty field
Date: Mon, 11 Jun 2007 10:30:52 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Jun 11, 2007, at 9:53 AM, Dino wrote:
> Now my question is how will I search for all the documents with  
> *empty*
> Field2?

You can search for "-field2:[* TO *] AND *:*" essentially.  With  
Solr, the *:* isn't needed, but is with pure Lucene to ensure a  
positive query also.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 15:13:01 2007
Return-Path: <java-user-return-28584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16425 invoked from network); 11 Jun 2007 15:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 15:12:59 -0000
Received: (qmail 31359 invoked by uid 500); 11 Jun 2007 15:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31323 invoked by uid 500); 11 Jun 2007 15:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31307 invoked by uid 99); 11 Jun 2007 15:12:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 08:12:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 08:12:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9689930EFC17; Mon, 11 Jun 2007 09:12:11 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.70] (d-128-193-70.bootp.Virginia.EDU [128.143.193.70])
	by ehatchersolutions.com (Postfix) with ESMTP id C863830EFC16
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 09:12:09 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <466C67AB.50702@j-hohwiller.de>
References: <466C67AB.50702@j-hohwiller.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EADCCD47-6E65-4FBC-81D7-8A22BA958F4E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene out of the box
Date: Mon, 11 Jun 2007 11:12:09 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Jun 10, 2007, at 5:05 PM, Joerg Hohwiller wrote:
> If you like it, I would be very pleased if you put a link at your  
> contributions:
>
> http://lucene.apache.org/java/docs/contributions.html

That page is basically deprecated (we should add something to that  
effect).  Please add your project to the PoweredBy wiki page here:

	<http://wiki.apache.org/lucene-java/PoweredBy>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 17:37:05 2007
Return-Path: <java-user-return-28585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84560 invoked from network); 11 Jun 2007 17:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 17:37:04 -0000
Received: (qmail 43064 invoked by uid 500); 11 Jun 2007 17:36:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43020 invoked by uid 500); 11 Jun 2007 17:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42996 invoked by uid 99); 11 Jun 2007 17:36:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 10:36:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 10:36:52 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 60C5E5B773; Mon, 11 Jun 2007 10:36:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 497127F403
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 10:36:31 -0700 (PDT)
Date: Mon, 11 Jun 2007 10:36:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Retrieving TermVectors from a Field over the full index?
In-Reply-To: <1181551841.23337.1194483819@webmail.messagingengine.com>
Message-ID: <Pine.LNX.4.58.0706111030010.2039@hal.rescomp.berkeley.edu>
References: <466AC4E8.8010803@rssowl.org>   <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>
   <466C3890.9060006@rssowl.org>   <359a92830706101300jd54d938n522b14aef2dd660b@mail.gmail.com>
   <466CF79B.1090403@rssowl.org> <1181551841.23337.1194483819@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: It seems like what's missing is the efficient ability for
: TermDocs/TermInfosReader to seek to the first term of a given field.
: They already can seek to a given specific term; with some small

isn't TermEnum.skipTo(new Term("field","") followed by
termDocs.seek(TermEnum) going to take care of this for you?

The first call should efficinetly skip to the first term in the field
"field" (if there is one) and the second call should efficiently seek the
TermDoc to the first doc containing that term.

(This is how TermScorer and RangeFilter work work as i recall)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 18:19:41 2007
Return-Path: <java-user-return-28586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6517 invoked from network); 11 Jun 2007 18:19:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 18:19:41 -0000
Received: (qmail 74773 invoked by uid 500); 11 Jun 2007 18:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74524 invoked by uid 500); 11 Jun 2007 18:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74513 invoked by uid 99); 11 Jun 2007 18:19:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 11:19:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 11:19:33 -0700
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 46B49E90
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 14:19:12 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Mon, 11 Jun 2007 14:19:12 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 2954D9F28; Mon, 11 Jun 2007 14:19:12 -0400 (EDT)
Message-Id: <1181585952.27549.1194583245@webmail.messagingengine.com>
X-Sasl-Enc: 4Rz6L8WFSoDSbZd31kIfpKwaufRULwwhBAexTG+MeZTg 1181585952
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <466AC4E8.8010803@rssowl.org>
   <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>
   <466C3890.9060006@rssowl.org>
   <359a92830706101300jd54d938n522b14aef2dd660b@mail.gmail.com>
   <466CF79B.1090403@rssowl.org>
   <1181551841.23337.1194483819@webmail.messagingengine.com>
   <Pine.LNX.4.58.0706111030010.2039@hal.rescomp.berkeley.edu>
Subject: Re: Retrieving TermVectors from a Field over the full index?
In-Reply-To: <Pine.LNX.4.58.0706111030010.2039@hal.rescomp.berkeley.edu>
Date: Mon, 11 Jun 2007 14:19:12 -0400
X-Virus-Checked: Checked by ClamAV on apache.org

"Chris Hostetter" <hossman_lucene@fucit.org> wrote:
> 
> : It seems like what's missing is the efficient ability for
> : TermDocs/TermInfosReader to seek to the first term of a given field.
> : They already can seek to a given specific term; with some small
> 
> isn't TermEnum.skipTo(new Term("field","") followed by
> termDocs.seek(TermEnum) going to take care of this for you?
> 
> The first call should efficinetly skip to the first term in the field
> "field" (if there is one) and the second call should efficiently seek the
> TermDoc to the first doc containing that term.
> 
> (This is how TermScorer and RangeFilter work work as i recall)

Ahhh, right.  You don't have to give skipTo a real (existing) term.
So this approach would work fine.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 21:00:56 2007
Return-Path: <java-user-return-28587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 919 invoked from network); 11 Jun 2007 21:00:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 21:00:53 -0000
Received: (qmail 655 invoked by uid 500); 11 Jun 2007 21:00:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 614 invoked by uid 500); 11 Jun 2007 21:00:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 599 invoked by uid 99); 11 Jun 2007 21:00:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 14:00:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [81.169.146.162] (HELO mo-p00-ob.rzone.de) (81.169.146.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 14:00:44 -0700
Received: from [192.168.1.10]
	(frnk-d9bd4b48.pool.mediaWays.net [217.189.75.72])
	by post.webmailer.de (fruni mo53) (RZmta 7.2)
	with ESMTP id E01c10j5BJvajz for <java-user@lucene.apache.org>;
	Mon, 11 Jun 2007 23:00:21 +0200 (MEST)
Message-ID: <466DB7E4.4070105@j-hohwiller.de>
Date: Mon, 11 Jun 2007 23:00:20 +0200
From: Joerg Hohwiller <joerg@j-hohwiller.de>
User-Agent: Thunderbird 1.5.0.9 (X11/20061206)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene out of the box
References: <466C67AB.50702@j-hohwiller.de> <EADCCD47-6E65-4FBC-81D7-8A22BA958F4E@ehatchersolutions.com>
In-Reply-To: <EADCCD47-6E65-4FBC-81D7-8A22BA958F4E@ehatchersolutions.com>
X-Enigmail-Version: 0.94.1.1
OpenPGP: id=60DCBFFF
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-RZG-AUTH: iBOV3jhHSigu+CPDZ4XlORG6WsF0K7j6ahgFeEaVRKniQta4ZYVUip7tl/feWzk=
X-RZG-CLASS-ID: mo00
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Eric,

> On Jun 10, 2007, at 5:05 PM, Joerg Hohwiller wrote:
>> If you like it, I would be very pleased if you put a link at your
>> contributions:
>>
>> http://lucene.apache.org/java/docs/contributions.html
> 
> That page is basically deprecated (we should add something to that
> effect).  Please add your project to the PoweredBy wiki page here:
> 
>     <http://wiki.apache.org/lucene-java/PoweredBy>
Thanks for the info.
I see two categories on that wiki page.
What I miss is a category for projects that provide add-ons, tools, or other
value to lucene (e.g. Luke is a cool Tool, very useful. It is listed at
contributions but not on the wiki PowerdBy site). Should I create an account and
simply add such a category?

Regards
  Jörg
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGbbfkmPuec2Dcv/8RAtMgAJ9PR/tgO6WQVyOYW4Rls5aWuIUqEgCfUY/R
Iwpw8RHW+E0EcKg8bRCMy6k=
=ow0C
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 21:32:59 2007
Return-Path: <java-user-return-28588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13882 invoked from network); 11 Jun 2007 21:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 21:32:58 -0000
Received: (qmail 71032 invoked by uid 500); 11 Jun 2007 21:32:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70985 invoked by uid 500); 11 Jun 2007 21:32:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70974 invoked by uid 99); 11 Jun 2007 21:32:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 14:32:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.209.148.227] (HELO dd1618.kasserver.com) (81.209.148.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 14:32:49 -0700
Received: from [192.168.32.109] (18.116.77.83.cust.bluewin.ch [83.77.116.18])
	by dd1618.kasserver.com (Postfix) with ESMTP id C4C9F6F1F0
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 23:32:25 +0200 (CEST)
Message-ID: <466DBF70.1020909@rssowl.org>
Date: Mon, 11 Jun 2007 23:32:32 +0200
From: Benjamin Pasero <bpasero@rssowl.org>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Retrieving TermVectors from a Field over the full index?
References: <466AC4E8.8010803@rssowl.org>	 <359a92830706101031i2576ce17g940bd61eb941698e@mail.gmail.com>	 <466C3890.9060006@rssowl.org>	 <359a92830706101300jd54d938n522b14aef2dd660b@mail.gmail.com>	 <466CF79B.1090403@rssowl.org> <359a92830706110656g77659cafm3fc534a68bb38555@mail.gmail.com>
In-Reply-To: <359a92830706110656g77659cafm3fc534a68bb38555@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Ah, I see. The code was not very obvious to behave like that :)

Btw my usecase is to simply display the mostfrequent keywords
in a UI (you could call it a Tag-Cloud).

Regards,
Ben
> No, the code I posted is not doing nearly as much work. Try it.
>
>    TermEnum te = this.reader.terms();
>        te.skipTo(new Term("keyword", ""));     *********skips terms 
> NOT in
> the keyword field.
>        while (te.next()) {
>            Term term = te.term();
>            if (! term.field().equals("keyword")) {
>                break;          ***********stops looking at terms as 
> soon as
> the keywords field is exhausted.
>            }
>
> Your code examines all the terms in the index. Mine only looks at 
> terms in
> the keywords field. Which is what you said you wanted. That combined with
> docfreq might be what you need.
>
> Erick
>
>
>
> On 6/11/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>>
>>
>>
>> This is what I coded up till now:
>>
>> TermEnum terms = reader.terms();
>> while (terms.next()) {
>>   String field = terms.term().field();
>>   if ("keywords".equals(field))
>>     keywords.put(terms.term().text(), terms.docFreq());
>> }
>>
>> Your solution is doing more or less the same right?
>>
>> Ben
>> > Maybe I'm missing the boat, but I don't understand why TermEnum 
>> doesn't
>> > work for you.
>> > Try something like...
>> >
>> >       TermEnum te = this.reader.terms();
>> >        te.skipTo(new Term("keyword", ""));
>> >        while (te.next()) {
>> >            Term term = te.term();
>> >            if (! term.field().equals("keyword")) {
>> >                break;
>> >            }
>> >            System.out.println(term.text());
>> >        }
>> >
>> >
>> >
>> > On 6/10/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>> >>
>> >>
>> >>
>> >> Erick Erickson wrote:
>> >> > Um, to return all counts of all terms in a field, what other option
>> >> > *is* there except to walk the whole thing?
>> >> >
>> >> > Have you looked at TermEnum, TermDocs, and TermFreqVector?
>> >> > For that matter, TermPositionVector might also be of some use.
>> >> >
>> >> > It would be easier to provide some help if you
>> >> > 1> mentioned what you'd tried already
>> >> > 2> mentioned what's inadequate about what you've tried.
>> >> Sorry for not being clear what I am trying to achieve. I am storing
>> >> documents in my index that are made of 5 Fields. One of the Fields
>> >> contains keywords that describe the document. Now, I need a fast
>> >> way of retrieving these keywords together with their frequency from
>> >> the index.
>> >>
>> >> My current solution is to use IndexReader#terms() to walk over all
>> >> terms and count the ones that appear in the keyword-Field.
>> >>
>> >> As you can assume, this is not scaling well. The content in the
>> keywords
>> >> field is usually quite small, however, the other fields may store
>> >> up to thousands of terms.
>> >>
>> >> What I am asking for is a way to walk all the terms of just the
>> >> keyword-field
>> >> in order to avoid having to walk all terms in all fields.
>> >>
>> >> Of course, even better would be some API that would return a 
>> TermVector
>> >> from
>> >> the keyword-field. But I guess TermVectors are only supported on a 
>> per
>> >> Document level and not index level?
>> >>
>> >> Regards,
>> >> Ben
>> >> >
>> >> > Best
>> >> > Erick
>> >> >
>> >> > On 6/9/07, Benjamin Pasero <bpasero@rssowl.org> wrote:
>> >> >>
>> >> >> Hi,
>> >> >>
>> >> >> I wonder if this is possible:
>> >> >>
>> >> >> Return all Terms of a Field in the Index together with the 
>> number of
>> >> >> occurances
>> >> >> in all documents.
>> >> >>
>> >> >> E.g. have 10 Documents with the Field "author" in the index, 5 of
>> >> them
>> >> >> having
>> >> >> the value "foo" and 5 "bar" I would like to build a map with:
>> >> >>
>> >> >> [foo] -> 5
>> >> >> [bar] -> 5
>> >> >>
>> >> >> I looked at what Luke is doing to show the top terms of a given
>> field
>> >> in
>> >> >> the
>> >> >> index and it seems to iterate over all terms (using
>> >> >> IndexReader#terms()). Isnt
>> >> >> that quite un-efficient? I would at least expect a method
>> >> >> IndexReader#terms(String field)
>> >> >> to limit the terms on the desired field.
>> >> >>
>> >> >> Thanks for helping,
>> >> >> Ben
>> >> >>
>> >> >>
>> >> >>
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 11 21:35:00 2007
Return-Path: <java-user-return-28589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15722 invoked from network); 11 Jun 2007 21:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2007 21:34:59 -0000
Received: (qmail 76006 invoked by uid 500); 11 Jun 2007 21:34:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75973 invoked by uid 500); 11 Jun 2007 21:34:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75962 invoked by uid 99); 11 Jun 2007 21:34:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 14:34:54 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 14:34:50 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HxrWw-0005E9-6V
	for java-user@lucene.apache.org; Mon, 11 Jun 2007 14:34:30 -0700
Message-ID: <11069260.post@talk.nabble.com>
Date: Mon, 11 Jun 2007 14:34:30 -0700 (PDT)
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Subject: "Contains" query parsed to PrefixQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dontspamterry@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I was experimenting with queries using wildcard on an untokenized field and
noticed that a query with both a starting and trailing wildcard, e.g. *abc*,
gets parsed to the PrefixQuery *abc. I did enable the leading wildcard in
the QueryParser to allow the query above to be parsed so I'm wondering is
there any way to get the query parser to parse *abc* as a WildcardQuery and
not a PrefixQuery, short of overriding the applicable query parser methods?
I don't think the parser treats every query with a trailing wildcard as a
PrefixQuery because when I tried, a*b*, it got parsed to a WildcardQuery.
Thanks for any insight!

-Terry
-- 
View this message in context: http://www.nabble.com/%22Contains%22-query-parsed-to-PrefixQuery-tf3904234.html#a11069260
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 00:03:47 2007
Return-Path: <java-user-return-28590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66979 invoked from network); 12 Jun 2007 00:03:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 00:03:46 -0000
Received: (qmail 3952 invoked by uid 500); 12 Jun 2007 00:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3468 invoked by uid 500); 12 Jun 2007 00:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3457 invoked by uid 99); 12 Jun 2007 00:03:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 17:03:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 17:03:37 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 75F925B774; Mon, 11 Jun 2007 17:03:17 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4CABE7F403
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 17:03:17 -0700 (PDT)
Date: Mon, 11 Jun 2007 17:03:17 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: "Contains" query parsed to PrefixQuery
In-Reply-To: <11069260.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0706111658300.26536@hal.rescomp.berkeley.edu>
References: <11069260.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: gets parsed to the PrefixQuery *abc. I did enable the leading wildcard in
: the QueryParser to allow the query above to be parsed so I'm wondering is

are you sure you called setAllowLeadingWildcard(true) first?

Are you using using 1.9 or earlier ... if so are you calling the
static parse(String,String,Analyzer) instance? it doesn't know anything
about hte other settings you can set on instances of QueryParser.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 00:16:31 2007
Return-Path: <java-user-return-28591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69623 invoked from network); 12 Jun 2007 00:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 00:16:30 -0000
Received: (qmail 19182 invoked by uid 500); 12 Jun 2007 00:16:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19142 invoked by uid 500); 12 Jun 2007 00:16:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19127 invoked by uid 99); 12 Jun 2007 00:16:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 17:16:27 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 17:16:23 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hxu3G-0000IE-SI
	for java-user@lucene.apache.org; Mon, 11 Jun 2007 17:16:02 -0700
Message-ID: <11071008.post@talk.nabble.com>
Date: Mon, 11 Jun 2007 17:16:02 -0700 (PDT)
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: "Contains" query parsed to PrefixQuery
In-Reply-To: <Pine.LNX.4.58.0706111658300.26536@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dontspamterry@yahoo.com
References: <11069260.post@talk.nabble.com> <Pine.LNX.4.58.0706111658300.26536@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


I'm using 2.1.0 and I'm calling setAllowLeadingWildcard(true) first on my
QueryParser instance. I'm using a PerFieldAnalyzerWrapper where the field of
interest uses the WhiteSpaceAnalyzer.

-Terry


hossman_lucene wrote:
> 
> 
> : gets parsed to the PrefixQuery *abc. I did enable the leading wildcard
> in
> : the QueryParser to allow the query above to be parsed so I'm wondering
> is
> 
> are you sure you called setAllowLeadingWildcard(true) first?
> 
> Are you using using 1.9 or earlier ... if so are you calling the
> static parse(String,String,Analyzer) instance? it doesn't know anything
> about hte other settings you can set on instances of QueryParser.
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/%22Contains%22-query-parsed-to-PrefixQuery-tf3904234.html#a11071008
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 00:44:02 2007
Return-Path: <java-user-return-28592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75853 invoked from network); 12 Jun 2007 00:44:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 00:44:01 -0000
Received: (qmail 53043 invoked by uid 500); 12 Jun 2007 00:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53008 invoked by uid 500); 12 Jun 2007 00:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52997 invoked by uid 99); 12 Jun 2007 00:43:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 17:43:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 17:43:53 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4EA455B774; Mon, 11 Jun 2007 17:43:32 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 309477F403
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 17:43:32 -0700 (PDT)
Date: Mon, 11 Jun 2007 17:43:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: "Contains" query parsed to PrefixQuery
In-Reply-To: <11071008.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0706111742500.26536@hal.rescomp.berkeley.edu>
References: <11069260.post@talk.nabble.com> <Pine.LNX.4.58.0706111658300.26536@hal.rescomp.berkeley.edu>
 <11071008.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I'm using 2.1.0 and I'm calling setAllowLeadingWildcard(true) first on my
: QueryParser instance. I'm using a PerFieldAnalyzerWrapper where the field of
: interest uses the WhiteSpaceAnalyzer.

could you send some code demonstrating the probelm you areseeing?  ideally
in the form of a small self contained JUnit test.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 00:58:33 2007
Return-Path: <java-user-return-28593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79455 invoked from network); 12 Jun 2007 00:58:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 00:58:32 -0000
Received: (qmail 83192 invoked by uid 500); 12 Jun 2007 00:58:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82679 invoked by uid 500); 12 Jun 2007 00:58:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82668 invoked by uid 99); 12 Jun 2007 00:58:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 17:58:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.68.230] (HELO web36204.mail.mud.yahoo.com) (209.191.68.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jun 2007 17:58:24 -0700
Received: (qmail 79552 invoked by uid 60001); 12 Jun 2007 00:58:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=jYYgjrqFqllITXGrPUhwSNRYqVxYrJEzhkcndHY/AEle0LAHMExd8Hxk0FlimtLhDVlTGFr8+G5vFJirrgzUnhTbHdxmsm7bfNiSsarJyd6t2kX51bd8giXTn8z4dUAfkdu3KU35+CLyOG13omArGg0nkuE/JB34UnV6wGg504Y=;
X-YMail-OSG: 9OEs37QVM1nbDWT79Wrgsb_SBapXc0axZb74O5QIMBrvdIBmHAmTK81m8BExhgg54g--
Received: from [71.232.15.119] by web36204.mail.mud.yahoo.com via HTTP; Mon, 11 Jun 2007 17:58:02 PDT
Date: Mon, 11 Jun 2007 17:58:02 -0700 (PDT)
From: Lindsey Hess <lindseyhess83@yahoo.com>
Subject: Re: Lucene & MySq
To: java-user@lucene.apache.org
In-Reply-To: <359a92830706071537u1bb20ab5ya1241348ffc632fe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-649029418-1181609882=:78176"
Content-Transfer-Encoding: 8bit
Message-ID: <901955.78176.qm@web36204.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-649029418-1181609882=:78176
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thank you Erick Erickson and Chris Lu.  I'm trying DBSight right now, and I'll let the group know if I have any issues.
   
  Cheers,
   
  Lindsey

Erick Erickson <erickerickson@gmail.com> wrote:
  Understand that Lucene is an indexing engine. "out of the box", there's
no understanding of databases etc. built in. But as Chris Lu points out,
there are applications out there that do this for you.....

If you try to roll your own, you'll have to write some code that
queries the database, and use Lucene to index that data. Then
you'll have to write code that searches your index and "does
the right thing"....

Best
Erick

On 6/7/07, Lindsey Hess 
wrote:
>
> Hi,
>
> I'm new to Lucene...very new. I'd like to use Lucene to index a MySQL
> database (six tables, actually), and then use it to search the database in
> lieu of using SQL. I can't seem to find any sample code to do this, so I
> was hoping that someone could share some or point me in the right direction.
>
> Thanks,
>
> Lindsey
>
>
> ---------------------------------
> Pinpoint customers who are looking for what you sell.


       
---------------------------------
Get the Yahoo! toolbar and be alerted to new email wherever you're surfing. 
--0-649029418-1181609882=:78176--

From java-user-return-28594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 01:24:10 2007
Return-Path: <java-user-return-28594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91208 invoked from network); 12 Jun 2007 01:24:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 01:24:09 -0000
Received: (qmail 17976 invoked by uid 500); 12 Jun 2007 01:24:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17941 invoked by uid 500); 12 Jun 2007 01:24:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17930 invoked by uid 99); 12 Jun 2007 01:24:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 18:24:05 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 18:24:01 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Hxv6j-0001Xf-Bd
	for java-user@lucene.apache.org; Mon, 11 Jun 2007 18:23:41 -0700
Message-ID: <11071503.post@talk.nabble.com>
Date: Mon, 11 Jun 2007 18:23:39 -0700 (PDT)
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: "Contains" query parsed to PrefixQuery
In-Reply-To: <Pine.LNX.4.58.0706111742500.26536@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dontspamterry@yahoo.com
References: <11069260.post@talk.nabble.com> <Pine.LNX.4.58.0706111658300.26536@hal.rescomp.berkeley.edu> <11071008.post@talk.nabble.com> <Pine.LNX.4.58.0706111742500.26536@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Here you go:

import junit.framework.TestCase;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.PrefixQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.WildcardQuery;

public class WildcardQueryTest extends TestCase
{
	private QueryParser qp;
	
	protected void setUp() throws Exception
	{
		super.setUp();
		
		WhitespaceAnalyzer analyzer = new WhitespaceAnalyzer();
		qp = new QueryParser("name", analyzer);
		qp.setAllowLeadingWildcard(true);
	}
	
	public void testContainsQuery() throws Exception
	{
		// Trailing wildcard parses to PrefixQuery
		String predicate = "name:Hom*";
		Query q = qp.parse(predicate);
		assertEquals(predicate + " parsed to PrefixQuery", PrefixQuery.class,
q.getClass());
		
		// Leading wildcard parses to WildcardQuery
		predicate = "name:*omer";
		q = qp.parse(predicate);
		assertEquals(predicate + " parsed to WildcardQuery", WildcardQuery.class,
q.getClass());
		
		// Middle wildcard parses to WildcardQuery
		predicate = "name:H*r";
		q = qp.parse(predicate);
		assertEquals(predicate + " parsed to WildcardQuery", WildcardQuery.class,
q.getClass());
		
		// Leading and trailing wildcards parse to PrefixQuery
		predicate = "name:*om*";
		q = qp.parse(predicate);
		assertEquals(predicate + " parsed to PrefixQuery", PrefixQuery.class,
q.getClass());
		
		// Leading and middle wildcards parse to WildcardQuery
		predicate = "name:*ar*e";
		q = qp.parse(predicate);
		assertEquals(predicate + " parsed to WildcardQuery", WildcardQuery.class,
q.getClass());
		
		// Middle and trailing wildcards parse to WildcardQuery
		predicate = "name:ar*e*";
		q = qp.parse(predicate);
		assertEquals(predicate + " parsed to WildcardQuery", WildcardQuery.class,
q.getClass());
	}
	
	protected void tearDown() throws Exception
	{
		super.tearDown();
	}
}



hossman_lucene wrote:
> 
> 
> : I'm using 2.1.0 and I'm calling setAllowLeadingWildcard(true) first on
> my
> : QueryParser instance. I'm using a PerFieldAnalyzerWrapper where the
> field of
> : interest uses the WhiteSpaceAnalyzer.
> 
> could you send some code demonstrating the probelm you areseeing?  ideally
> in the form of a small self contained JUnit test.
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/%22Contains%22-query-parsed-to-PrefixQuery-tf3904234.html#a11071503
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 02:14:59 2007
Return-Path: <java-user-return-28595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2469 invoked from network); 12 Jun 2007 02:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 02:14:57 -0000
Received: (qmail 83953 invoked by uid 500); 12 Jun 2007 02:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83558 invoked by uid 500); 12 Jun 2007 02:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83546 invoked by uid 99); 12 Jun 2007 02:14:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 19:14:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,MANY_EXCLAMATIONS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [218.249.153.227] (HELO mail.yikey.com) (218.249.153.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 19:14:47 -0700
Content-class: urn:content-classes:message
Subject: Why use RMI search very slow! when have 13 TermQuery! Return cost 7500 ms .
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7AC97.BC39F6A3"
Date: Tue, 12 Jun 2007 10:16:49 +0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <28C622BA8A7A474589924466E6303BE00CC7D4@EXCH01.yikey.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Why use RMI search very slow! when have 13 TermQuery! Return cost 7500 ms .
Thread-Index: Acesl7u/z5zGSplrSHWQGTT3dJJPxQ==
From: =?gb2312?B?za/Qob78?= <tongxiaojun@yikey.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7AC97.BC39F6A3
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

I am use RMI search two server date! When I use one TermQuery return =
30ms (very good)! But when I use booleanQuery add tow termQuery return =
must 150 ms =A3=BA=A3=A8

And three is 250 ms? My query have 13 TermQuery! Return cost 7500 ms .=20

How can I do it quick! Use ICE(Internet Communications Engine) ZeroC ?

=20

Thank you very much !

=20

xiaojun tong

=20

010-64489518-613

tongxiaojun@msn.com

www.feedsky.com

=20


------_=_NextPart_001_01C7AC97.BC39F6A3--

From java-user-return-28596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 02:17:50 2007
Return-Path: <java-user-return-28596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3643 invoked from network); 12 Jun 2007 02:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 02:17:49 -0000
Received: (qmail 90864 invoked by uid 500); 12 Jun 2007 02:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90810 invoked by uid 500); 12 Jun 2007 02:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90795 invoked by uid 99); 12 Jun 2007 02:17:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 19:17:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,MANY_EXCLAMATIONS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [218.249.153.227] (HELO mail.yikey.com) (218.249.153.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 19:17:40 -0700
Content-class: urn:content-classes:message
Subject: (this mail have My code!)Why use RMI search very slow! when have 13 TermQuery! Return cost 7500 ms .
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7AC98.23F06D23"
Date: Tue, 12 Jun 2007 10:19:43 +0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <28C622BA8A7A474589924466E6303BE00CC7D5@EXCH01.yikey.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: (this mail have My code!)Why use RMI search very slow! when have 13 TermQuery! Return cost 7500 ms .
Thread-Index: Acesl7u/z5zGSplrSHWQGTT3dJJPxQAACGsQ
From: =?gb2312?B?za/Qob78?= <tongxiaojun@yikey.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7AC98.23F06D23
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

I am use RMI search two server date! When I use one TermQuery return =
30ms (very good)! But when I use booleanQuery add tow termQuery return =
must 150 ms =A3=BA=A3=A8

And three is 250 ms? My query have 13 TermQuery! Return cost 7500 ms .=20

How can I do it quick! Use ICE(Internet Communications Engine) ZeroC ?

=20

/*

 * Created on Sep 8, 2005

 */

package com.feedsky.search.client;

=20

import java.io.IOException;

import java.rmi.Naming;

import java.util.ArrayList;

import java.util.Iterator;

import java.util.Vector;

=20

import org.apache.lucene.analysis.SimpleAnalyzer;

import org.apache.lucene.index.Term;

import org.apache.lucene.queryParser.ParseException;

import org.apache.lucene.queryParser.QueryParser;

import org.apache.lucene.search.BooleanQuery;

import org.apache.lucene.search.Hits;

import org.apache.lucene.search.MultiSearcher;

import org.apache.lucene.search.Query;

import org.apache.lucene.search.RemoteSearchable;

import org.apache.lucene.search.Searchable;

import org.apache.lucene.search.TermQuery;

import org.apache.lucene.search.BooleanClause.Occur;

=20

import com.feedsky.search.conf.ServerInfo;

import com.feedsky.search.conf.ServerInfoReader;

=20

public class RemoteLuceneConnector {

        =20

     private RemoteSearchable[] remoteSearchers;

   =20

     public RemoteLuceneConnector(){

          makeRemoteSearchables();  =20

     }=20

    =20

     public static void main(String[] args) {

          RemoteLuceneConnector rlc=3D new RemoteLuceneConnector();

          RemoteSearchable[] rs=3D rlc.getRemoteSearchers();

         =20

          try {

                            MultiSearcher multi =3D new =
MultiSearcher(rs);

                            long startTime =
=3DSystem.currentTimeMillis();

                            long runtime =3D0;

                            for (int i =3D 0; i < 10000; i++) {

                                     BooleanQuery query=3Dnew =
BooleanQuery();

                                     TermQuery termQuery=3Dnew =
TermQuery(new Term("itemContent","=D6=D0=B9=FA"));

                                     query.add(termQuery,Occur.MUST);

                                     TermQuery termQuery1=3Dnew =
TermQuery(new Term("itemContent","=C3=C0=B9=FA"));

                                     query.add(termQuery1,Occur.MUST);

                                    =20

                   TermQuery termQuery2=3Dnew TermQuery(new =
Term("itemContent","=C4=E3=BA=C3"));

                                     query.add(termQuery2,Occur.MUST);

                                    =20

                                     TermQuery termQuery3=3Dnew =
TermQuery(new Term("itemContent","=C8=D5=B1=BE"));

                                     query.add(termQuery3,Occur.MUST);

                                    =20

                                     TermQuery termQuery4=3Dnew =
TermQuery(new Term("itemContent","=D6=D0=B9=FA"));

                                     query.add(termQuery4,Occur.MUST);

                                     TermQuery termQuery5=3Dnew =
TermQuery(new Term("itemContent","=CC=EC=CF=C2"));

                                     query.add(termQuery5,Occur.MUST);

                                     TermQuery termQuery6=3Dnew =
TermQuery(new Term("itemContent","=CF=B5=C1=D0"));

                                     query.add(termQuery6,Occur.MUST);

                                     TermQuery termQuery7=3Dnew =
TermQuery(new Term("itemContent","=C4=E3=BA=C3"));

                                     query.add(termQuery7,Occur.MUST);

                                     TermQuery termQuery8=3Dnew =
TermQuery(new Term("itemContent","=D6=D0=B9=FA"));

                                     query.add(termQuery8,Occur.MUST);

                                    =20

                                    =20

                                     TermQuery termQuery9=3Dnew =
TermQuery(new Term("itemContent","=D6=D0=B9=FA"));

                                     query.add(termQuery9,Occur.MUST);

                                     TermQuery termQuery10=3Dnew =
TermQuery(new Term("itemContent","=BA=AB=B9=FA"));

                                     query.add(termQuery10,Occur.MUST);

                                     TermQuery termQuery11=3Dnew =
TermQuery(new Term("itemContent","=D0=C2=BC=D3=C6=C2"));

                                     query.add(termQuery11,Occur.MUST);

                                     TermQuery termQuery12=3Dnew =
TermQuery(new Term("itemContent","=CC=A8=CD=E5"));

                                     query.add(termQuery12,Occur.MUST);

                                     TermQuery termQuery13=3Dnew =
TermQuery(new Term("itemContent","=D6=D0=B9=FA"));

                                     query.add(termQuery13,Occur.MUST);

                                     =
//System.out.println(query.toString());

                                     QueryParser qp =3D new =
QueryParser("itemContent", new SimpleAnalyzer());

                                     try {

                                               Query query2 =3D =
qp.parse(query.toString());

                                     } catch (ParseException e) {

                                               // TODO Auto-generated =
catch block

                                               e.printStackTrace();

                                     }

                                    =20

                                     =
runtime=3DSystem.currentTimeMillis();

                                     Hits hits =3D multi.search(query);

                                     System.out.println("hits length =3D =
"+hits.length());

                                     System.out.println("runtime =
=3D"+(System.currentTimeMillis()-runtime));

                                    =20

                                    =20

                            }

                            long endTime =3DSystem.currentTimeMillis();

                            System.out.println("endTime =3D "+(endTime - =
startTime));

                           =20

                           =20

                   } catch (IOException e) {

                            // TODO Auto-generated catch block

                            e.printStackTrace();

                   }

=20

          System.out.println(rs);

         }

        =20

=20

     /**

     * <p>create remoteSearchables =20

     */

     private synchronized void makeRemoteSearchables(){      =20

             ServerInfoReader serverInfoReader =3D new =
ServerInfoReader();

=20

             ArrayList searcherList =3D serverInfoReader.getNameList();  =
    =20

            =20

             if (searcherList!=3Dnull) System.out.println("Number of =
Machines=3D" + searcherList.size());

            =20

             Vector v =3D new Vector();=20

             //int index=3D0;

                   for ( Iterator i=3DsearcherList.iterator(); =
i.hasNext(); )

                   {  =20

                 ServerInfo serverInfo =3D (ServerInfo)i.next();

                =20

                 String machinename=3D "//" + serverInfo.getIpAddr() + =
":" + serverInfo.getPortNum() + "/searchable";

                 //String machinename=3D "//" + serverInfo.getIpAddr() + =
":" + serverInfo.getPortNum() + "/luceneindex";

                 System.out.println("Machine: " + machinename);

                =20

                 try{

                 Searchable s =3D =
(Searchable)Naming.lookup(machinename);          =20

                           RemoteSearchable searcher =3D new =
RemoteSearchable(s);

                           v.add(searcher);

                          =20

                 }catch(Exception ee){=20

                 ee.printStackTrace();

                 System.out.println("Exception in getting Remote Object: =
" + ee.getMessage());

                 }

                   }       =20

                   remoteSearchers =3D new RemoteSearchable[v.size()];

                   for(int i =3D 0; i < remoteSearchers.length; i++)

                            remoteSearchers[i] =3D =
(RemoteSearchable)v.get(i);

=20

     }

=20

    public RemoteSearchable[] getRemoteSearchers(){

            makeRemoteSearchables();

           return remoteSearchers;

    }

  =20

}

=20

Thank you very much !

=20

xiaojun tong

=20

010-64489518-613

tongxiaojun@msn.com

www.feedsky.com

=20

=20

=20


------_=_NextPart_001_01C7AC98.23F06D23--

From java-user-return-28597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 05:21:41 2007
Return-Path: <java-user-return-28597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58792 invoked from network); 12 Jun 2007 05:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 05:21:40 -0000
Received: (qmail 84522 invoked by uid 500); 12 Jun 2007 05:21:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83524 invoked by uid 500); 12 Jun 2007 05:21:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83510 invoked by uid 99); 12 Jun 2007 05:21:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 22:21:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 22:21:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4B82D5B774; Mon, 11 Jun 2007 22:21:09 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 107977F403
	for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 22:21:09 -0700 (PDT)
Date: Mon, 11 Jun 2007 22:21:09 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene out of the box
In-Reply-To: <466DB7E4.4070105@j-hohwiller.de>
Message-ID: <Pine.LNX.4.58.0706112220460.11496@hal.rescomp.berkeley.edu>
References: <466C67AB.50702@j-hohwiller.de> <EADCCD47-6E65-4FBC-81D7-8A22BA958F4E@ehatchersolutions.com>
 <466DB7E4.4070105@j-hohwiller.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: What I miss is a category for projects that provide add-ons, tools, or other
: value to lucene (e.g. Luke is a cool Tool, very useful. It is listed at
: contributions but not on the wiki PowerdBy site). Should I create an account and
: simply add such a category?

sounds like a good plan to me.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 05:41:51 2007
Return-Path: <java-user-return-28598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62010 invoked from network); 12 Jun 2007 05:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 05:41:49 -0000
Received: (qmail 17769 invoked by uid 500); 12 Jun 2007 05:41:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17735 invoked by uid 500); 12 Jun 2007 05:41:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17724 invoked by uid 99); 12 Jun 2007 05:41:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 22:41:45 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 22:41:40 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l5C5fBGj012126
	for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 08:41:11 +0300
Received: from [10.142.130.117] ([10.142.130.117]) by nimitz with ESMTP
	 id m6c84enu; 12 Jun 2007 08:40:00 +0300
Message-ID: <466E31BB.9090906@teamware.com>
Date: Tue, 12 Jun 2007 08:40:11 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: "Contains" query parsed to PrefixQuery
References: <11069260.post@talk.nabble.com>
In-Reply-To: <11069260.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 12 Jun 2007 08:41:11 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

It's a bug in 2.1, fixed by Doron Cohen

http://issues.apache.org/jira/browse/LUCENE-813

Antony


dontspamterry wrote:
> Hi all,
> 
> I was experimenting with queries using wildcard on an untokenized field and
> noticed that a query with both a starting and trailing wildcard, e.g. *abc*,
> gets parsed to the PrefixQuery *abc. I did enable the leading wildcard in
> the QueryParser to allow the query above to be parsed so I'm wondering is
> there any way to get the query parser to parse *abc* as a WildcardQuery and
> not a PrefixQuery, short of overriding the applicable query parser methods?
> I don't think the parser treats every query with a trailing wildcard as a
> PrefixQuery because when I tried, a*b*, it got parsed to a WildcardQuery.
> Thanks for any insight!
> 
> -Terry


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 06:45:03 2007
Return-Path: <java-user-return-28599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76070 invoked from network); 12 Jun 2007 06:45:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 06:45:01 -0000
Received: (qmail 14126 invoked by uid 500); 12 Jun 2007 06:44:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14056 invoked by uid 500); 12 Jun 2007 06:44:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13948 invoked by uid 99); 12 Jun 2007 06:44:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 23:44:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jun 2007 23:44:46 -0700
Received: by an-out-0708.google.com with SMTP id b20so397646ana
        for <java-user@lucene.apache.org>; Mon, 11 Jun 2007 23:44:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=LWzplf1e8owjr6WffhU4tAm+lBRyBrXwnZWoCGf2l67euTXs/168trsidTIC8KOkTQrhxuUXXuPTSKW8HhHcTMkcoqtFI2jfp3rKf50EX/V4OvH91RZ3UB5lnddRpOL+qrt99FRc0artfI2WL7ifnQzlcWN4Za9T8mEQEXX4Oow=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=bnLhyfwyXjRmPgE6BYPBeRs46LyL0uRJ0pv21hVaihJcOFjE63HpVUIm71zMovctCBI5cnXlfzqkwrJrQyUczQevYjVwqx0MTUaaSPQb2xnrAqbB0eD+RQ6zccc5zi/2VSxnmsJ71RADyneP9bbI147KkncetbXGV3lA9Mu9XEg=
Received: by 10.100.250.7 with SMTP id x7mr3815279anh.1181630665769;
        Mon, 11 Jun 2007 23:44:25 -0700 (PDT)
Received: by 10.100.11.17 with HTTP; Mon, 11 Jun 2007 23:44:25 -0700 (PDT)
Message-ID: <34b8543c0706112344n79a4c893nf04d11d3aa7c522d@mail.gmail.com>
Date: Tue, 12 Jun 2007 10:14:25 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: regarding range search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_161643_31071026.1181630665750"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_161643_31071026.1181630665750
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello
consider a query like this

patientResult:[8 TO 9]

this returns correct documents but

patientResult:[8 TO 10]

return nothing. and also this range [0.1 TO 10]  returns results like 11,
10.8, 10.9 etc.

is there any tricky way or workaround to obtain correct results? I know
lucene compares them as string but how to resolve the problem

thank you very much in advance


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_161643_31071026.1181630665750--

From java-user-return-28600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 07:01:24 2007
Return-Path: <java-user-return-28600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81696 invoked from network); 12 Jun 2007 07:01:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 07:01:23 -0000
Received: (qmail 35136 invoked by uid 500); 12 Jun 2007 07:01:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35110 invoked by uid 500); 12 Jun 2007 07:01:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35081 invoked by uid 99); 12 Jun 2007 07:01:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 00:01:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 00:00:56 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6EC2672812C
	for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 17:04:36 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: regarding range search
Date: Tue, 12 Jun 2007 16:59:15 +1000
User-Agent: KMail/1.9.7
References: <34b8543c0706112344n79a4c893nf04d11d3aa7c522d@mail.gmail.com>
In-Reply-To: <34b8543c0706112344n79a4c893nf04d11d3aa7c522d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706121659.15135.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 12 June 2007 16:44:25 Mohammad Norouzi wrote:
> Hello
> consider a query like this
>
> patientResult:[8 TO 9]
>
> this returns correct documents but
>
> patientResult:[8 TO 10]
>
> return nothing. and also this range [0.1 TO 10]  returns results like 11,
> 10.8, 10.9 etc.
>
> is there any tricky way or workaround to obtain correct results? I know
> lucene compares them as string but how to resolve the problem

Use NumberTools to convert your number into a string which will sort as 
expected.  As your field seems to be a metadata-like field, this will 
probably work well.

(It gets harder if you want to do it inside ordinary text content as well.)

Daniel

-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 07:11:25 2007
Return-Path: <java-user-return-28601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83600 invoked from network); 12 Jun 2007 07:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 07:11:24 -0000
Received: (qmail 59757 invoked by uid 500); 12 Jun 2007 07:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59696 invoked by uid 500); 12 Jun 2007 07:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59606 invoked by uid 99); 12 Jun 2007 07:11:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 00:11:13 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=FORGED_HOTMAIL_RCVD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenehelp@hotmail.com designates 65.54.246.210 as permitted sender)
Received: from [65.54.246.210] (HELO BAY0-OMC3-S10.bay0.hotmail.com) (65.54.246.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 00:10:56 -0700
Received: from BAY126-W22 ([65.55.131.57]) by BAY0-OMC3-S10.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Tue, 12 Jun 2007 00:10:27 -0700
Message-ID: <BAY126-W2206665F348EC52E533558CA190@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_068e81fd-8716-4cda-b4eb-bce29c6ee9f0_"
X-Originating-IP: [199.46.198.233]
From: Lucene Help <lucenehelp@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: ERROR opening the Index - contact sysadmin!
Date: Tue, 12 Jun 2007 03:10:26 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 12 Jun 2007 07:10:27.0908 (UTC) FILETIME=[C13D8040:01C7ACC0]
X-Virus-Checked: Checked by ClamAV on apache.org

--_068e81fd-8716-4cda-b4eb-bce29c6ee9f0_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hello,I just downloaded Lucene and tried running the demo.  I seem to be ok=
ay up until I type in a query into the "Search Criteria" page and click on =
the "Search" button at the URL:  http://localhost:8080/luceneweb/At this po=
int I am at the URL http://localhost:8080/luceneweb/results.jsp?query=3Dtes=
t&maxresults=3D2 which gives me the following: =20
Welcome to the Lucene Template application. (This is the header)



                ERROR opening the Index - contact sysadmin!
                Error message: no segments* file found: files:  =20





	Apache Lucene Template WebApp 1.0 If someone could help me out ASAP, that =
would be great.  Thanks!Lucene User
_________________________________________________________________
With Windows Live Hotmail, you can personalize your inbox with your favorit=
e color.
www.windowslive-hotmail.com/learnmore/personalize.html?locale=3Den-us&ocid=
=3DTXT_TAGLM_HMWL_reten_addcolor_0607=

--_068e81fd-8716-4cda-b4eb-bce29c6ee9f0_--

From java-user-return-28602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 07:35:34 2007
Return-Path: <java-user-return-28602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96695 invoked from network); 12 Jun 2007 07:35:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 07:35:33 -0000
Received: (qmail 7420 invoked by uid 500); 12 Jun 2007 07:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7385 invoked by uid 500); 12 Jun 2007 07:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7374 invoked by uid 99); 12 Jun 2007 07:35:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 00:35:29 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of npanwar@chambal.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 00:35:25 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2654339wah
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 00:35:05 -0700 (PDT)
Received: by 10.114.89.1 with SMTP id m1mr6380768wab.1181633704834;
        Tue, 12 Jun 2007 00:35:04 -0700 (PDT)
Received: by 10.115.72.15 with HTTP; Tue, 12 Jun 2007 00:35:04 -0700 (PDT)
Message-ID: <7fa3c1080706120035x62839907o72f55b4e38f170ee@mail.gmail.com>
Date: Tue, 12 Jun 2007 13:05:04 +0530
From: "Narednra Singh Panwar" <npanwar@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: regarding range search
In-Reply-To: <34b8543c0706112344n79a4c893nf04d11d3aa7c522d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1322_19609359.1181633704803"
References: <34b8543c0706112344n79a4c893nf04d11d3aa7c522d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1322_19609359.1181633704803
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Use NumberTools.longToString() while  storing it in to lucene index and use
(double)NumberTools.stringToLong() while reading it from Lucene index.
Hope this will solve your problem.

Thanks
Narendra

On 6/12/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Hello
> consider a query like this
>
> patientResult:[8 TO 9]
>
> this returns correct documents but
>
> patientResult:[8 TO 10]
>
> return nothing. and also this range [0.1 TO 10]  returns results like 11,
> 10.8, 10.9 etc.
>
> is there any tricky way or workaround to obtain correct results? I know
> lucene compares them as string but how to resolve the problem
>
> thank you very much in advance
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>

------=_Part_1322_19609359.1181633704803--

From java-user-return-28603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 07:50:18 2007
Return-Path: <java-user-return-28603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 639 invoked from network); 12 Jun 2007 07:50:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 07:50:17 -0000
Received: (qmail 36044 invoked by uid 500); 12 Jun 2007 07:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35391 invoked by uid 500); 12 Jun 2007 07:50:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35380 invoked by uid 99); 12 Jun 2007 07:50:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 00:50:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 00:50:08 -0700
Received: by an-out-0708.google.com with SMTP id b20so400551ana
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 00:49:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A0IwphCcJQtVj8s3vCoU/c729xDEeeVw5Pg6djhb4CJedCSj+AEzDgHkQGVUrxWVRdZujny59dG3zhwoHSsRADfgWjdB/U7BD7VOz8TNvViVlyXeeKO6woXXImIR8mwhYtvr0M5Axb5xLfvjcJfodzNt3ErCAyDeReoQep38OwU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=quZEbJUuqfiO0HlFgp5bOED7U6BfXongRZJzBWwpJee02SBc17VluLD6sQ0rVDW7qIVcBPVNxjvn92u9ajoMazv5b3sLNtFhxm8a5jxel9QLRibFd2rvsner8r2h6H1FnRznQZaxS9ypc+QF4fd3OMikeJIGsQOYJKDZK/yCdKk=
Received: by 10.100.42.7 with SMTP id p7mr3838919anp.1181634586953;
        Tue, 12 Jun 2007 00:49:46 -0700 (PDT)
Received: by 10.100.11.17 with HTTP; Tue, 12 Jun 2007 00:49:46 -0700 (PDT)
Message-ID: <34b8543c0706120049j4bc75fd9q52b87eca7110a99d@mail.gmail.com>
Date: Tue, 12 Jun 2007 11:19:46 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regarding range search
In-Reply-To: <7fa3c1080706120035x62839907o72f55b4e38f170ee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_162588_755723.1181634586928"
References: <34b8543c0706112344n79a4c893nf04d11d3aa7c522d@mail.gmail.com>
	 <7fa3c1080706120035x62839907o72f55b4e38f170ee@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_162588_755723.1181634586928
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Narednra and Daniel
but it accepts only long, I found LUCENE-530 to support double and float
etc.
Have you seen it?
https://issues.apache.org/jira/browse/LUCENE-530

another question is Do I have to use it while indexing? how about the index
already created?



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_162588_755723.1181634586928--

From java-user-return-28604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 10:19:58 2007
Return-Path: <java-user-return-28604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68830 invoked from network); 12 Jun 2007 10:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 10:19:57 -0000
Received: (qmail 80850 invoked by uid 500); 12 Jun 2007 10:19:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80802 invoked by uid 500); 12 Jun 2007 10:19:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80787 invoked by uid 99); 12 Jun 2007 10:19:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 03:19:51 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 03:19:47 -0700
Received: by ug-out-1314.google.com with SMTP id m2so133739uge
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 03:19:26 -0700 (PDT)
Received: by 10.66.236.13 with SMTP id j13mr399920ugh.1181643565819;
        Tue, 12 Jun 2007 03:19:25 -0700 (PDT)
Received: by 10.67.40.14 with HTTP; Tue, 12 Jun 2007 03:19:25 -0700 (PDT)
Message-ID: <7cbc67ff0706120319x7676c7f0ha36599b77c47a525@mail.gmail.com>
Date: Tue, 12 Jun 2007 15:49:25 +0530
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: java-user@lucene.apache.org
Subject: Re: ERROR opening the Index - contact sysadmin!
In-Reply-To: <BAY126-W2206665F348EC52E533558CA190@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1909_629353.1181643565787"
References: <BAY126-W2206665F348EC52E533558CA190@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1909_629353.1181643565787
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I am trying to create a lucene query to search for companies based on
areacode. The phone no. is stored in the lucene index in the form of
'415-567-2323'. I need to create a query like +areaCode:"415-". But the
QueryParser is stripping off the hyphen(-).

Here is the code to create the query:
Query query = QueryParser.parse("415-", "phone", analyzer);

I tried by escaping the hyphen and even that did not work.
Query query = QueryParser.parse("415\\-", "phone", analyzer);

Can anyone please suggest a way to do this?

Thanks,
Harini

------=_Part_1909_629353.1181643565787--

From java-user-return-28605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 10:21:07 2007
Return-Path: <java-user-return-28605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69358 invoked from network); 12 Jun 2007 10:21:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 10:21:06 -0000
Received: (qmail 85673 invoked by uid 500); 12 Jun 2007 10:21:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85641 invoked by uid 500); 12 Jun 2007 10:21:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85629 invoked by uid 99); 12 Jun 2007 10:21:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 03:21:01 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 03:20:57 -0700
Received: by ug-out-1314.google.com with SMTP id m2so133912uge
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 03:20:36 -0700 (PDT)
Received: by 10.66.254.2 with SMTP id b2mr432444ugi.1181643635852;
        Tue, 12 Jun 2007 03:20:35 -0700 (PDT)
Received: by 10.67.40.14 with HTTP; Tue, 12 Jun 2007 03:20:35 -0700 (PDT)
Message-ID: <7cbc67ff0706120320t434e00e2pdca965ba9b93a6d6@mail.gmail.com>
Date: Tue, 12 Jun 2007 15:50:35 +0530
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: java-user@lucene.apache.org
Subject: QueryParser stripping special char
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1921_13573678.1181643635825"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1921_13573678.1181643635825
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I am trying to create a lucene query to search for companies based on
areacode. The phone no. is stored in the lucene index in the form of
'415-567-2323'. I need to create a query like +areaCode:"415-". But the
QueryParser is stripping off the hyphen(-).

Here is the code to create the query:
Query query = QueryParser.parse("415-", "phone", analyzer);

I tried by escaping the hyphen and even that did not work.
Query query = QueryParser.parse ("415\\-", "phone", analyzer);

Can anyone please suggest a way to do this?

Thanks,
Harini

------=_Part_1921_13573678.1181643635825--

From java-user-return-28606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 13:41:35 2007
Return-Path: <java-user-return-28606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34309 invoked from network); 12 Jun 2007 13:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 13:41:31 -0000
Received: (qmail 51657 invoked by uid 500); 12 Jun 2007 13:41:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51573 invoked by uid 500); 12 Jun 2007 13:41:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51543 invoked by uid 99); 12 Jun 2007 13:41:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 06:41:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 06:41:19 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id E2FFCFF961
	for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 06:40:57 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BAY126-W2206665F348EC52E533558CA190@phx.gbl>
References: <BAY126-W2206665F348EC52E533558CA190@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <30A0DA4E-8E46-476E-AC14-2DF7F4358354@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: ERROR opening the Index - contact sysadmin!
Date: Tue, 12 Jun 2007 09:40:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you tell us the steps you went through to get to this page?

Thanks,
Grant

On Jun 12, 2007, at 3:10 AM, Lucene Help wrote:

>
> Hello,I just downloaded Lucene and tried running the demo.  I seem  
> to be okay up until I type in a query into the "Search Criteria"  
> page and click on the "Search" button at the URL:  http://localhost: 
> 8080/luceneweb/At this point I am at the URL http://localhost:8080/ 
> luceneweb/results.jsp?query=test&maxresults=2 which gives me the  
> following:
> Welcome to the Lucene Template application. (This is the header)
>
>
>
>                 ERROR opening the Index - contact sysadmin!
>                 Error message: no segments* file found: files:
>
>
>
>
>
> 	Apache Lucene Template WebApp 1.0 If someone could help me out  
> ASAP, that would be great.  Thanks!Lucene User
> _________________________________________________________________
> With Windows Live Hotmail, you can personalize your inbox with your  
> favorite color.
> www.windowslive-hotmail.com/learnmore/personalize.html?locale=en- 
> us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 14:14:05 2007
Return-Path: <java-user-return-28607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45995 invoked from network); 12 Jun 2007 14:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 14:14:02 -0000
Received: (qmail 32034 invoked by uid 500); 12 Jun 2007 14:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31883 invoked by uid 500); 12 Jun 2007 14:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31866 invoked by uid 99); 12 Jun 2007 14:13:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 07:13:58 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=FORGED_HOTMAIL_RCVD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenehelp@hotmail.com designates 65.54.246.216 as permitted sender)
Received: from [65.54.246.216] (HELO bay0-omc3-s16.bay0.hotmail.com) (65.54.246.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 07:13:53 -0700
Received: from BAY126-W15 ([65.55.131.50]) by bay0-omc3-s16.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Tue, 12 Jun 2007 07:13:33 -0700
Message-ID: <BAY126-W15BA144932F1AADAAD6B44CA190@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_5be2dca1-e400-4ef2-b476-acd3c561145b_"
X-Originating-IP: [199.46.198.234]
From: Lucene Help <lucenehelp@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: ERROR opening the Index - contact sysadmin!
Date: Tue, 12 Jun 2007 10:13:33 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 12 Jun 2007 14:13:33.0455 (UTC) FILETIME=[DC3491F0:01C7ACFB]
X-Virus-Checked: Checked by ClamAV on apache.org

--_5be2dca1-e400-4ef2-b476-acd3c561145b_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


I am using apache-tomcat 5.5.23 and lucene-2.1.0. At the command prompt, I =
typed, java org.apache.lucene.demo.IndexHTML - create -index C:\Program Fil=
es\Apache Software Foundation\Tomcat 5.5\webapps\opt\lucene\index ..I then =
got the following:  Usage:  IndexHTML [-create] [-index <index>] <root_dire=
ctory>I then copied and pasted the luceneweb.war from C:\lucene-2.1.0 to C:=
\Program Files\Apache Software Foundation\Tomcat 5.5\webappsI checked to ma=
ke sure that the configuration.jsp in the directory C:\Program Files\Apache=
 Software Foundation\Tomcat 5.5\webapps\luceneweb was set correctly, which =
it was:  String indexLocation =3D "/opt/lucene/index";Then I went opened a =
Mozilla Firefox version 2.0.0.3 browser and typed in http://localhost:8080/=
luceneweb/I entered, "test" for my Search Criteria, and tried various numbe=
rs for Results Per Page, clicked on the Search button, and got the error I =
described below, which was:
Welcome to the Lucene Template application. (This is the header)



                ERROR opening the Index - contact sysadmin!
                Error message: no segments* file found: files:  =20





	Apache Lucene Template WebApp 1.0 Thank you in advance!> From: gsingers@ap=
ache.org> Subject: Re: ERROR opening the Index - contact sysadmin!> Date: T=
ue, 12 Jun 2007 09:40:55 -0400> To: java-user@lucene.apache.org> > Can you =
tell us the steps you went through to get to this page?> > Thanks,> Grant> =
> On Jun 12, 2007, at 3:10 AM, Lucene Help wrote:> > >> > Hello,I just down=
loaded Lucene and tried running the demo.  I seem  > > to be okay up until =
I type in a query into the "Search Criteria"  > > page and click on the "Se=
arch" button at the URL:  http://localhost: > > 8080/luceneweb/At this poin=
t I am at the URL http://localhost:8080/ > > luceneweb/results.jsp?query=3D=
test&maxresults=3D2 which gives me the  > > following:> > Welcome to the Lu=
cene Template application. (This is the header)> >> >> >> >                =
 ERROR opening the Index - contact sysadmin!> >                 Error messa=
ge: no segments* file found: files:> >> >> >> >> >> > 	Apache Lucene Templa=
te WebApp 1.0 If someone could help me out  > > ASAP, that would be great. =
 Thanks!Lucene User> > ____________________________________________________=
_____________> > With Windows Live Hotmail, you can personalize your inbox =
with your  > > favorite color.> > www.windowslive-hotmail.com/learnmore/per=
sonalize.html?locale=3Den- > > us&ocid=3DTXT_TAGLM_HMWL_reten_addcolor_0607=
> > --------------------------> Grant Ingersoll> Center for Natural Languag=
e Processing> http://www.cnlp.org/tech/lucene.asp> > Read the Lucene Java F=
AQ at http://wiki.apache.org/jakarta-lucene/ > LuceneFAQ> > > > -----------=
----------------------------------------------------------> To unsubscribe,=
 e-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, =
e-mail: java-user-help@lucene.apache.org>=20
_________________________________________________________________
Make every IM count. Download Windows Live Messenger and join the i=92m Ini=
tiative now. It=92s free.=A0=A0
http://im.live.com/messenger/im/home/?source=3DTAGWL_June07=

--_5be2dca1-e400-4ef2-b476-acd3c561145b_--

From java-user-return-28608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 14:36:48 2007
Return-Path: <java-user-return-28608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59768 invoked from network); 12 Jun 2007 14:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 14:36:46 -0000
Received: (qmail 89430 invoked by uid 500); 12 Jun 2007 14:36:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89395 invoked by uid 500); 12 Jun 2007 14:36:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89383 invoked by uid 99); 12 Jun 2007 14:36:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 07:36:42 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bharath.nott@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 07:36:37 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1357925nzc
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 07:36:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=pZe/71N1iut0dQxy0aYzYN94L2tVaCFUli2E+J61Gvkqb2FNwEZVmR70OLttnCRCc15VkjuKAwPlWIz8XNmTyu6BKs246+55T7SF0BJKjABESjZZVOPdQ/ViSPBK4Xl7pXvTJ/5sRm7V3OV2jGZ1vQjQEI5AbiJyFYR9yLWCPvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cur8fzKinaOrpknd3iao5nnzRZk+lbIhZRizrAaLPg8TzKXdIB25c6+Ygjmlg14Spnof1xh8nHHD+daHY/Vqiw3Q85C4PWk6tp7eN0MrrL/CCtsZqNgt7KB7OH3Bx8iqbZ4Vf+KWNVU/zeCk2bEBbUIxp+28OPgYa9poJGrfl80=
Received: by 10.142.98.18 with SMTP id v18mr346325wfb.1181658976785;
        Tue, 12 Jun 2007 07:36:16 -0700 (PDT)
Received: by 10.143.31.6 with HTTP; Tue, 12 Jun 2007 07:36:16 -0700 (PDT)
Message-ID: <ede880620706120736v6c7a6982kaff6cac1b04c8083@mail.gmail.com>
Date: Tue, 12 Jun 2007 10:36:16 -0400
From: Nott <bharath.nott@gmail.com>
To: java-user@lucene.apache.org
Subject: FileNotFound Exception While Indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4243_13924331.1181658976763"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4243_13924331.1181658976763
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
We run a batch job written on Java that reads a Oracle DB and creates a
Lucene INDEX. We use Compass interface to do the index creation operations
This is a scheduled job and this is a batch insert transaction job
suddenly we are getting the following exception.
I wnet through the forum and various FAQ's but could not find any thing
conclusive for this
Is some thing wrong in our setup or this is a bug ?

java.io.FileNotFoundException:
/opt/ibm/wwwroot3/lucene/IRIS/IRISLIVE1.3.1/INDEX9/index/irismodel/_v3.cfs
(No such file or directory)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
    at org.apache.lucene.store.FSIndexInput$Descriptor.<init>(
FSDirectory.java:497)
    at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:522)
    at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:434)
    at org.apache.lucene.index.CompoundFileReader.<init>(
CompoundFileReader.java:63)
    at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java
:154)
    at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:140)
    at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:121)
    at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java
:1473)
    at org.apache.lucene.index.IndexWriter.maybeMergeSegments(
IndexWriter.java:1415)
    at org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java
:1352)
    at org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(
IndexWriter.java:1344)
    at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:697)




at
org.compass.core.lucene.engine.transaction.BatchInsertTransaction.doCreate(
BatchInsertTransaction.java:208)
    at org.compass.core.lucene.engine.transaction.AbstractTransaction.create
(AbstractTransaction.java:109)
    at org.compass.core.lucene.engine.LuceneSearchEngine.create(
LuceneSearchEngine.java:330)
    at org.compass.core.impl.DefaultCompassSession.create(
DefaultCompassSession.java:288)
    at org.worldbank.index.iris.IRISIndexService.createFullIndex(
IRISIndexService.java:79)
    at org.worldbank.search.cron.IRISIndexCron.execute(IRISIndexCron.java
:31)
    at org.worldbank.search.cron.AllCrons.main(AllCrons.java:15)

------=_Part_4243_13924331.1181658976763--

From java-user-return-28609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 15:14:18 2007
Return-Path: <java-user-return-28609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78986 invoked from network); 12 Jun 2007 15:14:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 15:14:16 -0000
Received: (qmail 93880 invoked by uid 500); 12 Jun 2007 15:14:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93843 invoked by uid 500); 12 Jun 2007 15:14:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93832 invoked by uid 99); 12 Jun 2007 15:14:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 08:14:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 08:14:07 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.164636D9@mailer.syr.edu>; Tue, 12 Jun 2007 11:13:46 -0400
Message-ID: <466EB7DD.70408@syr.edu>
Date: Tue, 12 Jun 2007 11:12:29 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser stripping special char
References: <7cbc67ff0706120320t434e00e2pdca965ba9b93a6d6@mail.gmail.com>
In-Reply-To: <7cbc67ff0706120320t434e00e2pdca965ba9b93a6d6@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Harini,

Harini Raghavan wrote:
> I am trying to create a lucene query to search for companies based on
> areacode. The phone no. is stored in the lucene index in the form of
> '415-567-2323'. I need to create a query like +areaCode:"415-". But the
> QueryParser is stripping off the hyphen(-).
> 
> Here is the code to create the query:
> Query query = QueryParser.parse("415-", "phone", analyzer);
> 
> I tried by escaping the hyphen and even that did not work.
> Query query = QueryParser.parse ("415\\-", "phone", analyzer);
> 
> Can anyone please suggest a way to do this?

I think what you want is something like:

   Query query = new PrefixQuery(new Term("phone","415-*"));

This assumes that "415-576-2323" is stored as a single term in the index
- searching with "415-" as a term will not match against full phone
numbers, unless you do some form of expansion (like the PrefixQuery
example I gave above).

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 15:56:22 2007
Return-Path: <java-user-return-28610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8029 invoked from network); 12 Jun 2007 15:56:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 15:56:21 -0000
Received: (qmail 99922 invoked by uid 500); 12 Jun 2007 15:56:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99888 invoked by uid 500); 12 Jun 2007 15:56:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99876 invoked by uid 99); 12 Jun 2007 15:56:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 08:56:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ozguryilmazel@gmail.com designates 64.233.162.234 as permitted sender)
Received: from [64.233.162.234] (HELO nz-out-0506.google.com) (64.233.162.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 08:56:12 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1381688nzc
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 08:55:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=C0T8Q6uH2dHRcV7rK9HJ09uHCS98cvmQI5ue+FvYwMbOYyyn+MGr+0C5YoFeuWjBX1UN9P5Tt8is44qp0jUPygalUY9eBd8VnI1CT9eWVzpyAvUFeuAXe6YkRdQpVOlui0SGDonDEW+D7AE3cHgxWaM9I7940VXee1KeJHMZOGU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MgBf/PbkYO7sHd8o/cDs62mmDw6MVtJfgp1RMeaNAz2KaTquahAtdg/NfCzagwsMvk/3DzYkYMrjruYGTT0I0pSQgMx/NIJDcZBGnA9+aEyRqhqYF6sHq2d1bK/59t+bV4LOrtO3aGYAfphuTPue+7uL/4F7BMFfDJYVMU1xyWU=
Received: by 10.114.106.1 with SMTP id e1mr6757764wac.1181663751320;
        Tue, 12 Jun 2007 08:55:51 -0700 (PDT)
Received: by 10.114.112.9 with HTTP; Tue, 12 Jun 2007 08:55:51 -0700 (PDT)
Message-ID: <876469b0706120855y487882bdr9c66237872383527@mail.gmail.com>
Date: Tue, 12 Jun 2007 11:55:51 -0400
From: "Ozgur Yilmazel" <ozguryilmazel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser stripping special char
In-Reply-To: <7cbc67ff0706120320t434e00e2pdca965ba9b93a6d6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7cbc67ff0706120320t434e00e2pdca965ba9b93a6d6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Harini;

If you are already indexing phone numbers in a separate field, you
could also consider indexing the area code as a separate field too.
This might give better performance depending on the size of your
index.

Ozgur



On 6/12/07, Harini Raghavan <harini.raghavan@insideview.com> wrote:
> Hi All,
>
> I am trying to create a lucene query to search for companies based on
> areacode. The phone no. is stored in the lucene index in the form of
> '415-567-2323'. I need to create a query like +areaCode:"415-". But the
> QueryParser is stripping off the hyphen(-).
>
> Here is the code to create the query:
> Query query = QueryParser.parse("415-", "phone", analyzer);
>
> I tried by escaping the hyphen and even that did not work.
> Query query = QueryParser.parse ("415\\-", "phone", analyzer);
>
> Can anyone please suggest a way to do this?
>
> Thanks,
> Harini
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 16:02:21 2007
Return-Path: <java-user-return-28611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13192 invoked from network); 12 Jun 2007 16:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 16:02:20 -0000
Received: (qmail 24910 invoked by uid 500); 12 Jun 2007 16:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24866 invoked by uid 500); 12 Jun 2007 16:02:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24855 invoked by uid 99); 12 Jun 2007 16:02:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 09:02:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 09:02:09 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id D1FD91AFE
	for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 12:01:48 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 12 Jun 2007 12:01:48 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 1AA0EB6C0; Tue, 12 Jun 2007 12:01:48 -0400 (EDT)
Message-Id: <1181664108.15364.1194770647@webmail.messagingengine.com>
X-Sasl-Enc: FgtTBs+zD/m5EshJoLf10TycKLEJifHrts14yao9E+HZ 1181664108
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <ede880620706120736v6c7a6982kaff6cac1b04c8083@mail.gmail.com>
Subject: Re: FileNotFound Exception While Indexing
In-Reply-To: <ede880620706120736v6c7a6982kaff6cac1b04c8083@mail.gmail.com>
Date: Tue, 12 Jun 2007 12:01:48 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


This looks like a rather serious error.  It seems like that file has
somehow gone missing in your index.

On adding a given document, Lucene has flushed its buffered documents
and is attempting to merge segments together when it finds that one of
the segments that it thinks exists (_v3.cfs) and needs to open for
merging, can't actually be opened.

Were there any other exceptions before this one?  Is the error easily
reproduced?  If so, does it always hit the exception on that one file?

One thing to try is to call IndexWriter.setInfoStream(System.out)
which will cause the writer & deleter to print verbose details of
merges/deletions taking place.  That could give us a clue on the root
cause.

Mike

"Nott" <bharath.nott@gmail.com> wrote:
> Hi
> We run a batch job written on Java that reads a Oracle DB and creates a
> Lucene INDEX. We use Compass interface to do the index creation
> operations
> This is a scheduled job and this is a batch insert transaction job
> suddenly we are getting the following exception.
> I wnet through the forum and various FAQ's but could not find any thing
> conclusive for this
> Is some thing wrong in our setup or this is a bug ?
> 
> java.io.FileNotFoundException:
> /opt/ibm/wwwroot3/lucene/IRIS/IRISLIVE1.3.1/INDEX9/index/irismodel/_v3.cfs
> (No such file or directory)
>     at java.io.RandomAccessFile.open(Native Method)
>     at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>     at org.apache.lucene.store.FSIndexInput$Descriptor.<init>(
> FSDirectory.java:497)
>     at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:522)
>     at
>     org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:434)
>     at org.apache.lucene.index.CompoundFileReader.<init>(
> CompoundFileReader.java:63)
>     at
>     org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java
> :154)
>     at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:140)
>     at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:121)
>     at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java
> :1473)
>     at org.apache.lucene.index.IndexWriter.maybeMergeSegments(
> IndexWriter.java:1415)
>     at
>     org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java
> :1352)
>     at org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(
> IndexWriter.java:1344)
>     at
>     org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:697)
> 
> 
> 
> 
> at
> org.compass.core.lucene.engine.transaction.BatchInsertTransaction.doCreate(
> BatchInsertTransaction.java:208)
>     at
>     org.compass.core.lucene.engine.transaction.AbstractTransaction.create
> (AbstractTransaction.java:109)
>     at org.compass.core.lucene.engine.LuceneSearchEngine.create(
> LuceneSearchEngine.java:330)
>     at org.compass.core.impl.DefaultCompassSession.create(
> DefaultCompassSession.java:288)
>     at org.worldbank.index.iris.IRISIndexService.createFullIndex(
> IRISIndexService.java:79)
>     at org.worldbank.search.cron.IRISIndexCron.execute(IRISIndexCron.java
> :31)
>     at org.worldbank.search.cron.AllCrons.main(AllCrons.java:15)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 17:14:54 2007
Return-Path: <java-user-return-28612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60624 invoked from network); 12 Jun 2007 17:14:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 17:14:52 -0000
Received: (qmail 53363 invoked by uid 500); 12 Jun 2007 17:14:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53184 invoked by uid 500); 12 Jun 2007 17:14:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53162 invoked by uid 99); 12 Jun 2007 17:14:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 10:14:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 10:14:42 -0700
Received: by wx-out-0506.google.com with SMTP id t8so1638213wxc
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 10:14:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=orwRkCVMao8J+ITikCCoLVh5AlMpf9SqtLcntVkJ3J3Zizb+YdmKKdMgbeYW9Fx/GKXdFiXhbWyhYTBTN/D0nhKLJHYwpj7ntyiK4iefsH1jSlipuqPBT1UJ4jkqbB1hHPHOVk1nQikkb1bW6clt/z7t+hvu7WuncX5qSojt8Mc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=PBz5QQOn/hnbEMA+cKOcfl3b3cmEAugNqYizv0YHNhzfo+Lit04VYhqRT5YpAqj9IMLBdzngD2b96gG4pogrVjfTJ6YHaFZ+0zJdVJC04rWQMf0JfiwkCOyVG9JCl+Z5ovJuNuI8CwkhAeRWV/DZR38vJi+3W4HWeQUNlNMWubQ=
Received: by 10.90.95.11 with SMTP id s11mr6822001agb.1181668461112;
        Tue, 12 Jun 2007 10:14:21 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 45sm4945692wri.2007.06.12.10.14.20
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 12 Jun 2007 10:14:20 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BAY126-W15BA144932F1AADAAD6B44CA190@phx.gbl>
References: <BAY126-W15BA144932F1AADAAD6B44CA190@phx.gbl>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <4F488194-9D0F-4CCD-A3D1-564EE349C799@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: ERROR opening the Index - contact sysadmin!
Date: Tue, 12 Jun 2007 13:14:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It looks to me like your indexing did not take (although for some =20
reason my mail reader is munging your line breaks so it is hard to =20
tell for sure).  I would make sure you have successfully indexed and =20
then try to start the web app.  To verify you index was created, you =20
can use Luke (http://www.getopt.org/luke/)

I presume you have read http://lucene.apache.org/java/docs/=20
demo3.html, but maybe double checking it would be helpful.


On Jun 12, 2007, at 10:13 AM, Lucene Help wrote:

>
> I am using apache-tomcat 5.5.23 and lucene-2.1.0. At the command =20
> prompt, I typed, java org.apache.lucene.demo.IndexHTML - create -=20
> index C:\Program Files\Apache Software Foundation\Tomcat 5.5\webapps=20=

> \opt\lucene\index ..I then got the following:  Usage:  IndexHTML [-=20
> create] [-index <index>] <root_directory>I then copied and pasted =20
> the luceneweb.war from C:\lucene-2.1.0 to C:\Program Files\Apache =20
> Software Foundation\Tomcat 5.5\webappsI checked to make sure that =20
> the configuration.jsp in the directory C:\Program Files\Apache =20
> Software Foundation\Tomcat 5.5\webapps\luceneweb was set correctly, =20=

> which it was:  String indexLocation =3D "/opt/lucene/index";Then I =20
> went opened a Mozilla Firefox version 2.0.0.3 browser and typed in =20
> http://localhost:8080/luceneweb/I entered, "test" for my Search =20
> Criteria, and tried various numbers for Results Per Page, clicked =20
> on the Search button, and got the error I described below, which was:
> Welcome to the Lucene Template application. (This is the header)
>
>
>
>                 ERROR opening the Index - contact sysadmin!
>                 Error message: no segments* file found: files:
>
>
>
>
>
> 	Apache Lucene Template WebApp 1.0 Thank you in advance!> From: =20=

> gsingers@apache.org> Subject: Re: ERROR opening the Index - contact =20=

> sysadmin!> Date: Tue, 12 Jun 2007 09:40:55 -0400> To: java-=20
> user@lucene.apache.org> > Can you tell us the steps you went =20
> through to get to this page?> > Thanks,> Grant> > On Jun 12, 2007, =20
> at 3:10 AM, Lucene Help wrote:> > >> > Hello,I just downloaded =20
> Lucene and tried running the demo.  I seem  > > to be okay up until =20=

> I type in a query into the "Search Criteria"  > > page and click on =20=

> the "Search" button at the URL:  http://localhost: > > 8080/=20
> luceneweb/At this point I am at the URL http://localhost:8080/ > > =20
> luceneweb/results.jsp?query=3Dtest&maxresults=3D2 which gives me the  =
> =20
> > following:> > Welcome to the Lucene Template application. (This =20
> is the header)> >> >> >> >                 ERROR opening the Index =20
> - contact sysadmin!> >                 Error message: no segments* =20
> file found: files:> >> >> >> >> >> > 	Apache Lucene Template WebApp =20=

> 1.0 If someone could help me out  > > ASAP, that would be great.  =20
> Thanks!Lucene User> > =20
> _________________________________________________________________> =20
> > With Windows Live Hotmail, you can personalize your inbox with =20
> your  > > favorite color.> > www.windowslive-hotmail.com/learnmore/=20
> personalize.html?locale=3Den- > > =20
> us&ocid=3DTXT_TAGLM_HMWL_reten_addcolor_0607> > =20
> --------------------------> Grant Ingersoll> Center for Natural =20
> Language Processing> http://www.cnlp.org/tech/lucene.asp> > Read =20
> the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ > =20
> LuceneFAQ> > > > =20
> --------------------------------------------------------------------->=20=

>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> =20
> For additional commands, e-mail: java-user-help@lucene.apache.org>
> _________________________________________________________________
> Make every IM count. Download Windows Live Messenger and join the =20
> i=92m Initiative now. It=92s free.
> http://im.live.com/messenger/im/home/?source=3DTAGWL_June07



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 17:31:12 2007
Return-Path: <java-user-return-28613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65162 invoked from network); 12 Jun 2007 17:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 17:31:11 -0000
Received: (qmail 89113 invoked by uid 500); 12 Jun 2007 17:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89087 invoked by uid 500); 12 Jun 2007 17:31:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89076 invoked by uid 99); 12 Jun 2007 17:31:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 10:31:06 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=FORGED_HOTMAIL_RCVD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenehelp@hotmail.com designates 65.54.246.226 as permitted sender)
Received: from [65.54.246.226] (HELO bay0-omc3-s26.bay0.hotmail.com) (65.54.246.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 10:31:02 -0700
Received: from BAY126-W23 ([65.55.131.58]) by bay0-omc3-s26.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Tue, 12 Jun 2007 10:30:41 -0700
Message-ID: <BAY126-W2385D4C31CE94AEBB1BC12CA190@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_7ed82036-3568-4d37-bb06-0de338db5bc4_"
X-Originating-IP: [199.46.198.231]
From: Lucene Help <lucenehelp@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: ERROR opening the Index - contact sysadmin!
Date: Tue, 12 Jun 2007 13:30:41 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 12 Jun 2007 17:30:41.0717 (UTC) FILETIME=[66661E50:01C7AD17]
X-Virus-Checked: Checked by ClamAV on apache.org

--_7ed82036-3568-4d37-bb06-0de338db5bc4_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


I tried uninstalling lucene and installing it again.  This time, after sett=
ing the CLASSPATH C:\lucene-2.1.0\lucene-core-2.1.0.jar;C:\lucene-2.1.0\luc=
ene-demos-2.1.0.jar, I typed java org.apache.lucene.demo.IndexFiles C:\luce=
ne-2.1.0\src into the commandline prompt.  I got the following:  Cannot sav=
e index to 'index director, please delete it firstPlease let me know what I=
 am doing wrong.  Thank you.> From: grant.ingersoll@gmail.com> Subject: Re:=
 ERROR opening the Index - contact sysadmin!> Date: Tue, 12 Jun 2007 13:14:=
17 -0400> To: java-user@lucene.apache.org> > It looks to me like your index=
ing did not take (although for some  > reason my mail reader is munging you=
r line breaks so it is hard to  > tell for sure).  I would make sure you ha=
ve successfully indexed and  > then try to start the web app.  To verify yo=
u index was created, you  > can use Luke (http://www.getopt.org/luke/)> > I=
 presume you have read http://lucene.apache.org/java/docs/ > demo3.html, bu=
t maybe double checking it would be helpful.> > > On Jun 12, 2007, at 10:13=
 AM, Lucene Help wrote:> > >> > I am using apache-tomcat 5.5.23 and lucene-=
2.1.0. At the command  > > prompt, I typed, java org.apache.lucene.demo.Ind=
exHTML - create - > > index C:\Program Files\Apache Software Foundation\Tom=
cat 5.5\webapps > > \opt\lucene\index ..I then got the following:  Usage:  =
IndexHTML [- > > create] [-index <index>] <root_directory>I then copied and=
 pasted  > > the luceneweb.war from C:\lucene-2.1.0 to C:\Program Files\Apa=
che  > > Software Foundation\Tomcat 5.5\webappsI checked to make sure that =
 > > the configuration.jsp in the directory C:\Program Files\Apache  > > So=
ftware Foundation\Tomcat 5.5\webapps\luceneweb was set correctly,  > > whic=
h it was:  String indexLocation =3D "/opt/lucene/index";Then I  > > went op=
ened a Mozilla Firefox version 2.0.0.3 browser and typed in  > > http://loc=
alhost:8080/luceneweb/I entered, "test" for my Search  > > Criteria, and tr=
ied various numbers for Results Per Page, clicked  > > on the Search button=
, and got the error I described below, which was:> > Welcome to the Lucene =
Template application. (This is the header)> >> >> >> >                 ERRO=
R opening the Index - contact sysadmin!> >                 Error message: n=
o segments* file found: files:> >> >> >> >> >> > 	Apache Lucene Template We=
bApp 1.0 Thank you in advance!> From:  > > gsingers@apache.org> Subject: Re=
: ERROR opening the Index - contact  > > sysadmin!> Date: Tue, 12 Jun 2007 =
09:40:55 -0400> To: java- > > user@lucene.apache.org> > Can you tell us the=
 steps you went  > > through to get to this page?> > Thanks,> Grant> > On J=
un 12, 2007,  > > at 3:10 AM, Lucene Help wrote:> > >> > Hello,I just downl=
oaded  > > Lucene and tried running the demo.  I seem  > > to be okay up un=
til  > > I type in a query into the "Search Criteria"  > > page and click o=
n  > > the "Search" button at the URL:  http://localhost: > > 8080/ > > luc=
eneweb/At this point I am at the URL http://localhost:8080/ > >  > > lucene=
web/results.jsp?query=3Dtest&maxresults=3D2 which gives me the  >  > > > fo=
llowing:> > Welcome to the Lucene Template application. (This  > > is the h=
eader)> >> >> >> >                 ERROR opening the Index  > > - contact s=
ysadmin!> >                 Error message: no segments*  > > file found: fi=
les:> >> >> >> >> >> > 	Apache Lucene Template WebApp  > > 1.0 If someone c=
ould help me out  > > ASAP, that would be great.   > > Thanks!Lucene User> =
>  > > _________________________________________________________________>  =
> > > With Windows Live Hotmail, you can personalize your inbox with  > > y=
our  > > favorite color.> > www.windowslive-hotmail.com/learnmore/ > > pers=
onalize.html?locale=3Den- > >  > > us&ocid=3DTXT_TAGLM_HMWL_reten_addcolor_=
0607> >  > > --------------------------> Grant Ingersoll> Center for Natura=
l  > > Language Processing> http://www.cnlp.org/tech/lucene.asp> > Read  > =
> the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ >  > > Luce=
neFAQ> > > >  > > ---------------------------------------------------------=
------------> > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apa=
che.org>  > > For additional commands, e-mail: java-user-help@lucene.apache=
.org>> > _________________________________________________________________>=
 > Make every IM count. Download Windows Live Messenger and join the  > > i=
=92m Initiative now. It=92s free.> > http://im.live.com/messenger/im/home/?=
source=3DTAGWL_June07> > > > ----------------------------------------------=
-----------------------> To unsubscribe, e-mail: java-user-unsubscribe@luce=
ne.apache.org> For additional commands, e-mail: java-user-help@lucene.apach=
e.org>=20
_________________________________________________________________
Make every IM count. Download Windows Live Messenger and join the i=92m Ini=
tiative now. It=92s free.=A0=A0
http://im.live.com/messenger/im/home/?source=3DTAGWL_June07=

--_7ed82036-3568-4d37-bb06-0de338db5bc4_--

From java-user-return-28614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 17:47:47 2007
Return-Path: <java-user-return-28614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74212 invoked from network); 12 Jun 2007 17:47:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 17:47:45 -0000
Received: (qmail 28345 invoked by uid 500); 12 Jun 2007 17:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28296 invoked by uid 500); 12 Jun 2007 17:47:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28281 invoked by uid 99); 12 Jun 2007 17:47:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 10:47:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 10:47:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 264DE5B77F; Tue, 12 Jun 2007 10:47:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E2D437F404
	for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 10:47:13 -0700 (PDT)
Date: Tue, 12 Jun 2007 10:47:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: ERROR opening the Index - contact sysadmin!
In-Reply-To: <7cbc67ff0706120319x7676c7f0ha36599b77c47a525@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0706121046270.20592@hal.rescomp.berkeley.edu>
References: <BAY126-W2206665F348EC52E533558CA190@phx.gbl>
 <7cbc67ff0706120319x7676c7f0ha36599b77c47a525@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


If you'd like to ask a question, please start a new thread with a
descriptive subject, do not reply to an existing thread on another topic.

: Date: Tue, 12 Jun 2007 15:49:25 +0530
: From: Harini Raghavan <harini.raghavan@insideview.com>
: Subject: Re: ERROR opening the Index - contact sysadmin!
:
: Hi All,
:
: I am trying to create a lucene query to search for companies based on
: areacode. The phone no. is stored in the lucene index in the form of

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 18:44:49 2007
Return-Path: <java-user-return-28615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 499 invoked from network); 12 Jun 2007 18:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 18:44:47 -0000
Received: (qmail 49523 invoked by uid 500); 12 Jun 2007 18:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49491 invoked by uid 500); 12 Jun 2007 18:44:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49475 invoked by uid 99); 12 Jun 2007 18:44:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 11:44:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bharath.nott@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 11:44:38 -0700
Received: by wr-out-0506.google.com with SMTP id 36so1365550wra
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 11:44:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CY+m+UHkGc00NCLYstwxNoZQ1fu7ht8WiGZB/ZfrWp5O8ZN0UNINpff8jzB1INQEgmmCWMwHgT95Zn/MF2DI8LpNF08fI2qPpEmDMmPVkXlC6VZF1t7WkMmTwTW5lHqvsY51EgwqFs3IetWv9MPo3vVHjwBgax0gzTr7q0MOab0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G3+Ct+++32ZfWDeuJF8SkjsX23Sjchcol+nB7NC1shJ10cpJ9eS5Fv/FJQem6j6LRXkZFrNZnp6p1QeAbi5Pa+AYFMU0XK0esGnT8kDhh5WA3UQ4PRWZtcaTUmiTUFAz2DSl/7svVnc0GmSA99WwB9gIuIKMWSGdsDJnrkWZVw8=
Received: by 10.143.16.9 with SMTP id t9mr360629wfi.1181673857172;
        Tue, 12 Jun 2007 11:44:17 -0700 (PDT)
Received: by 10.143.31.6 with HTTP; Tue, 12 Jun 2007 11:44:17 -0700 (PDT)
Message-ID: <ede880620706121144r12435916yceb0a704899c696d@mail.gmail.com>
Date: Tue, 12 Jun 2007 14:44:17 -0400
From: Nott <bharath.nott@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFound Exception While Indexing
In-Reply-To: <1181664108.15364.1194770647@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7337_4493154.1181673857148"
References: <ede880620706120736v6c7a6982kaff6cac1b04c8083@mail.gmail.com>
	 <1181664108.15364.1194770647@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7337_4493154.1181673857148
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

HI
Thanks  for the update
This does not occur often. Happens occassionally. I'll further monitor and
let you know if I find some thing
If it happens will do the verbose output for IndexWriter.setInfoStream

Regards
Bharath



On 6/12/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> This looks like a rather serious error.  It seems like that file has
> somehow gone missing in your index.
>
> On adding a given document, Lucene has flushed its buffered documents
> and is attempting to merge segments together when it finds that one of
> the segments that it thinks exists (_v3.cfs) and needs to open for
> merging, can't actually be opened.
>
> Were there any other exceptions before this one?  Is the error easily
> reproduced?  If so, does it always hit the exception on that one file?
>
> One thing to try is to call IndexWriter.setInfoStream(System.out)
> which will cause the writer & deleter to print verbose details of
> merges/deletions taking place.  That could give us a clue on the root
> cause.
>
> Mike
>
> "Nott" <bharath.nott@gmail.com> wrote:
> > Hi
> > We run a batch job written on Java that reads a Oracle DB and creates a
> > Lucene INDEX. We use Compass interface to do the index creation
> > operations
> > This is a scheduled job and this is a batch insert transaction job
> > suddenly we are getting the following exception.
> > I wnet through the forum and various FAQ's but could not find any thing
> > conclusive for this
> > Is some thing wrong in our setup or this is a bug ?
> >
> > java.io.FileNotFoundException:
> >
> /opt/ibm/wwwroot3/lucene/IRIS/IRISLIVE1.3.1/INDEX9/index/irismodel/_v3.cfs
> > (No such file or directory)
> >     at java.io.RandomAccessFile.open(Native Method)
> >     at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> >     at org.apache.lucene.store.FSIndexInput$Descriptor.<init>(
> > FSDirectory.java:497)
> >     at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:522)
> >     at
> >     org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:434)
> >     at org.apache.lucene.index.CompoundFileReader.<init>(
> > CompoundFileReader.java:63)
> >     at
> >     org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java
> > :154)
> >     at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:140)
> >     at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:121)
> >     at org.apache.lucene.index.IndexWriter.mergeSegments(
> IndexWriter.java
> > :1473)
> >     at org.apache.lucene.index.IndexWriter.maybeMergeSegments(
> > IndexWriter.java:1415)
> >     at
> >     org.apache.lucene.index.IndexWriter.flushRamSegments(
> IndexWriter.java
> > :1352)
> >     at org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(
> > IndexWriter.java:1344)
> >     at
> >     org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
> :697)
> >
> >
> >
> >
> > at
> >
> org.compass.core.lucene.engine.transaction.BatchInsertTransaction.doCreate
> (
> > BatchInsertTransaction.java:208)
> >     at
> >
> org.compass.core.lucene.engine.transaction.AbstractTransaction.create
> > (AbstractTransaction.java:109)
> >     at org.compass.core.lucene.engine.LuceneSearchEngine.create(
> > LuceneSearchEngine.java:330)
> >     at org.compass.core.impl.DefaultCompassSession.create(
> > DefaultCompassSession.java:288)
> >     at org.worldbank.index.iris.IRISIndexService.createFullIndex(
> > IRISIndexService.java:79)
> >     at org.worldbank.search.cron.IRISIndexCron.execute(
> IRISIndexCron.java
> > :31)
> >     at org.worldbank.search.cron.AllCrons.main(AllCrons.java:15)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
~B

------=_Part_7337_4493154.1181673857148--

From java-user-return-28616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 18:45:37 2007
Return-Path: <java-user-return-28616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 835 invoked from network); 12 Jun 2007 18:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 18:45:36 -0000
Received: (qmail 52235 invoked by uid 500); 12 Jun 2007 18:45:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52180 invoked by uid 500); 12 Jun 2007 18:45:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52164 invoked by uid 99); 12 Jun 2007 18:45:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 11:45:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 11:45:28 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HyBMZ-0000Pf-Hy
	for java-user@lucene.apache.org; Tue, 12 Jun 2007 11:45:07 -0700
Message-ID: <11084504.post@talk.nabble.com>
Date: Tue, 12 Jun 2007 11:45:07 -0700 (PDT)
From: Frank Schima <fjs@foraker.com>
To: java-user@lucene.apache.org
Subject: Search with AND by default
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fjs@foraker.com
X-Virus-Checked: Checked by ClamAV on apache.org


I'm searching my index and if a user types multiple words (e.g. "two words")
in the search field, I want both of the search terms to appear in the
resulting hits, but it appears to be doing an OR by default. How can I get
an AND by default instead?

Here's how i create my Search:

QueryParser qp = new MultiFieldQueryParser( new String[] {"content",
"content_title"}, new StandardAnalyzer() );
Query query = qp.parse(strTerms);


Thanks!
Frank


-- 
View this message in context: http://www.nabble.com/Search-with-AND-by-default-tf3909294.html#a11084504
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 19:35:04 2007
Return-Path: <java-user-return-28617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28083 invoked from network); 12 Jun 2007 19:35:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 19:35:03 -0000
Received: (qmail 12276 invoked by uid 500); 12 Jun 2007 19:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12226 invoked by uid 500); 12 Jun 2007 19:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12215 invoked by uid 99); 12 Jun 2007 19:34:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 12:34:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 12:34:51 -0700
Received: by ug-out-1314.google.com with SMTP id m2so259770uge
        for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 12:34:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z/KXSaecLqCos6mTv29aNoNXXtmZbxchWH8RVVEemUT4OHxg5HYwXzG85mYLAqFLmX/xm65MBoXl6HveAnDZ2Yav/4Ut3Dk0c7q78LSvtiIgMO+gP+xaf+84hTcrYWXUSdIZd6nf3ZMGs5ox89Q3jqeNMJFKm4C5iUEWSrzO2WI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JgLrT37MJjfXppn1XY+eI8cZxvSk0Bg/tWNNN8NejWlmI2JVL0WMQSH32JeyUwmvDdtRukJaJ8k3kbWbiYyCC0Ed7Pfscub3g0kgOSRojgMXL8//DzgesNiW3KIQmt70F1nv8MeTb6HG3na/JuuKDiAy3i6mZOLLhRD5XTDldSU=
Received: by 10.82.127.14 with SMTP id z14mr13924435buc.1181676868996;
        Tue, 12 Jun 2007 12:34:28 -0700 (PDT)
Received: by 10.82.167.12 with HTTP; Tue, 12 Jun 2007 12:34:28 -0700 (PDT)
Message-ID: <359a92830706121234l7847eb8cm6fc6bd7e1df95d71@mail.gmail.com>
Date: Tue, 12 Jun 2007 15:34:28 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search with AND by default
In-Reply-To: <11084504.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6332_30276942.1181676868976"
References: <11084504.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6332_30276942.1181676868976
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

QueryParser.setDefaultOperator(QueryParser.Operator.AND).

Erick

On 6/12/07, Frank Schima <fjs@foraker.com> wrote:
>
>
> I'm searching my index and if a user types multiple words (e.g. "two
> words")
> in the search field, I want both of the search terms to appear in the
> resulting hits, but it appears to be doing an OR by default. How can I get
> an AND by default instead?
>
> Here's how i create my Search:
>
> QueryParser qp = new MultiFieldQueryParser( new String[] {"content",
> "content_title"}, new StandardAnalyzer() );
> Query query = qp.parse(strTerms);
>
>
> Thanks!
> Frank
>
>
> --
> View this message in context:
> http://www.nabble.com/Search-with-AND-by-default-tf3909294.html#a11084504
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6332_30276942.1181676868976--

From java-user-return-28618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 20:26:38 2007
Return-Path: <java-user-return-28618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52338 invoked from network); 12 Jun 2007 20:26:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 20:26:36 -0000
Received: (qmail 37879 invoked by uid 500); 12 Jun 2007 20:26:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37783 invoked by uid 500); 12 Jun 2007 20:26:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37749 invoked by uid 99); 12 Jun 2007 20:26:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:26:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.68.233] (HELO web36207.mail.mud.yahoo.com) (209.191.68.233)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Jun 2007 13:26:22 -0700
Received: (qmail 54284 invoked by uid 60001); 12 Jun 2007 20:26:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=5KWH7GasJDkkmXGprE+ek4Auh1NvGN7jaQhH0vSMCZ1Vwkdf/XZSsL8+MHj+ZFVNncgU0Y0DeTnG3AtYuhzJgdwlXci+zktW59Ws7COo3DPpCc/mVk3Mzg+/MDM0qljd1btu0z8blfjAYe9QrBfZsnI2ca/tknZOAzEOVlNC6ac=  ;
Message-ID: <20070612202601.54282.qmail@web36207.mail.mud.yahoo.com>
X-YMail-OSG: FfI4.oAVM1ld6yFKn3F1C_8PWSIFx2HfXqnZ_ei2VnkyidB02kkdLQxEKri3mlEBPw--
Received: from [129.55.200.20] by web36207.mail.mud.yahoo.com via HTTP; Tue, 12 Jun 2007 13:26:01 PDT
Date: Tue, 12 Jun 2007 13:26:01 -0700 (PDT)
From: Lindsey Hess <lindseyhess83@yahoo.com>
Subject: DBSight:  Using Java, not Velocity
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-393050073-1181679961=:53651"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-393050073-1181679961=:53651
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  Is anyone using DBSight to index a database?  If so, is there a way to just implement some Java code within my application to do a search, rather than using the Velocity templates in a browser?  I'd like to use the DBSight web-based admin tool to index my database, but then call my keyword searches through code...
   
  Thanks,
   
  Lindsey

 
---------------------------------
Don't pick lemons.
See all the new 2007 cars at Yahoo! Autos.
--0-393050073-1181679961=:53651--

From java-user-return-28619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 20:29:13 2007
Return-Path: <java-user-return-28619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54361 invoked from network); 12 Jun 2007 20:29:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 20:29:13 -0000
Received: (qmail 46108 invoked by uid 500); 12 Jun 2007 20:29:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46079 invoked by uid 500); 12 Jun 2007 20:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46068 invoked by uid 99); 12 Jun 2007 20:29:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:29:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:29:03 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HyCyo-0003SO-MP
	for java-user@lucene.apache.org; Tue, 12 Jun 2007 13:28:42 -0700
Message-ID: <11086380.post@talk.nabble.com>
Date: Tue, 12 Jun 2007 13:28:42 -0700 (PDT)
From: Frank Schima <fjs@foraker.com>
To: java-user@lucene.apache.org
Subject: Re: Search with AND by default
In-Reply-To: <359a92830706121234l7847eb8cm6fc6bd7e1df95d71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fjs@foraker.com
References: <11084504.post@talk.nabble.com> <359a92830706121234l7847eb8cm6fc6bd7e1df95d71@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Erick Erickson wrote:
> 
> QueryParser.setDefaultOperator(QueryParser.Operator.AND).
> 

That works. Thanks!


-- 
View this message in context: http://www.nabble.com/Search-with-AND-by-default-tf3909294.html#a11086380
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 20:33:53 2007
Return-Path: <java-user-return-28620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56863 invoked from network); 12 Jun 2007 20:33:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 20:33:51 -0000
Received: (qmail 58489 invoked by uid 500); 12 Jun 2007 20:33:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58460 invoked by uid 500); 12 Jun 2007 20:33:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58449 invoked by uid 99); 12 Jun 2007 20:33:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:33:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:33:43 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 41A495B77F; Tue, 12 Jun 2007 13:33:22 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 114B57F403
	for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 13:33:22 -0700 (PDT)
Date: Tue, 12 Jun 2007 13:33:22 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: DBSight:  Using Java, not Velocity
In-Reply-To: <20070612202601.54282.qmail@web36207.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0706121332540.28310@hal.rescomp.berkeley.edu>
References: <20070612202601.54282.qmail@web36207.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


This question would probably be better suited for hte dbsight forums...
http://www.dbsight.net/?q=forum

:   Is anyone using DBSight to index a database?  If so, is there a way to
: just implement some Java code within my application to do a search,


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 20:43:38 2007
Return-Path: <java-user-return-28621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62508 invoked from network); 12 Jun 2007 20:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 20:43:36 -0000
Received: (qmail 91987 invoked by uid 500); 12 Jun 2007 20:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91945 invoked by uid 500); 12 Jun 2007 20:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91934 invoked by uid 99); 12 Jun 2007 20:43:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:43:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:43:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B46905B77F; Tue, 12 Jun 2007 13:43:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8A93F7F403
	for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 13:43:08 -0700 (PDT)
Date: Tue, 12 Jun 2007 13:43:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: QueryParser stripping special char
In-Reply-To: <7cbc67ff0706120320t434e00e2pdca965ba9b93a6d6@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0706121340480.28310@hal.rescomp.berkeley.edu>
References: <7cbc67ff0706120320t434e00e2pdca965ba9b93a6d6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


1) the API you are using indicates you are using a fairly old version of
Lucene ... I strongly urge you to upgrade, as there have been many
improvements and bug fixes ... three have also beeen many methods
deprecated and removed, if you start using an old version now (with it's
old methods) it will be that much harder to upgrade later.

2) I don't believe QueyParser is striping any characters off, it is your
choice of Analyzer that is deciding to eliminate that character (i beielve
it's one of the tokenizing characters.  If you have a special field for
phone number you should consider using a special analyzer for that field
(via the PerFieldAnalyzerWrapper)

: '415-567-2323'. I need to create a query like +areaCode:"415-". But the
: QueryParser is stripping off the hyphen(-).


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 12 20:58:38 2007
Return-Path: <java-user-return-28622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71156 invoked from network); 12 Jun 2007 20:58:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2007 20:58:37 -0000
Received: (qmail 19479 invoked by uid 500); 12 Jun 2007 20:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19346 invoked by uid 500); 12 Jun 2007 20:58:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19282 invoked by uid 99); 12 Jun 2007 20:58:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:58:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MANY_EXCLAMATIONS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jun 2007 13:58:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 59CF05B774; Tue, 12 Jun 2007 13:58:02 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1DE257F403
	for <java-user@lucene.apache.org>; Tue, 12 Jun 2007 13:58:02 -0700 (PDT)
Date: Tue, 12 Jun 2007 13:58:02 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Why use RMI search very slow! when have 13 TermQuery! Return
 cost 7500 ms .
In-Reply-To: <28C622BA8A7A474589924466E6303BE00CC7D4@EXCH01.yikey.com>
Message-ID: <Pine.LNX.4.58.0706121353020.28310@hal.rescomp.berkeley.edu>
References: <28C622BA8A7A474589924466E6303BE00CC7D4@EXCH01.yikey.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org


: I am use RMI search two server date! When I use one TermQuery return
: 30ms (very good)! But when I use booleanQuery add tow termQuery return
: must 150 ms =A3=BA=A3=A8
:
: And three is 250 ms? My query have 13 TermQuery! Return cost 7500 ms .
:
: How can I do it quick! Use ICE(Internet Communications Engine) ZeroC ?

there are a lot of unknowns in your question...
  1) how quick is "quick" ?  ie: how fast do you need it to be?
  2) how many remote searchers do you have?
  3) how big are the indexes (in number of documents and number of terms) ?

also, what is hte point of this line of code...

   Query query2 =3D qp.parse(query.toString());

=2E..you don't seem to do anything with query2.

In general, what have you tried to investigate the source of your problem?
perhaps it's network lag? have you tried constructing your MultiSearcher
on local Searchables of the same indexes to see if the problem is with the
Remote searching or if it's just a more basic problem?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 08:32:46 2007
Return-Path: <java-user-return-28623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6547 invoked from network); 13 Jun 2007 08:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 08:32:45 -0000
Received: (qmail 14550 invoked by uid 500); 13 Jun 2007 08:32:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14366 invoked by uid 500); 13 Jun 2007 08:32:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14354 invoked by uid 99); 13 Jun 2007 08:32:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 01:32:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 01:32:36 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by bacchus.thegestalt.org with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1HyOGz-000JCY-Vr
	for java-user@lucene.apache.org; Wed, 13 Jun 2007 09:32:14 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l5D8W93r073809
	for java-user@lucene.apache.org; Wed, 13 Jun 2007 09:32:09 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 13 Jun 2007 09:32:08 +0100
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Performance of DbDirectory
Message-ID: <20070613083208.GC67558@thegestalt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

I recently had a thought to do with DbDirectory - specifically would it 
be possible to use something like Oracle's inbuilt replication to have 
mutiple Reader machine being able to read the index with automatic 
partitioning, redundancy and failover?

Also, what is performance like for DbDirectory compared to FSDirectory?

And would using DbDirectory and Oracle's backup tools allow for 
snapshots of the index to be taken without having to close the 
IndexWriter and take a physical copy of the index or will that still 
leave unmerged segment files around which will be in an inconsistent 
state at restart (unless Oracle takes an instantaneous snapshot of the 
whole index I suppose).

Is this a completely loopy idea or mildly sensible?

Thanks,
Simon







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 11:08:18 2007
Return-Path: <java-user-return-28624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68039 invoked from network); 13 Jun 2007 11:08:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 11:08:17 -0000
Received: (qmail 40969 invoked by uid 500); 13 Jun 2007 11:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40775 invoked by uid 500); 13 Jun 2007 11:08:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 94507 invoked by uid 99); 13 Jun 2007 07:36:31 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Content-Transfer-Encoding: 7bit
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.3959
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7AD8D.7E7FA0A9"
Subject: Using Lucene as compressed DB
Date: Wed, 13 Jun 2007 13:06:02 +0530
Message-ID: <6C11F971A507DF4B951EA4153880BDFA0BC6EB9B@inblrm999msx.in002.siemens.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using Lucene as compressed DB
thread-index: AcetjX53fI4atVr5R3ysYMaFvaMg+A==
From: "Sammpathkumar, C" <sammpathkumar.c@nsn.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 Jun 2007 07:36:02.0951 (UTC) FILETIME=[7E9C3970:01C7AD8D]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7AD8D.7E7FA0A9
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I am looking for a in memory Database which needs high speed search
capability as well as should compress the data stored.
Currently have only one table with two columns only in my design.

Can we trick Lucene to use it for the above purpose?

I am thinking something like:
- Create a initial index (stored in-memory) of empty database using
lucene.
- Route all MAD requests to lucene so that lucene updates its indices
but there is no real database exists.
- Make search request only on index created by lucene.

In my database schema, both the columns are marked as indexable fields.

My questions:
- Is this really possible with Lucene design?
- If possible what is the impact on performance creating the indexes and
searching in the index files only?
- Or do you feel this is absurd and I should look into a different tool
(suggestions?)

Thanks and Regards,
Sammpath



Disclaimer:
This e-mail may contain trade secrets or privileged, undisclosed or =
otherwise confidential information. If you have received this e-mail in =
error, you are hereby notified that any review, copying or distribution =
of it is strictly prohibited. Please inform us immediately and destroy =
the original transmittal. Thank you for your cooperation.

------_=_NextPart_001_01C7AD8D.7E7FA0A9--

From java-user-return-28625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 11:18:15 2007
Return-Path: <java-user-return-28625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69723 invoked from network); 13 Jun 2007 11:18:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 11:18:14 -0000
Received: (qmail 57669 invoked by uid 500); 13 Jun 2007 11:18:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57458 invoked by uid 500); 13 Jun 2007 11:18:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57447 invoked by uid 99); 13 Jun 2007 11:18:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 04:18:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ramana.jelda@ciao-group.com designates 194.97.158.185 as permitted sender)
Received: from [194.97.158.185] (HELO pigeon.ciao.com) (194.97.158.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 04:18:05 -0700
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id l5DBHesN064387
	for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 13:17:40 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200706131117.l5DBHesN064387@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: Using Lucene as compressed DB
Date: Wed, 13 Jun 2007 13:17:35 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <6C11F971A507DF4B951EA4153880BDFA0BC6EB9B@inblrm999msx.in002.siemens.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcetjX53fI4atVr5R3ysYMaFvaMg+AAHnSzw
X-Scanned-By: MIMEDefang 2.61 on 194.97.158.185
X-Virus-Checked: Checked by ClamAV on apache.org

Its not a trick. And this is what lucene meant for.


Jelda

> -----Original Message-----
> From: Sammpathkumar, C [mailto:sammpathkumar.c@nsn.com] 
> Sent: Wednesday, June 13, 2007 9:36 AM
> To: java-user@lucene.apache.org
> Subject: Using Lucene as compressed DB
> 
> Hi,
> 
> I am looking for a in memory Database which needs high speed 
> search capability as well as should compress the data stored.
> Currently have only one table with two columns only in my design.
> 
> Can we trick Lucene to use it for the above purpose?
> 
> I am thinking something like:
> - Create a initial index (stored in-memory) of empty database 
> using lucene.
> - Route all MAD requests to lucene so that lucene updates its 
> indices but there is no real database exists.
> - Make search request only on index created by lucene.
> 
> In my database schema, both the columns are marked as 
> indexable fields.
> 
> My questions:
> - Is this really possible with Lucene design?
> - If possible what is the impact on performance creating the 
> indexes and searching in the index files only?
> - Or do you feel this is absurd and I should look into a 
> different tool
> (suggestions?)
> 
> Thanks and Regards,
> Sammpath
> 
> 
> 
> Disclaimer:
> This e-mail may contain trade secrets or privileged, 
> undisclosed or otherwise confidential information. If you 
> have received this e-mail in error, you are hereby notified 
> that any review, copying or distribution of it is strictly 
> prohibited. Please inform us immediately and destroy the 
> original transmittal. Thank you for your cooperation.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 11:58:49 2007
Return-Path: <java-user-return-28626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80040 invoked from network); 13 Jun 2007 11:58:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 11:58:48 -0000
Received: (qmail 26924 invoked by uid 500); 13 Jun 2007 11:58:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26880 invoked by uid 500); 13 Jun 2007 11:58:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26866 invoked by uid 99); 13 Jun 2007 11:58:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 04:58:41 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=FORGED_HOTMAIL_RCVD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenehelp@hotmail.com designates 65.54.246.233 as permitted sender)
Received: from [65.54.246.233] (HELO bay0-omc3-s33.bay0.hotmail.com) (65.54.246.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 04:58:36 -0700
Received: from BAY126-W42 ([65.55.131.77]) by bay0-omc3-s33.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 13 Jun 2007 04:58:16 -0700
Message-ID: <BAY126-W42EF7AE161DB74FA2B8B54CA180@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_1086f59a-5977-4f72-afae-ac9e4559fa86_"
X-Originating-IP: [199.46.198.232]
From: Lucene Help <lucenehelp@hotmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Cannot save index to 'index' directory, please delete it first
Date: Wed, 13 Jun 2007 07:58:16 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 13 Jun 2007 11:58:16.0244 (UTC) FILETIME=[20623740:01C7ADB2]
X-Virus-Checked: Checked by ClamAV on apache.org

--_1086f59a-5977-4f72-afae-ac9e4559fa86_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hello,I tried uninstalling and installing Lucene 2.1.0 and Tomcat 5.5.  I f=
ollowed the Lucene demo instructions and set the CLASSPATH as follows:  .;C=
:\lucene-2.1.0\lucene-core-2.1.0.jar;C:\lucene-2.1.0\lucene-demos-2.1.0.jar=
  I tehn typed java org.apache.lucene.demo.IndexFiles C:\lucene-2.1.0\src i=
nto the commandline prompt and received the following:  Cannot save index t=
o 'index' directory, please delete it first.  Thank you in advance for your=
 help.  -Lucene User
               =20
_________________________________________________________________
Play free games, earn tickets, get cool prizes! Join Live Search Club.=A0
http://club.live.com/home.aspx?icid=3DCLUB_wlmailtextlink=

--_1086f59a-5977-4f72-afae-ac9e4559fa86_--

From java-user-return-28627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 12:41:44 2007
Return-Path: <java-user-return-28627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93363 invoked from network); 13 Jun 2007 12:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 12:41:44 -0000
Received: (qmail 25795 invoked by uid 500); 13 Jun 2007 12:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25705 invoked by uid 500); 13 Jun 2007 12:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25694 invoked by uid 99); 13 Jun 2007 12:41:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 05:41:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a16.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 05:41:34 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.dreamhost.com (Postfix) with ESMTP id 8F2F87CE03
	for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 05:41:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BAY126-W2385D4C31CE94AEBB1BC12CA190@phx.gbl>
References: <BAY126-W2385D4C31CE94AEBB1BC12CA190@phx.gbl>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <7AB6E434-33CC-4E36-90B1-15DC03BAD7EB@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: ERROR opening the Index - contact sysadmin!
Date: Wed, 13 Jun 2007 08:41:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Here's what I did:

1. Downloaded and unpacked 2.1.0
2. >cd lucene-2.1.0
3. >java -cp lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar =20
org.apache.lucene.demo.IndexFiles <PATH TO MY DOWNLOAD>/lucene-2.1.0/=20
docs
     Step 3 takes a little bit to run.  You can point this at any =20
directory you want to index
4. >ls
BUILD.txt               NOTICE.txt              =20
contrib/                lucene-core-2.1.0.jar   src/
CHANGES.txt             README.txt              =20
docs/                   lucene-demos-2.1.0.jar
LICENSE.txt             build.xml               =20
index/                  luceneweb.war

   #Notice the "index" directory that gets added

5. >java -cp lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar =20
org.apache.lucene.demo.SearchFiles
Query: vector
Searching for: vector
35 total matching documents
1. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/util/BitVector.html
2. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/document/Field.TermVector.html
3. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/document/class-use/Field.TermVector.html
4. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/index/TermFreqVector.html
5. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/document/Fieldable.html
6. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/index/MultiReader.html
7. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/index/FilterIndexReader.html
8. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/index/ParallelReader.html
9. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/document/AbstractField.html
10. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/=20
lucene/benchmark/stats/TestData.html
more (y/n) ?

Now, I did this all on OS X.  Perhaps you are having permission =20
problems that it can't create the index directory?

Also, can you check your email settings, for some reason line breaks =20
are getting stripped and it is very hard to make out your commands.

HTH,
Grant




On Jun 12, 2007, at 1:30 PM, Lucene Help wrote:

>
> I tried uninstalling lucene and installing it again.  This time, =20
> after setting the CLASSPATH C:\lucene-2.1.0\lucene-core-2.1.0.jar;C:=20=

> \lucene-2.1.0\lucene-demos-2.1.0.jar, I typed java =20
> org.apache.lucene.demo.IndexFiles C:\lucene-2.1.0\src into the =20
> commandline prompt.  I got the following:  Cannot save index to =20
> 'index director, please delete it firstPlease let me know what I am =20=

> doing wrong.  Thank you.> From: grant.ingersoll@gmail.com> Subject: =20=

> Re: ERROR opening the Index - contact sysadmin!> Date: Tue, 12 Jun =20
> 2007 13:14:17 -0400> To: java-user@lucene.apache.org> > It looks to =20=

> me like your indexing did not take (although for some  > reason my =20
> mail reader is munging your line breaks so it is hard to  > tell =20
> for sure).  I would make sure you have successfully indexed and  > =20
> then try to start the web app.  To verify you index was created, =20
> you  > can use Luke (http://www.getopt.org/luke/)> > I presume you =20
> have read http://lucene.apache.org/java/docs/ > demo3.html, but =20
> maybe double checking it would be helpful.> > > On Jun 12, 2007, at =20=

> 10:13 AM, Lucene Help wrote:> > >> > I am using apache-tomcat =20
> 5.5.23 and lucene-2.1.0. At the command  > > prompt, I typed, java =20
> org.apache.lucene.demo.IndexHTML - create - > > index C:\Program =20
> Files\Apache Software Foundation\Tomcat 5.5\webapps > > \opt\lucene=20
> \index ..I then got the following:  Usage:  IndexHTML [- > > =20
> create] [-index <index>] <root_directory>I then copied and pasted  =20
> > > the luceneweb.war from C:\lucene-2.1.0 to C:\Program Files=20
> \Apache  > > Software Foundation\Tomcat 5.5\webappsI checked to =20
> make sure that  > > the configuration.jsp in the directory C:=20
> \Program Files\Apache  > > Software Foundation\Tomcat 5.5\webapps=20
> \luceneweb was set correctly,  > > which it was:  String =20
> indexLocation =3D "/opt/lucene/index";Then I  > > went opened a =20
> Mozilla Firefox version 2.0.0.3 browser and typed in  > > http://=20
> localhost:8080/luceneweb/I entered, "test" for my Search  > > =20
> Criteria, and tried various numbers for Results Per Page, clicked  =20
> > > on the Search button, and got the error I described below, =20
> which was:> > Welcome to the Lucene Template application. (This is =20
> the header)> >> >> >> >                 ERROR opening the Index - =20
> contact sysadmin!> >                 Error message: no segments* =20
> file found: files:> >> >> >> >> >> > 	Apache Lucene Template WebApp =20=

> 1.0 Thank you in advance!> From:  > > gsingers@apache.org> Subject: =20=

> Re: ERROR opening the Index - contact  > > sysadmin!> Date: Tue, 12 =20=

> Jun 2007 09:40:55 -0400> To: java- > > user@lucene.apache.org> > =20
> Can you tell us the steps you went  > > through to get to this page?=20=

> > > Thanks,> Grant> > On Jun 12, 2007,  > > at 3:10 AM, Lucene Help =20=

> wrote:> > >> > Hello,I just downloaded  > > Lucene and tried =20
> running the demo.  I seem  > > to be okay up until  > > I type in a =20=

> query into the "Search Criteria"  > > page and click on  > > the =20
> "Search" button at the URL:  http://localhost: > > 8080/ > > =20
> luceneweb/At this point I am at the URL http://localhost:8080/ > >  =20=

> > > luceneweb/results.jsp?query=3Dtest&maxresults=3D2 which gives me =20=

> the  >  > > > following:> > Welcome to the Lucene Template =20
> application. (This  > > is the header)> >> >> >> >                 =20
> ERROR opening the Index  > > - contact sysadmin!> >                 =20=

> Error message: no segments*  > > file found: files:> >> >> >> >> >> =20=

> > 	Apache Lucene Template WebApp  > > 1.0 If someone could help me =20=

> out  > > ASAP, that would be great.   > > Thanks!Lucene User> >  > =20
> > =20
> _________________________________________________________________>  =20=

> > > > With Windows Live Hotmail, you can personalize your inbox =20
> with  > > your  > > favorite color.> > www.windowslive-hotmail.com/=20
> learnmore/ > > personalize.html?locale=3Den- > >  > > =20
> us&ocid=3DTXT_TAGLM_HMWL_reten_addcolor_0607> >  > > =20
> --------------------------> Grant Ingersoll> Center for Natural  > =20
> > Language Processing> http://www.cnlp.org/tech/lucene.asp> > Read  =20=

> > > the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ =20
> >  > > LuceneFAQ> > > >  > > =20
> --------------------------------------------------------------------->=20=

>  > >  To unsubscribe, e-mail: java-user-=20
> unsubscribe@lucene.apache.org>  > > For additional commands, e-=20
> mail: java-user-help@lucene.apache.org>> > =20
> _________________________________________________________________> =20
> > Make every IM count. Download Windows Live Messenger and join =20
> the  > > i=92m Initiative now. It=92s free.> > http://im.live.com/=20
> messenger/im/home/?source=3DTAGWL_June07> > > > =20
> --------------------------------------------------------------------->=20=

>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> =20
> For additional commands, e-mail: java-user-help@lucene.apache.org>
> _________________________________________________________________
> Make every IM count. Download Windows Live Messenger and join the =20
> i=92m Initiative now. It=92s free.
> http://im.live.com/messenger/im/home/?source=3DTAGWL_June07

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/=20
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 13:07:43 2007
Return-Path: <java-user-return-28628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8543 invoked from network); 13 Jun 2007 13:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 13:07:41 -0000
Received: (qmail 84269 invoked by uid 500); 13 Jun 2007 13:07:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84236 invoked by uid 500); 13 Jun 2007 13:07:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84217 invoked by uid 99); 13 Jun 2007 13:07:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 06:07:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.210.244.93] (HELO smtpi2.usherbrooke.ca) (132.210.244.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 06:07:27 -0700
Received: from [192.168.1.13] ([132.210.142.98])
	by smtpi2.usherbrooke.ca (8.13.1/8.13.1) with ESMTP id l5DD6s4Y013585
	for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 09:06:55 -0400
Message-ID: <466FEBEE.4020204@usherbrooke.ca>
Date: Wed, 13 Jun 2007 09:06:54 -0400
From: Patrick Turcotte <patrick.turcotte@usherbrooke.ca>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to implement AJAX search~Lucene Search part?
References: <6e3ae6310706071831s6e2b239as77bcbbc39e47548f@mail.gmail.com> <4669521F.7050101@usherbrooke.ca> <30B18185-E382-4DF7-A0A1-FA3AD811F7EE@garambrogne.net>
In-Reply-To: <30B18185-E382-4DF7-A0A1-FA3AD811F7EE@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-UdeS-MailScanner-Information: Veuillez consulter le http://www.usherbrooke.ca/vers/virus-courriel
X-UdeS-MailScanner: Aucun code suspect =?ISO-8859-1?Q?d=E9tect=E9?=
X-MailScanner-SpamCheck: n'est pas un polluriel, SpamAssassin (score=-2.499,
	requis 5, BAYES_00 -2.60, RDNS_NONE 0.10)
X-UdeS-MailScanner-From: patrick.turcotte@usherbrooke.ca
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mathieu!

Didn't realise this was avalaible before you mentioned it.

Did comparative tests, and it is as fast or much faster, thanks to
caching, depending on the length of the prefix. Hey, it even works with
wildcard within the "search string".

Thanks again! Isn't Lucene wonderful!

Patrick

Mathieu Lecarme wrote:
> If you do that, you enumerate every terms!!!
> If you use a alphabeticaly sorted collection, you can stop, when match
> stop, but, you have to test every terms before matching.
> Lucene gives you tools to match begining of a term, just use it!!
>
> M.
> Le 8 juin 07 =E0 14:57, Patrick Turcotte a =E9crit :
>
>> Hi,
>>
>> What we did was this:
>>
>> 1) When you application starts, it scans the index for terms values an=
d
>> store them in a map or something.
>>
>> 2) When you receive "ajax requests", you compare with the map data and=

>> return the relevant part. Works quite fast for us, without round trips=

>> to Lucene.
>>
>> Patrick



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 14:06:48 2007
Return-Path: <java-user-return-28629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53066 invoked from network); 13 Jun 2007 14:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 14:06:47 -0000
Received: (qmail 73359 invoked by uid 500); 13 Jun 2007 14:06:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73316 invoked by uid 500); 13 Jun 2007 14:06:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73300 invoked by uid 99); 13 Jun 2007 14:06:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:06:42 -0700
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=FORGED_HOTMAIL_RCVD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenehelp@hotmail.com designates 65.54.246.222 as permitted sender)
Received: from [65.54.246.222] (HELO bay0-omc3-s22.bay0.hotmail.com) (65.54.246.222)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:06:38 -0700
Received: from BAY126-W23 ([65.55.131.58]) by bay0-omc3-s22.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 13 Jun 2007 07:06:17 -0700
Message-ID: <BAY126-W234ED95FBE3B4D0D565F0ECA180@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_29304b61-f79a-4794-b5a3-4b79af24a5b0_"
X-Originating-IP: [199.46.198.230]
From: Lucene Help <lucenehelp@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: ERROR opening the Index - contact sysadmin!
Date: Wed, 13 Jun 2007 10:06:17 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 13 Jun 2007 14:06:17.0680 (UTC) FILETIME=[02E05500:01C7ADC4]
X-Virus-Checked: Checked by ClamAV on apache.org

--_29304b61-f79a-4794-b5a3-4b79af24a5b0_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

I tried doing what you did.  At step 3, I got the following:  Exception in =
thread "main" java.lang.NoClassDefFoundError: org/apache/lucene/demo/IndexF=
iles  Thank you in advance for your help.  - Lucene User> From: gsingers@ap=
ache.org> Subject: Re: ERROR opening the Index - contact sysadmin!> Date: W=
ed, 13 Jun 2007 08:41:08 -0400> To: java-user@lucene.apache.org> > Here's w=
hat I did:> > 1. Downloaded and unpacked 2.1.0> 2. >cd lucene-2.1.0> 3. >ja=
va -cp lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar  > org.apache.lucene.de=
mo.IndexFiles <PATH TO MY DOWNLOAD>/lucene-2.1.0/ > docs>      Step 3 takes=
 a little bit to run.  You can point this at any  > directory you want to i=
ndex> 4. >ls> BUILD.txt               NOTICE.txt               > contrib/  =
              lucene-core-2.1.0.jar   src/> CHANGES.txt             README.=
txt               > docs/                   lucene-demos-2.1.0.jar> LICENSE=
.txt             build.xml                > index/                  lucenew=
eb.war> >    #Notice the "index" directory that gets added> > 5. >java -cp =
lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar  > org.apache.lucene.demo.Sear=
chFiles> Query: vector> Searching for: vector> 35 total matching documents>=
 1. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ > luc=
ene/util/BitVector.html> 2. /Users/grantingersoll/downloads/lucene-2.1.0/do=
cs/api/org/apache/ > lucene/document/Field.TermVector.html> 3. /Users/grant=
ingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ > lucene/document/cla=
ss-use/Field.TermVector.html> 4. /Users/grantingersoll/downloads/lucene-2.1=
.0/docs/api/org/apache/ > lucene/index/TermFreqVector.html> 5. /Users/grant=
ingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ > lucene/document/Fie=
ldable.html> 6. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/a=
pache/ > lucene/index/MultiReader.html> 7. /Users/grantingersoll/downloads/=
lucene-2.1.0/docs/api/org/apache/ > lucene/index/FilterIndexReader.html> 8.=
 /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ > lucene=
/index/ParallelReader.html> 9. /Users/grantingersoll/downloads/lucene-2.1.0=
/docs/api/org/apache/ > lucene/document/AbstractField.html> 10. /Users/gran=
tingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ > lucene/benchmark/s=
tats/TestData.html> more (y/n) ?> > Now, I did this all on OS X.  Perhaps y=
ou are having permission  > problems that it can't create the index directo=
ry?> > Also, can you check your email settings, for some reason line breaks=
  > are getting stripped and it is very hard to make out your commands.> > =
HTH,> Grant> > > > > On Jun 12, 2007, at 1:30 PM, Lucene Help wrote:> > >> =
> I tried uninstalling lucene and installing it again.  This time,  > > aft=
er setting the CLASSPATH C:\lucene-2.1.0\lucene-core-2.1.0.jar;C: > > \luce=
ne-2.1.0\lucene-demos-2.1.0.jar, I typed java  > > org.apache.lucene.demo.I=
ndexFiles C:\lucene-2.1.0\src into the  > > commandline prompt.  I got the =
following:  Cannot save index to  > > 'index director, please delete it fir=
stPlease let me know what I am  > > doing wrong.  Thank you.> From: grant.i=
ngersoll@gmail.com> Subject:  > > Re: ERROR opening the Index - contact sys=
admin!> Date: Tue, 12 Jun  > > 2007 13:14:17 -0400> To: java-user@lucene.ap=
ache.org> > It looks to  > > me like your indexing did not take (although f=
or some  > reason my  > > mail reader is munging your line breaks so it is =
hard to  > tell  > > for sure).  I would make sure you have successfully in=
dexed and  >  > > then try to start the web app.  To verify you index was c=
reated,  > > you  > can use Luke (http://www.getopt.org/luke/)> > I presume=
 you  > > have read http://lucene.apache.org/java/docs/ > demo3.html, but  =
> > maybe double checking it would be helpful.> > > On Jun 12, 2007, at  > =
> 10:13 AM, Lucene Help wrote:> > >> > I am using apache-tomcat  > > 5.5.23=
 and lucene-2.1.0. At the command  > > prompt, I typed, java  > > org.apach=
e.lucene.demo.IndexHTML - create - > > index C:\Program  > > Files\Apache S=
oftware Foundation\Tomcat 5.5\webapps > > \opt\lucene > > \index ..I then g=
ot the following:  Usage:  IndexHTML [- > >  > > create] [-index <index>] <=
root_directory>I then copied and pasted   > > > > the luceneweb.war from C:=
\lucene-2.1.0 to C:\Program Files > > \Apache  > > Software Foundation\Tomc=
at 5.5\webappsI checked to  > > make sure that  > > the configuration.jsp i=
n the directory C: > > \Program Files\Apache  > > Software Foundation\Tomca=
t 5.5\webapps > > \luceneweb was set correctly,  > > which it was:  String =
 > > indexLocation =3D "/opt/lucene/index";Then I  > > went opened a  > > M=
ozilla Firefox version 2.0.0.3 browser and typed in  > > http:// > > localh=
ost:8080/luceneweb/I entered, "test" for my Search  > >  > > Criteria, and =
tried various numbers for Results Per Page, clicked   > > > > on the Search=
 button, and got the error I described below,  > > which was:> > Welcome to=
 the Lucene Template application. (This is  > > the header)> >> >> >> >    =
             ERROR opening the Index -  > > contact sysadmin!> >           =
      Error message: no segments*  > > file found: files:> >> >> >> >> >> >=
 	Apache Lucene Template WebApp  > > 1.0 Thank you in advance!> From:  > > =
gsingers@apache.org> Subject:  > > Re: ERROR opening the Index - contact  >=
 > sysadmin!> Date: Tue, 12  > > Jun 2007 09:40:55 -0400> To: java- > > use=
r@lucene.apache.org> >  > > Can you tell us the steps you went  > > through=
 to get to this page? > > > > Thanks,> Grant> > On Jun 12, 2007,  > > at 3:=
10 AM, Lucene Help  > > wrote:> > >> > Hello,I just downloaded  > > Lucene =
and tried  > > running the demo.  I seem  > > to be okay up until  > > I ty=
pe in a  > > query into the "Search Criteria"  > > page and click on  > > t=
he  > > "Search" button at the URL:  http://localhost: > > 8080/ > >  > > l=
uceneweb/At this point I am at the URL http://localhost:8080/ > >   > > > >=
 luceneweb/results.jsp?query=3Dtest&maxresults=3D2 which gives me  > > the =
 >  > > > following:> > Welcome to the Lucene Template  > > application. (T=
his  > > is the header)> >> >> >> >                  > > ERROR opening the =
Index  > > - contact sysadmin!> >                  > > Error message: no se=
gments*  > > file found: files:> >> >> >> >> >>  > > > 	Apache Lucene Templ=
ate WebApp  > > 1.0 If someone could help me  > > out  > > ASAP, that would=
 be great.   > > Thanks!Lucene User> >  >  > > >  > > _____________________=
____________________________________________>   > > > > > With Windows Live=
 Hotmail, you can personalize your inbox  > > with  > > your  > > favorite =
color.> > www.windowslive-hotmail.com/ > > learnmore/ > > personalize.html?=
locale=3Den- > >  > >  > > us&ocid=3DTXT_TAGLM_HMWL_reten_addcolor_0607> > =
 > >  > > --------------------------> Grant Ingersoll> Center for Natural  =
>  > > > Language Processing> http://www.cnlp.org/tech/lucene.asp> > Read  =
 > > > > the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/  > >=
 >  > > LuceneFAQ> > > >  > >  > > ----------------------------------------=
-----------------------------> > >  > >  To unsubscribe, e-mail: java-user-=
 > > unsubscribe@lucene.apache.org>  > > For additional commands, e- > > ma=
il: java-user-help@lucene.apache.org>> >  > > _____________________________=
____________________________________>  > > > Make every IM count. Download =
Windows Live Messenger and join  > > the  > > i=92m Initiative now. It=92s =
free.> > http://im.live.com/ > > messenger/im/home/?source=3DTAGWL_June07> =
> > >  > > ----------------------------------------------------------------=
-----> > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
>  > > For additional commands, e-mail: java-user-help@lucene.apache.org>> =
> _________________________________________________________________> > Make=
 every IM count. Download Windows Live Messenger and join the  > > i=92m In=
itiative now. It=92s free.> > http://im.live.com/messenger/im/home/?source=
=3DTAGWL_June07> > --------------------------> Grant Ingersoll> Center for =
Natural Language Processing> http://www.cnlp.org/tech/lucene.asp> > Read th=
e Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ > LuceneFAQ> > =
> > ---------------------------------------------------------------------> =
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For additi=
onal commands, e-mail: java-user-help@lucene.apache.org>=20
_________________________________________________________________
Live Earth is coming.=A0 Learn more about the hottest summer event - only o=
n MSN.
http://liveearth.msn.com?source=3Dmsntaglineliveearthwlm=

--_29304b61-f79a-4794-b5a3-4b79af24a5b0_--

From java-user-return-28630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 14:28:23 2007
Return-Path: <java-user-return-28630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60371 invoked from network); 13 Jun 2007 14:28:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 14:28:22 -0000
Received: (qmail 19898 invoked by uid 500); 13 Jun 2007 14:28:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19863 invoked by uid 500); 13 Jun 2007 14:28:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19852 invoked by uid 99); 13 Jun 2007 14:28:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:28:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of itsadok@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:28:13 -0700
Received: by wx-out-0506.google.com with SMTP id t8so169353wxc
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 07:27:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XLcDTFfsXcI42ghCCddqytBqpETtr3RQVuK88nO+lR5zpWEh+cWur9nad+c/5jUItkGWVp6gEQtPHtkn1e7vG9DIjQnAzEtBmWpuHkwN2cFhuv9FO/zSMW5LZ0BDp8r+ziUtiuRX6gJhCZhgNKelDWmR3RzoHQSrKaPSxUBBYdo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kDuPL6xNtI9LA5QNcc1nJbXjxC9CqEOSlpqAWErjsdmk+CudlTsHYu2v5CjKvNo+m+XYyN5sOpzf6ny3zE9P2r+XhYpRSeYxtVMk/aYyR4JLhBoSizUTIHGl32Wey9PKLAo3+Xj7t+F0qJslBFfDPAP2RSjkBblRrbZhm2yOR4o=
Received: by 10.90.118.12 with SMTP id q12mr367654agc.1181744869963;
        Wed, 13 Jun 2007 07:27:49 -0700 (PDT)
Received: by 10.90.87.11 with HTTP; Wed, 13 Jun 2007 07:27:49 -0700 (PDT)
Message-ID: <b4615b180706130727w552ec492t93ab2681f72239da@mail.gmail.com>
Date: Wed, 13 Jun 2007 17:27:49 +0300
From: "Israel Tsadok" <itsadok@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher, Hits and createWeight
In-Reply-To: <b4615b180705290245o5be6285do56dbb208874d59f7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19316_9593369.1181744869941"
References: <b4615b180705290245o5be6285do56dbb208874d59f7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19316_9593369.1181744869941
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In case anyone was interested, making the change I described surfaced a bug
that causes the custom similarity to not work.
There is a patch:
https://issues.apache.org/jira/browse/LUCENE-789


On 5/29/07, Israel Tsadok <itsadok@gmail.com> wrote:
>
> Hi,
> I am developing a distributed index, using MultiSearcher and
> RemoteSearcher. When investigating some performance issues, I noticed that
> there is a lot of back-and-forth traffic between the servers during the
> weight calculation.
> Although MultiSearcher has a method called createWeight that minimizes the
> calls to the sub-searchers, this method never actually gets called when I
> call search(query).
>
> From what I can tell, this is fixable by changing in Hits.java the line:
> weight = q.weight(s);
> to:
> weight = s.createWeight(q);
>
> I made that change, and it seems to work OK, but I don't know enough about
> Lucene to be sure that it's safe.
> Have I got something wrong? Is it safe to make that change?
>
> Thanks,
> Israel Tsadok

------=_Part_19316_9593369.1181744869941--

From java-user-return-28631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 14:49:23 2007
Return-Path: <java-user-return-28631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70281 invoked from network); 13 Jun 2007 14:49:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 14:49:22 -0000
Received: (qmail 72869 invoked by uid 500); 13 Jun 2007 14:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72836 invoked by uid 500); 13 Jun 2007 14:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72825 invoked by uid 99); 13 Jun 2007 14:49:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:49:17 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:49:13 -0700
Received: by mu-out-0910.google.com with SMTP id g7so231883muf
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 07:48:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qMrjR4Od7xP3pRXTW9BfXvGUj069hph2BLWunTVZJARJXzpd1UVc5q++rLaFuvUhASc8Q2KfvrpOIL+6GeG90CCkkOq94wFnO+Su0fMhd6Ag7LaN3RHzovOxOzrwVl0oO3madT+CXfcKBhcSe3TKBM/g+X4ktRYhWJLFo8lzoC4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IiBJAqTYIW5oBIMz05/2SLlqKFlh8YSkJLJKbXsiRTw1pKVjpxHP1+WnuojWI0h0iwK6kmxSw6AGQQbsJS91CvHCS54q6J+FRVVkd8nV5ECiplA60A4jLTbqhLnqfw2JUnm+Jtizwrb+mu/DOBVP0HGmiiJMWYcNm2Zk5xHwjG4=
Received: by 10.82.175.17 with SMTP id x17mr1279203bue.1181746131127;
        Wed, 13 Jun 2007 07:48:51 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 13 Jun 2007 07:48:51 -0700 (PDT)
Message-ID: <359a92830706130748i518114fbk69bb5a0f991214ec@mail.gmail.com>
Date: Wed, 13 Jun 2007 10:48:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene as compressed DB
In-Reply-To: <6C11F971A507DF4B951EA4153880BDFA0BC6EB9B@inblrm999msx.in002.siemens.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16315_14813709.1181746131095"
References: <AcetjX53fI4atVr5R3ysYMaFvaMg+A==>
	 <6C11F971A507DF4B951EA4153880BDFA0BC6EB9B@inblrm999msx.in002.siemens.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16315_14813709.1181746131095
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Be very clear what you want Lucene to do. What your database
schema is and whether the columns are indexable is totally
irrelevant to your Lucene index. What is relevant is how you
construct your lucene index to solve the underlying problem.
Of course, the underlying problem may be reflected in your
database design, but that's coincidental only to the final
Lucene index.

If you find yourself trying to do database-like operations on
your Lucene index (joins), step back and re-examine your
assumptions <G>...

Best
Erick

On 6/13/07, Sammpathkumar, C <sammpathkumar.c@nsn.com> wrote:
>
> Hi,
>
> I am looking for a in memory Database which needs high speed search
> capability as well as should compress the data stored.
> Currently have only one table with two columns only in my design.
>
> Can we trick Lucene to use it for the above purpose?
>
> I am thinking something like:
> - Create a initial index (stored in-memory) of empty database using
> lucene.
> - Route all MAD requests to lucene so that lucene updates its indices
> but there is no real database exists.
> - Make search request only on index created by lucene.
>
> In my database schema, both the columns are marked as indexable fields.
>
> My questions:
> - Is this really possible with Lucene design?
> - If possible what is the impact on performance creating the indexes and
> searching in the index files only?
> - Or do you feel this is absurd and I should look into a different tool
> (suggestions?)
>
> Thanks and Regards,
> Sammpath
>
>
>
> Disclaimer:
> This e-mail may contain trade secrets or privileged, undisclosed or
> otherwise confidential information. If you have received this e-mail in
> error, you are hereby notified that any review, copying or distribution of
> it is strictly prohibited. Please inform us immediately and destroy the
> original transmittal. Thank you for your cooperation.
>

------=_Part_16315_14813709.1181746131095--

From java-user-return-28632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 14:51:41 2007
Return-Path: <java-user-return-28632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71428 invoked from network); 13 Jun 2007 14:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 14:51:41 -0000
Received: (qmail 78669 invoked by uid 500); 13 Jun 2007 14:51:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78631 invoked by uid 500); 13 Jun 2007 14:51:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78620 invoked by uid 99); 13 Jun 2007 14:51:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:51:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:51:31 -0700
Received: by nf-out-0910.google.com with SMTP id d3so6726nfc
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 07:51:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sYi9NXK2gf5k70dqU2WlKBlOH8PK/4yzb8P1Mjwqb2jX8QWNgnmp5mCSf18hHSjoWt/8cYbz+BWGVxnJIPzBfPakBTUVRBR2XSE/t6wxECidquo+GWoR25tD4+vcmYlX7+fFqsltHGGnYzSXIOup1cPTy4eWhp2AuAiPu/OaLWQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qVwC04Sv7LLF/PjA2Zdwr9L5V0IXVr91YHZXf+EMJC2+hIepTh5qXPon2Y9RgOuqgSVmNx5MZK/NxK6Aco3nzoN2j1xxi2K1b2n94npBeGIK9M3/ush5ZX8P5aCwW09ppl5O2SCEdT9PWNyEYiJeXeuMsJKR4NtiEQdcg0RG0T0=
Received: by 10.82.100.1 with SMTP id x1mr1272380bub.1181746269195;
        Wed, 13 Jun 2007 07:51:09 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 13 Jun 2007 07:51:09 -0700 (PDT)
Message-ID: <359a92830706130751o19d0b064k4492895bfebd139e@mail.gmail.com>
Date: Wed, 13 Jun 2007 10:51:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ERROR opening the Index - contact sysadmin!
In-Reply-To: <BAY126-W234ED95FBE3B4D0D565F0ECA180@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16351_19948320.1181746269154"
References: <BAY126-W234ED95FBE3B4D0D565F0ECA180@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16351_19948320.1181746269154
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Really, check your e-mail settings. Or put in manual line breaks.
The lack of line breaks makes it virtually impossible to read
your messages and makes it very much less likely that anyone will respond.

Best
Erick

On 6/13/07, Lucene Help <lucenehelp@hotmail.com> wrote:
>
> I tried doing what you did.  At step 3, I got the following:  Exception in
> thread "main" java.lang.NoClassDefFoundError:
> org/apache/lucene/demo/IndexFiles  Thank you in advance for your help.  -
> Lucene User> From: gsingers@apache.org> Subject: Re: ERROR opening the
> Index - contact sysadmin!> Date: Wed, 13 Jun 2007 08:41:08 -0400> To:
> java-user@lucene.apache.org> > Here's what I did:> > 1. Downloaded and
> unpacked 2.1.0> 2. >cd lucene-2.1.0> 3. >java -cp
> lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar  >
> org.apache.lucene.demo.IndexFiles <PATH TO MY DOWNLOAD>/lucene-2.1.0/ >
> docs>      Step 3 takes a little bit to run.  You can point this at any  >
> directory you want to index> 4. >ls> BUILD.txt               NOTICE.txt
> > contrib/                lucene-core-2.1.0.jar   src/> CHANGES.txt
> README.txt               > docs/                   lucene-demos-2.1.0.jar>
> LICENSE.txt             build.xml                >
> index/                  luceneweb.war> >    #Notice the "index" directory
> that gets added> > 5. >java -cp
> lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar  >
> org.apache.lucene.demo.SearchFiles> Query: vector> Searching for: vector>
> 35 total matching documents> 1. /Users/grantingersoll/downloads/lucene-
> 2.1.0/docs/api/org/apache/ > lucene/util/BitVector.html> 2.
> /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> lucene/document/Field.TermVector.html> 3.
> /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> lucene/document/class-use/Field.TermVector.html> 4.
> /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> lucene/index/TermFreqVector.html> 5. /Users/grantingersoll/downloads/lucene-
> 2.1.0/docs/api/org/apache/ > lucene/document/Fieldable.html> 6.
> /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> lucene/index/MultiReader.html> 7. /Users/grantingersoll/downloads/lucene-
> 2.1.0/docs/api/org/apache/ > lucene/index/FilterIndexReader.html> 8.
> /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> lucene/index/ParallelReader.html> 9. /Users/grantingersoll/downloads/lucene-
> 2.1.0/docs/api/org/apache/ > lucene/document/AbstractField.html> 10.
> /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> lucene/benchmark/stats/TestData.html> more (y/n) ?> > Now, I did this all on
> OS X.  Perhaps you are having permission  > problems that it can't create
> the index directory?> > Also, can you check your email settings, for some
> reason line breaks  > are getting stripped and it is very hard to make out
> your commands.> > HTH,> Grant> > > > > On Jun 12, 2007, at 1:30 PM, Lucene
> Help wrote:> > >> > I tried uninstalling lucene and installing it
> again.  This time,  > > after setting the CLASSPATH C:\lucene-
> 2.1.0\lucene-core-2.1.0.jar;C: > > \lucene-2.1.0\lucene-demos-2.1.0.jar, I
> typed java  > > org.apache.lucene.demo.IndexFiles C:\lucene-2.1.0\src into
> the  > > commandline prompt.  I got the following:  Cannot save index to  >
> > 'index director, please delete it firstPlease let me know what I am  > >
> doing wrong.  Thank you.> From: grant.ingersoll@gmail.com> Subject:  > >
> Re: ERROR opening the Index - contact sysadmin!> Date: Tue, 12 Jun  > > 2007
> 13:14:17 -0400> To: java-user@lucene.apache.org> > It looks to  > > me
> like your indexing did not take (although for some  > reason my  > > mail
> reader is munging your line breaks so it is hard to  > tell  > > for
> sure).  I would make sure you have successfully indexed and  >  > > then try
> to start the web app.  To verify you index was created,  > > you  > can use
> Luke (http://www.getopt.org/luke/)> > I presume you  > > have read
> http://lucene.apache.org/java/docs/ > demo3.html, but  > > maybe double
> checking it would be helpful.> > > On Jun 12, 2007, at  > > 10:13 AM, Lucene
> Help wrote:> > >> > I am using apache-tomcat  > > 5.5.23 and lucene-2.1.0.
> At the command  > > prompt, I typed, java  > >
> org.apache.lucene.demo.IndexHTML - create - > > index C:\Program  > >
> Files\Apache Software Foundation\Tomcat 5.5\webapps > > \opt\lucene > >
> \index ..I then got the following:  Usage:  IndexHTML [- > >  > > create]
> [-index <index>] <root_directory>I then copied and pasted   > > > > the
> luceneweb.war from C:\lucene-2.1.0 to C:\Program Files > > \Apache  > >
> Software Foundation\Tomcat 5.5\webappsI checked to  > > make sure that  >
> > the configuration.jsp in the directory C: > > \Program Files\Apache  > >
> Software Foundation\Tomcat 5.5\webapps > > \luceneweb was set
> correctly,  > > which it was:  String  > > indexLocation =
> "/opt/lucene/index";Then I  > > went opened a  > > Mozilla Firefox version
> 2.0.0.3 browser and typed in  > > http:// > > localhost:8080/luceneweb/I
> entered, "test" for my Search  > >  > > Criteria, and tried various numbers
> for Results Per Page, clicked   > > > > on the Search button, and got the
> error I described below,  > > which was:> > Welcome to the Lucene Template
> application. (This is  > > the header)> >> >> >> >                 ERROR
> opening the Index -  > > contact sysadmin!> >                 Error message:
> no segments*  > > file found: files:> >> >> >> >> >> >      Apache Lucene
> Template WebApp  > > 1.0 Thank you in advance!> From:  > >
> gsingers@apache.org> Subject:  > > Re: ERROR opening the Index -
> contact  > > sysadmin!> Date: Tue, 12  > > Jun 2007 09:40:55 -0400> To:
> java- > > user@lucene.apache.org> >  > > Can you tell us the steps you
> went  > > through to get to this page? > > > > Thanks,> Grant> > On Jun 12,
> 2007,  > > at 3:10 AM, Lucene Help  > > wrote:> > >> > Hello,I just
> downloaded  > > Lucene and tried  > > running the demo.  I seem  > > to be
> okay up until  > > I type in a  > > query into the "Search Criteria"  > >
> page and click on  > > the  > > "Search" button at the URL:
> http://localhost: > > 8080/ > >  > > luceneweb/At this point I am at the
> URL http://localhost:8080/ > >   > > > >
> luceneweb/results.jsp?query=test&maxresults=2 which gives me  > > the  >  >
> > > following:> > Welcome to the Lucene Template  > > application. (This  >
> > is the header)> >> >> >> >                  > > ERROR opening the Index  >
> > - contact sysadmin!> >                  > > Error message: no segments*  >
> > file found: files:> >> >> >> >> >>  > > >      Apache Lucene Template
> WebApp  > > 1.0 If someone could help me  > > out  > > ASAP, that would be
> great.   > > Thanks!Lucene User> >  >  > > >  > >
> _________________________________________________________________>   > > > >
> > With Windows Live Hotmail, you can personalize your inbox  > > with  > >
> your  > > favorite color.> > www.windowslive-hotmail.com/ > > learnmore/ >
> > personalize.html?locale=en- > >  > >  > >
> us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607> >  > >  > >
> --------------------------> Grant Ingersoll> Center for Natural  >  > > >
> Language Processing> http://www.cnlp.org/tech/lucene.asp> > Read   > > > >
> the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/  > > >  > >
> LuceneFAQ> > > >  > >  > >
> ---------------------------------------------------------------------> >
> >  > >  To unsubscribe, e-mail: java-user- > >
> unsubscribe@lucene.apache.org>  > > For additional commands, e- > > mail:
> java-user-help@lucene.apache.org>> >  > >
> _________________________________________________________________>  > > >
> Make every IM count. Download Windows Live Messenger and join  > > the  > >
> i'm Initiative now. It's free.> > http://im.live.com/ > >
> messenger/im/home/?source=TAGWL_June07> > > >  > >
> ---------------------------------------------------------------------> >
> >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org>  > >
> For additional commands, e-mail: java-user-help@lucene.apache.org>> >
> _________________________________________________________________> > Make
> every IM count. Download Windows Live Messenger and join the  > > i'm
> Initiative now. It's free.> >
> http://im.live.com/messenger/im/home/?source=TAGWL_June07> >
> --------------------------> Grant Ingersoll> Center for Natural Language
> Processing> http://www.cnlp.org/tech/lucene.asp> > Read the Lucene Java
> FAQ at http://wiki.apache.org/jakarta-lucene/ > LuceneFAQ> > > >
> ---------------------------------------------------------------------> To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For
> additional commands, e-mail: java-user-help@lucene.apache.org>
> _________________________________________________________________
> Live Earth is coming. Learn more about the hottest summer event - only on
> MSN.
> http://liveearth.msn.com?source=msntaglineliveearthwlm

------=_Part_16351_19948320.1181746269154--

From java-user-return-28633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 15:00:06 2007
Return-Path: <java-user-return-28633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75510 invoked from network); 13 Jun 2007 15:00:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 15:00:05 -0000
Received: (qmail 3443 invoked by uid 500); 13 Jun 2007 15:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3398 invoked by uid 500); 13 Jun 2007 15:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3383 invoked by uid 99); 13 Jun 2007 15:00:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 08:00:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gopi.subramani@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 07:59:55 -0700
Received: by nz-out-0506.google.com with SMTP id x7so188929nzc
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 07:59:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OlWiqvzUJGZU998BKG0r/TzE76Ncb9JxmFeP5PMuM8SD/D6l0eVeTurrds5Ny0vqrgv5LA4Mf+qkZMB1TXRvvbD5nU7MXzPtaIaZZBzleXx/Drxz3vAR1zv/w8SiNnP3Pn1fov7nSeQ8Sqg06J7gD/ca6N+nBQKlvsRcA3rxQFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EvMNO8QcdusId8L6SPQDX8WWlsmf/8f+RKddyhGdL4FI3PYp9H9FJHSwUiNuFIgFa70C4i+dsZsAC/zdOYU7hlVbyOj6snXTnx69sgbK4TNf+dUBrBo+IK8hq7LwJjO9CTZkobILCXNW/EjTSSnJk3cFOgw7z55vSSBZbuCILRk=
Received: by 10.114.209.1 with SMTP id h1mr750189wag.1181746773471;
        Wed, 13 Jun 2007 07:59:33 -0700 (PDT)
Received: by 10.114.124.20 with HTTP; Wed, 13 Jun 2007 07:59:33 -0700 (PDT)
Message-ID: <733777220706130759s42b314fbxf3b0662dbd74c245@mail.gmail.com>
Date: Wed, 13 Jun 2007 20:29:33 +0530
From: "Gopikrishnan Subramani" <gopi.subramani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ERROR opening the Index - contact sysadmin!
In-Reply-To: <359a92830706130751o19d0b064k4492895bfebd139e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26275_27420682.1181746773379"
References: <BAY126-W234ED95FBE3B4D0D565F0ECA180@phx.gbl>
	 <359a92830706130751o19d0b064k4492895bfebd139e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26275_27420682.1181746773379
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lucene User... (that's a very generic name to be addressed. if you really
want a phoney name, consider something less generic in this forum), you
probably are using HTML format, try changing it to plain text.

-Gopi

On 6/13/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Really, check your e-mail settings. Or put in manual line breaks.
> The lack of line breaks makes it virtually impossible to read
> your messages and makes it very much less likely that anyone will respond.
>
> Best
> Erick
>
> On 6/13/07, Lucene Help <lucenehelp@hotmail.com> wrote:
> >
> > I tried doing what you did.  At step 3, I got the following:  Exception
> in
> > thread "main" java.lang.NoClassDefFoundError:
> > org/apache/lucene/demo/IndexFiles  Thank you in advance for your
> help.  -
> > Lucene User> From: gsingers@apache.org> Subject: Re: ERROR opening the
> > Index - contact sysadmin!> Date: Wed, 13 Jun 2007 08:41:08 -0400> To:
> > java-user@lucene.apache.org> > Here's what I did:> > 1. Downloaded and
> > unpacked 2.1.0> 2. >cd lucene-2.1.0> 3. >java -cp
> > lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar  >
> > org.apache.lucene.demo.IndexFiles <PATH TO MY DOWNLOAD>/lucene-2.1.0/ >
> > docs>      Step 3 takes a little bit to run.  You can point this at
> any  >
> > directory you want to index> 4. >ls> BUILD.txt               NOTICE.txt
> > > contrib/                lucene-core-2.1.0.jar   src/> CHANGES.txt
> > README.txt               > docs/
> lucene-demos-2.1.0.jar>
> > LICENSE.txt             build.xml                >
> > index/                  luceneweb.war> >    #Notice the "index"
> directory
> > that gets added> > 5. >java -cp
> > lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar  >
> > org.apache.lucene.demo.SearchFiles> Query: vector> Searching for:
> vector>
> > 35 total matching documents> 1. /Users/grantingersoll/downloads/lucene-
> > 2.1.0/docs/api/org/apache/ > lucene/util/BitVector.html> 2.
> > /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> > lucene/document/Field.TermVector.html> 3.
> > /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> > lucene/document/class-use/Field.TermVector.html> 4.
> > /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> > lucene/index/TermFreqVector.html> 5.
> /Users/grantingersoll/downloads/lucene-
> > 2.1.0/docs/api/org/apache/ > lucene/document/Fieldable.html> 6.
> > /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> > lucene/index/MultiReader.html> 7.
> /Users/grantingersoll/downloads/lucene-
> > 2.1.0/docs/api/org/apache/ > lucene/index/FilterIndexReader.html> 8.
> > /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> > lucene/index/ParallelReader.html> 9.
> /Users/grantingersoll/downloads/lucene-
> > 2.1.0/docs/api/org/apache/ > lucene/document/AbstractField.html> 10.
> > /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ >
> > lucene/benchmark/stats/TestData.html> more (y/n) ?> > Now, I did this
> all on
> > OS X.  Perhaps you are having permission  > problems that it can't
> create
> > the index directory?> > Also, can you check your email settings, for
> some
> > reason line breaks  > are getting stripped and it is very hard to make
> out
> > your commands.> > HTH,> Grant> > > > > On Jun 12, 2007, at 1:30 PM,
> Lucene
> > Help wrote:> > >> > I tried uninstalling lucene and installing it
> > again.  This time,  > > after setting the CLASSPATH C:\lucene-
> > 2.1.0\lucene-core-2.1.0.jar;C: > > \lucene-2.1.0\lucene-demos-2.1.0.jar,
> I
> > typed java  > > org.apache.lucene.demo.IndexFiles C:\lucene-2.1.0\srcinto
> > the  > > commandline prompt.  I got the following:  Cannot save index
> to  >
> > > 'index director, please delete it firstPlease let me know what I am  >
> >
> > doing wrong.  Thank you.> From: grant.ingersoll@gmail.com> Subject:  > >
> > Re: ERROR opening the Index - contact sysadmin!> Date: Tue, 12 Jun  > >
> 2007
> > 13:14:17 -0400> To: java-user@lucene.apache.org> > It looks to  > > me
> > like your indexing did not take (although for some  > reason my  > >
> mail
> > reader is munging your line breaks so it is hard to  > tell  > > for
> > sure).  I would make sure you have successfully indexed and  >  > > then
> try
> > to start the web app.  To verify you index was created,  > > you  > can
> use
> > Luke (http://www.getopt.org/luke/)> > I presume you  > > have read
> > http://lucene.apache.org/java/docs/ > demo3.html, but  > > maybe double
> > checking it would be helpful.> > > On Jun 12, 2007, at  > > 10:13 AM,
> Lucene
> > Help wrote:> > >> > I am using apache-tomcat  > > 5.5.23 and
> lucene-2.1.0.
> > At the command  > > prompt, I typed, java  > >
> > org.apache.lucene.demo.IndexHTML - create - > > index C:\Program  > >
> > Files\Apache Software Foundation\Tomcat 5.5\webapps > > \opt\lucene > >
> > \index ..I then got the following:  Usage:  IndexHTML [- > >  > >
> create]
> > [-index <index>] <root_directory>I then copied and pasted   > > > > the
> > luceneweb.war from C:\lucene-2.1.0 to C:\Program Files > > \Apache  > >
> > Software Foundation\Tomcat 5.5\webappsI checked to  > > make sure
> that  >
> > > the configuration.jsp in the directory C: > > \Program Files\Apache  >
> >
> > Software Foundation\Tomcat 5.5\webapps > > \luceneweb was set
> > correctly,  > > which it was:  String  > > indexLocation =
> > "/opt/lucene/index";Then I  > > went opened a  > > Mozilla Firefox
> version
> > 2.0.0.3 browser and typed in  > > http:// > > localhost:8080/luceneweb/I
> > entered, "test" for my Search  > >  > > Criteria, and tried various
> numbers
> > for Results Per Page, clicked   > > > > on the Search button, and got
> the
> > error I described below,  > > which was:> > Welcome to the Lucene
> Template
> > application. (This is  > > the header)> >> >> >> >                 ERROR
> > opening the Index -  > > contact sysadmin!> >                 Error
> message:
> > no segments*  > > file found: files:> >> >> >> >> >> >      Apache
> Lucene
> > Template WebApp  > > 1.0 Thank you in advance!> From:  > >
> > gsingers@apache.org> Subject:  > > Re: ERROR opening the Index -
> > contact  > > sysadmin!> Date: Tue, 12  > > Jun 2007 09:40:55 -0400> To:
> > java- > > user@lucene.apache.org> >  > > Can you tell us the steps you
> > went  > > through to get to this page? > > > > Thanks,> Grant> > On Jun
> 12,
> > 2007,  > > at 3:10 AM, Lucene Help  > > wrote:> > >> > Hello,I just
> > downloaded  > > Lucene and tried  > > running the demo.  I seem  > > to
> be
> > okay up until  > > I type in a  > > query into the "Search Criteria"  >
> >
> > page and click on  > > the  > > "Search" button at the URL:
> > http://localhost: > > 8080/ > >  > > luceneweb/At this point I am at the
> > URL http://localhost:8080/ > >   > > > >
> > luceneweb/results.jsp?query=test&maxresults=2 which gives me  > >
> the  >  >
> > > > following:> > Welcome to the Lucene Template  > > application.
> (This  >
> > > is the header)> >> >> >> >                  > > ERROR opening the
> Index  >
> > > - contact sysadmin!> >                  > > Error message: no
> segments*  >
> > > file found: files:> >> >> >> >> >>  > > >      Apache Lucene Template
> > WebApp  > > 1.0 If someone could help me  > > out  > > ASAP, that would
> be
> > great.   > > Thanks!Lucene User> >  >  > > >  > >
> > _________________________________________________________________>   > >
> > >
> > > With Windows Live Hotmail, you can personalize your inbox  > > with  >
> >
> > your  > > favorite color.> > www.windowslive-hotmail.com/ > > learnmore/
> >
> > > personalize.html?locale=en- > >  > >  > >
> > us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607> >  > >  > >
> > --------------------------> Grant Ingersoll> Center for Natural  >  > >
> >
> > Language Processing> http://www.cnlp.org/tech/lucene.asp> > Read   > > >
> >
> > the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/  > > >  >
> >
> > LuceneFAQ> > > >  > >  > >
> > ---------------------------------------------------------------------> >
> > >  > >  To unsubscribe, e-mail: java-user- > >
> > unsubscribe@lucene.apache.org>  > > For additional commands, e- > >
> mail:
> > java-user-help@lucene.apache.org>> >  > >
> > _________________________________________________________________>  > >
> >
> > Make every IM count. Download Windows Live Messenger and join  > >
> the  > >
> > i'm Initiative now. It's free.> > http://im.live.com/ > >
> > messenger/im/home/?source=TAGWL_June07> > > >  > >
> > ---------------------------------------------------------------------> >
> > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org>  > >
> > For additional commands, e-mail: java-user-help@lucene.apache.org>> >
> > _________________________________________________________________> >
> Make
> > every IM count. Download Windows Live Messenger and join the  > > i'm
> > Initiative now. It's free.> >
> > http://im.live.com/messenger/im/home/?source=TAGWL_June07> >
> > --------------------------> Grant Ingersoll> Center for Natural Language
> > Processing> http://www.cnlp.org/tech/lucene.asp> > Read the Lucene Java
> > FAQ at http://wiki.apache.org/jakarta-lucene/ > LuceneFAQ> > > >
> > --------------------------------------------------------------------->
> To
> > unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For
> > additional commands, e-mail: java-user-help@lucene.apache.org>
> > _________________________________________________________________
> > Live Earth is coming. Learn more about the hottest summer event - only
> on
> > MSN.
> > http://liveearth.msn.com?source=msntaglineliveearthwlm
>

------=_Part_26275_27420682.1181746773379--

From java-user-return-28634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 15:40:15 2007
Return-Path: <java-user-return-28634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18376 invoked from network); 13 Jun 2007 15:40:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 15:40:14 -0000
Received: (qmail 67156 invoked by uid 500); 13 Jun 2007 15:40:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67116 invoked by uid 500); 13 Jun 2007 15:40:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67105 invoked by uid 99); 13 Jun 2007 15:40:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 08:40:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 08:40:01 -0700
Received: by wr-out-0506.google.com with SMTP id 36so184451wra
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 08:39:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=OIPjlGqQs3cTVr5w5L0YyX51DlIrlE3DhYAdrLqzm1BZyO86kfdZ7uXYGgqh0ZDNT4TC8N2bLhKvpzN95SFVZ97aiR4j/osQKhGKBHx5QJsXPtlFDmhz7BMuGhEYQ1csvMobzqt1Bxt9E/CjC8C2ArGsQ4E8LLMvG0gvqkxykPk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=djW1RLUOxBMo2/vw9cTRS+H2HbKj8sFqhCrtWP5txHCGTAQnPNBV8ox3oLq37MG6CEUSXQEytUKGqf4Q3VcimNJojNvwOtvXf/TbAFcPuY3X/L1pR2ACu5uFOuqFHcW/UiaHkYDsBta1gca+Ss9S84eY3VAuWKULEzp6ZewQpCQ=
Received: by 10.90.70.10 with SMTP id s10mr503316aga.1181749179778;
        Wed, 13 Jun 2007 08:39:39 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id m6sm1063556wrm.2007.06.13.08.39.38
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 13 Jun 2007 08:39:39 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BAY126-W234ED95FBE3B4D0D565F0ECA180@phx.gbl>
References: <BAY126-W234ED95FBE3B4D0D565F0ECA180@phx.gbl>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <1497378B-DD86-453E-B9BA-44A713DA30D3@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: ERROR opening the Index - contact sysadmin!
Date: Wed, 13 Jun 2007 11:39:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

This is a classpath issue.  Please go back through the directions =20
very carefully.  My example of classpath is for my Operating System =20
(OS X).  You will need to configure you classpath appropriate for you =20=

operating system.


On Jun 13, 2007, at 10:06 AM, Lucene Help wrote:

> I tried doing what you did.  At step 3, I got the following:  =20
> Exception in thread "main" java.lang.NoClassDefFoundError: org/=20
> apache/lucene/demo/IndexFiles  Thank you in advance for your help.  =20=

> - Lucene User> From: gsingers@apache.org> Subject: Re: ERROR =20
> opening the Index - contact sysadmin!> Date: Wed, 13 Jun 2007 =20
> 08:41:08 -0400> To: java-user@lucene.apache.org> > Here's what I =20
> did:> > 1. Downloaded and unpacked 2.1.0> 2. >cd lucene-2.1.0> 3. =20
> >java -cp lucene-core-2.1.0.jar:lucene-demos-2.1.0.jar  > =20
> org.apache.lucene.demo.IndexFiles <PATH TO MY DOWNLOAD>/=20
> lucene-2.1.0/ > docs>      Step 3 takes a little bit to run.  You =20
> can point this at any  > directory you want to index> 4. >ls> =20
> BUILD.txt               NOTICE.txt               > =20
> contrib/                lucene-core-2.1.0.jar   src/> =20
> CHANGES.txt             README.txt               > =20
> docs/                   lucene-demos-2.1.0.jar> =20
> LICENSE.txt             build.xml                > =20
> index/                  luceneweb.war> >    #Notice the "index" =20
> directory that gets added> > 5. >java -cp lucene-=20
> core-2.1.0.jar:lucene-demos-2.1.0.jar  > =20
> org.apache.lucene.demo.SearchFiles> Query: vector> Searching for: =20
> vector> 35 total matching documents> 1. /Users/grantingersoll/=20
> downloads/lucene-2.1.0/docs/api/org/apache/ > lucene/util/=20
> BitVector.html> 2. /Users/grantingersoll/downloads/lucene-2.1.0/=20
> docs/api/org/apache/ > lucene/document/Field.TermVector.html> 3. /=20
> Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ > =20
> lucene/document/class-use/Field.TermVector.html> 4. /Users/=20
> grantingersoll/downloads/lucene-2.1.0/docs/api/org/apache/ > lucene/=20=

> index/TermFreqVector.html> 5. /Users/grantingersoll/downloads/=20
> lucene-2.1.0/docs/api/org/apache/ > lucene/document/Fieldable.html> =20=

> 6. /Users/grantingersoll/downloads/lucene-2.1.0/docs/api/org/=20
> apache/ > lucene/index/MultiReader.html> 7. /Users/grantingersoll/=20
> downloads/lucene-2.1.0/docs/api/org/apache/ > lucene/index/=20
> FilterIndexReader.html> 8. /Users/grantingersoll/downloads/=20
> lucene-2.1.0/docs/api/org/apache/ > lucene/index/=20
> ParallelReader.html> 9. /Users/grantingersoll/downloads/=20
> lucene-2.1.0/docs/api/org/apache/ > lucene/document/=20
> AbstractField.html> 10. /Users/grantingersoll/downloads/=20
> lucene-2.1.0/docs/api/org/apache/ > lucene/benchmark/stats/=20
> TestData.html> more (y/n) ?> > Now, I did this all on OS X.  =20
> Perhaps you are having permission  > problems that it can't create =20
> the index directory?> > Also, can you check your email settings, =20
> for some reason line breaks  > are getting stripped and it is very =20
> hard to make out your commands.> > HTH,> Grant> > > > > On Jun 12, =20
> 2007, at 1:30 PM, Lucene Help wrote:> > >> > I tried uninstalling =20
> lucene and installing it again.  This time,  > > after setting the =20
> CLASSPATH C:\lucene-2.1.0\lucene-core-2.1.0.jar;C: > > \lucene-2.1.0=20=

> \lucene-demos-2.1.0.jar, I typed java  > > =20
> org.apache.lucene.demo.IndexFiles C:\lucene-2.1.0\src into the  > > =20=

> commandline prompt.  I got the following:  Cannot save index to  > =20
> > 'index director, please delete it firstPlease let me know what I =20
> am  > > doing wrong.  Thank you.> From: grant.ingersoll@gmail.com> =20
> Subject:  > > Re: ERROR opening the Index - contact sysadmin!> =20
> Date: Tue, 12 Jun  > > 2007 13:14:17 -0400> To: java-=20
> user@lucene.apache.org> > It looks to  > > me like your indexing =20
> did not take (although for some  > reason my  > > mail reader is =20
> munging your line breaks so it is hard to  > tell  > > for sure).  =20
> I would make sure you have successfully indexed and  >  > > then =20
> try to start the web app.  To verify you index was created,  > > =20
> you  > can use Luke (http://www.getopt.org/luke/)> > I presume you  =20=

> > > have read http://lucene.apache.org/java/docs/ > demo3.html, =20
> but  > > maybe double checking it would be helpful.> > > On Jun 12, =20=

> 2007, at  > > 10:13 AM, Lucene Help wrote:> > >> > I am using =20
> apache-tomcat  > > 5.5.23 and lucene-2.1.0. At the command  > > =20
> prompt, I typed, java  > > org.apache.lucene.demo.IndexHTML - =20
> create - > > index C:\Program  > > Files\Apache Software Foundation=20
> \Tomcat 5.5\webapps > > \opt\lucene > > \index ..I then got the =20
> following:  Usage:  IndexHTML [- > >  > > create] [-index <index>] =20
> <root_directory>I then copied and pasted   > > > > the =20
> luceneweb.war from C:\lucene-2.1.0 to C:\Program Files > > \Apache  =20=

> > > Software Foundation\Tomcat 5.5\webappsI checked to  > > make =20
> sure that  > > the configuration.jsp in the directory C: > > =20
> \Program Files\Apache  > > Software Foundation\Tomcat 5.5\webapps > =20=

> > \luceneweb was set correctly,  > > which it was:  String  > > =20
> indexLocation =3D "/opt/lucene/index";Then I  > > went opened a  > > =20=

> Mozilla Firefox version 2.0.0.3 browser and typed in  > > http:// > =20=

> > localhost:8080/luceneweb/I entered, "test" for my Search  > >  > =20
> > Criteria, and tried various numbers for Results Per Page, =20
> clicked   > > > > on the Search button, and got the error I =20
> described below,  > > which was:> > Welcome to the Lucene Template =20
> application. (This is  > > the header)> >> >> >> >                 =20
> ERROR opening the Index -  > > contact sysadmin!> >                 =20=

> Error message: no segments*  > > file found: files:> >> >> >> >> >> =20=

> > 	Apache Lucene Template WebApp  > > 1.0 Thank you in advance!> =20=

> From:  > > gsingers@apache.org> Subject:  > > Re: ERROR opening the =20=

> Index - contact  > > sysadmin!> Date: Tue, 12  > > Jun 2007 =20
> 09:40:55 -0400> To: java- > > user@lucene.apache.org> >  > > Can =20
> you tell us the steps you went  > > through to get to this page? > =20
> > > > Thanks,> Grant> > On Jun 12, 2007,  > > at 3:10 AM, Lucene =20
> Help  > > wrote:> > >> > Hello,I just downloaded  > > Lucene and =20
> tried  > > running the demo.  I seem  > > to be okay up until  > > =20
> I type in a  > > query into the "Search Criteria"  > > page and =20
> click on  > > the  > > "Search" button at the URL:  http://=20
> localhost: > > 8080/ > >  > > luceneweb/At this point I am at the =20
> URL http://localhost:8080/ > >   > > > > luceneweb/results.jsp?=20
> query=3Dtest&maxresults=3D2 which gives me  > > the  >  > > > =20
> following:> > Welcome to the Lucene Template  > > application. =20
> (This  > > is the header)> >> >> >> >                  > > ERROR =20
> opening the Index  > > - contact sysadmin!> >                  > > =20
> Error message: no segments*  > > file found: files:> >> >> >> >> =20
> >>  > > > 	Apache Lucene Template WebApp  > > 1.0 If someone could =20=

> help me  > > out  > > ASAP, that would be great.   > > Thanks!=20
> Lucene User> >  >  > > >  > > =20
> _________________________________________________________________>   >=20=

>  > > > > With Windows Live Hotmail, you can personalize your inbox  =20=

> > > with  > > your  > > favorite color.> > www.windowslive-=20
> hotmail.com/ > > learnmore/ > > personalize.html?locale=3Den- > >  > =20=

> >  > > us&ocid=3DTXT_TAGLM_HMWL_reten_addcolor_0607> >  > >  > > =20
> --------------------------> Grant Ingersoll> Center for Natural  >  =20=

> > > > Language Processing> http://www.cnlp.org/tech/lucene.asp> > =20
> Read   > > > > the Lucene Java FAQ at http://wiki.apache.org/=20
> jakarta-lucene/  > > >  > > LuceneFAQ> > > >  > >  > > =20
> --------------------------------------------------------------------->=20=

>  > >  > >  To unsubscribe, e-mail: java-user- > > =20
> unsubscribe@lucene.apache.org>  > > For additional commands, e- > > =20=

> mail: java-user-help@lucene.apache.org>> >  > > =20
> _________________________________________________________________>  =20=

> > > > Make every IM count. Download Windows Live Messenger and =20
> join  > > the  > > i=92m Initiative now. It=92s free.> > http://=20
> im.live.com/ > > messenger/im/home/?source=3DTAGWL_June07> > > >  > > =20=

> --------------------------------------------------------------------->=20=

>  > >  To unsubscribe, e-mail: java-user-=20
> unsubscribe@lucene.apache.org>  > > For additional commands, e-=20
> mail: java-user-help@lucene.apache.org>> > =20
> _________________________________________________________________> =20
> > Make every IM count. Download Windows Live Messenger and join =20
> the  > > i=92m Initiative now. It=92s free.> > http://im.live.com/=20
> messenger/im/home/?source=3DTAGWL_June07> > --------------------------=20=

> > Grant Ingersoll> Center for Natural Language Processing> http://=20
> www.cnlp.org/tech/lucene.asp> > Read the Lucene Java FAQ at http://=20
> wiki.apache.org/jakarta-lucene/ > LuceneFAQ> > > > =20
> --------------------------------------------------------------------->=20=

>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> =20
> For additional commands, e-mail: java-user-help@lucene.apache.org>
> _________________________________________________________________
> Live Earth is coming.  Learn more about the hottest summer event - =20
> only on MSN.
> http://liveearth.msn.com?source=3Dmsntaglineliveearthwlm

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 17:47:38 2007
Return-Path: <java-user-return-28635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61464 invoked from network); 13 Jun 2007 17:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 17:47:36 -0000
Received: (qmail 51181 invoked by uid 500); 13 Jun 2007 17:47:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51148 invoked by uid 500); 13 Jun 2007 17:47:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51137 invoked by uid 99); 13 Jun 2007 17:47:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 10:47:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,MANY_EXCLAMATIONS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of itsadok@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 10:47:28 -0700
Received: by wr-out-0506.google.com with SMTP id 36so220279wra
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 10:47:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=uRzdZQYwe5GptsuKPdY7tVVqCuZXlZgSfBlxwddetk8Rgo67VBmbPslTBTFH23PWLhuD4XYPHkqs/9Z9B2XY70ARfj2YZ22t2qxkeFU3o9j6EIBAT4gk9HMH4Xt9RVzvBvPDM1eJbsp3IiLrQaUZDuTHoXfIgpKxRm+xGXqm2r0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=dcHDyPR3qRzomTEeuJiRcSUAKE7lUtj3Xn+71a43IaBenrpZUYCfWXbgIyn0tv4KMpHqgCKoL/8F9QwO85IPjbHmE31oA7tys77fjWthxX4/SXRvpNno40Adg9AwBlqst0JoStqgoEa789OnGBU5Wu0piLieQGZuWa4mJzl/cIY=
Received: by 10.90.116.6 with SMTP id o6mr745080agc.1181756827118;
        Wed, 13 Jun 2007 10:47:07 -0700 (PDT)
Received: by 10.90.87.11 with HTTP; Wed, 13 Jun 2007 10:47:07 -0700 (PDT)
Message-ID: <b4615b180706131047if295309l3348ff43641f066c@mail.gmail.com>
Date: Wed, 13 Jun 2007 20:47:07 +0300
From: "Israel Tsadok" <itsadok@omgili.com>
Sender: itsadok@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Why use RMI search very slow! when have 13 TermQuery! Return cost 7500 ms .
In-Reply-To: <28C622BA8A7A474589924466E6303BE00CC7D4@EXCH01.yikey.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21579_17002564.1181756827094"
References: <28C622BA8A7A474589924466E6303BE00CC7D4@EXCH01.yikey.com>
X-Google-Sender-Auth: bd528dedd1df90f7
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21579_17002564.1181756827094
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSB0aGluayB5b3Ugc3R1bWJsZWQgb250byB0aGUgc2FtZSBwcm9ibGVtIEkgaGFkLCBjaGVjayBv
dXQ6Cmh0dHA6Ly9tYWlsLWFyY2hpdmVzLmFwYWNoZS5vcmcvbW9kX21ib3gvbHVjZW5lLWphdmEt
dXNlci8yMDA3MDUubWJveC8lM2NiNDYxNWIxODA3MDUyOTAyNDVvNWJlNjI4NWRvNTZkYmIyMDg4
NzRkNTlmN0BtYWlsLmdtYWlsLmNvbSUzZQoKSWYgeW91IGRvbid0IHdhbnQgdG8gcmVidWlsZCBs
dWNlbmUsIGNvbnNpZGVyIHVzaW5nIHRoZQogIHB1YmxpYyBUb3BEb2NzIHNlYXJjaChRdWVyeSBx
dWVyeSwgRmlsdGVyIGZpbHRlciwgaW50IG4pCm1ldGhvZCBpbnN0ZWFkIG9mIHRoZSBvbmUgdGhh
dCByZXR1cm5zIEhpdHMuIChZb3UgY2FuIHVzZSBudWxsIGZvciB0aGUKc2Vjb25kIHBhcmFtZXRl
cikKCklzcmFlbCBUc2Fkb2sKCk9uIDYvMTIvMDcsIM2v0KG+/CA8dG9uZ3hpYW9qdW5AeWlrZXku
Y29tPiB3cm90ZToKPgo+IEkgYW0gdXNlIFJNSSBzZWFyY2ggdHdvIHNlcnZlciBkYXRlISBXaGVu
IEkgdXNlIG9uZSBUZXJtUXVlcnkgcmV0dXJuIDMwbXMKPiAodmVyeSBnb29kKSEgQnV0IHdoZW4g
SSB1c2UgYm9vbGVhblF1ZXJ5IGFkZCB0b3cgdGVybVF1ZXJ5IHJldHVybiBtdXN0IDE1MAo+IG1z
IKO6o6gKPgo+IEFuZCB0aHJlZSBpcyAyNTAgbXM/IE15IHF1ZXJ5IGhhdmUgMTMgVGVybVF1ZXJ5
ISBSZXR1cm4gY29zdCA3NTAwIG1zIC4KPgo+IEhvdyBjYW4gSSBkbyBpdCBxdWljayEgVXNlIElD
RShJbnRlcm5ldCBDb21tdW5pY2F0aW9ucyBFbmdpbmUpIFplcm9DID8KPgo+Cj4KPiBUaGFuayB5
b3UgdmVyeSBtdWNoICEKPgo+Cj4KPiB4aWFvanVuIHRvbmcKPgo+Cj4KPiAwMTAtNjQ0ODk1MTgt
NjEzCj4KPiB0b25neGlhb2p1bkBtc24uY29tCj4KPiB3d3cuZmVlZHNreS5jb20KPgo+Cj4KPgoK
Ci0tIAoKSXNyYWVsIFRzYWRvayB8IFZQIFImRCB8IE9tZ2lsaQoKVCArOTcyLjkuOTU1MDc1MCB8
IEYgKzk3Mi45Ljk1NTA3NTggfCBDICs5NzIuNTIuODM3MjI3NwoKaXRzYWRva0BnbWFpbC5jb20g
fCB3d3cub21naWxpLmNvbQo=
------=_Part_21579_17002564.1181756827094--

From java-user-return-28636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 18:31:20 2007
Return-Path: <java-user-return-28636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96902 invoked from network); 13 Jun 2007 18:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 18:31:08 -0000
Received: (qmail 30624 invoked by uid 500); 13 Jun 2007 18:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30570 invoked by uid 500); 13 Jun 2007 18:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 30230 invoked by uid 99); 13 Jun 2007 17:36:47 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of fsanchez.at.dlsi.ua.es@gmail.com designates 66.249.92.170 as permitted sender)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:subject:from:reply-to:to:content-type:organization:date:message-id:mime-version:x-mailer:content-transfer-encoding:sender;
        b=uOfz/nDGEHpflpolFTWcog/QmGfYJf0gu0FXXpPIk5lOV6NzQWdRP7fpXH5Qo0nuljtOB35kRSoee1BmtJMb/2g6bTEPDyLpukaDMBUtZK+YHHkJoR8V80w5XbL/3Rug/k9Dr9908nhQmJjzauTk4lymZaxRyhesw2udX/07MwA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:subject:from:reply-to:to:content-type:organization:date:message-id:mime-version:x-mailer:content-transfer-encoding:sender;
        b=JGs9AVDYfZct4064/5rIgXS8xS+n1s16I4BDWay8Y6zqZh8HgJw4J+hO9RuTnBT0RHmKV7a93sCE8jYaZ816prte5RxeXR2Sj8Y4o4x2CSsgYrohAigcHyXSNj6/gMYd5C/8Ut+a+n1CvqG45jhEeDLqXh4uI9zUh0fQ+irkROk=
Subject: In which position of a document a word was found?
From: Felipe =?ISO-8859-1?Q?S=E1nchez_Mart=EDnez?= <fsanchez@dlsi.ua.es>
Reply-To: fsanchez@dlsi.ua.es
To: java-user@lucene.apache.org
Content-Type: text/plain
Organization: Dpto. Lenguajes y Sistemas =?ISO-8859-1?Q?Inform=E1ticos=2E?=
	Universidad de Alicante
Date: Wed, 13 Jun 2007 19:36:19 +0200
Message-Id: <1181756179.5944.25.camel@pipe>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: 7bit
Sender: =?ISO-8859-1?Q?Felipe=20S=E1nchez=20Mart=EDnez?= <fsanchez.at.dlsi.ua.es@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am new to Lucene and I have been reading the book "Lucene In Action",
here is my question:

When searching for a word through an index is there any way to know in
which positions (may be more than one) of each document that word was
found?

The index is constructed in the following way:
---------------------
IndexWriter writer = new IndexWriter("/path/to/the/index/dir", 
new StandardAnalyzer(), true);

writer.setUseCompoundFile(false);

Document doc = new Document();

doc.add(new Field("contents", 
new FileReader(f),Field.TermVector.WITH_POSITIONS_OFFSETS));

doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
Field.Index.NO_NORMS));

writer.addDocument(doc);
.....
--------------------


Thanks in advance
--
Felipe.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 18:47:24 2007
Return-Path: <java-user-return-28637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5754 invoked from network); 13 Jun 2007 18:47:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 18:47:23 -0000
Received: (qmail 91974 invoked by uid 500); 13 Jun 2007 18:47:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91940 invoked by uid 500); 13 Jun 2007 18:47:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91922 invoked by uid 99); 13 Jun 2007 18:47:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 11:47:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 11:47:14 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5EC6E5B763; Wed, 13 Jun 2007 11:46:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 461417F403
	for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 11:46:54 -0700 (PDT)
Date: Wed, 13 Jun 2007 11:46:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher, Hits and createWeight
In-Reply-To: <b4615b180706130727w552ec492t93ab2681f72239da@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0706131134420.24920@hal.rescomp.berkeley.edu>
References: <b4615b180705290245o5be6285do56dbb208874d59f7@mail.gmail.com>
 <b4615b180706130727w552ec492t93ab2681f72239da@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Israel, I don't really know much about MultiSearcher, but just to clarify:
are you saying that the change you have works ok, as long as people are
also using hte patch in LUCENE-789 (which will be in 2.2) or are you
saying that the change you tried doesn't work when using a custom
similarity, for the same reasons as LUCENE-789?

If it does work with the patch in LUCENE-789 and provies the same results
with less network overhead, then by all means please open a jira issue and
submit a patch ... it seems like a simple change and it seems correct to
me ... hopefully someone more knowledgable about MultiSearcher then myself
can comment on it and we can commit it.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 19:04:15 2007
Return-Path: <java-user-return-28638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17555 invoked from network); 13 Jun 2007 19:04:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 19:04:15 -0000
Received: (qmail 52145 invoked by uid 500); 13 Jun 2007 19:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52109 invoked by uid 500); 13 Jun 2007 19:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52098 invoked by uid 99); 13 Jun 2007 19:04:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 12:04:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jun 2007 12:04:03 -0700
Received: (qmail 4182 invoked from network); 13 Jun 2007 18:57:59 -0000
Received: from unknown (HELO CD92922) (71.201.177.115)
  by host412.ipowerweb.com with SMTP; 13 Jun 2007 18:57:59 -0000
From: "Tanya Levshina" <tanya@volvovski.com>
To: <java-user@lucene.apache.org>
Subject: multiple questions about lucene
Date: Wed, 13 Jun 2007 14:03:38 -0500
Message-ID: <01bd01c7aded$8d0073e0$6a5ee183@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01BE_01C7ADC3.A42A6BE0"
X-Mailer: Microsoft Office Outlook 11
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-index: Acet7YxBZvDrBFwrQRaOzWQuRKObsw==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_01BE_01C7ADC3.A42A6BE0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi,

1. I am dealing with the logs files and have to index the whole file (the
attempt to increase setMaxFielldLength eventually causes out of memory
error). I am sure that I am not a first person that encounters this problem.
What is the most efficient way to handle this situation?

 2. I am indexing  a file that contains the following text:

Contents:

Word_1..Word_2..\n

Word_1..Word_3..\n

I would like to create a query "search for files that contains Word_1 but do
not contain Word_1 and Word_2 in one line" and to get search to return the
name of the file. When I tried +Word_1 -Word_2 nothing is returned. I can
not use slope because I have no idea about number of tokens between these
two words. Any idea?

Thanks,

Tanya

 


------=_NextPart_000_01BE_01C7ADC3.A42A6BE0--



From java-user-return-28639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 19:32:21 2007
Return-Path: <java-user-return-28639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39670 invoked from network); 13 Jun 2007 19:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 19:32:19 -0000
Received: (qmail 37527 invoked by uid 500); 13 Jun 2007 19:32:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37187 invoked by uid 500); 13 Jun 2007 19:32:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37176 invoked by uid 99); 13 Jun 2007 19:32:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 12:32:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rafael.rossini@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 12:32:10 -0700
Received: by mu-out-0910.google.com with SMTP id g7so325032muf
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 12:31:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PXM3/k0vv9XFdO2CWVQfJUus+qsbSH/j7BSWXZ5ySAxDL9B487r3WtCVuBEk+jt6IdU3EMva9AzZ2cUpMEdaKmFjnl1kXP/drg933c2hrNi05fIHFrO+C4vk4hEWL3F1ytJXC2PCKFNmwnZ90Q5dL+um0pMN0dHwpqaxQMUXK7I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bqUtbnDGe1gz+xlloPVQiKG0Nkm+90FXV26HDDv7kIzL3D95YlHQGtjvkOpT4/fjiPLtemVOz+zKDMS4rlchYpYU08svDlQ9wyi34Pud1dFm7ozwJK5KoMiNZ29AvMYxaJQ4s0FDYEOVn9XxR8nhuW4EPDsZ8hEvRXM93jvk/KY=
Received: by 10.82.162.14 with SMTP id k14mr1788860bue.1181763108687;
        Wed, 13 Jun 2007 12:31:48 -0700 (PDT)
Received: by 10.82.115.16 with HTTP; Wed, 13 Jun 2007 12:31:48 -0700 (PDT)
Message-ID: <a8d89b3b0706131231l1497a715ob6b353b1ee9f8bcc@mail.gmail.com>
Date: Wed, 13 Jun 2007 16:31:48 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: multiple questions about lucene
In-Reply-To: <01bd01c7aded$8d0073e0$6a5ee183@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16202_27163920.1181763108668"
References: <01bd01c7aded$8d0073e0$6a5ee183@dhcp.fnal.gov>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16202_27163920.1181763108668
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Tanya,

   I think one option is to index each log file with 2 fields, the name of
the log file and a line of your log. This way you can do a query like
this:   +log_file_name:"log1" +line:"word1" -(+line:"word1" +line"word2")


Hope it helps,
    Rossini


On 6/13/07, Tanya Levshina <tanya@volvovski.com> wrote:
>
> Hi,
>
> 1. I am dealing with the logs files and have to index the whole file (the
> attempt to increase setMaxFielldLength eventually causes out of memory
> error). I am sure that I am not a first person that encounters this
> problem.
> What is the most efficient way to handle this situation?
>
> 2. I am indexing  a file that contains the following text:
>
> Contents:
>
> Word_1..Word_2..\n
>
> Word_1..Word_3..\n
>
> I would like to create a query "search for files that contains Word_1 but
> do
> not contain Word_1 and Word_2 in one line" and to get search to return the
> name of the file. When I tried +Word_1 -Word_2 nothing is returned. I can
> not use slope because I have no idea about number of tokens between these
> two words. Any idea?
>
> Thanks,
>
> Tanya
>
>
>
>

------=_Part_16202_27163920.1181763108668--

From java-user-return-28640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 19:39:36 2007
Return-Path: <java-user-return-28640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46729 invoked from network); 13 Jun 2007 19:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 19:39:35 -0000
Received: (qmail 70866 invoked by uid 500); 13 Jun 2007 19:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70827 invoked by uid 500); 13 Jun 2007 19:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70816 invoked by uid 99); 13 Jun 2007 19:39:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 12:39:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 12:39:23 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1HyYgI-0005Nh-JC
	for java-user@lucene.apache.org; Wed, 13 Jun 2007 12:39:02 -0700
Message-ID: <11107323.post@talk.nabble.com>
Date: Wed, 13 Jun 2007 12:39:02 -0700 (PDT)
From: Brad Harper <brad.harper@epsiia.com>
To: java-user@lucene.apache.org
Subject: Investigating Lucene's Applicability to [Unusual?] Use Case
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: brad.harper@epsiia.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello: 

[This is not an intentional cross-posting. I posted this same question to
the 'general' lucene list; replies there suggested that I'd have
better/quicker responses using this list instead.]

I'm investigating Lucene as a replacement for a special-purpose search
technology that was developed long before Lucene (or any of the current IR
libraries) became available. 

The use case involves so-called print streams. Imagine 20,000 statements
concatenated into one large file suitable for delivery to a print system.
The document formats vary, but include AFP (an IBM printer format), PCL (an
HP format), Postscript, PDF, and even "plain-text". 

The indexing application must track the total page count of the embedded
statements. On a hit, the search application must extract and return the
[possibly multi-page] statement embedded within the larger print-stream
file. 

How would the search application know (be informed by the Lucene/indexer)
the extent of the internal document(s)? 

I'm not seeing this scenario discussed in forums or books. Does anyone have
comments or thoughts on Lucene's applicability as a solution? 

Thanks. 

Brad
-- 
View this message in context: http://www.nabble.com/Investigating-Lucene%27s-Applicability-to--Unusual---Use-Case-tf3917320.html#a11107323
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 22:20:30 2007
Return-Path: <java-user-return-28641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38654 invoked from network); 13 Jun 2007 22:20:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 22:20:28 -0000
Received: (qmail 94238 invoked by uid 500); 13 Jun 2007 22:20:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94190 invoked by uid 500); 13 Jun 2007 22:20:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94173 invoked by uid 99); 13 Jun 2007 22:20:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 15:20:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 15:20:17 -0700
Received: by nz-out-0506.google.com with SMTP id x7so306423nzc
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 15:19:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=krULjx6ojYm0we8cpuGzVpzZblWADBxxFm4E/EhQmWugWpfRk/DkThu6OVnJ4B/fv+qALkFZHudkbkQByT2PoWFSvlKWl3yW/Kntd0v1D3Vp95helFPNIuP6BX9VstGP67InoVADUjMSoZi60OBl41RlsEeoM9T1wFnE+ItOkVM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NcbXgjPRWvxcAXshGttUUgqs8ZBpLva1LY+sLoRYo/IpPnJBLzi0rikXblz8acxXF2U8Auwz3elb7tzwU9pTcIdpPKsaGQ2wFHuNf5U7lwOpihd5jKw1eKu8DKHCzorVmgSPoUCxIr94BTPoOYghb3Rp5AFpEGnVk0WvsaFJQB8=
Received: by 10.142.77.11 with SMTP id z11mr58127wfa.1181773196156;
        Wed, 13 Jun 2007 15:19:56 -0700 (PDT)
Received: by 10.142.72.4 with HTTP; Wed, 13 Jun 2007 15:19:56 -0700 (PDT)
Message-ID: <126142c0706131519s62497ea2n270a3eaad30cf129@mail.gmail.com>
Date: Wed, 13 Jun 2007 19:19:56 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance of DbDirectory
In-Reply-To: <20070613083208.GC67558@thegestalt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070613083208.GC67558@thegestalt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Simon:
   If you are using Oracle 10g you can get the advantage of using
Lucene inside the Oracle JVM.
   Look at this contribution:
http://issues.apache.org/jira/browse/LUCENE-724
   The most important difference of this implementation in that all
the operation between Lucene to index table data and to store the
inverted index into a BLOB is that everything its made in the same
memory space!! no network roundtrip and data marshalling.
   You can check the difference in term of performance between
FSDirectory and OJVMDirectory simply by running all the Lucene test
suite inside the OJVM or outside.
   My test reports an slightly difference for using the BLOB Api
instead the FS API.
   The other import point in this implementation is the Domain Index
API, it means that all operations are synchronized by the Oracle
RDBMS, so update, insert and delete operations are automatically
handled and synchronized by the Domain Index.
   Best regards, Marcelo.
On 6/13/07, Simon Wistow <simon@thegestalt.org> wrote:
> I recently had a thought to do with DbDirectory - specifically would it
> be possible to use something like Oracle's inbuilt replication to have
> mutiple Reader machine being able to read the index with automatic
> partitioning, redundancy and failover?
>
> Also, what is performance like for DbDirectory compared to FSDirectory?
>
> And would using DbDirectory and Oracle's backup tools allow for
> snapshots of the index to be taken without having to close the
> IndexWriter and take a physical copy of the index or will that still
> leave unmerged segment files around which will be in an inconsistent
> state at restart (unless Oracle takes an instantaneous snapshot of the
> whole index I suppose).
>
> Is this a completely loopy idea or mildly sensible?
>
> Thanks,
> Simon
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 23:13:42 2007
Return-Path: <java-user-return-28642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56113 invoked from network); 13 Jun 2007 23:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 23:13:41 -0000
Received: (qmail 88353 invoked by uid 500); 13 Jun 2007 23:13:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88312 invoked by uid 500); 13 Jun 2007 23:13:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88295 invoked by uid 99); 13 Jun 2007 23:13:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 16:13:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 16:13:32 -0700
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l5DND7mM011986
	for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 16:13:10 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: Wildcard query with untokenized punctuation (again)
Date: Wed, 13 Jun 2007 16:13:02 -0700
Message-ID: <004101c7ae10$674e8f60$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0042_01C7ADD5.BAEFB760"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
thread-index: AceuEGQXMhHjQ31aSDKDgT4g1t6ncA==
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0042_01C7ADD5.BAEFB760
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

My very simple analyzer produces tokens made of digits and/or letters only.
Anything else is discarded. E.g. the input "smith,anna" gets tokenized as 2
tokens, first "smith" then "anna".
 
Say I have indexed documents that contained both "smith,anna" and
"smith,annanicole". To find them, I enter the query <<smith,ann*>>. The
stock Lucene 2.0 query parser produces a PrefixQuery for the single token
"smith,ann". This token doesn't exist in my index, and I don't get a match.
 
I have found some references to this:
http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-tf3378386.
html
but I don't understand how I can fix it. Comma-separated terms like this can
appear in any field; I don't think I can create an untokenized field.
 
Really what I would like in this case is for the comma to be considered
whitespace, and the query to be parsed to <<+smith +ann*>>. Any way I can do
that?
 
--Renaud
 
 

------=_NextPart_000_0042_01C7ADD5.BAEFB760--



From java-user-return-28643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 13 23:44:53 2007
Return-Path: <java-user-return-28643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91096 invoked from network); 13 Jun 2007 23:44:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2007 23:44:53 -0000
Received: (qmail 42281 invoked by uid 500); 13 Jun 2007 23:44:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42111 invoked by uid 500); 13 Jun 2007 23:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42096 invoked by uid 99); 13 Jun 2007 23:44:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 16:44:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 16:44:44 -0700
Received: by py-out-1112.google.com with SMTP id a25so1056693pyi
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 16:44:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Qn6S61w+OAcrCH6yAPYjqq/bE16eOTAe+4zQWabjRwKMe63dTtIIMYYJG+Y0/Xan3sC7hajt7F3ZM1t0NdaEM2MF67LYmF5WAfgsezD3LH9HuMddd17fCEabZevZnExGcWsYLSU6RjLds05mXsx0aA2QQpgTL71MRg2zCz82KnU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=eLtFeuvhdYjgblSmHCfrV8qF1wGX9I8JQphQp33ObtZgjyTV19fOOX2wO7w5rwSy3DjAyPFV63D1B8uBrHEVHeab4Yt3hgJ2V5K9LCA2y1gBywCtOYajCiF5DiXYVROoScDslBtAG4TziWfH0FCKVPdRu1O3Ui9kb7vpONhrMjs=
Received: by 10.35.78.9 with SMTP id f9mr2043411pyl.1181778264073;
        Wed, 13 Jun 2007 16:44:24 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id n67sm1495899pyh.2007.06.13.16.44.22
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 13 Jun 2007 16:44:23 -0700 (PDT)
Message-ID: <4670813F.70609@gmail.com>
Date: Wed, 13 Jun 2007 19:43:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Wildcard query with untokenized punctuation (again)
References: <004101c7ae10$674e8f60$970fda80@libraria.ucsf.edu>
In-Reply-To: <004101c7ae10$674e8f60$970fda80@libraria.ucsf.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

After taking a quick look, I don't see how you can do this without 
modifying the QueryParser. In QueryParser.jj you will find the conflict 
of interest at line 891. This line will cause a match on smith,ann* and 
trigger a wildcard term match on the whole piece.

This is again caused by the fact that the QueryParser parses your query 
string and breaks it up before sending pieces to the analyzer. This is a 
much different scenario than when you feed your analyzer for indexing -- 
in the indexing case, the analyzer gets fed the text all in one piece. 
To further aggravate matters, the analyzer that you pass to the 
QueryParser does not even get to see smith,ann* -- when that pattern is 
found, the term is sent to getWildcardQuery and the analyzer is 
completely skipped.

You might think of a clever way to override getWildcardQuery and check 
the input string for punctuation. If you find some, you might find a way 
produce an appropriate query.

A more invasive suggestion would be to recompile QueryParser.jj and 
change line 868: <#_TERM_CHAR: ( <_TERM_START_CHAR> | <_ESCAPED_CHAR> | 
"-" | "+" ) > so that a comma will not be recognized as a TERM_CHAR.

- Mark


Renaud Waldura wrote:
> My very simple analyzer produces tokens made of digits and/or letters only.
> Anything else is discarded. E.g. the input "smith,anna" gets tokenized as 2
> tokens, first "smith" then "anna".
>  
> Say I have indexed documents that contained both "smith,anna" and
> "smith,annanicole". To find them, I enter the query <<smith,ann*>>. The
> stock Lucene 2.0 query parser produces a PrefixQuery for the single token
> "smith,ann". This token doesn't exist in my index, and I don't get a match.
>  
> I have found some references to this:
> http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-tf3378386.
> html
> but I don't understand how I can fix it. Comma-separated terms like this can
> appear in any field; I don't think I can create an untokenized field.
>  
> Really what I would like in this case is for the comma to be considered
> whitespace, and the query to be parsed to <<+smith +ann*>>. Any way I can do
> that?
>  
> --Renaud
>  
>  
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 05:42:01 2007
Return-Path: <java-user-return-28644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21647 invoked from network); 14 Jun 2007 05:41:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 05:41:59 -0000
Received: (qmail 92575 invoked by uid 500); 14 Jun 2007 05:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92425 invoked by uid 500); 14 Jun 2007 05:41:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92398 invoked by uid 99); 14 Jun 2007 05:41:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 22:41:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cool.rajat@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 22:41:47 -0700
Received: by nz-out-0506.google.com with SMTP id x7so379307nzc
        for <java-user@lucene.apache.org>; Wed, 13 Jun 2007 22:41:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EKstjMCwdaRz30QP5INT8YTSzap6q3j5ZrfWdy2ZOW1AzM+h61heVvsIj+yRNXVxGfROdtIav8Y+eoBKovscNjVcRr3ocPc+u53ijqz5rZMDVo4Y17Tg9vG6ow//14Pp023Y71frFuosIE9NwNNpaLFAtVcIoYZuxZOFjzdE+y4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=crPliCZyvpesBoUAQQqPVxI250Yg7o28qBYWJXW7Vvw3W2TgQZDaydkclMtXRhQuN/wHbkrRP/6zx5hvDIwjc+h6jGZuiTUb5OVCNe4TFwZ83z9LneLHogAfX7yuxHgmjJaYM19df3Yj+KNpbP5pYjwd6KYmu7vOgC37dTgNi9I=
Received: by 10.143.167.4 with SMTP id u4mr72431wfo.1181799686242;
        Wed, 13 Jun 2007 22:41:26 -0700 (PDT)
Received: by 10.143.29.1 with HTTP; Wed, 13 Jun 2007 22:41:26 -0700 (PDT)
Message-ID: <1bd995a0706132241q7535579ey10a14239f0c6a812@mail.gmail.com>
Date: Thu, 14 Jun 2007 11:11:26 +0530
From: "rajat mahajan" <cool.rajat@gmail.com>
To: java-user@lucene.apache.org
Subject: Using Lucene to search Multiple Databases
In-Reply-To: <1bd995a0706130252i50f13f8ck86d2e0b6786cc98f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21153_10646977.1181799686219"
References: <1bd995a0706130252i50f13f8ck86d2e0b6786cc98f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21153_10646977.1181799686219
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

HI,

 My requirement is to search multiple databases which are present on
different machines all of which are indexed using lucene
 Can it be done using the web interface of lucene ?
 If yes what is the procedure for that and what other tools are requried?

 To make it more clear, i'm giving an example

Say, i have two machines having IP address x.x.x.10 and x.x.x.11
and i want a client which can search both of them and retrieve all the
records matching the keyword
Can this be done?

I am using Tomcat as server with lucene-2.1.0 as the searching application
All ideas are welcomed...

Thanks and Regards,
Rajat Mahajan.

------=_Part_21153_10646977.1181799686219--

From java-user-return-28645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 06:58:30 2007
Return-Path: <java-user-return-28645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42197 invoked from network); 14 Jun 2007 06:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 06:58:29 -0000
Received: (qmail 67647 invoked by uid 500); 14 Jun 2007 06:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67606 invoked by uid 500); 14 Jun 2007 06:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67595 invoked by uid 99); 14 Jun 2007 06:58:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 23:58:22 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jun 2007 23:58:18 -0700
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5E6vt6k006255
	for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 02:57:55 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5E6vWhr006454
	for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 02:57:55 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 14 Jun 2007 02:57:46 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: How to Use ParallelReader
Date: Thu, 14 Jun 2007 02:57:02 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE84016C9D39@CORPUSMX10B.corp.emc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to Use ParallelReader
Thread-Index: AceuUNvQfhXOiraPQ7iED7GDZFqWJQAACtLw
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Jun 2007 06:57:46.0027 (UTC) FILETIME=[4FF32FB0:01C7AE51]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.13.234533
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, SUPERLONG_LINE 0.05, NO_REAL_NAME 0, __CP_MEDIA_2_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

There is one class named org.apache.lucene.index.ParallelReader, as its =
javadoc stated:
An IndexReader which reads multiple, parallel indexes. Each index added =
must have the same number of documents, but typically each contains =
different fields. Each document contains the union of the fields of all =
documents with the same document number. When searching, matches for a =
query term are from the first index added that has the field.
This is useful, e.g., with collections that have large fields which =
change rarely and small fields that change more frequently. The smaller =
fields may be re-indexed in a new index and both indexes may be searched =
together.=20
Warning: It is up to you to make sure all indexes are created and =
modified the same way. For example, if you add documents to one index, =
you need to add the same documents in the same order to the other =
indexes. Failure to do so will result in undefined behavior.=20

My question is: If I just want to update the small fields in one index =
and do not want to update the large fields in another index, how can I =
make sure these two indexes are synchronized and have the same document =
number?

Thanks and Regards=A0=A0=A0=A0=A0=20
Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 07:23:51 2007
Return-Path: <java-user-return-28646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57762 invoked from network); 14 Jun 2007 07:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 07:23:50 -0000
Received: (qmail 9788 invoked by uid 500); 14 Jun 2007 07:23:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9759 invoked by uid 500); 14 Jun 2007 07:23:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9747 invoked by uid 99); 14 Jun 2007 07:23:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 00:23:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.146.189.27] (HELO web23002.mail.ird.yahoo.com) (217.146.189.27)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Jun 2007 00:23:41 -0700
Received: (qmail 26616 invoked by uid 60001); 13 Jun 2007 20:12:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=mMksBYdcQAfIoeiM/NaGMpjCixBSAIDzXK7thzPumNMwhFgynUEfcHvT/h/O1bDP0IIsxZhiTiF6JKlx+hNYWoFJwH1bTbrsbTWvCtyDHOQAbOvqxYAy0TQ43UJPPE5XZcpz70GRQolFIzMbWlUb7I5E8TPLidDaGEH/7M0aBOI=;
X-YMail-OSG: Lz5mkkQVM1ntQfRe40zNEdZzbB5B2XWzSLC3mnH6FQdCSIHk5LIvJiaTb9YaGpdOV0IpQPkKwZE9IVGV4f1Nni9wNssvdDBxe6XIWdEupS1.gRinqS8xveOQ75v2GwQpbEUcG3._SpxzUQ--
Received: from [84.131.250.145] by web23002.mail.ird.yahoo.com via HTTP; Wed, 13 Jun 2007 20:12:38 GMT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Wed, 13 Jun 2007 20:12:38 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Investigating Lucene's Applicability to [Unusual?] Use Case
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <460489.24702.qm@web23002.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

sounds easy (I said sounds :),
e.g. 
your Statement becomes Document in Lucene lingo, you make it with 3-4 Lucene fields, 
CONTENT (Tokenized, not stored)
OFFSET(not indexed, stored) - offset in file of the first byte of your statement
DOC_LENGTH(not indexed, stored) - if you have no END-OF-Statement to identify end of it
PAGE_COUNT(not indexed, stored) - you have to know it before add(Document), but that is your domain. Lucene has no idea  what your "pages" are

you can search on CONTENT and than fetch OFFSET/LENGTH for hits, so you can easily identify your statement

as an optimization, you could pack offset/length/page count to one binary field... but that would be to early :)

have fun and be surprised how fast this can be 
e.

----- Original Message ----
From: Brad Harper <brad.harper@epsiia.com>
To: java-user@lucene.apache.org
Sent: Wednesday, 13 June, 2007 9:39:02 PM
Subject: Investigating Lucene's Applicability to [Unusual?] Use Case


Hello: 

[This is not an intentional cross-posting. I posted this same question to
the 'general' lucene list; replies there suggested that I'd have
better/quicker responses using this list instead.]

I'm investigating Lucene as a replacement for a special-purpose search
technology that was developed long before Lucene (or any of the current IR
libraries) became available. 

The use case involves so-called print streams. Imagine 20,000 statements
concatenated into one large file suitable for delivery to a print system.
The document formats vary, but include AFP (an IBM printer format), PCL (an
HP format), Postscript, PDF, and even "plain-text". 

The indexing application must track the total page count of the embedded
statements. On a hit, the search application must extract and return the
[possibly multi-page] statement embedded within the larger print-stream
file. 

How would the search application know (be informed by the Lucene/indexer)
the extent of the internal document(s)? 

I'm not seeing this scenario discussed in forums or books. Does anyone have
comments or thoughts on Lucene's applicability as a solution? 

Thanks. 

Brad
-- 
View this message in context: http://www.nabble.com/Investigating-Lucene%27s-Applicability-to--Unusual---Use-Case-tf3917320.html#a11107323
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 13:23:41 2007
Return-Path: <java-user-return-28647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12323 invoked from network); 14 Jun 2007 13:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 13:23:41 -0000
Received: (qmail 48756 invoked by uid 500); 14 Jun 2007 13:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48724 invoked by uid 500); 14 Jun 2007 13:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48708 invoked by uid 99); 14 Jun 2007 13:23:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 06:23:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 06:23:32 -0700
Received: by wx-out-0506.google.com with SMTP id t8so441260wxc
        for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 06:23:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bJjGYMHcFbygHw6GJ+/oMZNZ/g6Gm8zMe/mf5BY2gr0dNZX0DGIAVthx+oHo0/Ldw1E4wcjalSXVtiIfFflk6mDwQs18Dbb/Fg4vFJNNSzsfpmTlHh6cxDsyy1az3d8MzkgDdUZcDnY7AYSbCCf0CufigRoAxuRUyMp6+QEzKSw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=DzcWg4g+0yhYLSHh4UZNFid9eACuyr09KBFXDwIwAQgCRrpG3rcmpL6xePll/Q6lck244WfnyyrJDKbDT12uubyTx4+4DmnwyzQIcv6ewl9Iu5n92LtowUuFKTyFg5/0bIjlWAk7ypPHwqeVvw1Iz3PLChQ7QBpKb60ydI9LztY=
Received: by 10.90.106.11 with SMTP id e11mr1334933agc.1181827390880;
        Thu, 14 Jun 2007 06:23:10 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 10sm2176105wrl.2007.06.14.06.23.10
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 14 Jun 2007 06:23:10 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1181756179.5944.25.camel@pipe>
References: <1181756179.5944.25.camel@pipe>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <59F2E134-2144-474B-AECE-46FC026EBCEA@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: In which position of a document a word was found?
Date: Thu, 14 Jun 2007 09:23:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the SpanQuery (starting at page 161 in LIA or in the =20
javadocs).  I also have some info in my ApacheCon talk at http://=20
www.cnlp.org/presentations/slides/AdvancedLuceneEU.pdf and http://=20
www.cnlp.org/apachecon2005

Incidentally, the SpanQuery functionality does not require =20
TermVectors, so if you don't need them otherwise, you would get a =20
smaller index size.

Cheers,
Grant

On Jun 13, 2007, at 1:36 PM, Felipe S=E1nchez Mart=EDnez wrote:

> Hi all,
>
> I am new to Lucene and I have been reading the book "Lucene In =20
> Action",
> here is my question:
>
> When searching for a word through an index is there any way to know in
> which positions (may be more than one) of each document that word was
> found?
>
> The index is constructed in the following way:
> ---------------------
> IndexWriter writer =3D new IndexWriter("/path/to/the/index/dir",
> new StandardAnalyzer(), true);
>
> writer.setUseCompoundFile(false);
>
> Document doc =3D new Document();
>
> doc.add(new Field("contents",
> new FileReader(f),Field.TermVector.WITH_POSITIONS_OFFSETS));
>
> doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
> Field.Index.NO_NORMS));
>
> writer.addDocument(doc);
> .....
> --------------------
>
>
> Thanks in advance
> --
> Felipe.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 13:25:36 2007
Return-Path: <java-user-return-28648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13992 invoked from network); 14 Jun 2007 13:25:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 13:25:34 -0000
Received: (qmail 53640 invoked by uid 500); 14 Jun 2007 13:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53593 invoked by uid 500); 14 Jun 2007 13:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53579 invoked by uid 99); 14 Jun 2007 13:25:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 06:25:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 06:25:25 -0700
Received: by ug-out-1314.google.com with SMTP id m2so706552uge
        for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 06:25:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Kqp05NyWgimOf2d/8mRI4zzTLX4rHVlE2w5dZkjY8yudFprzF+5LbEX1ZNibucOch4+kl1LhckGEl3RrcxKWvVNXBICr+xmpsdJlTI4Li2ZdMLQ5zatR1ci0QJ9spey0rWF6FzNhglt6LJHCNiLYkAYV8qtLKCeDXn3BZdQP2W8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hzu/K2NXjgmmjUq++Y4OIJGc6qab3upFwjSw8B1SILbY69co6JeiFIJn3hoOmVB8LoMR3Udi78NdFlvdM+muLIJon24s6h3fajapeZr4Seonj5aGc62J8jtPawmYS/iKU77qRh7TKpBnTtLpfC4CCmHx4hdyKW4qGegVVplbL/s=
Received: by 10.82.160.2 with SMTP id i2mr3405559bue.1181827504472;
        Thu, 14 Jun 2007 06:25:04 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 14 Jun 2007 06:25:04 -0700 (PDT)
Message-ID: <359a92830706140625s22f48160oe102422dce714ee5@mail.gmail.com>
Date: Thu, 14 Jun 2007 09:25:04 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wildcard query with untokenized punctuation (again)
In-Reply-To: <004101c7ae10$674e8f60$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26725_17975153.1181827504410"
References: <004101c7ae10$674e8f60$970fda80@libraria.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26725_17975153.1181827504410
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, perhaps the simplest thing would be to pre-process the query and
make the comma into a whitespace before sending anything to the
query parser. I don't know how generalizable that sort of solution is in
your problem space though....

Best
Erick

On 6/13/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
>
> My very simple analyzer produces tokens made of digits and/or letters
> only.
> Anything else is discarded. E.g. the input "smith,anna" gets tokenized as
> 2
> tokens, first "smith" then "anna".
>
> Say I have indexed documents that contained both "smith,anna" and
> "smith,annanicole". To find them, I enter the query <<smith,ann*>>. The
> stock Lucene 2.0 query parser produces a PrefixQuery for the single token
> "smith,ann". This token doesn't exist in my index, and I don't get a
> match.
>
> I have found some references to this:
>
> http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-tf3378386
> .
> html
> but I don't understand how I can fix it. Comma-separated terms like this
> can
> appear in any field; I don't think I can create an untokenized field.
>
> Really what I would like in this case is for the comma to be considered
> whitespace, and the query to be parsed to <<+smith +ann*>>. Any way I can
> do
> that?
>
> --Renaud
>
>
>

------=_Part_26725_17975153.1181827504410--

From java-user-return-28649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 13:39:19 2007
Return-Path: <java-user-return-28649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22695 invoked from network); 14 Jun 2007 13:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 13:39:17 -0000
Received: (qmail 11192 invoked by uid 500); 14 Jun 2007 13:39:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11148 invoked by uid 500); 14 Jun 2007 13:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11136 invoked by uid 99); 14 Jun 2007 13:39:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 06:39:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 06:39:10 -0700
Received: from [192.168.3.105] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id A55455D75
	for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 15:38:46 +0200 (CEST)
Message-ID: <467144E2.3090702@garambrogne.net>
Date: Thu, 14 Jun 2007 15:38:42 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Wildcard query with untokenized punctuation (again)
References: <004101c7ae10$674e8f60$970fda80@libraria.ucsf.edu>
In-Reply-To: <004101c7ae10$674e8f60$970fda80@libraria.ucsf.edu>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

if you don't use the same tokenizer for indexing and searching, you will
have troubles like this.
Mixing exact match (with ") and wildcard (*) is a strange idea.
Typographical rules says that you have a space after a comma, no?
Your field is tokenized?

M.

Renaud Waldura a écrit :
> My very simple analyzer produces tokens made of digits and/or letters only.
> Anything else is discarded. E.g. the input "smith,anna" gets tokenized as 2
> tokens, first "smith" then "anna".
>  
> Say I have indexed documents that contained both "smith,anna" and
> "smith,annanicole". To find them, I enter the query <<smith,ann*>>. The
> stock Lucene 2.0 query parser produces a PrefixQuery for the single token
> "smith,ann". This token doesn't exist in my index, and I don't get a match.
>  
> I have found some references to this:
> http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-tf3378386.
> html
> but I don't understand how I can fix it. Comma-separated terms like this can
> appear in any field; I don't think I can create an untokenized field.
>  
> Really what I would like in this case is for the comma to be considered
> whitespace, and the query to be parsed to <<+smith +ann*>>. Any way I can do
> that?
>  
> --Renaud
>  
>  
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 13:44:34 2007
Return-Path: <java-user-return-28650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24974 invoked from network); 14 Jun 2007 13:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 13:44:33 -0000
Received: (qmail 22973 invoked by uid 500); 14 Jun 2007 13:44:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22935 invoked by uid 500); 14 Jun 2007 13:44:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22924 invoked by uid 99); 14 Jun 2007 13:44:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 06:44:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 06:44:25 -0700
Received: by py-out-1112.google.com with SMTP id a25so1489234pyi
        for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 06:44:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Emek8WsQXqYF1x8r3azvT0xxPYX/SIRq61NVFjTcUJqYdn9s7pwBBcUfbo0jOnxRB2NC7ZGXz30xeswGB2HS+DF28xMlAAsjKes7hYNtmiVi74buGYtgGm3Lvf/fsdqpYMR3JYy2eBeHvkY1qQvU28/yyC+rRE7zY+Q8cDIuqG4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=sOxWAKpiFAVVb6/CCeLIMg30BsirFXSHjkZP0y+qwW+d9H/JOhDskx47r4UiARVZWDb5rSzxhAORyDlBiwEw5iPzm/89XFdq26J46vJ9A1tbjIZMYq4/eBojlhA+zpbh0KMDSGJApe66E4r4/2ZTSKgRk9wuWuEWCVkg6uh5iE8=
Received: by 10.35.86.12 with SMTP id o12mr3214459pyl.1181828643690;
        Thu, 14 Jun 2007 06:44:03 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id f78sm3212932pyh.2007.06.14.06.44.02
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 14 Jun 2007 06:44:03 -0700 (PDT)
Message-ID: <467145FE.5070602@gmail.com>
Date: Thu, 14 Jun 2007 09:43:26 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Wildcard query with untokenized punctuation (again)
References: <004101c7ae10$674e8f60$970fda80@libraria.ucsf.edu> <359a92830706140625s22f48160oe102422dce714ee5@mail.gmail.com>
In-Reply-To: <359a92830706140625s22f48160oe102422dce714ee5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Gotto agree with Erick here...best idea is just to preprocess the query 
before sending it to the QueryParser.

My first thought is always to get out the sledgehammer...

- Mark

Erick Erickson wrote:
> Well, perhaps the simplest thing would be to pre-process the query and
> make the comma into a whitespace before sending anything to the
> query parser. I don't know how generalizable that sort of solution is in
> your problem space though....
>
> Best
> Erick
>
> On 6/13/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
>>
>> My very simple analyzer produces tokens made of digits and/or letters
>> only.
>> Anything else is discarded. E.g. the input "smith,anna" gets 
>> tokenized as
>> 2
>> tokens, first "smith" then "anna".
>>
>> Say I have indexed documents that contained both "smith,anna" and
>> "smith,annanicole". To find them, I enter the query <<smith,ann*>>. The
>> stock Lucene 2.0 query parser produces a PrefixQuery for the single 
>> token
>> "smith,ann". This token doesn't exist in my index, and I don't get a
>> match.
>>
>> I have found some references to this:
>>
>> http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-tf3378386 
>>
>> .
>> html
>> but I don't understand how I can fix it. Comma-separated terms like this
>> can
>> appear in any field; I don't think I can create an untokenized field.
>>
>> Really what I would like in this case is for the comma to be considered
>> whitespace, and the query to be parsed to <<+smith +ann*>>. Any way I 
>> can
>> do
>> that?
>>
>> --Renaud
>>
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 16:51:51 2007
Return-Path: <java-user-return-28651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43358 invoked from network); 14 Jun 2007 16:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 16:51:50 -0000
Received: (qmail 51124 invoked by uid 500); 14 Jun 2007 16:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51086 invoked by uid 500); 14 Jun 2007 16:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51074 invoked by uid 99); 14 Jun 2007 16:51:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 09:51:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yatinsoni@interinfosystems.com designates 66.197.161.85 as permitted sender)
Received: from [66.197.161.85] (HELO ommail.org) (66.197.161.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 09:51:41 -0700
Received: from Yatin (unverified [220.224.226.146]) 
	by ommail.org (SurgeMail 3.8i3) with ESMTP id 8803043-1916768 
	for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 12:51:20 -0400
Message-ID: <003a01c7aea4$8d5b9f10$d100a8c0@Yatin>
From: "Yatin Soni" <yatinsoni@interinfosystems.com>
To: <java-user@lucene.apache.org>
Subject:  Lucene Search result (scoring )
Date: Thu, 14 Jun 2007 22:23:35 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0037_01C7AED2.A5C14360"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1106
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-Authenticated-User: yatinsoni@interinfosystems.com 
X-SpamDetect: : -1.000000 NotSpamFlag=-1.0
X-IP-stats: Notspam Incoming Last 0, First 52, in=618, out=0, spam=0 Known=true ip=220.224.226.146
X-Originating-IP: 220.224.226.146
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0037_01C7AED2.A5C14360
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

    We are using Lucene as search engine and I have a question regarding =
the scoring of search results, I had given a example for it,

Example :-->

suppose we have four Items on which we have indexed,
/////////////////////////////////////////////////////////////////////////=
///////////////////////////////////////
1)demo --> contents: Jumbo Numbers
2)demo2 --> contents: Jumbo Numbers
3)demo3 --> contents: Jumbo Numbers
4)demo4 --> contents: Jumbo Numbers

Search Results for query ->"Jumbo"

demo:  Score: 0.3884282
demo2: Score: 0.3884282
demo3: Score: 0.3884282
demo4: Score: 0.3884282
/////////////////////////////////////////////////////////////////////////=
///////////////////////////////////////
Test 1 >>  Change the contents of items

1)demo --> contents: Jumbo Numbers Stamps Numbers
2)demo2 --> contents: Jumbo Numbers Stamps Jumbo
3)demo3 --> contents: Jumbo Numbers Numbers Test
4)demo4 --> contents: Jumbo Numbers Stamps Jumbo

Search Results for query ->"Jumbo"

demo2: Score: 0.54932046
demo4: Score: 0.54932046
demo:  Score: 0.3884282
demo3: Score: 0.3884282

# In the Test 1 items(demo2 and demo4) both contains 2 occurrence of =
"Jumbo" and rest items(demo and demo3)=20
  have only one occurrence of "Jumbo" so result are coming as per the =
high score.
/////////////////////////////////////////////////////////////////////////=
///////////////////////////////////////
Test 2 >>  Change the contents of items

1)demo --> contents: Jumbo Numbers Stamps Numbers
2)demo2 --> contents: Jumbo Numbers Stamps Jumbo Parquetry Block Super =
Set
3)demo3 --> contents: Jumbo Numbers Numbers Test
4)demo4 --> contents: Jumbo Numbers Stamps Jumbo

Search Results for query ->"Jumbo"

demo4: Score: 0.5493204
demo:  Score: 0.3884282
demo3: Score: 0.3884282
demo2: Score: 0.3433253

# Now in the Test 2 We are changing the contents of demo2, and by =
searching the same query "Jumbo" the results
  are different from the Test 1.And the score for demo2 is also less as =
compare to the items (demo and demo3)=20
  which have less occurrence of "Jumbo" as compare to demo2.
/////////////////////////////////////////////////////////////////////////=
///////////////////////////////////////

According to the example search results are coming in the following =
sequence:---->
1. demo4: Score: 0.5493204
2. demo:  Score: 0.3884282
3. demo3: Score: 0.3884282
4. demo2: Score: 0.3433253

but we are expecting in the following sequence :--->
1. demo4
2. demo2
3. demo
4. demo3

OR

1. demo2
2. demo4
3. demo
4. demo3

because demo2 contains the two occurrence of "Jumbo" which is higher =
than the items demo and demo3. I have sorted the results with their =
RELEVANCE but then also
results were coming in the same sequence.

So my QUESTION is that can we make desire sequence as per the occurrence =
of a particular word? Can we make demo2 above the demo and demo3 in the =
search results?

So I need help on this issue....

Thanks,
Yatin



------=_NextPart_000_0037_01C7AED2.A5C14360--



________________________________________________________
S Naidu  Domain Name Registration, Web Hosting, Email Solutions, Website Designing, 
Ecommerce website development, Payment Gateway,  
Contact 91 22 28123113 / 91 22 28129404 Mumbai http://www.snaidu.com

From java-user-return-28652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 17:30:27 2007
Return-Path: <java-user-return-28652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72418 invoked from network); 14 Jun 2007 17:30:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 17:30:03 -0000
Received: (qmail 53122 invoked by uid 500); 14 Jun 2007 17:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53058 invoked by uid 500); 14 Jun 2007 17:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53026 invoked by uid 99); 14 Jun 2007 17:29:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 10:29:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 10:29:52 -0700
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l5EHTTof002268
	for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 10:29:32 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Wildcard query with untokenized punctuation (again)
Date: Thu, 14 Jun 2007 10:29:24 -0700
Message-ID: <000901c7aea9$9011f330$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <467145FE.5070602@gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AceuiiOjy5zg/PqmTAC4NvKoxuxohQAHMbAg
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks guys, I like it! I'm already applying some regexps before query
parsing anyway, so it's just another pass.

Now, I'm not sure how to do that without breaking another QP feature that I
kind of like: the query <<smith,ann>> is parsed to PhraseQuery("smith ann").
And that seems right, from a user standpoint.

In fact, considering this, I realize <<smith,ann*>> should be parsed to
MultiPhraseQuery("smith", "ann*"), not <<+smith +ann*>> as I said earlier.

Brrrr. Getting hairy. Any hope?

--Renaud



-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: Thursday, June 14, 2007 6:43 AM
To: java-user@lucene.apache.org
Subject: Re: Wildcard query with untokenized punctuation (again)

Gotto agree with Erick here...best idea is just to preprocess the query
before sending it to the QueryParser.

My first thought is always to get out the sledgehammer...

- Mark

Erick Erickson wrote:
> Well, perhaps the simplest thing would be to pre-process the query and 
> make the comma into a whitespace before sending anything to the query 
> parser. I don't know how generalizable that sort of solution is in 
> your problem space though....
>
> Best
> Erick
>
> On 6/13/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
>>
>> My very simple analyzer produces tokens made of digits and/or letters 
>> only.
>> Anything else is discarded. E.g. the input "smith,anna" gets 
>> tokenized as
>> 2
>> tokens, first "smith" then "anna".
>>
>> Say I have indexed documents that contained both "smith,anna" and 
>> "smith,annanicole". To find them, I enter the query <<smith,ann*>>. 
>> The stock Lucene 2.0 query parser produces a PrefixQuery for the 
>> single token "smith,ann". This token doesn't exist in my index, and I 
>> don't get a match.
>>
>> I have found some references to this:
>>
>> http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-tf3
>> 378386
>>
>> .
>> html
>> but I don't understand how I can fix it. Comma-separated terms like 
>> this can appear in any field; I don't think I can create an 
>> untokenized field.
>>
>> Really what I would like in this case is for the comma to be 
>> considered whitespace, and the query to be parsed to <<+smith 
>> +ann*>>. Any way I can do that?
>>
>> --Renaud
>>
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 19:07:00 2007
Return-Path: <java-user-return-28653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19137 invoked from network); 14 Jun 2007 19:07:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 19:07:00 -0000
Received: (qmail 45691 invoked by uid 500); 14 Jun 2007 19:06:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45665 invoked by uid 500); 14 Jun 2007 19:06:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45654 invoked by uid 99); 14 Jun 2007 19:06:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 12:06:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 12:06:51 -0700
Received: by an-out-0708.google.com with SMTP id b20so150014ana
        for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 12:06:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q3yuBL2O1G4N/Nx0uxd69QctNdUfrEAHNaHam7btzyMAn5JYhOKuUUjiFbmVLJlqauPbvUO7/Bgi1Jp3yzgAQScXabos4NH9YUY51RCPqy4F+yLF/wYLZ0cgDgWkJimmS4zmUkkgxeYVlC5tLcISh3M+I2ESdzEyOwKSXEV3Gho=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=F9846ljqQkJHFOruJMklZy292qDe62im17XN8Ov1ae4IwWEhbGEzwzaIN8TiBmvKNbfsus2s0+hzCQ5rgEKlgqS++4NZ8bxGlL6rqLjHvZuCQyhCFAH8Q2j+UF9ah3cC8gKO/sattfNt4DEm68VMB3kOqZPXJyhhD7UP4m9fyJs=
Received: by 10.100.41.8 with SMTP id o8mr482236ano.1181847990232;
        Thu, 14 Jun 2007 12:06:30 -0700 (PDT)
Received: by 10.100.9.12 with HTTP; Thu, 14 Jun 2007 12:06:30 -0700 (PDT)
Message-ID: <ab0709bf0706141206y28c051acmd59427f3ce72ce10@mail.gmail.com>
Date: Thu, 14 Jun 2007 15:06:30 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wildcard query with untokenized punctuation (again)
In-Reply-To: <000901c7aea9$9011f330$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46323_14500185.1181847990198"
References: <467145FE.5070602@gmail.com>
	 <000901c7aea9$9011f330$970fda80@libraria.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46323_14500185.1181847990198
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

All depends on what you are looking for. Ill try and give a hint as to what
is going on now:

When the QueryParser parsers <<smith,ann>> it will shove that whole piece to
the analyzer. Your analyzer returns two tokens: smith and ann. When the
QueryParser sees that more than one token is returned from a piece that was
fed to the analyzer, it makes a PhraseQuery with the each of the returned
tokens. Remember that the QueryParser feeds the analyzer in pieces, and then
creates queries based on the number of token produced from the piece (if the
piece even goes to the analyzer).

Since you will be preprocessing the query, the query parser is going to be
parsing <<smith ann*>> which causes it to feed the analyzer smith and then
ann*...neither of these pieces produce more than one token (ann* doesnt even
go to the analyzer), so no PhraseQuery is produced. Instead you will produce
a BooleanQuery with the term smith and the wildcard query ann*, both with an
occur of whatever your default operator is.

One thing I am wondering is if you even really want the query to be a
PhraseQuery or if your just accepting the behavior you getting from the
QueryParser. Right now, PhraseQuery's do not support wildcards (nor do
MultiPhraseQuery's). I don't think the support would be that difficult (use
a wildcard term enumerator to correctly fill out a MultiPhraseQuery), but it
might take some thought to get the QueryParser to act as you want (generate
a PhraseQuery or MultiPhraseQuery when it sees <<smith ann*>>).

Are you sure you need a PhraseQuery and not a Boolean query of Should
clauses?

- Mark

On 6/14/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
>
> Thanks guys, I like it! I'm already applying some regexps before query
> parsing anyway, so it's just another pass.
>
> Now, I'm not sure how to do that without breaking another QP feature that
> I
> kind of like: the query <<smith,ann>> is parsed to PhraseQuery("smith
> ann").
> And that seems right, from a user standpoint.
>
> In fact, considering this, I realize <<smith,ann*>> should be parsed to
> MultiPhraseQuery("smith", "ann*"), not <<+smith +ann*>> as I said earlier.
>
> Brrrr. Getting hairy. Any hope?
>
> --Renaud
>
>
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Thursday, June 14, 2007 6:43 AM
> To: java-user@lucene.apache.org
> Subject: Re: Wildcard query with untokenized punctuation (again)
>
> Gotto agree with Erick here...best idea is just to preprocess the query
> before sending it to the QueryParser.
>
> My first thought is always to get out the sledgehammer...
>
> - Mark
>
> Erick Erickson wrote:
> > Well, perhaps the simplest thing would be to pre-process the query and
> > make the comma into a whitespace before sending anything to the query
> > parser. I don't know how generalizable that sort of solution is in
> > your problem space though....
> >
> > Best
> > Erick
> >
> > On 6/13/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
> >>
> >> My very simple analyzer produces tokens made of digits and/or letters
> >> only.
> >> Anything else is discarded. E.g. the input "smith,anna" gets
> >> tokenized as
> >> 2
> >> tokens, first "smith" then "anna".
> >>
> >> Say I have indexed documents that contained both "smith,anna" and
> >> "smith,annanicole". To find them, I enter the query <<smith,ann*>>.
> >> The stock Lucene 2.0 query parser produces a PrefixQuery for the
> >> single token "smith,ann". This token doesn't exist in my index, and I
> >> don't get a match.
> >>
> >> I have found some references to this:
> >>
> >> http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-tf3
> >> 378386
> >>
> >> .
> >> html
> >> but I don't understand how I can fix it. Comma-separated terms like
> >> this can appear in any field; I don't think I can create an
> >> untokenized field.
> >>
> >> Really what I would like in this case is for the comma to be
> >> considered whitespace, and the query to be parsed to <<+smith
> >> +ann*>>. Any way I can do that?
> >>
> >> --Renaud
> >>
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_46323_14500185.1181847990198--

From java-user-return-28654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 14 19:51:41 2007
Return-Path: <java-user-return-28654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50847 invoked from network); 14 Jun 2007 19:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2007 19:51:34 -0000
Received: (qmail 23667 invoked by uid 500); 14 Jun 2007 19:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23591 invoked by uid 500); 14 Jun 2007 19:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23517 invoked by uid 99); 14 Jun 2007 19:51:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 12:51:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 12:51:22 -0700
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l5EJow4d001439
	for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 12:51:01 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Wildcard query with untokenized punctuation (again)
Date: Thu, 14 Jun 2007 12:50:53 -0700
Message-ID: <001501c7aebd$54114b60$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <ab0709bf0706141206y28c051acmd59427f3ce72ce10@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: Aceuty9ZCamSVB9uS5WKeyzz1GI25QAA0diA
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for this crystal-clear explanation Mark!

> Are you sure you need a PhraseQuery and not a Boolean 
> query of Should clauses?

Excellent question. What's the requirement, hey? Well, the requirement is to
find documents referring to "annanicole smith", "anna smith" and "annaliese
smith" etc. when users enter "smith,ann*". Right now nothing is returned. 

Now, it can be argued whether it should be a phrase query or not. What does
a user expect when searching for <<smith,ann*>>? In our application, this
comma-separated format is used in documents metadata, so I think users
expect an exact match, hence a phrase query. (I'll confirm with the PM.)

> I don't think the support would be that difficult (use a wildcard 
> term enumerator to correctly fill out a MultiPhraseQuery), but it 
> might take some thought to get the QueryParser to act as you want 
> (generate a PhraseQuery or MultiPhraseQuery when it sees <<smith ann*>>).

Indeed. This is what I'm struggling with. How would I do that?

I have also found
http://www.nabble.com/Phrase-queries-with-wildcards-tf2748584.html#a7668492
which discusses precisely this issue: how to get QueryParser to generate
MultiPhraseQueries. Got some good ideas from it, but unfortunately no
complete solution. I'll keep on hacking.

--Renaud
 

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: Thursday, June 14, 2007 12:07 PM
To: java-user@lucene.apache.org
Subject: Re: Wildcard query with untokenized punctuation (again)

All depends on what you are looking for. Ill try and give a hint as to what
is going on now:

When the QueryParser parsers <<smith,ann>> it will shove that whole piece to
the analyzer. Your analyzer returns two tokens: smith and ann. When the
QueryParser sees that more than one token is returned from a piece that was
fed to the analyzer, it makes a PhraseQuery with the each of the returned
tokens. Remember that the QueryParser feeds the analyzer in pieces, and then
creates queries based on the number of token produced from the piece (if the
piece even goes to the analyzer).

Since you will be preprocessing the query, the query parser is going to be
parsing <<smith ann*>> which causes it to feed the analyzer smith and then
ann*...neither of these pieces produce more than one token (ann* doesnt even
go to the analyzer), so no PhraseQuery is produced. Instead you will produce
a BooleanQuery with the term smith and the wildcard query ann*, both with an
occur of whatever your default operator is.

One thing I am wondering is if you even really want the query to be a
PhraseQuery or if your just accepting the behavior you getting from the
QueryParser. Right now, PhraseQuery's do not support wildcards (nor do
MultiPhraseQuery's). I don't think the support would be that difficult (use
a wildcard term enumerator to correctly fill out a MultiPhraseQuery), but it
might take some thought to get the QueryParser to act as you want (generate
a PhraseQuery or MultiPhraseQuery when it sees <<smith ann*>>).

Are you sure you need a PhraseQuery and not a Boolean query of Should
clauses?

- Mark

On 6/14/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
>
> Thanks guys, I like it! I'm already applying some regexps before query 
> parsing anyway, so it's just another pass.
>
> Now, I'm not sure how to do that without breaking another QP feature 
> that I kind of like: the query <<smith,ann>> is parsed to 
> PhraseQuery("smith ann").
> And that seems right, from a user standpoint.
>
> In fact, considering this, I realize <<smith,ann*>> should be parsed 
> to MultiPhraseQuery("smith", "ann*"), not <<+smith +ann*>> as I said
earlier.
>
> Brrrr. Getting hairy. Any hope?
>
> --Renaud
>
>
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Thursday, June 14, 2007 6:43 AM
> To: java-user@lucene.apache.org
> Subject: Re: Wildcard query with untokenized punctuation (again)
>
> Gotto agree with Erick here...best idea is just to preprocess the 
> query before sending it to the QueryParser.
>
> My first thought is always to get out the sledgehammer...
>
> - Mark
>
> Erick Erickson wrote:
> > Well, perhaps the simplest thing would be to pre-process the query 
> > and make the comma into a whitespace before sending anything to the 
> > query parser. I don't know how generalizable that sort of solution 
> > is in your problem space though....
> >
> > Best
> > Erick
> >
> > On 6/13/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
> >>
> >> My very simple analyzer produces tokens made of digits and/or 
> >> letters only.
> >> Anything else is discarded. E.g. the input "smith,anna" gets 
> >> tokenized as
> >> 2
> >> tokens, first "smith" then "anna".
> >>
> >> Say I have indexed documents that contained both "smith,anna" and 
> >> "smith,annanicole". To find them, I enter the query <<smith,ann*>>.
> >> The stock Lucene 2.0 query parser produces a PrefixQuery for the 
> >> single token "smith,ann". This token doesn't exist in my index, and 
> >> I don't get a match.
> >>
> >> I have found some references to this:
> >>
> >> http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-t
> >> f3
> >> 378386
> >>
> >> .
> >> html
> >> but I don't understand how I can fix it. Comma-separated terms like 
> >> this can appear in any field; I don't think I can create an 
> >> untokenized field.
> >>
> >> Really what I would like in this case is for the comma to be 
> >> considered whitespace, and the query to be parsed to <<+smith
> >> +ann*>>. Any way I can do that?
> >>
> >> --Renaud
> >>
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 01:07:55 2007
Return-Path: <java-user-return-28655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72855 invoked from network); 15 Jun 2007 01:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 01:07:55 -0000
Received: (qmail 69131 invoked by uid 500); 15 Jun 2007 01:07:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69082 invoked by uid 500); 15 Jun 2007 01:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69071 invoked by uid 99); 15 Jun 2007 01:07:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 18:07:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of antony.sequeira@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 18:07:46 -0700
Received: by wx-out-0506.google.com with SMTP id t8so612245wxc
        for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 18:07:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=R/iZPHnIXKTYfIyPvWqRNAnqTtB+LqbunRmp4HymZrZ8buNrC3AgonQzkIhlmYplRIgAvpGNAdetlPbDH0XgEj5HjiRBVudq2R7vsUh6rsxmjEoXBioHhjVlCfLJaoyZXOR7QZskW7DKarenhNCd/LvuEd03nW5wA4vPZuC7jMA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=reyJghleE+e8rfRiXBAQJEHUijWsH9aQg5zqKMqf+3h9dLL1huZXE1OqO115K2RE/SXSpUxto+ep3fmh38qlEkN5sQqxIKj1y/tpwB1wMS68qBhdgA2Bwzbxi4mYN8Jb5HYRGFzgtD9J4ChS0KqGwLdK/yGcWicSsdWEmFcUYO4=
Received: by 10.90.100.2 with SMTP id x2mr2251203agb.1181869645983;
        Thu, 14 Jun 2007 18:07:25 -0700 (PDT)
Received: by 10.90.84.16 with HTTP; Thu, 14 Jun 2007 18:07:25 -0700 (PDT)
Message-ID: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
Date: Thu, 14 Jun 2007 18:07:25 -0700
From: "Antony Sequeira" <antony.sequeira@gmail.com>
To: java-user@lucene.apache.org
Subject: negative queries
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_95676_15827712.1181869645956"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95676_15827712.1181869645956
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I am aware that with Lucene I can not do negative only queries such as
  -foo:bar

But today I ran into an issue where I realized even queries such as
  +foo:bar +(-goobly:doo)
also never return any results.

Basically I get the impression that I can not have a clause like
 +(-x:y)
anywhere in my query.

Is that a correct ?

If this is indeed the case, does anyone have similar issues and how
they get around.

I 'think' supporting such queries would be good when queries are
generated programmatically for whatever reasons (may be from some UI
form)

In the attached test file I am using string queries and showing the
failure case.

In my real app, I build lucene query objects tree using BooleanQuery
componenets where each component is the result of parsing a snippet of
a query, so when I add each snippet as 'MUST' I need to find a way of
handling a  snippet that is all negative.

Writing the above paragraph I am beginning to realize that although my
example shows the problem, it might be a wrong example in terms of me
getting a solution to it :)

Thanks in advance for any feedback and help.
-Antony


------=_Part_95676_15827712.1181869645956
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_95676_15827712.1181869645956--

From java-user-return-28656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 01:37:16 2007
Return-Path: <java-user-return-28656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93045 invoked from network); 15 Jun 2007 01:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 01:37:14 -0000
Received: (qmail 4143 invoked by uid 500); 15 Jun 2007 01:37:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4094 invoked by uid 500); 15 Jun 2007 01:37:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4078 invoked by uid 99); 15 Jun 2007 01:37:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 18:37:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 18:37:05 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6D97D4A8184
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 11:40:48 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: negative queries
Date: Fri, 15 Jun 2007 11:34:49 +1000
User-Agent: KMail/1.9.7
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
In-Reply-To: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706151134.49898.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 15 June 2007 11:07:25 Antony Sequeira wrote:
> Hi
> I am aware that with Lucene I can not do negative only queries such as
>   -foo:bar

The mailing list has already answered this question dozens of times.  I've 
been wondering lately, does this list have a FAQ?  If so, is this question on 
it?

Daniel

-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 04:40:48 2007
Return-Path: <java-user-return-28657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67617 invoked from network); 15 Jun 2007 04:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 04:40:47 -0000
Received: (qmail 18426 invoked by uid 500); 15 Jun 2007 04:40:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18391 invoked by uid 500); 15 Jun 2007 04:40:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18380 invoked by uid 99); 15 Jun 2007 04:40:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 21:40:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 21:40:40 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l5F4eK023848
	for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 21:40:20 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007061421401909584
 for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 21:40:19 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[192.168.1.49] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1Hz3bf-0000Xe-00
	for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 21:40:19 -0700
Message-ID: <46721945.4040808@ai.sri.com>
Date: Thu, 14 Jun 2007 21:44:53 -0700
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: efficient way to filter out unwanted results
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

I am trying to remove several docs from search results each time I do 
query. The docs can be identified by an exteranl ids whcih are 
saved/indexed. I could use a Query or QueryFilter  to achieve this but 
not sure if it's the most efficient way to do that.
Anyone has any experience or idea?
Thanks!

Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 05:55:15 2007
Return-Path: <java-user-return-28658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90674 invoked from network); 15 Jun 2007 05:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 05:55:13 -0000
Received: (qmail 12030 invoked by uid 500); 15 Jun 2007 05:55:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11997 invoked by uid 500); 15 Jun 2007 05:55:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11982 invoked by uid 99); 15 Jun 2007 05:55:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 22:55:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssharma@chambal.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jun 2007 22:55:05 -0700
Received: by wx-out-0506.google.com with SMTP id t8so654687wxc
        for <java-user@lucene.apache.org>; Thu, 14 Jun 2007 22:54:44 -0700 (PDT)
Received: by 10.78.138.14 with SMTP id l14mr1081013hud.1181886883814;
        Thu, 14 Jun 2007 22:54:43 -0700 (PDT)
Received: by 10.78.202.9 with HTTP; Thu, 14 Jun 2007 22:54:43 -0700 (PDT)
Message-ID: <90530f7c0706142254i1657ef81xa4482f7dec4a02bd@mail.gmail.com>
Date: Fri, 15 Jun 2007 11:24:43 +0530
From: "Sawan Sharma" <ssharma@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: efficient way to filter out unwanted results
In-Reply-To: <46721945.4040808@ai.sri.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39967_469979.1181886883790"
References: <46721945.4040808@ai.sri.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39967_469979.1181886883790
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Jay,

I am not sure up to what level I understood your problem . But as far as my
assumption, you can try HitCollector class and its collect method. Here you
can get DocID for each hit and can remove while searching.

Hope it will be useful.

Sawan
(Chambal.com inc. NJ USA)





On 6/15/07, yu <yu@ai.sri.com> wrote:
>
> Hi everyone,
>
> I am trying to remove several docs from search results each time I do
> query. The docs can be identified by an exteranl ids whcih are
> saved/indexed. I could use a Query or QueryFilter  to achieve this but
> not sure if it's the most efficient way to do that.
> Anyone has any experience or idea?
> Thanks!
>
> Jay
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39967_469979.1181886883790--

From java-user-return-28659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 07:02:37 2007
Return-Path: <java-user-return-28659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8270 invoked from network); 15 Jun 2007 07:02:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 07:02:36 -0000
Received: (qmail 8623 invoked by uid 500); 15 Jun 2007 07:02:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8587 invoked by uid 500); 15 Jun 2007 07:02:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8575 invoked by uid 99); 15 Jun 2007 07:02:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 00:02:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [60.52.184.45] (HELO mail.tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 00:02:28 -0700
Received: from DFPYWL2S ([192.168.2.96]) by tecforte.com with MailEnable ESMTP; Fri, 15 Jun 2007 15:01:57 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
Subject: FW: Lucene indexing vs RDBMS insertion.
Date: Fri, 15 Jun 2007 14:59:36 +0800
Message-ID: <003d01c7af1a$bc11eb90$3435c2b0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003E_01C7AF5D.CA352B90"
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AcemgRv68RQznaGZRcuM1vaRH26QBAImZMAA
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_003E_01C7AF5D.CA352B90
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable

Hi, I=92m  a new user to Lucene, and heard that it is a powerful tool =
for full
text search and I=92m planning to use it in my project for data storage
purpose. Before the implementation, I could like to know whether there =
is
performance issue on Lucene indexing process. I have no doubt on the
retrieving and searching feature in Lucene but the indexing process. I =
have
tested my current system to insert 1000 records in RDBMS storage it took
about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
indexing process perform faster than RDBMS ? I have go through some of =
the
article talking about the =93MergeFactor=94 and =93MaxMergeDocs=94 =
parameter for
fine tune the indexing process, but no comparison between Lucene =
indexing
process and RDBMS insertion. Thus, hope someone who have experience in
Lucene can provide this information or some article that discuss between
Lucene and RDBMS.

=20

I really appreciate any help in this. Thanks


No virus found in this outgoing message.
Checked by AVG Free Edition.=20
Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date: =
6/14/2007
12:44 PM
=20

------=_NextPart_000_003E_01C7AF5D.CA352B90--



From java-user-return-28660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 07:37:31 2007
Return-Path: <java-user-return-28660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23052 invoked from network); 15 Jun 2007 07:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 07:37:31 -0000
Received: (qmail 72113 invoked by uid 500); 15 Jun 2007 07:37:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72077 invoked by uid 500); 15 Jun 2007 07:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72061 invoked by uid 99); 15 Jun 2007 07:37:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 00:37:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 00:37:23 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l5F7b3013902
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 00:37:03 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007061500370215010
 for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 00:37:02 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[192.168.1.49] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1Hz6Mg-0001gU-00
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 00:37:02 -0700
Message-ID: <467242AB.2030204@ai.sri.com>
Date: Fri, 15 Jun 2007 00:41:31 -0700
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: efficient way to filter out unwanted results
References: <46721945.4040808@ai.sri.com> <90530f7c0706142254i1657ef81xa4482f7dec4a02bd@mail.gmail.com>
In-Reply-To: <90530f7c0706142254i1657ef81xa4482f7dec4a02bd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Sawan for the suggestion.
I guess this will work for statically known doc ids. In my case, I know 
only external ids that I want to exclude from the result set.for each  
search.  Of course, I can always exclude these  docs in a post search 
process. I am curious if there are other more efficient approach.

Thanks again for your help.

Jay

Sawan Sharma wrote:
> Hello Jay,
>
> I am not sure up to what level I understood your problem . But as far 
> as my
> assumption, you can try HitCollector class and its collect method. 
> Here you
> can get DocID for each hit and can remove while searching.
>
> Hope it will be useful.
>
> Sawan
> (Chambal.com inc. NJ USA)
>
>
>
>
>
> On 6/15/07, yu <yu@ai.sri.com> wrote:
>>
>> Hi everyone,
>>
>> I am trying to remove several docs from search results each time I do
>> query. The docs can be identified by an exteranl ids whcih are
>> saved/indexed. I could use a Query or QueryFilter  to achieve this but
>> not sure if it's the most efficient way to do that.
>> Anyone has any experience or idea?
>> Thanks!
>>
>> Jay
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 08:37:00 2007
Return-Path: <java-user-return-28661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41852 invoked from network); 15 Jun 2007 08:36:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 08:36:59 -0000
Received: (qmail 72772 invoked by uid 500); 15 Jun 2007 08:36:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72251 invoked by uid 500); 15 Jun 2007 08:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72240 invoked by uid 99); 15 Jun 2007 08:36:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 01:36:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 01:36:51 -0700
Received: by ik-out-1112.google.com with SMTP id b32so779055ika
        for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 01:36:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=upZDGaN7osx5nmYcxteGo+71JnRZqX2uuN8XFBXLgVVodxA+p9bLkKG4wdy44ziJwU/NalkT83XrNUuLLQ+Ies22LUo+qggt+YyIRSNx9z42rSatszMkOcHSiyUXjH2EydGxVjYOHlPUqQ5aG88s0EvoWuDSGqmik6T0YkBqqWs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZAJdR740YDS5uMcXGabxzzIGiovd9x2eAXVoKfKtPq229AVd7/t3XlDjp+B0va3Ef1JTpPCXD4j+cBr386lYTH61R0tdCGlKDBlSgbCqfbxQWLP05rK6gUC2zju4HfB+n8vchHQuwqPCEYTdsbZFDpcxuq5YEHeGV9DRINqnCCw=
Received: by 10.78.170.6 with SMTP id s6mr1114190hue.1181896590260;
        Fri, 15 Jun 2007 01:36:30 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Fri, 15 Jun 2007 01:36:30 -0700 (PDT)
Message-ID: <6e3ae6310706150136r2bfc3d8bp5c2ae3b35c327668@mail.gmail.com>
Date: Fri, 15 Jun 2007 01:36:30 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.
In-Reply-To: <003d01c7af1a$bc11eb90$3435c2b0$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

It's better to first understand what's the computation difference
between Lucene Indexing and database insertiong.

For Lucene Indexing need to stem all words out, sort them, save them
to disk. And since Lucene is an incremental merge model, saved
documents may need to merge and saved again. There are a lot of CPU
and disk operation for each document, which can take fairly a long
time.

For database insertiong, each record usually just need "appending".
Maybe some fields need to be indexed(database index). But that's
usually b-tree. The CPU and disk is much less intensive.

So each case is different, but you can safely say Lucene is slower
than database.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 6/14/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> Hi, I'm  a new user to Lucene, and heard that it is a powerful tool for full
> text search and I'm planning to use it in my project for data storage
> purpose. Before the implementation, I could like to know whether there is
> performance issue on Lucene indexing process. I have no doubt on the
> retrieving and searching feature in Lucene but the indexing process. I have
> tested my current system to insert 1000 records in RDBMS storage it took
> about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> indexing process perform faster than RDBMS ? I have go through some of the
> article talking about the "MergeFactor" and "MaxMergeDocs" parameter for
> fine tune the indexing process, but no comparison between Lucene indexing
> process and RDBMS insertion. Thus, hope someone who have experience in
> Lucene can provide this information or some article that discuss between
> Lucene and RDBMS.
>
>
>
> I really appreciate any help in this. Thanks
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date: 6/14/2007
> 12:44 PM
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 08:56:00 2007
Return-Path: <java-user-return-28662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48523 invoked from network); 15 Jun 2007 08:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 08:55:59 -0000
Received: (qmail 13633 invoked by uid 500); 15 Jun 2007 08:55:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13600 invoked by uid 500); 15 Jun 2007 08:55:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13589 invoked by uid 99); 15 Jun 2007 08:55:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 01:55:56 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 01:55:51 -0700
Received: from intrepid (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l5F8tJZ2030316
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 11:55:19 +0300
Received: from [10.142.130.117] ([10.142.130.117]) by nimitz with ESMTP
	 id m6fbjc1v; 15 Jun 2007 11:55:00 +0300
Message-ID: <467253B6.2040800@teamware.com>
Date: Fri, 15 Jun 2007 11:54:14 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5.0.10 (Windows/20070221)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: efficient way to filter out unwanted results
References: <46721945.4040808@ai.sri.com> <90530f7c0706142254i1657ef81xa4482f7dec4a02bd@mail.gmail.com> <467242AB.2030204@ai.sri.com>
In-Reply-To: <467242AB.2030204@ai.sri.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 15 Jun 2007 11:55:19 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

yu wrote:
> Thanks Sawan for the suggestion.
> I guess this will work for statically known doc ids. In my case, I know 
> only external ids that I want to exclude from the result set.for each  
> search.  Of course, I can always exclude these  docs in a post search 
> process. I am curious if there are other more efficient approach.

When you open a searcher, you could create a cached array of all your external 
Ids with their Lucene DocId.  Using a custom HitCollector, which can be created 
with the Ids you wish to exclude, you can get a document's external Id during 
the collect() method using the docid.  Then just check the external Id of the 
matched document against the exclusion list.

As long as you have your searcher open, the cache will remain valid.
Antony




> 
> Thanks again for your help.
> 
> Jay
> 
> Sawan Sharma wrote:
>> Hello Jay,
>>
>> I am not sure up to what level I understood your problem . But as far 
>> as my
>> assumption, you can try HitCollector class and its collect method. 
>> Here you
>> can get DocID for each hit and can remove while searching.
>>
>> Hope it will be useful.
>>
>> Sawan
>> (Chambal.com inc. NJ USA)
>>
>>
>>
>>
>>
>> On 6/15/07, yu <yu@ai.sri.com> wrote:
>>>
>>> Hi everyone,
>>>
>>> I am trying to remove several docs from search results each time I do
>>> query. The docs can be identified by an exteranl ids whcih are
>>> saved/indexed. I could use a Query or QueryFilter  to achieve this but
>>> not sure if it's the most efficient way to do that.
>>> Anyone has any experience or idea?
>>> Thanks!
>>>
>>> Jay
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 12:33:02 2007
Return-Path: <java-user-return-28663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37496 invoked from network); 15 Jun 2007 12:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 12:33:01 -0000
Received: (qmail 13645 invoked by uid 500); 15 Jun 2007 12:32:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13370 invoked by uid 500); 15 Jun 2007 12:32:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13239 invoked by uid 99); 15 Jun 2007 12:32:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 05:32:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 05:32:46 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EB9BE30EFC19; Fri, 15 Jun 2007 06:32:25 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.70] (d-128-193-70.bootp.Virginia.EDU [128.143.193.70])
	by ehatchersolutions.com (Postfix) with ESMTP id 2AEDD30EFC18;
	Fri, 15 Jun 2007 06:32:21 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
References: <m2fy4twocr.fsf@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D7D578F5-4C59-4F2B-A92E-BED8F89FD1C1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Fwd: Call for Papers Opens for OS Summit Asia 2007
Date: Fri, 15 Jun 2007 08:32:19 -0400
To: java-dev@lucene.apache.org,
 solr-dev@lucene.apache.org,
 solr-user@lucene.apache.org,
 java-user@lucene.apache.org,
 ruby-dev@lucene.apache.org,
 lucene-net-user@incubator.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1



Begin forwarded message:
> From: J Aaron Farr <farra@apache.org>
>
>
> Call for Papers Opens for OS Summit Asia 2007
>
> The call for papers is now open for OS Summit Asia, to be held
> November 26-30 at the Cyberport in Hong Kong.  This joint conference
> between the Apache Software Foundation and the Eclipse Foundation will
> be consist of two days of tutorials (Nov 26-27) and three days of
> regular conference sessions (Nov 28-30).
>
> The paper submission deadline is Friday, 13 July, 2007, Midnight PDT.
>
> You may log in to the ApacheCon submission site to submit your
> proposals.  Further details about the conference, submissions, and
> fees can be found at:
>
>   http://www.ossummit.com/cfp.html
>
> Topics appropriate for submission include, but are not restricted to,
> the following:
>
>  * ASF-wide projects such as Apache HTTP server, Tomcat, Struts,
>    Geronimo, mod_perl and XML Web Services
>
>  * Eclipse-wide projects such as BI and Reporting Tools (BIRT), Web
>    Tools Platform (WTP), Eclipse Modeling Framework (EMF), Data Tools
>    Platform (DTP), Equinox and the Rich Client Platform (RCP)
>
>  * Programming languages such as Java, Perl, Python, Ruby and PHP
>
>  * Web development technologies and techniques including security,
>    performance tuning, e-commerce and J2EE
>
>  * New technologies and trends such as Web Services and Web 2.0
>
>  * Open source community and business models, legal and marketing
>    issues
>
>  * Open source projects and activities in Asia, local efforts and case
>    studies
>
> Thanks and we hope to hear from you, and see you in Hong Kong!
>
> -- 
> The OSSummit Planners
> planners-2007-asia@ApacheCon.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 13:21:48 2007
Return-Path: <java-user-return-28664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58233 invoked from network); 15 Jun 2007 13:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 13:21:45 -0000
Received: (qmail 39860 invoked by uid 500); 15 Jun 2007 13:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39824 invoked by uid 500); 15 Jun 2007 13:21:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39813 invoked by uid 99); 15 Jun 2007 13:21:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 06:21:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 06:21:33 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.16483D65@mailer.syr.edu>; Fri, 15 Jun 2007 9:21:12 -0400
Message-ID: <467291F0.1090508@syr.edu>
Date: Fri, 15 Jun 2007 09:19:44 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: negative queries
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com> <200706151134.49898.daniel@nuix.com>
In-Reply-To: <200706151134.49898.daniel@nuix.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Noll wrote:
> On Friday 15 June 2007 11:07:25 Antony Sequeira wrote:
>> Hi
>> I am aware that with Lucene I can not do negative only queries such as
>>   -foo:bar
> 
> The mailing list has already answered this question dozens of times.  I've 
> been wondering lately, does this list have a FAQ?  If so, is this question on 
> it?

http://wiki.apache.org/lucene-java/LuceneFAQ

This question doesn't appear to be on there.

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 14:02:34 2007
Return-Path: <java-user-return-28665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87947 invoked from network); 15 Jun 2007 14:02:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 14:02:32 -0000
Received: (qmail 75187 invoked by uid 500); 15 Jun 2007 14:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74905 invoked by uid 500); 15 Jun 2007 14:02:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74894 invoked by uid 99); 15 Jun 2007 14:02:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 07:02:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 07:02:24 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.16484083@mailer.syr.edu>; Fri, 15 Jun 2007 10:02:03 -0400
Message-ID: <46729B83.7060702@syr.edu>
Date: Fri, 15 Jun 2007 10:00:35 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: negative queries
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
In-Reply-To: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Antony,

Antony Sequeira wrote:
> In the attached test file I am using string queries and showing the
> failure case.

The attachment didn't make it for some reason.

> Basically I get the impression that I can not have a clause like
> +(-x:y) anywhere in my query.

What follows assumes that the "+(...)" wraps the user input, and is your
attempt to work around the exclusively-negative-query problem.

You can directly use MatchAllDocsQuery[1], or you can use Yonik Seeley's
fix to allow this kind of thing in QueryParser syntax[2] (the "*:*"
construct, which inserts a MatchAllDocsQuery for you), first available
in release 2.1 -- something like "*:* -x:y" should do the trick for you.

Did the *:* construct ever make it into the docs?  I see the patch for
LUCENE-723 doesn't contain any doc changes.  This should be mentioned in
the QP syntax documentation[3], shouldn't it?  And I think Daniel Noll
is right, this looks like an FAQ.

Steve

[1]
<http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/search/MatchAllDocsQuery.html>
[2] <http://issues.apache.org/jira/browse/LUCENE-723>
[3] <http://lucene.apache.org/java/docs/queryparsersyntax.html>

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 14:52:37 2007
Return-Path: <java-user-return-28666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10272 invoked from network); 15 Jun 2007 14:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 14:52:36 -0000
Received: (qmail 48123 invoked by uid 500); 15 Jun 2007 14:52:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48086 invoked by uid 500); 15 Jun 2007 14:52:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48071 invoked by uid 99); 15 Jun 2007 14:52:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 07:52:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 07:52:28 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 6344A2802507
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 16:52:06 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 27089-09 for <java-user@lucene.apache.org>;
 Fri, 15 Jun 2007 16:52:00 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id EBBD928024C1
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 16:51:59 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Antoine Baudoux <ab@taktik.be>
Subject: Several questions about scoring/sorting + random sorting in an image/related application 
Date: Fri, 15 Jun 2007 16:51:57 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

	Hi,

	I'm developping an image database. Each lucene document representing  
an image contains (among other fields ):

	- a date field
	- a collection field containing the ID of the collection the image  
belongs to.

	I want to be able to give a score to each collection. Collections  
with a higher score appear first in the results. I want to avoid re- 
indexing all the documents each time i change my collection scores.
	
	For example on day 1 I decide to give collection #1 a 5 score and  
collection #3 a 10 score --> images belonging to collection #3 appear  
first in search results.
	One day 2 i give collection #3 a 2 score --> images belonging to  
collection #1 appear first in search results.
	
	I have read the lucene docs, and from what i understand there are  
many ways to achieve what I want :


	- I can use a Very big Boolean query (OR query in fact) containing  
one TermQuery per collection ID, setting the correct boost factor for  
each termquery. The problem with this is that i have 300 collections,  
so i have a boolean query with 300 terms that i append to each query  
i make. I am afraid that it will be slow.

	- I can use a ValueSourceQuery, where for each document i compute a  
custom score based on the value of the collection field. Will it be  
faster than the first solution?

	- I can do advanced things such as writing a custom HitCollector, or  
a custom Query.

	- I can add another field to each document, containing a computed  
custom score, then i could sort on that field. But i want to avoid  
this solution at all costs, since it would mean re-indexing all the  
documents each time the collection scores change.

	What solution do you suggest?  Is there another solution that i  
didnt mention?

	More recent documents should also come first : In fact the final  
sorting should be a ponderated sum between the collection score of an  
image and the date of an image : most recent images from the best- 
scored collections come first, then most recent from less-scrored  
collections, then less recent from best scored, and so on. I would  
also like to be able to adjust the balance between date/collection  
score.

	What solution do you suggest?


	I would also like to implement random-sorting. My solution is : i  
create 12 new fields R1 -> R12 for each document, each containing a  
random number between 1 and 12. To get a random sort, i sort each day  
with a different combination of R1 .. R12. For example :

	Day 1 : i sort by R1 then R4 then R5..
	Day 2 : i sort by R10 then R9 then R2....
	etc...

Is it a good solution? Is there another way to do it?


	Very big thx in advance for your answers.

Antoine

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 14:58:07 2007
Return-Path: <java-user-return-28667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12973 invoked from network); 15 Jun 2007 14:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 14:58:06 -0000
Received: (qmail 68364 invoked by uid 500); 15 Jun 2007 14:58:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68328 invoked by uid 500); 15 Jun 2007 14:58:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68317 invoked by uid 99); 15 Jun 2007 14:58:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 07:58:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 07:57:56 -0700
Received: by mu-out-0910.google.com with SMTP id g7so978864muf
        for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 07:57:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WkaDZjTbcENsrUl4BoCJhjJ3U10VvybWmFrYxZT55Ca6ofkPNS3oFWcFBjzciG709g9pZR4N0SyIVJ/d2XSFLa7JJczAAul1as6npjdI2YfFRy4KEoOLZmBrD3oNvJIp3dDCrye3hrLZ/jmKU1LmtYJpNDEoBkKYKgDVG/A3e2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LLarbwaKqsbyjwoD7Dckuh+PoRs6vVXgEkIvK7l1lvCNFTOwTW73U4b58v+9hK9HtVxUQr4Gu9D8ThaffrlVI4/7Xidmjh7/TPXyZkjCHKfbJ4rzRNiX4KF5oYPhP6LNWUV7f5eC0juK+X9fGEER6LJRAocRW6ZFStFsDgnBhYw=
Received: by 10.82.111.8 with SMTP id j8mr5864749buc.1181919454438;
        Fri, 15 Jun 2007 07:57:34 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 15 Jun 2007 07:57:34 -0700 (PDT)
Message-ID: <359a92830706150757w4a13b243k1660bcdf8212d75@mail.gmail.com>
Date: Fri, 15 Jun 2007 10:57:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wildcard query with untokenized punctuation (again)
In-Reply-To: <001501c7aebd$54114b60$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37684_6550602.1181919454402"
References: <ab0709bf0706141206y28c051acmd59427f3ce72ce10@mail.gmail.com>
	 <001501c7aebd$54114b60$970fda80@libraria.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37684_6550602.1181919454402
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 6/14/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
>
> Thank you for this crystal-clear explanation Mark!
>
> > Are you sure you need a PhraseQuery and not a Boolean
> > query of Should clauses?
>
> Excellent question. What's the requirement, hey? Well, the requirement is
> to
> find documents referring to "annanicole smith", "anna smith" and
> "annaliese
> smith" etc. when users enter "smith,ann*". Right now nothing is returned.
>
> Now, it can be argued whether it should be a phrase query or not. What
> does
> a user expect when searching for <<smith,ann*>>? In our application, this
> comma-separated format is used in documents metadata, so I think users
> expect an exact match, hence a phrase query. (I'll confirm with the PM.)


*really* discuss this with the PM. "exact match" should mean "exact match",
not "kind of an exact match but not really". What you've described sounds
like a span query with a slop of 0. Which I *think* you can make work with
the Span family of queries. Also see the Surround classes for another
possibility....



> I don't think the support would be that difficult (use a wildcard
> > term enumerator to correctly fill out a MultiPhraseQuery), but it
> > might take some thought to get the QueryParser to act as you want
> > (generate a PhraseQuery or MultiPhraseQuery when it sees <<smith
> ann*>>).
>
> Indeed. This is what I'm struggling with. How would I do that?
>
> I have also found
>
> http://www.nabble.com/Phrase-queries-with-wildcards-tf2748584.html#a7668492
> which discusses precisely this issue: how to get QueryParser to generate
> MultiPhraseQueries. Got some good ideas from it, but unfortunately no
> complete solution. I'll keep on hacking.
>
> --Renaud
>
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Thursday, June 14, 2007 12:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: Wildcard query with untokenized punctuation (again)
>
> All depends on what you are looking for. Ill try and give a hint as to
> what
> is going on now:
>
> When the QueryParser parsers <<smith,ann>> it will shove that whole piece
> to
> the analyzer. Your analyzer returns two tokens: smith and ann. When the
> QueryParser sees that more than one token is returned from a piece that
> was
> fed to the analyzer, it makes a PhraseQuery with the each of the returned
> tokens. Remember that the QueryParser feeds the analyzer in pieces, and
> then
> creates queries based on the number of token produced from the piece (if
> the
> piece even goes to the analyzer).
>
> Since you will be preprocessing the query, the query parser is going to be
> parsing <<smith ann*>> which causes it to feed the analyzer smith and then
> ann*...neither of these pieces produce more than one token (ann* doesnt
> even
> go to the analyzer), so no PhraseQuery is produced. Instead you will
> produce
> a BooleanQuery with the term smith and the wildcard query ann*, both with
> an
> occur of whatever your default operator is.
>
> One thing I am wondering is if you even really want the query to be a
> PhraseQuery or if your just accepting the behavior you getting from the
> QueryParser. Right now, PhraseQuery's do not support wildcards (nor do
> MultiPhraseQuery's). I don't think the support would be that difficult
> (use
> a wildcard term enumerator to correctly fill out a MultiPhraseQuery), but
> it
> might take some thought to get the QueryParser to act as you want
> (generate
> a PhraseQuery or MultiPhraseQuery when it sees <<smith ann*>>).
>
> Are you sure you need a PhraseQuery and not a Boolean query of Should
> clauses?
>
> - Mark
>
> On 6/14/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
> >
> > Thanks guys, I like it! I'm already applying some regexps before query
> > parsing anyway, so it's just another pass.
> >
> > Now, I'm not sure how to do that without breaking another QP feature
> > that I kind of like: the query <<smith,ann>> is parsed to
> > PhraseQuery("smith ann").
> > And that seems right, from a user standpoint.
> >
> > In fact, considering this, I realize <<smith,ann*>> should be parsed
> > to MultiPhraseQuery("smith", "ann*"), not <<+smith +ann*>> as I said
> earlier.
> >
> > Brrrr. Getting hairy. Any hope?
> >
> > --Renaud
> >
> >
> >
> > -----Original Message-----
> > From: Mark Miller [mailto:markrmiller@gmail.com]
> > Sent: Thursday, June 14, 2007 6:43 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Wildcard query with untokenized punctuation (again)
> >
> > Gotto agree with Erick here...best idea is just to preprocess the
> > query before sending it to the QueryParser.
> >
> > My first thought is always to get out the sledgehammer...
> >
> > - Mark
> >
> > Erick Erickson wrote:
> > > Well, perhaps the simplest thing would be to pre-process the query
> > > and make the comma into a whitespace before sending anything to the
> > > query parser. I don't know how generalizable that sort of solution
> > > is in your problem space though....
> > >
> > > Best
> > > Erick
> > >
> > > On 6/13/07, Renaud Waldura <renaud.waldura@library.ucsf.edu> wrote:
> > >>
> > >> My very simple analyzer produces tokens made of digits and/or
> > >> letters only.
> > >> Anything else is discarded. E.g. the input "smith,anna" gets
> > >> tokenized as
> > >> 2
> > >> tokens, first "smith" then "anna".
> > >>
> > >> Say I have indexed documents that contained both "smith,anna" and
> > >> "smith,annanicole". To find them, I enter the query <<smith,ann*>>.
> > >> The stock Lucene 2.0 query parser produces a PrefixQuery for the
> > >> single token "smith,ann". This token doesn't exist in my index, and
> > >> I don't get a match.
> > >>
> > >> I have found some references to this:
> > >>
> > >> http://www.nabble.com/Wildcard-query-with-untokenized-punctuation-t
> > >> f3
> > >> 378386
> > >>
> > >> .
> > >> html
> > >> but I don't understand how I can fix it. Comma-separated terms like
> > >> this can appear in any field; I don't think I can create an
> > >> untokenized field.
> > >>
> > >> Really what I would like in this case is for the comma to be
> > >> considered whitespace, and the query to be parsed to <<+smith
> > >> +ann*>>. Any way I can do that?
> > >>
> > >> --Renaud
> > >>
> > >>
> > >>
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_37684_6550602.1181919454402--

From java-user-return-28668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 15:11:40 2007
Return-Path: <java-user-return-28668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43985 invoked from network); 15 Jun 2007 15:11:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 15:11:39 -0000
Received: (qmail 9888 invoked by uid 500); 15 Jun 2007 15:11:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9856 invoked by uid 500); 15 Jun 2007 15:11:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9845 invoked by uid 99); 15 Jun 2007 15:11:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:11:35 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:11:31 -0700
Received: by ug-out-1314.google.com with SMTP id m2so950062uge
        for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 08:11:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=U5NXFF5buIxtZy5/r7zbDRhhCkG6NJ5gmXqqfhVOJf9G+eq8mVQ6MkYF9TU4cgp6DXerqpmMnKZ7hdfYqLUSgC96u/nPIvQz8woDAMXIodZ9voRsYdeqB+GbLuAjT0xqD336JLU6VMGR4dWFGXC6UPJluMFiFZp0me+2Rlwp65c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pbJmVY7MvuNr+x21cgzIikRMLECxlor3QfiWnmg/Yw4bg400tPkwBOxYgQDfWfXTsQMiTGsIgmbkfoajjpJa8NfJKA/iE6ItPaKoaRkBxJHseT3+iAxBSe+9pUaqHJMgteIFxniubSm70xoWLv9JRUQcnbi54jV8RMPdccSENRA=
Received: by 10.82.134.12 with SMTP id h12mr5892623bud.1181920269281;
        Fri, 15 Jun 2007 08:11:09 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 15 Jun 2007 08:11:09 -0700 (PDT)
Message-ID: <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>
Date: Fri, 15 Jun 2007 11:11:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.
In-Reply-To: <003d01c7af1a$bc11eb90$3435c2b0$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37908_27392209.1181920269195"
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37908_27392209.1181920269195
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From my perspective, this is an irrelevant question. The real question
is "is Lucene indexing fast enough for my application?". Which nobody
can answer for you, you have to experiment.

If you're building an index that's only updated every 6 months,
Lucene is certainly "fast enough". If you're recreating the
index every 6 seconds, it's a different question.

So, I recommend that you create a test application that does
nothing except read your source, do whatever parsing you
need to do and does NOT index it at all. Record the time it
takes.

Then try the same thing WITH indexing and record the difference.

Then, to get a sense of the dimension of the problem, try
substituting inserting into the RDBMS instead of the Lucene
index.

Once you have numbers, you can make better decisions
And people can give you better advice,  especially if you
include more detail of your design.

Best
Erick

On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
>
> Hi, I'm  a new user to Lucene, and heard that it is a powerful tool for
> full
> text search and I'm planning to use it in my project for data storage
> purpose. Before the implementation, I could like to know whether there is
> performance issue on Lucene indexing process. I have no doubt on the
> retrieving and searching feature in Lucene but the indexing process. I
> have
> tested my current system to insert 1000 records in RDBMS storage it took
> about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> indexing process perform faster than RDBMS ? I have go through some of the
> article talking about the "MergeFactor" and "MaxMergeDocs" parameter for
> fine tune the indexing process, but no comparison between Lucene indexing
> process and RDBMS insertion. Thus, hope someone who have experience in
> Lucene can provide this information or some article that discuss between
> Lucene and RDBMS.
>
>
>
> I really appreciate any help in this. Thanks
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date: 6/14/2007
> 12:44 PM
>
>

------=_Part_37908_27392209.1181920269195--

From java-user-return-28669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 15:21:31 2007
Return-Path: <java-user-return-28669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53217 invoked from network); 15 Jun 2007 15:21:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 15:21:30 -0000
Received: (qmail 48656 invoked by uid 500); 15 Jun 2007 15:21:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48389 invoked by uid 500); 15 Jun 2007 15:21:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48377 invoked by uid 99); 15 Jun 2007 15:21:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:21:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:21:18 -0700
Received: from [192.168.3.113] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 1CF755D5A
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 17:20:55 +0200 (CEST)
Message-ID: <4672AE55.20609@garambrogne.net>
Date: Fri, 15 Jun 2007 17:20:53 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Several questions about scoring/sorting + random sorting in an
 image/related application
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
In-Reply-To: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Your request seems to be a two steps query.
First step, you select image, and then collection
Second step, you sort collection.

BitVector can help you?

M.
Antoine Baudoux a écrit :
>     Hi,
>
>     I'm developping an image database. Each lucene document
> representing an image contains (among other fields ):
>
>     - a date field
>     - a collection field containing the ID of the collection the image
> belongs to.
>
>     I want to be able to give a score to each collection. Collections
> with a higher score appear first in the results. I want to avoid
> re-indexing all the documents each time i change my collection scores.
>     
>     For example on day 1 I decide to give collection #1 a 5 score and
> collection #3 a 10 score --> images belonging to collection #3 appear
> first in search results.
>     One day 2 i give collection #3 a 2 score --> images belonging to
> collection #1 appear first in search results.
>     
>     I have read the lucene docs, and from what i understand there are
> many ways to achieve what I want :
>
>
>     - I can use a Very big Boolean query (OR query in fact) containing
> one TermQuery per collection ID, setting the correct boost factor for
> each termquery. The problem with this is that i have 300 collections,
> so i have a boolean query with 300 terms that i append to each query i
> make. I am afraid that it will be slow.
>
>     - I can use a ValueSourceQuery, where for each document i compute
> a custom score based on the value of the collection field. Will it be
> faster than the first solution?
>
>     - I can do advanced things such as writing a custom HitCollector,
> or a custom Query.
>
>     - I can add another field to each document, containing a computed
> custom score, then i could sort on that field. But i want to avoid
> this solution at all costs, since it would mean re-indexing all the
> documents each time the collection scores change.
>
>     What solution do you suggest?  Is there another solution that i
> didnt mention?
>
>     More recent documents should also come first : In fact the final
> sorting should be a ponderated sum between the collection score of an
> image and the date of an image : most recent images from the
> best-scored collections come first, then most recent from less-scrored
> collections, then less recent from best scored, and so on. I would
> also like to be able to adjust the balance between date/collection score.
>
>     What solution do you suggest?
>
>
>     I would also like to implement random-sorting. My solution is : i
> create 12 new fields R1 -> R12 for each document, each containing a
> random number between 1 and 12. To get a random sort, i sort each day
> with a different combination of R1 .. R12. For example :
>
>     Day 1 : i sort by R1 then R4 then R5..
>     Day 2 : i sort by R10 then R9 then R2....
>     etc...
>
> Is it a good solution? Is there another way to do it?
>
>
>     Very big thx in advance for your answers.
>
> Antoine
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 15:33:40 2007
Return-Path: <java-user-return-28670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64346 invoked from network); 15 Jun 2007 15:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 15:33:39 -0000
Received: (qmail 90186 invoked by uid 500); 15 Jun 2007 15:33:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90157 invoked by uid 500); 15 Jun 2007 15:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90142 invoked by uid 99); 15 Jun 2007 15:33:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:33:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:33:31 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 163B928032D5
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 17:33:10 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 27617-10 for <java-user@lucene.apache.org>;
 Fri, 15 Jun 2007 17:33:02 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 2D62E2803293
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 17:33:02 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4672AE55.20609@garambrogne.net>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <4672AE55.20609@garambrogne.net>
Content-Type: multipart/alternative; boundary=Apple-Mail-4--396566589
Message-Id: <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
Date: Fri, 15 Jun 2007 17:32:59 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-4--396566589
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

Could-you be more precise? I dont understand what you mean.



On 15 Jun 2007, at 17:20, Mathieu Lecarme wrote:

> Your request seems to be a two steps query.
> First step, you select image, and then collection
> Second step, you sort collection.
>
> BitVector can help you?
>
> M.
> Antoine Baudoux a =E9crit :
>>     Hi,
>>
>>     I'm developping an image database. Each lucene document
>> representing an image contains (among other fields ):
>>
>>     - a date field
>>     - a collection field containing the ID of the collection the =20
>> image
>> belongs to.
>>
>>     I want to be able to give a score to each collection. Collections
>> with a higher score appear first in the results. I want to avoid
>> re-indexing all the documents each time i change my collection =20
>> scores.
>>
>>     For example on day 1 I decide to give collection #1 a 5 score and
>> collection #3 a 10 score --> images belonging to collection #3 appear
>> first in search results.
>>     One day 2 i give collection #3 a 2 score --> images belonging to
>> collection #1 appear first in search results.
>>
>>     I have read the lucene docs, and from what i understand there are
>> many ways to achieve what I want :
>>
>>
>>     - I can use a Very big Boolean query (OR query in fact) =20
>> containing
>> one TermQuery per collection ID, setting the correct boost factor for
>> each termquery. The problem with this is that i have 300 collections,
>> so i have a boolean query with 300 terms that i append to each =20
>> query i
>> make. I am afraid that it will be slow.
>>
>>     - I can use a ValueSourceQuery, where for each document i compute
>> a custom score based on the value of the collection field. Will it be
>> faster than the first solution?
>>
>>     - I can do advanced things such as writing a custom HitCollector,
>> or a custom Query.
>>
>>     - I can add another field to each document, containing a computed
>> custom score, then i could sort on that field. But i want to avoid
>> this solution at all costs, since it would mean re-indexing all the
>> documents each time the collection scores change.
>>
>>     What solution do you suggest?  Is there another solution that i
>> didnt mention?
>>
>>     More recent documents should also come first : In fact the final
>> sorting should be a ponderated sum between the collection score of an
>> image and the date of an image : most recent images from the
>> best-scored collections come first, then most recent from less-=20
>> scrored
>> collections, then less recent from best scored, and so on. I would
>> also like to be able to adjust the balance between date/collection =20=

>> score.
>>
>>     What solution do you suggest?
>>
>>
>>     I would also like to implement random-sorting. My solution is : i
>> create 12 new fields R1 -> R12 for each document, each containing a
>> random number between 1 and 12. To get a random sort, i sort each day
>> with a different combination of R1 .. R12. For example :
>>
>>     Day 1 : i sort by R1 then R4 then R5..
>>     Day 2 : i sort by R10 then R9 then R2....
>>     etc...
>>
>> Is it a good solution? Is there another way to do it?
>>
>>
>>     Very big thx in advance for your answers.
>>
>> Antoine
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--Apple-Mail-4--396566589--

From java-user-return-28671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 15:42:56 2007
Return-Path: <java-user-return-28671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71223 invoked from network); 15 Jun 2007 15:42:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 15:42:55 -0000
Received: (qmail 25561 invoked by uid 500); 15 Jun 2007 15:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25530 invoked by uid 500); 15 Jun 2007 15:42:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25519 invoked by uid 99); 15 Jun 2007 15:42:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:42:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:42:47 -0700
Received: from [192.168.3.113] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 8F7D25CB8
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 17:42:26 +0200 (CEST)
Message-ID: <4672B361.8080409@garambrogne.net>
Date: Fri, 15 Jun 2007 17:42:25 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Several questions about scoring/sorting + random sorting in an
 image/related application
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <4672AE55.20609@garambrogne.net> <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be>
In-Reply-To: <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

First step is to feed a Set with "collection"
Second step is to sort it.

With a sortedSet, you can do that, isnt'it?

M.


Antoine Baudoux a écrit :
> Could-you be more precise? I dont understand what you mean.
>
>
>
> On 15 Jun 2007, at 17:20, Mathieu Lecarme wrote:
>
>> Your request seems to be a two steps query.
>> First step, you select image, and then collection
>> Second step, you sort collection.
>>
>> BitVector can help you?
>>
>> M.
>> Antoine Baudoux a écrit :
>>>     Hi,
>>>
>>>     I'm developping an image database. Each lucene document
>>> representing an image contains (among other fields ):
>>>
>>>     - a date field
>>>     - a collection field containing the ID of the collection the image
>>> belongs to.
>>>
>>>     I want to be able to give a score to each collection. Collections
>>> with a higher score appear first in the results. I want to avoid
>>> re-indexing all the documents each time i change my collection scores.
>>>
>>>     For example on day 1 I decide to give collection #1 a 5 score and
>>> collection #3 a 10 score --> images belonging to collection #3 appear
>>> first in search results.
>>>     One day 2 i give collection #3 a 2 score --> images belonging to
>>> collection #1 appear first in search results.
>>>
>>>     I have read the lucene docs, and from what i understand there are
>>> many ways to achieve what I want :
>>>
>>>
>>>     - I can use a Very big Boolean query (OR query in fact) containing
>>> one TermQuery per collection ID, setting the correct boost factor for
>>> each termquery. The problem with this is that i have 300 collections,
>>> so i have a boolean query with 300 terms that i append to each query i
>>> make. I am afraid that it will be slow.
>>>
>>>     - I can use a ValueSourceQuery, where for each document i compute
>>> a custom score based on the value of the collection field. Will it be
>>> faster than the first solution?
>>>
>>>     - I can do advanced things such as writing a custom HitCollector,
>>> or a custom Query.
>>>
>>>     - I can add another field to each document, containing a computed
>>> custom score, then i could sort on that field. But i want to avoid
>>> this solution at all costs, since it would mean re-indexing all the
>>> documents each time the collection scores change.
>>>
>>>     What solution do you suggest?  Is there another solution that i
>>> didnt mention?
>>>
>>>     More recent documents should also come first : In fact the final
>>> sorting should be a ponderated sum between the collection score of an
>>> image and the date of an image : most recent images from the
>>> best-scored collections come first, then most recent from less-scrored
>>> collections, then less recent from best scored, and so on. I would
>>> also like to be able to adjust the balance between date/collection
>>> score.
>>>
>>>     What solution do you suggest?
>>>
>>>
>>>     I would also like to implement random-sorting. My solution is : i
>>> create 12 new fields R1 -> R12 for each document, each containing a
>>> random number between 1 and 12. To get a random sort, i sort each day
>>> with a different combination of R1 .. R12. For example :
>>>
>>>     Day 1 : i sort by R1 then R4 then R5..
>>>     Day 2 : i sort by R10 then R9 then R2....
>>>     etc...
>>>
>>> Is it a good solution? Is there another way to do it?
>>>
>>>
>>>     Very big thx in advance for your answers.
>>>
>>> Antoine
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 15:53:07 2007
Return-Path: <java-user-return-28672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80873 invoked from network); 15 Jun 2007 15:53:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 15:53:05 -0000
Received: (qmail 52113 invoked by uid 500); 15 Jun 2007 15:53:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51913 invoked by uid 500); 15 Jun 2007 15:53:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51900 invoked by uid 99); 15 Jun 2007 15:53:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:53:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 08:52:57 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 0A11F280392F
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 17:52:35 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 27835-06 for <java-user@lucene.apache.org>;
 Fri, 15 Jun 2007 17:52:29 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id BB4482803902
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 17:52:28 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4672B361.8080409@garambrogne.net>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <4672AE55.20609@garambrogne.net> <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be> <4672B361.8080409@garambrogne.net>
Content-Type: multipart/alternative; boundary=Apple-Mail-5--395400348
Message-Id: <8E10FB04-3084-4769-952F-1C1B8A96BA93@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
Date: Fri, 15 Jun 2007 17:52:26 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-5--395400348
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

The problem is that i want lucene to do the sorting, because the =20
query qould return thousands of results, and I'm displaying documents =20=

one page at a time.
--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53


On 15 Jun 2007, at 17:42, Mathieu Lecarme wrote:

> First step is to feed a Set with "collection"
> Second step is to sort it.
>
> With a sortedSet, you can do that, isnt'it?
>
> M.
>
>
> Antoine Baudoux a =E9crit :
>> Could-you be more precise? I dont understand what you mean.
>>
>>
>>
>> On 15 Jun 2007, at 17:20, Mathieu Lecarme wrote:
>>
>>> Your request seems to be a two steps query.
>>> First step, you select image, and then collection
>>> Second step, you sort collection.
>>>
>>> BitVector can help you?
>>>
>>> M.
>>> Antoine Baudoux a =E9crit :
>>>>     Hi,
>>>>
>>>>     I'm developping an image database. Each lucene document
>>>> representing an image contains (among other fields ):
>>>>
>>>>     - a date field
>>>>     - a collection field containing the ID of the collection the =20=

>>>> image
>>>> belongs to.
>>>>
>>>>     I want to be able to give a score to each collection. =20
>>>> Collections
>>>> with a higher score appear first in the results. I want to avoid
>>>> re-indexing all the documents each time i change my collection =20
>>>> scores.
>>>>
>>>>     For example on day 1 I decide to give collection #1 a 5 =20
>>>> score and
>>>> collection #3 a 10 score --> images belonging to collection #3 =20
>>>> appear
>>>> first in search results.
>>>>     One day 2 i give collection #3 a 2 score --> images =20
>>>> belonging to
>>>> collection #1 appear first in search results.
>>>>
>>>>     I have read the lucene docs, and from what i understand =20
>>>> there are
>>>> many ways to achieve what I want :
>>>>
>>>>
>>>>     - I can use a Very big Boolean query (OR query in fact) =20
>>>> containing
>>>> one TermQuery per collection ID, setting the correct boost =20
>>>> factor for
>>>> each termquery. The problem with this is that i have 300 =20
>>>> collections,
>>>> so i have a boolean query with 300 terms that i append to each =20
>>>> query i
>>>> make. I am afraid that it will be slow.
>>>>
>>>>     - I can use a ValueSourceQuery, where for each document i =20
>>>> compute
>>>> a custom score based on the value of the collection field. Will =20
>>>> it be
>>>> faster than the first solution?
>>>>
>>>>     - I can do advanced things such as writing a custom =20
>>>> HitCollector,
>>>> or a custom Query.
>>>>
>>>>     - I can add another field to each document, containing a =20
>>>> computed
>>>> custom score, then i could sort on that field. But i want to avoid
>>>> this solution at all costs, since it would mean re-indexing all the
>>>> documents each time the collection scores change.
>>>>
>>>>     What solution do you suggest?  Is there another solution that i
>>>> didnt mention?
>>>>
>>>>     More recent documents should also come first : In fact the =20
>>>> final
>>>> sorting should be a ponderated sum between the collection score =20
>>>> of an
>>>> image and the date of an image : most recent images from the
>>>> best-scored collections come first, then most recent from less-=20
>>>> scrored
>>>> collections, then less recent from best scored, and so on. I would
>>>> also like to be able to adjust the balance between date/collection
>>>> score.
>>>>
>>>>     What solution do you suggest?
>>>>
>>>>
>>>>     I would also like to implement random-sorting. My solution =20
>>>> is : i
>>>> create 12 new fields R1 -> R12 for each document, each containing a
>>>> random number between 1 and 12. To get a random sort, i sort =20
>>>> each day
>>>> with a different combination of R1 .. R12. For example :
>>>>
>>>>     Day 1 : i sort by R1 then R4 then R5..
>>>>     Day 2 : i sort by R10 then R9 then R2....
>>>>     etc...
>>>>
>>>> Is it a good solution? Is there another way to do it?
>>>>
>>>>
>>>>     Very big thx in advance for your answers.
>>>>
>>>> Antoine
>>>>
>>>> -------------------------------------------------------------------=20=

>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--Apple-Mail-5--395400348--

From java-user-return-28673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 16:02:36 2007
Return-Path: <java-user-return-28673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89248 invoked from network); 15 Jun 2007 16:02:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 16:02:34 -0000
Received: (qmail 84325 invoked by uid 500); 15 Jun 2007 16:02:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84291 invoked by uid 500); 15 Jun 2007 16:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84280 invoked by uid 99); 15 Jun 2007 16:02:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:02:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:02:27 -0700
Received: from [192.168.3.113] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 347405D72
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 18:02:06 +0200 (CEST)
Message-ID: <4672B7FD.9030301@garambrogne.net>
Date: Fri, 15 Jun 2007 18:02:05 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Several questions about scoring/sorting + random sorting in an
 image/related application
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <4672AE55.20609@garambrogne.net> <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be> <4672B361.8080409@garambrogne.net> <8E10FB04-3084-4769-952F-1C1B8A96BA93@taktik.be>
In-Reply-To: <8E10FB04-3084-4769-952F-1C1B8A96BA93@taktik.be>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

You sort only "collection", wich are 300.

first step, you search query with lucene
Map<Integer, Collection> collecs wich come from any persisted stuff.
Collection implement Sortable.
Set bags = new HashSet<Collection>();
iterate over hit
bags.add(collecs.get(hit.getTheIdOfTheCollection));

you've got a bag with at most 300 elements
you can sort it with strange rules.

M.

Antoine Baudoux a écrit :
> The problem is that i want lucene to do the sorting, because the query
> qould return thousands of results, and I'm displaying documents one
> page at a time.
>
>
> On 15 Jun 2007, at 17:42, Mathieu Lecarme wrote:
>
>> First step is to feed a Set with "collection"
>> Second step is to sort it.
>>
>> With a sortedSet, you can do that, isnt'it?
>>
>> M.
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 16:18:51 2007
Return-Path: <java-user-return-28674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99908 invoked from network); 15 Jun 2007 16:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 16:18:49 -0000
Received: (qmail 52759 invoked by uid 500); 15 Jun 2007 16:18:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52719 invoked by uid 500); 15 Jun 2007 16:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52708 invoked by uid 99); 15 Jun 2007 16:18:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:18:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:18:40 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1004010muf
        for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 09:18:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uP2ypwkIh0YJ1u21wngD2OaTshBTWiSq/uzoTRaazLfGwHCOFvO0HX9iUpn6Fp6lhlvw9LEF0mnkdD6kl7xgm2w2YVrSKzUHGtxpZbIC6WbaEX0LQAQJ2kjfBLXBJYmfILXfCeZmSBWFk/vaXSEYFzG0etvg+xikrzNAXzPxBeA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lYKcz/Z4O+cw4N9DwG57ZUxcfYDhOEvaNR+8nSpqrsavgYIjwj3C/zNhq3VN7c0dx572PGyECHnqCa54PI4pWmFw7/hb8XuKetUrFla8ebj6ZLVdDkervuaa9B58vfFZj0EsETsODgu7APP4jKA5lAxAZVup3LHGIoFb+jGsevg=
Received: by 10.82.126.5 with SMTP id y5mr5976150buc.1181924298260;
        Fri, 15 Jun 2007 09:18:18 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 15 Jun 2007 09:18:18 -0700 (PDT)
Message-ID: <359a92830706150918g27e02e70h9bd72344f541c39f@mail.gmail.com>
Date: Fri, 15 Jun 2007 12:18:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
In-Reply-To: <8E10FB04-3084-4769-952F-1C1B8A96BA93@taktik.be>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38405_14514287.1181924298229"
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
	 <4672AE55.20609@garambrogne.net>
	 <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be>
	 <4672B361.8080409@garambrogne.net>
	 <8E10FB04-3084-4769-952F-1C1B8A96BA93@taktik.be>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38405_14514287.1181924298229
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Another possibility is to re-think this a bit. You are "displaying
documents one page at a time", which I take to mean you
are displaying some number (say 50) document summaries
per page.

I'm also assuming that you want to display ALL documents
from, say, collection 32 and then (and only then) display
the documents in the next-ranking collection.

Let's further assume that no collection has less than 50 docs
for discussion purposes, but that's not a requirement.

At server startup, you compute the number of documents
in each bucket. When a user pages through results, you can
reasonably confine the search to just two or three of your
collections and easily add a boosted clause for those few
collections.

The tricky part of this would be to know that a request
for results 200-250 spanned across collections
100 and 400, and making sure that the page boundaries
were computed correctly.

Don't know if this is reasonable, but occurred to me...

Best
Erick




On 6/15/07, Antoine Baudoux <ab@taktik.be> wrote:
>
> The problem is that i want lucene to do the sorting, because the
> query qould return thousands of results, and I'm displaying documents
> one page at a time.
> --
> Antoine Baudoux
> Development Manager
> ab@taktik.be
> T=E9l.: +32 2 333 58 44
> GSM: +32 499 534 538
> Fax.: +32 2 648 16 53
>
>
> On 15 Jun 2007, at 17:42, Mathieu Lecarme wrote:
>
> > First step is to feed a Set with "collection"
> > Second step is to sort it.
> >
> > With a sortedSet, you can do that, isnt'it?
> >
> > M.
> >
> >
> > Antoine Baudoux a =E9crit :
> >> Could-you be more precise? I dont understand what you mean.
> >>
> >>
> >>
> >> On 15 Jun 2007, at 17:20, Mathieu Lecarme wrote:
> >>
> >>> Your request seems to be a two steps query.
> >>> First step, you select image, and then collection
> >>> Second step, you sort collection.
> >>>
> >>> BitVector can help you?
> >>>
> >>> M.
> >>> Antoine Baudoux a =E9crit :
> >>>>     Hi,
> >>>>
> >>>>     I'm developping an image database. Each lucene document
> >>>> representing an image contains (among other fields ):
> >>>>
> >>>>     - a date field
> >>>>     - a collection field containing the ID of the collection the
> >>>> image
> >>>> belongs to.
> >>>>
> >>>>     I want to be able to give a score to each collection.
> >>>> Collections
> >>>> with a higher score appear first in the results. I want to avoid
> >>>> re-indexing all the documents each time i change my collection
> >>>> scores.
> >>>>
> >>>>     For example on day 1 I decide to give collection #1 a 5
> >>>> score and
> >>>> collection #3 a 10 score --> images belonging to collection #3
> >>>> appear
> >>>> first in search results.
> >>>>     One day 2 i give collection #3 a 2 score --> images
> >>>> belonging to
> >>>> collection #1 appear first in search results.
> >>>>
> >>>>     I have read the lucene docs, and from what i understand
> >>>> there are
> >>>> many ways to achieve what I want :
> >>>>
> >>>>
> >>>>     - I can use a Very big Boolean query (OR query in fact)
> >>>> containing
> >>>> one TermQuery per collection ID, setting the correct boost
> >>>> factor for
> >>>> each termquery. The problem with this is that i have 300
> >>>> collections,
> >>>> so i have a boolean query with 300 terms that i append to each
> >>>> query i
> >>>> make. I am afraid that it will be slow.
> >>>>
> >>>>     - I can use a ValueSourceQuery, where for each document i
> >>>> compute
> >>>> a custom score based on the value of the collection field. Will
> >>>> it be
> >>>> faster than the first solution?
> >>>>
> >>>>     - I can do advanced things such as writing a custom
> >>>> HitCollector,
> >>>> or a custom Query.
> >>>>
> >>>>     - I can add another field to each document, containing a
> >>>> computed
> >>>> custom score, then i could sort on that field. But i want to avoid
> >>>> this solution at all costs, since it would mean re-indexing all the
> >>>> documents each time the collection scores change.
> >>>>
> >>>>     What solution do you suggest?  Is there another solution that i
> >>>> didnt mention?
> >>>>
> >>>>     More recent documents should also come first : In fact the
> >>>> final
> >>>> sorting should be a ponderated sum between the collection score
> >>>> of an
> >>>> image and the date of an image : most recent images from the
> >>>> best-scored collections come first, then most recent from less-
> >>>> scrored
> >>>> collections, then less recent from best scored, and so on. I would
> >>>> also like to be able to adjust the balance between date/collection
> >>>> score.
> >>>>
> >>>>     What solution do you suggest?
> >>>>
> >>>>
> >>>>     I would also like to implement random-sorting. My solution
> >>>> is : i
> >>>> create 12 new fields R1 -> R12 for each document, each containing a
> >>>> random number between 1 and 12. To get a random sort, i sort
> >>>> each day
> >>>> with a different combination of R1 .. R12. For example :
> >>>>
> >>>>     Day 1 : i sort by R1 then R4 then R5..
> >>>>     Day 2 : i sort by R10 then R9 then R2....
> >>>>     etc...
> >>>>
> >>>> Is it a good solution? Is there another way to do it?
> >>>>
> >>>>
> >>>>     Very big thx in advance for your answers.
> >>>>
> >>>> Antoine
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>>
> >>> --------------------------------------------------------------------
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_38405_14514287.1181924298229--

From java-user-return-28675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 16:19:18 2007
Return-Path: <java-user-return-28675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 165 invoked from network); 15 Jun 2007 16:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 16:19:16 -0000
Received: (qmail 54854 invoked by uid 500); 15 Jun 2007 16:19:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54620 invoked by uid 500); 15 Jun 2007 16:19:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54609 invoked by uid 99); 15 Jun 2007 16:19:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:19:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:19:08 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l5FGIl029609
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 09:18:47 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007061509184703320
 for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 09:18:47 -0700
Received: from avocado.ai.sri.com ([130.107.65.9])
	by Salt.AI.SRI.COM with asmtp 
	(Cipher TLSv1:RC4-MD5:128) (Exim 3.35 #1 (Debian))
	id 1HzEVb-0005DF-00
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 09:18:47 -0700
Message-ID: <4672BBDF.2070004@ai.sri.com>
Date: Fri, 15 Jun 2007 09:18:39 -0700
From: Jiye Yu <yu@AI.SRI.COM>
Reply-To: yu@AI.SRI.COM
Organization: AIC
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: efficient way to filter out unwanted results
References: <46721945.4040808@ai.sri.com> <90530f7c0706142254i1657ef81xa4482f7dec4a02bd@mail.gmail.com> <467242AB.2030204@ai.sri.com> <467253B6.2040800@teamware.com>
In-Reply-To: <467253B6.2040800@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Antony for the idea.
The only thing that may prevent it from working well is that the index 
is updated frequently so the docid to ext id or cache needs to be 
updated freq, which may affect the performance.

Thanks again for your help.

Antony Bowesman wrote:
> yu wrote:
>> Thanks Sawan for the suggestion.
>> I guess this will work for statically known doc ids. In my case, I 
>> know only external ids that I want to exclude from the result set.for 
>> each  search.  Of course, I can always exclude these  docs in a post 
>> search process. I am curious if there are other more efficient approach.
> 
> When you open a searcher, you could create a cached array of all your 
> external Ids with their Lucene DocId.  Using a custom HitCollector, 
> which can be created with the Ids you wish to exclude, you can get a 
> document's external Id during the collect() method using the docid.  
> Then just check the external Id of the matched document against the 
> exclusion list.
> 
> As long as you have your searcher open, the cache will remain valid.
> Antony
> 
> 
> 
> 
>>
>> Thanks again for your help.
>>
>> Jay
>>
>> Sawan Sharma wrote:
>>> Hello Jay,
>>>
>>> I am not sure up to what level I understood your problem . But as far 
>>> as my
>>> assumption, you can try HitCollector class and its collect method. 
>>> Here you
>>> can get DocID for each hit and can remove while searching.
>>>
>>> Hope it will be useful.
>>>
>>> Sawan
>>> (Chambal.com inc. NJ USA)
>>>
>>>
>>>
>>>
>>>
>>> On 6/15/07, yu <yu@ai.sri.com> wrote:
>>>>
>>>> Hi everyone,
>>>>
>>>> I am trying to remove several docs from search results each time I do
>>>> query. The docs can be identified by an exteranl ids whcih are
>>>> saved/indexed. I could use a Query or QueryFilter  to achieve this but
>>>> not sure if it's the most efficient way to do that.
>>>> Anyone has any experience or idea?
>>>> Thanks!
>>>>
>>>> Jay
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 16:27:29 2007
Return-Path: <java-user-return-28676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3330 invoked from network); 15 Jun 2007 16:27:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 16:27:28 -0000
Received: (qmail 85085 invoked by uid 500); 15 Jun 2007 16:27:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85051 invoked by uid 500); 15 Jun 2007 16:27:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85035 invoked by uid 99); 15 Jun 2007 16:27:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:27:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:27:18 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 88D442804C8D
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 18:26:57 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 28386-09 for <java-user@lucene.apache.org>;
 Fri, 15 Jun 2007 18:26:52 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 285702804C65
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 18:26:52 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830706150918g27e02e70h9bd72344f541c39f@mail.gmail.com>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <4672AE55.20609@garambrogne.net> <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be> <4672B361.8080409@garambrogne.net> <8E10FB04-3084-4769-952F-1C1B8A96BA93@taktik.be> <359a92830706150918g27e02e70h9bd72344f541c39f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B87BAFF4-2ACB-47D6-8D1D-913087C2C916@taktik.be>
Content-Transfer-Encoding: 7bit
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
Date: Fri, 15 Jun 2007 18:26:49 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

> Another possibility is to re-think this a bit. You are "displaying
> documents one page at a time", which I take to mean you
> are displaying some number (say 50) document summaries
> per page.
>
> I'm also assuming that you want to display ALL documents
> from, say, collection 32 and then (and only then) display
> the documents in the next-ranking collection.
>

Unfortunately that's not the case : I also want more recent documents  
to come first, so as i said in my original post the scoring is a mix  
(ponderated sum) between document date and collection scores.

This comes from a real-world requirement from my client : He wants  
the photos from his favorite collections to come first, but at the  
same times he wants the most recent images to come first.

If only the Collection score mattered it would be simple.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 16:32:59 2007
Return-Path: <java-user-return-28677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8019 invoked from network); 15 Jun 2007 16:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 16:32:57 -0000
Received: (qmail 2885 invoked by uid 500); 15 Jun 2007 16:32:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2831 invoked by uid 500); 15 Jun 2007 16:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2790 invoked by uid 99); 15 Jun 2007 16:32:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:32:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:32:38 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 3B8922804E3F
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 18:32:17 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 28460-05 for <java-user@lucene.apache.org>;
 Fri, 15 Jun 2007 18:32:11 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id EB4552804E13
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 18:32:10 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4672B7FD.9030301@garambrogne.net>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <4672AE55.20609@garambrogne.net> <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be> <4672B361.8080409@garambrogne.net> <8E10FB04-3084-4769-952F-1C1B8A96BA93@taktik.be> <4672B7FD.9030301@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <0856A383-6999-47D0-A9D6-BD89AED20DDE@taktik.be>
Content-Transfer-Encoding: quoted-printable
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
Date: Fri, 15 Jun 2007 18:32:08 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

	I am very sorry, but i dont understand at all what you mean in =
terms =20
of Lucene api. Could you drop a few lines of concrete code to help me =20=

understand? I'm quite new to lucene.

Thanks!



> You sort only "collection", wich are 300.
>
> first step, you search query with lucene
> Map<Integer, Collection> collecs wich come from any persisted stuff.
> Collection implement Sortable.
> Set bags =3D new HashSet<Collection>();
> iterate over hit
> bags.add(collecs.get(hit.getTheIdOfTheCollection));
>
> you've got a bag with at most 300 elements
> you can sort it with strange rules.
>
> M.
>
> Antoine Baudoux a =E9crit :
>> The problem is that i want lucene to do the sorting, because the =20
>> query
>> qould return thousands of results, and I'm displaying documents one
>> page at a time.
>>
>>
>> On 15 Jun 2007, at 17:42, Mathieu Lecarme wrote:
>>
>>> First step is to feed a Set with "collection"
>>> Second step is to sort it.
>>>
>>> With a sortedSet, you can do that, isnt'it?
>>>
>>> M.
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 16:52:26 2007
Return-Path: <java-user-return-28678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14083 invoked from network); 15 Jun 2007 16:52:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 16:52:25 -0000
Received: (qmail 48951 invoked by uid 500); 15 Jun 2007 16:52:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48909 invoked by uid 500); 15 Jun 2007 16:52:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48898 invoked by uid 99); 15 Jun 2007 16:52:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:52:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 09:52:18 -0700
Received: from [192.168.3.113] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 4F8015CB8
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 18:51:55 +0200 (CEST)
Message-ID: <4672C3A8.1080009@garambrogne.net>
Date: Fri, 15 Jun 2007 18:51:52 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Several questions about scoring/sorting + random sorting in an
 image/related application
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <4672AE55.20609@garambrogne.net> <BE4B1182-4E9A-460D-82DE-644CE5566699@taktik.be> <4672B361.8080409@garambrogne.net> <8E10FB04-3084-4769-952F-1C1B8A96BA93@taktik.be> <4672B7FD.9030301@garambrogne.net> <0856A383-6999-47D0-A9D6-BD89AED20DDE@taktik.be>
In-Reply-To: <0856A383-6999-47D0-A9D6-BD89AED20DDE@taktik.be>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Your need is :

>From a request you find images
from images you get collections
collections are sorted
collections are returned

you've got a lot of images, and 300 collections

right?

Antoine Baudoux a écrit :
>     I am very sorry, but i dont understand at all what you mean in
> terms of Lucene api. Could you drop a few lines of concrete code to
> help me understand? I'm quite new to lucene.
>
> Thanks!
>
>
>
>> You sort only "collection", wich are 300.
>>
>> first step, you search query with lucene
>> Map<Integer, Collection> collecs wich come from any persisted stuff.
>> Collection implement Sortable.
>> Set bags = new HashSet<Collection>();
>> iterate over hit
>> bags.add(collecs.get(hit.getTheIdOfTheCollection));
>>
>> you've got a bag with at most 300 elements
>> you can sort it with strange rules.
>>
>> M.
>>
>> Antoine Baudoux a écrit :
>>> The problem is that i want lucene to do the sorting, because the query
>>> qould return thousands of results, and I'm displaying documents one
>>> page at a time.
>>>
>>>
>>> On 15 Jun 2007, at 17:42, Mathieu Lecarme wrote:
>>>
>>>> First step is to feed a Set with "collection"
>>>> Second step is to sort it.
>>>>
>>>> With a sortedSet, you can do that, isnt'it?
>>>>
>>>> M.
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 17:08:21 2007
Return-Path: <java-user-return-28679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19908 invoked from network); 15 Jun 2007 17:08:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 17:08:20 -0000
Received: (qmail 83432 invoked by uid 500); 15 Jun 2007 17:08:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83401 invoked by uid 500); 15 Jun 2007 17:08:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83390 invoked by uid 99); 15 Jun 2007 17:08:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 10:08:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 10:08:13 -0700
Received: by wa-out-1112.google.com with SMTP id j40so1280237wah
        for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 10:07:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Vb9JnHKXHSaaP0PjL0lcSGyOKJLu1NCa46jnZ+BYVC0kqTUHompFTKPZakOKbiWRV9M424W/DCj272joWcdF8ZstBFq4dAHdYh3tJoT2s1A+UNputAIfbwr8TzD2Q6pchkrTRm1sxutNs/dBdZu/RPBfrXKRPYriJ03ln8xNuJI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=OomtCeAJor5tNfOarY8K9C5Y6R0TsyaB+dRIqMuRL2QQWIVluYhveCQEZWkUw1PlXW+A/trvXYtgXitOJguFQWtO9b97+wL8kZuSEzpig/+L8yBuTVbsjUuLqeK4VEVcwl7QFNi+9MOSkTrCMTDh3dGEJ5+foZA/0+GUDxL1CS8=
Received: by 10.114.133.1 with SMTP id g1mr3218482wad.1181927271452;
        Fri, 15 Jun 2007 10:07:51 -0700 (PDT)
Received: by 10.115.32.18 with HTTP; Fri, 15 Jun 2007 10:07:51 -0700 (PDT)
Message-ID: <ae6f38f60706151007t5aabbd67q6757d213d5599793@mail.gmail.com>
Date: Fri, 15 Jun 2007 13:07:51 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Several questions about scoring/sorting + random sorting in an image/related application
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Antoine Baudoux writes:
> I want to be able to give a score to each collection.

Keep in mind, Lucene is computing a score based on quite a number of
things from how often a term is used in a document, how often it
appears in the collection of documents, how long the query is, etc.

If your concept of a document's score changes, then I'd be inclined to
think you're possibly using Lucene in a manner it wasn't designed for.
 That said, I have two thoughts.

THOUGHT ONE
Use Lucene to locate "records" for you --- what you really are
interested in getting back _from Lucene_ is the primary key.  Then,
use this key to do a lookup in your database of the score of the day
and sort accordingly.  The idea is that Lucene finds, your table
scores, and because of that you won't need to re-index when something
changes.

THOUGHT TWO
Use boosting.  COLLECTION_ONE^5  COLLECTION_THREE^10  etc.  That way
/if/ the Lucene document appears in the collection, it's score is
weighted according to your preferences.  You're free to change the
boosts on a query-by-query basis without having to re-index.


> I can use a Very big ... query ... I am afraid that it will be slow.
Try it.  I think you'll find Lucene is _fast_.  We do some pretty HUGE
and complicated queries and Lucene just screams.


> I can add another field to each document, containing a computed
> custom score, then i could sort on that field. But i want to avoid
> this solution at all costs, since it would mean re-indexing all the
> documents each time the collection scores change.
Or, use indirection - instead of keeping the score, keep the primary
key of a score table.  Then in a database, where speed won't be the
issue, perform the look up.   Honestly, if you're only got 300
categories, you could keep that simple table in memory using less
space than a small text file.



> I would also like to implement random-sorting. ... Is it a good solution?
> Is there another way to do it?

This really, really, really feels like you're force fitting Lucene to
do some business logic piece of a larger application.  May I be so
bold as to ask what's the _actual_ problem you're trying to solve.
("I'm trying to make a hole in a piece of oak" as opposed to "What's
the best way to sharpen a Phillips screwdriver enough to cut wood?")

Keep in mind that the forum is for Lucene, so parts of your questions
may be answered outside of the forum.

-wls

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 17:09:56 2007
Return-Path: <java-user-return-28680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20210 invoked from network); 15 Jun 2007 17:09:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 17:09:55 -0000
Received: (qmail 86577 invoked by uid 500); 15 Jun 2007 17:09:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86548 invoked by uid 500); 15 Jun 2007 17:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86537 invoked by uid 99); 15 Jun 2007 17:09:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 10:09:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gresh@us.ibm.com designates 32.97.182.145 as permitted sender)
Received: from [32.97.182.145] (HELO e5.ny.us.ibm.com) (32.97.182.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 10:09:48 -0700
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e5.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l5FH9QND006950
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 13:09:26 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5FH9QXQ388944
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 13:09:26 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5FH9QGa013446
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 13:09:26 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5FH9QCf013443
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 13:09:26 -0400
In-Reply-To: <003a01c7aea4$8d5b9f10$d100a8c0@Yatin>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Lucene Search result (scoring )
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFA3A5685D.F090EA1E-ON852572FB.005DE2DC-852572FB.005E3F96@us.ibm.com>
Date: Fri, 15 Jun 2007 13:09:28 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M5_05202007|May 20, 2007) at
 06/15/2007 13:09:29,
	Serialize complete at 06/15/2007 13:09:29
Content-Type: multipart/alternative; boundary="=_alternative 005E3EDE852572FB_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005E3EDE852572FB_=
Content-Type: text/plain; charset="US-ASCII"

Your examples are a little confusing to read. However, I think one thing 
that you need to know is that the score (by "default") depends on more 
than just the number of hits. It also depends on the length of the 
document the hits are in. For example, matching two words in a 
two-word-long document will generate a higher score than matching the same 
two words in a one-hundred-word-long document. In order to change the 
scoring, you will have to override some of the standard methods. There are 
those on the mailing list much more qualified to discuss this than I am, 
as I am new myself.

Donna Gresh




"Yatin Soni" <yatinsoni@interinfosystems.com> 
06/14/2007 12:53 PM
Please respond to
java-user@lucene.apache.org


To
<java-user@lucene.apache.org>
cc

Subject
Lucene Search result (scoring )






Hi,

    We are using Lucene as search engine and I have a question regarding 
the scoring of search results, I had given a example for it,

Example :-->

suppose we have four Items on which we have indexed,
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
1)demo --> contents: Jumbo Numbers
2)demo2 --> contents: Jumbo Numbers
3)demo3 --> contents: Jumbo Numbers
4)demo4 --> contents: Jumbo Numbers

Search Results for query ->"Jumbo"

demo:  Score: 0.3884282
demo2: Score: 0.3884282
demo3: Score: 0.3884282
demo4: Score: 0.3884282
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Test 1 >>  Change the contents of items

1)demo --> contents: Jumbo Numbers Stamps Numbers
2)demo2 --> contents: Jumbo Numbers Stamps Jumbo
3)demo3 --> contents: Jumbo Numbers Numbers Test
4)demo4 --> contents: Jumbo Numbers Stamps Jumbo

Search Results for query ->"Jumbo"

demo2: Score: 0.54932046
demo4: Score: 0.54932046
demo:  Score: 0.3884282
demo3: Score: 0.3884282

# In the Test 1 items(demo2 and demo4) both contains 2 occurrence of 
"Jumbo" and rest items(demo and demo3) 
  have only one occurrence of "Jumbo" so result are coming as per the high 
score.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Test 2 >>  Change the contents of items

1)demo --> contents: Jumbo Numbers Stamps Numbers
2)demo2 --> contents: Jumbo Numbers Stamps Jumbo Parquetry Block Super Set
3)demo3 --> contents: Jumbo Numbers Numbers Test
4)demo4 --> contents: Jumbo Numbers Stamps Jumbo

Search Results for query ->"Jumbo"

demo4: Score: 0.5493204
demo:  Score: 0.3884282
demo3: Score: 0.3884282
demo2: Score: 0.3433253

# Now in the Test 2 We are changing the contents of demo2, and by 
searching the same query "Jumbo" the results
  are different from the Test 1.And the score for demo2 is also less as 
compare to the items (demo and demo3) 
  which have less occurrence of "Jumbo" as compare to demo2.
////////////////////////////////////////////////////////////////////////////////////////////////////////////////

According to the example search results are coming in the following 
sequence:---->
1. demo4: Score: 0.5493204
2. demo:  Score: 0.3884282
3. demo3: Score: 0.3884282
4. demo2: Score: 0.3433253

but we are expecting in the following sequence :--->
1. demo4
2. demo2
3. demo
4. demo3

OR

1. demo2
2. demo4
3. demo
4. demo3

because demo2 contains the two occurrence of "Jumbo" which is higher than 
the items demo and demo3. I have sorted the results with their RELEVANCE 
but then also
results were coming in the same sequence.

So my QUESTION is that can we make desire sequence as per the occurrence 
of a particular word? Can we make demo2 above the demo and demo3 in the 
search results?

So I need help on this issue....

Thanks,
Yatin




--=_alternative 005E3EDE852572FB_=--

From java-user-return-28681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 17:23:15 2007
Return-Path: <java-user-return-28681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24153 invoked from network); 15 Jun 2007 17:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 17:23:14 -0000
Received: (qmail 29026 invoked by uid 500); 15 Jun 2007 17:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28990 invoked by uid 500); 15 Jun 2007 17:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28979 invoked by uid 99); 15 Jun 2007 17:23:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 10:23:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 10:23:06 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.8/8.13.8) with ESMTP id l5FHMiTS021087
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 19:22:45 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: negative queries
Date: Fri, 15 Jun 2007 19:22:44 +0200
User-Agent: KMail/1.8.2
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
In-Reply-To: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706151922.44258.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 15 June 2007 03:07, Antony Sequeira wrote:
> Hi
> I am aware that with Lucene I can not do negative only queries such as
>   -foo:bar
> 
> But today I ran into an issue where I realized even queries such as
>   +foo:bar +(-goobly:doo)
> also never return any results.

Could you try this:

  +foo:bar -goobly:doo

That should do what you want, as far as I can see.

Regards,
Paul Elschot



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 20:14:38 2007
Return-Path: <java-user-return-28682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86022 invoked from network); 15 Jun 2007 20:14:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 20:14:37 -0000
Received: (qmail 70746 invoked by uid 500); 15 Jun 2007 20:14:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70696 invoked by uid 500); 15 Jun 2007 20:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70679 invoked by uid 99); 15 Jun 2007 20:14:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 13:14:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 13:14:27 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id EFE2598FA8
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 22:14:04 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <ae6f38f60706151007t5aabbd67q6757d213d5599793@mail.gmail.com>
References: <ae6f38f60706151007t5aabbd67q6757d213d5599793@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <0C836030-35BF-4928-BA70-B90E399EC4F7@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
Date: Fri, 15 Jun 2007 22:14:03 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Walt explain differently what I said.
Lucene can be efficiently use for selecting objects, without sorting =20
or scoring anything, then, with id stored in Lucene, you can sort =20
yourself with a simple Sortable implementation.
The only limit is that lucene gives you not too much results, with =20
your 300 maximal responses, you can play with it easily.

M.
Le 15 juin 07 =E0 19:07, Walt Stoneburner a =E9crit :

> Antoine Baudoux writes:
>> I want to be able to give a score to each collection.
>
> Keep in mind, Lucene is computing a score based on quite a number of
> things from how often a term is used in a document, how often it
> appears in the collection of documents, how long the query is, etc.
>
> If your concept of a document's score changes, then I'd be inclined to
> think you're possibly using Lucene in a manner it wasn't designed for.
> That said, I have two thoughts.
>
> THOUGHT ONE
> Use Lucene to locate "records" for you --- what you really are
> interested in getting back _from Lucene_ is the primary key.  Then,
> use this key to do a lookup in your database of the score of the day
> and sort accordingly.  The idea is that Lucene finds, your table
> scores, and because of that you won't need to re-index when something
> changes.
>
> THOUGHT TWO
> Use boosting.  COLLECTION_ONE^5  COLLECTION_THREE^10  etc.  That way
> /if/ the Lucene document appears in the collection, it's score is
> weighted according to your preferences.  You're free to change the
> boosts on a query-by-query basis without having to re-index.
>
>
>> I can use a Very big ... query ... I am afraid that it will be slow.
> Try it.  I think you'll find Lucene is _fast_.  We do some pretty HUGE
> and complicated queries and Lucene just screams.
>
>
>> I can add another field to each document, containing a computed
>> custom score, then i could sort on that field. But i want to avoid
>> this solution at all costs, since it would mean re-indexing all the
>> documents each time the collection scores change.
> Or, use indirection - instead of keeping the score, keep the primary
> key of a score table.  Then in a database, where speed won't be the
> issue, perform the look up.   Honestly, if you're only got 300
> categories, you could keep that simple table in memory using less
> space than a small text file.
>
>
>
>> I would also like to implement random-sorting. ... Is it a good =20
>> solution?
>> Is there another way to do it?
>
> This really, really, really feels like you're force fitting Lucene to
> do some business logic piece of a larger application.  May I be so
> bold as to ask what's the _actual_ problem you're trying to solve.
> ("I'm trying to make a hole in a piece of oak" as opposed to "What's
> the best way to sharpen a Phillips screwdriver enough to cut wood?")
>
> Keep in mind that the forum is for Lucene, so parts of your questions
> may be answered outside of the forum.
>
> -wls
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 20:34:03 2007
Return-Path: <java-user-return-28683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91573 invoked from network); 15 Jun 2007 20:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 20:34:01 -0000
Received: (qmail 7842 invoked by uid 500); 15 Jun 2007 20:33:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7808 invoked by uid 500); 15 Jun 2007 20:33:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7797 invoked by uid 99); 15 Jun 2007 20:33:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 13:33:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 13:33:53 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 5440E2809069
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 22:33:31 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 01062-05 for <java-user@lucene.apache.org>;
 Fri, 15 Jun 2007 22:33:25 +0200 (CEST)
Received: from [192.168.1.3] (254.200-241-81.adsl-dyn.isp.belgacom.be [81.241.200.254])
	by villon.taktik.be (Postfix) with ESMTP id A32D52809043
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 22:33:25 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <0C836030-35BF-4928-BA70-B90E399EC4F7@garambrogne.net>
References: <ae6f38f60706151007t5aabbd67q6757d213d5599793@mail.gmail.com> <0C836030-35BF-4928-BA70-B90E399EC4F7@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <913D56C9-6C69-402A-8FFD-2ABB6C412B22@taktik.be>
Content-Transfer-Encoding: quoted-printable
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
Date: Fri, 15 Jun 2007 22:33:22 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

Well maybe i didnt explain my problem very well. I have a database =20
with over 3 million images, with each image belonging to one out of =20
300 possible collections. A query could return more than 100.000 =20
images (for example if they search for a popular  image keyword).

I want to sort my result with a combination of image date/collection =20
scoring : Recent images with high-score collections come first, then =20
recent image with lower collection. As the user navigate through the =20
images, less recent images start to appear, also sorted by collection =20=

score.

So imagine i make a query for "nature". This query would return =20
100.000 images. Your sugestion is that i dont make any attempt to =20
sort the images in Lucene.i just make a query with no sort. I would =20
then need to load the 100.000 rows from my database, then sort those =20
100.000 rows with my custom-defined ordering. Are-you sure this =20
method would be faster than custom Query, or a ValueSource query? =20
Since lucene already indexes and caches field values, I'm not very sure.


> Walt explain differently what I said.
> Lucene can be efficiently use for selecting objects, without =20
> sorting or scoring anything, then, with id stored in Lucene, you =20
> can sort yourself with a simple Sortable implementation.
> The only limit is that lucene gives you not too much results, with =20
> your 300 maximal responses, you can play with it easily.
>
> M.
> Le 15 juin 07 =E0 19:07, Walt Stoneburner a =E9crit :
>
>> Antoine Baudoux writes:
>>> I want to be able to give a score to each collection.
>>
>> Keep in mind, Lucene is computing a score based on quite a number of
>> things from how often a term is used in a document, how often it
>> appears in the collection of documents, how long the query is, etc.
>>
>> If your concept of a document's score changes, then I'd be =20
>> inclined to
>> think you're possibly using Lucene in a manner it wasn't designed =20
>> for.
>> That said, I have two thoughts.
>>
>> THOUGHT ONE
>> Use Lucene to locate "records" for you --- what you really are
>> interested in getting back _from Lucene_ is the primary key.  Then,
>> use this key to do a lookup in your database of the score of the day
>> and sort accordingly.  The idea is that Lucene finds, your table
>> scores, and because of that you won't need to re-index when something
>> changes.
>>
>> THOUGHT TWO
>> Use boosting.  COLLECTION_ONE^5  COLLECTION_THREE^10  etc.  That way
>> /if/ the Lucene document appears in the collection, it's score is
>> weighted according to your preferences.  You're free to change the
>> boosts on a query-by-query basis without having to re-index.
>>
>>
>>> I can use a Very big ... query ... I am afraid that it will be slow.
>> Try it.  I think you'll find Lucene is _fast_.  We do some pretty =20
>> HUGE
>> and complicated queries and Lucene just screams.
>>
>>
>>> I can add another field to each document, containing a computed
>>> custom score, then i could sort on that field. But i want to avoid
>>> this solution at all costs, since it would mean re-indexing all the
>>> documents each time the collection scores change.
>> Or, use indirection - instead of keeping the score, keep the primary
>> key of a score table.  Then in a database, where speed won't be the
>> issue, perform the look up.   Honestly, if you're only got 300
>> categories, you could keep that simple table in memory using less
>> space than a small text file.
>>
>>
>>
>>> I would also like to implement random-sorting. ... Is it a good =20
>>> solution?
>>> Is there another way to do it?
>>
>> This really, really, really feels like you're force fitting Lucene to
>> do some business logic piece of a larger application.  May I be so
>> bold as to ask what's the _actual_ problem you're trying to solve.
>> ("I'm trying to make a hole in a piece of oak" as opposed to "What's
>> the best way to sharpen a Phillips screwdriver enough to cut wood?")
>>
>> Keep in mind that the forum is for Lucene, so parts of your questions
>> may be answered outside of the forum.
>>
>> -wls
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 20:38:40 2007
Return-Path: <java-user-return-28684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93434 invoked from network); 15 Jun 2007 20:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 20:38:39 -0000
Received: (qmail 21974 invoked by uid 500); 15 Jun 2007 20:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21945 invoked by uid 500); 15 Jun 2007 20:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21934 invoked by uid 99); 15 Jun 2007 20:38:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 13:38:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 13:38:31 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 6019628091CC;
	Fri, 15 Jun 2007 22:38:09 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 01062-09; Fri, 15 Jun 2007 22:38:03 +0200 (CEST)
Received: from [192.168.1.3] (254.200-241-81.adsl-dyn.isp.belgacom.be [81.241.200.254])
	by villon.taktik.be (Postfix) with ESMTP id D78EA2809191;
	Fri, 15 Jun 2007 22:38:02 +0200 (CEST)
In-Reply-To: <ae6f38f60706151007t5aabbd67q6757d213d5599793@mail.gmail.com>
References: <ae6f38f60706151007t5aabbd67q6757d213d5599793@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: multipart/alternative; boundary=Apple-Mail-2--378267034
Message-Id: <779133DE-29AC-4339-ADD6-FD701F683E8B@taktik.be>
Cc: java-user@lucene.apache.org
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
Date: Fri, 15 Jun 2007 22:37:59 +0200
To: Walt Stoneburner <walt.stoneburner@gmail.com>
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-2--378267034
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


>
> On 15 Jun 2007, at 19:07, Walt Stoneburner wrote:
> Antoine Baudoux writes:
> I want to be able to give a score to each collection.
>
> Keep in mind, Lucene is computing a score based on quite a number of
> things from how often a term is used in a document, how often it
> appears in the collection of documents, how long the query is, etc.
>
> If your concept of a document's score changes, then I'd be inclined to
> think you're possibly using Lucene in a manner it wasn't designed for.
> That said, I have two thoughts.
>
> THOUGHT ONE
> Use Lucene to locate "records" for you --- what you really are
> interested in getting back _from Lucene_ is the primary key.  Then,
> use this key to do a lookup in your database of the score of the day
> and sort accordingly.  The idea is that Lucene finds, your table
> scores, and because of that you won't need to re-index when something
> changes.


I think Thats the same principle that drives ValueSourceQuery. The  
advantadge of ValueSourceQuery is that the sorting remains in lucene,  
where it can benefits of field indexes and Field Caches.

  I dont like the idea of having to retrieve, say, 300.000 results  
from lucene, then sort them using lookups in DB, then display only a  
part of the results on screen. But I may be wrong thinking it would  
be slower than a ValueSourceQuery.
>
>
> THOUGHT TWO
> Use boosting.  COLLECTION_ONE^5  COLLECTION_THREE^10  etc.  That way
> /if/ the Lucene document appears in the collection, it's score is
> weighted according to your preferences.  You're free to change the
> boosts on a query-by-query basis without having to re-index.

> I can use a Very big ... query ... I am afraid that it will be slow.

> Try it.  I think you'll find Lucene is _fast_.  We do some pretty HUGE
> and complicated queries and Lucene just screams.
>

Indeed, I tried a Boolean query with a custom boost for each of the  
300 collections, the speed is correct with a db of 600.000 images.

>
> I can add another field to each document, containing a computed
> custom score, then i could sort on that field. But i want to avoid
> this solution at all costs, since it would mean re-indexing all the
> documents each time the collection scores change.

> Or, use indirection - instead of keeping the score, keep the primary
> key of a score table.  Then in a database, where speed won't be the
> issue, perform the look up.   Honestly, if you're only got 300
> categories, you could keep that simple table in memory using less
> space than a small text file.

Again, thats not the space needed to store the lookup table that  
annoys me, its the time it would take to fetch all docs unsorted from  
lucene, then sort using the table.



> I would also like to implement random-sorting. ... Is it a good  
> solution?
> Is there another way to do it?
>
> This really, really, really feels like you're force fitting Lucene to
> do some business logic piece of a larger application.  May I be so
> bold as to ask what's the _actual_ problem you're trying to solve.
> ("I'm trying to make a hole in a piece of oak" as opposed to "What's
> the best way to sharpen a Phillips screwdriver enough to cut wood?")
>
> Keep in mind that the forum is for Lucene, so parts of your questions
> may be answered outside of the forum.

Well, since Sorting/scoring is part of lucene's core api, asking for  
a way to achieve a particular sorting does not seem to me out of the  
scope of this forum/mailing list.

I just need random sorting to give each photographer an equal  
opportunity to sell their work.


Thanks for your answers

--Apple-Mail-2--378267034--

From java-user-return-28685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 15 21:53:42 2007
Return-Path: <java-user-return-28685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33846 invoked from network); 15 Jun 2007 21:53:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2007 21:53:41 -0000
Received: (qmail 80488 invoked by uid 500); 15 Jun 2007 21:53:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80450 invoked by uid 500); 15 Jun 2007 21:53:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80439 invoked by uid 99); 15 Jun 2007 21:53:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 14:53:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 14:53:29 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id D5D7198E7A
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 23:53:07 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <913D56C9-6C69-402A-8FFD-2ABB6C412B22@taktik.be>
References: <ae6f38f60706151007t5aabbd67q6757d213d5599793@mail.gmail.com> <0C836030-35BF-4928-BA70-B90E399EC4F7@garambrogne.net> <913D56C9-6C69-402A-8FFD-2ABB6C412B22@taktik.be>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <33A700C9-45F1-4F9A-AFE8-49DD9C644CC9@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
Date: Fri, 15 Jun 2007 23:53:06 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Compass use a trick to manage father-son indexation.

If you index "collection", with a fields Date, wich are the newest =20
picture inside, and putting all picture's keyword to it collection?

Then, with a keyword search, you will find the collection with the =20
most tag occurence number and date score.
It could be quick and clean, each night, you recompute score with age =20=

factor, your magic bonus and th random stuff. Iterating over only 300 =20=

things.
The problem is if your photograph knows how it works and cheating =20
with uploading every day a new silly photo, just for boosting all =20
their collection.

If age of picture in a same collection are not too differents, this =20
trick can be magic, if new pictures are uploaded often, it will =20
generate silly score. Maybe with small pack of picture with near date =20=

and collection score indexed and merging the firts same collection =20
part after sorting?

M.

Le 15 juin 07 =E0 22:33, Antoine Baudoux a =E9crit :

> Well maybe i didnt explain my problem very well. I have a database =20
> with over 3 million images, with each image belonging to one out of =20=

> 300 possible collections. A query could return more than 100.000 =20
> images (for example if they search for a popular  image keyword).
>
> I want to sort my result with a combination of image date/=20
> collection scoring : Recent images with high-score collections come =20=

> first, then recent image with lower collection. As the user =20
> navigate through the images, less recent images start to appear, =20
> also sorted by collection score.
>
> So imagine i make a query for "nature". This query would return =20
> 100.000 images. Your sugestion is that i dont make any attempt to =20
> sort the images in Lucene.i just make a query with no sort. I would =20=

> then need to load the 100.000 rows from my database, then sort =20
> those 100.000 rows with my custom-defined ordering. Are-you sure =20
> this method would be faster than custom Query, or a ValueSource =20
> query? Since lucene already indexes and caches field values, I'm =20
> not very sure.
>
>
>> Walt explain differently what I said.
>> Lucene can be efficiently use for selecting objects, without =20
>> sorting or scoring anything, then, with id stored in Lucene, you =20
>> can sort yourself with a simple Sortable implementation.
>> The only limit is that lucene gives you not too much results, with =20=

>> your 300 maximal responses, you can play with it easily.
>>
>> M.
>> Le 15 juin 07 =E0 19:07, Walt Stoneburner a =E9crit :
>>
>>> Antoine Baudoux writes:
>>>> I want to be able to give a score to each collection.
>>>
>>> Keep in mind, Lucene is computing a score based on quite a number of
>>> things from how often a term is used in a document, how often it
>>> appears in the collection of documents, how long the query is, etc.
>>>
>>> If your concept of a document's score changes, then I'd be =20
>>> inclined to
>>> think you're possibly using Lucene in a manner it wasn't designed =20=

>>> for.
>>> That said, I have two thoughts.
>>>
>>> THOUGHT ONE
>>> Use Lucene to locate "records" for you --- what you really are
>>> interested in getting back _from Lucene_ is the primary key.  Then,
>>> use this key to do a lookup in your database of the score of the day
>>> and sort accordingly.  The idea is that Lucene finds, your table
>>> scores, and because of that you won't need to re-index when =20
>>> something
>>> changes.
>>>
>>> THOUGHT TWO
>>> Use boosting.  COLLECTION_ONE^5  COLLECTION_THREE^10  etc.  That way
>>> /if/ the Lucene document appears in the collection, it's score is
>>> weighted according to your preferences.  You're free to change the
>>> boosts on a query-by-query basis without having to re-index.
>>>
>>>
>>>> I can use a Very big ... query ... I am afraid that it will be =20
>>>> slow.
>>> Try it.  I think you'll find Lucene is _fast_.  We do some pretty =20=

>>> HUGE
>>> and complicated queries and Lucene just screams.
>>>
>>>
>>>> I can add another field to each document, containing a computed
>>>> custom score, then i could sort on that field. But i want to avoid
>>>> this solution at all costs, since it would mean re-indexing all the
>>>> documents each time the collection scores change.
>>> Or, use indirection - instead of keeping the score, keep the primary
>>> key of a score table.  Then in a database, where speed won't be the
>>> issue, perform the look up.   Honestly, if you're only got 300
>>> categories, you could keep that simple table in memory using less
>>> space than a small text file.
>>>
>>>
>>>
>>>> I would also like to implement random-sorting. ... Is it a good =20
>>>> solution?
>>>> Is there another way to do it?
>>>
>>> This really, really, really feels like you're force fitting =20
>>> Lucene to
>>> do some business logic piece of a larger application.  May I be so
>>> bold as to ask what's the _actual_ problem you're trying to solve.
>>> ("I'm trying to make a hole in a piece of oak" as opposed to "What's
>>> the best way to sharpen a Phillips screwdriver enough to cut wood?")
>>>
>>> Keep in mind that the forum is for Lucene, so parts of your =20
>>> questions
>>> may be answered outside of the forum.
>>>
>>> -wls
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 16 01:10:38 2007
Return-Path: <java-user-return-28686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17629 invoked from network); 16 Jun 2007 01:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2007 01:10:37 -0000
Received: (qmail 21246 invoked by uid 500); 16 Jun 2007 01:10:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21214 invoked by uid 500); 16 Jun 2007 01:10:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21203 invoked by uid 99); 16 Jun 2007 01:10:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 18:10:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 18:10:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5B7685B772; Fri, 15 Jun 2007 18:10:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 412F17F403
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 18:10:08 -0700 (PDT)
Date: Fri, 15 Jun 2007 18:10:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to Use ParallelReader
In-Reply-To: <F3B3254741B1404D92215D80C451DE84016C9D39@CORPUSMX10B.corp.emc.com>
Message-ID: <Pine.LNX.4.58.0706151803390.9622@hal.rescomp.berkeley.edu>
References: <F3B3254741B1404D92215D80C451DE84016C9D39@CORPUSMX10B.corp.emc.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: My question is: If I just want to update the small fields in one index
: and do not want to update the large fields in another index, how can I
: make sure these two indexes are synchronized and have the same document
: number?

the short answer: build them in the same order, use the exact same
IndexWriter settings, and optimize both indexes.  you can rebuild either
of them again and again and again if you want -- as long as you keep doing
it in the same order.

ParallelReader is a pretty special caes class that not a lot of people
seem to use (or if they are they don't talk about it much) but there has
been a few discussions about it in the past .. i would suggest searching
the mail archives and pay special attention to anything by Chuck Williams
... he's pretty much the foremost authority on ParallelReader.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 16 01:40:06 2007
Return-Path: <java-user-return-28687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34050 invoked from network); 16 Jun 2007 01:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2007 01:40:05 -0000
Received: (qmail 41451 invoked by uid 500); 16 Jun 2007 01:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41402 invoked by uid 500); 16 Jun 2007 01:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41391 invoked by uid 99); 16 Jun 2007 01:40:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 18:40:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 18:39:56 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CE6A05B772; Fri, 15 Jun 2007 18:39:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B391A7F403
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 18:39:35 -0700 (PDT)
Date: Fri, 15 Jun 2007 18:39:35 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: negative queries
In-Reply-To: <200706151134.49898.daniel@nuix.com>
Message-ID: <Pine.LNX.4.58.0706151822080.9622@hal.rescomp.berkeley.edu>
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
 <200706151134.49898.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The mailing list has already answered this question dozens of times.  I've
: been wondering lately, does this list have a FAQ?  If so, is this question on
: it?

The wiki is open to editing by all.

Here are a couple choice threads related to this topic which should be of
interest both to the thread starter and to anyone who would care to
synhesize a FAQ entry out of them...

http://www.nabble.com/Re%3A-Suspected-problem-in-the-QueryParser-p7166316.html
http://www.nabble.com/RE%3A-query-parsing-p3562484.html

There is also a wiki specificily about the BooleanQuerySyntax in
QueryParser which can surely be improved (and linked to from the FAQ)...

http://wiki.apache.org/lucene-java/BooleanQuerySyntax


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 16 03:17:57 2007
Return-Path: <java-user-return-28688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50777 invoked from network); 16 Jun 2007 03:17:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2007 03:17:55 -0000
Received: (qmail 24710 invoked by uid 500); 16 Jun 2007 03:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24672 invoked by uid 500); 16 Jun 2007 03:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24653 invoked by uid 99); 16 Jun 2007 03:17:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 20:17:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jun 2007 20:17:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BCA995B772; Fri, 15 Jun 2007 20:17:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9A83F7F403
	for <java-user@lucene.apache.org>; Fri, 15 Jun 2007 20:17:25 -0700 (PDT)
Date: Fri, 15 Jun 2007 20:17:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search result (scoring )
In-Reply-To: <003a01c7aea4$8d5b9f10$d100a8c0@Yatin>
Message-ID: <Pine.LNX.4.58.0706152012190.9622@hal.rescomp.berkeley.edu>
References: <003a01c7aea4$8d5b9f10$d100a8c0@Yatin>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


the "explain" method on a Searcher, and the Explanation classes can
explain everything baout how/why a particular document in a particular
index gets a particular score for a particular search.  The only tricky
thing about it is understanding that it refers to the "raw" scores (what
you seem to be quoting look like "normalized" scores from the Hits class,
but if your cheif concern is the relative order of hte results this is
largely irrelevent)

When looking at the Explanation info, many of the terms may not make a
lot of sense .. this is where the scoring.html document can fill in the
gaps and explain the explaination...

http://lucene.apache.org/java/docs/scoring.html





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 06:17:17 2007
Return-Path: <java-user-return-28689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26023 invoked from network); 17 Jun 2007 06:17:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 06:17:16 -0000
Received: (qmail 83752 invoked by uid 500); 17 Jun 2007 06:17:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83361 invoked by uid 500); 17 Jun 2007 06:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83350 invoked by uid 99); 17 Jun 2007 06:17:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jun 2007 23:17:12 -0700
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jun 2007 23:17:08 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D74DF5B77B; Sat, 16 Jun 2007 23:16:47 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BE1DB7F403
	for <java-user@lucene.apache.org>; Sat, 16 Jun 2007 23:16:47 -0700 (PDT)
Date: Sat, 16 Jun 2007 23:16:47 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Several questions about scoring/sorting + random sorting in an
 image/related application 
In-Reply-To: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
Message-ID: <Pine.LNX.4.58.0706162254420.7467@hal.rescomp.berkeley.edu>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I've really only had a chnce to skim this thread so far, but if i
understand correctly, the goal is to get documents back in a "blended"
order based on:
  1) textual relevancy to the search input
  2) recentness
  3) a mapping of field values to arbitrary numeric weights which need to
     be specified at query time (ie: score collection:A better then
     collection:C better then collectoin:Q etc...)

In that case i think a "function query" is the way to go ...  I haven't
relaly had a chance to catch up on the way the Solr FunctionQuery class
morphed when it was adopted into the Lucene core, but i believe all the
relevent pieces are in the org.apache.lucene.search.function package, and
it seems to have some good package level javadocs...

http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/function/package-summary.html

You seemed to be on the right track asking about ValueSourceQuery ... but
thta's only part of hte puzzle: for the "recentness" aspect a
ValueSourceQuery composed on a ReverseOrdFieldSource should take care of
things ... but the arbitrary weighting by "collection" will really require
you to provide your own ValueSource implementation -- most likely you'll
want to leverage the FieldCache, but map your "collectionIds" (whatever
they are) to the numeric values you want to use.

then you'll have all the pieces, the only thing left to do will be to
decide if you want to combine them with a regular BooleanQuery or use a
CustomScoreQuery.


As for your comments about "random scoring" ... this is really, Really,
REALLY hard to get "right" for a variety of reasons that i don't really
want to go into right now ... my advice: don't attempt to commit to
"random" ordering.   Instead commit to promoting N randomly selected
documents to the front of the results ... this is easy to do by writting a
custom query (again ValueSourceQuery can probably help you) where you
pick N random numbers between 0 and maxDoc and score them really high ...
then let the rest of the docs score as they normally would.

In a paginated application, if N is 3 or 4 times the number of results you
show per page, your results will look pretty damn random considering how
few people drill down past page#2.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 08:00:50 2007
Return-Path: <java-user-return-28690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43727 invoked from network); 17 Jun 2007 08:00:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 08:00:49 -0000
Received: (qmail 45634 invoked by uid 500); 17 Jun 2007 08:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44728 invoked by uid 500); 17 Jun 2007 08:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44717 invoked by uid 99); 17 Jun 2007 08:00:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 01:00:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 01:00:41 -0700
X-ClientAddr: 202.63.154.32
Received: from xenb04 (32.202-63-154.unknown.qala.com.sg [202.63.154.32])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l5H86LjM022294
	for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 16:06:35 +0800
Message-Id: <200706170806.l5H86LjM022294@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: Lucene index performance
Date: Sun, 17 Jun 2007 15:57:53 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcevK+Ey2rtgPuWcTeCeqJi7QSpC8wBiJsHA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <467253B6.2040800@teamware.com>
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I would like to know how's the performance during indexing and searching of
results on a large index files would be like.

And is it possible to create multiple index files and search across multiple
index files? If possible, may I know how could it be done?

Thanks a lot.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 11:32:23 2007
Return-Path: <java-user-return-28691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90002 invoked from network); 17 Jun 2007 11:32:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 11:32:22 -0000
Received: (qmail 27948 invoked by uid 500); 17 Jun 2007 11:32:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27907 invoked by uid 500); 17 Jun 2007 11:32:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27890 invoked by uid 99); 17 Jun 2007 11:32:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 04:32:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 04:32:14 -0700
Received: by py-out-1112.google.com with SMTP id a25so3957550pyi
        for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 04:31:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cQPu1NxZrgHOpxEKrOT9NCpihhQ8YgpaRQ70yrXSPGyLg2vnZG2h7ESGdVASO2PhC/GmjxQsSxRBtSK257dckhODbzP1VTHx4R9NmtjvXE+ICyeYBOoaHhdDccQhWgNcSYY2H9xOTC0WTttfMK/AHGoFBI1778Obhnu8QGP4PLA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=KzViiKbklctA2QWe8r+Ov2X06DFTZMrzEy39PeH8QAItf+9KrqYoeK8zWhjmndvDC/fqaGzQBJSSIInoVWyh+aVIcB6/lHir0mt+gabMCJo4artrN6jrvN+ssKM8XH5qt5PbuBb9muMvj+UAsOjCw3CgWjY29CtdaRDwCarFG7g=
Received: by 10.35.99.14 with SMTP id b14mr8632789pym.1182079913968;
        Sun, 17 Jun 2007 04:31:53 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id n67sm1493501pyh.2007.06.17.04.31.52
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 17 Jun 2007 04:31:52 -0700 (PDT)
Message-ID: <46751B97.1080301@gmail.com>
Date: Sun, 17 Jun 2007 07:31:35 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene index performance
References: <200706170806.l5H86LjM022294@ns21.webhostsg.com>
In-Reply-To: <200706170806.l5H86LjM022294@ns21.webhostsg.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Lee Li Bin wrote:
> Hi,
>
> I would like to know how's the performance during indexing and searching of
> results on a large index files would be like.
>   
Fast.
> And is it possible to create multiple index files and search across multiple
> index files?
Yes.
>  If possible, may I know how could it be done?
>   
Check out MultiSearcher. 
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/MultiSearcher.html
> Thanks a lot.
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 14:51:45 2007
Return-Path: <java-user-return-28692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29900 invoked from network); 17 Jun 2007 14:51:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 14:51:43 -0000
Received: (qmail 4476 invoked by uid 500); 17 Jun 2007 14:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4435 invoked by uid 500); 17 Jun 2007 14:51:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4424 invoked by uid 99); 17 Jun 2007 14:51:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 07:51:39 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 07:51:34 -0700
X-ClientAddr: 127.0.0.1
Received: from www.xedge.com.sg (localhost.localdomain [127.0.0.1])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l5HEvEGL022294
	for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 22:57:19 +0800
Received: from 219.74.42.160
        (SquirrelMail authenticated user leelb@xedge.com.sg)
        by www.xedge.com.sg with HTTP;
        Sun, 17 Jun 2007 22:57:19 +0800 (SGT)
Message-ID: <1359.219.74.42.160.1182092239.squirrel@www.xedge.com.sg>
Date: Sun, 17 Jun 2007 22:57:19 +0800 (SGT)
Subject: Lucene for chinese search
From: leelb@xedge.com.sg
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.5
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I would like to know whether Standard Analyzer allows searching of chinese
words?

And in order to support chinese searching, is there any encoding needed in
order to develop the application?

I'm currently using Jetty as web server, jsp as application, and search
results will be saved in xml file and display it using xsl. So is there
encoding needed for any of the files (xml, xsl, etc...) as well as during
parsing of query?

thanks alot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 15:37:49 2007
Return-Path: <java-user-return-28693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94084 invoked from network); 17 Jun 2007 15:37:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 15:37:48 -0000
Received: (qmail 43372 invoked by uid 500); 17 Jun 2007 15:37:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43333 invoked by uid 500); 17 Jun 2007 15:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43317 invoked by uid 99); 17 Jun 2007 15:37:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 08:37:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 08:37:40 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 7864A282C2D4
	for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 17:37:18 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 24759-05 for <java-user@lucene.apache.org>;
 Sun, 17 Jun 2007 17:37:13 +0200 (CEST)
Received: from [192.168.1.3] (107.224-244-81.adsl-dyn.isp.belgacom.be [81.244.224.107])
	by villon.taktik.be (Postfix) with ESMTP id E8DE5282C2AC
	for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 17:37:12 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <Pine.LNX.4.58.0706162254420.7467@hal.rescomp.berkeley.edu>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <Pine.LNX.4.58.0706162254420.7467@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A621CD0E-55B2-4E21-BC51-2E0A2A741A4D@taktik.be>
Content-Transfer-Encoding: 7bit
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application 
Date: Sun, 17 Jun 2007 17:37:09 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

Hi chris,

>
> I've really only had a chnce to skim this thread so far, but if i
> understand correctly, the goal is to get documents back in a "blended"
> order based on:
>   1) textual relevancy to the search input
>   2) recentness
>   3) a mapping of field values to arbitrary numeric weights which  
> need to
>      be specified at query time (ie: score collection:A better then
>      collection:C better then collectoin:Q etc...)
>

You have perfectly understood my question, thanks for trying to help!

> In that case i think a "function query" is the way to go ...  I  
> haven't
> relaly had a chance to catch up on the way the Solr FunctionQuery  
> class
> morphed when it was adopted into the Lucene core, but i believe all  
> the
> relevent pieces are in the org.apache.lucene.search.function  
> package, and
> it seems to have some good package level javadocs...
>
Thats what i discovered. The question is : Is the ValueSourceQuery  
strong and fast enough to be
used confidently in a production environment? I looked at the source  
code and it seem spretty straightforward,
so I would say yes, as long as i use the caches correctly. Can you  
confirm?



> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
> javadoc/org/apache/lucene/search/function/package-summary.html
>
> You seemed to be on the right track asking about  
> ValueSourceQuery ... but
> thta's only part of hte puzzle: for the "recentness" aspect a
> ValueSourceQuery composed on a ReverseOrdFieldSource should take  
> care of
> things ... but the arbitrary weighting by "collection" will really  
> require
> you to provide your own ValueSource implementation -- most likely  
> you'll
> want to leverage the FieldCache, but map your  
> "collectionIds" (whatever
> they are) to the numeric values you want to use.
>
> then you'll have all the pieces, the only thing left to do will be to
> decide if you want to combine them with a regular BooleanQuery or  
> use a
> CustomScoreQuery.
>
Yes, I will have to implement my own ValueSource, but it seems  
it'really not complicated, looking at the existing
ValueSource implementations.

>
> As for your comments about "random scoring" ... this is really,  
> Really,
> REALLY hard to get "right" for a variety of reasons that i don't  
> really
> want to go into right now ... my advice: don't attempt to commit to
> "random" ordering.   Instead commit to promoting N randomly selected
> documents to the front of the results ... this is easy to do by  
> writting a
> custom query (again ValueSourceQuery can probably help you) where you
> pick N random numbers between 0 and maxDoc and score them really  
> high ...
> then let the rest of the docs score as they normally would.
>
What's wrong with this idea :
Each day i generate an shuffle a vector of Maxdoc integers from 0 to  
Maxdoc.

Then i use a valueSource query with a valueSource that uses this  
vector to randomly score the documents.
Of course I have to somehow normalize those random scores so that  
their "contribution factor" remains constant when MaxDocs increases.


Thanks for your advices !


Antoine

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 16:16:11 2007
Return-Path: <java-user-return-28694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7755 invoked from network); 17 Jun 2007 16:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 16:16:10 -0000
Received: (qmail 80852 invoked by uid 500); 17 Jun 2007 16:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80793 invoked by uid 500); 17 Jun 2007 16:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80074 invoked by uid 99); 17 Jun 2007 16:16:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 09:16:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.guther@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 09:15:56 -0700
Received: by an-out-0708.google.com with SMTP id b20so310819ana
        for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 09:15:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QP1Qf/nycjqWhDxoerisD0iShSj5xlT3d5CbTPbr/H/qnDgdyudgkqhatV1xqGKc9i4LdY/jzKFp668W2LJxPYpKFh9ekyM86NOkD2JRyomgMiR8EG+XrVioWpMG+XFECoALlz+apkGadXw1gmwKJj6VMytfu/DmjCLFKJRaexg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fezunowfkxQS1sU5AxukAxHNSCmMLB6Py/uxpom3gdX++z/F8QAbh/K/L3vaclg93egfGhWhPE6jvapSJGKSWyyoqOE7MktUhUN4DpyWVyprChiXwd5VXnzQVlSVO7iAoFHjmtqIHF/3hg43Rg0MlnOLOQQlOIXC5Gzghm2p6Qg=
Received: by 10.100.201.11 with SMTP id y11mr2981107anf.1182096935139;
        Sun, 17 Jun 2007 09:15:35 -0700 (PDT)
Received: by 10.100.57.16 with HTTP; Sun, 17 Jun 2007 09:15:35 -0700 (PDT)
Message-ID: <c38ea6f20706170915x45618cbev2d348b409085f808@mail.gmail.com>
Date: Sun, 17 Jun 2007 09:15:35 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to search Multiple Databases
In-Reply-To: <1bd995a0706132241q7535579ey10a14239f0c6a812@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69931_15001552.1182096935117"
References: <1bd995a0706130252i50f13f8ck86d2e0b6786cc98f@mail.gmail.com>
	 <1bd995a0706132241q7535579ey10a14239f0c6a812@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_69931_15001552.1182096935117
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Rajat,

I don't know about the Web Interface you are mentioning but the task can be
done with a little bit coding from your side.

I would suggest indexing each database in its own index which allows to keep
the access easily controlled.  To find matches you will need to use a Multi
Searcher.  All you will need is to a have a policy in place that controls
who can search in which database related index.

You could also have all databases in one index and then have one keyword
field holding the database address and then add this field to the given
query.  Both will work.  I guess this is a matter of size and your
preferences.

Andreas


On 6/13/07, rajat mahajan <cool.rajat@gmail.com> wrote:
>
> HI,
>
> My requirement is to search multiple databases which are present on
> different machines all of which are indexed using lucene
> Can it be done using the web interface of lucene ?
> If yes what is the procedure for that and what other tools are requried?
>
> To make it more clear, i'm giving an example
>
> Say, i have two machines having IP address x.x.x.10 and x.x.x.11
> and i want a client which can search both of them and retrieve all the
> records matching the keyword
> Can this be done?
>
> I am using Tomcat as server with lucene-2.1.0 as the searching application
> All ideas are welcomed...
>
> Thanks and Regards,
> Rajat Mahajan.
>

------=_Part_69931_15001552.1182096935117--

From java-user-return-28695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 17:43:16 2007
Return-Path: <java-user-return-28695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33203 invoked from network); 17 Jun 2007 17:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 17:43:15 -0000
Received: (qmail 66417 invoked by uid 500); 17 Jun 2007 17:43:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65266 invoked by uid 500); 17 Jun 2007 17:43:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65255 invoked by uid 99); 17 Jun 2007 17:43:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 10:43:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 10:43:03 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 659525B77B; Sun, 17 Jun 2007 10:42:40 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B852B7F403
	for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 10:42:40 -0700 (PDT)
Date: Sun, 17 Jun 2007 10:42:40 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Several questions about scoring/sorting + random sorting in an
 image/related application 
In-Reply-To: <A621CD0E-55B2-4E21-BC51-2E0A2A741A4D@taktik.be>
Message-ID: <Pine.LNX.4.58.0706171032310.12777@hal.rescomp.berkeley.edu>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
 <Pine.LNX.4.58.0706162254420.7467@hal.rescomp.berkeley.edu>
 <A621CD0E-55B2-4E21-BC51-2E0A2A741A4D@taktik.be>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Thats what i discovered. The question is : Is the ValueSourceQuery
: strong and fast enough to be
: used confidently in a production environment? I looked at the source

as i mentioned, i'm not intimately familiar with the new ValueSourceQuery,
but the FunctionQuery it's based on is certainly production quality.  I
use it all over the place.

: What's wrong with this idea :
: Each day i generate an shuffle a vector of Maxdoc integers from 0 to
: Maxdoc.
:
: Then i use a valueSource query with a valueSource that uses this
: vector to randomly score the documents.
: Of course I have to somehow normalize those random scores so that
: their "contribution factor" remains constant when MaxDocs increases.

well, that's a random fixed ordering per day ... a bit different then
random per search (much more cachable).

I also didn't realize you wanted the randomness to just be an added factor
in your orriginal query -- i thought this was a seperate "sort randomly"
side question.  your approach sounds like it it could work, but as you
say: there are complexities of keeping it balanced.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 18:10:00 2007
Return-Path: <java-user-return-28696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36105 invoked from network); 17 Jun 2007 18:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 18:09:59 -0000
Received: (qmail 83580 invoked by uid 500); 17 Jun 2007 18:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83542 invoked by uid 500); 17 Jun 2007 18:09:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83531 invoked by uid 99); 17 Jun 2007 18:09:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 11:09:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 11:09:52 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1330623uge
        for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 11:09:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FYYLZZnBQo9gwLSOl71OQZ9H5yKWko3wEEUjXMLuQsax3Dn9KyXucxpgkqj8h5Dgf05I0zaUlmAeXENgV6ZhSO6m9aoNRHcZkA27cPj/oD0gU9jp/w4yuG/NKWSTXmg462qkqVPykDD/yd19n69/hqIlwfHcg2LEnr1rtat/Ms4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jGPNZJUqHXgcIfJAolMhw6LjzoZ09uRD+tdMUAlX7hJoSnaogJOeotj3jMUciaqZWzyOv6nz2KSuUFhi2Ep1ZUNL3mOe89yTCDIrIoC1Y7LtCCxPpSZWlBU+fsnQ/PHEjR4hybJFUpX2czVRncVcUtGC8MK6Ylv0mfWrfs472gw=
Received: by 10.78.160.4 with SMTP id i4mr2015317hue.1182103770645;
        Sun, 17 Jun 2007 11:09:30 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Sun, 17 Jun 2007 11:09:30 -0700 (PDT)
Message-ID: <6e3ae6310706171109x2f676664g97f5b860339ab874@mail.gmail.com>
Date: Sun, 17 Jun 2007 11:09:30 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene for chinese search
In-Reply-To: <1359.219.74.42.160.1182092239.squirrel@www.xedge.com.sg>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1359.219.74.42.160.1182092239.squirrel@www.xedge.com.sg>
X-Virus-Checked: Checked by ClamAV on apache.org

There are three things to watch out for chinese or CJK languages:

1. The content source or database need to be encoded in UTF-8.
2. StandardAnalyzer doesn't support chinese words well. Use either
ChineseAnalyzer or CJKAnalyzer. My experience is that CJKAnalyzer is a
little better.
3. The user's query should be encoded in UTF-8.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 6/17/07, leelb@xedge.com.sg <leelb@xedge.com.sg> wrote:
> Hi,
>
> I would like to know whether Standard Analyzer allows searching of chinese
> words?
>
> And in order to support chinese searching, is there any encoding needed in
> order to develop the application?
>
> I'm currently using Jetty as web server, jsp as application, and search
> results will be saved in xml file and display it using xsl. So is there
> encoding needed for any of the files (xml, xsl, etc...) as well as during
> parsing of query?
>
> thanks alot
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 20:00:48 2007
Return-Path: <java-user-return-28697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59854 invoked from network); 17 Jun 2007 20:00:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 20:00:47 -0000
Received: (qmail 69443 invoked by uid 500); 17 Jun 2007 20:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68440 invoked by uid 500); 17 Jun 2007 20:00:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68429 invoked by uid 99); 17 Jun 2007 20:00:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 13:00:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of andreas.guther@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 13:00:39 -0700
Received: by an-out-0708.google.com with SMTP id b20so318362ana
        for <java-user@lucene.apache.org>; Sun, 17 Jun 2007 13:00:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IIF//219vBv3EY6FGjEiRhOgIxaAvQPfixlhnpEFrUlvh/+NJnCxOTZs8pkamPB0CswmxBUG3lXFEJg0bcYkQw4p5sk5j5ciMsQtHJCyzTyqWxVRgEhETCOxfgnH0dHtrKn06rFjSCkdP7cPKgDku6F76KfNrWFKsbWHOWj7LuI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EZv0WKeaC/K9eEuA+cn1qzxJcuLR+mwEoVVV0SfKtCfXhe2FDXKe2ds2hk998xZe1how7BsHYg8Xg1StagCsljhGBzFuyKQ+ckHuHBReCnzzFBqDnmFfxEG2wdQepWXnpf0cu4fSUj42nukh5+LF7/xWpet+YGf1qdVl0rTKYEo=
Received: by 10.100.106.5 with SMTP id e5mr3060341anc.1182110418506;
        Sun, 17 Jun 2007 13:00:18 -0700 (PDT)
Received: by 10.100.57.16 with HTTP; Sun, 17 Jun 2007 13:00:18 -0700 (PDT)
Message-ID: <c38ea6f20706171300o205be743j9169fd75b8c2c31b@mail.gmail.com>
Date: Sun, 17 Jun 2007 13:00:18 -0700
From: "Andreas Guther" <andreas.guther@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index performance
In-Reply-To: <46751B97.1080301@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71325_3878281.1182110418480"
References: <200706170806.l5H86LjM022294@ns21.webhostsg.com>
	 <46751B97.1080301@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71325_3878281.1182110418480
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Searching on multiple index files is incredible fast.  We have 10 different
index folders with different sizes.  All folders together have a size of 7
GB.  Results come back usual within less than 50 ms.  Getting results out of
the index i.e. reading documents is expensive and you will have to spent
time here to get a good performance.  You will need to look into
- Topdocs
- Extracting results in an ordered way, i.e. sort by index and within an
index by document id.  This will help to minimize disk head jumps and gave
me a tremendous boost.
- Extracting only what you need (using a special read filter I do not recall
the name right now and I do not have access to my sources at the moment of
writing this)

Andreas


On 6/17/07, Mark Miller <markrmiller@gmail.com> wrote:
>
>
>
> Lee Li Bin wrote:
> > Hi,
> >
> > I would like to know how's the performance during indexing and searching
> of
> > results on a large index files would be like.
> >
> Fast.
> > And is it possible to create multiple index files and search across
> multiple
> > index files?
> Yes.
> >  If possible, may I know how could it be done?
> >
> Check out MultiSearcher.
>
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/MultiSearcher.html
> > Thanks a lot.
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_71325_3878281.1182110418480--

From java-user-return-28698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 17 23:23:24 2007
Return-Path: <java-user-return-28698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7872 invoked from network); 17 Jun 2007 23:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2007 23:23:23 -0000
Received: (qmail 85092 invoked by uid 500); 17 Jun 2007 23:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84513 invoked by uid 500); 17 Jun 2007 23:23:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84502 invoked by uid 99); 17 Jun 2007 23:23:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 16:23:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 16:23:14 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 2508272812C
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 09:27:02 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: negative queries
Date: Mon, 18 Jun 2007 09:20:24 +1000
User-Agent: KMail/1.9.7
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com> <200706151134.49898.daniel@nuix.com> <Pine.LNX.4.58.0706151822080.9622@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0706151822080.9622@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706180920.25073.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Saturday 16 June 2007 11:39:35 Chris Hostetter wrote:
> : The mailing list has already answered this question dozens of times. 
> : I've been wondering lately, does this list have a FAQ?  If so, is this
> : question on it?
>
> The wiki is open to editing by all.

The FAQ page claims to be immutable, however.

Daniel

-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 05:51:32 2007
Return-Path: <java-user-return-28699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8770 invoked from network); 18 Jun 2007 05:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 05:51:31 -0000
Received: (qmail 33795 invoked by uid 500); 18 Jun 2007 05:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33562 invoked by uid 500); 18 Jun 2007 05:50:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33541 invoked by uid 99); 18 Jun 2007 05:50:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jun 2007 22:50:50 -0700
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.163.179.228] (HELO web36114.mail.mud.yahoo.com) (66.163.179.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 17 Jun 2007 22:50:46 -0700
Received: (qmail 4559 invoked by uid 60001); 18 Jun 2007 05:49:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=yH/nZjchW5++dQsY57LD0Hvv2OxgNHZoL+YP0PIGOgEnTbse7rzqFnY7GC+0uX+OlH4I/VGYA/6UvWcJK6wIR6YoLvYN2v0x/m3lzDrFyNd/gPDbIjMmpPi49K3BBGBZeWSb167IHlO7plGee6fkTg/5UUh/eyOa43KJUphUbEA=;
X-YMail-OSG: kjUwlqYVM1nk_KBhSC6c6.cjRoqJtDapcBPTnyWs3SUtW4LI20pic3jzhKO_gUyc.StuPQc8IN76EZcm0f3f66vxKyUNBjJbllao9.cvyTmPjlinoR8-
Received: from [209.191.106.126] by web36114.mail.mud.yahoo.com via HTTP; Sun, 17 Jun 2007 22:49:38 PDT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Sun, 17 Jun 2007 22:49:38 -0700 (PDT)
From: Monica Lestari Paramita <monica_lestari@yahoo.com>
Subject: Filter documents with query
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-601131989-1182145778=:2353"
Message-ID: <140570.2353.qm@web36114.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-601131989-1182145778=:2353
Content-Type: text/plain; charset=ascii

Hello everyone,

I am currently using Lucene to search for documents. I'm having problems when I want to search for a query Q, but only in documents that has term T1 or T2 in it.

At first I tried the query "Q AND (T1 OR T2)", but it affects the sorting of the results. For example:
query: "Q", results: doc1, doc2, doc3, doc4, doc5
query: "Q AND (T1 OR T2)", results: doc3, doc2, doc5
Since I don't intend to use the term T as an input for the result sorting but only as a filter for the searching scope, I was hoping that system would still sort the documents based on Q itself, so it will give the results: doc2, doc3, doc5.

Do anyone know how to handle this?

Regards,

Monica


      ___________________________________________________________ 
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 
--0-601131989-1182145778=:2353--

From java-user-return-28700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 07:39:18 2007
Return-Path: <java-user-return-28700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48472 invoked from network); 18 Jun 2007 07:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 07:39:17 -0000
Received: (qmail 25914 invoked by uid 500); 18 Jun 2007 07:39:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24858 invoked by uid 500); 18 Jun 2007 07:39:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24824 invoked by uid 99); 18 Jun 2007 07:39:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 00:39:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 00:39:08 -0700
X-ClientAddr: 202.63.154.62
Received: from xenb04 (62.202-63-154.unknown.qala.com.sg [202.63.154.62])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l5I7ijCX002721
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 15:44:55 +0800
Message-Id: <200706180744.l5I7ijCX002721@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: Lucene Query 
Date: Mon, 18 Jun 2007 15:36:09 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002A_01C7B1BE.6814BA80"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: Acexe1Y/idXVPx9LTe+qnLBVpck+VA==
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_002A_01C7B1BE.6814BA80
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

The following query, I am getting only the file path results. I have a field
name 'text' in the index. May I know do I display the text file data?

Is this the problem with the indexing or the query string?

 

Creating Index:

Document doc5 = new Document();

doc5.add(Field.UnIndexed("path", path));

doc5.add(Field.Text("MMmanualType", new StringReader(manualType)));

doc5.add(Field.Text("text", new StringReader(info)));

 

 

Search:

TermQuery queryOM = new TermQuery(new Term("text",OMcriteriaIn));

subquery.add(new BooleanClause(query3, true, false)); 

subquery.add(new BooleanClause(queryOM, true, false)); 

System.out.println("Searching for: " + subquery.toString("text"));

Hits hits = searcher.search(subquery);

System.out.println("Number of matching documents = " + hits.length());

 

for (int c = 0; c < hits.length(); c++) {

Document doc = hits.doc(c);

System.out.println("Query found in file: " + doc.get("path"));

System.out.println("Content: " + doc.get("text"));

 


}

 

 

Regards,

Lee Li Bin

 


------=_NextPart_000_002A_01C7B1BE.6814BA80--



From java-user-return-28701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 08:33:03 2007
Return-Path: <java-user-return-28701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64664 invoked from network); 18 Jun 2007 08:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 08:33:01 -0000
Received: (qmail 42893 invoked by uid 500); 18 Jun 2007 08:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42864 invoked by uid 500); 18 Jun 2007 08:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42843 invoked by uid 99); 18 Jun 2007 08:32:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 01:32:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [60.52.184.45] (HELO mail.tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 01:32:52 -0700
Received: from DFPYWL2S ([192.168.2.96]) by tecforte.com with MailEnable ESMTP; Mon, 18 Jun 2007 16:32:21 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
References: <003d01c7af1a$bc11eb90$3435c2b0$@com> <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>
In-Reply-To: <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>
Subject: RE: FW: Lucene indexing vs RDBMS insertion.
Date: Mon, 18 Jun 2007 16:29:57 +0800
Message-ID: <002901c7b182$da91edd0$8fb5c970$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcevX3+MoHACLSzPQuWoNHfqjpjBtQCITKKA
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your suggestion Erick. I'm planning to test the indexing soon.
For your information, currently the system is inserting into RDBMS which is
around 1000 records per seconds. Thus, if lucene in place, I would expect it
will index that much of documents per seconds as well (Our target is 3.6
millions of document to be indexed in 1 hour). Beside of that, I'm planning
to queue the record so lucene will have enough time to index it. Anyway,
thanks for your suggestion and will come back to you once I tested the
solution.

Thanks,
eChuang, Chew

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Friday, June 15, 2007 11:11 PM
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.

>From my perspective, this is an irrelevant question. The real question
is "is Lucene indexing fast enough for my application?". Which nobody
can answer for you, you have to experiment.

If you're building an index that's only updated every 6 months,
Lucene is certainly "fast enough". If you're recreating the
index every 6 seconds, it's a different question.

So, I recommend that you create a test application that does
nothing except read your source, do whatever parsing you
need to do and does NOT index it at all. Record the time it
takes.

Then try the same thing WITH indexing and record the difference.

Then, to get a sense of the dimension of the problem, try
substituting inserting into the RDBMS instead of the Lucene
index.

Once you have numbers, you can make better decisions
And people can give you better advice,  especially if you
include more detail of your design.

Best
Erick

On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
>
> Hi, I'm  a new user to Lucene, and heard that it is a powerful tool for
> full
> text search and I'm planning to use it in my project for data storage
> purpose. Before the implementation, I could like to know whether there is
> performance issue on Lucene indexing process. I have no doubt on the
> retrieving and searching feature in Lucene but the indexing process. I
> have
> tested my current system to insert 1000 records in RDBMS storage it took
> about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> indexing process perform faster than RDBMS ? I have go through some of the
> article talking about the "MergeFactor" and "MaxMergeDocs" parameter for
> fine tune the indexing process, but no comparison between Lucene indexing
> process and RDBMS insertion. Thus, hope someone who have experience in
> Lucene can provide this information or some article that discuss between
> Lucene and RDBMS.
>
>
>
> I really appreciate any help in this. Thanks
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date: 6/14/2007
> 12:44 PM
>
>

No virus found in this incoming message.
Checked by AVG Free Edition. 
Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
8:23 AM
 

No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
8:23 AM
 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 08:36:40 2007
Return-Path: <java-user-return-28702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65811 invoked from network); 18 Jun 2007 08:36:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 08:36:38 -0000
Received: (qmail 52090 invoked by uid 500); 18 Jun 2007 08:36:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52048 invoked by uid 500); 18 Jun 2007 08:36:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52033 invoked by uid 99); 18 Jun 2007 08:36:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 01:36:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.146.123.125] (HELO villon.taktik.be) (82.146.123.125)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 01:36:29 -0700
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 43F6228417D6
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 10:36:08 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 06021-04 for <java-user@lucene.apache.org>;
 Mon, 18 Jun 2007 10:36:02 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 3762F2840047
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 10:27:59 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <Pine.LNX.4.58.0706171032310.12777@hal.rescomp.berkeley.edu>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be> <Pine.LNX.4.58.0706162254420.7467@hal.rescomp.berkeley.edu> <A621CD0E-55B2-4E21-BC51-2E0A2A741A4D@taktik.be> <Pine.LNX.4.58.0706171032310.12777@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <81EC726A-07F3-4350-A20F-4B5289054991@taktik.be>
Content-Transfer-Encoding: 7bit
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application 
Date: Mon, 18 Jun 2007 10:27:55 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org


>
> : Thats what i discovered. The question is : Is the ValueSourceQuery
> : strong and fast enough to be
> : used confidently in a production environment? I looked at the source
>
> as i mentioned, i'm not intimately familiar with the new  
> ValueSourceQuery,
> but the FunctionQuery it's based on is certainly production  
> quality.  I
> use it all over the place.
>
> : What's wrong with this idea :
> : Each day i generate an shuffle a vector of Maxdoc integers from 0 to
> : Maxdoc.
> :
> : Then i use a valueSource query with a valueSource that uses this
> : vector to randomly score the documents.
> : Of course I have to somehow normalize those random scores so that
> : their "contribution factor" remains constant when MaxDocs increases.
>
> well, that's a random fixed ordering per day ... a bit different then
> random per search (much more cachable).
>
> I also didn't realize you wanted the randomness to just be an added  
> factor
> in your orriginal query -- i thought this was a seperate "sort  
> randomly"
> side question.  your approach sounds like it it could work, but as you
> say: there are complexities of keeping it balanced.
>
>
> -Hoss
>

Thanks for your help! I will start implementing those solutions now.  
One last remark :

>  for the "recentness" aspect a
> ValueSourceQuery composed on a ReverseOrdFieldSource should take  
> care of
> things ...

I have a problem with this solution : Document ordering is different  
from Recentness :
If i upload 1000 images now, they should have the same "recentness",  
even if their order is very different.

So i think i will store image dates as Int and use a field cache to  
compute a score based on the difference between the present date and  
the date of the image.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 09:03:56 2007
Return-Path: <java-user-return-28703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76030 invoked from network); 18 Jun 2007 09:03:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 09:03:55 -0000
Received: (qmail 5130 invoked by uid 500); 18 Jun 2007 09:03:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5092 invoked by uid 500); 18 Jun 2007 09:03:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5079 invoked by uid 99); 18 Jun 2007 09:03:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 02:03:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 02:03:46 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 17660439 for java-user@lucene.apache.org; Mon, 18 Jun 2007 11:03:21 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using Lucene to search Multiple Databases
Date: Mon, 18 Jun 2007 11:03:21 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC0F7C@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using Lucene to search Multiple Databases
Thread-Index: Acew+tFUqyQvg90rSvS7u3oYIX/ESQAjJ84A
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Rajat,

this sounds to me like something very suitable for Solr,

Regards Ard

>=20
>=20
> Rajat,
>=20
> I don't know about the Web Interface you are mentioning but=20
> the task can be
> done with a little bit coding from your side.
>=20
> I would suggest indexing each database in its own index which=20
> allows to keep
> the access easily controlled.  To find matches you will need=20
> to use a Multi
> Searcher.  All you will need is to a have a policy in place=20
> that controls
> who can search in which database related index.
>=20
> You could also have all databases in one index and then have=20
> one keyword
> field holding the database address and then add this field to=20
> the given
> query.  Both will work.  I guess this is a matter of size and your
> preferences.
>=20
> Andreas
>=20
>=20
> On 6/13/07, rajat mahajan <cool.rajat@gmail.com> wrote:
> >
> > HI,
> >
> > My requirement is to search multiple databases which are present on
> > different machines all of which are indexed using lucene
> > Can it be done using the web interface of lucene ?
> > If yes what is the procedure for that and what other tools=20
> are requried?
> >
> > To make it more clear, i'm giving an example
> >
> > Say, i have two machines having IP address x.x.x.10 and x.x.x.11
> > and i want a client which can search both of them and=20
> retrieve all the
> > records matching the keyword
> > Can this be done?
> >
> > I am using Tomcat as server with lucene-2.1.0 as the=20
> searching application
> > All ideas are welcomed...
> >
> > Thanks and Regards,
> > Rajat Mahajan.
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 09:47:51 2007
Return-Path: <java-user-return-28704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87898 invoked from network); 18 Jun 2007 09:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 09:47:50 -0000
Received: (qmail 84559 invoked by uid 500); 18 Jun 2007 09:47:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84518 invoked by uid 500); 18 Jun 2007 09:47:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84495 invoked by uid 99); 18 Jun 2007 09:47:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 02:47:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cool.rajat@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 02:47:40 -0700
Received: by wr-out-0506.google.com with SMTP id m59so247858wrm
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 02:47:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kVeuWOs1XO8K/lZsTpv3ZkP9uWaE1GmU5eJE2qA7dH26KINzC9d3JIBr/Hd/cIiwavwVVFQsMu9ynLfXjBFKCbaYPy+s8gDVvyXBsdadlbYoUzZrdwF8vAkk5aeB2T3dD0bp50TYhtUg4p4zhhYtB7WF/blYewwNJ6+RYOo1npM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gBHVHAkWrzjK+pMgF6FBj8laseKAn8EfYLvemXr81pxDAMYw6jJqW1qJEfK6Xb4l02iUE7UY/q1u+77xUNbXT0xo1cJLBt9WswTdH+05r5JefcPWX9L2Af49ZpJlzGuDAaWEq69fHvDlOn00CTUvGopksfqqdTnQnrjsrP59UXA=
Received: by 10.142.82.17 with SMTP id f17mr284439wfb.1182160039421;
        Mon, 18 Jun 2007 02:47:19 -0700 (PDT)
Received: by 10.143.29.1 with HTTP; Mon, 18 Jun 2007 02:47:19 -0700 (PDT)
Message-ID: <1bd995a0706180247y5d2bef4v2a7d3964d01660d8@mail.gmail.com>
Date: Mon, 18 Jun 2007 15:17:19 +0530
From: "rajat mahajan" <cool.rajat@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to search Multiple Databases
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC0F7C@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50826_21139743.1182160039367"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC0F7C@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50826_21139743.1182160039367
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

@Ard Schrijvers


 What is this Solr
 i didnt get you. will you please explain it.??

------=_Part_50826_21139743.1182160039367--

From java-user-return-28705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 10:12:38 2007
Return-Path: <java-user-return-28705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96403 invoked from network); 18 Jun 2007 10:12:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 10:12:36 -0000
Received: (qmail 34491 invoked by uid 500); 18 Jun 2007 10:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34405 invoked by uid 500); 18 Jun 2007 10:12:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34387 invoked by uid 99); 18 Jun 2007 10:12:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 03:12:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 03:07:25 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 17666030 for java-user@lucene.apache.org; Mon, 18 Jun 2007 12:07:03 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using Lucene to search Multiple Databases
Date: Mon, 18 Jun 2007 12:07:02 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC0F7D@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using Lucene to search Multiple Databases
Thread-Index: AcexjbqGHG2vfPE5TWGM+bhv2/TUygAAo/Dw
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

A search server based on lucene which is very easy to use and implement. =
I think you can use it to achieve what you want,

Regards=20

>=20
> @Ard Schrijvers
>=20
>=20
>  What is this Solr
>  i didnt get you. will you please explain it.??
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 10:23:08 2007
Return-Path: <java-user-return-28706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1266 invoked from network); 18 Jun 2007 10:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 10:23:06 -0000
Received: (qmail 70196 invoked by uid 500); 18 Jun 2007 10:22:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69218 invoked by uid 500); 18 Jun 2007 10:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68030 invoked by uid 99); 18 Jun 2007 10:22:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 03:22:02 -0700
Received-SPF: pass (herse.apache.org: domain of cool.rajat@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 03:21:58 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1122912nzc
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 03:21:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l0Wf10TbXNbKDC1NLLm9kxAPhpygbiMvSNRwTsr4Igxo9Nk86Y4wCti/g03op3hFqlOxH12fbDOVL8urIJ4YwBKKUT5plFWWgO6ZM7gUvyLuTEB8E70Zizbtzqy2VaM87LAjGfPDcIuUcyC44mnnxMGqJD8r7s3933ndF0rLji8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SHMKNl+fBhOiMg74/g5oLmd57BN12AeaKf2THecJOoL+JOkrq6NHsXiebYVwCng3CrsuqjEfkU+XmbzfGsj9kQDxIofT2crft12/XospjalYpumFzu+iLXeFvq3MQRysWiQNpFAqD/CmuctLMnV6syYDGIkpx60dRMxJI/GOh+0=
Received: by 10.143.156.6 with SMTP id i6mr289082wfo.1182162071681;
        Mon, 18 Jun 2007 03:21:11 -0700 (PDT)
Received: by 10.143.29.1 with HTTP; Mon, 18 Jun 2007 03:21:11 -0700 (PDT)
Message-ID: <1bd995a0706180321w4129aac4n6199e2aedc8c0c97@mail.gmail.com>
Date: Mon, 18 Jun 2007 15:51:11 +0530
From: "rajat mahajan" <cool.rajat@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to search Multiple Databases
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC0F7D@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51118_18278979.1182162071655"
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC0F7D@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51118_18278979.1182162071655
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
 At presently I am using NUTCH. I'll try Solr once this is done
and will get back to you

anyways thanks a lot.

Bye,
Rajat Mahajan

------=_Part_51118_18278979.1182162071655--

From java-user-return-28707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 12:48:28 2007
Return-Path: <java-user-return-28707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57241 invoked from network); 18 Jun 2007 12:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 12:48:28 -0000
Received: (qmail 61582 invoked by uid 500); 18 Jun 2007 12:48:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60610 invoked by uid 500); 18 Jun 2007 12:48:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60599 invoked by uid 99); 18 Jun 2007 12:48:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 05:48:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 05:48:17 -0700
X-ClientAddr: 202.63.154.62
Received: from xenb04 (62.202-63-154.unknown.qala.com.sg [202.63.154.62])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l5ICs4U6002721
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 20:54:18 +0800
Message-Id: <200706181254.l5ICs4U6002721@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene for chinese search
Date: Mon, 18 Jun 2007 20:45:26 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: AcexC7rLJE5xLh14TSupcCdYEsVUbQAmhmog
In-Reply-To: <6e3ae6310706171109x2f676664g97f5b860339ab874@mail.gmail.com>
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I still met problem for searching of Chinese words.
XMl file which is the datasource and analyzer has already been encoded.
Have testing on StandardAnalyzer, CJKAnalyzer, and ChineseAnalyzer, but it
still can't get any results.

1.	do we need any encoding configuration in apache tomcat for Chinese
search using Lucence 

2.	do we need to use JSP meta / page encoding ? what is the encoding
for 	jsp?


 
Regards,
Lee Li Bin

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com] 
Sent: Monday, June 18, 2007 2:10 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene for chinese search

There are three things to watch out for chinese or CJK languages:

1. The content source or database need to be encoded in UTF-8.
2. StandardAnalyzer doesn't support chinese words well. Use either
ChineseAnalyzer or CJKAnalyzer. My experience is that CJKAnalyzer is a
little better.
3. The user's query should be encoded in UTF-8.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
inutes


On 6/17/07, leelb@xedge.com.sg <leelb@xedge.com.sg> wrote:
> Hi,
>
> I would like to know whether Standard Analyzer allows searching of chinese
> words?
>
> And in order to support chinese searching, is there any encoding needed in
> order to develop the application?
>
> I'm currently using Jetty as web server, jsp as application, and search
> results will be saved in xml file and display it using xsl. So is there
> encoding needed for any of the files (xml, xsl, etc...) as well as during
> parsing of query?
>
> thanks alot
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 12:58:45 2007
Return-Path: <java-user-return-28708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60884 invoked from network); 18 Jun 2007 12:58:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 12:58:44 -0000
Received: (qmail 79508 invoked by uid 500); 18 Jun 2007 12:58:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78900 invoked by uid 500); 18 Jun 2007 12:58:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78884 invoked by uid 99); 18 Jun 2007 12:58:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 05:58:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 05:58:34 -0700
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 325F05D60
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 14:58:12 +0200 (CEST)
Message-ID: <46768163.7050704@garambrogne.net>
Date: Mon, 18 Jun 2007 14:58:11 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene for chinese search
References: <200706181254.l5ICs4U6002721@ns21.webhostsg.com>
In-Reply-To: <200706181254.l5ICs4U6002721@ns21.webhostsg.com>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Lee Li Bin a écrit :
> Hi,
>
> I still met problem for searching of Chinese words.
> XMl file which is the datasource and analyzer has already been encoded.
> Have testing on StandardAnalyzer, CJKAnalyzer, and ChineseAnalyzer, but it
> still can't get any results.
>
> 1.	do we need any encoding configuration in apache tomcat for Chinese
> search using Lucence 
>
> 2.	do we need to use JSP meta / page encoding ? what is the encoding
> for 	jsp?
>   
try first with simple junit test, after you can fight with UTF8 parameters.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 13:07:06 2007
Return-Path: <java-user-return-28709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64092 invoked from network); 18 Jun 2007 13:07:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 13:07:05 -0000
Received: (qmail 94898 invoked by uid 500); 18 Jun 2007 13:07:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94859 invoked by uid 500); 18 Jun 2007 13:07:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94848 invoked by uid 99); 18 Jun 2007 13:07:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:07:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:06:56 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1807907muf
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 06:06:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dIYftSacpGvvIX1E+5QNMLHRQ6QgvHwzzaXBQjikuSj6yS++wpGbuMBuFtkXf2Ulzenk2Rq2VazlRzJyoVlaDOijo/MB8uSXbDqdrOt98A1exGF4vO/7wVaF7l2HJkbT2NuUWNg8f0WAv94dKBaUBkYprT8eX67JbWEiSDkK+pM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sk5bB4en/tCGLrQa2zT+0eh1P7TQQOo4+2PsITpYRqrD5mU1R+HbaD6Ni+/yGvpT3ZMwxW8CnUlUYxit66yN3KVrL26FFVCktX/ClPtAmFdyB7zwF2OJK/KiFbJNqjjnQQKiQiNO4nxobk016/0/QOxtt065P+9oixR6IweSrV8=
Received: by 10.82.126.5 with SMTP id y5mr11201179buc.1182171995041;
        Mon, 18 Jun 2007 06:06:35 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 18 Jun 2007 06:06:35 -0700 (PDT)
Message-ID: <359a92830706180606lc7b297ek62bce5bb8bcb2e0@mail.gmail.com>
Date: Mon, 18 Jun 2007 09:06:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Query
In-Reply-To: <200706180744.l5I7ijCX002721@ns21.webhostsg.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54709_29329052.1182171995021"
References: <200706180744.l5I7ijCX002721@ns21.webhostsg.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54709_29329052.1182171995021
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The problem with your code snippets are that they aren't plain Lucene
API calls. I'm assuming that you've got your own classes that
actually compile  <G>. There's nothing I can say about "what's
going on" without knowing what your custom classes are doing.....

We need to know what analyzers you are using, both at query and
compile time. I suspect that you're using an analyzer that perhaps
breaks on the path separators, but I can't be sure.

I recommend that you try a basic case using the stock Lucene
API code, and post that. Otherwise we're pretty helpless.

Two other things:
1> get a copy of Luke (google lucene luke) and examine your index.
    Luke can also be used to examine the effects of various analyzers
    on queries.
2> use query.toString() to examine what the query looks like after parsing
    and print that to system.out.

Best
Erick

On 6/18/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
>
> Hi,
>
>
>
> The following query, I am getting only the file path results. I have a
> field
> name 'text' in the index. May I know do I display the text file data?
>
> Is this the problem with the indexing or the query string?
>
>
>
> Creating Index:
>
> Document doc5 = new Document();
>
> doc5.add(Field.UnIndexed("path", path));
>
> doc5.add(Field.Text("MMmanualType", new StringReader(manualType)));
>
> doc5.add(Field.Text("text", new StringReader(info)));
>
>
>
>
>
> Search:
>
> TermQuery queryOM = new TermQuery(new Term("text",OMcriteriaIn));
>
> subquery.add(new BooleanClause(query3, true, false));
>
> subquery.add(new BooleanClause(queryOM, true, false));
>
> System.out.println("Searching for: " + subquery.toString("text"));
>
> Hits hits = searcher.search(subquery);
>
> System.out.println("Number of matching documents = " + hits.length());
>
>
>
> for (int c = 0; c < hits.length(); c++) {
>
> Document doc = hits.doc(c);
>
> System.out.println("Query found in file: " + doc.get("path"));
>
> System.out.println("Content: " + doc.get("text"));
>
>
>
>
> }
>
>
>
>
>
> Regards,
>
> Lee Li Bin
>
>
>
>

------=_Part_54709_29329052.1182171995021--

From java-user-return-28710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 13:11:44 2007
Return-Path: <java-user-return-28710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66711 invoked from network); 18 Jun 2007 13:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 13:11:42 -0000
Received: (qmail 1882 invoked by uid 500); 18 Jun 2007 13:11:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1847 invoked by uid 500); 18 Jun 2007 13:11:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1834 invoked by uid 99); 18 Jun 2007 13:11:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:11:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:11:33 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1484499uge
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 06:11:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=odu5XSw9FOOihBQcibPD99lUuHZlWo7hDjjGZ/sv40rwO3/0EUnyMKW2KHRfSB/3oOqF2wmxWPSV/8eWMA43cEkTPtZkMeE6vyu981AMDbXYjK/A7zbXlzmDWloV+5BuOX8LtyfOQFaHIktFxNIL4p6tR+q50fZajczqa03ej44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RCpoc9VpX/5+PsWH6Q0ulb08iifyKETcbpMI0k3nD0LRMcgNkcMiLRiu2JgMDeVTqsFZ4vf6jvlShIfAuS+Q6Mqb51FxpLIRogEalxNyx+YZKqwfv9vqyTH6/WQ9w6pEohQSZsMj9jzhY6W5JEGCja4n85VYtkirnICzXqXx0ps=
Received: by 10.82.183.19 with SMTP id g19mr11225417buf.1182172271766;
        Mon, 18 Jun 2007 06:11:11 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 18 Jun 2007 06:11:11 -0700 (PDT)
Message-ID: <359a92830706180611u37f499edy2f8959cdc0fc57a7@mail.gmail.com>
Date: Mon, 18 Jun 2007 09:11:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.
In-Reply-To: <002901c7b182$da91edd0$8fb5c970$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54789_12578882.1182172271670"
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>
	 <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>
	 <002901c7b182$da91edd0$8fb5c970$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54789_12578882.1182172271670
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'll certainly be interested to see whether you can hit that number, it's
pretty aggressive....

That said, you can also consider indexing in parallel and combining the
results. That is, you can have N machines running on N subsets of
the data. At the end, you can combine those indexes with
IndexWriter.addIndexes. I don't know if that helps in your situation,
but it's a possibility...

Best
Erick

On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
>
> Thanks for your suggestion Erick. I'm planning to test the indexing soon.
> For your information, currently the system is inserting into RDBMS which
> is
> around 1000 records per seconds. Thus, if lucene in place, I would expect
> it
> will index that much of documents per seconds as well (Our target is 3.6
> millions of document to be indexed in 1 hour). Beside of that, I'm
> planning
> to queue the record so lucene will have enough time to index it. Anyway,
> thanks for your suggestion and will come back to you once I tested the
> solution.
>
> Thanks,
> eChuang, Chew
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, June 15, 2007 11:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: FW: Lucene indexing vs RDBMS insertion.
>
> From my perspective, this is an irrelevant question. The real question
> is "is Lucene indexing fast enough for my application?". Which nobody
> can answer for you, you have to experiment.
>
> If you're building an index that's only updated every 6 months,
> Lucene is certainly "fast enough". If you're recreating the
> index every 6 seconds, it's a different question.
>
> So, I recommend that you create a test application that does
> nothing except read your source, do whatever parsing you
> need to do and does NOT index it at all. Record the time it
> takes.
>
> Then try the same thing WITH indexing and record the difference.
>
> Then, to get a sense of the dimension of the problem, try
> substituting inserting into the RDBMS instead of the Lucene
> index.
>
> Once you have numbers, you can make better decisions
> And people can give you better advice,  especially if you
> include more detail of your design.
>
> Best
> Erick
>
> On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> >
> > Hi, I'm  a new user to Lucene, and heard that it is a powerful tool for
> > full
> > text search and I'm planning to use it in my project for data storage
> > purpose. Before the implementation, I could like to know whether there
> is
> > performance issue on Lucene indexing process. I have no doubt on the
> > retrieving and searching feature in Lucene but the indexing process. I
> > have
> > tested my current system to insert 1000 records in RDBMS storage it took
> > about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> > indexing process perform faster than RDBMS ? I have go through some of
> the
> > article talking about the "MergeFactor" and "MaxMergeDocs" parameter for
> > fine tune the indexing process, but no comparison between Lucene
> indexing
> > process and RDBMS insertion. Thus, hope someone who have experience in
> > Lucene can provide this information or some article that discuss between
> > Lucene and RDBMS.
> >
> >
> >
> > I really appreciate any help in this. Thanks
> >
> >
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date:
> 6/14/2007
> > 12:44 PM
> >
> >
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> 8:23 AM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> 8:23 AM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_54789_12578882.1182172271670--

From java-user-return-28711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 13:16:07 2007
Return-Path: <java-user-return-28711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67530 invoked from network); 18 Jun 2007 13:16:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 13:16:05 -0000
Received: (qmail 13056 invoked by uid 500); 18 Jun 2007 13:16:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12722 invoked by uid 500); 18 Jun 2007 13:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12711 invoked by uid 99); 18 Jun 2007 13:16:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:16:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:15:58 -0700
X-ClientAddr: 202.63.154.62
Received: from xenb04 (62.202-63-154.unknown.qala.com.sg [202.63.154.62])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l5IDLeNT002721
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 21:21:45 +0800
Message-Id: <200706181321.l5IDLeNT002721@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene for chinese search
Date: Mon, 18 Jun 2007 21:13:03 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: AcexqV63DSp811vISwqw4Q09Frz6OAAAIPQQ
In-Reply-To: <46768163.7050704@garambrogne.net>
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

For indexing, there is no problem, there is Chinese text similar to my
datasource (XML) in the index file when opening on a note pad.

When I try to use the utf8 in jsp and, getbytes array of 'utf-8' or
ISO88599_1 or Cp1252 in Java servlet, but we getting search problem, the
search result does not display for Chinese term.

I mixed English and Chinese text in my datasource, the search is working =
for
English term, and Chinese char display as '???' in the result output.

Please advice or send some sample / solutions=20
=20
Thanks.

-----Original Message-----
From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]=20
Sent: Monday, June 18, 2007 8:58 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene for chinese search

Lee Li Bin a =E9crit :
> Hi,
>
> I still met problem for searching of Chinese words.
> XMl file which is the datasource and analyzer has already been =
encoded.
> Have testing on StandardAnalyzer, CJKAnalyzer, and ChineseAnalyzer, =
but it
> still can't get any results.
>
> 1.	do we need any encoding configuration in apache tomcat for Chinese
> search using Lucence=20
>
> 2.	do we need to use JSP meta / page encoding ? what is the encoding
> for 	jsp?
>  =20
try first with simple junit test, after you can fight with UTF8 =
parameters.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 13:18:33 2007
Return-Path: <java-user-return-28712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68313 invoked from network); 18 Jun 2007 13:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 13:18:31 -0000
Received: (qmail 21005 invoked by uid 500); 18 Jun 2007 13:18:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20968 invoked by uid 500); 18 Jun 2007 13:18:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20957 invoked by uid 99); 18 Jun 2007 13:18:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:18:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:18:22 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1811321muf
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 06:18:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pgBiTs/XK/9cnpy2Wy28c3g1/1fhuquyXfjkwcjm1DybLfYhJmr42Yhu+sUiK5mdSFBMX2gTJ4YuHDF91LadpsJNE07TaHBVLcw7gYoa+M/kvN94ZPtqbRLuIeB/LoJI6osAiGZ6IcJq5/kDI1d5qILW5LZck+rXBKOlGMjfmmk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a1aSdH/UWsC5SwsKog58NjTRUTbLwC7XC6sY7jEZwQXIUf1O3/pZYKvoELcbqq9JximUzi5isDKdIORWNF1pqkDaIm3ckulDo95D5ScCK/ZaRSs+3F4rW1hIbzBgFdFVLvH4r8XNNb6579LfSNv3MwP5WRnWDbd+3T1WSg8CyAQ=
Received: by 10.82.112.16 with SMTP id k16mr11238562buc.1182172680896;
        Mon, 18 Jun 2007 06:18:00 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 18 Jun 2007 06:18:00 -0700 (PDT)
Message-ID: <359a92830706180618v4ba91e41kc057dac8064e5229@mail.gmail.com>
Date: Mon, 18 Jun 2007 09:18:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Several questions about scoring/sorting + random sorting in an image/related application
In-Reply-To: <81EC726A-07F3-4350-A20F-4B5289054991@taktik.be>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54894_21391730.1182172680850"
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
	 <Pine.LNX.4.58.0706162254420.7467@hal.rescomp.berkeley.edu>
	 <A621CD0E-55B2-4E21-BC51-2E0A2A741A4D@taktik.be>
	 <Pine.LNX.4.58.0706171032310.12777@hal.rescomp.berkeley.edu>
	 <81EC726A-07F3-4350-A20F-4B5289054991@taktik.be>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54894_21391730.1182172680850
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Good point.

You could also think about just storing the date with the appropriate
resolution (e.g. day or something like that).....

Erick

On 6/18/07, Antoine Baudoux <ab@taktik.be> wrote:
>
>
> >
> > : Thats what i discovered. The question is : Is the ValueSourceQuery
> > : strong and fast enough to be
> > : used confidently in a production environment? I looked at the source
> >
> > as i mentioned, i'm not intimately familiar with the new
> > ValueSourceQuery,
> > but the FunctionQuery it's based on is certainly production
> > quality.  I
> > use it all over the place.
> >
> > : What's wrong with this idea :
> > : Each day i generate an shuffle a vector of Maxdoc integers from 0 to
> > : Maxdoc.
> > :
> > : Then i use a valueSource query with a valueSource that uses this
> > : vector to randomly score the documents.
> > : Of course I have to somehow normalize those random scores so that
> > : their "contribution factor" remains constant when MaxDocs increases.
> >
> > well, that's a random fixed ordering per day ... a bit different then
> > random per search (much more cachable).
> >
> > I also didn't realize you wanted the randomness to just be an added
> > factor
> > in your orriginal query -- i thought this was a seperate "sort
> > randomly"
> > side question.  your approach sounds like it it could work, but as you
> > say: there are complexities of keeping it balanced.
> >
> >
> > -Hoss
> >
>
> Thanks for your help! I will start implementing those solutions now.
> One last remark :
>
> >  for the "recentness" aspect a
> > ValueSourceQuery composed on a ReverseOrdFieldSource should take
> > care of
> > things ...
>
> I have a problem with this solution : Document ordering is different
> from Recentness :
> If i upload 1000 images now, they should have the same "recentness",
> even if their order is very different.
>
> So i think i will store image dates as Int and use a field cache to
> compute a score based on the difference between the present date and
> the date of the image.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_54894_21391730.1182172680850--

From java-user-return-28713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 13:25:23 2007
Return-Path: <java-user-return-28713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76345 invoked from network); 18 Jun 2007 13:25:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 13:25:21 -0000
Received: (qmail 37385 invoked by uid 500); 18 Jun 2007 13:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37349 invoked by uid 500); 18 Jun 2007 13:25:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37337 invoked by uid 99); 18 Jun 2007 13:25:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:25:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:25:12 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2316200wah
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 06:24:51 -0700 (PDT)
Received: by 10.114.52.1 with SMTP id z1mr6143467waz.1182173091394;
        Mon, 18 Jun 2007 06:24:51 -0700 (PDT)
Received: by 10.115.110.2 with HTTP; Mon, 18 Jun 2007 06:24:51 -0700 (PDT)
Message-ID: <1324e4e20706180624n78d1ea8arae455b7b476ec7b8@mail.gmail.com>
Date: Mon, 18 Jun 2007 18:54:51 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: lucene-net-user@incubator.apache.org, java-user@lucene.apache.org
Subject: Phrase Search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60543_694262.1182173091378"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60543_694262.1182173091378
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello everyone,

I am lucene user and tried to implement pharse query, But now getting some
logical problems in searching..

My index have 4 fields: Name, Address &  City  and 6 docs.
i.e  1. "Laxmilal Menaria", "Hiran Magri", "Udaipur",
     2.  "Mohan Sharma", "Hiran Magri Sec 10", "Udaipur"
     3.  "Rohit Bhargav", "Suraj pole", "Udaipur"
     4.  "Laxmilal", "Hiran Magri Sec 4", "Ahemdabad"
     5.  "Chandresh" , "Bihar", "Patna"
     6.  "James", "Hiran Magri 18", "Delhi"

Now search Address:"Hiran Magri" and got 4 results, But  I want 1 result
only(Document-1), so what should I do ?

My Search code is :
                    sQuery="Hiran Magri"
                    .
                    .
                     Dim lucQuery As Lucene.Net.Search.Query  = New
Lucene.Net.QueryParsers.QueryParser("Address", New
Lucene.Net.Analysis.Standard.StandardAnalyzer).Parse(sQuery)
                    Dim lucHits As Lucene.Net.Search.Hits =
lucIndexSearcher.Search(lucQuery)
                    Dim intHitCount As Integer = lucHits.Length


-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_60543_694262.1182173091378--

From java-user-return-28714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 13:44:06 2007
Return-Path: <java-user-return-28714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82033 invoked from network); 18 Jun 2007 13:44:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 13:44:05 -0000
Received: (qmail 72644 invoked by uid 500); 18 Jun 2007 13:44:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72603 invoked by uid 500); 18 Jun 2007 13:44:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72591 invoked by uid 99); 18 Jun 2007 13:44:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:44:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 06:43:55 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1491287uge
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 06:43:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GD6LhOZX+I4Mb/mf0t9SxTgVZJA0lgfq7Cy6XLUFx1BIsdHSOvec+yh4i7CEBlQ9ZmM98dUnu2VVn4HCPc+42LiprlNRKNnc8LZ0dC0fGhjKcnZPpiXzUQW2kW7RbsCG5DfkTuUVqjCzZ0XWc/aHIUgHoxzcyb75k0V9PtC3t8E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FUT684Cl8w9G3kGuPlj3EY9gEBtNr7FxdScPO1HIzHXZJrYE7h5ID0feKnwPxcoX99j+60kIVNKz0Iou8sjfx6fCWxzazkh4aBfovJqhoTiRX8FL7v5kM+QqaUDhFPOxyTs585nJ+i1JyxR2PtkGmDLGIb9LfXb2whYtxts6w78=
Received: by 10.82.170.2 with SMTP id s2mr11286634bue.1182174213709;
        Mon, 18 Jun 2007 06:43:33 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 18 Jun 2007 06:43:33 -0700 (PDT)
Message-ID: <359a92830706180643x7627ce98ud194002f580f28c2@mail.gmail.com>
Date: Mon, 18 Jun 2007 09:43:33 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase Search
In-Reply-To: <1324e4e20706180624n78d1ea8arae455b7b476ec7b8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55286_32697764.1182174213687"
References: <1324e4e20706180624n78d1ea8arae455b7b476ec7b8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55286_32697764.1182174213687
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Phrase queries won't help you here....

Your particular issue can be addressed, but I'm not sure it's a
reasonable long-term solution....

If you indexed your address field as UN_TOKENIZED, and
did NOT tokenize your query, it should give you what you want.
What's happening is that StandardAnalyzer is indexing indivdual
tokens, not phrases. So, doc 1 has the tokens
"hiran", "margi"

Doc 2 has tokens.
"hiran", "magri", "sec", and "10"

and so on...

Searching, even for phrases, on "hiran margi" matches
4 docs because those two tokens appear next to each other.

If, on the other hand, you index your address field UN_TOKENIZED,
then doc1 has a "token" of "hiran margi", while doc 2 has a token
of "hiran magri sec 10". Doc2 won't match a query on
"hiran margi" etc.

But, this may not be a good solution because searching on
"hiran" won't match *any* document. You might have to index
the same fields two different ways to get all the behavior you
want.

Best
Erick

On 6/18/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
>
> Hello everyone,
>
> I am lucene user and tried to implement pharse query, But now getting some
> logical problems in searching..
>
> My index have 4 fields: Name, Address &  City  and 6 docs.
> i.e  1. "Laxmilal Menaria", "Hiran Magri", "Udaipur",
>      2.  "Mohan Sharma", "Hiran Magri Sec 10", "Udaipur"
>      3.  "Rohit Bhargav", "Suraj pole", "Udaipur"
>      4.  "Laxmilal", "Hiran Magri Sec 4", "Ahemdabad"
>      5.  "Chandresh" , "Bihar", "Patna"
>      6.  "James", "Hiran Magri 18", "Delhi"
>
> Now search Address:"Hiran Magri" and got 4 results, But  I want 1 result
> only(Document-1), so what should I do ?
>
> My Search code is :
>                     sQuery="Hiran Magri"
>                     .
>                     .
>                      Dim lucQuery As Lucene.Net.Search.Query  = New
> Lucene.Net.QueryParsers.QueryParser("Address", New
> Lucene.Net.Analysis.Standard.StandardAnalyzer).Parse(sQuery)
>                     Dim lucHits As Lucene.Net.Search.Hits =
> lucIndexSearcher.Search(lucQuery)
>                     Dim intHitCount As Integer = lucHits.Length
>
>
> --
> Thanks,
> Laxmilal menaria
>
> http://www.minalyzer.com/
> http://www.chambal.com/
>

------=_Part_55286_32697764.1182174213687--

From java-user-return-28715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 14:24:10 2007
Return-Path: <java-user-return-28715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97712 invoked from network); 18 Jun 2007 14:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 14:24:10 -0000
Received: (qmail 87085 invoked by uid 500); 18 Jun 2007 14:24:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86837 invoked by uid 500); 18 Jun 2007 14:24:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86826 invoked by uid 99); 18 Jun 2007 14:24:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 07:24:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 07:24:01 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l5IENmE19997
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 09:23:48 -0500
Message-ID: <46769563.9030101@getopt.org>
Date: Mon, 18 Jun 2007 16:23:31 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Phrase Search
References: <1324e4e20706180624n78d1ea8arae455b7b476ec7b8@mail.gmail.com> <359a92830706180643x7627ce98ud194002f580f28c2@mail.gmail.com>
In-Reply-To: <359a92830706180643x7627ce98ud194002f580f28c2@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> Phrase queries won't help you here....
> 
> Your particular issue can be addressed, but I'm not sure it's a
> reasonable long-term solution....
> 
> If you indexed your address field as UN_TOKENIZED, and
> did NOT tokenize your query, it should give you what you want.
> What's happening is that StandardAnalyzer is indexing indivdual
> tokens, not phrases. So, doc 1 has the tokens
> "hiran", "margi"
> 
> Doc 2 has tokens.
> "hiran", "magri", "sec", and "10"
> 
> and so on...
> 
> Searching, even for phrases, on "hiran margi" matches
> 4 docs because those two tokens appear next to each other.
> 
> If, on the other hand, you index your address field UN_TOKENIZED,
> then doc1 has a "token" of "hiran margi", while doc 2 has a token
> of "hiran magri sec 10". Doc2 won't match a query on
> "hiran margi" etc.
> 
> But, this may not be a good solution because searching on
> "hiran" won't match *any* document. You might have to index
> the same fields two different ways to get all the behavior you
> want.

Another good old trick is to index field values (tokenized) with 
appended special starting and ending tokens, e.g. instead of "Hiran 
Magri" use "_start_ Hiran Magri _end_". Then you can query for fields 
that are exactly equal to a phrase, while still retaining the 
possibility to search by individual terms and phrases not equal to the 
field value.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 14:26:55 2007
Return-Path: <java-user-return-28716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98710 invoked from network); 18 Jun 2007 14:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 14:26:53 -0000
Received: (qmail 93645 invoked by uid 500); 18 Jun 2007 14:26:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93616 invoked by uid 500); 18 Jun 2007 14:26:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93599 invoked by uid 99); 18 Jun 2007 14:26:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 07:26:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 07:26:34 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.164980A0@mailer.syr.edu>; Mon, 18 Jun 2007 10:26:13 -0400
Message-ID: <467695A7.70402@syr.edu>
Date: Mon, 18 Jun 2007 10:24:39 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: negative queries
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com> <200706151134.49898.daniel@nuix.com> <Pine.LNX.4.58.0706151822080.9622@hal.rescomp.berkeley.edu> <200706180920.25073.daniel@nuix.com>
In-Reply-To: <200706180920.25073.daniel@nuix.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Daniel,

Daniel Noll wrote:
> On Saturday 16 June 2007 11:39:35 Chris Hostetter wrote:
>> : The mailing list has already answered this question dozens of times. 
>> : I've been wondering lately, does this list have a FAQ?  If so, is this
>> : question on it?
>>
>> The wiki is open to editing by all.
> 
> The FAQ page claims to be immutable, however.

In order to edit wiki pages, you must create a profile and be logged in.

Click on the "Login" link in the upper right hand of the front page, to
the left of the Search box.

Fill out the form that comes up, and click on the "Create Profile" button.

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 15:30:16 2007
Return-Path: <java-user-return-28717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33267 invoked from network); 18 Jun 2007 15:30:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 15:30:15 -0000
Received: (qmail 55334 invoked by uid 500); 18 Jun 2007 15:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55309 invoked by uid 500); 18 Jun 2007 15:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55298 invoked by uid 99); 18 Jun 2007 15:30:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 08:30:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yatinsoni@interinfosystems.com designates 66.197.161.85 as permitted sender)
Received: from [66.197.161.85] (HELO ommail.org) (66.197.161.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 08:30:06 -0700
Received: from Yatin (unverified [220.224.226.146]) 
	by ommail.org (SurgeMail 3.8i3) with ESMTP id 9427907-1916768 
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 11:29:42 -0400
Message-ID: <005901c7b1bd$d4a1b050$d100a8c0@Yatin>
From: "Yatin Soni" <yatinsoni@interinfosystems.com>
To: <java-user@lucene.apache.org>
References: <003a01c7aea4$8d5b9f10$d100a8c0@Yatin> <Pine.LNX.4.58.0706152012190.9622@hal.rescomp.berkeley.edu>
Subject: Re: Lucene Search result (scoring )
Date: Mon, 18 Jun 2007 20:43:57 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1106
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-Authenticated-User: yatinsoni@interinfosystems.com 
X-SpamDetect: : -1.000000 NotSpamFlag=-1.0
X-IP-stats: Notspam Incoming Last 0, First 56, in=690, out=0, spam=0 Known=true ip=220.224.226.146
X-Originating-IP: 220.224.226.146
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Hoss,

I had tried with Explaination but didn't get the desired results.Can you
give me the brief demo code based on the result order by the no of matching
terms .

Thanks,
Yatin

----- Original Message -----
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: <java-user@lucene.apache.org>
Sent: 16, 06, 2007 8:47 AM
Subject: Re: Lucene Search result (scoring )


>
> the "explain" method on a Searcher, and the Explanation classes can
> explain everything baout how/why a particular document in a particular
> index gets a particular score for a particular search.  The only tricky
> thing about it is understanding that it refers to the "raw" scores (what
> you seem to be quoting look like "normalized" scores from the Hits class,
> but if your cheif concern is the relative order of hte results this is
> largely irrelevent)
>
> When looking at the Explanation info, many of the terms may not make a
> lot of sense .. this is where the scoring.html document can fill in the
> gaps and explain the explaination...
>
> http://lucene.apache.org/java/docs/scoring.html
>
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



________________________________________________________
S Naidu  Domain Name Registration, Web Hosting, Email Solutions, Website Designing, 
Ecommerce website development, Payment Gateway,  
Contact 91 22 28123113 / 91 22 28129404 Mumbai http://www.snaidu.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 18:02:21 2007
Return-Path: <java-user-return-28718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91368 invoked from network); 18 Jun 2007 18:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 18:02:20 -0000
Received: (qmail 44592 invoked by uid 500); 18 Jun 2007 18:02:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44435 invoked by uid 500); 18 Jun 2007 18:02:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44424 invoked by uid 99); 18 Jun 2007 18:02:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 11:02:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 11:02:11 -0700
Received: by wr-out-0506.google.com with SMTP id m59so372013wrm
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 11:01:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=p953f/CrDelJ1jTSEXDAlxYIRSE2dew+xjzKyRnqiticIGVs6uzb1eSWH/nje9u6DxoS1GZNGpzDOkrM8553HnMc7EtybQgHh/hsaLZuAiQyl7HRapy1Gq5V7Fbym5Z9I9XBmA2qVfS9krgXwilO5i3kWPtDbBpnlS49uqdEJds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GKgO/rodlPxLUWn8z37iO2ddJZv4vm23s1pbNdloqZN/Q6L2Bwd3ciQj8b5XghBlHhsf+IL49I22S7ZfP2T/do072uM54eMwPrfEsSgdSmlIgZ2pppyjtjGkYBkWrHzsh1dubCC+qMHSyo85RIX4sIKWuxCqF6Dd2UqaULy36pc=
Received: by 10.78.138.6 with SMTP id l6mr2453489hud.1182189709817;
        Mon, 18 Jun 2007 11:01:49 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Mon, 18 Jun 2007 11:01:49 -0700 (PDT)
Message-ID: <6e3ae6310706181101h36c7b52gb255fa053398e4ca@mail.gmail.com>
Date: Mon, 18 Jun 2007 11:01:49 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene for chinese search
In-Reply-To: <200706181321.l5IDLeNT002721@ns21.webhostsg.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <46768163.7050704@garambrogne.net>
	 <200706181321.l5IDLeNT002721@ns21.webhostsg.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Basically where ever you see, the encoding should be utf8.

The servlet also has an encoding setting. For your case, change the
tomcat setting.
When rendering jsp page, the encoding also matters.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes

On 6/18/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
>
> Hi,
>
> For indexing, there is no problem, there is Chinese text similar to my
> datasource (XML) in the index file when opening on a note pad.
>
> When I try to use the utf8 in jsp and, getbytes array of 'utf-8' or
> ISO88599_1 or Cp1252 in Java servlet, but we getting search problem, the
> search result does not display for Chinese term.
>
> I mixed English and Chinese text in my datasource, the search is working =
for
> English term, and Chinese char display as '???' in the result output.
>
> Please advice or send some sample / solutions
>
> Thanks.
>
> -----Original Message-----
> From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]
> Sent: Monday, June 18, 2007 8:58 PM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene for chinese search
>
> Lee Li Bin a =E9crit :
> > Hi,
> >
> > I still met problem for searching of Chinese words.
> > XMl file which is the datasource and analyzer has already been encoded.
> > Have testing on StandardAnalyzer, CJKAnalyzer, and ChineseAnalyzer, but=
 it
> > still can't get any results.
> >
> > 1.    do we need any encoding configuration in apache tomcat for Chines=
e
> > search using Lucence
> >
> > 2.    do we need to use JSP meta / page encoding ? what is the encoding
> > for   jsp?
> >
> try first with simple junit test, after you can fight with UTF8 parameter=
s.
>
> M.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 18:19:19 2007
Return-Path: <java-user-return-28719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96832 invoked from network); 18 Jun 2007 18:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 18:19:17 -0000
Received: (qmail 84691 invoked by uid 500); 18 Jun 2007 18:19:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84491 invoked by uid 500); 18 Jun 2007 18:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84444 invoked by uid 99); 18 Jun 2007 18:19:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 11:19:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.90.179 as permitted sender)
Received: from [66.249.90.179] (HELO ik-out-1112.google.com) (66.249.90.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 11:19:05 -0700
Received: by ik-out-1112.google.com with SMTP id b32so1348005ika
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 11:18:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VngGLFjd6vhecHiZoghyk/YYuHvuqIlk3zYZi3MvP7jv7fVSPpE2I2bkhKluD84rUb3oMo8Q9aBzgsERId9TLPYTiYr3bNH1zW7RJMhA+vT1HGqZ0PqfGIGQHRlou81rItj6f2+VirEFX6ahRNTzNA+12sDzLPdtyrHdYNASRQg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DDQMyrY+HP5wFfY7QgbZ9wUaywd/H15zrm+TJ4MEDWCLeFGa2+vRdrVPMLqXLqCTO3nFQN0UGX16ycRLTZ6OWVFyJqCphuyhzha846rkFndZildIwpLxC41+aHlARfb6bneCiyaqVxYZfd0tws9NDns0WMsTX7WmZ8gSB8BbjMc=
Received: by 10.78.142.14 with SMTP id p14mr2467625hud.1182190723509;
        Mon, 18 Jun 2007 11:18:43 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Mon, 18 Jun 2007 11:18:43 -0700 (PDT)
Message-ID: <6e3ae6310706181118m18f59255o3d05026663dbe197@mail.gmail.com>
Date: Mon, 18 Jun 2007 11:18:43 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.
In-Reply-To: <002901c7b182$da91edd0$8fb5c970$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>
	 <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>
	 <002901c7b182$da91edd0$8fb5c970$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

Definitely very aggressive.

Currently my experience is that, together with database access,
DBSight can do 3 million in 2 hours, with Pentium D 3.4Hz. Seems you
definitely need some good hardware, and a fast hard drive for this. I
feel the hard drive is actually the bottleneck for large indexes.
Partitioning your data and pruning the old data should be also
considered.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> Thanks for your suggestion Erick. I'm planning to test the indexing soon.
> For your information, currently the system is inserting into RDBMS which is
> around 1000 records per seconds. Thus, if lucene in place, I would expect it
> will index that much of documents per seconds as well (Our target is 3.6
> millions of document to be indexed in 1 hour). Beside of that, I'm planning
> to queue the record so lucene will have enough time to index it. Anyway,
> thanks for your suggestion and will come back to you once I tested the
> solution.
>
> Thanks,
> eChuang, Chew
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, June 15, 2007 11:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: FW: Lucene indexing vs RDBMS insertion.
>
> From my perspective, this is an irrelevant question. The real question
> is "is Lucene indexing fast enough for my application?". Which nobody
> can answer for you, you have to experiment.
>
> If you're building an index that's only updated every 6 months,
> Lucene is certainly "fast enough". If you're recreating the
> index every 6 seconds, it's a different question.
>
> So, I recommend that you create a test application that does
> nothing except read your source, do whatever parsing you
> need to do and does NOT index it at all. Record the time it
> takes.
>
> Then try the same thing WITH indexing and record the difference.
>
> Then, to get a sense of the dimension of the problem, try
> substituting inserting into the RDBMS instead of the Lucene
> index.
>
> Once you have numbers, you can make better decisions
> And people can give you better advice,  especially if you
> include more detail of your design.
>
> Best
> Erick
>
> On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> >
> > Hi, I'm  a new user to Lucene, and heard that it is a powerful tool for
> > full
> > text search and I'm planning to use it in my project for data storage
> > purpose. Before the implementation, I could like to know whether there is
> > performance issue on Lucene indexing process. I have no doubt on the
> > retrieving and searching feature in Lucene but the indexing process. I
> > have
> > tested my current system to insert 1000 records in RDBMS storage it took
> > about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> > indexing process perform faster than RDBMS ? I have go through some of the
> > article talking about the "MergeFactor" and "MaxMergeDocs" parameter for
> > fine tune the indexing process, but no comparison between Lucene indexing
> > process and RDBMS insertion. Thus, hope someone who have experience in
> > Lucene can provide this information or some article that discuss between
> > Lucene and RDBMS.
> >
> >
> >
> > I really appreciate any help in this. Thanks
> >
> >
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date: 6/14/2007
> > 12:44 PM
> >
> >
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> 8:23 AM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> 8:23 AM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 18:30:21 2007
Return-Path: <java-user-return-28720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1449 invoked from network); 18 Jun 2007 18:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 18:30:19 -0000
Received: (qmail 2658 invoked by uid 500); 18 Jun 2007 18:30:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2616 invoked by uid 500); 18 Jun 2007 18:30:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2589 invoked by uid 99); 18 Jun 2007 18:30:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 11:30:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 11:29:57 -0700
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])by mailgw3a.lmco.com  (LM-6) with ESMTP id l5IITaMf019528for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 14:29:36 -0400 (EDT)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.3-x3 #31239)
 id <0JJU00401GMBNI@lmco.com> for java-user@lucene.apache.org; Mon, 18 Jun 2007 14:29:35 -0400 (EDT)
Received: from EMSS09I00.us.lmco.com ([158.183.26.31]) by lmco.com (PMDF V6.3-x3 #31239)
 with ESMTP id <0JJU00LONGOW98@lmco.com> for java-user@lucene.apache.org; Mon, 18 Jun 2007 14:29:20 -0400 (EDT)
Received: from emss10m02.us.lmco.com ([158.187.0.186]) by EMSS09I00.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Mon,
 18 Jun 2007 14:29:20 -0400
Date: Mon, 18 Jun 2007 14:29:20 -0400
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: Content Summarization
In-reply-to: <764F4310231D1541ABC1CBE540218E000289F0@bettylou.configureone.net>
To: java-user@lucene.apache.org
Message-id: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4C9@emss10m02.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Content Summarization
Thread-Index: AcepLdHUVnxJeDpDS5KxTDZxBe37lAIqHVeA
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
References: <764F4310231D1541ABC1CBE540218E000289F0@bettylou.configureone.net>
X-OriginalArrivalTime: 18 Jun 2007 18:29:20.0903 (UTC) FILETIME=[9679C970:01C7B1D6]
X-Virus-Checked: Checked by ClamAV on apache.org

Any one knows of a content summarization library. I need to display a
summarized version of the document, not snippets of text like the
highlighter, but actually a summary of the document.

Thanks

Aviran

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 19:31:04 2007
Return-Path: <java-user-return-28721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29532 invoked from network); 18 Jun 2007 19:31:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 19:31:03 -0000
Received: (qmail 10799 invoked by uid 500); 18 Jun 2007 19:30:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10771 invoked by uid 500); 18 Jun 2007 19:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10760 invoked by uid 99); 18 Jun 2007 19:30:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 12:30:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 12:30:55 -0700
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 3447D9901D
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 21:30:33 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4C9@emss10m02.us.lmco.com>
References: <764F4310231D1541ABC1CBE540218E000289F0@bettylou.configureone.net> <A79A2D741A822A46B9F0BFF4F4585DDB3EC4C9@emss10m02.us.lmco.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <11711A1A-93A8-4A00-A889-476BDEC796C8@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: Content Summarization
Date: Mon, 18 Jun 2007 21:30:31 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It's not so far from Lucene!
http://en.wikipedia.org/wiki/Sentence_extraction

have a look at wordnet (http://wordnet.princeton.edu/).
Get some list of articles, verb, nouns, and affix rules (like aspell, =20=

myspell ...)

You will use more cooking rules than code.

M.
Le 18 juin 07 =E0 20:29, Mordo, Aviran (EXP N-NANNATEK) a =E9crit :

> Any one knows of a content summarization library. I need to display a
> summarized version of the document, not snippets of text like the
> highlighter, but actually a summary of the document.
>
> Thanks
>
> Aviran
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 20:03:34 2007
Return-Path: <java-user-return-28722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36834 invoked from network); 18 Jun 2007 20:03:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 20:03:33 -0000
Received: (qmail 64835 invoked by uid 500); 18 Jun 2007 20:03:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64801 invoked by uid 500); 18 Jun 2007 20:03:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64790 invoked by uid 99); 18 Jun 2007 20:03:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:03:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:03:24 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1578802uge
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 13:03:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=q0HFM5P78GVshfpqa5+ptyo41Lzif4e37hyiio9zHDWAERaYGA2imOEO8XrqTLLXmLyLoBuTXMrTHgM8jsrWFf/mufRciEF7U+x5XY0KUUNAawUGGxjIO+6XmHJ9fLagqt3NCn6sAxUn3JrrCfocHB5JBtzcO9dOU5wzbU5+8uE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=EMOZLmc7omGZ7+jqbUylaAIAdd2Bnv6ZPOci05jRsGJ+ZILMswhrZ4uoFJZq2NaIpROKvo7Rj68JqNpvjKt05aszYXHX4bswxAzq8iy4g4YWnuFhWKPSwxp9QS9W66I13fUYKSZq6Dapduq95kVqETYfTFF5f7uOIroGSFziF2A=
Received: by 10.78.206.9 with SMTP id d9mr2524928hug.1182196983233;
        Mon, 18 Jun 2007 13:03:03 -0700 (PDT)
Received: from ?192.168.1.2? ( [83.249.118.219])
        by mx.google.com with ESMTP id f7sm191945nfh.2007.06.18.13.03.02
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 18 Jun 2007 13:03:02 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <6e3ae6310706181101h36c7b52gb255fa053398e4ca@mail.gmail.com>
References: <46768163.7050704@garambrogne.net> <200706181321.l5IDLeNT002721@ns21.webhostsg.com> <6e3ae6310706181101h36c7b52gb255fa053398e4ca@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <7854FD3D-6EFC-405A-9343-452A5DFB6175@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene for chinese search
Date: Mon, 18 Jun 2007 22:00:30 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

A year or two ago I hacked Lucene to use UTF16 instead of UTF8 as CJK =20=

characters are represented by 3 bytes with UTF8, and 2 bytes as =20
UTF16. It is a simple hack.

It did however not save me that much as I had a mixed latin and CJK =20
corpus, and I reverted. Still think it is something worth =20
considering. Perhaps it might be worth implementing per index, per =20
document or per field string encoding strategy.




18 jun 2007 kl. 20.01 skrev Chris Lu:

> Basically where ever you see, the encoding should be utf8.
>
> The servlet also has an encoding setting. For your case, change the
> tomcat setting.
> When rendering jsp page, the encoding also matters.
>
> --=20
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?=20
> title=3DCreate_Lucene_Database_Search_in_3_minutes
>
> On 6/18/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
>>
>> Hi,
>>
>> For indexing, there is no problem, there is Chinese text similar =20
>> to my
>> datasource (XML) in the index file when opening on a note pad.
>>
>> When I try to use the utf8 in jsp and, getbytes array of 'utf-8' or
>> ISO88599_1 or Cp1252 in Java servlet, but we getting search =20
>> problem, the
>> search result does not display for Chinese term.
>>
>> I mixed English and Chinese text in my datasource, the search is =20
>> working for
>> English term, and Chinese char display as '???' in the result output.
>>
>> Please advice or send some sample / solutions
>>
>> Thanks.
>>
>> -----Original Message-----
>> From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]
>> Sent: Monday, June 18, 2007 8:58 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene for chinese search
>>
>> Lee Li Bin a =E9crit :
>> > Hi,
>> >
>> > I still met problem for searching of Chinese words.
>> > XMl file which is the datasource and analyzer has already been =20
>> encoded.
>> > Have testing on StandardAnalyzer, CJKAnalyzer, and =20
>> ChineseAnalyzer, but it
>> > still can't get any results.
>> >
>> > 1.    do we need any encoding configuration in apache tomcat for =20=

>> Chinese
>> > search using Lucence
>> >
>> > 2.    do we need to use JSP meta / page encoding ? what is the =20
>> encoding
>> > for   jsp?
>> >
>> try first with simple junit test, after you can fight with UTF8 =20
>> parameters.
>>
>> M.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 20:37:53 2007
Return-Path: <java-user-return-28723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44604 invoked from network); 18 Jun 2007 20:37:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 20:37:34 -0000
Received: (qmail 38245 invoked by uid 500); 18 Jun 2007 20:37:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38205 invoked by uid 500); 18 Jun 2007 20:37:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38193 invoked by uid 99); 18 Jun 2007 20:37:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:37:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:37:26 -0700
Received: by wr-out-0506.google.com with SMTP id m59so412173wrm
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 13:37:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=R1xM+woLBc4Mdt3EI0dP6Nf2yTaEisX4ZFwnhxzVKPmW0CeyfZUCQCLg+cIt5XYuGdxV/HPd75GfgTHOFwc3W+zx/0eW+S5lyIpFe0LPQdUiK2v7vX7V4UrdUmYKT7svWCvGObE5g4vfe6VlSeU8ThpNW+9Q6bJuOEBpeDo2yko=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZOO6VNvzQt4WKuCJCPiudSMgprBwU7BvSMInrn4HFf7Uc52aBPWvHgEs8Ve1RBZ8OJmtGz0v7f25appmgu8KNTEOaocdnlE3i5ESm6oZJtTcRqnJ8EC7q6FQN4QKBaixU56kV4TIS3TmOA75/yJRTf8dp1MoM0FkTrGYOcsrWUg=
Received: by 10.78.175.14 with SMTP id x14mr2543622hue.1182199024531;
        Mon, 18 Jun 2007 13:37:04 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Mon, 18 Jun 2007 13:37:04 -0700 (PDT)
Message-ID: <6e3ae6310706181337j4eef156asbb2f3a39bcbc0a74@mail.gmail.com>
Date: Mon, 18 Jun 2007 13:37:04 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene for chinese search
In-Reply-To: <7854FD3D-6EFC-405A-9343-452A5DFB6175@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <46768163.7050704@garambrogne.net>
	 <200706181321.l5IDLeNT002721@ns21.webhostsg.com>
	 <6e3ae6310706181101h36c7b52gb255fa053398e4ca@mail.gmail.com>
	 <7854FD3D-6EFC-405A-9343-452A5DFB6175@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Karl,

Thanks for sharing this experience.

I did find CJKAnalyzer somehow behaves differently than
ChineseAnalyzer. When trying to highlight the matched term,
ChineseAnalyzer didn't work somehow. But I didn't investigate into it.

This is a useful clue for it.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes


On 6/18/07, karl wettin <karl.wettin@gmail.com> wrote:
> A year or two ago I hacked Lucene to use UTF16 instead of UTF8 as CJK
> characters are represented by 3 bytes with UTF8, and 2 bytes as
> UTF16. It is a simple hack.
>
> It did however not save me that much as I had a mixed latin and CJK
> corpus, and I reverted. Still think it is something worth
> considering. Perhaps it might be worth implementing per index, per
> document or per field string encoding strategy.
>
>
>
>
> 18 jun 2007 kl. 20.01 skrev Chris Lu:
>
> > Basically where ever you see, the encoding should be utf8.
> >
> > The servlet also has an encoding setting. For your case, change the
> > tomcat setting.
> > When rendering jsp page, the encoding also matters.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> > http://wiki.dbsight.com/index.php?
> > title=3DCreate_Lucene_Database_Search_in_3_minutes
> >
> > On 6/18/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
> >>
> >> Hi,
> >>
> >> For indexing, there is no problem, there is Chinese text similar
> >> to my
> >> datasource (XML) in the index file when opening on a note pad.
> >>
> >> When I try to use the utf8 in jsp and, getbytes array of 'utf-8' or
> >> ISO88599_1 or Cp1252 in Java servlet, but we getting search
> >> problem, the
> >> search result does not display for Chinese term.
> >>
> >> I mixed English and Chinese text in my datasource, the search is
> >> working for
> >> English term, and Chinese char display as '???' in the result output.
> >>
> >> Please advice or send some sample / solutions
> >>
> >> Thanks.
> >>
> >> -----Original Message-----
> >> From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]
> >> Sent: Monday, June 18, 2007 8:58 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Lucene for chinese search
> >>
> >> Lee Li Bin a =E9crit :
> >> > Hi,
> >> >
> >> > I still met problem for searching of Chinese words.
> >> > XMl file which is the datasource and analyzer has already been
> >> encoded.
> >> > Have testing on StandardAnalyzer, CJKAnalyzer, and
> >> ChineseAnalyzer, but it
> >> > still can't get any results.
> >> >
> >> > 1.    do we need any encoding configuration in apache tomcat for
> >> Chinese
> >> > search using Lucence
> >> >
> >> > 2.    do we need to use JSP meta / page encoding ? what is the
> >> encoding
> >> > for   jsp?
> >> >
> >> try first with simple junit test, after you can fight with UTF8
> >> parameters.
> >>
> >> M.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 20:45:11 2007
Return-Path: <java-user-return-28724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48358 invoked from network); 18 Jun 2007 20:45:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 20:45:10 -0000
Received: (qmail 54978 invoked by uid 500); 18 Jun 2007 20:45:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54942 invoked by uid 500); 18 Jun 2007 20:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54931 invoked by uid 99); 18 Jun 2007 20:45:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:45:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:45:00 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1587523uge
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 13:44:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ua/IIOzX9Ap3JExImS05gNiU+FG/oWneAANmI/pFe/d1hxll+vBM3DH5ICGUKinsbpEwHszpQybKqVjzIutyEt3ngiPpGYVBhSsio40PJ0JvUb8jatEr+eUJoq9c1v9wnMh4xn6UEgwb0YpuHn1ENExgojdCfEgqcfPyLzVVp3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=PEbI5ir+B7GatZOZRiVqi3/Vtt/tEZUV2A+mmo5xj8CMwU4k8////X2n7yeuszTDd/KFUwDXraMHqSS1I4pHc/64zP3K0smL/WLoe6udgNjUY7Bnq/VaIR7xmxVlhi/DM5vmf5nWVUieHRpWQYaDkXG/p3/NlvdUuhXMlveD1DM=
Received: by 10.78.206.9 with SMTP id d9mr2546203hug.1182199479166;
        Mon, 18 Jun 2007 13:44:39 -0700 (PDT)
Received: from ?192.168.1.2? ( [83.249.118.219])
        by mx.google.com with ESMTP id 35sm1443194nfu.2007.06.18.13.44.37
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 18 Jun 2007 13:44:38 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <6e3ae6310706181337j4eef156asbb2f3a39bcbc0a74@mail.gmail.com>
References: <46768163.7050704@garambrogne.net> <200706181321.l5IDLeNT002721@ns21.webhostsg.com> <6e3ae6310706181101h36c7b52gb255fa053398e4ca@mail.gmail.com> <7854FD3D-6EFC-405A-9343-452A5DFB6175@gmail.com> <6e3ae6310706181337j4eef156asbb2f3a39bcbc0a74@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <D34418CF-1F58-4253-B712-611B77959861@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene for chinese search
Date: Mon, 18 Jun 2007 22:42:06 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Don't they differ in tokenization? One of them uses grams, the other =20
does not. Or? That would be another thing that might mess it up. But =20
then I never looked at the highlighter, so I can only guess.

--
karl

18 jun 2007 kl. 22.37 skrev Chris Lu:

> Hi, Karl,
>
> Thanks for sharing this experience.
>
> I did find CJKAnalyzer somehow behaves differently than
> ChineseAnalyzer. When trying to highlight the matched term,
> ChineseAnalyzer didn't work somehow. But I didn't investigate into it.
>
> This is a useful clue for it.
>
> --=20
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?=20
> title=3DCreate_Lucene_Database_Search_in_3_minutes
>
>
> On 6/18/07, karl wettin <karl.wettin@gmail.com> wrote:
>> A year or two ago I hacked Lucene to use UTF16 instead of UTF8 as CJK
>> characters are represented by 3 bytes with UTF8, and 2 bytes as
>> UTF16. It is a simple hack.
>>
>> It did however not save me that much as I had a mixed latin and CJK
>> corpus, and I reverted. Still think it is something worth
>> considering. Perhaps it might be worth implementing per index, per
>> document or per field string encoding strategy.
>>
>>
>>
>>
>> 18 jun 2007 kl. 20.01 skrev Chris Lu:
>>
>> > Basically where ever you see, the encoding should be utf8.
>> >
>> > The servlet also has an encoding setting. For your case, change the
>> > tomcat setting.
>> > When rendering jsp page, the encoding also matters.
>> >
>> > --
>> > Chris Lu
>> > -------------------------
>> > Instant Scalable Full-Text Search On Any Database/Application
>> > site: http://www.dbsight.net
>> > demo: http://search.dbsight.com
>> > Lucene Database Search in 3 minutes:
>> > http://wiki.dbsight.com/index.php?
>> > title=3DCreate_Lucene_Database_Search_in_3_minutes
>> >
>> > On 6/18/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
>> >>
>> >> Hi,
>> >>
>> >> For indexing, there is no problem, there is Chinese text similar
>> >> to my
>> >> datasource (XML) in the index file when opening on a note pad.
>> >>
>> >> When I try to use the utf8 in jsp and, getbytes array of =20
>> 'utf-8' or
>> >> ISO88599_1 or Cp1252 in Java servlet, but we getting search
>> >> problem, the
>> >> search result does not display for Chinese term.
>> >>
>> >> I mixed English and Chinese text in my datasource, the search is
>> >> working for
>> >> English term, and Chinese char display as '???' in the result =20
>> output.
>> >>
>> >> Please advice or send some sample / solutions
>> >>
>> >> Thanks.
>> >>
>> >> -----Original Message-----
>> >> From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]
>> >> Sent: Monday, June 18, 2007 8:58 PM
>> >> To: java-user@lucene.apache.org
>> >> Subject: Re: Lucene for chinese search
>> >>
>> >> Lee Li Bin a =E9crit :
>> >> > Hi,
>> >> >
>> >> > I still met problem for searching of Chinese words.
>> >> > XMl file which is the datasource and analyzer has already been
>> >> encoded.
>> >> > Have testing on StandardAnalyzer, CJKAnalyzer, and
>> >> ChineseAnalyzer, but it
>> >> > still can't get any results.
>> >> >
>> >> > 1.    do we need any encoding configuration in apache tomcat for
>> >> Chinese
>> >> > search using Lucence
>> >> >
>> >> > 2.    do we need to use JSP meta / page encoding ? what is the
>> >> encoding
>> >> > for   jsp?
>> >> >
>> >> try first with simple junit test, after you can fight with UTF8
>> >> parameters.
>> >>
>> >> M.
>> >>
>> >> =20
>> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >> =20
>> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> > =20
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 20:54:58 2007
Return-Path: <java-user-return-28725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50881 invoked from network); 18 Jun 2007 20:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 20:54:58 -0000
Received: (qmail 72606 invoked by uid 500); 18 Jun 2007 20:54:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72576 invoked by uid 500); 18 Jun 2007 20:54:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72565 invoked by uid 99); 18 Jun 2007 20:54:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:54:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:54:49 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B2C2B5B77E; Mon, 18 Jun 2007 13:54:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 753CE7F403
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 13:54:27 -0700 (PDT)
Date: Mon, 18 Jun 2007 13:54:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Several questions about scoring/sorting + random sorting in an
 image/related application 
In-Reply-To: <81EC726A-07F3-4350-A20F-4B5289054991@taktik.be>
Message-ID: <Pine.LNX.4.58.0706181346150.9109@hal.rescomp.berkeley.edu>
References: <F4B64714-12E3-41BA-9BD7-BBEFC31443A8@taktik.be>
 <Pine.LNX.4.58.0706162254420.7467@hal.rescomp.berkeley.edu>
 <A621CD0E-55B2-4E21-BC51-2E0A2A741A4D@taktik.be>
 <Pine.LNX.4.58.0706171032310.12777@hal.rescomp.berkeley.edu>
 <81EC726A-07F3-4350-A20F-4B5289054991@taktik.be>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: >  for the "recentness" aspect a
: > ValueSourceQuery composed on a ReverseOrdFieldSource should take

: I have a problem with this solution : Document ordering is different
: from Recentness :
: If i upload 1000 images now, they should have the same "recentness",
: even if their order is very different.

ReverseOrdFieldSource isn't based on document ordering, It's based on the
"ordinal value" of the document's value for the specified field ... in
otherwords the reltaive ordering of the documents when sorted by that
field ... the javadocs have an example.

for recentness, this can be advantagous over a specific math calculation
based on the value of "now" because:
  1) the value doesn't fluctuate as now changes -- only as newer documents
are added (the score it produces for the most recent document won't change
just because that document got a day older as long as it's still the most
recent document)
  2) the size of the "gap" between documents doesn't influence the score,
just hte relative order, so documents from last week won't be scoreed
significantly lower then documents from this week just becuase of the
large gap.  (ie: "the last document created on friday night to the first
document published monday morning, as the first document published monday
morning is ot hte second document published monday morning.")

(point #2 is admitedly a subjective benefit, but in practice i think it
helps keep things fair)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 21:00:02 2007
Return-Path: <java-user-return-28726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52116 invoked from network); 18 Jun 2007 21:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 21:00:01 -0000
Received: (qmail 81184 invoked by uid 500); 18 Jun 2007 20:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81149 invoked by uid 500); 18 Jun 2007 20:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81131 invoked by uid 99); 18 Jun 2007 20:59:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:59:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 13:59:51 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A94715B77E; Mon, 18 Jun 2007 13:59:30 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 81C7E7F403
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 13:59:30 -0700 (PDT)
Date: Mon, 18 Jun 2007 13:59:30 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Phrase Search
In-Reply-To: <46769563.9030101@getopt.org>
Message-ID: <Pine.LNX.4.58.0706181356410.9109@hal.rescomp.berkeley.edu>
References: <1324e4e20706180624n78d1ea8arae455b7b476ec7b8@mail.gmail.com>
 <359a92830706180643x7627ce98ud194002f580f28c2@mail.gmail.com>
 <46769563.9030101@getopt.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Another good old trick is to index field values (tokenized) with
: appended special starting and ending tokens, e.g. instead of "Hiran
: Magri" use "_start_ Hiran Magri _end_". Then you can query for fields
: that are exactly equal to a phrase, while still retaining the
: possibility to search by individual terms and phrases not equal to the
: field value.

or build a SpanNearQuery, and then put it inside a SpanFirst query
configured to be as long as the number of terms (+desired
slop) in the SpanNearQuery.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 21:07:36 2007
Return-Path: <java-user-return-28727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54437 invoked from network); 18 Jun 2007 21:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 21:07:36 -0000
Received: (qmail 95087 invoked by uid 500); 18 Jun 2007 21:07:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95048 invoked by uid 500); 18 Jun 2007 21:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95037 invoked by uid 99); 18 Jun 2007 21:07:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 14:07:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 14:07:28 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 78AB25B77E; Mon, 18 Jun 2007 14:07:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 53C897F403
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 14:07:07 -0700 (PDT)
Date: Mon, 18 Jun 2007 14:07:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search result (scoring )
In-Reply-To: <005901c7b1bd$d4a1b050$d100a8c0@Yatin>
Message-ID: <Pine.LNX.4.58.0706181405090.9109@hal.rescomp.berkeley.edu>
References: <003a01c7aea4$8d5b9f10$d100a8c0@Yatin>
 <Pine.LNX.4.58.0706152012190.9622@hal.rescomp.berkeley.edu>
 <005901c7b1bd$d4a1b050$d100a8c0@Yatin>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I had tried with Explaination but didn't get the desired results.Can you
: give me the brief demo code based on the result order by the no of matching
: terms .

the Explanation class will not change your scores to give you results in
any particular way you might want -- it just explains what factors are
contributing to the scores you get, so you can change the appropraite
settings run your query again and see the effects.

this is where reading about how lucene scoring (via hte URL i sent)
becomes important so you cna understand what explain is telling you...

: > the "explain" method on a Searcher, and the Explanation classes can
: > explain everything baout how/why a particular document in a particular
: > index gets a particular score for a particular search.  The only tricky
: > thing about it is understanding that it refers to the "raw" scores (what
: > you seem to be quoting look like "normalized" scores from the Hits class,
: > but if your cheif concern is the relative order of hte results this is
: > largely irrelevent)
: >
: > When looking at the Explanation info, many of the terms may not make a
: > lot of sense .. this is where the scoring.html document can fill in the
: > gaps and explain the explaination...
: >
: > http://lucene.apache.org/java/docs/scoring.html



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 18 22:05:36 2007
Return-Path: <java-user-return-28728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80671 invoked from network); 18 Jun 2007 22:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2007 22:05:34 -0000
Received: (qmail 8434 invoked by uid 500); 18 Jun 2007 22:05:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8186 invoked by uid 500); 18 Jun 2007 22:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8175 invoked by uid 99); 18 Jun 2007 22:05:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 15:05:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.207] (HELO web52604.mail.re2.yahoo.com) (206.190.48.207)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Jun 2007 15:05:27 -0700
Received: (qmail 62137 invoked by uid 60001); 18 Jun 2007 22:05:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=XZN2v1dKjZxoR4OhUdCHX5iiHSBGJeFf/xYwkVmCtIS4iowXxSqmP0Gzk6SlJ3Tf4yKsfi7Cd3JEi28f1C9xw9MUSo9J6myaBL9WVTQiu7u339fop9VPmKsoMLzNd05jfC+AqKoEZK0Fs2ONk4GsDOF/6UhkOG5qoEh2OyHGrdE=;
X-YMail-OSG: X_nNiKoVM1nTNQ8yxW8XqG7G96E_3RcwdfqbMIOhlnP9jQcnR17WOCeXEhGZrggnSA0EZ_TT1XcwjIJPgLU_zi_cHbG2aO2lK8.tl2uEmAaaqnf3hRxerVV_kR9aIv62hVEj7jpt_UfsjyDiDPa9qcUlFA--
Received: from [207.105.30.44] by web52604.mail.re2.yahoo.com via HTTP; Mon, 18 Jun 2007 15:05:04 PDT
Date: Mon, 18 Jun 2007 15:05:04 -0700 (PDT)
From: Omar Alonso <oralonso@yahoo.com>
Subject: Re: Content Summarization
To: java-user@lucene.apache.org
In-Reply-To: <A79A2D741A822A46B9F0BFF4F4585DDB3EC4C9@emss10m02.us.lmco.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <614447.61186.qm@web52604.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at LingPipe
(http://alias-i.com/lingpipe/). 


--- "Mordo, Aviran (EXP N-NANNATEK)"
<aviran.mordo@lmco.com> wrote:

> Any one knows of a content summarization library. I
> need to display a
> summarized version of the document, not snippets of
> text like the
> highlighter, but actually a summary of the document.
> 
> Thanks
> 
> Aviran
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



       
____________________________________________________________________________________
Yahoo! oneSearch: Finally, mobile search 
that gives answers, not web links. 
http://mobile.yahoo.com/mobileweb/onesearch?refer=1ONXIC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 01:02:21 2007
Return-Path: <java-user-return-28729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17388 invoked from network); 19 Jun 2007 01:02:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 01:02:19 -0000
Received: (qmail 17638 invoked by uid 500); 19 Jun 2007 01:02:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17607 invoked by uid 500); 19 Jun 2007 01:02:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17596 invoked by uid 99); 19 Jun 2007 01:02:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 18:02:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 18:02:10 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 9990D4A8170
	for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 11:05:59 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: negative queries
Date: Tue, 19 Jun 2007 10:59:08 +1000
User-Agent: KMail/1.9.7
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com> <200706180920.25073.daniel@nuix.com> <467695A7.70402@syr.edu>
In-Reply-To: <467695A7.70402@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706191059.08330.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 19 June 2007 00:24:39 Steven Rowe wrote:
> In order to edit wiki pages, you must create a profile and be logged in.
>
> Click on the "Login" link in the upper right hand of the front page, to
> the left of the Search box.
>
> Fill out the form that comes up, and click on the "Create Profile" button.

Good way to discourage potential contributors I suppose.

Daniel

-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 01:03:58 2007
Return-Path: <java-user-return-28730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17631 invoked from network); 19 Jun 2007 01:03:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 01:03:57 -0000
Received: (qmail 20172 invoked by uid 500); 19 Jun 2007 01:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20129 invoked by uid 500); 19 Jun 2007 01:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20118 invoked by uid 99); 19 Jun 2007 01:03:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 18:03:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 18:03:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A26EC30EFC1A; Mon, 18 Jun 2007 19:03:28 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-76-4-75-10.dhcp.embarqhsd.net [76.4.75.10])
	by ehatchersolutions.com (Postfix) with ESMTP id EFC8B30EFC16
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 19:03:27 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <200706191059.08330.daniel@nuix.com>
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com> <200706180920.25073.daniel@nuix.com> <467695A7.70402@syr.edu> <200706191059.08330.daniel@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <50ED6C92-7243-4FDE-9F56-AEF9AFCEC2E3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: negative queries
Date: Mon, 18 Jun 2007 21:03:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.6 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jun 18, 2007, at 8:59 PM, Daniel Noll wrote:

> On Tuesday 19 June 2007 00:24:39 Steven Rowe wrote:
>> In order to edit wiki pages, you must create a profile and be  
>> logged in.
>>
>> Click on the "Login" link in the upper right hand of the front  
>> page, to
>> the left of the Search box.
>>
>> Fill out the form that comes up, and click on the "Create Profile"  
>> button.
>
> Good way to discourage potential contributors I suppose.

     And (most) spammers, which is really the point of requiring a  
profile.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 01:06:25 2007
Return-Path: <java-user-return-28731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17908 invoked from network); 19 Jun 2007 01:06:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 01:06:24 -0000
Received: (qmail 22894 invoked by uid 500); 19 Jun 2007 01:06:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22860 invoked by uid 500); 19 Jun 2007 01:06:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22849 invoked by uid 99); 19 Jun 2007 01:06:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 18:06:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 18:06:17 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id BBF8D4A8180
	for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 11:10:06 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: negative queries
Date: Tue, 19 Jun 2007 11:03:15 +1000
User-Agent: KMail/1.9.7
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com> <200706191059.08330.daniel@nuix.com> <50ED6C92-7243-4FDE-9F56-AEF9AFCEC2E3@ehatchersolutions.com>
In-Reply-To: <50ED6C92-7243-4FDE-9F56-AEF9AFCEC2E3@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706191103.15954.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 19 June 2007 11:03:25 Erik Hatcher wrote:
> > Good way to discourage potential contributors I suppose.
>
>      And (most) spammers, which is really the point of requiring a
> profile.

I believe this is called "throwing the baby out with the bath water."

Daniel

-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 01:13:40 2007
Return-Path: <java-user-return-28732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19294 invoked from network); 19 Jun 2007 01:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 01:13:39 -0000
Received: (qmail 32586 invoked by uid 500); 19 Jun 2007 01:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32558 invoked by uid 500); 19 Jun 2007 01:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32547 invoked by uid 99); 19 Jun 2007 01:13:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 18:13:35 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DRUGS_ERECTILE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 18:13:31 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 11F085B77B; Mon, 18 Jun 2007 18:13:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EB65F7F403
	for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 18:13:10 -0700 (PDT)
Date: Mon, 18 Jun 2007 18:13:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: negative queries
In-Reply-To: <200706191103.15954.daniel@nuix.com>
Message-ID: <Pine.LNX.4.58.0706181809170.18828@hal.rescomp.berkeley.edu>
References: <6fb33c150706141807rc77450cqcb94184f54d85da7@mail.gmail.com>
 <200706191059.08330.daniel@nuix.com> <50ED6C92-7243-4FDE-9F56-AEF9AFCEC2E3@ehatchersolutions.com>
 <200706191103.15954.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: >      And (most) spammers, which is really the point of requiring a
: > profile.
:
: I believe this is called "throwing the baby out with the bath water."

you obviously haven't seen the amount of spam that the apache wikis use to
get ... The account creation form currently asks you a simple question
(expanding an acronym) before it will let you create an account -- before
that rule was added several apache wikis were getting slammed with spam
links by automated bots that were even registering with the wiki and
creating account to add the spam.

I think it's a fair trade to lose out on a few wiki contributions from
people who don't want to create an account in exchange for all the other
contributions actually being available because they haven't been deleted
by a wikispambot and replaced with viagra links.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 02:23:58 2007
Return-Path: <java-user-return-28733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38777 invoked from network); 19 Jun 2007 02:23:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 02:23:57 -0000
Received: (qmail 98140 invoked by uid 500); 19 Jun 2007 02:23:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97813 invoked by uid 500); 19 Jun 2007 02:23:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97800 invoked by uid 99); 19 Jun 2007 02:23:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 19:23:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [60.52.184.45] (HELO mail.tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 19:23:49 -0700
Received: from DFPYWL2S ([192.168.2.96]) by tecforte.com with MailEnable ESMTP; Tue, 19 Jun 2007 10:23:23 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>	 <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>	 <002901c7b182$da91edd0$8fb5c970$@com> <6e3ae6310706181118m18f59255o3d05026663dbe197@mail.gmail.com>
In-Reply-To: <6e3ae6310706181118m18f59255o3d05026663dbe197@mail.gmail.com>
Subject: RE: FW: Lucene indexing vs RDBMS insertion.
Date: Tue, 19 Jun 2007 10:20:58 +0800
Message-ID: <005501c7b218$78f17dc0$6ad47940$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acex1TGAPjR7wHpqT7W2NCqg2PGmqAAP6how
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the sharing and suggestion.=20
Yes Chris, the index is to be partitioned by date time, and old index =
will
not be access so frequent.=20

I also did consider indexing in parallel to different index as well =
Erick.
But I can only put all index in ONE machine and there is only ONE =
machine to
process the job (both searching and indexing).=20

I haven=92t try out the addIndexes to combine indexes but I did tried =
out
MultiSearcher for 3 millions of documents in 3 separate indexes and it =
does
not have much different compare to a search in 1 index. Could you mind =
to
share your experience in addIndexes, how is the performance for that ? =
In my
situation,  the indexes may be use for searching at the same time. =
Another
worry for indexing is optimization process, I have tried it out and it =
take
quite some time to optimize my index, e.g indexing for 5000 is about
10seconds (MergeFactor =3D 1000, and recreate IndexWriter every 5000
documents), but to optimize, it will take around ONE minute. So do you =
guys
have any suggestion on optimization process as well ? when should I run =
the
optimization process ? and is it a lot of different with searching in a
optimized index compare to a un-optimize ?=20

------
eChuang, Chew
=20
-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com]=20
Sent: Tuesday, June 19, 2007 2:19 AM
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.

Definitely very aggressive.

Currently my experience is that, together with database access,
DBSight can do 3 million in 2 hours, with Pentium D 3.4Hz. Seems you
definitely need some good hardware, and a fast hard drive for this. I
feel the hard drive is actually the bottleneck for large indexes.
Partitioning your data and pruning the old data should be also
considered.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_m
inutes


On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> Thanks for your suggestion Erick. I'm planning to test the indexing =
soon.
> For your information, currently the system is inserting into RDBMS =
which
is
> around 1000 records per seconds. Thus, if lucene in place, I would =
expect
it
> will index that much of documents per seconds as well (Our target is =
3.6
> millions of document to be indexed in 1 hour). Beside of that, I'm
planning
> to queue the record so lucene will have enough time to index it. =
Anyway,
> thanks for your suggestion and will come back to you once I tested the
> solution.
>
> Thanks,
> eChuang, Chew
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, June 15, 2007 11:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: FW: Lucene indexing vs RDBMS insertion.
>
> From my perspective, this is an irrelevant question. The real question
> is "is Lucene indexing fast enough for my application?". Which nobody
> can answer for you, you have to experiment.
>
> If you're building an index that's only updated every 6 months,
> Lucene is certainly "fast enough". If you're recreating the
> index every 6 seconds, it's a different question.
>
> So, I recommend that you create a test application that does
> nothing except read your source, do whatever parsing you
> need to do and does NOT index it at all. Record the time it
> takes.
>
> Then try the same thing WITH indexing and record the difference.
>
> Then, to get a sense of the dimension of the problem, try
> substituting inserting into the RDBMS instead of the Lucene
> index.
>
> Once you have numbers, you can make better decisions
> And people can give you better advice,  especially if you
> include more detail of your design.
>
> Best
> Erick
>
> On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> >
> > Hi, I'm  a new user to Lucene, and heard that it is a powerful tool =
for
> > full
> > text search and I'm planning to use it in my project for data =
storage
> > purpose. Before the implementation, I could like to know whether =
there
is
> > performance issue on Lucene indexing process. I have no doubt on the
> > retrieving and searching feature in Lucene but the indexing process. =
I
> > have
> > tested my current system to insert 1000 records in RDBMS storage it =
took
> > about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> > indexing process perform faster than RDBMS ? I have go through some =
of
the
> > article talking about the "MergeFactor" and "MaxMergeDocs" parameter =
for
> > fine tune the indexing process, but no comparison between Lucene
indexing
> > process and RDBMS insertion. Thus, hope someone who have experience =
in
> > Lucene can provide this information or some article that discuss =
between
> > Lucene and RDBMS.
> >
> >
> >
> > I really appreciate any help in this. Thanks
> >
> >
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date:
6/14/2007
> > 12:44 PM
> >
> >
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: =
6/17/2007
> 8:23 AM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: =
6/17/2007
> 8:23 AM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


No virus found in this incoming message.
Checked by AVG Free Edition.=20
Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
8:23 AM
=20

No virus found in this outgoing message.
Checked by AVG Free Edition.=20
Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: 6/18/2007
3:02 PM
=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 04:44:03 2007
Return-Path: <java-user-return-28734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71110 invoked from network); 19 Jun 2007 04:44:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 04:44:02 -0000
Received: (qmail 21028 invoked by uid 500); 19 Jun 2007 04:44:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20241 invoked by uid 500); 19 Jun 2007 04:43:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20230 invoked by uid 99); 19 Jun 2007 04:43:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 21:43:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lmenaria@chambal.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 21:43:54 -0700
Received: by wa-out-1112.google.com with SMTP id j40so2618273wah
        for <java-user@lucene.apache.org>; Mon, 18 Jun 2007 21:43:34 -0700 (PDT)
Received: by 10.114.198.1 with SMTP id v1mr6965973waf.1182228214113;
        Mon, 18 Jun 2007 21:43:34 -0700 (PDT)
Received: by 10.115.110.2 with HTTP; Mon, 18 Jun 2007 21:43:34 -0700 (PDT)
Message-ID: <1324e4e20706182143l7e996b10r409b1174b7fd92d7@mail.gmail.com>
Date: Tue, 19 Jun 2007 10:13:34 +0530
From: "Laxmilal Menaria" <lmenaria@chambal.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase Search
In-Reply-To: <359a92830706180643x7627ce98ud194002f580f28c2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68102_15713594.1182228214035"
References: <1324e4e20706180624n78d1ea8arae455b7b476ec7b8@mail.gmail.com>
	 <359a92830706180643x7627ce98ud194002f580f28c2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68102_15713594.1182228214035
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok.. thanks, I have tried to index address field as UN_TOKENIZED and search
using above query, its return Nothing, How can I specified " NOT tokenize"
in query..

--Thanks,

On 6/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Phrase queries won't help you here....
>
> Your particular issue can be addressed, but I'm not sure it's a
> reasonable long-term solution....
>
> If you indexed your address field as UN_TOKENIZED, and
> did NOT tokenize your query, it should give you what you want.
> What's happening is that StandardAnalyzer is indexing indivdual
> tokens, not phrases. So, doc 1 has the tokens
> "hiran", "margi"
>
> Doc 2 has tokens.
> "hiran", "magri", "sec", and "10"
>
> and so on...
>
> Searching, even for phrases, on "hiran margi" matches
> 4 docs because those two tokens appear next to each other.
>
> If, on the other hand, you index your address field UN_TOKENIZED,
> then doc1 has a "token" of "hiran margi", while doc 2 has a token
> of "hiran magri sec 10". Doc2 won't match a query on
> "hiran margi" etc.
>
> But, this may not be a good solution because searching on
> "hiran" won't match *any* document. You might have to index
> the same fields two different ways to get all the behavior you
> want.
>
> Best
> Erick
>
> On 6/18/07, Laxmilal Menaria <lmenaria@chambal.com> wrote:
> >
> > Hello everyone,
> >
> > I am lucene user and tried to implement pharse query, But now getting
> some
> > logical problems in searching..
> >
> > My index have 4 fields: Name, Address &  City  and 6 docs.
> > i.e  1. "Laxmilal Menaria", "Hiran Magri", "Udaipur",
> >      2.  "Mohan Sharma", "Hiran Magri Sec 10", "Udaipur"
> >      3.  "Rohit Bhargav", "Suraj pole", "Udaipur"
> >      4.  "Laxmilal", "Hiran Magri Sec 4", "Ahemdabad"
> >      5.  "Chandresh" , "Bihar", "Patna"
> >      6.  "James", "Hiran Magri 18", "Delhi"
> >
> > Now search Address:"Hiran Magri" and got 4 results, But  I want 1 result
> > only(Document-1), so what should I do ?
> >
> > My Search code is :
> >                     sQuery="Hiran Magri"
> >                     .
> >                     .
> >                      Dim lucQuery As Lucene.Net.Search.Query  = New
> > Lucene.Net.QueryParsers.QueryParser("Address", New
> > Lucene.Net.Analysis.Standard.StandardAnalyzer).Parse(sQuery)
> >                     Dim lucHits As Lucene.Net.Search.Hits =
> > lucIndexSearcher.Search(lucQuery)
> >                     Dim intHitCount As Integer = lucHits.Length
> >
> >
> > --
> > Thanks,
> > Laxmilal menaria
> >
> > http://www.minalyzer.com/
> > http://www.chambal.com/
> >
>



-- 
Thanks,
Laxmilal menaria

http://www.minalyzer.com/
http://www.chambal.com/

------=_Part_68102_15713594.1182228214035--

From java-user-return-28735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 05:35:32 2007
Return-Path: <java-user-return-28735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37696 invoked from network); 19 Jun 2007 05:35:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 05:35:31 -0000
Received: (qmail 84777 invoked by uid 500); 19 Jun 2007 05:35:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84743 invoked by uid 500); 19 Jun 2007 05:35:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84732 invoked by uid 99); 19 Jun 2007 05:35:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 22:35:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jun 2007 22:35:21 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I0WMm-0000LX-W1
	for java-user@lucene.apache.org; Mon, 18 Jun 2007 22:35:00 -0700
Message-ID: <11188737.post@talk.nabble.com>
Date: Mon, 18 Jun 2007 22:35:00 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need Lucene Compression help -- can pay nominal fee
In-Reply-To: <Pine.LNX.4.58.0706071129120.18130@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <11001907.post@talk.nabble.com> <Pine.LNX.4.58.0706071129120.18130@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Hossman,
               Thanks for your reply.when i index the search fields in my
lucene document,it occupy 20% of the original size.how can i reduce the
reduce the index size.

hossman_lucene wrote:
> 
> 
> : I need to store all the attributes of the document i index as part of
> the
> : index. And I need to get the size of the files as close to 20% of the
> : original size as possible. If anyone can help with this I can pay a
> nominal
> : fee. Please contact me if anyone can help.
> 
> Let's be clear about something here: Lucene is an "indexing" technology,
> not a compression technology.  Lucene indexes *can* be smaller then the
> source corpus they index for a variety of reasons (most notably because
> the inverted index structure allows a more susinect represetation of the
> same words appearing in multiple docuemnts, but things like stop word
> removal play a big part as well) but this reduced size only applies to the
> *indexed* fields.  If you "store" data in Lucene there is nothing
> intrinisic in the Lucene that makes it smaller.  If you have a chunk of
> text, and you tell Lucene to store that text, and index that text, it
> doesn't matter how space efficient the "index" is, Lucene still still
> needs to store all of that text.
> 
> Here's a few simple steps to achieve what you want, and i won't charge you
> anything for it...
> 
>   1) take your existing code for building an index, and change it so that
> all of the options to "store" field values are commented out, and only the
> "indexed" fields exist.
>   2) index your corpus of size X, note the size of the index Y.  compute
> the value Z such that:    Z = (0.20 * X) - Y
>   3) go find a compression library A that can compress your corpus of size
> X down to size Z
>   4) go edit your orriginal code to use algorithm A to compress all of
> your stored fields before adding them to Lucene.
> 
> Viola!
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Need-Lucene-Compression-help----can-pay-nominal-fee-tf3881801.html#a11188737
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 07:11:45 2007
Return-Path: <java-user-return-28736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56067 invoked from network); 19 Jun 2007 07:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 07:11:43 -0000
Received: (qmail 94435 invoked by uid 500); 19 Jun 2007 07:11:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94394 invoked by uid 500); 19 Jun 2007 07:11:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94383 invoked by uid 99); 19 Jun 2007 07:11:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 00:11:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 00:11:34 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I0Xrt-0002P1-Uz
	for java-user@lucene.apache.org; Tue, 19 Jun 2007 00:11:13 -0700
Message-ID: <11189642.post@talk.nabble.com>
Date: Tue, 19 Jun 2007 00:11:13 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: how to search the fields in SimpleAnalyzer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
      i index my document using SimpleAnalyzer() when i search the Indexed
field in the searcher class it doesnt give me the results.help me to sort
out this issue.

My Code:

test="9840836598"
test1="bch01"

testRecords=(test+" "+test1);

document.add("testRecords",testRecords,Field.Store.NO,Field.Index.Tokenized)

indexwriter.addDcument(document,new SimpleAnalyzer());

please help me

Thanks in advance


-- 
View this message in context: http://www.nabble.com/how-to-search-the-fields-in-SimpleAnalyzer-tf3944677.html#a11189642
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 07:22:12 2007
Return-Path: <java-user-return-28737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64671 invoked from network); 19 Jun 2007 07:22:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 07:22:11 -0000
Received: (qmail 14592 invoked by uid 500); 19 Jun 2007 07:22:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14554 invoked by uid 500); 19 Jun 2007 07:22:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14543 invoked by uid 99); 19 Jun 2007 07:22:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 00:22:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 00:22:00 -0700
Received: by wr-out-0506.google.com with SMTP id m59so487135wrm
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 00:21:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qN6nEgWAWv8xHZbkmnkJ2X0GIV3sV2r79RQUxHNalUXWaJVoy2nZtTiK+9GRibK2PwIk+vGYyjk4Au24MC5LIRyjlaCXILdXcpPALXTbHJ+3Ktk8OftJKfAlI8o7XY9B9lfotLimqrhqhGczt6toR7fGooO79V686aZTnhEJ7rE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=X25iumE23cHQzWwUgKgz4qVzb+KLOwiOXnnLRwksNpBMKxAiH8jV1RsiF20xNMI7Y9zvVKYrsH5hN5SursDLb9fdxsoOwRIx6grrSCTwM0XfKLeQ27MW4nkvUiLVPlMnYAjzq8Z/+da6y1alYIAOF7fQHHCHjgZKl23yzgtJ+Eg=
Received: by 10.78.204.1 with SMTP id b1mr2663654hug.1182237698351;
        Tue, 19 Jun 2007 00:21:38 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Tue, 19 Jun 2007 00:21:38 -0700 (PDT)
Message-ID: <6e3ae6310706190021q4202fbet2c69726d990fa95f@mail.gmail.com>
Date: Tue, 19 Jun 2007 00:21:38 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.
In-Reply-To: <005501c7b218$78f17dc0$6ad47940$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>
	 <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>
	 <002901c7b182$da91edd0$8fb5c970$@com>
	 <6e3ae6310706181118m18f59255o3d05026663dbe197@mail.gmail.com>
	 <005501c7b218$78f17dc0$6ad47940$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

Optimized index vs un-optimized actually is very much like searching
on one optimized index vs MultiSearcher on multiple optimized indexes.

Each segment is like a small index. If you just add them together,
they just behave like multiple indexes. If segments number is small,
like 3, there won't be much difference. But when you have merge factor
of 1000, you may have 1000 segments. After each search on each
segment, you need to dynamically merge the results, which can be slow.
If you optimize it, your search will be faster, but indexing is
slower.

So you may need to balance your needs. Need your search be very quick,
or ordinary quick is enough? You may want to tune it several times to
get a good balance.

In my project DBSight, what it did is to do indexing on a dedicated
machine, and when it's done, transfer it to a dedicated searching
machine. It won't work for your high requirements though. But I know
from it that "AddIndexes" is pretty slow, especially when the index is
large. Adding index without optimization would be faster, maybe 50%,
but still adding indexes could take hours for million-level documents.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> Thanks for the sharing and suggestion.
> Yes Chris, the index is to be partitioned by date time, and old index will
> not be access so frequent.
>
> I also did consider indexing in parallel to different index as well Erick.
> But I can only put all index in ONE machine and there is only ONE machine to
> process the job (both searching and indexing).
>
> I haven't try out the addIndexes to combine indexes but I did tried out
> MultiSearcher for 3 millions of documents in 3 separate indexes and it does
> not have much different compare to a search in 1 index. Could you mind to
> share your experience in addIndexes, how is the performance for that ? In my
> situation,  the indexes may be use for searching at the same time. Another
> worry for indexing is optimization process, I have tried it out and it take
> quite some time to optimize my index, e.g indexing for 5000 is about
> 10seconds (MergeFactor = 1000, and recreate IndexWriter every 5000
> documents), but to optimize, it will take around ONE minute. So do you guys
> have any suggestion on optimization process as well ? when should I run the
> optimization process ? and is it a lot of different with searching in a
> optimized index compare to a un-optimize ?
>
> ------
> eChuang, Chew
>
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Tuesday, June 19, 2007 2:19 AM
> To: java-user@lucene.apache.org
> Subject: Re: FW: Lucene indexing vs RDBMS insertion.
>
> Definitely very aggressive.
>
> Currently my experience is that, together with database access,
> DBSight can do 3 million in 2 hours, with Pentium D 3.4Hz. Seems you
> definitely need some good hardware, and a fast hard drive for this. I
> feel the hard drive is actually the bottleneck for large indexes.
> Partitioning your data and pruning the old data should be also
> considered.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
> inutes
>
>
> On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > Thanks for your suggestion Erick. I'm planning to test the indexing soon.
> > For your information, currently the system is inserting into RDBMS which
> is
> > around 1000 records per seconds. Thus, if lucene in place, I would expect
> it
> > will index that much of documents per seconds as well (Our target is 3.6
> > millions of document to be indexed in 1 hour). Beside of that, I'm
> planning
> > to queue the record so lucene will have enough time to index it. Anyway,
> > thanks for your suggestion and will come back to you once I tested the
> > solution.
> >
> > Thanks,
> > eChuang, Chew
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Friday, June 15, 2007 11:11 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: FW: Lucene indexing vs RDBMS insertion.
> >
> > From my perspective, this is an irrelevant question. The real question
> > is "is Lucene indexing fast enough for my application?". Which nobody
> > can answer for you, you have to experiment.
> >
> > If you're building an index that's only updated every 6 months,
> > Lucene is certainly "fast enough". If you're recreating the
> > index every 6 seconds, it's a different question.
> >
> > So, I recommend that you create a test application that does
> > nothing except read your source, do whatever parsing you
> > need to do and does NOT index it at all. Record the time it
> > takes.
> >
> > Then try the same thing WITH indexing and record the difference.
> >
> > Then, to get a sense of the dimension of the problem, try
> > substituting inserting into the RDBMS instead of the Lucene
> > index.
> >
> > Once you have numbers, you can make better decisions
> > And people can give you better advice,  especially if you
> > include more detail of your design.
> >
> > Best
> > Erick
> >
> > On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > >
> > > Hi, I'm  a new user to Lucene, and heard that it is a powerful tool for
> > > full
> > > text search and I'm planning to use it in my project for data storage
> > > purpose. Before the implementation, I could like to know whether there
> is
> > > performance issue on Lucene indexing process. I have no doubt on the
> > > retrieving and searching feature in Lucene but the indexing process. I
> > > have
> > > tested my current system to insert 1000 records in RDBMS storage it took
> > > about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> > > indexing process perform faster than RDBMS ? I have go through some of
> the
> > > article talking about the "MergeFactor" and "MaxMergeDocs" parameter for
> > > fine tune the indexing process, but no comparison between Lucene
> indexing
> > > process and RDBMS insertion. Thus, hope someone who have experience in
> > > Lucene can provide this information or some article that discuss between
> > > Lucene and RDBMS.
> > >
> > >
> > >
> > > I really appreciate any help in this. Thanks
> > >
> > >
> > > No virus found in this outgoing message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date:
> 6/14/2007
> > > 12:44 PM
> > >
> > >
> >
> > No virus found in this incoming message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> > 8:23 AM
> >
> >
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> > 8:23 AM
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> 8:23 AM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: 6/18/2007
> 3:02 PM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 07:59:58 2007
Return-Path: <java-user-return-28738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72725 invoked from network); 19 Jun 2007 07:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 07:59:57 -0000
Received: (qmail 75231 invoked by uid 500); 19 Jun 2007 07:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75189 invoked by uid 500); 19 Jun 2007 07:59:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75148 invoked by uid 99); 19 Jun 2007 07:59:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 00:59:51 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of j.prabawa@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 00:59:47 -0700
Received: by an-out-0708.google.com with SMTP id b20so422765ana
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 00:59:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=nRmTVkKOoV6uZjGFsyZCE0kXXN6vC24Iz9bmDUD/fFEP/av/5DoF62UAPYbrD4M6VYBX2R7FlscimI1FNwgPsPZ4/ebPPv0ygf9tPftOGXeRiVJ8h6rTp6BHEpOXlSe2LOA/YOiivhhArj9OkR45o6iNnDTbY9yo48MyVeY4xKI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=nc0Y7aM6cfapD++U+QRx/G9R5WKXSw9Ri4u9cE4dX8X+WkMeAVbU4f4HjUSmHE9MBPhYufwES0q4Keu2dxGl73oa2T+Sr0U8IdNrRU94xFgK2AGLLtZpEed9w4qPJ2xAjVSe+o3Gorvvjay72gooh2g+bFY7K1z65GUsSnveSHY=
Received: by 10.100.105.18 with SMTP id d18mr145643anc.1182239966824;
        Tue, 19 Jun 2007 00:59:26 -0700 (PDT)
Received: by 10.100.191.11 with HTTP; Tue, 19 Jun 2007 00:59:26 -0700 (PDT)
Message-ID: <d22b39d50706190059w79fa88cel35b58f5d9fcafd3e@mail.gmail.com>
Date: Tue, 19 Jun 2007 15:59:26 +0800
From: "Jesse Prabawa" <j.prabawa@gmail.com>
To: java-user@lucene.apache.org
Subject: Position of matches to affect scoring
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75486_15049486.1182239966802"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_75486_15049486.1182239966802
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

The Lucene FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ mentions that
the position of the matches in the text does not affect scoring. So is there
anyway that I can make the position of the matches affect scoring? For
example, I want matches that occur at the beginning to weigh more than those
that occur elsewhere in the text. I have just started using Lucene so any
help/advice is greatly appreciated :)

Thanks,

Jes

------=_Part_75486_15049486.1182239966802--

From java-user-return-28739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 08:19:11 2007
Return-Path: <java-user-return-28739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82625 invoked from network); 19 Jun 2007 08:19:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 08:19:09 -0000
Received: (qmail 1977 invoked by uid 500); 19 Jun 2007 08:19:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1943 invoked by uid 500); 19 Jun 2007 08:19:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1932 invoked by uid 99); 19 Jun 2007 08:19:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 01:19:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 01:19:00 -0700
X-ClientAddr: 202.63.154.53
Received: from xenb04 (53.202-63-154.unknown.qala.com.sg [202.63.154.53])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l5J8OrdJ012526
	for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 16:25:12 +0800
Message-Id: <200706190825.l5J8OrdJ012526@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene for chinese search
Date: Tue, 19 Jun 2007 16:16:10 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: Acex6YFpGNPSyONCRw68FNE5vs1xOQAYGPQg
In-Reply-To: <6e3ae6310706181337j4eef156asbb2f3a39bcbc0a74@mail.gmail.com>
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

thanks guys for helping me.

I forgot to use back the same analyzer for searching, that's why I can't
search for Chinese words.. :)

=20

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com]=20
Sent: Tuesday, June 19, 2007 4:37 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene for chinese search

Hi, Karl,

Thanks for sharing this experience.

I did find CJKAnalyzer somehow behaves differently than
ChineseAnalyzer. When trying to highlight the matched term,
ChineseAnalyzer didn't work somehow. But I didn't investigate into it.

This is a useful clue for it.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_i=
n_3_m
inutes


On 6/18/07, karl wettin <karl.wettin@gmail.com> wrote:
> A year or two ago I hacked Lucene to use UTF16 instead of UTF8 as CJK
> characters are represented by 3 bytes with UTF8, and 2 bytes as
> UTF16. It is a simple hack.
>
> It did however not save me that much as I had a mixed latin and CJK
> corpus, and I reverted. Still think it is something worth
> considering. Perhaps it might be worth implementing per index, per
> document or per field string encoding strategy.
>
>
>
>
> 18 jun 2007 kl. 20.01 skrev Chris Lu:
>
> > Basically where ever you see, the encoding should be utf8.
> >
> > The servlet also has an encoding setting. For your case, change the
> > tomcat setting.
> > When rendering jsp page, the encoding also matters.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> > http://wiki.dbsight.com/index.php?
> > title=3DCreate_Lucene_Database_Search_in_3_minutes
> >
> > On 6/18/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
> >>
> >> Hi,
> >>
> >> For indexing, there is no problem, there is Chinese text similar
> >> to my
> >> datasource (XML) in the index file when opening on a note pad.
> >>
> >> When I try to use the utf8 in jsp and, getbytes array of 'utf-8' or
> >> ISO88599_1 or Cp1252 in Java servlet, but we getting search
> >> problem, the
> >> search result does not display for Chinese term.
> >>
> >> I mixed English and Chinese text in my datasource, the search is
> >> working for
> >> English term, and Chinese char display as '???' in the result =
output.
> >>
> >> Please advice or send some sample / solutions
> >>
> >> Thanks.
> >>
> >> -----Original Message-----
> >> From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]
> >> Sent: Monday, June 18, 2007 8:58 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Lucene for chinese search
> >>
> >> Lee Li Bin a =E9crit :
> >> > Hi,
> >> >
> >> > I still met problem for searching of Chinese words.
> >> > XMl file which is the datasource and analyzer has already been
> >> encoded.
> >> > Have testing on StandardAnalyzer, CJKAnalyzer, and
> >> ChineseAnalyzer, but it
> >> > still can't get any results.
> >> >
> >> > 1.    do we need any encoding configuration in apache tomcat for
> >> Chinese
> >> > search using Lucence
> >> >
> >> > 2.    do we need to use JSP meta / page encoding ? what is the
> >> encoding
> >> > for   jsp?
> >> >
> >> try first with simple junit test, after you can fight with UTF8
> >> parameters.
> >>
> >> M.
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 12:59:45 2007
Return-Path: <java-user-return-28740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58516 invoked from network); 19 Jun 2007 12:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 12:59:45 -0000
Received: (qmail 78574 invoked by uid 500); 19 Jun 2007 12:59:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78360 invoked by uid 500); 19 Jun 2007 12:59:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78342 invoked by uid 99); 19 Jun 2007 12:59:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 05:59:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 05:59:33 -0700
Content-class: urn:content-classes:message
Subject: MultiSearcher holds on to index - optimization not one segment
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 19 Jun 2007 08:59:12 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5607F5A6@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiSearcher holds on to index - optimization not one segment
Thread-Index: AceyQowbuBiPICVHRU2rzoZ5f8bFMwALbm1A
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


We're using a MultiSearcher to search against multiple lucene indexes
which runs inside of a web application in jboss 4.0.4.

We're also using a standalone app running in a different jboss server
which gets periodic updates from an oracle database and updates the
lucene index.

Both the searcher and indexer are running against the same index. We
need to have real time updates to the index that are searchable.

The problem I'm having is once the MultiSearcher is open, it holds on to
the index file (Trying to encourage garbage collection in java, but only
goes so far).=20

So it looks like when an optimization is performed, it won't actually
consolidate the index into one segment because there's a reader out
there still holding on to the index.

This may not be lucene related, may be java or jboss, but I figure
others have probably encountered this type of thing before. Any ideas
are appreciated.

Brian Beard



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 13:06:24 2007
Return-Path: <java-user-return-28741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61564 invoked from network); 19 Jun 2007 13:06:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 13:06:22 -0000
Received: (qmail 6519 invoked by uid 500); 19 Jun 2007 13:06:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6397 invoked by uid 500); 19 Jun 2007 13:06:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6386 invoked by uid 99); 19 Jun 2007 13:06:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 06:06:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 06:06:14 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1462808nzc
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 06:05:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=AQ6GBmfYu8/XpkC5sVTUrva1usLw3YPhr6St0TCa68pA2eHp9L/BPKZ35kmLsFJj4c6I6t2qgzYt4txkldpsHXI1yimYCBO6i5BXsjbChXDy0m1Dhxsk2LCNK79qq9TbWZInlt8uiFyMtWsTnvMhMmFqS87Ut8ZVGUbVZ3MQWLA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Q9hio1aSpgHhJ9b6ZLTidRlqoxm6pyIHh506QeKHChZNjA4pk3le7BM5smdNL3gloR6nUVfD4XO1Tjn97jICBSc7yxdQjoNUm8lH8s48sq0NpXgI/KjYE+jslhI8z+Zlwh/HX3KIMySiDuX3NUplljnONXLysisf6QE3b2/tCBc=
Received: by 10.143.38.6 with SMTP id q6mr361436wfj.1182258353439;
        Tue, 19 Jun 2007 06:05:53 -0700 (PDT)
Received: by 10.142.113.13 with HTTP; Tue, 19 Jun 2007 06:05:53 -0700 (PDT)
Message-ID: <c68e39170706190605i5ae55716jc04728b47b33bab5@mail.gmail.com>
Date: Tue, 19 Jun 2007 09:05:53 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher holds on to index - optimization not one segment
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA5607F5A6@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <CC2671C08F06704ABFD37ED1EA09AA5607F5A6@birexchange.BIRPLAZA.local>
X-Google-Sender-Auth: 9aebcecaa18391f0
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/19/07, Beard, Brian <Brian.Beard@mybir.com> wrote:
> The problem I'm having is once the MultiSearcher is open, it holds on to
> the index file

An IndexReader holds open the files... this is a feature.  Not holding
the file open would mean that the index would actively change while
being searched.  Lucene is designed to search on a static index (but
one that can be updated in the background with no impact to the
current open readers).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 13:29:33 2007
Return-Path: <java-user-return-28742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78600 invoked from network); 19 Jun 2007 13:29:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 13:29:32 -0000
Received: (qmail 91551 invoked by uid 500); 19 Jun 2007 13:29:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91520 invoked by uid 500); 19 Jun 2007 13:29:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91504 invoked by uid 99); 19 Jun 2007 13:29:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 06:29:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 06:29:16 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I0dlQ-0004jo-2q
	for java-user@lucene.apache.org; Tue, 19 Jun 2007 06:28:56 -0700
Message-ID: <11194791.post@talk.nabble.com>
Date: Tue, 19 Jun 2007 06:28:56 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Writing a document using two different Analyzers
In-Reply-To: <6026e8b0705250055p145dcd35t4cbc9469d6688111@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: sebasmtech@gmail.com
References: <6026e8b0705250032h5bde3d71w6d48d2f6f39f9bbb@mail.gmail.com> <8EEADDC8-1B43-4A09-A36F-E505CC6675ED@gmail.com> <6026e8b0705250055p145dcd35t4cbc9469d6688111@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


could you briefly tell me how to write two analyzers for the two field

Paulo Silveira-3 wrote:
>=20
> On 5/25/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>> PerFieldAnalyzerWrapper
>>
>=20
> that was fast! thanks!
>=20
>=20
>> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/
>> org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html
>>
>> --
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20
> --=20
> Paulo E. A. Silveira
> Caelum Ensino e Solu=C3=A7=C3=B5es em Java
> http://www.caelum.com.br/
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Writing-a-document-usin=
g-two-different-Analyzers-tf3814647.html#a11194791
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 13:50:05 2007
Return-Path: <java-user-return-28743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86653 invoked from network); 19 Jun 2007 13:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 13:50:04 -0000
Received: (qmail 62063 invoked by uid 500); 19 Jun 2007 13:49:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62018 invoked by uid 500); 19 Jun 2007 13:49:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62007 invoked by uid 99); 19 Jun 2007 13:49:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 06:49:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 06:49:54 -0700
Content-class: urn:content-classes:message
Subject: RE: MultiSearcher holds on to index - optimization not one segment
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 19 Jun 2007 09:49:33 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5607F5CE@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiSearcher holds on to index - optimization not one segment
Thread-Index: AceycqGcus2oGuklSgmTbYoxdBAnMAABV6Iw
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

This may seem like a na=EFve question - since the garbage collection is =
not enforcable, is it possible to send a flag to the IndexReader to give =
this up once the reader is no longer needed?

-----Original Message-----
From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik =
Seeley
Sent: Tuesday, June 19, 2007 9:06 AM
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher holds on to index - optimization not one =
segment

On 6/19/07, Beard, Brian <Brian.Beard@mybir.com> wrote:
> The problem I'm having is once the MultiSearcher is open, it holds on =
to
> the index file

An IndexReader holds open the files... this is a feature.  Not holding
the file open would mean that the index would actively change while
being searched.  Lucene is designed to search on a static index (but
one that can be updated in the background with no impact to the
current open readers).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 13:57:19 2007
Return-Path: <java-user-return-28744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89421 invoked from network); 19 Jun 2007 13:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 13:57:17 -0000
Received: (qmail 76218 invoked by uid 500); 19 Jun 2007 13:57:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75979 invoked by uid 500); 19 Jun 2007 13:57:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75967 invoked by uid 99); 19 Jun 2007 13:57:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 06:57:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 06:57:09 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1476654nzc
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 06:56:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Mq3VHQDg2vOJzEKFtbHhidG2TK4Fw4OYME87FK4cAa5Wh8CTOdOvOFyhDI4nxbfvyYuFtuyyTsciCUN8vVW83pdIJHjPrRxXx1tF33FTZwOeXAU/+5wrXhtEFpfmpKKx/zs96pfaMu+An5a2zYe396tar4W2dj8/DvXCWW+ORiw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=dJ4Nscxul0NktRk26xhESbXFZZ+28LFihZ3IgoCOFPd312ldvkblc5TwgdY2OnRquSIs/GQWwjB5BDiuY1n15MmHGliZZ+03O9WPuWR9DPHpb1/mDIalocvNktJ1beh8kozvNUS37ooc+hC9Faa/BARUzwuOOP3rhyC62amuhx8=
Received: by 10.143.10.15 with SMTP id n15mr359981wfi.1182261408710;
        Tue, 19 Jun 2007 06:56:48 -0700 (PDT)
Received: by 10.142.113.13 with HTTP; Tue, 19 Jun 2007 06:56:48 -0700 (PDT)
Message-ID: <c68e39170706190656r42b69fedy11f84b0083e4a079@mail.gmail.com>
Date: Tue, 19 Jun 2007 09:56:48 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher holds on to index - optimization not one segment
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA5607F5CE@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <CC2671C08F06704ABFD37ED1EA09AA5607F5CE@birexchange.BIRPLAZA.local>
X-Google-Sender-Auth: bae57f713d783961
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/19/07, Beard, Brian <Brian.Beard@mybir.com> wrote:
> This may seem like a na=EFve question - since the garbage collection is n=
ot enforcable, is it possible to send a flag to the IndexReader to give thi=
s up once the reader is no longer needed?

You call close() on the IndexReader (or the IndexSearcher that owns
it) when you no longer need it, and that will release resources such
as open files.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:00:36 2007
Return-Path: <java-user-return-28745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91323 invoked from network); 19 Jun 2007 14:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:00:35 -0000
Received: (qmail 84466 invoked by uid 500); 19 Jun 2007 14:00:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84423 invoked by uid 500); 19 Jun 2007 14:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84411 invoked by uid 99); 19 Jun 2007 14:00:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:00:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:00:26 -0700
Received: by mu-out-0910.google.com with SMTP id g7so2171663muf
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 07:00:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=syn3AesqJFhofJKhSpp0Tz4YGuVFQqvD96RypiK51HROetsvf9/BWUetx7QxEGJWz+n7JfP1x5PjSphP0QiV0Wz8+Cehm4zyYoyTP8oJNiMzj38b20MXkvmsbtKMQhI3QhF0k0aBumtiviCpYZodaG+TirNqAK3eGb1VOSd/gu0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PyYZ2KMIAFHzxkybdBeHWH0wjrERvNYmLRYgaR6kBUM7HTW4RqElkh98A0mTZGwIQjuXwLN/GP484bPQaOShKpfwv7RDVNAnhUeFoYB63LFtUXBEpBzqe0/8eGj9vs1uQt3r1coHDSd7NcyLBd35rA47vAIIan+UFO6ZU6r+JHU=
Received: by 10.82.146.14 with SMTP id t14mr13721815bud.1182261602478;
        Tue, 19 Jun 2007 07:00:02 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 19 Jun 2007 07:00:02 -0700 (PDT)
Message-ID: <359a92830706190700y306efc0ch7374ca2b8eaea463@mail.gmail.com>
Date: Tue, 19 Jun 2007 10:00:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to search the fields in SimpleAnalyzer
In-Reply-To: <11189642.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66744_18637776.1182261602459"
References: <11189642.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66744_18637776.1182261602459
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I recommend you get a copy of Luke (google Lucene, luke) and
examine your index. Luke will also allow you to see how various queries
parse. Since you haven't shown how you parse your query,
anything anyone says would be a guess.

But at a guess, you may be having troubles with capitalization
in your query.

Also, query.toString() will show you what the actual Lucene
query looks like.

Best
Erick

On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>
>
> Hi All,
>       i index my document using SimpleAnalyzer() when i search the Indexed
> field in the searcher class it doesnt give me the results.help me to sort
> out this issue.
>
> My Code:
>
> test="9840836598"
> test1="bch01"
>
> testRecords=(test+" "+test1);
>
> document.add("testRecords",testRecords,Field.Store.NO,
> Field.Index.Tokenized)
>
> indexwriter.addDcument(document,new SimpleAnalyzer());
>
> please help me
>
> Thanks in advance
>
>
> --
> View this message in context:
> http://www.nabble.com/how-to-search-the-fields-in-SimpleAnalyzer-tf3944677.html#a11189642
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_66744_18637776.1182261602459--

From java-user-return-28746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:03:27 2007
Return-Path: <java-user-return-28746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91979 invoked from network); 19 Jun 2007 14:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:03:26 -0000
Received: (qmail 89478 invoked by uid 500); 19 Jun 2007 14:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89318 invoked by uid 500); 19 Jun 2007 14:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89307 invoked by uid 99); 19 Jun 2007 14:03:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:03:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:03:18 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I0eIL-0005uR-L3
	for java-user@lucene.apache.org; Tue, 19 Jun 2007 07:02:57 -0700
Message-ID: <11195406.post@talk.nabble.com>
Date: Tue, 19 Jun 2007 07:02:57 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: ways to minimize index size?
In-Reply-To: <cfc620660703140633x75af8fd5q929eb1b2fc7b1a4e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com> <cfc620660703140633x75af8fd5q929eb1b2fc7b1a4e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Does anyone give me an idea to reduce the Index size to down.now i am 
getting 42% compression in my index store.i want to reduce upto 70%.i use
standardanalyzer to write the document.when i use SimpleAnalyzer it reduce
upto 58% but i couldnt search the document.please help me to acheive.

 Thanks in advance

Jeff-188 wrote:
> 
>>I found that reducing my index from 8G to 4G (through not stemming) gave
me
> about a 10% performance improvement.
> 
> How did you do this? I don't see this as an option.
> 
> Jeff
> 
> 

-- 
View this message in context: http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11195406
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:03:38 2007
Return-Path: <java-user-return-28747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92100 invoked from network); 19 Jun 2007 14:03:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:03:37 -0000
Received: (qmail 90912 invoked by uid 500); 19 Jun 2007 14:03:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90875 invoked by uid 500); 19 Jun 2007 14:03:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90860 invoked by uid 99); 19 Jun 2007 14:03:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:03:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:03:28 -0700
Received: by ug-out-1314.google.com with SMTP id m2so113577uge
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 07:03:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dYA4OCCmWDD8SKCQFE0GyDa9bG2UjRXTQOqz5px0PG9OKw0khQ3l46ZI2vDev6qFMlgQRqOFkZoRYiboFbCjJCt4aFoFZ87+ZCVuSIw7LvrMSor6Uf7Us6JYq3yalgpPUan9R3GrHDvr17ek4UAeOCdmoBgflzDqP89CyLJ2VHc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uO0Ow74+ax6tIhpDjsmDPP0CeXGN+DZrm5YNYnaXUVr8sVvGUb820IENel/OQtUuKXwmF+s7x/kdT1l9vbxk1iwEqemqlcZeGooh0QJToRDdtmLz0F9gz1nIkH/IvUc/HTXawsL2CE8Ymlmq0aR+VaZRcWGJekFQOqkc6iAC89E=
Received: by 10.82.174.20 with SMTP id w20mr13705378bue.1182261786153;
        Tue, 19 Jun 2007 07:03:06 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 19 Jun 2007 07:03:06 -0700 (PDT)
Message-ID: <359a92830706190703s389333dcwc52fed9f6ac26571@mail.gmail.com>
Date: Tue, 19 Jun 2007 10:03:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.
In-Reply-To: <005501c7b218$78f17dc0$6ad47940$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66836_6606634.1182261786118"
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>
	 <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>
	 <002901c7b182$da91edd0$8fb5c970$@com>
	 <6e3ae6310706181118m18f59255o3d05026663dbe197@mail.gmail.com>
	 <005501c7b218$78f17dc0$6ad47940$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66836_6606634.1182261786118
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You still haven't described how often you need to index and why.
That's critical. If you have an index that only needs to be updated
every month, many of your concerns disappear. If it needs to be
updated every 5 seconds, it's another matter entirely.

So which is it?

Best
Erick

On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
>
> Thanks for the sharing and suggestion.
> Yes Chris, the index is to be partitioned by date time, and old index will
> not be access so frequent.
>
> I also did consider indexing in parallel to different index as well Erick.
> But I can only put all index in ONE machine and there is only ONE machine
> to
> process the job (both searching and indexing).
>
> I haven't try out the addIndexes to combine indexes but I did tried out
> MultiSearcher for 3 millions of documents in 3 separate indexes and it
> does
> not have much different compare to a search in 1 index. Could you mind to
> share your experience in addIndexes, how is the performance for that ? In
> my
> situation,  the indexes may be use for searching at the same time. Another
> worry for indexing is optimization process, I have tried it out and it
> take
> quite some time to optimize my index, e.g indexing for 5000 is about
> 10seconds (MergeFactor = 1000, and recreate IndexWriter every 5000
> documents), but to optimize, it will take around ONE minute. So do you
> guys
> have any suggestion on optimization process as well ? when should I run
> the
> optimization process ? and is it a lot of different with searching in a
> optimized index compare to a un-optimize ?
>
> ------
> eChuang, Chew
>
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Tuesday, June 19, 2007 2:19 AM
> To: java-user@lucene.apache.org
> Subject: Re: FW: Lucene indexing vs RDBMS insertion.
>
> Definitely very aggressive.
>
> Currently my experience is that, together with database access,
> DBSight can do 3 million in 2 hours, with Pentium D 3.4Hz. Seems you
> definitely need some good hardware, and a fast hard drive for this. I
> feel the hard drive is actually the bottleneck for large indexes.
> Partitioning your data and pruning the old data should be also
> considered.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
> inutes
>
>
> On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > Thanks for your suggestion Erick. I'm planning to test the indexing
> soon.
> > For your information, currently the system is inserting into RDBMS which
> is
> > around 1000 records per seconds. Thus, if lucene in place, I would
> expect
> it
> > will index that much of documents per seconds as well (Our target is 3.6
> > millions of document to be indexed in 1 hour). Beside of that, I'm
> planning
> > to queue the record so lucene will have enough time to index it. Anyway,
> > thanks for your suggestion and will come back to you once I tested the
> > solution.
> >
> > Thanks,
> > eChuang, Chew
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Friday, June 15, 2007 11:11 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: FW: Lucene indexing vs RDBMS insertion.
> >
> > From my perspective, this is an irrelevant question. The real question
> > is "is Lucene indexing fast enough for my application?". Which nobody
> > can answer for you, you have to experiment.
> >
> > If you're building an index that's only updated every 6 months,
> > Lucene is certainly "fast enough". If you're recreating the
> > index every 6 seconds, it's a different question.
> >
> > So, I recommend that you create a test application that does
> > nothing except read your source, do whatever parsing you
> > need to do and does NOT index it at all. Record the time it
> > takes.
> >
> > Then try the same thing WITH indexing and record the difference.
> >
> > Then, to get a sense of the dimension of the problem, try
> > substituting inserting into the RDBMS instead of the Lucene
> > index.
> >
> > Once you have numbers, you can make better decisions
> > And people can give you better advice,  especially if you
> > include more detail of your design.
> >
> > Best
> > Erick
> >
> > On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > >
> > > Hi, I'm  a new user to Lucene, and heard that it is a powerful tool
> for
> > > full
> > > text search and I'm planning to use it in my project for data storage
> > > purpose. Before the implementation, I could like to know whether there
> is
> > > performance issue on Lucene indexing process. I have no doubt on the
> > > retrieving and searching feature in Lucene but the indexing process. I
> > > have
> > > tested my current system to insert 1000 records in RDBMS storage it
> took
> > > about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> > > indexing process perform faster than RDBMS ? I have go through some of
> the
> > > article talking about the "MergeFactor" and "MaxMergeDocs" parameter
> for
> > > fine tune the indexing process, but no comparison between Lucene
> indexing
> > > process and RDBMS insertion. Thus, hope someone who have experience in
> > > Lucene can provide this information or some article that discuss
> between
> > > Lucene and RDBMS.
> > >
> > >
> > >
> > > I really appreciate any help in this. Thanks
> > >
> > >
> > > No virus found in this outgoing message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date:
> 6/14/2007
> > > 12:44 PM
> > >
> > >
> >
> > No virus found in this incoming message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> > 8:23 AM
> >
> >
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> > 8:23 AM
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> 8:23 AM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: 6/18/2007
> 3:02 PM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_66836_6606634.1182261786118--

From java-user-return-28748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:06:37 2007
Return-Path: <java-user-return-28748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93433 invoked from network); 19 Jun 2007 14:06:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:06:36 -0000
Received: (qmail 6248 invoked by uid 500); 19 Jun 2007 14:06:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6212 invoked by uid 500); 19 Jun 2007 14:06:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6201 invoked by uid 99); 19 Jun 2007 14:06:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:06:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:06:27 -0700
Received: by nf-out-0910.google.com with SMTP id d3so63932nfc
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 07:06:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ChEhk68dLhzJnRzqLfrw/DkFL5YqiWPmhndawwqZINUaMVxxUoPax5XeYD+0fbQtXSIh5GunUUy6lHsvsJ3rjRpg6Bl5/ryvGSNrbmTzmlPHxH+nW5O1adK47ASTlcJs/2i6HKgS0CPOOUMoVhHqbmQl49ThMVb01D+pzx7onII=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CpU+hvr4O9HC3xerEW27oFLPDVo8aJb7yFS9d269ghS3NPLap8/A6pXC44DmESAdinwxhCuN26R8YXDHBde7udQyaO/6xOVdjyr7u6i+8ig+YTd3gQcIdMRkcCV3XJkOLLvB/9bYq0LSB3TDvalJIH1uZfYQ04RLHLXZ+A2pVng=
Received: by 10.82.156.12 with SMTP id d12mr13710722bue.1182261965740;
        Tue, 19 Jun 2007 07:06:05 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 19 Jun 2007 07:06:05 -0700 (PDT)
Message-ID: <359a92830706190706r5cb0a74ch7655bf0769838f58@mail.gmail.com>
Date: Tue, 19 Jun 2007 10:06:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Writing a document using two different Analyzers
In-Reply-To: <11194791.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66900_26264631.1182261965708"
References: <6026e8b0705250032h5bde3d71w6d48d2f6f39f9bbb@mail.gmail.com>
	 <8EEADDC8-1B43-4A09-A36F-E505CC6675ED@gmail.com>
	 <6026e8b0705250055p145dcd35t4cbc9469d6688111@mail.gmail.com>
	 <11194791.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66900_26264631.1182261965708
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Assuming you've got two analyzers <G>...just see the javadoc for
PerFieldAnalyzerWrapper. It's pretty easy once you have the
magic class name.......


Best
Erick

On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>
>
> could you briefly tell me how to write two analyzers for the two field
>
> Paulo Silveira-3 wrote:
> >
> > On 5/25/07, karl wettin <karl.wettin@gmail.com> wrote:
> >>
> >> PerFieldAnalyzerWrapper
> >>
> >
> > that was fast! thanks!
> >
> >
> >> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/
> >> org/apache/lucene/analysis/PerFieldAnalyzerWrapper.html
> >>
> >> --
> >> karl
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Paulo E. A. Silveira
> > Caelum Ensino e Solu=E7=F5es em Java
> > http://www.caelum.com.br/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Writing-a-document-using-two-different-Analyzers-tf=
3814647.html#a11194791
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_66900_26264631.1182261965708--

From java-user-return-28749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:09:51 2007
Return-Path: <java-user-return-28749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94586 invoked from network); 19 Jun 2007 14:09:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:09:51 -0000
Received: (qmail 12992 invoked by uid 500); 19 Jun 2007 14:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12820 invoked by uid 500); 19 Jun 2007 14:09:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12809 invoked by uid 99); 19 Jun 2007 14:09:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:09:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:09:42 -0700
Received: by ug-out-1314.google.com with SMTP id m2so115151uge
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 07:09:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=c6fKkw0fIojsbgLlhY9q3ES7OBtKQj0EUb1E7P9G4bG6SQYOY/+IkEwtgfusbcSCJtK/yCP7fi2DTHaHmusMyqJj7H32xryPi9/1UswGQ0x/qMI2sgdhB65l9a8uvhZo+L3+8KqzVDkOvnLYVVhbhjINP9SQ10JDenm75hHplK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Qib4PtDm68FH+6VfCBp2d/ZLX+2n+GXKJrL952tJmTQOUFC6XrEEui3MvSVw1pov0G/YyOLX67Tf2f9ExCXO5SMIJU99WTyKNZHE31vkpac5hUP6ZK/KdLDvRHkiTHDJ34tlgGXO0HzyfkaGyu+ba10pRFefYxwzDikoAkZRMtM=
Received: by 10.82.127.14 with SMTP id z14mr13705812buc.1182262161042;
        Tue, 19 Jun 2007 07:09:21 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 19 Jun 2007 07:09:21 -0700 (PDT)
Message-ID: <359a92830706190709l1e9dd54au254075bba125146e@mail.gmail.com>
Date: Tue, 19 Jun 2007 10:09:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ways to minimize index size?
In-Reply-To: <11195406.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66968_18838115.1182262161017"
References: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com>
	 <cfc620660703140633x75af8fd5q929eb1b2fc7b1a4e@mail.gmail.com>
	 <11195406.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66968_18838115.1182262161017
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Show us the code you use to index. Are you storing the fields?
omitting norms? Throwing out stop words?

Best
Erick

On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>
>
> Hi Does anyone give me an idea to reduce the Index size to down.now i am
> getting 42% compression in my index store.i want to reduce upto 70%.i use
> standardanalyzer to write the document.when i use SimpleAnalyzer it reduce
> upto 58% but i couldnt search the document.please help me to acheive.
>
> Thanks in advance
>
> Jeff-188 wrote:
> >
> >>I found that reducing my index from 8G to 4G (through not stemming) gave
> me
> > about a 10% performance improvement.
> >
> > How did you do this? I don't see this as an option.
> >
> > Jeff
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11195406
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_66968_18838115.1182262161017--

From java-user-return-28750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:10:23 2007
Return-Path: <java-user-return-28750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94827 invoked from network); 19 Jun 2007 14:10:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:10:22 -0000
Received: (qmail 15111 invoked by uid 500); 19 Jun 2007 14:10:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15084 invoked by uid 500); 19 Jun 2007 14:10:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15073 invoked by uid 99); 19 Jun 2007 14:10:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:10:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:10:11 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I0eP1-00065X-D9
	for java-user@lucene.apache.org; Tue, 19 Jun 2007 07:09:51 -0700
Message-ID: <11195565.post@talk.nabble.com>
Date: Tue, 19 Jun 2007 07:09:51 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to search the fields in SimpleAnalyzer
In-Reply-To: <359a92830706190700y306efc0ch7374ca2b8eaea463@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <11189642.post@talk.nabble.com> <359a92830706190700y306efc0ch7374ca2b8eaea463@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick, 

            thanks for your reply.here is the searcher class to search the
document

        Directory fsDir = FSDirectory.getDirectory(indexDir, false);
        IndexSearcher is = new IndexSearcher(fsDir);

QueryParser parser=new QueryParser("testRecords",new SimpleAnalyzer());
    Query query = parser.parse(queryString);

Hits hits =is.search(query);
    

Erick Erickson wrote:
> 
> I recommend you get a copy of Luke (google Lucene, luke) and
> examine your index. Luke will also allow you to see how various queries
> parse. Since you haven't shown how you parse your query,
> anything anyone says would be a guess.
> 
> But at a guess, you may be having troubles with capitalization
> in your query.
> 
> Also, query.toString() will show you what the actual Lucene
> query looks like.
> 
> Best
> Erick
> 
> On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>>
>>
>> Hi All,
>>       i index my document using SimpleAnalyzer() when i search the
>> Indexed
>> field in the searcher class it doesnt give me the results.help me to sort
>> out this issue.
>>
>> My Code:
>>
>> test="9840836598"
>> test1="bch01"
>>
>> testRecords=(test+" "+test1);
>>
>> document.add("testRecords",testRecords,Field.Store.NO,
>> Field.Index.Tokenized)
>>
>> indexwriter.addDcument(document,new SimpleAnalyzer());
>>
>> please help me
>>
>> Thanks in advance
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/how-to-search-the-fields-in-SimpleAnalyzer-tf3944677.html#a11189642
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-search-the-fields-in-SimpleAnalyzer-tf3944677.html#a11195565
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:17:26 2007
Return-Path: <java-user-return-28751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97530 invoked from network); 19 Jun 2007 14:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:17:26 -0000
Received: (qmail 28580 invoked by uid 500); 19 Jun 2007 14:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28541 invoked by uid 500); 19 Jun 2007 14:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28526 invoked by uid 99); 19 Jun 2007 14:17:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:17:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:17:17 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l5JEGXn8009231
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 10:16:56 -0400
Message-ID: <4677E4E4.4040306@syr.edu>
Date: Tue, 19 Jun 2007 10:15:00 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: how to search the fields in SimpleAnalyzer
References: <11189642.post@talk.nabble.com>
In-Reply-To: <11189642.post@talk.nabble.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sebastin,

Sebastin wrote:
>       i index my document using SimpleAnalyzer() when i search the Indexed
> field in the searcher class it doesnt give me the results.help me to sort
> out this issue.
> 
> My Code:
> 
> test="9840836598"
> test1="bch01"
> 
> testRecords=(test+" "+test1);
> 
> document.add("testRecords",testRecords,Field.Store.NO,Field.Index.Tokenized)
> 
> indexwriter.addDcument(document,new SimpleAnalyzer());

SimpleAnalyzer "filters LetterTokenizer with LowerCaseFilter"[1].

LetterTokenizer "divides text at non-letters .... [T]okens [are] maximal
strings of adjacent letters"[2].

This means that your index has "bch" as the single token for the
document you added.

Luke[3] is an excellent tool for browsing Lucene indexes (among other
capabilities) - you can use it to help you figure out exactly the issues
you're facing - i.e., how do analyzed documents and queries look.


Steve

[1]
http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/analysis/SimpleAnalyzer.html
[2]
http://lucene.apache.org/java/2_1_0/api/org/apache/lucene/analysis/LetterTokenizer.html
[3] http://getopt.org/luke/

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:26:20 2007
Return-Path: <java-user-return-28752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99420 invoked from network); 19 Jun 2007 14:26:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:26:19 -0000
Received: (qmail 41629 invoked by uid 500); 19 Jun 2007 14:26:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41591 invoked by uid 500); 19 Jun 2007 14:26:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41580 invoked by uid 99); 19 Jun 2007 14:26:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:26:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:26:10 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I0eeU-0006XV-E4
	for java-user@lucene.apache.org; Tue, 19 Jun 2007 07:25:50 -0700
Message-ID: <11195897.post@talk.nabble.com>
Date: Tue, 19 Jun 2007 07:25:50 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ways to minimize index size?
In-Reply-To: <359a92830706190709l1e9dd54au254075bba125146e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com> <cfc620660703140633x75af8fd5q929eb1b2fc7b1a4e@mail.gmail.com> <11195406.post@talk.nabble.com> <359a92830706190709l1e9dd54au254075bba125146e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


                       
String outgoingNumber="9198408365809";
String incomingNumber="9840861114";
String datesc="070601";
String imsiNumber="444021365987";
String callType="1";

//Search Fields
 String contents=(outgoingNumber+" "+incomingNumber+" "+dateSc+"
"+imsiNumber+" "+callType );

//Display Fields
                     
                          String records=(callingPartyNumber+"
"+calledPartyNumber+" "+dateSc+" "+chargDur+" "+incomingRoute+"
"+outgoingRoute+" "+timeSc);
                          
                     
                       IndexWriter indexWriter = new
IndexWriter(indexDir,new StandardAnalyzer(),true);  
                        
                          Document document = new Document();
  
                             document.add(new
Field("contents",contents,Field.Store.NO,Field.Index.TOKENIZED));
                             
                     
                     
                document.add(new
Field("records",records,Field.Store.YES,Field.Index.NO));
                             
                           
                             indexWriter.setUseCompoundFile(true);
                             indexWriter.addDocument(document);
                          }

please help me to acheive the minimum size





Erick Erickson wrote:
> 
> Show us the code you use to index. Are you storing the fields?
> omitting norms? Throwing out stop words?
> 
> Best
> Erick
> 
> On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>>
>>
>> Hi Does anyone give me an idea to reduce the Index size to down.now i am
>> getting 42% compression in my index store.i want to reduce upto 70%.i use
>> standardanalyzer to write the document.when i use SimpleAnalyzer it
>> reduce
>> upto 58% but i couldnt search the document.please help me to acheive.
>>
>> Thanks in advance
>>
>> Jeff-188 wrote:
>> >
>> >>I found that reducing my index from 8G to 4G (through not stemming)
>> gave
>> me
>> > about a 10% performance improvement.
>> >
>> > How did you do this? I don't see this as an option.
>> >
>> > Jeff
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11195406
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11195897
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 14:52:25 2007
Return-Path: <java-user-return-28753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6328 invoked from network); 19 Jun 2007 14:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 14:52:23 -0000
Received: (qmail 88589 invoked by uid 500); 19 Jun 2007 14:52:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88511 invoked by uid 500); 19 Jun 2007 14:52:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88500 invoked by uid 99); 19 Jun 2007 14:52:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:52:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 07:52:14 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l5JEpXQ8009270
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 10:51:52 -0400
Message-ID: <4677ED15.90507@syr.edu>
Date: Tue, 19 Jun 2007 10:49:57 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Position of matches to affect scoring
References: <d22b39d50706190059w79fa88cel35b58f5d9fcafd3e@mail.gmail.com>
In-Reply-To: <d22b39d50706190059w79fa88cel35b58f5d9fcafd3e@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jes,

Jesse Prabawa wrote:
> The Lucene FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
> mentions that the position of the matches in the text does not affect
> scoring. So is there anyway that I can make the position of the
> matches affect scoring? For example, I want matches that occur at the
> beginning to weigh more than those that occur elsewhere in the text.
> I have just started using Lucene so any help/advice is greatly
> appreciated :)

One quick way to get (something like) what you want is to place "the
beginning" in a separate field from the rest of the document contents,
then query both the "beginning" and "remainder" fields with the same
query, boosting (i.e. weighting) the "beginning" field higher than the
"remainder" field.

E.g. (assumes SimpleAnalyzer, and default "OR" QueryParser operator):

  doc1: "This is the inception.  Here is the rest."
        "beginning" field: "this", "is", "the", "inception"
        "remainder" field: "here", "is", "the", "rest"

  doc2: "Something else here.  After the inception."
        "beginning" field: "something", "else", "here"
        "remainder" field: "after", "the", "inception"

query: "What does inception mean?"
-> "beginning:(what does inception mean)^5  remainder:(what does
inception mean)^1"

The transformed query shown above is how it would look in QueryParser
syntax[1] to query both fields with the same query, while boosting the
"beginning" field higher (boost:5) than the "remainder" field (boost:1).

You have to build this transformed query yourself - there is no facility
in Lucene (that I'm aware of) for building multi-field queries with
differently boosted fields.

Both docs will match, but doc1 will score higher than doc2, since
"inception" is in doc1's higher-weighted "beginning" field.


Steve

[1] http://lucene.apache.org/java/docs/queryparsersyntax.html

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 15:07:19 2007
Return-Path: <java-user-return-28754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54179 invoked from network); 19 Jun 2007 15:07:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 15:07:19 -0000
Received: (qmail 36437 invoked by uid 500); 19 Jun 2007 15:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36412 invoked by uid 500); 19 Jun 2007 15:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36401 invoked by uid 99); 19 Jun 2007 15:07:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 08:07:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 08:07:09 -0700
Content-class: urn:content-classes:message
Subject: RE: MultiSearcher holds on to index - optimization not one segment
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 19 Jun 2007 11:06:48 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5607F5F7@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiSearcher holds on to index - optimization not one segment
Thread-Index: Aceyeb42K6tr6PPQTu20MUTUPj/7PgACatHg
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

That works, thanks.

-----Original Message-----
From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik =
Seeley
Sent: Tuesday, June 19, 2007 9:57 AM
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher holds on to index - optimization not one =
segment

On 6/19/07, Beard, Brian <Brian.Beard@mybir.com> wrote:
> This may seem like a na=EFve question - since the garbage collection =
is not enforcable, is it possible to send a flag to the IndexReader to =
give this up once the reader is no longer needed?

You call close() on the IndexReader (or the IndexSearcher that owns
it) when you no longer need it, and that will release resources such
as open files.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 20:29:29 2007
Return-Path: <java-user-return-28755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95076 invoked from network); 19 Jun 2007 20:29:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 20:29:27 -0000
Received: (qmail 13028 invoked by uid 500); 19 Jun 2007 20:29:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12164 invoked by uid 500); 19 Jun 2007 20:29:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12149 invoked by uid 99); 19 Jun 2007 20:29:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 13:29:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 13:29:16 -0700
Received: from [192.168.1.98] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id l5JKjrm25691
	for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 16:45:57 -0400
Message-ID: <46783CF3.1010505@alias-i.com>
Date: Tue, 19 Jun 2007 16:30:43 -0400
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Content Summarization
References: <614447.61186.qm@web52604.mail.re2.yahoo.com>
In-Reply-To: <614447.61186.qm@web52604.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 >> Any one knows of a content summarization library.

> Take a look at LingPipe
> (http://alias-i.com/lingpipe/). 

I'm afraid LingPipe doesn't do content summarization.

Basically, it's an AI-hard problem as you
need fairly deep understanding in order not to
produce word salad.  Here are two relatively
recent tutorials, one from SIGIR and one from
ACL; I can vouch for both authors knowing their
stuff:

      http://www.isi.edu/~marcu/acl-tutorial.ppt

      http://www.summarization.com/sigirtutorial2001.ppt

Drago Radev, who wrote the second tutorial,
is distributing some relevant software these days:

      http://tangra.si.umich.edu/clair/clairlib/

and

      http://www.summarization.com/mead/

I haven't played with either.


The simplest summarization and a hard baseline
to beat is the first n sentences of a news article.

The problem beating that baseline is that newswire
is written to be read this way, with a summary
up front.  In order to summarize individual sentences,
the relevant parts need to be extracted and a new
grammatical sentence formulated.

The state of the art is only so-so at best, and not
what you'd want to give to an audience that cared about
precision or grammar.  Our experience with intelligence
analysts was that they preferred sentence-level snippets,
because those could at least be trusted not to garble
the underlying article.

If you just want a gist of a large bunch of news,
it can be useful.

The most well known research in this area is
coming out of Kathy McKeown's group at Columbia,
not to mention the horde of students she's graduated
over the last ten years, such as Drago Radev, the
author of the second tutorial and software above.

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 22:14:11 2007
Return-Path: <java-user-return-28756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50299 invoked from network); 19 Jun 2007 22:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 22:14:10 -0000
Received: (qmail 1387 invoked by uid 500); 19 Jun 2007 22:14:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1334 invoked by uid 500); 19 Jun 2007 22:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1323 invoked by uid 99); 19 Jun 2007 22:14:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 15:14:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of buschmic@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 15:14:01 -0700
Received: by wx-out-0506.google.com with SMTP id t8so1715580wxc
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 15:13:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=KEoSlxJfDyhMFdfCyfOwAsl2iLEgNRvpQzHDWuwyAoPBQmIkw0tvF2wBysT2RXzZHEV671h4/HxVzDJxaIWRB4uiMhusUkt0NwtetTvqemTZNZBa9LGuXO9qndWfucfyDp65x0yi3o2ZHku+nDl6kM6SLZQq+1HxU8/5LfCNHYY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=VOJVyGrDVFCJQBLBmqhxc28m8U9ZTqOyi9DBwuQCCOQ2s7gpcYuDWLIFe76nGQgOqbzv18pqekS4nGMXv0/U68EPgkFHxpMRSoH38+8T/7KI4UGORw1tm/gwYQdbzolVpnkJVTpFe40XjkfiZ4GgKCJbUG5+tR6f5nqtOYAVfMY=
Received: by 10.90.94.2 with SMTP id r2mr5742687agb.1182291221173;
        Tue, 19 Jun 2007 15:13:41 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.87.75.89])
        by mx.google.com with ESMTP id 14sm11396493wrl.2007.06.19.15.13.40
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 19 Jun 2007 15:13:40 -0700 (PDT)
Message-ID: <467854F9.7050807@gmail.com>
Date: Tue, 19 Jun 2007 15:13:13 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org,  java-dev@lucene.apache.org
Subject: Lucene 2.2.0 release available
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Release 2.2.0 of Lucene is now available!

Many new features, optimizations, and bug fixes have been added since 2.1,
including "point-in-time" searching, payloads, function queries and new 
APIs for pre-analyzed fields.

The detailed change log is at:
http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_2_0/CHANGES.txt

Lucene 2.2 includes index format changes that are not readable
by older versions of Lucene.  Lucene 2.2 can both read and update
older Lucene indexes.  Adding to an index with an older format
will cause it to be converted to the newer format.

Binary and source distributions are available at
http://www.apache.org/dyn/closer.cgi/lucene/java/

Lucene artifacts are also available in the Maven2 repository at
http://repo1.maven.org/maven2/org/apache/lucene/

- Michael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 19 22:40:36 2007
Return-Path: <java-user-return-28757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55904 invoked from network); 19 Jun 2007 22:40:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2007 22:40:34 -0000
Received: (qmail 37404 invoked by uid 500); 19 Jun 2007 22:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37358 invoked by uid 500); 19 Jun 2007 22:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37347 invoked by uid 99); 19 Jun 2007 22:40:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 15:40:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 15:40:28 -0700
Received: by wx-out-0506.google.com with SMTP id t8so1721416wxc
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 15:40:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=kXgRew8WVqPzdqrUmotverezrwmgARFOGoUE6TaetHcfim4uKTWrxL89rBymPcmCMNM31P6gmGRv6tDTVj6IbOrNxNXVdKXZ5rMbFsayLdat6Ezg+E4QyZZaTd28SfVk8zt7pyhmwZo5C43a+2KKZY/CgQXHD+lI4rJlHDgB61g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=jgCS1P7E+10lVBvNgInQTtoqjIJZaNcLJp5Cf+YusmT6EPC+tEP6NDtAiZTpTv723sdH/YP5cHjOgOi1DCOksnG7QScyB4BRWe1ZWrhSHZlTKtG/6bV/EH27KpWcclq84oUnriBZw9VMaDVSUOKIAyxwirE3oLPcTt0aqD5pJQc=
Received: by 10.70.72.11 with SMTP id u11mr12329563wxa.1182292806445;
        Tue, 19 Jun 2007 15:40:06 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id i33sm12224055wxd.2007.06.19.15.40.04
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 19 Jun 2007 15:40:06 -0700 (PDT)
Message-ID: <46785B1F.4030809@gmail.com>
Date: Tue, 19 Jun 2007 18:39:27 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Highlighter that works with phrase and span queries
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have been working on extending the Highlighter with a new Scorer that 
correctly scores phrase and span queries. The highlighter is working 
great for me, but could really use some more banging on.

If you have a need or an interest in a more accurate Highlighter, please 
give it a whirl and let me know how it went. Unlike most of the other 
alternate Lucene Highlighters, this one builds off the original contrib 
Highlighter so as to retain all of its goodness.

http://myhardshadow.com/qsolreleases/lucene-highlighter-2.2.jar

Example Usage

    IndexSearcher searcher = new IndexSearcher(ramDir);
    Query query = QueryParser.parse("Kenne*", FIELD_NAME, analyzer);
    query = query.rewrite(reader); //required to expand search terms
    Hits hits = searcher.search(query);

    for (int i = 0; i < hits.length(); i++)
    {
        String text = hits.doc(i).get(FIELD_NAME);
        CachingTokenFilter tokenStream = new 
CachingTokenFilter(analyzer.tokenStream(
                        FIELD_NAME, new StringReader(text)));
        Highlighter highlighter = new Highlighter(new SpanScorer(query, 
FIELD_NAME, tokenStream));
        tokenStream.reset();
       
        // Get 3 best fragments and seperate with a "..."
        String result = highlighter.getBestFragments(tokenStream, text, 
3, "...");
        System.out.println(result);
    }

If you make a call to any of the getBestFragments() methods more than 
once, you must call reset() on the SpanScorer between each call.

Pass null as the FIELD_NAME to ignore fields.

If you want to Highlight the whole document, use a NullFragmenter.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 01:01:45 2007
Return-Path: <java-user-return-28758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90272 invoked from network); 20 Jun 2007 01:01:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 01:01:41 -0000
Received: (qmail 13188 invoked by uid 500); 20 Jun 2007 01:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13091 invoked by uid 500); 20 Jun 2007 01:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13068 invoked by uid 99); 20 Jun 2007 01:01:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 18:01:34 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 18:01:30 -0700
Received: by wr-out-0506.google.com with SMTP id i4so22911wra
        for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 18:01:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=mX2BJni3ZsfaGBt6DD0KTltscJoDuj3hxAvFu0RaeqQvmKEp9eVCElAarFFB5m/yqoddDohTdna0fwq3kX15yy7JaCJviduLfG1rHbvvHzWQUVwYdifISQquqJ4T0fOqgKw5KNNXiaxLgvKzWhuZZZEpYdUOQMeThc4zS/Pjq2M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ODWq/1ws4WPhAAuRLoFnpSmpkRzeg/vgNRBTGiaAgsXgbMeBhukMAmbwqAdf39XPJZrbOEopkR9EFUO3iWcTOr0uv6oW8FDuEC9TvjeJzK0S1bPFJt1T3Kr9iz6h6bWTN1syyfBHoavtEvC2DliK85vSYBcIVdofXa9H41AgfqM=
Received: by 10.143.161.3 with SMTP id n3mr643wfo.1182301269045;
        Tue, 19 Jun 2007 18:01:09 -0700 (PDT)
Received: by 10.142.113.13 with HTTP; Tue, 19 Jun 2007 18:01:09 -0700 (PDT)
Message-ID: <c68e39170706191801u2dbb7f38j18e8fb4afd1f5cd9@mail.gmail.com>
Date: Tue, 19 Jun 2007 21:01:09 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-dev@lucene.apache.org
Subject: Re: Lucene 2.2.0 release available
Cc: java-user@lucene.apache.org
In-Reply-To: <9F6CC6A1-34B5-4A4A-9997-A503A341CD7E@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <467854F9.7050807@gmail.com>
	 <9F6CC6A1-34B5-4A4A-9997-A503A341CD7E@gmail.com>
X-Google-Sender-Auth: 436dfcfb772875ba
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/19/07, DM Smith <dmsmith555@gmail.com> wrote:
> FYI, The announcement has not made it to the http://
> lucene.apache.org/ page.

I just committed this.  It should be viewable in about an hour.

Note: I had to change the syntax slightly... I'm using forrest-0.8
now, and apparently it doesn't allow <ul> inside <p>

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 03:06:15 2007
Return-Path: <java-user-return-28759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30329 invoked from network); 20 Jun 2007 03:06:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 03:06:14 -0000
Received: (qmail 68005 invoked by uid 500); 20 Jun 2007 03:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67464 invoked by uid 500); 20 Jun 2007 03:06:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67453 invoked by uid 99); 20 Jun 2007 03:06:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 20:06:09 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 20:06:04 -0700
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5K35g4H001212
	for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 23:05:43 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5K35Rtp016005
	for <java-user@lucene.apache.org>; Tue, 19 Jun 2007 23:05:40 -0400 (EDT)
From: Fang_Li@emc.com
Received: from CORPUSMX60B.corp.emc.com ([10.254.64.37]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 19 Jun 2007 23:05:21 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene index performance
Date: Tue, 19 Jun 2007 23:05:21 -0400
Message-ID: <DC061CD2AFA7774FB904EEB43D98CB3AB707D9@CORPUSMX60B.corp.emc.com>
In-Reply-To: <c38ea6f20706171300o205be743j9169fd75b8c2c31b@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene index performance
Thread-Index: AcexGjaY8u7pueWUQx+QhugDQv5F/QBw5aeA
References: <200706170806.l5H86LjM022294@ns21.webhostsg.com> <46751B97.1080301@gmail.com> <c38ea6f20706171300o205be743j9169fd75b8c2c31b@mail.gmail.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jun 2007 03:05:21.0747 (UTC) FILETIME=[D6FD6A30:01C7B2E7]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.19.194533
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andreas,
	I am very interested in the multiple index file index/search.
Can you kindly help me on following questions?
1) Why you use multi index files? How much is the performance gain for
both indexing and searching? Someone reported that there no big
performance difference except the number if indices is huge, like 1000.
2) Are these index files located in a single machine or distributed into
multiple machines?=20
3) How do you distribute the document into several index files?

Thanks a lot,
Li

-----Original Message-----
From: Andreas Guther [mailto:andreas.guther@gmail.com]=20
Sent: Monday, June 18, 2007 4:00 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene index performance

Searching on multiple index files is incredible fast.  We have 10
different
index folders with different sizes.  All folders together have a size of
7
GB.  Results come back usual within less than 50 ms.  Getting results
out of
the index i.e. reading documents is expensive and you will have to spent
time here to get a good performance.  You will need to look into
- Topdocs
- Extracting results in an ordered way, i.e. sort by index and within an
index by document id.  This will help to minimize disk head jumps and
gave
me a tremendous boost.
- Extracting only what you need (using a special read filter I do not
recall
the name right now and I do not have access to my sources at the moment
of
writing this)

Andreas


On 6/17/07, Mark Miller <markrmiller@gmail.com> wrote:
>
>
>
> Lee Li Bin wrote:
> > Hi,
> >
> > I would like to know how's the performance during indexing and
searching
> of
> > results on a large index files would be like.
> >
> Fast.
> > And is it possible to create multiple index files and search across
> multiple
> > index files?
> Yes.
> >  If possible, may I know how could it be done?
> >
> Check out MultiSearcher.
>
>
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/or
g/apache/lucene/search/MultiSearcher.html
> > Thanks a lot.
> >
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 05:24:57 2007
Return-Path: <java-user-return-28760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68518 invoked from network); 20 Jun 2007 05:24:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 05:24:55 -0000
Received: (qmail 4022 invoked by uid 500); 20 Jun 2007 05:24:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3982 invoked by uid 500); 20 Jun 2007 05:24:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3953 invoked by uid 99); 20 Jun 2007 05:24:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 22:24:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jun 2007 22:24:45 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I0sg4-00034c-Vb
	for java-user@lucene.apache.org; Tue, 19 Jun 2007 22:24:24 -0700
Message-ID: <11207318.post@talk.nabble.com>
Date: Tue, 19 Jun 2007 22:24:24 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ways to minimize index size?
In-Reply-To: <11195897.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com> <cfc620660703140633x75af8fd5q929eb1b2fc7b1a4e@mail.gmail.com> <11195406.post@talk.nabble.com> <359a92830706190709l1e9dd54au254075bba125146e@mail.gmail.com> <11195897.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


When i use the standardAnalyzer storage size increases.how can i minimize
index store

Sebastin wrote:
> 
>                        
> String outgoingNumber="9198408365809";
> String incomingNumber="9840861114";
> String datesc="070601";
> String imsiNumber="444021365987";
> String callType="1";
> 
> //Search Fields
>  String contents=(outgoingNumber+" "+incomingNumber+" "+dateSc+"
> "+imsiNumber+" "+callType );
> 
> //Display Fields
>                      
>                           String records=(callingPartyNumber+"
> "+calledPartyNumber+" "+dateSc+" "+chargDur+" "+incomingRoute+"
> "+outgoingRoute+" "+timeSc);
>                           
>                      
>                        IndexWriter indexWriter = new
> IndexWriter(indexDir,new StandardAnalyzer(),true);  
>                         
>                           Document document = new Document();
>   
>                              document.add(new
> Field("contents",contents,Field.Store.NO,Field.Index.TOKENIZED));
>                              
>                      
>                      
>                 document.add(new
> Field("records",records,Field.Store.YES,Field.Index.NO));
>                              
>                            
>                              indexWriter.setUseCompoundFile(true);
>                              indexWriter.addDocument(document);
>                           }
> 
> please help me to acheive the minimum size
> 
> 
> 
> 
> 
> Erick Erickson wrote:
>> 
>> Show us the code you use to index. Are you storing the fields?
>> omitting norms? Throwing out stop words?
>> 
>> Best
>> Erick
>> 
>> On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>>>
>>>
>>> Hi Does anyone give me an idea to reduce the Index size to down.now i am
>>> getting 42% compression in my index store.i want to reduce upto 70%.i
>>> use
>>> standardanalyzer to write the document.when i use SimpleAnalyzer it
>>> reduce
>>> upto 58% but i couldnt search the document.please help me to acheive.
>>>
>>> Thanks in advance
>>>
>>> Jeff-188 wrote:
>>> >
>>> >>I found that reducing my index from 8G to 4G (through not stemming)
>>> gave
>>> me
>>> > about a 10% performance improvement.
>>> >
>>> > How did you do this? I don't see this as an option.
>>> >
>>> > Jeff
>>> >
>>> >
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11195406
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11207318
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 07:18:08 2007
Return-Path: <java-user-return-28761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4540 invoked from network); 20 Jun 2007 07:18:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 07:18:06 -0000
Received: (qmail 81469 invoked by uid 500); 20 Jun 2007 07:17:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81423 invoked by uid 500); 20 Jun 2007 07:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81402 invoked by uid 99); 20 Jun 2007 07:17:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 00:17:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of j.prabawa@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 00:17:46 -0700
Received: by an-out-0708.google.com with SMTP id b20so16775ana
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 00:17:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dO/CxQKFxZGEfSjoD2g8s15l9+BKGOAnHm7QHF0xiIS6wCvCWhDAAUSuJfiDLiSi95eRMvx3WLe+X9xA3o/EUzWblzhdeQATIlBmCDrnlfY8ugOvaMM69TMD1TsBrdqCcTWFEbKM6KnWROv3B4R9oXCW4mEG6RUbeh125GANCOo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jY6Q3Hgncpfcf42XEIa0d6dwz6/lPQ4h9FjK0UB9Da3jSGe1pxBMTvJ5QWJxpuX7GFXsMCzeb4FJcVpbB6ILGNbnlK7NIejUa665FSpcAnCE2EPE6grrmbcyleisURhrxUHv0ZNNAKhIVRkGccgDfZl6Gd3r20yMul73kcnTeoQ=
Received: by 10.100.14.19 with SMTP id 19mr181451ann.1182323842343;
        Wed, 20 Jun 2007 00:17:22 -0700 (PDT)
Received: by 10.100.191.11 with HTTP; Wed, 20 Jun 2007 00:17:22 -0700 (PDT)
Message-ID: <d22b39d50706200017r1d91cfc6ob93f959dd7a51c53@mail.gmail.com>
Date: Wed, 20 Jun 2007 15:17:22 +0800
From: "Jesse Prabawa" <j.prabawa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Position of matches to affect scoring
In-Reply-To: <4677ED15.90507@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89632_27912144.1182323842316"
References: <d22b39d50706190059w79fa88cel35b58f5d9fcafd3e@mail.gmail.com>
	 <4677ED15.90507@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89632_27912144.1182323842316
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Steve,

Thanks for the advice and your detailed explanation. I have another question
though, I understand that Lucene normalizes the scores based on field
length. Is there a way for me to avoid this? Or perhaps have a better
control of how the scores are normalized.

Best regards,

Jes

On 6/19/07, Steven Rowe <sarowe@syr.edu> wrote:
>
> Hi Jes,
>
> Jesse Prabawa wrote:
> > The Lucene FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
> > mentions that the position of the matches in the text does not affect
> > scoring. So is there anyway that I can make the position of the
> > matches affect scoring? For example, I want matches that occur at the
> > beginning to weigh more than those that occur elsewhere in the text.
> > I have just started using Lucene so any help/advice is greatly
> > appreciated :)
>
> One quick way to get (something like) what you want is to place "the
> beginning" in a separate field from the rest of the document contents,
> then query both the "beginning" and "remainder" fields with the same
> query, boosting (i.e. weighting) the "beginning" field higher than the
> "remainder" field.
>
> E.g. (assumes SimpleAnalyzer, and default "OR" QueryParser operator):
>
>   doc1: "This is the inception.  Here is the rest."
>         "beginning" field: "this", "is", "the", "inception"
>         "remainder" field: "here", "is", "the", "rest"
>
>   doc2: "Something else here.  After the inception."
>         "beginning" field: "something", "else", "here"
>         "remainder" field: "after", "the", "inception"
>
> query: "What does inception mean?"
> -> "beginning:(what does inception mean)^5  remainder:(what does
> inception mean)^1"
>
> The transformed query shown above is how it would look in QueryParser
> syntax[1] to query both fields with the same query, while boosting the
> "beginning" field higher (boost:5) than the "remainder" field (boost:1).
>
> You have to build this transformed query yourself - there is no facility
> in Lucene (that I'm aware of) for building multi-field queries with
> differently boosted fields.
>
> Both docs will match, but doc1 will score higher than doc2, since
> "inception" is in doc1's higher-weighted "beginning" field.
>
>
> Steve
>
> [1] http://lucene.apache.org/java/docs/queryparsersyntax.html
>
> --
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_89632_27912144.1182323842316--

From java-user-return-28762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 07:32:51 2007
Return-Path: <java-user-return-28762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17224 invoked from network); 20 Jun 2007 07:32:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 07:32:51 -0000
Received: (qmail 11969 invoked by uid 500); 20 Jun 2007 07:32:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11933 invoked by uid 500); 20 Jun 2007 07:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11895 invoked by uid 99); 20 Jun 2007 07:32:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 00:32:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of j.prabawa@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 00:32:42 -0700
Received: by an-out-0708.google.com with SMTP id b20so17445ana
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 00:32:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=s9CeUfV0ic+XeQxiyBcB5ai+8XpyN0SSmcW29W8jTR9I5pIjwQY9umUAla9DqrftE6h5tRm15gzfG0r2TfMVmEfQNOc9ELvuL2CuC37Rh9RzfH42Hiu1NuwM1xlRzohzOOd8AoyqkP3ILCzRJTVuUAeM5bODMoOkslnj9ESEBcg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pEkKKAAcY7OiWwOb8DHax2lbi7pFlY0CsrJdjSwcFNo8bOXGr9SkypYi2YIZMVmQSCvb85J+gmI/qirbBqDu9EXtt6GjngAjPRIqANimPiIBartlW6lJuUkTyTENfqWekL5KgCg3bgSyaXWj7OWJiTPmI4FdWaU/zBr0Zn0fyHU=
Received: by 10.100.42.7 with SMTP id p7mr177559anp.1182324741192;
        Wed, 20 Jun 2007 00:32:21 -0700 (PDT)
Received: by 10.100.191.11 with HTTP; Wed, 20 Jun 2007 00:32:21 -0700 (PDT)
Message-ID: <d22b39d50706200032j1d911270h79e6f9c9f89640ce@mail.gmail.com>
Date: Wed, 20 Jun 2007 15:32:21 +0800
From: "Jesse Prabawa" <j.prabawa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Position of matches to affect scoring
In-Reply-To: <d22b39d50706200017r1d91cfc6ob93f959dd7a51c53@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89788_3552881.1182324741156"
References: <d22b39d50706190059w79fa88cel35b58f5d9fcafd3e@mail.gmail.com>
	 <4677ED15.90507@syr.edu>
	 <d22b39d50706200017r1d91cfc6ob93f959dd7a51c53@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89788_3552881.1182324741156
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Oh I think I have found some clues at:
[1] http://www.gossamer-threads.com/lists/lucene/java-user/38967#38967
[2]
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/search/package-summary.html#changingSimilarity

Thanks!

Jes

On 6/20/07, Jesse Prabawa <j.prabawa@gmail.com> wrote:
>
> Hi Steve,
>
> Thanks for the advice and your detailed explanation. I have another
> question though, I understand that Lucene normalizes the scores based on
> field length. Is there a way for me to avoid this? Or perhaps have a better
> control of how the scores are normalized.
>
> Best regards,
>
> Jes
>
> On 6/19/07, Steven Rowe <sarowe@syr.edu> wrote:
> >
> > Hi Jes,
> >
> > Jesse Prabawa wrote:
> > > The Lucene FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
> > > mentions that the position of the matches in the text does not affect
> > > scoring. So is there anyway that I can make the position of the
> > > matches affect scoring? For example, I want matches that occur at the
> > > beginning to weigh more than those that occur elsewhere in the text.
> > > I have just started using Lucene so any help/advice is greatly
> > > appreciated :)
> >
> > One quick way to get (something like) what you want is to place "the
> > beginning" in a separate field from the rest of the document contents,
> > then query both the "beginning" and "remainder" fields with the same
> > query, boosting (i.e. weighting) the "beginning" field higher than the
> > "remainder" field.
> >
> > E.g. (assumes SimpleAnalyzer, and default "OR" QueryParser operator):
> >
> >   doc1: "This is the inception.  Here is the rest."
> >         "beginning" field: "this", "is", "the", "inception"
> >         "remainder" field: "here", "is", "the", "rest"
> >
> >   doc2: "Something else here.  After the inception."
> >         "beginning" field: "something", "else", "here"
> >         "remainder" field: "after", "the", "inception"
> >
> > query: "What does inception mean?"
> > -> "beginning:(what does inception mean)^5  remainder:(what does
> > inception mean)^1"
> >
> > The transformed query shown above is how it would look in QueryParser
> > syntax[1] to query both fields with the same query, while boosting the
> > "beginning" field higher (boost:5) than the "remainder" field (boost:1).
> >
> > You have to build this transformed query yourself - there is no facility
> >
> > in Lucene (that I'm aware of) for building multi-field queries with
> > differently boosted fields.
> >
> > Both docs will match, but doc1 will score higher than doc2, since
> > "inception" is in doc1's higher-weighted "beginning" field.
> >
> >
> > Steve
> >
> > [1] http://lucene.apache.org/java/docs/queryparsersyntax.html
> >
> > --
> > Steve Rowe
> > Center for Natural Language Processing
> > http://www.cnlp.org/tech/lucene.asp
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_89788_3552881.1182324741156--

From java-user-return-28763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 08:14:43 2007
Return-Path: <java-user-return-28763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33695 invoked from network); 20 Jun 2007 08:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 08:14:42 -0000
Received: (qmail 78834 invoked by uid 500); 20 Jun 2007 08:14:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78709 invoked by uid 500); 20 Jun 2007 08:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78698 invoked by uid 99); 20 Jun 2007 08:14:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 01:14:37 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FORGED_YAHOO_RCVD,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 01:14:33 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I0vKO-0006rl-TY
	for java-user@lucene.apache.org; Wed, 20 Jun 2007 01:14:12 -0700
Message-ID: <11209047.post@talk.nabble.com>
Date: Wed, 20 Jun 2007 01:14:12 -0700 (PDT)
From: Mahdi Rahimi <mhd_rhm@yahoo.com>
To: java-user@lucene.apache.org
Subject: Understanding QueryParserTokenManager and QueryParser classes
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12339_6574406.1182327252911"
X-Nabble-From: mhd_rhm@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12339_6574406.1182327252911
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hello.

I want to add an operator like (*) to query syntax. Then, I need to know and
understand QueryParserTokenManager and QueryParser classes well.
But I don't know, how can I find documents about these classes and
algorithms of identifying tokens and other things in query string .

Thanks for your help.

-- 
View this message in context: http://www.nabble.com/Understanding-QueryParserTokenManager-and-QueryParser-classes-tf3950889.html#a11209047
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_12339_6574406.1182327252911--


From java-user-return-28764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 08:37:45 2007
Return-Path: <java-user-return-28764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43567 invoked from network); 20 Jun 2007 08:37:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 08:37:43 -0000
Received: (qmail 25134 invoked by uid 500); 20 Jun 2007 08:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25031 invoked by uid 500); 20 Jun 2007 08:37:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25020 invoked by uid 99); 20 Jun 2007 08:37:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 01:37:36 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 01:37:31 -0700
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5K8b9DC002757
	for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 04:37:09 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5K8aR5r005830
	for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 04:37:08 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 20 Jun 2007 04:36:56 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Understanding QueryParserTokenManager and QueryParser classes
Date: Wed, 20 Jun 2007 04:36:06 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE8401760099@CORPUSMX10B.corp.emc.com>
In-Reply-To: <11209047.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Understanding QueryParserTokenManager and QueryParser classes
Thread-Index: AcezExKwP9FACVhYSOuRMzhYNtwGkAAAjZlA
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jun 2007 08:36:56.0477 (UTC) FILETIME=[292C4CD0:01C7B316]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.20.11133
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

These two classes are generated by QueryParser.jj. Perhaps you should
first look at how to use JavaCC and modify QueryParser.jj to meet your
requirement.

Andy

-----Original Message-----
From: Mahdi Rahimi [mailto:mhd_rhm@yahoo.com]=20
Sent: Wednesday, June 20, 2007 4:14 PM
To: java-user@lucene.apache.org
Subject: Understanding QueryParserTokenManager and QueryParser classes


Hello.

I want to add an operator like (*) to query syntax. Then, I need to know
and
understand QueryParserTokenManager and QueryParser classes well.
But I don't know, how can I find documents about these classes and
algorithms of identifying tokens and other things in query string .

Thanks for your help.

--=20
View this message in context:
http://www.nabble.com/Understanding-QueryParserTokenManager-and-QueryPar
ser-classes-tf3950889.html#a11209047
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 09:24:43 2007
Return-Path: <java-user-return-28765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60223 invoked from network); 20 Jun 2007 09:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 09:24:40 -0000
Received: (qmail 27656 invoked by uid 500); 20 Jun 2007 09:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27377 invoked by uid 500); 20 Jun 2007 09:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27365 invoked by uid 99); 20 Jun 2007 09:24:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 02:24:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rsk.sen@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 02:24:29 -0700
Received: by wa-out-1112.google.com with SMTP id j40so43211wah
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 02:24:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=PSK3vDQB9XkMJwiXAVEjvW6y5l2kYVeuxNDxYHH9ly/RMYJmFJEyG/hVYJwBHDARiLZEHks0kuQet5Gk3sUMOvMqtDce/3Wm35VBOVrMQXe5o48SrEQlB8/Kh/cSUIUShMorToKuJZmf3oR6ftPYKNlN3WN2VFWm9F32HuBpC+4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=I9788cWOLjWF1py7Yq4pjt0caEU2n7PLWow+Emzw8CKGqwQhOgPfsrcdjCNEreobxjx5DWRIQ3F84IYrKVQE7VXK95/gfh6ExRF3XrTZnhLg9sMpjQKbtBNg5vbqZXeMdYWGF9Ctlti5xq9SCHmGNB8rnPegZzF2sEfXYj9LgdA=
Received: by 10.114.177.1 with SMTP id z1mr107979wae.1182331449636;
        Wed, 20 Jun 2007 02:24:09 -0700 (PDT)
Received: by 10.114.94.15 with HTTP; Wed, 20 Jun 2007 02:24:09 -0700 (PDT)
Message-ID: <4628d2a90706200224w40a4d1a7pf91ac585aae6ea99@mail.gmail.com>
Date: Wed, 20 Jun 2007 14:54:09 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: zero termfreq for some search strings with special characters
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_94361_7563149.1182331449617"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_94361_7563149.1182331449617
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    I'm using standard tokenizer for both indexing and searching
process.Myindexed value is like "emp-id Aq234 kaith creating document
for search".
    I can get search results for the query CONTENT:"emp-id" by using hits =
indexSearcher.search(*query*).
    But if I try to get termfrequency of that term (CONTENT:"emp-id") by
using indexreader.termdocs(new Term("CONTENT","emp-id")).freq() , 0 results
returned.
    I think because of the analyzer I can get result in 1st case but absence
of analyzer I can't get result in 2nd case (term freq). Is it right?
    How do i get correct term frequency for that term?


Thanks & Regards
RSK

------=_Part_94361_7563149.1182331449617--

From java-user-return-28766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 10:04:57 2007
Return-Path: <java-user-return-28766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79317 invoked from network); 20 Jun 2007 10:04:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 10:04:56 -0000
Received: (qmail 98920 invoked by uid 500); 20 Jun 2007 10:04:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98879 invoked by uid 500); 20 Jun 2007 10:04:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98868 invoked by uid 99); 20 Jun 2007 10:04:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 03:04:49 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 03:04:43 -0700
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5KA4LT2009542
	for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 06:04:21 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5KA3vlY006285
	for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 06:04:20 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 20 Jun 2007 06:03:45 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: zero termfreq for some search strings with special characters
Date: Wed, 20 Jun 2007 06:02:55 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE840176014F@CORPUSMX10B.corp.emc.com>
In-Reply-To: <4628d2a90706200224w40a4d1a7pf91ac585aae6ea99@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: zero termfreq for some search strings with special characters
Thread-Index: AcezHNY4OnRBtWP5SkW+1Pscwz+IQQABG69g
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jun 2007 10:03:45.0153 (UTC) FILETIME=[49C92F10:01C7B322]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.20.23246
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

You are right!
"emp-id" will be separated to two terms  CONTENT:"emp"  CONTENT:"id" by
standard tokenizer for indexing and searching. But direct writing term
(CONTENT:"emp-id") will not.=20

Andy

-----Original Message-----
From: SK R [mailto:rsk.sen@gmail.com]=20
Sent: Wednesday, June 20, 2007 5:24 PM
To: java-user@lucene.apache.org
Subject: zero termfreq for some search strings with special characters

Hi,
    I'm using standard tokenizer for both indexing and searching
process.Myindexed value is like "emp-id Aq234 kaith creating document
for search".
    I can get search results for the query CONTENT:"emp-id" by using
hits =3D
indexSearcher.search(*query*).
    But if I try to get termfrequency of that term (CONTENT:"emp-id") by
using indexreader.termdocs(new Term("CONTENT","emp-id")).freq() , 0
results
returned.
    I think because of the analyzer I can get result in 1st case but
absence
of analyzer I can't get result in 2nd case (term freq). Is it right?
    How do i get correct term frequency for that term?


Thanks & Regards
RSK

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 10:16:01 2007
Return-Path: <java-user-return-28767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82730 invoked from network); 20 Jun 2007 10:15:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 10:15:58 -0000
Received: (qmail 24865 invoked by uid 500); 20 Jun 2007 10:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24796 invoked by uid 500); 20 Jun 2007 10:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24785 invoked by uid 99); 20 Jun 2007 10:15:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 03:15:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [60.52.184.45] (HELO mail.tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 03:15:47 -0700
Received: from DFPYWL2S ([192.168.2.96]) by tecforte.com with MailEnable ESMTP; Wed, 20 Jun 2007 18:15:21 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>	 <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>	 <002901c7b182$da91edd0$8fb5c970$@com>	 <6e3ae6310706181118m18f59255o3d05026663dbe197@mail.gmail.com>	 <005501c7b218$78f17dc0$6ad47940$@com> <359a92830706190703s389333dcwc52fed9f6ac26571@mail.gmail.com>
In-Reply-To: <359a92830706190703s389333dcwc52fed9f6ac26571@mail.gmail.com>
Subject: RE: FW: Lucene indexing vs RDBMS insertion.
Date: Wed, 20 Jun 2007 18:12:55 +0800
Message-ID: <002201c7b323$91d633b0$b5829b10$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AceyeqbyUmmtI2cLRE2JfgVzkoKP5gApjEDQ
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Greetings Erick, my index need to have latest data (almost real time, but a
delay of less than 1 minutes is acceptable). Thus there is no way to
schedule the indexing. What I can do is to find a solution to minimize delay
so system can get "almost" real time data to display.

Thanks.
-------
eChuang, Chew

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Tuesday, June 19, 2007 10:03 PM
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.

You still haven't described how often you need to index and why.
That's critical. If you have an index that only needs to be updated
every month, many of your concerns disappear. If it needs to be
updated every 5 seconds, it's another matter entirely.

So which is it?

Best
Erick

On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
>
> Thanks for the sharing and suggestion.
> Yes Chris, the index is to be partitioned by date time, and old index will
> not be access so frequent.
>
> I also did consider indexing in parallel to different index as well Erick.
> But I can only put all index in ONE machine and there is only ONE machine
> to
> process the job (both searching and indexing).
>
> I haven't try out the addIndexes to combine indexes but I did tried out
> MultiSearcher for 3 millions of documents in 3 separate indexes and it
> does
> not have much different compare to a search in 1 index. Could you mind to
> share your experience in addIndexes, how is the performance for that ? In
> my
> situation,  the indexes may be use for searching at the same time. Another
> worry for indexing is optimization process, I have tried it out and it
> take
> quite some time to optimize my index, e.g indexing for 5000 is about
> 10seconds (MergeFactor = 1000, and recreate IndexWriter every 5000
> documents), but to optimize, it will take around ONE minute. So do you
> guys
> have any suggestion on optimization process as well ? when should I run
> the
> optimization process ? and is it a lot of different with searching in a
> optimized index compare to a un-optimize ?
>
> ------
> eChuang, Chew
>
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Tuesday, June 19, 2007 2:19 AM
> To: java-user@lucene.apache.org
> Subject: Re: FW: Lucene indexing vs RDBMS insertion.
>
> Definitely very aggressive.
>
> Currently my experience is that, together with database access,
> DBSight can do 3 million in 2 hours, with Pentium D 3.4Hz. Seems you
> definitely need some good hardware, and a fast hard drive for this. I
> feel the hard drive is actually the bottleneck for large indexes.
> Partitioning your data and pruning the old data should be also
> considered.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
>
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
> inutes
>
>
> On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > Thanks for your suggestion Erick. I'm planning to test the indexing
> soon.
> > For your information, currently the system is inserting into RDBMS which
> is
> > around 1000 records per seconds. Thus, if lucene in place, I would
> expect
> it
> > will index that much of documents per seconds as well (Our target is 3.6
> > millions of document to be indexed in 1 hour). Beside of that, I'm
> planning
> > to queue the record so lucene will have enough time to index it. Anyway,
> > thanks for your suggestion and will come back to you once I tested the
> > solution.
> >
> > Thanks,
> > eChuang, Chew
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Friday, June 15, 2007 11:11 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: FW: Lucene indexing vs RDBMS insertion.
> >
> > From my perspective, this is an irrelevant question. The real question
> > is "is Lucene indexing fast enough for my application?". Which nobody
> > can answer for you, you have to experiment.
> >
> > If you're building an index that's only updated every 6 months,
> > Lucene is certainly "fast enough". If you're recreating the
> > index every 6 seconds, it's a different question.
> >
> > So, I recommend that you create a test application that does
> > nothing except read your source, do whatever parsing you
> > need to do and does NOT index it at all. Record the time it
> > takes.
> >
> > Then try the same thing WITH indexing and record the difference.
> >
> > Then, to get a sense of the dimension of the problem, try
> > substituting inserting into the RDBMS instead of the Lucene
> > index.
> >
> > Once you have numbers, you can make better decisions
> > And people can give you better advice,  especially if you
> > include more detail of your design.
> >
> > Best
> > Erick
> >
> > On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > >
> > > Hi, I'm  a new user to Lucene, and heard that it is a powerful tool
> for
> > > full
> > > text search and I'm planning to use it in my project for data storage
> > > purpose. Before the implementation, I could like to know whether there
> is
> > > performance issue on Lucene indexing process. I have no doubt on the
> > > retrieving and searching feature in Lucene but the indexing process. I
> > > have
> > > tested my current system to insert 1000 records in RDBMS storage it
> took
> > > about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> > > indexing process perform faster than RDBMS ? I have go through some of
> the
> > > article talking about the "MergeFactor" and "MaxMergeDocs" parameter
> for
> > > fine tune the indexing process, but no comparison between Lucene
> indexing
> > > process and RDBMS insertion. Thus, hope someone who have experience in
> > > Lucene can provide this information or some article that discuss
> between
> > > Lucene and RDBMS.
> > >
> > >
> > >
> > > I really appreciate any help in this. Thanks
> > >
> > >
> > > No virus found in this outgoing message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date:
> 6/14/2007
> > > 12:44 PM
> > >
> > >
> >
> > No virus found in this incoming message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> > 8:23 AM
> >
> >
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> > 8:23 AM
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> 8:23 AM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: 6/18/2007
> 3:02 PM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

No virus found in this incoming message.
Checked by AVG Free Edition. 
Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: 6/18/2007
3:02 PM
 

No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.472 / Virus Database: 269.9.1/854 - Release Date: 6/19/2007
1:12 PM
 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 11:53:56 2007
Return-Path: <java-user-return-28768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12675 invoked from network); 20 Jun 2007 11:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 11:53:55 -0000
Received: (qmail 14157 invoked by uid 500); 20 Jun 2007 11:53:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14109 invoked by uid 500); 20 Jun 2007 11:53:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14098 invoked by uid 99); 20 Jun 2007 11:53:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 04:53:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rsk.sen@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 04:53:44 -0700
Received: by wa-out-1112.google.com with SMTP id j40so87019wah
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 04:53:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t0novFixz+ZIi2T+vfw/vCfGOwcTvVYZBgs2ImQUMyfhU0ybrnicy4TW7uMKneVOh+GPZKhPuP3/jp8KhuRpkBEdtkhKNv+fgD8Pw8qWwA3dioqwjjQNHJQfFjEiwQMlXCZSxi6x3Q/TGoUHPJqmg1jh2N9J0JqK7dsU1w+EeSY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NiM6bJGzY9RO7a8blSszI0vfVZ2sBEBRFyKRnXdUz0P9C1bPlvjravnWkYnR4QGM0HTsPIW+KSo9LS/11q0xeFg+EA/f7KX5nXyXhPr370OAIROW5e/ByZNK9R+FG3nH5JRXMNBKig1uUznQTwmu9c+US6pD4VdV78KXRmxRfIw=
Received: by 10.115.108.1 with SMTP id k1mr228258wam.1182340403884;
        Wed, 20 Jun 2007 04:53:23 -0700 (PDT)
Received: by 10.114.94.15 with HTTP; Wed, 20 Jun 2007 04:53:23 -0700 (PDT)
Message-ID: <4628d2a90706200453v7bbc3151p6b9621463404d1e7@mail.gmail.com>
Date: Wed, 20 Jun 2007 17:23:23 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: zero termfreq for some search strings with special characters
In-Reply-To: <F3B3254741B1404D92215D80C451DE840176014F@CORPUSMX10B.corp.emc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95961_31895218.1182340403863"
References: <4628d2a90706200224w40a4d1a7pf91ac585aae6ea99@mail.gmail.com>
	 <F3B3254741B1404D92215D80C451DE840176014F@CORPUSMX10B.corp.emc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95961_31895218.1182340403863
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
     Thanks for your reply.
      But how do I get termfreq of that term("emp-id")? Does Lucene have any
other way to handle this?
      I appreciate any solution regarding this problem.

Regards
SenthilKumaran


On 6/20/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
>
> You are right!
> "emp-id" will be separated to two terms  CONTENT:"emp"  CONTENT:"id" by
> standard tokenizer for indexing and searching. But direct writing term
> (CONTENT:"emp-id") will not.
>
> Andy
>
> -----Original Message-----
> From: SK R [mailto:rsk.sen@gmail.com]
> Sent: Wednesday, June 20, 2007 5:24 PM
> To: java-user@lucene.apache.org
> Subject: zero termfreq for some search strings with special characters
>
> Hi,
>     I'm using standard tokenizer for both indexing and searching
> process.Myindexed value is like "emp-id Aq234 kaith creating document
> for search".
>     I can get search results for the query CONTENT:"emp-id" by using
> hits =
> indexSearcher.search(*query*).
>     But if I try to get termfrequency of that term (CONTENT:"emp-id") by
> using indexreader.termdocs(new Term("CONTENT","emp-id")).freq() , 0
> results
> returned.
>     I think because of the analyzer I can get result in 1st case but
> absence
> of analyzer I can't get result in 2nd case (term freq). Is it right?
>     How do i get correct term frequency for that term?
>
>
> Thanks & Regards
> RSK
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_95961_31895218.1182340403863--

From java-user-return-28769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 12:56:03 2007
Return-Path: <java-user-return-28769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30562 invoked from network); 20 Jun 2007 12:56:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 12:56:03 -0000
Received: (qmail 34908 invoked by uid 500); 20 Jun 2007 12:55:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34872 invoked by uid 500); 20 Jun 2007 12:55:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34861 invoked by uid 99); 20 Jun 2007 12:55:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 05:55:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 05:55:52 -0700
Received: by ug-out-1314.google.com with SMTP id m2so357625uge
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 05:55:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fff30C1fvgHK79Eyf53T6F4ipnf4tlBiiQvPyjnjEzLLFPoatdvGY9il6DjVOYIR96X79kdVFW3M5pRseAM+26/yq7opN6cNpOvHiJ+LVlIdX63oxEJw25G/TsCiK++cF8vneksbP0WzzBQD8aGYw7KH/3crZgT/QyntZju3Z20=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kszSM/lw9U1BuoTKwwHw2vvQPVIfUYCFVEzz5Q3WmOjRWouG3etPOl5dqcvl9UvV1Vh38Byh1DSa0vU6JoDDkX2owWCKEhQX/GSaGg0CtiRRuplczkS8EBO0CqC9NLu9Dwt0CPIVtDIdQgtsd3mvAkm2nxIC686APXz248S9NTc=
Received: by 10.82.108.9 with SMTP id g9mr1398153buc.1182344130856;
        Wed, 20 Jun 2007 05:55:30 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 20 Jun 2007 05:55:30 -0700 (PDT)
Message-ID: <359a92830706200555y2c138109j3309be15775bddab@mail.gmail.com>
Date: Wed, 20 Jun 2007 08:55:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FW: Lucene indexing vs RDBMS insertion.
In-Reply-To: <002201c7b323$91d633b0$b5829b10$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78501_21145736.1182344130810"
References: <003d01c7af1a$bc11eb90$3435c2b0$@com>
	 <359a92830706150811h751a208bwa0cc65c7853ee1a1@mail.gmail.com>
	 <002901c7b182$da91edd0$8fb5c970$@com>
	 <6e3ae6310706181118m18f59255o3d05026663dbe197@mail.gmail.com>
	 <005501c7b218$78f17dc0$6ad47940$@com>
	 <359a92830706190703s389333dcwc52fed9f6ac26571@mail.gmail.com>
	 <002201c7b323$91d633b0$b5829b10$@com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78501_21145736.1182344130810
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's a tough one. What I still don't get is why your 1,000 records/sec
is important. If you're really inserting records that fast, for very long,
you must have an impressive piece of hardware <G>...

That said, it might be possible to do something like have your base
index out on disk somewhere, and use, say, a RAMdir for some period
of time to collect new insertions. Your searches would have to go
against both indexes. Periodically you'd have to merge the RAMdir
with your filesystem based index and close/reopen the FSDir index.

One problem you'll have is that your application won't be able to see
index updates until you close/reopen your readers. Doing this every
minute for a large index will lead to performance problems. The RAMDir
approach at least lets you close/open on a (hopefully) much smaller/faster
index every minute. Of course you'll have to combine the results from the
different indexes, which may or may not be difficult.

Hope this helps
Erick

On 6/20/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
>
> Greetings Erick, my index need to have latest data (almost real time, but
> a
> delay of less than 1 minutes is acceptable). Thus there is no way to
> schedule the indexing. What I can do is to find a solution to minimize
> delay
> so system can get "almost" real time data to display.
>
> Thanks.
> -------
> eChuang, Chew
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Tuesday, June 19, 2007 10:03 PM
> To: java-user@lucene.apache.org
> Subject: Re: FW: Lucene indexing vs RDBMS insertion.
>
> You still haven't described how often you need to index and why.
> That's critical. If you have an index that only needs to be updated
> every month, many of your concerns disappear. If it needs to be
> updated every 5 seconds, it's another matter entirely.
>
> So which is it?
>
> Best
> Erick
>
> On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> >
> > Thanks for the sharing and suggestion.
> > Yes Chris, the index is to be partitioned by date time, and old index
> will
> > not be access so frequent.
> >
> > I also did consider indexing in parallel to different index as well
> Erick.
> > But I can only put all index in ONE machine and there is only ONE
> machine
> > to
> > process the job (both searching and indexing).
> >
> > I haven't try out the addIndexes to combine indexes but I did tried out
> > MultiSearcher for 3 millions of documents in 3 separate indexes and it
> > does
> > not have much different compare to a search in 1 index. Could you mind
> to
> > share your experience in addIndexes, how is the performance for that ?
> In
> > my
> > situation,  the indexes may be use for searching at the same time.
> Another
> > worry for indexing is optimization process, I have tried it out and it
> > take
> > quite some time to optimize my index, e.g indexing for 5000 is about
> > 10seconds (MergeFactor = 1000, and recreate IndexWriter every 5000
> > documents), but to optimize, it will take around ONE minute. So do you
> > guys
> > have any suggestion on optimization process as well ? when should I run
> > the
> > optimization process ? and is it a lot of different with searching in a
> > optimized index compare to a un-optimize ?
> >
> > ------
> > eChuang, Chew
> >
> > -----Original Message-----
> > From: Chris Lu [mailto:chris.lu@gmail.com]
> > Sent: Tuesday, June 19, 2007 2:19 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: FW: Lucene indexing vs RDBMS insertion.
> >
> > Definitely very aggressive.
> >
> > Currently my experience is that, together with database access,
> > DBSight can do 3 million in 2 hours, with Pentium D 3.4Hz. Seems you
> > definitely need some good hardware, and a fast hard drive for this. I
> > feel the hard drive is actually the bottleneck for large indexes.
> > Partitioning your data and pruning the old data should be also
> > considered.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> >
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_m
> > inutes
> >
> >
> > On 6/18/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > > Thanks for your suggestion Erick. I'm planning to test the indexing
> > soon.
> > > For your information, currently the system is inserting into RDBMS
> which
> > is
> > > around 1000 records per seconds. Thus, if lucene in place, I would
> > expect
> > it
> > > will index that much of documents per seconds as well (Our target is
> 3.6
> > > millions of document to be indexed in 1 hour). Beside of that, I'm
> > planning
> > > to queue the record so lucene will have enough time to index it.
> Anyway,
> > > thanks for your suggestion and will come back to you once I tested the
> > > solution.
> > >
> > > Thanks,
> > > eChuang, Chew
> > >
> > > -----Original Message-----
> > > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Sent: Friday, June 15, 2007 11:11 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: FW: Lucene indexing vs RDBMS insertion.
> > >
> > > From my perspective, this is an irrelevant question. The real question
> > > is "is Lucene indexing fast enough for my application?". Which nobody
> > > can answer for you, you have to experiment.
> > >
> > > If you're building an index that's only updated every 6 months,
> > > Lucene is certainly "fast enough". If you're recreating the
> > > index every 6 seconds, it's a different question.
> > >
> > > So, I recommend that you create a test application that does
> > > nothing except read your source, do whatever parsing you
> > > need to do and does NOT index it at all. Record the time it
> > > takes.
> > >
> > > Then try the same thing WITH indexing and record the difference.
> > >
> > > Then, to get a sense of the dimension of the problem, try
> > > substituting inserting into the RDBMS instead of the Lucene
> > > index.
> > >
> > > Once you have numbers, you can make better decisions
> > > And people can give you better advice,  especially if you
> > > include more detail of your design.
> > >
> > > Best
> > > Erick
> > >
> > > On 6/15/07, Chew Yee Chuang <yeechuang@tecforte.com> wrote:
> > > >
> > > > Hi, I'm  a new user to Lucene, and heard that it is a powerful tool
> > for
> > > > full
> > > > text search and I'm planning to use it in my project for data
> storage
> > > > purpose. Before the implementation, I could like to know whether
> there
> > is
> > > > performance issue on Lucene indexing process. I have no doubt on the
> > > > retrieving and searching feature in Lucene but the indexing process.
> I
> > > > have
> > > > tested my current system to insert 1000 records in RDBMS storage it
> > took
> > > > about 1 seconds. Thus, if I change my solution to Lucene, can Lucene
> > > > indexing process perform faster than RDBMS ? I have go through some
> of
> > the
> > > > article talking about the "MergeFactor" and "MaxMergeDocs" parameter
> > for
> > > > fine tune the indexing process, but no comparison between Lucene
> > indexing
> > > > process and RDBMS insertion. Thus, hope someone who have experience
> in
> > > > Lucene can provide this information or some article that discuss
> > between
> > > > Lucene and RDBMS.
> > > >
> > > >
> > > >
> > > > I really appreciate any help in this. Thanks
> > > >
> > > >
> > > > No virus found in this outgoing message.
> > > > Checked by AVG Free Edition.
> > > > Version: 7.5.472 / Virus Database: 269.8.16/849 - Release Date:
> > 6/14/2007
> > > > 12:44 PM
> > > >
> > > >
> > >
> > > No virus found in this incoming message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date:
> 6/17/2007
> > > 8:23 AM
> > >
> > >
> > > No virus found in this outgoing message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date:
> 6/17/2007
> > > 8:23 AM
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > No virus found in this incoming message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/852 - Release Date: 6/17/2007
> > 8:23 AM
> >
> >
> > No virus found in this outgoing message.
> > Checked by AVG Free Edition.
> > Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: 6/18/2007
> > 3:02 PM
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.0/853 - Release Date: 6/18/2007
> 3:02 PM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.472 / Virus Database: 269.9.1/854 - Release Date: 6/19/2007
> 1:12 PM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_78501_21145736.1182344130810--

From java-user-return-28770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 13:24:04 2007
Return-Path: <java-user-return-28770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48770 invoked from network); 20 Jun 2007 13:24:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 13:24:02 -0000
Received: (qmail 16119 invoked by uid 500); 20 Jun 2007 13:23:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16094 invoked by uid 500); 20 Jun 2007 13:23:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16079 invoked by uid 99); 20 Jun 2007 13:23:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 06:23:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 06:23:53 -0700
Received: by nf-out-0910.google.com with SMTP id d3so5506nfc
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 06:23:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pgL47SZegZK67Iq9ede9dLRglwIdq1DJYkkZoIoENBnNNCJN26tzfYvnRF3SzqD5KSPPQxmZ2Twuk9EWtD1qrKideJOCOFlW7TkjX50SBQWJ3UL2NfuatEm2MOstCxgQJzdsi07tE1tBomihy5dY7pX9GlzMXS+vfSXT+HlMYPU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NJdkpu2yuCW+nZmAJsqpwTmKc56zRORgq3PE61YgZ5UC7x38Jdi/tjzEuwWLDCCUNapqhz145ztF57zud2GYz+yKDEl1E+DKv/AkYrDriG7JYxusv9/Ooy/yUxTP6HwFBkZaOEHMb4mdgpP/EVeTsCBC4Q9WarXN1PEdM0lEqpU=
Received: by 10.82.156.12 with SMTP id d12mr1436194bue.1182345811922;
        Wed, 20 Jun 2007 06:23:31 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 20 Jun 2007 06:23:31 -0700 (PDT)
Message-ID: <359a92830706200623q477b9914yad9d1b5804b8f28d@mail.gmail.com>
Date: Wed, 20 Jun 2007 09:23:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: zero termfreq for some search strings with special characters
In-Reply-To: <4628d2a90706200453v7bbc3151p6b9621463404d1e7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78721_16484285.1182345811893"
References: <4628d2a90706200224w40a4d1a7pf91ac585aae6ea99@mail.gmail.com>
	 <F3B3254741B1404D92215D80C451DE840176014F@CORPUSMX10B.corp.emc.com>
	 <4628d2a90706200453v7bbc3151p6b9621463404d1e7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78721_16484285.1182345811893
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You don't. You don't have an actual term "emp-id" in your index. You
have "emp" and "id". So "emp-id" isn't a term.

If you really want to control this sort of thing, and none of the
stock analyzers work exactly as you require, you need to write
your own Analyzer that breaks the stream however you want, and
use *that* analyzer at index and search time. Then looking at
termfreq will work as you expect.

PerFieldAnalyzerWrapper will allow you to treat different fields
differently, which may help if you want one sort of behavior for
one field in your documents and different behavior for others.

Best
Erick

On 6/20/07, SK R <rsk.sen@gmail.com> wrote:
>
> Hi,
>      Thanks for your reply.
>       But how do I get termfreq of that term("emp-id")? Does Lucene have
> any
> other way to handle this?
>       I appreciate any solution regarding this problem.
>
> Regards
> SenthilKumaran
>
>
> On 6/20/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
> >
> > You are right!
> > "emp-id" will be separated to two terms  CONTENT:"emp"  CONTENT:"id" by
> > standard tokenizer for indexing and searching. But direct writing term
> > (CONTENT:"emp-id") will not.
> >
> > Andy
> >
> > -----Original Message-----
> > From: SK R [mailto:rsk.sen@gmail.com]
> > Sent: Wednesday, June 20, 2007 5:24 PM
> > To: java-user@lucene.apache.org
> > Subject: zero termfreq for some search strings with special characters
> >
> > Hi,
> >     I'm using standard tokenizer for both indexing and searching
> > process.Myindexed value is like "emp-id Aq234 kaith creating document
> > for search".
> >     I can get search results for the query CONTENT:"emp-id" by using
> > hits =
> > indexSearcher.search(*query*).
> >     But if I try to get termfrequency of that term (CONTENT:"emp-id") by
> > using indexreader.termdocs(new Term("CONTENT","emp-id")).freq() , 0
> > results
> > returned.
> >     I think because of the analyzer I can get result in 1st case but
> > absence
> > of analyzer I can't get result in 2nd case (term freq). Is it right?
> >     How do i get correct term frequency for that term?
> >
> >
> > Thanks & Regards
> > RSK
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_78721_16484285.1182345811893--

From java-user-return-28771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 14:12:13 2007
Return-Path: <java-user-return-28771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71222 invoked from network); 20 Jun 2007 14:12:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 14:12:12 -0000
Received: (qmail 82359 invoked by uid 500); 20 Jun 2007 14:12:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82320 invoked by uid 500); 20 Jun 2007 14:12:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82309 invoked by uid 99); 20 Jun 2007 14:12:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 07:12:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 07:12:02 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I10uM-0000BI-A6
	for java-user@lucene.apache.org; Wed, 20 Jun 2007 07:11:42 -0700
Message-ID: <11214251.post@talk.nabble.com>
Date: Wed, 20 Jun 2007 07:11:42 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ways to minimize index size?
In-Reply-To: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick do u have any idea on this?

jm-27 wrote:
> 
> Hi,
> 
> I want to make my index as small as possible. I noticed about
> field.setOmitNorms(true), I read in the list the diff is 1 byte per
> field per doc, not huge but hey...is the only effect the score being
> different? I hardly mind about the score so that would be ok.
> 
> And can I add to an index without norms when it has previous doc with
> norms?
> 
> Any other way to minimize size of index? Most of my fields but one are
> Field.Store.NO, Field.Index.TOKENIZED and Field.TermVector.NO, one is
> Field.Store.YES, Field.Index.UN_TOKENIZED and Field.TermVector.NO. I
> tried compressing that one and size is reduced around 1% (it's a small
> field), but I guess compression means worse performance so I am not
> sure about applying that.
> 
> thanks
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11214251
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 22:31:52 2007
Return-Path: <java-user-return-28772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55774 invoked from network); 20 Jun 2007 22:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 22:31:50 -0000
Received: (qmail 88706 invoked by uid 500); 20 Jun 2007 22:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88657 invoked by uid 500); 20 Jun 2007 22:31:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88646 invoked by uid 99); 20 Jun 2007 22:31:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 15:31:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.85.75] (HELO web36907.mail.mud.yahoo.com) (209.191.85.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Jun 2007 15:31:42 -0700
Received: (qmail 61207 invoked by uid 60001); 20 Jun 2007 22:31:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=AtLaw1jbSrFNtFoKJCfoRDmkqjAnzzsSMf3fAmRZ0Rk3+MGfmYjY3MSTLrum1CPI0tUv2FRoXwZCoJqolL8qNcLzBH4q2ToNq0zegwKGB0bIEZOvyVUR8+HHTi/jwuSdvmiUjrBqC9JOmGf+zLlwFcgXAbfyTy7j7YJBSIGFRT4=;
X-YMail-OSG: dmWRf7AVM1kd3oPmacKbMmWpWBX1QaYZtDmSE3wlmhOwDCyKXMZO3WiSAU.cBl0f1MZl7NKizA--
Received: from [209.191.119.123] by web36907.mail.mud.yahoo.com via HTTP; Wed, 20 Jun 2007 15:31:20 PDT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Wed, 20 Jun 2007 15:31:20 -0700 (PDT)
From: sejourne kevin <sejourne_kevin@yahoo.fr>
Subject: The localized Languages.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <742989.60954.qm@web36907.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AIt seem that all localized languages Analyser are absent from org.=
apache.lucene.analysis.* in the lastest 2.2=0Asource release of Lucene. Is =
this normal or not ?=0Aregards,=0A=0A=0AK=E9vin.=0A=0A=0A=0A=0A=0A      ___=
__________________________________________________________________________ =
=0ANe gardez plus qu'une seule adresse mail ! Copiez vos mails vers Yahoo! =
Mail 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 22:44:53 2007
Return-Path: <java-user-return-28773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58860 invoked from network); 20 Jun 2007 22:44:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 22:44:53 -0000
Received: (qmail 8684 invoked by uid 500); 20 Jun 2007 22:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7629 invoked by uid 500); 20 Jun 2007 22:44:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7618 invoked by uid 99); 20 Jun 2007 22:44:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 15:44:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 15:44:44 -0700
Received: by wx-out-0506.google.com with SMTP id t8so285593wxc
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 15:44:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=fZidH2Y2reuWtr7h9G9lXdHr3svnamxnc6ezfK5bAMk8XkURZPpE3nZMH1N+d88QdwCdxk+JlpfM/QHGVDmc3Ii68OBjq/HEOCgSXKwtaIdtFWrgJf/odcX5Qg2eMuAYXpxmuLyLJECq6sBcPWKiEsg1pZ4HvjxZQLyabolTss0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=mjSJeAQf5Uu7Z6UNEOjxn56MBqmPjzYRek/ovv8QgbpaxqSiikW8YynjixzvHlsfoLqz9MZNs9erRflOzenOlTfiZRfxbTR8XAmrmNuzjAeFw8cOK2ToNvO+aGvUeSprk+01UprYvkqBTS3kMY++jy2/zJwj43ReEJuaVWbX0jc=
Received: by 10.70.42.16 with SMTP id p16mr1835020wxp.1182379463562;
        Wed, 20 Jun 2007 15:44:23 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 39sm1742942wrl.2007.06.20.15.44.22
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 20 Jun 2007 15:44:23 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <742989.60954.qm@web36907.mail.mud.yahoo.com>
References: <742989.60954.qm@web36907.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <94DC6CC4-A219-4B07-98AC-5610F092177C@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: The localized Languages.
Date: Wed, 20 Jun 2007 18:44:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Is contrib/analyzers what you are looking for?

On Jun 20, 2007, at 6:31 PM, sejourne kevin wrote:

> Hi,
>
> It seem that all localized languages Analyser are absent from =20
> org.apache.lucene.analysis.* in the lastest 2.2
> source release of Lucene. Is this normal or not ?
> regards,
>
>
> K=E9vin.
>
>
>
>
>
>       =20
> ______________________________________________________________________=20=

> _______
> Ne gardez plus qu'une seule adresse mail ! Copiez vos mails vers =20
> Yahoo! Mail
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 22:46:11 2007
Return-Path: <java-user-return-28774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59107 invoked from network); 20 Jun 2007 22:46:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 22:46:10 -0000
Received: (qmail 10644 invoked by uid 500); 20 Jun 2007 22:46:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10609 invoked by uid 500); 20 Jun 2007 22:46:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10594 invoked by uid 99); 20 Jun 2007 22:46:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 15:46:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 15:46:02 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l5KMjefc120280
	for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 22:45:40 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5KMjeHK594068
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 00:45:40 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5KMje3S025231
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 00:45:40 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5KMje93025228
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 00:45:40 +0200
In-Reply-To: <742989.60954.qm@web36907.mail.mud.yahoo.com>
Subject: Re: The localized Languages.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF6413BABD.A327AC4E-ON88257300.007C4B70-88257300.007CB8DD@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 20 Jun 2007 15:42:17 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 21/06/2007 01:45:40
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kevin, are you looking for the sources under
contrib\analyzers?

Javadocs have both "core" and "contrib" together,
but they are separated in the source tree, (and
separated jars are created for them in the binary
dist).

Doron

sejourne kevin <sejourne_kevin@yahoo.fr> wrote on 20/06/2007 15:31:20:

> Hi,
>
> It seem that all localized languages Analyser are absent from
> org.apache.lucene.analysis.* in the lastest 2.2
> source release of Lucene. Is this normal or not ?
> regards,
>
>
> K=E9vin.=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 23:15:12 2007
Return-Path: <java-user-return-28775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69039 invoked from network); 20 Jun 2007 23:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 23:15:10 -0000
Received: (qmail 61468 invoked by uid 500); 20 Jun 2007 23:15:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61422 invoked by uid 500); 20 Jun 2007 23:15:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61406 invoked by uid 99); 20 Jun 2007 23:15:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 16:15:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 64.233.162.225 as permitted sender)
Received: from [64.233.162.225] (HELO nz-out-0506.google.com) (64.233.162.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 16:14:56 -0700
Received: by nz-out-0506.google.com with SMTP id x7so318090nzc
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 16:14:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=I95iplq60lSaEGv3JlXwDrAOmR23x4ggv1vXHbDd0x+49sFEXSmYNNJZDTk0l2lXcKee7hXSGxRxFzPuOjOproGixlh+ZCtDGPiIE4dYEWZdEvDpfaE9qDEJ4Fp7E+n0kLRwzS8tfczwBGCFBMRiL3E9nNZ9cpq+IQ6ENlNzvQ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=o+Vw7JvTsvwxWz33ja6Z+8AYEO5fnDiLgFpecGNhaWBAZy2Zs9kZIqDWaMErkZ+F2YFffuMZ8iFT9uegBcL44hufevEmhPgHJ99b1hdQ6noJvicRcGqcGu6lyTnkC1Smgq2efldGusmoz8f6uKipEiFyDw5uHKXRJ8O3Z/GjKvc=
Received: by 10.114.180.1 with SMTP id c1mr852546waf.1182381272051;
        Wed, 20 Jun 2007 16:14:32 -0700 (PDT)
Received: from ?192.168.1.103? ( [24.84.38.75])
        by mx.google.com with ESMTP id v39sm244812wah.2007.06.20.16.14.30
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 20 Jun 2007 16:14:30 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <46785B1F.4030809@gmail.com>
References: <46785B1F.4030809@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <ADFC901F-C127-4B0F-9C9E-4766DC0D6753@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Highlighter that works with phrase and span queries
Date: Wed, 20 Jun 2007 16:14:38 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 19-Jun-07, at 3:39 PM, Mark Miller wrote:

> I have been working on extending the Highlighter with a new Scorer  
> that correctly scores phrase and span queries. The highlighter is  
> working great for me, but could really use some more banging on.
>
> If you have a need or an interest in a more accurate Highlighter,  
> please give it a whirl and let me know how it went. Unlike most of  
> the other alternate Lucene Highlighters, this one builds off the  
> original contrib Highlighter so as to retain all of its goodness.

This is really great, Mark.  I'll look into integrating it with Solr,  
as better phrase highlighting is a definite sore point for some of  
our users.

Any indication on performance differences?

cheers,
-mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 23:28:42 2007
Return-Path: <java-user-return-28776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73478 invoked from network); 20 Jun 2007 23:28:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 23:28:41 -0000
Received: (qmail 82416 invoked by uid 500); 20 Jun 2007 23:28:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82119 invoked by uid 500); 20 Jun 2007 23:28:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82108 invoked by uid 99); 20 Jun 2007 23:28:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 16:28:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Jun 2007 16:28:32 -0700
Received: (qmail 27697 invoked by uid 60001); 20 Jun 2007 23:28:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=dOREJ7SFnOuhnqurdit9/D+YUthxXPfMMoNvk0VCUNLlxqWYa2pfjNVGG2cThMDvojXXFIbTp7g90swW2aqslC8Gz9T6uisuHoA2ta/pUYQIrPR1NEga/UEzHEBpxlLF4WqHlj4iDn0EvUCSpqQmYLHxif3NRbgHnr24AaLJVdo=;
X-YMail-OSG: BEX24ZMVM1lwRsvnwE5YZKElcocHaQgCoH8SRJGrYAS7VM1ip.OVSbEYykn3TOUp2eiMUETRlIUxEzr3toZ12BDaaQysP_uZwBM.tGxHrGTuOZRYrg--
Received: from [216.252.108.191] by web50310.mail.re2.yahoo.com via HTTP; Wed, 20 Jun 2007 16:28:11 PDT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Wed, 20 Jun 2007 16:28:11 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Highlighter that works with phrase and span queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <280820.27409.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark,

I know one large user (meaning: high query/highlight rates) of the current Highlighter and this user wasn't too happy with its performance.  I don't know the details, other than it was inefficient.  So now I'm wondering if you've benchmarked your Highlighter against that/current Highlighter to see not only which one is more accurate, but also which one is faster, and by how much?

Thanks,
Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, June 20, 2007 12:39:27 AM
Subject: Highlighter that works with phrase and span queries

I have been working on extending the Highlighter with a new Scorer that 
correctly scores phrase and span queries. The highlighter is working 
great for me, but could really use some more banging on.

If you have a need or an interest in a more accurate Highlighter, please 
give it a whirl and let me know how it went. Unlike most of the other 
alternate Lucene Highlighters, this one builds off the original contrib 
Highlighter so as to retain all of its goodness.

http://myhardshadow.com/qsolreleases/lucene-highlighter-2.2.jar

Example Usage

    IndexSearcher searcher = new IndexSearcher(ramDir);
    Query query = QueryParser.parse("Kenne*", FIELD_NAME, analyzer);
    query = query.rewrite(reader); //required to expand search terms
    Hits hits = searcher.search(query);

    for (int i = 0; i < hits.length(); i++)
    {
        String text = hits.doc(i).get(FIELD_NAME);
        CachingTokenFilter tokenStream = new 
CachingTokenFilter(analyzer.tokenStream(
                        FIELD_NAME, new StringReader(text)));
        Highlighter highlighter = new Highlighter(new SpanScorer(query, 
FIELD_NAME, tokenStream));
        tokenStream.reset();
       
        // Get 3 best fragments and seperate with a "..."
        String result = highlighter.getBestFragments(tokenStream, text, 
3, "...");
        System.out.println(result);
    }

If you make a call to any of the getBestFragments() methods more than 
once, you must call reset() on the SpanScorer between each call.

Pass null as the FIELD_NAME to ignore fields.

If you want to Highlight the whole document, use a NullFragmenter.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 23:29:49 2007
Return-Path: <java-user-return-28777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73737 invoked from network); 20 Jun 2007 23:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 23:29:48 -0000
Received: (qmail 84581 invoked by uid 500); 20 Jun 2007 23:29:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84246 invoked by uid 500); 20 Jun 2007 23:29:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84234 invoked by uid 99); 20 Jun 2007 23:29:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 16:29:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Jun 2007 16:29:39 -0700
Received: (qmail 28006 invoked by uid 60001); 20 Jun 2007 23:29:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=LuaeBGywIr0Y1s9+yJtslQXfHV3JOSGXz/Ek34kKfLyG4m4aB+mNqcVMhdrMef27AqX0yqw/DIKs/ryCF4VCRbxtp4J5+nNmvUyCcYisV5ILGmWMC8SwAfqzwxBFz70QVTdCvpE1286ELT9pXWw0d/H0yyBOAu/IQ0JfzMOSIIc=;
X-YMail-OSG: 4.HEcrYVM1n5YjxBVWPlDTjfmEz0TogFbjdZECfkYgE1QE3wuHrHy.yKG50y7yo8Iziz0FL_S4b9SKQXOXDsykaCPq4mlheDW6QCqHUdYLhC39C1.Nk-
Received: from [216.252.108.191] by web50310.mail.re2.yahoo.com via HTTP; Wed, 20 Jun 2007 16:29:18 PDT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Wed, 20 Jun 2007 16:29:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Position of matches to affect scoring
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <812280.27694.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Have you looked at using the HitCollector?

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Jesse Prabawa <j.prabawa@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, June 20, 2007 9:17:22 AM
Subject: Re: Position of matches to affect scoring

Hi Steve,

Thanks for the advice and your detailed explanation. I have another question
though, I understand that Lucene normalizes the scores based on field
length. Is there a way for me to avoid this? Or perhaps have a better
control of how the scores are normalized.

Best regards,

Jes

On 6/19/07, Steven Rowe <sarowe@syr.edu> wrote:
>
> Hi Jes,
>
> Jesse Prabawa wrote:
> > The Lucene FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
> > mentions that the position of the matches in the text does not affect
> > scoring. So is there anyway that I can make the position of the
> > matches affect scoring? For example, I want matches that occur at the
> > beginning to weigh more than those that occur elsewhere in the text.
> > I have just started using Lucene so any help/advice is greatly
> > appreciated :)
>
> One quick way to get (something like) what you want is to place "the
> beginning" in a separate field from the rest of the document contents,
> then query both the "beginning" and "remainder" fields with the same
> query, boosting (i.e. weighting) the "beginning" field higher than the
> "remainder" field.
>
> E.g. (assumes SimpleAnalyzer, and default "OR" QueryParser operator):
>
>   doc1: "This is the inception.  Here is the rest."
>         "beginning" field: "this", "is", "the", "inception"
>         "remainder" field: "here", "is", "the", "rest"
>
>   doc2: "Something else here.  After the inception."
>         "beginning" field: "something", "else", "here"
>         "remainder" field: "after", "the", "inception"
>
> query: "What does inception mean?"
> -> "beginning:(what does inception mean)^5  remainder:(what does
> inception mean)^1"
>
> The transformed query shown above is how it would look in QueryParser
> syntax[1] to query both fields with the same query, while boosting the
> "beginning" field higher (boost:5) than the "remainder" field (boost:1).
>
> You have to build this transformed query yourself - there is no facility
> in Lucene (that I'm aware of) for building multi-field queries with
> differently boosted fields.
>
> Both docs will match, but doc1 will score higher than doc2, since
> "inception" is in doc1's higher-weighted "beginning" field.
>
>
> Steve
>
> [1] http://lucene.apache.org/java/docs/queryparsersyntax.html
>
> --
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 20 23:59:16 2007
Return-Path: <java-user-return-28778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81518 invoked from network); 20 Jun 2007 23:59:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2007 23:59:14 -0000
Received: (qmail 33858 invoked by uid 500); 20 Jun 2007 23:59:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33006 invoked by uid 500); 20 Jun 2007 23:59:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32369 invoked by uid 99); 20 Jun 2007 23:58:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 16:58:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 16:58:09 -0700
Received: by ug-out-1314.google.com with SMTP id m2so497183uge
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 16:57:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=iv8pIcLsVkteLrfVypWeWhUgiL0d9rwPJz6PyF4OuQPXXNmp1lDi6FpdB+4iIHIGYot3+q5b/1kkNL/erjXu5kw/bImmSvRZ5edYH+iNm1ns8Hb+Ns1G8cF7tG/J9O7BwIiSYHCMF08eiBOwP79HAlwQFjEUYwi2Zw/V4v1hYc0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=O1cmSpQbLHtv/0rjA998cVKlr6yxWgMIKN+uYKM4xsUFSX5oQbnUpZPWmgNvlvuduiOOkXNePwRDg3phDpK7HE0+95r6MTc0L0M+ArY39fmx7EYjSbkvf3exbA4jTrNs2GolgkQccQxR0Crs7VdKtmcsFdlB1/se3Dm703/PkL4=
Received: by 10.78.180.18 with SMTP id c18mr650597huf.1182383855612;
        Wed, 20 Jun 2007 16:57:35 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Wed, 20 Jun 2007 16:57:35 -0700 (PDT)
Message-ID: <6e3ae6310706201657p3873ea7fne220cf2c088e4f01@mail.gmail.com>
Date: Wed, 20 Jun 2007 16:57:35 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
In-Reply-To: <280820.27409.qm@web50310.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <280820.27409.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Agree.  But I think another reason why highlighting is slow could also
be the need to retrieve the document's content, quite likely it's on
the hard drive, which usually takes around 10ms for each small
document, more for larger document.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 6/20/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Mark,
>
> I know one large user (meaning: high query/highlight rates) of the current Highlighter and this user wasn't too happy with its performance.  I don't know the details, other than it was inefficient.  So now I'm wondering if you've benchmarked your Highlighter against that/current Highlighter to see not only which one is more accurate, but also which one is faster, and by how much?
>
> Thanks,
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 20, 2007 12:39:27 AM
> Subject: Highlighter that works with phrase and span queries
>
> I have been working on extending the Highlighter with a new Scorer that
> correctly scores phrase and span queries. The highlighter is working
> great for me, but could really use some more banging on.
>
> If you have a need or an interest in a more accurate Highlighter, please
> give it a whirl and let me know how it went. Unlike most of the other
> alternate Lucene Highlighters, this one builds off the original contrib
> Highlighter so as to retain all of its goodness.
>
> http://myhardshadow.com/qsolreleases/lucene-highlighter-2.2.jar
>
> Example Usage
>
>     IndexSearcher searcher = new IndexSearcher(ramDir);
>     Query query = QueryParser.parse("Kenne*", FIELD_NAME, analyzer);
>     query = query.rewrite(reader); //required to expand search terms
>     Hits hits = searcher.search(query);
>
>     for (int i = 0; i < hits.length(); i++)
>     {
>         String text = hits.doc(i).get(FIELD_NAME);
>         CachingTokenFilter tokenStream = new
> CachingTokenFilter(analyzer.tokenStream(
>                         FIELD_NAME, new StringReader(text)));
>         Highlighter highlighter = new Highlighter(new SpanScorer(query,
> FIELD_NAME, tokenStream));
>         tokenStream.reset();
>
>         // Get 3 best fragments and seperate with a "..."
>         String result = highlighter.getBestFragments(tokenStream, text,
> 3, "...");
>         System.out.println(result);
>     }
>
> If you make a call to any of the getBestFragments() methods more than
> once, you must call reset() on the SpanScorer between each call.
>
> Pass null as the FIELD_NAME to ignore fields.
>
> If you want to Highlight the whole document, use a NullFragmenter.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 00:12:16 2007
Return-Path: <java-user-return-28779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83106 invoked from network); 21 Jun 2007 00:12:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 00:12:15 -0000
Received: (qmail 55500 invoked by uid 500); 21 Jun 2007 00:12:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55451 invoked by uid 500); 21 Jun 2007 00:12:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55440 invoked by uid 99); 21 Jun 2007 00:12:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 17:12:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 17:12:06 -0700
Received: by nz-out-0506.google.com with SMTP id x7so327718nzc
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 17:11:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=i9JmrZaaplzId5jYQON6Epc6lnm82WxgMlfAlei8jh2s8ngod866r17ycvQAbM6ecMh7I0ukCioP+1sKLJFFr2Tr69lUMUAIWwH+KV/G36VV51G+DP/L8+NTTiWf67gNBBl+CnkLWWezNRC/4N0AsEHPfaqMRsJIV3ZemWszDAw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=A017L9aI3aX/LNV2F6cTCFhZJDWJBLtrh5G9KjQRBPXJUj/2a3DG51sNa96g0EMFkQl5lRdHj7ss1Ym3z97vQaWyQGNOpep8RlapvYChkBkWQVgmhoBdMqhwNkuOvVDdp6D536g7XpyrZ7P7OntlYTgtREP4Fk7yJpBmrByunV4=
Received: by 10.142.103.6 with SMTP id a6mr7278wfc.1182384705585;
        Wed, 20 Jun 2007 17:11:45 -0700 (PDT)
Received: by 10.142.113.13 with HTTP; Wed, 20 Jun 2007 17:11:45 -0700 (PDT)
Message-ID: <c68e39170706201711i1a166d62x44253b5d2ee69049@mail.gmail.com>
Date: Wed, 20 Jun 2007 20:11:45 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
In-Reply-To: <6e3ae6310706201657p3873ea7fne220cf2c088e4f01@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <280820.27409.qm@web50310.mail.re2.yahoo.com>
	 <6e3ae6310706201657p3873ea7fne220cf2c088e4f01@mail.gmail.com>
X-Google-Sender-Auth: d8fc0f6000501fac
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/20/07, Chris Lu <chris.lu@gmail.com> wrote:
> Agree.  But I think another reason why highlighting is slow could also
> be the need to retrieve the document's content, quite likely it's on
> the hard drive, which usually takes around 10ms for each small
> document, more for larger document.

I'm not so sure that's the issue (unless they are really large fields).
Stored fields are normally retrieved to be returned to the user anyway.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 01:12:48 2007
Return-Path: <java-user-return-28780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92515 invoked from network); 21 Jun 2007 01:12:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 01:12:41 -0000
Received: (qmail 30946 invoked by uid 500); 21 Jun 2007 01:12:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30916 invoked by uid 500); 21 Jun 2007 01:12:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30905 invoked by uid 99); 21 Jun 2007 01:12:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 18:12:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 18:12:32 -0700
Received: by wr-out-0506.google.com with SMTP id i4so364408wra
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 18:12:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=GqL/oXrEAjYaIWxXBcgJhaPwdqaQvrGD/wgqyYNamQwS1HmaKAspvPTW282RtMYlVBGeGTIB3BBQLUmJml7OEj4H+13yEeXEM5uFwoSh6PQ2bSaA2+meH2+HRm2ZC+yC/+aeWaDrcK7uMdhHPEjRP7kqASGK8i8vjS0aG9sBkHc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rXD6iC4ArEuHP7D/CbHRVlqKW2vniKBkWelwsUMSx0+nAvBbskF069jZOE5BBT26jPwtdJenYTQbkgwwE3ZMb67qKPjpmJhTTEloXeeyy6ZVzEfh57G7cfMt8CGVnWomVubprsZbC57MuvaXWetTpBBcQ2uUZtavhDDvoexTY5k=
Received: by 10.100.166.14 with SMTP id o14mr793559ane.1182388330906;
        Wed, 20 Jun 2007 18:12:10 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id c37sm2132755ana.2007.06.20.18.12.09
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 20 Jun 2007 18:12:10 -0700 (PDT)
Message-ID: <4679D058.9040403@gmail.com>
Date: Wed, 20 Jun 2007 21:11:52 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <280820.27409.qm@web50310.mail.re2.yahoo.com>
In-Reply-To: <280820.27409.qm@web50310.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I will work up some performance numbers over the next day or two to 
share with you. I have spent the last day or two with a profiler trying 
to find the biggest performance drains.

Unfortunately, I will probably not be able to squeeze out much more 
performance than the current Highlighter. When I started working on this 
project I considered starting from scratch to create a better, more 
accurate Highlighter. After some initial work I quickly came to the 
realization that Mark Harwood (with some additions by others) had 
already solved too many corner cases and interesting needs. The few 
alternate Highlighters in JIRA did not meet the standards set by Mark's 
highlighter. Trying to replicate all that work in a different manner 
didn't seem like a fruitful approach -- Harwood is more clever than I <g>

Taking that into account, I decided to extend the Highlighter using the 
great framework that is already in place. I implemented a new Scorer 
that acts much like the default Scorer, but when it finds a Query clause 
that is position sensitive (PhraseQuery, SpanQuery), it creates a 
MemoryIndex that is used extract the correct Spans for the Query (Credit 
to Paul Elschot and Mark Harwood for the approach). Non position 
sensitive Query claueses are handled similar to the way they where in 
the original highlighter's Scorer. This means that non position 
sensitive queries are likely the same speed as before, while position 
sensitive queries are likely a bit slower. For my uses, the thing is 
damned fast -- of course my uses involves small documents (Newspaper 
articles).

I am very interested in making this thing as fast as possible though, so 
I will build some benchmark tests and try to squeeze as much performance 
out of the Highligher as I can. I will also see if my Scorer is any 
faster than the original.

All that said, my guess is that one of the slowest parts of Highlighting 
is re-tokenizing the text. There is always the option of turning on 
TermVectors and using org.apache.lucene.search.highlight.TokenSources to 
get the TokenStream. Based on Mark H's comments, it may be twice as fast 
as re-tokenizing. This method can also be used with my new Highlighter 
code as well (which is more a plug-in to the old Highlighter than a 
replacement.)

Considering that both of your comments immediately went to performance, 
I will certainly be spending some time working on this.

- Mark

> Hi Mark,
>
> I know one large user (meaning: high query/highlight rates) of the current Highlighter and this user wasn't too happy with its performance.  I don't know the details, other than it was inefficient.  So now I'm wondering if you've benchmarked your Highlighter against that/current Highlighter to see not only which one is more accurate, but also which one is faster, and by how much?
>
> Thanks,
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>   

> This is really great, Mark.  I'll look into integrating it with Solr,
> as better phrase highlighting is a definite sore point for some of our
> users.
>
>
>
> Any indication on performance differences?
>
>
>
> cheers,
>
> -mike
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 01:13:01 2007
Return-Path: <java-user-return-28781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92856 invoked from network); 21 Jun 2007 01:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 01:13:00 -0000
Received: (qmail 33998 invoked by uid 500); 21 Jun 2007 01:12:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33973 invoked by uid 500); 21 Jun 2007 01:12:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33953 invoked by uid 99); 21 Jun 2007 01:12:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 18:12:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of antony.sequeira@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 18:12:48 -0700
Received: by wr-out-0506.google.com with SMTP id i4so364450wra
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 18:12:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=BiuzapR6dLkRsFgCkyPe39KmqOlW0d2NZjKfYPeCS4lJOa5JqbkVTuORXEzmkFvjucTqUMQDlSEFp+Lq03skkqc80OFxG7LYhGNx1bh+94LE074yVwQo7TKWHClTx1ExCN0SoBZv6r1d+4w4XTKvvCFSvmRzpI4NmYS42S5wblc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=C2IigtaAr+nR1gCc5G2cFNhWQUqHTwImva9Fh79oUA2KcCU2HC/K30X0D0AMAODtha3Md0mWc+RE2/eoYczGO6lewpq6NUE7nqx+bnnwhEYNsWkKQ7CsT/G9qqcvgTYqoyr9bCuxTl15GbieLUC2604GvQKYJcM8D2FVJqSzSDk=
Received: by 10.90.29.18 with SMTP id c18mr1196958agc.1182388347234;
        Wed, 20 Jun 2007 18:12:27 -0700 (PDT)
Received: by 10.90.84.16 with HTTP; Wed, 20 Jun 2007 18:12:27 -0700 (PDT)
Message-ID: <6fb33c150706201812k71cb56b3rf956301207adaeeb@mail.gmail.com>
Date: Wed, 20 Jun 2007 18:12:27 -0700
From: "Antony Sequeira" <antony.sequeira@gmail.com>
To: java-user@lucene.apache.org
Subject: query parser behavior with operator AND
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Following is an output from my test code, where the left hand side is
the query and right hand side is the parsed query print. There are two
sets , one with the default operator set to OR , the other with
default set to AND

The output looks funny for the  for the first example when the
operator is set to AND

Is this a bug. Can some one point me to a bug if it is or help me
understand so I can explain this behavior.

-Antony Sequeira

Tets code output follows:
Testing with default operator set to OR
(fooooo AND barrrr OR "fooooo barrrr") -> +xxxx:fooooo +xxxx:barrrr
xxxx:"fooooo barrrr"
(fooooo AND (barrrr OR "fooooo barrrr")) -> +xxxx:fooooo +(xxxx:barrrr
xxxx:"fooooo barrrr")
((fooooo AND barrrr) OR "fooooo barrrr")  -> (+xxxx:fooooo
+xxxx:barrrr) xxxx:"fooooo barrrr"
Testing with default operator set to AND
(fooooo AND barrrr OR "fooooo barrrr") -> +xxxx:fooooo xxxx:barrrr
xxxx:"fooooo barrrr"
(fooooo AND (barrrr OR "fooooo barrrr")) -> +xxxx:fooooo +(xxxx:barrrr
xxxx:"fooooo barrrr")
((fooooo AND barrrr) OR "fooooo barrrr")  -> (+xxxx:fooooo
+xxxx:barrrr) xxxx:"fooooo barrrr"


Test code follows:


import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.queryParser.QueryParser.Operator;
import org.apache.lucene.search.Query;

public class QueryParserBug {

    String [] testQueries = {
            "(fooooo AND barrrr OR \"fooooo barrrr\")",
            "(fooooo AND (barrrr OR \"fooooo barrrr\"))",
            "((fooooo AND barrrr) OR \"fooooo barrrr\") ",
    };

    QueryParser queryParser;

    private Analyzer analyzer;

    private void log(String msg) {
        System.out.println(msg);
    }

    QueryParserBug() throws Exception {
        analyzer = new StandardAnalyzer();
        queryParser = new QueryParser("xxxx",analyzer);
    }

    public static void main(String [] args) {
        try {
            new QueryParserBug().test(Operator.OR);
            new QueryParserBug().test(Operator.AND);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void test(Operator opr) throws ParseException {
        log("Testing with default operator set to " + opr);
        queryParser.setDefaultOperator(opr);
        for (String query: testQueries) {
            Query lq = queryParser.parse(query);
            log(query + " -> " + lq.toString());
        }

    }

}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 02:00:16 2007
Return-Path: <java-user-return-28782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9208 invoked from network); 21 Jun 2007 02:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 02:00:16 -0000
Received: (qmail 97069 invoked by uid 500); 21 Jun 2007 02:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97044 invoked by uid 500); 21 Jun 2007 02:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 7494 invoked by uid 99); 20 Jun 2007 09:17:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Message-ID: <4678F0BB.4060709@knowledgeview.co.uk>
Date: Wed, 20 Jun 2007 10:17:47 +0100
From: Steve Liles <steve@knowledgeview.co.uk>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: ways to minimize index size?
References: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com> <cfc620660703140633x75af8fd5q929eb1b2fc7b1a4e@mail.gmail.com> <11195406.post@talk.nabble.com> <359a92830706190709l1e9dd54au254075bba125146e@mail.gmail.com> <11195897.post@talk.nabble.com> <11207318.post@talk.nabble.com>
In-Reply-To: <11207318.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Sender: Steve Liles <steve@knowledgeview.info>
X-Virus-Checked: Checked by ClamAV on apache.org

Compression aside you could index the "contents" as terms in separate 
fields instead of tokenized text, and disable storing of norms:

String outgoingNumber="9198408365809";
String incomingNumber="9840861114";

_doc.add(new Field("outgoingNumber", outgoingNumber, Store.NO, 
Index.NO_NORMS));
_doc.add(new Field("incomingNumber", incomingNumber, Store.NO, 
Index.NO_NORMS));

According to the docs "Index.NO_NORMS" will save you one byte per 
document in the index.

Or you could index all of the data as separate terms in the same 
"contents" field if you wanted (make the first param "contents" for all 
of the terms), which is more comparable to what you are currently doing.
(Another advantage is that the Analyzer will not be used for fields 
which are untokenized, and indexing should be faster.)

...

One way to compress numerical data (possibly not the best - i'm no 
expert) is to change the base of the number that is indexed / stored in 
the index.

java.lang.Long and java.math.BigInteger have methods for converting from 
one radix to another. Taking your "outgoingNumber" as an example:

//compression
BigInteger  _bi = new java.math.BigInteger("9198408365809", 10);
System.out.println(_bi.toString(36));

 > 39douufap

//decompression
BigInteger _bi = new java.math.BigInteger("39douufap", 36);
System.out.println(_bi.toString(10));

 >9198408365809

Converting to a higher radix will give you better compression but you'll
have to do it yourself as the jdk classes only work up to base 36
<http://en.wikipedia.org/wiki/Base_36>.

It's worth compressing your unstored "contents" field as well as your 
stored "records" field, as the unique terms in the "contents" field will 
effectively be stored.

Also don't forget to convert the terms when you search too, otherwise 
you won't find anything ;)

Steve.


Sebastin wrote:
> When i use the standardAnalyzer storage size increases.how can i minimize
> index store
>
> Sebastin wrote:
>   
>>                        
>> String outgoingNumber="9198408365809";
>> String incomingNumber="9840861114";
>> String datesc="070601";
>> String imsiNumber="444021365987";
>> String callType="1";
>>
>> //Search Fields
>>  String contents=(outgoingNumber+" "+incomingNumber+" "+dateSc+"
>> "+imsiNumber+" "+callType );
>>
>> //Display Fields
>>                      
>>                           String records=(callingPartyNumber+"
>> "+calledPartyNumber+" "+dateSc+" "+chargDur+" "+incomingRoute+"
>> "+outgoingRoute+" "+timeSc);
>>                           
>>                      
>>                        IndexWriter indexWriter = new
>> IndexWriter(indexDir,new StandardAnalyzer(),true);  
>>                         
>>                           Document document = new Document();
>>   
>>                              document.add(new
>> Field("contents",contents,Field.Store.NO,Field.Index.TOKENIZED));
>>                              
>>                      
>>                      
>>                 document.add(new
>> Field("records",records,Field.Store.YES,Field.Index.NO));
>>                              
>>                            
>>                              indexWriter.setUseCompoundFile(true);
>>                              indexWriter.addDocument(document);
>>                           }
>>
>> please help me to acheive the minimum size
>>
>>
>>
>>
>>
>> Erick Erickson wrote:
>>     
>>> Show us the code you use to index. Are you storing the fields?
>>> omitting norms? Throwing out stop words?
>>>
>>> Best
>>> Erick
>>>
>>> On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>>>       
>>>> Hi Does anyone give me an idea to reduce the Index size to down.now i am
>>>> getting 42% compression in my index store.i want to reduce upto 70%.i
>>>> use
>>>> standardanalyzer to write the document.when i use SimpleAnalyzer it
>>>> reduce
>>>> upto 58% but i couldnt search the document.please help me to acheive.
>>>>
>>>> Thanks in advance
>>>>
>>>> Jeff-188 wrote:
>>>>         
>>>>>> I found that reducing my index from 8G to 4G (through not stemming)
>>>>>>             
>>>> gave
>>>> me
>>>>         
>>>>> about a 10% performance improvement.
>>>>>
>>>>> How did you do this? I don't see this as an option.
>>>>>
>>>>> Jeff
>>>>>
>>>>>
>>>>>           
>>>> --
>>>> View this message in context:
>>>> http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11195406
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>>>       
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 04:31:49 2007
Return-Path: <java-user-return-28783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63231 invoked from network); 21 Jun 2007 04:31:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 04:31:48 -0000
Received: (qmail 429 invoked by uid 500); 21 Jun 2007 04:31:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 386 invoked by uid 500); 21 Jun 2007 04:31:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 375 invoked by uid 99); 21 Jun 2007 04:31:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 21:31:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ssharma@chambal.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jun 2007 21:31:39 -0700
Received: by ug-out-1314.google.com with SMTP id m2so532234uge
        for <java-user@lucene.apache.org>; Wed, 20 Jun 2007 21:31:17 -0700 (PDT)
Received: by 10.78.97.7 with SMTP id u7mr680827hub.1182400277394;
        Wed, 20 Jun 2007 21:31:17 -0700 (PDT)
Received: by 10.78.202.9 with HTTP; Wed, 20 Jun 2007 21:31:17 -0700 (PDT)
Message-ID: <90530f7c0706202131i4e962ecbic71eec4d4a26796d@mail.gmail.com>
Date: Thu, 21 Jun 2007 10:01:17 +0530
From: "Sawan Sharma" <ssharma@chambal.com>
To: java-user@lucene.apache.org
Subject: Facet searching on single field with multiple words value
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47083_15026293.1182400277119"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47083_15026293.1182400277119
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi friends,

I tried to implement the facet searching in a sample code and when I tried
it with various case and found no result in one case.I wanted to narrow by
one field "title" and gave the multiple word or say phrase.

So First, in this preparing the lucene query and converting it into
QueryFilter.
Adding IndexReader to this filter query and converting it into BitSet.
and We are preparing TermQuery on the basis of lucene field and given
value(Getting the field and value dynamically and value can be single word
or multiple word). Adding this term query to query filter and again
converting it to BitSet.
so this has two different bitset, one is based on free text lucene query and
another is on the basis of field by which I need to narrow by. and doing the
following operation:-
<code>
 secondBitSet.and(FirstBitSet);
 int count=secondBitSet.cardinality();
<code>
Now, The problem occured when I passed the multiple words in term query.
e.g.<code>
QueryFilter filter = new QueryFilter(new TermQuery(new Term(FieldName,
FieldValue)));
<code>
where field name  and field value dynamically getting.
here we take the example value.
FieldName:- "Title"
FieldValue:- "Software Development" ot it may be "Software AND Development".
In this case i'm not getting the result. i.e . counts= 0.

Code is given below.
<code>
IndexReader reader = searcher.getIndexReader();
BitSet firstBitSet =  firstQueryFilter.bits(reader);

QueryFilter filter = new QueryFilter(new TermQuery(new Term(FieldName,
FieldValue)));
BitSet secondBitSet = filter.bits(reader);

secondBitSet.and (FirstBitSet);
int count=secondBitSet.cardinality();

</code>
-- 
Regards

Sawan

------=_Part_47083_15026293.1182400277119--

From java-user-return-28784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 08:24:52 2007
Return-Path: <java-user-return-28784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27587 invoked from network); 21 Jun 2007 08:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 08:24:50 -0000
Received: (qmail 45167 invoked by uid 500); 21 Jun 2007 08:24:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45128 invoked by uid 500); 21 Jun 2007 08:24:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45117 invoked by uid 99); 21 Jun 2007 08:24:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 01:24:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.85.81] (HELO web36913.mail.mud.yahoo.com) (209.191.85.81)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jun 2007 01:24:42 -0700
Received: (qmail 47197 invoked by uid 60001); 21 Jun 2007 08:24:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=jmoto7m52o0HG55HCEVkzlgszhv859OHPfO4OU3KovRqEQZpvfUMnsf4UPif8FxF3MAt8VN9OfmYUPhF4URwutvxFCacgJM6ilykFmJEmN8/cQt2UyxwShE65+9sd4DyXgkahniWUf2mNYu7ksd3NwCtH2v1ia6X+wmRMEK0cz8=;
X-YMail-OSG: ylT0R7IVM1kjrIa_WCwTbCmDIdX0QaSF8vN2ap7TIZ49uR783c6UrdbWlJsQsqAjOJA8NJpHkQ--
Received: from [209.191.106.127] by web36913.mail.mud.yahoo.com via HTTP; Thu, 21 Jun 2007 01:24:20 PDT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Thu, 21 Jun 2007 01:24:20 -0700 (PDT)
From: sejourne kevin <sejourne_kevin@yahoo.fr>
Subject: Re : The localized Languages.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <139995.46997.qm@web36913.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank, =0A=0AI found it. I wasn't aware of those both source tree.=0A=0AK=
=E9vin.=0A=0A----- Message d'origine ----=0ADe : Doron Cohen <DORONC@il.ibm=
.com>=0A=C0 : java-user@lucene.apache.org=0AEnvoy=E9 le : Mercredi, 20 Juin=
 2007, 23h42mn 17s=0AObjet : Re: The localized Languages.=0A=0AHi Kevin, ar=
e you looking for the sources under=0Acontrib\analyzers?=0A=0AJavadocs have=
 both "core" and "contrib" together,=0Abut they are separated in the source=
 tree, (and=0Aseparated jars are created for them in the binary=0Adist).=0A=
=0ADoron=0A=0Asejourne kevin <sejourne_kevin@yahoo.fr> wrote on 20/06/2007 =
15:31:20:=0A=0A> Hi,=0A>=0A> It seem that all localized languages Analyser =
are absent from=0A> org.apache.lucene.analysis.* in the lastest 2.2=0A> sou=
rce release of Lucene. Is this normal or not ?=0A> regards,=0A>=0A>=0A> K=
=E9vin.=0A=0A=0A-----------------------------------------------------------=
----------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A=0A=0A=0A=0A      ______________________________________________________=
_______________________ =0ANe gardez plus qu'une seule adresse mail ! Copie=
z vos mails vers Yahoo! Mail 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 11:05:22 2007
Return-Path: <java-user-return-28785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99367 invoked from network); 21 Jun 2007 11:05:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 11:05:20 -0000
Received: (qmail 69141 invoked by uid 500); 21 Jun 2007 11:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69103 invoked by uid 500); 21 Jun 2007 11:05:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69091 invoked by uid 99); 21 Jun 2007 11:05:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 04:05:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [89.107.46.3] (HELO [89.107.46.3]) (89.107.46.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 04:05:12 -0700
Received: from [10.22.13.70] (helo=it-d-mspamer ident=mspamer)
	by [89.107.46.3] with esmtp (Exim 4.63)
	(envelope-from <mspamer@ebuyer.com>)
	id 1I1KT4-0006v0-0r
	for java-user@lucene.apache.org; Thu, 21 Jun 2007 12:04:50 +0100
Subject: All keys for a field
From: Martin Spamer <mspamer@ebuyer.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Organization: Ebuyer.com
Date: Thu, 21 Jun 2007 12:06:21 +0100
Message-Id: <1182423981.4507.10.camel@it-d-mspamer>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


I need to return all of the keys for a certain field, essentially
"fieldName:*".    This causes a ParseException / lexical error
Encountered: "*" (42), after : ""

I understand why this fails, WildCard prevent this to keep the results
manageble.  In my case the number of results will always be managable.
the field contents is a closed set of values from a DB lookup table.

Luke can list the top keys via it's Overview tab, so this must be
possible.  I just can't figure out how.

I've tried googling but I'm just getting general stuff on wildcards, I
can't find the correct search terms to use.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 13:45:50 2007
Return-Path: <java-user-return-28786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70085 invoked from network); 21 Jun 2007 13:45:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 13:45:49 -0000
Received: (qmail 19176 invoked by uid 500); 21 Jun 2007 13:45:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18882 invoked by uid 500); 21 Jun 2007 13:45:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18871 invoked by uid 99); 21 Jun 2007 13:45:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 06:45:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 06:45:40 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I1MyN-00023I-3s
	for java-user@lucene.apache.org; Thu, 21 Jun 2007 15:45:19 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id VQG+s3JHpepV for <java-user@lucene.apache.org>;
	Thu, 21 Jun 2007 15:45:17 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I1MyL-00023A-ML
	for java-user@lucene.apache.org; Thu, 21 Jun 2007 15:45:17 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <NBA56AVG>; Thu, 21 Jun 2007 15:45:17 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C526D8@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Bug in QueryParser?
Date: Thu, 21 Jun 2007 15:45:17 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi folks!

I'm having a little problem with a specific query that does not seem to =
get
parsed correctly. If a term has both a leading and a trailing * =
wildcard
character, I get no results in Lucene 2.1.0. It works when I omit one =
of the
stars, and I activated the option to allow leading wildcards.
Example: *project*

When I insert a ? somewehere in the query, it works again, which leads =
me to
the conclusion that this must be a bug in the QueryParser.
Example: *pro?ect*

Is this a known issue? I couldn't find anything about this.


Thanks a lot!


Michael B=F6ckling

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 13:46:56 2007
Return-Path: <java-user-return-28787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70657 invoked from network); 21 Jun 2007 13:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 13:46:54 -0000
Received: (qmail 25136 invoked by uid 500); 21 Jun 2007 13:46:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25088 invoked by uid 500); 21 Jun 2007 13:46:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25070 invoked by uid 99); 21 Jun 2007 13:46:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 06:46:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 06:46:46 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: All keys for a field
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 21 Jun 2007 09:46:25 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5607F832@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: All keys for a field
Thread-Index: Acez9A4xYwLtxyq+TlyrRH4KmZeoLgAFktAA
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

parser =3D new QueryParser(....);           =20
parser.setAllowLeadingWildcard(true);=20

-----Original Message-----
From: Martin Spamer [mailto:mspamer@ebuyer.com]=20
Sent: Thursday, June 21, 2007 7:06 AM
To: java-user@lucene.apache.org
Subject: All keys for a field


I need to return all of the keys for a certain field, essentially
"fieldName:*".    This causes a ParseException / lexical error
Encountered: "*" (42), after : ""

I understand why this fails, WildCard prevent this to keep the results
manageble.  In my case the number of results will always be managable.
the field contents is a closed set of values from a DB lookup table.

Luke can list the top keys via it's Overview tab, so this must be
possible.  I just can't figure out how.

I've tried googling but I'm just getting general stuff on wildcards, I
can't find the correct search terms to use.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 14:04:37 2007
Return-Path: <java-user-return-28788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80249 invoked from network); 21 Jun 2007 14:04:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 14:04:35 -0000
Received: (qmail 88618 invoked by uid 500); 21 Jun 2007 14:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88573 invoked by uid 500); 21 Jun 2007 14:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88559 invoked by uid 99); 21 Jun 2007 14:04:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 07:04:31 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FORGED_YAHOO_RCVD,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 07:04:27 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I1NGY-0002z3-Gq
	for java-user@lucene.apache.org; Thu, 21 Jun 2007 07:04:06 -0700
Message-ID: <11233766.post@talk.nabble.com>
Date: Thu, 21 Jun 2007 07:04:06 -0700 (PDT)
From: Mahdi Rahimi <mhd_rhm@yahoo.com>
To: java-user@lucene.apache.org
Subject: JavaCC Download
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17991_23478444.1182434646466"
X-Nabble-From: mhd_rhm@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17991_23478444.1182434646466
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi.

How can I access JavaCC??

Thanks
-- 
View this message in context: http://www.nabble.com/JavaCC-Download-tf3958940.html#a11233766
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_17991_23478444.1182434646466--


From java-user-return-28789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 14:42:58 2007
Return-Path: <java-user-return-28789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 640 invoked from network); 21 Jun 2007 14:42:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 14:42:58 -0000
Received: (qmail 90118 invoked by uid 500); 21 Jun 2007 14:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90085 invoked by uid 500); 21 Jun 2007 14:42:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90064 invoked by uid 99); 21 Jun 2007 14:42:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 07:42:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 07:42:46 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l5LEgOtF018267
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 10:42:25 -0400
Message-ID: <467A8E41.4090801@syr.edu>
Date: Thu, 21 Jun 2007 10:42:09 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: JavaCC Download
References: <11233766.post@talk.nabble.com>
In-Reply-To: <11233766.post@talk.nabble.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

Mahdi Rahimi wrote:
> Hi.
> 
> How can I access JavaCC??
> 
> Thanks

https://javacc.dev.java.net/

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 15:16:47 2007
Return-Path: <java-user-return-28790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89613 invoked from network); 21 Jun 2007 15:16:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 15:16:46 -0000
Received: (qmail 24219 invoked by uid 500); 21 Jun 2007 15:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24195 invoked by uid 500); 21 Jun 2007 15:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24175 invoked by uid 99); 21 Jun 2007 15:16:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 08:16:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 08:16:33 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l5LFGBsM029582
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 11:16:12 -0400
Message-ID: <467A962C.10001@syr.edu>
Date: Thu, 21 Jun 2007 11:15:56 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Facet searching on single field with multiple words value
References: <90530f7c0706202131i4e962ecbic71eec4d4a26796d@mail.gmail.com>
In-Reply-To: <90530f7c0706202131i4e962ecbic71eec4d4a26796d@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sawan,

Sawan Sharma wrote:
> Now, The problem occured when I passed the multiple words in term query.
> e.g.<code>
> QueryFilter filter = new QueryFilter(new TermQuery(new Term(FieldName,
> FieldValue)));
> <code>
> where field name  and field value dynamically getting.
> here we take the example value.
> FieldName:- "Title"
> FieldValue:- "Software Development" ot it may be "Software AND
> Development".
> In this case i'm not getting the result. i.e . counts= 0.

It looks to me as though you expect the "Software AND Development" query
to be parsed so that it matches a document containing both "Software"
and "Development" terms, but TermQuery does not do query parsing - in
the code above, you are telling Lucene to use "Software AND Development"
as a literal string to be matched.

Perhaps you should be using QueryParser[1] to parse user-supplied queries?

At a minimum, you should make sure that the analyzer used to produce
your index is compatible with the one you use with your queries.  The
simplest form of compatibility, of course, is to use the same analyzer
in both places.  (See the FAQ "Why is it important to use the same
analyzer type during indexing and search?"[2])

As always when questions about the contents of indexes come up, Luke[3]
is indispensable.

Steve

[1]
<http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/queryParser/QueryParser.html>
[2]
<http://wiki.apache.org/lucene-java/LuceneFAQ#head-0f374b0fe1483c90fe7d6f2c44472d10961ba63c>
[3] <http://www.getopt.org/luke/>

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 15:42:41 2007
Return-Path: <java-user-return-28791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2378 invoked from network); 21 Jun 2007 15:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 15:42:40 -0000
Received: (qmail 13066 invoked by uid 500); 21 Jun 2007 15:42:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13025 invoked by uid 500); 21 Jun 2007 15:42:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12992 invoked by uid 99); 21 Jun 2007 15:42:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 08:42:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 08:42:31 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l5LFg9p3060474
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 15:42:09 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5LFg9o6876558
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 17:42:09 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5LFg8A5017004
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 17:42:08 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5LFg82x017000
	for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 17:42:08 +0200
In-Reply-To: <F60407925D044842B7E21677C8B8CE2818C526D8@fafnir.intra.dmc.de>
Subject: Re: Bug in QueryParser?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF82682567.F086090D-ON88257301.005593A4-88257301.0055EF64@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 21 Jun 2007 08:38:38 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 21/06/2007 18:42:08
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael, yes you're right this was a bug in 2.1 that
was (issue LUCENE-813) - so this should work for you
with the latest Lucene version (2.2).
Regards, Doron

Michael B=F6ckling wrote:

> Hi folks!
>
> I'm having a little problem with a specific query that does not
> seem to get
> parsed correctly. If a term has both a leading and a trailing * wildc=
ard
> character, I get no results in Lucene 2.1.0. It works when I
> omit one of the
> stars, and I activated the option to allow leading wildcards.
> Example: *project*
>
> When I insert a ? somewehere in the query, it works again,
> which leads me to
> the conclusion that this must be a bug in the QueryParser.
> Example: *pro?ect*
>
> Is this a known issue? I couldn't find anything about this.
>
>
> Thanks a lot!
>
>
> Michael B=F6ckling=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 16:29:12 2007
Return-Path: <java-user-return-28792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22891 invoked from network); 21 Jun 2007 16:29:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 16:29:11 -0000
Received: (qmail 18693 invoked by uid 500); 21 Jun 2007 16:29:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18653 invoked by uid 500); 21 Jun 2007 16:29:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18642 invoked by uid 99); 21 Jun 2007 16:29:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 09:29:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 09:29:02 -0700
Received: by ug-out-1314.google.com with SMTP id m2so650538uge
        for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 09:28:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LySeK8lbaRborYEgVogzBtS5r7RZgNcSVxbi4b/cMdRA+opL7+I3uDjHvnXca0Ju6PamXo8PVg6rpzxiYBwUNelLWEO0Uy7p2/wmdY4ARmJslpdVthvAqHiWdwHNSzw7W7OLfhdOO41y5Am8w5DVuIZCzRTfNETqy+wyDGjRJNM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EcQEi0tVtFo4DjIwV7Bo2y8M3aZfYGYSgzhbBpyEj5nAJf/SRe9JH0A4mbxlh775rtQy7cxb0FsFRm+z7Uqe6oc8LJz0Ch8cT15YZk3drtuhQ+w1mBev8o2iB363kvlB+HLpLhJnVhEQdfIBIivT9O/coFjWjhZPNukK9yKOzyY=
Received: by 10.82.189.6 with SMTP id m6mr4226812buf.1182443320954;
        Thu, 21 Jun 2007 09:28:40 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 21 Jun 2007 09:28:40 -0700 (PDT)
Message-ID: <359a92830706210928ua7a18d5y9077cc06e6419f45@mail.gmail.com>
Date: Thu, 21 Jun 2007 12:28:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: All keys for a field
In-Reply-To: <1182423981.4507.10.camel@it-d-mspamer>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_92129_18931865.1182443320928"
References: <1182423981.4507.10.camel@it-d-mspamer>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_92129_18931865.1182443320928
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could also just use TermEnum, something like

        TermEnum termEnum = this.reader.getIndexReader().terms(new
Term(field, ""));

        Term term = termEnum.term();

        while ((term != null) && term.field().equals(field)) {
            System.out.println(term.text());
            termEnum.next();
            term = termEnum.term();
        }


On 6/21/07, Martin Spamer <mspamer@ebuyer.com> wrote:
>
>
> I need to return all of the keys for a certain field, essentially
> "fieldName:*".    This causes a ParseException / lexical error
> Encountered: "*" (42), after : ""
>
> I understand why this fails, WildCard prevent this to keep the results
> manageble.  In my case the number of results will always be managable.
> the field contents is a closed set of values from a DB lookup table.
>
> Luke can list the top keys via it's Overview tab, so this must be
> possible.  I just can't figure out how.
>
> I've tried googling but I'm just getting general stuff on wildcards, I
> can't find the correct search terms to use.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_92129_18931865.1182443320928--

From java-user-return-28793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 17:28:25 2007
Return-Path: <java-user-return-28793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41319 invoked from network); 21 Jun 2007 17:28:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 17:28:24 -0000
Received: (qmail 8903 invoked by uid 500); 21 Jun 2007 17:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8871 invoked by uid 500); 21 Jun 2007 17:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8859 invoked by uid 99); 21 Jun 2007 17:28:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 10:28:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.217] (HELO web26006.mail.ukl.yahoo.com) (217.12.10.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jun 2007 10:28:15 -0700
Received: (qmail 34996 invoked by uid 60001); 21 Jun 2007 17:27:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Vx20Pa531gqn67J/NmsjWByaFlDuhAIaw3ROK+sVXt7x3YaYjsOQouyrvmZsftyxImd7QJEJINm1tWL7bYqOZLFNAeEVhHuY66xNaTehLNrhgAFXf3nrsEctjXgeoXn/YjR66eC7q3WeFb8KAnbAOHP+IJ9xCwZsxyyTtO11yaA=;
X-YMail-OSG: WKWWg1IVM1mcK2MCvYzxs7KFWkAbCuk7oLXg40Mhfq0e347jWPPw2JPatpzkoy4eslWypHL2JtBYhq6YBVHTgbUsyU9ZD8_AB87hK.B0N2D3gVWi
Received: from [193.36.230.96] by web26006.mail.ukl.yahoo.com via HTTP; Thu, 21 Jun 2007 17:27:53 GMT
X-Mailer: YahooMailRC/651.29 YahooMailWebService/0.7.41.16
Date: Thu, 21 Jun 2007 17:27:52 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Highlighter that works with phrase and span queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <528917.34258.qm@web26006.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

While we're considering highlighter performance there was some discussion of this around another implementation here: http://issues.apache.org/jira/browse/LUCENE-644

Ronnie Kolehmainen's implementation was proven faster than the current contrib highlighter but was almost certainly missing some of the features/support for edge cases.

There are certainly some optimisations in the existing implementation that should be possible. Not building StringBuffers for document fragments with no hits seems an obvious step. Whether this can be done while preserving the existing "helper" interfaces (Fragmenter/Scorer) remains to be seen.

Cheers,
Mark


----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, 21 June, 2007 2:11:52 AM
Subject: Re: Highlighter that works with phrase and span queries

I will work up some performance numbers over the next day or two to 
share with you. I have spent the last day or two with a profiler trying 
to find the biggest performance drains.

Unfortunately, I will probably not be able to squeeze out much more 
performance than the current Highlighter. When I started working on this 
project I considered starting from scratch to create a better, more 
accurate Highlighter. After some initial work I quickly came to the 
realization that Mark Harwood (with some additions by others) had 
already solved too many corner cases and interesting needs. The few 
alternate Highlighters in JIRA did not meet the standards set by Mark's 
highlighter. Trying to replicate all that work in a different manner 
didn't seem like a fruitful approach -- Harwood is more clever than I <g>

Taking that into account, I decided to extend the Highlighter using the 
great framework that is already in place. I implemented a new Scorer 
that acts much like the default Scorer, but when it finds a Query clause 
that is position sensitive (PhraseQuery, SpanQuery), it creates a 
MemoryIndex that is used extract the correct Spans for the Query (Credit 
to Paul Elschot and Mark Harwood for the approach). Non position 
sensitive Query claueses are handled similar to the way they where in 
the original highlighter's Scorer. This means that non position 
sensitive queries are likely the same speed as before, while position 
sensitive queries are likely a bit slower. For my uses, the thing is 
damned fast -- of course my uses involves small documents (Newspaper 
articles).

I am very interested in making this thing as fast as possible though, so 
I will build some benchmark tests and try to squeeze as much performance 
out of the Highligher as I can. I will also see if my Scorer is any 
faster than the original.

All that said, my guess is that one of the slowest parts of Highlighting 
is re-tokenizing the text. There is always the option of turning on 
TermVectors and using org.apache.lucene.search.highlight.TokenSources to 
get the TokenStream. Based on Mark H's comments, it may be twice as fast 
as re-tokenizing. This method can also be used with my new Highlighter 
code as well (which is more a plug-in to the old Highlighter than a 
replacement.)

Considering that both of your comments immediately went to performance, 
I will certainly be spending some time working on this.

- Mark

> Hi Mark,
>
> I know one large user (meaning: high query/highlight rates) of the current Highlighter and this user wasn't too happy with its performance.  I don't know the details, other than it was inefficient.  So now I'm wondering if you've benchmarked your Highlighter against that/current Highlighter to see not only which one is more accurate, but also which one is faster, and by how much?
>
> Thanks,
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>   

> This is really great, Mark.  I'll look into integrating it with Solr,
> as better phrase highlighting is a definite sore point for some of our
> users.
>
>
>
> Any indication on performance differences?
>
>
>
> cheers,
>
> -mike
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________ 
Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 18:20:34 2007
Return-Path: <java-user-return-28794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57532 invoked from network); 21 Jun 2007 18:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 18:20:32 -0000
Received: (qmail 22558 invoked by uid 500); 21 Jun 2007 18:20:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22369 invoked by uid 500); 21 Jun 2007 18:20:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22357 invoked by uid 99); 21 Jun 2007 18:20:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 11:20:28 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stopman@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 11:20:24 -0700
Received: by an-out-0708.google.com with SMTP id b20so135895ana
        for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 11:20:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=ke/DoeWKJ+Vw3xQwr8LIXFXoAiwimzgY5GCi3Zf11nW9apEDTncunpQI/VJD57iXnGg++IKSMbOtUXy1tbbrD+r0vr2qa0bDAuVZagWbUXsm3ECsyuL16yZUeSsOQmuszrwx6qQenJ3QcMqUNix2CM5RwksVx0w9jjURYs7TnTI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=baoD18nqsYu2SAusebcvnYCCYus/nyahXysAJYuF9cpLUCl7KvZ5ThDIPxEAfXE0c7yBNpVzA7XjkV+O9CFsTNNoKX2+ZBUw7jab/gDIObgjm9Hw/WPaW3ufKt+UQmTlW2U8fSv+DmSTlpsyNiVAe65gf5BHSkV5wbhaEACTrJ0=
Received: by 10.100.128.8 with SMTP id a8mr1293016and.1182450003317;
        Thu, 21 Jun 2007 11:20:03 -0700 (PDT)
Received: by 10.100.93.3 with HTTP; Thu, 21 Jun 2007 11:20:03 -0700 (PDT)
Message-ID: <652776090706211120y297239d9m9e43274ed752423a@mail.gmail.com>
Date: Thu, 21 Jun 2007 11:20:03 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Highlighting for a message board thread
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_128495_28585948.1182450003291"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_128495_28585948.1182450003291
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I've got a document that contains a bunch of separate posts about one topic
(a message board thread), all the posts become concatenated together in the
indexed lucene document.
I would like to create highlights and know where the highlight came from,
meaning if the text fragment came from post_id 1001, I would want that
returned with the TextFragment.
One option would be to create another index with (thread_id, post_id,
post_text) and run another search on that index to get the best fragments,
which seems pretty redundant and will
slow things down. Another option would be to encode the post_id in the
document field for the entire thread on the message board, but that seems
clunky and I've got to create a
custom highlighter that parses the post_ids out.

Any other ideas?

-M

------=_Part_128495_28585948.1182450003291--

From java-user-return-28795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 21:20:31 2007
Return-Path: <java-user-return-28795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14690 invoked from network); 21 Jun 2007 21:20:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 21:20:29 -0000
Received: (qmail 51789 invoked by uid 500); 21 Jun 2007 21:20:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51739 invoked by uid 500); 21 Jun 2007 21:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51724 invoked by uid 99); 21 Jun 2007 21:20:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 14:20:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 14:20:20 -0700
Received: by an-out-0708.google.com with SMTP id b20so147165ana
        for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 14:19:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=i2LO8goJMQz453UUFYV1B5uSfDTescL9wOwIh7GZTyzYw7RK24YJYLCZhSgBClqKX8oqwSUKeVLmOd7yrXTwLmXaN6t24zqSpuNGOpgEgWXjV4p0vbn0+GZ46u+yNg3jNFFa1ij8iatz6UPxMbIJ+h3o94wrDoGhiVuuuNbddyA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=n6pA4fyK9bEh0DP5vc3qW1ckOCD3m19Gm1eT8HNrL1d508zxgybOE+U5tfvSFb2aVHwfIY0MiHOJcdwewl4HUtZAvDQ87dbVdVsbn52ib/Jzi04ZAXgS9fnHSjdUQJ+et7EdZBEHKJ9EN9dkzc7nEGYqd+2Vs/o3TXPEVT6pnZw=
Received: by 10.100.33.14 with SMTP id g14mr1386854ang.1182460799496;
        Thu, 21 Jun 2007 14:19:59 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id d19sm2983172and.2007.06.21.14.19.58
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 21 Jun 2007 14:19:59 -0700 (PDT)
Message-ID: <467AEB5A.6040301@gmail.com>
Date: Thu, 21 Jun 2007 17:19:22 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <528917.34258.qm@web26006.mail.ukl.yahoo.com>
In-Reply-To: <528917.34258.qm@web26006.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Results of my tests :

The new SpanScorer is just about the same speed as the old Highlighter's 
QueryScorer if the Query contains no position sensitive elements. This 
is only the case, however, if the CachingTokenFilter (from the analysis 
package) is changed to use an ArrayList instead of a LinkedList 
(LinkedList is the wrong data structure for this use).

The new SpanScorer is obviously not as fast when dealing with 
PhraseQuerys and SpanQuerys. It takes about twice the time or less to 
correctly highlight these Query types when compared to just highlighting 
every term from the Span or Phrase Query.

As far as my comment about using TokenSources to generate the 
TokenStream -- for short docs (5-15k) and a quick analyzer, it takes 
just as long to get TermVector info and sort it as to re-analyze the 
text. As docs get bigger, you will certainly start to see some benefits 
though.

Besides the re-analyzing, the reason the Highlighter is slow for very 
large documents is that every token from a doc is examined and scored 
and then the doc is rebuilt piece by piece from each token. This does 
not scale well <g> (Especially in combination with re-analyzer text). 
While there is probably room for improvement here, I don't see the 
current approach ever reaching the speed of Ronnie Kolehmainen's 
Highlighter. However, I also don't see Ronnie's Highlighter ever being 
as flexible or able to cover as many use cases as the current contrib 
Highlighter approach.

Ronnie's approach works well for large docs because it only deals with 
the tokens of interest (tokens from the Query) rather than scoring every 
token. This is done using TermVectorOffsets and so immediately requires 
that you have turned those on. Further, I don't see this approach ever 
being easily extended to supporting Spans or PhraseQuerys without 
reimplementing special Lucene search logic. Those are the reasons that I 
chose not to work with Ronnie's Highlighter (particularly, my main 
motivation was Spans support). Also, to be able to ignore fields when 
Highlighting, Ronnnie's Highlighter would likely have to try and grab 
TermVectorOffsets for every field in the index for each Term in the 
Query. If you have a lot of fields this could be much slower. Even 
still, it can't be argued that Ronnie's Highlighter is not dramatically 
faster than the current Highlighter on very large documents, especially 
if your currently re-analyzing text. It is probably the perfect option 
for Otis's client if he has TermVectorOffsets on in his index or can 
easily re-index.


I am currently trying to think of some possible hybrid approach to 
highlighting...

I have fixed a few things with my Highlighter and will be updating it 
soon. Also, I forgot to mention, there is the dependency on MemoryIndex.

- Mark



mark harwood wrote:
> While we're considering highlighter performance there was some discussion of this around another implementation here: http://issues.apache.org/jira/browse/LUCENE-644
>
> Ronnie Kolehmainen's implementation was proven faster than the current contrib highlighter but was almost certainly missing some of the features/support for edge cases.
>
> There are certainly some optimisations in the existing implementation that should be possible. Not building StringBuffers for document fragments with no hits seems an obvious step. Whether this can be done while preserving the existing "helper" interfaces (Fragmenter/Scorer) remains to be seen.
>
> Cheers,
> Mark
>
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, 21 June, 2007 2:11:52 AM
> Subject: Re: Highlighter that works with phrase and span queries
>
> I will work up some performance numbers over the next day or two to 
> share with you. I have spent the last day or two with a profiler trying 
> to find the biggest performance drains.
>
> Unfortunately, I will probably not be able to squeeze out much more 
> performance than the current Highlighter. When I started working on this 
> project I considered starting from scratch to create a better, more 
> accurate Highlighter. After some initial work I quickly came to the 
> realization that Mark Harwood (with some additions by others) had 
> already solved too many corner cases and interesting needs. The few 
> alternate Highlighters in JIRA did not meet the standards set by Mark's 
> highlighter. Trying to replicate all that work in a different manner 
> didn't seem like a fruitful approach -- Harwood is more clever than I <g>
>
> Taking that into account, I decided to extend the Highlighter using the 
> great framework that is already in place. I implemented a new Scorer 
> that acts much like the default Scorer, but when it finds a Query clause 
> that is position sensitive (PhraseQuery, SpanQuery), it creates a 
> MemoryIndex that is used extract the correct Spans for the Query (Credit 
> to Paul Elschot and Mark Harwood for the approach). Non position 
> sensitive Query claueses are handled similar to the way they where in 
> the original highlighter's Scorer. This means that non position 
> sensitive queries are likely the same speed as before, while position 
> sensitive queries are likely a bit slower. For my uses, the thing is 
> damned fast -- of course my uses involves small documents (Newspaper 
> articles).
>
> I am very interested in making this thing as fast as possible though, so 
> I will build some benchmark tests and try to squeeze as much performance 
> out of the Highligher as I can. I will also see if my Scorer is any 
> faster than the original.
>
> All that said, my guess is that one of the slowest parts of Highlighting 
> is re-tokenizing the text. There is always the option of turning on 
> TermVectors and using org.apache.lucene.search.highlight.TokenSources to 
> get the TokenStream. Based on Mark H's comments, it may be twice as fast 
> as re-tokenizing. This method can also be used with my new Highlighter 
> code as well (which is more a plug-in to the old Highlighter than a 
> replacement.)
>
> Considering that both of your comments immediately went to performance, 
> I will certainly be spending some time working on this.
>
> - Mark
>
>   
>> Hi Mark,
>>
>> I know one large user (meaning: high query/highlight rates) of the current Highlighter and this user wasn't too happy with its performance.  I don't know the details, other than it was inefficient.  So now I'm wondering if you've benchmarked your Highlighter against that/current Highlighter to see not only which one is more accurate, but also which one is faster, and by how much?
>>
>> Thanks,
>> Otis
>>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>   
>>     
>
>   
>> This is really great, Mark.  I'll look into integrating it with Solr,
>> as better phrase highlighting is a definite sore point for some of our
>> users.
>>
>>
>>
>> Any indication on performance differences?
>>
>>
>>
>> cheers,
>>
>> -mike
>>
>>
>>   
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________ 
> Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
> your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 22:12:55 2007
Return-Path: <java-user-return-28796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39857 invoked from network); 21 Jun 2007 22:12:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 22:12:53 -0000
Received: (qmail 46540 invoked by uid 500); 21 Jun 2007 22:12:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46104 invoked by uid 500); 21 Jun 2007 22:12:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46093 invoked by uid 99); 21 Jun 2007 22:12:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 15:12:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.36] (HELO smtp005.mail.ukl.yahoo.com) (217.12.11.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jun 2007 15:12:44 -0700
Received: (qmail 15861 invoked from network); 21 Jun 2007 22:12:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=30qK8SLsiYxqUwJuc/WeI5/uUATqwpPkmSz+XYzWVSDCeLGhyTjA/Ft/0xiEeWW1ZohAukTPiCeGWDw3IZnP6td4GSYzJCNkC7iJ7FTyhhMX2Ok1a57VMi9DDRadzA6v46wBGBTd2Sdgs7DXrAo5bn6uPT9IVabtJVJW0Ra4yBY=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp005.mail.ukl.yahoo.com with SMTP; 21 Jun 2007 22:12:22 -0000
X-YMail-OSG: L7ml6ZwVM1lf0BU63JY_wevxNpznkBQyrPWNH9WGuY7N.FKgANK2vbXzx649p_Bs93Ihu8Km6g--
Message-ID: <467AF7C4.6050002@yahoo.co.uk>
Date: Thu, 21 Jun 2007 23:12:20 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <528917.34258.qm@web26006.mail.ukl.yahoo.com> <467AEB5A.6040301@gmail.com>
In-Reply-To: <467AEB5A.6040301@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark,
Good summary. I was running some timings earlier and my results echo 
your findings.

 >>I am currently trying to think of some possible hybrid approach to 
highlighting...

I was thinking along the lines of wrapping some core classes such as 
IndexReader to somehow observe the query matching process and deduce 
from that what to highlight (avoiding the need for MemoryIndex)  but I'm 
not sure that is viable. It would be nice to get some more match info 
out of the main query logic as it runs to aid highlighting rather than 
reverse engineering the basis of a match after the event.

 >>I have fixed a few things with my Highlighter and will be updating it 
soon.

Look forward to it!

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 23:35:25 2007
Return-Path: <java-user-return-28797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68391 invoked from network); 21 Jun 2007 23:35:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 23:35:23 -0000
Received: (qmail 60765 invoked by uid 500); 21 Jun 2007 23:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60726 invoked by uid 500); 21 Jun 2007 23:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60715 invoked by uid 99); 21 Jun 2007 23:35:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 16:35:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jun 2007 16:35:14 -0700
Received: (qmail 96972 invoked from network); 21 Jun 2007 23:28:43 -0000
Received: from unknown (HELO CD92922) (71.201.177.115)
  by host412.ipowerweb.com with SMTP; 21 Jun 2007 23:28:43 -0000
From: "Tanya Levshina" <tanya@volvovski.com>
To: <java-user@lucene.apache.org>
Subject: Problem using RAMDirectory as a buffer
Date: Thu, 21 Jun 2007 18:34:44 -0500
Message-ID: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0076_01C7B432.D72466C0"
X-Mailer: Microsoft Office Outlook 11
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-index: Ace0XE3T509urFsdTf661DbXWGbt/w==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0076_01C7B432.D72466C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

I am trying to use RAMDirectory as a buffer and am having some problems. I
create indexes using FSDirectory directly and index directory contains the
following files:

bash-3.00$ ls ~/index/

_0.cfs  segments_3  segments.gen

 

 

When I am trying to use RAMDirectory as a buffer and then add indexes to a
FSDirectory the directory looks like:

-bash-3.00$ ls ~/index/

segments_1  segments.gen

 

and search is failing.

 

This is a code I use to do it:

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;

import org.apache.lucene.index.IndexWriter;

import org.apache.lucene.store.Directory;

import org.apache.lucene.store.FSDirectory;

import org.apache.lucene.store.RAMDirectory;

import java.io.FileReader;

 

class Test {

  public static void main(String[] args) throws Exception{

         FSDirectory fsDir= FSDirectory.getDirectory(args[0]);

         RAMDirectory ramDir=new RAMDirectory();

         IndexWriter fsWriter=new IndexWriter(fsDir,new
StandardAnalyzer(),true);

         IndexWriter ramWriter=new IndexWriter(ramDir,new
StandardAnalyzer(),true);

         Document doc=new Document();

         doc.add(new Field("test","I am testing RAM directory",
Field.Store.YES, Field.Index.UN_TOKENIZED));

         doc.add(new Field("contents", new
FileReader(args[1]),Field.TermVector.WITH_POSITIONS_OFFSETS ) );

         ramWriter.addDocument(doc);

         fsWriter.addIndexes(new Directory[] {ramDir,});

         ramWriter.close();

         fsWriter.optimize();

         fsWriter.close();

  }

}

 

 

To run it  just create index directory and do: 

 

 java Test  <index_dir_name> <some_file_name>

 

 

Any idea?

Thanks a lot,

Tanya


------=_NextPart_000_0076_01C7B432.D72466C0--



From java-user-return-28798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 23:42:27 2007
Return-Path: <java-user-return-28798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70433 invoked from network); 21 Jun 2007 23:42:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 23:42:26 -0000
Received: (qmail 72162 invoked by uid 500); 21 Jun 2007 23:42:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72133 invoked by uid 500); 21 Jun 2007 23:42:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72122 invoked by uid 99); 21 Jun 2007 23:42:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 16:42:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 16:42:18 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 687B24A8180
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 09:46:12 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Problem using RAMDirectory as a buffer
Date: Fri, 22 Jun 2007 09:38:41 +1000
User-Agent: KMail/1.9.7
References: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov>
In-Reply-To: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200706220938.41986.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 22 June 2007 09:34:44 Tanya Levshina wrote:
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0ramWriter.addDocument(doc);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0fsWriter.addIndexes(new Directory[] {ra=
mDir,});

As IndexWriter already does this internally, I'm not exactly sure why you'r=
e=20
trying to implement it again on the outside.

Daniel

=2D-=20
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 23:57:34 2007
Return-Path: <java-user-return-28799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72469 invoked from network); 21 Jun 2007 23:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 23:57:33 -0000
Received: (qmail 86646 invoked by uid 500); 21 Jun 2007 23:57:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85822 invoked by uid 500); 21 Jun 2007 23:57:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85810 invoked by uid 99); 21 Jun 2007 23:57:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 16:57:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of buschmic@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 16:57:26 -0700
Received: by wx-out-0506.google.com with SMTP id t8so582322wxc
        for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 16:57:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=jljKSu0bRweXxZTyiuFVIL2JrL0t3ScnjPt5NkbJoCEXZfU606ZvtvxXuzy549Qr8g5MX3k0E8KByhnB6cDHCS3pqrlw5rX4WvfO52ZH1unAUET51BOm0ZWeMRDNxu3IueNf8YEl2wkQutPtqoLpRPPKwz50EmjYk87uM4HfkKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MAasiMYlHtBEeDFmD0ljllTSnesbIp2erA27e3PM7itnYne3qqoaedzARrz/F6Bv42tzc/ZDPzDmw+j/2q29kLDaoIJekJsvyYmzBGSvwTV5+K9WA/19atlrlirqHRnvA5jyKtRc7Zoou+D4XCg5ba2+Q2L3k1nc6gFHuPYh0tU=
Received: by 10.70.48.11 with SMTP id v11mr3877103wxv.1182470225939;
        Thu, 21 Jun 2007 16:57:05 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.87.75.89])
        by mx.google.com with ESMTP id 62sm2892647wri.2007.06.21.16.57.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 21 Jun 2007 16:57:05 -0700 (PDT)
Message-ID: <467B1034.1010904@gmail.com>
Date: Thu, 21 Jun 2007 16:56:36 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using RAMDirectory as a buffer
References: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov> <200706220938.41986.daniel@nuix.com>
In-Reply-To: <200706220938.41986.daniel@nuix.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Noll wrote:
> On Friday 22 June 2007 09:34:44 Tanya Levshina wrote:
>>          ramWriter.addDocument(doc);
>>
>>          fsWriter.addIndexes(new Directory[] {ramDir,});
> 
> As IndexWriter already does this internally, I'm not exactly sure why you're 
> trying to implement it again on the outside.
> 
> Daniel
> 

You should close or flush the ramWriter before you add the ramDir to the
fsWriter, otherwise the docs won't get flushed to the ramDir.

But I share Daniel's opinion. IndexWriter has it's own buffer internally.

- Michael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 21 23:59:59 2007
Return-Path: <java-user-return-28800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73049 invoked from network); 21 Jun 2007 23:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2007 23:59:58 -0000
Received: (qmail 91702 invoked by uid 500); 21 Jun 2007 23:59:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91661 invoked by uid 500); 21 Jun 2007 23:59:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91650 invoked by uid 99); 21 Jun 2007 23:59:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 16:59:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jun 2007 16:59:50 -0700
Received: (qmail 32281 invoked from network); 21 Jun 2007 23:53:20 -0000
Received: from unknown (HELO CD92922) (71.201.177.115)
  by host412.ipowerweb.com with SMTP; 21 Jun 2007 23:53:20 -0000
From: "Tanya Levshina" <tanya@volvovski.com>
To: <java-user@lucene.apache.org>
References: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov> <200706220938.41986.daniel@nuix.com>
Subject: RE: Problem using RAMDirectory as a buffer
Date: Thu, 21 Jun 2007 18:59:20 -0500
Message-ID: <007d01c7b460$2f605150$6800a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-index: Ace0XPTGdT8kFzmXSWC4csMv5kGEzwAAsfGA
In-reply-to: <200706220938.41986.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

This example is taken almost exactly from "Lucene in Action" page #51.
I would like to use RAMDirectory to add files and then flush it to disk.
I've tried the most trivial example and it doesn=92t work.
So obviously I am doing something wrong.

Tanya

-----Original Message-----
From: Daniel Noll [mailto:daniel@nuix.com]=20
Sent: Thursday, June 21, 2007 6:39 PM
To: java-user@lucene.apache.org
Subject: Re: Problem using RAMDirectory as a buffer

On Friday 22 June 2007 09:34:44 Tanya Levshina wrote:
> =A0 =A0 =A0 =A0 =A0ramWriter.addDocument(doc);
>
> =A0 =A0 =A0 =A0 =A0fsWriter.addIndexes(new Directory[] {ramDir,});

As IndexWriter already does this internally, I'm not exactly sure why =
you're

trying to implement it again on the outside.

Daniel

--=20
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 00:05:10 2007
Return-Path: <java-user-return-28801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73661 invoked from network); 22 Jun 2007 00:05:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 00:05:07 -0000
Received: (qmail 96433 invoked by uid 500); 22 Jun 2007 00:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96395 invoked by uid 500); 22 Jun 2007 00:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96383 invoked by uid 99); 22 Jun 2007 00:05:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 17:05:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jun 2007 17:04:58 -0700
Received: (qmail 38139 invoked from network); 21 Jun 2007 23:58:28 -0000
Received: from unknown (HELO CD92922) (71.201.177.115)
  by host412.ipowerweb.com with SMTP; 21 Jun 2007 23:58:28 -0000
From: "Tanya Levshina" <tanya@volvovski.com>
To: <java-user@lucene.apache.org>
References: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov> <200706220938.41986.daniel@nuix.com> <467B1034.1010904@gmail.com>
Subject: RE: Problem using RAMDirectory as a buffer
Date: Thu, 21 Jun 2007 19:04:27 -0500
Message-ID: <007e01c7b460$e6a6f530$6800a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-index: Ace0XxMtl/4jiGzAT6G6TxSKhV2e9gAAYAEw
In-reply-to: <467B1034.1010904@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Nope, doesn't work.
I've tried:
....
ramWriter.addDocument(doc);
ramWriter.flush();
ramWriter.close();
fsWriter.addIndexes(new Directory[] {ramDir,});
....


Any other suggestions?

Thanks,
Tanya
PS As I said this is just a trivial test I created because it didn't work
for more complicated problem

-----Original Message-----
From: Michael Busch [mailto:buschmic@gmail.com] 
Sent: Thursday, June 21, 2007 6:57 PM
To: java-user@lucene.apache.org
Subject: Re: Problem using RAMDirectory as a buffer

Daniel Noll wrote:
> On Friday 22 June 2007 09:34:44 Tanya Levshina wrote:
>>          ramWriter.addDocument(doc);
>>
>>          fsWriter.addIndexes(new Directory[] {ramDir,});
> 
> As IndexWriter already does this internally, I'm not exactly sure why
you're 
> trying to implement it again on the outside.
> 
> Daniel
> 

You should close or flush the ramWriter before you add the ramDir to the
fsWriter, otherwise the docs won't get flushed to the ramDir.

But I share Daniel's opinion. IndexWriter has it's own buffer internally.

- Michael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 00:26:07 2007
Return-Path: <java-user-return-28802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76879 invoked from network); 22 Jun 2007 00:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 00:26:06 -0000
Received: (qmail 16209 invoked by uid 500); 22 Jun 2007 00:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16172 invoked by uid 500); 22 Jun 2007 00:26:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16161 invoked by uid 99); 22 Jun 2007 00:26:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 17:26:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of buschmic@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 17:25:56 -0700
Received: by wx-out-0506.google.com with SMTP id t8so586829wxc
        for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 17:25:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=HsGRVM97yfGp6sxHvYSp+4c+8BJYvDRv7eONsPZ7R3ZTV3RS6a6v6I9vaC6vvJDVXGAJifkkq03MJjrIPABW3tqGwha6ZpcVZ+mDhNLj04pn1ZE4eIhtNBZJJRN0zGtVoXcgAAAoJAXa4B5O/l+j8dmu2eYpIL157yGwFUGclss=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=VWawvQcXhuuLIGl02oaqyo1FPjUaSdaH8EXqIloHi+Eit0Fvjwor7IF9IwJENlPbA6HqzFlsxdwtsN59E54pu5qzvgrpsfiiWH5mrbUDkXZtzjgWcekekB14bICtaGc8/8zdYUOqvpJYrh1mUok7jmMBfXczo38onqpTKPQQiYU=
Received: by 10.70.39.2 with SMTP id m2mr3882446wxm.1182471935207;
        Thu, 21 Jun 2007 17:25:35 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.87.75.89])
        by mx.google.com with ESMTP id m6sm3622684wrm.2007.06.21.17.25.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 21 Jun 2007 17:25:34 -0700 (PDT)
Message-ID: <467B16E1.5000109@gmail.com>
Date: Thu, 21 Jun 2007 17:25:05 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem using RAMDirectory as a buffer
References: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov> <200706220938.41986.daniel@nuix.com> <467B1034.1010904@gmail.com> <007e01c7b460$e6a6f530$6800a8c0@dhcp.fnal.gov>
In-Reply-To: <007e01c7b460$e6a6f530$6800a8c0@dhcp.fnal.gov>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Tanya Levshina wrote:
> Nope, doesn't work.
> I've tried:
> ....
> ramWriter.addDocument(doc);
> ramWriter.flush();
> ramWriter.close();
> fsWriter.addIndexes(new Directory[] {ramDir,});
> ....
> 
> 
> Any other suggestions?
> 

Are you sure? That's strange, I just took your code and tried it out
myself. With my suggested change it works fine for me now. I'm using
Lucene 2.2 for this test.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 00:47:54 2007
Return-Path: <java-user-return-28803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80353 invoked from network); 22 Jun 2007 00:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 00:47:52 -0000
Received: (qmail 49177 invoked by uid 500); 22 Jun 2007 00:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49143 invoked by uid 500); 22 Jun 2007 00:47:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49132 invoked by uid 99); 22 Jun 2007 00:47:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 17:47:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stopman@gmail.com designates 64.233.162.237 as permitted sender)
Received: from [64.233.162.237] (HELO nz-out-0506.google.com) (64.233.162.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 17:47:43 -0700
Received: by nz-out-0506.google.com with SMTP id x7so629561nzc
        for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 17:47:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=W8YbGUeg5OHWvRSPXMYyo/aHz/XAc25wc6WV10X66EnFyhAOJr/Y9TisR91DkUIJsso4yu//IeP/sZF4zOtZs0OGLFJiIsiRA3H55pMwTZPKEJWNLREYOxNF1W9L+rB+edID3atW9VSXCKIUw2O9TkngQ8ETRpFwKTUua1Qcb1Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=c/0RS/HyuONNkVP+ksYd08Turx2GbTBgeXDvPKEudoEGKzUz3vE+bdsbalEFwEwBBpRawwmjq7xZk2CaIbrflPe1rNrAoJUckR/xctG1vxDevwifskpVBspKDq2ZtCtkTXndHsxnvHX+ToTrb0lrlVoRMlPC4/rAe0XqSu0Orww=
Received: by 10.65.253.6 with SMTP id f6mr4786507qbs.1182473242556;
        Thu, 21 Jun 2007 17:47:22 -0700 (PDT)
Received: by 10.65.200.12 with HTTP; Thu, 21 Jun 2007 17:47:22 -0700 (PDT)
Message-ID: <652776090706211747m7b177a72w49eb1b9022334ea3@mail.gmail.com>
Date: Thu, 21 Jun 2007 17:47:22 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene 2.0.0 index being zeroed out by Lucene 2.2.0.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81734_29814027.1182473242529"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_81734_29814027.1182473242529
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

My index is being zeroed out by the new lucene core jar.

Here's the deal:
I've got an old index from lucene-core-2.0.0 jar. I start up my service with
the new lucene 2.2.0 jar and everything
is fine. When I add a document to the index the everything is still fine.
Yet when I shut down my service and
restart, lucene-core-2.2.0 clears out my index, poof index gone. I've looked
into this a little, it seems that once
I've added a new item to an old index I get two new files in the index
directory that look like this:

-rw-r--r--    1 stop     users          70 2007-06-21 17:29 segments_3
-rw-r--r--    1 stop     users          20 2007-06-21 17:29 segments.gen

If I copy in my old index into the index directory with these files present
and start up my search service the old index
will disappear.

This means, if I startup with the following index directory (_1ssra is the
old lucene 2.0.0 index):
-rw-r--r--    1 stop     users          19 2007-06-21 17:29 _1ssra_1.del
-rw-r--r--    1 stop     users    947083649 2007-06-21 17:25 _1ssra.cfs
-rw-r--r--    1 stop     users       71253 2007-06-21 17:29 _1ssrb.cfs
-rw-r--r--    1 stop     users          70 2007-06-21 17:29 segments_3
-rw-r--r--    1 stop     users          20 2007-06-21 17:29 segments.gen

I end up with these files left after startup:
-rw-r--r--    1 stop     users          20 2007-06-21 17:30 segments_1
-rw-r--r--    1 stop     users          20 2007-06-21 17:30 segments.gen
-rw-r--r--    1 stop     users           0 2007-06-21 17:30 write.lock

>From the lucene website, it says "Adding to an index with an older format
will cause it to be converted to the newer format."
Has anyone else seen lucene-core-2.2.0.jar nuke your old index? Am I
supposed to convert my index using a command-line tool?

-M

------=_Part_81734_29814027.1182473242529--

From java-user-return-28804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 01:38:35 2007
Return-Path: <java-user-return-28804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2881 invoked from network); 22 Jun 2007 01:38:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 01:38:33 -0000
Received: (qmail 53604 invoked by uid 500); 22 Jun 2007 01:38:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53207 invoked by uid 500); 22 Jun 2007 01:38:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53194 invoked by uid 99); 22 Jun 2007 01:38:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 18:38:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jun 2007 18:38:20 -0700
Received: (qmail 88775 invoked from network); 22 Jun 2007 01:31:49 -0000
Received: from unknown (HELO CD92922) (71.201.177.115)
  by host412.ipowerweb.com with SMTP; 22 Jun 2007 01:31:49 -0000
From: "Tanya Levshina" <tanya@volvovski.com>
To: <java-user@lucene.apache.org>
References: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov> <200706220938.41986.daniel@nuix.com> <467B1034.1010904@gmail.com> <007e01c7b460$e6a6f530$6800a8c0@dhcp.fnal.gov> <467B16E1.5000109@gmail.com>
Subject: RE: Problem using RAMDirectory as a buffer
Date: Thu, 21 Jun 2007 20:37:54 -0500
Message-ID: <008201c7b46d$f42c3000$6800a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-index: Ace0Yw+cbjNZvYKnRcO/mPt7UJRgegACsOLA
In-reply-to: <467B16E1.5000109@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am using lucene 2.1.0. I'll try to download 2.2 and test it.
Thanks,

Tanya

-----Original Message-----
From: Michael Busch [mailto:buschmic@gmail.com] 
Sent: Thursday, June 21, 2007 7:25 PM
To: java-user@lucene.apache.org
Subject: Re: Problem using RAMDirectory as a buffer

Tanya Levshina wrote:
> Nope, doesn't work.
> I've tried:
> ....
> ramWriter.addDocument(doc);
> ramWriter.flush();
> ramWriter.close();
> fsWriter.addIndexes(new Directory[] {ramDir,});
> ....
> 
> 
> Any other suggestions?
> 

Are you sure? That's strange, I just took your code and tried it out
myself. With my suggested change it works fine for me now. I'm using
Lucene 2.2 for this test.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 01:48:18 2007
Return-Path: <java-user-return-28805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6088 invoked from network); 22 Jun 2007 01:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 01:48:17 -0000
Received: (qmail 71655 invoked by uid 500); 22 Jun 2007 01:48:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71619 invoked by uid 500); 22 Jun 2007 01:48:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71607 invoked by uid 99); 22 Jun 2007 01:48:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 18:48:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jun 2007 18:48:09 -0700
Received: (qmail 8983 invoked from network); 22 Jun 2007 01:41:39 -0000
Received: from unknown (HELO CD92922) (71.201.177.115)
  by host412.ipowerweb.com with SMTP; 22 Jun 2007 01:41:39 -0000
From: "Tanya Levshina" <tanya@volvovski.com>
To: <java-user@lucene.apache.org>
References: <007501c7b45c$bffa6ec0$6800a8c0@dhcp.fnal.gov> <200706220938.41986.daniel@nuix.com> <467B1034.1010904@gmail.com> <007e01c7b460$e6a6f530$6800a8c0@dhcp.fnal.gov> <467B16E1.5000109@gmail.com>
Subject: RE: Problem using RAMDirectory as a buffer
Date: Thu, 21 Jun 2007 20:47:43 -0500
Message-ID: <008301c7b46f$53c557c0$6800a8c0@dhcp.fnal.gov>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-index: Ace0Yw+cbjNZvYKnRcO/mPt7UJRgegADAhew
In-reply-to: <467B16E1.5000109@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, 

I confirm that it is working correctly in lucene 2.2.0 and not working in
2.1.0.

Thanks a lot,
Tanya


-----Original Message-----
From: Michael Busch [mailto:buschmic@gmail.com] 
Sent: Thursday, June 21, 2007 7:25 PM
To: java-user@lucene.apache.org
Subject: Re: Problem using RAMDirectory as a buffer

Tanya Levshina wrote:
> Nope, doesn't work.
> I've tried:
> ....
> ramWriter.addDocument(doc);
> ramWriter.flush();
> ramWriter.close();
> fsWriter.addIndexes(new Directory[] {ramDir,});
> ....
> 
> 
> Any other suggestions?
> 

Are you sure? That's strange, I just took your code and tried it out
myself. With my suggested change it works fine for me now. I'm using
Lucene 2.2 for this test.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 02:03:44 2007
Return-Path: <java-user-return-28806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10811 invoked from network); 22 Jun 2007 02:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 02:03:43 -0000
Received: (qmail 3501 invoked by uid 500); 22 Jun 2007 02:03:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3466 invoked by uid 500); 22 Jun 2007 02:03:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3455 invoked by uid 99); 22 Jun 2007 02:03:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 19:03:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stopman@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jun 2007 19:03:36 -0700
Received: by nz-out-0506.google.com with SMTP id x7so641670nzc
        for <java-user@lucene.apache.org>; Thu, 21 Jun 2007 19:03:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PtNxvuzXJmZ9kb5O43j8nLoGX1CE2XvOZE+ZQQsfg69mqey1XDlbnb/7DY9VhpYvQS0imspSA1BIU+n69MwYtgyO96471cH6UhZ11iJ8xT9X2QkGMFJ+O0G9uleZXXG+XGhQP9gYnAleOKuo6PWfAYuDDHJuaNrAfCpZi3IdTCQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZeQM+IswF+oZuGZQupwmSwr1dAtoOBqdS8I38OukpPfaBI28nXZqVdpxLknoLhpCapzHSVoBde0OfA+RThAqY9KatO2h7U0KmdOx4+WjCknHK9+Dvr3bAOinoLr6LkZ4QwfNEFAl1NI1lr9/QkfpsePKvvUXb4+agNdbxLQqUdY=
Received: by 10.65.124.8 with SMTP id b8mr4834306qbn.1182477794631;
        Thu, 21 Jun 2007 19:03:14 -0700 (PDT)
Received: by 10.65.200.12 with HTTP; Thu, 21 Jun 2007 19:03:14 -0700 (PDT)
Message-ID: <652776090706211903x24ee3df1t92bf8f85d7b5c24e@mail.gmail.com>
Date: Thu, 21 Jun 2007 19:03:14 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.0 index being zeroed out by Lucene 2.2.0.
In-Reply-To: <652776090706211747m7b177a72w49eb1b9022334ea3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82014_9776942.1182477794589"
References: <652776090706211747m7b177a72w49eb1b9022334ea3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_82014_9776942.1182477794589
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Seems like the lucene 2.0.0 created a file <INDEX_DIR>/segments. In
2.2.0the new segments file has the following convention
<INDEX_DIR>/segments_<NUMBER>. Our codebase had some logic that depended on
this file being named consistently.
It seems like the bug was on my end, my apologies.

-M

On 6/21/07, Michael Stoppelman <stopman@gmail.com> wrote:
>
> Hi all,
>
> My index is being zeroed out by the new lucene core jar.
>
> Here's the deal:
> I've got an old index from lucene-core-2.0.0 jar. I start up my service
> with the new lucene 2.2.0 jar and everything
> is fine. When I add a document to the index the everything is still fine.
> Yet when I shut down my service and
> restart, lucene-core-2.2.0 clears out my index, poof index gone. I've
> looked into this a little, it seems that once
> I've added a new item to an old index I get two new files in the index
> directory that look like this:
>
> -rw-r--r--    1 stop     users          70 2007-06-21 17:29 segments_3
> -rw-r--r--    1 stop     users          20 2007-06-21 17:29 segments.gen
>
> If I copy in my old index into the index directory with these files
> present and start up my search service the old index
> will disappear.
>
> This means, if I startup with the following index directory (_1ssra is the
> old lucene 2.0.0 index):
> -rw-r--r--    1 stop     users          19 2007-06-21 17:29 _1ssra_1.del
> -rw-r--r--    1 stop     users    947083649 2007-06-21 17:25 _1ssra.cfs
> -rw-r--r--    1 stop     users       71253 2007-06-21 17:29 _1ssrb.cfs
> -rw-r--r--    1 stop     users          70 2007-06-21 17:29 segments_3
> -rw-r--r--    1 stop     users          20 2007-06-21 17:29 segments.gen
>
> I end up with these files left after startup:
> -rw-r--r--    1 stop     users          20 2007-06-21 17:30 segments_1
> -rw-r--r--    1 stop     users          20 2007-06-21 17:30 segments.gen
> -rw-r--r--    1 stop     users           0 2007-06-21 17:30 write.lock
>
> From the lucene website, it says "Adding to an index with an older format
> will cause it to be converted to the newer format."
> Has anyone else seen lucene-core-2.2.0.jar nuke your old index? Am I
> supposed to convert my index using a command-line tool?
>
> -M
>

------=_Part_82014_9776942.1182477794589--

From java-user-return-28807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 10:18:12 2007
Return-Path: <java-user-return-28807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60869 invoked from network); 22 Jun 2007 10:18:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 10:18:11 -0000
Received: (qmail 46954 invoked by uid 500); 22 Jun 2007 10:18:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46924 invoked by uid 500); 22 Jun 2007 10:18:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46912 invoked by uid 99); 22 Jun 2007 10:18:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 03:18:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 03:18:00 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I1gCy-0006lp-15
	for java-user@lucene.apache.org; Fri, 22 Jun 2007 03:17:40 -0700
Message-ID: <11249562.post@talk.nabble.com>
Date: Fri, 22 Jun 2007 03:17:40 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ways to minimize index size?
In-Reply-To: <4678F0BB.4060709@knowledgeview.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com> <cfc620660703140633x75af8fd5q929eb1b2fc7b1a4e@mail.gmail.com> <11195406.post@talk.nabble.com> <359a92830706190709l1e9dd54au254075bba125146e@mail.gmail.com> <11195897.post@talk.nabble.com> <11207318.post@talk.nabble.com> <4678F0BB.4060709@knowledgeview.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Steve,
     thanks for your reply a lot.its now compress upto 50% of the original
size.is there any other possiblity using this code compress upto 80%.

Steve Liles wrote:
> 
> Compression aside you could index the "contents" as terms in separate 
> fields instead of tokenized text, and disable storing of norms:
> 
> String outgoingNumber="9198408365809";
> String incomingNumber="9840861114";
> 
> _doc.add(new Field("outgoingNumber", outgoingNumber, Store.NO, 
> Index.NO_NORMS));
> _doc.add(new Field("incomingNumber", incomingNumber, Store.NO, 
> Index.NO_NORMS));
> 
> According to the docs "Index.NO_NORMS" will save you one byte per 
> document in the index.
> 
> Or you could index all of the data as separate terms in the same 
> "contents" field if you wanted (make the first param "contents" for all 
> of the terms), which is more comparable to what you are currently doing.
> (Another advantage is that the Analyzer will not be used for fields 
> which are untokenized, and indexing should be faster.)
> 
> ...
> 
> One way to compress numerical data (possibly not the best - i'm no 
> expert) is to change the base of the number that is indexed / stored in 
> the index.
> 
> java.lang.Long and java.math.BigInteger have methods for converting from 
> one radix to another. Taking your "outgoingNumber" as an example:
> 
> //compression
> BigInteger  _bi = new java.math.BigInteger("9198408365809", 10);
> System.out.println(_bi.toString(36));
> 
>  > 39douufap
> 
> //decompression
> BigInteger _bi = new java.math.BigInteger("39douufap", 36);
> System.out.println(_bi.toString(10));
> 
>  >9198408365809
> 
> Converting to a higher radix will give you better compression but you'll
> have to do it yourself as the jdk classes only work up to base 36
> <http://en.wikipedia.org/wiki/Base_36>.
> 
> It's worth compressing your unstored "contents" field as well as your 
> stored "records" field, as the unique terms in the "contents" field will 
> effectively be stored.
> 
> Also don't forget to convert the terms when you search too, otherwise 
> you won't find anything ;)
> 
> Steve.
> 
> 
> Sebastin wrote:
>> When i use the standardAnalyzer storage size increases.how can i minimize
>> index store
>>
>> Sebastin wrote:
>>   
>>>                        
>>> String outgoingNumber="9198408365809";
>>> String incomingNumber="9840861114";
>>> String datesc="070601";
>>> String imsiNumber="444021365987";
>>> String callType="1";
>>>
>>> //Search Fields
>>>  String contents=(outgoingNumber+" "+incomingNumber+" "+dateSc+"
>>> "+imsiNumber+" "+callType );
>>>
>>> //Display Fields
>>>                      
>>>                           String records=(callingPartyNumber+"
>>> "+calledPartyNumber+" "+dateSc+" "+chargDur+" "+incomingRoute+"
>>> "+outgoingRoute+" "+timeSc);
>>>                           
>>>                      
>>>                        IndexWriter indexWriter = new
>>> IndexWriter(indexDir,new StandardAnalyzer(),true);  
>>>                         
>>>                           Document document = new Document();
>>>   
>>>                              document.add(new
>>> Field("contents",contents,Field.Store.NO,Field.Index.TOKENIZED));
>>>                              
>>>                      
>>>                      
>>>                 document.add(new
>>> Field("records",records,Field.Store.YES,Field.Index.NO));
>>>                              
>>>                            
>>>                              indexWriter.setUseCompoundFile(true);
>>>                              indexWriter.addDocument(document);
>>>                           }
>>>
>>> please help me to acheive the minimum size
>>>
>>>
>>>
>>>
>>>
>>> Erick Erickson wrote:
>>>     
>>>> Show us the code you use to index. Are you storing the fields?
>>>> omitting norms? Throwing out stop words?
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>>>>       
>>>>> Hi Does anyone give me an idea to reduce the Index size to down.now i
>>>>> am
>>>>> getting 42% compression in my index store.i want to reduce upto 70%.i
>>>>> use
>>>>> standardanalyzer to write the document.when i use SimpleAnalyzer it
>>>>> reduce
>>>>> upto 58% but i couldnt search the document.please help me to acheive.
>>>>>
>>>>> Thanks in advance
>>>>>
>>>>> Jeff-188 wrote:
>>>>>         
>>>>>>> I found that reducing my index from 8G to 4G (through not stemming)
>>>>>>>             
>>>>> gave
>>>>> me
>>>>>         
>>>>>> about a 10% performance improvement.
>>>>>>
>>>>>> How did you do this? I don't see this as an option.
>>>>>>
>>>>>> Jeff
>>>>>>
>>>>>>
>>>>>>           
>>>>> --
>>>>> View this message in context:
>>>>> http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11195406
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>         
>>>>       
>>>     
>>
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11249562
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 10:27:59 2007
Return-Path: <java-user-return-28808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62796 invoked from network); 22 Jun 2007 10:27:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 10:27:57 -0000
Received: (qmail 60348 invoked by uid 500); 22 Jun 2007 10:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60305 invoked by uid 500); 22 Jun 2007 10:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60294 invoked by uid 99); 22 Jun 2007 10:27:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 03:27:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Jun 2007 03:27:48 -0700
Received: (qmail 51875 invoked by uid 60001); 22 Jun 2007 10:27:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=2d1akDVKw55fyKWtdMtiVmWGkZb2O/d9VIYwFYz5YO+YjVyJegZcAOF6XNgWb9GOeU9af020+pv6gyqLptISNrKH/G2STpvGxD0UxenYN7kXOE9Ra6BA8YP0cJcdjjrUM214nfmJkjSa3WygSe+ViufmhZxaNqRZ3OZZqw0zhJo=;
X-YMail-OSG: dvqjT98VM1l9we7HGTmyiZA5o0khXxPmokzuRHA687FEo9aZuXR8ap9bsxF7p60qxiZlvPtQc9XQVXcnytdZr1pLv9FvbydxlbeNFmsIEGghivirYcnhu2LmICK5CB9TJZlVwGQjTB2r6dQ-
Received: from [89.172.86.142] by web50303.mail.re2.yahoo.com via HTTP; Fri, 22 Jun 2007 03:27:26 PDT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Fri, 22 Jun 2007 03:27:26 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Highlighter that works with phrase and span queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <800953.51868.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the good summary, Mark!

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, June 21, 2007 11:19:22 PM
Subject: Re: Highlighter that works with phrase and span queries

Results of my tests :

The new SpanScorer is just about the same speed as the old Highlighter's 
QueryScorer if the Query contains no position sensitive elements. This 
is only the case, however, if the CachingTokenFilter (from the analysis 
package) is changed to use an ArrayList instead of a LinkedList 
(LinkedList is the wrong data structure for this use).

The new SpanScorer is obviously not as fast when dealing with 
PhraseQuerys and SpanQuerys. It takes about twice the time or less to 
correctly highlight these Query types when compared to just highlighting 
every term from the Span or Phrase Query.

As far as my comment about using TokenSources to generate the 
TokenStream -- for short docs (5-15k) and a quick analyzer, it takes 
just as long to get TermVector info and sort it as to re-analyze the 
text. As docs get bigger, you will certainly start to see some benefits 
though.

Besides the re-analyzing, the reason the Highlighter is slow for very 
large documents is that every token from a doc is examined and scored 
and then the doc is rebuilt piece by piece from each token. This does 
not scale well <g> (Especially in combination with re-analyzer text). 
While there is probably room for improvement here, I don't see the 
current approach ever reaching the speed of Ronnie Kolehmainen's 
Highlighter. However, I also don't see Ronnie's Highlighter ever being 
as flexible or able to cover as many use cases as the current contrib 
Highlighter approach.

Ronnie's approach works well for large docs because it only deals with 
the tokens of interest (tokens from the Query) rather than scoring every 
token. This is done using TermVectorOffsets and so immediately requires 
that you have turned those on. Further, I don't see this approach ever 
being easily extended to supporting Spans or PhraseQuerys without 
reimplementing special Lucene search logic. Those are the reasons that I 
chose not to work with Ronnie's Highlighter (particularly, my main 
motivation was Spans support). Also, to be able to ignore fields when 
Highlighting, Ronnnie's Highlighter would likely have to try and grab 
TermVectorOffsets for every field in the index for each Term in the 
Query. If you have a lot of fields this could be much slower. Even 
still, it can't be argued that Ronnie's Highlighter is not dramatically 
faster than the current Highlighter on very large documents, especially 
if your currently re-analyzing text. It is probably the perfect option 
for Otis's client if he has TermVectorOffsets on in his index or can 
easily re-index.


I am currently trying to think of some possible hybrid approach to 
highlighting...

I have fixed a few things with my Highlighter and will be updating it 
soon. Also, I forgot to mention, there is the dependency on MemoryIndex.

- Mark



mark harwood wrote:
> While we're considering highlighter performance there was some discussion of this around another implementation here: http://issues.apache.org/jira/browse/LUCENE-644
>
> Ronnie Kolehmainen's implementation was proven faster than the current contrib highlighter but was almost certainly missing some of the features/support for edge cases.
>
> There are certainly some optimisations in the existing implementation that should be possible. Not building StringBuffers for document fragments with no hits seems an obvious step. Whether this can be done while preserving the existing "helper" interfaces (Fragmenter/Scorer) remains to be seen.
>
> Cheers,
> Mark
>
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, 21 June, 2007 2:11:52 AM
> Subject: Re: Highlighter that works with phrase and span queries
>
> I will work up some performance numbers over the next day or two to 
> share with you. I have spent the last day or two with a profiler trying 
> to find the biggest performance drains.
>
> Unfortunately, I will probably not be able to squeeze out much more 
> performance than the current Highlighter. When I started working on this 
> project I considered starting from scratch to create a better, more 
> accurate Highlighter. After some initial work I quickly came to the 
> realization that Mark Harwood (with some additions by others) had 
> already solved too many corner cases and interesting needs. The few 
> alternate Highlighters in JIRA did not meet the standards set by Mark's 
> highlighter. Trying to replicate all that work in a different manner 
> didn't seem like a fruitful approach -- Harwood is more clever than I <g>
>
> Taking that into account, I decided to extend the Highlighter using the 
> great framework that is already in place. I implemented a new Scorer 
> that acts much like the default Scorer, but when it finds a Query clause 
> that is position sensitive (PhraseQuery, SpanQuery), it creates a 
> MemoryIndex that is used extract the correct Spans for the Query (Credit 
> to Paul Elschot and Mark Harwood for the approach). Non position 
> sensitive Query claueses are handled similar to the way they where in 
> the original highlighter's Scorer. This means that non position 
> sensitive queries are likely the same speed as before, while position 
> sensitive queries are likely a bit slower. For my uses, the thing is 
> damned fast -- of course my uses involves small documents (Newspaper 
> articles).
>
> I am very interested in making this thing as fast as possible though, so 
> I will build some benchmark tests and try to squeeze as much performance 
> out of the Highligher as I can. I will also see if my Scorer is any 
> faster than the original.
>
> All that said, my guess is that one of the slowest parts of Highlighting 
> is re-tokenizing the text. There is always the option of turning on 
> TermVectors and using org.apache.lucene.search.highlight.TokenSources to 
> get the TokenStream. Based on Mark H's comments, it may be twice as fast 
> as re-tokenizing. This method can also be used with my new Highlighter 
> code as well (which is more a plug-in to the old Highlighter than a 
> replacement.)
>
> Considering that both of your comments immediately went to performance, 
> I will certainly be spending some time working on this.
>
> - Mark
>
>   
>> Hi Mark,
>>
>> I know one large user (meaning: high query/highlight rates) of the current Highlighter and this user wasn't too happy with its performance.  I don't know the details, other than it was inefficient.  So now I'm wondering if you've benchmarked your Highlighter against that/current Highlighter to see not only which one is more accurate, but also which one is faster, and by how much?
>>
>> Thanks,
>> Otis
>>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
>> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>>   
>>     
>
>   
>> This is really great, Mark.  I'll look into integrating it with Solr,
>> as better phrase highlighting is a definite sore point for some of our
>> users.
>>
>>
>>
>> Any indication on performance differences?
>>
>>
>>
>> cheers,
>>
>> -mike
>>
>>
>>   
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________ 
> Yahoo! Mail is the world's favourite email. Don't settle for less, sign up for
> your free account today http://uk.rd.yahoo.com/evt=44106/*http://uk.docs.yahoo.com/mail/winter07.html 
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 10:37:51 2007
Return-Path: <java-user-return-28809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65654 invoked from network); 22 Jun 2007 10:37:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 10:37:49 -0000
Received: (qmail 78766 invoked by uid 500); 22 Jun 2007 10:37:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78491 invoked by uid 500); 22 Jun 2007 10:37:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78480 invoked by uid 99); 22 Jun 2007 10:37:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 03:37:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Jun 2007 03:37:41 -0700
Received: (qmail 17169 invoked by uid 60001); 22 Jun 2007 10:37:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=avwNGtIm7+NPZ6tGWsK7V5XZisUGjObLpB/khzeI71NaVtSSW+d4ru5yuIwuVTvusC6g92/lNrZ8IYG4Txe2Dp0S3QkJipKr9CKZxXOClE9+4rirT4jztRzI5Mgkv4wP1R6os8suLILeUteB9AthzNKwdUJm/oxEgOBgrkN7jCw=;
X-YMail-OSG: 9xt5qjEVM1lQ73FWj_mHjcfs6t_365oLhFl1ooZMUFYbePOho560YSi3vCKpdKHSdfjEwHl.4U8s7AjrLF3G3Ztoucf6pZJ_p2W_yFhs9gKA8ZlcwZk5Z77GgTiSy1aMLKNw9BHiiuJ2d00-
Received: from [83.131.157.6] by web50311.mail.re2.yahoo.com via HTTP; Fri, 22 Jun 2007 03:37:19 PDT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Fri, 22 Jun 2007 03:37:19 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene for chinese search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <914800.16757.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Regarding point #2, in case none of those work for you for some reason, you could always try using this:

$ ll analyzers/src/java/org/apache/lucene/analysis/ngram/
total 48
-rw-rw-r--  1 otis otis 4934 Mar  2 16:32 EdgeNGramTokenFilter.java
-rw-rw-r--  1 otis otis 4617 Feb 21 15:33 EdgeNGramTokenizer.java
-rw-rw-r--  1 otis otis 3257 Mar  2 17:12 NGramTokenFilter.java
-rw-rw-r--  1 otis otis 3103 Mar  2 16:33 NGramTokenizer.java
drwxrwxr-x  7 otis otis 4096 May 31 10:11 .svn/

Otis
--
Lucene Consulting -- http://lucene-consulting.com/


----- Original Message ----
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Sent: Sunday, June 17, 2007 8:09:30 PM
Subject: Re: Lucene for chinese search

There are three things to watch out for chinese or CJK languages:

1. The content source or database need to be encoded in UTF-8.
2. StandardAnalyzer doesn't support chinese words well. Use either
ChineseAnalyzer or CJKAnalyzer. My experience is that CJKAnalyzer is a
little better.
3. The user's query should be encoded in UTF-8.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 6/17/07, leelb@xedge.com.sg <leelb@xedge.com.sg> wrote:
> Hi,
>
> I would like to know whether Standard Analyzer allows searching of chinese
> words?
>
> And in order to support chinese searching, is there any encoding needed in
> order to develop the application?
>
> I'm currently using Jetty as web server, jsp as application, and search
> results will be saved in xml file and display it using xsl. So is there
> encoding needed for any of the files (xml, xsl, etc...) as well as during
> parsing of query?
>
> thanks alot
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 10:42:40 2007
Return-Path: <java-user-return-28810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67473 invoked from network); 22 Jun 2007 10:42:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 10:42:39 -0000
Received: (qmail 89049 invoked by uid 500); 22 Jun 2007 10:42:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88852 invoked by uid 500); 22 Jun 2007 10:42:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88841 invoked by uid 99); 22 Jun 2007 10:42:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 03:42:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Jun 2007 03:42:31 -0700
Received: (qmail 51775 invoked by uid 60001); 22 Jun 2007 10:42:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=XDlQoGVhbrDZXHjg4obDhn/Npzq5LCw4Pjecmz7LrIFNC6xtB7PAH+xIljrHDsi0cjxWsBfhYqVpGsDv3fSkepTSFjPXPkQdIUTdgrNEtlOztQWkMxbgCWPtO984wRx3KpBmW/vpOSC9C6Ah/UvbqTisdE6oJ1XUJnAYZdjZhVg=;
X-YMail-OSG: gX7uu6cVM1nQ_sJ7C1raNO38xbI2XT_t5bL1DvIVYylqo_JFaeipnQcO7VT2XD0eczQzz8R0YPsvSwTXfWPI_DfHiEjJHj3kF4w7PO.7MZ_RSBGNzhw-
Received: from [83.131.157.6] by web50305.mail.re2.yahoo.com via HTTP; Fri, 22 Jun 2007 03:42:09 PDT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Fri, 22 Jun 2007 03:42:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene index performance
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <217480.51427.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

----- Original Message ----
From: Lee Li Bin <leelb@xedge.com.sg>

I would like to know how's the performance during indexing and searching of
results on a large index files would be like.

OG: It depends ;)
- on your hardware (fast disk?  lots of RAM?  multi-CPU?  multi-core?)
- on the size of data you're indexing (one field with 1KB of data or 10 fields with 10KB each?)
- on field indexing options (indexing? tokenizing? storing? compressing? term vectors enabled? payloads?)

Who was is that mentioned a DB server that can insert 1000 rows/second the other day?  Sounds rather high. :)


Otis
--

Lucene Consulting -- http://lucene-consulting.com/






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 10:51:57 2007
Return-Path: <java-user-return-28811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68785 invoked from network); 22 Jun 2007 10:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 10:51:56 -0000
Received: (qmail 99632 invoked by uid 500); 22 Jun 2007 10:51:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99292 invoked by uid 500); 22 Jun 2007 10:51:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99281 invoked by uid 99); 22 Jun 2007 10:51:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 03:51:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Jun 2007 03:51:49 -0700
Received: (qmail 23175 invoked by uid 60001); 22 Jun 2007 10:51:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=LmJKfKn2NhYnv4O/J0cipwsc3AZT9VVRNv1k5dLDJ4TqqVJTO8qrs7X6uq/RcArqSlcrHsC18sYPQWwi9cquQa99J0VgmB+UMmtFBhrauiskM55Y2IsQRDmVeT/bCeiWVz5weCCeTohS4n4XRFWzMLH6QUrSFsB3TDvFf9nVei8=  ;
Message-ID: <20070622105127.23173.qmail@web50312.mail.re2.yahoo.com>
X-YMail-OSG: JVjbmG0VM1kW6DzfKyqg06hH_I.fdTA3PUVb2RGR74s_qtPAQKfumK1knPaclAFzZQ--
Received: from [83.131.157.6] by web50312.mail.re2.yahoo.com via HTTP; Fri, 22 Jun 2007 03:51:27 PDT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Fri, 22 Jun 2007 03:51:27 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to Use ParallelReader
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Saturday, June 16, 2007 3:10:08 AM
Subject: Re: How to Use ParallelReader


: My question is: If I just want to update the small fields in one index
: and do not want to update the large fields in another index, how can I
: make sure these two indexes are synchronized and have the same document
: number?

the short answer: build them in the same order, use the exact same
IndexWriter settings, and optimize both indexes.  you can rebuild either
of them again and again and again if you want -- as long as you keep doing
it in the same order.

OG: I think I understood how PR worked at one point, but have since forgotten.  I can't recall how one gets docIds to match up after updates (del+add).  For example:

docId                index1                index2
1                               uid:10              name:Chuck
2                                uid:20              name:Mark
3                                uid:30              name:Chris
4                                uid:40             name:Tarzan

OG: If I need to change Chris' name to Yonik, I have to delete docId 3 in index2 and re-add.  When it gets re-added we have docId 3 == isDeleted and the new doc with name:Yonik has docId == 5.  Say that both indices are then closed and even optimized, and then re-opened, aren't docs going to be misaligned?

docId                index1                index2

1                               uid:10              name:Chuck

2                                uid:20              name:Mark

3                                uid:30              name:Tarzan

4                                uid:40             name:Yonik


OG: No?

Otis





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 11:03:31 2007
Return-Path: <java-user-return-28812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70931 invoked from network); 22 Jun 2007 11:03:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 11:03:30 -0000
Received: (qmail 30998 invoked by uid 500); 22 Jun 2007 11:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30970 invoked by uid 500); 22 Jun 2007 11:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30959 invoked by uid 99); 22 Jun 2007 11:03:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 04:03:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Jun 2007 04:03:22 -0700
Received: (qmail 31050 invoked by uid 60001); 22 Jun 2007 11:03:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=FItuDL5hephezLT4C7/pBXBsp67BXWiItAoaF7Yf2WbJkknhmdnxWFL0N8nOuvKZfFmpRHxXNWwsIpWlY7lT+y9iFe/OGs5zr9FV4przeKHjbn/q4JCjW9Q70NNIlylw1aC2ScaVT148iFSQaWdQgjSuholYbnoMZ5TN1bMvQvk=;
X-YMail-OSG: Fs5VNJUVM1kuu0XwQQTnATLUjrTV4KTPlkj5g.ZGxHj5bBAh_r2mQD5OMVWXETQP9j8t.jk5UBsoWVEi7E0udvHy6hmsyJ43hOHgEst4OhXTZD1YygcMrrPjxwJRozYNHLDdI1r9nwN3TKU-
Received: from [83.131.157.6] by web50306.mail.re2.yahoo.com via HTTP; Fri, 22 Jun 2007 04:03:01 PDT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Fri, 22 Jun 2007 04:03:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Maintain a backup index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <99430.30706.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Look at Solr's snapshooter script.  It uses hard links (via cp -lr ...) to create index snapshots.  You could use those for backups.
 
Otis
--
Lucene Consulting -- http://lucene-consulting.com/


----- Original Message ----
From: "Rajendranath, Divya" <Divya.Rajendranath@deshaw.com>
To: java-user@lucene.apache.org
Sent: Tuesday, June 5, 2007 7:28:37 AM
Subject: Maintain a backup index

We want to maintain a backup of our production index directory. We are
using Lucene 2.0 v. The normal way to have backup is to run a small
reindex script every 5 mins, which would pick up only those files which
were modified in that time frame and reindex them. This is one way to
rebuild and update a backup index from a master index. Is there any
other simpler way in Lucene v2.0, which would help us do the same task?
please let us know.
Please help
Thanks !


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 12:53:58 2007
Return-Path: <java-user-return-28813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10805 invoked from network); 22 Jun 2007 12:53:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 12:53:53 -0000
Received: (qmail 26097 invoked by uid 500); 22 Jun 2007 12:53:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25990 invoked by uid 500); 22 Jun 2007 12:53:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25964 invoked by uid 99); 22 Jun 2007 12:53:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 05:53:45 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=UNDISC_RECIPS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 05:53:40 -0700
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l5MCrP917867;
	Fri, 22 Jun 2007 07:53:26 -0500
Message-ID: <467BC634.6050607@getopt.org>
Date: Fri, 22 Jun 2007 14:53:08 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: undisclosed-recipients:;
Subject: [ANN] Luke 0.7.1 released
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I just released Luke 0.7.1, the Lucene Index Toolbox. As usually, you
can get it here:

	http://www.getopt.org/luke/

This minor release is mostly an upgrade to the official Lucene 2.2.0
release JARs.

The following changes have been made in this release:
* Added a term distribution analysis plugin by Mark Harwood.
* Fixed IndexGate class to correctly show deletable files.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 13:20:21 2007
Return-Path: <java-user-return-28814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21015 invoked from network); 22 Jun 2007 13:20:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 13:20:20 -0000
Received: (qmail 1340 invoked by uid 500); 22 Jun 2007 13:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1310 invoked by uid 500); 22 Jun 2007 13:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1299 invoked by uid 99); 22 Jun 2007 13:20:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 06:20:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 06:20:12 -0700
Received: by ug-out-1314.google.com with SMTP id m2so841654uge
        for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 06:19:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VWp0D5F8X2mDgCV1EtFFzaVcgDmmhKjg++TX6H0+Xq7SlGo+7NNxUGRiSl1O0l5TFbAOvUG0inMWdMf6Sp2xf86rZ/LaxdDyNwf58XmujLZ8mevTaU6IJ+IVrs+Cm9PZ6niWhOzzWNKFDMlGPLagmYgUxDe7fydcxuMaQMjpW3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fPsptaPK5LOoUrqYL12vRdgpUzxmbkNDoA/ppBXnVFM2e79NWQ4xRzbRWmI14ipqDx+qr1sf6HGWZSj/tnDxKX5FFpgYSni/ZgXL+ZjGrEmzVsasmPZ40PlgQ2o/1r9vzNc36RlCDD9CquKvY1YN7dG2Fd0EsyoHEE0UyTWNXaw=
Received: by 10.82.112.3 with SMTP id k3mr6357415buc.1182518390456;
        Fri, 22 Jun 2007 06:19:50 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 22 Jun 2007 06:19:50 -0700 (PDT)
Message-ID: <359a92830706220619w3f684d20ta81af53d5ace4651@mail.gmail.com>
Date: Fri, 22 Jun 2007 09:19:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [ANN] Luke 0.7.1 released
In-Reply-To: <467BC634.6050607@getopt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100009_18866706.1182518390437"
References: <467BC634.6050607@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100009_18866706.1182518390437
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Outstanding!

Erick

On 6/22/07, Andrzej Bialecki <ab@getopt.org> wrote:
>
> Hi all,
>
> I just released Luke 0.7.1, the Lucene Index Toolbox. As usually, you
> can get it here:
>
>         http://www.getopt.org/luke/
>
> This minor release is mostly an upgrade to the official Lucene 2.2.0
> release JARs.
>
> The following changes have been made in this release:
> * Added a term distribution analysis plugin by Mark Harwood.
> * Fixed IndexGate class to correctly show deletable files.
>
>
> --
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_100009_18866706.1182518390437--

From java-user-return-28815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 13:48:08 2007
Return-Path: <java-user-return-28815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36591 invoked from network); 22 Jun 2007 13:48:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 13:48:05 -0000
Received: (qmail 70011 invoked by uid 500); 22 Jun 2007 13:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69903 invoked by uid 500); 22 Jun 2007 13:47:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69791 invoked by uid 99); 22 Jun 2007 13:47:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 06:47:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 06:47:47 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 22 Jun 2007 06:47:26 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: Luke Enhancement Suggestions
Date: Fri, 22 Jun 2007 06:46:27 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278015AB0AE@WDCCPMAIL01.markettools.com>
In-Reply-To: <467BC634.6050607@getopt.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Luke Enhancement Suggestions
Thread-Index: Ace0zGNdcN2SguI5RPCjSfHWEPZx5AABMa5w
References: <467BC634.6050607@getopt.org>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Jun 2007 13:47:26.0132 (UTC) FILETIME=[DE238F40:01C7B4D3]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am using your tool a lot and it helps me tremendously analyzing our
different indexes.  I highly appreciate your work and effort you put
into this tool.=20

This is an enhancement suggestion.

It would be great if Luke could remember the following:

1) Which Analyzer last time was selected.  I usually use always the same
Analyzer and each time I change the index or open Luke I have to set the
Analyzer again and again

2) Which default field was last time selected.  If the index does not
have the field then select the first one found as it current is the case

3) Which Index was last time opened and which of the three options where
selected the last time.  It would be even better if Luke could remember
a complete setting for any given index in the Path selection box.  For
example if I choose an index I was using some time ago it remembers the
three different options used for this specific index as well as which
Analyzer I was using and which was the default field for this index.

Talking about the Open Index dialog:

It would be great if there would be something that shows me the full
name of a selected file without the need to click into the Path edit
field and scroll to the right.  I often have index folders with a deep
path and it is hard to distinguish them in the select list.  I also
noticed that the dropdown has horizontal and vertical scroll bars but if
I scroll to the right the remaining chars of the path a cropped and not
visible.

Again, thank you very much for providing the helpful tool.

Andreas



-----Original Message-----
From: Andrzej Bialecki [mailto:ab@getopt.org]=20
Sent: Friday, June 22, 2007 5:53 AM
To: undisclosed-recipients
Subject: [ANN] Luke 0.7.1 released

Hi all,

I just released Luke 0.7.1, the Lucene Index Toolbox. As usually, you
can get it here:

	http://www.getopt.org/luke/

This minor release is mostly an upgrade to the official Lucene 2.2.0
release JARs.

The following changes have been made in this release:
* Added a term distribution analysis plugin by Mark Harwood.
* Fixed IndexGate class to correctly show deletable files.


--=20
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 14:02:00 2007
Return-Path: <java-user-return-28816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40608 invoked from network); 22 Jun 2007 14:01:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 14:01:58 -0000
Received: (qmail 3424 invoked by uid 500); 22 Jun 2007 14:01:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3396 invoked by uid 500); 22 Jun 2007 14:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3376 invoked by uid 99); 22 Jun 2007 14:01:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 07:01:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Andreas.Guther@markettools.com designates 72.5.112.150 as permitted sender)
Received: from [72.5.112.150] (HELO mvmail04.markettools.com) (72.5.112.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 07:01:50 -0700
Received: from WDCCPMAIL01.markettools.com ([10.64.64.33]) by mvmail04.markettools.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 22 Jun 2007 07:01:29 -0700
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene index performance
Date: Fri, 22 Jun 2007 07:00:57 -0700
Message-ID: <3FB08D6A21B3EC4D8749EF6D9E626278015AB0B8@WDCCPMAIL01.markettools.com>
In-Reply-To: <DC061CD2AFA7774FB904EEB43D98CB3AB707D9@CORPUSMX60B.corp.emc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene index performance
Thread-Index: AcexGjaY8u7pueWUQx+QhugDQv5F/QBw5aeAAH2htVA=
References: <200706170806.l5H86LjM022294@ns21.webhostsg.com> <46751B97.1080301@gmail.com> <c38ea6f20706171300o205be743j9169fd75b8c2c31b@mail.gmail.com> <DC061CD2AFA7774FB904EEB43D98CB3AB707D9@CORPUSMX60B.corp.emc.com>
From: "Andreas Guther" <Andreas.Guther@markettools.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Jun 2007 14:01:29.0651 (UTC) FILETIME=[D4EA5830:01C7B4D5]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Li,

Sorry for taking so long to answer your questions.

We came up with splitting our index into smaller units after we realized
that we have to deal with an index of the size of many GB.  Updating and
optimizing such large files becomes a bottle neck.  We portioned our
index based on when the indexed units where created.  Updates usually
happen only on current units and rarely on units for previous years.

In terms of performance I think there is very little difference and if
stated in another response it really depends on your hardware.

All index directories are located on the same box and drive.

The documents are not distributed into several files.  I suppose you do
not talk about a Lucene document but rather about an indexed unit.  It
really depends how you organize your index but my experience is not to
split one indexed unit into parts.  When I started to index our units we
separated meta data from aggregated units, like for example a books meta
information like ISBN etc. and its pages.  Each page (or aggregated
unit) was a single Lucene document.  This made it somehow difficult to
assemble the information as the UI dictated it and we went back to treat
one unit and its aggregates as a single Lucene document which made the
reading faster.

Andreas


-----Original Message-----
From: Fang_Li@emc.com [mailto:Fang_Li@emc.com]=20
Sent: Tuesday, June 19, 2007 8:05 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene index performance

Hi Andreas,
	I am very interested in the multiple index file index/search.
Can you kindly help me on following questions?
1) Why you use multi index files? How much is the performance gain for
both indexing and searching? Someone reported that there no big
performance difference except the number if indices is huge, like 1000.
2) Are these index files located in a single machine or distributed into
multiple machines?=20
3) How do you distribute the document into several index files?

Thanks a lot,
Li

-----Original Message-----
From: Andreas Guther [mailto:andreas.guther@gmail.com]=20
Sent: Monday, June 18, 2007 4:00 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene index performance

Searching on multiple index files is incredible fast.  We have 10
different
index folders with different sizes.  All folders together have a size of
7
GB.  Results come back usual within less than 50 ms.  Getting results
out of
the index i.e. reading documents is expensive and you will have to spent
time here to get a good performance.  You will need to look into
- Topdocs
- Extracting results in an ordered way, i.e. sort by index and within an
index by document id.  This will help to minimize disk head jumps and
gave
me a tremendous boost.
- Extracting only what you need (using a special read filter I do not
recall
the name right now and I do not have access to my sources at the moment
of
writing this)

Andreas


On 6/17/07, Mark Miller <markrmiller@gmail.com> wrote:
>
>
>
> Lee Li Bin wrote:
> > Hi,
> >
> > I would like to know how's the performance during indexing and
searching
> of
> > results on a large index files would be like.
> >
> Fast.
> > And is it possible to create multiple index files and search across
> multiple
> > index files?
> Yes.
> >  If possible, may I know how could it be done?
> >
> Check out MultiSearcher.
>
>
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/or
g/apache/lucene/search/MultiSearcher.html
> > Thanks a lot.
> >
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 14:55:23 2007
Return-Path: <java-user-return-28817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57675 invoked from network); 22 Jun 2007 14:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 14:55:22 -0000
Received: (qmail 43507 invoked by uid 500); 22 Jun 2007 14:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43467 invoked by uid 500); 22 Jun 2007 14:55:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43453 invoked by uid 99); 22 Jun 2007 14:55:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 07:55:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 07:55:12 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I1kXD-0005Ux-Sq
	for java-user@lucene.apache.org; Fri, 22 Jun 2007 07:54:51 -0700
Message-ID: <11253761.post@talk.nabble.com>
Date: Fri, 22 Jun 2007 07:54:51 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ways to minimize index size?
In-Reply-To: <11249562.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <f071061b0703140303t59b9c584n3d8780ecc7aa79b3@mail.gmail.com> <cfc620660703140633x75af8fd5q929eb1b2fc7b1a4e@mail.gmail.com> <11195406.post@talk.nabble.com> <359a92830706190709l1e9dd54au254075bba125146e@mail.gmail.com> <11195897.post@talk.nabble.com> <11207318.post@talk.nabble.com> <4678F0BB.4060709@knowledgeview.co.uk> <11249562.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Steve,
          i use your idea it works for me great,once again i say thanks to
you.But when i use
                    (Index.No_NORMS ) it increase the size in the same time
when i use(Index.TOKENIZED)it will reduce the size.

           i use the code given by you   
BigInteger  _bi = new java.math.BigInteger("9198408365809", 10);
 System.out.println(_bi.toString(36));     

 other RADIX increase the size.                    

          Modifications I made in my code is below:

    String outgoingNumber="9198408365809";

     String incomingNumber="9840861114";
     String datesc="070601";
     String imsiNumber="444021365987";
     String callType="1";


     String outgoingRoute="DJZ01" ;
     String incomingRoute="BSC01";

BigInteger  _on = new java.math.BigInteger(outgoingNumber, 10);
 String compOutgoingNumber= _on.toString(36);

BigInteger  _in = new java.math.BigInteger( incomingNumber, 10);
 String compIncomingNumber= _in.toString(36);

BigInteger  _ds = new java.math.BigInteger(dateSc, 10);
 String compDateSc= _ds.toString(36);

BigInteger  _im = new java.math.BigInteger(imsiNumber, 10);
 String compImsiNumber= _im.toString(36);

String contents(compOutgoingNumber+" "+compIncomingNumber+" "+compDateSc+"
"+compImsiNumber+callTYpe);

String records=((compOutgoingNumber+" "+compIncomingNumber+" "+compDateSc+ "
" +outgoingRoute+" "+incomingRoute);

File indexDir = new File("/home/Mediation/Index");
IndexWriter indexWriter =new IndexWriter(indexDir, new StandardAnalyzer(),
true);
Document doc=new Document();
doc.add("contents",contents,Field.Store.NO,Field.Index.TOKENIZED);
doc.add("records",records,Field.Store.YES ,Field.Index.No);
indexWriter.addDocument(document);

please help me to acheive that


Sebastin wrote:
> 
> Hi Steve,
>      thanks for your reply a lot.its now compress upto 50% of the original
> size.is there any other possiblity using this code compress upto 80%.
> 
> Steve Liles wrote:
>> 
>> Compression aside you could index the "contents" as terms in separate 
>> fields instead of tokenized text, and disable storing of norms:
>> 
>> String outgoingNumber="9198408365809";
>> String incomingNumber="9840861114";
>> 
>> _doc.add(new Field("outgoingNumber", outgoingNumber, Store.NO, 
>> Index.NO_NORMS));
>> _doc.add(new Field("incomingNumber", incomingNumber, Store.NO, 
>> Index.NO_NORMS));
>> 
>> According to the docs "Index.NO_NORMS" will save you one byte per 
>> document in the index.
>> 
>> Or you could index all of the data as separate terms in the same 
>> "contents" field if you wanted (make the first param "contents" for all 
>> of the terms), which is more comparable to what you are currently doing.
>> (Another advantage is that the Analyzer will not be used for fields 
>> which are untokenized, and indexing should be faster.)
>> 
>> ...
>> 
>> One way to compress numerical data (possibly not the best - i'm no 
>> expert) is to change the base of the number that is indexed / stored in 
>> the index.
>> 
>> java.lang.Long and java.math.BigInteger have methods for converting from 
>> one radix to another. Taking your "outgoingNumber" as an example:
>> 
>> //compression
>> BigInteger  _bi = new java.math.BigInteger("9198408365809", 10);
>> System.out.println(_bi.toString(36));
>> 
>>  > 39douufap
>> 
>> //decompression
>> BigInteger _bi = new java.math.BigInteger("39douufap", 36);
>> System.out.println(_bi.toString(10));
>> 
>>  >9198408365809
>> 
>> Converting to a higher radix will give you better compression but you'll
>> have to do it yourself as the jdk classes only work up to base 36
>> <http://en.wikipedia.org/wiki/Base_36>.
>> 
>> It's worth compressing your unstored "contents" field as well as your 
>> stored "records" field, as the unique terms in the "contents" field will 
>> effectively be stored.
>> 
>> Also don't forget to convert the terms when you search too, otherwise 
>> you won't find anything ;)
>> 
>> Steve.
>> 
>> 
>> Sebastin wrote:
>>> When i use the standardAnalyzer storage size increases.how can i
>>> minimize
>>> index store
>>>
>>> Sebastin wrote:
>>>   
>>>>                        
>>>> String outgoingNumber="9198408365809";
>>>> String incomingNumber="9840861114";
>>>> String datesc="070601";
>>>> String imsiNumber="444021365987";
>>>> String callType="1";
>>>>
>>>> //Search Fields
>>>>  String contents=(outgoingNumber+" "+incomingNumber+" "+dateSc+"
>>>> "+imsiNumber+" "+callType );
>>>>
>>>> //Display Fields
>>>>                      
>>>>                           String records=(callingPartyNumber+"
>>>> "+calledPartyNumber+" "+dateSc+" "+chargDur+" "+incomingRoute+"
>>>> "+outgoingRoute+" "+timeSc);
>>>>                           
>>>>                      
>>>>                        IndexWriter indexWriter = new
>>>> IndexWriter(indexDir,new StandardAnalyzer(),true);  
>>>>                         
>>>>                           Document document = new Document();
>>>>   
>>>>                              document.add(new
>>>> Field("contents",contents,Field.Store.NO,Field.Index.TOKENIZED));
>>>>                              
>>>>                      
>>>>                      
>>>>                 document.add(new
>>>> Field("records",records,Field.Store.YES,Field.Index.NO));
>>>>                              
>>>>                            
>>>>                              indexWriter.setUseCompoundFile(true);
>>>>                              indexWriter.addDocument(document);
>>>>                           }
>>>>
>>>> please help me to acheive the minimum size
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> Erick Erickson wrote:
>>>>     
>>>>> Show us the code you use to index. Are you storing the fields?
>>>>> omitting norms? Throwing out stop words?
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On 6/19/07, Sebastin <sebasmtech@gmail.com> wrote:
>>>>>       
>>>>>> Hi Does anyone give me an idea to reduce the Index size to down.now i
>>>>>> am
>>>>>> getting 42% compression in my index store.i want to reduce upto 70%.i
>>>>>> use
>>>>>> standardanalyzer to write the document.when i use SimpleAnalyzer it
>>>>>> reduce
>>>>>> upto 58% but i couldnt search the document.please help me to acheive.
>>>>>>
>>>>>> Thanks in advance
>>>>>>
>>>>>> Jeff-188 wrote:
>>>>>>         
>>>>>>>> I found that reducing my index from 8G to 4G (through not stemming)
>>>>>>>>             
>>>>>> gave
>>>>>> me
>>>>>>         
>>>>>>> about a 10% performance improvement.
>>>>>>>
>>>>>>> How did you do this? I don't see this as an option.
>>>>>>>
>>>>>>> Jeff
>>>>>>>
>>>>>>>
>>>>>>>           
>>>>>> --
>>>>>> View this message in context:
>>>>>> http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11195406
>>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>         
>>>>>       
>>>>     
>>>
>>>   
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/ways-to-minimize-index-size--tf3401213.html#a11253761
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 15:40:14 2007
Return-Path: <java-user-return-28818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53099 invoked from network); 22 Jun 2007 15:40:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 15:40:12 -0000
Received: (qmail 93070 invoked by uid 500); 22 Jun 2007 15:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93005 invoked by uid 500); 22 Jun 2007 15:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92967 invoked by uid 99); 22 Jun 2007 15:40:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 08:40:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of robert.walpole@devon.gov.uk designates 159.15.129.82 as permitted sender)
Received: from [159.15.129.82] (HELO mr2.devon.gov.uk) (159.15.129.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 08:39:48 -0700
Received: from localhost (localhost [127.0.0.1])
	by mr2.devon.gov.uk (Postfix) with ESMTP id BFCDDCD936
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 16:38:57 +0100 (BST)
Received: from mr2.devon.gov.uk ([127.0.0.1])
 by localhost (mr2.devon.gov.uk [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 19379-03 for <java-user@lucene.apache.org>;
 Fri, 22 Jun 2007 16:38:56 +0100 (BST)
Received: from smtp.devon.gov.uk (smtp.devon.gov.uk [159.15.4.169])
	by mr2.devon.gov.uk (Postfix) with ESMTP id D3E75CD929
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 16:38:56 +0100 (BST)
Received: from dschl75.ds.devon.gov.uk (dschl75.ds.devon.gov.uk [159.15.4.75])
	by smtp.devon.gov.uk (Postfix) with ESMTP id 3BC75967F
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 16:38:48 +0100 (BST)
Received: from dschl72.ds.devon.gov.uk ([159.15.4.72]) by dschl75.ds.devon.gov.uk with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 22 Jun 2007 16:38:56 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C7B4E3.71C59F06"
Subject: Porter stemming problem
Date: Fri, 22 Jun 2007 16:38:56 +0100
Message-ID: <C9EA440929C8264DAB7C215BD4B2D65C02E551B7@dschl72.ds.devon.gov.uk>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: Porter stemming problem
Thread-Index: Ace043FaWJX5QQ19RcecGd6TB+wOtQ==
From: "Robert Walpole" <robert.walpole@devon.gov.uk>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Jun 2007 15:38:56.0759 (UTC) FILETIME=[72103870:01C7B4E3]
X-Virus-Scanned: amavisd-new at devon.gov.uk
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7B4E3.71C59F06
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I am using the PorterStemAnalyzer class (attached) to provide stemming
for a Lucene index.

To stem the terms in the index we use the following...

//open an index writer in append mode
IndexWriter idxWriter =3D new IndexWriter(LUCENE_INDEX_PATH, new
PorterStemAnalyzer(), false);

//add the lucene document to the index
idxWriter.addDocument(idxDoc);

Having inspected the index using Luke, I can confirm that the terms are
being stemmed as expected. However, in order for this to work properly I
am not clear whether I should also be stemming the search terms that are
entered?

For example there is a term "relax" in the index which I guess is
stemmed from "relaxation". If the user searches on "relaxing" do I need
to stem the search term in order for it to return the result?=20

At the moment I am attempting to do this as follows...

analyzer =3D new PorterStemAnalyzer();
parser =3D new QueryParser("content", analyzer);
Query query =3D parser.parse("keywords: relaxing");
Hits hits =3D idxSearcher.search(query);

...but this is not returning any matches.

Thanks
Rob Walpole=20
Devon Portal Developer
Email robert.walpole@devon.gov.uk
Web http://www.devonline.gov.uk



 <<PorterStemAnalyzer.java>>=20


------_=_NextPart_001_01C7B4E3.71C59F06
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C7B4E3.71C59F06--

From java-user-return-28819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 16:13:04 2007
Return-Path: <java-user-return-28819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75449 invoked from network); 22 Jun 2007 16:13:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 16:13:03 -0000
Received: (qmail 3471 invoked by uid 500); 22 Jun 2007 16:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3436 invoked by uid 500); 22 Jun 2007 16:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3425 invoked by uid 99); 22 Jun 2007 16:12:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 09:12:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 09:12:40 -0700
Received: by ug-out-1314.google.com with SMTP id m2so879826uge
        for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 09:12:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=S6zu4SShuLp7nK8e1DZfEElPy+5H5gL/rCZg+9QFOXkRvu5WOXGj0m/j0pxBM/mLcS1J6cGuIKPiYJCNcdw7C7btNHbwYj4u165eDLxQwdbVAEyUuCQDFsWOemTEMBcu+eYNnk8A1QrrnLd1+rWX22IgOqgcpN0EQJ8AZIEnld0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gfoRlQVGcRu8ZBr9CEhluPi3qAFdwbWqIxlelZ8QNg2gUZmVA55ApmfUexHBGaWmXpPeJcFadJod7/dn7asB8sesOtKrm4HnaIZY6qBPT0SrUhjIJvn7FkQBjuXI/ydA6szJP5ozXTYv1UwAVUrsWDgDEO8WEsS/xn+erIdEC+g=
Received: by 10.82.162.14 with SMTP id k14mr6683264bue.1182528739238;
        Fri, 22 Jun 2007 09:12:19 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 22 Jun 2007 09:12:19 -0700 (PDT)
Message-ID: <359a92830706220912m7a7bf83ey8916434cf8a04900@mail.gmail.com>
Date: Fri, 22 Jun 2007 12:12:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Porter stemming problem
In-Reply-To: <C9EA440929C8264DAB7C215BD4B2D65C02E551B7@dschl72.ds.devon.gov.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101504_10414041.1182528739201"
References: <C9EA440929C8264DAB7C215BD4B2D65C02E551B7@dschl72.ds.devon.gov.uk>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101504_10414041.1182528739201
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, you should also stem the query terms. Otherwise, you'll have
indexed "working" as "work", but your search for "working" will look
for "working" and won't match. Which is not what you want, I'm sure.

Query.toString() will tell you a lot about how queries are
processed, BTW....

In general, unless you're very sure what the effects are, you should
use the same analyzer for indexing as you use for searching.

Best
Erick

On 6/22/07, Robert Walpole <robert.walpole@devon.gov.uk> wrote:
>
> Hi,
>
> I am using the PorterStemAnalyzer class (attached) to provide stemming
> for a Lucene index.
>
> To stem the terms in the index we use the following...
>
> //open an index writer in append mode
> IndexWriter idxWriter = new IndexWriter(LUCENE_INDEX_PATH, new
> PorterStemAnalyzer(), false);
>
> //add the lucene document to the index
> idxWriter.addDocument(idxDoc);
>
> Having inspected the index using Luke, I can confirm that the terms are
> being stemmed as expected. However, in order for this to work properly I
> am not clear whether I should also be stemming the search terms that are
> entered?
>
> For example there is a term "relax" in the index which I guess is
> stemmed from "relaxation". If the user searches on "relaxing" do I need
> to stem the search term in order for it to return the result?
>
> At the moment I am attempting to do this as follows...
>
> analyzer = new PorterStemAnalyzer();
> parser = new QueryParser("content", analyzer);
> Query query = parser.parse("keywords: relaxing");
> Hits hits = idxSearcher.search(query);
>
> ...but this is not returning any matches.
>
> Thanks
> Rob Walpole
> Devon Portal Developer
> Email robert.walpole@devon.gov.uk
> Web http://www.devonline.gov.uk
>
>
>
> <<PorterStemAnalyzer.java>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------=_Part_101504_10414041.1182528739201--

From java-user-return-28820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 16:27:35 2007
Return-Path: <java-user-return-28820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81924 invoked from network); 22 Jun 2007 16:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 16:27:33 -0000
Received: (qmail 42746 invoked by uid 500); 22 Jun 2007 16:27:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42709 invoked by uid 500); 22 Jun 2007 16:27:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42698 invoked by uid 99); 22 Jun 2007 16:27:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 09:27:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 09:27:25 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l5MGR3oh001124
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 12:27:04 -0400
Message-ID: <467BF802.3030405@syr.edu>
Date: Fri, 22 Jun 2007 12:25:38 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Porter stemming problem
References: <C9EA440929C8264DAB7C215BD4B2D65C02E551B7@dschl72.ds.devon.gov.uk>
In-Reply-To: <C9EA440929C8264DAB7C215BD4B2D65C02E551B7@dschl72.ds.devon.gov.uk>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Rob,

Robert Walpole wrote:
> At the moment I am attempting to do this as follows...
> 
> analyzer = new PorterStemAnalyzer();
> parser = new QueryParser("content", analyzer);
> Query query = parser.parse("keywords: relaxing");
> Hits hits = idxSearcher.search(query);
> 
> ...but this is not returning any matches.

Are you trying to look up "relaxing" in a field named "keywords"?  If
so, the intervening space defeats this - your code results in a search
for (stemmed versions of) "keywords:" or "relaxing" in the default
"content" field.

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 19:28:02 2007
Return-Path: <java-user-return-28821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45316 invoked from network); 22 Jun 2007 19:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 19:28:00 -0000
Received: (qmail 27540 invoked by uid 500); 22 Jun 2007 19:27:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27503 invoked by uid 500); 22 Jun 2007 19:27:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27492 invoked by uid 99); 22 Jun 2007 19:27:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 12:27:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=BLANK_LINES_70_80
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 12:27:52 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: nfs mount problem
Date: Fri, 22 Jun 2007 15:27:30 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5607FA06@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: nfs mount problem
Thread-Index: Ace00BU6pvWh0nirTHS/b4XccebZfAAMwE4A
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


http://issues.apache.org/jira/browse/LUCENE-673


This says the NFS mount problem is still open, is this the case?

Has anyone been able to deal with this adequately?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 20:38:23 2007
Return-Path: <java-user-return-28822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65609 invoked from network); 22 Jun 2007 20:38:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 20:38:21 -0000
Received: (qmail 41564 invoked by uid 500); 22 Jun 2007 20:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41518 invoked by uid 500); 22 Jun 2007 20:38:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41507 invoked by uid 99); 22 Jun 2007 20:38:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 13:38:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 13:38:14 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id D7EFA1A7A
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 16:37:52 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Fri, 22 Jun 2007 16:37:52 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 18AA91DE6; Fri, 22 Jun 2007 16:37:53 -0400 (EDT)
Message-Id: <1182544673.4126.1196597147@webmail.messagingengine.com>
X-Sasl-Enc: ps97ZWpeeduMDS8LOyqsicLLEPlNGjtzfyO8GDUr3ZPy 1182544673
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <CC2671C08F06704ABFD37ED1EA09AA5607FA06@birexchange.BIRPLAZA.local>
Subject: Re: nfs mount problem
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA5607FA06@birexchange.BIRPLAZA.local>
Date: Fri, 22 Jun 2007 16:37:53 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


Actually this issue should be closed.  I will close it.

As far as I know, Lucene should now work over NFS, except you will
have to make a custom deletion policy that works for your application.

Lucene had issues with NFS in three areas: locking, stale client-side
file caches and how NFS handles deletion of open files.  The first two
were fixed in Lucene 2.1 with lock-less commits (LUCENE-701) and the
last one is fixed in 2.2 with the addition of "custom deletion
policies" (LUCENE-710).

For a custom deletion policy you need to implement the
org.apache.lucene.index.IndexDeletionPolicy interface in your own
class and pass an instance of that class to your IndexWriter.  This
class tells IndexWriter when it's safe to delete older commits.  By
default Lucene uses an instance of KeepOnlyLastCommitDeletionPolicy.

The basic idea is to implement logic that can tell when your readers
are done using an older commit in the index.  For example if you know
your readers refresh themselves once per hour then your deletion
policy can safely delete any commit older than 1 hour.

But please note that while I believe NFS will now work fine, this has
not been heavily tested yet.  Also note that performance over NFS is
generally not great.  If you do go down this route please report back
on any success or failure!  Thanks.

Mike

"Beard, Brian" <Brian.Beard@mybir.com> wrote:
> 
> http://issues.apache.org/jira/browse/LUCENE-673
> 
> 
> This says the NFS mount problem is still open, is this the case?
> 
> Has anyone been able to deal with this adequately?
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 21:27:13 2007
Return-Path: <java-user-return-28823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75138 invoked from network); 22 Jun 2007 21:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 21:27:11 -0000
Received: (qmail 30378 invoked by uid 500); 22 Jun 2007 21:27:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30048 invoked by uid 500); 22 Jun 2007 21:27:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30037 invoked by uid 99); 22 Jun 2007 21:27:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 14:27:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 14:27:03 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l5MLQh026741
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 14:26:43 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007062214264231011
 for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 14:26:42 -0700
Received: from avocado.ai.sri.com ([130.107.65.9])
	by Salt.AI.SRI.COM with asmtp 
	(Cipher TLSv1:RC4-MD5:128) (Exim 3.35 #1 (Debian))
	id 1I1qeQ-0004u0-00
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 14:26:42 -0700
Message-ID: <467C3E8E.6080805@ai.sri.com>
Date: Fri, 22 Jun 2007 14:26:38 -0700
From: Jiye Yu <yu@AI.SRI.COM>
Organization: AIC
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Analyzer sharing
References: <C9EA440929C8264DAB7C215BD4B2D65C02E551B7@dschl72.ds.devon.gov.uk> <359a92830706220912m7a7bf83ey8916434cf8a04900@mail.gmail.com>
In-Reply-To: <359a92830706220912m7a7bf83ey8916434cf8a04900@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I guess an Analyzer (built in ones such as StandardAnalyzer, 
POrterStemAnalyer and etc) is not thread safe. But I wonder if it's ok 
to share the same analyzer object within a thread. For example, if I 
want to create a PerFieldAnalyzer for 5 fields, can I use the same 
Analyzer object for all the fields? Or can both a QueryParser and 
Indexer/Searcher use the same Analyzer object?

Any comment?


Thanks!

Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 21:32:31 2007
Return-Path: <java-user-return-28824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76980 invoked from network); 22 Jun 2007 21:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 21:32:26 -0000
Received: (qmail 36760 invoked by uid 500); 22 Jun 2007 21:32:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36716 invoked by uid 500); 22 Jun 2007 21:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36705 invoked by uid 99); 22 Jun 2007 21:32:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 14:32:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 14:32:18 -0700
Received: by wr-out-0506.google.com with SMTP id i4so873773wra
        for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 14:31:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=eCAhAvyOdYPJQGrNeBwDSUe4LHoup1aSZeDoMG5ksYSG7KQCx23TQ9n579+PtuwL4yfzlvlKOppjMxZvpTP9prmlXCrH7mTJG/ZGCrT0IUtk5WvvOvPNX5iBNDGPoIWwtvQw5GLNAXOK4hiQSTmoGvw9hK4CORyW6bNJf+EgcwE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=qxId41sAVpZkVfzMwlrZ0N7km4vsMxrt25OcFLytzsG55Lu6sT9t5jng0jj2MKahWWtH7pLtmjKe9t2f87Lvv4WvEw7fsBwDa7oKohlkBu1Ea+rDMk2Gcjw4Up750LfsNY/bVkzxzAQT5drbQHazvKNpatRqX/PWllA/dxEoJuA=
Received: by 10.143.5.21 with SMTP id h21mr113475wfi.1182547917072;
        Fri, 22 Jun 2007 14:31:57 -0700 (PDT)
Received: by 10.142.113.13 with HTTP; Fri, 22 Jun 2007 14:31:57 -0700 (PDT)
Message-ID: <c68e39170706221431l7322e122j40185fc7e2c85d46@mail.gmail.com>
Date: Fri, 22 Jun 2007 17:31:57 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Analyzer sharing
In-Reply-To: <467C3E8E.6080805@ai.sri.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <C9EA440929C8264DAB7C215BD4B2D65C02E551B7@dschl72.ds.devon.gov.uk>
	 <359a92830706220912m7a7bf83ey8916434cf8a04900@mail.gmail.com>
	 <467C3E8E.6080805@ai.sri.com>
X-Google-Sender-Auth: a5c392a56c76362e
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/22/07, Jiye Yu <yu@ai.sri.com> wrote:
> I guess an Analyzer (built in ones such as StandardAnalyzer,
> POrterStemAnalyer and etc) is not thread safe.

Analyzers *are* thread-safe.
Multiple threads can all call analyzer.tokenStream() without any
synchronization.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 22 21:42:39 2007
Return-Path: <java-user-return-28825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80524 invoked from network); 22 Jun 2007 21:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2007 21:42:38 -0000
Received: (qmail 57731 invoked by uid 500); 22 Jun 2007 21:42:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57697 invoked by uid 500); 22 Jun 2007 21:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57686 invoked by uid 99); 22 Jun 2007 21:42:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 14:42:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 14:42:30 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l5MLg9028818
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 14:42:09 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007062214420831550
 for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 14:42:08 -0700
Received: from avocado.ai.sri.com ([130.107.65.9])
	by Salt.AI.SRI.COM with asmtp 
	(Cipher TLSv1:RC4-MD5:128) (Exim 3.35 #1 (Debian))
	id 1I1qtN-0004xl-00
	for <java-user@lucene.apache.org>; Fri, 22 Jun 2007 14:42:09 -0700
Message-ID: <467C422C.8040507@ai.sri.com>
Date: Fri, 22 Jun 2007 14:42:04 -0700
From: Jiye Yu <yu@AI.SRI.COM>
Reply-To: yu@AI.SRI.COM
Organization: AIC
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Analyzer sharing
References: <C9EA440929C8264DAB7C215BD4B2D65C02E551B7@dschl72.ds.devon.gov.uk>	 <359a92830706220912m7a7bf83ey8916434cf8a04900@mail.gmail.com>	 <467C3E8E.6080805@ai.sri.com> <c68e39170706221431l7322e122j40185fc7e2c85d46@mail.gmail.com>
In-Reply-To: <c68e39170706221431l7322e122j40185fc7e2c85d46@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I see.
I guess those Filters (e.g. PorterStemFilter) that make up the analyzer 
are not thread safe or cannot be shared.
Thanks for your quick response!

Jay

Yonik Seeley wrote:
> On 6/22/07, Jiye Yu <yu@ai.sri.com> wrote:
>> I guess an Analyzer (built in ones such as StandardAnalyzer,
>> POrterStemAnalyer and etc) is not thread safe.
> 
> Analyzers *are* thread-safe.
> Multiple threads can all call analyzer.tokenStream() without any
> synchronization.
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 23 05:36:26 2007
Return-Path: <java-user-return-28826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95690 invoked from network); 23 Jun 2007 05:36:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2007 05:36:24 -0000
Received: (qmail 81697 invoked by uid 500); 23 Jun 2007 05:36:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81658 invoked by uid 500); 23 Jun 2007 05:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81642 invoked by uid 99); 23 Jun 2007 05:36:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 22:36:20 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FORGED_YAHOO_RCVD,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jun 2007 22:36:14 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I1yHp-0007BB-D6
	for java-user@lucene.apache.org; Fri, 22 Jun 2007 22:35:53 -0700
Message-ID: <11263519.post@talk.nabble.com>
Date: Fri, 22 Jun 2007 22:35:53 -0700 (PDT)
From: Mahdi Rahimi <mhd_rhm@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: JavaCC Download
In-Reply-To: <467A8E41.4090801@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24151_21696566.1182576953349"
X-Nabble-From: mhd_rhm@yahoo.com
References: <11233766.post@talk.nabble.com> <467A8E41.4090801@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24151_21696566.1182576953349
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi Steven.

When i access to this address, this message appread

Forbidden
You don't have permission to access /servlets/ProjectHome on this server.

What's the problem?

Thakns.


Steven Rowe wrote:
> 
> Mahdi Rahimi wrote:
>> Hi.
>> 
>> How can I access JavaCC??
>> 
>> Thanks
> 
> https://javacc.dev.java.net/
> 
> -- 
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/JavaCC-Download-tf3958940.html#a11263519
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_24151_21696566.1182576953349--


From java-user-return-28827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 24 07:13:03 2007
Return-Path: <java-user-return-28827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34821 invoked from network); 24 Jun 2007 07:13:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2007 07:13:02 -0000
Received: (qmail 86846 invoked by uid 500); 24 Jun 2007 07:12:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86812 invoked by uid 500); 24 Jun 2007 07:12:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86801 invoked by uid 99); 24 Jun 2007 07:12:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 00:12:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 00:12:55 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I2MGw-0007TX-Dg
	for java-user@lucene.apache.org; Sun, 24 Jun 2007 00:12:34 -0700
Message-ID: <11272948.post@talk.nabble.com>
Date: Sun, 24 Jun 2007 00:12:34 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Is there any possibility to display Index.NO_NORMS values
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,
         Is there any possibility to display Index values

   (ie) when we want to search a field we use,
    

           String test="9840836588"
         Document doc=new Document();
              doc.add(new
Field("test",test,Field.Store.NO,Field.Index.NO_NORMS);
         indexWriter.addDocument(test);


 is it possible to display test value as like stored value?.

 
 
-- 
View this message in context: http://www.nabble.com/Is-there-any-possibility-to-display-Index.NO_NORMS-values-tf3971495.html#a11272948
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 24 16:54:39 2007
Return-Path: <java-user-return-28828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39785 invoked from network); 24 Jun 2007 16:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2007 16:54:37 -0000
Received: (qmail 15137 invoked by uid 500); 24 Jun 2007 16:54:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15093 invoked by uid 500); 24 Jun 2007 16:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15082 invoked by uid 99); 24 Jun 2007 16:54:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 09:54:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 09:54:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AFF595B77A; Sun, 24 Jun 2007 09:54:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9A0507F403
	for <java-user@lucene.apache.org>; Sun, 24 Jun 2007 09:54:08 -0700 (PDT)
Date: Sun, 24 Jun 2007 09:54:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Is there any possibility to display Index.NO_NORMS values
In-Reply-To: <11272948.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0706240952310.5745@hal.rescomp.berkeley.edu>
References: <11272948.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: Is there any possibility to display Index.NO_NORMS values

:          Is there any possibility to display Index values

:               doc.add(new
: Field("test",test,Field.Store.NO,Field.Index.NO_NORMS);
:          indexWriter.addDocument(test);
:
:
:  is it possible to display test value as like stored value?.


I'm confused by your question ... if you want to display the value, why
not store it?  that can be controlled completely independently of the
Index.NO_NORMS option (by changing the Field.Store.NO option)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 24 20:51:56 2007
Return-Path: <java-user-return-28829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79449 invoked from network); 24 Jun 2007 20:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2007 20:51:55 -0000
Received: (qmail 87088 invoked by uid 500); 24 Jun 2007 20:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86483 invoked by uid 500); 24 Jun 2007 20:51:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86462 invoked by uid 99); 24 Jun 2007 20:51:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 13:51:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [71.63.255.151] (HELO smtp.goodstockimages.com) (71.63.255.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 13:51:46 -0700
Received: from [127.0.0.1] (unknown [192.168.1.103])
	by smtp.goodstockimages.com (Postfix) with ESMTP id 7F4DB83C719
	for <java-user@lucene.apache.org>; Sun, 24 Jun 2007 15:52:00 -0500 (CDT)
Message-ID: <467ED947.70409@comcast.net>
Date: Sun, 24 Jun 2007 15:51:19 -0500
From: MC Moisei <mcmoisei@comcast.net>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Searcher throws java.io.IOException: Bad file descriptor
References: <11272948.post@talk.nabble.com> <Pine.LNX.4.58.0706240952310.5745@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0706240952310.5745@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Any of you got something like this ? It looks that I have to reindex my
entities.

2007-06-24 15:00:53,048 [TP-Processor1]: ERROR 
com.gsi.core.service.search.SearchServiceImpl.search(SearchServiceImpl.java:489)
-
Search error : Bad file descriptor on News
java.io.IOException: Bad file descriptor
    at java.io.RandomAccessFile.readBytes(Native Method)
    at java.io.RandomAccessFile.read(RandomAccessFile.java:315)
    at
org.apache.lucene.store.FSIndexInput.readInternal(FSDirectory.java:454)
    at
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:45)
    at
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:219)
    at
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:64)
    at
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:33)
    at org.apache.lucene.store.IndexInput.readVLong(IndexInput.java:76)
    at
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:120)
    at
org.apache.lucene.index.SegmentMergeInfo.next(SegmentMergeInfo.java:64)
    at org.apache.lucene.index.MultiTermEnum.next(MultiReader.java:285)
    at
org.apache.lucene.search.FilteredTermEnum.next(FilteredTermEnum.java:66)
    at org.apache.lucene.search.FuzzyQuery.rewrite(FuzzyQuery.java:121)
    at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
    at org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:372)
    at
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:137)
    at org.apache.lucene.search.Query.weight(Query.java:93)
    at org.apache.lucene.search.Hits.<init>(Hits.java:41)
    at org.apache.lucene.search.Searcher.search(Searcher.java:44)
    at org.apache.lucene.search.Searcher.search(Searcher.java:36)
    at
com.gsi.core.service.search.SearchServiceImpl.search(SearchServiceImpl.java:414)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 24 21:17:40 2007
Return-Path: <java-user-return-28830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83298 invoked from network); 24 Jun 2007 21:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2007 21:17:39 -0000
Received: (qmail 14532 invoked by uid 500); 24 Jun 2007 21:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14493 invoked by uid 500); 24 Jun 2007 21:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14482 invoked by uid 99); 24 Jun 2007 21:17:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 14:17:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 14:17:29 -0700
X-ClientAddr: 222.128.195.2
Received: from xenb04 ([222.128.195.2])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l5OLNpde012526
	for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 05:24:03 +0800
Message-Id: <200706242124.l5OLNpde012526@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: TermVector
Date: Mon, 25 Jun 2007 05:14:22 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0000_01C7B6E7.B1FE1D70"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: Ace2pKJeXbpOViD5QT+uSaovPtT/Ug==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0000_01C7B6E7.B1FE1D70
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

May I know how do I store TermVector?

 

When I set the last parameter to true, isn't it setting storeTermVector to
true?

But I get null value in TermFreqVector.

 

BTW, I'm using lucene 1.4.3

Not intended to upgrade to 2.0

 

docAll.add(Field.Text("contentText", new StringReader(allContent),true));

 

 

thnaks

 

 


------=_NextPart_000_0000_01C7B6E7.B1FE1D70--



From java-user-return-28831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 01:11:58 2007
Return-Path: <java-user-return-28831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46864 invoked from network); 25 Jun 2007 01:11:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 01:11:57 -0000
Received: (qmail 25901 invoked by uid 500); 25 Jun 2007 01:11:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25858 invoked by uid 500); 25 Jun 2007 01:11:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25847 invoked by uid 99); 25 Jun 2007 01:11:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 18:11:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jiangjialin@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 18:11:48 -0700
Received: by nz-out-0506.google.com with SMTP id x7so1011334nzc
        for <java-user@lucene.apache.org>; Sun, 24 Jun 2007 18:11:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FOQ0erLo2Q4VRgoni2IxHjqxOikEt/PN3iWqpNS12dZh/eEQ6h4cOmN5PVR716qxhMyKe4sU1YWnKUwDxlgvqshZiNsvKa0LTGEvvdA7aCOz64tVGTIM1G5exyVlv8zmRgZx+qYO3vWkMTSPqIsFIOv/IfrgyYD337ZHhItHUW8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BSz7vpKtBPzE1wJc+cY0ytSoqK3LU9g3lJN5jxkD7Eimgya+W2EsP9KEaWVJlsINN1wAvWmB0+Z/3hTc0BuVXF7DoqxodGBGfRgN6nqjlFGkut1hByAtZHIumfT1XHbDtrVroW3kKr5CrtFRIm5n5JcNqsyjDGljY1XCVYEVOa8=
Received: by 10.142.177.7 with SMTP id z7mr147190wfe.1182733886404;
        Sun, 24 Jun 2007 18:11:26 -0700 (PDT)
Received: by 10.142.86.4 with HTTP; Sun, 24 Jun 2007 18:11:26 -0700 (PDT)
Message-ID: <625a01bb0706241811p4fa21cdau2343106f2b9ecd8b@mail.gmail.com>
Date: Mon, 25 Jun 2007 09:11:26 +0800
From: "jiang jialin" <jiangjialin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JavaCC Download
In-Reply-To: <11263519.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95916_1252294.1182733886393"
References: <11233766.post@talk.nabble.com> <467A8E41.4090801@syr.edu>
	 <11263519.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95916_1252294.1182733886393
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

you must registe first

2007/6/23, Mahdi Rahimi <mhd_rhm@yahoo.com>:
>
>
> Hi Steven.
>
> When i access to this address, this message appread
>
> Forbidden
> You don't have permission to access /servlets/ProjectHome on this server.
>
> What's the problem?
>
> Thakns.
>
>
> Steven Rowe wrote:
> >
> > Mahdi Rahimi wrote:
> >> Hi.
> >>
> >> How can I access JavaCC??
> >>
> >> Thanks
> >
> > https://javacc.dev.java.net/
> >
> > --
> > Steve Rowe
> > Center for Natural Language Processing
> > http://www.cnlp.org/tech/lucene.asp
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/JavaCC-Download-tf3958940.html#a11263519
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>

------=_Part_95916_1252294.1182733886393--

From java-user-return-28832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 01:25:57 2007
Return-Path: <java-user-return-28832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55013 invoked from network); 25 Jun 2007 01:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 01:25:55 -0000
Received: (qmail 41717 invoked by uid 500); 25 Jun 2007 01:25:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41677 invoked by uid 500); 25 Jun 2007 01:25:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41666 invoked by uid 99); 25 Jun 2007 01:25:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 18:25:52 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jun 2007 18:25:47 -0700
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5P1PP69014494
	for <java-user@lucene.apache.org>; Sun, 24 Jun 2007 21:25:25 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5P1POBV022108
	for <java-user@lucene.apache.org>; Sun, 24 Jun 2007 21:25:24 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Sun, 24 Jun 2007 21:25:24 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: TermVector
Date: Sun, 24 Jun 2007 21:24:29 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE84017A299F@CORPUSMX10B.corp.emc.com>
In-Reply-To: <200706242124.l5OLNpde012526@ns21.webhostsg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: TermVector
Thread-Index: Ace2pKJeXbpOViD5QT+uSaovPtT/UgAIsE8A
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Jun 2007 01:25:24.0590 (UTC) FILETIME=[B478A0E0:01C7B6C7]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.24.175732
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Suggest you use lucene 2.1 or above

Andy

-----Original Message-----
From: Lee Li Bin [mailto:leelb@xedge.com.sg]=20
Sent: Monday, June 25, 2007 5:14 AM
To: java-user@lucene.apache.org
Subject: TermVector

Hi,

=20

May I know how do I store TermVector?

=20

When I set the last parameter to true, isn't it setting storeTermVector
to
true?

But I get null value in TermFreqVector.

=20

BTW, I'm using lucene 1.4.3

Not intended to upgrade to 2.0

=20

docAll.add(Field.Text("contentText", new
StringReader(allContent),true));

=20

=20

thnaks

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 11:17:17 2007
Return-Path: <java-user-return-28833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41414 invoked from network); 25 Jun 2007 11:17:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 11:17:16 -0000
Received: (qmail 6075 invoked by uid 500); 25 Jun 2007 11:17:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6041 invoked by uid 500); 25 Jun 2007 11:17:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6026 invoked by uid 99); 25 Jun 2007 11:17:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 04:17:11 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sonusr@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 04:17:07 -0700
Received: by wr-out-0506.google.com with SMTP id m59so922188wrm
        for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 04:16:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=bWoI3swzDpV1YeW2e7vuSe/flwDyd6279rxoL+aLhmKKSNSUL9oRAKq3NoA6a4LBh5OFsxgQalmuJt3RMau1NkPkTbWthYGBJQ47QudL4QRaghaBe/a4meZX6PIjJ5JKy/FJd6V+5INUI5UfHoe9CW8CgCPGZE+8DLfEzp+GmsY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=nB8WASZj6qrDdnKkODJBVv04WFzU152K9+i+dv0jWf54I3mv79CQdGzdVvj7IrXbFyRY7V5yaoUXxTuB8UXoTtibhTgoNT+St6R07PufISA6sdB423YiiLGctNgensz+il5N+aLSyU/bS+M/wDsGcBmmFViESz/8e6zvm7oB/24=
Received: by 10.78.149.13 with SMTP id w13mr2479539hud.1182770206084;
        Mon, 25 Jun 2007 04:16:46 -0700 (PDT)
Received: by 10.78.186.11 with HTTP; Mon, 25 Jun 2007 04:16:46 -0700 (PDT)
Message-ID: <d5b3ea330706250416k233e182em41b5cf80b4e6c78@mail.gmail.com>
Date: Mon, 25 Jun 2007 16:46:46 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Index issue with unexpected termination of program without optimizing the index.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_215260_32936247.1182770206008"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_215260_32936247.1182770206008
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am using lucene in our site for index and search. We are creating the
index with large collection of documents (XML). The program some times
terminating without completing the index process. So the index optimization
and closing is not properly done. Is it to be optimized on the next index
time? Is there any issue with the existing indexed documents? Is there any
transaction management in lucene?

Thanks,
Sonu

------=_Part_215260_32936247.1182770206008--

From java-user-return-28834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 11:51:51 2007
Return-Path: <java-user-return-28834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54983 invoked from network); 25 Jun 2007 11:51:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 11:51:49 -0000
Received: (qmail 61370 invoked by uid 500); 25 Jun 2007 11:51:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61319 invoked by uid 500); 25 Jun 2007 11:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61308 invoked by uid 99); 25 Jun 2007 11:51:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 04:51:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Jun 2007 04:51:40 -0700
Received: (qmail 92253 invoked by uid 60001); 25 Jun 2007 11:51:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=1UqChgiKxPhRu6Ma0kHasml+lnnZ/KFFPFbYXvc9YPdT/D6Raa0De7ffvAbXICRYS5bVK4ufV0M4E4gkJN7X9HCeASYhn+9xsTyAa37KXSlSvmPxu1vb4Eij4gHzj0AjQkIxaIsrrzmn4ZGxmfS0oh6TZkME3+wvXrff53wO5fs=;
X-YMail-OSG: tfHOsCIVM1kd2Nh4iR88vv.spPC..9LRB_4igc3DXALv.w1vTq4kEffJkskPnU1X1ySrLWzqV8BRyWpOLIH6W8tDHXTs_Bu.C6jVwM4eNW0nmjb58OzUjAOhJjw5VPEPjEf_tRp5vacS8A--
Received: from [78.3.15.253] by web50306.mail.re2.yahoo.com via HTTP; Mon, 25 Jun 2007 04:51:18 PDT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Mon, 25 Jun 2007 04:51:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index issue with unexpected termination of program without optimizing the index.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <855296.91450.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
How exactly is your application terminating?  Is there an error?  An exception?  If so, please provide the stack trace to get a better/right answer.

No, the index is not automatically optimized at the beginning of indexing.
There are likely no issues with documents that were already indexed and were written to disk before your application terminated.
There are no explicit transactions in Lucene, but in nearly 8 years of using Lucene I've never personally experienced Lucene index corruption.

Otis
--
Lucene Consulting -- http://lucene-consulting.com/



----- Original Message ----
From: Sonu SR <sonusr@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, June 25, 2007 1:16:46 PM
Subject: Index issue with unexpected termination of program without optimizing the index.

Hi,

I am using lucene in our site for index and search. We are creating the
index with large collection of documents (XML). The program some times
terminating without completing the index process. So the index optimization
and closing is not properly done. Is it to be optimized on the next index
time? Is there any issue with the existing indexed documents? Is there any
transaction management in lucene?

Thanks,
Sonu




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 12:15:40 2007
Return-Path: <java-user-return-28835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63833 invoked from network); 25 Jun 2007 12:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 12:15:37 -0000
Received: (qmail 20515 invoked by uid 500); 25 Jun 2007 12:15:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20309 invoked by uid 500); 25 Jun 2007 12:15:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20294 invoked by uid 99); 25 Jun 2007 12:15:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 05:15:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 05:15:29 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: nfs mount problem
Date: Mon, 25 Jun 2007 08:15:07 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5607FA2C@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: nfs mount problem
Thread-Index: Ace1DUU4wO+gArO6SqGGDLhk2wuRmQCFEX4g
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

Thanks for all the info. We'll be making a decision here soon whether to
use NFS or not. If we give it a go, or a test run I'll post our
experiences.

Brian

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Friday, June 22, 2007 4:38 PM
To: java-user@lucene.apache.org
Subject: Re: nfs mount problem


Actually this issue should be closed.  I will close it.

As far as I know, Lucene should now work over NFS, except you will
have to make a custom deletion policy that works for your application.

Lucene had issues with NFS in three areas: locking, stale client-side
file caches and how NFS handles deletion of open files.  The first two
were fixed in Lucene 2.1 with lock-less commits (LUCENE-701) and the
last one is fixed in 2.2 with the addition of "custom deletion
policies" (LUCENE-710).

For a custom deletion policy you need to implement the
org.apache.lucene.index.IndexDeletionPolicy interface in your own
class and pass an instance of that class to your IndexWriter.  This
class tells IndexWriter when it's safe to delete older commits.  By
default Lucene uses an instance of KeepOnlyLastCommitDeletionPolicy.

The basic idea is to implement logic that can tell when your readers
are done using an older commit in the index.  For example if you know
your readers refresh themselves once per hour then your deletion
policy can safely delete any commit older than 1 hour.

But please note that while I believe NFS will now work fine, this has
not been heavily tested yet.  Also note that performance over NFS is
generally not great.  If you do go down this route please report back
on any success or failure!  Thanks.

Mike

"Beard, Brian" <Brian.Beard@mybir.com> wrote:
>=20
> http://issues.apache.org/jira/browse/LUCENE-673
>=20
>=20
> This says the NFS mount problem is still open, is this the case?
>=20
> Has anyone been able to deal with this adequately?
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 13:03:23 2007
Return-Path: <java-user-return-28836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84963 invoked from network); 25 Jun 2007 13:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 13:03:22 -0000
Received: (qmail 19309 invoked by uid 500); 25 Jun 2007 13:03:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19268 invoked by uid 500); 25 Jun 2007 13:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19257 invoked by uid 99); 25 Jun 2007 13:03:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 06:03:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sonusr@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 06:03:14 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1367929uge
        for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 06:02:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kJqB2HI9yl2Cd/X3Apgg+SlWpLqM7/pRptm0KKrkk8H/ivHMu/WDG592830FrAsY7PSvjDhQqkIgYxXYhQ4G0lmCstExD8if4WYTKkNQ/dQHh+70RAyb7dpl4bb36Ol1xxlR7smOpxDM7gQnOBBA3wt9/XpnaSt78tLrJW4TrJo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BM7f3j4SND1rUImBfBcpfsvNzcx1o0RnxAlefL8caDqD5xkrybvWValCNJys+AtU+vGAzHXD927bct5GRpwzyj7lGX9kQ6S0THhF3u5xzqu45fHMfmQj6z2hO7sCgNox7AFxpw3RRVKpIGOeWwnYwcknPUqZ1ELkkk9tm6nS69M=
Received: by 10.78.168.1 with SMTP id q1mr2536631hue.1182776572693;
        Mon, 25 Jun 2007 06:02:52 -0700 (PDT)
Received: by 10.78.186.11 with HTTP; Mon, 25 Jun 2007 06:02:52 -0700 (PDT)
Message-ID: <d5b3ea330706250602o256a8e53l333ae546cc4cfa27@mail.gmail.com>
Date: Mon, 25 Jun 2007 18:32:52 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index issue with unexpected termination of program without optimizing the index.
In-Reply-To: <855296.91450.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1298_10429016.1182776572667"
References: <855296.91450.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1298_10429016.1182776572667
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Thanks for the response. The error is probably related with mysql. My
appliation using mysql for keeping the status of indexed documents. So that
duplication can be avoided.  Some times the mysql connection has been lost,
and the program terminated.

Sonu


On 6/25/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Hi,
> How exactly is your application terminating?  Is there an error?  An
> exception?  If so, please provide the stack trace to get a better/right
> answer.
>
> No, the index is not automatically optimized at the beginning of indexing.
> There are likely no issues with documents that were already indexed and
> were written to disk before your application terminated.
> There are no explicit transactions in Lucene, but in nearly 8 years of
> using Lucene I've never personally experienced Lucene index corruption.
>
> Otis
> --
> Lucene Consulting -- http://lucene-consulting.com/
>
>
>
> ----- Original Message ----
> From: Sonu SR <sonusr@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, June 25, 2007 1:16:46 PM
> Subject: Index issue with unexpected termination of program without
> optimizing the index.
>
> Hi,
>
> I am using lucene in our site for index and search. We are creating the
> index with large collection of documents (XML). The program some times
> terminating without completing the index process. So the index
> optimization
> and closing is not properly done. Is it to be optimized on the next index
> time? Is there any issue with the existing indexed documents? Is there any
> transaction management in lucene?
>
> Thanks,
> Sonu
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1298_10429016.1182776572667--

From java-user-return-28837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 13:04:51 2007
Return-Path: <java-user-return-28837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85443 invoked from network); 25 Jun 2007 13:04:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 13:04:50 -0000
Received: (qmail 25203 invoked by uid 500); 25 Jun 2007 13:04:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25166 invoked by uid 500); 25 Jun 2007 13:04:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25150 invoked by uid 99); 25 Jun 2007 13:04:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 06:04:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 06:04:42 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id AF761131A32
	for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 06:05:51 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <200706242124.l5OLNpde012526@ns21.webhostsg.com>
References: <200706242124.l5OLNpde012526@ns21.webhostsg.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EB41B2C3-6705-4D41-95C1-485E32C8AC50@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: TermVector
Date: Mon, 25 Jun 2007 09:04:19 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

That seems to be the correct usage.  Can you provide a self contained  
unit test showing what you are doing or, at least, more supporting code?

-Grant

On Jun 24, 2007, at 5:14 PM, Lee Li Bin wrote:

> Hi,
>
>
>
> May I know how do I store TermVector?
>
>
>
> When I set the last parameter to true, isn't it setting  
> storeTermVector to
> true?
>
> But I get null value in TermFreqVector.
>
>
>
> BTW, I'm using lucene 1.4.3
>
> Not intended to upgrade to 2.0
>
>
>
> docAll.add(Field.Text("contentText", new StringReader 
> (allContent),true));
>
>
>
>
>
> thnaks
>
>
>
>
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 13:14:05 2007
Return-Path: <java-user-return-28838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90619 invoked from network); 25 Jun 2007 13:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 13:14:04 -0000
Received: (qmail 47874 invoked by uid 500); 25 Jun 2007 13:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47846 invoked by uid 500); 25 Jun 2007 13:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47829 invoked by uid 99); 25 Jun 2007 13:14:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 06:14:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 06:13:56 -0700
Received: by ug-out-1314.google.com with SMTP id m2so1370000uge
        for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 06:13:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UOKYHgsmNhuWcUlytTtGuQu4ecQa/HK8C2dOZwjFV2PvdjeGI1/YpjhNXcMOaK76PrnefWmf8FQZSbu2Jz85W7QPSN12R89k5AmoC84G11j6VhPOXZwpxwecTBPXxr4WXW1KsU9LjBfnHG+TsVn7wH/jZkEEd9hmIgR/SLUDKg8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FiYuW1epWHadZxPXgpwTE8VegjeYVf5lPo8uXq1e0p3/XCVB6yrTIX5HyRzs57SdI79WIg5+j0NbLbBsbTJ+UFFvwDXjoRvm0VLgSUFBObhfLsWoXOqWfwPKw2VgAJMW+/0TZqkQ97ZM6WbqFxTn4b9GJIhZrmSLqSZfl3+y3NM=
Received: by 10.82.156.12 with SMTP id d12mr12570489bue.1182777214761;
        Mon, 25 Jun 2007 06:13:34 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 25 Jun 2007 06:13:34 -0700 (PDT)
Message-ID: <359a92830706250613r68f90a00s847db08e4fd819c1@mail.gmail.com>
Date: Mon, 25 Jun 2007 09:13:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index issue with unexpected termination of program without optimizing the index.
In-Reply-To: <d5b3ea330706250602o256a8e53l333ae546cc4cfa27@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_421_1572355.1182777214715"
References: <855296.91450.qm@web50306.mail.re2.yahoo.com>
	 <d5b3ea330706250602o256a8e53l333ae546cc4cfa27@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_421_1572355.1182777214715
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In this case, it seems that everything is under your control and you
can gracefully close the Lucene index down when this occurs. Which
I would recommend under any circumstances so as to insure that you
know the state of your index.

At issue here is whether the last N documents that you've indexed
are actually written to disk when the program terminates if it terminates
ungracefully. The only way you can answer this for certain is if you close
the index explicitly, which will flush all pending documents to disk...

Best
Erick

On 6/25/07, Sonu SR <sonusr@gmail.com> wrote:
>
> Hi,
> Thanks for the response. The error is probably related with mysql. My
> appliation using mysql for keeping the status of indexed documents. So
> that
> duplication can be avoided.  Some times the mysql connection has been
> lost,
> and the program terminated.
>
> Sonu
>
>
> On 6/25/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> > Hi,
> > How exactly is your application terminating?  Is there an error?  An
> > exception?  If so, please provide the stack trace to get a better/right
> > answer.
> >
> > No, the index is not automatically optimized at the beginning of
> indexing.
> > There are likely no issues with documents that were already indexed and
> > were written to disk before your application terminated.
> > There are no explicit transactions in Lucene, but in nearly 8 years of
> > using Lucene I've never personally experienced Lucene index corruption.
> >
> > Otis
> > --
> > Lucene Consulting -- http://lucene-consulting.com/
> >
> >
> >
> > ----- Original Message ----
> > From: Sonu SR <sonusr@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Monday, June 25, 2007 1:16:46 PM
> > Subject: Index issue with unexpected termination of program without
> > optimizing the index.
> >
> > Hi,
> >
> > I am using lucene in our site for index and search. We are creating the
> > index with large collection of documents (XML). The program some times
> > terminating without completing the index process. So the index
> > optimization
> > and closing is not properly done. Is it to be optimized on the next
> index
> > time? Is there any issue with the existing indexed documents? Is there
> any
> > transaction management in lucene?
> >
> > Thanks,
> > Sonu
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_421_1572355.1182777214715--

From java-user-return-28839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 25 17:49:53 2007
Return-Path: <java-user-return-28839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 565 invoked from network); 25 Jun 2007 17:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2007 17:49:52 -0000
Received: (qmail 76356 invoked by uid 500); 25 Jun 2007 17:49:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75776 invoked by uid 500); 25 Jun 2007 17:49:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75758 invoked by uid 99); 25 Jun 2007 17:49:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 10:49:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 10:49:43 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l5PHnLoe206284
	for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 17:49:21 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5PHnG4H1691898
	for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 19:49:21 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5PHnFe1025174
	for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 19:49:15 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5PHnF5O025171
	for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 19:49:15 +0200
In-Reply-To: <467ED947.70409@comcast.net>
Subject: Re: Searcher throws java.io.IOException: Bad file descriptor
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF630399B4.95493C6C-ON88257305.0060C37F-88257305.00619EBB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 25 Jun 2007 10:46:16 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 25/06/2007 20:49:14
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Is this repeatable?
Is it, possibly, over NFS (or other file sharing)?
What versions of Lucene, JDK, what OS?
Is it, possibly Lucene 2.0 on Linux with Java 1.5? (In this case see
http://256.com/gray/docs/misc/java_bad_file_descriptor_close_bug.shtml)

Btw, when starting a new discussion please do not reply to an existing one
but rather start a fresh email, otherwise your question is "hidden" in
another discussion thread and gets less attention.

Doron

MC Moisei <mcmoisei@comcast.net> wrote on 24/06/2007 13:51:19:

> Any of you got something like this ? It looks that I have to reindex my
> entities.
>
> 2007-06-24 15:00:53,048 [TP-Processor1]: ERROR
> com.gsi.core.service.search.SearchServiceImpl.
> search(SearchServiceImpl.java:489)
> -
> Search error : Bad file descriptor on News
> java.io.IOException: Bad file descriptor
>     at java.io.RandomAccessFile.readBytes(Native Method)
>     at java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>     at
> org.apache.lucene.store.FSIndexInput.readInternal(FSDirectory.java:454)
>     at
> org.apache.lucene.store.BufferedIndexInput.
> readBytes(BufferedIndexInput.java:45)
>     at
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.
> readInternal(CompoundFileReader.java:219)
>     at
> org.apache.lucene.store.BufferedIndexInput.
> refill(BufferedIndexInput.java:64)
>     at
> org.apache.lucene.store.BufferedIndexInput.
> readByte(BufferedIndexInput.java:33)
>     at org.apache.lucene.store.IndexInput.readVLong(IndexInput.java:76)
>     at
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:120)
>     at
> org.apache.lucene.index.SegmentMergeInfo.next(SegmentMergeInfo.java:64)
>     at org.apache.lucene.index.MultiTermEnum.next(MultiReader.java:285)
>     at
> org.apache.lucene.search.FilteredTermEnum.next(FilteredTermEnum.java:66)
>     at org.apache.lucene.search.FuzzyQuery.rewrite(FuzzyQuery.java:121)
>     at org.apache.lucene.search.BooleanQuery.
> rewrite(BooleanQuery.java:372)
>     at org.apache.lucene.search.BooleanQuery.
> rewrite(BooleanQuery.java:372)
>     at
> org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:137)
>     at org.apache.lucene.search.Query.weight(Query.java:93)
>     at org.apache.lucene.search.Hits.<init>(Hits.java:41)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:44)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:36)
>     at
> com.gsi.core.service.search.SearchServiceImpl.
> search(SearchServiceImpl.java:414)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 26 04:28:25 2007
Return-Path: <java-user-return-28840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35915 invoked from network); 26 Jun 2007 04:28:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2007 04:28:24 -0000
Received: (qmail 17726 invoked by uid 500); 26 Jun 2007 04:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17695 invoked by uid 500); 26 Jun 2007 04:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17684 invoked by uid 99); 26 Jun 2007 04:28:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 21:28:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sonusr@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jun 2007 21:28:14 -0700
Received: by ug-out-1314.google.com with SMTP id m2so7599uge
        for <java-user@lucene.apache.org>; Mon, 25 Jun 2007 21:27:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=un5dyUYuB/aqoeHi+pG66+Py2jNy8h7T1rDp54UphBVY7qM3GegQOQEg/WpFcoPcH4YImNnkQzvZsl9bswOvotmKuUyF5RlmmlVqNJr27f+W0GHbepomY/4bqLWF1BSTstXPG0+VMZJYiP2wz8ADv1coMoaKxAtZO2yqlphFGsg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZduM0oRO+98YbfahalN5XmVUr5YIZG0PPsRFtn8LTVLTG2flBiUhZcnuzmmnxvAi/OsVmstYSxm2325ANbXvxlB0TOua9PKwRMY+4IW+WWhNUA5BDPdP/8zhzfSfcmhlI85a0wukFmq1PTuiWw/BZH+2FPtDkk6x7HqDJzgmBk0=
Received: by 10.78.206.9 with SMTP id d9mr2873659hug.1182832072147;
        Mon, 25 Jun 2007 21:27:52 -0700 (PDT)
Received: by 10.78.186.11 with HTTP; Mon, 25 Jun 2007 21:27:52 -0700 (PDT)
Message-ID: <d5b3ea330706252127p748ed2a7h6926ff6d5442cf8b@mail.gmail.com>
Date: Tue, 26 Jun 2007 09:57:52 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index issue with unexpected termination of program without optimizing the index.
In-Reply-To: <359a92830706250613r68f90a00s847db08e4fd819c1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17047_16836100.1182832072121"
References: <855296.91450.qm@web50306.mail.re2.yahoo.com>
	 <d5b3ea330706250602o256a8e53l333ae546cc4cfa27@mail.gmail.com>
	 <359a92830706250613r68f90a00s847db08e4fd819c1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17047_16836100.1182832072121
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks Erick.

On 6/25/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> In this case, it seems that everything is under your control and you
> can gracefully close the Lucene index down when this occurs. Which
> I would recommend under any circumstances so as to insure that you
> know the state of your index.
>
> At issue here is whether the last N documents that you've indexed
> are actually written to disk when the program terminates if it terminates
> ungracefully. The only way you can answer this for certain is if you close
> the index explicitly, which will flush all pending documents to disk...
>
> Best
> Erick
>
> On 6/25/07, Sonu SR <sonusr@gmail.com> wrote:
> >
> > Hi,
> > Thanks for the response. The error is probably related with mysql. My
> > appliation using mysql for keeping the status of indexed documents. So
> > that
> > duplication can be avoided.  Some times the mysql connection has been
> > lost,
> > and the program terminated.
> >
> > Sonu
> >
> >
> > On 6/25/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > >
> > > Hi,
> > > How exactly is your application terminating?  Is there an error?  An
> > > exception?  If so, please provide the stack trace to get a
> better/right
> > > answer.
> > >
> > > No, the index is not automatically optimized at the beginning of
> > indexing.
> > > There are likely no issues with documents that were already indexed
> and
> > > were written to disk before your application terminated.
> > > There are no explicit transactions in Lucene, but in nearly 8 years of
> > > using Lucene I've never personally experienced Lucene index
> corruption.
> > >
> > > Otis
> > > --
> > > Lucene Consulting -- http://lucene-consulting.com/
> > >
> > >
> > >
> > > ----- Original Message ----
> > > From: Sonu SR <sonusr@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Monday, June 25, 2007 1:16:46 PM
> > > Subject: Index issue with unexpected termination of program without
> > > optimizing the index.
> > >
> > > Hi,
> > >
> > > I am using lucene in our site for index and search. We are creating
> the
> > > index with large collection of documents (XML). The program some times
> > > terminating without completing the index process. So the index
> > > optimization
> > > and closing is not properly done. Is it to be optimized on the next
> > index
> > > time? Is there any issue with the existing indexed documents? Is there
> > any
> > > transaction management in lucene?
> > >
> > > Thanks,
> > > Sonu
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_17047_16836100.1182832072121--

From java-user-return-28841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 26 15:38:42 2007
Return-Path: <java-user-return-28841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78327 invoked from network); 26 Jun 2007 15:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2007 15:38:42 -0000
Received: (qmail 25709 invoked by uid 500); 26 Jun 2007 15:38:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25686 invoked by uid 500); 26 Jun 2007 15:38:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25675 invoked by uid 99); 26 Jun 2007 15:38:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 08:38:37 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FORGED_YAHOO_RCVD,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 08:38:33 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I3D7M-0002Ms-Mt
	for java-user@lucene.apache.org; Tue, 26 Jun 2007 08:38:12 -0700
Message-ID: <11307577.post@talk.nabble.com>
Date: Tue, 26 Jun 2007 08:38:12 -0700 (PDT)
From: Mahdi Rahimi <mhd_rhm@yahoo.com>
To: java-user@lucene.apache.org
Subject: Similarity algorithm
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34874_13498317.1182872292700"
X-Nabble-From: mhd_rhm@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34874_13498317.1182872292700
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


In the name of God.
Hi ALL.

I'm looking for some resources about Lucene Similarity algorithm.
I want to change it for my special aims.
Can anyone help me and introduce some references? Is "Lucene in Action" book
usefull for me?
How can I find PDF or DOC file of this book?

Also, I want to change syntax of Qeuries in lucene and upgrade that for
myself. And looking for JavaCC util.
Can anynoe emil JavaCC to my mailbox mhd_rhm@yahoo.com. I found web site of
that but there was some problem in that site.

Thanks.
-- 
View this message in context: http://www.nabble.com/Similarity-algorithm-tf3982976.html#a11307577
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_34874_13498317.1182872292700--


From java-user-return-28842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 26 16:09:58 2007
Return-Path: <java-user-return-28842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9225 invoked from network); 26 Jun 2007 16:09:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2007 16:09:57 -0000
Received: (qmail 36321 invoked by uid 500); 26 Jun 2007 16:09:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36282 invoked by uid 500); 26 Jun 2007 16:09:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36271 invoked by uid 99); 26 Jun 2007 16:09:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 09:09:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 09:09:47 -0700
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=damienmc)
	by mercury.propylon.com with smtp (Exim 4.50)
	id 1I3DZA-0005Jz-3g
	for java-user@lucene.apache.org; Tue, 26 Jun 2007 17:07:02 +0100
From: "Damien McCarthy" <damien.mccarthy@propylon.com>
To: <java-user@lucene.apache.org>
Date: Tue, 26 Jun 2007 17:09:17 +0100
Message-ID: <HLEDJLDBDPPOFKGFCAABOEDBCDAA.damien.mccarthy@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <11307577.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
Subject: RE: Similarity algorithm
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

The PDF of Lucene in Action can be purchased from www.manning.com

I'd suggest reading and understanding Lucene in Action before you attempt
anything else :)

-----Original Message-----
From: Mahdi Rahimi [mailto:mhd_rhm@yahoo.com]
Sent: 26 June 2007 16:38
To: java-user@lucene.apache.org
Subject: Similarity algorithm



In the name of God.
Hi ALL.

I'm looking for some resources about Lucene Similarity algorithm.
I want to change it for my special aims.
Can anyone help me and introduce some references? Is "Lucene in Action" book
usefull for me?
How can I find PDF or DOC file of this book?

Also, I want to change syntax of Qeuries in lucene and upgrade that for
myself. And looking for JavaCC util.
Can anynoe emil JavaCC to my mailbox mhd_rhm@yahoo.com. I found web site of
that but there was some problem in that site.

Thanks.
--
View this message in context:
http://www.nabble.com/Similarity-algorithm-tf3982976.html#a11307577
Sent from the Lucene - Java Users mailing list archive at Nabble.com.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 26 16:27:24 2007
Return-Path: <java-user-return-28843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19804 invoked from network); 26 Jun 2007 16:27:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2007 16:27:23 -0000
Received: (qmail 89785 invoked by uid 500); 26 Jun 2007 16:27:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89752 invoked by uid 500); 26 Jun 2007 16:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89739 invoked by uid 99); 26 Jun 2007 16:27:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 09:27:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 09:27:14 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id 2A1C914D6B0
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 09:26:54 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <11307577.post@talk.nabble.com>
References: <11307577.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8AD04856-B23F-426E-AC0D-02FBB6C5613C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Similarity algorithm
Date: Tue, 26 Jun 2007 12:26:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene In Action is a great book, but you can also have a look at  
http://lucene.apache.org/java/docs/scoring.html for more info on  
scoring and how to change the similarity and other details of  
scoring. Also, search the archives for things you are interested in,  
there is a lot of information stored there.

As for JavaCC, not sure what you are looking for there.  The site at  
https://javacc.dev.java.net/ looks fine to me.

-Grant

On Jun 26, 2007, at 11:38 AM, Mahdi Rahimi wrote:

>
> In the name of God.
> Hi ALL.
>
> I'm looking for some resources about Lucene Similarity algorithm.
> I want to change it for my special aims.
> Can anyone help me and introduce some references? Is "Lucene in  
> Action" book
> usefull for me?
> How can I find PDF or DOC file of this book?
>
> Also, I want to change syntax of Qeuries in lucene and upgrade that  
> for
> myself. And looking for JavaCC util.
> Can anynoe emil JavaCC to my mailbox mhd_rhm@yahoo.com. I found web  
> site of
> that but there was some problem in that site.
>
> Thanks.
> -- 
> View this message in context: http://www.nabble.com/Similarity- 
> algorithm-tf3982976.html#a11307577
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 26 17:18:59 2007
Return-Path: <java-user-return-28844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48456 invoked from network); 26 Jun 2007 17:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2007 17:18:57 -0000
Received: (qmail 17076 invoked by uid 500); 26 Jun 2007 17:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17038 invoked by uid 500); 26 Jun 2007 17:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17016 invoked by uid 99); 26 Jun 2007 17:18:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 10:18:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 10:18:46 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l5QHIO39009959
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 13:18:24 -0400
Message-ID: <46814A01.40709@syr.edu>
Date: Tue, 26 Jun 2007 13:16:49 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: JavaCC Download
References: <11233766.post@talk.nabble.com> <467A8E41.4090801@syr.edu>	 <11263519.post@talk.nabble.com> <625a01bb0706241811p4fa21cdau2343106f2b9ecd8b@mail.gmail.com>
In-Reply-To: <625a01bb0706241811p4fa21cdau2343106f2b9ecd8b@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think you need to register - I am not registered and I can
download from there.

My guess is that Mahdi Rahimi's browser doesn't know how to speak the
HTTPS protocol.

Here's an invocation of wget (I have version 1.10.2) that works for me
to get the .zip archive (all on one line):

wget --no-check-certificate
https://javacc.dev.java.net/files/documents/17/26777/javacc-4.0.zip

Or if you want the .tar.gz archive:

wget --no-check-certificate
https://javacc.dev.java.net/files/documents/17/26776/javacc-4.0.tar.gz

jiang jialin wrote:
> you must registe first
> 
> 2007/6/23, Mahdi Rahimi <mhd_rhm@yahoo.com>:
>>
>>
>> Hi Steven.
>>
>> When i access to this address, this message appread
>>
>> Forbidden
>> You don't have permission to access /servlets/ProjectHome on this server.
>>
>> What's the problem?
>>
>> Thakns.
>>
>>
>> Steven Rowe wrote:
>> >
>> > Mahdi Rahimi wrote:
>> >> Hi.
>> >>
>> >> How can I access JavaCC??
>> >>
>> >> Thanks
>> >
>> > https://javacc.dev.java.net/
>> >
>> > --
>> > Steve Rowe
>> > Center for Natural Language Processing
>> > http://www.cnlp.org/tech/lucene.asp


-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 26 19:11:12 2007
Return-Path: <java-user-return-28845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90197 invoked from network); 26 Jun 2007 19:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2007 19:11:11 -0000
Received: (qmail 33172 invoked by uid 500); 26 Jun 2007 19:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32700 invoked by uid 500); 26 Jun 2007 19:11:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32685 invoked by uid 99); 26 Jun 2007 19:11:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 12:11:06 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 26 Jun 2007 12:11:02 -0700
Received: (qmail 94874 invoked by uid 3677); 26 Jun 2007 19:04:17 -0000
Received: from 127.0.0.1 by host412.ipowerweb.com (envelope-from <tanya@volvovski.com>, uid 1002) with qmail-scanner-1.25st 
 (clamdscan: 0.88/1244. spamassassin: 3.1.0. perlscan: 1.25st.  
 Clear:RC:1(127.0.0.1):SA:0(-0.4/5.0):. 
 Processed in 1.276256 secs); 26 Jun 2007 19:04:17 -0000
Received: from unknown (HELO host412.ipowerweb.com) (127.0.0.1)
  by host412.ipowerweb.com with SMTP; 26 Jun 2007 19:04:15 -0000
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"
MIME-Version: 1.0
From:  <tanya@volvovski.com>
To: java-user@lucene.apache.org
Subject: Question about search and analyzer
Reply-To: tanya@volvovski.com
X-Origin: 131.225.94.161
Date: Tue, 26 Jun 2007 12:04:15 -0700
X-Uidl: 1182884655947951167
X-Mailer: AtMail 4.03
X-Qmail-Scanner-Message-ID: <118288465692294803@host412.ipowerweb.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-0.4 required=5.0
Message-Id: <20070626191103.0FCDD10FB011@herse.apache.org>

Hi,=0D
=0D
I have indexed files using StandardAnalyzer. Now I am trying to search thes=
e indexes and use Highlighter to display the content. I have a =0D
weird problem with numbers:=0D
=0D
The line below is displayed when the following queries are issued=0D
18?=0D
183=0D
+accept +18?=0D
=0D
globus-gatekeeper: accept_sec_context.c:gss_accept_sec_context:183:=0D
=0D
but the other line that also has "183" is not found regardless what I am tr=
ying to search (+pid +18390, or 18930 or pid*18390 , 183? etc). It is =0D
displayed if I do searching based on words so it is indexed.=0D
=0D
globus-gatekeeper:  PID: 18390 -- Notice: 6: /local/stage1/usrlocal/vdt-1.6=
.1/globus/sbin/globus-gatekeeper pid=3D18390 starting at Sun Jun 24 =0D
20:32:28 2007=0D
=0D
=0D
=0D
=0D
Any suggestions?=0D
Thanks,=0D
Tanya=0D
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 26 20:15:24 2007
Return-Path: <java-user-return-28846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18454 invoked from network); 26 Jun 2007 20:15:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2007 20:15:23 -0000
Received: (qmail 64656 invoked by uid 500); 26 Jun 2007 20:14:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64620 invoked by uid 500); 26 Jun 2007 20:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64606 invoked by uid 99); 26 Jun 2007 20:14:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 13:14:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 13:14:24 -0700
Received: by ug-out-1314.google.com with SMTP id m2so189272uge
        for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 13:14:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XjvfqET7Qs5vrp51L4Jz4Ah2Txh1y/ym5iqzWE80eZmGUGDylWWtERJgAsecylhYdu6K4XPISuJzCxev1plWvgKFxxQijNRNAUBY3JDRMyaguyfRAtltATcNEzY64K+rP6XNGW9jUSn4kVeAjDMG6QPGUZC8oqdBazrK7vMZc28=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eHj1A5enhhkfGn3NGECUb0+b4gQEEf7KYkHPxsWA3f7gioIpHSXE7Icp4D9kDzzjWj37JwZ7gNCaMzqQ3f5GHTb+TULGpycuYUzYo3qin/KRp5xnn8WHsfabWYz6iCYVughW9evLTUcEPhy6If0OgQ1qSdGlT78yAlcYOo36HHQ=
Received: by 10.82.186.5 with SMTP id j5mr15641110buf.1182888841790;
        Tue, 26 Jun 2007 13:14:01 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 26 Jun 2007 13:14:01 -0700 (PDT)
Message-ID: <359a92830706261314g34dba2e1vdca5526eb2a0aa93@mail.gmail.com>
Date: Tue, 26 Jun 2007 16:14:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, tanya@volvovski.com
Subject: Re: Question about search and analyzer
In-Reply-To: <20070626191103.0FCDD10FB011@herse.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15961_31935841.1182888841763"
References: <20070626191103.0FCDD10FB011@herse.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15961_31935841.1182888841763
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you used Luke to examine your index and try queries? This
will tell you a LOT about what's *really* happening.....

Google 'lucene' 'luke' and try it.

Also, try query.toString() (and include the output for others
to see, please).

Best
Erick

On 6/26/07, tanya@volvovski.com <tanya@volvovski.com> wrote:
>
> Hi,
>
> I have indexed files using StandardAnalyzer. Now I am trying to search
> these indexes and use Highlighter to display the content. I have a
> weird problem with numbers:
>
> The line below is displayed when the following queries are issued
> 18?
> 183
> +accept +18?
>
> globus-gatekeeper: accept_sec_context.c:gss_accept_sec_context:183:
>
> but the other line that also has "183" is not found regardless what I am
> trying to search (+pid +18390, or 18930 or pid*18390 , 183? etc). It is
> displayed if I do searching based on words so it is indexed.
>
> globus-gatekeeper:  PID: 18390 -- Notice: 6: /local/stage1/usrlocal/vdt-
> 1.6.1/globus/sbin/globus-gatekeeper pid=18390 starting at Sun Jun 24
> 20:32:28 2007
>
>
>
>
> Any suggestions?
> Thanks,
> Tanya
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15961_31935841.1182888841763--

From java-user-return-28847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 00:20:13 2007
Return-Path: <java-user-return-28847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4614 invoked from network); 27 Jun 2007 00:20:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 00:20:12 -0000
Received: (qmail 99759 invoked by uid 500); 27 Jun 2007 00:20:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99718 invoked by uid 500); 27 Jun 2007 00:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99707 invoked by uid 99); 27 Jun 2007 00:20:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 17:20:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 17:20:02 -0700
Received: by ug-out-1314.google.com with SMTP id m2so233356uge
        for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 17:19:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=c+cnn4bNb2VF9tDS6oGyKGHMkv8zc5b3AFD3yRkyzuSd+t3Nf/1VrZiM8jG1rZX8TLItoz85WPwzH/SRdLZfBYJzP8sPDnD1EXxkjKgZcrwXsYMiLUOKv0OYDDALSEElofTDT1TJP6yIg4wEQipSAo9rOUl2DMae8AgLIMhoKSA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=dHJV9ktAxRPSGFKEUgOyZVgnjaBqgG40rTDSpFuX8Rrbnqhr3edYsBEfjD336o6EV589WFUDibG+Jbcw/Jtxi6PXzHv8qSUUGwv1/q6yNMUYAdyxJM3V1/WZJrLCB39WjuVcvIpbKRCb5wW8jzWe0i1K3BBKcTSFAGJtXiwo6Os=
Received: by 10.67.117.10 with SMTP id u10mr714348ugm.1182903581146;
        Tue, 26 Jun 2007 17:19:41 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.125.225])
        by mx.google.com with ESMTP id i5sm9549309mue.2007.06.26.17.19.40
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 26 Jun 2007 17:19:40 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <5E708BAE-2BCE-464F-BBFE-3AD1EDDC225B@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: Lucene as primary object storage
Date: Wed, 27 Jun 2007 02:16:50 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Until recently I have only used Lucene as an index. I'm very  
interested to hear what you people have to say about using Lucene as  
the primary and only persistance layer in an application.

I would feel much safer if I had a transactionlog for crash recovery.  
So I might get me one of those. Are there more things I should worry  
about?


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 01:21:14 2007
Return-Path: <java-user-return-28848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31598 invoked from network); 27 Jun 2007 01:21:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 01:21:12 -0000
Received: (qmail 78735 invoked by uid 500); 27 Jun 2007 01:21:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77805 invoked by uid 500); 27 Jun 2007 01:21:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77788 invoked by uid 99); 27 Jun 2007 01:21:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 18:21:08 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 18:21:03 -0700
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R1Kf4S025870
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 21:20:42 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R1KVM7018149
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 21:20:39 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Jun 2007 21:20:34 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene as primary object storage
Date: Tue, 26 Jun 2007 21:19:37 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE84017E81A7@CORPUSMX10B.corp.emc.com>
In-Reply-To: <5E708BAE-2BCE-464F-BBFE-3AD1EDDC225B@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene as primary object storage
Thread-Index: Ace4UPBosBQbh7ubSwKSdoQM89sLwwAB+TaQ
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2007 01:20:34.0399 (UTC) FILETIME=[5C547EF0:01C7B859]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.26.174433
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_PROPOSE 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Perhaps this reference
http://www.mail-archive.com/hibernate-devel@lists.sourceforge.net/msg062
60.html will give you some help. It's about Hibernate Lucene
integration.

Andy

-----Original Message-----
From: karl wettin [mailto:karl.wettin@gmail.com]=20
Sent: Wednesday, June 27, 2007 8:17 AM
To: java-user@lucene.apache.org
Subject: Lucene as primary object storage

Until recently I have only used Lucene as an index. I'm very =20
interested to hear what you people have to say about using Lucene as =20
the primary and only persistance layer in an application.

I would feel much safer if I had a transactionlog for crash recovery. =20
So I might get me one of those. Are there more things I should worry =20
about?


--=20
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 01:32:31 2007
Return-Path: <java-user-return-28849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35207 invoked from network); 27 Jun 2007 01:32:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 01:32:31 -0000
Received: (qmail 6548 invoked by uid 500); 27 Jun 2007 01:32:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6512 invoked by uid 500); 27 Jun 2007 01:32:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6501 invoked by uid 99); 27 Jun 2007 01:32:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 18:32:28 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 18:32:24 -0700
Received: by py-out-1112.google.com with SMTP id f31so51750pyh
        for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 18:32:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=eBgcSx2fJCTahmpIIjYlMgeDc6n5h7fIMNubhIskDTcNPjXMThWz17FaKtpGKeqcI3Bs/lvKjWJY7iiF6foDZEULaPGvAhSUifT/koYst+DonoICn9KLy5YVCdZ4U2mMLu8vO+tmmtkigQknP1LZx+m3XPd12Dd/NoQ044aua74=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=XzChrT7jjusBUcPwwMVSjck9Dr5wbu4ND7W3NeqwWsZZfIrH57K7Gla/P/jo7eIOqZVMtewOHWYBoA2PrTYyrA101r1FRdzNFbW7Ncvs+S1x+2Y6POXI3h1c/+KdByJ7gjCHnXJT25uOvgYgUELXO+yMY5yQZMzKBvByKZDnGOU=
Received: by 10.65.185.3 with SMTP id m3mr34655qbp.1182907923303;
        Tue, 26 Jun 2007 18:32:03 -0700 (PDT)
Received: by 10.65.203.18 with HTTP; Tue, 26 Jun 2007 18:32:03 -0700 (PDT)
Message-ID: <bd67edef0706261832g1d796aberb208ba49f5e1ba60@mail.gmail.com>
Date: Tue, 26 Jun 2007 20:32:03 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Standard Tokenizer Question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6896_5062851.1182907923144"
X-Google-Sender-Auth: 7ea84d974578fbd6
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6896_5062851.1182907923144
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey,

I Think this is where I ask this.

I'm pretty new to this so this is probably a dumb question.

I'm using the StandardTokenizer class to turn a file into tokens.  I then
need to be able to later skip to a specific token in the file sent to me
from another source.  So say my StandardTokenizer is called st and I'm told
to get token y.  At first I was using st.getToken(y).  But this was
returning an object of type  "StandardToken", I really would like to just
have it return type Token (because it has more useful functions for me like
termText()).  Right now I just call st.next()  y times to get the y'th
token, which is horribly inefficient but I can't find any way to

a) go right to the token I want
b)  Have it be type Token and not Standard Token.

--JP

------=_Part_6896_5062851.1182907923144--

From java-user-return-28850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 01:49:32 2007
Return-Path: <java-user-return-28850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40127 invoked from network); 27 Jun 2007 01:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 01:49:28 -0000
Received: (qmail 27749 invoked by uid 500); 27 Jun 2007 01:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27087 invoked by uid 500); 27 Jun 2007 01:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27076 invoked by uid 99); 27 Jun 2007 01:49:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 18:49:16 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 18:49:12 -0700
Received: from mailhub.lss.emc.com (uraeus.lss.emc.com [10.254.144.14])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R1mphK009653
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 21:48:51 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R1mBKR028365
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 21:48:49 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Jun 2007 21:48:30 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Standard Tokenizer Question
Date: Tue, 26 Jun 2007 21:47:33 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE84017E81EA@CORPUSMX10B.corp.emc.com>
In-Reply-To: <bd67edef0706261832g1d796aberb208ba49f5e1ba60@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Standard Tokenizer Question
Thread-Index: Ace4WwzBlRd00NSuSEWgSOv/Jp41OwAAZRkg
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2007 01:48:30.0639 (UTC) FILETIME=[43726BF0:01C7B85D]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.26.182633
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_MEDIA_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Token.termText() perhaps is the same as st.getToken(y).image

Andy
-----Original Message-----
From: jpsondag@gmail.com [mailto:jpsondag@gmail.com] On Behalf Of John
Paul Sondag
Sent: Wednesday, June 27, 2007 9:32 AM
To: java-user@lucene.apache.org
Subject: Standard Tokenizer Question

Hey,

I Think this is where I ask this.

I'm pretty new to this so this is probably a dumb question.

I'm using the StandardTokenizer class to turn a file into tokens.  I
then
need to be able to later skip to a specific token in the file sent to me
from another source.  So say my StandardTokenizer is called st and I'm
told
to get token y.  At first I was using st.getToken(y).  But this was
returning an object of type  "StandardToken", I really would like to
just
have it return type Token (because it has more useful functions for me
like
termText()).  Right now I just call st.next()  y times to get the y'th
token, which is horribly inefficient but I can't find any way to

a) go right to the token I want
b)  Have it be type Token and not Standard Token.

--JP

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 01:51:49 2007
Return-Path: <java-user-return-28851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41431 invoked from network); 27 Jun 2007 01:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 01:51:47 -0000
Received: (qmail 33811 invoked by uid 500); 27 Jun 2007 01:51:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33779 invoked by uid 500); 27 Jun 2007 01:51:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33767 invoked by uid 99); 27 Jun 2007 01:51:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 18:51:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 18:51:33 -0700
Received: by ug-out-1314.google.com with SMTP id m2so246193uge
        for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 18:51:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=apFIlsHSUtMhc2I/B1nOHhemkE2JgNPoiqNZ4iB1q80MreuDZvHw9GYLLaYCYuLAhuHg8nQ2o9uLE5JYPOS9qY73imlPYyAeN8CqC5KgEHlpnqxCCdhYjeiDc3cJ19dymuxXTMz+VcdULd5TnXMRgSTeOdKmsdH3Bpw3IxUXj3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=pfh+hKjQ7xhwpnW626CakM6DZJOxkspkkZ9Jv9blvPUO/8MIIpd1T7gfYasAL4432R8anvJ6gImkDhGzhu4z5OFfJgq4tMAC7mgYqlclxf6fPOzAxGlC1twJfwRiIyCzHKBG/TzwkwaLxvpBkixpOXLWlpjuF2U0xNk1JrAIMTk=
Received: by 10.66.216.14 with SMTP id o14mr784629ugg.1182909072111;
        Tue, 26 Jun 2007 18:51:12 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.125.225])
        by mx.google.com with ESMTP id w5sm10182914mue.2007.06.26.18.51.11
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 26 Jun 2007 18:51:11 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <F3B3254741B1404D92215D80C451DE84017E81A7@CORPUSMX10B.corp.emc.com>
References: <F3B3254741B1404D92215D80C451DE84017E81A7@CORPUSMX10B.corp.emc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B17A8D07-1D70-4515-B471-8251921C0941@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene as primary object storage
Date: Wed, 27 Jun 2007 03:48:20 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

27 jun 2007 kl. 03.19 skrev Liu_Andy2@emc.com:

> Perhaps this reference
> http://www.mail-archive.com/hibernate-devel@lists.sourceforge.net/ 
> msg062
> 60.html will give you some help. It's about Hibernate Lucene
> integration.

Thanks, interesting. Do you know more about this? Was the ORM  
implemented? Does Hibernate have some sort of built in transaction  
log it could store on the side?

They don't seem to talk that much about what might go wrong with a  
directoy though. That is my big concern. I guess my subject was a bit  
missleading. Up until now I have been able to rebuild the index from  
a database or something if it dies on me due to bad code, hardware  
failure or what ever reason. I can't do that if the index was the  
only place I saved the data.

Perhaps it is a backup-solution I'm looking for. Maybe there are some  
expensive or sensitive things I need to watch out a bit extra when  
calling as, or something. I don't know. That is why I'm asking.

>
> Andy
>
> -----Original Message-----
> From: karl wettin [mailto:karl.wettin@gmail.com]
> Sent: Wednesday, June 27, 2007 8:17 AM
> To: java-user@lucene.apache.org
> Subject: Lucene as primary object storage
>
> Until recently I have only used Lucene as an index. I'm very
> interested to hear what you people have to say about using Lucene as
> the primary and only persistance layer in an application.
>
> I would feel much safer if I had a transactionlog for crash recovery.
> So I might get me one of those. Are there more things I should worry
> about?
>
>
> -- 
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 02:04:52 2007
Return-Path: <java-user-return-28852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48660 invoked from network); 27 Jun 2007 02:04:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 02:04:51 -0000
Received: (qmail 55862 invoked by uid 500); 27 Jun 2007 02:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55828 invoked by uid 500); 27 Jun 2007 02:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55816 invoked by uid 99); 27 Jun 2007 02:04:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 19:04:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 19:04:42 -0700
Received: by py-out-1112.google.com with SMTP id f31so71970pyh
        for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 19:04:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=aTMsZZ3c9erE+Wj+DKc8xMlMLjFcVoNZdtlUr5n3JgpQRCM8z1qMAmuDuH+NynvwSUBL3Nj0vo+Daxg3Lt3dTLAeKudSTYSEhZpzdBi/0NIDJ503NUpKCOa5nSRCB8MJd+EEQlf8BLspLkT+NbYkbgPUUaWIT7eOrLR1UwD1Osw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=WXP3KtC8dskIwnraA1/f9h7GBTJmxofketXjJBBdofYLdFoh1FGN5Cg39g7Vr2KeLT2+RWQFPTRlql1d+qlcEKjs/U4wwN+eZj6LAyNMQRixWCaD8+1iqA4pImfkPQuDTzfCigTjFISVS61RVaDh2ZhFMiwjYcnLL+aXbwP4eCM=
Received: by 10.65.251.17 with SMTP id d17mr80981qbs.1182909860890;
        Tue, 26 Jun 2007 19:04:20 -0700 (PDT)
Received: by 10.65.203.18 with HTTP; Tue, 26 Jun 2007 19:04:20 -0700 (PDT)
Message-ID: <bd67edef0706261904s1f77b73w19d426d95eb08a4b@mail.gmail.com>
Date: Tue, 26 Jun 2007 21:04:20 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Standard Tokenizer Question
In-Reply-To: <F3B3254741B1404D92215D80C451DE84017E81EA@CORPUSMX10B.corp.emc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7012_27119372.1182909860862"
References: <bd67edef0706261832g1d796aberb208ba49f5e1ba60@mail.gmail.com>
	 <F3B3254741B1404D92215D80C451DE84017E81EA@CORPUSMX10B.corp.emc.com>
X-Google-Sender-Auth: 86882a704dd87376
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7012_27119372.1182909860862
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That solves getting the actual text but Token.  My other problem is that
Token also has "startOffset" and "endOffset" fields.    Standard Token has
"startColumn/Line" and "endColumn/Line" but I was not exactly sure how to
use these.  Could you possibly give me a small example of using these?  I
think I would be able to if I a line is always the same length
(startLine-1(line_length) + startColumn)

Thanks!

--JP

On 6/26/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
>
> Token.termText() perhaps is the same as st.getToken(y).image
>
> Andy
> -----Original Message-----
> From: jpsondag@gmail.com [mailto:jpsondag@gmail.com] On Behalf Of John
> Paul Sondag
> Sent: Wednesday, June 27, 2007 9:32 AM
> To: java-user@lucene.apache.org
> Subject: Standard Tokenizer Question
>
> Hey,
>
> I Think this is where I ask this.
>
> I'm pretty new to this so this is probably a dumb question.
>
> I'm using the StandardTokenizer class to turn a file into tokens.  I
> then
> need to be able to later skip to a specific token in the file sent to me
> from another source.  So say my StandardTokenizer is called st and I'm
> told
> to get token y.  At first I was using st.getToken(y).  But this was
> returning an object of type  "StandardToken", I really would like to
> just
> have it return type Token (because it has more useful functions for me
> like
> termText()).  Right now I just call st.next()  y times to get the y'th
> token, which is horribly inefficient but I can't find any way to
>
> a) go right to the token I want
> b)  Have it be type Token and not Standard Token.
>
> --JP
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7012_27119372.1182909860862--

From java-user-return-28853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 02:22:08 2007
Return-Path: <java-user-return-28853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56156 invoked from network); 27 Jun 2007 02:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 02:22:07 -0000
Received: (qmail 79465 invoked by uid 500); 27 Jun 2007 02:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78955 invoked by uid 500); 27 Jun 2007 02:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78943 invoked by uid 99); 27 Jun 2007 02:22:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 19:22:00 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 19:21:56 -0700
Received: from mailhub.lss.emc.com (nagas.lss.emc.com [10.254.144.11])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R2LYOd027484
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 22:21:34 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R2KkxM013181
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 22:21:32 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Jun 2007 22:18:55 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Standard Tokenizer Question
Date: Tue, 26 Jun 2007 22:17:58 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE84017E823A@CORPUSMX10B.corp.emc.com>
In-Reply-To: <bd67edef0706261904s1f77b73w19d426d95eb08a4b@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Standard Tokenizer Question
Thread-Index: Ace4X5HKgJUxOdTKTy6v5lxaHVnRHQAAOXJg
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2007 02:18:55.0803 (UTC) FILETIME=[835458B0:01C7B861]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.26.184634
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_MEDIA_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

In fact,it should be:=20
Standardtoken.image=3DToken.termText,
Standardtoken.beginColumn=3D Token.startOffset,
Standardtoken.endColumn =3DToken.endOffset,

You can reference StandardTokenizer.java, about line 73.

Andy


-----Original Message-----
From: jpsondag@gmail.com [mailto:jpsondag@gmail.com] On Behalf Of John
Paul Sondag
Sent: Wednesday, June 27, 2007 10:04 AM
To: java-user@lucene.apache.org
Subject: Re: Standard Tokenizer Question

That solves getting the actual text but Token.  My other problem is that
Token also has "startOffset" and "endOffset" fields.    Standard Token
has
"startColumn/Line" and "endColumn/Line" but I was not exactly sure how
to
use these.  Could you possibly give me a small example of using these?
I
think I would be able to if I a line is always the same length
(startLine-1(line_length) + startColumn)

Thanks!

--JP

On 6/26/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
>
> Token.termText() perhaps is the same as st.getToken(y).image
>
> Andy
> -----Original Message-----
> From: jpsondag@gmail.com [mailto:jpsondag@gmail.com] On Behalf Of John
> Paul Sondag
> Sent: Wednesday, June 27, 2007 9:32 AM
> To: java-user@lucene.apache.org
> Subject: Standard Tokenizer Question
>
> Hey,
>
> I Think this is where I ask this.
>
> I'm pretty new to this so this is probably a dumb question.
>
> I'm using the StandardTokenizer class to turn a file into tokens.  I
> then
> need to be able to later skip to a specific token in the file sent to
me
> from another source.  So say my StandardTokenizer is called st and I'm
> told
> to get token y.  At first I was using st.getToken(y).  But this was
> returning an object of type  "StandardToken", I really would like to
> just
> have it return type Token (because it has more useful functions for me
> like
> termText()).  Right now I just call st.next()  y times to get the y'th
> token, which is horribly inefficient but I can't find any way to
>
> a) go right to the token I want
> b)  Have it be type Token and not Standard Token.
>
> --JP
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 02:32:02 2007
Return-Path: <java-user-return-28854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59241 invoked from network); 27 Jun 2007 02:32:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 02:32:00 -0000
Received: (qmail 90166 invoked by uid 500); 27 Jun 2007 02:31:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90116 invoked by uid 500); 27 Jun 2007 02:31:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90102 invoked by uid 99); 27 Jun 2007 02:31:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 19:31:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jpsondag@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 19:31:53 -0700
Received: by py-out-1112.google.com with SMTP id f31so89559pyh
        for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 19:31:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=A0AlARLTbJaF2+CbUlSEJVrEDs5wt+Ms7Xl4FSJE8DyAWGe6QS/4oFlbD/F4PaKw3g5p8cxpp/SLHShVHtnZ3XWmUjuvlZx6ugO61+HA0TmmugYpRJP0iKLa0YtvKWYBm1mrx6vcFUwZ3xecKBwFO1rQJ300DQhS0uG4xm6+zJo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=iyHuA2AxaGpFvbhRgVL9t9r8ewDt275chtnulne/nVwljEchvzbaKQcjYF+6yaiWlfVrj17F0ZAUkO9rnWKOn3OcEkq/j00ao3mgf8SjQ35wRr23KegBtjMKsjMpXkWSfmlaHUXndJgbvM4M8HKa7A0x0XQXCjsSUVclT+tF4mM=
Received: by 10.64.150.18 with SMTP id x18mr64393qbd.1182911491878;
        Tue, 26 Jun 2007 19:31:31 -0700 (PDT)
Received: by 10.65.203.18 with HTTP; Tue, 26 Jun 2007 19:31:31 -0700 (PDT)
Message-ID: <bd67edef0706261931g198fffa1m7400d2e56e6f58a0@mail.gmail.com>
Date: Tue, 26 Jun 2007 21:31:31 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Standard Tokenizer Question
In-Reply-To: <F3B3254741B1404D92215D80C451DE84017E823A@CORPUSMX10B.corp.emc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7304_16399622.1182911491838"
References: <bd67edef0706261904s1f77b73w19d426d95eb08a4b@mail.gmail.com>
	 <F3B3254741B1404D92215D80C451DE84017E823A@CORPUSMX10B.corp.emc.com>
X-Google-Sender-Auth: 82877d95a57a9713
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7304_16399622.1182911491838
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So out of curiosity exactly what is startLine and endLine?

--JP

On 6/26/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
>
> In fact,it should be:
> Standardtoken.image=Token.termText,
> Standardtoken.beginColumn= Token.startOffset,
> Standardtoken.endColumn =Token.endOffset,
>
> You can reference StandardTokenizer.java, about line 73.
>
> Andy
>
>
> -----Original Message-----
> From: jpsondag@gmail.com [mailto:jpsondag@gmail.com] On Behalf Of John
> Paul Sondag
> Sent: Wednesday, June 27, 2007 10:04 AM
> To: java-user@lucene.apache.org
> Subject: Re: Standard Tokenizer Question
>
> That solves getting the actual text but Token.  My other problem is that
> Token also has "startOffset" and "endOffset" fields.    Standard Token
> has
> "startColumn/Line" and "endColumn/Line" but I was not exactly sure how
> to
> use these.  Could you possibly give me a small example of using these?
> I
> think I would be able to if I a line is always the same length
> (startLine-1(line_length) + startColumn)
>
> Thanks!
>
> --JP
>
> On 6/26/07, Liu_Andy2@emc.com <Liu_Andy2@emc.com> wrote:
> >
> > Token.termText() perhaps is the same as st.getToken(y).image
> >
> > Andy
> > -----Original Message-----
> > From: jpsondag@gmail.com [mailto:jpsondag@gmail.com] On Behalf Of John
> > Paul Sondag
> > Sent: Wednesday, June 27, 2007 9:32 AM
> > To: java-user@lucene.apache.org
> > Subject: Standard Tokenizer Question
> >
> > Hey,
> >
> > I Think this is where I ask this.
> >
> > I'm pretty new to this so this is probably a dumb question.
> >
> > I'm using the StandardTokenizer class to turn a file into tokens.  I
> > then
> > need to be able to later skip to a specific token in the file sent to
> me
> > from another source.  So say my StandardTokenizer is called st and I'm
> > told
> > to get token y.  At first I was using st.getToken(y).  But this was
> > returning an object of type  "StandardToken", I really would like to
> > just
> > have it return type Token (because it has more useful functions for me
> > like
> > termText()).  Right now I just call st.next()  y times to get the y'th
> > token, which is horribly inefficient but I can't find any way to
> >
> > a) go right to the token I want
> > b)  Have it be type Token and not Standard Token.
> >
> > --JP
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7304_16399622.1182911491838--

From java-user-return-28855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 02:50:40 2007
Return-Path: <java-user-return-28855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63602 invoked from network); 27 Jun 2007 02:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 02:50:39 -0000
Received: (qmail 9961 invoked by uid 500); 27 Jun 2007 02:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9695 invoked by uid 500); 27 Jun 2007 02:50:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9684 invoked by uid 99); 27 Jun 2007 02:50:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 19:50:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 19:50:31 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l5R2oB026251
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 19:50:11 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007062619501007020
 for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 19:50:10 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[192.168.1.49] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1I3Nbe-00059V-00
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 19:50:10 -0700
Message-ID: <4681D18E.2090200@ai.sri.com>
Date: Tue, 26 Jun 2007 19:55:10 -0700
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: boosting indexing  terms
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I like Lucene's ability to boost each query term during query time.. 
However, for indexing, the smallest unit you can boost is a field.
I wonder if anyone here has good idea or suggestion on how one might 
boost terms without putting them in separate fields?

Thanks.

Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 04:12:20 2007
Return-Path: <java-user-return-28856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91204 invoked from network); 27 Jun 2007 04:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 04:12:17 -0000
Received: (qmail 26589 invoked by uid 500); 27 Jun 2007 04:12:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26562 invoked by uid 500); 27 Jun 2007 04:12:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26551 invoked by uid 99); 27 Jun 2007 04:12:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 21:12:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 21:12:09 -0700
Received: by ug-out-1314.google.com with SMTP id c2so14836ugf
        for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 21:11:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=JpQRhls1XdQtnXkfvJ/WLzeAXhLqWv7M1GYRYhVJ91Y+oUlO+St9N6rFbqWxSDOHpLQJVl22iDCiN9Ci1cu/h+5sDmyQ3fYLoqdBR1b+q9MWFXvlNVFboD4Esg4b1FzpNswbxTlW64CrmQlvoj9xC+9vNfXrvhq3jzsEGcwWCPc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ceJmvwYvQcbccRMB0IQBHDOv1r5ob2WtjYtXh8f7f5MH035dQj8eElNEAoA2MiAl/sEnXbO0pIwi5kAdoaHCcaxPUzVLj29FLWCQYtRJJeMCHrI9DIMhMhXJx+Zo7Q7BB9ubAM9xwp19CuVQaHd5djZeKOtQ1AR4QMVCxTE8ZKg=
Received: by 10.67.101.10 with SMTP id d10mr111254ugm.1182917507745;
        Tue, 26 Jun 2007 21:11:47 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.125.225])
        by mx.google.com with ESMTP id y2sm16821827mug.2007.06.26.21.11.45
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 26 Jun 2007 21:11:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4681D18E.2090200@ai.sri.com>
References: <4681D18E.2090200@ai.sri.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8A8AF949-666B-41B5-9187-33E7A3E5A2AA@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: boosting indexing  terms
Date: Wed, 27 Jun 2007 06:08:54 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


27 jun 2007 kl. 04.55 skrev yu:

> I like Lucene's ability to boost each query term during query  
> time.. However, for indexing, the smallest unit you can boost is a  
> field.
> I wonder if anyone here has good idea or suggestion on how one  
> might boost terms without putting them in separate fields?

Take a look at payloads, available since 2.1 or so:

http://www.google.com/search?q=lucene+payloads




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 05:40:43 2007
Return-Path: <java-user-return-28857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16133 invoked from network); 27 Jun 2007 05:40:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 05:40:41 -0000
Received: (qmail 57860 invoked by uid 500); 27 Jun 2007 05:40:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57609 invoked by uid 500); 27 Jun 2007 05:40:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57598 invoked by uid 99); 27 Jun 2007 05:40:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 22:40:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jun 2007 22:40:31 -0700
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id l5R5eB013933
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 22:40:11 -0700 (PDT)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2007062622401011932
 for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 22:40:10 -0700
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[192.168.1.49] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1I3QGA-0006Mx-00
	for <java-user@lucene.apache.org>; Tue, 26 Jun 2007 22:40:10 -0700
Message-ID: <4681F966.20603@ai.sri.com>
Date: Tue, 26 Jun 2007 22:45:10 -0700
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: boosting indexing  terms
References: <4681D18E.2090200@ai.sri.com> <8A8AF949-666B-41B5-9187-33E7A3E5A2AA@gmail.com>
In-Reply-To: <8A8AF949-666B-41B5-9187-33E7A3E5A2AA@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, Karl, for your link/suggestion. I did not know Payloads and will 
check it out.


Jay

karl wettin wrote:
>
> 27 jun 2007 kl. 04.55 skrev yu:
>
>> I like Lucene's ability to boost each query term during query time.. 
>> However, for indexing, the smallest unit you can boost is a field.
>> I wonder if anyone here has good idea or suggestion on how one might 
>> boost terms without putting them in separate fields?
>
> Take a look at payloads, available since 2.1 or so:
>
> http://www.google.com/search?q=lucene+payloads
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 07:16:16 2007
Return-Path: <java-user-return-28858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38178 invoked from network); 27 Jun 2007 07:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 07:16:13 -0000
Received: (qmail 24652 invoked by uid 500); 27 Jun 2007 07:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24597 invoked by uid 500); 27 Jun 2007 07:15:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24574 invoked by uid 99); 27 Jun 2007 07:15:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 00:15:54 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 00:15:49 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I3RkP-0006X1-4T
	for java-user@lucene.apache.org; Wed, 27 Jun 2007 00:15:29 -0700
Message-ID: <11319544.post@talk.nabble.com>
Date: Wed, 27 Jun 2007 00:15:29 -0700 (PDT)
From: Mahdi Rahimi <mhd_rhm@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: JavaCC Download
In-Reply-To: <46814A01.40709@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mhd_rhm@yahoo.com
References: <11233766.post@talk.nabble.com> <467A8E41.4090801@syr.edu> <11263519.post@talk.nabble.com> <625a01bb0706241811p4fa21cdau2343106f2b9ecd8b@mail.gmail.com> <46814A01.40709@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


How can I access to Certificate of this site? 


Steven Rowe wrote:
> 
> I don't think you need to register - I am not registered and I can
> download from there.
> 
> My guess is that Mahdi Rahimi's browser doesn't know how to speak the
> HTTPS protocol.
> 
> Here's an invocation of wget (I have version 1.10.2) that works for me
> to get the .zip archive (all on one line):
> 
> wget --no-check-certificate
> https://javacc.dev.java.net/files/documents/17/26777/javacc-4.0.zip
> 
> Or if you want the .tar.gz archive:
> 
> wget --no-check-certificate
> https://javacc.dev.java.net/files/documents/17/26776/javacc-4.0.tar.gz
> 
> jiang jialin wrote:
>> you must registe first
>> 
>> 2007/6/23, Mahdi Rahimi <mhd_rhm@yahoo.com>:
>>>
>>>
>>> Hi Steven.
>>>
>>> When i access to this address, this message appread
>>>
>>> Forbidden
>>> You don't have permission to access /servlets/ProjectHome on this
>>> server.
>>>
>>> What's the problem?
>>>
>>> Thakns.
>>>
>>>
>>> Steven Rowe wrote:
>>> >
>>> > Mahdi Rahimi wrote:
>>> >> Hi.
>>> >>
>>> >> How can I access JavaCC??
>>> >>
>>> >> Thanks
>>> >
>>> > https://javacc.dev.java.net/
>>> >
>>> > --
>>> > Steve Rowe
>>> > Center for Natural Language Processing
>>> > http://www.cnlp.org/tech/lucene.asp
> 
> 
> -- 
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/JavaCC-Download-tf3958940.html#a11319544
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 07:46:33 2007
Return-Path: <java-user-return-28859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52856 invoked from network); 27 Jun 2007 07:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 07:46:32 -0000
Received: (qmail 93619 invoked by uid 500); 27 Jun 2007 07:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93574 invoked by uid 500); 27 Jun 2007 07:46:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93563 invoked by uid 99); 27 Jun 2007 07:46:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 00:46:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 00:46:23 -0700
Received: from EPLUXSEX01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T8078fb7a5388ad3ee416f0@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 27 Jun 2007 09:46:00 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7B88F.3413CD68"
Subject: Update documents
Date: Wed, 27 Jun 2007 09:45:59 +0200
Message-ID: <CA7398CB8402E445AABF081C51E43ACB059F0A@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Update documents
Thread-Index: Ace4jzLfeBjJGGQBS4Wtai9R/y3Z4w==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7B88F.3413CD68
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

High,
Is-it possible to update a document's field without deleting the
document and add it again into the index?

------_=_NextPart_001_01C7B88F.3413CD68--

From java-user-return-28860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 07:58:51 2007
Return-Path: <java-user-return-28860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55205 invoked from network); 27 Jun 2007 07:58:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 07:58:51 -0000
Received: (qmail 15709 invoked by uid 500); 27 Jun 2007 07:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15683 invoked by uid 500); 27 Jun 2007 07:58:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15672 invoked by uid 99); 27 Jun 2007 07:58:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 00:58:46 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 00:58:42 -0700
Received: from mailhub.lss.emc.com (sesha.lss.emc.com [10.254.144.12])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R7wK9c011792
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 03:58:20 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R7vQ4M014210
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 03:58:17 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 27 Jun 2007 03:58:16 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Update documents
Date: Wed, 27 Jun 2007 03:57:18 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE84017E84EF@CORPUSMX10B.corp.emc.com>
In-Reply-To: <CA7398CB8402E445AABF081C51E43ACB059F0A@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Update documents
Thread-Index: Ace4jzLfeBjJGGQBS4Wtai9R/y3Z4wAATKUA
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2007 07:58:17.0029 (UTC) FILETIME=[EB90DF50:01C7B890]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.27.3433
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Perhaps it is not possible if you have written the document to index.

Andy

-----Original Message-----
From: WATHELET Thomas [mailto:thomas.wathelet@europarl.europa.eu]=20
Sent: Wednesday, June 27, 2007 3:46 PM
To: java-user@lucene.apache.org
Subject: Update documents

High,
Is-it possible to update a document's field without deleting the
document and add it again into the index?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 08:02:39 2007
Return-Path: <java-user-return-28861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56459 invoked from network); 27 Jun 2007 08:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 08:02:38 -0000
Received: (qmail 22313 invoked by uid 500); 27 Jun 2007 08:02:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21475 invoked by uid 500); 27 Jun 2007 08:02:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21464 invoked by uid 99); 27 Jun 2007 08:02:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 01:02:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 01:02:30 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l5R828aO533662
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 08:02:08 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5R828JP1511560
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 10:02:08 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5R828Dr005480
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 10:02:08 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5R8287x005477
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 10:02:08 +0200
In-Reply-To: <CA7398CB8402E445AABF081C51E43ACB059F0A@EPLUXSEX01.ep.parl.union.eu>
Subject: Re: Update documents
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 27 Jun 2007 00:58:22 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 27/06/2007 11:02:08
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

WATHELET Thomas wrote:

> Is-it possible to update a document's field without deleting the
> document and add it again into the index?

Not really... see the FAQ, especially "How do I update a document or a set
of documents that are already indexed?", and also see javadocs for
IndexWriter's updateDocument() methods.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 08:09:20 2007
Return-Path: <java-user-return-28862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58157 invoked from network); 27 Jun 2007 08:09:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 08:09:19 -0000
Received: (qmail 37101 invoked by uid 500); 27 Jun 2007 08:09:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37065 invoked by uid 500); 27 Jun 2007 08:09:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37043 invoked by uid 99); 27 Jun 2007 08:09:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 01:09:11 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_HAS_ULINE_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 01:09:06 -0700
Received: from mailhub.lss.emc.com (uraeus.lss.emc.com [10.254.144.14])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R88j6u020831
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 04:08:45 -0400 (EDT)
Received: from corpussmtp3.corp.emc.com (corpussmtp3.corp.emc.com [10.254.64.53])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id l5R88TZo001622
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 04:08:43 -0400 (EDT)
From: Liu_Andy2@emc.com
Received: from CORPUSMX10B.corp.emc.com ([128.221.14.93]) by corpussmtp3.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 27 Jun 2007 04:08:41 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Update documents
Date: Wed, 27 Jun 2007 04:07:43 -0400
Message-ID: <F3B3254741B1404D92215D80C451DE84017E8510@CORPUSMX10B.corp.emc.com>
In-Reply-To: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Update documents
Thread-Index: Ace4kZCDUFXHWAIjR6mATdKIeodqAQAAEi5Q
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2007 08:08:41.0584 (UTC) FILETIME=[5FD46700:01C7B892]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.6.27.3433
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Virus-Checked: Checked by ClamAV on apache.org

In effect, IndexWriter's updateDocument() will first delete the document
containing specific term, then add the document. It just wrap delete&add
as a thread safe method.

Andy

-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Wednesday, June 27, 2007 3:58 PM
To: java-user@lucene.apache.org
Subject: Re: Update documents

WATHELET Thomas wrote:

> Is-it possible to update a document's field without deleting the
> document and add it again into the index?

Not really... see the FAQ, especially "How do I update a document or a
set
of documents that are already indexed?", and also see javadocs for
IndexWriter's updateDocument() methods.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 10:58:21 2007
Return-Path: <java-user-return-28863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34416 invoked from network); 27 Jun 2007 10:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 10:58:20 -0000
Received: (qmail 78290 invoked by uid 500); 27 Jun 2007 10:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78117 invoked by uid 500); 27 Jun 2007 10:58:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78057 invoked by uid 99); 27 Jun 2007 10:58:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 03:58:05 -0700
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 03:58:00 -0700
Received: by an-out-0708.google.com with SMTP id c5so25259anc
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 03:57:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=M+oPWaXB3rAxlel9m48+0ZsOJ/ypv5JSpVCq2j5rvxaqKJiy3rLJoYWJOmvwsl0v2BlRcLwCA2V8R32RckR36pc20ytfRzUrvPZ7VW6QxzjJl/BgQ4VscIk0RyF7GJSXlX8s3aydmc40/ut5lSnRgdDy0O7gmxhhW99eZkrBrOk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z/wYxqiVUkJ+hWhRBrcaVCeDPtL/tMvo5BnxXz4uGNwllVr6pyL5xlX6YJwSJIM3c24AIsAfJCw+IsKp/lg7UwoEx9v2wknu57C1Sl7r7TFP8v2RBWC4KxrTj0vriyj2C0qHcqGLfkNJKQiQALjIVkspFdjXe/XcPUEYBcEsV1Y=
Received: by 10.100.14.19 with SMTP id 19mr223771ann.1182941860034;
        Wed, 27 Jun 2007 03:57:40 -0700 (PDT)
Received: by 10.100.9.13 with HTTP; Wed, 27 Jun 2007 03:57:40 -0700 (PDT)
Message-ID: <34b8543c0706270357y602837f3l6517642613917d6c@mail.gmail.com>
Date: Wed, 27 Jun 2007 14:27:40 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene as primary object storage
In-Reply-To: <B17A8D07-1D70-4515-B471-8251921C0941@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32875_28747941.1182941860009"
References: <F3B3254741B1404D92215D80C451DE84017E81A7@CORPUSMX10B.corp.emc.com>
	 <B17A8D07-1D70-4515-B471-8251921C0941@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32875_28747941.1182941860009
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi karl,
we did something like hibernate to map an object (Entity) with lucene by
defining a bunch of annotations just like the Limax project (as far as I
know it is led by you),
the only problem we had was how to make relationship between two or more
separate indexes. I managed to resolve it but I don't think it's very good
idea. if only the Lucene had some feature to facilitate this :)
We use these indexes for generating some dynamic reports and we are going to
create a database crawler to surf the DB and find new or deleted records to
update its index files.
our application uses only index files to persist the information comming
from DB and also uses that index as a resource

I am welcome if you want to know how to make relationship between two or
more indexes.

Good Luck

-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_32875_28747941.1182941860009--

From java-user-return-28864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 12:00:24 2007
Return-Path: <java-user-return-28864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55821 invoked from network); 27 Jun 2007 12:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 12:00:23 -0000
Received: (qmail 13486 invoked by uid 500); 27 Jun 2007 12:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13346 invoked by uid 500); 27 Jun 2007 12:00:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13320 invoked by uid 99); 27 Jun 2007 12:00:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 05:00:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 05:00:13 -0700
Received: by an-out-0708.google.com with SMTP id c5so28533anc
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 04:59:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Uf/3wo6SjXpRV71H2woEXxkyVZHxHqnYKVFLtDNfyFDQnn8hENgSM/tHCkMpzae8UATP47Yciwhvs4u3BBTuKYvYJ5JWp3ic7MWnSLO4/fnC0qc7ToS0MjcDUoFwmMzEdhh/OO6fLsY5kWlJ6Tjk3Z7IayWDU+bOsDieqXxRFzI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=sjuBRzIVy9WbNgWQsT+TJZBnQrUmr0vkrA+rCYSYpfudvy0WWnPoIo6a9kUmDGZTINwynE7YTiaF7EoEuEwD+Q7EM+7BAEbbm4yNE7mkZZkhhAzxbZ3YU3AaW1qa4Xhf1YAZCWm+JnwbE8YHNq+/9P4ORwPsL6d+AS6Hp4Y4+L4=
Received: by 10.100.166.14 with SMTP id o14mr242326ane.1182945592632;
        Wed, 27 Jun 2007 04:59:52 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id d21sm11428585and.2007.06.27.04.59.51
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Jun 2007 04:59:51 -0700 (PDT)
Message-ID: <46825119.5050705@gmail.com>
Date: Wed, 27 Jun 2007 07:59:21 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <528917.34258.qm@web26006.mail.ukl.yahoo.com> <467AEB5A.6040301@gmail.com> <467AF7C4.6050002@yahoo.co.uk>
In-Reply-To: <467AF7C4.6050002@yahoo.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



markharw00d wrote:
>
> I was thinking along the lines of wrapping some core classes such as 
> IndexReader to somehow observe the query matching process and deduce 
> from that what to highlight (avoiding the need for MemoryIndex)  but 
> I'm not sure that is viable. It would be nice to get some more match 
> info out of the main query logic as it runs to aid highlighting rather 
> than reverse engineering the basis of a match after the event. 

I have been thinking about a way to pursue this, and it does not seem 
clear that there is a nice solution. Even if you could wrap Querys or 
other classes to observe matched tokens (non trivial since a Query is 
only concerned if it matches a doc, not which tokens it matches at which 
positions), you would still have the major problem of which matches do 
you keep information for. It does not seem practical to save all of the 
information to highlight *any* doc after a search and it also seems 
unlikely that you would know which docs you wanted to highlight before 
the search. The only compromise that I can see is maybe just storing 
info to highlight the first n docs, but even here, while the scoring is 
occurring you do not yet know the return order. Also, there is probably 
little value in knowing which Tokens were matches for highlighting 
unless you have stored offsets as well.

Unless someone has any suggestions on how to accomplish this, I think 
time would be better spent improving the existing Highlighter framework.

Perhaps Ronnie's Highlighter should be added as an alternate Highlighter 
that is less feature rich but much faster on large docs. It looks to me 
like there is unlikely to be a faster Highlighting method for simple 
non-position aware highlighting.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 12:51:46 2007
Return-Path: <java-user-return-28865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76168 invoked from network); 27 Jun 2007 12:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 12:51:45 -0000
Received: (qmail 25533 invoked by uid 500); 27 Jun 2007 12:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25497 invoked by uid 500); 27 Jun 2007 12:51:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25486 invoked by uid 99); 27 Jun 2007 12:51:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 05:51:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [84.96.25.182] (HELO mail.e-manation.com) (84.96.25.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 05:51:35 -0700
Received: by mail.e-manation.com (Postfix, from userid 1007)
	id 4C562A0007A; Wed, 27 Jun 2007 14:47:52 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb (2006-10-05) on 
	actarus.e-manation.com
X-Spam-Level: 
Received: from [10.10.1.131] (unknown [10.10.1.131])
	by mail.e-manation.com (Postfix) with ESMTP id 04892A0006C
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 14:47:52 +0200 (CEST)
Message-ID: <46825D3C.3090204@lingway.com>
Date: Wed, 27 Jun 2007 14:51:08 +0200
From: Samuel LEMOINE <samuel.lemoine@lingway.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: several existential issues about Lucene's filesystem
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com>
In-Reply-To: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.7-deb

Hi everyone !

I'm working on bibliographical researches on Lucene as an intern in 
Lingway (which uses Lucene in its main product), and I'm currently 
studying Lucene's file system.
There are several things I don't catch in Lucene's file system, and I 
thought here was the right place to ask about those questions (I hope 
it's the case actually).
The main resource I used is this document:
http://lucene.apache.org/java/2_1_0/fileformats.html

-in the .tvf file (Term Vector file) in Lucene 2.2.0, position & offsets 
can be possibly given in the term vector... I don't understand how it 
works, since there's only one .tvf per segment (according to what I've 
understood), and in the architecture described, there is no information 
given about the documents in which appears each term stored in the 
TermVector (the informations document-related are in the .tvd file I 
assume). The position/offset informations seems to be simply a list of 
addresses, but how can be known the document it refers to? Or is there 
one .tvf file per document?

-in the .prx file (prositions file), payloads are mentionned and allow 
to attach meta-data... what's the purpose of such data? is there a 
precise use, or is it only data for the sole user's use?

-many adresses in many files are given under Delta shapes... Doesn't it 
slacken the search among the index ? I mean, when a keyword is looked 
for, in order to find its position in the right file, Lucene must find 
the adress of the previous term and add the "delta" address... but the 
previous term adress is also given by a delta address, and so on, so 
that as far as I understand it, the whole file must be climbed back, 
recursively finding the address of each term... I assume I've 
misunderstood something, but don't know what.

I apologize for the length of my mail, and the approximative english...
Thanks a lot for reading, and far more for answering ^^

Samuel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 13:22:30 2007
Return-Path: <java-user-return-28866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93138 invoked from network); 27 Jun 2007 13:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 13:22:29 -0000
Received: (qmail 16586 invoked by uid 500); 27 Jun 2007 13:22:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16557 invoked by uid 500); 27 Jun 2007 13:22:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16546 invoked by uid 99); 27 Jun 2007 13:22:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 06:22:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 06:22:19 -0700
Received: by an-out-0708.google.com with SMTP id c5so33563anc
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 06:21:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=RZS4hWtItjQrVqfj0sHRmkSsEwEUoc0zctEyIjBDbtwcE+uEHWrH7zr44ab0a6M25yQIVRXvQlaSH6MjfwaEVj0ObkW0A9mMgTzrUlTFKnS9QKmgD7/hIH9stmFWkP+9WkeOPiAPygzfqFjUx9WOy7jueZggr6BFLNc9KLCliLk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=DhOGkpJcj3r9yZtl3/f18m/1ZzvbBO/RBGNw1urIqBOBC7zwu4lIe+oGB1Uq5Q5vvCsoxq4/BE8hm4AgS8sc+nBk3ZdQM/L/I9s66B3HKm59hFUeHvkwouI9sWRTZ0LvzsW+nGuXDKXfhuyUi7Qb/gVE5Kb8uMIQCuSYHf63G+U=
Received: by 10.100.137.18 with SMTP id k18mr263781and.1182950517955;
        Wed, 27 Jun 2007 06:21:57 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id d12sm9767083and.2007.06.27.06.21.56
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Jun 2007 06:21:57 -0700 (PDT)
Message-ID: <46826455.5000105@gmail.com>
Date: Wed, 27 Jun 2007 09:21:25 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <280820.27409.qm@web50310.mail.re2.yahoo.com>
In-Reply-To: <280820.27409.qm@web50310.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Depending on what these guys are doing, here is another possibility if 
TermOffests and Ronnie's highlighter are not an option.

If you are highlighting whole documents (NullFragmenter) or are not very 
concerned about the fragments you get back, you can change the line in 
the Highlighter at about 255:

                tokenGroup.addToken(token, 
fragmentScorer.getTokenScore(token));

                TO:

                float score = fragmentScorer.getTokenScore(token);
                if(score > 0 ) {
                    tokenGroup.addToken(token, score);
                }

This is not a full solution yet, but more of a hack. Fragmenters won't 
be given the opportunity to start a new Fragment at every token 
position...no problem if you are highlighting the whole document.

Essentially, instead of the the document being rebuilt from from the 
source text using each individual token, it is rebuilt from the 
highlighted tokens and the differences in offsets between them. No so 
fragment happy without some Fragmenter handling changes.

On a collection of  5,000 documents,  300-900 tokens (weighted toward 
300), this gave an improvement of 37-40%. I imagine the gains grow as 
the document grows.

I am looking into making this a more general solution, but it's a great 
quick hack for speed. It will also work with my SpanScorer that 
correctly highlights Spans and PhraseQuerys.

- Mark

Otis Gospodnetic wrote:
> Hi Mark,
>
> I know one large user (meaning: high query/highlight rates) of the current Highlighter and this user wasn't too happy with its performance.  I don't know the details, other than it was inefficient.  So now I'm wondering if you've benchmarked your Highlighter against that/current Highlighter to see not only which one is more accurate, but also which one is faster, and by how much?
>
> Thanks,
> Otis
>  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
> Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 20, 2007 12:39:27 AM
> Subject: Highlighter that works with phrase and span queries
>
> I have been working on extending the Highlighter with a new Scorer that 
> correctly scores phrase and span queries. The highlighter is working 
> great for me, but could really use some more banging on.
>
> If you have a need or an interest in a more accurate Highlighter, please 
> give it a whirl and let me know how it went. Unlike most of the other 
> alternate Lucene Highlighters, this one builds off the original contrib 
> Highlighter so as to retain all of its goodness.
>
> http://myhardshadow.com/qsolreleases/lucene-highlighter-2.2.jar
>
> Example Usage
>
>     IndexSearcher searcher = new IndexSearcher(ramDir);
>     Query query = QueryParser.parse("Kenne*", FIELD_NAME, analyzer);
>     query = query.rewrite(reader); //required to expand search terms
>     Hits hits = searcher.search(query);
>
>     for (int i = 0; i < hits.length(); i++)
>     {
>         String text = hits.doc(i).get(FIELD_NAME);
>         CachingTokenFilter tokenStream = new 
> CachingTokenFilter(analyzer.tokenStream(
>                         FIELD_NAME, new StringReader(text)));
>         Highlighter highlighter = new Highlighter(new SpanScorer(query, 
> FIELD_NAME, tokenStream));
>         tokenStream.reset();
>        
>         // Get 3 best fragments and seperate with a "..."
>         String result = highlighter.getBestFragments(tokenStream, text, 
> 3, "...");
>         System.out.println(result);
>     }
>
> If you make a call to any of the getBestFragments() methods more than 
> once, you must call reset() on the SpanScorer between each call.
>
> Pass null as the FIELD_NAME to ignore fields.
>
> If you want to Highlight the whole document, use a NullFragmenter.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 13:40:20 2007
Return-Path: <java-user-return-28867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2121 invoked from network); 27 Jun 2007 13:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 13:40:19 -0000
Received: (qmail 57144 invoked by uid 500); 27 Jun 2007 13:40:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57108 invoked by uid 500); 27 Jun 2007 13:40:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56940 invoked by uid 99); 27 Jun 2007 13:40:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 06:40:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 06:40:00 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l5RDdcnO010538
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 09:39:39 -0400
Message-ID: <468267BF.9020003@syr.edu>
Date: Wed, 27 Jun 2007 09:35:59 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: JavaCC Download
References: <11233766.post@talk.nabble.com> <467A8E41.4090801@syr.edu> <11263519.post@talk.nabble.com> <625a01bb0706241811p4fa21cdau2343106f2b9ecd8b@mail.gmail.com> <46814A01.40709@syr.edu> <11319544.post@talk.nabble.com>
In-Reply-To: <11319544.post@talk.nabble.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I don't know how to access the CA certificate for the web server at
javacc.dev.java.net - my browser automatically does this for me.

Here's an alternate route - I found another javacc-4.0.zip at another
location, and the file I downloaded from there yesterday matched exactly
the version I got from javacc.dev.java.net:

http://atlas.ucpel.tche.br/~dubois/compiladores/javacc-4.0.zip

Good luck,
Steve


Mahdi Rahimi wrote:
> How can I access to Certificate of this site? 
> 
> Steven Rowe wrote:
>> I don't think you need to register - I am not registered and I can
>> download from there.
>>
>> My guess is that Mahdi Rahimi's browser doesn't know how to speak the
>> HTTPS protocol.
>>
>> Here's an invocation of wget (I have version 1.10.2) that works for me
>> to get the .zip archive (all on one line):
>>
>> wget --no-check-certificate
>> https://javacc.dev.java.net/files/documents/17/26777/javacc-4.0.zip
>>
>> Or if you want the .tar.gz archive:
>>
>> wget --no-check-certificate
>> https://javacc.dev.java.net/files/documents/17/26776/javacc-4.0.tar.gz
>>
>> jiang jialin wrote:
>>> you must registe first
>>>
>>> 2007/6/23, Mahdi Rahimi <mhd_rhm@yahoo.com>:
>>>>
>>>> Hi Steven.
>>>>
>>>> When i access to this address, this message appread
>>>>
>>>> Forbidden
>>>> You don't have permission to access /servlets/ProjectHome on this
>>>> server.
>>>>
>>>> What's the problem?
>>>>
>>>> Thakns.
>>>>
>>>>
>>>> Steven Rowe wrote:
>>>>> Mahdi Rahimi wrote:
>>>>>> Hi.
>>>>>>
>>>>>> How can I access JavaCC??
>>>>>>
>>>>>> Thanks
>>>>> https://javacc.dev.java.net/


-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 14:38:58 2007
Return-Path: <java-user-return-28868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24523 invoked from network); 27 Jun 2007 14:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 14:38:57 -0000
Received: (qmail 10567 invoked by uid 500); 27 Jun 2007 14:38:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10532 invoked by uid 500); 27 Jun 2007 14:38:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10517 invoked by uid 99); 27 Jun 2007 14:38:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 07:38:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of aradzivanovich@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 07:38:47 -0700
Received: by nz-out-0506.google.com with SMTP id x7so160722nzc
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 07:38:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=imFvVKllfqxN30pPDqCz4EjSqd+vmFRRZn8s5h3yYNUSk4W7x/S1VzY2ZHMWD0O3p2GBnYIHdnQJzhYsGeu7MLmWH5mZ6H+c8MTmU8dVIemqleSZ4SS4RsCyJVCGEOa8WhaRZNAz7lHK5m0gX1Gp2d5YlFIaOH0HpvWMg2gvZLQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=G0cHwUI2Y/9pkOKiAvKZc8jlTUZesIJLhetXigkSa8M8UZVzQZfUEVxlcS2eJA2dkdUD7b7ZyHMYJPcJ07OB9VWQclcvxKDuMmH74U6JAOxuxjZGg085m7yfhINcOvuvhQ1mhD3ZAaap9lhREZFLl0PfjPjT65SCd0PyRhnQVss=
Received: by 10.115.110.6 with SMTP id n6mr531362wam.1182955106115;
        Wed, 27 Jun 2007 07:38:26 -0700 (PDT)
Received: by 10.114.154.5 with HTTP; Wed, 27 Jun 2007 07:38:26 -0700 (PDT)
Message-ID: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
Date: Wed, 27 Jun 2007 17:38:26 +0300
From: "Aliaksandr Radzivanovich" <aradzivanovich@gmail.com>
To: java-user@lucene.apache.org
Subject: Rewrite one phrase to another in search query
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

What if I need to search for synonyms, but synonyms can be expanded to
phrases of several words?
For example, user enters query "tcp", then my application should also
find documents containing phrase "Transmission Control Protocol". And
conversely, user enters "Transmission Control Protocol", then my
application should also find documents with word "tcp".

It seems like Lucene does not support this scenario out of the box.
Then where to look for the solution? What Lucene
extensions/classes/interfaces should I investigate?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 14:46:20 2007
Return-Path: <java-user-return-28869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26617 invoked from network); 27 Jun 2007 14:46:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 14:46:18 -0000
Received: (qmail 28614 invoked by uid 500); 27 Jun 2007 14:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28363 invoked by uid 500); 27 Jun 2007 14:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28352 invoked by uid 99); 27 Jun 2007 14:46:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 07:46:13 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 07:46:09 -0700
Received: by py-out-1112.google.com with SMTP id f31so557997pyh
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 07:45:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=iA9Pruuw2sGCQTZzEP3PSCZrDgU6OOMGNPDBrXG1MpApHbMRGacP2jvlNXmQj5Udw0ZvaWZbfUf7vjlVVE8Riv99UgY4Io4pGRDVtHKkWPHc36WiM88KlZEl5g/LNRYQmSBvwsQcwX3zDNTdOSpR+2Vpf2Wa+FEVKUefUKg7V9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QMHNs5Xeh+OiY7wnpQ+Q2RJluNnbhEsknfY1iiEgzGIobrMSKLbCuPZsDz1ZbyryhV2E/FdtafvTDh/Cg7VemjSTzS4mv7viB/yCABDNS2QpfWCEM8Whuqi4GisNkv4Ahi70olYq0F5uRTZ/141zztvTJd1nUgS161airApDCjo=
Received: by 10.65.51.4 with SMTP id d4mr628404qbk.1182955544544;
        Wed, 27 Jun 2007 07:45:44 -0700 (PDT)
Received: by 10.65.151.10 with HTTP; Wed, 27 Jun 2007 07:45:44 -0700 (PDT)
Message-ID: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
Date: Wed, 27 Jun 2007 10:45:44 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Payloads and PhraseQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23416_17941849.1182955544523"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23416_17941849.1182955544523
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm looking at the new Payload api and would like to use it in the following
manner. Meta-data is indexed as a special phrase (all terms at same
position) and a payload is stored with the first term of each phrase. I
would like to create a custom query class that extends PhraseQuery and uses
its PhraseScorer to find matching documents. The custom query class then
reads the payload from the first term of the matching query and uses it to
produce a new score. However, I don't see how to get the payload from the
PhraseScorer's TermPositions. Is this possible?


Peter

------=_Part_23416_17941849.1182955544523--

From java-user-return-28870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 14:58:13 2007
Return-Path: <java-user-return-28870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32074 invoked from network); 27 Jun 2007 14:58:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 14:58:11 -0000
Received: (qmail 54242 invoked by uid 500); 27 Jun 2007 14:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54208 invoked by uid 500); 27 Jun 2007 14:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54137 invoked by uid 99); 27 Jun 2007 14:58:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 07:57:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 07:57:53 -0700
Received: by mu-out-0910.google.com with SMTP id g7so214167muf
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 07:57:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Bpovpmxod2tk9ePPjgFF+Wi37R2Xnv3xpcxtNMapfutJOmBTrhPJbiPLGnSchLxHcMaU6OsWdB3NxhJBScTKLo5sNTRnZUBsc+wl5QQ/Ng3R7MRzXA8s+8WrgwV5/sqMthlW4szutfDudJe/DWKhpJy2APUf53k+/wJRhBOVyNc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VCk/UZuoSI/eiiF0CDEsVI5T/bQ0LQA66nCd/mVaMMGt4b0nzAlbh1b8VG8VmAhxmPAr642VgeGlpeU0HO/NLKCQJ4sQJQtt2F6n3e2DwUwm9HewFJMCUJn2E8ptAn+t4C6rZC9s7Tw8KqR7A/wDCsqXpOcxjCQ5eLtbFBKY4Ac=
Received: by 10.82.158.12 with SMTP id g12mr1408542bue.1182956251766;
        Wed, 27 Jun 2007 07:57:31 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 27 Jun 2007 07:57:31 -0700 (PDT)
Message-ID: <359a92830706270757m38038913w161e69d21d674e1@mail.gmail.com>
Date: Wed, 27 Jun 2007 10:57:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rewrite one phrase to another in search query
In-Reply-To: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23382_27717694.1182956251742"
References: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23382_27717694.1182956251742
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The synonym analyzer shown in Lucene In Action is a good place
to start. You need to change *all* occurrences of one form into
another, both an index and search time to get consistent results.

There are some "interesting" implications for this, though, but they
only really need to be considered if you need either phrase or
span queries. For instance, let's say you have the following doc
fragments:
doc1: "this is a tcp interaction that I want to deal with"
doc2: "this is a transmission control protocol interaction that I want to
deal with"

is "this" within 4 of "interaction" in both documents? Do you care?

Also, is the phrase "transmission control protocol" match for the
first document? Would the user be confused by matching a document
with "tcp" in it for that phrase?

For that matter, does searching on "transmission" match doc1?
Mostly, these are issues that may or may not be relevant depending
on the intent of the application...

Highlighting also becomes interesting.

Best
Erick


On 6/27/07, Aliaksandr Radzivanovich <aradzivanovich@gmail.com> wrote:
>
> What if I need to search for synonyms, but synonyms can be expanded to
> phrases of several words?
> For example, user enters query "tcp", then my application should also
> find documents containing phrase "Transmission Control Protocol". And
> conversely, user enters "Transmission Control Protocol", then my
> application should also find documents with word "tcp".
>
> It seems like Lucene does not support this scenario out of the box.
> Then where to look for the solution? What Lucene
> extensions/classes/interfaces should I investigate?
>
> Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23382_27717694.1182956251742--

From java-user-return-28871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 15:10:23 2007
Return-Path: <java-user-return-28871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92992 invoked from network); 27 Jun 2007 15:10:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 15:10:22 -0000
Received: (qmail 79107 invoked by uid 500); 27 Jun 2007 15:10:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79015 invoked by uid 500); 27 Jun 2007 15:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79004 invoked by uid 99); 27 Jun 2007 15:10:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 08:10:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 08:10:12 -0700
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	(authenticated bits=0)
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l5RF9o3d007155
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 11:09:51 -0400
Message-ID: <46827D14.4000003@syr.edu>
Date: Wed, 27 Jun 2007 11:07:00 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Rewrite one phrase to another in search query
References: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
In-Reply-To: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
X-Enigmail-Version: 0.94.3.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Aliaksandr,

Aliaksandr Radzivanovich wrote:
> What if I need to search for synonyms, but synonyms can be expanded to
> phrases of several words?
> For example, user enters query "tcp", then my application should also
> find documents containing phrase "Transmission Control Protocol". And
> conversely, user enters "Transmission Control Protocol", then my
> application should also find documents with word "tcp".

Section 4.6 of GospodnetiÄ & Hatcher's excellent _Lucene_in_Action_[1]
describes a SynonymAnalyzer class, intended for use at indexing time
(AFACT, however, their approach does not address multi-word synonyms).
Although a query-time analyzer is not directly discussed, they do say
(on p. 134):

   The awkwardly named PhrasePrefixQuery (see section 5.2)
   is one option to consider, perhaps created through an
   overridden QueryParser.getFieldQuery method; this is a
   possible option to explore if you wish to implement
   synonym injection at query time.

Steve

[1] http://lucenebook.com/

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 15:18:24 2007
Return-Path: <java-user-return-28872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15164 invoked from network); 27 Jun 2007 15:18:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 15:18:22 -0000
Received: (qmail 9460 invoked by uid 500); 27 Jun 2007 15:18:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9425 invoked by uid 500); 27 Jun 2007 15:18:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9411 invoked by uid 99); 27 Jun 2007 15:18:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 08:18:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.34] (HELO web26012.mail.ukl.yahoo.com) (217.146.177.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jun 2007 08:18:12 -0700
Received: (qmail 71468 invoked by uid 60001); 27 Jun 2007 15:17:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=DJyiJSUInBChJmSR+Qx19zTJK5k19poRixXdhI+2NXIWcJaN5XBQestGFnhXuummbVYKc3P4EaP7dWGlRKz9b5LGko4nOlqhNJ+GO5OLd/sFyvesn53dvhaHFKCb84g+pqzWo6FOHsYqmXPJEjFqVtyRHkRJEdZGp55oMy94VmA=;
X-YMail-OSG: 2B3B4nwVM1k4hSz1h7bKAkDBnvgNgtWe5kt_aqdQ6Js.WjQHT5..aAjujDXyJ.JNZOVHvqAETKH98XT79YVmh_mzt0l563589i775VwvOliS2_IB_PdlbUyPgy8-
Received: from [193.36.230.96] by web26012.mail.ukl.yahoo.com via HTTP; Wed, 27 Jun 2007 15:17:50 GMT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Wed, 27 Jun 2007 15:17:50 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Highlighter that works with phrase and span queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <699213.70878.qm@web26012.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>you would still have the major problem of which matches do you keep information for

Yes, doing this efficiently is the main issue. Some vague thoughts I had:
1) A special HighlightObserverQuery could wrap any query and use it's rewrite method to further wrap child component queries if necessary.
2) A ThreadLocal could be used to contain low-level match info generated by child query components e.g. position info of phrase/span queries (maybe generatable by a HighlightingIndexReader wrapper which observed TermPositions access)
3) For each call to scorer.next() on the top level query, the HighlightObserver class would check to see if the doc was a "keeper" (i.e. it's score places it in the required top "n" docs PriorityQueue) and if so, would retain a copy of all the transient match info currently held in the ThreadLocal for this doc and associate it with the new TopDoc object placed in the top docs PriorityQueue.

This approach tries hard not to require changes to existing Query/scorer classes by using wrappers/ThreadLocals and would only hold low-level match highlighting info for N documents where "N" is the maximum number of results to be returned. 
However there are likely to be many detailed complications with implementing this. I haven't pursued this train of thought further because the main killer is likely to be the performance overhead from all the unnecessary object creation when generating match info objects for documents that don't make the final selection anyway. That and the cost of synchronization around ThreadLocal accesses.

I think we're right to stick with the existing highlighting approach of searching for the top N docs then re-considering the basis of the match for just these few docs.

Cheers
Mark




----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, 27 June, 2007 12:59:21 PM
Subject: Re: Highlighter that works with phrase and span queries



markharw00d wrote:
>
> I was thinking along the lines of wrapping some core classes such as 
> IndexReader to somehow observe the query matching process and deduce 
> from that what to highlight (avoiding the need for MemoryIndex)  but 
> I'm not sure that is viable. It would be nice to get some more match 
> info out of the main query logic as it runs to aid highlighting rather 
> than reverse engineering the basis of a match after the event. 

I have been thinking about a way to pursue this, and it does not seem 
clear that there is a nice solution. Even if you could wrap Querys or 
other classes to observe matched tokens (non trivial since a Query is 
only concerned if it matches a doc, not which tokens it matches at which 
positions), you would still have the major problem of which matches do 
you keep information for. It does not seem practical to save all of the 
information to highlight *any* doc after a search and it also seems 
unlikely that you would know which docs you wanted to highlight before 
the search. The only compromise that I can see is maybe just storing 
info to highlight the first n docs, but even here, while the scoring is 
occurring you do not yet know the return order. Also, there is probably 
little value in knowing which Tokens were matches for highlighting 
unless you have stored offsets as well.

Unless someone has any suggestions on how to accomplish this, I think 
time would be better spent improving the existing Highlighter framework.

Perhaps Ronnie's Highlighter should be added as an alternate Highlighter 
that is less feature rich but much faster on large docs. It looks to me 
like there is unlikely to be a faster Highlighting method for simple 
non-position aware highlighting.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      ___________________________________________________________
Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
now.
http://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 15:32:13 2007
Return-Path: <java-user-return-28873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22244 invoked from network); 27 Jun 2007 15:32:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 15:32:11 -0000
Received: (qmail 53699 invoked by uid 500); 27 Jun 2007 15:32:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53654 invoked by uid 500); 27 Jun 2007 15:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53641 invoked by uid 99); 27 Jun 2007 15:32:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 08:32:07 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.22.69.97] (HELO host412.ipowerweb.com) (72.22.69.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jun 2007 08:32:03 -0700
Received: (qmail 3346 invoked by uid 3677); 27 Jun 2007 15:25:12 -0000
Received: from 127.0.0.1 by host412.ipowerweb.com (envelope-from <tanya@volvovski.com>, uid 1002) with qmail-scanner-1.25st 
 (clamdscan: 0.88/1244. spamassassin: 3.1.0. perlscan: 1.25st.  
 Clear:RC:1(127.0.0.1):SA:0(-2.8/5.0):. 
 Processed in 1.600911 secs); 27 Jun 2007 15:25:12 -0000
Received: from unknown (HELO host412.ipowerweb.com) (127.0.0.1)
  by host412.ipowerweb.com with SMTP; 27 Jun 2007 15:25:08 -0000
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"
MIME-Version: 1.0
From:  <tanya@volvovski.com>
To: java-user@lucene.apache.org
Subject: Re: Question about search 
Reply-To: tanya@volvovski.com
X-Origin: 131.225.82.182
Date: Wed, 27 Jun 2007 08:25:06 -0700
X-Uidl: 118295790632166832
X-Mailer: AtMail 4.03
X-Qmail-Scanner-Message-ID: <11829579109223254@host412.ipowerweb.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.8 required=5.0
Message-Id: <20070627153203.6195710FB006@herse.apache.org>

=0D
Hi,=0D
=0D
>Have you used Luke to examine your index and try queries? This will tell y=
ou a LOT about what's *really* happening.....=0D
>Google 'lucene' 'luke' and try it.=0D
=0D
=0D
I've tried Luke but still have no clue what is going on:=0D
I have the following entry:=0D
=0D
2007-06-26T10:56:20-05:00  globus-gatekeeper:  PID: 15986 -- Notice: 5: Aut=
horized as local uid: 12967=0D
=0D
=0D
While searching  in Luke with StandardAnalyzer I can find=0D
+uid +12967=0D
=0D
but "No Results"=0D
+PID +15986=0D
=0D
Any idea?=0D
Thanks,=0D
=0D
Tanya=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 15:45:19 2007
Return-Path: <java-user-return-28874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28677 invoked from network); 27 Jun 2007 15:45:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 15:45:17 -0000
Received: (qmail 88629 invoked by uid 500); 27 Jun 2007 15:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88590 invoked by uid 500); 27 Jun 2007 15:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88579 invoked by uid 99); 27 Jun 2007 15:45:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 08:45:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 08:45:07 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id l5RFijhO071638
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 17:44:45 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
Date: Wed, 27 Jun 2007 17:44:44 +0200
User-Agent: KMail/1.8.2
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com>
In-Reply-To: <699213.70878.qm@web26012.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706271744.45018.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 27 June 2007 17:17, mark harwood wrote:
> >>you would still have the major problem of which matches do you keep 
information for
> 
> Yes, doing this efficiently is the main issue. Some vague thoughts I had:
>...
> 3) For each call to scorer.next() on the top level query, the 
HighlightObserver class would check to see if the doc was a "keeper" (i.e. 
it's score places it in the required top "n" docs PriorityQueue) and if so, 
would retain a copy of all the transient match info currently held in the 
ThreadLocal for this doc and associate it with the new TopDoc object placed 
in the top docs PriorityQueue.

This can be done more efficiently by skipping the Spans themselves to
the next document for which the matches need to be kept. For each doc,
the Spans could then be copied by iterating until the next matching doc
in the search.
Even better would be to use a Filter in the search to limit the results to the 
matches that are immediately needed, but a Filter still requires a BitSet
over all indexed documents, and that is probably overkill for highlighting.
Iterating the Spans will be in doc number order, so some mapping back
to the scored order would still be needed.

I have not looked at any highlighting code yet. Is there already an extension
of PhraseQuery that has getSpans() ?

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 15:55:28 2007
Return-Path: <java-user-return-28875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34309 invoked from network); 27 Jun 2007 15:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 15:55:25 -0000
Received: (qmail 13539 invoked by uid 500); 27 Jun 2007 15:55:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13497 invoked by uid 500); 27 Jun 2007 15:55:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13485 invoked by uid 99); 27 Jun 2007 15:55:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 08:55:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 08:55:16 -0700
Received: by ug-out-1314.google.com with SMTP id c2so137061ugf
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 08:54:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Zqej0iV2+JrH7Ox08dbYELWISlbjgMa7DREQc5yeSnsG87A0xAvVNKWwuGKKe5ZiKcqBHgG0ooKVAQZYKTz/1JwxCZ4Ag0un8NUSa17C6OrTlrKT0gJCbWhrIKFE8nsqacdT3l6UxOob0dRQRBKOnMMYoHYr7oujERXDrkbga2U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nF0Ciq+RuNNZyuMFcyJb2xGKmn1Cqf+kJ3UykBrAD8cxgzE4szJLZNWI5j25FtQxT+h1bcEbxlKZhTMrZOx9iQs8H0yE4QqBM49VhnO/1mzrgaItc5OuZnkLAup2OJsd9ixq39vLX4edmnVkNXuFVpsZSyf+5HKbwRnSJcCVKB0=
Received: by 10.82.162.14 with SMTP id k14mr1533107bue.1182959694843;
        Wed, 27 Jun 2007 08:54:54 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 27 Jun 2007 08:54:54 -0700 (PDT)
Message-ID: <359a92830706270854r6b53b14cx65483466fc07321b@mail.gmail.com>
Date: Wed, 27 Jun 2007 11:54:54 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, tanya@volvovski.com
Subject: Re: Question about search
In-Reply-To: <20070627153203.6195710FB006@herse.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24010_11651230.1182959694826"
References: <20070627153203.6195710FB006@herse.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24010_11651230.1182959694826
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Please take the time, before asking others "what's going on" to at
least format your mail so we can tell what's what. For instance,
what's a field and what's a value in what you sent? I sure can't
tell because there are so many colons. Remember that you're
asking people to contribute time to solve *your* problem so it
would be a good idea to do us the courtesy of taking some time
to make it easier rather than pasting what looks like a log
file entry and expecting us to "just know" what it means.

I can say that your Luke entries are incorrect. Assuming what you're
trying to find is value 15986 in a field PID, the correct form would be
+PID:15986. Which indicates you haven't read the lucene query
syntax documentation very carefully. See
http://lucene.apache.org/java/docs/queryparsersyntax.html


+PID +15986 will look for "PID" and "15986" in whatever the
default field is, which you can identify by looking at the Luke
search page carefully.

None of which may be relevant if there is only one field
called "globbus-gatekeeper".

And what analyzer did you use to index the data? And what
was the data you indexed?

Best
Erick

On 6/27/07, tanya@volvovski.com <tanya@volvovski.com> wrote:
>
>
> Hi,
>
> >Have you used Luke to examine your index and try queries? This will tell
> you a LOT about what's *really* happening.....
> >Google 'lucene' 'luke' and try it.
>
>
> I've tried Luke but still have no clue what is going on:
> I have the following entry:
>
> 2007-06-26T10:56:20-05:00  globus-gatekeeper:  PID: 15986 -- Notice: 5:
> Authorized as local uid: 12967
>
>
> While searching  in Luke with StandardAnalyzer I can find
> +uid +12967
>
> but "No Results"
> +PID +15986
>
> Any idea?
> Thanks,
>
> Tanya
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24010_11651230.1182959694826--

From java-user-return-28876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 18:47:47 2007
Return-Path: <java-user-return-28876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11584 invoked from network); 27 Jun 2007 18:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 18:47:46 -0000
Received: (qmail 7395 invoked by uid 500); 27 Jun 2007 18:47:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7355 invoked by uid 500); 27 Jun 2007 18:47:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7322 invoked by uid 99); 27 Jun 2007 18:47:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 11:47:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 11:47:35 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 513265C441
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 11:47:09 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <46825D3C.3090204@lingway.com>
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com> <46825D3C.3090204@lingway.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: several existential issues about Lucene's filesystem
Date: Wed, 27 Jun 2007 14:47:07 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 27, 2007, at 8:51 AM, Samuel LEMOINE wrote:

> Hi everyone !
>
> I'm working on bibliographical researches on Lucene as an intern in  
> Lingway (which uses Lucene in its main product), and I'm currently  
> studying Lucene's file system.
> There are several things I don't catch in Lucene's file system, and  
> I thought here was the right place to ask about those questions (I  
> hope it's the case actually).
> The main resource I used is this document:
> http://lucene.apache.org/java/2_1_0/fileformats.html
>
> -in the .tvf file (Term Vector file) in Lucene 2.2.0, position &  
> offsets can be possibly given in the term vector... I don't  
> understand how it works, since there's only one .tvf per segment  
> (according to what I've understood), and in the architecture  
> described, there is no information given about the documents in  
> which appears each term stored in the TermVector (the informations  
> document-related are in the .tvd file I assume). The position/ 
> offset informations seems to be simply a list of addresses, but how  
> can be known the document it refers to? Or is there one .tvf file  
> per document?

Yes, offsets and positions can be associated with a term vector.   
When you ask the IndexReader for a term vector, you give it the  
document number and, optionally, a field, which it uses to go look up  
in the tvd file the document location in the tvd file.  The tvd file  
then looks up the specific information in the tvf file.  Have a look  
at the TermVectorsReader for details on implementation.
>
> -in the .prx file (prositions file), payloads are mentionned and  
> allow to attach meta-data... what's the purpose of such data? is  
> there a precise use, or is it only data for the sole user's use?

Payloads have a variety of uses.  Search the java-dev archive for the  
word Payload and you will find lots of discussion.  I also have a few  
slides on it in my ApacheCon Europe presentation at http://cnlp.org/ 
presentations/slides/AdvancedLuceneEU.pdf  See also http:// 
wiki.apache.org/jakarta-lucene/Payload_Planning

Essentially, it can be used to store information on a term by term  
level, things like font weight, or XML enclosing tag, or Part of  
Speech.  The sky really is the limit (that and your disk space) on  
what can be stored in a payload.


>
> -many adresses in many files are given under Delta shapes...  
> Doesn't it slacken the search among the index ? I mean, when a  
> keyword is looked for, in order to find its position in the right  
> file, Lucene must find the adress of the previous term and add the  
> "delta" address... but the previous term adress is also given by a  
> delta address, and so on, so that as far as I understand it, the  
> whole file must be climbed back, recursively finding the address of  
> each term... I assume I've misunderstood something, but don't know  
> what.

Not quite sure what you are asking, but I will take a stab at it.   
Have a look at the section on the Term Dictionary, specifically the  
relationship between the tis file and the tii file.  The storage  
mechanism makes it very easy to find where the keyword is in the file  
so that the rest of the information can be easily looked up.

HTH,
Grant


--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 19:34:04 2007
Return-Path: <java-user-return-28877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39143 invoked from network); 27 Jun 2007 19:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 19:34:03 -0000
Received: (qmail 16887 invoked by uid 500); 27 Jun 2007 19:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16853 invoked by uid 500); 27 Jun 2007 19:33:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16841 invoked by uid 99); 27 Jun 2007 19:33:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 12:33:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 12:33:54 -0700
Received: by an-out-0708.google.com with SMTP id c5so63940anc
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 12:33:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nCsmlErL6gCHmxaFRwdrVTFu4mkxUrZjJVoRdIiZ4UGdH6SHbtzNExEWNl2BtQ3Yhbo3nFVJ7oJPN1nPm9LEu/As90boOIBnbaE6rix7XyR+/FoS9Q3IblO5tk67EnDpEXVmBaFA9WFRFzPJTbbHBizxbVYX2osOSz3vCvsyZCE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SQc2Yir09Rkywo+sAOUYdmMD1Rgh3BFqCAUQbz/CzRa7qa+3txEgSw/AzbRSI4YxH1cCjBceYxXA5oxPfJEse2kSfnr3A20kmqhHaYFOni502YQMQEGBUx6adbJDrFJAJxJ6dVCYcqmlzL/A22bGIuCm86xO1mlpIQvEQZinz4g=
Received: by 10.100.136.8 with SMTP id j8mr654142and.1182972814131;
        Wed, 27 Jun 2007 12:33:34 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id b18sm9790554ana.2007.06.27.12.33.32
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Jun 2007 12:33:33 -0700 (PDT)
Message-ID: <4682BB5D.5030900@gmail.com>
Date: Wed, 27 Jun 2007 15:32:45 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com> <200706271744.45018.paul.elschot@xs4all.nl>
In-Reply-To: <200706271744.45018.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> I have not looked at any highlighting code yet. Is there already an extension
> of PhraseQuery that has getSpans() ?
>   
Currently I am using this code originally by M. Harwood:
            Term[] phraseQueryTerms = ((PhraseQuery) query).getTerms();
            int i;
            SpanQuery[] clauses = new SpanQuery[phraseQueryTerms.length];

            for (i = 0; i < phraseQueryTerms.length; i++) {
                clauses[i] = new SpanTermQuery(phraseQueryTerms[i]);
            }

            SpanNearQuery sp = new SpanNearQuery(clauses,
                    ((PhraseQuery) query).getSlop(), false);
            sp.setBoost(query.getBoost());

I don't think it is perfect logic for PhraseQuery's edit distance, but 
it approximates extremely well in most cases.

I wonder if this approach to Highlighting would be worth it in the end. 
Certainly, it would seem to require that you store offsets or you would 
have to re-tokenize anyway.

Some more interesting "stuff" on the current Highlighter methods:

We can gain a lot of speed on the implementation of the current 
Highlighter if we grab from the source text in bigger chunks. Ronnie's 
Highlighter appears to be faster than the original due to two things: he 
doesn't have to re-tokenize text and he rebuilds the original document 
in large pieces. Depending on how you want to look at it, he loses most 
of the speed gained from just looking at the Query tokens instead of all 
tokens to pulling the Term offset information (which appears pretty slow).

If you use a SimpleAnalyzer on docs around 1800 tokens long, you can 
actually match the speed of Ronnies highlighter with the current 
highlighter if you just rebuild the highlighted documents in bigger 
pieces i.e. instead of going through each token and adding the source 
text that it covers, build up the offset information until you get 
another hit and then pull from the source text into the highlighted text 
in one big piece rather than a tokens worth at a time. Of course this is 
not compatible with the way the Fragmenter currently works. If you use 
the StandardAnalyzer instead of SimpleAnalyzer, Ronnie's highlighter 
wins because it takes so darn long to re-analyze.

It is also interesting to note that it is very difficult to see in a 
gain in using TokenSources to build a TokenStream. Using the 
StandardAnalyzer, it takes docs that are 1800 tokens just to be as fast 
as re-analyzing. Notice I didn't say fast, but "as fast". Anything 
smaller, or if you're using a simpler analyzer, and TokenSources is 
certainly not worth it. It just takes too long to pull TermVector info.

- Mark



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 20:57:54 2007
Return-Path: <java-user-return-28878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75074 invoked from network); 27 Jun 2007 20:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 20:57:52 -0000
Received: (qmail 99006 invoked by uid 500); 27 Jun 2007 20:57:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98225 invoked by uid 500); 27 Jun 2007 20:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98214 invoked by uid 99); 27 Jun 2007 20:57:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 13:57:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 13:57:43 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 85CAB5B76E; Wed, 27 Jun 2007 13:57:23 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 677497F403
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 13:57:23 -0700 (PDT)
Date: Wed, 27 Jun 2007 13:57:23 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Rewrite one phrase to another in search query
In-Reply-To: <46827D14.4000003@syr.edu>
Message-ID: <Pine.LNX.4.58.0706271352490.22469@hal.rescomp.berkeley.edu>
References: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
 <46827D14.4000003@syr.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: (AFACT, however, their approach does not address multi-word synonyms).
: Although a query-time analyzer is not directly discussed, they do say

Solr's has a SynonymFilter that does handle multi-word synonyms, and it
can handle query-time synonyms, but there are some caveats to both of
those use cases (mainly that you can have one or hte other but not both)
that you need to consider carefully.  they are well documetned in teh SOlr
wiki...

http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#SynonymFilter




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 21:35:08 2007
Return-Path: <java-user-return-28879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91616 invoked from network); 27 Jun 2007 21:35:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 21:35:06 -0000
Received: (qmail 429 invoked by uid 500); 27 Jun 2007 21:35:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 385 invoked by uid 500); 27 Jun 2007 21:35:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 368 invoked by uid 99); 27 Jun 2007 21:35:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 14:35:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 14:34:58 -0700
Received: from [172.30.250.105] (helo=[172.30.250.105])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1I3f9p-00030C-LZ
	for java-user@lucene.apache.org; Wed, 27 Jun 2007 14:34:37 -0700
Message-ID: <4682DAA9.3080809@metaweb.com>
Date: Wed, 27 Jun 2007 14:46:17 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: indexing anchor text
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm trying to index some fairly standard html documents. For each of the 
documents, there is a unique <title> (which I believe is generally of 
high quality), some <body> content, and some anchor text from the 
linking documents (which is of good but more variable quality).

I'm indexing them in "title" "anchor" and "body"

"title" and "body" are obvious (you just give the text to the 
StandardAnalyzer) but I don't really know how to handle the anchor text. 
Suppose the page with the title "United States" I know has the anchor 
text "USA" 500 times, "United States" 200 times, "United States of 
America" 100 times and "Unite Stats" once.

How do I index this?

1) index a single "anchor" field containing "USA United States United 
States of America Unite Stats",
2) create the field  "USA USA ...500x... USA  United States ...200x... 
United States ... " and index that as "anchor"
3) create 801 "anchor" fields (500 containg USA etc)
4) create 4 "anchor" fields and call setBoost() on each with some 
constants. (how do I calculate them?)

I suspect these give me different results in some way, but I'm having 
trouble understanding what the difference between 2) and 3) is and how 
to make 4) work like 3). I also worry that 2) and 3) are much slower 
than they need to be.

Any help is appreciated,

Tim




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 21:47:56 2007
Return-Path: <java-user-return-28880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 365 invoked from network); 27 Jun 2007 21:47:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 21:47:56 -0000
Received: (qmail 33470 invoked by uid 500); 27 Jun 2007 21:47:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33408 invoked by uid 500); 27 Jun 2007 21:47:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33397 invoked by uid 99); 27 Jun 2007 21:47:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 14:47:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of les@affinitycircles.com designates 207.7.158.80 as permitted sender)
Received: from [207.7.158.80] (HELO boom.affinityengines.com) (207.7.158.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 14:47:45 -0700
Received: from [10.200.1.71] (216-31-250-110.static-ip.telepacific.net [216.31.250.110])
	by boom.affinityengines.com (Postfix) with ESMTP id 625541DB139
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 14:47:24 -0700 (PDT)
Message-ID: <4682DAE8.5050207@affinitycircles.com>
Date: Wed, 27 Jun 2007 14:47:20 -0700
From: Les Fletcher <les@affinitycircles.com>
User-Agent: Icedove 1.5.0.10 (X11/20070329)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: breaking a single index in to two indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am in need of some help with the following problem.  I have a single 
index that I am currently searching against, but it has the property 
that a small set of the documents get updated frequently while a large 
majority of them are very static and are rarely updated.  Documents can 
move from being a static type document to one that begins to be updated 
on a frequent basis.  I'd like to break this up into two separate 
indexes with one large one being the index of the static documents and a 
smaller one of the constantly updated documents. 

I am looking for some help on optimal update policies for each index and 
managing of migration of a document from the static index to the active 
index.  Hopefully this should allow me to make much better use of cached 
filters.

I am sure that someone else has run into a very similar problem.  I did 
some poking around, but was obviously not searching for the right 
thing.  Any suggestions or insight into dealing with this would be 
greatly appreciated.

Thanks,
Les

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 21:55:25 2007
Return-Path: <java-user-return-28881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5188 invoked from network); 27 Jun 2007 21:55:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 21:55:22 -0000
Received: (qmail 52809 invoked by uid 500); 27 Jun 2007 21:55:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52768 invoked by uid 500); 27 Jun 2007 21:55:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52757 invoked by uid 99); 27 Jun 2007 21:55:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 14:55:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 14:55:14 -0700
Received: by nf-out-0910.google.com with SMTP id d3so10425nfc
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 14:54:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eyZ+l8PRkkEh8h9R5LACber2NliEklDvOnOxZn0tlYhnh7RYke3sAJ4ocJCb67MkG/8FouyPl2dBCdRd55pRS6JIo2dh4k1zgl478rVzNb/zqZQNiN9tCPN65/nhya3RGydlkTYx2OZZddervDPB3cRLzbNJrJpPJibv1Am+4Z0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZVEpanXfmz0ohsGYb/9648H+noBhdjbdoU/7sx74vnAOsAoUooMXxXhUg4g3Yc7TxbRcKsxcpm9gG/ThtuVVclYU7XOFD4eWUo6FQ23w8sfU+L+chazjoWCf2u++fHdODL2adg2nyn+wqlzKaj0+covTqMuOvgWypWKe2v28jJc=
Received: by 10.82.136.4 with SMTP id j4mr2153836bud.1182981293106;
        Wed, 27 Jun 2007 14:54:53 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 27 Jun 2007 14:54:53 -0700 (PDT)
Message-ID: <359a92830706271454jd4c6ca3g1d1082079d71944e@mail.gmail.com>
Date: Wed, 27 Jun 2007 17:54:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing anchor text
In-Reply-To: <4682DAA9.3080809@metaweb.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27774_1058095.1182981293085"
References: <4682DAA9.3080809@metaweb.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27774_1058095.1182981293085
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, to quote the great wise one, "that depends". The reason I'm
being flippant here is because what it depends on is what you want
the result to be.

I'm asking for a use-case scenario here. Something like
"I want the docs to score equally no matter how many
links with 'United States' exist in them". Or
"A document with 100 links mentioning 'United States' should
score way higher than a document with only one link mentioning
'United States'".

Best
Erick

On 6/27/07, Tim Sturge <tsturge@metaweb.com> wrote:
>
> Hi,
>
> I'm trying to index some fairly standard html documents. For each of the
> documents, there is a unique <title> (which I believe is generally of
> high quality), some <body> content, and some anchor text from the
> linking documents (which is of good but more variable quality).
>
> I'm indexing them in "title" "anchor" and "body"
>
> "title" and "body" are obvious (you just give the text to the
> StandardAnalyzer) but I don't really know how to handle the anchor text.
> Suppose the page with the title "United States" I know has the anchor
> text "USA" 500 times, "United States" 200 times, "United States of
> America" 100 times and "Unite Stats" once.
>
> How do I index this?
>
> 1) index a single "anchor" field containing "USA United States United
> States of America Unite Stats",
> 2) create the field  "USA USA ...500x... USA  United States ...200x...
> United States ... " and index that as "anchor"
> 3) create 801 "anchor" fields (500 containg USA etc)
> 4) create 4 "anchor" fields and call setBoost() on each with some
> constants. (how do I calculate them?)
>
> I suspect these give me different results in some way, but I'm having
> trouble understanding what the difference between 2) and 3) is and how
> to make 4) work like 3). I also worry that 2) and 3) are much slower
> than they need to be.
>
> Any help is appreciated,
>
> Tim
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27774_1058095.1182981293085--

From java-user-return-28882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 22:04:58 2007
Return-Path: <java-user-return-28882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10229 invoked from network); 27 Jun 2007 22:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 22:04:57 -0000
Received: (qmail 70479 invoked by uid 500); 27 Jun 2007 22:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70442 invoked by uid 500); 27 Jun 2007 22:04:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70430 invoked by uid 99); 27 Jun 2007 22:04:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 15:04:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 15:04:48 -0700
Received: by wx-out-0506.google.com with SMTP id i28so242644wxd
        for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 15:04:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=N1OA53976gbwmXVFrpfL7d+e34W1T3t3GObv5jI3C8YGhbZtQyK99f4MJSW1bPSmosoOsqmOEmKyX52rr/fIbSNwLFbBUean52LCZgcM6DZivUKNSyhKtWwZlwaa4YXD0vBd8CT8lx80jIFxy1GVvCj+AjKFCXiIsVSo+GIqc4w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=P7x6dXL026kuuC9rnQ548f4TbxK9OC82H5vZklt81xv2U0hzgv4Z4oHqy3xp/r+EXKm05tcZp16H9havJNSfOvkypI5TEnpjTuK76svZWnoxPoT0cqN0vgke23/u8HqmyTS+gse3VfTqnHITGpzfcLN59uEF3s1QQZ10wmcdynQ=
Received: by 10.70.131.19 with SMTP id e19mr1566045wxd.1182981867762;
        Wed, 27 Jun 2007 15:04:27 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id o29sm3433584elf.2007.06.27.15.04.26
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Jun 2007 15:04:27 -0700 (PDT)
Message-ID: <4682DEB9.1060103@gmail.com>
Date: Wed, 27 Jun 2007 18:03:37 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
In-Reply-To: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You cannot do it because TermPositions is read in the 
PhraseWeight.scorer(IndexReader) method (or MultiPhraseWeight) and 
loaded into an array which is passed to PhraseScorer. Extend the Weight 
as well and pass the payload to the Scorer as well is a possibility.

- Mark

Peter Keegan wrote:
> I'm looking at the new Payload api and would like to use it in the 
> following
> manner. Meta-data is indexed as a special phrase (all terms at same
> position) and a payload is stored with the first term of each phrase. I
> would like to create a custom query class that extends PhraseQuery and 
> uses
> its PhraseScorer to find matching documents. The custom query class then
> reads the payload from the first term of the matching query and uses 
> it to
> produce a new score. However, I don't see how to get the payload from the
> PhraseScorer's TermPositions. Is this possible?
>
>
> Peter
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 22:42:08 2007
Return-Path: <java-user-return-28883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22041 invoked from network); 27 Jun 2007 22:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 22:42:07 -0000
Received: (qmail 17159 invoked by uid 500); 27 Jun 2007 22:42:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16621 invoked by uid 500); 27 Jun 2007 22:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16610 invoked by uid 99); 27 Jun 2007 22:42:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 15:42:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 15:41:59 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 74F44FFCF5
	for <java-user@lucene.apache.org>; Wed, 27 Jun 2007 15:41:38 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1C6823A4-BA05-4C20-8B74-3BE527E6CD97@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Payloads and PhraseQuery
Date: Wed, 27 Jun 2007 18:41:36 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Could you get what you need combining the BoostingTermQuery with a  
SpanNearQuery to produce a score?  Just guessing here..

At some point, I would like to see more Query classes around the  
payload stuff, so please submit patches/feedback if and when you get  
a solution

On Jun 27, 2007, at 10:45 AM, Peter Keegan wrote:

> I'm looking at the new Payload api and would like to use it in the  
> following
> manner. Meta-data is indexed as a special phrase (all terms at same
> position) and a payload is stored with the first term of each  
> phrase. I
> would like to create a custom query class that extends PhraseQuery  
> and uses
> its PhraseScorer to find matching documents. The custom query class  
> then
> reads the payload from the first term of the matching query and  
> uses it to
> produce a new score. However, I don't see how to get the payload  
> from the
> PhraseScorer's TermPositions. Is this possible?
>
>
> Peter

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 27 22:49:51 2007
Return-Path: <java-user-return-28884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24455 invoked from network); 27 Jun 2007 22:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2007 22:49:50 -0000
Received: (qmail 33075 invoked by uid 500); 27 Jun 2007 22:49:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33036 invoked by uid 500); 27 Jun 2007 22:49:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33024 invoked by uid 99); 27 Jun 2007 22:49:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 15:49:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jun 2007 15:49:39 -0700
Received: from [172.30.250.108] (helo=[172.30.250.108])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1I3gK5-0006yT-QK
	for java-user@lucene.apache.org; Wed, 27 Jun 2007 15:49:17 -0700
Message-ID: <4682EC16.60105@metaweb.com>
Date: Wed, 27 Jun 2007 16:00:38 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: indexing anchor text
References: <4682DAA9.3080809@metaweb.com> <359a92830706271454jd4c6ca3g1d1082079d71944e@mail.gmail.com>
In-Reply-To: <359a92830706271454jd4c6ca3g1d1082079d71944e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Case B -- I believe the more inbound anchor text, the better the match. 
Right now I'm also boosting the documents by calling

setBoost( log( numInboundLinks+1 ) + 1 )

which seems to be quite effective; is there some sort of guidebook for this?

I'm also interested in figuring out how to rank the boost for title vs 
body vs anchor; this seems to be 90% black magic to me.

Thanks,

Tim

Erick Erickson wrote:
> Well, to quote the great wise one, "that depends". The reason I'm
> being flippant here is because what it depends on is what you want
> the result to be.
>
> I'm asking for a use-case scenario here. Something like
> "I want the docs to score equally no matter how many
> links with 'United States' exist in them". Or
> "A document with 100 links mentioning 'United States' should
> score way higher than a document with only one link mentioning
> 'United States'".
>
> Best
> Erick
>
> On 6/27/07, Tim Sturge <tsturge@metaweb.com> wrote:
>>
>> Hi,
>>
>> I'm trying to index some fairly standard html documents. For each of the
>> documents, there is a unique <title> (which I believe is generally of
>> high quality), some <body> content, and some anchor text from the
>> linking documents (which is of good but more variable quality).
>>
>> I'm indexing them in "title" "anchor" and "body"
>>
>> "title" and "body" are obvious (you just give the text to the
>> StandardAnalyzer) but I don't really know how to handle the anchor text.
>> Suppose the page with the title "United States" I know has the anchor
>> text "USA" 500 times, "United States" 200 times, "United States of
>> America" 100 times and "Unite Stats" once.
>>
>> How do I index this?
>>
>> 1) index a single "anchor" field containing "USA United States United
>> States of America Unite Stats",
>> 2) create the field  "USA USA ...500x... USA  United States ...200x...
>> United States ... " and index that as "anchor"
>> 3) create 801 "anchor" fields (500 containg USA etc)
>> 4) create 4 "anchor" fields and call setBoost() on each with some
>> constants. (how do I calculate them?)
>>
>> I suspect these give me different results in some way, but I'm having
>> trouble understanding what the difference between 2) and 3) is and how
>> to make 4) work like 3). I also worry that 2) and 3) are much slower
>> than they need to be.
>>
>> Any help is appreciated,
>>
>> Tim
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 09:30:26 2007
Return-Path: <java-user-return-28885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12800 invoked from network); 28 Jun 2007 09:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 09:30:25 -0000
Received: (qmail 77583 invoked by uid 500); 28 Jun 2007 09:30:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77369 invoked by uid 500); 28 Jun 2007 09:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77354 invoked by uid 99); 28 Jun 2007 09:30:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 02:30:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [84.96.25.182] (HELO mail.e-manation.com) (84.96.25.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 02:30:14 -0700
Received: by mail.e-manation.com (Postfix, from userid 1007)
	id 1210AA0006C; Thu, 28 Jun 2007 11:26:26 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb (2006-10-05) on 
	actarus.e-manation.com
X-Spam-Level: 
Received: from [10.10.1.131] (unknown [10.10.1.131])
	by mail.e-manation.com (Postfix) with ESMTP id 3C2DFA0006C
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 11:26:25 +0200 (CEST)
Message-ID: <46837F8E.7070703@lingway.com>
Date: Thu, 28 Jun 2007 11:29:50 +0200
From: Samuel LEMOINE <samuel.lemoine@lingway.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: several existential issues about Lucene's filesystem
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com> <46825D3C.3090204@lingway.com> <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org>
In-Reply-To: <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.7-deb

Grant Ingersoll a écrit :
>
> On Jun 27, 2007, at 8:51 AM, Samuel LEMOINE wrote:
>
>> Hi everyone !
>>
>> I'm working on bibliographical researches on Lucene as an intern in 
>> Lingway (which uses Lucene in its main product), and I'm currently 
>> studying Lucene's file system.
>> There are several things I don't catch in Lucene's file system, and I 
>> thought here was the right place to ask about those questions (I hope 
>> it's the case actually).
>> The main resource I used is this document:
>> http://lucene.apache.org/java/2_1_0/fileformats.html
>>
>> -in the .tvf file (Term Vector file) in Lucene 2.2.0, position & 
>> offsets can be possibly given in the term vector... I don't 
>> understand how it works, since there's only one .tvf per segment 
>> (according to what I've understood), and in the architecture 
>> described, there is no information given about the documents in which 
>> appears each term stored in the TermVector (the informations 
>> document-related are in the .tvd file I assume). The position/offset 
>> informations seems to be simply a list of addresses, but how can be 
>> known the document it refers to? Or is there one .tvf file per document?
>
> Yes, offsets and positions can be associated with a term vector.  When 
> you ask the IndexReader for a term vector, you give it the document 
> number and, optionally, a field, which it uses to go look up in the 
> tvd file the document location in the tvd file.  The tvd file then 
> looks up the specific information in the tvf file.  Have a look at the 
> TermVectorsReader for details on implementation.
>>
>> -in the .prx file (prositions file), payloads are mentionned and 
>> allow to attach meta-data... what's the purpose of such data? is 
>> there a precise use, or is it only data for the sole user's use?
>
> Payloads have a variety of uses.  Search the java-dev archive for the 
> word Payload and you will find lots of discussion.  I also have a few 
> slides on it in my ApacheCon Europe presentation at 
> http://cnlp.org/presentations/slides/AdvancedLuceneEU.pdf  See also 
> http://wiki.apache.org/jakarta-lucene/Payload_Planning
>
> Essentially, it can be used to store information on a term by term 
> level, things like font weight, or XML enclosing tag, or Part of 
> Speech.  The sky really is the limit (that and your disk space) on 
> what can be stored in a payload.
>
>
>>
>> -many adresses in many files are given under Delta shapes... Doesn't 
>> it slacken the search among the index ? I mean, when a keyword is 
>> looked for, in order to find its position in the right file, Lucene 
>> must find the adress of the previous term and add the "delta" 
>> address... but the previous term adress is also given by a delta 
>> address, and so on, so that as far as I understand it, the whole file 
>> must be climbed back, recursively finding the address of each term... 
>> I assume I've misunderstood something, but don't know what.
>
> Not quite sure what you are asking, but I will take a stab at it.  
> Have a look at the section on the Term Dictionary, specifically the 
> relationship between the tis file and the tii file.  The storage 
> mechanism makes it very easy to find where the keyword is in the file 
> so that the rest of the information can be easily looked up.
>
> HTH,
> Grant
>
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Thanks for the resources about payloads, I'll have a look over it.
About the positions/offsets in .tvf, please tell me if I've well 
understood:
The .tvd provides the needed informations concerning the occurrences of 
each term in documents, and thanks to these informations, Lucene is able 
to determinate how many documents contain the term "foo".
Thus the position/offset data contained in .tvf can just consist in a 
list of positions in the different documents containing "foo" 
concatenated ? I mean, if foo appears in positions 1,30,65 in doc 0, and 
positions 27 & 52 in doc 2, the .tvf will give "1 30 65 27 52" and 
Lucene rests on .tvd to determine which positions belongs to which 
document? (or rather "1 29 35 27 25" as it is delta-positions)

Hoping my interrogations will help other people ^^

Thanks,

Samuel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 11:30:32 2007
Return-Path: <java-user-return-28886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66272 invoked from network); 28 Jun 2007 11:30:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 11:30:32 -0000
Received: (qmail 1449 invoked by uid 500); 28 Jun 2007 11:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 427 invoked by uid 500); 28 Jun 2007 11:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 416 invoked by uid 99); 28 Jun 2007 11:30:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 04:30:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 04:30:21 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 9C25F163503
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 04:30:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <46837F8E.7070703@lingway.com>
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com> <46825D3C.3090204@lingway.com> <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org> <46837F8E.7070703@lingway.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FD819A62-4383-4633-BB14-7DB556A1A2D5@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: several existential issues about Lucene's filesystem
Date: Thu, 28 Jun 2007 07:29:42 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 28, 2007, at 5:29 AM, Samuel LEMOINE wrote:
> Thanks for the resources about payloads, I'll have a look over it.
> About the positions/offsets in .tvf, please tell me if I've well  
> understood:
> The .tvd provides the needed informations concerning the  
> occurrences of each term in documents, and thanks to these  
> informations, Lucene is able to determinate how many documents  
> contain the term "foo".

Not exactly, Term Vectors only could tell you how many times foo  
occurs in a particular, known document.  If you are looking for  
general information on a Term and the documents it occurs in (i.e.  
the inverted index) have a look at the TermEnum and TermDocs.

> Thus the position/offset data contained in .tvf can just consist in  
> a list of positions in the different documents containing "foo"  
> concatenated ? I mean, if foo appears in positions 1,30,65 in doc  
> 0, and positions 27 & 52 in doc 2, the .tvf will give "1 30 65 27  
> 52" and Lucene rests on .tvd to determine which positions belongs  
> to which document? (or rather "1 29 35 27 25" as it is delta- 
> positions)

No, you only could find out about doc 0 or doc 2 separately using  
TermVectors.

HTH,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 12:13:31 2007
Return-Path: <java-user-return-28887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84365 invoked from network); 28 Jun 2007 12:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 12:13:30 -0000
Received: (qmail 4068 invoked by uid 500); 28 Jun 2007 12:13:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4021 invoked by uid 500); 28 Jun 2007 12:13:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4010 invoked by uid 99); 28 Jun 2007 12:13:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 05:13:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [193.50.230.120] (HELO io.utt.fr) (193.50.230.120)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 05:13:21 -0700
Received: from uran01.utt.fr (uran01.utt.fr [10.11.100.100])
	by io.utt.fr (8.13.8/8.13.8) with ESMTP id l5SCCxYS006886
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 14:13:00 +0200
	(envelope-from spilirit@yahoo.fr)
Received: from [127.0.0.1] (unknown [157.159.140.134])
	by uran01.utt.fr (Postfix) with ESMTP id 7A77C58188
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 14:12:55 +0200 (CEST)
Message-ID: <4683A698.7080809@yahoo.fr>
Date: Thu, 28 Jun 2007 14:16:24 +0200
From: spilirit <spilirit@yahoo.fr>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: LUCENE on Eclipse
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com> <46825D3C.3090204@lingway.com> <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org> <46837F8E.7070703@lingway.com> <FD819A62-4383-4633-BB14-7DB556A1A2D5@apache.org>
In-Reply-To: <FD819A62-4383-4633-BB14-7DB556A1A2D5@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hello;
i would like if you could help me finding some documentation about how 
to import lucene source into eclipse IDE. I'm a new user for this API, 
and i would like to learn how to use it as i seams powerful...
Thank you for your answers.

 I would be very grateful if somebody have any tutorial; and i propose 
to work on it's translation in French language.

sincerely


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 13:06:49 2007
Return-Path: <java-user-return-28888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1804 invoked from network); 28 Jun 2007 13:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 13:06:47 -0000
Received: (qmail 27318 invoked by uid 500); 28 Jun 2007 13:06:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27271 invoked by uid 500); 28 Jun 2007 13:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27256 invoked by uid 99); 28 Jun 2007 13:06:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 06:06:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [84.96.25.182] (HELO mail.e-manation.com) (84.96.25.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 06:06:38 -0700
Received: by mail.e-manation.com (Postfix, from userid 1007)
	id DF5BFA0006C; Thu, 28 Jun 2007 15:02:47 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb (2006-10-05) on 
	actarus.e-manation.com
X-Spam-Level: 
Received: from [10.10.1.131] (unknown [10.10.1.131])
	by mail.e-manation.com (Postfix) with ESMTP id 624A1A0006C
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 15:02:47 +0200 (CEST)
Message-ID: <4683B244.6080509@lingway.com>
Date: Thu, 28 Jun 2007 15:06:12 +0200
From: Samuel LEMOINE <samuel.lemoine@lingway.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: several existential issues about Lucene's filesystem
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com> <46825D3C.3090204@lingway.com> <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org> <46837F8E.7070703@lingway.com> <FD819A62-4383-4633-BB14-7DB556A1A2D5@apache.org>
In-Reply-To: <FD819A62-4383-4633-BB14-7DB556A1A2D5@apache.org>
Content-Type: multipart/alternative;
 boundary="------------010002000206000402050707"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE 
	autolearn=ham version=3.1.7-deb

--------------010002000206000402050707
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Grant Ingersoll a écrit :
>
> On Jun 28, 2007, at 5:29 AM, Samuel LEMOINE wrote:
>> Thanks for the resources about payloads, I'll have a look over it.
>> About the positions/offsets in .tvf, please tell me if I've well 
>> understood:
>> The .tvd provides the needed informations concerning the occurrences 
>> of each term in documents, and thanks to these informations, Lucene 
>> is able to determinate how many documents contain the term "foo".
>
> Not exactly, Term Vectors only could tell you how many times foo 
> occurs in a particular, known document.  If you are looking for 
> general information on a Term and the documents it occurs in (i.e. the 
> inverted index) have a look at the TermEnum and TermDocs.
>
>> Thus the position/offset data contained in .tvf can just consist in a 
>> list of positions in the different documents containing "foo" 
>> concatenated ? I mean, if foo appears in positions 1,30,65 in doc 0, 
>> and positions 27 & 52 in doc 2, the .tvf will give "1 30 65 27 52" 
>> and Lucene rests on .tvd to determine which positions belongs to 
>> which document? (or rather "1 29 35 27 25" as it is delta-positions)
>
> No, you only could find out about doc 0 or doc 2 separately using 
> TermVectors.
>
> HTH,
> Grant
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Well, I really don't get it :) This file structure is driving me crazy !
I quote the doc i'm resting on, and comment the points that pose me 
problems : 
(http://lucene.apache.org/java/2_2_0/fileformats.html#Term%20Vectors)

(quote)
Field (.tvf) --> TVFVersion<NumTerms, Position/Offset, TermFreqs> 
^NumFields          // this structure is repeated for each Field
TVFVersion --> Int
NumTerms --> VInt
Position/Offset --> Byte
TermFreqs --> <TermText, TermFreq, Positions?, Offsets?> ^NumTerms     
            //this structure is repeated for each Term of each Field
TermText --> <PrefixLength, Suffix>
PrefixLength --> VInt
Suffix --> String
TermFreq --> VInt
Positions --> <VInt>^TermFreq         //this "Position" data appears 
once per occurrence of each Term of each Field... but as far as I know, 
TermFreq is the number of occurrences of a Term, in all documents 
regardless their number (not sure of that actually)
Offsets --> <VInt, VInt>^TermFreq
(/quote)
^

I doubt that the "TermFreq" found in this description is the same than 
the one found in Frequencies section 
(http://lucene.apache.org/java/2_2_0/fileformats.html#Frequencies):

(quote)
TermFreq --> DocDelta, Freq?
TermFreq entries are ordered by increasing document number.
DocDelta determines both the document number and the frequency. In 
particular, DocDelta/2 is the difference between this document number 
and the previous document number (or zero when this is the first 
document in a TermFreqs). When DocDelta is odd, the frequency is one. 
When DocDelta is even, the frequency is read as another VInt.
(/quote)

I don't think this is the same type of TermFreq, cause the one described 
in Frequencies section would have no sense being put as an exponent in 
"Positions --> <VInt>^TermFreq ", cause this notation just means that 
the VInt is repeated TermFreq times.
So, to fit with what have been told, I assume that TermFreq is only the 
number of occurrences of the Term in *one* document... but in that case, 
their should be one .tvf per document, which I really doubt to be so.
I'd add that I've glanced at the TermVectorsReader.java sourcecode, but 
it didn't help me to understand how it's supposed to work (I'm not a 
great Java performer actually).
Maybe the documentation 
http://lucene.apache.org/java/2_2_0/fileformats.html contains a typo, 
anyway I don't find it very clear on this point... but it's really 
turning my brain upside down.
Thanks a lot to anyone could help me finding rest :)

Cordially,

Samuel

--------------010002000206000402050707--

From java-user-return-28889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 13:38:54 2007
Return-Path: <java-user-return-28889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17809 invoked from network); 28 Jun 2007 13:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 13:38:52 -0000
Received: (qmail 16522 invoked by uid 500); 28 Jun 2007 13:38:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16476 invoked by uid 500); 28 Jun 2007 13:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16459 invoked by uid 99); 28 Jun 2007 13:38:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 06:38:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.89.20.193] (HELO outbound-mail-39.bluehost.com) (69.89.20.193)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Jun 2007 06:38:29 -0700
Received: (qmail 6909 invoked by uid 0); 28 Jun 2007 13:38:03 -0000
Received: from unknown (HELO box108.bluehost.com) (69.89.22.108)
  by mailproxy2.bluehost.com with SMTP; 28 Jun 2007 13:38:03 -0000
Received: from aputeaux-151-1-95-253.w86-205.abo.wanadoo.fr ([86.205.94.253] helo=[192.168.0.4])
	by box108.bluehost.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.63)
	(envelope-from <emmanuel@hibernate.org>)
	id 1I3uC9-00065J-CB
	for java-user@lucene.apache.org; Thu, 28 Jun 2007 07:38:02 -0600
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <B17A8D07-1D70-4515-B471-8251921C0941@gmail.com>
References: <F3B3254741B1404D92215D80C451DE84017E81A7@CORPUSMX10B.corp.emc.com> <B17A8D07-1D70-4515-B471-8251921C0941@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <79378E12-EEAF-4862-A28E-8F5568A6DD99@hibernate.org>
Content-Transfer-Encoding: 7bit
From: Emmanuel Bernard <emmanuel@hibernate.org>
Subject: Re: Lucene as primary object storage
Date: Thu, 28 Jun 2007 15:37:41 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Identified-User: {1307:box108.bluehost.com:emmanue2:emmanuelbernard.com} {sentby:smtp auth 86.205.94.253 authed with emmanuel+emmanuelbernard.com}
X-Virus-Checked: Checked by ClamAV on apache.org

Hibernate Search (formerly known as Hibernate Lucene) is not designed  
to use Lucene as the primary and only backend. It is designed to  
complement a database.
I don't really like the idea actually: I'm much comfortable with  
having my data in a relational DB :)

So this product will not help for you request.

Emmanuel

On  Jun 27, 2007, at 03:48, karl wettin wrote:

> 27 jun 2007 kl. 03.19 skrev Liu_Andy2@emc.com:
>
>> Perhaps this reference
>> http://www.mail-archive.com/hibernate-devel@lists.sourceforge.net/ 
>> msg062
>> 60.html will give you some help. It's about Hibernate Lucene
>> integration.
>
> Thanks, interesting. Do you know more about this? Was the ORM  
> implemented? Does Hibernate have some sort of built in transaction  
> log it could store on the side?
>
> They don't seem to talk that much about what might go wrong with a  
> directoy though. That is my big concern. I guess my subject was a  
> bit missleading. Up until now I have been able to rebuild the index  
> from a database or something if it dies on me due to bad code,  
> hardware failure or what ever reason. I can't do that if the index  
> was the only place I saved the data.
>
> Perhaps it is a backup-solution I'm looking for. Maybe there are  
> some expensive or sensitive things I need to watch out a bit extra  
> when calling as, or something. I don't know. That is why I'm asking.
>
>>
>> Andy
>>
>> -----Original Message-----
>> From: karl wettin [mailto:karl.wettin@gmail.com]
>> Sent: Wednesday, June 27, 2007 8:17 AM
>> To: java-user@lucene.apache.org
>> Subject: Lucene as primary object storage
>>
>> Until recently I have only used Lucene as an index. I'm very
>> interested to hear what you people have to say about using Lucene as
>> the primary and only persistance layer in an application.
>>
>> I would feel much safer if I had a transactionlog for crash recovery.
>> So I might get me one of those. Are there more things I should worry
>> about?
>>
>>
>> -- 
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 13:39:21 2007
Return-Path: <java-user-return-28890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18121 invoked from network); 28 Jun 2007 13:39:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 13:39:21 -0000
Received: (qmail 19878 invoked by uid 500); 28 Jun 2007 13:39:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19829 invoked by uid 500); 28 Jun 2007 13:39:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19812 invoked by uid 99); 28 Jun 2007 13:39:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 06:39:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 06:39:01 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I3uCd-000870-Su
	for java-user@lucene.apache.org; Thu, 28 Jun 2007 15:38:31 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UQxUXtC0fUrH for <java-user@lucene.apache.org>;
	Thu, 28 Jun 2007 15:38:29 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I3uCb-00086v-KE
	for java-user@lucene.apache.org; Thu, 28 Jun 2007 15:38:29 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <N4LKABW7>; Thu, 28 Jun 2007 15:38:29 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C526DC@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: java-user@lucene.apache.org
Subject: Searching over multiple indexes with 1:m relationship
Date: Thu, 28 Jun 2007 15:38:26 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi folks!

I know there is a MultiSearcher for searching over multiple indices, =
but my
requirement is a bit special.
I have two indices whose documents have a 1:m relationship. Most =
queries
will only use the primary index, but some will have to look for =
detailed
information in the secondary index (the index fields are of course
different).

What I plan to do:=20
- first get the results from the primary index
- then use the pk of the found documents and the additional search
constraints to search in the secondary index
- discard any primary results that did not match in the secondary index

Is this ok, or am I completely nuts by doing that? Is there a better
alternative?

Thanks for any clues!

Michael


--=20
Michael B=F6ckling
Java Engineer
dmc digital media center GmbH=20
Rommelstra=DFe 11=20
70376 Stuttgart (Germany)=20
Telefon: +49 711 601747-0
Telefax: +49 711 601747-141=20
E-Mail: Michael.Boeckling@dmc.de=20
Internet: www.dmc.de=20

Handelsregister: AG Stuttgart HRB 18974
Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend

---------------------------------------------
Besseres E-Business.
dmc ist die kreative Vernetzung von Agentur, Systemhaus und Service. =
Seit
=FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen Kunden =
z=E4hlen
neckermann.de, Kodak und Telekom Training.

dmc auf Platz 8 im aktuellen New Media Service Ranking.
Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren wir =
mit einem
Umsatz von 13,50 Mio. Euro zu den Top 10 der erfolgreichsten New Media
Dienstleister in Deutschland.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 13:50:38 2007
Return-Path: <java-user-return-28891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22173 invoked from network); 28 Jun 2007 13:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 13:50:37 -0000
Received: (qmail 58188 invoked by uid 500); 28 Jun 2007 13:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58060 invoked by uid 500); 28 Jun 2007 13:50:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57948 invoked by uid 99); 28 Jun 2007 13:50:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 06:50:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of cwho.work@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 06:50:24 -0700
Received: by nz-out-0506.google.com with SMTP id x7so276070nzc
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 06:50:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=F0rfX3/huPLeXYkV7BtFyl+mMqXkNczwy7Jc282tGI42IW4PVJMMtXcKNFWJVA0DTgfW/1918+ZF+Si70yhGBtWTYiUS+61Kx6EW0to1AT27fnlw9Ewmro8bpxcoBc5nrYRxhE4V8P18qcZkx8mfiOGWF8ZEgJ6Gvk60Um/rBgY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=j7xomXI7ZYN1LoGIrw7lUEb/HbQUCMyTYbUjWdDAeYJuQ67nIPOwO/R6NeJ3oPj/w1sBSRpcrCgP2ZKgtbGS0gNCtCi0i4CuX1INMysojqz65a0b1V0f6Wu4HjeT3Y4CknPTyfzkJ6qSSNRtpeG1S6fh4dkGKrSyAx8FhIdDZVI=
Received: by 10.142.240.9 with SMTP id n9mr109380wfh.1183038601599;
        Thu, 28 Jun 2007 06:50:01 -0700 (PDT)
Received: by 10.143.5.8 with HTTP; Thu, 28 Jun 2007 06:50:01 -0700 (PDT)
Message-ID: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com>
Date: Thu, 28 Jun 2007 21:50:01 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Scaling up to several machines with Lucene
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_36160_2054274.1183038601557"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36160_2054274.1183038601557
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

We are currently running a Tomcat web application serving searches
over our Lucene index (10GB) on a single server machine (Dual 3GHz
CPU, 4GB RAM). Due to performance issues and to scale up to handle
more traffic/search requests, we are getting another server machine.

We are looking at two ways of scaling:
(1) duplicating the web application and index on the second machine
and load-balancing incoming users between the two servers.

(2) modifying our web application so that one machine will host our
web application (and associated MySQL database), while the other one
will host the Lucene index. The first machine would be dedicated to
our web application and database, while the second becomes our
dedicated Lucene search server. When users perform a search on the
website, the web application will send the request to the Lucene index
server, which will perform the search and return the results to the
web application.

We would like comments from users who have set up similar systems on
how you have accomplished (1) in your setups, and whether (2) is a
good choice for scaling.


Attached is a more complete RTF document outlining our architecture
and proposal. We appreciate your perusal and comments.

Regards,
CW


------=_Part_36160_2054274.1183038601557
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_36160_2054274.1183038601557--

From java-user-return-28892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 14:09:32 2007
Return-Path: <java-user-return-28892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35667 invoked from network); 28 Jun 2007 14:09:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 14:09:31 -0000
Received: (qmail 26348 invoked by uid 500); 28 Jun 2007 14:09:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26180 invoked by uid 500); 28 Jun 2007 14:09:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26169 invoked by uid 99); 28 Jun 2007 14:09:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 07:09:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 07:09:19 -0700
Received: by ug-out-1314.google.com with SMTP id c2so385119ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 07:08:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XObZ8Mq9yvZX0QeLavdZ3xbIRVZv1FR9JdF9eYKz4jN7XrmQOF15PvmnUg2EGLx3ONN7weR37YSj9GF1fyJLoDybVmxrbPDhhwDKnT4xzT6MvHpwp05IFUBb/DygJ0DWqCa1lSG2V6ydvaiJO1OL4IrHHm8RNWbVcIX/aVT4BZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gPLRy7QfXFtUXd31bw5zLkghMJ42R0QB8jviUXr/QVzAIOGe6kIxpQyOD5y7A32udpUr6GwJAvm3MYEE2OQRbLz6iMe9RGmAy4W3M6l0DQnQ6t0dJGQJmKYBTMKRr81cgapwZ9JAPK0sp8RtlUB45Fe4ww96nAZI2HEd9TMnU8Q=
Received: by 10.82.134.12 with SMTP id h12mr3871031bud.1183039736712;
        Thu, 28 Jun 2007 07:08:56 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 28 Jun 2007 07:08:56 -0700 (PDT)
Message-ID: <359a92830706280708m7308770q72ebd09cb3d94849@mail.gmail.com>
Date: Thu, 28 Jun 2007 10:08:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching over multiple indexes with 1:m relationship
In-Reply-To: <F60407925D044842B7E21677C8B8CE2818C526DC@fafnir.intra.dmc.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33482_24009841.1183039736596"
References: <F60407925D044842B7E21677C8B8CE2818C526DC@fafnir.intra.dmc.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33482_24009841.1183039736596
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I do have an off-the-wall question.. Why have two indexes? There
are, of course, good reasons, but they're things like size and speed.

Where I'm going here is that Lucene does NOT require that all
documents have the same fields. So it's perfectly reasonable to index
heterogeneous data (or differing forms of the same data) in a single index.
This may not fit your requirements, but I thought I'd mention it.

That said, it really doesn't bear on your question since you'd really have
two logical indexes in the same physical index. Although maybe it does.
If all the data were in one index, then perhaps you could do exactly one
search instead.

I'm always leery of using an index to mimic what looks like database
functionality. That often means that you either should actually use a
database for the database-like parts or get much more clever in your index
so you don't need what are essentially joins.

All that said, a lot depends on the data set size. If your first query
results
in, say, 100 documents (pks) that you need to use for your second query,
it probably doesn't matter whether you do a lot of manual processing. If th=
e
first query results in 1,000,000 pks, then it does....

So how much data are you talking about? Even the single-index idea
depends upon whether we're talking a couple of G index size of a
couple of T...

Best
Erick




On 6/28/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
>
> Hi folks!
>
> I know there is a MultiSearcher for searching over multiple indices, but
> my
> requirement is a bit special.
> I have two indices whose documents have a 1:m relationship. Most queries
> will only use the primary index, but some will have to look for detailed
> information in the secondary index (the index fields are of course
> different).
>
> What I plan to do:
> - first get the results from the primary index
> - then use the pk of the found documents and the additional search
> constraints to search in the secondary index
> - discard any primary results that did not match in the secondary index
>
> Is this ok, or am I completely nuts by doing that? Is there a better
> alternative?
>
> Thanks for any clues!
>
> Michael
>
>
> --
> Michael B=F6ckling
> Java Engineer
> dmc digital media center GmbH
> Rommelstra=DFe 11
> 70376 Stuttgart (Germany)
> Telefon: +49 711 601747-0
> Telefax: +49 711 601747-141
> E-Mail: Michael.Boeckling@dmc.de
> Internet: www.dmc.de
>
> Handelsregister: AG Stuttgart HRB 18974
> Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend
>
> ---------------------------------------------
> Besseres E-Business.
> dmc ist die kreative Vernetzung von Agentur, Systemhaus und Service. Seit
> =FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
> erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen Kunden z=E4=
hlen
> neckermann.de, Kodak und Telekom Training.
>
> dmc auf Platz 8 im aktuellen New Media Service Ranking.
> Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren wir mit=
 einem
> Umsatz von 13,50 Mio. Euro zu den Top 10 der erfolgreichsten New Media
> Dienstleister in Deutschland.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_33482_24009841.1183039736596--

From java-user-return-28893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 14:15:47 2007
Return-Path: <java-user-return-28893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39663 invoked from network); 28 Jun 2007 14:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 14:15:36 -0000
Received: (qmail 46146 invoked by uid 500); 28 Jun 2007 14:15:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46093 invoked by uid 500); 28 Jun 2007 14:15:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46046 invoked by uid 99); 28 Jun 2007 14:15:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 07:15:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 07:15:29 -0700
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 978225D6B
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 16:15:06 +0200 (CEST)
Message-ID: <4683C268.4010608@garambrogne.net>
Date: Thu, 28 Jun 2007 16:15:04 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Scaling up to several machines with Lucene
References: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com>
In-Reply-To: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Server One handle website
Server Two is a light version of tomcat wich handle Lucene Search

In front, a lighttpd which use server two for /search, and server one
for  all others things

You can add lucene server with round robin in lighttpd with this scheme.

Careful with fault tolerance and index replication.

M.

Chun Wei Ho a écrit :
> Hi,
>
> We are currently running a Tomcat web application serving searches
> over our Lucene index (10GB) on a single server machine (Dual 3GHz
> CPU, 4GB RAM). Due to performance issues and to scale up to handle
> more traffic/search requests, we are getting another server machine.
>
> We are looking at two ways of scaling:
> (1) duplicating the web application and index on the second machine
> and load-balancing incoming users between the two servers.
>
> (2) modifying our web application so that one machine will host our
> web application (and associated MySQL database), while the other one
> will host the Lucene index. The first machine would be dedicated to
> our web application and database, while the second becomes our
> dedicated Lucene search server. When users perform a search on the
> website, the web application will send the request to the Lucene index
> server, which will perform the search and return the results to the
> web application.
>
> We would like comments from users who have set up similar systems on
> how you have accomplished (1) in your setups, and whether (2) is a
> good choice for scaling.
>
>
> Attached is a more complete RTF document outlining our architecture
> and proposal. We appreciate your perusal and comments.
>
> Regards,
> CW
>
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 14:20:27 2007
Return-Path: <java-user-return-28894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42755 invoked from network); 28 Jun 2007 14:20:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 14:20:26 -0000
Received: (qmail 57542 invoked by uid 500); 28 Jun 2007 14:20:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57501 invoked by uid 500); 28 Jun 2007 14:20:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57490 invoked by uid 99); 28 Jun 2007 14:20:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 07:20:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [84.96.25.182] (HELO mail.e-manation.com) (84.96.25.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 07:20:16 -0700
Received: by mail.e-manation.com (Postfix, from userid 1007)
	id 1D10EA0006C; Thu, 28 Jun 2007 16:16:26 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb (2006-10-05) on 
	actarus.e-manation.com
X-Spam-Level: 
Received: from [10.10.1.131] (unknown [10.10.1.131])
	by mail.e-manation.com (Postfix) with ESMTP id C273AA0006C
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 16:16:25 +0200 (CEST)
Message-ID: <4683C386.1000802@lingway.com>
Date: Thu, 28 Jun 2007 16:19:50 +0200
From: Samuel LEMOINE <samuel.lemoine@lingway.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Scaling up to several machines with Lucene
References: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com>
In-Reply-To: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.7-deb

Chun Wei Ho a écrit :
> Hi,
>
> We are currently running a Tomcat web application serving searches
> over our Lucene index (10GB) on a single server machine (Dual 3GHz
> CPU, 4GB RAM). Due to performance issues and to scale up to handle
> more traffic/search requests, we are getting another server machine.
>
> We are looking at two ways of scaling:
> (1) duplicating the web application and index on the second machine
> and load-balancing incoming users between the two servers.
>
> (2) modifying our web application so that one machine will host our
> web application (and associated MySQL database), while the other one
> will host the Lucene index. The first machine would be dedicated to
> our web application and database, while the second becomes our
> dedicated Lucene search server. When users perform a search on the
> website, the web application will send the request to the Lucene index
> server, which will perform the search and return the results to the
> web application.
>
> We would like comments from users who have set up similar systems on
> how you have accomplished (1) in your setups, and whether (2) is a
> good choice for scaling.
>
>
> Attached is a more complete RTF document outlining our architecture
> and proposal. We appreciate your perusal and comments.
>
> Regards,
> CW
>
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
I'm acutely interrested by this issue too, as I'm working on distributed 
architecture of Lucene. I'm only at the very beginning of my study so 
that I can't help you much, but Hadoop maybe could fit to your 
requirements. It's a sub-project of Lucene aiming to parallelise Lucene.
See http://lucene.apache.org/hadoop/about.html but I don't know wether 
it scales well to very small clusters...

About your attached, I couldn't access it, it was only a "Partie 1.2" 
file containing this text:

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


Cordially,

Samuel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 14:41:57 2007
Return-Path: <java-user-return-28895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59151 invoked from network); 28 Jun 2007 14:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 14:41:54 -0000
Received: (qmail 23516 invoked by uid 500); 28 Jun 2007 14:41:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23448 invoked by uid 500); 28 Jun 2007 14:41:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23436 invoked by uid 99); 28 Jun 2007 14:41:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 07:41:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 07:41:46 -0700
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 1A11D5DC2
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 16:41:25 +0200 (CEST)
Message-ID: <4683C894.90003@garambrogne.net>
Date: Thu, 28 Jun 2007 16:41:24 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Scaling up to several machines with Lucene
References: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com> <4683C386.1000802@lingway.com>
In-Reply-To: <4683C386.1000802@lingway.com>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Samuel LEMOINE a écrit :
> I'm acutely interrested by this issue too, as I'm working on
> distributed architecture of Lucene. I'm only at the very beginning of
> my study so that I can't help you much, but Hadoop maybe could fit to
> your requirements. It's a sub-project of Lucene aiming to parallelise
> Lucene.
> See http://lucene.apache.org/hadoop/about.html but I don't know wether
> it scales well to very small clusters...
>
Reading from index replicated in several server is not hard, the writing
(and locking) part is harder.
The way choosen by technorati's guys is one computer to index, and rsync
replication with cp and mv commit in the search cluster.
If you need more power for indexing, then, use nutch.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 15:06:51 2007
Return-Path: <java-user-return-28896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7995 invoked from network); 28 Jun 2007 15:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 15:06:51 -0000
Received: (qmail 82602 invoked by uid 500); 28 Jun 2007 15:06:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82569 invoked by uid 500); 28 Jun 2007 15:06:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82544 invoked by uid 99); 28 Jun 2007 15:06:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 08:06:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.110.102.5] (HELO linuxap01e.dmc.de) (193.110.102.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 08:06:36 -0700
Received: from [127.0.0.1] (helo=localhost)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I3vZW-0007Di-6C
	for java-user@lucene.apache.org; Thu, 28 Jun 2007 17:06:14 +0200
X-Virus-Scanned: amavisd-new at dmc.de
Received: from linuxap01e.dmc.de ([127.0.0.1])
	by localhost (linux-ap01e.dmc.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ME46xnVoTLMe for <java-user@lucene.apache.org>;
	Thu, 28 Jun 2007 17:06:11 +0200 (CEST)
Received: from [193.110.102.2] (helo=fafnir.dmc.local)
	by linuxap01e.dmc.de with esmtp (Exim 4.63)
	(envelope-from <Michael.Boeckling@dmc.de>)
	id 1I3vZT-0007DR-Qv
	for java-user@lucene.apache.org; Thu, 28 Jun 2007 17:06:11 +0200
Received: by fafnir.intra.dmc.de with Internet Mail Service (5.5.2653.19)
	id <N4LKAFB8>; Thu, 28 Jun 2007 17:06:11 +0200
Message-ID: <F60407925D044842B7E21677C8B8CE2818C526DD@fafnir.intra.dmc.de>
From: =?iso-8859-1?Q?Michael_B=F6ckling?= <Michael.Boeckling@dmc.de>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: AW: Searching over multiple indexes with 1:m relationship
Date: Thu, 28 Jun 2007 17:06:07 +0200
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erickson,

thanks for your reply.

Of course you are right that its a bit insane to mimic a =
database-schema
with indices, but thats how it is. The primary index is already in use, =
the
extended requirements came later.

The Index isn't really that big, the primary one has 2-3 MB of data, I =
don't
know yet how big the secondary one will be, but probably less than 20 =
Megs.
The idea was that most searches will only need the first index, it is =
only
by using an extended search form that the secondary index is queried.
Keeping the first index small should help with performance, where the =
main
load is handled.

The number of primary results will often be less than 200, typically =
around
20 I guess, so its not that big of a deal to iterate through them.

Regards,

Michael


> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Donnerstag, 28. Juni 2007 16:09
> An: java-user@lucene.apache.org
> Betreff: Re: Searching over multiple indexes with 1:m relationship
>=20
>=20
> I do have an off-the-wall question.. Why have two indexes? There
> are, of course, good reasons, but they're things like size and speed.
>=20
> Where I'm going here is that Lucene does NOT require that all
> documents have the same fields. So it's perfectly reasonable to index
> heterogeneous data (or differing forms of the same data) in a=20
> single index.
> This may not fit your requirements, but I thought I'd mention it.
>=20
> That said, it really doesn't bear on your question since=20
> you'd really have
> two logical indexes in the same physical index. Although=20
> maybe it does.
> If all the data were in one index, then perhaps you could do=20
> exactly one
> search instead.
>=20
> I'm always leery of using an index to mimic what looks like database
> functionality. That often means that you either should actually use a
> database for the database-like parts or get much more clever=20
> in your index
> so you don't need what are essentially joins.
>=20
> All that said, a lot depends on the data set size. If your first =
query
> results
> in, say, 100 documents (pks) that you need to use for your=20
> second query,
> it probably doesn't matter whether you do a lot of manual=20
> processing. If the
> first query results in 1,000,000 pks, then it does....
>=20
> So how much data are you talking about? Even the single-index idea
> depends upon whether we're talking a couple of G index size of a
> couple of T...
>=20
> Best
> Erick
>=20
>=20
>=20
>=20
> On 6/28/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
> >
> > Hi folks!
> >
> > I know there is a MultiSearcher for searching over multiple=20
> indices, but
> > my
> > requirement is a bit special.
> > I have two indices whose documents have a 1:m relationship.=20
> Most queries
> > will only use the primary index, but some will have to look=20
> for detailed
> > information in the secondary index (the index fields are of course
> > different).
> >
> > What I plan to do:
> > - first get the results from the primary index
> > - then use the pk of the found documents and the additional search
> > constraints to search in the secondary index
> > - discard any primary results that did not match in the=20
> secondary index
> >
> > Is this ok, or am I completely nuts by doing that? Is there a =
better
> > alternative?
> >
> > Thanks for any clues!
> >
> > Michael
> >
> >
> > --
> > Michael B=F6ckling
> > Java Engineer
> > dmc digital media center GmbH
> > Rommelstra=DFe 11
> > 70376 Stuttgart (Germany)
> > Telefon: +49 711 601747-0
> > Telefax: +49 711 601747-141
> > E-Mail: Michael.Boeckling@dmc.de
> > Internet: www.dmc.de
> >
> > Handelsregister: AG Stuttgart HRB 18974
> > Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend
> >
> > ---------------------------------------------
> > Besseres E-Business.
> > dmc ist die kreative Vernetzung von Agentur, Systemhaus und=20
> Service. Seit
> > =FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
> > erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen=20
> Kunden z=E4hlen
> > neckermann.de, Kodak und Telekom Training.
> >
> > dmc auf Platz 8 im aktuellen New Media Service Ranking.
> > Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren=20
> wir mit einem
> > Umsatz von 13,50 Mio. Euro zu den Top 10 der=20
> erfolgreichsten New Media
> > Dienstleister in Deutschland.
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 15:32:29 2007
Return-Path: <java-user-return-28897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64146 invoked from network); 28 Jun 2007 15:32:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 15:32:28 -0000
Received: (qmail 36309 invoked by uid 500); 28 Jun 2007 15:32:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36261 invoked by uid 500); 28 Jun 2007 15:32:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36250 invoked by uid 99); 28 Jun 2007 15:32:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 08:32:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [193.145.55.10] (HELO iua-mail.upf.es) (193.145.55.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 08:32:20 -0700
Received: from [10.55.0.242] (helo=gato-preto.local)
	by iua-mail.upf.es with esmtp (Exim 4.60)
	(envelope-from <j+lucene@grivolla.net>)
	id 1I3vy1-0001ht-UL; Thu, 28 Jun 2007 17:31:35 +0200
Message-ID: <4683D453.2080102@grivolla.net>
Date: Thu, 28 Jun 2007 17:31:31 +0200
From: Jens Grivolla <j+lucene@grivolla.net>
User-Agent: Thunderbird 2.0.0.4 (Macintosh/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: inserting millions of entries
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-IUA-MailScanner: Found to be clean
X-IUA-MailScanner-SpamCheck: not spam (whitelisted),
	SpamAssassin (not cached, score=-4.084, required 5,
	autolearn=not spam, ALL_TRUSTED -1.80, BAYES_00 -2.60,
	SARE_MILLIONSOF 0.32)
X-IUA-MailScanner-From: j+lucene@grivolla.net
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a Lucene index with a few million entries, and I will need to
add batches of a few hundred thousand or a few million additional
entries.  Unfortunately, I absolutely need to have all indexed entries
available when inserting a new one, even within one batch, in order to
do some duplicate detection (using Lucene).

I believe this means having to close the writer and reopen the reader
to reflect the changes after each add.  I'm thinking of having the
original index remain static and add the new entries to a separate
index and merge the two later on.  I can even query them separately
during the batch insertion if that gives me better performance.

The questions:
How costly is merging two big indexes?
When / how often do I need to call optimize() on the new index?
Should I just keep MergeFactor at the default value?
If I have autoCommit=true, I can keep the writer open, but still need
to flush() and reopen readers to reflect the changes, right?
Is it better to have a MultiReader on both indexes or query them
separately so I don't have to reopen the old one every time?

Additional info:
Documents are very short, just a few words each.  I have  4 gigs of
RAM in the machine, of which I could allocate quite a bit as heap for
the writer if that helps.

Thanks for any hints on how to best go about this,

Jens

P.S.: all my mails to the list get silently dropped when sending through 
GMail, possibly because the sender is not the same as the from: header 
(and only the from: actually contains the subscribed address).  This is 
very annoying and makes it impossible for me to write to the list in 
many situations.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 15:38:49 2007
Return-Path: <java-user-return-28898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68002 invoked from network); 28 Jun 2007 15:38:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 15:38:48 -0000
Received: (qmail 56209 invoked by uid 500); 28 Jun 2007 15:38:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56172 invoked by uid 500); 28 Jun 2007 15:38:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56161 invoked by uid 99); 28 Jun 2007 15:38:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 08:38:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 08:38:36 -0700
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 06B5F5D55
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 17:38:13 +0200 (CEST)
Message-ID: <4683D5E4.9020300@garambrogne.net>
Date: Thu, 28 Jun 2007 17:38:12 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.4 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: inserting millions of entries
References: <4683D453.2080102@grivolla.net>
In-Reply-To: <4683D453.2080102@grivolla.net>
X-Enigmail-Version: 0.95.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

stop writing
scp index to another computer
play with it
scp indexModified to the server
mv indexModified indexCurrent

all done. mv is atomic.

Jens Grivolla a écrit :
> Hi,
>
> I have a Lucene index with a few million entries, and I will need to
> add batches of a few hundred thousand or a few million additional
> entries.  Unfortunately, I absolutely need to have all indexed entries
> available when inserting a new one, even within one batch, in order to
> do some duplicate detection (using Lucene).
>
> I believe this means having to close the writer and reopen the reader
> to reflect the changes after each add.  I'm thinking of having the
> original index remain static and add the new entries to a separate
> index and merge the two later on.  I can even query them separately
> during the batch insertion if that gives me better performance.
>
> The questions:
> How costly is merging two big indexes?
> When / how often do I need to call optimize() on the new index?
> Should I just keep MergeFactor at the default value?
> If I have autoCommit=true, I can keep the writer open, but still need
> to flush() and reopen readers to reflect the changes, right?
> Is it better to have a MultiReader on both indexes or query them
> separately so I don't have to reopen the old one every time?
>
> Additional info:
> Documents are very short, just a few words each.  I have  4 gigs of
> RAM in the machine, of which I could allocate quite a bit as heap for
> the writer if that helps.
>
> Thanks for any hints on how to best go about this,
>
> Jens
>
> P.S.: all my mails to the list get silently dropped when sending
> through GMail, possibly because the sender is not the same as the
> from: header (and only the from: actually contains the subscribed
> address).  This is very annoying and makes it impossible for me to
> write to the list in many situations.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 15:49:50 2007
Return-Path: <java-user-return-28899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76843 invoked from network); 28 Jun 2007 15:49:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 15:49:47 -0000
Received: (qmail 87452 invoked by uid 500); 28 Jun 2007 15:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87399 invoked by uid 500); 28 Jun 2007 15:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87338 invoked by uid 99); 28 Jun 2007 15:49:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 08:49:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 08:49:30 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id A84CC16350B
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 08:49:04 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4683B244.6080509@lingway.com>
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com> <46825D3C.3090204@lingway.com> <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org> <46837F8E.7070703@lingway.com> <FD819A62-4383-4633-BB14-7DB556A1A2D5@apache.org> <4683B244.6080509@lingway.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <53C31182-7709-40CB-AB65-2CCF7C136413@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: several existential issues about Lucene's filesystem
Date: Thu, 28 Jun 2007 11:49:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 28, 2007, at 9:06 AM, Samuel LEMOINE wrote:

> Grant Ingersoll a =E9crit :
>>
>> On Jun 28, 2007, at 5:29 AM, Samuel LEMOINE wrote:
>>> Thanks for the resources about payloads, I'll have a look over it.
>>> About the positions/offsets in .tvf, please tell me if I've well =20
>>> understood:
>>> The .
> (quote)
> Field (.tvf) --> TVFVersion<NumTerms, Position/Offset, TermFreqs> =20
> ^NumFields          // this structure is repeated for each Field
> TVFVersion --> Int
> NumTerms --> VInt
> Position/Offset --> Byte
> TermFreqs --> <TermText, TermFreq, Positions?, Offsets?> =20
> ^NumTerms                //this structure is repeated for each Term =20=

> of each Field
> TermText --> <PrefixLength, Suffix>
> PrefixLength --> VInt
> Suffix --> String
> TermFreq --> VInt
> Positions --> <VInt>^TermFreq         //this "Position" data =20
> appears once per occurrence of each Term of each Field... but as =20
> far as I know, TermFreq is the number of occurrences of a Term, in =20
> all documents regardless their number (not sure of that actually)
> Offsets --> <VInt, VInt>^TermFreq
> (/quote)
> ^
>
> I doubt that the "TermFreq" found in this description is the same =20
> than the one found in Frequencies section (http://lucene.apache.org/=20=

> java/2_2_0/fileformats.html#Frequencies):

You are correct, it is not the same, hence the definition of it as:
TermFreq -> VInt

right above the Positions declaration and below the definition of =20
Suffix in this section (the Term Vectors section).  Thus, the =20
Positions is, essentially, an array of VInts, one entry per the =20
number of times it occurs in that particular document.

Here is the relevant code in TermVectorsReader with my comments:
int freq =3D tvf.readVInt(); //notice it is not decoding any docdelta, =20=

it is just getting a vint
       int [] positions =3D null;
       if (storePositions) { //read in the positions
         positions =3D new int[freq];
         int prevPosition =3D 0;
         for (int j =3D 0; j < freq; j++) //For each occurrence of this =20=

term in this document
         {
           positions[j] =3D prevPosition + tvf.readVInt();  //Read in =20=

the delta-encoded position.
           prevPosition =3D positions[j];
         }
       }


-Grant



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 16:04:15 2007
Return-Path: <java-user-return-28900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88431 invoked from network); 28 Jun 2007 16:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 16:04:14 -0000
Received: (qmail 26860 invoked by uid 500); 28 Jun 2007 16:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26824 invoked by uid 500); 28 Jun 2007 16:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26813 invoked by uid 99); 28 Jun 2007 16:04:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 09:04:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bharath.nott@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 09:04:03 -0700
Received: by wr-out-0506.google.com with SMTP id m59so453148wrm
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 09:03:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=dhBtWKfCkN2raMowW/TRYhnsxJNKny5C/vh1adrdyxgjpOdKLQxgQQal63idIGtE3CuSFtYGFZIvPwW3tpMnRKyLSNUehb91Sbnpgjppg58Wb/hba0MMIJx3aeAh4daYzo8z38A0GRsXyYRBhgFWV0yvEO1EMk56rS+ujSpBb6o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jUHnDwerJzgD2MQ4/SP5OwQJyYoByfb71JR3aoLR0giCDGo6u9NJs9gsY+R9aDf2qJSyf/OK3qoKITwO6HJR33QtoLIMumII5EuklP87yWyMU1n1b4zsvFZ9sioDAM+k6k/TZx5ia5elXWhzS8PRYt2jk9Xe1pVJFkw9X9rl1+o=
Received: by 10.142.154.20 with SMTP id b20mr115564wfe.1183046622002;
        Thu, 28 Jun 2007 09:03:42 -0700 (PDT)
Received: by 10.143.34.8 with HTTP; Thu, 28 Jun 2007 09:03:41 -0700 (PDT)
Message-ID: <ede880620706280903y7a03fef3x5a9d3dd0c2cde828@mail.gmail.com>
Date: Thu, 28 Jun 2007 12:03:41 -0400
From: Nott <bharath.nott@gmail.com>
To: java-user@lucene.apache.org
Subject: Luke faster + Index Searcher is slow
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37302_29638003.1183046621991"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37302_29638003.1183046621991
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I  have an index in one file that has a size of abt 18GB of data
When i run some queries on Luke the response comes in < 40 ms but the same
when I use IndexSearcher gives me in 300ms -600 ms
Any suggestions ?
The code i use is
                   File indexFile = new File(fileName);
                    FSDirectory dir = FSDirectory.getDirectory(indexFile);
                    indexSearcher =new IndexSearcher(dir);
                   hits = indexSearcher.search(query);


On 6/22/07, Andrzej Bialecki <ab@getopt.org> wrote:
>
> Hi all,
>
> I just released Luke 0.7.1, the Lucene Index Toolbox. As usually, you
> can get it here:
>
>         http://www.getopt.org/luke/
>
> This minor release is mostly an upgrade to the official Lucene 2.2.0
> release JARs.
>
> The following changes have been made in this release:
> * Added a term distribution analysis plugin by Mark Harwood.
> * Fixed IndexGate class to correctly show deletable files.
>
>
> --
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
~B

------=_Part_37302_29638003.1183046621991--

From java-user-return-28901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 16:49:11 2007
Return-Path: <java-user-return-28901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23058 invoked from network); 28 Jun 2007 16:49:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 16:49:10 -0000
Received: (qmail 61956 invoked by uid 500); 28 Jun 2007 16:49:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61922 invoked by uid 500); 28 Jun 2007 16:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61911 invoked by uid 99); 28 Jun 2007 16:49:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 09:49:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.28.232.18] (HELO relay1.mail.vrmd.de) (81.28.232.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 09:49:01 -0700
Received: from [88.74.8.215] (helo=dummy)
	by relay1.mail.vrmd.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.60)
	(envelope-from <kai.weber@glorybox.de>)
	id 1I3xAc-0001Jg-Cp
	for java-user@lucene.apache.org; Thu, 28 Jun 2007 18:48:38 +0200
Received: from kai by dummy with local (Exim 4.67)
	(envelope-from <kai.weber@glorybox.de>)
	id 1I3xAd-0004Lt-CV
	for java-user@lucene.apache.org; Thu, 28 Jun 2007 18:48:39 +0200
Date: Thu, 28 Jun 2007 18:48:39 +0200
From: Kai Weber <kai.weber@glorybox.de>
To: java-user@lucene.apache.org
Subject: Adding Documents to index in a batch process
Message-ID: <20070628164839.GA16302@dummy>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Relay-User: webmaster@glorybox.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

In my application I have to add documents to the index as follows:

1. build the document to add from a repository
2. obtain an IndexWriter
2. add document to index
4. write and optimize index, close writer
5. goto 1 until no documents left

I must work with a legacy code witch does the document
building and no easy way to get indexing into it like I was used to
(foreach document... add to index then write and close indexer).

How could I resuse the IndexWriter? My idea is to have something like
this:

1. create IndexWriter
2. reuse IndexWriter
3. add document to index
4. goto 2 until no documents left
5. write and optimize index, close writer

How would you implement this? Are there any examples I could look at?

Regards, Kai
-- 
* http://www.glorybox.de/
  PGP 1024D/594D4132 B693 5073 013F 7F56 5DCC  D9C2 E6B5 448C 594D 4132

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 17:04:38 2007
Return-Path: <java-user-return-28902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32277 invoked from network); 28 Jun 2007 17:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 17:04:32 -0000
Received: (qmail 17482 invoked by uid 500); 28 Jun 2007 17:04:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17445 invoked by uid 500); 28 Jun 2007 17:04:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17433 invoked by uid 99); 28 Jun 2007 17:04:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:04:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:04:20 -0700
Received: by an-out-0708.google.com with SMTP id c5so135100anc
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 10:04:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=lJIYIFCnkwB1KEdnLyyL+O5Is/opKu+pUfAmu3ePjnXLUQkDWEackiU32+Q7hHQC2yCUEa+WCur1q5day9CV79JkrObcsq9FPwOgnMhnAHO4kYGmqX2BHZL9s+Hjg+eI6ZqpSOzA3nX+Ks+BJNCoo8pVhOxuPc6sMAzttWiLyrk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=LPRx02PHNeTTrzAniqiUvPr1ZR8xPa1YSBjS36AkwRbvq8OaGxtTl3aREj0upv90AhEnZtYdV/ndUzrRr6l5VaVzPPvvL8mBg508iJyevTUUNs6ygM0IbvIswkhQkt/Wu7aHt2xgcBUl+tjoQ0okFxAihoXyYtYyB/ZP6W9TCS8=
Received: by 10.100.31.2 with SMTP id e2mr1351607ane.1183050239684;
        Thu, 28 Jun 2007 10:03:59 -0700 (PDT)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id b37sm6424771ana.2007.06.28.10.03.58
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 28 Jun 2007 10:03:59 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <ede880620706280903y7a03fef3x5a9d3dd0c2cde828@mail.gmail.com>
References: <ede880620706280903y7a03fef3x5a9d3dd0c2cde828@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E7D8FAA3-A910-495D-8915-309E8B57374D@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Luke faster + Index Searcher is slow
Date: Thu, 28 Jun 2007 13:03:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Are you opening the IndexSearcher every time you query?  This is a  
costly operation.

-Grant

On Jun 28, 2007, at 12:03 PM, Nott wrote:

> I  have an index in one file that has a size of abt 18GB of data
> When i run some queries on Luke the response comes in < 40 ms but  
> the same
> when I use IndexSearcher gives me in 300ms -600 ms
> Any suggestions ?
> The code i use is
>                   File indexFile = new File(fileName);
>                    FSDirectory dir = FSDirectory.getDirectory 
> (indexFile);
>                    indexSearcher =new IndexSearcher(dir);
>                   hits = indexSearcher.search(query);
>
>
> On 6/22/07, Andrzej Bialecki <ab@getopt.org> wrote:
>>
>> Hi all,
>>
>> I just released Luke 0.7.1, the Lucene Index Toolbox. As usually, you
>> can get it here:
>>
>>         http://www.getopt.org/luke/
>>
>> This minor release is mostly an upgrade to the official Lucene 2.2.0
>> release JARs.
>>
>> The following changes have been made in this release:
>> * Added a term distribution analysis plugin by Mark Harwood.
>> * Fixed IndexGate class to correctly show deletable files.
>>
>>
>> --
>> Best regards,
>> Andrzej Bialecki     <><
>>   ___. ___ ___ ___ _ _   __________________________________
>> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
>> ___|||__||  \|  ||  |  Embedded Unix, System Integration
>> http://www.sigram.com  Contact: info at sigram dot com
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> ~B

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 17:14:32 2007
Return-Path: <java-user-return-28903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35965 invoked from network); 28 Jun 2007 17:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 17:14:31 -0000
Received: (qmail 38088 invoked by uid 500); 28 Jun 2007 17:14:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38050 invoked by uid 500); 28 Jun 2007 17:14:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38039 invoked by uid 99); 28 Jun 2007 17:14:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:14:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a15.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:14:22 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id 84D8B7F01B
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 10:13:58 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4683C386.1000802@lingway.com>
References: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com> <4683C386.1000802@lingway.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <80FCB62D-5AF5-4B4E-BC24-3597692BC7C2@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Scaling up to several machines with Lucene
Date: Thu, 28 Jun 2007 13:13:58 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hadoop is not designed for this type of scenario.

Have a look at Solr (http://lucene.apache.org/solr), this is pretty =20
much one of it's main use cases.  I think it will do what you need to =20=

do and will more than likely work w/ a minimal of configuration on =20
your existing index (but don't hold me to that statement).

Also, have you done profiling on your application such that you are =20
sure moving Lucene off the machine is going to help that much?

Cheers,
Grant

ps, the mailing lists strips attachments.

On Jun 28, 2007, at 10:19 AM, Samuel LEMOINE wrote:

> Chun Wei Ho a =E9crit :
>> Hi,
>>
>> We are currently running a Tomcat web application serving searches
>> over our Lucene index (10GB) on a single server machine (Dual 3GHz
>> CPU, 4GB RAM). Due to performance issues and to scale up to handle
>> more traffic/search requests, we are getting another server machine.
>>
>> We are looking at two ways of scaling:
>> (1) duplicating the web application and index on the second machine
>> and load-balancing incoming users between the two servers.
>>
>> (2) modifying our web application so that one machine will host our
>> web application (and associated MySQL database), while the other one
>> will host the Lucene index. The first machine would be dedicated to
>> our web application and database, while the second becomes our
>> dedicated Lucene search server. When users perform a search on the
>> website, the web application will send the request to the Lucene =20
>> index
>> server, which will perform the search and return the results to the
>> web application.
>>
>> We would like comments from users who have set up similar systems on
>> how you have accomplished (1) in your setups, and whether (2) is a
>> good choice for scaling.
>>
>>
>> Attached is a more complete RTF document outlining our architecture
>> and proposal. We appreciate your perusal and comments.
>>
>> Regards,
>> CW
>>
>> ---------------------------------------------------------------------=20=

>> ---
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> I'm acutely interrested by this issue too, as I'm working on =20
> distributed architecture of Lucene. I'm only at the very beginning =20
> of my study so that I can't help you much, but Hadoop maybe could =20
> fit to your requirements. It's a sub-project of Lucene aiming to =20
> parallelise Lucene.
> See http://lucene.apache.org/hadoop/about.html but I don't know =20
> wether it scales well to very small clusters...
>
> About your attached, I couldn't access it, it was only a "Partie =20
> 1.2" file containing this text:
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> Cordially,
>
> Samuel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

Read the Lucene Java FAQ at http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 17:30:25 2007
Return-Path: <java-user-return-28904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44967 invoked from network); 28 Jun 2007 17:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 17:30:25 -0000
Received: (qmail 79075 invoked by uid 500); 28 Jun 2007 17:30:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79041 invoked by uid 500); 28 Jun 2007 17:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79021 invoked by uid 99); 28 Jun 2007 17:30:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:30:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pratikshinghal@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:30:12 -0700
Received: by ug-out-1314.google.com with SMTP id c2so436869ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 10:29:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=DVBSyU0PG5JSWuvUKXuLMDUbq/XrB8tP0Ohy8k3INg7mx+wuNKMtBQnnpDumVFVA2WIufx571EH46wiOFthp4CTQsAaCsqUVEOucMYNWhfp8sJZSR8/uLVSH612TnTquxrxiXkvgmj0skip+CJPsRlF37Et0Ri2JcvWDyBvpuuQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=EW5bEtvUIAfnBptZFRzMRTApLeh2FDmxltg8a8sjHz8FGGyFCrk7fFoGh/z5gqhssm/I6hRpRh5qVSdbB9MU/YdHiOr0D9SQwhVjlFeR+hNfOjRUoGqIOMH3ltHUf8/aYE93ExlrdIl9JUtyIq9PR8jr/5QXe2+ETD0CGXSZWNU=
Received: by 10.82.156.12 with SMTP id d12mr4200040bue.1183051791135;
        Thu, 28 Jun 2007 10:29:51 -0700 (PDT)
Received: by 10.82.184.17 with HTTP; Thu, 28 Jun 2007 10:29:51 -0700 (PDT)
Message-ID: <5d766e4e0706281029k46b64a0bteecdf9fc572453da@mail.gmail.com>
Date: Thu, 28 Jun 2007 22:59:51 +0530
From: "pratik shinghal" <pratikshinghal@gmail.com>
To: java-user@lucene.apache.org
Subject: queryparser
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55799_32771532.1183051791112"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55799_32771532.1183051791112
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i m using lucene(org.apache.lucene) and i want the java code for parsing
single character string..

my code is :

QueryParser qp  = new QueryParser("",analyser);
String  str = " track 9";
Query que =  qp.parse(str);
System.out.println(que);

and i want the answer as  :    track ,  9


but i m getting only "track"  and not getting  "9" .
so tell me which analyser & queryparser i should use and kindly give me the
 java code for the same , as i m new to
lucene.

-- 
Pratik Shinghal

------=_Part_55799_32771532.1183051791112--

From java-user-return-28905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 17:39:19 2007
Return-Path: <java-user-return-28905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48750 invoked from network); 28 Jun 2007 17:39:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 17:39:18 -0000
Received: (qmail 8461 invoked by uid 500); 28 Jun 2007 17:39:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8099 invoked by uid 500); 28 Jun 2007 17:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8087 invoked by uid 99); 28 Jun 2007 17:39:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:39:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:39:08 -0700
Received: by ug-out-1314.google.com with SMTP id c2so439185ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 10:38:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=il2aH+Kfd+/FsuDflyVfgm72Z6i4fo7pxAy7lARmkca7ncEmbnMPUuEUoF/n3q6r/poCI34CPzRymDCArZ6vuHaVNVk7ETgvmU0/qvxRPhS+NahVPNHvM2gSRkdMtdlojrgMSjl/8HmNvavF/EaF5DGXMzkyKGQ08JNHw+aBQjA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZP3uFmjzUYN55HPi+r9G1pIJqtylB91cgXsfBolbb1pq+UWOs0/Dcg4t8XyDg1ejrVwbvjBEz/EepcEmnfrunDa2Wo7UgQl9r8h7NysxthTROEYhDkhurDeexoJBNQLNAEnHYARZKFuMlPmoDLG3Fl6cQPsgoH/vdgMRqk8shPE=
Received: by 10.78.193.5 with SMTP id q5mr1062420huf.1183052326681;
        Thu, 28 Jun 2007 10:38:46 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Thu, 28 Jun 2007 10:38:46 -0700 (PDT)
Message-ID: <6e3ae6310706281038h29d5a173pe95e06f411e4a203@mail.gmail.com>
Date: Thu, 28 Jun 2007 10:38:46 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scaling up to several machines with Lucene
In-Reply-To: <4683C894.90003@garambrogne.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49453_26880001.1183052326625"
References: <6c33f9950706280650g15a5df8bk1b3bc2ec226c1fcf@mail.gmail.com>
	 <4683C386.1000802@lingway.com> <4683C894.90003@garambrogne.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49453_26880001.1183052326625
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Basically you need to separate your web app from your searching, for a
scalable solution. Searching is a different concern. You can develop more
kinds of search when new requirement comes in.

Technorati's way is very similar to one of DBSight configuration. One
machine is dedicated for indexing, and one or several other machines are
dedicated for searching. Searching nodes subscribe to the indexing node.
Transferring the index is pretty quick. This way scales well.

  (Database)=3Dcrawl=3D>(Indexing node)=3Dreplicating index=3D>(Searching
nodes)=3D=3D>end user query

However, if your index is huge, you may need to change your index structure
to split indexing nodes into several, and one Indexing node only serves one
specific kind of index. This is kind of vertically slicing the index and
scale it.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes


On 6/28/07, Mathieu Lecarme <mathieu@garambrogne.net> wrote:
>
> Samuel LEMOINE a =E9crit :
> > I'm acutely interrested by this issue too, as I'm working on
> > distributed architecture of Lucene. I'm only at the very beginning of
> > my study so that I can't help you much, but Hadoop maybe could fit to
> > your requirements. It's a sub-project of Lucene aiming to parallelise
> > Lucene.
> > See http://lucene.apache.org/hadoop/about.html but I don't know wether
> > it scales well to very small clusters...
> >
> Reading from index replicated in several server is not hard, the writing
> (and locking) part is harder.
> The way choosen by technorati's guys is one computer to index, and rsync
> replication with cp and mv commit in the search cluster.
> If you need more power for indexing, then, use nutch.
>
> M.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49453_26880001.1183052326625--

From java-user-return-28906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 17:47:29 2007
Return-Path: <java-user-return-28906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51179 invoked from network); 28 Jun 2007 17:47:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 17:47:28 -0000
Received: (qmail 28317 invoked by uid 500); 28 Jun 2007 17:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28291 invoked by uid 500); 28 Jun 2007 17:47:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28276 invoked by uid 99); 28 Jun 2007 17:47:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:47:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 10:47:19 -0700
Received: by ug-out-1314.google.com with SMTP id c2so441322ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 10:46:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GEX6irnSXEMNGfJ6X0N2HbVvpstP/etO1UB/KFh2vp3GP1x02MAAIPYDmwe4VxtlzY08hxGPoSfMKef/cYEHS0V7gPeUT+TkSF/CNW32u7LKQ6QAWQ/b03OBe/UAltR3AsyXbiv+7KC/bpf/OSPZnjAKj57/iqDOxgPDR82MkS8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cCcN9eNot4xkM9EbHkuLSFB0aK9/I047tggPdsAqPmKM6nFNK6ktHNBZzWHMd5qrCc6STDbNViOk8cHLWDM2fBLWMzF2Y0CdPEXKfyZbCnV+wA8s8dpZ926lBza99SEzehw/YbDrQnFiQJ1cdJ3uT4c9mZfldG7N1U3TYMHG9UA=
Received: by 10.78.201.10 with SMTP id y10mr1066055huf.1183052817119;
        Thu, 28 Jun 2007 10:46:57 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Thu, 28 Jun 2007 10:46:57 -0700 (PDT)
Message-ID: <6e3ae6310706281046v3e4b5ce5x8f6f9c6849173bdb@mail.gmail.com>
Date: Thu, 28 Jun 2007 10:46:57 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching over multiple indexes with 1:m relationship
In-Reply-To: <F60407925D044842B7E21677C8B8CE2818C526DC@fafnir.intra.dmc.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49510_13671425.1183052817086"
References: <F60407925D044842B7E21677C8B8CE2818C526DC@fafnir.intra.dmc.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49510_13671425.1183052817086
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

What you should do is denorm the 1:m relationships.

Don't try to mimic the database. If you need to, you can keep the original =
2
indexes and create a third one.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes

On 6/28/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
>
> Hi folks!
>
> I know there is a MultiSearcher for searching over multiple indices, but
> my
> requirement is a bit special.
> I have two indices whose documents have a 1:m relationship. Most queries
> will only use the primary index, but some will have to look for detailed
> information in the secondary index (the index fields are of course
> different).
>
> What I plan to do:
> - first get the results from the primary index
> - then use the pk of the found documents and the additional search
> constraints to search in the secondary index
> - discard any primary results that did not match in the secondary index
>
> Is this ok, or am I completely nuts by doing that? Is there a better
> alternative?
>
> Thanks for any clues!
>
> Michael
>
>
> --
> Michael B=F6ckling
> Java Engineer
> dmc digital media center GmbH
> Rommelstra=DFe 11
> 70376 Stuttgart (Germany)
> Telefon: +49 711 601747-0
> Telefax: +49 711 601747-141
> E-Mail: Michael.Boeckling@dmc.de
> Internet: www.dmc.de
>
> Handelsregister: AG Stuttgart HRB 18974
> Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend
>
> ---------------------------------------------
> Besseres E-Business.
> dmc ist die kreative Vernetzung von Agentur, Systemhaus und Service. Seit
> =FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
> erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen Kunden z=E4=
hlen
> neckermann.de, Kodak und Telekom Training.
>
> dmc auf Platz 8 im aktuellen New Media Service Ranking.
> Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren wir mit=
 einem
> Umsatz von 13,50 Mio. Euro zu den Top 10 der erfolgreichsten New Media
> Dienstleister in Deutschland.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49510_13671425.1183052817086--

From java-user-return-28907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 18:24:26 2007
Return-Path: <java-user-return-28907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66866 invoked from network); 28 Jun 2007 18:24:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 18:24:25 -0000
Received: (qmail 19700 invoked by uid 500); 28 Jun 2007 18:24:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19665 invoked by uid 500); 28 Jun 2007 18:24:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19654 invoked by uid 99); 28 Jun 2007 18:24:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:24:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:24:15 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 536AF5B77A; Thu, 28 Jun 2007 11:23:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 314C47F403
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 11:23:54 -0700 (PDT)
Date: Thu, 28 Jun 2007 11:23:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Luke faster + Index Searcher is slow
In-Reply-To: <E7D8FAA3-A910-495D-8915-309E8B57374D@gmail.com>
Message-ID: <Pine.LNX.4.58.0706281031530.12259@hal.rescomp.berkeley.edu>
References: <ede880620706280903y7a03fef3x5a9d3dd0c2cde828@mail.gmail.com>
 <E7D8FAA3-A910-495D-8915-309E8B57374D@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Are you opening the IndexSearcher every time you query?  This is a
: costly operation.

just repeating the above line because it's important.  also...

: > The code i use is
: >                   File indexFile = new File(fileName);
: >                    FSDirectory dir = FSDirectory.getDirectory
: > (indexFile);
: >                    indexSearcher =new IndexSearcher(dir);
: >                   hits = indexSearcher.search(query);

are those the only lines you are timing?  are you timing all of your uses
of the hits obejct as well? what are you doing with the hits object?

the Hits class itself is not efficient if you iterate very deep in your
results ... i haven't looked at the internals of Luke, but i would be very
suprised if it was using the Hits class ... if you are really worried
about performacne, use one of the other (Expert) search methods.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 18:36:59 2007
Return-Path: <java-user-return-28908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72132 invoked from network); 28 Jun 2007 18:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 18:36:58 -0000
Received: (qmail 47968 invoked by uid 500); 28 Jun 2007 18:36:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47613 invoked by uid 500); 28 Jun 2007 18:36:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47602 invoked by uid 99); 28 Jun 2007 18:36:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:36:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:36:47 -0700
Received: by ug-out-1314.google.com with SMTP id c2so453642ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 11:36:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GRvw07Q5f9IEKKo9+F4Q9xtTMLvRPQ3ZpvCCrejij+N2p1ZooCZo4rMyVgCClG4FEvEHrYRMTssxUzJmtrEFXVZcnfzx2gTEgJP+tDYDM5hS62ZSxcLqK6NvlxQH5BzDQJC5Z2VcIYKaOU8fYwrPw+87J5vZYgMCtasN3nMMO+I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pybWStsnx4BFvtusSOgey+vc3mXQSq3ZkwlNcUZws2TKRz2ORKMWavnv1W2sbRVbunUXyOKELie6m7mnsPmsPgq8csnxMnt6eCLmAXNe+jgiH4Nhdo/1/nkNqo2Udt0tWnKfYmDZ4RBwCLSb2dz4twisVSg6gnUtgK4dbBDQiM0=
Received: by 10.82.182.1 with SMTP id e1mr4310517buf.1183055786096;
        Thu, 28 Jun 2007 11:36:26 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 28 Jun 2007 11:36:26 -0700 (PDT)
Message-ID: <359a92830706281136h26e13f98x8e214d0fadc6d96d@mail.gmail.com>
Date: Thu, 28 Jun 2007 14:36:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: inserting millions of entries
In-Reply-To: <4683D453.2080102@grivolla.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37340_22981559.1183055786072"
References: <4683D453.2080102@grivolla.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37340_22981559.1183055786072
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, opening/closing will be very costly. But I *believe*, although I
haven't tried it, that IndexModifier (2.1) will work for you.

But do NOT take my word for it as I haven't tried to do what you're doing.
But it should be easy to write a short test or two to prove that you can
find recently-inserted documents....

Best
Erick

On 6/28/07, Jens Grivolla <j+lucene@grivolla.net> wrote:
>
> Hi,
>
> I have a Lucene index with a few million entries, and I will need to
> add batches of a few hundred thousand or a few million additional
> entries.  Unfortunately, I absolutely need to have all indexed entries
> available when inserting a new one, even within one batch, in order to
> do some duplicate detection (using Lucene).
>
> I believe this means having to close the writer and reopen the reader
> to reflect the changes after each add.  I'm thinking of having the
> original index remain static and add the new entries to a separate
> index and merge the two later on.  I can even query them separately
> during the batch insertion if that gives me better performance.
>
> The questions:
> How costly is merging two big indexes?
> When / how often do I need to call optimize() on the new index?
> Should I just keep MergeFactor at the default value?
> If I have autoCommit=true, I can keep the writer open, but still need
> to flush() and reopen readers to reflect the changes, right?
> Is it better to have a MultiReader on both indexes or query them
> separately so I don't have to reopen the old one every time?
>
> Additional info:
> Documents are very short, just a few words each.  I have  4 gigs of
> RAM in the machine, of which I could allocate quite a bit as heap for
> the writer if that helps.
>
> Thanks for any hints on how to best go about this,
>
> Jens
>
> P.S.: all my mails to the list get silently dropped when sending through
> GMail, possibly because the sender is not the same as the from: header
> (and only the from: actually contains the subscribed address).  This is
> very annoying and makes it impossible for me to write to the list in
> many situations.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_37340_22981559.1183055786072--

From java-user-return-28909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 18:39:39 2007
Return-Path: <java-user-return-28909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72927 invoked from network); 28 Jun 2007 18:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 18:39:37 -0000
Received: (qmail 55526 invoked by uid 500); 28 Jun 2007 18:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55485 invoked by uid 500); 28 Jun 2007 18:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55474 invoked by uid 99); 28 Jun 2007 18:39:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:39:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:39:27 -0700
Received: by ug-out-1314.google.com with SMTP id c2so454331ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 11:39:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pcJ1KVDrREybtGYLjtaDgF4a/dB/9TsRf0PqMJ/SWheTngRIAqOZiBlEd5GmvcMRaAB2Gbnzf8aX9ngV5q2DXPCL06NkD4EcEcOEt3tS2j8Ru+8wp70fNSJgOl8TbFroLqtWLyq99l20Iq8TgDPqYq+foxA2nV5geuB4EAUZz+g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WAMg4J0/b5M8t+gTSthh7Qudk9W+R+XX6MtcXnzd8kvilRDlz6tW5u5YZ+d21mU9gt+ZhaNf6VVsa1LqDwVL7jhVzJor6okRft03feJ7tKdpZEIlGZvMC7sxtbe7nkxYrHKtp9laS3+De09B+2dhTLdnBdzc02zkDW6K3pCw5q8=
Received: by 10.82.112.3 with SMTP id k3mr4336938buc.1183055944702;
        Thu, 28 Jun 2007 11:39:04 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 28 Jun 2007 11:39:04 -0700 (PDT)
Message-ID: <359a92830706281139h3fb5dc3g1e0f3ca2cf14405b@mail.gmail.com>
Date: Thu, 28 Jun 2007 14:39:04 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Adding Documents to index in a batch process
In-Reply-To: <20070628164839.GA16302@dummy>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37372_15730793.1183055944683"
References: <20070628164839.GA16302@dummy>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37372_15730793.1183055944683
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I guess I don't understand the problem. Can you build the documents
from within a loop or not? If you can, it's simple...

open indexwriter
while (build a document)
    write to index

close/optimize.

Or are you saying that you can't build from within a loop?

Best
Erick

On 6/28/07, Kai Weber <kai.weber@glorybox.de> wrote:
>
> Hello,
>
> In my application I have to add documents to the index as follows:
>
> 1. build the document to add from a repository
> 2. obtain an IndexWriter
> 2. add document to index
> 4. write and optimize index, close writer
> 5. goto 1 until no documents left
>
> I must work with a legacy code witch does the document
> building and no easy way to get indexing into it like I was used to
> (foreach document... add to index then write and close indexer).
>
> How could I resuse the IndexWriter? My idea is to have something like
> this:
>
> 1. create IndexWriter
> 2. reuse IndexWriter
> 3. add document to index
> 4. goto 2 until no documents left
> 5. write and optimize index, close writer
>
> How would you implement this? Are there any examples I could look at?
>
> Regards, Kai
> --
> * http://www.glorybox.de/
>   PGP 1024D/594D4132 B693 5073 013F 7F56 5DCC  D9C2 E6B5 448C 594D 4132
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_37372_15730793.1183055944683--

From java-user-return-28910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 18:40:58 2007
Return-Path: <java-user-return-28910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73449 invoked from network); 28 Jun 2007 18:40:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 18:40:57 -0000
Received: (qmail 60643 invoked by uid 500); 28 Jun 2007 18:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60605 invoked by uid 500); 28 Jun 2007 18:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60594 invoked by uid 99); 28 Jun 2007 18:40:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:40:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:40:47 -0700
Received: by ug-out-1314.google.com with SMTP id c2so454638ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 11:40:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=p/k52455N5IVXilVkEifPzvyJk9mdLVvOxd0N2YIOjUTNrUD5Po+AN+77tV1d95QKmagVI5sWzUlqDQdTgzeQdVrHAKs927uLoPNw83rRjcsamMhlXzTc5yqzlk5c9AkczQTG6XbfSQxWfvDsaaOtoGmWRIqmTiSZzCLGxLU9MQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t6/s2ku4lE6aPjz2OvgW9aeNXoO7G6cMJh2t7FETUOP541g/1TDGIHjvcZ/e210ThD2ZmYeYTYMuVm+rRRDL9+U0j9o0sjdTl0SxyzFmhGCF9q1OaeS+CIxFaC5VUhn3wCToWS8zULqlGT8dkFwzwhGOyJAKBBrlKq1XVpSqc6Y=
Received: by 10.82.170.2 with SMTP id s2mr4356267bue.1183056026231;
        Thu, 28 Jun 2007 11:40:26 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 28 Jun 2007 11:40:26 -0700 (PDT)
Message-ID: <359a92830706281140h5fcd3104rd60dd3523258ad16@mail.gmail.com>
Date: Thu, 28 Jun 2007 14:40:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: queryparser
In-Reply-To: <5d766e4e0706281029k46b64a0bteecdf9fc572453da@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37404_612133.1183056026213"
References: <5d766e4e0706281029k46b64a0bteecdf9fc572453da@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37404_612133.1183056026213
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What do you get if you do a
System.out.println(que.toString())?

And what analyzer are you using?

Erick

On 6/28/07, pratik shinghal <pratikshinghal@gmail.com> wrote:
>
> i m using lucene(org.apache.lucene) and i want the java code for parsing
> single character string..
>
> my code is :
>
> QueryParser qp  = new QueryParser("",analyser);
> String  str = " track 9";
> Query que =  qp.parse(str);
> System.out.println(que);
>
> and i want the answer as  :    track ,  9
>
>
> but i m getting only "track"  and not getting  "9" .
> so tell me which analyser & queryparser i should use and kindly give me
> the
> java code for the same , as i m new to
> lucene.
>
> --
> Pratik Shinghal
>

------=_Part_37404_612133.1183056026213--

From java-user-return-28911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 18:41:45 2007
Return-Path: <java-user-return-28911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73705 invoked from network); 28 Jun 2007 18:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 18:41:44 -0000
Received: (qmail 63657 invoked by uid 500); 28 Jun 2007 18:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63629 invoked by uid 500); 28 Jun 2007 18:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63618 invoked by uid 99); 28 Jun 2007 18:41:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:41:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:41:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CEB9830EFC19; Thu, 28 Jun 2007 12:41:11 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.70] (d-128-193-70.bootp.Virginia.EDU [128.143.193.70])
	by ehatchersolutions.com (Postfix) with ESMTP id 5428330EFC16
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 12:40:54 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <5d766e4e0706281029k46b64a0bteecdf9fc572453da@mail.gmail.com>
References: <5d766e4e0706281029k46b64a0bteecdf9fc572453da@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F6258FFF-A4B1-4AA2-A407-2870F3D0C887@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: queryparser
Date: Thu, 28 Jun 2007 14:40:50 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Jun 28, 2007, at 1:29 PM, pratik shinghal wrote:

> i m using lucene(org.apache.lucene) and i want the java code for  
> parsing
> single character string..
>
> my code is :
>
> QueryParser qp  = new QueryParser("",analyser);
> String  str = " track 9";
> Query que =  qp.parse(str);
> System.out.println(que);
>
> and i want the answer as  :    track ,  9
>
>
> but i m getting only "track"  and not getting  "9" .
> so tell me which analyser & queryparser i should use and kindly  
> give me the
> java code for the same , as i m new to
> lucene.

The Analysis section here should help:

	<http://today.java.net/pub/a/today/2003/07/30/LuceneIntro.html>

(note the code in that article is Lucene 1.4-1.9 compatible, some  
slight tweaks are needed to make it 2.x compliant)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 18:43:55 2007
Return-Path: <java-user-return-28912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74719 invoked from network); 28 Jun 2007 18:43:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 18:43:55 -0000
Received: (qmail 75627 invoked by uid 500); 28 Jun 2007 18:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75594 invoked by uid 500); 28 Jun 2007 18:43:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75583 invoked by uid 99); 28 Jun 2007 18:43:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:43:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:43:44 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 20C845B77A; Thu, 28 Jun 2007 11:43:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 061E07F403
	for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 11:43:24 -0700 (PDT)
Date: Thu, 28 Jun 2007 11:43:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: LUCENE on Eclipse
In-Reply-To: <4683A698.7080809@yahoo.fr>
Message-ID: <Pine.LNX.4.58.0706281139560.12259@hal.rescomp.berkeley.edu>
References: <OFA96EAD62.7701F2CD-ON88257307.002B901E-88257307.002BCBF6@il.ibm.com>
 <46825D3C.3090204@lingway.com> <E19963B4-34BF-442D-B2DE-79150F38C06A@apache.org>
 <46837F8E.7070703@lingway.com> <FD819A62-4383-4633-BB14-7DB556A1A2D5@apache.org>
 <4683A698.7080809@yahoo.fr>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


When starting a new discussion on a mailing list, please do not reply to
an existing message, instead start a fresh email.  Even if you change the
subject line of your email, other mail headers still track which thread
you replied to and your question is "hidden" in that thread and gets less
attention.   It makes following discussions in the mailing list archives
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking

: i would like if you could help me finding some documentation about how
: to import lucene source into eclipse IDE. I'm a new user for this API,
: and i would like to learn how to use it as i seams powerful...

:  I would be very grateful if somebody have any tutorial; and i propose
: to work on it's translation in French language.

the website has a getting started tutorial that includes info on
downloading lucene.  opening in eclipse should be no differnet then any
other code base...

http://lucene.apache.org/java/docs/gettingstarted.html



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 28 18:45:25 2007
Return-Path: <java-user-return-28913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76912 invoked from network); 28 Jun 2007 18:45:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2007 18:45:24 -0000
Received: (qmail 80536 invoked by uid 500); 28 Jun 2007 18:45:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80506 invoked by uid 500); 28 Jun 2007 18:45:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80489 invoked by uid 99); 28 Jun 2007 18:45:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:45:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 11:45:02 -0700
Received: by ug-out-1314.google.com with SMTP id c2so455673ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 11:44:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EieIGriFIBoz2dnh9dTdhjTUlG+P26nlxd6Ba1+zsHm9bLZtC+LX5ht7sCzLeQAfFn8pufMzi2ZBYqM4qIVmCOMpEUI7jgtQuTJJh0KAE6PbvPei+MJJ9OfzMaU7EtakojcwIf43x7m2n9p09bSyyNuwT60DIRAJiXXZARihYjQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LmUgMKiK0oBWJYs5UmoVYUL2FOk7yuwWm51OlJx7Yf9WXiM9xomzozC4Xktx8vbhsKIRFvUNCAIUUrePY7AJEuWci4UPx3LKX+zYR7X07Zrgp7HCafD+RV6DG1t8Hi/SvOJb3hfi9OsyuFte46ULwsmVlXSBFBkdg74E6P16vt0=
Received: by 10.82.175.17 with SMTP id x17mr4366252bue.1183056280811;
        Thu, 28 Jun 2007 11:44:40 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 28 Jun 2007 11:44:40 -0700 (PDT)
Message-ID: <359a92830706281144v8dff675g87bae770c3631119@mail.gmail.com>
Date: Thu, 28 Jun 2007 14:44:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching over multiple indexes with 1:m relationship
In-Reply-To: <F60407925D044842B7E21677C8B8CE2818C526DD@fafnir.intra.dmc.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37464_15909069.1183056280754"
References: <F60407925D044842B7E21677C8B8CE2818C526DD@fafnir.intra.dmc.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37464_15909069.1183056280754
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Chris is spot-on. Your data set is so small that I wouldn't worry about
speed unless and until you have proof that it's a problem. The complexity
you'll introduce by having multiple indexes just won't be worth it.

In your case, following Chris's advice and de-normalizing the data would
be the first you should try.

Erick.

On 6/28/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
>
> Hi Erickson,
>
> thanks for your reply.
>
> Of course you are right that its a bit insane to mimic a database-schema
> with indices, but thats how it is. The primary index is already in use,
> the
> extended requirements came later.
>
> The Index isn't really that big, the primary one has 2-3 MB of data, I
> don't
> know yet how big the secondary one will be, but probably less than 20
> Megs.
> The idea was that most searches will only need the first index, it is onl=
y
> by using an extended search form that the secondary index is queried.
> Keeping the first index small should help with performance, where the mai=
n
> load is handled.
>
> The number of primary results will often be less than 200, typically
> around
> 20 I guess, so its not that big of a deal to iterate through them.
>
> Regards,
>
> Michael
>
>
> > -----Urspr=FCngliche Nachricht-----
> > Von: Erick Erickson [mailto:erickerickson@gmail.com]
> > Gesendet: Donnerstag, 28. Juni 2007 16:09
> > An: java-user@lucene.apache.org
> > Betreff: Re: Searching over multiple indexes with 1:m relationship
> >
> >
> > I do have an off-the-wall question.. Why have two indexes? There
> > are, of course, good reasons, but they're things like size and speed.
> >
> > Where I'm going here is that Lucene does NOT require that all
> > documents have the same fields. So it's perfectly reasonable to index
> > heterogeneous data (or differing forms of the same data) in a
> > single index.
> > This may not fit your requirements, but I thought I'd mention it.
> >
> > That said, it really doesn't bear on your question since
> > you'd really have
> > two logical indexes in the same physical index. Although
> > maybe it does.
> > If all the data were in one index, then perhaps you could do
> > exactly one
> > search instead.
> >
> > I'm always leery of using an index to mimic what looks like database
> > functionality. That often means that you either should actually use a
> > database for the database-like parts or get much more clever
> > in your index
> > so you don't need what are essentially joins.
> >
> > All that said, a lot depends on the data set size. If your first query
> > results
> > in, say, 100 documents (pks) that you need to use for your
> > second query,
> > it probably doesn't matter whether you do a lot of manual
> > processing. If the
> > first query results in 1,000,000 pks, then it does....
> >
> > So how much data are you talking about? Even the single-index idea
> > depends upon whether we're talking a couple of G index size of a
> > couple of T...
> >
> > Best
> > Erick
> >
> >
> >
> >
> > On 6/28/07, Michael B=F6ckling <Michael.Boeckling@dmc.de> wrote:
> > >
> > > Hi folks!
> > >
> > > I know there is a MultiSearcher for searching over multiple
> > indices, but
> > > my
> > > requirement is a bit special.
> > > I have two indices whose documents have a 1:m relationship.
> > Most queries
> > > will only use the primary index, but some will have to look
> > for detailed
> > > information in the secondary index (the index fields are of course
> > > different).
> > >
> > > What I plan to do:
> > > - first get the results from the primary index
> > > - then use the pk of the found documents and the additional search
> > > constraints to search in the secondary index
> > > - discard any primary results that did not match in the
> > secondary index
> > >
> > > Is this ok, or am I completely nuts by doing that? Is there a better
> > > alternative?
> > >
> > > Thanks for any clues!
> > >
> > > Michael
> > >
> > >
> > > --
> > > Michael B=F6ckling
> > > Java Engineer
> > > dmc digital media center GmbH
> > > Rommelstra=DFe 11
> > > 70376 Stuttgart (Germany)
> > > Telefon: +49 711 601747-0
> > > Telefax: +49 711 601747-141
> > > E-Mail: Michael.Boeckling@dmc.de
> > > Internet: www.dmc.de
> > >
> > > Handelsregister: AG Stuttgart HRB 18974
> > > Gesch=E4ftsf=FChrer: Andreas Magg, Daniel Rebhorn, Andreas Schwend
> > >
> > > ---------------------------------------------
> > > Besseres E-Business.
> > > dmc ist die kreative Vernetzung von Agentur, Systemhaus und
> > Service. Seit
> > > =FCber 10 Jahren entwickeln und realisieren wir zukunftweisende und
> > > erfolgreiche E-Business-L=F6sungen. Zu unseren langj=E4hrigen
> > Kunden z=E4hlen
> > > neckermann.de, Kodak und Telekom Training.
> > >
> > > dmc auf Platz 8 im aktuellen New Media Service Ranking.
> > > Als inhabergef=FChrte und netzwerkunabh=E4ngige Agentur geh=F6ren
> > wir mit einem
> > > Umsatz von 13,50 Mio. Euro zu den Top 10 der
> > erfolgreichsten New Media
> > > Dienstleister in Deutschland.
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_37464_15909069.1183056280754--

From java-user-return-28914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 00:20:31 2007
Return-Path: <java-user-return-28914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18758 invoked from network); 29 Jun 2007 00:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 00:20:30 -0000
Received: (qmail 80401 invoked by uid 500); 29 Jun 2007 00:20:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80213 invoked by uid 500); 29 Jun 2007 00:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80198 invoked by uid 99); 29 Jun 2007 00:20:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 17:20:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Jun 2007 17:20:20 -0700
Received: (qmail 79117 invoked by uid 60001); 29 Jun 2007 00:19:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=A4Y/tLOB+BhL3/i8g5/5ogwfiYa9taI8GkgkKnjrKV761q68lBR+4a4FsoRPdje02870eDu4DL6tl8DlQZmNQASpTZ8FvoR9jNMlYnvf6qUixbwjGwMuVbbzNfUI77rLOtP/rhgg67QKcHGyKgj9dayFc/Gpjga0Y8hqNmDlcmI=;
X-YMail-OSG: qEb0NagVM1kq3OWNJC7.JiEItd1Qt3AV0wPh7rQDqEpIYFTUZCnUCLsJdtKl97C0Vb0oIYIJlq9nYy6dI7Fnz7WquOzo9kObXNsMlmFSO2ilpreopgd3LX61HQO8zG9IraVZJoH_fl2nEAo-
Received: from [78.3.26.174] by web50307.mail.re2.yahoo.com via HTTP; Thu, 28 Jun 2007 17:19:59 PDT
X-Mailer: YahooMailRC/651.38 YahooMailWebService/0.7.41.16
Date: Thu, 28 Jun 2007 17:19:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene as primary object storage
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Message-ID: <419764.78838.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Karl, you might want to have a look at Zoe (the email app from several years ago that uses Lucene as its storage).
Also, there is DbDirectory for Lucene, which should have XA support.  Andi will know.

Otis
 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
Simpy -- http://www.simpy.com/  -  Tag  -  Search  -  Share

----- Original Message ----
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, June 27, 2007 2:16:50 AM
Subject: Lucene as primary object storage

Until recently I have only used Lucene as an index. I'm very  
interested to hear what you people have to say about using Lucene as  
the primary and only persistance layer in an application.

I would feel much safer if I had a transactionlog for crash recovery.  
So I might get me one of those. Are there more things I should worry  
about?


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 00:48:50 2007
Return-Path: <java-user-return-28915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25445 invoked from network); 29 Jun 2007 00:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 00:48:49 -0000
Received: (qmail 16246 invoked by uid 500); 29 Jun 2007 00:48:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16192 invoked by uid 500); 29 Jun 2007 00:48:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16181 invoked by uid 99); 29 Jun 2007 00:48:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 17:48:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 17:48:40 -0700
Received: by wx-out-0506.google.com with SMTP id i28so585484wxd
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 17:48:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ThKlmVwH/PjMkF/Z1STReoTwlNUPBq21J2GqN8HEvqQ2xbHpTaaGzHs683KUpIVWyTW+4ATckOCckoYywz3YjEv2Plh/QPc0kCUX1hE3SIpIk1C7CJWpagnL733lonSIs9tS1bYG1Pz/QB4yvwl13KB5XjU3Sd5HUdi/6jSLx5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=DcsK7WsKxzpuVc+dHGmZe9ObTFQ6635gHtpn+ozIZL6Q4TFyoOL/blZujOXxM9r4Cz/eQhG0AYkkAoD87IZQMTx3F5u2QCgx54ibp0G+llU7tL1PCx9i+IRSkXxK/3yW6yFhd41aqXLajulsICHH+MwZohnrbpYdlEh6Os7UsW8=
Received: by 10.70.45.10 with SMTP id s10mr49644wxs.1183078099922;
        Thu, 28 Jun 2007 17:48:19 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id o29sm5154897elf.2007.06.28.17.48.18
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Jun 2007 17:48:18 -0700 (PDT)
Message-ID: <46845683.2060604@gmail.com>
Date: Thu, 28 Jun 2007 20:46:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Rewrite one phrase to another in search query
References: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
In-Reply-To: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You might try my Query Parser, Qsol. http://myhardshadow.com/qsol.php
There is a find/replace feature that will do what you want. FindReplace 
takes the find string, the replace string, boolean for case sensitive, 
boolean to indicate the replacement will act as an operator (allows for 
correct default space operator functionality).

- Mark
Example Code:

        QsolParser parser = ParserFactory.getInstance(new 
QsolConfiguration())
                                     .getParser(false);

        parser.addFindReplace(new FindReplace("\"the old fast razor\"", 
"tofr",
                true, false));

        parser.addFindReplace(new FindReplace("tofr", "\"the old fast 
razor\"",
                true, false));

        example = "test(\"the old fast razor\" & mark)";
        expected = "+test:tofr +test:mark";
        assertEquals(expected, parse(example));

        Parse Method:

        Query result = null;
        try {
            result = parser.parse("field", query, analyzer);
        } catch (EmptyQueryException e) {
            return "";
        } catch (QsolSyntaxException e) {
            throw new RuntimeException(e);
        }

        return result.toString();

Aliaksandr Radzivanovich wrote:
> What if I need to search for synonyms, but synonyms can be expanded to
> phrases of several words?
> For example, user enters query "tcp", then my application should also
> find documents containing phrase "Transmission Control Protocol". And
> conversely, user enters "Transmission Control Protocol", then my
> application should also find documents with word "tcp".
>
> It seems like Lucene does not support this scenario out of the box.
> Then where to look for the solution? What Lucene
> extensions/classes/interfaces should I investigate?
>
> Thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 01:10:15 2007
Return-Path: <java-user-return-28916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30553 invoked from network); 29 Jun 2007 01:10:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 01:10:14 -0000
Received: (qmail 33552 invoked by uid 500); 29 Jun 2007 01:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33508 invoked by uid 500); 29 Jun 2007 01:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33497 invoked by uid 99); 29 Jun 2007 01:10:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 18:10:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.28.232.18] (HELO relay1.mail.vrmd.de) (81.28.232.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 18:10:02 -0700
Received: from [88.74.8.215] (helo=dummy)
	by relay1.mail.vrmd.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.60)
	(envelope-from <kai.weber@glorybox.de>)
	id 1I44zS-0007KU-Ta
	for java-user@lucene.apache.org; Fri, 29 Jun 2007 03:09:39 +0200
Received: from kai by dummy with local (Exim 4.67)
	(envelope-from <kai.weber@glorybox.de>)
	id 1I44zU-0004iZ-PH
	for java-user@lucene.apache.org; Fri, 29 Jun 2007 03:09:40 +0200
Date: Fri, 29 Jun 2007 03:09:40 +0200
From: Kai Weber <kai.weber@glorybox.de>
To: java-user@lucene.apache.org
Subject: Re: Adding Documents to index in a batch process
Message-ID: <20070629010940.GA17811@dummy>
References: <20070628164839.GA16302@dummy> <359a92830706281139h3fb5dc3g1e0f3ca2cf14405b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <359a92830706281139h3fb5dc3g1e0f3ca2cf14405b@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Relay-User: webmaster@glorybox.de
X-Virus-Checked: Checked by ClamAV on apache.org

* Erick Erickson <erickerickson@gmail.com>:
> I guess I don't understand the problem. Can you build the documents
> from within a loop or not? If you can, it's simple...
> 
> open indexwriter
> while (build a document)
>    write to index
> 
> close/optimize.
> 
> Or are you saying that you can't build from within a loop?

Thats true, no loop.

I think I have to save the IndexWriter instance somewhere in application
scope or wrap it as a singleton.

Is there any example code I could reuse or learn from?

Kai
-- 
* http://www.glorybox.de/
  PGP 1024D/594D4132 B693 5073 013F 7F56 5DCC  D9C2 E6B5 448C 594D 4132

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 03:14:09 2007
Return-Path: <java-user-return-28917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70684 invoked from network); 29 Jun 2007 03:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 03:14:07 -0000
Received: (qmail 77509 invoked by uid 500); 29 Jun 2007 03:14:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77465 invoked by uid 500); 29 Jun 2007 03:14:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77450 invoked by uid 99); 29 Jun 2007 03:14:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 20:14:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 20:13:59 -0700
Received: from xylophone.syd.nuix.com.au (unknown [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id C50E04A809D
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 13:18:01 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Can I delete without shuffling document IDs?
Date: Fri, 29 Jun 2007 13:08:56 +1000
User-Agent: KMail/1.9.7
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200706291308.56839.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all.

Is there currently any way to delete documents from the middle of a text index 
without a risk of the document IDs changing later?  I'm aware that they 
probably won't change unless we optimise or unless the user adds more data, 
but unfortunately adding more data is now a potential occurrence.

I already know I can simulate this behaviour by keeping a filter on disk and 
using it with every query, but if there is some tricky way to do it natively 
I might be able to save some of the potential overhead, as well as some disk 
space by not storing the documents we're not using anymore.

(The reason we want the IDs to be stable is that we need a way to correlate 
the documents with an external database and the cost of retrieving the 
document from the Hits object was too slow compared to retrieving the id.)

Another potential way around this is to maintain a mapping table from actual 
document ID to the sequence ID. (e.g. if documents 1000 through 1999 are 
deleted, there would be an entry in the table saying that ID 2000 starts at 
document ID 1000.)

I just wanted to put the question out in case someone has solved the exact 
same problem already.

Daniel


-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 06:51:52 2007
Return-Path: <java-user-return-28918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30752 invoked from network); 29 Jun 2007 06:51:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 06:51:51 -0000
Received: (qmail 48771 invoked by uid 500); 29 Jun 2007 06:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48728 invoked by uid 500); 29 Jun 2007 06:51:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48713 invoked by uid 99); 29 Jun 2007 06:51:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 23:51:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 23:51:40 -0700
Received: by ug-out-1314.google.com with SMTP id c2so572567ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 23:51:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=oMgszZAut9XD2KULxSYXq8xhfrsDs6kIhqNvH+LBh03x20I41iPoRMD4QemZabE/1VFy5lghzaE3MTpfCSRgoIILSeMwO9l6e53NLT048HBD8sRCJXxCd0UjSTgj5BRWy0Lsprb0lDf4Ri8PHiqEoiZ3OKHgWtNMhCtXWQarTI8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=KSagdYDXYcKtuC8MY8Nc8YPurvhuPopHwClDGcd9NRpSj16K318iws+z6TTPUgtD+wrknTruDpWgfbFaZ/DaH1xHQEDsDBJ5YDMiiFSPH/iRwQ5xwHvPMsvu6I7nvBWJJCrYyToDZT3IPtNusulx+HdZSfLKyXh+ZFvoT5AbiBc=
Received: by 10.67.22.2 with SMTP id z2mr1610999ugi.1183099878797;
        Thu, 28 Jun 2007 23:51:18 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.110.134])
        by mx.google.com with ESMTP id y18sm8240614fkd.2007.06.28.23.51.17
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 28 Jun 2007 23:51:17 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <79378E12-EEAF-4862-A28E-8F5568A6DD99@hibernate.org>
References: <F3B3254741B1404D92215D80C451DE84017E81A7@CORPUSMX10B.corp.emc.com> <B17A8D07-1D70-4515-B471-8251921C0941@gmail.com> <79378E12-EEAF-4862-A28E-8F5568A6DD99@hibernate.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <17AF4BEE-4642-46B4-B8B2-F7AA70E32C50@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Lucene as primary object storage
Date: Fri, 29 Jun 2007 08:48:17 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

28 jun 2007 kl. 15.37 skrev Emmanuel Bernard:
> I don't really like the idea actually: I'm much comfortable with  
> having my data in a relational DB :)

If you don't mind, please develop that a bit further.


I think Lucene is suited pretty well for object storage if you also  
need it as an index. It is especially great for them heavy  
polymorphic or inheritive models. One simple term query can span  
multiple classes. Many ORMs require SQL joins or what unless you  
choose to store the data in some semi-retarded way.

There are of course some setbacks. I can not update a single field of  
an instance, I have to update the whole thing. So one have to be  
careful with bi-directional associations beween classes and such.


My hypotheisis in general goes something like "the less, the simpler,  
the faster, the better it is". That is probably why I sort of got  
sidetracked by the codemonkey on my shoulder while fooling around  
with @annotation for the first time and ended up with an object  
storage somewhere between the Sleepycat transactional API and the  
Hibernate lazy patterns, but using Lucene as persistency. I still  
don't know how well it works with lots of data.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 06:55:58 2007
Return-Path: <java-user-return-28919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32660 invoked from network); 29 Jun 2007 06:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 06:55:57 -0000
Received: (qmail 55279 invoked by uid 500); 29 Jun 2007 06:55:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55250 invoked by uid 500); 29 Jun 2007 06:55:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55239 invoked by uid 99); 29 Jun 2007 06:55:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 23:55:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jun 2007 23:55:48 -0700
Received: by ug-out-1314.google.com with SMTP id c2so573060ugf
        for <java-user@lucene.apache.org>; Thu, 28 Jun 2007 23:55:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=cIo5T4aN9iigl/cITgREygV6zZER9kTYZrT45K5JLffxE66QXrhlNnDNq25CknX6T20fLqiX2DYFwDB5Kh9FBwl6XMdEsfTKyxmljU5FnTfTc1U5oWBEX1iRQZ686GsLkYzk+bJK0KNkwana2QClvNngU8kbOuVdxOmgBFJ5XJs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=eWOfdAsJp5WUe23N95Cj6rQkkrIb3peC9iDC9sFe/9bCnaw097X8Ne40+CeQsW3e43IOCUijlyp3mK9eDJKF5Sv77pmmHLROK4EYKIGgaW95VJQX1ffk2vO43ZP4skphcmEjF+kB9wQ6WqL6p+AL0sMwUS5+LGZBXetaaEmx1tg=
Received: by 10.67.89.6 with SMTP id r6mr2349003ugl.1183100127310;
        Thu, 28 Jun 2007 23:55:27 -0700 (PDT)
Received: from ?192.168.1.254? ( [83.249.110.134])
        by mx.google.com with ESMTP id a37sm8196599fkc.2007.06.28.23.55.26
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 28 Jun 2007 23:55:26 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <200706291308.56839.daniel@nuix.com>
References: <200706291308.56839.daniel@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <006A1CF4-3912-4F86-AF7C-F260863B73DF@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Can I delete without shuffling document IDs?
Date: Fri, 29 Jun 2007 08:52:23 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


29 jun 2007 kl. 05.08 skrev Daniel Noll:

>
> I just wanted to put the question out in case someone has solved  
> the exact
> same problem already.

I've posted some experiments in the LUCENE-879. The patch replace  
delted documents with a new dummy document. The second patch contains  
some merge policy improvments for this hack.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 08:27:07 2007
Return-Path: <java-user-return-28920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73386 invoked from network); 29 Jun 2007 08:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 08:27:06 -0000
Received: (qmail 51580 invoked by uid 500); 29 Jun 2007 08:27:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51550 invoked by uid 500); 29 Jun 2007 08:27:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51534 invoked by uid 99); 29 Jun 2007 08:27:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 01:27:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pratikshinghal@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 01:26:57 -0700
Received: by mu-out-0910.google.com with SMTP id g7so902301muf
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 01:26:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oBlRot0Ghjdq1PBQXcBE3r34k6Y99KjpA+ToPajm/U0h7pP6+sdsm48BuS/zTRegPQe1YcbRIjwICRl7WD4uZm3LdUaRXvdj5N6r6dOdgRiOae7e/LqjkWU+3jR45LnuoMA0pDxA47Ij8ruoPhucTegY0qjc3tSvk+lRmU5YZ1Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rARp14RerIY8Jqy9Pd/yhIgaolgCmzXx5YIXM46RxTBJ1g9E0Y7lTzNKpki+kKMqXDmAau3EYTJmTs439BuwIgSOYTE3AXXsXWU+XOcoRodKfAXlTezqqtycIVQe+9C5pauPQHeTnOF9jg8Y53gqavjf5LGwN/ffrehwILjIUUA=
Received: by 10.82.111.8 with SMTP id j8mr5758053buc.1183105595474;
        Fri, 29 Jun 2007 01:26:35 -0700 (PDT)
Received: by 10.82.184.17 with HTTP; Fri, 29 Jun 2007 01:26:35 -0700 (PDT)
Message-ID: <5d766e4e0706290126i7b5719dbx9bf758911a06f488@mail.gmail.com>
Date: Fri, 29 Jun 2007 13:56:35 +0530
From: "pratik shinghal" <pratikshinghal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: queryparser
In-Reply-To: <359a92830706281140h5fcd3104rd60dd3523258ad16@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64726_18674030.1183105595441"
References: <5d766e4e0706281029k46b64a0bteecdf9fc572453da@mail.gmail.com>
	 <359a92830706281140h5fcd3104rd60dd3523258ad16@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64726_18674030.1183105595441
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 6/29/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> What do you get if you do a
> System.out.println(que.toString())?
>
> And what analyzer are you using?
>
> Erick
>
> On 6/28/07, pratik shinghal <pratikshinghal@gmail.com> wrote:
> >
> > i m using lucene(org.apache.lucene) and i want the java code for parsing
> > single character string..
> >
> > my code is :
> >
> > QueryParser qp  = new QueryParser("",analyser);
> > String  str = " track 9";
> > Query que =  qp.parse(str);
> > System.out.println(que);
> >
> > and i want the answer as  :    track ,  9
> >
> >
> > but i m getting only "track"  and not getting  "9" .
> > so tell me which analyser & queryparser i should use and kindly give me
> > the
> > java code for the same , as i m new to
> > lucene.
> >
> > --
> > Pratik Shinghal
> >
>


the output of   System.out.println(que.toString())  is    "track".
i m using AlphanumericAnalyser which is the custom Analyser made by me.
the code of this analyser is as follows :

*

class* AlphanumericAnalyzer *extends* Analyzer {

*public* *TokenStream* *tokenStream*(String *fieldName*, Reader reader) {

*return* *new* CharTokenizer(reader) {

*protected* *char* normalize(*char* c) {

*return* Character.*toLowerCase*(c);

}

*protected* *boolean* isTokenChar(*char* c) {

*return* Character.*isLetter*(c) || Character.*isDigit*(c);

}

};

}

*}*




-- 
Pratik Shinghal

------=_Part_64726_18674030.1183105595441--

From java-user-return-28921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 09:01:41 2007
Return-Path: <java-user-return-28921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86033 invoked from network); 29 Jun 2007 09:01:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 09:01:39 -0000
Received: (qmail 4407 invoked by uid 500); 29 Jun 2007 09:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3461 invoked by uid 500); 29 Jun 2007 09:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3446 invoked by uid 99); 29 Jun 2007 09:01:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 02:01:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 02:01:30 -0700
Received: by nz-out-0506.google.com with SMTP id i28so73259nzi
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 02:01:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=bQl1UxAPzOBfB0x6r0Lhv1txqSItPUkDcfitGh94L2Lhi7mtHZRog4E4OTPXwraLEdbYNsuQl+Y2lkmLCKhAGi15+8Fak2NJKFpQh/s8uCL7X5sN/ZsjLP6IQ5WVpu2Mn1D/4HgHjY1BjcMbxakRb3qxzl+dA2z4+9ZRubVc83c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=FmWDzCYALdcnfczeN8+x+uT03nQZu+MNOTQuXzxoImJMONrbI0IfI7OStJDS/INqoHmb7Q8AGh6K9FTplv6FK2II2Gu3cxbTn4vl5mhZ9ovSw/6t7K02seoiBefIOkRYMzMMxxwcfIZo8OfxBMv2ym7fmrBCHRt2IhnA/1AYqUU=
Received: by 10.114.160.1 with SMTP id i1mr2427585wae.1183107668974;
        Fri, 29 Jun 2007 02:01:08 -0700 (PDT)
Received: by 10.114.37.3 with HTTP; Fri, 29 Jun 2007 02:01:08 -0700 (PDT)
Message-ID: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
Date: Fri, 29 Jun 2007 10:01:08 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene 2.2, NFS, Lock obtain timed out
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We are sharing a Lucene index in a Linux cluster over an NFS share.  We have
multiple servers reading and writing to the index.

I am getting regular lock exceptions e.g.
Lock obtain timed out:
NativeFSLock@/mnt/nfstest/repository/lucene/lock/lucene-2d3d31fa7f19eabb73d692df44087d81-n-write.lock

- We are using Lucene 2.2.0
- We are using kernel NFS and lockd is running.
- We are using a modified version of the ExpirationTimeDeletionPolicy
found in the
  Lucene test suite:
http://svn.apache.org/repos/asf/lucene/java/trunk/src/test/org/apache/lucene/index/TestDeletionPolicy.java
  I have set the expiration time to 600 seconds (10 minutes).
- We are using the NativeFSLockFactory with the lock folder being
within the index
  folder:
  /mnt/nfstest/repository/lucene/lock/
- I have implemented a handler which will pause and retry an update or delete
  operation if a LockObtainFailedException or StaleReaderException is
caught.  The
  handler will retry the update or delete once every second for 1 minute before
  re-throwing the exception and aborting.

The issue appears to be caused by a lock file which is not deleted.
The handlers
keep retrying... the process holding the lock eventually aborts...
this deletes the
lock file - any applications still running then continue normally.

The application does not throw these exceptions when it is run on a
standard Linux
file system or Windows workstation.

I would really appreciate some help with this issue.  The chances are I am doing
something stupid... but I cannot think what to try next.

Thanks for your help

Patrick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 09:15:55 2007
Return-Path: <java-user-return-28922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92781 invoked from network); 29 Jun 2007 09:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 09:15:53 -0000
Received: (qmail 28285 invoked by uid 500); 29 Jun 2007 09:15:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27398 invoked by uid 500); 29 Jun 2007 09:15:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27384 invoked by uid 99); 29 Jun 2007 09:15:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 02:15:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.117.178.41] (HELO ns21.webhostsg.com) (203.117.178.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 02:15:44 -0700
X-ClientAddr: 202.63.154.28
Received: from xenb04 (28.202-63-154.unknown.qala.com.sg [202.63.154.28])
	by ns21.webhostsg.com (8.12.11/8.12.11) with ESMTP id l5T9MDsr024486
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 17:22:24 +0800
Message-Id: <200706290922.l5T9MDsr024486@ns21.webhostsg.com>
From: "Lee Li Bin" <leelb@xedge.com.sg>
To: <java-user@lucene.apache.org>
Subject: Pagination
Date: Fri, 29 Jun 2007 17:12:10 +0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0030_01C7BA70.A20CA670"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
Thread-Index: Ace6LZL0DZ9CMECvSkKpwJWreBLJQA==
X-ns21-MailScanner-Information: Please contact the ISP for more information
X-ns21-MailScanner: Found to be clean
X-ns21-MailScanner-SpamCheck: 
X-MailScanner-From: leelb@xedge.com.sg
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0030_01C7BA70.A20CA670
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

does anyone knows how to do pagination on jsp page using the number of hits
return? Or any other solutions?

 

Do provide me with some sample coding if possible or a step by step guide.
Sry if I'm asking too much, I'm new to lucene.

 

Thanks

 

 


------=_NextPart_000_0030_01C7BA70.A20CA670--



From java-user-return-28923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 09:37:20 2007
Return-Path: <java-user-return-28923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5239 invoked from network); 29 Jun 2007 09:37:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 09:37:18 -0000
Received: (qmail 66188 invoked by uid 500); 29 Jun 2007 09:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66150 invoked by uid 500); 29 Jun 2007 09:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66139 invoked by uid 99); 29 Jun 2007 09:37:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 02:37:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 02:37:09 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id l5T9amfS110880
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 09:36:48 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5T9alhJ844006
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 11:36:47 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5T9aliW006254
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 11:36:47 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5T9alY2006249
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 11:36:47 +0200
In-Reply-To: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 29 Jun 2007 02:34:08 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 29/06/2007 12:36:46
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

hi Patrick,

Mike is the expert in this, but until he gets in, can you add details on
the update pattern - note that the DeletionPolicy you describe below is not
(afaik) related to the write lock time-out issues you are facing. The
DeletionPolicy manages better the interaction between an IndexWriter that
deletes old files, and an IndexReader that might still use this file. The
write lock, on the hand, just synchronizes between multiple IndexWriter
objects attempting to open the same index for write. So, do you have
multiple writers? Can you print/describe the writers timing scenario when
this time-out problem occur, e.g, something like this
     w1.open
     w1.modify
     w1.close
     w2.open
     w2.modify
     w2.close
     w3.open
     w3.modify
     w3.close
     w2.open .....  time-out... but w3 closed the index.... so the
lock-file was supposed to be removed, why wasn't it?
Can write attempt come from different nodes in the cluster?
Can you make sure that when "the" writer gets the lock time-out there is
indeed no other active writer?

Doron

"Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote on 29/06/2007
02:01:08:

> Hi,
>
> We are sharing a Lucene index in a Linux cluster over an NFS
> share.  We have
> multiple servers reading and writing to the index.
>
> I am getting regular lock exceptions e.g.
> Lock obtain timed out:
>
NativeFSLock@/mnt/nfstest/repository/lucene/lock/lucene-2d3d31fa7f19eabb73d692df44087d81-

> n-write.lock
>
> - We are using Lucene 2.2.0
> - We are using kernel NFS and lockd is running.
> - We are using a modified version of the ExpirationTimeDeletionPolicy
> found in the
>   Lucene test suite:
> http://svn.apache.
>
org/repos/asf/lucene/java/trunk/src/test/org/apache/lucene/index/TestDeletionPolicy.

> java
>   I have set the expiration time to 600 seconds (10 minutes).
> - We are using the NativeFSLockFactory with the lock folder being
> within the index
>   folder:
>   /mnt/nfstest/repository/lucene/lock/
> - I have implemented a handler which will pause and retry an
> update or delete
>   operation if a LockObtainFailedException or StaleReaderException is
> caught.  The
>   handler will retry the update or delete once every second for
> 1 minute before
>   re-throwing the exception and aborting.
>
> The issue appears to be caused by a lock file which is not deleted.
> The handlers
> keep retrying... the process holding the lock eventually aborts...
> this deletes the
> lock file - any applications still running then continue normally.
>
> The application does not throw these exceptions when it is run on a
> standard Linux
> file system or Windows workstation.
>
> I would really appreciate some help with this issue.  The
> chances are I am doing
> something stupid... but I cannot think what to try next.
>
> Thanks for your help
>
> Patrick
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 11:04:23 2007
Return-Path: <java-user-return-28924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42282 invoked from network); 29 Jun 2007 11:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 11:04:23 -0000
Received: (qmail 30430 invoked by uid 500); 29 Jun 2007 11:04:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30105 invoked by uid 500); 29 Jun 2007 11:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30094 invoked by uid 99); 29 Jun 2007 11:04:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 04:04:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 04:04:13 -0700
Received: by wa-out-1112.google.com with SMTP id j40so1239158wah
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 04:03:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jIxd8fynzdVLJ5oTDNvKMVwaAedPsU/hDnoRA3rWthYgng5WmjVIDCf1Qd5KxSSOCAqSI+a6Eo68Ct2OCxDuq0ere5ymU5PF46pwbOMZURUJzJc+dSmqspzRVZT55wfhEIr/oMVYsShSiTNsIbH/+1CWrFs1A0uSLW28ESj6VRY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Jy8tHK/49IC6hyHNb7uMPbTxB8X99ptayW2at4oVma0U5kRHQioVDbsIYsHjX4duFs9W6YY727TkX8YmCKLntU13qCAxnjLbBIQVpd7TcY92iGA+Sgzc/1rS+SBjYUrvkYeKbrlhxoFZ+J89dWiiPfeA9JVsX5vez+zM5mFZSGY=
Received: by 10.114.89.1 with SMTP id m1mr2491545wab.1183115032680;
        Fri, 29 Jun 2007 04:03:52 -0700 (PDT)
Received: by 10.114.37.3 with HTTP; Fri, 29 Jun 2007 04:03:52 -0700 (PDT)
Message-ID: <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>
Date: Fri, 29 Jun 2007 12:03:52 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
	 <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Doron

Thanks for your reply.

I am working on the details of the update pattern.  It will take me
some time as I cannot reproduce the issue on demand.

To answer your other questions, yes, we do have multiple writers.  One
writer per node in the cluster.

I will post the results of my investigations as soon as possible.

Thanks for your help

Patrick



On 29/06/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> hi Patrick,
>
> Mike is the expert in this, but until he gets in, can you add details on
> the update pattern - note that the DeletionPolicy you describe below is not
> (afaik) related to the write lock time-out issues you are facing. The
> DeletionPolicy manages better the interaction between an IndexWriter that
> deletes old files, and an IndexReader that might still use this file. The
> write lock, on the hand, just synchronizes between multiple IndexWriter
> objects attempting to open the same index for write. So, do you have
> multiple writers? Can you print/describe the writers timing scenario when
> this time-out problem occur, e.g, something like this
>      w1.open
>      w1.modify
>      w1.close
>      w2.open
>      w2.modify
>      w2.close
>      w3.open
>      w3.modify
>      w3.close
>      w2.open .....  time-out... but w3 closed the index.... so the
> lock-file was supposed to be removed, why wasn't it?
> Can write attempt come from different nodes in the cluster?
> Can you make sure that when "the" writer gets the lock time-out there is
> indeed no other active writer?
>
> Doron
>
> "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote on 29/06/2007
> 02:01:08:
>
> > Hi,
> >
> > We are sharing a Lucene index in a Linux cluster over an NFS
> > share.  We have
> > multiple servers reading and writing to the index.
> >
> > I am getting regular lock exceptions e.g.
> > Lock obtain timed out:
> >
> NativeFSLock@/mnt/nfstest/repository/lucene/lock/lucene-2d3d31fa7f19eabb73d692df44087d81-
>
> > n-write.lock
> >
> > - We are using Lucene 2.2.0
> > - We are using kernel NFS and lockd is running.
> > - We are using a modified version of the ExpirationTimeDeletionPolicy
> > found in the
> >   Lucene test suite:
> > http://svn.apache.
> >
> org/repos/asf/lucene/java/trunk/src/test/org/apache/lucene/index/TestDeletionPolicy.
>
> > java
> >   I have set the expiration time to 600 seconds (10 minutes).
> > - We are using the NativeFSLockFactory with the lock folder being
> > within the index
> >   folder:
> >   /mnt/nfstest/repository/lucene/lock/
> > - I have implemented a handler which will pause and retry an
> > update or delete
> >   operation if a LockObtainFailedException or StaleReaderException is
> > caught.  The
> >   handler will retry the update or delete once every second for
> > 1 minute before
> >   re-throwing the exception and aborting.
> >
> > The issue appears to be caused by a lock file which is not deleted.
> > The handlers
> > keep retrying... the process holding the lock eventually aborts...
> > this deletes the
> > lock file - any applications still running then continue normally.
> >
> > The application does not throw these exceptions when it is run on a
> > standard Linux
> > file system or Windows workstation.
> >
> > I would really appreciate some help with this issue.  The
> > chances are I am doing
> > something stupid... but I cannot think what to try next.
> >
> > Thanks for your help
> >
> > Patrick
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 12:33:43 2007
Return-Path: <java-user-return-28925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71868 invoked from network); 29 Jun 2007 12:33:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 12:33:41 -0000
Received: (qmail 88589 invoked by uid 500); 29 Jun 2007 12:33:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88558 invoked by uid 500); 29 Jun 2007 12:33:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88500 invoked by uid 99); 29 Jun 2007 12:33:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 05:33:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 05:33:37 -0700
Received: by wa-out-1112.google.com with SMTP id j40so1266636wah
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 05:33:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pAL1LnWlsxSPyJ+UGjrJ6RamNHWxZt3Cs4LMiEf0ZslITyKa1jjfwONfbLuo/4yYUSLpk8Z6PO/C8otktlk2jqSt+HdwEHSRDK322yXtCDy4Z7zczlXlxB3vaA701QuDwUiQuPTSqmbvMm/zUHe70H8KRMeDrI5y2dM9avnFsdI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NMs0TS02YETG0gf5MAFgu9nuB8RT+pK60f4n8aTP/sarx2BCkB1WAWRAeWASZxwrThIJlyr5DtMcmZkp/hV/mweiDpe2AryYCF6rmfMyShBWExOKvC70a1v12eB37gEmNp5Wv5kIjdy2AVQR9bAbqsfSlJw7w9Jge4I4aVq+gwM=
Received: by 10.114.161.11 with SMTP id j11mr2577423wae.1183120396319;
        Fri, 29 Jun 2007 05:33:16 -0700 (PDT)
Received: by 10.114.37.3 with HTTP; Fri, 29 Jun 2007 05:33:16 -0700 (PDT)
Message-ID: <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
Date: Fri, 29 Jun 2007 13:33:16 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
	 <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
	 <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

As requested, I have been trying to improve the logging in the
application so I can give you more details of the update pattern.

I am using the Lucene Index Accessor contribution to co-ordinate the
readers and writers:
http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049

If the close method, in the IndexAccessProvider, fails the exception
is logged but not re-thrown:
public void close(IndexReader reader) {
  if (reader != null) {
    try {
      reader.close();
    } catch (IOException e) {
      log.error("", e);
    }
  }
}

I have been checking the application log.  Just before the time when
the lock file errors occur I found this log entry:
[11:28:59] [ERROR] IndexAccessProvider
java.io.FileNotFoundException:
/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 (No
such file or directory)
	at java.io.RandomAccessFile.open(Native Method)

- I guess the missing segments file could result in the lock file not
being removed?
- Is it safe to ignore this exception (probably not)?
- Why would the segments file be missing?  Could this be connected to
the NFS issues in some way?

Thanks for your help

Patrick


On 29/06/07, Patrick Kimber <mailing.patrick.kimber@gmail.com> wrote:
> Hi Doron
>
> Thanks for your reply.
>
> I am working on the details of the update pattern.  It will take me
> some time as I cannot reproduce the issue on demand.
>
> To answer your other questions, yes, we do have multiple writers.  One
> writer per node in the cluster.
>
> I will post the results of my investigations as soon as possible.
>
> Thanks for your help
>
> Patrick
>
>
>
> On 29/06/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> > hi Patrick,
> >
> > Mike is the expert in this, but until he gets in, can you add details on
> > the update pattern - note that the DeletionPolicy you describe below is not
> > (afaik) related to the write lock time-out issues you are facing. The
> > DeletionPolicy manages better the interaction between an IndexWriter that
> > deletes old files, and an IndexReader that might still use this file. The
> > write lock, on the hand, just synchronizes between multiple IndexWriter
> > objects attempting to open the same index for write. So, do you have
> > multiple writers? Can you print/describe the writers timing scenario when
> > this time-out problem occur, e.g, something like this
> >      w1.open
> >      w1.modify
> >      w1.close
> >      w2.open
> >      w2.modify
> >      w2.close
> >      w3.open
> >      w3.modify
> >      w3.close
> >      w2.open .....  time-out... but w3 closed the index.... so the
> > lock-file was supposed to be removed, why wasn't it?
> > Can write attempt come from different nodes in the cluster?
> > Can you make sure that when "the" writer gets the lock time-out there is
> > indeed no other active writer?
> >
> > Doron
> >
> > "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote on 29/06/2007
> > 02:01:08:
> >
> > > Hi,
> > >
> > > We are sharing a Lucene index in a Linux cluster over an NFS
> > > share.  We have
> > > multiple servers reading and writing to the index.
> > >
> > > I am getting regular lock exceptions e.g.
> > > Lock obtain timed out:
> > >
> > NativeFSLock@/mnt/nfstest/repository/lucene/lock/lucene-2d3d31fa7f19eabb73d692df44087d81-
> >
> > > n-write.lock
> > >
> > > - We are using Lucene 2.2.0
> > > - We are using kernel NFS and lockd is running.
> > > - We are using a modified version of the ExpirationTimeDeletionPolicy
> > > found in the
> > >   Lucene test suite:
> > > http://svn.apache.
> > >
> > org/repos/asf/lucene/java/trunk/src/test/org/apache/lucene/index/TestDeletionPolicy.
> >
> > > java
> > >   I have set the expiration time to 600 seconds (10 minutes).
> > > - We are using the NativeFSLockFactory with the lock folder being
> > > within the index
> > >   folder:
> > >   /mnt/nfstest/repository/lucene/lock/
> > > - I have implemented a handler which will pause and retry an
> > > update or delete
> > >   operation if a LockObtainFailedException or StaleReaderException is
> > > caught.  The
> > >   handler will retry the update or delete once every second for
> > > 1 minute before
> > >   re-throwing the exception and aborting.
> > >
> > > The issue appears to be caused by a lock file which is not deleted.
> > > The handlers
> > > keep retrying... the process holding the lock eventually aborts...
> > > this deletes the
> > > lock file - any applications still running then continue normally.
> > >
> > > The application does not throw these exceptions when it is run on a
> > > standard Linux
> > > file system or Windows workstation.
> > >
> > > I would really appreciate some help with this issue.  The
> > > chances are I am doing
> > > something stupid... but I cannot think what to try next.
> > >
> > > Thanks for your help
> > >
> > > Patrick
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 13:48:01 2007
Return-Path: <java-user-return-28926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2892 invoked from network); 29 Jun 2007 13:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 13:48:00 -0000
Received: (qmail 42814 invoked by uid 500); 29 Jun 2007 13:47:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42773 invoked by uid 500); 29 Jun 2007 13:47:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42756 invoked by uid 99); 29 Jun 2007 13:47:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 06:47:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.225 as permitted sender)
Received: from [64.233.162.225] (HELO nz-out-0506.google.com) (64.233.162.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 06:47:49 -0700
Received: by nz-out-0506.google.com with SMTP id i28so128741nzi
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 06:47:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=srbjGttEb9LVIN3Zq7WWK9S8APxOd4Zmf9PUv6TBlfbSZWGSURWfIqTSfnkGXTq1bwdiQAY0R9cM0ytnX/RudN/4NkDhfd30Wmc08+V6v/yBP8CQZnWDIr7F5Kl3JhDzFLayDGL4VznGiWwecgqcDCvPtnihmk0e8eqsVKERbQs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Rdi7NT6iapfBmY2A7/LUQ3DFavcMv4xdrVDC6bEYOyR6lvuvBUPdsRpXUVUlA4Vsw1PXm28zuNiz6IbxsWlt4MrfHLY1QTXHOTq5r0SJSvdzsbUv3ss72IK8lHOybhDaMF3a/QwEvyqcA9/UmYdc/xbSh0AmiT4/QmhCwnvkEJE=
Received: by 10.142.99.21 with SMTP id w21mr180960wfb.1183124848268;
        Fri, 29 Jun 2007 06:47:28 -0700 (PDT)
Received: by 10.143.3.1 with HTTP; Fri, 29 Jun 2007 06:47:28 -0700 (PDT)
Message-ID: <c68e39170706290647o77cc4c29t4ecca000af1e95e4@mail.gmail.com>
Date: Fri, 29 Jun 2007 09:47:28 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
	 <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
	 <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>
	 <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
X-Google-Sender-Auth: 0cf21b053cb34c1f
X-Virus-Checked: Checked by ClamAV on apache.org

Note that some Solr users have reported a similar issue.
https://issues.apache.org/jira/browse/SOLR-240

-Yonik

On 6/29/07, Patrick Kimber <mailing.patrick.kimber@gmail.com> wrote:
> Hi
>
> As requested, I have been trying to improve the logging in the
> application so I can give you more details of the update pattern.
>
> I am using the Lucene Index Accessor contribution to co-ordinate the
> readers and writers:
> http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049
>
> If the close method, in the IndexAccessProvider, fails the exception
> is logged but not re-thrown:
> public void close(IndexReader reader) {
>   if (reader != null) {
>     try {
>       reader.close();
>     } catch (IOException e) {
>       log.error("", e);
>     }
>   }
> }
>
> I have been checking the application log.  Just before the time when
> the lock file errors occur I found this log entry:
> [11:28:59] [ERROR] IndexAccessProvider
> java.io.FileNotFoundException:
> /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 (No
> such file or directory)
>         at java.io.RandomAccessFile.open(Native Method)
>
> - I guess the missing segments file could result in the lock file not
> being removed?
> - Is it safe to ignore this exception (probably not)?
> - Why would the segments file be missing?  Could this be connected to
> the NFS issues in some way?
>
> Thanks for your help
>
> Patrick
>
>
> On 29/06/07, Patrick Kimber <mailing.patrick.kimber@gmail.com> wrote:
> > Hi Doron
> >
> > Thanks for your reply.
> >
> > I am working on the details of the update pattern.  It will take me
> > some time as I cannot reproduce the issue on demand.
> >
> > To answer your other questions, yes, we do have multiple writers.  One
> > writer per node in the cluster.
> >
> > I will post the results of my investigations as soon as possible.
> >
> > Thanks for your help
> >
> > Patrick
> >
> >
> >
> > On 29/06/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> > > hi Patrick,
> > >
> > > Mike is the expert in this, but until he gets in, can you add details on
> > > the update pattern - note that the DeletionPolicy you describe below is not
> > > (afaik) related to the write lock time-out issues you are facing. The
> > > DeletionPolicy manages better the interaction between an IndexWriter that
> > > deletes old files, and an IndexReader that might still use this file. The
> > > write lock, on the hand, just synchronizes between multiple IndexWriter
> > > objects attempting to open the same index for write. So, do you have
> > > multiple writers? Can you print/describe the writers timing scenario when
> > > this time-out problem occur, e.g, something like this
> > >      w1.open
> > >      w1.modify
> > >      w1.close
> > >      w2.open
> > >      w2.modify
> > >      w2.close
> > >      w3.open
> > >      w3.modify
> > >      w3.close
> > >      w2.open .....  time-out... but w3 closed the index.... so the
> > > lock-file was supposed to be removed, why wasn't it?
> > > Can write attempt come from different nodes in the cluster?
> > > Can you make sure that when "the" writer gets the lock time-out there is
> > > indeed no other active writer?
> > >
> > > Doron
> > >
> > > "Patrick Kimber" <mailing.patrick.kimber@gmail.com> wrote on 29/06/2007
> > > 02:01:08:
> > >
> > > > Hi,
> > > >
> > > > We are sharing a Lucene index in a Linux cluster over an NFS
> > > > share.  We have
> > > > multiple servers reading and writing to the index.
> > > >
> > > > I am getting regular lock exceptions e.g.
> > > > Lock obtain timed out:
> > > >
> > > NativeFSLock@/mnt/nfstest/repository/lucene/lock/lucene-2d3d31fa7f19eabb73d692df44087d81-
> > >
> > > > n-write.lock
> > > >
> > > > - We are using Lucene 2.2.0
> > > > - We are using kernel NFS and lockd is running.
> > > > - We are using a modified version of the ExpirationTimeDeletionPolicy
> > > > found in the
> > > >   Lucene test suite:
> > > > http://svn.apache.
> > > >
> > > org/repos/asf/lucene/java/trunk/src/test/org/apache/lucene/index/TestDeletionPolicy.
> > >
> > > > java
> > > >   I have set the expiration time to 600 seconds (10 minutes).
> > > > - We are using the NativeFSLockFactory with the lock folder being
> > > > within the index
> > > >   folder:
> > > >   /mnt/nfstest/repository/lucene/lock/
> > > > - I have implemented a handler which will pause and retry an
> > > > update or delete
> > > >   operation if a LockObtainFailedException or StaleReaderException is
> > > > caught.  The
> > > >   handler will retry the update or delete once every second for
> > > > 1 minute before
> > > >   re-throwing the exception and aborting.
> > > >
> > > > The issue appears to be caused by a lock file which is not deleted.
> > > > The handlers
> > > > keep retrying... the process holding the lock eventually aborts...
> > > > this deletes the
> > > > lock file - any applications still running then continue normally.
> > > >
> > > > The application does not throw these exceptions when it is run on a
> > > > standard Linux
> > > > file system or Windows workstation.
> > > >
> > > > I would really appreciate some help with this issue.  The
> > > > chances are I am doing
> > > > something stupid... but I cannot think what to try next.
> > > >
> > > > Thanks for your help
> > > >
> > > > Patrick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 13:57:59 2007
Return-Path: <java-user-return-28927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6222 invoked from network); 29 Jun 2007 13:57:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 13:57:46 -0000
Received: (qmail 64650 invoked by uid 500); 29 Jun 2007 13:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64605 invoked by uid 500); 29 Jun 2007 13:57:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64594 invoked by uid 99); 29 Jun 2007 13:57:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 06:57:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bharath.nott@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 06:57:38 -0700
Received: by nz-out-0506.google.com with SMTP id i28so131317nzi
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 06:57:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z5OB6DiU0IAiblwowQSxyLEU4n4hHcJvXXC2+vEJV17rhFi1qvyzDJ8o4JO2WGgiqic/MLJ9EcDNmPyA0eDxFUn9+GVwLkwquQ3KbmJFaoL5tNHJ1ZcHEMTnkHv/n5go7mO6COCB1B7rG2jeKuUf0X9KUIwz3bLDSAIPzrzFaiI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NUhTA1nIbDT9ALCRDffDuwwMMhuwEtrcCXaUDvoEktYGQpQ7VcR4zR024icFvYMqljD8kZKW8+bwjAm7qv1nAq33Bf/I0+UY/9pDyHct7atsE2uTrA002Ebowxu5DSfLowbRORc8e5qjUbJBNs9Hf4oGvXA+JwT7lkP/W+Hd3s8=
Received: by 10.142.102.5 with SMTP id z5mr182636wfb.1183125436675;
        Fri, 29 Jun 2007 06:57:16 -0700 (PDT)
Received: by 10.143.34.8 with HTTP; Fri, 29 Jun 2007 06:57:16 -0700 (PDT)
Message-ID: <ede880620706290657y334aae83vdcf6e93b4bb73565@mail.gmail.com>
Date: Fri, 29 Jun 2007 09:57:16 -0400
From: Nott <bharath.nott@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Luke faster + Index Searcher is slow
In-Reply-To: <Pine.LNX.4.58.0706281031530.12259@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46116_19164931.1183125436651"
References: <ede880620706280903y7a03fef3x5a9d3dd0c2cde828@mail.gmail.com>
	 <E7D8FAA3-A910-495D-8915-309E8B57374D@gmail.com>
	 <Pine.LNX.4.58.0706281031530.12259@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46116_19164931.1183125436651
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I even tried  like this . But I'm not getting any benfifts.  How to use
Expert Search can you assist ?


                   File indexFile = new File(fileName);
                    FSDirectory dir = FSDirectory.getDirectory(indexFile);
                    indexSearcher =new IndexSearcher(dir);
int i =0;
while (i < 10)
{
long startime = System.currentMilliTimes();
hits = indexSearcher.search(query);
long endTime= System.currentMilliTimes();
print ("TOTAL TIME TAKE : " + (endTime-startTime));
}

Bharath
On 6/28/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Are you opening the IndexSearcher every time you query?  This is a
> : costly operation.
>
> just repeating the above line because it's important.  also...
>
> : > The code i use is
> : >                   File indexFile = new File(fileName);
> : >                    FSDirectory dir = FSDirectory.getDirectory
> : > (indexFile);
> : >                    indexSearcher =new IndexSearcher(dir);
> : >                   hits = indexSearcher.search(query);
>
> are those the only lines you are timing?  are you timing all of your uses
> of the hits obejct as well? what are you doing with the hits object?
>
> the Hits class itself is not efficient if you iterate very deep in your
> results ... i haven't looked at the internals of Luke, but i would be very
> suprised if it was using the Hits class ... if you are really worried
> about performacne, use one of the other (Expert) search methods.
>
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
~B

------=_Part_46116_19164931.1183125436651--

From java-user-return-28928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 13:58:13 2007
Return-Path: <java-user-return-28928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6934 invoked from network); 29 Jun 2007 13:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 13:58:12 -0000
Received: (qmail 67433 invoked by uid 500); 29 Jun 2007 13:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67397 invoked by uid 500); 29 Jun 2007 13:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67386 invoked by uid 99); 29 Jun 2007 13:58:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 06:58:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bharath.nott@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 06:58:04 -0700
Received: by nz-out-0506.google.com with SMTP id i28so131317nzi
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 06:57:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kdHl46F7b3ulYcuS8OZAXM+dleuITAeKtw3iw5sLKvkRafX4YuWhUOKbdoitl6gevd0j+lQS5FcHAJdhCJKJLO/CFXlwvS9YdxICtMlSOpmqiv66ZPEvgRO6uzICZ3IzP2S8ruJKFL/B/77C8DwLbN547THU9T04615lBxGjrBQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tkBXkojdtD2uGaoNCoiphI5cOGSKFyL188aH7oP0hDYwhpBngT1OPSWkyzOHRkT1C8uLUugxEmTbvtzXtpYr01uoli1yoVpTPihIKq5mNxQ1AY/ULbnM48e9eYysF7GsiRuXUtfxSu+6JdHyc/HnSqbsxdtRKrZpwTnLfI+it5U=
Received: by 10.142.103.6 with SMTP id a6mr181089wfc.1183125462918;
        Fri, 29 Jun 2007 06:57:42 -0700 (PDT)
Received: by 10.143.34.8 with HTTP; Fri, 29 Jun 2007 06:57:42 -0700 (PDT)
Message-ID: <ede880620706290657h3fd116f7q96ed123b4da376e6@mail.gmail.com>
Date: Fri, 29 Jun 2007 09:57:42 -0400
From: Nott <bharath.nott@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Luke faster + Index Searcher is slow
In-Reply-To: <E7D8FAA3-A910-495D-8915-309E8B57374D@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46124_8700378.1183125462886"
References: <ede880620706280903y7a03fef3x5a9d3dd0c2cde828@mail.gmail.com>
	 <E7D8FAA3-A910-495D-8915-309E8B57374D@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46124_8700378.1183125462886
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I even tried  like this . But I'm not getting any benfifts.  How to use
Expert Search can you assist ?


                   File indexFile = new File(fileName);
                    FSDirectory dir = FSDirectory.getDirectory(indexFile);
                    indexSearcher =new IndexSearcher(dir);
int i =0;
while (i < 10)
{
long startime = System.currentMilliTimes();
hits = indexSearcher.search(query);
long endTime= System.currentMilliTimes();
print ("TOTAL TIME TAKE : " + (endTime-startTime));
}


Bharath


On 6/28/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
>
> Are you opening the IndexSearcher every time you query?  This is a
> costly operation.
>
> -Grant
>
> On Jun 28, 2007, at 12:03 PM, Nott wrote:
>
> > I  have an index in one file that has a size of abt 18GB of data
> > When i run some queries on Luke the response comes in < 40 ms but
> > the same
> > when I use IndexSearcher gives me in 300ms -600 ms
> > Any suggestions ?
> > The code i use is
> >                   File indexFile = new File(fileName);
> >                    FSDirectory dir = FSDirectory.getDirectory
> > (indexFile);
> >                    indexSearcher =new IndexSearcher(dir);
> >                   hits = indexSearcher.search(query);
> >
> >
> > On 6/22/07, Andrzej Bialecki <ab@getopt.org> wrote:
> >>
> >> Hi all,
> >>
> >> I just released Luke 0.7.1, the Lucene Index Toolbox. As usually, you
> >> can get it here:
> >>
> >>         http://www.getopt.org/luke/
> >>
> >> This minor release is mostly an upgrade to the official Lucene 2.2.0
> >> release JARs.
> >>
> >> The following changes have been made in this release:
> >> * Added a term distribution analysis plugin by Mark Harwood.
> >> * Fixed IndexGate class to correctly show deletable files.
> >>
> >>
> >> --
> >> Best regards,
> >> Andrzej Bialecki     <><
> >>   ___. ___ ___ ___ _ _   __________________________________
> >> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> >> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> >> http://www.sigram.com  Contact: info at sigram dot com
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > ~B
>
> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
~B

------=_Part_46124_8700378.1183125462886--

From java-user-return-28929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 14:14:05 2007
Return-Path: <java-user-return-28929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14430 invoked from network); 29 Jun 2007 14:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 14:14:04 -0000
Received: (qmail 10186 invoked by uid 500); 29 Jun 2007 14:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10150 invoked by uid 500); 29 Jun 2007 14:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10139 invoked by uid 99); 29 Jun 2007 14:13:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 07:13:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 07:13:54 -0700
Received: by an-out-0708.google.com with SMTP id c5so202476anc
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 07:13:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mplop84Mxq4CtLI6nACewuJhDkIB/14hWJdVGRzbHc3cCfa+wIs3KNsbWV7FpJESDZ9seu/fcnad7k3uDhk2K+acVB6dE4/DGLdSAoLRih8N0RmAjr0PZbUfdhSmquNF5w/w5YpQtkVESbX6gC12G9uvcfoQ/Mzprz/1z7tQnwI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DtiQVtuaUxCVaHr7IUkD95spwSdn8V0ljHOYCnZA2GyjVeY9G8GGUN/anKEK2VGayOBY1r/fwRjuL39z57irkTIANqRTTudw4s5P4taqAr5gSu+4t/JxAvI729Yt8pyr6f832WHwEaGt4gUIT72c8TsnXydy/oSxAR7zgd4N6ko=
Received: by 10.100.108.11 with SMTP id g11mr2141951anc.1183126413269;
        Fri, 29 Jun 2007 07:13:33 -0700 (PDT)
Received: by 10.100.14.15 with HTTP; Fri, 29 Jun 2007 07:13:33 -0700 (PDT)
Message-ID: <ab0709bf0706290713t4eb3b9b4g480997fa8f97646@mail.gmail.com>
Date: Fri, 29 Jun 2007 10:13:33 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71746_13024231.1183126413197"
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
	 <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
	 <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>
	 <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71746_13024231.1183126413197
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is an interesting choice. Perhaps you have modified
LuceneIndexAccessor, but it seems to me (without knowing much about your
setup) that you would have odd reader behavior. On a 3 node system, if you
add docs with node 1 and 2 but not 3 and your doing searches against all 3
nodes, node 3 will have old readers opened until you add a doc to node 3.
This is an odd consistency issue (node 1 and 2 have current views because
you are adding docs to them, but node 3 will be stale until it gets a doc),
but also if you keep adding docs to node 1 and 2, or just plain add no docs
to node 3, won't node 3's reader's index files be pulled out from under it
after 10 minutes? Node 3 (or 1 and 2 for that matter) will not give up its
cached readers *until* you add a doc with that particular node.

Perhaps I am all wet on this (I havn't used NFS with Lucene), but I think
you may need to somehow coordinate the delete policy with the
LuceneIndexAccessor on each node.

This may be unrelated to your problem,and perhaps you get around the issue
somehow, but just to throw it out there...

- Mark

On 6/29/07, Patrick Kimber < mailing.patrick.kimber@gmail.com> wrote:
>
>
>
> I am using the Lucene Index Accessor contribution to co-ordinate the
> readers and writers:
>
> http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049
>
>

------=_Part_71746_13024231.1183126413197--

From java-user-return-28930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 14:45:32 2007
Return-Path: <java-user-return-28930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23964 invoked from network); 29 Jun 2007 14:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 14:45:30 -0000
Received: (qmail 88666 invoked by uid 500); 29 Jun 2007 14:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88630 invoked by uid 500); 29 Jun 2007 14:45:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88615 invoked by uid 99); 29 Jun 2007 14:45:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 07:45:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 07:45:22 -0700
Received: by nz-out-0506.google.com with SMTP id i28so143585nzi
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 07:45:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=p7UwiQH2p/gUdEtDR75ZMawCACzNyEABBgtSY8gYgOr89SjNn/7aHGehDKzRil5cYa2ZP+I/LLBnVVUJsfDPNgu8gVI4dT4aqr7OmyE6XWDrIUottuD/1VlVE6LW4KGm+spMRUPEfZDZ+KdG3qF4dU4N0ZWQyR/qf26B/+A3zJk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FNp+JNvzovjhy9R0JiME7DjvKNON/AKniqYHngSkek+82+8S5OeCqSvazUaUf0y1wsWrD3R6anxE6wPU1yRdMFaBcqilNvYeB4U+zlXaAMsKbhQuGuAmkG+iLqGk2/BCkbOC0oppWel9gFe2rDT08Cy7CKxWOgntHo2vPqZ0QPQ=
Received: by 10.114.158.1 with SMTP id g1mr2667775wae.1183128300140;
        Fri, 29 Jun 2007 07:45:00 -0700 (PDT)
Received: by 10.114.37.3 with HTTP; Fri, 29 Jun 2007 07:45:00 -0700 (PDT)
Message-ID: <4f9b23800706290745k777e8cd0yc82841489d9b73bb@mail.gmail.com>
Date: Fri, 29 Jun 2007 15:45:00 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <ab0709bf0706290713t4eb3b9b4g480997fa8f97646@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
	 <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
	 <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>
	 <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
	 <ab0709bf0706290713t4eb3b9b4g480997fa8f97646@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark

Yes, thank you.  I can see your point and I think we might have to pay
some attention to this issue.

But, we sometimes see this error on an NFS share within 2 minutes of
starting the test so I don't think this is the only problem.

Once again, thanks for the idea.  I will certainly be looking to
modify the code in the LuceneIndexAccessor to take this into account.

Patrick

On 29/06/07, Mark Miller <markrmiller@gmail.com> wrote:
> This is an interesting choice. Perhaps you have modified
> LuceneIndexAccessor, but it seems to me (without knowing much about your
> setup) that you would have odd reader behavior. On a 3 node system, if you
> add docs with node 1 and 2 but not 3 and your doing searches against all 3
> nodes, node 3 will have old readers opened until you add a doc to node 3.
> This is an odd consistency issue (node 1 and 2 have current views because
> you are adding docs to them, but node 3 will be stale until it gets a doc),
> but also if you keep adding docs to node 1 and 2, or just plain add no docs
> to node 3, won't node 3's reader's index files be pulled out from under it
> after 10 minutes? Node 3 (or 1 and 2 for that matter) will not give up its
> cached readers *until* you add a doc with that particular node.
>
> Perhaps I am all wet on this (I havn't used NFS with Lucene), but I think
> you may need to somehow coordinate the delete policy with the
> LuceneIndexAccessor on each node.
>
> This may be unrelated to your problem,and perhaps you get around the issue
> somehow, but just to throw it out there...
>
> - Mark
>
> On 6/29/07, Patrick Kimber < mailing.patrick.kimber@gmail.com> wrote:
> >
> >
> >
> > I am using the Lucene Index Accessor contribution to co-ordinate the
> > readers and writers:
> >
> > http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 15:41:56 2007
Return-Path: <java-user-return-28931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23711 invoked from network); 29 Jun 2007 15:41:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 15:41:55 -0000
Received: (qmail 33687 invoked by uid 500); 29 Jun 2007 15:41:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33597 invoked by uid 500); 29 Jun 2007 15:41:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33569 invoked by uid 99); 29 Jun 2007 15:41:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 08:41:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.252.32.101] (HELO mx4.midmaine.com) (66.252.32.101)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 29 Jun 2007 08:41:43 -0700
Received: (qmail 28849 invoked from network); 29 Jun 2007 15:41:21 -0000
Received: from 66-252-47-60.midmaine.com (HELO AUGEXCH.ghsinc.com) (66.252.47.60)
  by 0 with SMTP; 29 Jun 2007 15:41:21 -0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7BA63.F0EBCEB3"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Geneology, nicknames, levenstein, soundex/metaphone, etc
Date: Fri, 29 Jun 2007 11:41:20 -0400
Message-ID: <214FF1B5E37DC84D9968F0F82FBB112501A7109B@AUGEXCH.ghsinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Geneology, nicknames, levenstein, soundex/metaphone, etc
Thread-Index: Ace6Y/E0ESo1q5eeT+6ybIaUSaYPhw==
From: "Darren Hartford" <dhartford@ghsinc.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7BA63.F0EBCEB3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hey all,
As you can tell by the subject, interested in 'name searching' and
'nearby name' searching.  Scenarios include Geneology and
Similar-Person-from-Different-Datasources matchings.  Assuming
java-based lucene, and more than likely the Solr project.

*nickname:  would it be feasible to create an Analyzer that will tie to
an external/internal nickname datasource (datasource would vary
dramatically based on nationality).  Usecase:  Jon, John, Johnny,
Jonathan would have 'weight' in the relevance.  Similarly 'Dick',
'Chuck', and 'Charles'.

*levenstein distance:  This is why I'm looking at lucene and the related
Solr project - levenstein already exists, but seems to be a separate
query/relevance metric.  Is there a way to add to the overall weight
across multiple Analyzers?  Sorry, very ignorant of the capabilities and
am curious.

*soundex/metaphone: Again, more about adding to an overall weight versus
separate, distinct query.  This may become not useful in the overall
picture with the use of Levenstein Distance and Nickname analyzer, but
having the capability there just in case.

*cross-field matches: I am planning on indexing specific field names,
with two being 'maiden name' and 'last name'.  When searching for a
'last name' value, how to manage weight for values that might (and very
well will) be in two different fields.

Sorry for the short/abrupt post but if I spell it all out it would be
huge.  Just asking some key points ;-)

Thanky,
-D



------_=_NextPart_001_01C7BA63.F0EBCEB3--

From java-user-return-28932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 15:42:02 2007
Return-Path: <java-user-return-28932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23765 invoked from network); 29 Jun 2007 15:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 15:42:02 -0000
Received: (qmail 34962 invoked by uid 500); 29 Jun 2007 15:41:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34928 invoked by uid 500); 29 Jun 2007 15:41:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34910 invoked by uid 99); 29 Jun 2007 15:41:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 08:41:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 08:41:51 -0700
Received: by wx-out-0506.google.com with SMTP id i28so743526wxd
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 08:41:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=mSM7vgESgbEdjSTDckqQo6W29E+dbQhKp22hyFtfdgwoRD52/QRCxK+boJgoMb9Z+K1quqaJzozDMNeZHJZxL45HE2wTvph4jgLR/r4srikFMVQ+SMN6OdnNbogfplQ88eWsyf5WSyuVfjDl8ZGMwFPa3qhOMuVraCeDMah8XEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=KgLJWDv5/GkdXA2aNu1FuZ9XBsJnmXjtz6IjuJQYwf/mA0pxFJuMHLUcgJf9ZiPsjEevvGkEXY1WmBgOVn765RKfbmsSrYO+ecMmSbRhBHUGZ8asdq0NYh22uIyBWUArPZTcZStHFeB3D9VhMOkQyafYj3hH3Du47n8gLO4tQQQ=
Received: by 10.90.52.18 with SMTP id z18mr3298845agz.1183131690893;
        Fri, 29 Jun 2007 08:41:30 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id z26sm6156624ele.2007.06.29.08.41.29
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 29 Jun 2007 08:41:30 -0700 (PDT)
Message-ID: <4685280D.7080500@gmail.com>
Date: Fri, 29 Jun 2007 11:41:01 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>	 <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>	 <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>	 <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>	 <ab0709bf0706290713t4eb3b9b4g480997fa8f97646@mail.gmail.com> <4f9b23800706290745k777e8cd0yc82841489d9b73bb@mail.gmail.com>
In-Reply-To: <4f9b23800706290745k777e8cd0yc82841489d9b73bb@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If your getting java.io.FileNotFoundException: 
/mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 within 2 
minutes, this is very odd indeed. That would seem to imply your deletion 
policy is not working.

You might try just using one of the nodes as the writer. In Michaels 
comments, he always seems to mention the pattern of one writer many 
readers on nfs. In this case you could use no LockFactory and perhaps 
gain a little speed there.

- Mark

Patrick Kimber wrote:
> Hi Mark
>
> Yes, thank you.  I can see your point and I think we might have to pay
> some attention to this issue.
>
> But, we sometimes see this error on an NFS share within 2 minutes of
> starting the test so I don't think this is the only problem.
>
> Once again, thanks for the idea.  I will certainly be looking to
> modify the code in the LuceneIndexAccessor to take this into account.
>
> Patrick
>
> On 29/06/07, Mark Miller <markrmiller@gmail.com> wrote:
>> This is an interesting choice. Perhaps you have modified
>> LuceneIndexAccessor, but it seems to me (without knowing much about your
>> setup) that you would have odd reader behavior. On a 3 node system, 
>> if you
>> add docs with node 1 and 2 but not 3 and your doing searches against 
>> all 3
>> nodes, node 3 will have old readers opened until you add a doc to 
>> node 3.
>> This is an odd consistency issue (node 1 and 2 have current views 
>> because
>> you are adding docs to them, but node 3 will be stale until it gets a 
>> doc),
>> but also if you keep adding docs to node 1 and 2, or just plain add 
>> no docs
>> to node 3, won't node 3's reader's index files be pulled out from 
>> under it
>> after 10 minutes? Node 3 (or 1 and 2 for that matter) will not give 
>> up its
>> cached readers *until* you add a doc with that particular node.
>>
>> Perhaps I am all wet on this (I havn't used NFS with Lucene), but I 
>> think
>> you may need to somehow coordinate the delete policy with the
>> LuceneIndexAccessor on each node.
>>
>> This may be unrelated to your problem,and perhaps you get around the 
>> issue
>> somehow, but just to throw it out there...
>>
>> - Mark
>>
>> On 6/29/07, Patrick Kimber < mailing.patrick.kimber@gmail.com> wrote:
>> >
>> >
>> >
>> > I am using the Lucene Index Accessor contribution to co-ordinate the
>> > readers and writers:
>> >
>> > 
>> http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049 
>>
>> >
>> >
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 15:50:33 2007
Return-Path: <java-user-return-28933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28803 invoked from network); 29 Jun 2007 15:50:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 15:50:31 -0000
Received: (qmail 51682 invoked by uid 500); 29 Jun 2007 15:50:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51292 invoked by uid 500); 29 Jun 2007 15:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51280 invoked by uid 99); 29 Jun 2007 15:50:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 08:50:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 08:50:21 -0700
Received: by nz-out-0506.google.com with SMTP id i28so160160nzi
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 08:50:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qo/izT/c1bQz/dY5CaNnr0wDdQZLJ343iceGaqxEiGQN3MG7S4laXw0jW7G39JGIlnc/ZbPyXiYNXVCGbTV1M9KIACCjJcHiAv59dKjClKxqMFEPlClXWHeC5uuRR5feC9SlWsQzUEIWR3hjcEZGwaaU4zXd+H6pt4r/JZR3Pxs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Tlll1zmHdrQEU6XC38C1XlVhn6Xqi1e1lyPXIxHLsiMF13TC6ElddtG2lRtiv/6r6k4FotTaUmcMSKwHk2ISlaxUPlusm9aoLTESc6A7N/5cLy17A+evOImV3UytCByuxYRiaGbyDp9NJWLzSLkfbMI3M5Sn/Cn71Jwlj0khcB4=
Received: by 10.115.106.7 with SMTP id i7mr2743364wam.1183132199608;
        Fri, 29 Jun 2007 08:49:59 -0700 (PDT)
Received: by 10.114.37.3 with HTTP; Fri, 29 Jun 2007 08:49:59 -0700 (PDT)
Message-ID: <4f9b23800706290849g1a2b95e4ha011cc47f7dc6afe@mail.gmail.com>
Date: Fri, 29 Jun 2007 16:49:59 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4685280D.7080500@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
	 <OFCE0EECC3.97CA99A9-ON88257309.003360FA-88257309.00349099@il.ibm.com>
	 <4f9b23800706290403p2063abdcke6aa104006dda23@mail.gmail.com>
	 <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
	 <ab0709bf0706290713t4eb3b9b4g480997fa8f97646@mail.gmail.com>
	 <4f9b23800706290745k777e8cd0yc82841489d9b73bb@mail.gmail.com>
	 <4685280D.7080500@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark

I just ran my test again... and the error occurred after 10 minutes -
which is the time when my deletion policy is triggered.  So... I think
you might have found the answer to my problem.

I will spend more time looking at it on Monday.

Thank you very much for your help and enjoy your weekend.

Patrick

On 29/06/07, Mark Miller <markrmiller@gmail.com> wrote:
> If your getting java.io.FileNotFoundException:
> /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 within 2
> minutes, this is very odd indeed. That would seem to imply your deletion
> policy is not working.
>
> You might try just using one of the nodes as the writer. In Michaels
> comments, he always seems to mention the pattern of one writer many
> readers on nfs. In this case you could use no LockFactory and perhaps
> gain a little speed there.
>
> - Mark
>
> Patrick Kimber wrote:
> > Hi Mark
> >
> > Yes, thank you.  I can see your point and I think we might have to pay
> > some attention to this issue.
> >
> > But, we sometimes see this error on an NFS share within 2 minutes of
> > starting the test so I don't think this is the only problem.
> >
> > Once again, thanks for the idea.  I will certainly be looking to
> > modify the code in the LuceneIndexAccessor to take this into account.
> >
> > Patrick
> >
> > On 29/06/07, Mark Miller <markrmiller@gmail.com> wrote:
> >> This is an interesting choice. Perhaps you have modified
> >> LuceneIndexAccessor, but it seems to me (without knowing much about your
> >> setup) that you would have odd reader behavior. On a 3 node system,
> >> if you
> >> add docs with node 1 and 2 but not 3 and your doing searches against
> >> all 3
> >> nodes, node 3 will have old readers opened until you add a doc to
> >> node 3.
> >> This is an odd consistency issue (node 1 and 2 have current views
> >> because
> >> you are adding docs to them, but node 3 will be stale until it gets a
> >> doc),
> >> but also if you keep adding docs to node 1 and 2, or just plain add
> >> no docs
> >> to node 3, won't node 3's reader's index files be pulled out from
> >> under it
> >> after 10 minutes? Node 3 (or 1 and 2 for that matter) will not give
> >> up its
> >> cached readers *until* you add a doc with that particular node.
> >>
> >> Perhaps I am all wet on this (I havn't used NFS with Lucene), but I
> >> think
> >> you may need to somehow coordinate the delete policy with the
> >> LuceneIndexAccessor on each node.
> >>
> >> This may be unrelated to your problem,and perhaps you get around the
> >> issue
> >> somehow, but just to throw it out there...
> >>
> >> - Mark
> >>
> >> On 6/29/07, Patrick Kimber < mailing.patrick.kimber@gmail.com> wrote:
> >> >
> >> >
> >> >
> >> > I am using the Lucene Index Accessor contribution to co-ordinate the
> >> > readers and writers:
> >> >
> >> >
> >> http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049
> >>
> >> >
> >> >
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 16:30:33 2007
Return-Path: <java-user-return-28934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56398 invoked from network); 29 Jun 2007 16:30:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 16:30:32 -0000
Received: (qmail 80916 invoked by uid 500); 29 Jun 2007 16:30:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80883 invoked by uid 500); 29 Jun 2007 16:30:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80872 invoked by uid 99); 29 Jun 2007 16:30:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 09:30:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a15.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 09:30:22 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id 041C47F062
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 09:30:00 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <214FF1B5E37DC84D9968F0F82FBB112501A7109B@AUGEXCH.ghsinc.com>
References: <214FF1B5E37DC84D9968F0F82FBB112501A7109B@AUGEXCH.ghsinc.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8652E1B2-EE4A-4866-A663-803F7FF72337@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Geneology, nicknames, levenstein, soundex/metaphone, etc
Date: Fri, 29 Jun 2007 12:29:58 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You may find this thread useful: http://www.gossamer-threads.com/ 
lists/lucene/java-user/47824?search_string=record%20linkage;#47824
although it doesn't answer all your ?'s

I think in the end you will need to do post processing on the  
results, but maybe not.

On Jun 29, 2007, at 11:41 AM, Darren Hartford wrote:

> Hey all,
> As you can tell by the subject, interested in 'name searching' and
> 'nearby name' searching.  Scenarios include Geneology and
> Similar-Person-from-Different-Datasources matchings.  Assuming
> java-based lucene, and more than likely the Solr project.
>
> *nickname:  would it be feasible to create an Analyzer that will  
> tie to
> an external/internal nickname datasource (datasource would vary
> dramatically based on nationality).  Usecase:  Jon, John, Johnny,
> Jonathan would have 'weight' in the relevance.  Similarly 'Dick',
> 'Chuck', and 'Charles'.

Maybe you could inject these as synonyms?


>
> *levenstein distance:  This is why I'm looking at lucene and the  
> related
> Solr project - levenstein already exists, but seems to be a separate
> query/relevance metric.  Is there a way to add to the overall weight
> across multiple Analyzers?  Sorry, very ignorant of the  
> capabilities and
> am curious.

not sure what it means to add the weight across multiple Analyzers,  
what you are thinking of doing?





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 18:21:29 2007
Return-Path: <java-user-return-28935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89344 invoked from network); 29 Jun 2007 18:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 18:21:27 -0000
Received: (qmail 56277 invoked by uid 500); 29 Jun 2007 18:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56115 invoked by uid 500); 29 Jun 2007 18:21:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56104 invoked by uid 99); 29 Jun 2007 18:21:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 11:21:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 11:21:17 -0700
Received: by ug-out-1314.google.com with SMTP id c2so687989ugf
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 11:20:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iAxnaAhkhyMiLzMVuqnFvBaZz6wISzOb34beZjJ38cO8vJd2xTI7MRMNciL5GdSSwCiQL+ZuG3SeHW56TAzpO6d09z1R2bN/fiFX/eOX98LhtyQTBZo0oh0D2AJJPVStI2+q+XHFeLB7o46ZArIHlVL3EL8f4CuWfVdWuvQXziQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dUeOrTMmSvjTZaIvL9T8TiBYJr9TVsP4rLVOvTcVYi3hhdXK4ffYJX9G+bY1FC25J8sNp4oNPJ31vgIrR4UFkzGxbeCv/MAcOzF+/6OKOXa/q7vZWLnEwDQTpPg2ocuoTp7Drb0j5WZg02Rw7JldaS0fB+TsV4JOKFID5tPITdg=
Received: by 10.78.180.18 with SMTP id c18mr1773795huf.1183141256038;
        Fri, 29 Jun 2007 11:20:56 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Fri, 29 Jun 2007 11:20:56 -0700 (PDT)
Message-ID: <6e3ae6310706291120x1c3501bajbef2acf7ede0f1bd@mail.gmail.com>
Date: Fri, 29 Jun 2007 11:20:56 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pagination
In-Reply-To: <200706290922.l5T9MDsr024486@ns21.webhostsg.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_63808_33216519.1183141256016"
References: <200706290922.l5T9MDsr024486@ns21.webhostsg.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_63808_33216519.1183141256016
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

After search, you will just get an object Hits, and go through all of the
documents by hits.doc(i).

The pagination is controlled by you. Lucene is pre-caching first 200
documents and lazy loading the rest by batch size 200.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 6/29/07, Lee Li Bin <leelb@xedge.com.sg> wrote:
>
> Hi,
>
> does anyone knows how to do pagination on jsp page using the number of
> hits
> return? Or any other solutions?
>
>
>
> Do provide me with some sample coding if possible or a step by step guide.
> Sry if I'm asking too much, I'm new to lucene.
>
>
>
> Thanks
>
>
>
>
>
>

------=_Part_63808_33216519.1183141256016--

From java-user-return-28936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 19:19:53 2007
Return-Path: <java-user-return-28936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7355 invoked from network); 29 Jun 2007 19:19:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 19:19:52 -0000
Received: (qmail 81460 invoked by uid 500); 29 Jun 2007 19:19:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80986 invoked by uid 500); 29 Jun 2007 19:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80975 invoked by uid 99); 29 Jun 2007 19:19:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 12:19:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.90.181 as permitted sender)
Received: from [66.249.90.181] (HELO ik-out-1112.google.com) (66.249.90.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 12:19:44 -0700
Received: by ik-out-1112.google.com with SMTP id b32so883513ika
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 12:19:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iN4ld34/iiIuulYx7DrHrKHks4hXL/5uj4ea6va8+hIjJC7Y776t2USes2xKpYJIBVN97k3jNebIBpi3ILDK3W5ER9kt826UwVY2ldA3auQ6weBV3ntz6yCpK4XKkror6Sjun9qVBhJAqExZKf9OkuwOesdmzIEcJC40xVS/ZX0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=amj17ukIwyL2SwDk7s5zR2H/QYwtv9aP1zhTV3vvyfDGeN2MlC5sWO3zPRsDeQ/0Gsw0zJQdxx0e231n8pwkeu6TpHTbh9cgtqgJqABYMklbn4orXfquvzGYLx3WcHNSe5J68Ptt9+6Ihm+3K6EC0lmbDbndQKYR8uZtFJKEfl8=
Received: by 10.64.28.3 with SMTP id b3mr12753441qbb.1183144761247;
        Fri, 29 Jun 2007 12:19:21 -0700 (PDT)
Received: by 10.65.151.12 with HTTP; Fri, 29 Jun 2007 12:19:21 -0700 (PDT)
Message-ID: <e994873a0706291219m2f5bfd23h3bcdb677b53116f9@mail.gmail.com>
Date: Fri, 29 Jun 2007 15:19:21 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and PhraseQuery
In-Reply-To: <4682DEB9.1060103@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24088_21497000.1183144761203"
References: <e994873a0706270745o458b969aqdd0204b0c4027ec4@mail.gmail.com>
	 <4682DEB9.1060103@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24088_21497000.1183144761203
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I tried to subclass PhraseScorer, but discovered that it's an abstract class
and its subclasses (ExactPhraseScorer and SloppyPhraseScorer) are final
classes. So instead, I extended Scorer with my custom scorer and extended
PhraseWeight (after making it public). My scorer's constructor is passed the
instance of PhraseScorer created by PhraseQuery.scorer(). My scorer's 'next'
and 'skipTo' methods call the PhraseScorer's methods first and if the result
is 'true', the payload is loaded and used to determine whether or not the
PhraseScorer's doc is a hit. If not, PhraseScorer.next() or skipTo() is
called again. In order to get the payload, I modified PhraseQuery to save
the TermPositions array it creates for its scorers and added a 'get' method.
The diff is included, below.

This is probably not the best solution, but at least a starting point for
further discussion.

Here's the diff:

Index: PhraseQuery.java
===================================================================
--- PhraseQuery.java    (revision 551992)
+++ PhraseQuery.java    (working copy)
@@ -36,7 +36,8 @@
   private Vector terms = new Vector();
   private Vector positions = new Vector();
   private int slop = 0;
-
+  private TermPositions[] tps;
+
   /** Constructs an empty phrase query. */
   public PhraseQuery() {}

@@ -104,7 +105,7 @@
       return result;
   }

-  private class PhraseWeight implements Weight {
+  public class PhraseWeight implements Weight {
     private Similarity similarity;
     private float value;
     private float idf;
@@ -138,7 +139,7 @@
       if (terms.size() == 0)              // optimize zero-term case
         return null;

-      TermPositions[] tps = new TermPositions[terms.size()];
+      tps = new TermPositions[terms.size()];
       for (int i = 0; i < terms.size(); i++) {
         TermPositions p = reader.termPositions((Term)terms.elementAt(i));
         if (p == null)
@@ -155,7 +156,9 @@
                                  reader.norms(field));

     }
-
+    public TermPositions[] getTermPositions() {
+        return tps;
+    }
     public Explanation explain(IndexReader reader, int doc)
       throws IOException {



On 6/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> You cannot do it because TermPositions is read in the
> PhraseWeight.scorer(IndexReader) method (or MultiPhraseWeight) and
> loaded into an array which is passed to PhraseScorer. Extend the Weight
> as well and pass the payload to the Scorer as well is a possibility.
>
> - Mark
>
> Peter Keegan wrote:
> > I'm looking at the new Payload api and would like to use it in the
> > following
> > manner. Meta-data is indexed as a special phrase (all terms at same
> > position) and a payload is stored with the first term of each phrase. I
> > would like to create a custom query class that extends PhraseQuery and
> > uses
> > its PhraseScorer to find matching documents. The custom query class then
> > reads the payload from the first term of the matching query and uses
> > it to
> > produce a new score. However, I don't see how to get the payload from
> the
> > PhraseScorer's TermPositions. Is this possible?
> >
> >
> > Peter
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24088_21497000.1183144761203--

From java-user-return-28937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 19:36:09 2007
Return-Path: <java-user-return-28937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18474 invoked from network); 29 Jun 2007 19:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 19:36:09 -0000
Received: (qmail 7304 invoked by uid 500); 29 Jun 2007 19:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7013 invoked by uid 500); 29 Jun 2007 19:36:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7002 invoked by uid 99); 29 Jun 2007 19:36:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 12:36:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 12:36:01 -0700
Received: by mu-out-0910.google.com with SMTP id g7so1086727muf
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 12:35:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WTXkJGqpyp1AqkVIGC88J8+mXaOXYM3QLqNqzdyTqSsGDgCqxXQYLtkLCDhjOf9dVL0etzx3jIjEjZMo6IL+o281xat5YWYCk55A1v7z5wyb9EIRHt9o+G6DS0kz9qn8AQdIhg/WuYjCJxCwCLVWulGm/SyEpyUb/WDrys9eprk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZqidJ3HGN76nBEyeJumFVnBMjHpuAox+r9WtusXjFw5JspQlmDw7n1jY8d4gqGfRlZ00/A4QVE4BQfiwEtdlmNc+r4Av/ux9C/ydyjZL4gY/m2HCMWcA3m9h4x6Da5aMwohxhLD9ulVGuR1lFIgQYu5/H6IqUNC8Z6LStlZ9T3A=
Received: by 10.82.105.13 with SMTP id d13mr6924743buc.1183145739230;
        Fri, 29 Jun 2007 12:35:39 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 29 Jun 2007 12:35:39 -0700 (PDT)
Message-ID: <359a92830706291235g83e0e5fkd38660a87228810a@mail.gmail.com>
Date: Fri, 29 Jun 2007 15:35:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: queryparser
In-Reply-To: <5d766e4e0706290126i7b5719dbx9bf758911a06f488@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49475_25555718.1183145739198"
References: <5d766e4e0706281029k46b64a0bteecdf9fc572453da@mail.gmail.com>
	 <359a92830706281140h5fcd3104rd60dd3523258ad16@mail.gmail.com>
	 <5d766e4e0706290126i7b5719dbx9bf758911a06f488@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49475_25555718.1183145739198
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I'd suggest the first thing you do is remove your custom
tokenizer and see what results you get with one of the normal parsers.

Then creep up on your custom analyzer bit by bit. Otherwise, it's
almost impossible to figure out what's going on except by
setting breakpoints in your analyzer and inspecting.

Best
Erick

On 6/29/07, pratik shinghal <pratikshinghal@gmail.com> wrote:
>
> On 6/29/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > What do you get if you do a
> > System.out.println(que.toString())?
> >
> > And what analyzer are you using?
> >
> > Erick
> >
> > On 6/28/07, pratik shinghal <pratikshinghal@gmail.com> wrote:
> > >
> > > i m using lucene(org.apache.lucene) and i want the java code for
> parsing
> > > single character string..
> > >
> > > my code is :
> > >
> > > QueryParser qp  = new QueryParser("",analyser);
> > > String  str = " track 9";
> > > Query que =  qp.parse(str);
> > > System.out.println(que);
> > >
> > > and i want the answer as  :    track ,  9
> > >
> > >
> > > but i m getting only "track"  and not getting  "9" .
> > > so tell me which analyser & queryparser i should use and kindly give
> me
> > > the
> > > java code for the same , as i m new to
> > > lucene.
> > >
> > > --
> > > Pratik Shinghal
> > >
> >
>
>
> the output of   System.out.println(que.toString())  is    "track".
> i m using AlphanumericAnalyser which is the custom Analyser made by me.
> the code of this analyser is as follows :
>
> *
>
> class* AlphanumericAnalyzer *extends* Analyzer {
>
> *public* *TokenStream* *tokenStream*(String *fieldName*, Reader reader) {
>
> *return* *new* CharTokenizer(reader) {
>
> *protected* *char* normalize(*char* c) {
>
> *return* Character.*toLowerCase*(c);
>
> }
>
> *protected* *boolean* isTokenChar(*char* c) {
>
> *return* Character.*isLetter*(c) || Character.*isDigit*(c);
>
> }
>
> };
>
> }
>
> *}*
>
>
>
>
> --
> Pratik Shinghal
>

------=_Part_49475_25555718.1183145739198--

From java-user-return-28938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 20:40:40 2007
Return-Path: <java-user-return-28938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40456 invoked from network); 29 Jun 2007 20:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 20:40:38 -0000
Received: (qmail 2103 invoked by uid 500); 29 Jun 2007 20:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1006 invoked by uid 500); 29 Jun 2007 20:40:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 995 invoked by uid 99); 29 Jun 2007 20:40:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 13:40:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 13:40:31 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3F9E55B76E; Fri, 29 Jun 2007 13:40:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 247D47F403
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 13:40:10 -0700 (PDT)
Date: Fri, 29 Jun 2007 13:40:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0706291336010.26113@hal.rescomp.berkeley.edu>
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: We are sharing a Lucene index in a Linux cluster over an NFS share.  We have
: multiple servers reading and writing to the index.
:
: I am getting regular lock exceptions e.g.
: Lock obtain timed out:
: NativeFSLock@/mnt/nfstest/repository/lucene/lock/lucene-2d3d31fa7f19eabb73d692df44087d81-n-write.lock

Perhaps i'm missing something, but i thought NativeFSLock was not suitable
for NFS? ... or is is this what "lockd" provides? (my NFS knowledge is
very out of date)

: - We are using kernel NFS and lockd is running.
: - We are using a modified version of the ExpirationTimeDeletionPolicy





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 20:42:51 2007
Return-Path: <java-user-return-28939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40855 invoked from network); 29 Jun 2007 20:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 20:42:50 -0000
Received: (qmail 7094 invoked by uid 500); 29 Jun 2007 20:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6971 invoked by uid 500); 29 Jun 2007 20:42:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6960 invoked by uid 99); 29 Jun 2007 20:42:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 13:42:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 13:42:40 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 407DF5B76E; Fri, 29 Jun 2007 13:42:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 196077F403
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 13:42:20 -0700 (PDT)
Date: Fri, 29 Jun 2007 13:42:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <Pine.LNX.4.58.0706291336010.26113@hal.rescomp.berkeley.edu>
Message-ID: <Pine.LNX.4.58.0706291341170.26113@hal.rescomp.berkeley.edu>
References: <4f9b23800706290201s36aaf1acj6e3a8249ad095b7f@mail.gmail.com>
 <Pine.LNX.4.58.0706291336010.26113@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: Perhaps i'm missing something, but i thought NativeFSLock was not suitable
: for NFS? ... or is is this what "lockd" provides? (my NFS knowledge is
: very out of date)

Do'h!

I just read the docs for NativeFSLockFactory and noticed the "For example,
for NFS servers there sometimes must be a separate lockd process running,
and other configuration may be required such as running the server in
kernel mode." part again ... sorry for the noise.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 21:10:28 2007
Return-Path: <java-user-return-28940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47023 invoked from network); 29 Jun 2007 21:10:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 21:10:27 -0000
Received: (qmail 60423 invoked by uid 500); 29 Jun 2007 21:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60388 invoked by uid 500); 29 Jun 2007 21:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60377 invoked by uid 99); 29 Jun 2007 21:10:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 14:10:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pratikshinghal@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 14:10:19 -0700
Received: by ug-out-1314.google.com with SMTP id c2so720599ugf
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 14:09:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q1zxkv7+DzbdDa5NuIZKPeHbU9g/XvkSj8Gg5LV0NNLyuIfmmCyJ3ZwBdEJa40d4/OZxps0Mgr/7Kzo7xF/PFzXa66tn06KamuqZo0px/VtyfOp+vVo9/uOzJiwQMfK0v2rHPXGMeBHD28pKX8QOk4B2ymOTCNLV94o2H3Ub5s4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JoRuoJPX+PiO9XayQKeolFTPKxSWJMYTD3Guvp6oDyhE0IxWgA/1t5Zc7WZsXDIcUgkWHDgto1WbiKxfUyxByP6Ib4vkYuxD3PgmyqD1pt2Ou7ohzqDNsl7rwpOcZs75ivxtfzqgAa6OQ6t5f9RyYW3P+mw8rG+/QmPzzu7TLnc=
Received: by 10.82.108.9 with SMTP id g9mr7107634buc.1183151397619;
        Fri, 29 Jun 2007 14:09:57 -0700 (PDT)
Received: by 10.82.184.17 with HTTP; Fri, 29 Jun 2007 14:09:57 -0700 (PDT)
Message-ID: <5d766e4e0706291409y2602b679n640ee9dfe96f624e@mail.gmail.com>
Date: Sat, 30 Jun 2007 02:39:57 +0530
From: "pratik shinghal" <pratikshinghal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: queryparser
In-Reply-To: <359a92830706291235g83e0e5fkd38660a87228810a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73121_11602185.1183151397594"
References: <5d766e4e0706281029k46b64a0bteecdf9fc572453da@mail.gmail.com>
	 <359a92830706281140h5fcd3104rd60dd3523258ad16@mail.gmail.com>
	 <5d766e4e0706290126i7b5719dbx9bf758911a06f488@mail.gmail.com>
	 <359a92830706291235g83e0e5fkd38660a87228810a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73121_11602185.1183151397594
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

when i m using normal tokenizers i m getting " track " as a result and not
getting " 9 ".

and when i m using this custom analyser and checking the output , i m
getting the right output as " track  9 ".
but as soon as i use queryparser using the same custom analyser i get only "
track " and not " 9 ".

so i want to why queryparser is ommiting the single character in the
string..
is there any threshhold in the queryparser or some minimum length which is
not able to enter single character string in the queryparser.


On 6/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Well, I'd suggest the first thing you do is remove your custom
> tokenizer and see what results you get with one of the normal parsers.
>
> Then creep up on your custom analyzer bit by bit. Otherwise, it's
> almost impossible to figure out what's going on except by
> setting breakpoints in your analyzer and inspecting.
>
> Best
> Erick
>
> On 6/29/07, pratik shinghal <pratikshinghal@gmail.com> wrote:
> >
> > On 6/29/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > What do you get if you do a
> > > System.out.println(que.toString())?
> > >
> > > And what analyzer are you using?
> > >
> > > Erick
> > >
> > > On 6/28/07, pratik shinghal <pratikshinghal@gmail.com> wrote:
> > > >
> > > > i m using lucene(org.apache.lucene) and i want the java code for
> > parsing
> > > > single character string..
> > > >
> > > > my code is :
> > > >
> > > > QueryParser qp  = new QueryParser("",analyser);
> > > > String  str = " track 9";
> > > > Query que =  qp.parse(str);
> > > > System.out.println(que);
> > > >
> > > > and i want the answer as  :    track ,  9
> > > >
> > > >
> > > > but i m getting only "track"  and not getting  "9" .
> > > > so tell me which analyser & queryparser i should use and kindly give
> > me
> > > > the
> > > > java code for the same , as i m new to
> > > > lucene.
> > > >
> > > > --
> > > > Pratik Shinghal
> > > >
> > >
> >
> >
> > the output of   System.out.println(que.toString())  is    "track".
> > i m using AlphanumericAnalyser which is the custom Analyser made by me.
> > the code of this analyser is as follows :
> >
> > *
> >
> > class* AlphanumericAnalyzer *extends* Analyzer {
> >
> > *public* *TokenStream* *tokenStream*(String *fieldName*, Reader reader)
> {
> >
> > *return* *new* CharTokenizer(reader) {
> >
> > *protected* *char* normalize(*char* c) {
> >
> > *return* Character.*toLowerCase*(c);
> >
> > }
> >
> > *protected* *boolean* isTokenChar(*char* c) {
> >
> > *return* Character.*isLetter*(c) || Character.*isDigit*(c);
> >
> > }
> >
> > };
> >
> > }
> >
> > *}*
> >
> >
> >
> >
> > --
> > Pratik Shinghal
> >
>



-- 
Pratik Shinghal

------=_Part_73121_11602185.1183151397594--

From java-user-return-28941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 21:28:18 2007
Return-Path: <java-user-return-28941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53198 invoked from network); 29 Jun 2007 21:28:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 21:28:17 -0000
Received: (qmail 97198 invoked by uid 500); 29 Jun 2007 21:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97162 invoked by uid 500); 29 Jun 2007 21:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97149 invoked by uid 99); 29 Jun 2007 21:28:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 14:28:13 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rengelhardt@kcp.com designates 198.62.69.76 as permitted sender)
Received: from [198.62.69.76] (HELO kcpgw-vip.kcp.com) (198.62.69.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 14:28:09 -0700
Received: from pmsgp2.kcp.com by kcpgw-vip.kcp.com
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Fri, 29 Jun 2007 16:27:48 -0500
Received: from mailhub1.kcp.com (mailhub1.kcp.com [147.101.250.18])
	by pmsgp2.kcp.com (8.13.8/8.13.8) with ESMTP id l5TLRmlk012812
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 16:27:48 -0500
	(envelope-from rengelhardt@kcp.com)
Subject: Limiting search results by a collection of terms
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.5 November 30, 2005
Message-ID: <OF51BC25A3.2720DA32-ON87257309.00757C15-87257309.0075E532@kcp.com>
From: rengelhardt@kcp.com
Date: Fri, 29 Jun 2007 15:27:47 -0600
X-MIMETrack: Serialize by Router on nmmail1/KCP(Release 6.5.6HF110 | June 20, 2007) at
 06/29/2007 03:27:47 PM
MIME-Version: 1.0
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: base64
X-Internal: Outgoing
X-Virus-Checked: Checked by ClamAV on apache.org

DQpJ4oCZbSBjdXJyZW50bHkgYSBiaXQgY29uZnVzZWQgb24gaG93IHRvIGFjY29tcGxpc2ggbGlt
aXRpbmcgbXkgc2VhcmNoDQpyZXN1bHRzIGluIEx1Y2VuZSAodjEuNC4zIGNhbuKAmXQgZWFzaWx5
IHVwZ3JhZGUgZm9yIHRoaXMgcHJvamVjdCkuIEhvcGVmdWxseQ0Kc29tZW9uZSBjYW4gaGVscCBw
b2ludCBtZSBpbiB0aGUgY29ycmVjdCBkaXJlY3Rpb24uDQoNCkVzc2VudGlhbGx5IG15IGFwcGxp
Y2F0aW9uIGlzIGNvbXByaXNlZCBvZiBzZXZlcmFsIG9iamVjdHMsIG5hbWVseSBVc2VyLA0KR3Jv
dXAsIGFuZCBEb2N1bWVudCAoY29udmVydGVkIHRvIGx1Y2VuZSBkb2N1bWVudCkuDQpEb2N1bWVu
dHMgbWF5IGJlIGFzc2lnbmVkIHRvIG11bHRpcGxlIEdyb3VwcyAobWFueS10by1tYW55KS4NClVz
ZXJzIG1heSBiZSBtZW1iZXJzIG9mIG11bHRpcGxlIGdyb3VwcyAobWFueS10by1tYW55KS4NCkEg
VXNlcuKAmXMgc2VhcmNoIHNob3VsZCBvbmx5IHJldHVybiBEb2N1bWVudCBvYmplY3RzIHRoYXQg
YXJlIGFzc2lnbmVkIHRvIGENCmdyb3VwIHRoYXQgdGhlIHVzZXIgaXMgYSBtZW1iZXIgdG8uDQoN
Ck15IGJlc3QgZ3Vlc3MgaXMgd2hlbiBpbmRleGluZyBteSBkb2N1bWVudCBJIHNob3VsZCBjcmVh
dGUgYSBmaWVsZCB0aGF0DQpjb250YWlucyBhbGwgb2YgdGhlIGdpdmVuIGRvY3VtZW504oCZcyBn
cm91cHPigJkgaWRzIChlc3NlbnRpYWxseSBhIHNwYWNlDQpkZWxpbWl0ZWQgbGlzdCBvZiB1bmlx
dWUgTG9uZyB2YWx1ZXMgY29udmVydGVkIHRvIHN0cmluZ3MpLiBHaXZlbiB0aGlzLCBJDQp3aWxs
IG5lZWQgc29tZSB3YXkgdG8gZWxpbWluYXRlIHJlc3VsdHMgYmFzZWQgb24gdGhlIGNvbnRlbnRz
IG9mIHRoaXMgZmllbGQNCmlmIHRoZSBzZWFyY2hpbmcgdXNlciBpcyBub3QgYSBtZW1iZXIgb2Yg
YW55IG9mIHRoZSBncm91cHMgdGhhdCBhIGRvY3VtZW50DQppcyBpbi4gSeKAmWQgaW1hZ2luZSBh
IGxvbmcgY2hhaW4gb2YgT1IgYW5kIE5PVCBjbGF1c2VzIGlzIG5vdCB0aGUgYmVzdCB3YXkNCm9m
IGRvaW5nIHRoaW5ncyBoZXJlLiBJcyB0aGlzIHdoYXQgYSBRdWVyeUZpbHRlciBpcyBmb3IsIGlm
IHNvIGhvdyBkbyBJIHVzZQ0KaXQ/IEkgY291bGQgcG9zdCBwYXJzZSB0aGUgcmVzdWx0cyBhZnRl
ciB0aGUgc2VhcmNoLCBidXQgSSdkIGltYWdpbmUgbHVjZW5lDQpjYW4gdGFrZSBjYXJlIG9mIHRo
aXMgbW9yZSBlZmZpY2llbnRseSB0aGFuIEkgY2FuIHdpdGggYSBsYXJnZSBudW1iZXIgb2YNCmRv
Y3VtZW50cy4NCg0KQW55IGhlbHAgd291bGQgYmUgZ3JlYXRseSBhcHByZWNpYXRlZC4NCg0KLVJv
YmVydA==




From java-user-return-28942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 23:47:31 2007
Return-Path: <java-user-return-28942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98095 invoked from network); 29 Jun 2007 23:47:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 23:47:29 -0000
Received: (qmail 66831 invoked by uid 500); 29 Jun 2007 23:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65814 invoked by uid 500); 29 Jun 2007 23:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65803 invoked by uid 99); 29 Jun 2007 23:47:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 16:47:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 16:47:21 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l5TNkvVu773606
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 23:46:57 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5TNkvtg1736704
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 01:46:57 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5TNkva6024373
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 01:46:57 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5TNkuRt024370
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 01:46:56 +0200
In-Reply-To: <4f9b23800706290533q5eaa4e1ej24033725bf7bf34@mail.gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF248E2D47.6A05F7BD-ON88257309.00806F5D-88257309.00824487@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 29 Jun 2007 16:42:52 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 30/06/2007 02:46:56
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Patrick Kimber wrote:

> As requested, I have been trying to improve the
> logging in the application so I can give you more
> details of the update pattern.
>
> I am using the Lucene Index Accessor contribution
> to co-ordinate the readers and writers:
> http://www.nabble.com/Fwd%3A-Contribution%3A-
> LuceneIndexAccessor-t17416.html#a47049

Never used the IndexAccessor patch, so I may be
wrong in the following.

> If the close method, in the IndexAccessProvider, fails
> the exception is logged but not re-thrown:
>
> public void close(IndexReader reader) {
>   if (reader != null) {
>     try {
>       reader.close();
>     } catch (IOException e) {
>       log.error("", e);
>     }
>
> I have been checking the application log.  Just before
> the time when the lock file errors occur I found this
> log entry:
>   [11:28:59] [ERROR] IndexAccessProvider
>   java.io.FileNotFoundException:
>   /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/
>   segments_h75 (No such file or directory)
>    at java.io.RandomAccessFile.open(Native Method)

So a random file is opened as you close the reader...?
I conclude you use IndexReader to delete documents, right?
If so, these IndexReaders are actually writers, and we
should see them as such when discussing this.

If this is the case, just to verify - you should use the
IndexReader constructor that takes a DeletionPolicy param.
Otherwise default deletion policy will be used, and
old files would be removed "too soon".

If you do use the correct IndexReader constructor, it
might indicate that the 10-minutes-deletion-policy does
not work as it should, like Mark suggested.

> - I guess the missing segments file could result
> in the lock file not being removed?

Yes.

> - Is it safe to ignore this exception (probably not)?

No, let's fix it...  /;->

> - Why would the segments file be missing?  Could this
> be connected to the NFS issues in some way?

I would think so.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 29 23:50:42 2007
Return-Path: <java-user-return-28943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98699 invoked from network); 29 Jun 2007 23:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2007 23:50:41 -0000
Received: (qmail 71429 invoked by uid 500); 29 Jun 2007 23:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71152 invoked by uid 500); 29 Jun 2007 23:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71141 invoked by uid 99); 29 Jun 2007 23:50:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 16:50:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 16:50:33 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l5TNo11P477576
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 23:50:01 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5TNo15H2117868
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 01:50:01 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5TNo1Q3025313
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 01:50:01 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5TNo1jK025310
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 01:50:01 +0200
In-Reply-To: <c68e39170706290647o77cc4c29t4ecca000af1e95e4@mail.gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFFBC6AB23.B412A20B-ON88257309.00824908-88257309.0082A587@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 29 Jun 2007 16:47:00 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 30/06/2007 02:50:00
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik wrote:

> Note that some Solr users have reported a similar issue.
> https://issues.apache.org/jira/browse/SOLR-240

Seems the scenario there is without using native locks? -
"i get the stacktrace below ... with useNativeLocks turned off"


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 00:14:37 2007
Return-Path: <java-user-return-28944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5255 invoked from network); 30 Jun 2007 00:14:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 00:14:36 -0000
Received: (qmail 93439 invoked by uid 500); 30 Jun 2007 00:14:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93315 invoked by uid 500); 30 Jun 2007 00:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93302 invoked by uid 99); 30 Jun 2007 00:14:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 17:14:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 17:14:29 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l5U0E7un260784
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 00:14:07 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.3) with ESMTP id l5U0E7Vn2175160
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 02:14:07 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l5U0E741000740
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 02:14:07 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l5U0E6V3000737
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 02:14:06 +0200
In-Reply-To: <4685280D.7080500@gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF23520A63.14BA7699-ON88257309.0082B815-8825730A.00011A11@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 29 Jun 2007 17:12:02 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 30/06/2007 03:14:06
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:

> You might try just using one of the nodes as
> the writer. In Michaels comments, he always seems
> to mention the pattern of one writer many
> readers on nfs. In this case you could use
> no LockFactory and perhaps gain a little speed there.

One thing I would worry about if multiple write nodes
is system clocks. Note that ExpirationTimeDeletionPolicy
is based on file.lastModified().

I am not sure here: do different nodes see the same
file.lastModified() over NFS? I would assume they do
up to the nodes system clocks differences + some
NFS delays, in which case if clocks are at most seconds
apart I think we should be okay with that 10 minutes
expiration time.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 00:35:59 2007
Return-Path: <java-user-return-28945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11688 invoked from network); 30 Jun 2007 00:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 00:35:59 -0000
Received: (qmail 14633 invoked by uid 500); 30 Jun 2007 00:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13566 invoked by uid 500); 30 Jun 2007 00:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13555 invoked by uid 99); 30 Jun 2007 00:35:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 17:35:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.105.6.20] (HELO sabe.cs.wisc.edu) (128.105.6.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 17:35:51 -0700
Received: from [9.1.67.17] (p1.almaden.ibm.com [198.4.83.52])
	(authenticated bits=0)
	by sabe.cs.wisc.edu (8.13.6/8.13.6) with ESMTP id l5U0ZT9Y014122
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 19:35:30 -0500
Message-ID: <4685A4A2.9060700@cs.wisc.edu>
Date: Fri, 29 Jun 2007 17:32:34 -0700
From: Akanksha Baid <baid@cs.wisc.edu>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: spannearquery help
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have two strings -
String1 contains multiple words  &
String2 contains just 1 word

I need to search my index to find hits where String1 and String2 occur 
within a distance "slop = d" of each other. Order is important. Also, 
ideally I would like to do a fuzzy search on String1. Is there some way 
to do this without having to chop string1 into multiple terms and adding 
them to a SpanQuery[]?

Thanks for the help.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 00:45:00 2007
Return-Path: <java-user-return-28946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13547 invoked from network); 30 Jun 2007 00:45:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 00:45:00 -0000
Received: (qmail 21931 invoked by uid 500); 30 Jun 2007 00:44:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20948 invoked by uid 500); 30 Jun 2007 00:44:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20937 invoked by uid 99); 30 Jun 2007 00:44:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 17:44:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 17:44:52 -0700
Received: by wx-out-0506.google.com with SMTP id i28so859810wxd
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 17:44:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ITzSrCrH1QzqiGQhwLmS+oyVzXX2349Wy00JzBc1FAFbbstIeJ7MiwUlyLFkT97aJiZNiy1+T2WR83//sCvsfAtzpupNP73QE3BYVeeyx6vUDwFbkqNup7ehYzj+GUGi6OlUQ/Qi1dyO6Gja1air+SAIAPxRWhTF8NnccPPlxGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nPicmLg16L8hFuypqCrTPpTvk7a5OYtX6GR+VMpAMD2TsOzKFIgBWzOX4JV4zwNEUE6EtILsV60arqtZtNXUQwjJyMsL1s3QM8E6l0gk8XUXZ++dGcpyO4tKP/gwjGUn++dDtSIBJQs2l8AGbQ+hz3TdGsEhuzQ2GOH5T9o2oxI=
Received: by 10.70.66.18 with SMTP id o18mr74517wxa.1183164270423;
        Fri, 29 Jun 2007 17:44:30 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id p33sm4416557elf.2007.06.29.17.44.28
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 29 Jun 2007 17:44:28 -0700 (PDT)
Message-ID: <4685A743.1070904@gmail.com>
Date: Fri, 29 Jun 2007 20:43:47 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
References: <OF248E2D47.6A05F7BD-ON88257309.00806F5D-88257309.00824487@il.ibm.com>
In-Reply-To: <OF248E2D47.6A05F7BD-ON88257309.00806F5D-88257309.00824487@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

>Never used the IndexAccessor patch, so I may be
>wrong in the following.

>No, let's fix it...  /;->

Don't mean to wade in over my head here, but just to help out those that 
have not used LuceneIndexAccessor.

I am fairly certain that using the LuceneIndexAccessor could easily 
create the FileNotFoundException on the segments file. I am a lot less 
clear on whether that would then cause a problem with the WriteLock.

LuceneIndexAccessor manages Readers and Writers (And Searchers, and 
Directories, etc). It keeps track of how many Readers are out and 
ensures a single Writer. You must request and release Readers and 
Writers. All Readers are cached until you release a Writer. Upon 
releasing a Writer, LuceneIndexAccessor waits for all Readers to be 
returned and clears the cache, causing new Readers to be opened on the 
next request.

This is certain to be a problem due to the unavailability of "delete on 
last close" semantics over NFS. If a certain node in the cluster has not 
released a writer (due to not being used to write to the index) in a 
long time, another node could trigger the deletion of the files that a 
Reader from the first Node was using. LuceneIndexAccessor runs 
independently on each node, and so is not providing coherent access 
across all nodes. The WriteLock is being to sync the Writer from each 
node and the Readers are not being coordinated at all...each Node counts 
on getting a Writer released to cause its cached Readers to be released 
and reopened (on first access).

Without this problem solved, it would seem difficult to know the 
FileNotFoundException was caused by something else. What I don't know is 
if or how this would cause a WriteLock timeout. Perhaps there is more 
than one issue at hand.

A simple way to test the LuceneIndexAccessor problem would be to 
implement a synchronized method that calls 
waitForReadersAndCloseCached() (this method would prob need more logic 
than just the simple call), and then call that method more often than 
every 10 minutes.


- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 01:00:04 2007
Return-Path: <java-user-return-28947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17392 invoked from network); 30 Jun 2007 01:00:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 01:00:02 -0000
Received: (qmail 36710 invoked by uid 500); 30 Jun 2007 00:59:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36666 invoked by uid 500); 30 Jun 2007 00:59:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36655 invoked by uid 99); 30 Jun 2007 00:59:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 17:59:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 17:59:52 -0700
Received: by wx-out-0506.google.com with SMTP id i28so863476wxd
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 17:59:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YZ1MRsLu3p1vvSSjrpFiqhYIYB63YQlfZR27mHKe81Q/+BpN/Woc8pXZFeE93mMZZZXo4Xk4AYIDpnhF1+rYmJVbBSVnbhQCNrX4fm7NXg4I89ahKvpn3ohv76AqFkwYXZxdMofVjozRcj43wuX9KwTNe7j1H0qci6IS6epMFkk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=PL0sOqIxnW+DWwvm23io5yjn6uenRFubk1xHOYRCBr8EGQQv59ENT/fh0OvtEydiJroqHS64eeqgpIOCN6D3Nv1gQkyxxqLkkzTF4bp/7EgNS13qkqqDOmEmt7J4WfiQ5Of96RA2GA2zp/KuIq/cL+zXt6oPQlRU83TsCqsXdQg=
Received: by 10.70.46.1 with SMTP id t1mr5682441wxt.1183165172302;
        Fri, 29 Jun 2007 17:59:32 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id h27sm4260863elf.2007.06.29.17.59.31
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 29 Jun 2007 17:59:31 -0700 (PDT)
Message-ID: <4685AAC9.1090207@gmail.com>
Date: Fri, 29 Jun 2007 20:58:49 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: spannearquery help
References: <4685A4A2.9060700@cs.wisc.edu>
In-Reply-To: <4685A4A2.9060700@cs.wisc.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would look at Query getFieldQuery(String field, String queryText) in 
QueryParser for inspiration.

feed the two strings, one at a time to the analyzer.

With the results from String1 do something like:

      List<SpanQuery> clauses = new ArrayList<SpanQuery>(v.size());
                    for (int i = 0; i < v.size(); i++) {
                        SpanQuery termQuery = new SpanTermQuery(new Term(
                                    field, v.get(i).termText()));
                        termQuery.setBoost(this.boost);
                        clauses.set(i, termQuery);
                    }

                    SpanNearQuery query = new 
SpanNearQuery((SpanQuery[]) clauses.toArray(
                                new SpanQuery[0]), slop, true);

Except first look for karl wettins FuzzySpanQuery in JIRA. Instead of a 
SpanTermQuery use that.

Now wrap this SpanNearQuery in a new SpanNearQuery with String2.

- Mark


Akanksha Baid wrote:
> I have two strings -
> String1 contains multiple words  &
> String2 contains just 1 word
>
> I need to search my index to find hits where String1 and String2 occur 
> within a distance "slop = d" of each other. Order is important. Also, 
> ideally I would like to do a fuzzy search on String1. Is there some 
> way to do this without having to chop string1 into multiple terms and 
> adding them to a SpanQuery[]?
>
> Thanks for the help.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 01:06:01 2007
Return-Path: <java-user-return-28948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19329 invoked from network); 30 Jun 2007 01:06:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 01:06:00 -0000
Received: (qmail 47655 invoked by uid 500); 30 Jun 2007 01:05:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47617 invoked by uid 500); 30 Jun 2007 01:05:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47606 invoked by uid 99); 30 Jun 2007 01:05:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 18:05:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 18:05:52 -0700
Received: by nz-out-0506.google.com with SMTP id i28so265732nzi
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 18:05:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=nJcv/jKnrnTcHGfcd4W/KKgHxMJapTJXoWzk0jCZEQ5Y79Jojm484ExHrMDDjP3KIY2qa6nwzQI0OFlSmR6yQfZCAc6RRlMD6NLYSs9vLgmOD/QjGLdClNuVl2uOi/tZQ05Vm5H1LPk1OTxw+CvDT5BH5ggZPwdpdCyAdwr3Jf8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=abc/wsjHr9hxuOuBW+p7OqjiCN4JwWcby451z8gelOHIwGjPren/4dN60XxyJGyXaSqBf9vxoLsIgj7sJwVYgg6fveX7tHIRbYw+99L4uOlnXkrtmHKRDNnaWX6X1JTxQT7rTcmXy/I/zbu5XKysz/gp9MsclVka7HzeD7OXrxM=
Received: by 10.142.232.20 with SMTP id e20mr219502wfh.1183165530998;
        Fri, 29 Jun 2007 18:05:30 -0700 (PDT)
Received: by 10.143.3.1 with HTTP; Fri, 29 Jun 2007 18:05:30 -0700 (PDT)
Message-ID: <c68e39170706291805w6e5c4dfbo3526e539d4e9f3f6@mail.gmail.com>
Date: Fri, 29 Jun 2007 21:05:30 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <OFFBC6AB23.B412A20B-ON88257309.00824908-88257309.0082A587@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170706290647o77cc4c29t4ecca000af1e95e4@mail.gmail.com>
	 <OFFBC6AB23.B412A20B-ON88257309.00824908-88257309.0082A587@il.ibm.com>
X-Google-Sender-Auth: 2db484b3ac256a73
X-Virus-Checked: Checked by ClamAV on apache.org

On 6/29/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> > Note that some Solr users have reported a similar issue.
> > https://issues.apache.org/jira/browse/SOLR-240
>
> Seems the scenario there is without using native locks? -
> "i get the stacktrace below ... with useNativeLocks turned off"

Yes... but that doesn't mean there isn't some sort of race condition
or issue with lucene locking in general though.  If it were only
windows, I'd perhaps chalk it up to a virus scanner or something.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 01:10:51 2007
Return-Path: <java-user-return-28949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20677 invoked from network); 30 Jun 2007 01:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 01:10:51 -0000
Received: (qmail 54977 invoked by uid 500); 30 Jun 2007 01:10:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54943 invoked by uid 500); 30 Jun 2007 01:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54931 invoked by uid 99); 30 Jun 2007 01:10:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 18:10:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jun 2007 18:10:43 -0700
Received: by wx-out-0506.google.com with SMTP id i28so866221wxd
        for <java-user@lucene.apache.org>; Fri, 29 Jun 2007 18:10:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=U4TeiMSI4fTvBydjC6ZP9nGkkCNEDrWARn99JxsdniRDqZFtkZV1vikFGo40hVkdNhF4Wdgr6iK7zeJ4jSZ+aJcUk8DaVPeYGKAULU7pkMOao2+tu4DNB5z4Uvzrw9P/asLyl1pOYlI79d6xv6o/F4Fm95M/6oLeLI1NadF6KAw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=f5QVJmlsZLvkXFfhjcp0e/pvEJ5wiZ3eAX7YddWORMqNcaFd8qlya0NZKXMA55vHSPRMoNmg6C5YpPq8Z1oVucyH7G2RlhzvD41darm8RQNOZfsTc1qds6/2BirFQSlMa42PcVe+RqH+pkLhDH7viNV2WPp4BIWbGbChcSzThLc=
Received: by 10.70.48.11 with SMTP id v11mr123170wxv.1183165822645;
        Fri, 29 Jun 2007 18:10:22 -0700 (PDT)
Received: from ?192.168.1.100? ( [216.66.114.204])
        by mx.google.com with ESMTP id n29sm4873709elf.2007.06.29.18.10.21
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 29 Jun 2007 18:10:22 -0700 (PDT)
Message-ID: <4685AD53.8060008@gmail.com>
Date: Fri, 29 Jun 2007 21:09:39 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Limiting search results by a collection of terms
References: <OF51BC25A3.2720DA32-ON87257309.00757C15-87257309.0075E532@kcp.com>
In-Reply-To: <OF51BC25A3.2720DA32-ON87257309.00757C15-87257309.0075E532@kcp.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

You do want to use a QueryFilter. The method you suggest sounds good. 
Make a field called group with a term for each group it belongs to, a 
field called user with the users it belongs to etc.

QueryFilter will take a query, i.e. group:managers

Pass the Filter to the search method on your Searcher. The first time 
you do this you will just be doing a regular search. The benefit will 
come when you reuse that Filter, as the matching docs will be cached. In 
Lucene 1.4 you may have to wrap the QueryFilter with a CachingFilter -- 
I don't remember. QueryFilter caches by default in the latest release.

Ensure you are using the same Searcher as often as possible, because the 
cache is keyed to the Searcher.

- Mark

rengelhardt@kcp.com wrote:
> Iâm currently a bit confused on how to accomplish limiting my search
> results in Lucene (v1.4.3 canât easily upgrade for this project). Hopefully
> someone can help point me in the correct direction.
>
> Essentially my application is comprised of several objects, namely User,
> Group, and Document (converted to lucene document).
> Documents may be assigned to multiple Groups (many-to-many).
> Users may be members of multiple groups (many-to-many).
> A Userâs search should only return Document objects that are assigned to a
> group that the user is a member to.
>
> My best guess is when indexing my document I should create a field that
> contains all of the given documentâs groupsâ ids (essentially a space
> delimited list of unique Long values converted to strings). Given this, I
> will need some way to eliminate results based on the contents of this field
> if the searching user is not a member of any of the groups that a document
> is in. Iâd imagine a long chain of OR and NOT clauses is not the best way
> of doing things here. Is this what a QueryFilter is for, if so how do I use
> it? I could post parse the results after the search, but I'd imagine lucene
> can take care of this more efficiently than I can with a large number of
> documents.
>
> Any help would be greatly appreciated.
>
> -Robert

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 11:31:14 2007
Return-Path: <java-user-return-28950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4482 invoked from network); 30 Jun 2007 11:31:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 11:31:13 -0000
Received: (qmail 2950 invoked by uid 500); 30 Jun 2007 11:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2604 invoked by uid 500); 30 Jun 2007 11:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2593 invoked by uid 99); 30 Jun 2007 11:31:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Jun 2007 04:31:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.89.18.14] (HELO outbound-mail-45.bluehost.com) (69.89.18.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 30 Jun 2007 04:31:04 -0700
Received: (qmail 17873 invoked by uid 0); 30 Jun 2007 11:30:43 -0000
Received: from unknown (HELO box108.bluehost.com) (69.89.22.108)
  by mailproxy3.bluehost.com with SMTP; 30 Jun 2007 11:30:43 -0000
Received: from aputeaux-151-1-95-253.w86-205.abo.wanadoo.fr ([86.205.94.253] helo=[192.168.0.4])
	by box108.bluehost.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.63)
	(envelope-from <emmanuel@hibernate.org>)
	id 1I4bA2-0003Ax-Iu
	for java-user@lucene.apache.org; Sat, 30 Jun 2007 05:30:43 -0600
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <17AF4BEE-4642-46B4-B8B2-F7AA70E32C50@gmail.com>
References: <F3B3254741B1404D92215D80C451DE84017E81A7@CORPUSMX10B.corp.emc.com> <B17A8D07-1D70-4515-B471-8251921C0941@gmail.com> <79378E12-EEAF-4862-A28E-8F5568A6DD99@hibernate.org> <17AF4BEE-4642-46B4-B8B2-F7AA70E32C50@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8F753890-EFB0-4DC4-80D0-F8F1316E2F2F@hibernate.org>
Content-Transfer-Encoding: 7bit
From: Emmanuel Bernard <emmanuel@hibernate.org>
Subject: Re: Lucene as primary object storage
Date: Sat, 30 Jun 2007 13:30:35 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Identified-User: {1307:box108.bluehost.com:emmanue2:emmanuelbernard.com} {sentby:smtp auth 86.205.94.253 authed with emmanuel+emmanuelbernard.com}
X-Virus-Checked: Checked by ClamAV on apache.org

While not everything in the following post apply to Lucene as a  
storage solution, it has some interesting points
http://blog.hibernate.org/cgi-bin/blosxom.cgi/2007/05/23#in-defence

I need to trust my data storage for its good support for:
  - transaction
  - reliability
  - scalability
  - readability (being able to read my data from any random language  
on earth 10 years from now)

I trust my RDBMS because it's been 30 years that they deliver on all  
of those criteria.

There are other qualities that explain why I prefer Relational DB to  
keep my data (including relational queries, ability to do correlated  
queries between 2 or more "associated" entities/documents), but that  
should be good enough to give you an idea of that I think.


On  Jun 29, 2007, at 08:48, karl wettin wrote:

> 28 jun 2007 kl. 15.37 skrev Emmanuel Bernard:
>> I don't really like the idea actually: I'm much comfortable with  
>> having my data in a relational DB :)
>
> If you don't mind, please develop that a bit further.
>
>
> I think Lucene is suited pretty well for object storage if you also  
> need it as an index. It is especially great for them heavy  
> polymorphic or inheritive models. One simple term query can span  
> multiple classes. Many ORMs require SQL joins or what unless you  
> choose to store the data in some semi-retarded way.
>
> There are of course some setbacks. I can not update a single field  
> of an instance, I have to update the whole thing. So one have to be  
> careful with bi-directional associations beween classes and such.
>
>
> My hypotheisis in general goes something like "the less, the  
> simpler, the faster, the better it is". That is probably why I sort  
> of got sidetracked by the codemonkey on my shoulder while fooling  
> around with @annotation for the first time and ended up with an  
> object storage somewhere between the Sleepycat transactional API  
> and the Hibernate lazy patterns, but using Lucene as persistency. I  
> still don't know how well it works with lots of data.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 12:05:18 2007
Return-Path: <java-user-return-28951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15783 invoked from network); 30 Jun 2007 12:05:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 12:05:17 -0000
Received: (qmail 41663 invoked by uid 500); 30 Jun 2007 12:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41595 invoked by uid 500); 30 Jun 2007 12:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41580 invoked by uid 99); 30 Jun 2007 12:05:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Jun 2007 05:05:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Jun 2007 05:05:08 -0700
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 6E4BB45AF
	for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 08:04:47 -0400 (EDT)
Received: from web7.messagingengine.com ([10.202.2.216])
  by compute1.internal (MEProxy); Sat, 30 Jun 2007 08:04:47 -0400
Received: by web7.messagingengine.com (Postfix, from userid 99)
	id 45D9610FF2; Sat, 30 Jun 2007 08:04:47 -0400 (EDT)
Message-Id: <1183205087.22530.1197845153@webmail.messagingengine.com>
X-Sasl-Enc: OoFtIzPoMBsTNajqW+LEGay7vV+kYGL7tfZ7x94oNDTH 1183205087
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <c68e39170706290647o77cc4c29t4ecca000af1e95e4@mail.gmail.com>
   <OFFBC6AB23.B412A20B-ON88257309.00824908-88257309.0082A587@il.ibm.com>
   <c68e39170706291805w6e5c4dfbo3526e539d4e9f3f6@mail.gmail.com>
Subject: Re: Lucene 2.2, NFS, Lock obtain timed out
In-Reply-To: <c68e39170706291805w6e5c4dfbo3526e539d4e9f3f6@mail.gmail.com>
Date: Sat, 30 Jun 2007 08:04:47 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


Patrick Kimber wrote:

> I have been checking the application log.  Just before the time when
> the lock file errors occur I found this log entry:
> [11:28:59] [ERROR] IndexAccessProvider
> java.io.FileNotFoundException:
> /mnt/nfstest/repository/lucene/lucene-icm-test-1-0/segments_h75 (No
> such file or directory)
>     at java.io.RandomAccessFile.open(Native Method)

I think this exception is the root cause.  On hitting this IOException
in reader.close(), that means this reader has not released its write
lock.  Is it possible to see the full stack trace?

Having the wrong deletion policy or even a buggy deletion policy (if
indeed file.lastModified() varies by too much across machines) can't
cause this (I think).  At worse, the wrong deletion policy should
cause other already-open readers to hit "Stale NFS handle"
IOExceptions during searching.  So, you should use your
ExpirationTimeDeletionPolicy when opening your readers if they will be
doing deletes, but I don't think it explains this root-cause exception
during close().

It's a rather spooky exception ... in close(), the reader initializes
an IndexFileDeleter which lists the directory and opens any segments_N
files that it finds.

Do you have a writer on one machine closing, and then very soon
thereafter this reader on a different machine does deletes and tries
to close? 

My best guess is the exception is happening inside that initialization
because the directory listing said that "segments_XXX" exists but then
when it tries to open that file, it does not in fact exist.  Since NFS
client-side caching (especially directory listing cache) is not
generally guaranteed to be "correct", it could explain this.  But let's
see the full stack trace to make sure this is it...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-28952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 15:00:32 2007
Return-Path: <java-user-return-28952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56180 invoked from network); 30 Jun 2007 15:00:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 15:00:31 -0000
Received: (qmail 41820 invoked by uid 500); 30 Jun 2007 15:00:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41785 invoked by uid 500); 30 Jun 2007 15:00:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41774 invoked by uid 99); 30 Jun 2007 15:00:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Jun 2007 08:00:26 -0700
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=FORGED_YAHOO_RCVD,HTML_10_20,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Jun 2007 08:00:20 -0700
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1I4eQZ-0001rx-Tu
	for java-user@lucene.apache.org; Sat, 30 Jun 2007 07:59:59 -0700
Message-ID: <11374265.post@talk.nabble.com>
Date: Sat, 30 Jun 2007 07:59:59 -0700 (PDT)
From: Mahdi Rahimi <mhd_rhm@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: JavaCC Download
In-Reply-To: <46814A01.40709@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50789_33216279.1183215599920"
X-Nabble-From: mhd_rhm@yahoo.com
References: <11233766.post@talk.nabble.com> <467A8E41.4090801@syr.edu> <11263519.post@talk.nabble.com> <625a01bb0706241811p4fa21cdau2343106f2b9ecd8b@mail.gmail.com> <46814A01.40709@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50789_33216279.1183215599920
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi.

Thanks To Steven Rowe 

I'm using wget right like your suggestion. But there is certification error.
Respone of WGet is 
"Warning: Connecting to javacc.dev.java.net|204.16.104.198|:443...
connected.
WARNING: Certificate verification error for javacc.dev.java.net: unable to 
... loccal issuer certificate
HTTP request sent, awaiting response... 403 Forbidden
18:23:02 ERROR 403: Forbidden."
What's the problem. what do you think?

Thanks.


Steven Rowe wrote:
> 
> I don't think you need to register - I am not registered and I can
> download from there.
> 
> My guess is that Mahdi Rahimi's browser doesn't know how to speak the
> HTTPS protocol.
> 
> Here's an invocation of wget (I have version 1.10.2) that works for me
> to get the .zip archive (all on one line):
> 
> wget --no-check-certificate
> https://javacc.dev.java.net/files/documents/17/26777/javacc-4.0.zip
> 
> Or if you want the .tar.gz archive:
> 
> wget --no-check-certificate
> https://javacc.dev.java.net/files/documents/17/26776/javacc-4.0.tar.gz
> 
> jiang jialin wrote:
>> you must registe first
>> 
>> 2007/6/23, Mahdi Rahimi :
>>>
>>>
>>> Hi Steven.
>>>
>>> When i access to this address, this message appread
>>>
>>> Forbidden
>>> You don't have permission to access /servlets/ProjectHome on this
>>> server.
>>>
>>> What's the problem?
>>>
>>> Thakns.
>>>
>>>
>>> Steven Rowe wrote:
>>> >
>>> > Mahdi Rahimi wrote:
>>> >> Hi.
>>> >>
>>> >> How can I access JavaCC??
>>> >>
>>> >> Thanks
>>> >
>>> > https://javacc.dev.java.net/
>>> >
>>> > --
>>> > Steve Rowe
>>> > Center for Natural Language Processing
>>> > http://www.cnlp.org/tech/lucene.asp
> 
> 
> -- 
> Steve Rowe
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/JavaCC-Download-tf3958940.html#a11374265
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_50789_33216279.1183215599920--


From java-user-return-28953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 30 17:20:58 2007
Return-Path: <java-user-return-28953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60612 invoked from network); 30 Jun 2007 17:20:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2007 17:20:57 -0000
Received: (qmail 41397 invoked by uid 500); 30 Jun 2007 17:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41361 invoked by uid 500); 30 Jun 2007 17:20:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41350 invoked by uid 99); 30 Jun 2007 17:20:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Jun 2007 10:20:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mnrz57@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Jun 2007 10:20:47 -0700
Received: by an-out-0708.google.com with SMTP id c5so268112anc
        for <java-user@lucene.apache.org>; Sat, 30 Jun 2007 10:20:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ABta9rWnNKoVjhhg63dTxmO0fTyrJAulktsCwNf6zVQaqYGJnjyVwwsipCvCp4Am+MUNrET3HB97mIUZLFISWowCq4akQk7hWxPEtf/VgmF9Uyxcch7LpuLPS0m68MamJnGp2TNpo+J+NOz89dhxtzQHKpNNpk6k8wfvdNGfMY8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bMXZRKcr1ScO2BVcG09O0ThU/BR1WT/2smxHkGxYo3s3UnQYIAayQQ8ogUV5N9b6oQ66N5UJRr3XhrpSWVPvmbfA3M/HvzH8XBmN4LlahK3pyNnVAboWGyWdNZPfv6g1KofL4VWQ5TRPySFvGn/2MngNdXaT7C9nMlhRBhlYk5w=
Received: by 10.100.177.16 with SMTP id z16mr2816898ane.1183224026677;
        Sat, 30 Jun 2007 10:20:26 -0700 (PDT)
Received: by 10.100.14.12 with HTTP; Sat, 30 Jun 2007 10:20:26 -0700 (PDT)
Message-ID: <34b8543c0706301020n65217a71h1244ea85e8275e8d@mail.gmail.com>
Date: Sat, 30 Jun 2007 20:50:26 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JavaCC Download
In-Reply-To: <11374265.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3658_28068878.1183224026641"
References: <11233766.post@talk.nabble.com> <467A8E41.4090801@syr.edu>
	 <11263519.post@talk.nabble.com>
	 <625a01bb0706241811p4fa21cdau2343106f2b9ecd8b@mail.gmail.com>
	 <46814A01.40709@syr.edu> <11374265.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3658_28068878.1183224026641
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
your IP is restricted and you are not allowed to download from that site.
they blocked some countries from downloading because of sanctions.

Good Luck

On 6/30/07, Mahdi Rahimi <mhd_rhm@yahoo.com> wrote:
>
>
> Hi.
>
> Thanks To Steven Rowe
>
> I'm using wget right like your suggestion. But there is certification
> error.
> Respone of WGet is
> "Warning: Connecting to javacc.dev.java.net|204.16.104.198|:443...
> connected.
> WARNING: Certificate verification error for javacc.dev.java.net: unable to
> ... loccal issuer certificate
> HTTP request sent, awaiting response... 403 Forbidden
> 18:23:02 ERROR 403: Forbidden."
> What's the problem. what do you think?
>
> Thanks.
>
>
> Steven Rowe wrote:
> >
> > I don't think you need to register - I am not registered and I can
> > download from there.
> >
> > My guess is that Mahdi Rahimi's browser doesn't know how to speak the
> > HTTPS protocol.
> >
> > Here's an invocation of wget (I have version 1.10.2) that works for me
> > to get the .zip archive (all on one line):
> >
> > wget --no-check-certificate
> > https://javacc.dev.java.net/files/documents/17/26777/javacc-4.0.zip
> >
> > Or if you want the .tar.gz archive:
> >
> > wget --no-check-certificate
> > https://javacc.dev.java.net/files/documents/17/26776/javacc-4.0.tar.gz
> >
> > jiang jialin wrote:
> >> you must registe first
> >>
> >> 2007/6/23, Mahdi Rahimi :
> >>>
> >>>
> >>> Hi Steven.
> >>>
> >>> When i access to this address, this message appread
> >>>
> >>> Forbidden
> >>> You don't have permission to access /servlets/ProjectHome on this
> >>> server.
> >>>
> >>> What's the problem?
> >>>
> >>> Thakns.
> >>>
> >>>
> >>> Steven Rowe wrote:
> >>> >
> >>> > Mahdi Rahimi wrote:
> >>> >> Hi.
> >>> >>
> >>> >> How can I access JavaCC??
> >>> >>
> >>> >> Thanks
> >>> >
> >>> > https://javacc.dev.java.net/
> >>> >
> >>> > --
> >>> > Steve Rowe
> >>> > Center for Natural Language Processing
> >>> > http://www.cnlp.org/tech/lucene.asp
> >
> >
> > --
> > Steve Rowe
> > Center for Natural Language Processing
> > http://www.cnlp.org/tech/lucene.asp
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/JavaCC-Download-tf3958940.html#a11374265
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_3658_28068878.1183224026641--

