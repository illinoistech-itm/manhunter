From java-user-return-49241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 03:34:06 2011
Return-Path: <java-user-return-49241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60196 invoked from network); 1 Apr 2011 03:34:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 03:34:06 -0000
Received: (qmail 94213 invoked by uid 500); 1 Apr 2011 03:34:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94175 invoked by uid 500); 1 Apr 2011 03:34:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94165 invoked by uid 99); 1 Apr 2011 03:34:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 03:34:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yuanwu.mail@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 03:33:52 +0000
Received: by gxk7 with SMTP id 7so1634855gxk.35
        for <java-user@lucene.apache.org>; Thu, 31 Mar 2011 20:33:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:subject:message-id:organization
         :x-mailer:mime-version:content-type;
        bh=MfgaYvqR/vneDczYzz6Q1IvBXAteH1ELlNo+AAqSxg0=;
        b=c95esSNNYvxqD++QJ52f2Tfc5c3iZGEWuqjMS2APJE4niJKPJaV0lDClPTL1ZWo027
         IMZIwF7gLD74lzfbRVNxA9238hfO1oSE2MROayUVxxXr7xJR4MbIqCxXgA/HunF+6f4x
         rfqXgZQU08Um55RjCl5Uh8uLUdycjFD9SjJ6U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:organization:x-mailer:mime-version
         :content-type;
        b=I4hNbb71CgSDUmurJ8Gz9k0HtVawgzj5u1cMwsWJGT1OK0iYKVMZDZdTTNBHlYWdtI
         2Yl3R7y+LcmBAY7EVq3jBV5TyXv3TT1aZbfxigBfY+JXT1kCvMMbO0nE0zTBOVTpBs5F
         SLwsi/C7o9OF4twk4Vim1K9GSTIDOmkTY4ZpE=
Received: by 10.150.67.5 with SMTP id p5mr3623768yba.428.1301628811634;
        Thu, 31 Mar 2011 20:33:31 -0700 (PDT)
Received: from BITCOMPUTER ([211.68.2.10])
        by mx.google.com with ESMTPS id q33sm824633yba.28.2011.03.31.20.33.23
        (version=SSLv3 cipher=OTHER);
        Thu, 31 Mar 2011 20:33:29 -0700 (PDT)
Date: Fri, 1 Apr 2011 11:33:55 +0800
From: "=?utf-8?B?6KKB5q2mIFtHTWFpbF0=?=" <yuanwu.mail@gmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: =?utf-8?B?QSBsaWtlbHkgYnVnIG9mIFRlcm1zUG9zaXRpb24ubmV4dFBvc2l0aW9uIA==?=
Message-ID: <201104011133527349770@gmail.com>
Organization: =?utf-8?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon345564176378_====="

--=====003_Dragon345564176378_=====
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit

Hi, dear experts:

When IndexReader.termsPositions is used to access specific terms, the call to TermsPosition.nextPosition success if TermsPosition.next is used. But if TermsPosition.skipTo is used instead of TermsPosition.next, a java.lang.IllegalArgumentException will be thrown, as bellows. 

 java.lang.IllegalArgumentException: Negative position
    at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:610)
    at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInternal(NIOFSDirectory.java:161)
    at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:213)
    at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:39)
    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:92)
    at org.apache.lucene.store.BufferedIndexInput.readVInt(BufferedIndexInput.java:181)
    at org.apache.lucene.index.SegmentTermPositions.readDeltaPosition(SegmentTermPositions.java:75)
    at org.apache.lucene.index.SegmentTermPositions.skipPositions(SegmentTermPositions.java:130)
    at org.apache.lucene.index.SegmentTermPositions.lazySkip(SegmentTermPositions.java:168)
    at org.apache.lucene.index.SegmentTermPositions.nextPosition(SegmentTermPositions.java:69)

In my further study, I found that if docid execeed 1044278, the exception occurs everytime, for the small ones,  the exception never occur. BTW, the total number of documents is about 1344278, and are never deleted.
 
Thanks.

2011-04-01 



Yuan Wu [GMail] 

--=====003_Dragon345564176378_=====--


From java-user-return-49242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 04:28:55 2011
Return-Path: <java-user-return-49242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14333 invoked from network); 1 Apr 2011 04:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 04:28:54 -0000
Received: (qmail 23505 invoked by uid 500); 1 Apr 2011 04:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23391 invoked by uid 500); 1 Apr 2011 04:28:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23383 invoked by uid 99); 1 Apr 2011 04:28:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 04:28:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yuanwu.mail@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 04:28:41 +0000
Received: by gwj22 with SMTP id 22so1657450gwj.35
        for <java-user@lucene.apache.org>; Thu, 31 Mar 2011 21:28:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:subject:message-id:organization
         :x-mailer:mime-version:content-type;
        bh=AqtihOO0wd0WHVMav40Sx/Z5q1e0lE4CW3NkdowL8tQ=;
        b=DxX8lbnlfWTWnijXRK/3ihqTvMYfKqH45CagEK6itikVVmru9O4l62/c81EzIyNKLr
         Qe0I1JGG8zW0oBSEO8dAjEuHrkIzZbBC3G73CEk31PiZk4pHdD4S5FdZN3l9h9HEyBzc
         JdQHaoGIKh8OvoeP3o0HMJ8indJXlGL8ckvsI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:organization:x-mailer:mime-version
         :content-type;
        b=fLtWzsfmAk82JtdH4k/js2hQltushnzN5Oo/Gf8R9kpwux+pfvnJe/9+8tOcNNlPd9
         2pE5GXhIkKFx1gOLS8R7s73og6z18ShFatb5rEiKz+/uv/II1z/ctPYPD3Mug5SDCocZ
         uRMxsf+YMhXwPwISUuIXUai7QhBI/BB1WwetE=
Received: by 10.236.79.1 with SMTP id h1mr5206440yhe.76.1301632100171;
        Thu, 31 Mar 2011 21:28:20 -0700 (PDT)
Received: from BITCOMPUTER ([211.68.2.10])
        by mx.google.com with ESMTPS id g69sm945318yhc.88.2011.03.31.21.28.18
        (version=SSLv3 cipher=OTHER);
        Thu, 31 Mar 2011 21:28:19 -0700 (PDT)
Date: Fri, 1 Apr 2011 12:28:50 +0800
From: "=?utf-8?B?6KKB5q2mIFtHTWFpbF0=?=" <yuanwu.mail@gmail.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: =?utf-8?B?SG93IHRvIGRvIE11bHRpcGxlLUNsdXN0ZXIgUXVlcnk/?=
Message-ID: <201104011228472348800@gmail.com>
Organization: =?utf-8?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon128560457640_====="
X-Virus-Checked: Checked by ClamAV on apache.org

--=====003_Dragon128560457640_=====
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit

Hi, dear experts:

Assume that a tuple is composed of <<A1, B1, C1>,<A2,B2,C2>,...,<AN,BN,CN>, Value>.
IF AK is stored in Field A, BK is stored in Field B, CK is stored in Field C (1<=K<=N), so there are N A fields,N B fields and N C fields. 
The question is if I want to query whith the condition of <a,b,c>, how can i get the exact value correspoding to <a,b,c>.

longing for your helps

 
Thanks in advance.

2011-04-01 



Yuan Wu [GMail] 

--=====003_Dragon128560457640_=====--


From java-user-return-49243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 07:40:27 2011
Return-Path: <java-user-return-49243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54960 invoked from network); 1 Apr 2011 07:40:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 07:40:27 -0000
Received: (qmail 53636 invoked by uid 500); 1 Apr 2011 07:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53596 invoked by uid 500); 1 Apr 2011 07:40:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53588 invoked by uid 99); 1 Apr 2011 07:40:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 07:40:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 07:40:14 +0000
Received: from webmail.xs4all.nl (dovemail9.xs4all.nl [194.109.26.11])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id p317dqZR054793
	for <java-user@lucene.apache.org>; Fri, 1 Apr 2011 09:39:52 +0200 (CEST)
	(envelope-from wheijke@xs4all.nl)
Received: from 85.90.76.130
        (SquirrelMail authenticated user wheijke)
        by webmail.xs4all.nl with HTTP;
        Fri, 1 Apr 2011 09:39:52 +0200
Message-ID: <931c3bce98189cfb21059ae1e8e52ac4.squirrel@webmail.xs4all.nl>
Date: Fri, 1 Apr 2011 09:39:52 +0200
Subject: 3.1 upgrade problem
From: "Wouter Heijke" <wheijke@xs4all.nl>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.18
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by XS4ALL Virus Scanner


I'm doing the upgrade to Lucene 3.1.0.
The upgrade failed on WhitespaceTokenizer being final in this version.
I don't understand why anyone would make this tokenizer final, I was
happlily extending it for many Lucene versions!

Wouter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 08:43:12 2011
Return-Path: <java-user-return-49244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47369 invoked from network); 1 Apr 2011 08:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 08:43:11 -0000
Received: (qmail 6325 invoked by uid 500); 1 Apr 2011 08:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5735 invoked by uid 500); 1 Apr 2011 08:43:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5709 invoked by uid 99); 1 Apr 2011 08:42:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 08:42:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 08:42:42 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4037A45E719
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2011 10:42:22 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id QOWcKfU2QKpD for <java-user@lucene.apache.org>;
	Fri,  1 Apr 2011 10:42:17 +0200 (CEST)
Received: from VEGA (port-92-196-70-123.dynamic.qsc.de [92.196.70.123])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EB8D845E6FA
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2011 10:42:16 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <931c3bce98189cfb21059ae1e8e52ac4.squirrel@webmail.xs4all.nl>
In-Reply-To: <931c3bce98189cfb21059ae1e8e52ac4.squirrel@webmail.xs4all.nl>
Subject: RE: 3.1 upgrade problem
Date: Fri, 1 Apr 2011 10:42:20 +0200
Message-ID: <002001cbf048$b73b75f0$25b261d0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHXYuEhF+dsCL2FbEYOPcbShnpugJQxySgA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Wouter,

See point 8 in the Backwards Compatibility CHANGES.txt. The reason is
explained in several issues (not all listed there), problems are e.g. in the
Unicode 4 changes, where a non-final WhitespaceTokenizer would need to do
reflection-based backwards hacks (like in 2.9 when we changed to
incrementToken).

The Tokenization API in Lucene is decorator based, so to extend/modify it,
you can:
a) Use one of the abstract base classes
b) simply wrap a TokenFilter on top that modifies what you intend to do

For your case it seems to be the most simple thing to extend not
WhitespaceTokenizer but instead its base class CharTokenizer (which is
abstract). There you simply override isTokenChar(int) and/or normalize(int).
These methods look very simple for WhitespaceTokenizer, so simply add your
rules there. Extending WhiteSpaceTokenizer is not needed and leads to
problems, as mentioned above. Lucene 3.1's test suite checks now that
*every* TokenStream component is final (when assertions are enabled in your
code).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Wouter Heijke [mailto:wheijke@xs4all.nl]
> Sent: Friday, April 01, 2011 9:40 AM
> To: java-user@lucene.apache.org
> Subject: 3.1 upgrade problem
> 
> 
> I'm doing the upgrade to Lucene 3.1.0.
> The upgrade failed on WhitespaceTokenizer being final in this version.
> I don't understand why anyone would make this tokenizer final, I was
> happlily extending it for many Lucene versions!
> 
> Wouter
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 09:58:36 2011
Return-Path: <java-user-return-49245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86128 invoked from network); 1 Apr 2011 09:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 09:58:36 -0000
Received: (qmail 81872 invoked by uid 500); 1 Apr 2011 09:58:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81843 invoked by uid 500); 1 Apr 2011 09:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81835 invoked by uid 99); 1 Apr 2011 09:58:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 09:58:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 09:58:28 +0000
Received: by wwk4 with SMTP id 4so377976wwk.5
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 02:58:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.205.12 with SMTP id fo12mr3931174wbb.70.1301651886161;
 Fri, 01 Apr 2011 02:58:06 -0700 (PDT)
Received: by 10.227.156.143 with HTTP; Fri, 1 Apr 2011 02:58:06 -0700 (PDT)
In-Reply-To: <201104011133527349770@gmail.com>
References: <201104011133527349770@gmail.com>
Date: Fri, 1 Apr 2011 05:58:06 -0400
Message-ID: <AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>
Subject: Re: A likely bug of TermsPosition.nextPosition
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: =?UTF-8?B?6KKB5q2mIFtHTWFpbF0=?= <yuanwu.mail@gmail.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hmm this could be from a corrupted index.

What version of Lucene?  What OS/filesystem?

Can you run CheckIndex and post the output?

Mike

http://blog.mikemccandless.com

2011/3/31 =E8=A2=81=E6=AD=A6 [GMail] <yuanwu.mail@gmail.com>:
> Hi, dear experts:
>
> When IndexReader.termsPositions is used to access specific terms, the cal=
l to TermsPosition.nextPosition success if TermsPosition.next is used. But =
if TermsPosition.skipTo is used instead of TermsPosition.next, a java.lang.=
IllegalArgumentException will be thrown, as bellows.
>
> =C2=A0java.lang.IllegalArgumentException: Negative position
> =C2=A0 =C2=A0at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:610)
> =C2=A0 =C2=A0at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.re=
adInternal(NIOFSDirectory.java:161)
> =C2=A0 =C2=A0at org.apache.lucene.store.BufferedIndexInput.refill(Buffere=
dIndexInput.java:213)
> =C2=A0 =C2=A0at org.apache.lucene.store.BufferedIndexInput.readByte(Buffe=
redIndexInput.java:39)
> =C2=A0 =C2=A0at org.apache.lucene.store.IndexInput.readVInt(IndexInput.ja=
va:92)
> =C2=A0 =C2=A0at org.apache.lucene.store.BufferedIndexInput.readVInt(Buffe=
redIndexInput.java:181)
> =C2=A0 =C2=A0at org.apache.lucene.index.SegmentTermPositions.readDeltaPos=
ition(SegmentTermPositions.java:75)
> =C2=A0 =C2=A0at org.apache.lucene.index.SegmentTermPositions.skipPosition=
s(SegmentTermPositions.java:130)
> =C2=A0 =C2=A0at org.apache.lucene.index.SegmentTermPositions.lazySkip(Seg=
mentTermPositions.java:168)
> =C2=A0 =C2=A0at org.apache.lucene.index.SegmentTermPositions.nextPosition=
(SegmentTermPositions.java:69)
>
> In my further study, I found that if docid execeed 1044278, the exception=
 occurs everytime, for the small ones, =C2=A0the exception never occur. BTW=
, the total number of documents is about 1344278, and are never deleted.
>
> Thanks.
>
> 2011-04-01
>
>
>
> Yuan Wu [GMail]
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 10:10:54 2011
Return-Path: <java-user-return-49246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39699 invoked from network); 1 Apr 2011 10:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 10:10:53 -0000
Received: (qmail 97130 invoked by uid 500); 1 Apr 2011 10:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97089 invoked by uid 500); 1 Apr 2011 10:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97081 invoked by uid 99); 1 Apr 2011 10:10:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 10:10:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 10:10:43 +0000
Received: by fxm7 with SMTP id 7so4028129fxm.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 03:10:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=E1YsKM0/ptSXu40qlLhU7vV6IItOJDUW9OhwqD9Q9BE=;
        b=OAe5bsUwxJzoyyPqfGbWEiL6lOMfwiFEAeCQoKdDawURjncH1CM05WYTeVEpmV7kCz
         e5aHtY9l07j1/taxOb/L9a1E7BaVESyakSHf72vNy918e72eg6vo3MMhFHFv3hOXm8BQ
         h795qn/u3pBqx7uynEqQrjKakeyHOi+BlCqCs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=dwT2/VGl5QY+H22D9U/Huh3i6A4C+Qlts1utpyDEcAoKpmOHiqIDMWNDTR0MkKUFAG
         X8tswom81TeTMgO5FfddqfmRXH9IJQpD1Ux4KahZNQYz7EUG69xrKEg4T4ZBL6HyFBT/
         eeeKUdj9W0PqjcGHO15dg+ARfUYPxfQ1Ypfzk=
MIME-Version: 1.0
Received: by 10.223.6.11 with SMTP id 11mr59703fax.101.1301652508885; Fri, 01
 Apr 2011 03:08:28 -0700 (PDT)
Received: by 10.223.16.215 with HTTP; Fri, 1 Apr 2011 03:08:28 -0700 (PDT)
Date: Fri, 1 Apr 2011 12:08:28 +0200
Message-ID: <AANLkTinQhn8+_bAW_BB-EZdGoya_RE18Ngs8nQjkmtZ1@mail.gmail.com>
Subject: indexing data without writing to disk ?
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151747849e69c6d5049fd897ed
X-Virus-Checked: Checked by ClamAV on apache.org

--00151747849e69c6d5049fd897ed
Content-Type: text/plain; charset=ISO-8859-1

Is there a way to index data into memory without writing to disk in Lucene ?

This is my current code storing it on disk

writer = new IndexWriter(FSDirectory.open(index_dir), new
IndexWriterConfig(org.apache.lucene.util.Version.LUCENE_40, new
WhitespaceAnalyzer(org.apache.lucene.util.Version.LUCENE_40)));

//store sorted content to contents
Iterator<Map.Entry<String,Cluster>> it = clusters.entrySet().iterator();

while (it.hasNext()) {

...
Document document  = new Document();
                document.add(new Field("id", id, Field.Store.YES,
Field.Index.ANALYZED));
               writer.addDocument(document);
}
writer.optimize();
writer.close();


thanks

--00151747849e69c6d5049fd897ed--

From java-user-return-49247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 10:26:52 2011
Return-Path: <java-user-return-49247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85291 invoked from network); 1 Apr 2011 10:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 10:26:52 -0000
Received: (qmail 11733 invoked by uid 500); 1 Apr 2011 10:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11680 invoked by uid 500); 1 Apr 2011 10:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11672 invoked by uid 99); 1 Apr 2011 10:26:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 10:26:49 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yuanwu.mail@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 10:26:43 +0000
Received: by gya6 with SMTP id 6so1744652gya.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 03:26:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:references:subject:message-id
         :organization:x-mailer:mime-version:content-type;
        bh=9BLaFv8hwd/TLJJUy692A5eWrR+qKUIXuyA31uNKRb4=;
        b=LsY8Rppd/yepKqbmuZFP1RLIm4w7rWOeEYQ3HIumYlhuLb8hEE9QRLmhs68yxeCPTV
         ijmsdOlCsl2QU6Iihx5vBfM1AHw+zWNHqzSWXYrtMIBEWSaXyCcM1uRuMTGdzO7gqc/Y
         rW0iep72ve3Cy2RBj18ibUkfiFM+hP8YzFKOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:references:subject:message-id:organization:x-mailer
         :mime-version:content-type;
        b=gl+ehSSVjiy7T83O7YB7JT992g3bBTcL2CnYsAu2ZvpZ+8C2iXNbqRMjxttY08pVuH
         DdUoxW7kneuldjS78ubh68NfcuGMQpFceIY2mapmZDzq1haBXbiW0Z6IIb4m9pvXJG3f
         GKqgT3picblgcC6K+eCWpAh9dxjQqhRDDq+8s=
Received: by 10.151.135.21 with SMTP id m21mr3684730ybn.373.1301653582326;
        Fri, 01 Apr 2011 03:26:22 -0700 (PDT)
Received: from BITCOMPUTER ([211.68.2.10])
        by mx.google.com with ESMTPS id r18sm916712yba.11.2011.04.01.03.26.19
        (version=SSLv3 cipher=OTHER);
        Fri, 01 Apr 2011 03:26:21 -0700 (PDT)
Date: Fri, 1 Apr 2011 18:27:00 +0800
From: "=?utf-8?B?6KKB5q2mIFtHTWFpbF0=?=" <yuanwu.mail@gmail.com>
To: "=?utf-8?B?TWljaGFlbCBNY0NhbmRsZXNz?=" <lucene@mikemccandless.com>,
 "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
References: <201104011133527349770@gmail.com>,
 <AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>
Subject: =?utf-8?B?UmU6IFJlOiBBIGxpa2VseSBidWcgb2YgVGVybXNQb3NpdGlvbi5uZXh0UG9zaXRpb24=?=
Message-ID: <201104011826576408113@gmail.com>
Organization: =?utf-8?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon203330313638_====="

--=====003_Dragon203330313638_=====
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

SGksIERlYXIgTWlrZToNCg0KYmVsb3dzIGxpc3QgdGhlIHJlcG9ydCBvZiBjaGVja0luZGV4LiBP
UyBpcyBGZWRvcmEgTGludXguDQoNCltvcmFjbGVAc2VydmVyIGJpbl0kIGphdmEgLWNsYXNzcGF0
aCAuLyBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5DaGVja0luZGV4IC9kYXRhL0luZGV4L1VSTC9H
ZW5lcmljLyAtZml4DQoNCk5PVEU6IHRlc3Rpbmcgd2lsbCBiZSBtb3JlIHRob3JvdWdoIGlmIHlv
dSBydW4gamF2YSB3aXRoICctZWE6b3JnLmFwYWNoZS5sdWNlbmUuLi4nLCBzbyBhc3NlcnRpb25z
IGFyZSBlbmFibGVkDQpPcGVuaW5nIGluZGV4IEAgL0dlb0dyaWQvZGF0YS9JbmRleC9VUkwvR2Vu
ZXJpYy8NClNlZ21lbnRzIGZpbGU9c2VnbWVudHNfYXl1cCBudW1TZWdtZW50cz0xIHZlcnNpb249
Rk9STUFUX0RJQUdOT1NUSUNTIFtMdWNlbmUgMi45XQ0KICAxIG9mIDE6IG5hbWU9X2J5bTAgZG9j
Q291bnQ9MTM0NDI3OA0KICAgIGNvbXBvdW5kPWZhbHNlDQogICAgaGFzUHJveD10cnVlDQogICAg
bnVtRmlsZXM9MTENCiAgICBzaXplIChNQik9MTUsOTc5LjU5Mw0KICAgIGRpYWdub3N0aWNzID0g
e29wdGltaXplPXRydWUsIG1lcmdlRmFjdG9yPTMsIG9zLnZlcnNpb249Mi42LjI3LjQxLTE3MC4y
LjExNy5mYzEwLng4Nl82NCwgb3M9TGludXgsIG1lcmdlRG9jU3RvcmVzPXRydWUsIGx1Y2VuZS52
ZXJzaW9uPTMuMC1kZXYsIHNvdXJjZT1tZXJnZSwgb3MuYXJjaD1hbWQ2NCwgamF2YS52ZXJzaW9u
PTEuNi4wXzIxLCBqYXZhLnZlbmRvcj1TdW4gTWljcm9zeXN0ZW1zIEluYy59DQogICAgbm8gZGVs
ZXRpb25zDQogICAgdGVzdDogb3BlbiByZWFkZXIuLi4uLi4uLi5PSw0KICAgIHRlc3Q6IGZpZWxk
cy4uLi4uLi4uLi4uLi4uT0sgWzExIGZpZWxkc10NCiAgICB0ZXN0OiBmaWVsZCBub3Jtcy4uLi4u
Li4uLk9LIFsyIGZpZWxkc10NCiAgICB0ZXN0OiB0ZXJtcywgZnJlcSwgcHJveC4uLg0KT0sgWzEy
NjM1MDAgdGVybXM7IDYwMTcxNTA3MiB0ZXJtcy9kb2NzIHBhaXJzOyAxNTEzNzgwNjMxIHRva2Vu
c10NCiAgICB0ZXN0OiBzdG9yZWQgZmllbGRzLi4uLi4uLk9LIFs4MDYzMTUxIHRvdGFsIGZpZWxk
IGNvdW50OyBhdmcgNS45OTggZmllbGRzIHBlciBkb2NdDQogICAgdGVzdDogdGVybSB2ZWN0b3Jz
Li4uLi4uLi5PSyBbMTM0NDI3OCB0b3RhbCB2ZWN0b3IgY291bnQ7IGF2ZyAxIHRlcm0vZnJlcSB2
ZWN0b3IgZmllbGRzIHBlciBkb2NdDQpObyBwcm9ibGVtcyB3ZXJlIGRldGVjdGVkIHdpdGggdGhp
cyBpbmRleC4NCg0KDQoNCjIwMTEtMDQtMDEgDQoNCg0KDQroooHmraYgW0dNYWlsXSANCg0KDQoN
CuWPkeS7tuS6uu+8miBNaWNoYWVsIE1jQ2FuZGxlc3MgDQrlj5HpgIHml7bpl7TvvJogMjAxMS0w
NC0wMSAgMTc6NTg6MDggDQrmlLbku7bkurrvvJogamF2YS11c2VyIA0K5oqE6YCB77yaIOiigeat
piBbR01haWxdIA0K5Li76aKY77yaIFJlOiBBIGxpa2VseSBidWcgb2YgVGVybXNQb3NpdGlvbi5u
ZXh0UG9zaXRpb24gDQogDQpIbW0gdGhpcyBjb3VsZCBiZSBmcm9tIGEgY29ycnVwdGVkIGluZGV4
Lg0KV2hhdCB2ZXJzaW9uIG9mIEx1Y2VuZT8gIFdoYXQgT1MvZmlsZXN5c3RlbT8NCkNhbiB5b3Ug
cnVuIENoZWNrSW5kZXggYW5kIHBvc3QgdGhlIG91dHB1dD8NCk1pa2UNCmh0dHA6Ly9ibG9nLm1p
a2VtY2NhbmRsZXNzLmNvbQ0KMjAxMS8zLzMxIOiigeatpiBbR01haWxdIDx5dWFud3UubWFpbEBn
bWFpbC5jb20+Og0KPiBIaSwgZGVhciBleHBlcnRzOg0KPg0KPiBXaGVuIEluZGV4UmVhZGVyLnRl
cm1zUG9zaXRpb25zIGlzIHVzZWQgdG8gYWNjZXNzIHNwZWNpZmljIHRlcm1zLCB0aGUgY2FsbCB0
byBUZXJtc1Bvc2l0aW9uLm5leHRQb3NpdGlvbiBzdWNjZXNzIGlmIFRlcm1zUG9zaXRpb24ubmV4
dCBpcyB1c2VkLiBCdXQgaWYgVGVybXNQb3NpdGlvbi5za2lwVG8gaXMgdXNlZCBpbnN0ZWFkIG9m
IFRlcm1zUG9zaXRpb24ubmV4dCwgYSBqYXZhLmxhbmcuSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u
IHdpbGwgYmUgdGhyb3duLCBhcyBiZWxsb3dzLg0KPg0KPiAgamF2YS5sYW5nLklsbGVnYWxBcmd1
bWVudEV4Y2VwdGlvbjogTmVnYXRpdmUgcG9zaXRpb24NCj4gICAgYXQgc3VuLm5pby5jaC5GaWxl
Q2hhbm5lbEltcGwucmVhZChGaWxlQ2hhbm5lbEltcGwuamF2YTo2MTApDQo+ICAgIGF0IG9yZy5h
cGFjaGUubHVjZW5lLnN0b3JlLk5JT0ZTRGlyZWN0b3J5JE5JT0ZTSW5kZXhJbnB1dC5yZWFkSW50
ZXJuYWwoTklPRlNEaXJlY3RvcnkuamF2YToxNjEpDQo+ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5l
LnN0b3JlLkJ1ZmZlcmVkSW5kZXhJbnB1dC5yZWZpbGwoQnVmZmVyZWRJbmRleElucHV0LmphdmE6
MjEzKQ0KPiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5CdWZmZXJlZEluZGV4SW5wdXQu
cmVhZEJ5dGUoQnVmZmVyZWRJbmRleElucHV0LmphdmE6MzkpDQo+ICAgIGF0IG9yZy5hcGFjaGUu
bHVjZW5lLnN0b3JlLkluZGV4SW5wdXQucmVhZFZJbnQoSW5kZXhJbnB1dC5qYXZhOjkyKQ0KPiAg
ICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5CdWZmZXJlZEluZGV4SW5wdXQucmVhZFZJbnQo
QnVmZmVyZWRJbmRleElucHV0LmphdmE6MTgxKQ0KPiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5p
bmRleC5TZWdtZW50VGVybVBvc2l0aW9ucy5yZWFkRGVsdGFQb3NpdGlvbihTZWdtZW50VGVybVBv
c2l0aW9ucy5qYXZhOjc1KQ0KPiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TZWdtZW50
VGVybVBvc2l0aW9ucy5za2lwUG9zaXRpb25zKFNlZ21lbnRUZXJtUG9zaXRpb25zLmphdmE6MTMw
KQ0KPiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TZWdtZW50VGVybVBvc2l0aW9ucy5s
YXp5U2tpcChTZWdtZW50VGVybVBvc2l0aW9ucy5qYXZhOjE2OCkNCj4gICAgYXQgb3JnLmFwYWNo
ZS5sdWNlbmUuaW5kZXguU2VnbWVudFRlcm1Qb3NpdGlvbnMubmV4dFBvc2l0aW9uKFNlZ21lbnRU
ZXJtUG9zaXRpb25zLmphdmE6NjkpDQo+DQo+IEluIG15IGZ1cnRoZXIgc3R1ZHksIEkgZm91bmQg
dGhhdCBpZiBkb2NpZCBleGVjZWVkIDEwNDQyNzgsIHRoZSBleGNlcHRpb24gb2NjdXJzIGV2ZXJ5
dGltZSwgZm9yIHRoZSBzbWFsbCBvbmVzLCAgdGhlIGV4Y2VwdGlvbiBuZXZlciBvY2N1ci4gQlRX
LCB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyBpcyBhYm91dCAxMzQ0Mjc4LCBhbmQgYXJl
IG5ldmVyIGRlbGV0ZWQuDQo+DQo+IFRoYW5rcy4NCj4NCj4gMjAxMS0wNC0wMQ0KPg0KPg0KPg0K
PiBZdWFuIFd1IFtHTWFpbF0NCj4NCg==

--=====003_Dragon203330313638_=====--


From java-user-return-49248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 10:31:14 2011
Return-Path: <java-user-return-49248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98847 invoked from network); 1 Apr 2011 10:31:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 10:31:14 -0000
Received: (qmail 16671 invoked by uid 500); 1 Apr 2011 10:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16634 invoked by uid 500); 1 Apr 2011 10:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16626 invoked by uid 99); 1 Apr 2011 10:31:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 10:31:11 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.117] (HELO eu1sys200aog104.obsmtp.com) (207.126.144.117)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Apr 2011 10:31:04 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob104.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTZWpUFw2a9Lsxg2Z5x3971ni7GQXEy0b@postini.com; Fri, 01 Apr 2011 10:30:43 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 1 Apr 2011 11:30:39 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 1 Apr 2011 11:30:40 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CBF057.D8D77C36"
Subject: SpanNearQuery with repeated term?
Date: Fri, 1 Apr 2011 11:30:39 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F2401161EE1@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery with repeated term?
Thread-Index: AcvwV9h6InvJTXevR1OV/+s3cpn4aQ==
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Apr 2011 10:30:40.0170 (UTC) FILETIME=[D8E1F8A0:01CBF057]

------_=_NextPart_001_01CBF057.D8D77C36
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am having some issues with SpanNearQuery:

SpanQuery[] clauses =3D new SpanTermQuery[2];
Clauses[0] =3D new SpanTermQuery("text","aaaa");
Clauses[1] =3D new SpanTermQuery("text","bbbb");
SpanNearQuery q =3D new SpanNearQuery(clauses,0,true); // returns 1
document with "aaaa bbbb" in it

SpanQuery[] clauses =3D new SpanTermQuery[2];
Clauses[0] =3D new SpanTermQuery("text","aaaa");
Clauses[1] =3D new SpanTermQuery("text","aaaa");
SpanNearQuery q =3D new SpanNearQuery(clauses,0,true); // returns 2
documents ( "aaaa bbbb" and "aaaa aaaa")=20

This second bit of code returns the document with "aaaa bbbb" in it,
Why doesn't SpanNearQuery discard that one and only return me the one
I've asked for?

Thanks

Greg

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_001_01CBF057.D8D77C36--

From java-user-return-49249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 11:10:45 2011
Return-Path: <java-user-return-49249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33432 invoked from network); 1 Apr 2011 11:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 11:10:45 -0000
Received: (qmail 61643 invoked by uid 500); 1 Apr 2011 11:10:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61583 invoked by uid 500); 1 Apr 2011 11:10:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61575 invoked by uid 99); 1 Apr 2011 11:10:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:10:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:10:37 +0000
Received: by iwr19 with SMTP id 19so4910941iwr.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 04:10:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=ujqKxcGJCPWhZnhreoqROePZC3oBqUpXhvu3YYpn16k=;
        b=J7vdyJK+tmIh3Fwqikgc1tJ2wT7vu2CZNDb5AEpGzenbo/5AKZHCHwwQMt0MpXCD5N
         4xPFqOszfMM8ChW3xQ/bc95VCNH55MqPRmPuvB2hYhyet2qWtHAGckpoQRVLeQtS9OoU
         /qV5Is2FfTtyRHSCwNfO8TYyXYygnQs1O/EMM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=c/Oc+kFJkcSRBCt7JQWTUgL3Fi/jdOYt1JQ6W5aTlSo3HCuv/P0CzpAL75cfRKy7Cm
         bFzpRLrkkKFL65DOCCOZM7wDw3dMsV3aoFCsOa8UupTPdgnvv4dRQZNTtWYonPFSkJCM
         KA0EO3fHtDCdIpR5jKOh8w94ww5AK5+Mf3ZBw=
Received: by 10.231.216.168 with SMTP id hi40mr3636213ibb.196.1301656217105;
 Fri, 01 Apr 2011 04:10:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.134 with HTTP; Fri, 1 Apr 2011 04:09:57 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F2401161EE1@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F2401161EE1@uksrpblkexb01.detica.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 1 Apr 2011 12:09:57 +0100
Message-ID: <BANLkTi=RZ6=3Wr0h2-xX9AVPxgxjUwobWA@mail.gmail.com>
Subject: Re: SpanNearQuery with repeated term?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I can't reproduce this using lucene-core-3.0.3.jar.  You don't say
what version you are using.  Why don't you post the smallest possible
complete standalone program or test case that demonstrates the
problem.  And tell us what version of lucene you are working with.
Always.


--
Ian.


On Fri, Apr 1, 2011 at 11:30 AM, Gregory Tarr <Gregory.tarr@detica.com> wrote:
> I am having some issues with SpanNearQuery:
>
> SpanQuery[] clauses = new SpanTermQuery[2];
> Clauses[0] = new SpanTermQuery("text","aaaa");
> Clauses[1] = new SpanTermQuery("text","bbbb");
> SpanNearQuery q = new SpanNearQuery(clauses,0,true); // returns 1
> document with "aaaa bbbb" in it
>
> SpanQuery[] clauses = new SpanTermQuery[2];
> Clauses[0] = new SpanTermQuery("text","aaaa");
> Clauses[1] = new SpanTermQuery("text","aaaa");
> SpanNearQuery q = new SpanNearQuery(clauses,0,true); // returns 2
> documents ( "aaaa bbbb" and "aaaa aaaa")
>
> This second bit of code returns the document with "aaaa bbbb" in it,
> Why doesn't SpanNearQuery discard that one and only return me the one
> I've asked for?
>
> Thanks
>
> Greg
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 11:11:34 2011
Return-Path: <java-user-return-49250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33652 invoked from network); 1 Apr 2011 11:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 11:11:33 -0000
Received: (qmail 64650 invoked by uid 500); 1 Apr 2011 11:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64560 invoked by uid 500); 1 Apr 2011 11:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64546 invoked by uid 99); 1 Apr 2011 11:11:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:11:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:11:25 +0000
Received: by mail-iw0-f176.google.com with SMTP id 19so4910941iwr.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 04:11:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=jGtnBEXqxo7lppZvETvwqyNDlx1sTYlZ5bw6wi0GsVE=;
        b=gbaJOwzMaeTc/AfUFRPpaSjPL0ij2I/8jiRMEFPgft1IhvGUlN6FawOC8NDLgTwd28
         23ejl/PmDQTNHtuwarrQpO513uWZIIyNHrm9mQLImjVWvBoIsVRVbyM4C9hOr2pJnFDw
         eTwOqaY//oq7WRBjuyXjrINVrs2s38DW2PuK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=YhaKBFIR06e6SfiM55RmKWiSid/z1FDOnoL3UC+OjAvZCZmYfSGyhLH/0NZRM7Lz7s
         G9JiyuZ7muGFxk2xpbXan7RfTKbMMgCKyYT3+uDzuE18dd4rgoQbD8ncPsjuChIgjfPE
         4NxiI6ISwI7c8+PJHEp71hb2fCVRlOA/+ioL4=
Received: by 10.42.168.200 with SMTP id x8mr52247icy.98.1301656265288; Fri, 01
 Apr 2011 04:11:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.134 with HTTP; Fri, 1 Apr 2011 04:10:45 -0700 (PDT)
In-Reply-To: <AANLkTinQhn8+_bAW_BB-EZdGoya_RE18Ngs8nQjkmtZ1@mail.gmail.com>
References: <AANLkTinQhn8+_bAW_BB-EZdGoya_RE18Ngs8nQjkmtZ1@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 1 Apr 2011 12:10:45 +0100
Message-ID: <BANLkTinaXYa0DEA55Ea1gdQuQpoaEvohGA@mail.gmail.com>
Subject: Re: indexing data without writing to disk ?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

RAMDirectory.  The clue is in the name ...


--
Ian.


On Fri, Apr 1, 2011 at 11:08 AM, Patrick Diviacco
<patrick.diviacco@gmail.com> wrote:
> Is there a way to index data into memory without writing to disk in Lucen=
e ?
>
> This is my current code storing it on disk
>
> writer =3D new IndexWriter(FSDirectory.open(index_dir), new
> IndexWriterConfig(org.apache.lucene.util.Version.LUCENE_40, new
> WhitespaceAnalyzer(org.apache.lucene.util.Version.LUCENE_40)));
>
> //store sorted content to contents
> Iterator<Map.Entry<String,Cluster>> it =3D clusters.entrySet().iterator()=
;
>
> while (it.hasNext()) {
>
> ...
> Document document =A0=3D new Document();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0document.add(new Field("id", id, Field.Sto=
re.YES,
> Field.Index.ANALYZED));
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 writer.addDocument(document);
> }
> writer.optimize();
> writer.close();
>
>
> thanks
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 11:13:56 2011
Return-Path: <java-user-return-49251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34082 invoked from network); 1 Apr 2011 11:13:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 11:13:55 -0000
Received: (qmail 67994 invoked by uid 500); 1 Apr 2011 11:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67949 invoked by uid 500); 1 Apr 2011 11:13:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67941 invoked by uid 99); 1 Apr 2011 11:13:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:13:53 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.143] (HELO eu1sys200aog117.obsmtp.com) (207.126.144.143)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Apr 2011 11:13:47 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob117.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTZWzVZ+H294mgxnJ0X+bx/BCP6ebFIIV@postini.com; Fri, 01 Apr 2011 11:13:26 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 1 Apr 2011 12:13:24 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 1 Apr 2011 12:13:25 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SpanNearQuery with repeated term?
Date: Fri, 1 Apr 2011 12:13:24 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F2401161F2A@uksrpblkexb01.detica.com>
In-Reply-To: <BANLkTi=RZ6=3Wr0h2-xX9AVPxgxjUwobWA@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery with repeated term?
Thread-Index: AcvwXXYCWA2UcVwKQZSUxf3W06u85QAACRIQ
References: <614C529D389A5944B351F7DFB7594F2401161EE1@uksrpblkexb01.detica.com> <BANLkTi=RZ6=3Wr0h2-xX9AVPxgxjUwobWA@mail.gmail.com>
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Apr 2011 11:13:25.0027 (UTC) FILETIME=[D1A81730:01CBF05D]

Sorry I am using 2.9.4, which is the same as 3.0.3?

The code below demonstrates the problem.=20

Thanks

Greg

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com]=20
Sent: 01 April 2011 12:10
To: java-user@lucene.apache.org
Subject: Re: SpanNearQuery with repeated term?

I can't reproduce this using lucene-core-3.0.3.jar.  You don't say what
version you are using.  Why don't you post the smallest possible
complete standalone program or test case that demonstrates the problem.
And tell us what version of lucene you are working with.
Always.


--
Ian.


On Fri, Apr 1, 2011 at 11:30 AM, Gregory Tarr <Gregory.tarr@detica.com>
wrote:
> I am having some issues with SpanNearQuery:
>
> SpanQuery[] clauses =3D new SpanTermQuery[2]; Clauses[0] =3D new=20
> SpanTermQuery("text","aaaa"); Clauses[1] =3D new=20
> SpanTermQuery("text","bbbb"); SpanNearQuery q =3D new=20
> SpanNearQuery(clauses,0,true); // returns 1 document with "aaaa bbbb"=20
> in it
>
> SpanQuery[] clauses =3D new SpanTermQuery[2]; Clauses[0] =3D new=20
> SpanTermQuery("text","aaaa"); Clauses[1] =3D new=20
> SpanTermQuery("text","aaaa"); SpanNearQuery q =3D new=20
> SpanNearQuery(clauses,0,true); // returns 2 documents ( "aaaa bbbb"=20
> and "aaaa aaaa")
>
> This second bit of code returns the document with "aaaa bbbb" in it,=20
> Why doesn't SpanNearQuery discard that one and only return me the one=20
> I've asked for?
>
> Thanks
>
> Greg
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 11:21:26 2011
Return-Path: <java-user-return-49252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64960 invoked from network); 1 Apr 2011 11:21:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 11:21:26 -0000
Received: (qmail 76442 invoked by uid 500); 1 Apr 2011 11:21:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76394 invoked by uid 500); 1 Apr 2011 11:21:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76386 invoked by uid 99); 1 Apr 2011 11:21:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:21:24 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.123] (HELO eu1sys200aog107.obsmtp.com) (207.126.144.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Apr 2011 11:21:17 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob107.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTZW1F2lwlhCcJa6so/fDg859VyJQA/Vi@postini.com; Fri, 01 Apr 2011 11:20:57 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 1 Apr 2011 12:20:46 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 1 Apr 2011 12:20:54 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SpanNearQuery with repeated term?
Date: Fri, 1 Apr 2011 12:20:54 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F2401161F31@uksrpblkexb01.detica.com>
In-Reply-To: <614C529D389A5944B351F7DFB7594F2401161F2A@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery with repeated term?
Thread-Index: AcvwXXYCWA2UcVwKQZSUxf3W06u85QAACRIQAABO/OA=
References: <614C529D389A5944B351F7DFB7594F2401161EE1@uksrpblkexb01.detica.com> <BANLkTi=RZ6=3Wr0h2-xX9AVPxgxjUwobWA@mail.gmail.com> <614C529D389A5944B351F7DFB7594F2401161F2A@uksrpblkexb01.detica.com>
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Apr 2011 11:20:54.0455 (UTC) FILETIME=[DD895C70:01CBF05E]

Sorry, I have got this working now. It was a silly mistake.=20

-----Original Message-----
From: Gregory Tarr [mailto:Gregory.tarr@detica.com]=20
Sent: 01 April 2011 12:13
To: java-user@lucene.apache.org
Subject: RE: SpanNearQuery with repeated term?

Sorry I am using 2.9.4, which is the same as 3.0.3?

The code below demonstrates the problem.=20

Thanks

Greg

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com]
Sent: 01 April 2011 12:10
To: java-user@lucene.apache.org
Subject: Re: SpanNearQuery with repeated term?

I can't reproduce this using lucene-core-3.0.3.jar.  You don't say what
version you are using.  Why don't you post the smallest possible
complete standalone program or test case that demonstrates the problem.
And tell us what version of lucene you are working with.
Always.


--
Ian.


On Fri, Apr 1, 2011 at 11:30 AM, Gregory Tarr <Gregory.tarr@detica.com>
wrote:
> I am having some issues with SpanNearQuery:
>
> SpanQuery[] clauses =3D new SpanTermQuery[2]; Clauses[0] =3D new=20
> SpanTermQuery("text","aaaa"); Clauses[1] =3D new=20
> SpanTermQuery("text","bbbb"); SpanNearQuery q =3D new=20
> SpanNearQuery(clauses,0,true); // returns 1 document with "aaaa bbbb"
> in it
>
> SpanQuery[] clauses =3D new SpanTermQuery[2]; Clauses[0] =3D new=20
> SpanTermQuery("text","aaaa"); Clauses[1] =3D new=20
> SpanTermQuery("text","aaaa"); SpanNearQuery q =3D new=20
> SpanNearQuery(clauses,0,true); // returns 2 documents ( "aaaa bbbb"
> and "aaaa aaaa")
>
> This second bit of code returns the document with "aaaa bbbb" in it,=20
> Why doesn't SpanNearQuery discard that one and only return me the one=20
> I've asked for?
>
> Thanks
>
> Greg
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received
this email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard
copy by an authorised signatory.  The contents of this email may relate
to dealings with other companies within the Detica Limited group of
companies.

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
England.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 11:21:46 2011
Return-Path: <java-user-return-49253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67284 invoked from network); 1 Apr 2011 11:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 11:21:46 -0000
Received: (qmail 78365 invoked by uid 500); 1 Apr 2011 11:21:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78320 invoked by uid 500); 1 Apr 2011 11:21:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78310 invoked by uid 99); 1 Apr 2011 11:21:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:21:44 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:21:38 +0000
Received: by iym1 with SMTP id 1so4915979iym.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 04:21:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=E/mXcfXYJYYoM9vKuemhlnvJ0uukNjbaa11Eqh2T0A4=;
        b=ipssMDhCuqRmyr+HVAKFtVPJsLxITdoFs6JD5wZS3Noo9Ww/4ESz6krLD3ocGDOv5M
         GVqL9coOukYMnPKtBOfc6b6/3KlkzfYyZT7v+JDsCYwAJwQH4OVTaEzhL6tAjqq26aly
         q/ZU1RW7DA9tV+2YdAxDZvLBtOsVgC2iTAxVY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Duec0M4Q/8bJGcluaXIsEK/w3ZSyojNpXv+o68hzJfNwwV2Yu7hIZ5SUOFWOJpHCHm
         VGAbil3mkRohqcMAdHohqigRWvIaa7VedJLbOYfEweuejoUwpRaCW8sZYASdcEAJv/Mt
         hzemnGE8aS62B6btc4lAlT7Gr4eCmMMUtsiNM=
Received: by 10.231.216.168 with SMTP id hi40mr3644109ibb.196.1301656878109;
 Fri, 01 Apr 2011 04:21:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.134 with HTTP; Fri, 1 Apr 2011 04:20:58 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F2401161F2A@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F2401161EE1@uksrpblkexb01.detica.com>
 <BANLkTi=RZ6=3Wr0h2-xX9AVPxgxjUwobWA@mail.gmail.com> <614C529D389A5944B351F7DFB7594F2401161F2A@uksrpblkexb01.detica.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 1 Apr 2011 12:20:58 +0100
Message-ID: <BANLkTinFRvEc_MRXtx=pYn6VYAK438ZgCw@mail.gmail.com>
Subject: Re: SpanNearQuery with repeated term?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

> Sorry I am using 2.9.4, which is the same as 3.0.3?

Not by my definition of "the same".

> The code below demonstrates the problem.

Not really.  I'd be more convinced if it compiled.  And how can we be
sure the docs are exactly as you say?  That you are actually executing
the span queries you have created?  As I'm sure you know, there are
many ways in which a program can fail to work as expected and the
problem isn't always where we think it is.


--
Ian.

> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: 01 April 2011 12:10
> To: java-user@lucene.apache.org
> Subject: Re: SpanNearQuery with repeated term?
>
> I can't reproduce this using lucene-core-3.0.3.jar. =A0You don't say what
> version you are using. =A0Why don't you post the smallest possible
> complete standalone program or test case that demonstrates the problem.
> And tell us what version of lucene you are working with.
> Always.
>
>
> --
> Ian.
>
>
> On Fri, Apr 1, 2011 at 11:30 AM, Gregory Tarr <Gregory.tarr@detica.com>
> wrote:
>> I am having some issues with SpanNearQuery:
>>
>> SpanQuery[] clauses =3D new SpanTermQuery[2]; Clauses[0] =3D new
>> SpanTermQuery("text","aaaa"); Clauses[1] =3D new
>> SpanTermQuery("text","bbbb"); SpanNearQuery q =3D new
>> SpanNearQuery(clauses,0,true); // returns 1 document with "aaaa bbbb"
>> in it
>>
>> SpanQuery[] clauses =3D new SpanTermQuery[2]; Clauses[0] =3D new
>> SpanTermQuery("text","aaaa"); Clauses[1] =3D new
>> SpanTermQuery("text","aaaa"); SpanNearQuery q =3D new
>> SpanNearQuery(clauses,0,true); // returns 2 documents ( "aaaa bbbb"
>> and "aaaa aaaa")
>>
>> This second bit of code returns the document with "aaaa bbbb" in it,
>> Why doesn't SpanNearQuery discard that one and only return me the one
>> I've asked for?
>>
>> Thanks
>>
>> Greg
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory. =A0The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 11:34:08 2011
Return-Path: <java-user-return-49254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30036 invoked from network); 1 Apr 2011 11:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 11:34:08 -0000
Received: (qmail 47206 invoked by uid 500); 1 Apr 2011 11:34:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47136 invoked by uid 500); 1 Apr 2011 11:34:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47128 invoked by uid 99); 1 Apr 2011 11:34:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:34:05 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 11:33:59 +0000
Received: by iwr19 with SMTP id 19so4939160iwr.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 04:33:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=NrVzy6d9uqkjZS1n/UfPWCkkrJSJApYEi28jHvQszOU=;
        b=APYjBupRKluYnNpDnM6FraIZSQ8u03LdRyFYaBekBywCsrSLk+HINGpVT2QdqIfW7R
         pqcPc+LubPIqoCGSKYafJu3tt9EWzMCZ+PskA8FJVkdYDLTcx3EiBb5lrqrc8pSw9rqJ
         kZ1Q0FgerdZHuk5RfbG0ahWUPIzbssNZACiNU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MO6cgYjfjTAAl4VeyCZ+EM5dolTp/VBUMNaxbHjIyj/5gC+n9074F4EFvhbUPcUtAr
         TTGywtG/acHTLzIVsG9ei5AvL59nyrWYeeBlVrNU2l+fsFaiZoJU8qgklV4dsK9DNF8o
         gdISd+CQvSLhzKbDsIvmY13l7SE2SjSl7b2/o=
Received: by 10.231.130.22 with SMTP id q22mr3723529ibs.97.1301657619121; Fri,
 01 Apr 2011 04:33:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.17.202 with HTTP; Fri, 1 Apr 2011 04:33:09 -0700 (PDT)
In-Reply-To: <BANLkTinaXYa0DEA55Ea1gdQuQpoaEvohGA@mail.gmail.com>
References: <AANLkTinQhn8+_bAW_BB-EZdGoya_RE18Ngs8nQjkmtZ1@mail.gmail.com> <BANLkTinaXYa0DEA55Ea1gdQuQpoaEvohGA@mail.gmail.com>
From: jm <jmuguruza@gmail.com>
Date: Fri, 1 Apr 2011 13:33:09 +0200
Message-ID: <AANLkTik=zvXTOp5oPPdTcfgpuaApRCGfD5qGs+wmNeEo@mail.gmail.com>
Subject: Re: indexing data without writing to disk ?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0050450145d201c84a049fd9c81d

--0050450145d201c84a049fd9c81d
Content-Type: text/plain; charset=ISO-8859-1

or maybe MemoryIndex  (in contrib) is more suited to what he wants

On Fri, Apr 1, 2011 at 1:10 PM, Ian Lea <ian.lea@gmail.com> wrote:

> RAMDirectory.  The clue is in the name ...
>
>
> --
> Ian.
>
>
> On Fri, Apr 1, 2011 at 11:08 AM, Patrick Diviacco
> <patrick.diviacco@gmail.com> wrote:
> > Is there a way to index data into memory without writing to disk in
> Lucene ?
> >
> > This is my current code storing it on disk
> >
> > writer = new IndexWriter(FSDirectory.open(index_dir), new
> > IndexWriterConfig(org.apache.lucene.util.Version.LUCENE_40, new
> > WhitespaceAnalyzer(org.apache.lucene.util.Version.LUCENE_40)));
> >
> > //store sorted content to contents
> > Iterator<Map.Entry<String,Cluster>> it = clusters.entrySet().iterator();
> >
> > while (it.hasNext()) {
> >
> > ...
> > Document document  = new Document();
> >                document.add(new Field("id", id, Field.Store.YES,
> > Field.Index.ANALYZED));
> >               writer.addDocument(document);
> > }
> > writer.optimize();
> > writer.close();
> >
> >
> > thanks
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0050450145d201c84a049fd9c81d--

From java-user-return-49255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 12:33:05 2011
Return-Path: <java-user-return-49255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16487 invoked from network); 1 Apr 2011 12:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 12:33:04 -0000
Received: (qmail 34195 invoked by uid 500); 1 Apr 2011 12:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34154 invoked by uid 500); 1 Apr 2011 12:33:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34141 invoked by uid 99); 1 Apr 2011 12:33:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 12:33:02 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 12:32:56 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1Q5dWl-0006SE-Sx
	for java-user@lucene.apache.org; Fri, 01 Apr 2011 05:32:35 -0700
Date: Fri, 1 Apr 2011 05:32:35 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <1301661155888-2763162.post@n3.nabble.com>
Subject: Difference between regular Highlighter and Fast Vector Highlighter
 ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I was wondering whats the difference between the Lucene's 2 implementation of
highlighters... 
I saw the javadoc of FVH, but it only says "another implementation of Lucene
Highlighter" ...

Can someone throw some more light on this ? 

--
View this message in context: http://lucene.472066.n3.nabble.com/Difference-between-regular-Highlighter-and-Fast-Vector-Highlighter-tp2763162p2763162.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 14:15:56 2011
Return-Path: <java-user-return-49256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37578 invoked from network); 1 Apr 2011 14:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 14:15:56 -0000
Received: (qmail 91259 invoked by uid 500); 1 Apr 2011 14:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91173 invoked by uid 500); 1 Apr 2011 14:15:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91165 invoked by uid 99); 1 Apr 2011 14:15:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 14:15:53 +0000
X-ASF-Spam-Status: No, hits=4.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ee07b381@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 14:15:44 +0000
Received: by vxa37 with SMTP id 37so4157216vxa.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 07:15:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:x-qq-ssf:x-qq-business-origin:x-originating-ip
         :x-qq-style:x-qq-mid:from:to:subject:mime-version:content-type
         :content-transfer-encoding:date:x-priority:message-id:x-qq-mime
         :x-mailer:x-qq-mailer;
        bh=pd+bg1r6JnqsVO1gT+WcMa/npRlDheOVHffBTaVYCsM=;
        b=mc8wxSs1MzNj78M54n2NnRU0dHsP9xXNpRMO9qlux8/jwxvD6G25qh9uZQdNLL3KID
         hk4IdutNt/jBQcD3qR4sdMQOYII6uXNGDrZsDGuY1m1smQdOLF64Gd6Qg946Lvhp5sap
         WCB1wZ5LplbuFAv+n98Eae7qlg7HuJL8FHXb4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-qq-ssf:x-qq-business-origin:x-originating-ip:x-qq-style:x-qq-mid
         :from:to:subject:mime-version:content-type:content-transfer-encoding
         :date:x-priority:message-id:x-qq-mime:x-mailer:x-qq-mailer;
        b=rV4gKcjrXvxFIUfvq5dAXvJPxm2puTWbbgwgr6UfMZVTXtvGVYXV+bM09OGYsrktcH
         qIt8yeKYbauWkyWpqx3/YQRueR8wQKmGxSI6UYgCYlErlw76s1Pz+Zq19pject1RFSlq
         1kON/W5hrroFi1WsH8zmsXI/PomWBA7uHrQXc=
Received: by 10.52.65.100 with SMTP id w4mr5335776vds.199.1301667323541;
        Fri, 01 Apr 2011 07:15:23 -0700 (PDT)
Received: from smtpbg52.qq.com (smtpbg52.qq.com [64.71.138.43])
        by mx.google.com with ESMTPS id i1sm1209432vby.13.2011.04.01.07.15.20
        (version=SSLv3 cipher=OTHER);
        Fri, 01 Apr 2011 07:15:22 -0700 (PDT)
X-QQ-SSF:00000000000000F0
X-QQ-BUSINESS-ORIGIN:2
X-Originating-IP: 123.119.141.173
X-QQ-STYLE:
X-QQ-mid:webmail73t1301667310t7258593
From: "=?ISO-8859-1?B?Q2VzY2t5?=" <ee07b381@gmail.com>
To: "=?ISO-8859-1?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: About the lucene sort
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_4D95DDEE_DF3862A8_0B5EECF1"
Content-Transfer-Encoding: 8Bit
Date: Fri, 1 Apr 2011 22:15:10 +0800
X-Priority: 3
Message-ID: <tencent_01AC4D345523D5A63973A28A@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_4D95DDEE_DF3862A8_0B5EECF1
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64

SGksDQoNCg0KSSBrbm93IHRoZSBkZWZhdWx0IGlzIHNvcnQgYnkgcmVsZXZhbmNlLiBXaGls
ZSwgd2hlbiBpIHNlYXJjaCB0aGUgcHJlZml4IChpbnRlcmZhY2UqKSwgaXQgZG9lcyBub3Qg
d29yay4gSXQgY2FuIG9ubHkgc29ydCB0aGUgZG9jdW1lbnQgYnkgdGhlIG9yZGVyIG9mIHJl
YWRpbmcgZmlsZXMuDQoNCg0KV2hhdCBpcyB0aGUgcHJvYmxlbT8/Pw0KDQoNClRoeC4=

------=_NextPart_4D95DDEE_DF3862A8_0B5EECF1--


From java-user-return-49257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 14:55:48 2011
Return-Path: <java-user-return-49257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82084 invoked from network); 1 Apr 2011 14:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 14:55:47 -0000
Received: (qmail 12095 invoked by uid 500); 1 Apr 2011 14:55:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12044 invoked by uid 500); 1 Apr 2011 14:55:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12036 invoked by uid 99); 1 Apr 2011 14:55:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 14:55:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 14:55:38 +0000
Received: by iwr19 with SMTP id 19so5206165iwr.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 07:55:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=C6b2DUa7hpAUXA0SG4rj5kFWMubX5DHIoXnpLgEevWE=;
        b=h0IAkwg8x5XMUIqcQR36A9zj3Ox6Txahkrg9qpoBL1w/g88c7hY08COdj1eVJ2esAn
         2a7HuCP9onxKww22tH93TLHgmbSmfRl7a1938DOGh3vzzVyJBDpnJF+tcWquHz7YJN1h
         xUIUTBNbPSoNmU7i3qhzwuXPZ3fmOv6I8r/Fs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=doCsNmLNhJ/c2hfEVktCLx5iWmrWrv29mS+t/dv7029AdC523WXaj4Sp8DAkNtcfkQ
         6+1PVHYb2GPbqOW+1QFwhdKNj/1xZy9rI/CjUA+Dle2YfgjNGsiFU3cL0wxdtfy8ASbm
         gETWuEchj+I6uk6pbC+R2mR1VGw+F3Cj9giBU=
Received: by 10.231.216.168 with SMTP id hi40mr3833245ibb.196.1301669717069;
 Fri, 01 Apr 2011 07:55:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.134 with HTTP; Fri, 1 Apr 2011 07:54:57 -0700 (PDT)
In-Reply-To: <tencent_01AC4D345523D5A63973A28A@qq.com>
References: <tencent_01AC4D345523D5A63973A28A@qq.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 1 Apr 2011 15:54:57 +0100
Message-ID: <BANLkTi=JR_prG4aGx_cqp=k+N0AHWSPC7w@mail.gmail.com>
Subject: Re: About the lucene sort
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Probably a bug in your code.

If you post again with, as a minimum, the version of lucene that you
are using and your search/sort code, you might get a better answer.
Best of all would be a complete self-contained standalone program or
test case that demonstrates the problem.


--
Ian.


On Fri, Apr 1, 2011 at 3:15 PM, Cescky <ee07b381@gmail.com> wrote:
> Hi,
>
>
> I know the default is sort by relevance. While, when i search the prefix (interface*), it does not work. It can only sort the document by the order of reading files.
>
>
> What is the problem???
>
>
> Thx.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 15:50:59 2011
Return-Path: <java-user-return-49258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88515 invoked from network); 1 Apr 2011 15:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 15:50:59 -0000
Received: (qmail 66595 invoked by uid 500); 1 Apr 2011 15:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66532 invoked by uid 500); 1 Apr 2011 15:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66524 invoked by uid 99); 1 Apr 2011 15:50:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 15:50:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 15:50:49 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id 43C962081A
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2011 15:48:50 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id rpfbfZH7FRKq for <java-user@lucene.apache.org>;
	Fri,  1 Apr 2011 17:48:48 +0200 (CEST)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id 729862081C; Fri,  1 Apr 2011 17:48:48 +0200 (CEST)
Received: from [195.110.10.155] (unknown [195.110.10.155])
	by mail.dosco.de (Postfix) with ESMTP id 345252081A
	for <java-user@lucene.apache.org>; Fri,  1 Apr 2011 15:48:48 +0000 (UTC)
Message-ID: <4D95F444.7030406@dosco.de>
Date: Fri, 01 Apr 2011 17:50:28 +0200
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Undo hyphenation when indexing
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

for indexing PDF files we have to undo word hyphenation. The basic idea 
is simply to remove the hyphen when a new line and a small letter 
follows. Of course this approach isnt 100%-foolproofed but checking 
against a dictionary wouldnt be as well...

Since we face this problem too when highlighting using HTMLCharStripper 
(yes, we do have hyphenation in our HTML docs...) it seems to me I have 
to adjust the JFlex generated StandardTokenizerImpl.

Is this the right approach and hwo would I have to modify this script?

Thanks
Wulf


PS: I see that there are changes made in the brand new 3.1.0 version we 
are using 3.0.3, but as far I understand no relevant changes in this 
respect.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 16:09:59 2011
Return-Path: <java-user-return-49259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47592 invoked from network); 1 Apr 2011 16:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 16:09:59 -0000
Received: (qmail 9641 invoked by uid 500); 1 Apr 2011 16:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9611 invoked by uid 500); 1 Apr 2011 16:09:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9603 invoked by uid 99); 1 Apr 2011 16:09:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 16:09:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.249.20.60] (HELO billthecat.sdsc.edu) (132.249.20.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 16:09:50 +0000
Received: from [192.168.11.51] (c-67-180-28-210.hsd1.ca.comcast.net [67.180.28.210])
	(authenticated bits=0)
	by billthecat.sdsc.edu (8.14.2/8.14.1/SDSCrelay/16) with ESMTP id p31G9OIP011859
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO);
	Fri, 1 Apr 2011 09:09:25 -0700 (PDT)
Message-ID: <4D95F8AA.7020000@sdsc.edu>
Date: Fri, 01 Apr 2011 09:09:14 -0700
From: Christopher Condit <condit@sdsc.edu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Robert Muir <rcmuir@gmail.com>
Subject: Re: Best practice for stemming and exact matching
References: <AANLkTikyR4sCCg=fZtNisQNZif2WNiwa2V8AV7qY_qm2@mail.gmail.com> <9CC6AD51-AA5F-4F48-BA95-F2EFE758A33F@hoplahup.net> <4D9263B4.5050609@sdsc.edu> <AANLkTi=ARWj+62BmYbsVt1d5Jx-M1O-YH0qPxzBWmnhi@mail.gmail.com>
In-Reply-To: <AANLkTi=ARWj+62BmYbsVt1d5Jx-M1O-YH0qPxzBWmnhi@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

>> Ideally I'd like to have the parser use the
>> custom analyzer for everything unless it's going to parse a clause into
>> a PhraseQuery or a MultiPhraseQuery, in which case it uses the
>> SimpleAnalyzer and looks in the _exact field - but I can't figure out
>> the best way to accomplish this.
> 
> You might be interested in the example i added to the QP tests in
> https://issues.apache.org/jira/browse/LUCENE-2892,
> it does something similar to what you are doing.
> 
> your situation is probably even easier than my example actually:
> 
> @Override
> protected Query getFieldQuery(String field, String queryText, boolean
> quoted) throws ParseException {
>   if (quoted) {
>     field = field + "_exact"; // lie about the field to superclass if
> the user quoted it.
>   }
>   return super.getFieldQuery(field, queryText, quoted);
> }
> 
> if you are using perfieldanalyzerwrapper so that these "_exact" fields
> don't use stemming, then it should just work.
> you'll need branch_3.x or trunk for this, but looks like 3.1 is close

Using the 3.1 jars from Maven central the following test case shows
different behavior:
http://www.pastie.org/1744131

The output is:
getFieldQuerySlop: foo bar
a:"foo bar" b:"foo bar"
getFieldQueryQuoted: nacho
getFieldQuerySlop: foo bar
getFieldQuerySlop: chip
getFieldQueryQuoted: baz
+(a:nacho b:nacho) +(a:"foo bar" b:"foo bar") +(a:chip b:chip) +(a:baz
b:baz)

So it would seem that all of the quoted phrases are going through the
slop method (with slop of 0). Would it be safe to alter the field in
that method instead?

Thanks,
-Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 16:14:02 2011
Return-Path: <java-user-return-49260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48577 invoked from network); 1 Apr 2011 16:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 16:14:02 -0000
Received: (qmail 19446 invoked by uid 500); 1 Apr 2011 16:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19329 invoked by uid 500); 1 Apr 2011 16:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19321 invoked by uid 99); 1 Apr 2011 16:14:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 16:14:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 16:13:53 +0000
Received: by wwi18 with SMTP id 18so2966129wwi.5
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 09:13:33 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.179.138 with SMTP id bq10mr4431445wbb.12.1301674412710;
 Fri, 01 Apr 2011 09:13:32 -0700 (PDT)
Received: by 10.227.156.143 with HTTP; Fri, 1 Apr 2011 09:13:32 -0700 (PDT)
In-Reply-To: <201104011826576408113@gmail.com>
References: <201104011133527349770@gmail.com>
	<AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>
	<201104011826576408113@gmail.com>
Date: Fri, 1 Apr 2011 12:13:32 -0400
Message-ID: <AANLkTi=iEb=-BAyHpmigNi1q7NOmmi46Cw3S9iR53ot6@mail.gmail.com>
Subject: Re: Re: A likely bug of TermsPosition.nextPosition
From: Michael McCandless <lucene@mikemccandless.com>
To: =?UTF-8?B?6KKB5q2mIFtHTWFpbF0=?= <yuanwu.mail@gmail.com>
Cc: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm so it's not index corruption.  Curious.

Which Lucene version are you using?  Looks like it's 2.9, but not
2.9.4?  Can you try 2.9.4 and see if you still hit the problem?

Can you post a small test case showing the problem, on your index?

Mike

http://blog.mikemccandless.com

2011/4/1 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
> Hi, Dear Mike:
>
> belows list the report of checkIndex. OS is Fedora Linux.
>
> [oracle@server bin]$ java -classpath ./ org.apache.lucene.index.CheckInde=
x /data/Index/URL/Generic/ -fix
>
> NOTE: testing will be more thorough if you run java with '-ea:org.apache.=
lucene...', so assertions are enabled
> Opening index @ /GeoGrid/data/Index/URL/Generic/
> Segments file=3Dsegments_ayup numSegments=3D1 version=3DFORMAT_DIAGNOSTIC=
S [Lucene 2.9]
>   1 of 1: name=3D_bym0 docCount=3D1344278
>     compound=3Dfalse
>     hasProx=3Dtrue
>     numFiles=3D11
>     size (MB)=3D15,979.593
>     diagnostics =3D {optimize=3Dtrue, mergeFactor=3D3, os.version=3D2.6.2=
7.41-170.2.117.fc10.x86_64, os=3DLinux, mergeDocStores=3Dtrue, lucene.versi=
on=3D3.0-dev, source=3Dmerge, os.arch=3Damd64, java.version=3D1.6.0_21, jav=
a.vendor=3DSun Microsystems Inc.}
>     no deletions
>     test: open reader.........OK
>     test: fields..............OK [11 fields]
>     test: field norms.........OK [2 fields]
>     test: terms, freq, prox...
> OK [1263500 terms; 601715072 terms/docs pairs; 1513780631 tokens]
>     test: stored fields.......OK [8063151 total field count; avg 5.998 fi=
elds per doc]
>     test: term vectors........OK [1344278 total vector count; avg 1 term/=
freq vector fields per doc]
> No problems were detected with this index.
>
>
>
> 2011-04-01
> ________________________________
> =D4=AC=CE=E4 [GMail]
> ________________________________
> =B7=A2=BC=FE=C8=CB=A3=BA Michael McCandless
> =B7=A2=CB=CD=CA=B1=BC=E4=A3=BA 2011-04-01  17:58:08
> =CA=D5=BC=FE=C8=CB=A3=BA java-user
> =B3=AD=CB=CD=A3=BA =D4=AC=CE=E4 [GMail]
> =D6=F7=CC=E2=A3=BA Re: A likely bug of TermsPosition.nextPosition
> Hmm this could be from a corrupted index.
> What version of Lucene?  What OS/filesystem?
> Can you run CheckIndex and post the output?
> Mike
> http://blog.mikemccandless.com
> 2011/3/31 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
>> Hi, dear experts:
>>
>> When IndexReader.termsPositions is used to access specific terms, the ca=
ll to TermsPosition.nextPosition success if TermsPosition.next is used. But=
 if TermsPosition.skipTo is used instead of TermsPosition.next, a java.lang=
.IllegalArgumentException will be thrown, as bellows.
>>
>>  java.lang.IllegalArgumentException: Negative position
>>    at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:610)
>>    at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInterna=
l(NIOFSDirectory.java:161)
>>    at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInp=
ut.java:213)
>>    at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexI=
nput.java:39)
>>    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:92)
>>    at org.apache.lucene.store.BufferedIndexInput.readVInt(BufferedIndexI=
nput.java:181)
>>    at org.apache.lucene.index.SegmentTermPositions.readDeltaPosition(Seg=
mentTermPositions.java:75)
>>    at org.apache.lucene.index.SegmentTermPositions.skipPositions(Segment=
TermPositions.java:130)
>>    at org.apache.lucene.index.SegmentTermPositions.lazySkip(SegmentTermP=
ositions.java:168)
>>    at org.apache.lucene.index.SegmentTermPositions.nextPosition(SegmentT=
ermPositions.java:69)
>>
>> In my further study, I found that if docid execeed 1044278, the exceptio=
n occurs everytime, for the small ones,  the exception never occur. BTW, th=
e total number of documents is about 1344278, and are never deleted.
>>
>> Thanks.
>>
>> 2011-04-01
>>
>>
>>
>> Yuan Wu [GMail]
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 16:22:38 2011
Return-Path: <java-user-return-49261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73239 invoked from network); 1 Apr 2011 16:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 16:22:38 -0000
Received: (qmail 43189 invoked by uid 500); 1 Apr 2011 16:22:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43143 invoked by uid 500); 1 Apr 2011 16:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43135 invoked by uid 99); 1 Apr 2011 16:22:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 16:22:36 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.141] (HELO eu1sys200aog116.obsmtp.com) (207.126.144.141)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Apr 2011 16:22:27 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob116.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTZX7ra1lZtj30LwaIHpOsfaVdoBkKL8R@postini.com; Fri, 01 Apr 2011 16:22:07 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 1 Apr 2011 17:21:56 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 1 Apr 2011 17:22:05 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: About the lucene sort
Date: Fri, 1 Apr 2011 17:22:05 +0100
Message-ID: <8163028120305742991D2FB7F19412AB014D000C@uksrpblkexb01.detica.com>
In-Reply-To: <BANLkTi=JR_prG4aGx_cqp=k+N0AHWSPC7w@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: About the lucene sort
Thread-Index: AcvwfOMIdY6vX75eSomk+p8UcGWv9QAC7Fcw
References: <tencent_01AC4D345523D5A63973A28A@qq.com> <BANLkTi=JR_prG4aGx_cqp=k+N0AHWSPC7w@mail.gmail.com>
From: "Carl Austin" <Carl.austin@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Apr 2011 16:22:05.0061 (UTC) FILETIME=[F0750350:01CBF088]
X-Virus-Checked: Checked by ClamAV on apache.org

Don't prefix queries get rewritten wrapped in ConstantScoreQuery,
meaning all will get the same score and you get them in read order?
Checking the API, PrefixQuery uses
MultiTermQuery.CONSTANT_SCORE_AUTO_REWRITE_DEFAULT, which can be changed
with setRewriteMethod.=20

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com]=20
Sent: 01 April 2011 15:55
To: java-user@lucene.apache.org
Subject: Re: About the lucene sort

Probably a bug in your code.

If you post again with, as a minimum, the version of lucene that you are
using and your search/sort code, you might get a better answer.
Best of all would be a complete self-contained standalone program or
test case that demonstrates the problem.


--
Ian.


On Fri, Apr 1, 2011 at 3:15 PM, Cescky <ee07b381@gmail.com> wrote:
> Hi,
>
>
> I know the default is sort by relevance. While, when i search the
prefix (interface*), it does not work. It can only sort the document by
the order of reading files.
>
>
> What is the problem???
>
>
> Thx.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 16:24:17 2011
Return-Path: <java-user-return-49262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79805 invoked from network); 1 Apr 2011 16:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 16:24:17 -0000
Received: (qmail 47952 invoked by uid 500); 1 Apr 2011 16:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47912 invoked by uid 500); 1 Apr 2011 16:24:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47904 invoked by uid 99); 1 Apr 2011 16:24:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 16:24:14 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 16:24:09 +0000
Received: by wyb40 with SMTP id 40so4747893wyb.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 09:23:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to:cc
         :content-type;
        bh=fQEvxFeWk4erNDwnGp55yhGlpR7DM92ytPqcDXotEUA=;
        b=InJDc1Aw+ogaViSPZobZV+oP++7j+xI1mRDoBdiUKprQ2phliTRQZXMvF1h7/AQSj3
         FgyXVQFucoLW1S2P1TMUEbgwmqSEsLiIxlZNUSXI9kjd6Xd3kk/2tl0vFJ944JTc6mYs
         vcjaMJjm/rYNOjoVqgAlU1jzLBnAOY23b38Vc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:cc:content-type;
        b=FzKjv7hgoLwmWEkJG42LpycVhiLPCmW/bcShKHQbEL9ktRn7DUcnhirH82yQwRxzyB
         /JI0i3kt455xaynACs/sYGNfqXbUnx0EsvLi3598qTzUk4YiV0KF2oSMTv0Wo4FXZ/sC
         ZO5iqMibixy26+uH97KV1450+DmwV4Tk76aNk=
MIME-Version: 1.0
Received: by 10.216.72.201 with SMTP id t51mr1053928wed.6.1301675028652; Fri,
 01 Apr 2011 09:23:48 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.240.70 with HTTP; Fri, 1 Apr 2011 09:23:48 -0700 (PDT)
In-Reply-To: <4D95F444.7030406@dosco.de>
References: <4D95F444.7030406@dosco.de>
Date: Fri, 1 Apr 2011 12:23:48 -0400
X-Google-Sender-Auth: Ua3j69yAb6s8rU8bCV2-O1YC5IM
Message-ID: <AANLkTinH3WRd_A2ndCy7ZH8aZN0k98n6N1vSyWBTkzyC@mail.gmail.com>
Subject: Re: Undo hyphenation when indexing
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Cc: Wulf Berschin <berschin@dosco.de>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Solr has a hyphenated word filter you could copy.
http://lucene.apache.org/solr/api/org/apache/solr/analysis/HyphenatedWordsFilterFactory.html

On trunk, this has been folded into the analysis module.

-Yonik
http://www.lucenerevolution.org -- Lucene/Solr User Conference, May
25-26, San Francisco

On Fri, Apr 1, 2011 at 11:50 AM, Wulf Berschin <berschin@dosco.de> wrote:
> Hi,
>
> for indexing PDF files we have to undo word hyphenation. The basic idea is
> simply to remove the hyphen when a new line and a small letter follows. Of
> course this approach isnt 100%-foolproofed but checking against a dictionary
> wouldnt be as well...
>
> Since we face this problem too when highlighting using HTMLCharStripper
> (yes, we do have hyphenation in our HTML docs...) it seems to me I have to
> adjust the JFlex generated StandardTokenizerImpl.
>
> Is this the right approach and hwo would I have to modify this script?
>
> Thanks
> Wulf
>
>
> PS: I see that there are changes made in the brand new 3.1.0 version we are
> using 3.0.3, but as far I understand no relevant changes in this respect.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 18:16:54 2011
Return-Path: <java-user-return-49263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58820 invoked from network); 1 Apr 2011 18:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 18:16:54 -0000
Received: (qmail 36717 invoked by uid 500); 1 Apr 2011 18:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36628 invoked by uid 500); 1 Apr 2011 18:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36618 invoked by uid 99); 1 Apr 2011 18:16:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 18:16:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 18:16:45 +0000
Received: by qyk30 with SMTP id 30so3221053qyk.14
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 11:16:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=4PKJJmm81Woqm2v71NRy5MYtgchf/cL7/j62htg9aAY=;
        b=uD9vjbFCX4IJHIKK9LIJi+4G3Xz848CMGL858BOP/pQrGj3jYp5PdhSCCyplD/AgxD
         tRpsUS3kjefhg1nuJAGq/EJBrfELUX2f/iKIKBJ1lEGMobvX614buDKBVRWRP91GrnQO
         P6AtPvOTXFvJFN0j033zvcKgMUJqZLKQMuv54=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PMYGonLc/Sqm7tZPYdyPPiEUZwHzkrYflnZnIomPQR27UR8kWxhZMz0ibrMPAJfptz
         qo9qX8RF9r4qYvP6P84f4VcRxYa/kw4t0MrqFxAORX5rISPj4OKUhgQYqUagebdzaeSA
         Yo3YJxfkejToe78hNzl/QyXy8wd7lCh04fEUY=
MIME-Version: 1.0
Received: by 10.229.127.104 with SMTP id f40mr2897629qcs.48.1301681784673;
 Fri, 01 Apr 2011 11:16:24 -0700 (PDT)
Received: by 10.229.72.8 with HTTP; Fri, 1 Apr 2011 11:16:24 -0700 (PDT)
In-Reply-To: <201104011228472348800@gmail.com>
References: <201104011228472348800@gmail.com>
Date: Fri, 1 Apr 2011 14:16:24 -0400
Message-ID: <AANLkTin6ptHVrKGk9nd2vNp-aMtnZLcgZt9hhb-Y0B5L@mail.gmail.com>
Subject: Re: How to do Multiple-Cluster Query?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cdf9b4062d53f049fdf681a

--000e0cdf9b4062d53f049fdf681a
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

You might consider a multiValued field and a positionIncrementGap longer
than the longest <a, b, c> tuple.
At that point, you can search for phrase queries where the slop is less tha=
n
the positionIncrementGap.

I'm a bit rushed, so if you need more details we can talk later....

Best
Erick

2011/4/1 =E8=A2=81=E6=AD=A6 [GMail] <yuanwu.mail@gmail.com>

> Hi, dear experts:
>
> Assume that a tuple is composed of <<A1, B1, C1>,<A2,B2,C2>,...,<AN,BN,CN=
>,
> Value>.
> IF AK is stored in Field A, BK is stored in Field B, CK is stored in Fiel=
d
> C (1<=3DK<=3DN), so there are N A fields,N B fields and N C fields.
> The question is if I want to query whith the condition of <a,b,c>, how ca=
n
> i get the exact value correspoding to <a,b,c>.
>
> longing for your helps
>
>
> Thanks in advance.
>
> 2011-04-01
>
>
>
> Yuan Wu [GMail]
>

--000e0cdf9b4062d53f049fdf681a--

From java-user-return-49264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 19:14:46 2011
Return-Path: <java-user-return-49264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59573 invoked from network); 1 Apr 2011 19:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 19:14:46 -0000
Received: (qmail 29086 invoked by uid 500); 1 Apr 2011 19:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29043 invoked by uid 500); 1 Apr 2011 19:14:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 88931 invoked by uid 99); 1 Apr 2011 13:14:56 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS,T_FRT_BELOW2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ydabhi@asite.com designates 202.131.102.148 as permitted sender)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CBF06E.BA330AE0"
Subject: org.apache.lucene.store.AlreadyClosedException: this IndexReader is closed 
Date: Fri, 1 Apr 2011 18:44:27 +0530
Message-ID: <BE4EDD1665A8004A853E8BDC62C2F1580D2E6F@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: org.apache.lucene.store.AlreadyClosedException: this IndexReader is closed 
Thread-Index: Acvwbko8HeKm/XFnQoy5bWA2BuTYwQ==
From: "Yogesh Dabhi" <ydabhi@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CBF06E.BA330AE0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi

=20

Concurrently 5 user access same lucene directory for searching document=20

That time I got bellow exception=20

org.apache.lucene.store.AlreadyClosedException: this IndexReader is
closed

=20

is there a way to handle such error

=20

Thanks & Regards

Yogesh


------_=_NextPart_001_01CBF06E.BA330AE0--

From java-user-return-49265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 19:24:51 2011
Return-Path: <java-user-return-49265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94857 invoked from network); 1 Apr 2011 19:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 19:24:50 -0000
Received: (qmail 44524 invoked by uid 500); 1 Apr 2011 19:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44414 invoked by uid 500); 1 Apr 2011 19:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44406 invoked by uid 99); 1 Apr 2011 19:24:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 19:24:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devon.odell@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 19:24:43 +0000
Received: by iym1 with SMTP id 1so5582591iym.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 12:24:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=xLOxGvTHaoiThILYbh8l2Kr0HrZIPnaDxZEjLkuWrgA=;
        b=AIsPQ5IUvMztGHond0tq/IvLZedSu9c0CE9+JCZ9vXnMgAaz6tZaQMx20zdS+63NAT
         xz1qy8xuKjGKHktYN9zVtA94MZuGRdISE7327tfPAqOxc7uzzOmpRT0dDAMJ/OooeYbp
         tm3PHWGffnnz7gqEdpBi82P0Qq2wtDZH4yCtQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qXqCo7lAqfw0GotKFLvjNSniW9jx+svtEwTVgOznnIScrieG1B0GvRskH1LB/QI7yA
         cgQTa3JscXRKwCLMaudRTTJYKC2ELzTjN0yU5EaV7LSCjDhiWYcsDWGL7cCoo1/tEmaG
         wEwOFwiWMEd1EEpx8sZfqT712kXa8ph9hw4s8=
MIME-Version: 1.0
Received: by 10.42.152.197 with SMTP id j5mr2414517icw.94.1301685862278; Fri,
 01 Apr 2011 12:24:22 -0700 (PDT)
Received: by 10.231.34.135 with HTTP; Fri, 1 Apr 2011 12:24:22 -0700 (PDT)
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2E6F@indiaserv01.asite.asitehq.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E6F@indiaserv01.asite.asitehq.com>
Date: Fri, 1 Apr 2011 15:24:22 -0400
Message-ID: <AANLkTimbT=1yC+uG-aADHvhO_VkfuKbtDqFXbiHoFTg1@mail.gmail.com>
Subject: Re: org.apache.lucene.store.AlreadyClosedException: this IndexReader
 is closed
From: "Devon H. O'Dell" <devon.odell@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

2011/4/1 Yogesh Dabhi <ydabhi@asite.com>:
> Hi
>
> Concurrently 5 user access same lucene directory for searching document
>
> That time I got bellow exception
>
> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
> closed
>
> is there a way to handle such error

Use a ReentrantReaderWriterLock around the process of re-opening your
IndexReader and re-creating your IndexSearcher (or closing your
reader, if that's all you're doing), and the process of using your
IndexSearcher for searching.

--dho

> Thanks & Regards
>
> Yogesh
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 20:07:54 2011
Return-Path: <java-user-return-49266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50120 invoked from network); 1 Apr 2011 20:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 20:07:54 -0000
Received: (qmail 98577 invoked by uid 500); 1 Apr 2011 20:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98533 invoked by uid 500); 1 Apr 2011 20:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98525 invoked by uid 99); 1 Apr 2011 20:07:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 20:07:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.249.20.60] (HELO billthecat.sdsc.edu) (132.249.20.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 20:07:44 +0000
Received: from [192.168.11.51] (c-67-180-28-210.hsd1.ca.comcast.net [67.180.28.210])
	(authenticated bits=0)
	by billthecat.sdsc.edu (8.14.2/8.14.1/SDSCrelay/16) with ESMTP id p31K7Mdf006204
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 1 Apr 2011 13:07:23 -0700 (PDT)
Message-ID: <4D963070.3080301@sdsc.edu>
Date: Fri, 01 Apr 2011 13:07:12 -0700
From: Christopher Condit <condit@sdsc.edu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Using IndexWriterConfig repeatedly in 3.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I see in the JavaDoc for IndexWriterConfig that:
"Note that IndexWriter makes a private clone; if you need to
subsequently change settings use IndexWriter.getConfig()."

However when I attempt to use the same IndexWriterConfig to create
multiple IndexWriters the following exception is thrown:

org.apache.lucene.util.SetOnce$AlreadySetException: The object cannot be
set twice!
	at org.apache.lucene.util.SetOnce.set(SetOnce.java:69)
	at org.apache.lucene.index.MergePolicy.setIndexWriter(MergePolicy.java:263)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:1078)

Is this the intended design? Is there a way to use the configuration
multiple times? I see that clone won't work since it's shallow...

Thanks,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 20:44:34 2011
Return-Path: <java-user-return-49267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44250 invoked from network); 1 Apr 2011 20:44:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 20:44:33 -0000
Received: (qmail 33634 invoked by uid 500); 1 Apr 2011 20:44:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33590 invoked by uid 500); 1 Apr 2011 20:44:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33582 invoked by uid 99); 1 Apr 2011 20:44:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 20:44:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 20:44:27 +0000
Received: by wwi18 with SMTP id 18so3149031wwi.5
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 13:44:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.63.16 with SMTP id z16mr2338623wbh.215.1301690644522; Fri,
 01 Apr 2011 13:44:04 -0700 (PDT)
Received: by 10.227.156.143 with HTTP; Fri, 1 Apr 2011 13:44:04 -0700 (PDT)
In-Reply-To: <4D963070.3080301@sdsc.edu>
References: <4D963070.3080301@sdsc.edu>
Date: Fri, 1 Apr 2011 16:44:04 -0400
Message-ID: <AANLkTi=B96SnUD9H1=O_ihkxwe+0uQy8cpVXjXofNvQF@mail.gmail.com>
Subject: Re: Using IndexWriterConfig repeatedly in 3.1
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Christopher Condit <condit@sdsc.edu>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

The issue is that a MergePolicy instance cannot be re-used across
multiple writers.

So, you could take your first IWC, change out the MergePolicy, then re-use =
it?

Other things also cannot be reused, eg a ConcurrentMergeScheduler instance.

Mike

http://blog.mikemccandless.com

On Fri, Apr 1, 2011 at 4:07 PM, Christopher Condit <condit@sdsc.edu> wrote:
> I see in the JavaDoc for IndexWriterConfig that:
> "Note that IndexWriter makes a private clone; if you need to
> subsequently change settings use IndexWriter.getConfig()."
>
> However when I attempt to use the same IndexWriterConfig to create
> multiple IndexWriters the following exception is thrown:
>
> org.apache.lucene.util.SetOnce$AlreadySetException: The object cannot be
> set twice!
> =A0 =A0 =A0 =A0at org.apache.lucene.util.SetOnce.set(SetOnce.java:69)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.MergePolicy.setIndexWriter(Merg=
ePolicy.java:263)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.=
java:1078)
>
> Is this the intended design? Is there a way to use the configuration
> multiple times? I see that clone won't work since it's shallow...
>
> Thanks,
> -Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 01 22:16:19 2011
Return-Path: <java-user-return-49268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45712 invoked from network); 1 Apr 2011 22:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 1 Apr 2011 22:16:19 -0000
Received: (qmail 31725 invoked by uid 500); 1 Apr 2011 22:16:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31687 invoked by uid 500); 1 Apr 2011 22:16:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31679 invoked by uid 99); 1 Apr 2011 22:16:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 22:16:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Apr 2011 22:16:10 +0000
Received: by yia28 with SMTP id 28so2067612yia.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 15:15:49 -0700 (PDT)
Received: by 10.150.51.21 with SMTP id y21mr4319397yby.342.1301696149586;
        Fri, 01 Apr 2011 15:15:49 -0700 (PDT)
Received: from mail-yx0-f176.google.com (mail-yx0-f176.google.com [209.85.213.176])
        by mx.google.com with ESMTPS id b1sm1023442ybn.16.2011.04.01.15.15.48
        (version=SSLv3 cipher=OTHER);
        Fri, 01 Apr 2011 15:15:49 -0700 (PDT)
Received: by yxd5 with SMTP id 5so2072329yxd.35
        for <java-user@lucene.apache.org>; Fri, 01 Apr 2011 15:15:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.185.226 with SMTP id u62mr3969468yhm.307.1301696148494;
 Fri, 01 Apr 2011 15:15:48 -0700 (PDT)
Received: by 10.236.109.143 with HTTP; Fri, 1 Apr 2011 15:15:48 -0700 (PDT)
In-Reply-To: <4D963070.3080301@sdsc.edu>
References: <4D963070.3080301@sdsc.edu>
Date: Sat, 2 Apr 2011 09:15:48 +1100
Message-ID: <AANLkTi=B6ChPP9MsF4+p7DQhVG1cSZSQVnyfk-A28FdN@mail.gmail.com>
Subject: Re: Using IndexWriterConfig repeatedly in 3.1
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Sat, Apr 2, 2011 at 7:07 AM, Christopher Condit <condit@sdsc.edu> wrote:
> I see in the JavaDoc for IndexWriterConfig that:
> "Note that IndexWriter makes a private clone; if you need to
> subsequently change settings use IndexWriter.getConfig()."
>
> However when I attempt to use the same IndexWriterConfig to create
> multiple IndexWriters the following exception is thrown:
>
> org.apache.lucene.util.SetOnce$AlreadySetException: The object cannot be
> set twice!
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.util.SetOnce.set(SetOnce.=
java:69)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.MergePolicy.setInde=
xWriter(MergePolicy.java:263)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.<init>(=
IndexWriter.java:1078)
>
> Is this the intended design? Is there a way to use the configuration
> multiple times? I see that clone won't work since it's shallow...

Looking at this, it is odd indeed.  What is the benefit of having
clone() exposed if it isn't cloning any other sub-objects which
maintain state?  It's almost as if IndexWriter takes a clone to try
and prevent others modifying the object directly, but then it allows
getting its copy anyway, and on top of that, it modifies deep state
which affects the caller's copy of the object.

Solutions from the Lucene end:

  1. Remove clone() as it's misleading

  2. Make MergePolicy and other mutable things which can live in the
config Cloneable so that when the IndexWriter "takes a clone", it
actually takes a clone instead of using objects the caller passed in.

Solutions from the application end:

  1. Make an IndexWriterConfigCloner / MergePolicyCloner / ...
utility, and implement the cloning like that.

  2. Make your own builder API with cloning support, and have that
create a new IndexWriterConfig each time (but I think this was more or
less the point of IndexWriterConfig itself, since it looks like a
builder API already.)

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 00:44:41 2011
Return-Path: <java-user-return-49269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21723 invoked from network); 2 Apr 2011 00:44:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 00:44:41 -0000
Received: (qmail 28398 invoked by uid 500); 2 Apr 2011 00:44:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28359 invoked by uid 500); 2 Apr 2011 00:44:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28351 invoked by uid 99); 2 Apr 2011 00:44:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 00:44:38 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 00:44:31 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 0FED7DEC8B
	for <java-user@lucene.apache.org>; Sat,  2 Apr 2011 09:44:09 +0900 (JST)
Message-ID: <4D967158.9000809@r.email.ne.jp>
Date: Sat, 02 Apr 2011 09:44:08 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Difference between regular Highlighter and Fast Vector Highlighter
 ?
References: <1301661155888-2763162.post@n3.nabble.com>
In-Reply-To: <1301661155888-2763162.post@n3.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

(11/04/01 21:32), shrinath.m wrote:
> I was wondering whats the difference between the Lucene's 2 implementation of
> highlighters...
> I saw the javadoc of FVH, but it only says "another implementation of Lucene
> Highlighter" ...

Description section in the javadoc shows the features of FVH:

https://builds.apache.org/hudson/job/Lucene-trunk/javadoc/all/org/apache/lucene/search/vectorhighlight/package-summary.html#package_description

     * fast for large docs
     * support N-gram fields
     * support phrase-unit highlighting with slops
     * need Java 1.5
     * highlight fields need to be TermVector.WITH_POSITIONS_OFFSETS
     * take into account query boost to score fragments
     * support colored highlight tags
     * pluggable FragListBuilder
     * pluggable FragmentsBuilder

Koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 02:37:34 2011
Return-Path: <java-user-return-49270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1899 invoked from network); 2 Apr 2011 02:37:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 02:37:34 -0000
Received: (qmail 95382 invoked by uid 500); 2 Apr 2011 02:37:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95314 invoked by uid 500); 2 Apr 2011 02:37:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95306 invoked by uid 99); 2 Apr 2011 02:37:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 02:37:31 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,T_FRT_ADULT2,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 02:37:24 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1Q5qhy-0008Vd-Fb
	for java-user@lucene.apache.org; Fri, 01 Apr 2011 19:37:02 -0700
Date: Fri, 1 Apr 2011 19:37:02 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <AANLkTinoTiYhiRophYk5UrH55LqYs1jy5uvJaLPPevmb@mail.gmail.com>
In-Reply-To: <4D967158.9000809@r.email.ne.jp>
References: <1301661155888-2763162.post@n3.nabble.com> <4D967158.9000809@r.email.ne.jp>
Subject: Re: Difference between regular Highlighter and Fast Vector
 Highlighter ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61757_3557270.1301711822477"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61757_3557270.1301711822477
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Got it :)

Thanks for the link.

[closed]

On Sat, Apr 2, 2011 at 6:14 AM, Koji Sekiguchi [via Lucene] <
ml-node+2765616-1923995541-376162@n3.nabble.com> wrote:

> (11/04/01 21:32), shrinath.m wrote:
> > I was wondering whats the difference between the Lucene's 2
> implementation of
> > highlighters...
> > I saw the javadoc of FVH, but it only says "another implementation of
> Lucene
> > Highlighter" ...
>
> Description section in the javadoc shows the features of FVH:
>
>
> https://builds.apache.org/hudson/job/Lucene-trunk/javadoc/all/org/apache/lucene/search/vectorhighlight/package-summary.html#package_description
>
>      * fast for large docs
>      * support N-gram fields
>      * support phrase-unit highlighting with slops
>      * need Java 1.5
>      * highlight fields need to be TermVector.WITH_POSITIONS_OFFSETS
>      * take into account query boost to score fragments
>      * support colored highlight tags
>      * pluggable FragListBuilder
>      * pluggable FragmentsBuilder
>
> Koji
> --
> http://www.rondhuit.com/en/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2765616&i=0&by-user=t>
> For additional commands, e-mail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2765616&i=1&by-user=t>
>
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://lucene.472066.n3.nabble.com/Difference-between-regular-Highlighter-and-Fast-Vector-Highlighter-tp2763162p2765616.html
>  To unsubscribe from Difference between regular Highlighter and Fast Vector
> Highlighter ?, click here<http://lucene.472066.n3.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=2763162&code=c2hyaW5hdGgubUB3ZWJ5b2cuY29tfDI3NjMxNjJ8LTIxMzY3ODQ0ODI=>.
>
>



-- 
Regards
Shrinath.M


--
View this message in context: http://lucene.472066.n3.nabble.com/Difference-between-regular-Highlighter-and-Fast-Vector-Highlighter-tp2763162p2765899.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_61757_3557270.1301711822477--

From java-user-return-49271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 08:00:25 2011
Return-Path: <java-user-return-49271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11864 invoked from network); 2 Apr 2011 08:00:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 08:00:25 -0000
Received: (qmail 17784 invoked by uid 500); 2 Apr 2011 08:00:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17744 invoked by uid 500); 2 Apr 2011 08:00:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17730 invoked by uid 99); 2 Apr 2011 08:00:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 08:00:21 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yuanwu.mail@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 08:00:15 +0000
Received: by iwr19 with SMTP id 19so6072784iwr.35
        for <java-user@lucene.apache.org>; Sat, 02 Apr 2011 00:59:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:cc:references:subject:message-id
         :organization:x-mailer:mime-version:content-type;
        bh=5DX3q1Hk67xGoefv7JqTfZrizEIVt75AEOFG5ppvDDU=;
        b=n6he1/12C+8uvxPdkJrnmzoGZmohRmnPCshL7BuAsgIGftvwkWuhbxNZh2/VBbkOVa
         GytwKaNxCYbp2OrhUC7xkC8ZVKO42plAUHh/z46MdHlT2NJ+idL6MPXUxmvfPtdgxbZ9
         stpOh5wvuqtx7u8ZFX4/PYEPx4qYCtDgLQnNQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:cc:references:subject:message-id:organization:x-mailer
         :mime-version:content-type;
        b=BtUPQ9maM8f6gLFdDxouKcAc7B9SIrd+4nnHuJv+nJBnk7zMzOr11F02/1WV1UYoj+
         VzlDslLyn8EaxfkcN3Z/UXBRuucpH53RSiufI3FpVkK5Sb45Nxm90ot96q4JT1goKnlu
         EEH6KZB7Z2HQzpC2M5NJtkzBoMgb0t/7rkBJ4=
Received: by 10.43.49.69 with SMTP id uz5mr6980847icb.133.1301731194238;
        Sat, 02 Apr 2011 00:59:54 -0700 (PDT)
Received: from BITCOMPUTER ([211.68.2.10])
        by mx.google.com with ESMTPS id o3sm2032703ibd.61.2011.04.02.00.59.49
        (version=SSLv3 cipher=OTHER);
        Sat, 02 Apr 2011 00:59:52 -0700 (PDT)
Date: Sat, 2 Apr 2011 16:00:40 +0800
From: "=?gb2312?B?1KzO5CBbR01haWxd?=" <yuanwu.mail@gmail.com>
To: "Michael McCandless" <lucene@mikemccandless.com>
Cc: "java-user" <java-user@lucene.apache.org>
References: <201104011133527349770@gmail.com>,
 <AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>,
 <201104011826576408113@gmail.com>
Subject: Re: Re: Re: A likely bug of TermsPosition.nextPosition
Message-ID: <201104021600370460329@gmail.com>
Organization: =?gb2312?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon641641656781_====="

--=====003_Dragon641641656781_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

SGksIERlYXIgZXhwb3J0czoNCg0KVGhlIGJlbG93IGNhc2UgcnVucyBvazoNCg0KICAgICAgICBw
dWJsaWMgdm9pZCB0ZXN0KCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgICAgICAgICBJ
bmRleFNlYXJjaGVyIGlzID0gbnVsbDsNCiAgICAgICAgICAgICAgICBUZXJtUG9zaXRpb25zIHRw
ID0gbnVsbDsNCg0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICBpcyA9IEdlbmVyaWNTdG9yYWdlLmdldEluc3RhbmNlKCkuZ2V0U2VhcmNoZXIoKTsNCiAgICAg
ICAgICAgICAgICAgICAgICAgIHRwID0gaXMuZ2V0SW5kZXhSZWFkZXIoKS50ZXJtUG9zaXRpb25z
KG5ldyBUZXJtKEluZGV4Q29uZmlnLlRFWFRfRkVJTEQsICJcMSIpKTsNCiAgICAgICAgICAgICAg
ICAgICAgICAgIHdoaWxlICh0cC5uZXh0KCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3Ig
KGludCBpID0gMDsgaSA8IHRwLmZyZXEoKTsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB0cC5uZXh0UG9zaXRpb24oKTsNCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4odHAuZG9jKCkpOw0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7DQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0N
CiAgICAgICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICAg
ICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOw0KICAgICAgICAgICAgICAgIH0gZmluYWxs
eSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXMgIT0gbnVsbCkNCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaXMuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAg
IGlmICh0cCAhPSBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cC5jbG9z
ZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQp3aGlsZSB0aGUgYmVsb3cgb25l
IHRocm93cyBleGNlcHRpb246DQoNCiAgICAgICAgcHVibGljIHZvaWQgdGVzdCgpIHRocm93cyBJ
T0V4Y2VwdGlvbiB7DQogICAgICAgICAgICAgICAgSW5kZXhTZWFyY2hlciBpcyA9IG51bGw7DQog
ICAgICAgICAgICAgICAgVGVybVBvc2l0aW9ucyB0cCA9IG51bGw7DQoNCmludCBkb2MgPSAxMDQ0
Mjc4o7svL29yIG90aGVyIGJpZ2dlciBudW1iZXIuIA0KICAgICAgICAgICAgICAgIHRyeSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICBpcyA9IEdlbmVyaWNTdG9yYWdlLmdldEluc3RhbmNlKCku
Z2V0U2VhcmNoZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRwID0gaXMuZ2V0SW5kZXhS
ZWFkZXIoKS50ZXJtUG9zaXRpb25zKG5ldyBUZXJtKEluZGV4Q29uZmlnLlRFWFRfRkVJTEQsICJc
MSIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRwLnNraXBUbyhkb2MpKSB7DQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0cC5mcmVxKCk7IGkrKykgew0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHAubmV4dFBv
c2l0aW9uKCk7IC8vVGhyb3cgZXhjZXB0aW9ucw0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAo
SU9FeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFN5c3RlbS5vdXQucHJpbnRsbih0cC5kb2MoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
IH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJp
bnRTdGFja1RyYWNlKCk7DQogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIChpcyAhPSBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpcy5jbG9zZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRwICE9IG51bGwp
DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRwLmNsb3NlKCk7DQogICAgICAgICAg
ICAgICAgfQ0KICAgICAgICB9DQoNCg0KdGhhbmtzLg0KMjAxMS0wNC0wMiANCg0KDQoNCtSszuQg
W0dNYWlsXSANCg0KDQoNCreivP7Iy6O6IE1pY2hhZWwgTWNDYW5kbGVzcyANCreiy83Ksbzko7og
MjAxMS0wNC0wMiAgMDA6MTM6MzUgDQrK1bz+yMujuiDUrM7kIFtHTWFpbF0gDQqzrcvNo7ogamF2
YS11c2VyIA0K1vfM4qO6IFJlOiBSZTogQSBsaWtlbHkgYnVnIG9mIFRlcm1zUG9zaXRpb24ubmV4
dFBvc2l0aW9uIA0KIA0KSG1tIHNvIGl0J3Mgbm90IGluZGV4IGNvcnJ1cHRpb24uICBDdXJpb3Vz
Lg0KV2hpY2ggTHVjZW5lIHZlcnNpb24gYXJlIHlvdSB1c2luZz8gIExvb2tzIGxpa2UgaXQncyAy
LjksIGJ1dCBub3QNCjIuOS40PyAgQ2FuIHlvdSB0cnkgMi45LjQgYW5kIHNlZSBpZiB5b3Ugc3Rp
bGwgaGl0IHRoZSBwcm9ibGVtPw0KQ2FuIHlvdSBwb3N0IGEgc21hbGwgdGVzdCBjYXNlIHNob3dp
bmcgdGhlIHByb2JsZW0sIG9uIHlvdXIgaW5kZXg/DQpNaWtlDQpodHRwOi8vYmxvZy5taWtlbWNj
YW5kbGVzcy5jb20NCjIwMTEvNC8xINSszuQgW0dNYWlsXSA8eXVhbnd1Lm1haWxAZ21haWwuY29t
PjoNCj4gSGksIERlYXIgTWlrZToNCj4NCj4gYmVsb3dzIGxpc3QgdGhlIHJlcG9ydCBvZiBjaGVj
a0luZGV4LiBPUyBpcyBGZWRvcmEgTGludXguDQo+DQo+IFtvcmFjbGVAc2VydmVyIGJpbl0kIGph
dmEgLWNsYXNzcGF0aCAuLyBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5DaGVja0luZGV4IC9kYXRh
L0luZGV4L1VSTC9HZW5lcmljLyAtZml4DQo+DQo+IE5PVEU6IHRlc3Rpbmcgd2lsbCBiZSBtb3Jl
IHRob3JvdWdoIGlmIHlvdSBydW4gamF2YSB3aXRoICctZWE6b3JnLmFwYWNoZS5sdWNlbmUuLi4n
LCBzbyBhc3NlcnRpb25zIGFyZSBlbmFibGVkDQo+IE9wZW5pbmcgaW5kZXggQCAvR2VvR3JpZC9k
YXRhL0luZGV4L1VSTC9HZW5lcmljLw0KPiBTZWdtZW50cyBmaWxlPXNlZ21lbnRzX2F5dXAgbnVt
U2VnbWVudHM9MSB2ZXJzaW9uPUZPUk1BVF9ESUFHTk9TVElDUyBbTHVjZW5lIDIuOV0NCj4gICAx
IG9mIDE6IG5hbWU9X2J5bTAgZG9jQ291bnQ9MTM0NDI3OA0KPiAgICAgY29tcG91bmQ9ZmFsc2UN
Cj4gICAgIGhhc1Byb3g9dHJ1ZQ0KPiAgICAgbnVtRmlsZXM9MTENCj4gICAgIHNpemUgKE1CKT0x
NSw5NzkuNTkzDQo+ICAgICBkaWFnbm9zdGljcyA9IHtvcHRpbWl6ZT10cnVlLCBtZXJnZUZhY3Rv
cj0zLCBvcy52ZXJzaW9uPTIuNi4yNy40MS0xNzAuMi4xMTcuZmMxMC54ODZfNjQsIG9zPUxpbnV4
LCBtZXJnZURvY1N0b3Jlcz10cnVlLCBsdWNlbmUudmVyc2lvbj0zLjAtZGV2LCBzb3VyY2U9bWVy
Z2UsIG9zLmFyY2g9YW1kNjQsIGphdmEudmVyc2lvbj0xLjYuMF8yMSwgamF2YS52ZW5kb3I9U3Vu
IE1pY3Jvc3lzdGVtcyBJbmMufQ0KPiAgICAgbm8gZGVsZXRpb25zDQo+ICAgICB0ZXN0OiBvcGVu
IHJlYWRlci4uLi4uLi4uLk9LDQo+ICAgICB0ZXN0OiBmaWVsZHMuLi4uLi4uLi4uLi4uLk9LIFsx
MSBmaWVsZHNdDQo+ICAgICB0ZXN0OiBmaWVsZCBub3Jtcy4uLi4uLi4uLk9LIFsyIGZpZWxkc10N
Cj4gICAgIHRlc3Q6IHRlcm1zLCBmcmVxLCBwcm94Li4uDQo+IE9LIFsxMjYzNTAwIHRlcm1zOyA2
MDE3MTUwNzIgdGVybXMvZG9jcyBwYWlyczsgMTUxMzc4MDYzMSB0b2tlbnNdDQo+ICAgICB0ZXN0
OiBzdG9yZWQgZmllbGRzLi4uLi4uLk9LIFs4MDYzMTUxIHRvdGFsIGZpZWxkIGNvdW50OyBhdmcg
NS45OTggZmllbGRzIHBlciBkb2NdDQo+ICAgICB0ZXN0OiB0ZXJtIHZlY3RvcnMuLi4uLi4uLk9L
IFsxMzQ0Mjc4IHRvdGFsIHZlY3RvciBjb3VudDsgYXZnIDEgdGVybS9mcmVxIHZlY3RvciBmaWVs
ZHMgcGVyIGRvY10NCj4gTm8gcHJvYmxlbXMgd2VyZSBkZXRlY3RlZCB3aXRoIHRoaXMgaW5kZXgu
DQo+DQo+DQo+DQo+IDIwMTEtMDQtMDENCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18NCj4g1KzO5CBbR01haWxdDQo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQo+
ILeivP7Iy6O6IE1pY2hhZWwgTWNDYW5kbGVzcw0KPiC3osvNyrG85KO6IDIwMTEtMDQtMDEgIDE3
OjU4OjA4DQo+IMrVvP7Iy6O6IGphdmEtdXNlcg0KPiCzrcvNo7og1KzO5CBbR01haWxdDQo+INb3
zOKjuiBSZTogQSBsaWtlbHkgYnVnIG9mIFRlcm1zUG9zaXRpb24ubmV4dFBvc2l0aW9uDQo+IEht
bSB0aGlzIGNvdWxkIGJlIGZyb20gYSBjb3JydXB0ZWQgaW5kZXguDQo+IFdoYXQgdmVyc2lvbiBv
ZiBMdWNlbmU/ICBXaGF0IE9TL2ZpbGVzeXN0ZW0/DQo+IENhbiB5b3UgcnVuIENoZWNrSW5kZXgg
YW5kIHBvc3QgdGhlIG91dHB1dD8NCj4gTWlrZQ0KPiBodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVz
cy5jb20NCj4gMjAxMS8zLzMxINSszuQgW0dNYWlsXSA8eXVhbnd1Lm1haWxAZ21haWwuY29tPjoN
Cj4+IEhpLCBkZWFyIGV4cGVydHM6DQo+Pg0KPj4gV2hlbiBJbmRleFJlYWRlci50ZXJtc1Bvc2l0
aW9ucyBpcyB1c2VkIHRvIGFjY2VzcyBzcGVjaWZpYyB0ZXJtcywgdGhlIGNhbGwgdG8gVGVybXNQ
b3NpdGlvbi5uZXh0UG9zaXRpb24gc3VjY2VzcyBpZiBUZXJtc1Bvc2l0aW9uLm5leHQgaXMgdXNl
ZC4gQnV0IGlmIFRlcm1zUG9zaXRpb24uc2tpcFRvIGlzIHVzZWQgaW5zdGVhZCBvZiBUZXJtc1Bv
c2l0aW9uLm5leHQsIGEgamF2YS5sYW5nLklsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB3aWxsIGJl
IHRocm93biwgYXMgYmVsbG93cy4NCj4+DQo+PiAgamF2YS5sYW5nLklsbGVnYWxBcmd1bWVudEV4
Y2VwdGlvbjogTmVnYXRpdmUgcG9zaXRpb24NCj4+ICAgIGF0IHN1bi5uaW8uY2guRmlsZUNoYW5u
ZWxJbXBsLnJlYWQoRmlsZUNoYW5uZWxJbXBsLmphdmE6NjEwKQ0KPj4gICAgYXQgb3JnLmFwYWNo
ZS5sdWNlbmUuc3RvcmUuTklPRlNEaXJlY3RvcnkkTklPRlNJbmRleElucHV0LnJlYWRJbnRlcm5h
bChOSU9GU0RpcmVjdG9yeS5qYXZhOjE2MSkNCj4+ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0
b3JlLkJ1ZmZlcmVkSW5kZXhJbnB1dC5yZWZpbGwoQnVmZmVyZWRJbmRleElucHV0LmphdmE6MjEz
KQ0KPj4gICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuQnVmZmVyZWRJbmRleElucHV0LnJl
YWRCeXRlKEJ1ZmZlcmVkSW5kZXhJbnB1dC5qYXZhOjM5KQ0KPj4gICAgYXQgb3JnLmFwYWNoZS5s
dWNlbmUuc3RvcmUuSW5kZXhJbnB1dC5yZWFkVkludChJbmRleElucHV0LmphdmE6OTIpDQo+PiAg
ICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5CdWZmZXJlZEluZGV4SW5wdXQucmVhZFZJbnQo
QnVmZmVyZWRJbmRleElucHV0LmphdmE6MTgxKQ0KPj4gICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUu
aW5kZXguU2VnbWVudFRlcm1Qb3NpdGlvbnMucmVhZERlbHRhUG9zaXRpb24oU2VnbWVudFRlcm1Q
b3NpdGlvbnMuamF2YTo3NSkNCj4+ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LlNlZ21l
bnRUZXJtUG9zaXRpb25zLnNraXBQb3NpdGlvbnMoU2VnbWVudFRlcm1Qb3NpdGlvbnMuamF2YTox
MzApDQo+PiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TZWdtZW50VGVybVBvc2l0aW9u
cy5sYXp5U2tpcChTZWdtZW50VGVybVBvc2l0aW9ucy5qYXZhOjE2OCkNCj4+ICAgIGF0IG9yZy5h
cGFjaGUubHVjZW5lLmluZGV4LlNlZ21lbnRUZXJtUG9zaXRpb25zLm5leHRQb3NpdGlvbihTZWdt
ZW50VGVybVBvc2l0aW9ucy5qYXZhOjY5KQ0KPj4NCj4+IEluIG15IGZ1cnRoZXIgc3R1ZHksIEkg
Zm91bmQgdGhhdCBpZiBkb2NpZCBleGVjZWVkIDEwNDQyNzgsIHRoZSBleGNlcHRpb24gb2NjdXJz
IGV2ZXJ5dGltZSwgZm9yIHRoZSBzbWFsbCBvbmVzLCAgdGhlIGV4Y2VwdGlvbiBuZXZlciBvY2N1
ci4gQlRXLCB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyBpcyBhYm91dCAxMzQ0Mjc4LCBh
bmQgYXJlIG5ldmVyIGRlbGV0ZWQuDQo+Pg0KPj4gVGhhbmtzLg0KPj4NCj4+IDIwMTEtMDQtMDEN
Cj4+DQo+Pg0KPj4NCj4+IFl1YW4gV3UgW0dNYWlsXQ0KPj4NCg==

--=====003_Dragon641641656781_=====--


From java-user-return-49272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 08:07:25 2011
Return-Path: <java-user-return-49272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63626 invoked from network); 2 Apr 2011 08:07:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 08:07:25 -0000
Received: (qmail 21805 invoked by uid 500); 2 Apr 2011 08:07:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21770 invoked by uid 500); 2 Apr 2011 08:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21762 invoked by uid 99); 2 Apr 2011 08:07:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 08:07:21 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yuanwu.mail@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 08:07:13 +0000
Received: by iym1 with SMTP id 1so6291789iym.35
        for <java-user@lucene.apache.org>; Sat, 02 Apr 2011 01:06:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:cc:references:subject:message-id
         :organization:x-mailer:mime-version:content-type;
        bh=qj4biaIWh8jOSu+D7eELebDEiJHusjbW2uYF1WwqyLs=;
        b=rnnCcv7N5LeAYwf6SUd0kO4Y1au+sQ15lfaLfdAm4LSUDrmtvO+Xke/18FRAy6HUIT
         3fUFkSRM//UH0NFAm6pgyKgL3JiCLpzxPW/1ttyrbrvk/qoKlz1wG9IADs2dM6OD2Rz4
         DAvU6O9m6Caib6DgbKLERqBQYzBRyvr7ZvmN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:cc:references:subject:message-id:organization:x-mailer
         :mime-version:content-type;
        b=S0T+2UbyqVO7VuIMRWvkvBFXtDS0omZ1cI2uzHGMrk3BiCKWCqs8EDPw2LaTDTrxwD
         LzRSqF9GfiErXzKoPtZLBeRpe7NVwzWIQuZhbxh4ttYXzxg8l/TGFs6nc50m66a7xwmr
         PGWfiuMpgvABAUhqYRiJnI1veXrYKvLFkVrGw=
Received: by 10.42.219.2 with SMTP id hs2mr2826156icb.324.1301731611698;
        Sat, 02 Apr 2011 01:06:51 -0700 (PDT)
Received: from BITCOMPUTER ([211.68.2.10])
        by mx.google.com with ESMTPS id 13sm2038443ibo.25.2011.04.02.01.06.35
        (version=SSLv3 cipher=OTHER);
        Sat, 02 Apr 2011 01:06:50 -0700 (PDT)
Date: Sat, 2 Apr 2011 16:07:27 +0800
From: "=?gb2312?B?1KzO5CBbR01haWxd?=" <yuanwu.mail@gmail.com>
To: "Michael McCandless" <lucene@mikemccandless.com>
Cc: "java-user" <java-user@lucene.apache.org>
References: <201104011133527349770@gmail.com>,
 <AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>,
 <201104011826576408113@gmail.com>,
 <AANLkTi=iEb=-BAyHpmigNi1q7NOmmi46Cw3S9iR53ot6@mail.gmail.com>
Subject: Re: Re: Re: A likely bug of TermsPosition.nextPosition
Message-ID: <201104021607211569827@gmail.com>
Organization: =?gb2312?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon678841554608_====="
X-Virus-Checked: Checked by ClamAV on apache.org

--=====003_Dragon678841554608_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

RGVhciBNaWtlOg0KDQpUaGUgaW5kZXggd2FzIGNvbnN0cnVjdGVkIHVzaW5nIEx1Y2VuZSAyLjku
IEFmdGVyIHRoZSBwcm9ibGVtIG9jY3VyZWQsIEkgc3dpdGNoZWQgdG8gcmVjZW50bHkgcmVsZWFz
ZSAgTHVjZW5lIDMuMSwgbGVhdmluZyB0aGUgaW5kZXggdW50b3VjaGVkLiAgDQoNClRoYW5rcyB0
byB5b3VyIGhlbHANCg0KMjAxMS0wNC0wMiANCg0KDQoNCtSszuQgW0dNYWlsXSANCg0KDQoNCrei
vP7Iy6O6IE1pY2hhZWwgTWNDYW5kbGVzcyANCreiy83Ksbzko7ogMjAxMS0wNC0wMiAgMDA6MTM6
MzUgDQrK1bz+yMujuiDUrM7kIFtHTWFpbF0gDQqzrcvNo7ogamF2YS11c2VyIA0K1vfM4qO6IFJl
OiBSZTogQSBsaWtlbHkgYnVnIG9mIFRlcm1zUG9zaXRpb24ubmV4dFBvc2l0aW9uIA0KIA0KSG1t
IHNvIGl0J3Mgbm90IGluZGV4IGNvcnJ1cHRpb24uICBDdXJpb3VzLg0KV2hpY2ggTHVjZW5lIHZl
cnNpb24gYXJlIHlvdSB1c2luZz8gIExvb2tzIGxpa2UgaXQncyAyLjksIGJ1dCBub3QNCjIuOS40
PyAgQ2FuIHlvdSB0cnkgMi45LjQgYW5kIHNlZSBpZiB5b3Ugc3RpbGwgaGl0IHRoZSBwcm9ibGVt
Pw0KQ2FuIHlvdSBwb3N0IGEgc21hbGwgdGVzdCBjYXNlIHNob3dpbmcgdGhlIHByb2JsZW0sIG9u
IHlvdXIgaW5kZXg/DQpNaWtlDQpodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVzcy5jb20NCjIwMTEv
NC8xINSszuQgW0dNYWlsXSA8eXVhbnd1Lm1haWxAZ21haWwuY29tPjoNCj4gSGksIERlYXIgTWlr
ZToNCj4NCj4gYmVsb3dzIGxpc3QgdGhlIHJlcG9ydCBvZiBjaGVja0luZGV4LiBPUyBpcyBGZWRv
cmEgTGludXguDQo+DQo+IFtvcmFjbGVAc2VydmVyIGJpbl0kIGphdmEgLWNsYXNzcGF0aCAuLyBv
cmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5DaGVja0luZGV4IC9kYXRhL0luZGV4L1VSTC9HZW5lcmlj
LyAtZml4DQo+DQo+IE5PVEU6IHRlc3Rpbmcgd2lsbCBiZSBtb3JlIHRob3JvdWdoIGlmIHlvdSBy
dW4gamF2YSB3aXRoICctZWE6b3JnLmFwYWNoZS5sdWNlbmUuLi4nLCBzbyBhc3NlcnRpb25zIGFy
ZSBlbmFibGVkDQo+IE9wZW5pbmcgaW5kZXggQCAvR2VvR3JpZC9kYXRhL0luZGV4L1VSTC9HZW5l
cmljLw0KPiBTZWdtZW50cyBmaWxlPXNlZ21lbnRzX2F5dXAgbnVtU2VnbWVudHM9MSB2ZXJzaW9u
PUZPUk1BVF9ESUFHTk9TVElDUyBbTHVjZW5lIDIuOV0NCj4gICAxIG9mIDE6IG5hbWU9X2J5bTAg
ZG9jQ291bnQ9MTM0NDI3OA0KPiAgICAgY29tcG91bmQ9ZmFsc2UNCj4gICAgIGhhc1Byb3g9dHJ1
ZQ0KPiAgICAgbnVtRmlsZXM9MTENCj4gICAgIHNpemUgKE1CKT0xNSw5NzkuNTkzDQo+ICAgICBk
aWFnbm9zdGljcyA9IHtvcHRpbWl6ZT10cnVlLCBtZXJnZUZhY3Rvcj0zLCBvcy52ZXJzaW9uPTIu
Ni4yNy40MS0xNzAuMi4xMTcuZmMxMC54ODZfNjQsIG9zPUxpbnV4LCBtZXJnZURvY1N0b3Jlcz10
cnVlLCBsdWNlbmUudmVyc2lvbj0zLjAtZGV2LCBzb3VyY2U9bWVyZ2UsIG9zLmFyY2g9YW1kNjQs
IGphdmEudmVyc2lvbj0xLjYuMF8yMSwgamF2YS52ZW5kb3I9U3VuIE1pY3Jvc3lzdGVtcyBJbmMu
fQ0KPiAgICAgbm8gZGVsZXRpb25zDQo+ICAgICB0ZXN0OiBvcGVuIHJlYWRlci4uLi4uLi4uLk9L
DQo+ICAgICB0ZXN0OiBmaWVsZHMuLi4uLi4uLi4uLi4uLk9LIFsxMSBmaWVsZHNdDQo+ICAgICB0
ZXN0OiBmaWVsZCBub3Jtcy4uLi4uLi4uLk9LIFsyIGZpZWxkc10NCj4gICAgIHRlc3Q6IHRlcm1z
LCBmcmVxLCBwcm94Li4uDQo+IE9LIFsxMjYzNTAwIHRlcm1zOyA2MDE3MTUwNzIgdGVybXMvZG9j
cyBwYWlyczsgMTUxMzc4MDYzMSB0b2tlbnNdDQo+ICAgICB0ZXN0OiBzdG9yZWQgZmllbGRzLi4u
Li4uLk9LIFs4MDYzMTUxIHRvdGFsIGZpZWxkIGNvdW50OyBhdmcgNS45OTggZmllbGRzIHBlciBk
b2NdDQo+ICAgICB0ZXN0OiB0ZXJtIHZlY3RvcnMuLi4uLi4uLk9LIFsxMzQ0Mjc4IHRvdGFsIHZl
Y3RvciBjb3VudDsgYXZnIDEgdGVybS9mcmVxIHZlY3RvciBmaWVsZHMgcGVyIGRvY10NCj4gTm8g
cHJvYmxlbXMgd2VyZSBkZXRlY3RlZCB3aXRoIHRoaXMgaW5kZXguDQo+DQo+DQo+DQo+IDIwMTEt
MDQtMDENCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCj4g1KzO5CBbR01haWxd
DQo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQo+ILeivP7Iy6O6IE1pY2hhZWwg
TWNDYW5kbGVzcw0KPiC3osvNyrG85KO6IDIwMTEtMDQtMDEgIDE3OjU4OjA4DQo+IMrVvP7Iy6O6
IGphdmEtdXNlcg0KPiCzrcvNo7og1KzO5CBbR01haWxdDQo+INb3zOKjuiBSZTogQSBsaWtlbHkg
YnVnIG9mIFRlcm1zUG9zaXRpb24ubmV4dFBvc2l0aW9uDQo+IEhtbSB0aGlzIGNvdWxkIGJlIGZy
b20gYSBjb3JydXB0ZWQgaW5kZXguDQo+IFdoYXQgdmVyc2lvbiBvZiBMdWNlbmU/ICBXaGF0IE9T
L2ZpbGVzeXN0ZW0/DQo+IENhbiB5b3UgcnVuIENoZWNrSW5kZXggYW5kIHBvc3QgdGhlIG91dHB1
dD8NCj4gTWlrZQ0KPiBodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVzcy5jb20NCj4gMjAxMS8zLzMx
INSszuQgW0dNYWlsXSA8eXVhbnd1Lm1haWxAZ21haWwuY29tPjoNCj4+IEhpLCBkZWFyIGV4cGVy
dHM6DQo+Pg0KPj4gV2hlbiBJbmRleFJlYWRlci50ZXJtc1Bvc2l0aW9ucyBpcyB1c2VkIHRvIGFj
Y2VzcyBzcGVjaWZpYyB0ZXJtcywgdGhlIGNhbGwgdG8gVGVybXNQb3NpdGlvbi5uZXh0UG9zaXRp
b24gc3VjY2VzcyBpZiBUZXJtc1Bvc2l0aW9uLm5leHQgaXMgdXNlZC4gQnV0IGlmIFRlcm1zUG9z
aXRpb24uc2tpcFRvIGlzIHVzZWQgaW5zdGVhZCBvZiBUZXJtc1Bvc2l0aW9uLm5leHQsIGEgamF2
YS5sYW5nLklsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB3aWxsIGJlIHRocm93biwgYXMgYmVsbG93
cy4NCj4+DQo+PiAgamF2YS5sYW5nLklsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjogTmVnYXRpdmUg
cG9zaXRpb24NCj4+ICAgIGF0IHN1bi5uaW8uY2guRmlsZUNoYW5uZWxJbXBsLnJlYWQoRmlsZUNo
YW5uZWxJbXBsLmphdmE6NjEwKQ0KPj4gICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuTklP
RlNEaXJlY3RvcnkkTklPRlNJbmRleElucHV0LnJlYWRJbnRlcm5hbChOSU9GU0RpcmVjdG9yeS5q
YXZhOjE2MSkNCj4+ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkJ1ZmZlcmVkSW5kZXhJ
bnB1dC5yZWZpbGwoQnVmZmVyZWRJbmRleElucHV0LmphdmE6MjEzKQ0KPj4gICAgYXQgb3JnLmFw
YWNoZS5sdWNlbmUuc3RvcmUuQnVmZmVyZWRJbmRleElucHV0LnJlYWRCeXRlKEJ1ZmZlcmVkSW5k
ZXhJbnB1dC5qYXZhOjM5KQ0KPj4gICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuSW5kZXhJ
bnB1dC5yZWFkVkludChJbmRleElucHV0LmphdmE6OTIpDQo+PiAgICBhdCBvcmcuYXBhY2hlLmx1
Y2VuZS5zdG9yZS5CdWZmZXJlZEluZGV4SW5wdXQucmVhZFZJbnQoQnVmZmVyZWRJbmRleElucHV0
LmphdmE6MTgxKQ0KPj4gICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguU2VnbWVudFRlcm1Q
b3NpdGlvbnMucmVhZERlbHRhUG9zaXRpb24oU2VnbWVudFRlcm1Qb3NpdGlvbnMuamF2YTo3NSkN
Cj4+ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LlNlZ21lbnRUZXJtUG9zaXRpb25zLnNr
aXBQb3NpdGlvbnMoU2VnbWVudFRlcm1Qb3NpdGlvbnMuamF2YToxMzApDQo+PiAgICBhdCBvcmcu
YXBhY2hlLmx1Y2VuZS5pbmRleC5TZWdtZW50VGVybVBvc2l0aW9ucy5sYXp5U2tpcChTZWdtZW50
VGVybVBvc2l0aW9ucy5qYXZhOjE2OCkNCj4+ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4
LlNlZ21lbnRUZXJtUG9zaXRpb25zLm5leHRQb3NpdGlvbihTZWdtZW50VGVybVBvc2l0aW9ucy5q
YXZhOjY5KQ0KPj4NCj4+IEluIG15IGZ1cnRoZXIgc3R1ZHksIEkgZm91bmQgdGhhdCBpZiBkb2Np
ZCBleGVjZWVkIDEwNDQyNzgsIHRoZSBleGNlcHRpb24gb2NjdXJzIGV2ZXJ5dGltZSwgZm9yIHRo
ZSBzbWFsbCBvbmVzLCAgdGhlIGV4Y2VwdGlvbiBuZXZlciBvY2N1ci4gQlRXLCB0aGUgdG90YWwg
bnVtYmVyIG9mIGRvY3VtZW50cyBpcyBhYm91dCAxMzQ0Mjc4LCBhbmQgYXJlIG5ldmVyIGRlbGV0
ZWQuDQo+Pg0KPj4gVGhhbmtzLg0KPj4NCj4+IDIwMTEtMDQtMDENCj4+DQo+Pg0KPj4NCj4+IFl1
YW4gV3UgW0dNYWlsXQ0KPj4NCg==

--=====003_Dragon678841554608_=====--


From java-user-return-49273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 08:10:55 2011
Return-Path: <java-user-return-49273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64243 invoked from network); 2 Apr 2011 08:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 08:10:55 -0000
Received: (qmail 23984 invoked by uid 500); 2 Apr 2011 08:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23941 invoked by uid 500); 2 Apr 2011 08:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23933 invoked by uid 99); 2 Apr 2011 08:10:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 08:10:52 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lty419@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 08:10:46 +0000
Received: by wyb40 with SMTP id 40so5448836wyb.35
        for <java-user@lucene.apache.org>; Sat, 02 Apr 2011 01:10:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=cNSIKbh2AkN+8tNzWp+4+1o4hdIPZ8SNFin009lrXZk=;
        b=G6vPE1RV/Bw3zpJaySmUmBKqcRJhZyxVti2cva3HhkOHIFi4DJAhTMSwQ4+2FNLtDH
         tx7w3WWV770JrdwYf3ST3AXkmMFLO/9gRct4TwphQ4gUfnelhYOAyjKE+tdfsifLOKr3
         EX+IMfdnD2PmN/Jy/FVe0IcJCfqYk1miHjVXs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=JxqHQk7x83yeiVeUiTN0D92/ntInbHDBJrCTlaO1Vz6+RU+vlYYoOjl14WDGCo4Yk1
         UBxdeV7QnaS9KxkG4qU1ZtVhQJJSoG1RDSYnkM7zKFsIvsX1+Im1luNaerv6kOgSPXwh
         ZSGxM8mcXOBQrAIM/bV6X4QOtbkmFNqRTEYRE=
MIME-Version: 1.0
Received: by 10.227.139.143 with SMTP id e15mr627413wbu.5.1301731824788; Sat,
 02 Apr 2011 01:10:24 -0700 (PDT)
Received: by 10.227.136.68 with HTTP; Sat, 2 Apr 2011 01:10:24 -0700 (PDT)
Date: Sat, 2 Apr 2011 01:10:24 -0700
Message-ID: <BANLkTimZfGQ2dxjS4XvyMgPVREBNCmdwuw@mail.gmail.com>
Subject: Problem when using getSpans for SpanRegexQuery
From: Tianyu Li <lty419@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6db5c0b0266e5049feb0f63

--0016e6db5c0b0266e5049feb0f63
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I was trying to use SpanRegexQuery in Lucene 3.03 to find terms that match
regular expression. The reason I use SpanRegexQuery instead of RegexQuery is

because I want to get all matches of the regular expression (if there are
multiple ones in a document), not just documents containing these matches.
However when I call the getSpans()
method, I get this exception:
Exception in thread "main" java.lang.
UnsupportedOperationException: Query should have been rewritten

This is the code I used:
 SpanRegexQuery test = new SpanRegexQuery(new Term("tags", "such/.*"));
 Spans spans = test.getSpans(reader);

I switched to Lucene 3.1 in the hope of fixing this "bug", where
SpanRegexQuery is deprecated and replaced by
RegexQuery reg = new RegexQuery(new Term("tags", "such/.*"));
SpanQuery test = new SpanMultiTermQueryWrapper<RegexQuery>(reg);
Spans spans = test.getSpans(reader);

The same exception is thrown again.

I am not sure if it is a bug? How to solve this problem ? Any idea?
The getSpans() works well for other span queries.....

Best,
Tianyu

--0016e6db5c0b0266e5049feb0f63--

From java-user-return-49274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 08:22:36 2011
Return-Path: <java-user-return-49274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92752 invoked from network); 2 Apr 2011 08:22:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 08:22:36 -0000
Received: (qmail 31502 invoked by uid 500); 2 Apr 2011 08:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31282 invoked by uid 500); 2 Apr 2011 08:21:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31267 invoked by uid 99); 2 Apr 2011 08:21:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 08:21:49 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yuanwu.mail@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 08:21:39 +0000
Received: by iwr19 with SMTP id 19so6086007iwr.35
        for <java-user@lucene.apache.org>; Sat, 02 Apr 2011 01:21:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:cc:references:subject:message-id
         :organization:x-mailer:mime-version:content-type;
        bh=xbGckIpm5jgLCQL82AmfnvwPbVGbUN3jFaaRlNTtYfU=;
        b=nkp8YV7bs5/kWpuN0JqYagEvxuxjOWB6UUkukkCBSB3V1UdflGbOBWVSowXsA/imaO
         aE1F5ej8n/msQc7yg23tP7m5xhG03539kCtmQh1pDUvLIufuBuSOfgq5JvKoN+QJs6jI
         OJOujSuEKaOuRw9A+QSy6tvsz6nA0pqV5lFCs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:cc:references:subject:message-id:organization:x-mailer
         :mime-version:content-type;
        b=yCA0+6abB/KY+NYuoNUg2vRgFMXgBHEnkxJMWG+PqCKD7WWLGm9Xd7tucviKfyUg+X
         /g3wjII77Qn+fw4kXGd65icHy11mZYCoavTODC4DPfFOSPCQiPhGd40ZHTxi4bM0nTsv
         7KV7Eun8X4izIRQ55p6OJkmSQv7+0uF7aT3bg=
Received: by 10.42.157.6 with SMTP id b6mr261677icx.522.1301732478446;
        Sat, 02 Apr 2011 01:21:18 -0700 (PDT)
Received: from BITCOMPUTER ([211.68.2.10])
        by mx.google.com with ESMTPS id i3sm2046146iby.23.2011.04.02.01.21.15
        (version=SSLv3 cipher=OTHER);
        Sat, 02 Apr 2011 01:21:17 -0700 (PDT)
Date: Sat, 2 Apr 2011 16:22:13 +0800
From: "=?utf-8?B?6KKB5q2mIFtHTWFpbF0=?=" <yuanwu.mail@gmail.com>
To: "=?utf-8?B?ZXJpY2tlcmlja3Nvbg==?=" <erickerickson@gmail.com>
Cc: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
References: <201104011228472348800@gmail.com>
Subject: =?utf-8?B?UmU6IFJlOiBIb3cgdG8gZG8gTXVsdGlwbGUtQ2x1c3RlciBRdWVyeT8=?=
Message-ID: <201104021622107655322@gmail.com>
Organization: =?utf-8?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon542210541238_====="
X-Virus-Checked: Checked by ClamAV on apache.org

--=====003_Dragon542210541238_=====
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

RGVhciBFcmlja3NvbjoNCg0KVGhhbmtzIHRvIHlvdXIgcmVwbHkuDQoNCkJ1dCBpZiBhLGIsIGMg
YXJlIG51bWVyaWMsICBob3cgY2FuIGkgcnVuIHJhbmdlIHF1ZXJ5PyBBbmQgaWYgY2FuICxob3cg
YWJvdXQgdGhlIHBlcmZvcm1hbmNlPw0KDQpUaGFua3MgaW4gYWR2YW5jZS4NCg0KMjAxMS0wNC0w
MiANCg0KDQoNCuiigeatpiBbR01haWxdIA0KDQoNCg0K5Y+R5Lu25Lq677yaIEVyaWNrIEVyaWNr
c29uIA0K5Y+R6YCB5pe26Ze077yaIDIwMTEtMDQtMDIgIDAyOjE2OjU1IA0K5pS25Lu25Lq677ya
IGphdmEtdXNlciANCuaKhOmAge+8miANCuS4u+mimO+8miBSZTogSG93IHRvIGRvIE11bHRpcGxl
LUNsdXN0ZXIgUXVlcnk/IA0KIA0KWW91IG1pZ2h0IGNvbnNpZGVyIGEgbXVsdGlWYWx1ZWQgZmll
bGQgYW5kIGEgcG9zaXRpb25JbmNyZW1lbnRHYXAgbG9uZ2VyDQp0aGFuIHRoZSBsb25nZXN0IDxh
LCBiLCBjPiB0dXBsZS4NCkF0IHRoYXQgcG9pbnQsIHlvdSBjYW4gc2VhcmNoIGZvciBwaHJhc2Ug
cXVlcmllcyB3aGVyZSB0aGUgc2xvcCBpcyBsZXNzIHRoYW4NCnRoZSBwb3NpdGlvbkluY3JlbWVu
dEdhcC4NCkknbSBhIGJpdCBydXNoZWQsIHNvIGlmIHlvdSBuZWVkIG1vcmUgZGV0YWlscyB3ZSBj
YW4gdGFsayBsYXRlci4uLi4NCkJlc3QNCkVyaWNrDQoyMDExLzQvMSDoooHmraYgW0dNYWlsXSA8
eXVhbnd1Lm1haWxAZ21haWwuY29tPg0KPiBIaSwgZGVhciBleHBlcnRzOg0KPg0KPiBBc3N1bWUg
dGhhdCBhIHR1cGxlIGlzIGNvbXBvc2VkIG9mIDw8QTEsIEIxLCBDMT4sPEEyLEIyLEMyPiwuLi4s
PEFOLEJOLENOPiwNCj4gVmFsdWU+Lg0KPiBJRiBBSyBpcyBzdG9yZWQgaW4gRmllbGQgQSwgQksg
aXMgc3RvcmVkIGluIEZpZWxkIEIsIENLIGlzIHN0b3JlZCBpbiBGaWVsZA0KPiBDICgxPD1LPD1O
KSwgc28gdGhlcmUgYXJlIE4gQSBmaWVsZHMsTiBCIGZpZWxkcyBhbmQgTiBDIGZpZWxkcy4NCj4g
VGhlIHF1ZXN0aW9uIGlzIGlmIEkgd2FudCB0byBxdWVyeSB3aGl0aCB0aGUgY29uZGl0aW9uIG9m
IDxhLGIsYz4sIGhvdyBjYW4NCj4gaSBnZXQgdGhlIGV4YWN0IHZhbHVlIGNvcnJlc3BvZGluZyB0
byA8YSxiLGM+Lg0KPg0KPiBsb25naW5nIGZvciB5b3VyIGhlbHBzDQo+DQo+DQo+IFRoYW5rcyBp
biBhZHZhbmNlLg0KPg0KPiAyMDExLTA0LTAxDQo+DQo+DQo+DQo+IFl1YW4gV3UgW0dNYWlsXQ0K
Pg0K

--=====003_Dragon542210541238_=====--


From java-user-return-49275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 11:30:32 2011
Return-Path: <java-user-return-49275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80569 invoked from network); 2 Apr 2011 11:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 11:30:31 -0000
Received: (qmail 18812 invoked by uid 500); 2 Apr 2011 11:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18772 invoked by uid 500); 2 Apr 2011 11:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18764 invoked by uid 99); 2 Apr 2011 11:30:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 11:30:29 +0000
X-ASF-Spam-Status: No, hits=4.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FROM_EXCESS_BASE64,HTML_MESSAGE,HTML_NONELEMENT_30_40,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of 290131755@qq.com designates 64.71.138.43 as permitted sender)
Received: from [64.71.138.43] (HELO smtpbg52.qq.com) (64.71.138.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 02 Apr 2011 11:30:23 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=qq.com; s=s0907;
	t=1301743791; bh=8IhKV7fop1J/t4o5qVv/9KpMhRjc6+RcOQjFOn/RLk4=;
	h=X-QQ-SSF:X-QQ-BUSINESS-ORIGIN:X-Originating-IP:X-QQ-STYLE:
	 X-QQ-mid:From:To:Subject:Mime-Version:Content-Type:
	 Content-Transfer-Encoding:Date:X-Priority:Message-ID:X-QQ-MIME:
	 X-Mailer:X-QQ-Mailer:X-QQ-ReplyHash;
	b=QW7ZGvrZUxn0lSKliyMOEHxYxZ9p3jBomXPU8FnN8pN5iTgRMmTPz6o70Fx3Hs7WC
	 aKYrNkCfcRtMJZvElak/Y3GSxhvRiU9W4K4J20lTZtlcfBMR0OQftu08+0otdDX
X-QQ-SSF:00000000000000F0
X-QQ-BUSINESS-ORIGIN:2
X-Originating-IP: 124.64.9.8
X-QQ-STYLE:
X-QQ-mid:webmail621t1301743789t3440853
From: "=?ISO-8859-1?B?Q2VzY2t5?=" <290131755@qq.com>
To: "=?ISO-8859-1?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: Re:RE: About the lucene sort
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_4D9708AD_DF500110_4DE1A437"
Content-Transfer-Encoding: 8Bit
Date: Sat, 2 Apr 2011 19:29:49 +0800
X-Priority: 3
Message-ID: <tencent_6F0C20325E80B0FD69589A73@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-QQ-ReplyHash: 1589704560

------=_NextPart_4D9708AD_DF500110_4DE1A437
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64

SGksDQoNCg0KWWVzLCBJIHByaW50IHRoZSBxdWVyeS50b1N0cmluZygpLCBpdCBpcyBDb25z
dGFudFNjb3JlLg0KDQoNCldoaWNoIG1ldGhvZCBzaG91bGQgSSB1c2UgdG8gY2hhbmdlIGl0
PyBBbmQgSG93IHRvIG1vZGlmeSBpdCB0byBtYWtlIGl0IHNvcnQgYnkgcmVsZXZhbmNlIG5v
dCB0aGUgY29uc3RhbnQgc2NvcmUocmVhZGluZyBmaWxlIG9yZGVyKT8gQW55IGV4YW1wbGU/
DQogDQogDQotLS0tLS0tLS0tLS0tLS0tLS0gT3JpZ2luYWwgLS0tLS0tLS0tLS0tLS0tLS0t
DQpGcm9tOiAgIkNhcmwgQXVzdGluIjxDYXJsLmF1c3RpbkBkZXRpY2EuY29tPjsNCkRhdGU6
ICBTYXQsIEFwciAyLCAyMDExIDAwOjIyIEFNDQpUbzogICJqYXZhLXVzZXIiPGphdmEtdXNl
ckBsdWNlbmUuYXBhY2hlLm9yZz47IA0KDQpTdWJqZWN0OiAgUkU6IEFib3V0IHRoZSBsdWNl
bmUgc29ydA0KDQogDQogRG9uJ3QgcHJlZml4IHF1ZXJpZXMgZ2V0IHJld3JpdHRlbiB3cmFw
cGVkIGluIENvbnN0YW50U2NvcmVRdWVyeSwNCm1lYW5pbmcgYWxsIHdpbGwgZ2V0IHRoZSBz
YW1lIHNjb3JlIGFuZCB5b3UgZ2V0IHRoZW0gaW4gcmVhZCBvcmRlcj8NCkNoZWNraW5nIHRo
ZSBBUEksIFByZWZpeFF1ZXJ5IHVzZXMNCk11bHRpVGVybVF1ZXJ5LkNPTlNUQU5UX1NDT1JF
X0FVVE9fUkVXUklURV9ERUZBVUxULCB3aGljaCBjYW4gYmUgY2hhbmdlZA0Kd2l0aCBzZXRS
ZXdyaXRlTWV0aG9kLiANCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IElh
biBMZWEgW21haWx0bzppYW4ubGVhQGdtYWlsLmNvbV0gDQpTZW50OiAwMSBBcHJpbCAyMDEx
IDE1OjU1DQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBSZTog
QWJvdXQgdGhlIGx1Y2VuZSBzb3J0DQoNClByb2JhYmx5IGEgYnVnIGluIHlvdXIgY29kZS4N
Cg0KSWYgeW91IHBvc3QgYWdhaW4gd2l0aCwgYXMgYSBtaW5pbXVtLCB0aGUgdmVyc2lvbiBv
ZiBsdWNlbmUgdGhhdCB5b3UgYXJlDQp1c2luZyBhbmQgeW91ciBzZWFyY2gvc29ydCBjb2Rl
LCB5b3UgbWlnaHQgZ2V0IGEgYmV0dGVyIGFuc3dlci4NCkJlc3Qgb2YgYWxsIHdvdWxkIGJl
IGEgY29tcGxldGUgc2VsZi1jb250YWluZWQgc3RhbmRhbG9uZSBwcm9ncmFtIG9yDQp0ZXN0
IGNhc2UgdGhhdCBkZW1vbnN0cmF0ZXMgdGhlIHByb2JsZW0uDQoNCg0KLS0NCklhbi4NCg0K
DQpPbiBGcmksIEFwciAxLCAyMDExIGF0IDM6MTUgUE0sIENlc2NreSA8ZWUwN2IzODFAZ21h
aWwuY29tPiB3cm90ZToNCj4gSGksDQo+DQo+DQo+IEkga25vdyB0aGUgZGVmYXVsdCBpcyBz
b3J0IGJ5IHJlbGV2YW5jZS4gV2hpbGUsIHdoZW4gaSBzZWFyY2ggdGhlDQpwcmVmaXggKGlu
dGVyZmFjZSopLCBpdCBkb2VzIG5vdCB3b3JrLiBJdCBjYW4gb25seSBzb3J0IHRoZSBkb2N1
bWVudCBieQ0KdGhlIG9yZGVyIG9mIHJlYWRpbmcgZmlsZXMuDQo+DQo+DQo+IFdoYXQgaXMg
dGhlIHByb2JsZW0/Pz8NCj4NCj4NCj4gVGh4Lg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hl
Lm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmcNCg0KUGxlYXNlIGNvbnNpZGVyIHRoZSBlbnZpcm9ubWVudCBi
ZWZvcmUgcHJpbnRpbmcgdGhpcyBlbWFpbC4NCg0KVGhpcyBtZXNzYWdlIHNob3VsZCBiZSBy
ZWdhcmRlZCBhcyBjb25maWRlbnRpYWwuIElmIHlvdSBoYXZlIHJlY2VpdmVkIHRoaXMgZW1h
aWwgaW4gZXJyb3IgcGxlYXNlIG5vdGlmeSB0aGUgc2VuZGVyIGFuZCBkZXN0cm95IGl0IGlt
bWVkaWF0ZWx5Lg0KU3RhdGVtZW50cyBvZiBpbnRlbnQgc2hhbGwgb25seSBiZWNvbWUgYmlu
ZGluZyB3aGVuIGNvbmZpcm1lZCBpbiBoYXJkIGNvcHkgYnkgYW4gYXV0aG9yaXNlZCBzaWdu
YXRvcnkuICBUaGUgY29udGVudHMgb2YgdGhpcyBlbWFpbCBtYXkgcmVsYXRlIHRvIGRlYWxp
bmdzIHdpdGggb3RoZXIgY29tcGFuaWVzIHdpdGhpbiB0aGUgRGV0aWNhIExpbWl0ZWQgZ3Jv
dXAgb2YgY29tcGFuaWVzLg0KDQpEZXRpY2EgTGltaXRlZCBpcyByZWdpc3RlcmVkIGluIEVu
Z2xhbmQgdW5kZXIgTm86IDEzMzc0NTEuDQoNClJlZ2lzdGVyZWQgb2ZmaWNlczogU3VycmV5
IFJlc2VhcmNoIFBhcmssIEd1aWxkZm9yZCwgU3VycmV5LCBHVTIgN1lQLCBFbmdsYW5kLg0K
DQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw==

------=_NextPart_4D9708AD_DF500110_4DE1A437--


From java-user-return-49276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 13:11:33 2011
Return-Path: <java-user-return-49276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18586 invoked from network); 2 Apr 2011 13:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 13:11:33 -0000
Received: (qmail 53567 invoked by uid 500); 2 Apr 2011 13:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53526 invoked by uid 500); 2 Apr 2011 13:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53517 invoked by uid 99); 2 Apr 2011 13:11:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 13:11:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 13:11:23 +0000
Received: by wwi18 with SMTP id 18so3467292wwi.5
        for <java-user@lucene.apache.org>; Sat, 02 Apr 2011 06:11:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.179.138 with SMTP id bq10mr5407619wbb.12.1301749863234;
 Sat, 02 Apr 2011 06:11:03 -0700 (PDT)
Received: by 10.227.156.143 with HTTP; Sat, 2 Apr 2011 06:11:03 -0700 (PDT)
In-Reply-To: <201104021607211569827@gmail.com>
References: <201104011133527349770@gmail.com>
	<AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>
	<201104011826576408113@gmail.com>
	<AANLkTi=iEb=-BAyHpmigNi1q7NOmmi46Cw3S9iR53ot6@mail.gmail.com>
	<201104021607211569827@gmail.com>
Date: Sat, 2 Apr 2011 09:11:03 -0400
Message-ID: <BANLkTim0_OsVqRgwEbnENi87SqWBhspeGQ@mail.gmail.com>
Subject: Re: Re: Re: A likely bug of TermsPosition.nextPosition
From: Michael McCandless <lucene@mikemccandless.com>
To: =?GB2312?B?1KzO5CBbR01haWxd?= <yuanwu.mail@gmail.com>
Cc: java-user <java-user@lucene.apache.org>
Content-Type: multipart/mixed; boundary=00248c0d75302f3c94049fef4216
X-Virus-Checked: Checked by ClamAV on apache.org

--00248c0d75302f3c94049fef4216
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

So your test case still hits the exception in 3.1?

If you fully rebuild you index in 3.1, does the exception still occur?

Is there any way I could get access to this index?

Do other terms besides "\1" have the problem?

I just committed a change to the 3.x branch
(https://svn.apache.org/repos/asf/lucene/dev/branches/branch_3x) --
are you able to checkout this branch, build it, and run its CheckIndex
on your index?  I'm also attaching the patch... and I could also send
you the patched Lucene core JAR if you want.

I'd like to see if that change to CheckIndex detects the problem with
your index.

Mike

http://blog.mikemccandless.com

2011/4/2 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
> Dear Mike:
>
> The index was constructed using Lucene 2.9. After the problem occured, I
> switched to recently release  Lucene 3.1, leaving the index untouched.
>
> Thanks to your help
>
> 2011-04-02
> ________________________________
> =D4=AC=CE=E4 [GMail]
> ________________________________
> =B7=A2=BC=FE=C8=CB=A3=BA Michael McCandless
> =B7=A2=CB=CD=CA=B1=BC=E4=A3=BA 2011-04-02  00:13:35
> =CA=D5=BC=FE=C8=CB=A3=BA =D4=AC=CE=E4 [GMail]
> =B3=AD=CB=CD=A3=BA java-user
> =D6=F7=CC=E2=A3=BA Re: Re: A likely bug of TermsPosition.nextPosition
> Hmm so it's not index corruption.  Curious.
> Which Lucene version are you using?  Looks like it's 2.9, but not
> 2.9.4?  Can you try 2.9.4 and see if you still hit the problem?
> Can you post a small test case showing the problem, on your index?
> Mike
> http://blog.mikemccandless.com
> 2011/4/1 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
>> Hi, Dear Mike:
>>
>> belows list the report of checkIndex. OS is Fedora Linux.
>>
>> [oracle@server bin]$ java -classpath ./ org.apache.lucene.index.CheckInd=
ex /data/Index/URL/Generic/ -fix
>>
>> NOTE: testing will be more thorough if you run java with '-ea:org.apache=
.lucene...', so assertions are enabled
>> Opening index @ /GeoGrid/data/Index/URL/Generic/
>> Segments file=3Dsegments_ayup numSegments=3D1 version=3DFORMAT_DIAGNOSTI=
CS [Lucene 2.9]
>>   1 of 1: name=3D_bym0 docCount=3D1344278
>>     compound=3Dfalse
>>     hasProx=3Dtrue
>>     numFiles=3D11
>>     size (MB)=3D15,979.593
>>     diagnostics =3D {optimize=3Dtrue, mergeFactor=3D3, os.version=3D2.6.=
27.41-170.2.117.fc10.x86_64, os=3DLinux, mergeDocStores=3Dtrue, lucene.vers=
ion=3D3.0-dev, source=3Dmerge, os.arch=3Damd64, java.version=3D1.6.0_21, ja=
va.vendor=3DSun Microsystems Inc.}
>>     no deletions
>>     test: open reader.........OK
>>     test: fields..............OK [11 fields]
>>     test: field norms.........OK [2 fields]
>>     test: terms, freq, prox...
>> OK [1263500 terms; 601715072 terms/docs pairs; 1513780631 tokens]
>>     test: stored fields.......OK [8063151 total field count; avg 5.998 f=
ields per doc]
>>     test: term vectors........OK [1344278 total vector count; avg 1 term=
/freq vector fields per doc]
>> No problems were detected with this index.
>>
>>
>>
>> 2011-04-01
>> ________________________________
>> =D4=AC=CE=E4 [GMail]
>> ________________________________
>> =B7=A2=BC=FE=C8=CB=A3=BA Michael McCandless
>> =B7=A2=CB=CD=CA=B1=BC=E4=A3=BA 2011-04-01  17:58:08
>> =CA=D5=BC=FE=C8=CB=A3=BA java-user
>> =B3=AD=CB=CD=A3=BA =D4=AC=CE=E4 [GMail]
>> =D6=F7=CC=E2=A3=BA Re: A likely bug of TermsPosition.nextPosition
>> Hmm this could be from a corrupted index.
>> What version of Lucene?  What OS/filesystem?
>> Can you run CheckIndex and post the output?
>> Mike
>> http://blog.mikemccandless.com
>> 2011/3/31 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
>>> Hi, dear experts:
>>>
>>> When IndexReader.termsPositions is used to access specific terms, the c=
all to TermsPosition.nextPosition success if TermsPosition.next is used. Bu=
t if TermsPosition.skipTo is used instead of TermsPosition.next, a java.lan=
g.IllegalArgumentException will be thrown, as bellows.
>>>
>>>  java.lang.IllegalArgumentException: Negative position
>>>    at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:610)
>>>    at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readIntern=
al(NIOFSDirectory.java:161)
>>>    at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexIn=
put.java:213)
>>>    at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndex=
Input.java:39)
>>>    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:92)
>>>    at org.apache.lucene.store.BufferedIndexInput.readVInt(BufferedIndex=
Input.java:181)
>>>    at org.apache.lucene.index.SegmentTermPositions.readDeltaPosition(Se=
gmentTermPositions.java:75)
>>>    at org.apache.lucene.index.SegmentTermPositions.skipPositions(Segmen=
tTermPositions.java:130)
>>>    at org.apache.lucene.index.SegmentTermPositions.lazySkip(SegmentTerm=
Positions.java:168)
>>>    at org.apache.lucene.index.SegmentTermPositions.nextPosition(Segment=
TermPositions.java:69)
>>>
>>> In my further study, I found that if docid execeed 1044278, the excepti=
on occurs everytime, for the small ones,  the exception never occur. BTW, t=
he total number of documents is about 1344278, and are never deleted.
>>>
>>> Thanks.
>>>
>>> 2011-04-01
>>>
>>>
>>>
>>> Yuan Wu [GMail]
>>>


--00248c0d75302f3c94049fef4216
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--00248c0d75302f3c94049fef4216--

From java-user-return-49277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 20:10:33 2011
Return-Path: <java-user-return-49277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59812 invoked from network); 2 Apr 2011 20:10:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 20:10:32 -0000
Received: (qmail 78034 invoked by uid 500); 2 Apr 2011 20:10:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77991 invoked by uid 500); 2 Apr 2011 20:10:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77981 invoked by uid 99); 2 Apr 2011 20:10:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 20:10:30 +0000
X-ASF-Spam-Status: No, hits=4.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of 290131755@qq.com designates 64.71.138.44 as permitted sender)
Received: from [64.71.138.44] (HELO smtpbg55.qq.com) (64.71.138.44)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 02 Apr 2011 20:10:23 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=qq.com; s=s0907;
	t=1301774986; bh=J6lPvQXxo5FzRHSySQzk3cmnNVDSKvuWtG8+5NExX2s=;
	h=X-QQ-SSF:X-QQ-BUSINESS-ORIGIN:X-Originating-IP:X-QQ-STYLE:
	 X-QQ-mid:From:To:Subject:Mime-Version:Content-Type:
	 Content-Transfer-Encoding:Date:X-Priority:Message-ID:X-QQ-MIME:
	 X-Mailer:X-QQ-Mailer;
	b=a3eAhyWbzlNVUInkMWs7xs59HB1XF40PusN2Q7oynO7iDKfWDA7mHJL40hIVkvI/Z
	 MMUDhpahjVYeAe/AvNv/D6Cha+PQ9A7l/T2Sk0WSXE6wJZBzQ0qVCZI3i2Vcqd7
X-QQ-SSF:00000000000000F0
X-QQ-BUSINESS-ORIGIN:2
X-Originating-IP: 124.64.9.8
X-QQ-STYLE:
X-QQ-mid:webmail78t1301774983t7891614
From: "=?ISO-8859-1?B?Q2VzY2t5?=" <290131755@qq.com>
To: "=?ISO-8859-1?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: About the lucene score
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_4D978287_DF4C5F08_74766270"
Content-Transfer-Encoding: 8Bit
Date: Sun, 3 Apr 2011 04:09:43 +0800
X-Priority: 3
Message-ID: <tencent_12BD59350DC0910C1A76491C@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_4D978287_DF4C5F08_74766270
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64

SGksDQoNCg0KSSBzZWFyY2ggdXNpbmcgdGhlIENvbXBsZXhQaHJhc2VRdWVyeVBhcnNlciAo
ZS5nLiAiZ3JlYXQqIHN1bSoiKSwgaXQgYmVjb21lcyBTcGFuTmVhclF1ZXJ5IHNvIGkgY2Fu
bm90IHVzZSBtdWx0aVRlcm1RdWVyeS5zZXRSZXdyaXRlTWV0aG9kKCkuIEJlY2F1c2UgcHJl
Zml4IHF1ZXJ5IGlzIGNvbnN0YW50IHF1ZXJ5LCBpdCBjYW4gb25seSBzb3J0IHRoZSBkb2N1
bWVudCBieSB0aGUgb3JkZXIgb2YgcmVhZGluZyBmaWxlcy4NCg0KDQoNCldoaWNoIG1ldGhv
ZCBzaG91bGQgSSB1c2UgdG8gY2hhbmdlIGl0PyBBbmQgSG93IHRvIG1vZGlmeSBpdCB0byBt
YWtlIGl0IHNvcnQgYnkgcmVsZXZhbmNlIG5vdCB0aGUgY29uc3RhbnQgc2NvcmUocmVhZGlu
ZyBmaWxlIG9yZGVyKT8NCg0KDQpUaGFua3M=

------=_NextPart_4D978287_DF4C5F08_74766270--


From java-user-return-49278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 02 20:10:55 2011
Return-Path: <java-user-return-49278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60035 invoked from network); 2 Apr 2011 20:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 2 Apr 2011 20:10:54 -0000
Received: (qmail 80475 invoked by uid 500); 2 Apr 2011 20:10:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80430 invoked by uid 500); 2 Apr 2011 20:10:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80422 invoked by uid 99); 2 Apr 2011 20:10:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 20:10:52 +0000
X-ASF-Spam-Status: No, hits=3.8 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FROM_EXCESS_BASE64,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ee07b381@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Apr 2011 20:10:42 +0000
Received: by iwr19 with SMTP id 19so6592348iwr.35
        for <java-user@lucene.apache.org>; Sat, 02 Apr 2011 13:10:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:x-qq-ssf:x-qq-business-origin:x-originating-ip
         :x-qq-style:x-qq-mid:from:to:subject:mime-version:content-type
         :content-transfer-encoding:date:x-priority:message-id:x-qq-mime
         :x-mailer:x-qq-mailer;
        bh=kJvAiCsGg8LuawtM8Ff39ZQFJmcG+W6gUQYsooVzlvQ=;
        b=Rn8z7O2FLIehyR7ItLwzkz51m+fTe1NH1B1k0afsD6R7U6PMVVCS4g8T2KzZdcb6fz
         2sDqUuIKKNSMe2yJ3sFMcuiPrd3NZfsMZ3KzOS3Eit1aKF9EQcU8IdlvJ0pq7IfHcyXy
         P+fEluaaGC39F8xvODg85B4tPzlEUMNevq34g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-qq-ssf:x-qq-business-origin:x-originating-ip:x-qq-style:x-qq-mid
         :from:to:subject:mime-version:content-type:content-transfer-encoding
         :date:x-priority:message-id:x-qq-mime:x-mailer:x-qq-mailer;
        b=tzH0VjYG2JRMEJQrlTou+LNek/ckd3MPWwXPisBbFCPdtazUmb2IhBf0wSpT4dAaa7
         Ca8VkceF9XpSC8ErdD4edjDVDJzwJ85d4gG1NyY/KH0J2YTMLRw37/H6dsE6vwHoDSw1
         Er+e+a/KBl8AKI+jD3IRGYn/XB6wsMdBRLYzk=
Received: by 10.42.97.66 with SMTP id m2mr3276785icn.515.1301775021609;
        Sat, 02 Apr 2011 13:10:21 -0700 (PDT)
Received: from smtpbg52.qq.com (smtpbg52.qq.com [64.71.138.43])
        by mx.google.com with ESMTPS id 13sm2421425ibo.59.2011.04.02.13.10.18
        (version=SSLv3 cipher=OTHER);
        Sat, 02 Apr 2011 13:10:19 -0700 (PDT)
X-QQ-SSF:00000000000000F0
X-QQ-BUSINESS-ORIGIN:2
X-Originating-IP: 124.64.9.8
X-QQ-STYLE:
X-QQ-mid:webmail78t1301775010t886324
From: "=?ISO-8859-1?B?Q2VzY2t5?=" <ee07b381@gmail.com>
To: "=?ISO-8859-1?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
Subject: About the lucene score
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_4D9782A2_DF4BAC70_4A156F9B"
Content-Transfer-Encoding: 8Bit
Date: Sun, 3 Apr 2011 04:10:10 +0800
X-Priority: 3
Message-ID: <tencent_79BE4F805D0435010E28B1BB@qq.com>
X-QQ-MIME: TCMime 1.0 by Tencent
X-Mailer: QQMail 2.x
X-QQ-Mailer: QQMail 2.x
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_4D9782A2_DF4BAC70_4A156F9B
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: base64

SGksDQoNCg0KSSBzZWFyY2ggdXNpbmcgdGhlIENvbXBsZXhQaHJhc2VRdWVyeVBhcnNlciAo
ZS5nLiAiZ3JlYXQqIHN1bSoiKSwgaXQgYmVjb21lcyBTcGFuTmVhclF1ZXJ5IHNvIGkgY2Fu
bm90IHVzZSBtdWx0aVRlcm1RdWVyeS5zZXRSZXdyaXRlTWV0aG9kKCkuIEJlY2F1c2UgcHJl
Zml4IHF1ZXJ5IGlzIGNvbnN0YW50IHF1ZXJ5LCBpdCBjYW4gb25seSBzb3J0IHRoZSBkb2N1
bWVudCBieSB0aGUgb3JkZXIgb2YgcmVhZGluZyBmaWxlcy4NCg0KDQoNCldoaWNoIG1ldGhv
ZCBzaG91bGQgSSB1c2UgdG8gY2hhbmdlIGl0PyBBbmQgSG93IHRvIG1vZGlmeSBpdCB0byBt
YWtlIGl0IHNvcnQgYnkgcmVsZXZhbmNlIG5vdCB0aGUgY29uc3RhbnQgc2NvcmUocmVhZGlu
ZyBmaWxlIG9yZGVyKT8NCg0KDQpUaGFua3M=

------=_NextPart_4D9782A2_DF4BAC70_4A156F9B--


From java-user-return-49279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 03 11:54:38 2011
Return-Path: <java-user-return-49279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73019 invoked from network); 3 Apr 2011 11:54:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Apr 2011 11:54:38 -0000
Received: (qmail 52116 invoked by uid 500); 3 Apr 2011 11:54:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51995 invoked by uid 500); 3 Apr 2011 11:54:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51987 invoked by uid 99); 3 Apr 2011 11:54:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Apr 2011 11:54:35 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alexott@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Apr 2011 11:54:28 +0000
Received: by fxm7 with SMTP id 7so5633892fxm.35
        for <java-user@lucene.apache.org>; Sun, 03 Apr 2011 04:54:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:subject:organization:date:message-id
         :user-agent:mime-version:content-type;
        bh=+b/JUt9qtrre+fWtnsrjfF2/r3STvsNeZ82c1Uu4pNk=;
        b=ZYSNCla9ZQQkUE/bIBO9zy9zYOdwYfVaV8L6qIY5B5nHd3vQI/56SSXpru3X9slowS
         wCEpfbsRt5DtUyiOpl9LoTHiZFq4LJ4N2fffsMROg8ytu6xPAnu1oipO2ojnZbrxS+mw
         bzxNfcFbBWFnEFPD/Jl4wlmXss1z9FWoYnPSY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:organization:date:message-id:user-agent
         :mime-version:content-type;
        b=H0JGSTex1R86gK6h9Jtzhh5UTnjZMaalTc8LerDK+SeodOrajjzMogd7Cw53iTq5Vm
         rsGQrAytkyELdfaWxj+W1TKHy091Ge48eeQnaNPfbjK5iVCB94eSk7/dT0c2NCZtWy5O
         dsh/5cOZLy3/yeYqfUeV0oSsggh0e3pgXbttY=
Received: by 10.223.24.134 with SMTP id v6mr1393852fab.146.1301831648152;
        Sun, 03 Apr 2011 04:54:08 -0700 (PDT)
Received: from flash.local (g228144140.adsl.alicedsl.de [92.228.144.140])
        by mx.google.com with ESMTPS id j12sm1342426fax.33.2011.04.03.04.54.04
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 03 Apr 2011 04:54:07 -0700 (PDT)
From: Alex Ott <alexott@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene-snowball 3.1.0 packages are missing?
Organization: Alex Ott's Consulting
Date: Sun, 03 Apr 2011 13:54:02 +0200
Message-ID: <m27hbba6ud.fsf@gmail.com>
User-Agent: Gnus/5.13 (Gnus v5.13) Emacs/24.0.50 (darwin)
MIME-Version: 1.0
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

I'm trying to upgrade Lucene in my project to 3.1.0 release, but there is
no lucene-snowball 3.1.0 package on maven central. Is it intended
behaviour? Should I continue to use 3.0.3 for snowball package?


-- 
With best wishes, Alex Ott
http://alexott.blogspot.com/        http://alexott.net/
http://alexott-ru.blogspot.com/
Skype: alex.ott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 03 14:31:46 2011
Return-Path: <java-user-return-49280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75944 invoked from network); 3 Apr 2011 14:31:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 3 Apr 2011 14:31:45 -0000
Received: (qmail 41812 invoked by uid 500); 3 Apr 2011 14:31:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41771 invoked by uid 500); 3 Apr 2011 14:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41763 invoked by uid 99); 3 Apr 2011 14:31:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Apr 2011 14:31:43 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Apr 2011 14:31:37 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p33EVGX1020222
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Sun, 3 Apr 2011 10:31:16 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Sun, 3 Apr 2011
 10:31:16 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 3 Apr 2011 10:31:19 -0400
Subject: RE: lucene-snowball 3.1.0 packages are missing?
Thread-Topic: lucene-snowball 3.1.0 packages are missing?
Thread-Index: Acvx9exgwM1AQ5LuSeCoKjlDj+cBMAAFSD8g
Message-ID: <2D127F11DC79714E9B6A43AC9458147FA33CF75A@suex07-mbx-03.ad.syr.edu>
References: <m27hbba6ud.fsf@gmail.com>
In-Reply-To: <m27hbba6ud.fsf@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-02_08:2011-04-02,2011-04-02,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgQWxleCwNCg0KRnJvbSBMdWNlbmUgY29udHJpYiBDSEFOR0VTLmh0bWwNCjxodHRwOi8vbHVj
ZW5lLmFwYWNoZS5vcmcvamF2YS8zXzFfMC9jaGFuZ2VzL0NvbnRyaWItQ2hhbmdlcy5odG1sIzMu
MS4wLmNoYW5nZXNfaW5fYmFja3dhcmRzX2NvbXBhdGliaWxpdHlfcG9saWN5PjoNCg0KCTMuIExV
Q0VORS0yMjI2OiBNb3ZlZCBjb250cmliL3Nub3diYWxsIGZ1bmN0aW9uYWxpdHkgaW50byANCglj
b250cmliL2FuYWx5emVycy4gQmUgc3VyZSB0byByZW1vdmUgYW55IG9sZCBvYnNlbGV0ZSANCgls
dWNlbmUtc25vd2JhbGwgamFyIGZpbGVzIGZyb20geW91ciBjbGFzc3BhdGghDQoJKFJvYmVydCBN
dWlyKQ0KDQpZb3Ugd2FudCB0aGUgbHVjZW5lLWFuYWx5emVycyBqYXI6DQoNCjxodHRwOi8vcmVw
bzIubWF2ZW4ub3JnL21hdmVuMi9vcmcvYXBhY2hlL2x1Y2VuZS9sdWNlbmUtYW5hbHl6ZXJzLzMu
MS4wLz4NCg0KU3RldmUNCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBB
bGV4IE90dCBbbWFpbHRvOmFsZXhvdHRAZ21haWwuY29tXQ0KPiBTZW50OiBTdW5kYXksIEFwcmls
IDAzLCAyMDExIDc6NTQgQU0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBT
dWJqZWN0OiBsdWNlbmUtc25vd2JhbGwgMy4xLjAgcGFja2FnZXMgYXJlIG1pc3Npbmc/DQo+IA0K
PiBIZWxsbw0KPiANCj4gSSdtIHRyeWluZyB0byB1cGdyYWRlIEx1Y2VuZSBpbiBteSBwcm9qZWN0
IHRvIDMuMS4wIHJlbGVhc2UsIGJ1dCB0aGVyZSBpcw0KPiBubyBsdWNlbmUtc25vd2JhbGwgMy4x
LjAgcGFja2FnZSBvbiBtYXZlbiBjZW50cmFsLiBJcyBpdCBpbnRlbmRlZA0KPiBiZWhhdmlvdXI/
IFNob3VsZCBJIGNvbnRpbnVlIHRvIHVzZSAzLjAuMyBmb3Igc25vd2JhbGwgcGFja2FnZT8NCj4g
DQo+IA0KPiAtLQ0KPiBXaXRoIGJlc3Qgd2lzaGVzLCBBbGV4IE90dA0KPiBodHRwOi8vYWxleG90
dC5ibG9nc3BvdC5jb20vICAgICAgICBodHRwOi8vYWxleG90dC5uZXQvDQo+IGh0dHA6Ly9hbGV4
b3R0LXJ1LmJsb2dzcG90LmNvbS8NCj4gU2t5cGU6IGFsZXgub3R0DQo+IA0KPiAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2Vu
ZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNl
ci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-49281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 06:21:57 2011
Return-Path: <java-user-return-49281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59283 invoked from network); 4 Apr 2011 06:21:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 06:21:57 -0000
Received: (qmail 39744 invoked by uid 500); 4 Apr 2011 06:21:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39675 invoked by uid 500); 4 Apr 2011 06:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39667 invoked by uid 99); 4 Apr 2011 06:21:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 06:21:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS,T_FRT_BELOW2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ydabhi@asite.com designates 202.131.102.148 as permitted sender)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 06:21:40 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CBF290.81A6A40D"
Subject: RE: org.apache.lucene.store.AlreadyClosedException: this IndexReader is closed 
Date: Mon, 4 Apr 2011 11:51:17 +0530
Message-ID: <BE4EDD1665A8004A853E8BDC62C2F1580D2E70@indiaserv01.asite.asitehq.com>
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2E6F@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: org.apache.lucene.store.AlreadyClosedException: this IndexReader is closed 
Thread-Index: Acvwbko8HeKm/XFnQoy5bWA2BuTYwQCHNcnQ
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E6F@indiaserv01.asite.asitehq.com>
From: "Yogesh Dabhi" <ydabhi@asite.com>
To: <java-user@lucene.apache.org>

------_=_NextPart_001_01CBF290.81A6A40D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

My application is cluster in jobss application servers & lucene
directory was shared.

=20

Is it  work ReentrantReaderWriterLock around the process of re-opening
your
IndexReader and re-creating your IndexSearcher  in given environment  or


Is there  any alternate way for it

=20

Please reply=20

=20

Thanks & Regards

Yogesh

=20

=20

From: Yogesh Dabhi=20
Sent: Friday, April 01, 2011 6:44 PM
To: 'java-user@lucene.apache.org'
Subject: org.apache.lucene.store.AlreadyClosedException: this
IndexReader is closed=20

=20

Hi

=20

Concurrently 5 user access same lucene directory for searching document=20

That time I got bellow exception=20

org.apache.lucene.store.AlreadyClosedException: this IndexReader is
closed

=20

is there a way to handle such error

=20

Thanks & Regards

Yogesh


------_=_NextPart_001_01CBF290.81A6A40D--

From java-user-return-49282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 11:10:54 2011
Return-Path: <java-user-return-49282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5435 invoked from network); 4 Apr 2011 11:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 11:10:54 -0000
Received: (qmail 35517 invoked by uid 500); 4 Apr 2011 11:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35451 invoked by uid 500); 4 Apr 2011 11:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35443 invoked by uid 99); 4 Apr 2011 11:10:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:10:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:10:43 +0000
Received: by fxm7 with SMTP id 7so6262336fxm.35
        for <java-user@lucene.apache.org>; Mon, 04 Apr 2011 04:10:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=PsJVPYLl+9SREcvl7RNxJZIzhPYu1ksm397DEDx13d8=;
        b=Bx5Ty6TqcGy2Et/y2pq5VgjORjXnGKf2uob9cjXA9+uhXqlDpdNJiOD5d8hVR1I5Et
         e/stT4dW8xTLeFuVVR2BQ85KAjCw+r+1FBXXtOygcgxxhhgBcjVRw2jZ+wxE1uc7rIOA
         OIpBdxux7NTqupwi/ONihY27nGCekuyfFb8P4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=cl4LtwLW3QceR9G93YLWYmuof4wVlmOMpUr86F7g8zzqzRV8lwxJOj9VXkU8DbqNyK
         SbmtZxIQxvtpUWo4EfsZZrr9TGha0NqF+7NuoSLPEN8jcTS6OSEHAISu0JhztYjr9u8q
         vB5LC33efvqKSMdU454lILbMHKqzbW2Na7Gzg=
MIME-Version: 1.0
Received: by 10.223.1.73 with SMTP id 9mr2926173fae.44.1301915423009; Mon, 04
 Apr 2011 04:10:23 -0700 (PDT)
Received: by 10.223.16.215 with HTTP; Mon, 4 Apr 2011 04:10:22 -0700 (PDT)
In-Reply-To: <AANLkTik=zvXTOp5oPPdTcfgpuaApRCGfD5qGs+wmNeEo@mail.gmail.com>
References: <AANLkTinQhn8+_bAW_BB-EZdGoya_RE18Ngs8nQjkmtZ1@mail.gmail.com>
	<BANLkTinaXYa0DEA55Ea1gdQuQpoaEvohGA@mail.gmail.com>
	<AANLkTik=zvXTOp5oPPdTcfgpuaApRCGfD5qGs+wmNeEo@mail.gmail.com>
Date: Mon, 4 Apr 2011 13:10:22 +0200
Message-ID: <BANLkTimw2ByOehwVKAospwY6E+YvqX_Rsg@mail.gmail.com>
Subject: Re: indexing data without writing to disk ?
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a89950faba04a015ce28
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3054a89950faba04a015ce28
Content-Type: text/plain; charset=ISO-8859-1

ok Thanks,

When I use IndexWriter, I call addDocument method to add a new instance to
the index.

addDocument takes
Document doc, Analyzer analyzer

In MemoryIndex, I have addField which wants:
String fieldName, String text, Analyzer analyzer

Not sure how should I pass the doc, should I get the fields and pass each
field instead? And how do I group them as unique document ? It is not clear
how it works.

thanks

On 1 April 2011 13:33, jm <jmuguruza@gmail.com> wrote:

> or maybe MemoryIndex  (in contrib) is more suited to what he wants
>
> On Fri, Apr 1, 2011 at 1:10 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
> > RAMDirectory.  The clue is in the name ...
> >
> >
> > --
> > Ian.
> >
> >
> > On Fri, Apr 1, 2011 at 11:08 AM, Patrick Diviacco
> > <patrick.diviacco@gmail.com> wrote:
> > > Is there a way to index data into memory without writing to disk in
> > Lucene ?
> > >
> > > This is my current code storing it on disk
> > >
> > > writer = new IndexWriter(FSDirectory.open(index_dir), new
> > > IndexWriterConfig(org.apache.lucene.util.Version.LUCENE_40, new
> > > WhitespaceAnalyzer(org.apache.lucene.util.Version.LUCENE_40)));
> > >
> > > //store sorted content to contents
> > > Iterator<Map.Entry<String,Cluster>> it =
> clusters.entrySet().iterator();
> > >
> > > while (it.hasNext()) {
> > >
> > > ...
> > > Document document  = new Document();
> > >                document.add(new Field("id", id, Field.Store.YES,
> > > Field.Index.ANALYZED));
> > >               writer.addDocument(document);
> > > }
> > > writer.optimize();
> > > writer.close();
> > >
> > >
> > > thanks
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--20cf3054a89950faba04a015ce28--

From java-user-return-49283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 11:13:59 2011
Return-Path: <java-user-return-49283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6110 invoked from network); 4 Apr 2011 11:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 11:13:59 -0000
Received: (qmail 40572 invoked by uid 500); 4 Apr 2011 11:13:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40525 invoked by uid 500); 4 Apr 2011 11:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40517 invoked by uid 99); 4 Apr 2011 11:13:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:13:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [200.198.186.138] (HELO host13.laniway.com.br) (200.198.186.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:13:47 +0000
Received: from host19.laniway.com.br (host19.laniway.com.br [200.198.186.194])
	by host13.laniway.com.br (Postfix) with ESMTP id 6959DE6A62
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2011 08:13:25 -0300 (BRT)
Received: from 201.87.32.129 ([201.87.32.129]) by webmail.conectavoce.com
	(Horde MIME library) with HTTP; Mon, 04 Apr 2011 08:13:25 -0300
Message-ID: <20110404081325.yar7bwg7qcg0ggsg@webmail.conectavoce.com>
Date: Mon, 04 Apr 2011 08:13:25 -0300
From: Claudio <temp@conectavoce.com>
To: java-user@lucene.apache.org
Subject: OutOfMemoryError with FSDirectory
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.4)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am using Lucene 2.9.4 with FSDirectory.
My index has 80 thousand documents (each document has 12 fields).
My jvm has 70Mb of RAM memory (limited by my hosting).
I am getting various OutOfMemoryError.
I ran jmap and I got:

num       #instances    #bytes    Class description
--------------------------------------------------------------------------
1:        275926    32074080    char[]
2:        657724    31570752    =20
org.apache.lucene.index.FreqProxTermsWriter$PostingList
3:        200    16094896    org.apache.lucene.index.RawPostingList[]

The Lucene is consuming 47Mb of RAM memory.
Why there is this excessive memory consumption in FSDirectory?
Is it correct? I'm using FSDirectory because I haven=B4t a big amount of =20
RAM memory.

Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 11:23:09 2011
Return-Path: <java-user-return-49284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32093 invoked from network); 4 Apr 2011 11:23:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 11:23:09 -0000
Received: (qmail 51487 invoked by uid 500); 4 Apr 2011 11:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51441 invoked by uid 500); 4 Apr 2011 11:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51433 invoked by uid 99); 4 Apr 2011 11:23:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:23:06 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:23:00 +0000
Received: by fxm7 with SMTP id 7so6271162fxm.35
        for <java-user@lucene.apache.org>; Mon, 04 Apr 2011 04:22:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=Tw0o33VoJwwtT6Y8zwXU2ANvNqCJBjsZvbT+sCmOXlE=;
        b=C4Qmn7f4saRVNU1i38sWjXspdzB6I557qWEEkkoFPeWZmnXX2Z55SW40WLEsxXNaOV
         s4IY9W6Sfnyd4dYOeRIEN251Gp0JThTvDhHfFC4cneuazV2hhM6q2cn4Ar2LWaVAFbZh
         0TGEA/ySgMD9YxIt1hY3y5t3YTd4FseLPserQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=UU4+6zNMONHyHanwWNBapxc8j6UTIX8EAc9hUCMYJ/NBquLLtGIKzjWw3byKgYogO7
         D165WLMp9hFOY/khSO5mwMVWXdys5DFDFo8fmKq5Qq7Fp3VGVeP3mbvjQgfKbQfK8cfL
         N7iMvzsViUM9J5TQfclLBpzly2BOApKGDc07A=
MIME-Version: 1.0
Received: by 10.223.9.137 with SMTP id l9mr503621fal.25.1301916159294; Mon, 04
 Apr 2011 04:22:39 -0700 (PDT)
Received: by 10.223.16.215 with HTTP; Mon, 4 Apr 2011 04:22:39 -0700 (PDT)
Date: Mon, 4 Apr 2011 13:22:39 +0200
Message-ID: <BANLkTinFS1mwoa-cz+JkMo=pWA=Fy3GXTQ@mail.gmail.com>
Subject: how to delete a RAMDirectory from memory
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151747620033beab04a015faf2

--00151747620033beab04a015faf2
Content-Type: text/plain; charset=ISO-8859-1

Since I need to overwrite an old ramDirectory file and I don't want memory
leaks, I have the following code lines to close first the existing
RAMDirectory and create a new one.

INDEX_DIR.close();
INDEX_DIR = new RAMDirectory();

However, I get the following exception. Should I remove close() line and
just create a new RAMDirectory ? The old one will be deleted anyway ?

thans

Exception in thread "main" org.apache.lucene.store.AlreadyClosedException:
this Directory is closed
at org.apache.lucene.store.Directory.ensureOpen(Directory.java:224)
at org.apache.lucene.store.RAMDirectory.listAll(RAMDirectory.java:86)
at
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:529)
at
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:481)
at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:256)
at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:249)
at org.apache.lucene.index.IndexReader.indexExists(IndexReader.java:915)
at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:740)
at CollectionIndexer.run(CollectionIndexer.java:85)
at Clusterer.<init>(Clusterer.java:76)
at Main.main(Main.java:11)

--00151747620033beab04a015faf2--

From java-user-return-49285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 11:24:39 2011
Return-Path: <java-user-return-49285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38533 invoked from network); 4 Apr 2011 11:24:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 11:24:39 -0000
Received: (qmail 55788 invoked by uid 500); 4 Apr 2011 11:24:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55739 invoked by uid 500); 4 Apr 2011 11:24:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55731 invoked by uid 99); 4 Apr 2011 11:24:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:24:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:24:30 +0000
Received: by fxm7 with SMTP id 7so6272224fxm.35
        for <java-user@lucene.apache.org>; Mon, 04 Apr 2011 04:24:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=JtBTf9cjM6i2Cif+zkZ9PfRFPJTrNDw1T9AGfQbvyPo=;
        b=l4s0TVCvQNzlggbBcQ4ji290Zvc4gwlHx4NEyoClVfoMZlHebxMNrMaJM4esFfnsQe
         UOn+lQ55rawtB1BuFT2Sn6JlHYAiUAtZaItqR4KbhChoUk2YU5247uzBiHj+WzwhRMCk
         R9XCZsH3dDGSyB3tUVkGVWqpRXGbbn9YOQvUA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=og448EEaD/PHZURGC3MO7ciFTffjB7BvsNzmAgN2NuezihM8Ry+/ey+cuT7xPWJ9Vz
         hYdeiBrhWZm9WWPk5wTbp+8RF3JJJocUhQdo1lQJsR1c/dPu/7gCvInOIw7xKnzujDqE
         5u7DbMyf3Xf2I6+SdVGXjYVN1yrSwpeUzAznA=
MIME-Version: 1.0
Received: by 10.223.1.198 with SMTP id 6mr1145046fag.120.1301916249563; Mon,
 04 Apr 2011 04:24:09 -0700 (PDT)
Received: by 10.223.16.215 with HTTP; Mon, 4 Apr 2011 04:24:09 -0700 (PDT)
In-Reply-To: <BANLkTimw2ByOehwVKAospwY6E+YvqX_Rsg@mail.gmail.com>
References: <AANLkTinQhn8+_bAW_BB-EZdGoya_RE18Ngs8nQjkmtZ1@mail.gmail.com>
	<BANLkTinaXYa0DEA55Ea1gdQuQpoaEvohGA@mail.gmail.com>
	<AANLkTik=zvXTOp5oPPdTcfgpuaApRCGfD5qGs+wmNeEo@mail.gmail.com>
	<BANLkTimw2ByOehwVKAospwY6E+YvqX_Rsg@mail.gmail.com>
Date: Mon, 4 Apr 2011 13:24:09 +0200
Message-ID: <BANLkTikP8GDxRoNeggvYQUzhOLY0DtZhBw@mail.gmail.com>
Subject: Re: indexing data without writing to disk ?
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a81395242804a015ff30

--20cf3054a81395242804a015ff30
Content-Type: text/plain; charset=ISO-8859-1

Ok, I've now seen RAMDirectory class instead and I'm using it together what
the IndexWriter... it should be ok now thanks

On 4 April 2011 13:10, Patrick Diviacco <patrick.diviacco@gmail.com> wrote:

> ok Thanks,
>
> When I use IndexWriter, I call addDocument method to add a new instance to
> the index.
>
> addDocument takes
> Document doc, Analyzer analyzer
>
> In MemoryIndex, I have addField which wants:
> String fieldName, String text, Analyzer analyzer
>
> Not sure how should I pass the doc, should I get the fields and pass each
> field instead? And how do I group them as unique document ? It is not clear
> how it works.
>
> thanks
>
>
> On 1 April 2011 13:33, jm <jmuguruza@gmail.com> wrote:
>
>> or maybe MemoryIndex  (in contrib) is more suited to what he wants
>>
>> On Fri, Apr 1, 2011 at 1:10 PM, Ian Lea <ian.lea@gmail.com> wrote:
>>
>> > RAMDirectory.  The clue is in the name ...
>> >
>> >
>> > --
>> > Ian.
>> >
>> >
>> > On Fri, Apr 1, 2011 at 11:08 AM, Patrick Diviacco
>> > <patrick.diviacco@gmail.com> wrote:
>> > > Is there a way to index data into memory without writing to disk in
>> > Lucene ?
>> > >
>> > > This is my current code storing it on disk
>> > >
>> > > writer = new IndexWriter(FSDirectory.open(index_dir), new
>> > > IndexWriterConfig(org.apache.lucene.util.Version.LUCENE_40, new
>> > > WhitespaceAnalyzer(org.apache.lucene.util.Version.LUCENE_40)));
>> > >
>> > > //store sorted content to contents
>> > > Iterator<Map.Entry<String,Cluster>> it =
>> clusters.entrySet().iterator();
>> > >
>> > > while (it.hasNext()) {
>> > >
>> > > ...
>> > > Document document  = new Document();
>> > >                document.add(new Field("id", id, Field.Store.YES,
>> > > Field.Index.ANALYZED));
>> > >               writer.addDocument(document);
>> > > }
>> > > writer.optimize();
>> > > writer.close();
>> > >
>> > >
>> > > thanks
>> > >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>
>

--20cf3054a81395242804a015ff30--

From java-user-return-49286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 11:38:55 2011
Return-Path: <java-user-return-49286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98576 invoked from network); 4 Apr 2011 11:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 11:38:55 -0000
Received: (qmail 73411 invoked by uid 500); 4 Apr 2011 11:38:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73370 invoked by uid 500); 4 Apr 2011 11:38:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73362 invoked by uid 99); 4 Apr 2011 11:38:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:38:53 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 11:38:47 +0000
Received: by qwj9 with SMTP id 9so4365478qwj.35
        for <java-user@lucene.apache.org>; Mon, 04 Apr 2011 04:38:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=iBiTU6L4MKFVVSnAEkznxUZVWI3p8Fo115Pm5EqVMjo=;
        b=lTXjQnXWxv0gODSE3r/y2SAcGqfW0yOxaCDbILaGEjRzFhuka9lbcdEkuh5lUrqfIK
         adCFkbUgrA9pFE1fExAUhl4ujcCEsi2eTEsdNTqKD4chwjq7BE1RWCvCxS+V/h6vWJWn
         /psD2hvZlqRUhowyR+qNaHeNERJds43T6Vmjw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WkJIY1NOK7JK49tWFUxiQkz6KLaC617kLNeOvNKzXA8NOakbUUqtwqPkg1txjNl6wp
         bHKXU4H+pYorrV3qBPvxQq1z1mc2RudcbO4tw1c3ou6T5OigjoxakYkXx7GCt/Hwar/q
         amCJZd7muPHieQFspvfMdyMkyfbXBZLPiwZvU=
MIME-Version: 1.0
Received: by 10.229.8.209 with SMTP id i17mr5635635qci.86.1301917106665; Mon,
 04 Apr 2011 04:38:26 -0700 (PDT)
Received: by 10.229.72.8 with HTTP; Mon, 4 Apr 2011 04:38:26 -0700 (PDT)
In-Reply-To: <20110404081325.yar7bwg7qcg0ggsg@webmail.conectavoce.com>
References: <20110404081325.yar7bwg7qcg0ggsg@webmail.conectavoce.com>
Date: Mon, 4 Apr 2011 07:38:26 -0400
Message-ID: <BANLkTin88+95Y-GLOcVx-q6bJ1wTOYPHyQ@mail.gmail.com>
Subject: Re: OutOfMemoryError with FSDirectory
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64ba0f0ab79f404a01632c1

--0016e64ba0f0ab79f404a01632c1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

FSDirectory will, indeed, store the index on disk. However,
when *using* that index, lots of stuff happens. Specifically:
When indexing, there is a buffer that accumulates documents
until it's flushed to disk. Are you indexing?

When searching (and this is the more important part), various
caches are used to speed up searches. A substantial part of
your index may be held in memory at various points.

70M just isn't very much memory, I think you'll have to get
more if at all possible.

Best
Erick

On Mon, Apr 4, 2011 at 7:13 AM, Claudio <temp@conectavoce.com> wrote:

> Hi,
>
> I am using Lucene 2.9.4 with FSDirectory.
> My index has 80 thousand documents (each document has 12 fields).
> My jvm has 70Mb of RAM memory (limited by my hosting).
> I am getting various OutOfMemoryError.
> I ran jmap and I got:
>
> num       #instances    #bytes    Class description
> -------------------------------------------------------------------------=
-
> 1:        275926    32074080    char[]
> 2:        657724    31570752
>  org.apache.lucene.index.FreqProxTermsWriter$PostingList
> 3:        200    16094896    org.apache.lucene.index.RawPostingList[]
>
> The Lucene is consuming 47Mb of RAM memory.
> Why there is this excessive memory consumption in FSDirectory?
> Is it correct? I'm using FSDirectory because I haven=B4t a big amount of =
RAM
> memory.
>
> Thanks.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64ba0f0ab79f404a01632c1--

From java-user-return-49287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 12:21:41 2011
Return-Path: <java-user-return-49287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22170 invoked from network); 4 Apr 2011 12:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 12:21:40 -0000
Received: (qmail 29991 invoked by uid 500); 4 Apr 2011 12:21:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29954 invoked by uid 500); 4 Apr 2011 12:21:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29946 invoked by uid 99); 4 Apr 2011 12:21:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 12:21:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 12:21:30 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id 50A1F2089F;
	Mon,  4 Apr 2011 12:19:22 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GKYweX1FEIKB; Mon,  4 Apr 2011 14:19:17 +0200 (CEST)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id 9562720892; Mon,  4 Apr 2011 14:19:17 +0200 (CEST)
Received: from [195.110.10.155] (unknown [195.110.10.155])
	by mail.dosco.de (Postfix) with ESMTP id 4C30620833;
	Mon,  4 Apr 2011 12:19:17 +0000 (UTC)
Message-ID: <4D99B7B0.6000403@dosco.de>
Date: Mon, 04 Apr 2011 14:21:04 +0200
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org, yonik@lucidimagination.com
Subject: Re: Undo hyphenation when indexing
References: <4D95F444.7030406@dosco.de> <AANLkTinH3WRd_A2ndCy7ZH8aZN0k98n6N1vSyWBTkzyC@mail.gmail.com>
In-Reply-To: <AANLkTinH3WRd_A2ndCy7ZH8aZN0k98n6N1vSyWBTkzyC@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you, Yonnik for this hint. (Again, I wasn't aware that obviousely 
Solr offers useful extensions for the Lucene indexing process and I 
wonder why they haven't been added to Lucene itself.)

Anyway, since the HyphenatedWordsFilter needs newlines in the input I 
will have to take another Tokenizer than StandardTokenizer. If I simply 
take the WhitespaceTokenizerFactory (as suggested by 
HyphenatedWordsFilterFactory) I will loose the punctuation handling done 
by StandardTokenizer, right? What will I have to borrow for that? Or do 
I have to extend StandardTokenizerImpl.jflex?

Wulf


Am 01.04.2011 18:23, schrieb Yonik Seeley:
> Solr has a hyphenated word filter you could copy.
> http://lucene.apache.org/solr/api/org/apache/solr/analysis/HyphenatedWordsFilterFactory.html
>
> On trunk, this has been folded into the analysis module.
>
> -Yonik
> http://www.lucenerevolution.org -- Lucene/Solr User Conference, May
> 25-26, San Francisco
>
> On Fri, Apr 1, 2011 at 11:50 AM, Wulf Berschin<berschin@dosco.de>  wrote:
>> Hi,
>>
>> for indexing PDF files we have to undo word hyphenation. The basic idea is
>> simply to remove the hyphen when a new line and a small letter follows. Of
>> course this approach isnt 100%-foolproofed but checking against a dictionary
>> wouldnt be as well...
>>
>> Since we face this problem too when highlighting using HTMLCharStripper
>> (yes, we do have hyphenation in our HTML docs...) it seems to me I have to
>> adjust the JFlex generated StandardTokenizerImpl.
>>
>> Is this the right approach and hwo would I have to modify this script?
>>
>> Thanks
>> Wulf
>>
>>
>> PS: I see that there are changes made in the brand new 3.1.0 version we are
>> using 3.0.3, but as far I understand no relevant changes in this respect.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 19:06:25 2011
Return-Path: <java-user-return-49288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9395 invoked from network); 4 Apr 2011 19:06:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 19:06:24 -0000
Received: (qmail 89984 invoked by uid 500); 4 Apr 2011 19:06:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89949 invoked by uid 500); 4 Apr 2011 19:06:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89941 invoked by uid 99); 4 Apr 2011 19:06:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 19:06:22 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.27 as permitted sender)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 19:06:15 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id D352120D81
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2011 15:05:54 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Mon, 04 Apr 2011 15:05:54 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=pxSHkcgbhAd7/aeRz3GjW+c6kz0=; b=NqScyghQmVGcOiZFFIc1bkNT9IxXTW8Dp2lyJlcIA2p/6iS/6fpLKT4fWJDwcAQYPNZS64TujMdwLt2hN9Ax+bYZ+lFkeIvQuY4FcqsfnJLRoJ+8u/W3gB/Ukk77RsSO3lPAd8fh/G6RdHQ0n6AwMxm+nxIaBS6O5ITLrgQh6yQ=
X-Sasl-enc: Z2L8XojkItFrQju3j8r6OyuCz0EHb7Q74XKXi3C4mCEr 1301943954
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id F116244527B
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2011 15:05:53 -0400 (EDT)
Message-ID: <4D9A168B.5020208@fastmail.fm>
Date: Mon, 04 Apr 2011 20:05:47 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene Merge failing on Open Files
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Problem trying to merge indexes in the background whilst building some others, works okay on my humble labtop but fails on another machine, although it seems to allow 700,000 file handles

Exception in thread "Lucene Merge Thread #0" org.apache.lucene.index.MergePolicy$MergeException: java.io.FileNotFoundException: /home/musicbrainz/search_server/data/recording_index/_rs.cfs (Too many open files)
         at org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(ConcurrentMergeScheduler.java:347)
         at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:312)
Caused by: java.io.FileNotFoundException: /home/robert/musicbrainz/search_server/data/recording_index/_rs.cfs (Too many open files)
         at java.io.RandomAccessFile.open(Native Method)
         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
         at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput$Descriptor.<init>(SimpleFSDirectory.java:76)
         at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.<init>(SimpleFSDirectory.java:97)
         at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.<init>(NIOFSDirectory.java:98)
         at org.apache.lucene.store.NIOFSDirectory.openInput(NIOFSDirectory.java:78)
         at org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:67)
         at org.apache.lucene.index.SegmentReader$CoreReaders.<init>(SegmentReader.java:115)
         at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:605)
         at org.apache.lucene.index.IndexWriter$ReaderPool.get(IndexWriter.java:622)
         at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4394)
         at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4000)
         at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:231)
         at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:288)

Anyone got some ideas on how I can get to the bottom of this, Im using lucene 3.03

thank Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 19:14:22 2011
Return-Path: <java-user-return-49289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11185 invoked from network); 4 Apr 2011 19:14:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 19:14:22 -0000
Received: (qmail 2288 invoked by uid 500); 4 Apr 2011 19:14:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2139 invoked by uid 500); 4 Apr 2011 19:14:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2131 invoked by uid 99); 4 Apr 2011 19:14:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 19:14:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 19:14:13 +0000
Received: by yxd5 with SMTP id 5so2991443yxd.35
        for <java-user@lucene.apache.org>; Mon, 04 Apr 2011 12:13:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.189.71 with SMTP id b47mr8161827yhn.176.1301944432669;
 Mon, 04 Apr 2011 12:13:52 -0700 (PDT)
Received: by 10.236.103.146 with HTTP; Mon, 4 Apr 2011 12:13:52 -0700 (PDT)
In-Reply-To: <4D9A168B.5020208@fastmail.fm>
References: <4D9A168B.5020208@fastmail.fm>
Date: Mon, 4 Apr 2011 15:13:52 -0400
Message-ID: <BANLkTino475Uokk_DeF_--OqmZaXw6ZTLw@mail.gmail.com>
Subject: Re: Lucene Merge failing on Open Files
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

How are you merging these indices?  (IW.addIndexes?).

Are you changing any of IW's defaults, eg mergeFactor?

Mike

http://blog.mikemccandless.com

On Mon, Apr 4, 2011 at 3:05 PM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> Problem trying to merge indexes in the background whilst building some
> others, works okay on my humble labtop but fails on another machine,
> although it seems to allow 700,000 file handles
>
> Exception in thread "Lucene Merge Thread #0"
> org.apache.lucene.index.MergePolicy$MergeException:
> java.io.FileNotFoundException:
> /home/musicbrainz/search_server/data/recording_index/_rs.cfs (Too many op=
en
> files)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.handleMergeException(Con=
currentMergeScheduler.java:347)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurre=
ntMergeScheduler.java:312)
> Caused by: java.io.FileNotFoundException:
> /home/robert/musicbrainz/search_server/data/recording_index/_rs.cfs (Too
> many open files)
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.open(Native Method)
> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.<init>(RandomAccessFile.java:2=
33)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput$Descriptor.<=
init>(SimpleFSDirectory.java:76)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.<init>(Simpl=
eFSDirectory.java:97)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.<init>(NIOFSDirect=
ory.java:98)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.store.NIOFSDirectory.openInput(NIOFSDirectory.java:78)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java=
:67)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.SegmentReader$CoreReaders.<init>(SegmentReader.ja=
va:115)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentReader.get(SegmentReader=
.java:605)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter$ReaderPool.get(IndexWriter.java:622)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4394)
> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.merge(IndexWriter.j=
ava:4000)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeS=
cheduler.java:231)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(Concurre=
ntMergeScheduler.java:288)
>
> Anyone got some ideas on how I can get to the bottom of this, Im using
> lucene 3.03
>
> thank Paul
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 20:00:22 2011
Return-Path: <java-user-return-49290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53354 invoked from network); 4 Apr 2011 20:00:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 20:00:22 -0000
Received: (qmail 69559 invoked by uid 500); 4 Apr 2011 20:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69507 invoked by uid 500); 4 Apr 2011 20:00:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69499 invoked by uid 99); 4 Apr 2011 20:00:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 20:00:18 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.27 as permitted sender)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 20:00:10 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 78F292063E;
	Mon,  4 Apr 2011 15:59:49 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Mon, 04 Apr 2011 15:59:49 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=NWQnUb+2o5ATVohvugIewrQQj3c=; b=fBR08pp3HCOxDS9eeSGaVJ14B19PEZFPEkO88lHW3cNYaQ6sYxExOeV3oB85MOreLcUtzRNJF9C0beR66h7bGeiIBEyOiATfl4X5wvtKgtIuDuqiL0BFuWZSmAdyLzTAxgjs79VNx8mAsDSY1jjlMALgEtV6CPKqoYPRBwbWXWk=
X-Sasl-enc: dT1Jbm8M3ib5cmWhwspRcasoq5NPJmSWm9BHHtx2TgGE 1301947188
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 7AF514426DB;
	Mon,  4 Apr 2011 15:59:48 -0400 (EDT)
Message-ID: <4D9A2332.5070405@fastmail.fm>
Date: Mon, 04 Apr 2011 20:59:46 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: Michael McCandless <lucene@mikemccandless.com>
CC: java-user@lucene.apache.org
Subject: Re: Lucene Merge failing on Open Files
References: <4D9A168B.5020208@fastmail.fm> <BANLkTino475Uokk_DeF_--OqmZaXw6ZTLw@mail.gmail.com>
In-Reply-To: <BANLkTino475Uokk_DeF_--OqmZaXw6ZTLw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 04/04/2011 20:13, Michael McCandless wrote:
> How are you merging these indices?  (IW.addIndexes?).
>
> Are you changing any of IW's defaults, eg mergeFactor?
>
> Mike
Hi Mike

I have

indexWriter.setMaxBufferedDocs(10000);
indexWriter.setMergeFactor(3000);

these are a hangover from earlier code, I tried changing them and it 
didnt seem to make any difference, but do they look wrong ?

The index that falls over during optmizationcreates about 10,000,000 records

What I do is build 10 different indexes sequentially one after the after 
(so only one is hitting the db at any one time) but once the index is 
built I optimize the index in the background
by creating an instance of the following class and submitting it to  an 
ExecutionService , configured to have at most 2 threads acting

I built my own class rather than just using optimize() with the 
background option because that wouldnt allow me to do the necessary 
debugging/calculations


static class IndexWriterOptimizerAndClose implements Callable<Boolean>
     {
         private int             maxId;
         private IndexWriter     indexWriter;
         private DatabaseIndex   index;
         private IndexOptions    options;

         /**
          *
          * @param maxId
          * @param indexWriter
          * @param index
          * @param options
          */
         public IndexWriterOptimizerAndClose(int maxId, IndexWriter 
indexWriter, DatabaseIndex index, IndexOptions options)
         {
             this.maxId=maxId;
             this.indexWriter= indexWriter;
             this.index=index;
             this.options=options;
         }

         public Boolean call() throws IOException, SQLException
         {

             StopWatch clock = new StopWatch();
             clock.start();
             String path = options.getIndexesDir() + index.getFilename();
             System.out.println(index.getName()+":Started Optimization 
at "+Utils.formatCurrentTimeForOutput());

             indexWriter.optimize();
             indexWriter.close();
             clock.stop();
             // For debugging to check sql is not creating too few/many rows
             if(true) {
                 int dbRows = index.getNoOfRows(maxId);
                 IndexReader reader = 
IndexReader.open(FSDirectory.open(new File(path)),true);
                 System.out.println(index.getName()+":"+dbRows+" db 
rows:"+(reader.maxDoc() - 1)+" lucene docs");
                 reader.close();
             }
             System.out.println(index.getName()+":Finished 
Optimization:" + Utils.formatClock(clock));

             return true;
         }
     }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 20:07:03 2011
Return-Path: <java-user-return-49291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5889 invoked from network); 4 Apr 2011 20:07:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 20:07:03 -0000
Received: (qmail 79660 invoked by uid 500); 4 Apr 2011 20:07:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79606 invoked by uid 500); 4 Apr 2011 20:07:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79598 invoked by uid 99); 4 Apr 2011 20:07:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 20:07:01 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 20:06:56 +0000
Received: by vws7 with SMTP id 7so6882101vws.35
        for <java-user@lucene.apache.org>; Mon, 04 Apr 2011 13:06:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=olj8NCelmM4KLNzc8WlEGBI6JjYLyoY0NmlaaoITmFo=;
        b=ZbyWnAThZ+VopevdTz8xpZ0iN2EPQEuOBQTkjIbiPq6DyMPNz247d/rlK2Fsp+sjNu
         8y3j9G5ykxupqofvymuRyzqnRsNSmgJ6upe0o8DqNusTlE8jpZeLcViX0d2NSmbzMsNc
         l85RH7jQgtIqCRWOEEd0QkNulYQtg4ouIe3Mc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=YPYN/TbVrDNz4LCmBR8uxNeTh9pm1GNT1ZfaGtHEXkohHjZDdGnPXXVGkUN3V4kRuY
         B2iZj8cz4mFaKjN3lXK5tOIveRGDZTwyNcmZucZPYUFsocBzToWFzQ8r2SbdwjSKIr/p
         bq7teoiG+PaKFM0iOXBxnFjjjXRRzAnjWyzZI=
MIME-Version: 1.0
Received: by 10.52.71.243 with SMTP id y19mr1947277vdu.191.1301947595241; Mon,
 04 Apr 2011 13:06:35 -0700 (PDT)
Received: by 10.52.164.65 with HTTP; Mon, 4 Apr 2011 13:06:35 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <4D9A2332.5070405@fastmail.fm>
References: <4D9A168B.5020208@fastmail.fm>
	<BANLkTino475Uokk_DeF_--OqmZaXw6ZTLw@mail.gmail.com>
	<4D9A2332.5070405@fastmail.fm>
Date: Mon, 4 Apr 2011 22:06:35 +0200
Message-ID: <BANLkTiktyR6S1uZk0ZwF=XiegQKGJMe4GQ@mail.gmail.com>
Subject: Re: Lucene Merge failing on Open Files
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Cc: Michael McCandless <lucene@mikemccandless.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Mon, Apr 4, 2011 at 9:59 PM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> On 04/04/2011 20:13, Michael McCandless wrote:
>>
>> How are you merging these indices? =C2=A0(IW.addIndexes?).
>>
>> Are you changing any of IW's defaults, eg mergeFactor?
>>
>> Mike
>
> Hi Mike
>
> I have
>
> indexWriter.setMaxBufferedDocs(10000);
> indexWriter.setMergeFactor(3000);
>

I didn't read though the entire email but MergeFactor 3000 doesn't
look right at all. You should try something between 5 and 30. I
haven't seen a mergeFactor > 50 doing any good in a common env. Why do
you use such a large factor?

simon
> these are a hangover from earlier code, I tried changing them and it didn=
t
> seem to make any difference, but do they look wrong ?
>
> The index that falls over during optmizationcreates about 10,000,000 reco=
rds
>
> What I do is build 10 different indexes sequentially one after the after =
(so
> only one is hitting the db at any one time) but once the index is built I
> optimize the index in the background
> by creating an instance of the following class and submitting it to =C2=
=A0an
> ExecutionService , configured to have at most 2 threads acting
>
> I built my own class rather than just using optimize() with the backgroun=
d
> option because that wouldnt allow me to do the necessary
> debugging/calculations
>
>
> static class IndexWriterOptimizerAndClose implements Callable<Boolean>
> =C2=A0 =C2=A0{
> =C2=A0 =C2=A0 =C2=A0 =C2=A0private int =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 maxId;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0private IndexWriter =C2=A0 =C2=A0 indexWriter;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0private DatabaseIndex =C2=A0 index;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0private IndexOptions =C2=A0 =C2=A0options;
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0/**
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 *
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 * @param maxId
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 * @param indexWriter
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 * @param index
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 * @param options
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 */
> =C2=A0 =C2=A0 =C2=A0 =C2=A0public IndexWriterOptimizerAndClose(int maxId,=
 IndexWriter
> indexWriter, DatabaseIndex index, IndexOptions options)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0this.maxId=3DmaxId;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0this.indexWriter=3D indexWriter;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0this.index=3Dindex;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0this.options=3Doptions;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0public Boolean call() throws IOException, SQLE=
xception
> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0StopWatch clock =3D new StopWatc=
h();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0clock.start();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0String path =3D options.getIndex=
esDir() + index.getFilename();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println(index.getName=
()+":Started Optimization at
> "+Utils.formatCurrentTimeForOutput());
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.optimize();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.close();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0clock.stop();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// For debugging to check sql is=
 not creating too few/many rows
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0if(true) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0int dbRows =3D ind=
ex.getNoOfRows(maxId);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexReader reader=
 =3D IndexReader.open(FSDirectory.open(new
> File(path)),true);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println=
(index.getName()+":"+dbRows+" db
> rows:"+(reader.maxDoc() - 1)+" lucene docs");
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0reader.close();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println(index.getName=
()+":Finished Optimization:" +
> Utils.formatClock(clock));
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return true;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0}
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 04 22:31:54 2011
Return-Path: <java-user-return-49292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56303 invoked from network); 4 Apr 2011 22:31:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 4 Apr 2011 22:31:53 -0000
Received: (qmail 24560 invoked by uid 500); 4 Apr 2011 22:31:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24380 invoked by uid 500); 4 Apr 2011 22:31:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24372 invoked by uid 99); 4 Apr 2011 22:31:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 22:31:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.60] (HELO billthecat.sdsc.edu) (132.249.20.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Apr 2011 22:31:42 +0000
Received: from [192.168.11.51] (c-67-180-28-210.hsd1.ca.comcast.net [67.180.28.210])
	(authenticated bits=0)
	by billthecat.sdsc.edu (8.14.2/8.14.1/SDSCrelay/16) with ESMTP id p34MVJUf014132
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 4 Apr 2011 15:31:20 -0700 (PDT)
Message-ID: <4D9A46B1.9030400@sdsc.edu>
Date: Mon, 04 Apr 2011 15:31:13 -0700
From: Christopher Condit <condit@sdsc.edu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Field Aware TokenFilter
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I need to add synonyms to an index depending on the field being indexed.
I know that TokenFilter is not "field aware", but is there a good way to
get at the field or do I need to add something to allow my Analyzer to
tell the TokenFilter which field is currently being examined?

Thanks,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 05:18:23 2011
Return-Path: <java-user-return-49293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76994 invoked from network); 5 Apr 2011 05:18:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 05:18:22 -0000
Received: (qmail 59215 invoked by uid 500); 5 Apr 2011 02:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59181 invoked by uid 500); 5 Apr 2011 02:28:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59173 invoked by uid 99); 5 Apr 2011 02:28:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 02:28:20 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.198.186.138] (HELO host13.laniway.com.br) (200.198.186.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 02:28:14 +0000
Received: from host19.laniway.com.br (host19.laniway.com.br [200.198.186.194])
	by host13.laniway.com.br (Postfix) with ESMTP id 739D8E6A71
	for <java-user@lucene.apache.org>; Mon,  4 Apr 2011 23:27:51 -0300 (BRT)
Received: from 201.87.40.88 ([201.87.40.88]) by webmail.conectavoce.com
	(Horde MIME library) with HTTP; Mon, 04 Apr 2011 23:27:50 -0300
Message-ID: <20110404232750.nda8neqf6scw44kc@webmail.conectavoce.com>
Date: Mon, 04 Apr 2011 23:27:50 -0300
From: Claudio <temp@conectavoce.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError with FSDirectory
References: <20110404081325.yar7bwg7qcg0ggsg@webmail.conectavoce.com>
	<BANLkTin88+95Y-GLOcVx-q6bJ1wTOYPHyQ@mail.gmail.com>
In-Reply-To: <BANLkTin88+95Y-GLOcVx-q6bJ1wTOYPHyQ@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.4)


Ok Erick,

Thanks for your quick answer.

> FSDirectory will, indeed, store the index on disk. However,
> when *using* that index, lots of stuff happens. Specifically:
> When indexing, there is a buffer that accumulates documents
> until it's flushed to disk. Are you indexing?
>
> When searching (and this is the more important part), various
> caches are used to speed up searches. A substantial part of
> your index may be held in memory at various points.
>
> 70M just isn't very much memory, I think you'll have to get
> more if at all possible.
>
> Best
> Erick
>
> On Mon, Apr 4, 2011 at 7:13 AM, Claudio <temp@conectavoce.com> wrote:
>
>> Hi,
>>
>> I am using Lucene 2.9.4 with FSDirectory.
>> My index has 80 thousand documents (each document has 12 fields).
>> My jvm has 70Mb of RAM memory (limited by my hosting).
>> I am getting various OutOfMemoryError.
>> I ran jmap and I got:
>>
>> num       #instances    #bytes    Class description
>> -------------------------------------------------------------------------=
-
>> 1:        275926    32074080    char[]
>> 2:        657724    31570752
>>  org.apache.lucene.index.FreqProxTermsWriter$PostingList
>> 3:        200    16094896    org.apache.lucene.index.RawPostingList[]
>>
>> The Lucene is consuming 47Mb of RAM memory.
>> Why there is this excessive memory consumption in FSDirectory?
>> Is it correct? I'm using FSDirectory because I haven=B4t a big amount of =
RAM
>> memory.
>>
>> Thanks.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 05:36:21 2011
Return-Path: <java-user-return-49294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61393 invoked from network); 5 Apr 2011 05:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 05:36:21 -0000
Received: (qmail 58248 invoked by uid 500); 5 Apr 2011 05:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58194 invoked by uid 500); 5 Apr 2011 05:36:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 86720 invoked by uid 99); 4 Apr 2011 21:51:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 489073.60897.bm@omp1012.mail.bf1.yahoo.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1301953841; bh=RKowuJALQL7864ngUpPCkMIR95DKpObCFtmC+MXlyW0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=BsfdCwkmQqOXzaocv+gDekFy01kz7oeLj1RohcLtGIFuvIoGqkUtdmPGNjoTvVCEAaeUqyc8u3CdpABCXaXGoJl5+nwP8UPQgw1BjtPUaoVVmDCYz57OeI5UQFhxZu7PhA7nZb4ua3E/NFiQHW8kqCnCrMdEsOEz85wj7LCvkBk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=I7lulieI+TvmiDMhuiQaFwYTXTLcS36AKO31fnZ0wk1IcNITU5L2NRUX2UwwoO7I55BqdeYVrN8gS+7otGh6sRffRAgvXstTAXUKTitDwQJSfKUjucLC/2jr2Ui326ktYxV4a5I6awxlK/e9dPhpklZ2IRqPvkR8IkkA3ALYGg0=;
Message-ID: <398676.14963.qm@web162020.mail.bf1.yahoo.com>
X-YMail-OSG: ZzuT3SEVM1kGyyAmYTmKd8_CMxrnZ2hMp4ujSCH7AekXO03
 8nHxNLPJqWTNAUUrB68K5xbdy0H2cZTmFI5Y78dmzbrcWMthuRpwQ4lAFE0X
 csxmlToSZSm8KCsycDpMunxqtOUev97ETOcgwrJ98.t22mdQPcIJr2qMkBer
 MBzuOY42sMrudKLyEU6dDupZ6AzRYhEdmSPmy9rMgXYjSWlET.uw.3oPwQ3T
 cAd_9n1nqLfeftsltDQ7Tu4luL6z17_bxFgLeGJ1dSQu5sU47SYeE1EgOCH8
 _GyHFe.5ybiRCNzDVL2J5eyBHIOahaAHstfcyISio.yXKQKNy1GaP603g7dK
 cUcB8lqHzUd7H1TTjUbG4JOmeF6TTQQp9ap.e8TAjCuAjDWN7ULgruqw-
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.109.295617
Date: Mon, 4 Apr 2011 14:50:41 -0700 (PDT)
From: Garrick Toubassi <gtoubassi@yahoo.com>
Subject: Alternative field compression scheme
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

I am exploring alternative field compression schemes, designed to perform more 
effectively on small documents.  In particular to be more effective compressing 
stored fields that show repetitive structure across fields, but not necessarily 
within a field.  I have been working with a significant index from the ShopStyle 
search/shopping engine, and have achieved compression rates exceeding that of 
gzip.  The work related to this project is at 
https://github.com/gtoubassi/femtozip.

I'd like to connect with lucene users who would benefit from more effective 
compression of their stored fields to assess applicability of femtozip.  Note as 
part of the project I have a simple tool which can analyze an index to compare 
compression rates of femtozip vs gzip 
(https://github.com/gtoubassi/femtozip/wiki/Indexanalyzer).

gt


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 06:25:26 2011
Return-Path: <java-user-return-49295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28314 invoked from network); 5 Apr 2011 06:25:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 06:25:26 -0000
Received: (qmail 83954 invoked by uid 500); 5 Apr 2011 06:25:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83869 invoked by uid 500); 5 Apr 2011 06:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83861 invoked by uid 99); 5 Apr 2011 06:25:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 06:25:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.75.116.14] (HELO mail.wehay.com) (217.75.116.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 06:25:15 +0000
Received: from [192.168.24.69] ([217.75.116.61])
	(authenticated bits=0)
	by mail.wehay.com (8.14.3/8.14.4) with ESMTP id p356OnUJ002972
	for <java-user@lucene.apache.org>; Tue, 5 Apr 2011 08:24:53 +0200
Message-ID: <4D9AB59D.2050001@thorntothehorn.org>
Date: Tue, 05 Apr 2011 16:24:29 +1000
From: Antony Bowesman <adb@thorntothehorn.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: DocIdSet to represent small numberr of hits in large Document set
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I'm converting a Lucene 2.3.2 to 2.4.1 (with a view to going to 2.9.4).

Many of our indexes are 5M+ Documents, however, only a small subset of these are 
relevant to any user.  As a DocIdSet, backed by a BitSet or OpenBitSet, is 
rather inefficient in terms of memory use, what is the recommended way to 
DocIdSet implementation to use in this scenario?

Seems like SortedVIntList can be used to store the info, but it has no methods 
to build the list in the first place, requiring an array or bitset in the 
constructor.

I had used Nutch's DocSet and HashDocSet implementations in my 2.3.2 deployment, 
but want to move away from that Nutch dependency, so wondered if Lucene had a 
way to do this?

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 07:49:33 2011
Return-Path: <java-user-return-49296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10254 invoked from network); 5 Apr 2011 07:49:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 07:49:33 -0000
Received: (qmail 56059 invoked by uid 500); 5 Apr 2011 07:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55885 invoked by uid 500); 5 Apr 2011 07:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55874 invoked by uid 99); 5 Apr 2011 07:49:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 07:49:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 07:49:21 +0000
Received: by vws7 with SMTP id 7so81353vws.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 00:49:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.76.195 with SMTP id m3mr1359829vdw.130.1301989740196; Tue,
 05 Apr 2011 00:49:00 -0700 (PDT)
Received: by 10.220.62.73 with HTTP; Tue, 5 Apr 2011 00:49:00 -0700 (PDT)
Date: Tue, 5 Apr 2011 17:49:00 +1000
Message-ID: <BANLkTinoA7nPPBBu5x+iZcxkK0qoJpLcsQ@mail.gmail.com>
Subject: Question about open files
From: Jean-Baptiste Reure <jbreure@weborganic.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec501602ff7345804a0271b82

--bcaec501602ff7345804a0271b82
Content-Type: text/plain; charset=UTF-8

Hi all,

I have been looking for information about this and found a few things here
and there but nothing very clear on when files are opened and closed by
Lucene.

We have an application that uses Lucene quite heavily in the following
fashion: there are multiple indexes in use at all times. For each index, a
single IndexWriter object is constantly opened (and used to update the
index) and a single IndexReader is also constantly opened. This Reader is
created using the almost real-time reader of the IndexWriter. The Reader is
used to query the index and when the Writer updates an index, the
corresponding reader is re-opened and the previous one is discarded when all
searches using it are finished. Periodically, the index is optimised if it
needs to be (if the writer has been used).

This is all working perfectly fine but we've been running into an issue
recently when we've add a lot of indexes on one server (more than a 1000
indexes). This led to the "Too many open files" exception, so we increased
the number of open files allowed on that server but obviously, it's a
temporary solution.

So we decided to implement a mechanism that would keep only a maximum number
of indexes "open" at all times. When the maximum number is reached, the
least recently used indexes are closed (closing the IndexWriter and the
IndexReader), and if these indexes are needed again in the future, they are
"re-opened".
This is functioning fine as well, as we can see ".lock" files appearing and
disappearing in the index directories, but handles on the segment files are
still in use.

So my question is when are these file handles discarded? I was under the
impression from reading the documentation that closing an IndexReader was
enough to close the files associated with that reader but we went even
further by closing the IndexWriter as well but to no avail. If it should
work that way, it means we have a bug somewhere with readers not being
closed properly but I couldn't find one last time I checked.

Also, do you think it is the right way to go around the "too many open
files" issue? Can you recommend using another method?

Thanks for any help.

JB Reure

--bcaec501602ff7345804a0271b82--

From java-user-return-49297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 09:38:28 2011
Return-Path: <java-user-return-49297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55453 invoked from network); 5 Apr 2011 09:38:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 09:38:28 -0000
Received: (qmail 76693 invoked by uid 500); 5 Apr 2011 09:38:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76260 invoked by uid 500); 5 Apr 2011 09:38:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75727 invoked by uid 99); 5 Apr 2011 09:38:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 09:38:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 09:38:17 +0000
Received: by iwr19 with SMTP id 19so233549iwr.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 02:37:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=kSOkcbVwOWuIQSDmGx4rbxR7RhZOJuuQaDWl7zw5nb0=;
        b=EuTO4+KNo2v0OwcI/w6ttH5FY7SRk+uF8+9IklEQCu/LXdn8B2Uvus4891smHgqREk
         lMm5LXcetwJ92AemMb210NZZWj++Z0IhQQF/bul1jRbLWfUiBpAYWRDpm6zxAx8p/sT9
         Z6o2rgVfaVxRM70ha7fYBHVlUZmYbp7brfuNg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=M6WSDVZN7lfAyJQpI5rcWGKZPrU9258X4W1jtWpNt91f9/kr/yc9ryPNr/hHEcBVk7
         FWgvn9J2/kgl2j1GFAu+ajwNKpVmJ3C3UjDkm1J2JXnWM64GoqYJB0gVvBUiNbkrQG7L
         MH+WoWdnYoABFD/fGcOrIEbottptiN52ygORM=
Received: by 10.43.69.74 with SMTP id yb10mr4473869icb.115.1301996276145; Tue,
 05 Apr 2011 02:37:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.205.143 with HTTP; Tue, 5 Apr 2011 02:37:35 -0700 (PDT)
In-Reply-To: <4D9A46B1.9030400@sdsc.edu>
References: <4D9A46B1.9030400@sdsc.edu>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 5 Apr 2011 10:37:35 +0100
Message-ID: <BANLkTimwoWEVTVJSrfV7rcS2iom_tinVxg@mail.gmail.com>
Subject: Re: Field Aware TokenFilter
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Can you use PerFieldAnalyzerWrapper?  That would be the normal way to
approach this, specifying a different, synonym aware, analyzer for the
relevant field(s).

--
Ian.


On Mon, Apr 4, 2011 at 11:31 PM, Christopher Condit <condit@sdsc.edu> wrote:
> I need to add synonyms to an index depending on the field being indexed.
> I know that TokenFilter is not "field aware", but is there a good way to
> get at the field or do I need to add something to allow my Analyzer to
> tell the TokenFilter which field is currently being examined?
>
> Thanks,
> -Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 09:46:44 2011
Return-Path: <java-user-return-49298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73168 invoked from network); 5 Apr 2011 09:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 09:46:44 -0000
Received: (qmail 88165 invoked by uid 500); 5 Apr 2011 09:46:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87936 invoked by uid 500); 5 Apr 2011 09:46:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87926 invoked by uid 99); 5 Apr 2011 09:46:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 09:46:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 09:46:36 +0000
Received: by wwi18 with SMTP id 18so153148wwi.5
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 02:46:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.9.20 with SMTP id j20mr870505wbj.116.1301996773819; Tue,
 05 Apr 2011 02:46:13 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Tue, 5 Apr 2011 02:46:13 -0700 (PDT)
In-Reply-To: <BANLkTiktyR6S1uZk0ZwF=XiegQKGJMe4GQ@mail.gmail.com>
References: <4D9A168B.5020208@fastmail.fm>
	<BANLkTino475Uokk_DeF_--OqmZaXw6ZTLw@mail.gmail.com>
	<4D9A2332.5070405@fastmail.fm>
	<BANLkTiktyR6S1uZk0ZwF=XiegQKGJMe4GQ@mail.gmail.com>
Date: Tue, 5 Apr 2011 05:46:13 -0400
Message-ID: <BANLkTik6c3_-zh1dgB5jJvNLjXqE-f8WGA@mail.gmail.com>
Subject: Re: Lucene Merge failing on Open Files
From: Michael McCandless <lucene@mikemccandless.com>
To: simon.willnauer@gmail.com
Cc: Simon Willnauer <simon.willnauer@googlemail.com>, java-user@lucene.apache.org, 
	paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Yeah, that mergeFactor is way too high and will cause
too-many-open-files (if the index has enough segments).

Also, you should setRamBufferSizeMB instead of maxBufferedDocs, for
faster index throughput.

Calling optimize from two threads doesn't help it run faster when
using ConcurrentMergeScheduler (the default).  Ie with CMS, optimize
simply waits for CMS to perform all the necessary merges.

Mike

http://blog.mikemccandless.com

On Mon, Apr 4, 2011 at 4:06 PM, Simon Willnauer
<simon.willnauer@googlemail.com> wrote:
> On Mon, Apr 4, 2011 at 9:59 PM, Paul Taylor <paul_t100@fastmail.fm> wrote=
:
>> On 04/04/2011 20:13, Michael McCandless wrote:
>>>
>>> How are you merging these indices? =A0(IW.addIndexes?).
>>>
>>> Are you changing any of IW's defaults, eg mergeFactor?
>>>
>>> Mike
>>
>> Hi Mike
>>
>> I have
>>
>> indexWriter.setMaxBufferedDocs(10000);
>> indexWriter.setMergeFactor(3000);
>>
>
> I didn't read though the entire email but MergeFactor 3000 doesn't
> look right at all. You should try something between 5 and 30. I
> haven't seen a mergeFactor > 50 doing any good in a common env. Why do
> you use such a large factor?
>
> simon
>> these are a hangover from earlier code, I tried changing them and it did=
nt
>> seem to make any difference, but do they look wrong ?
>>
>> The index that falls over during optmizationcreates about 10,000,000 rec=
ords
>>
>> What I do is build 10 different indexes sequentially one after the after=
 (so
>> only one is hitting the db at any one time) but once the index is built =
I
>> optimize the index in the background
>> by creating an instance of the following class and submitting it to =A0a=
n
>> ExecutionService , configured to have at most 2 threads acting
>>
>> I built my own class rather than just using optimize() with the backgrou=
nd
>> option because that wouldnt allow me to do the necessary
>> debugging/calculations
>>
>>
>> static class IndexWriterOptimizerAndClose implements Callable<Boolean>
>> =A0 =A0{
>> =A0 =A0 =A0 =A0private int =A0 =A0 =A0 =A0 =A0 =A0 maxId;
>> =A0 =A0 =A0 =A0private IndexWriter =A0 =A0 indexWriter;
>> =A0 =A0 =A0 =A0private DatabaseIndex =A0 index;
>> =A0 =A0 =A0 =A0private IndexOptions =A0 =A0options;
>>
>> =A0 =A0 =A0 =A0/**
>> =A0 =A0 =A0 =A0 *
>> =A0 =A0 =A0 =A0 * @param maxId
>> =A0 =A0 =A0 =A0 * @param indexWriter
>> =A0 =A0 =A0 =A0 * @param index
>> =A0 =A0 =A0 =A0 * @param options
>> =A0 =A0 =A0 =A0 */
>> =A0 =A0 =A0 =A0public IndexWriterOptimizerAndClose(int maxId, IndexWrite=
r
>> indexWriter, DatabaseIndex index, IndexOptions options)
>> =A0 =A0 =A0 =A0{
>> =A0 =A0 =A0 =A0 =A0 =A0this.maxId=3DmaxId;
>> =A0 =A0 =A0 =A0 =A0 =A0this.indexWriter=3D indexWriter;
>> =A0 =A0 =A0 =A0 =A0 =A0this.index=3Dindex;
>> =A0 =A0 =A0 =A0 =A0 =A0this.options=3Doptions;
>> =A0 =A0 =A0 =A0}
>>
>> =A0 =A0 =A0 =A0public Boolean call() throws IOException, SQLException
>> =A0 =A0 =A0 =A0{
>>
>> =A0 =A0 =A0 =A0 =A0 =A0StopWatch clock =3D new StopWatch();
>> =A0 =A0 =A0 =A0 =A0 =A0clock.start();
>> =A0 =A0 =A0 =A0 =A0 =A0String path =3D options.getIndexesDir() + index.g=
etFilename();
>> =A0 =A0 =A0 =A0 =A0 =A0System.out.println(index.getName()+":Started Opti=
mization at
>> "+Utils.formatCurrentTimeForOutput());
>>
>> =A0 =A0 =A0 =A0 =A0 =A0indexWriter.optimize();
>> =A0 =A0 =A0 =A0 =A0 =A0indexWriter.close();
>> =A0 =A0 =A0 =A0 =A0 =A0clock.stop();
>> =A0 =A0 =A0 =A0 =A0 =A0// For debugging to check sql is not creating too=
 few/many rows
>> =A0 =A0 =A0 =A0 =A0 =A0if(true) {
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0int dbRows =3D index.getNoOfRows(maxId);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexReader reader =3D IndexReader.open(F=
SDirectory.open(new
>> File(path)),true);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println(index.getName()+":"+db=
Rows+" db
>> rows:"+(reader.maxDoc() - 1)+" lucene docs");
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0reader.close();
>> =A0 =A0 =A0 =A0 =A0 =A0}
>> =A0 =A0 =A0 =A0 =A0 =A0System.out.println(index.getName()+":Finished Opt=
imization:" +
>> Utils.formatClock(clock));
>>
>> =A0 =A0 =A0 =A0 =A0 =A0return true;
>> =A0 =A0 =A0 =A0}
>> =A0 =A0}
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 09:49:44 2011
Return-Path: <java-user-return-49299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1116 invoked from network); 5 Apr 2011 09:49:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 09:49:43 -0000
Received: (qmail 95747 invoked by uid 500); 5 Apr 2011 09:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95711 invoked by uid 500); 5 Apr 2011 09:49:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95702 invoked by uid 99); 5 Apr 2011 09:49:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 09:49:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 09:49:35 +0000
Received: by iym1 with SMTP id 1so244238iym.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 02:49:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=IR9jJgwJfk5mqKfnG20ztnU6vh7BeudXpRQ4/FgHGzw=;
        b=BlC9vnIMmcJGa6wvp1V8qYKAjCK+2wdWjjS/b5UgFSrlsia02+vGfjyny64FhwRzLM
         X5hyFFuVxWi49/s4Kn+NrizD/mSZ2788yKuLee7lLpuX7ZdEZKbU61Kt/HPeZlS26GZT
         jvn3Gz606RL5zxEROjtsLa+8wP2wuW5f9Q+c0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=YWmg2OdwoxJj8zemfMLhxqPur8xPvXW06XZveRpChoRA+bN0XcC2gd7w1zqVKRGmZQ
         6U70p4L7z81SI4vx0RpV0yZ0rz6yGSwTO1cLGbheBpT/YuaJoTHP5dBiOahSeRJfiG6L
         SGPimFx1fTJnVlRQmGR082X2CTeRLnLuwG2i4=
Received: by 10.231.9.220 with SMTP id m28mr8260062ibm.109.1301996955117; Tue,
 05 Apr 2011 02:49:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.205.143 with HTTP; Tue, 5 Apr 2011 02:48:55 -0700 (PDT)
In-Reply-To: <BANLkTinoA7nPPBBu5x+iZcxkK0qoJpLcsQ@mail.gmail.com>
References: <BANLkTinoA7nPPBBu5x+iZcxkK0qoJpLcsQ@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 5 Apr 2011 10:48:55 +0100
Message-ID: <BANLkTikM2KPVqzfUvev1rJNrSBfUAk0zAQ@mail.gmail.com>
Subject: Re: Question about open files
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Which version of lucene are you using?  Something changed in the 3.x
release, and maybe 2.9.x, in the way that old file handles are closed.
 Previously it wasn't always necessary to explicitly close everything,
now it is.

Your usage sounds fine to me.  When I've hit too many open files when
using 3.0.x it has always been because something, somewhere, wasn't
being closed.


--
Ian.


On Tue, Apr 5, 2011 at 8:49 AM, Jean-Baptiste Reure
<jbreure@weborganic.com> wrote:
> Hi all,
>
> I have been looking for information about this and found a few things here
> and there but nothing very clear on when files are opened and closed by
> Lucene.
>
> We have an application that uses Lucene quite heavily in the following
> fashion: there are multiple indexes in use at all times. For each index, a
> single IndexWriter object is constantly opened (and used to update the
> index) and a single IndexReader is also constantly opened. This Reader is
> created using the almost real-time reader of the IndexWriter. The Reader is
> used to query the index and when the Writer updates an index, the
> corresponding reader is re-opened and the previous one is discarded when all
> searches using it are finished. Periodically, the index is optimised if it
> needs to be (if the writer has been used).
>
> This is all working perfectly fine but we've been running into an issue
> recently when we've add a lot of indexes on one server (more than a 1000
> indexes). This led to the "Too many open files" exception, so we increased
> the number of open files allowed on that server but obviously, it's a
> temporary solution.
>
> So we decided to implement a mechanism that would keep only a maximum number
> of indexes "open" at all times. When the maximum number is reached, the
> least recently used indexes are closed (closing the IndexWriter and the
> IndexReader), and if these indexes are needed again in the future, they are
> "re-opened".
> This is functioning fine as well, as we can see ".lock" files appearing and
> disappearing in the index directories, but handles on the segment files are
> still in use.
>
> So my question is when are these file handles discarded? I was under the
> impression from reading the documentation that closing an IndexReader was
> enough to close the files associated with that reader but we went even
> further by closing the IndexWriter as well but to no avail. If it should
> work that way, it means we have a bug somewhere with readers not being
> closed properly but I couldn't find one last time I checked.
>
> Also, do you think it is the right way to go around the "too many open
> files" issue? Can you recommend using another method?
>
> Thanks for any help.
>
> JB Reure
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 10:20:30 2011
Return-Path: <java-user-return-49300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83727 invoked from network); 5 Apr 2011 10:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 10:20:30 -0000
Received: (qmail 40472 invoked by uid 500); 5 Apr 2011 10:20:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40439 invoked by uid 500); 5 Apr 2011 10:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40431 invoked by uid 99); 5 Apr 2011 10:20:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 10:20:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 10:20:22 +0000
Received: by wwi18 with SMTP id 18so175585wwi.5
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 03:20:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.10.213 with SMTP id q21mr1168304wbq.144.1301998799913;
 Tue, 05 Apr 2011 03:19:59 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Tue, 5 Apr 2011 03:19:59 -0700 (PDT)
In-Reply-To: <4D9AB59D.2050001@thorntothehorn.org>
References: <4D9AB59D.2050001@thorntothehorn.org>
Date: Tue, 5 Apr 2011 06:19:59 -0400
Message-ID: <BANLkTinow5Pk84PLnDW0J-E07nXuPTrrjw@mail.gmail.com>
Subject: Re: DocIdSet to represent small numberr of hits in large Document set
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Antony Bowesman <adb@thorntothehorn.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Can we simply factor out (poach!) those useful-sounding classes from
Nutch into Lucene?

Mike

http://blog.mikemccandless.com

On Tue, Apr 5, 2011 at 2:24 AM, Antony Bowesman <adb@thorntothehorn.org> wr=
ote:
> I'm converting a Lucene 2.3.2 to 2.4.1 (with a view to going to 2.9.4).
>
> Many of our indexes are 5M+ Documents, however, only a small subset of th=
ese
> are relevant to any user. =A0As a DocIdSet, backed by a BitSet or OpenBit=
Set,
> is rather inefficient in terms of memory use, what is the recommended way=
 to
> DocIdSet implementation to use in this scenario?
>
> Seems like SortedVIntList can be used to store the info, but it has no
> methods to build the list in the first place, requiring an array or bitse=
t
> in the constructor.
>
> I had used Nutch's DocSet and HashDocSet implementations in my 2.3.2
> deployment, but want to move away from that Nutch dependency, so wondered=
 if
> Lucene had a way to do this?
>
> Thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 11:56:42 2011
Return-Path: <java-user-return-49301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91018 invoked from network); 5 Apr 2011 11:56:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 11:56:42 -0000
Received: (qmail 44513 invoked by uid 500); 5 Apr 2011 11:56:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44461 invoked by uid 500); 5 Apr 2011 11:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44447 invoked by uid 99); 5 Apr 2011 11:56:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 11:56:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS,T_FRT_BELOW2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ydabhi@asite.com designates 202.131.102.148 as permitted sender)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 11:56:33 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CBF388.74EC7C16"
Subject: Concurrent Issue
Date: Tue, 5 Apr 2011 17:26:11 +0530
Message-ID: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Concurrent Issue
Thread-Index: AcvziFUjPj1kVrkkQuSnRY6/mTFy1Q==
From: "Yogesh Dabhi" <ydabhi@asite.com>
To: <java-user@lucene.apache.org>

------_=_NextPart_001_01CBF388.74EC7C16
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi

=20

My application is cluster in jobss application servers & lucene
directory was shared.

=20

Concurrently 5 user access same lucene directory for searching document=20

That time I got bellow exception=20

org.apache.lucene.store.AlreadyClosedException: this IndexReader is
closed

=20

is there a way to handle such error

=20

Thanks & Regards

Yogesh


------_=_NextPart_001_01CBF388.74EC7C16--

From java-user-return-49302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 12:25:05 2011
Return-Path: <java-user-return-49302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90473 invoked from network); 5 Apr 2011 12:25:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 12:25:05 -0000
Received: (qmail 75750 invoked by uid 500); 5 Apr 2011 12:25:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75712 invoked by uid 500); 5 Apr 2011 12:25:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 21737 invoked by uid 99); 5 Apr 2011 11:28:01 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tanujjain.mail@gmail.com designates 209.85.214.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=YNBf0dzau1OOnMkko4Ri+VmVdtVpfA1+jHyLPrwXowg=;
        b=E0Y/ph5ZQUvxcMpMWiihp6VhtHaBxJzdf3FFm+FY2GvJzSrWlrwF/zbf5zfd5+YZDd
         ct/IUdj/DO6mxOhCZ8ahk7S3UXKTrDQTus9wXFdVfxgz07yKP6foi1tTnpgtFRHbbk5M
         ApWMLHg8Ym5RDZGCVDIEePdl/7H5lODrTdeCg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=JvJmDuYzbUhakGXrAYf7NY4btiR1FWOVeQHoyOKwX+yGoHgD85dLFfL4AAQz6Meorf
         2b8KMONH+f4oHnWLBiWPPMzu7tLqVYU8H8bVpbbCcOLd+ugSLe0GDLU5DIVcD9c+R5Ws
         af8HbljMgbLNyyemwMy+bXMxbxbS8Vf1b0zYI=
MIME-Version: 1.0
From: Tanuj Jain <tanujjain.mail@gmail.com>
Date: Tue, 5 Apr 2011 16:56:53 +0530
Message-ID: <BANLkTi=TN1o21DR9TReic2eCJ+E7A4OP7A@mail.gmail.com>
Subject: Lucene 3.1
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221534d78b8ee36c04a02a2997
X-Virus-Checked: Checked by ClamAV on apache.org

--00221534d78b8ee36c04a02a2997
Content-Type: text/plain; charset=UTF-8

Hi,
I have downloaded lucene 3.1 and want to use in my program.
I found lot of files that differ/missing from lucene 3.0. Is there any way I
could get those files as a whole rather than searching for each file and
downloading it.

--00221534d78b8ee36c04a02a2997--

From java-user-return-49303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 13:23:11 2011
Return-Path: <java-user-return-49303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80283 invoked from network); 5 Apr 2011 13:23:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 13:23:10 -0000
Received: (qmail 41583 invoked by uid 500); 5 Apr 2011 13:23:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41545 invoked by uid 500); 5 Apr 2011 13:23:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41537 invoked by uid 99); 5 Apr 2011 13:23:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 13:23:08 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 13:22:59 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p35DMaT2008602
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 5 Apr 2011 09:22:38 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Tue, 5 Apr 2011
 09:22:37 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 5 Apr 2011 09:22:43 -0400
Subject: RE: Lucene 3.1
Thread-Topic: Lucene 3.1
Thread-Index: AcvzjIIZjBaPv4WaRvutegPZdy/iQwAByWjw
Message-ID: <2D127F11DC79714E9B6A43AC9458147FA33CF78D@suex07-mbx-03.ad.syr.edu>
References: <BANLkTi=TN1o21DR9TReic2eCJ+E7A4OP7A@mail.gmail.com>
In-Reply-To: <BANLkTi=TN1o21DR9TReic2eCJ+E7A4OP7A@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-05_06:2011-04-05,2011-04-05,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgVGFudWosDQoNCkNhbiB5b3UgYmUgbW9yZSBzcGVjaWZpYz8gIA0KDQpXaGF0IGZpbGUgZGlk
IHlvdSBkb3dubG9hZD8gKEx1Y2VuZSAzLjEgaGFzIHRocmVlIGRvd25sb2FkYWJsZSBwYWNrYWdl
czogLXNyYy50YXIuZ3osIC50YXIuZ3osIGFuZCAuemlwLikgDQoNCldoYXQgZGlkIHlvdSBleHBl
Y3QgdG8gZmluZCB0aGF0IGlzIG5vdCB0aGVyZT8gIChTb21lIGV4YW1wbGVzIHdvdWxkIGhlbHAu
KQ0KDQpTdGV2ZQ0KDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IFRhbnVq
IEphaW4gW21haWx0bzp0YW51amphaW4ubWFpbEBnbWFpbC5jb21dDQo+IFNlbnQ6IFR1ZXNkYXks
IEFwcmlsIDA1LCAyMDExIDc6MjcgQU0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiBTdWJqZWN0OiBMdWNlbmUgMy4xDQo+IA0KPiBIaSwNCj4gSSBoYXZlIGRvd25sb2FkZWQg
bHVjZW5lIDMuMSBhbmQgd2FudCB0byB1c2UgaW4gbXkgcHJvZ3JhbS4NCj4gSSBmb3VuZCBsb3Qg
b2YgZmlsZXMgdGhhdCBkaWZmZXIvbWlzc2luZyBmcm9tIGx1Y2VuZSAzLjAuIElzIHRoZXJlIGFu
eSB3YXkNCj4gSQ0KPiBjb3VsZCBnZXQgdGhvc2UgZmlsZXMgYXMgYSB3aG9sZSByYXRoZXIgdGhh
biBzZWFyY2hpbmcgZm9yIGVhY2ggZmlsZSBhbmQNCj4gZG93bmxvYWRpbmcgaXQuDQo=


From java-user-return-49304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 13:47:26 2011
Return-Path: <java-user-return-49304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64746 invoked from network); 5 Apr 2011 13:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 13:47:25 -0000
Received: (qmail 83450 invoked by uid 500); 5 Apr 2011 13:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83394 invoked by uid 500); 5 Apr 2011 13:47:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83386 invoked by uid 99); 5 Apr 2011 13:47:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 13:47:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 13:47:16 +0000
Received: by iwr19 with SMTP id 19so511415iwr.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 06:46:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=B13BBEdf72SI4SMsAPOBphVRyZz3P+3y6+gR6blrMmg=;
        b=cHABykmo7mNmYCim+0eYsR+Ffzhf23gD5Wo9DcHLkBc7OP/vJV+2Kv8MYePQDGtsjn
         Nt4fHBO8wfoSjEJ72HrxddTe+xWksstFM1ASTVWr0512IzGro13hcLey+dQq5iNLAT3v
         8DfHKk7FN5u3NoMcJb1nFU4D5uTzduREqLHB0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=YuDNvv79/Zev/V5W27NI0B+p9vQXxPRYFbiTZ7gkXxGi+9ZipTLsZJfI9tI+xlOtDC
         niciN8c963aj76hQQbkMQzvejnRhyqkIiaba98vaM9dCtlxNx8Fkwgp38UIpupDLbdDK
         b40mBMI+leMF/kV9y1Z0Fi8BGi6kxWMMmPrFk=
Received: by 10.43.59.72 with SMTP id wn8mr6001399icb.48.1302011215136; Tue,
 05 Apr 2011 06:46:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.205.143 with HTTP; Tue, 5 Apr 2011 06:46:35 -0700 (PDT)
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 5 Apr 2011 14:46:35 +0100
Message-ID: <BANLkTikO36A9xcLMXqZe8aNeA5=ogvS8Eg@mail.gmail.com>
Subject: Re: Concurrent Issue
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

You don't say exactly how you are dealing with the concurrent access
(one shared Reader/Searcher? Each user with own Reader/Searcher?
Something else?) but the underlying problem is that the reader has
been closed while something else is still using it.  This can easily
happen in a multi-threaded setup: thread A might close the reader
while thread B is still using it.

Options include

 not closing the old reader straight away when open a new one, but
instead stash it somewhere and close it later when you can be
confident nothing else will be using it.

 using the SearcherManager class from Lucene In Action 2nd edition, or
an equivalent.

 catching the AlreadyClosed exception and restarting the search with a
current reader


--
Ian.


On Tue, Apr 5, 2011 at 12:56 PM, Yogesh Dabhi <ydabhi@asite.com> wrote:
> Hi
>
>
>
> My application is cluster in jobss application servers & lucene
> directory was shared.
>
>
>
> Concurrently 5 user access same lucene directory for searching document
>
> That time I got bellow exception
>
> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
> closed
>
>
>
> is there a way to handle such error
>
>
>
> Thanks & Regards
>
> Yogesh
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 14:06:57 2011
Return-Path: <java-user-return-49305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43859 invoked from network); 5 Apr 2011 14:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 14:06:56 -0000
Received: (qmail 25230 invoked by uid 500); 5 Apr 2011 14:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25174 invoked by uid 500); 5 Apr 2011 14:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25166 invoked by uid 99); 5 Apr 2011 14:06:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 14:06:54 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 14:06:48 +0000
Received: by wyb40 with SMTP id 40so494115wyb.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 07:06:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=4iv1Emrv/U0IHWHro8hRcKYRUp0IjlPPeGKTu37WO3w=;
        b=kC8fMVpWYgoMrqJExWth0ISkx4tLmoHd7mQIKqg3gbDbVIYWfTGMRB2Vo8jaBYojGL
         hg3/N1Y8TirDIE34jBV+9YtMmlJrTzh5d117+r4KfpSpDehvd96jzXPDk9+pYaNquuq4
         b4SiyRKv5u0XAbLXEFN+1U1DqUGGZEUyE13dE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Ib9M6TWeHOnPBJG9+/AvDUsfE/zY/nVzjZC5+DV7/KDT9AFw7mANBVe4HUf/Q4muLs
         bkkHaWZ0KKeP3z778vPiuyia+OZDCi8wEJFV+1Q+P50nUUJR7j0SjX5xkbeMlGLZf13m
         eqHbAo46L9ZhZC82vmFJxbabivZF+FGCDz040=
MIME-Version: 1.0
Received: by 10.216.69.196 with SMTP id n46mr992762wed.30.1302012387071; Tue,
 05 Apr 2011 07:06:27 -0700 (PDT)
Received: by 10.216.151.39 with HTTP; Tue, 5 Apr 2011 07:06:26 -0700 (PDT)
Date: Tue, 5 Apr 2011 17:06:26 +0300
Message-ID: <BANLkTik4DDmX1GnnyKkhhTAP4mq6CVGZBQ@mail.gmail.com>
Subject: Retrieving the first document in a range
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd61dd4d31ac104a02c619d

--000e0cd61dd4d31ac104a02c619d
Content-Type: text/plain; charset=ISO-8859-1

Hi

We have a date field which is indexed as NumericField<Long> and we'd like to
get the first docid that is since 3 weeks ago. Currently we're doing
something like this:

{code}
Query q = NumericRangeQuery.newLongRange("date", timeBefore3Weeks,
System.currentTimeMillis(), true, true);
Scorer s = q.weight(searcher).scorer(reader, true, false);
int doc = s.nextDoc();
if (doc == DISI.NO_MORE_DOCS) {
  // no docs since last 3 weeks
} else {
  // do something
}
{code}

Is there a more efficient way to achieve this?

Can we use TermEnum to skip to the first term 'after 3 weeks'? If so, we can
pull the first doc that appears in the TermDocs of that Term (if it's a
valid term). I'm not sure though that we can use the lexicon with numeric
fields this way ...

Thanks
Shai

--000e0cd61dd4d31ac104a02c619d--

From java-user-return-49306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 14:36:58 2011
Return-Path: <java-user-return-49306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36860 invoked from network); 5 Apr 2011 14:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 14:36:57 -0000
Received: (qmail 65607 invoked by uid 500); 5 Apr 2011 14:36:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65541 invoked by uid 500); 5 Apr 2011 14:36:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65533 invoked by uid 99); 5 Apr 2011 14:36:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 14:36:55 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 14:36:47 +0000
Received: by fxm7 with SMTP id 7so465735fxm.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 07:36:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to:cc
         :content-type;
        bh=/5WkNWoEGjZiscfbfWW6AU1YGmcNU1zC3feXKNzM9s0=;
        b=dSjLVJma7FPmqYZQHq2htrbT43n5LUPI3Om0MR1D+68P3qXsYM4jhX0pUfnDsPI3/K
         Z52IUldphIIMI26xLRqc9oxqaSm7jfTr/QhUJOPrFSRWMEkvpocqyZfoS7f1HUkw85x2
         fwZ2777DjPUZoRVOmGquNeX9JYx0cXTcBkDD8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:cc:content-type;
        b=JAP2doLJKRUIGK/2NH5zNhy76DrfYRst9bGxfTgW/qz7hLgJH3D4rqOno5aNvJa1iq
         F6m8E29pCn6L2q4dP7Yre2ODr6vnqoaIAv8sN3TMwIrNscOqPtiiGiHoPtSBdvAnWZRI
         R+5aI+KIxsy4T+PfMGAOtPHRuu8JFUTMeVoiU=
MIME-Version: 1.0
Received: by 10.223.160.5 with SMTP id l5mr1017134fax.85.1302014187613; Tue,
 05 Apr 2011 07:36:27 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.223.111.79 with HTTP; Tue, 5 Apr 2011 07:36:27 -0700 (PDT)
In-Reply-To: <BANLkTik4DDmX1GnnyKkhhTAP4mq6CVGZBQ@mail.gmail.com>
References: <BANLkTik4DDmX1GnnyKkhhTAP4mq6CVGZBQ@mail.gmail.com>
Date: Tue, 5 Apr 2011 10:36:27 -0400
X-Google-Sender-Auth: tE2ucEieHrImkSphHkC-QE3erLE
Message-ID: <BANLkTikdjq34dike8epHeUBD9tJfsb3xpw@mail.gmail.com>
Subject: Re: Retrieving the first document in a range
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Cc: Shai Erera <serera@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Apr 5, 2011 at 10:06 AM, Shai Erera <serera@gmail.com> wrote:
> Can we use TermEnum to skip to the first term 'after 3 weeks'? If so, we can
> pull the first doc that appears in the TermDocs of that Term (if it's a
> valid term).

Yep.  Try this to get the term you want to use to seek:
        BytesRef term = new BytesRef();
        NumericUtils.longToPrefixCoded(longval, 0, term);


-Yonik
http://www.lucenerevolution.org -- Lucene/Solr User Conference, May
25-26, San Francisco

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 14:54:13 2011
Return-Path: <java-user-return-49307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84471 invoked from network); 5 Apr 2011 14:54:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 14:54:12 -0000
Received: (qmail 91092 invoked by uid 500); 5 Apr 2011 14:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91044 invoked by uid 500); 5 Apr 2011 14:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91036 invoked by uid 99); 5 Apr 2011 14:54:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 14:54:10 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 14:54:04 +0000
Received: by iym1 with SMTP id 1so599144iym.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 07:53:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=Sm2oGf5GYCm5XxgKe04xWbgN0JAjYvVOqa46sTA0wt8=;
        b=Fq6ycKUaGWAThXn8pKBLWxsHmZm+NcPrMArnuv1isdBZc676JSrS7epY8bIUeYPGR+
         ThnqVEFFgajAhxEEOs+NfzlKpuB+y7PCQFmRVHRx+3BlVlCGqzbe3ODu+yJ8C6pp4RvV
         P4bT9p0I83pSbUOBIHlEHhwoqk7PQal2zkpbQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        b=mnmSPqHDVjsSKHNLSZJUP1DDf+vFa5gemomic8/2goywzqPm4GFHL/zQMOZ0anJlNv
         mSe1lvbYIckFsCM7pgOqLDebCCyffvASS2bzs2yZ4tsqvmR7UZ5KfwhDLmNd0erHZkAV
         GA3AZYRfVG0xdF2UG2ervwPjiqlSgqPkump64=
MIME-Version: 1.0
Received: by 10.231.8.18 with SMTP id f18mr8656048ibf.44.1302015224101; Tue,
 05 Apr 2011 07:53:44 -0700 (PDT)
Received: by 10.231.34.74 with HTTP; Tue, 5 Apr 2011 07:53:44 -0700 (PDT)
In-Reply-To: <BANLkTinow5Pk84PLnDW0J-E07nXuPTrrjw@mail.gmail.com>
References: <4D9AB59D.2050001@thorntothehorn.org>
	<BANLkTinow5Pk84PLnDW0J-E07nXuPTrrjw@mail.gmail.com>
Date: Tue, 5 Apr 2011 07:53:44 -0700
Message-ID: <BANLkTinX4se2zExeXUQdBEQ2dNv3eHx=hg@mail.gmail.com>
Subject: Re: DocIdSet to represent small numberr of hits in large Document set
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Cc: Michael McCandless <lucene@mikemccandless.com>, Antony Bowesman <adb@thorntothehorn.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I think Solr has a HashDocSet implementation?

On Tue, Apr 5, 2011 at 3:19 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Can we simply factor out (poach!) those useful-sounding classes from
> Nutch into Lucene?
>
> Mike
>
> http://blog.mikemccandless.com
>
> On Tue, Apr 5, 2011 at 2:24 AM, Antony Bowesman <adb@thorntothehorn.org> =
wrote:
>> I'm converting a Lucene 2.3.2 to 2.4.1 (with a view to going to 2.9.4).
>>
>> Many of our indexes are 5M+ Documents, however, only a small subset of t=
hese
>> are relevant to any user. =A0As a DocIdSet, backed by a BitSet or OpenBi=
tSet,
>> is rather inefficient in terms of memory use, what is the recommended wa=
y to
>> DocIdSet implementation to use in this scenario?
>>
>> Seems like SortedVIntList can be used to store the info, but it has no
>> methods to build the list in the first place, requiring an array or bits=
et
>> in the constructor.
>>
>> I had used Nutch's DocSet and HashDocSet implementations in my 2.3.2
>> deployment, but want to move away from that Nutch dependency, so wondere=
d if
>> Lucene had a way to do this?
>>
>> Thanks
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 15:02:06 2011
Return-Path: <java-user-return-49308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 867 invoked from network); 5 Apr 2011 15:02:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 15:02:05 -0000
Received: (qmail 2825 invoked by uid 500); 5 Apr 2011 15:02:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2732 invoked by uid 500); 5 Apr 2011 15:02:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2724 invoked by uid 99); 5 Apr 2011 15:02:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 15:02:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 15:01:56 +0000
Received: by fxm7 with SMTP id 7so502489fxm.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 08:01:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:reply-to:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to:cc
         :content-type;
        bh=mxySiJfmteD1KBTydgHXVU0FYbtnTaKKff3bcDyLh0c=;
        b=W6lDp8A9IcoluAbCFsdVb9nVVWjlGrlSboyIIkgMCNtV9FbY5CwsgMH6n27oKqhhNp
         DsCwQfvADkfD8OUufdSmi7QSnoOmVeZDAO0MrFYVZoNdD+kfDmkB3klFZNob4sFphPOX
         Hz/pqfIl4zoo9PfIREaGz2lGJR7w41c6Uvll4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:cc:content-type;
        b=K+osDdCTOeb2DjU40xXesd+z4bYsNMbLY/C2E+CpNGzaVcjGAnx/ulVS2fDA2h5dFj
         v9OaMlVpedvBUty4iXDQje37BJr+auPO3EeXzhbDNC6Y4Y0brN2NkNL2+ltsoueBMfDw
         Jokdl4YCfzqSM1FzenwGyNVmAFXOP/u43SeXw=
MIME-Version: 1.0
Received: by 10.223.125.196 with SMTP id z4mr4838067far.28.1302015695723; Tue,
 05 Apr 2011 08:01:35 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.223.111.79 with HTTP; Tue, 5 Apr 2011 08:01:35 -0700 (PDT)
In-Reply-To: <4D9AB59D.2050001@thorntothehorn.org>
References: <4D9AB59D.2050001@thorntothehorn.org>
Date: Tue, 5 Apr 2011 11:01:35 -0400
X-Google-Sender-Auth: zW856RezSB5GXCxFJpQ6-U_m6Ok
Message-ID: <BANLkTi=CoQMkNWDYe5PgnvWcPHnbQW8EQA@mail.gmail.com>
Subject: Re: DocIdSet to represent small numberr of hits in large Document set
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Cc: Antony Bowesman <adb@thorntothehorn.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Apr 5, 2011 at 2:24 AM, Antony Bowesman <adb@thorntothehorn.org> wrote:
> Seems like SortedVIntList can be used to store the info, but it has no
> methods to build the list in the first place, requiring an array or bitset
> in the constructor.

It has a constructor that takes DocIdSetIterator - so you can pass an
iterator obtained from anywhere else (a Scorer actually is a
DocIdSetIterator, and you can get a DocIdSet from a Filter), or
implement your own.  It's a simple iterator interface.


-Yonik
http://www.lucenerevolution.org -- Lucene/Solr User Conference, May
25-26, San Francisco

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 15:06:11 2011
Return-Path: <java-user-return-49309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39245 invoked from network); 5 Apr 2011 15:06:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 15:06:10 -0000
Received: (qmail 12302 invoked by uid 500); 5 Apr 2011 15:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12245 invoked by uid 500); 5 Apr 2011 15:06:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12237 invoked by uid 99); 5 Apr 2011 15:06:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 15:06:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 15:06:01 +0000
Received: by wwi18 with SMTP id 18so405854wwi.5
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 08:05:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.181.1 with SMTP id bw1mr5647006wbb.202.1302015941103; Tue,
 05 Apr 2011 08:05:41 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Tue, 5 Apr 2011 08:05:40 -0700 (PDT)
In-Reply-To: <BANLkTinX4se2zExeXUQdBEQ2dNv3eHx=hg@mail.gmail.com>
References: <4D9AB59D.2050001@thorntothehorn.org>
	<BANLkTinow5Pk84PLnDW0J-E07nXuPTrrjw@mail.gmail.com>
	<BANLkTinX4se2zExeXUQdBEQ2dNv3eHx=hg@mail.gmail.com>
Date: Tue, 5 Apr 2011 11:05:40 -0400
Message-ID: <BANLkTin+j_=14T7b-K3p9XkEHz7ip4UFdw@mail.gmail.com>
Subject: Re: DocIdSet to represent small numberr of hits in large Document set
From: Michael McCandless <lucene@mikemccandless.com>
To: Jason Rutherglen <jason.rutherglen@gmail.com>
Cc: java-user@lucene.apache.org, Antony Bowesman <adb@thorntothehorn.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This (HashDocSet, and any other impls that handle the sparse case
well) could be useful to have in Lucene's core.

For example, for certain MultiTermQuerys  we have this
CONSTANT_SCORE_AUTO_REWRITE, which has iffy smelling heuristics to try
to determine the best cutover point from
ConstantScoreQuery(BooleanQuery(<OR of Terms>)) to FILTER_REWRITE,
because FILTER_REWRITE is costly in the sparse case.

Mike

http://blog.mikemccandless.com

On Tue, Apr 5, 2011 at 10:53 AM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> I think Solr has a HashDocSet implementation?
>
> On Tue, Apr 5, 2011 at 3:19 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> Can we simply factor out (poach!) those useful-sounding classes from
>> Nutch into Lucene?
>>
>> Mike
>>
>> http://blog.mikemccandless.com
>>
>> On Tue, Apr 5, 2011 at 2:24 AM, Antony Bowesman <adb@thorntothehorn.org>=
 wrote:
>>> I'm converting a Lucene 2.3.2 to 2.4.1 (with a view to going to 2.9.4).
>>>
>>> Many of our indexes are 5M+ Documents, however, only a small subset of =
these
>>> are relevant to any user. =A0As a DocIdSet, backed by a BitSet or OpenB=
itSet,
>>> is rather inefficient in terms of memory use, what is the recommended w=
ay to
>>> DocIdSet implementation to use in this scenario?
>>>
>>> Seems like SortedVIntList can be used to store the info, but it has no
>>> methods to build the list in the first place, requiring an array or bit=
set
>>> in the constructor.
>>>
>>> I had used Nutch's DocSet and HashDocSet implementations in my 2.3.2
>>> deployment, but want to move away from that Nutch dependency, so wonder=
ed if
>>> Lucene had a way to do this?
>>>
>>> Thanks
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 16:44:55 2011
Return-Path: <java-user-return-49310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38480 invoked from network); 5 Apr 2011 16:44:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 16:44:55 -0000
Received: (qmail 2359 invoked by uid 500); 5 Apr 2011 16:44:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2324 invoked by uid 500); 5 Apr 2011 16:44:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 72692 invoked by uid 99); 3 Apr 2011 23:54:08 -0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com.br; s=s1024; t=1301874817; bh=2Wn9RbO+MYhUTBm2UHzqhlZPZcCZilY7wHZGbzxgaEY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=cMXxCAmvy4Ug2LLZdVfbIP+SBFH5kQQ5e1M76Pq5+2q+LLWE/bNfi0ZDPXomqjeZMuUsZvwPL19MOGPNYN95xg7fAVGoL6vIfNapdfYKB4un0twEllXf5ll9ZIAix76p89SVBoXGL7HVj8C03gFL+R4YUNvh3wURZJ+R11NSpwE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.br;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=2loVmwRHgnN/L+04XN/Z5jBBwXzJiH1ohEzAxTSwP6sSEx4Rb91evh+beWWNg9dBksxZGTZUhChQhn/7pcFDlsrgdW2Zg0pbVPE2A6628y79vAkh28ITCW2TuoLi635DFxle7FBVnOrW01dUHScOtsfUrFbvg/QrDeaEHhCgUpw=;
Message-ID: <456619.41899.qm@web44801.mail.sp1.yahoo.com>
X-YMail-OSG: ggt2FhUVM1kpJ8aB924mzUTnZ1IVAwanL12ZRZ9YjfSYCV6
 aM_WVWcua7HQB8vtkzroOL8p3rZ67xR05kcl18n_L025rrhua1CXL28MIVqh
 uSeMtIckXKlKYAuptb1Bd32hNvjZC1oitavb_Xmvji4s6kX5p8kg_s9AiPa2
 Agfdf.azik0Ky9ap0Ivdo4OlHJhIPbjvQgg1pnzXtAztHPrTdnr1nrCXGrEA
 f2ialhec5n1snFTvYaoEwu..rs.3Y95rKq1E0nkVdsIu1bBkGn.F4YoDUzX5
 Uo_l2F82o0n3U5w_SCVzQ3OCAyMOE80pX3pXt_VsA5OFKARyfhDJN6n8Ol.k
 9uIZXSk_jJQhWC2JFOUhdnO_JGn_8pDc-
X-Mailer: YahooMailClassic/12.0.2 YahooMailWebService/0.8.109.295617
Date: Sun, 3 Apr 2011 16:53:37 -0700 (PDT)
From: Claudio R <usertec@yahoo.com.br>
Subject: OutOfMemoryError with FSDirectory
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-609391160-1301874817=:41899"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-609391160-1301874817=:41899
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

I am using Lucene 2.9.4 with FSDirectory.
My index has 80 thousand documents (each document has 12 fields).
My jvm has 70Mb of RAM memory (limited by my hosting).
I am getting various OutOfMemoryError.
I ran jmap and I got:

num=A0=A0=A0=A0=A0=A0 #instances=A0=A0=A0 #bytes=A0=A0=A0 Class description
--------------------------------------------------------------------------
1:=A0=A0=A0=A0=A0=A0=A0 275926=A0=A0=A0 32074080=A0=A0=A0 char[]
2:=A0=A0=A0=A0=A0=A0=A0 657724=A0=A0=A0 31570752=A0=A0=A0 org.apache.lucene=
.index.FreqProxTermsWriter$PostingList
3:=A0=A0=A0=A0=A0=A0=A0 200=A0=A0=A0 16094896=A0=A0=A0 org.apache.lucene.in=
dex.RawPostingList[]

The Lucene is consuming 47Mb of RAM memory.
Why there is this excessive memory consumption in FSDirectory?
Thanks.


--0-609391160-1301874817=:41899--

From java-user-return-49311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 16:45:16 2011
Return-Path: <java-user-return-49311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40327 invoked from network); 5 Apr 2011 16:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 16:45:15 -0000
Received: (qmail 4400 invoked by uid 500); 5 Apr 2011 16:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4287 invoked by uid 500); 5 Apr 2011 16:45:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 93505 invoked by uid 99); 4 Apr 2011 00:34:20 -0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com.br; s=s1024; t=1301877229; bh=y1oQ3rSfSQs5icanuCr3IebagkR8hyAJDyXtlnImFLA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=ZfvjmQH6e48M8hxKYtnWJFdNXbbiEb7wT6q3ov25XzDmjFDCEi1KBO3NvENiuwFnGQeE1wM7HwN3wKU6YLGj1fcRLRSbvuXY6GrAi0zM8wcMiwcwdmetDBs+E+A2J5+Ay1/yuWGgCJzsBirKtLLhK4YPl9lwqMGzR0RUnyF4Q3s=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.br;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=6CcA92YKB1CaOHvMcNE30uiTllT7zSI458/2ncGjDY7USeLI38K4i0rmWLpUSe5eTl8GOYhG7HOtkRgIm4KX/InkWKKNygXJBw+Qi+wxRruPV21bhyvdczE2ky2o5JTsRU1FZTEDyssSJuERKABFrZp5WYvFYZBfPc317ZyV9Gg=;
Message-ID: <278178.91949.qm@web44801.mail.sp1.yahoo.com>
X-YMail-OSG: RsmzYyUVM1nkE0LO1XaD9viI9fMEd9M4f96dIMbcSnzZ3d3
 z67nVOiJ7ipx4xwDWYdV.aYrz_lB41qtv8v7p2KuoA5iyh0pkRQKNK60O45_
 ZmnH9ZVW9t76qPr4wAhjpa7zluYKNappFBbJVeC_YoNCFQ8wKVH2sD7xUiI.
 oPydUEb3nA88fJvMNJGcaImZ5fHAmTqaQPqN3ASwOB3TETKKKlXGAVHIUnmS
 HgREaI9MDXdXCg91M8VpgO69BA.CKHNR5YFqe15v3glzQcgAthzbm6O8JEmV
 ZKz2wrmoE0g8fWgLMKW9KXrvPFMen0nR40f8JyKRX2BhHiGxzid4CTVQ-
X-Mailer: YahooMailClassic/12.0.2 YahooMailWebService/0.8.109.295617
Date: Sun, 3 Apr 2011 17:33:49 -0700 (PDT)
From: Claudio R <usertec@yahoo.com.br>
Subject: OutOfMemoryError with FSDirectory
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1016547136-1301877229=:91949"

--0-1016547136-1301877229=:91949
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

I am using Lucene 2.9.4 with FSDirectory.
My index has 80 thousand documents (each document has 12 fields).
My jvm has 70Mb of RAM memory (limited by my hosting).
I am getting various OutOfMemoryError.
I ran jmap and I got:

num=A0=A0=A0=A0=A0=A0 #instances=A0=A0=A0 #bytes=A0=A0=A0 Class description
--------------------------------------------------------------------------
1:=A0=A0=A0=A0=A0=A0=A0 275926=A0=A0=A0 32074080=A0=A0=A0 char[]
2:=A0=A0=A0=A0=A0=A0=A0 657724=A0=A0=A0 31570752=A0=A0=A0 org.apache.lucene=
.index.FreqProxTermsWriter$PostingList
3:=A0=A0=A0=A0=A0=A0=A0 200=A0=A0=A0 16094896=A0=A0=A0 org.apache.lucene.in=
dex.RawPostingList[]

The Lucene is=0A consuming 47Mb of RAM memory.
Why there is this excessive memory consumption in FSDirectory?
Thanks.
--0-1016547136-1301877229=:91949--

From java-user-return-49312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 16:45:31 2011
Return-Path: <java-user-return-49312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42131 invoked from network); 5 Apr 2011 16:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 16:45:30 -0000
Received: (qmail 6383 invoked by uid 500); 5 Apr 2011 16:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6260 invoked by uid 500); 5 Apr 2011 16:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 4605 invoked by uid 99); 4 Apr 2011 10:46:51 -0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com.br; s=s1024; t=1301913573; bh=wO8+IbtYrxU5hetcd7K5o0kCUeULD9s2L9V2ZMMdQj0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=MF5Aa+G+rHPNuHjqjpp985hgPKF2CWYb4JezsK2qRzDtmwET3SbGtmNYfmZY8ta0muCqpj4JCH04eNH0b+72tP4XLD/rLifWRChON/23Kw496rak3vZGTiHQ9k9vo1FYlGmqgqJ9gA97cIyoPIhlZb4bA8Dteu0RD8J1sXR39mI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.br;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=VZc0z3hDnNqrm9IQdv8yS6UtUtf9voOqoo8//vYgmU5A8co52rP9GUxmjh+n35hL/6aVyTTm8vG9TxGk3LD6VWUgtV6l7mt4P8LlNG+WOVRDgxIYsiQXDydqmMbXVJ/x6s/WkpFJi/LbhgZ1ntOdPq/63cyvARd42+BpWitHitM=;
Message-ID: <209712.40888.qm@web44812.mail.sp1.yahoo.com>
X-YMail-OSG: ogzEznkVM1mg5FHDOcYGEOb2nbmQUJrbNh2aWYCFJu5czJY
 Utzc7CTDiPUsWEMhVdyJ7CszTYtGA6pgBqCZaSZ7IwRCPGxUJTmC7VLX9TTI
 T4iA9s_eIc6qss6_WM8T4GYs5IbWUvvdUC76Mzr6Ur23zVZf5zYnWob3vL4y
 Nxj29blKhO8fyITWq9TWD6JwRT3mboYkqNbH_wT9M0e0JaBAdOMZAQ8UX1ST
 Rgs9D2S1CTE9PzzHBI3CS5nSv2_NBPJiVo2CmFT7Lm4N0uJLSXzfiNuIeFTh
 KwsE.itUNWLxz7E3WvkmjkvEKzK.vXASPenChoAfU01rysDJ8jyhCOMZkayX
 SS_Ig9wzmO_XGQtjSy1S0MfE48ze0NTE-
X-Mailer: YahooMailClassic/12.0.2 YahooMailWebService/0.8.109.295617
Date: Mon, 4 Apr 2011 03:39:33 -0700 (PDT)
From: Claudio R <usertec@yahoo.com.br>
Subject: OutOfMemoryError with FSDirectory
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1178265129-1301913573=:40888"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1178265129-1301913573=:40888
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

I am using Lucene 2.9.4 with FSDirectory.
My index has 80 thousand documents (each document has 12 fields).
My jvm has 70Mb of RAM memory (limited by my hosting).
I am getting various OutOfMemoryError.
I ran jmap and I got:

num=A0=A0=A0=A0=A0=A0 #instances=A0=A0=A0 #bytes=A0=A0=A0 Class description
--------------------------------------------------------------------------
1:=A0=A0=A0=A0=A0=A0=A0 275926=A0=A0=A0 32074080=A0=A0=A0 char[]
2:=A0=A0=A0=A0=A0=A0=A0 657724=A0=A0=A0 31570752=A0=A0=A0 org.apache.lucene=
.index.FreqProxTermsWriter$PostingList
3:=A0=A0=A0=A0=A0=A0=A0 200=A0=A0=A0 16094896=A0=A0=A0 org.apache.lucene.in=
dex.RawPostingList[]

The Lucene is
 consuming 47Mb of RAM memory.
Why there is this excessive memory consumption in FSDirectory?
Is it correct?
Thanks.
--0-1178265129-1301913573=:40888--

From java-user-return-49313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 16:46:24 2011
Return-Path: <java-user-return-49313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49986 invoked from network); 5 Apr 2011 16:46:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 16:46:23 -0000
Received: (qmail 9462 invoked by uid 500); 5 Apr 2011 16:46:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9301 invoked by uid 500); 5 Apr 2011 16:46:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 69182 invoked by uid 99); 5 Apr 2011 13:37:16 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of talsteier@gmail.com designates 209.85.216.169 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=25zIrBQdwjimeVK2YJLaJ2Z6LZMsvCckBLLWvZFsstk=;
        b=jyKeu7EMKbHVigDtxxdRUT2oXYD0xJN8c9p8GMZOyzM8OytTAnFvIAXlv+mH6S/iH4
         z7QsnyYPfhE9ikwTHaVvL8C9yg1gEZN06QN+xxMyrdf/Qm8e075T8XL/eRFnSbJm/KPS
         CertUrLvWY3YQG8tAJ5Q+417rirBf2OgbHbbU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=leQlqE01KcqSX9X1AvnBlmH6RDWgPxuqjNz6i6d/Rts8RBqX3/3VsdM89K4eJEgLI5
         8/MHXtvQEE/+mVtaJRcseJ46O2OQUqhBWluyBXVeIW0B+FrXLCdnBdEXhHjIg6obAGq4
         D9SgeM+vBjVjWWjP1bvIUZfaX/i94SxUgTnaQ=
MIME-Version: 1.0
Date: Tue, 5 Apr 2011 16:36:48 +0300
Message-ID: <BANLkTi=BkwDKOZOmJvpsme3SXpv4Wgcb1A@mail.gmail.com>
Subject: finding the first document created since 3 weeks ago - Numeric Field
From: tal steier <talsteier@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485eba598d62c9f04a02bf71a

--001485eba598d62c9f04a02bf71a
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I'm indexing a time stamp for every document, using a Numeric Field.
Was wandering if there's a correct way to find the first document newer then
a specific date (say 3 weeks ago).

I know I can perform a range search for a range starting 3 weeks ago and
ending now, but was wandering if there is a more efficient way.

Thank you,
Tal Steier

--001485eba598d62c9f04a02bf71a--

From java-user-return-49314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 17:04:25 2011
Return-Path: <java-user-return-49314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24165 invoked from network); 5 Apr 2011 17:04:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 17:04:24 -0000
Received: (qmail 77135 invoked by uid 500); 5 Apr 2011 17:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77098 invoked by uid 500); 5 Apr 2011 17:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77090 invoked by uid 99); 5 Apr 2011 17:04:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 17:04:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 17:04:17 +0000
Received: by wwi18 with SMTP id 18so506649wwi.5
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 10:03:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.153.71 with SMTP id j7mr9075045wbw.86.1302023034961; Tue,
 05 Apr 2011 10:03:54 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Tue, 5 Apr 2011 10:03:54 -0700 (PDT)
In-Reply-To: <209712.40888.qm@web44812.mail.sp1.yahoo.com>
References: <209712.40888.qm@web44812.mail.sp1.yahoo.com>
Date: Tue, 5 Apr 2011 13:03:54 -0400
Message-ID: <BANLkTikV0x5U-hFmB_bRAvgyQo6a5dg0fw@mail.gmail.com>
Subject: Re: OutOfMemoryError with FSDirectory
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Claudio R <usertec@yahoo.com.br>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Try 1) reducing the RAM buffer of your IndexWriter
(IndexWriter.setRAMBufferSizeMB), 2) using a term divisor when opening
your reader (pass 2 or 3 or 4 as termInfosIndexDivisor when opening
IndexReader), and 3) disabling norms or not indexing as many fields as
possible.

70Mb is not that much RAM to work with, but, for only 80K docs it
should be possible as long as the docs are not large.

Mike

http://blog.mikemccandless.com

On Mon, Apr 4, 2011 at 6:39 AM, Claudio R <usertec@yahoo.com.br> wrote:
> Hi,
>
> I am using Lucene 2.9.4 with FSDirectory.
> My index has 80 thousand documents (each document has 12 fields).
> My jvm has 70Mb of RAM memory (limited by my hosting).
> I am getting various OutOfMemoryError.
> I ran jmap and I got:
>
> num=A0=A0=A0=A0=A0=A0 #instances=A0=A0=A0 #bytes=A0=A0=A0 Class descripti=
on
> -------------------------------------------------------------------------=
-
> 1:=A0=A0=A0=A0=A0=A0=A0 275926=A0=A0=A0 32074080=A0=A0=A0 char[]
> 2:=A0=A0=A0=A0=A0=A0=A0 657724=A0=A0=A0 31570752=A0=A0=A0 org.apache.luce=
ne.index.FreqProxTermsWriter$PostingList
> 3:=A0=A0=A0=A0=A0=A0=A0 200=A0=A0=A0 16094896=A0=A0=A0 org.apache.lucene.=
index.RawPostingList[]
>
> The Lucene is
> =A0consuming 47Mb of RAM memory.
> Why there is this excessive memory consumption in FSDirectory?
> Is it correct?
> Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 21:19:21 2011
Return-Path: <java-user-return-49315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44885 invoked from network); 5 Apr 2011 21:19:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 21:19:21 -0000
Received: (qmail 41566 invoked by uid 500); 5 Apr 2011 21:19:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41522 invoked by uid 500); 5 Apr 2011 21:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41514 invoked by uid 99); 5 Apr 2011 21:19:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 21:19:18 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.171.216.60] (HELO cust-smtp-192.fasthosts.net.uk) (213.171.216.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 21:19:11 +0000
Received: from [192.168.1.72] (unknown [193.128.105.2])
	by cust-smtp-192.fasthosts.net.uk (Postfix) with ESMTP id EBC97770092
	for <java-user@lucene.apache.org>; Tue,  5 Apr 2011 22:18:50 +0100 (BST)
From: Mark Wiltshire <mark@redalertconsultants.co.uk>
Content-Type: multipart/alternative; boundary=Apple-Mail-19--538900223
Subject: Help with delimited text
Date: Tue, 5 Apr 2011 22:18:50 +0100
Message-Id: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-19--538900223
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hi java-users

	I need some help.

	I am indexing categories into a single field category_path

	Which may contain items such as

	/Top/Books,/Top/My Prods/Book Prods/Text Books, =
/Maths/Books/TextBooks=20

	i.e. category paths delimited by ,

	I want to store this field, so the Analyser tokenizes the =
document only on ',' charaters and not on the '/' characters

	I am adding the field to the index using

	Where the categoryPath is a String containing list of the items =
above.
	=09
	doc.add(new =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.ANALYZED));=


	I think I need to split the string my self, but how do I pass =
this to Lucene, do I have to setup different fields ?

	I need to keep the full path in the index, as I want to use this =
when redirecting users, when clicking on the results.

	Any help would be great.

	Many thanks

Regards

Mark

You can view my current Wolters Kluwer tasks at:
https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_kluwer

You can view my calendar at:		   You can subscribe to my =
calendar at:
http://ical.me.com/markjwiltshire/Work    =
webcal://ical.me.com/markjwiltshire/Work.ics







Mark Wiltshire							Red =
Alert Consultants LTD
Director - Technical Web Consultant						=
Flat 6
									 =
 168 Tower Bridge Road
										=
		    London
										=
	             SE1 3LS
mark@redalertconsultants.co.uk
iPhone email: markjwiltshire@me.com
IM: markjwiltshire@yahoo.com			    Desk:     0208 247 =
1547
http://www.redalertconsultants.co.uk	    Mobile: 07973 252 403





--Apple-Mail-19--538900223
Content-Type: multipart/related;
	type="text/html";
	boundary=Apple-Mail-20--538900223


--Apple-Mail-20--538900223
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Hi =
java-users<div><br></div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>I need some =
help.</div><div><br></div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>I am indexing categories into a =
single field category_path</div><div><br></div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>Which may =
contain items such as</div><div><br></div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>/Top/Books,/Top/My Prods/Book Prods/Text Books, =
/Maths/Books/TextBooks
<br><div><br class=3D"webkit-block-placeholder"></div><div>
<span class=3D"Apple-style-span" style=3D"font-size: 12px; "><span =
class=3D"Apple-style-span" style=3D"border-collapse: separate; color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: medium; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; orphans: 2; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: medium; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: 12px; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: 12px; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	i.e. category =
paths delimited by ,
</span><br></div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	I want to store this field, so the =
Analyser tokenizes the document only on ',' charaters and not on the '/' =
characters
</span><br></div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>I am adding the field to the =
index using</div><div><br></div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>Where the categoryPath is a =
String containing list of the items above.</div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">		=
<br></span><span class=3D"Apple-style-span" style=3D"font-size: 11px; =
font-family: Monaco; "><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>doc.add(<span style=3D"color: =
#9e0067">new</span> Field(<span style=3D"color: =
#4200ff">"category_path"</span>,categoryPath,Field.<span =
style=3D"text-decoration: underline">Store</span>.YES,Field.<span =
style=3D"text-decoration: =
underline">Index</span>.ANALYZED));</span></div><div><br></div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>I think I =
need to split the string my self, but how do I pass this to Lucene, do I =
have to setup different fields ?</div><div><br></div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>I need to =
keep the full path in the index, as I want to use this when redirecting =
users, when clicking on the results.</div><div><br></div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>Any help =
would be great.</div><div><br></div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>Many =
thanks</div><div><br></div><div><span class=3D"Apple-style-span" =
style=3D"font-size: 11px; font-family: Monaco; =
"></span>Regards</div><div><br></div><div>Mark</div><div><br></div><div><d=
iv style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font-size: medium; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; ">You can view my current Wolters Kluwer tasks =
at</span>:</div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; font-size: medium; "><font =
class=3D"Apple-style-span" color=3D"#144FAE" face=3D"'Century Gothic'" =
size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: 10px; =
"><u><a =
href=3D"https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_=
kluwer">https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_=
kluwer</a></u></span></font></div><div style=3D"font-size: medium; =
"><font class=3D"Apple-style-span" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 12px; "><font =
class=3D"Apple-style-span" color=3D"#2350A9" face=3D"'Century Gothic'" =
size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: 10px; =
"><br></span></font></span></font></div></div><span =
class=3D"Apple-style-span" style=3D"font-size: medium; "><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">You can view my calendar at:<span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">		=
</span>&nbsp;&nbsp; You can subscribe to my calendar at:</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; "><font class=3D"Apple-style-span" face=3D"'Century =
Gothic'" size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: =
16px; font-family: Helvetica; color: rgb(35, 80, 169); =
-webkit-text-decorations-in-effect: underline; "><span =
class=3D"Apple-style-span" style=3D"-webkit-text-decorations-in-effect: =
underline; "><a href=3D"http://ical.me.com/markjwiltshire/Work"><font =
class=3D"Apple-style-span" face=3D"'Century Gothic'" size=3D"2"><span =
class=3D"Apple-style-span" style=3D"font-size: 10px; =
">http://ical.me.com/markjwiltshire/Work</span></font></a></span>&nbsp;&nb=
sp; &nbsp;<span class=3D"Apple-style-span" =
style=3D"-webkit-text-decorations-in-effect: underline; "><font =
class=3D"Apple-style-span" face=3D"'Century Gothic'" size=3D"2"><span =
class=3D"Apple-style-span" style=3D"font-size: 10px; "><a =
href=3D"file://localhost/webcal/::ical.me.com:markjwiltshire:Work.ics">web=
cal://ical.me.com/markjwiltshire/Work.ics</a></span></font></span></span><=
/font></div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; "><font class=3D"Apple-style-span" =
size=3D"3"><span class=3D"Apple-style-span" style=3D"font-size: 12px; =
"><font class=3D"Apple-style-span" color=3D"#2350A9" face=3D"'Century =
Gothic'" size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: =
10px; =
"><br></span></font></span></font></div></span></span><span></span></span>=
<br =
class=3D"Apple-interchange-newline"><span></span></span><span></span><span=
><img height=3D"72" width=3D"217" =
id=3D"a1bc7783-febb-4b2d-96a4-a6bbda86c1f4" apple-width=3D"yes" =
apple-height=3D"yes" =
src=3D"cid:EDAC8228-5850-4719-AF01-ECED6ECCFD18@wolterskluwer.local"></spa=
n><span class=3D"Apple-style-span" style=3D"border-collapse: separate; =
color: rgb(0, 0, 0); font-family: Helvetica; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; orphans: 2; text-align: auto; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span =
class=3D"Apple-style-span" style=3D"font-size: 12px; "><span =
class=3D"Apple-style-span" style=3D"border-collapse: separate; color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: medium; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; orphans: 2; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: medium; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><div><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><b><font class=3D"Apple-style-span" =
color=3D"#004080"><br class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline">Mark =
Wiltshire</font></b></font><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; "><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><b><font class=3D"Apple-style-span" =
color=3D"#004080">		</font></b><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; "><b><font class=3D"Apple-style-span" =
color=3D"#004080">					=
</font></b></span><b><font class=3D"Apple-style-span" =
color=3D"#004080">Red Alert Consultants =
LTD</font></b></font></span></div><div><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"white-space: pre; "><font class=3D"Apple-style-span" =
color=3D"#004080">Director - Technical Web Consultant<span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">				=
		</span>Flat 6</font></span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
"><span class=3D"Apple-tab-span" style=3D"white-space: pre; ">			=
						</span>  168 Tower =
Bridge Road</span></font></div><div><font class=3D"Apple-style-span" =
color=3D"#004080" face=3D"'Century Gothic'" size=3D"4"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; "><span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">				=
								</span>  =
  London</span></font></div><div><span class=3D"Apple-style-span" =
style=3D"font-size: large; color: rgb(0, 64, 128); font-family: 'Century =
Gothic'; white-space: pre; "><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; ">							=
				</span>             SE1 =
3LS</span></div><div><font class=3D"Apple-style-span" color=3D"#004080" =
face=3D"'Century Gothic'" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"white-space: pre; "><a =
href=3D"mailto:mark@redalertconsultants.co.uk">mark@redalertconsultants.co=
.uk</a></span></font></div><div><font class=3D"Apple-style-span" =
color=3D"#004080" face=3D"'Century Gothic'" size=3D"4"><span =
class=3D"Apple-style-span" style=3D"font-size: 14px; white-space: pre; =
">iPhone email: <span class=3D"Apple-style-span" style=3D"color: rgb(23, =
64, 125); white-space: normal; "><a =
href=3D"mailto:markjwiltshire@me.com"><span style=3D"color: rgb(35, 80, =
169); =
">markjwiltshire@me.com</span></a></span></span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
">IM: <a =
href=3D"mailto:markjwiltshire@yahoo.com">markjwiltshire@yahoo.com</a><span=
 class=3D"Apple-tab-span" style=3D"white-space: pre; ">			=
</span>    Desk:     0208 247 1547</span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
"><span class=3D"Apple-style-span" style=3D"color: rgb(0, 0, 0); =
white-space: normal; "><a =
href=3D"http://www.redalertconsultants.co.uk/"><font =
class=3D"Apple-style-span" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"font-size: 14px; =
">http://www.redalertconsultants.co.uk</span></font></a></span><span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">	</span>    =
Mobile: 07973 252 403</span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century =
Gothic'"><span class=3D"Apple-style-span" style=3D"font-size: large; =
white-space: pre; "><span class=3D"Apple-style-span" style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: medium; white-space: =
normal; "><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; =
"><div><br></div></div></span></span></font></div></span></span><br =
class=3D"Apple-interchange-newline"></span></span><br =
class=3D"Apple-interchange-newline"></span></span>
</span></span></span></span></div>
<br></div></body></html>=

--Apple-Mail-20--538900223
Content-Transfer-Encoding: base64
Content-Disposition: inline;
	filename=RAC_logo2_small2.jpg
Content-Type: image/jpeg;
	name="RAC_logo2_small2.jpg"
Content-Id: <EDAC8228-5850-4719-AF01-ECED6ECCFD18@wolterskluwer.local>

/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEP
ERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4e
Hh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCABIANkDASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAYHAQIFBAMI/8QAORAAAQMEAAQEBAMHAwUAAAAA
AQIDBAAFBhEHEiExEyJBURQyYXEVgaEIFjNCUmKRI0OCNFOxwuH/xAAZAQEAAwEBAAAAAAAAAAAA
AAAAAgMEBQH/xAAyEQABAwMDAgQEBAcAAAAAAAABAAIRAyExBBJBBVETImGBFHGR8DKhseEjM0Jy
wdHx/9oADAMBAAIRAxEAPwD9lk6G6wFfSi/lqp+POd5thMZp+wWK2yYj/hx25UmQecyXFFKW0NDq
rQHN1IH+Ki9waJKu09B+oqCmyJPcwrY5qbqroC+PAjNrlJwBS+QFSOWSDzexUFEdvYV84PEXKrPl
tsx3PcWYg/ir3gQp9uk+NHW5reiFAKT+YqHigZCv+BeZDHBxHY9lau/pTm6brj5TkFtxmxSr1eJK
Y8OOnmUrWyfYAepPYAVD+H/EiZk2YybFLxmVaUCCmdGW+6kuKaKuVPiIH8MnuAeuhUi9ocGnJVVP
S1alN1Ro8oyrI3XOyS9QMfsUy9XNzwocNouuq9dD2+vpUVyviPAtF+cx+2Wm6ZBeGmg69FtzQV4C
T2K1EgJ3sdOp+lQHL8wi8UnLTw/tsadAlSrjzXuJKa5XY7DGlqCu40o8oB9ag+s0CAbrVpemVqjg
57SGZJ7DM/TCvK3S0TYDExtC0JebS4ErGlJBG9Eeh6199/StGwEpCQNa9K2J9u9XBc0xNkKtDtWC
sa3r9arziJmFwM79zcNSiVkklH+o4QS3b2j0LzhHYjfRPcn9ef8AsyzbpN4dui8XB+4SI9xkM+O8
sqUoJV7nr33VPjAv2BdA9OqN0h1LjFwI5vN/lZWXdrjDtVtfuNwkNxokdBW66s6ShI9TX1iSWZcV
qTHWHGXUBbax2UkjYNVxxuKr0LFgzDqkuXqckyeU9UxWvO4fz0kfnVhFcaDBKlqQxHYRskkJShIH
6ACpNfLiOAqqmnFOhTfPmdNvQWH1M/Rerm+lOb6VVkDiz+JZdaoFvx+U5ZrnIXGj3FxYR4ykgkrQ
33LY181TmDkdqmZJccfjvrVPtzbbkpPIQlAcBKfN23oE6o2qx2ClfQaihZ7eJ7wJi8Yva/K7JV07
brAXv0/WoPeeKuCWue5AmZBHS8jmSopClNhQBPKVgcvN07bqGcE87xS24g5KveWRU3G5TXprzL0g
rUxzq8qPXWkgfnuo+OzeGgq9vStUaDqxYQBEWN5n9IV3A7pXwhyGZcVqTHcS4y6gLbWOykkbBFfe
rlzcZSlKURKUpREpSlESlKURYX8tUhxbh3jiBxRt2GY/dm7YrHI4vL8tTAeS1KJ5WElJOubRWob9
OujV3q+WoviWKN2bJMiv7sn4mZe5KHFHw+Xwm0ICENjqd60Tv69ulQqN3DbwtOlrCg41OQLfM/sq
m4a3PiHk91vOI5Lnsmy320LS241HtscGS0ezqFKT12B6Aa2D61aFhwGyWy6ovMlydeLs2kpRNuMh
Tzje+/Ik+RH/ABAr45/w4s+V3CLd0SplmvkP+BdLcsNyEj+knXmT9D7n3rnw8Dy4lDV24n3mXGSe
qI8ZqO4segU4nZ++tVS1pbkSt9bUU643MeGTkRHziBcH1UGzGwZXxV4iOy8eu8a22LHnxEbektl5
D0kbK3EN/KooJABV02OlS0Wy3cJsJuF0juv3m/znUtqlSV8z02Us8raN+gBPyjsNmuRjeF8V7Pb3
cVg36xQLH8S64i5NNLXOKHHFLPQ+Tm83eu1k3DGW/jFkteO5A9EmWyf8cqZMSZCn3SFBTigo9VbU
SPaq2tN3wZ+8LZVr05ZQNUeGCLAZGZcYm54vHZeGDOY4Z42xaEN/judXlxUhxhv+JKkLI5lrIHkb
TvWzoaH3rxfs5WSY9ecrzS+PtTbtNuC4fxCEaRytaCwj+3m2ke4QD61N+H3D+2YoqRcHZMi73yZ/
1d0mHmec/tH9Kf7R7Cvvwyw9GFWWRa2rpLuCHpjslJf/ANsLO+RI30A/Ukn1qbaTtzSRYKirr6Io
VmUzLnRJjImTHYCBbn8lKlHR61WfEPLsmlXRWMcN40edc0JV8dLc6swTrygq+XnP9J39ql+b2i6X
y1JgW2/P2bncHxD7DYLqmtHmSgk+RR/q66r14vj9qxy0t260xkssp8yj3U4o91rV3Uo+pPWrXtc7
yiwXP0r6ND+K4BzuGnHzPf0A91UmEWPinjFhktt2rF2n3Cp+ZLkynXX5SzvalEA7Pt7V8/2brflq
8Liz2Lva41skzXn3Wfg1LeWechQ5isBPUex6VeLraVIKSAQRog1COFGKXPD7fdbPJkMP29c1x+Ap
G+dLazspUOwIPtVAobajSCcFdR3VhX0tYPDQ9xacZiZzOJHsuThciPdc7yjOLhIZahQFfhMJxxQC
UIbIU6rZ6dVnW/pXK4xNXjiBdYmE4lNZbZaZTNuclaz4PIro02eX5uYcx16gCuhi3Bu3W9Tab5e7
hfYrDq3WIT55YqVKUVcymx0WrZ7q39q1nYvxEtWZ3udiEmwN2+8qaUtcxtZdjFDYQAgJ6EdNgHp1
qBa809rhYm8Z++PktbNRpW6zxaFUEsb5dwhoiAM5IEnGe66fD7h6zjU1V7vd3XeryhjwUPrbDbUV
r+hpsdED7VX/AA9gXjiJlOUXPx3YONzbkfiXmVFLk9DY5G2kqHyoAG1EHZ3VkQcJn2/Fr1GRfX51
/uzCkO3GUTpKikgBKB0ShOzoCu/g1gYxnE7bY44QERGEoJQnQUr+ZX5nZqYoFxaIgBZXdUFNlV+8
PqOhoMQABckDAvEW9YBUG4sWKzqsmPYLbrZDZRc7g2yhKWh/osoHO6odN7KU63361P7PjlitKOS2
WeDEA/7TCU7/AMCuNxBxB7J12uXAvL1nuVrkF6NKbaDmtjlUkpJGwRXtwuxXe0Kku3jKJt8ef5de
K0httrW/kSkdN767J7CrGsioTt97LHV1Afo2NFW4mW3kknPbEcqQpAAA9K3pqlaFyUpSlESlKURK
UpREpSlEQ1is0oixrpWCNVtWFdtURanVeWbcbfB5fjJseNzfL4rgRv7brgcSMs/de0tiJH+Nu81w
R7dDB6vOn/1Hcn2qO2XhfbZkdy552hOR3qWnmdVI6tx9j+G0n+VI7A96qfUdO1gkrfQ0lPw/G1Di
1pxAknvFxYd/ZWS04242lxtQWhQ2FA7BFbCq0/Z8tV+tOKTmLzHlQ45num3xZCiVssb0B1JIG96/
+19Mmzy8ycqOMYJamLpMjq1cJcjmEaKdHyEjW1fY9KiNQAwOcInhWv6W92qfQouDg3+qQBHcmY/e
wVkVneqhWIZum6YJMyK6xRBdtxfROZCtpQtrfNo+o6VurPrXE4fwswuyHYLEtlDjcfXO6pSxtKEj
1JqQrMiZ4lUO6bqWvLNkkO2279h3UxOjWKiXC3MHc1sMm6OWpy2+DMcjBpxfMohOup6DR66I9CK1
zzL5FlmxbLY7Wu736alS48UK5EJQOhccX2SkfrTxm7N/BXh6fqBqDpi2HjNxaMycQO8qX9Pem6ge
Ns8UP3hiyMgl2L8LcQv4iNFbUFNK15dKPfrXVfydwcQouKRYqHgYS5cx7xNFgbAQNa67O69FURJE
JU0LmvLGODoEmDYAetlJ+goSAnZNRvPssi4nYzOdZMqU6sMw4iD55Dp6JQO/5n0r4ZzkL9k4fyLs
+x4FwXHShmMFcx+IWAlKAfXzHv8ASjqrWzPCjS0VapsIFnmB6n7OV6cMyljJ13VcSK83GgTnIaXl
kcr5RrmUn+3fT8q6LN8tTl/esLcxtdyZYD7jA+ZLZOgTUaxuA7gvDFhqNbHrhMjRw6/HY1zvPK6r
I39Sf8VAeHOVXeflN9yqLgl5nLuym0sOJU2hDbLY5QnmWQO4UTqs51BZta78Rzb/AEuq3pTdT49W
h/LZYeYCTIzJ5ElXtzDW6xzioLleZ3S04oy+LGuNf57wi2+3PPIcUtwn5iUEjlA2T19KgubqzzCI
FvuZzxdyvU+UhlNqcipLLy1HXKgDzJA99/8Amp1NSGcT39PvsqNH0apqSGl4aXEhsyZjMQCIHc2+
hV68wpzConlGUuYrjVvmXOOJM+S+xF8Bk653XCArX0HU/lXi4n8RrZhEEeIw5PuTrSnGYTPzFKQS
VqP8qBrvVjqzGglxwslHp2prva2k2dxIEcxn29cKc81c26X602ufAgz5rbEm4OlqI2re3VAbIH5V
8sbuq7vjcC7qiLjqlxkPlknZQVJB5d+tUq/ml2yHipAuH7gX19NibcZEVPKSiS5rzqUSEgBHv71G
rXawA9/mtPT+lVNU+oDYMBm4F+Mnk2X6B2Kcw3UFmZ5NtVik3XIcUuFqShSG4zKn2nnJTqzpKEht
R0d++q4i3eNN3aRcIzOO2JvnSpMF4qedUgkbC1joDr2r01hMC6pZ02qQXPc1oxJIgn0iZ9rDlWsO
tK1a34Y3W1XLnpSlKIlYVWawoboiqmzvNXT9oa/m6uALssCO3bGnFgDTqeZ1xI996Tup1kWUWCwR
vHul1ixwfkQVgrcPslI6qP0Arx5bw/xXKZrU68WwOy2klCH23VtOAH0KkEEj71tjuAYlYHA9bLNH
RIHaQ7t10f8ANZJ/WszGVGSBFyuxXr6OuGOeXS1oG0ARYcGeTfGSopfc2yYWWTdIllEGPNU3CszM
sFMl59xXKHFpHRCANnXcgddV64CrTw2xhq0Rd3G+SiXfAbPM/Nkr+ZavYb9T0AFSfM8UgZVAYiTp
EuP8O+mQy7FdLbiFgHRB/OtMVwuxY2tx+BHWuW7/ABZchxTrzn3Wok6+g0PpUTTq75n3/Wys+M0h
04bBF5LRgx+GXE4zNsnhVRxFSjCuGNsxa4yPEl3ueXLkqOnalpUvxHggdzvYQPuKkuLWCdcFt5nl
kUR2IEcmz2kJ2IbQT0UserpAH2qf3LHLPcbvCu06E0/Mgg/DOLBPh776G9b6V01NhSSlXUEaNRZp
SHkk24H36qdXrU6drGN85Li539xuG9pAAn2xM0hwxzWLbOH9ptVlQ1c71JLkmWnxOVmIlTilLceX
/KBvt3qXZRZpl2uUTM8PyWDGuCIngAu8rsSS1zc2iR1HXfUVLGcYsLFsk22PaYbMSUkofabZCUuA
jRB136VHBwjwQJCBaHPDGtNiY9yD/jz6rwUaoYGmDHtEKx/UdG/UOrsDmEk8B0g5BBIHyH5yvnw2
zaXkEm7Wu6w4zc61BPjPwXvGjO7BPlV6Hp8p61B8IziKLjfLvChPXfJb7NWiLAY0S0wz5Gy4rem0
9ySevXtVyWSw2iyQfgrTb40KP6tsthIJ9z7mvjYcXsNhU8qz2uJCU+rmdU02ApZ+p71Pwap2y7Eq
pvUNCw1ttIw7bAmBbM8wTBgdonlVThsKXL4v3K55reosiVZ4rXhtKWEMR3Xdn/TB9Ep6cx6kk/Su
1xLu1rd4jY9bbrPYi221IXdZanVhKSsaSyPqdknX2qZXPB8Wud9TfJ9liSbikJAecRvt22OxI9yK
3umGY1dL21erlaI0ucygIbddSVcoB2OhOu576qA09QMLRGZvzdXO6rp6moZWfNmbYAAgxHl9LkzF
iormeZIuPCy+3e0MTWGkp8BiTIa8NLoUQnxEevL5j1IHapdjTdqtVmt9nhyWChlhLbKQ4NrCU9wP
X3r33G1QrhbnrdMjtvRHkeG40pPlKfauNj+BYpYJnxlqs0aPJA5Q71UtI1rQKidD7VaGVA/dY2/6
uc7UaV+mNOC0gkgWM2AEmRi/HKrV7K4L2e3DI3o7tznxHV2uwWxnq4opOnXiP5UlWxzH0BrTDrBd
r5xrdumVTESptniIeUw2rbUZ13qhtA9kp6lXqSKtPH8Nxywzpc61WxiNJmLK3nANqJJ2QN9hv0HS
vVb8ctFvvc69RIiW7hPCRJe5lErCRodCdD8tVQ3SvJBeeZ+/yXTf1qhTa9unaRLNoJieJHoImYuS
ZPZVJxWydS+LNos0GA7c5VqZVIjRGxtLspwaQVn0SgbUTWM+xxeOcM73e8glomZFdy0xNmBPkbQp
aR4aB/KgDp9e5q2oONWeDfJl8jQmkXGby/EP6JUvQ0O56dh2r3XK3QrlDXDuEZmVHXrmadQFJOu3
Q1L4Vx3FxucenZQb1qlS8CnSYQ1m3d3dBkj0E/W04EQixZki53VFrxeGJ1ntzBE248xDSSEeVto/
7itgb9APevPwSlQUYN+My5sZMu7THpkpa3ANOKXoJ+mgEjX0qfw4EWHFREiMNMMIGkttoCUgfYVG
GOGODM3I3BvHYXjlwu+ZJUkKJ3sJJ0Dv2FW+HVBBmc/4WX4vRvp1KcFoMXEEmJzcZJBta2OVrmtu
tmZ21UCBkDUWfbJiH2347iFqjvo6pC0/n2NRzHM1yW15vAwzKhaLm/N5vCm2xw8yQlO9utHqneu4
6da71w4UYNOnPzHbQpD0hwuPFmU80HFHuSErArrYthGMYwtTljtEaI6oaW8AVOKH1WolR/zXhp1C
/dj77KbdVomac0jLxBgFoEE87gZieIgqRUpStS4aUpSiJSlKIlKUoiUpSiJSlKIlKUoiUpSiJSlK
IlKUoiUpSiJSlKIlKUoiUpSiJSlKIv/Z

--Apple-Mail-20--538900223--

--Apple-Mail-19--538900223--

From java-user-return-49316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 21:53:54 2011
Return-Path: <java-user-return-49316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76044 invoked from network); 5 Apr 2011 21:53:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 21:53:54 -0000
Received: (qmail 84342 invoked by uid 500); 5 Apr 2011 21:53:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84292 invoked by uid 500); 5 Apr 2011 21:53:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84284 invoked by uid 99); 5 Apr 2011 21:53:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 21:53:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shamsingh4u@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 21:53:44 +0000
Received: by pve37 with SMTP id 37so497722pve.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 14:53:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=Zahj3tJtstakybTCi0hYsOgOVEHkk0i+NTYe2ZoX1q4=;
        b=DFTWkU6XK6NQTv9Y9WVVJMqdUFBtJTpD5glO+caCTvSGv48hCjnuVnC7//RVbsAX0x
         oaxe4I9W6efRVJiaBajBRtcBSe8wu1B5WpDeL9zv2CdsQJklDsBosgYgmOLvsD9/THeN
         s82/1DUdCc3+SP2CrNZnx0pe582VJpvdYOldM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=IL4pqa9ywNyp2i3dE3FXXyUEqcZDPZ6iwSzSIvTe1x6SAFaL7O1EU1Ri/xoE+3OCnK
         ESf46YptYhv3wI7T9q3bTcR5dAzwM0FI68ST7aoGs19OiPBTtte7tQerUKYyhgiGDCjr
         IegBLAgElwhv1hQak0dEJxhR6X7KegiZuMEDM=
Received: by 10.142.155.8 with SMTP id c8mr91068wfe.330.1302040403090; Tue, 05
 Apr 2011 14:53:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.66.67 with HTTP; Tue, 5 Apr 2011 14:53:03 -0700 (PDT)
From: sham singh <shamsingh4u@gmail.com>
Date: Tue, 5 Apr 2011 14:53:03 -0700
Message-ID: <BANLkTi=H7b3vhwbCx3HHSnCKm7GT-1xYGg@mail.gmail.com>
Subject: word + ngram tokenization
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I have to do tokenization which is combination of NGram and Standard
tokenization
for ex if the content is  :"the quick brown fox jumped over the lazy dog"
requirement is to tokenize into:
quick brown fox
brown fox jumped
fox jumped over etc
..
..

Please help me to find out best analyzer for my requirement

Thanks in Advance

-- 
Many Thanks,
Shambhu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 23:37:27 2011
Return-Path: <java-user-return-49317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16456 invoked from network); 5 Apr 2011 23:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 23:37:27 -0000
Received: (qmail 11907 invoked by uid 500); 5 Apr 2011 23:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11859 invoked by uid 500); 5 Apr 2011 23:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11851 invoked by uid 99); 5 Apr 2011 23:37:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 23:37:25 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 23:37:17 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p35NatMg020460
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 5 Apr 2011 19:36:55 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Tue, 5 Apr 2011
 19:36:55 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 5 Apr 2011 19:37:01 -0400
Subject: RE: word + ngram tokenization
Thread-Topic: word + ngram tokenization
Thread-Index: Acvz2/iXF4CExxZqT8CbotE00+UmIgADkJzg
Message-ID: <2D127F11DC79714E9B6A43AC9458147FA33CF7C8@suex07-mbx-03.ad.syr.edu>
References: <BANLkTi=H7b3vhwbCx3HHSnCKm7GT-1xYGg@mail.gmail.com>
In-Reply-To: <BANLkTi=H7b3vhwbCx3HHSnCKm7GT-1xYGg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-05_10:2011-04-05,2011-04-05,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgU2hhbWJodSwNCg0KU2hpbmdsZUZpbHRlciB3aWxsIGNvbnN0cnVjdCB3b3JkIG4tZ3JhbXM6
DQoNCmh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9qYXZhLzNfMV8wL2FwaS9jb250cmliLWFuYWx5
emVycy9vcmcvYXBhY2hlL2x1Y2VuZS9hbmFseXNpcy9zaGluZ2xlL1NoaW5nbGVGaWx0ZXIuaHRt
bA0KDQpTdGV2ZQ0KDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IHNoYW0g
c2luZ2ggW21haWx0bzpzaGFtc2luZ2g0dUBnbWFpbC5jb21dDQo+IFNlbnQ6IFR1ZXNkYXksIEFw
cmlsIDA1LCAyMDExIDU6NTMgUE0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0K
PiBTdWJqZWN0OiB3b3JkICsgbmdyYW0gdG9rZW5pemF0aW9uDQo+IA0KPiBIaSBBbGwsDQo+IA0K
PiBJIGhhdmUgdG8gZG8gdG9rZW5pemF0aW9uIHdoaWNoIGlzIGNvbWJpbmF0aW9uIG9mIE5HcmFt
IGFuZCBTdGFuZGFyZA0KPiB0b2tlbml6YXRpb24NCj4gZm9yIGV4IGlmIHRoZSBjb250ZW50IGlz
ICA6InRoZSBxdWljayBicm93biBmb3gganVtcGVkIG92ZXIgdGhlIGxhenkgZG9nIg0KPiByZXF1
aXJlbWVudCBpcyB0byB0b2tlbml6ZSBpbnRvOg0KPiBxdWljayBicm93biBmb3gNCj4gYnJvd24g
Zm94IGp1bXBlZA0KPiBmb3gganVtcGVkIG92ZXIgZXRjDQo+IC4uDQo+IC4uDQo+IA0KPiBQbGVh
c2UgaGVscCBtZSB0byBmaW5kIG91dCBiZXN0IGFuYWx5emVyIGZvciBteSByZXF1aXJlbWVudA0K
PiANCj4gVGhhbmtzIGluIEFkdmFuY2UNCj4gDQo+IC0tDQo+IE1hbnkgVGhhbmtzLA0KPiBTaGFt
Ymh1DQo+IA0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11
c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-49318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 05 23:59:47 2011
Return-Path: <java-user-return-49318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62879 invoked from network); 5 Apr 2011 23:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 5 Apr 2011 23:59:47 -0000
Received: (qmail 27017 invoked by uid 500); 5 Apr 2011 23:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26963 invoked by uid 500); 5 Apr 2011 23:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26955 invoked by uid 99); 5 Apr 2011 23:59:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 23:59:45 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Apr 2011 23:59:38 +0000
Received: by vxa37 with SMTP id 37so1121852vxa.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 16:59:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.88.230 with SMTP id b38mr81500vcm.247.1302047957198; Tue,
 05 Apr 2011 16:59:17 -0700 (PDT)
Received: by 10.220.62.73 with HTTP; Tue, 5 Apr 2011 16:59:17 -0700 (PDT)
In-Reply-To: <BANLkTikM2KPVqzfUvev1rJNrSBfUAk0zAQ@mail.gmail.com>
References: <BANLkTinoA7nPPBBu5x+iZcxkK0qoJpLcsQ@mail.gmail.com>
	<BANLkTikM2KPVqzfUvev1rJNrSBfUAk0zAQ@mail.gmail.com>
Date: Wed, 6 Apr 2011 09:59:17 +1000
Message-ID: <BANLkTi=pwat3V-XpKwoFoF3FEdNJXO8XwA@mail.gmail.com>
Subject: Re: Question about open files
From: Jean-Baptiste Reure <jbreure@weborganic.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636310911f8273304a034a906
X-Virus-Checked: Checked by ClamAV on apache.org

--001636310911f8273304a034a906
Content-Type: text/plain; charset=UTF-8

We are using version 3.0.3. So you can confirm that closing the writer (and
the reader created from that writer) should be enough to release the file
handles?
If that is the case, that means our application has a bug somewhere that i
need to track down.
Thanks,
JB.

On 5 April 2011 19:48, Ian Lea <ian.lea@gmail.com> wrote:

> Which version of lucene are you using?  Something changed in the 3.x
> release, and maybe 2.9.x, in the way that old file handles are closed.
>  Previously it wasn't always necessary to explicitly close everything,
> now it is.
>
> Your usage sounds fine to me.  When I've hit too many open files when
> using 3.0.x it has always been because something, somewhere, wasn't
> being closed.
>
>
> --
> Ian.
>
>
> On Tue, Apr 5, 2011 at 8:49 AM, Jean-Baptiste Reure
> <jbreure@weborganic.com> wrote:
> > Hi all,
> >
> > I have been looking for information about this and found a few things
> here
> > and there but nothing very clear on when files are opened and closed by
> > Lucene.
> >
> > We have an application that uses Lucene quite heavily in the following
> > fashion: there are multiple indexes in use at all times. For each index,
> a
> > single IndexWriter object is constantly opened (and used to update the
> > index) and a single IndexReader is also constantly opened. This Reader is
> > created using the almost real-time reader of the IndexWriter. The Reader
> is
> > used to query the index and when the Writer updates an index, the
> > corresponding reader is re-opened and the previous one is discarded when
> all
> > searches using it are finished. Periodically, the index is optimised if
> it
> > needs to be (if the writer has been used).
> >
> > This is all working perfectly fine but we've been running into an issue
> > recently when we've add a lot of indexes on one server (more than a 1000
> > indexes). This led to the "Too many open files" exception, so we
> increased
> > the number of open files allowed on that server but obviously, it's a
> > temporary solution.
> >
> > So we decided to implement a mechanism that would keep only a maximum
> number
> > of indexes "open" at all times. When the maximum number is reached, the
> > least recently used indexes are closed (closing the IndexWriter and the
> > IndexReader), and if these indexes are needed again in the future, they
> are
> > "re-opened".
> > This is functioning fine as well, as we can see ".lock" files appearing
> and
> > disappearing in the index directories, but handles on the segment files
> are
> > still in use.
> >
> > So my question is when are these file handles discarded? I was under the
> > impression from reading the documentation that closing an IndexReader was
> > enough to close the files associated with that reader but we went even
> > further by closing the IndexWriter as well but to no avail. If it should
> > work that way, it means we have a bug somewhere with readers not being
> > closed properly but I couldn't find one last time I checked.
> >
> > Also, do you think it is the right way to go around the "too many open
> > files" issue? Can you recommend using another method?
> >
> > Thanks for any help.
> >
> > JB Reure
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636310911f8273304a034a906--

From java-user-return-49319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 02:01:00 2011
Return-Path: <java-user-return-49319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52093 invoked from network); 6 Apr 2011 02:00:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 02:00:59 -0000
Received: (qmail 83047 invoked by uid 500); 6 Apr 2011 02:00:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82880 invoked by uid 500); 6 Apr 2011 02:00:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82872 invoked by uid 99); 6 Apr 2011 02:00:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 02:00:57 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yuanwu.mail@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 02:00:48 +0000
Received: by gxk7 with SMTP id 7so540152gxk.35
        for <java-user@lucene.apache.org>; Tue, 05 Apr 2011 19:00:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:cc:references:subject:message-id
         :organization:x-mailer:mime-version:content-type;
        bh=7+LhvKxk6MBEtCA3gLwKg8Oi8j9acd3ms7aGEwpjTpg=;
        b=Q5YEUNCa0L73DwYJ5Bj9tiHXvYyirPtf4aI6HBqxPjT0MKkNgqzVevaRSFNYuK7OK4
         I6jV9UQtMl8hFuynlRWLLgtUqLjVpCoJT62dVTpCYqhBKp0c+I4eahAGoqey7x5H1zRH
         WsTpCnSH2Vmdo9Wu3TOYkxJollCfOVVBhCiUU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:cc:references:subject:message-id:organization:x-mailer
         :mime-version:content-type;
        b=PX6PPbW1ANouKlNXf0WcHuAbfV6+++LOHLnatBT611iKPaRw449rYdZ/QxVXkgKDro
         a51fgKiq3wS59Jf1sGIa4UGJs6ELplnH3tBhSyFx4N4LIHxkwYdwABQB4jG1Cr6pFQgG
         +4TVOk6EE4HELn0xiDSc5wb9K9UtfXvQ/O/Ig=
Received: by 10.90.23.19 with SMTP id 19mr1296520agw.108.1302055227059;
        Tue, 05 Apr 2011 19:00:27 -0700 (PDT)
Received: from BITCOMPUTER ([211.68.2.10])
        by mx.google.com with ESMTPS id 6sm104373anx.46.2011.04.05.19.00.21
        (version=SSLv3 cipher=OTHER);
        Tue, 05 Apr 2011 19:00:25 -0700 (PDT)
Date: Wed, 6 Apr 2011 10:00:59 +0800
From: "=?gb2312?B?1KzO5CBbR01haWxd?=" <yuanwu.mail@gmail.com>
To: "Michael McCandless" <lucene@mikemccandless.com>
Cc: "java-user" <java-user@lucene.apache.org>
References: <201104011133527349770@gmail.com>,
 <AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>,
 <201104011826576408113@gmail.com>,
 <AANLkTi=iEb=-BAyHpmigNi1q7NOmmi46Cw3S9iR53ot6@mail.gmail.com>,
 <201104021607211569827@gmail.com>
Subject: Re: Re: Re: A likely bug of TermsPosition.nextPosition
Message-ID: <201104061000568854864@gmail.com>
Organization: =?gb2312?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon518686408510_====="
X-Virus-Checked: Checked by ClamAV on apache.org

--=====003_Dragon518686408510_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

RGVhciBNaWtlOg0KDQpUaGFua3MgdG8geW91ciBoZWxwLCBhbmQgYXBvbG9naXNlIGZvciBkZWxh
eWVkIHJlcGx5Lg0KDQpZZXMsIHRoZSBleGVjcHRpb24gc3RpbGwgb2N1dXIgaW4gMy4xIGFuZCB0
aGUgaW5kZXggaXMgbm93IGJlaW5nIHJlYnVpbHQgZm9yIDMuMS4NCg0KSW4gdGhlIGluZGV4LCBv
bmx5IHRoZSB0ZXJtICdcMScgaGFzIHBheWxvYWQsIElmIHRoZSBzZWFyY2ggc3dpdGNoIHRvIG90
aGVyIHRlcm1zLCB0aGUgZXhjZXB0aW9uIGRvZXNuJ3QgcmFpc2UuDQoNCklmIHlvdSBjYW4gc2Vu
ZCBtZSBhIG5ldyByZWNlbnQgY29weSBvZiBDaGVja0luZGV4IGluIGphciwgSSAgd2lsbCBydW4g
aXQgIGFuZCBzZW5kIHlvdSB0aGUgcmVwb3J0IGFzIHNvb24gYXMgcG9zc2libGUuDQoNCkdyZWF0
IHRoYW5rcy4NCg0KMjAxMS0wNC0wNiANCg0KDQoNCtSszuQgW0dNYWlsXSANCg0KDQoNCreivP7I
y6O6IE1pY2hhZWwgTWNDYW5kbGVzcyANCreiy83Ksbzko7ogMjAxMS0wNC0wMiAgMjE6MTE6MDUg
DQrK1bz+yMujuiDUrM7kIFtHTWFpbF0gDQqzrcvNo7ogamF2YS11c2VyIA0K1vfM4qO6IFJlOiBS
ZTogUmU6IEEgbGlrZWx5IGJ1ZyBvZiBUZXJtc1Bvc2l0aW9uLm5leHRQb3NpdGlvbiANCiANClNv
IHlvdXIgdGVzdCBjYXNlIHN0aWxsIGhpdHMgdGhlIGV4Y2VwdGlvbiBpbiAzLjE/DQpJZiB5b3Ug
ZnVsbHkgcmVidWlsZCB5b3UgaW5kZXggaW4gMy4xLCBkb2VzIHRoZSBleGNlcHRpb24gc3RpbGwg
b2NjdXI/DQpJcyB0aGVyZSBhbnkgd2F5IEkgY291bGQgZ2V0IGFjY2VzcyB0byB0aGlzIGluZGV4
Pw0KRG8gb3RoZXIgdGVybXMgYmVzaWRlcyAiXDEiIGhhdmUgdGhlIHByb2JsZW0/DQpJIGp1c3Qg
Y29tbWl0dGVkIGEgY2hhbmdlIHRvIHRoZSAzLnggYnJhbmNoDQooaHR0cHM6Ly9zdm4uYXBhY2hl
Lm9yZy9yZXBvcy9hc2YvbHVjZW5lL2Rldi9icmFuY2hlcy9icmFuY2hfM3gpIC0tDQphcmUgeW91
IGFibGUgdG8gY2hlY2tvdXQgdGhpcyBicmFuY2gsIGJ1aWxkIGl0LCBhbmQgcnVuIGl0cyBDaGVj
a0luZGV4DQpvbiB5b3VyIGluZGV4PyAgSSdtIGFsc28gYXR0YWNoaW5nIHRoZSBwYXRjaC4uLiBh
bmQgSSBjb3VsZCBhbHNvIHNlbmQNCnlvdSB0aGUgcGF0Y2hlZCBMdWNlbmUgY29yZSBKQVIgaWYg
eW91IHdhbnQuDQpJJ2QgbGlrZSB0byBzZWUgaWYgdGhhdCBjaGFuZ2UgdG8gQ2hlY2tJbmRleCBk
ZXRlY3RzIHRoZSBwcm9ibGVtIHdpdGgNCnlvdXIgaW5kZXguDQpNaWtlDQpodHRwOi8vYmxvZy5t
aWtlbWNjYW5kbGVzcy5jb20NCjIwMTEvNC8yINSszuQgW0dNYWlsXSA8eXVhbnd1Lm1haWxAZ21h
aWwuY29tPjoNCj4gRGVhciBNaWtlOg0KPg0KPiBUaGUgaW5kZXggd2FzIGNvbnN0cnVjdGVkIHVz
aW5nIEx1Y2VuZSAyLjkuIEFmdGVyIHRoZSBwcm9ibGVtIG9jY3VyZWQsIEkNCj4gc3dpdGNoZWQg
dG8gcmVjZW50bHkgcmVsZWFzZSAgTHVjZW5lIDMuMSwgbGVhdmluZyB0aGUgaW5kZXggdW50b3Vj
aGVkLg0KPg0KPiBUaGFua3MgdG8geW91ciBoZWxwDQo+DQo+IDIwMTEtMDQtMDINCj4gX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18NCj4g1KzO5CBbR01haWxdDQo+IF9fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fDQo+ILeivP7Iy6O6IE1pY2hhZWwgTWNDYW5kbGVzcw0KPiC3
osvNyrG85KO6IDIwMTEtMDQtMDIgIDAwOjEzOjM1DQo+IMrVvP7Iy6O6INSszuQgW0dNYWlsXQ0K
PiCzrcvNo7ogamF2YS11c2VyDQo+INb3zOKjuiBSZTogUmU6IEEgbGlrZWx5IGJ1ZyBvZiBUZXJt
c1Bvc2l0aW9uLm5leHRQb3NpdGlvbg0KPiBIbW0gc28gaXQncyBub3QgaW5kZXggY29ycnVwdGlv
bi4gIEN1cmlvdXMuDQo+IFdoaWNoIEx1Y2VuZSB2ZXJzaW9uIGFyZSB5b3UgdXNpbmc/ICBMb29r
cyBsaWtlIGl0J3MgMi45LCBidXQgbm90DQo+IDIuOS40PyAgQ2FuIHlvdSB0cnkgMi45LjQgYW5k
IHNlZSBpZiB5b3Ugc3RpbGwgaGl0IHRoZSBwcm9ibGVtPw0KPiBDYW4geW91IHBvc3QgYSBzbWFs
bCB0ZXN0IGNhc2Ugc2hvd2luZyB0aGUgcHJvYmxlbSwgb24geW91ciBpbmRleD8NCj4gTWlrZQ0K
PiBodHRwOi8vYmxvZy5taWtlbWNjYW5kbGVzcy5jb20NCj4gMjAxMS80LzEg1KzO5CBbR01haWxd
IDx5dWFud3UubWFpbEBnbWFpbC5jb20+Og0KPj4gSGksIERlYXIgTWlrZToNCj4+DQo+PiBiZWxv
d3MgbGlzdCB0aGUgcmVwb3J0IG9mIGNoZWNrSW5kZXguIE9TIGlzIEZlZG9yYSBMaW51eC4NCj4+
DQo+PiBbb3JhY2xlQHNlcnZlciBiaW5dJCBqYXZhIC1jbGFzc3BhdGggLi8gb3JnLmFwYWNoZS5s
dWNlbmUuaW5kZXguQ2hlY2tJbmRleCAvZGF0YS9JbmRleC9VUkwvR2VuZXJpYy8gLWZpeA0KPj4N
Cj4+IE5PVEU6IHRlc3Rpbmcgd2lsbCBiZSBtb3JlIHRob3JvdWdoIGlmIHlvdSBydW4gamF2YSB3
aXRoICctZWE6b3JnLmFwYWNoZS5sdWNlbmUuLi4nLCBzbyBhc3NlcnRpb25zIGFyZSBlbmFibGVk
DQo+PiBPcGVuaW5nIGluZGV4IEAgL0dlb0dyaWQvZGF0YS9JbmRleC9VUkwvR2VuZXJpYy8NCj4+
IFNlZ21lbnRzIGZpbGU9c2VnbWVudHNfYXl1cCBudW1TZWdtZW50cz0xIHZlcnNpb249Rk9STUFU
X0RJQUdOT1NUSUNTIFtMdWNlbmUgMi45XQ0KPj4gICAxIG9mIDE6IG5hbWU9X2J5bTAgZG9jQ291
bnQ9MTM0NDI3OA0KPj4gICAgIGNvbXBvdW5kPWZhbHNlDQo+PiAgICAgaGFzUHJveD10cnVlDQo+
PiAgICAgbnVtRmlsZXM9MTENCj4+ICAgICBzaXplIChNQik9MTUsOTc5LjU5Mw0KPj4gICAgIGRp
YWdub3N0aWNzID0ge29wdGltaXplPXRydWUsIG1lcmdlRmFjdG9yPTMsIG9zLnZlcnNpb249Mi42
LjI3LjQxLTE3MC4yLjExNy5mYzEwLng4Nl82NCwgb3M9TGludXgsIG1lcmdlRG9jU3RvcmVzPXRy
dWUsIGx1Y2VuZS52ZXJzaW9uPTMuMC1kZXYsIHNvdXJjZT1tZXJnZSwgb3MuYXJjaD1hbWQ2NCwg
amF2YS52ZXJzaW9uPTEuNi4wXzIxLCBqYXZhLnZlbmRvcj1TdW4gTWljcm9zeXN0ZW1zIEluYy59
DQo+PiAgICAgbm8gZGVsZXRpb25zDQo+PiAgICAgdGVzdDogb3BlbiByZWFkZXIuLi4uLi4uLi5P
Sw0KPj4gICAgIHRlc3Q6IGZpZWxkcy4uLi4uLi4uLi4uLi4uT0sgWzExIGZpZWxkc10NCj4+ICAg
ICB0ZXN0OiBmaWVsZCBub3Jtcy4uLi4uLi4uLk9LIFsyIGZpZWxkc10NCj4+ICAgICB0ZXN0OiB0
ZXJtcywgZnJlcSwgcHJveC4uLg0KPj4gT0sgWzEyNjM1MDAgdGVybXM7IDYwMTcxNTA3MiB0ZXJt
cy9kb2NzIHBhaXJzOyAxNTEzNzgwNjMxIHRva2Vuc10NCj4+ICAgICB0ZXN0OiBzdG9yZWQgZmll
bGRzLi4uLi4uLk9LIFs4MDYzMTUxIHRvdGFsIGZpZWxkIGNvdW50OyBhdmcgNS45OTggZmllbGRz
IHBlciBkb2NdDQo+PiAgICAgdGVzdDogdGVybSB2ZWN0b3JzLi4uLi4uLi5PSyBbMTM0NDI3OCB0
b3RhbCB2ZWN0b3IgY291bnQ7IGF2ZyAxIHRlcm0vZnJlcSB2ZWN0b3IgZmllbGRzIHBlciBkb2Nd
DQo+PiBObyBwcm9ibGVtcyB3ZXJlIGRldGVjdGVkIHdpdGggdGhpcyBpbmRleC4NCj4+DQo+Pg0K
Pj4NCj4+IDIwMTEtMDQtMDENCj4+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQo+
PiDUrM7kIFtHTWFpbF0NCj4+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fDQo+PiC3
orz+yMujuiBNaWNoYWVsIE1jQ2FuZGxlc3MNCj4+ILeiy83Ksbzko7ogMjAxMS0wNC0wMSAgMTc6
NTg6MDgNCj4+IMrVvP7Iy6O6IGphdmEtdXNlcg0KPj4gs63LzaO6INSszuQgW0dNYWlsXQ0KPj4g
1vfM4qO6IFJlOiBBIGxpa2VseSBidWcgb2YgVGVybXNQb3NpdGlvbi5uZXh0UG9zaXRpb24NCj4+
IEhtbSB0aGlzIGNvdWxkIGJlIGZyb20gYSBjb3JydXB0ZWQgaW5kZXguDQo+PiBXaGF0IHZlcnNp
b24gb2YgTHVjZW5lPyAgV2hhdCBPUy9maWxlc3lzdGVtPw0KPj4gQ2FuIHlvdSBydW4gQ2hlY2tJ
bmRleCBhbmQgcG9zdCB0aGUgb3V0cHV0Pw0KPj4gTWlrZQ0KPj4gaHR0cDovL2Jsb2cubWlrZW1j
Y2FuZGxlc3MuY29tDQo+PiAyMDExLzMvMzEg1KzO5CBbR01haWxdIDx5dWFud3UubWFpbEBnbWFp
bC5jb20+Og0KPj4+IEhpLCBkZWFyIGV4cGVydHM6DQo+Pj4NCj4+PiBXaGVuIEluZGV4UmVhZGVy
LnRlcm1zUG9zaXRpb25zIGlzIHVzZWQgdG8gYWNjZXNzIHNwZWNpZmljIHRlcm1zLCB0aGUgY2Fs
bCB0byBUZXJtc1Bvc2l0aW9uLm5leHRQb3NpdGlvbiBzdWNjZXNzIGlmIFRlcm1zUG9zaXRpb24u
bmV4dCBpcyB1c2VkLiBCdXQgaWYgVGVybXNQb3NpdGlvbi5za2lwVG8gaXMgdXNlZCBpbnN0ZWFk
IG9mIFRlcm1zUG9zaXRpb24ubmV4dCwgYSBqYXZhLmxhbmcuSWxsZWdhbEFyZ3VtZW50RXhjZXB0
aW9uIHdpbGwgYmUgdGhyb3duLCBhcyBiZWxsb3dzLg0KPj4+DQo+Pj4gIGphdmEubGFuZy5JbGxl
Z2FsQXJndW1lbnRFeGNlcHRpb246IE5lZ2F0aXZlIHBvc2l0aW9uDQo+Pj4gICAgYXQgc3VuLm5p
by5jaC5GaWxlQ2hhbm5lbEltcGwucmVhZChGaWxlQ2hhbm5lbEltcGwuamF2YTo2MTApDQo+Pj4g
ICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuTklPRlNEaXJlY3RvcnkkTklPRlNJbmRleElu
cHV0LnJlYWRJbnRlcm5hbChOSU9GU0RpcmVjdG9yeS5qYXZhOjE2MSkNCj4+PiAgICBhdCBvcmcu
YXBhY2hlLmx1Y2VuZS5zdG9yZS5CdWZmZXJlZEluZGV4SW5wdXQucmVmaWxsKEJ1ZmZlcmVkSW5k
ZXhJbnB1dC5qYXZhOjIxMykNCj4+PiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5CdWZm
ZXJlZEluZGV4SW5wdXQucmVhZEJ5dGUoQnVmZmVyZWRJbmRleElucHV0LmphdmE6MzkpDQo+Pj4g
ICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuSW5kZXhJbnB1dC5yZWFkVkludChJbmRleElu
cHV0LmphdmE6OTIpDQo+Pj4gICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuc3RvcmUuQnVmZmVyZWRJ
bmRleElucHV0LnJlYWRWSW50KEJ1ZmZlcmVkSW5kZXhJbnB1dC5qYXZhOjE4MSkNCj4+PiAgICBh
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TZWdtZW50VGVybVBvc2l0aW9ucy5yZWFkRGVsdGFQ
b3NpdGlvbihTZWdtZW50VGVybVBvc2l0aW9ucy5qYXZhOjc1KQ0KPj4+ICAgIGF0IG9yZy5hcGFj
aGUubHVjZW5lLmluZGV4LlNlZ21lbnRUZXJtUG9zaXRpb25zLnNraXBQb3NpdGlvbnMoU2VnbWVu
dFRlcm1Qb3NpdGlvbnMuamF2YToxMzApDQo+Pj4gICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5k
ZXguU2VnbWVudFRlcm1Qb3NpdGlvbnMubGF6eVNraXAoU2VnbWVudFRlcm1Qb3NpdGlvbnMuamF2
YToxNjgpDQo+Pj4gICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguU2VnbWVudFRlcm1Qb3Np
dGlvbnMubmV4dFBvc2l0aW9uKFNlZ21lbnRUZXJtUG9zaXRpb25zLmphdmE6NjkpDQo+Pj4NCj4+
PiBJbiBteSBmdXJ0aGVyIHN0dWR5LCBJIGZvdW5kIHRoYXQgaWYgZG9jaWQgZXhlY2VlZCAxMDQ0
Mjc4LCB0aGUgZXhjZXB0aW9uIG9jY3VycyBldmVyeXRpbWUsIGZvciB0aGUgc21hbGwgb25lcywg
IHRoZSBleGNlcHRpb24gbmV2ZXIgb2NjdXIuIEJUVywgdGhlIHRvdGFsIG51bWJlciBvZiBkb2N1
bWVudHMgaXMgYWJvdXQgMTM0NDI3OCwgYW5kIGFyZSBuZXZlciBkZWxldGVkLg0KPj4+DQo+Pj4g
VGhhbmtzLg0KPj4+DQo+Pj4gMjAxMS0wNC0wMQ0KPj4+DQo+Pj4NCj4+Pg0KPj4+IFl1YW4gV3Ug
W0dNYWlsXQ0KPj4+DQo=

--=====003_Dragon518686408510_=====--


From java-user-return-49320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 05:02:20 2011
Return-Path: <java-user-return-49320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40621 invoked from network); 6 Apr 2011 05:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 05:02:20 -0000
Received: (qmail 81629 invoked by uid 500); 6 Apr 2011 05:02:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81414 invoked by uid 500); 6 Apr 2011 05:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81399 invoked by uid 99); 6 Apr 2011 05:02:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 05:02:12 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 05:02:07 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1Q7KsD-0000jJ-BN
	for java-user@lucene.apache.org; Tue, 05 Apr 2011 22:01:45 -0700
Date: Tue, 5 Apr 2011 22:01:45 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <1302066105336-2783747.post@n3.nabble.com>
Subject: Highlighting a phrase with "Single" <SPAN>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1488_11259743.1302066105347"

------=_Part_1488_11259743.1302066105347
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

If there is a phrase in search, the highlighter highlights every word
separately.. 
Like this : 


I love Lucene


Instead what I want is like this : 


I love Lucene 


Is there a way to ask Lucene do this ? I know we could ask css or jquery to
do the task, but whats the point ? right ? 


So, is there a way to ask the highlighter to do this ?

--
View this message in context: http://lucene.472066.n3.nabble.com/Highlighting-a-phrase-with-Single-SPAN-tp2783747p2783747.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_1488_11259743.1302066105347--

From java-user-return-49321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 06:55:41 2011
Return-Path: <java-user-return-49321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21042 invoked from network); 6 Apr 2011 06:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 06:55:41 -0000
Received: (qmail 75270 invoked by uid 500); 6 Apr 2011 06:55:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75223 invoked by uid 500); 6 Apr 2011 06:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75211 invoked by uid 99); 6 Apr 2011 06:55:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 06:55:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.171.216.60] (HELO cust-smtp-192.fasthosts.net.uk) (213.171.216.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 06:55:28 +0000
Received: from [172.16.2.10] (unknown [193.128.105.2])
	by cust-smtp-192.fasthosts.net.uk (Postfix) with ESMTP id 6171E770089
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2011 07:55:07 +0100 (BST)
From: Mark Wiltshire <mark@redalertconsultants.co.uk>
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-3--504323707
Subject: Re: Help with delimited text
Date: Wed, 6 Apr 2011 07:55:06 +0100
In-Reply-To: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk>
To: java-user@lucene.apache.org
References: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk>
Message-Id: <B03E3260-7C52-47E6-9BB6-B0A352012478@redalertconsultants.co.uk>
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-3--504323707
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

To add more information

	I am then wanting to search this field using part or all of the =
path using wildcards

	i.e.=20

	Search category_path with /Top/My Prods*


Hi java-users

	I need some help.

	I am indexing categories into a single field category_path

	Which may contain items such as

	/Top/Books,/Top/My Prods/Book Prods/Text Books, =
/Maths/Books/TextBooks=20

	i.e. category paths delimited by ,

	I want to store this field, so the Analyser tokenizes the =
document only on ',' charaters and not on the '/' characters

	I am adding the field to the index using

	Where the categoryPath is a String containing list of the items =
above.
	=09
	doc.add(new =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.ANALYZED));=


	I think I need to split the string my self, but how do I pass =
this to Lucene, do I have to setup different fields ?

	I need to keep the full path in the index, as I want to use this =
when redirecting users, when clicking on the results.

	Any help would be great.

	Many thanks

Regards

Mark=

--Apple-Mail-3--504323707--

From java-user-return-49322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 08:51:34 2011
Return-Path: <java-user-return-49322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3369 invoked from network); 6 Apr 2011 08:51:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 08:51:33 -0000
Received: (qmail 89189 invoked by uid 500); 6 Apr 2011 08:51:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87740 invoked by uid 500); 6 Apr 2011 08:51:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87723 invoked by uid 99); 6 Apr 2011 08:51:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 08:51:22 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 08:51:15 +0000
Received: from compute2.internal (compute2.nyi.mail.srv.osa [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id C072720749;
	Wed,  6 Apr 2011 04:50:54 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Wed, 06 Apr 2011 04:50:54 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=H8unyVao4rk+Y9a/z5LYInGLYP8=; b=GMSLGgTBdL0KCbHyhfByON5PVTLFNAWtfq8pTSD5uY3kHuQyuitBe1W7uF7/ND24Umerhr+102IzdHQ/w4lO4Ie0+omAbgVkbyc85BjRN+VpcYI/sf3+EMH52CHoILfQgloMHHuaFShiHaJs4PUB9rVEhVXkD9XWVbwObb5qtRw=
X-Sasl-enc: P39orNfO0LfE1P/M/8UrkVu4j3FIQ7ZXt/N/ArS6QMKt 1302079854
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 39B5B4014FC;
	Wed,  6 Apr 2011 04:50:53 -0400 (EDT)
Message-ID: <4D9C296A.8040101@fastmail.fm>
Date: Wed, 06 Apr 2011 09:50:50 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: simon.willnauer@gmail.com
CC: Simon Willnauer <simon.willnauer@googlemail.com>, 
 java-user@lucene.apache.org, 
 Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene Merge failing on Open Files
References: <4D9A168B.5020208@fastmail.fm>	<BANLkTino475Uokk_DeF_--OqmZaXw6ZTLw@mail.gmail.com>	<4D9A2332.5070405@fastmail.fm> <BANLkTiktyR6S1uZk0ZwF=XiegQKGJMe4GQ@mail.gmail.com>
In-Reply-To: <BANLkTiktyR6S1uZk0ZwF=XiegQKGJMe4GQ@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 04/04/2011 21:06, Simon Willnauer wrote:
> On Mon, Apr 4, 2011 at 9:59 PM, Paul Taylor<paul_t100@fastmail.fm>  wrote:
>> On 04/04/2011 20:13, Michael McCandless wrote:
>>> How are you merging these indices?  (IW.addIndexes?).
>>>
>>> Are you changing any of IW's defaults, eg mergeFactor?
>>>
>>> Mike
>> Hi Mike
>>
>> I have
>>
>> indexWriter.setMaxBufferedDocs(10000);
>> indexWriter.setMergeFactor(3000);
>>
> I didn't read though the entire email but MergeFactor 3000 doesn't
> look right at all. You should try something between 5 and 30. I
> haven't seen a mergeFactor>  50 doing any good in a common env. Why do
> you use such a large factor?
>
> simon
>
decreased merge factor to 10, and it still fails
Is there way I can find out how many open file handles lucene will need ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 08:53:54 2011
Return-Path: <java-user-return-49323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3972 invoked from network); 6 Apr 2011 08:53:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 08:53:54 -0000
Received: (qmail 96991 invoked by uid 500); 6 Apr 2011 08:53:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96863 invoked by uid 500); 6 Apr 2011 08:53:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96851 invoked by uid 99); 6 Apr 2011 08:53:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 08:53:51 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 08:53:46 +0000
Received: by iym1 with SMTP id 1so1727457iym.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 01:53:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=3KWy2zyQTIZ+tIpKf4dtZ8l9nJYzD5PwlvVrG8BOOCw=;
        b=tPF7uADB1RfBxa9smsmFdq9AlJH2pNHgN4u6AhiWkp1KglmyW/8A6hMvS+74yU7bKo
         x6Xfg9TUZA6+YYml5R3VFEySRrM7Y3v2sS+nweOq0+cnous7wcLWIKrnQ+Q1vfcjmqfr
         GzMHmId/GSzwVEXIlzipoyNXznMcocb5ZG51w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=K+pxJnLkNGepG7Ii9hDoqslCf0FnZwSxCoWYsjl5/Uxz/YeGSjYzr8hogO50I9SKrG
         VLSpEFfzxFw5sxltggC6pKIxh7mHALqIrvoQSjrjHqmkBFreN6sAm35X9TpQKbuY/oy9
         LOBAkv0rgf9GI/Epgu32Uj6Sk4vKWWyVPwWFs=
Received: by 10.231.200.86 with SMTP id ev22mr673287ibb.159.1302080006134;
 Wed, 06 Apr 2011 01:53:26 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.205.143 with HTTP; Wed, 6 Apr 2011 01:53:06 -0700 (PDT)
In-Reply-To: <BANLkTi=pwat3V-XpKwoFoF3FEdNJXO8XwA@mail.gmail.com>
References: <BANLkTinoA7nPPBBu5x+iZcxkK0qoJpLcsQ@mail.gmail.com>
 <BANLkTikM2KPVqzfUvev1rJNrSBfUAk0zAQ@mail.gmail.com> <BANLkTi=pwat3V-XpKwoFoF3FEdNJXO8XwA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 6 Apr 2011 09:53:06 +0100
Message-ID: <BANLkTi=fh28HjMisxvYoPSSnYe7m7jiidg@mail.gmail.com>
Subject: Re: Question about open files
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Yes, to the best of my knowledge and experience, closing readers and
writers releases the file handles.


--
Ian.


On Wed, Apr 6, 2011 at 12:59 AM, Jean-Baptiste Reure
<jbreure@weborganic.com> wrote:
> We are using version 3.0.3. So you can confirm that closing the writer (a=
nd
> the reader created from that writer) should be enough to release the file
> handles?
> If that is the case, that means our application has a bug somewhere that =
i
> need to track down.
> Thanks,
> JB.
>
> On 5 April 2011 19:48, Ian Lea <ian.lea@gmail.com> wrote:
>
>> Which version of lucene are you using? =A0Something changed in the 3.x
>> release, and maybe 2.9.x, in the way that old file handles are closed.
>> =A0Previously it wasn't always necessary to explicitly close everything,
>> now it is.
>>
>> Your usage sounds fine to me. =A0When I've hit too many open files when
>> using 3.0.x it has always been because something, somewhere, wasn't
>> being closed.
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, Apr 5, 2011 at 8:49 AM, Jean-Baptiste Reure
>> <jbreure@weborganic.com> wrote:
>> > Hi all,
>> >
>> > I have been looking for information about this and found a few things
>> here
>> > and there but nothing very clear on when files are opened and closed b=
y
>> > Lucene.
>> >
>> > We have an application that uses Lucene quite heavily in the following
>> > fashion: there are multiple indexes in use at all times. For each inde=
x,
>> a
>> > single IndexWriter object is constantly opened (and used to update the
>> > index) and a single IndexReader is also constantly opened. This Reader=
 is
>> > created using the almost real-time reader of the IndexWriter. The Read=
er
>> is
>> > used to query the index and when the Writer updates an index, the
>> > corresponding reader is re-opened and the previous one is discarded wh=
en
>> all
>> > searches using it are finished. Periodically, the index is optimised i=
f
>> it
>> > needs to be (if the writer has been used).
>> >
>> > This is all working perfectly fine but we've been running into an issu=
e
>> > recently when we've add a lot of indexes on one server (more than a 10=
00
>> > indexes). This led to the "Too many open files" exception, so we
>> increased
>> > the number of open files allowed on that server but obviously, it's a
>> > temporary solution.
>> >
>> > So we decided to implement a mechanism that would keep only a maximum
>> number
>> > of indexes "open" at all times. When the maximum number is reached, th=
e
>> > least recently used indexes are closed (closing the IndexWriter and th=
e
>> > IndexReader), and if these indexes are needed again in the future, the=
y
>> are
>> > "re-opened".
>> > This is functioning fine as well, as we can see ".lock" files appearin=
g
>> and
>> > disappearing in the index directories, but handles on the segment file=
s
>> are
>> > still in use.
>> >
>> > So my question is when are these file handles discarded? I was under t=
he
>> > impression from reading the documentation that closing an IndexReader =
was
>> > enough to close the files associated with that reader but we went even
>> > further by closing the IndexWriter as well but to no avail. If it shou=
ld
>> > work that way, it means we have a bug somewhere with readers not being
>> > closed properly but I couldn't find one last time I checked.
>> >
>> > Also, do you think it is the right way to go around the "too many open
>> > files" issue? Can you recommend using another method?
>> >
>> > Thanks for any help.
>> >
>> > JB Reure
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:07:36 2011
Return-Path: <java-user-return-49324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59137 invoked from network); 6 Apr 2011 09:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 09:07:36 -0000
Received: (qmail 9369 invoked by uid 500); 6 Apr 2011 09:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9244 invoked by uid 500); 6 Apr 2011 09:07:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9231 invoked by uid 99); 6 Apr 2011 09:07:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:07:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:07:26 +0000
Received: by iym1 with SMTP id 1so1736960iym.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 02:07:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=w7s9Xm3tPOJIYMrsF6pFOhcd4R/eHiDeMajIG7WlsOA=;
        b=YtGTON1B3+EhSXRroi+5FvYC0fORlok4UcR2RhCLQ78M2Okk00YwsYaDRk7Ck9c9e3
         f0jm20wZInRmsfbBVvAnS8IK35sKXfuqKAFoQLgp/m0dDWcfNUtUiB655dxUaEwtZ/H2
         ha5h/kuBW7v/qcZYNVLOAJJzY30Ku1TiuaVog=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=xhZY4JoWiQPwisBzX52enu8C0k+yJo23D9T25tNQr/zg0Ff04tUvVbfzH/yc9fBBka
         HWmC8aVUM9ZuEMhIjgL63nK2SxsQkDevd9nptDURKiZ1FKiGXAQPaErUWRfGfT1np897
         7+/xQpn+QD/HIw25p0QKl0c58HxtekvmvChVA=
Received: by 10.42.200.133 with SMTP id ew5mr1196696icb.182.1302080825218;
 Wed, 06 Apr 2011 02:07:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.205.143 with HTTP; Wed, 6 Apr 2011 02:06:45 -0700 (PDT)
In-Reply-To: <B03E3260-7C52-47E6-9BB6-B0A352012478@redalertconsultants.co.uk>
References: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk> <B03E3260-7C52-47E6-9BB6-B0A352012478@redalertconsultants.co.uk>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 6 Apr 2011 10:06:45 +0100
Message-ID: <BANLkTi=Agzu3qMmZ6jLwF7rpBa99K4w38A@mail.gmail.com>
Subject: Re: Help with delimited text
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You can add multiple values for a field to a single document.

Document doc =3D new Document();
String[] paths =3D whatever.split(",");
for (String p : paths) {
  doc.add(new Field("path", p, whatever ...);
}


For searching, assuming you only want to be able to wildcard on path
delimiters, you could index

/Top/My Prods/Book Prods/Text Books
/Top/My Prods/Book Prods
/Top/My Prods
/Top

which would let you search on any of them.

You'll want to pick or build an analyzer that behaves as you want wrt
case matching and not splitting on the /.  Sometime it can be easier
to replace a character e.g. / to _.  I think there is a lucene class
that can do that, maybe MappingCharFilter, if you don't want to do it
yourself.  You will of course need to be consistent and do the same
processing at index and search time.


--
Ian.



On Wed, Apr 6, 2011 at 7:55 AM, Mark Wiltshire
<mark@redalertconsultants.co.uk> wrote:
> To add more information
>
> =A0 =A0 =A0 =A0I am then wanting to search this field using part or all o=
f the path using wildcards
>
> =A0 =A0 =A0 =A0i.e.
>
> =A0 =A0 =A0 =A0Search category_path with /Top/My Prods*
>
>
> Hi java-users
>
> =A0 =A0 =A0 =A0I need some help.
>
> =A0 =A0 =A0 =A0I am indexing categories into a single field category_path
>
> =A0 =A0 =A0 =A0Which may contain items such as
>
> =A0 =A0 =A0 =A0/Top/Books,/Top/My Prods/Book Prods/Text Books, /Maths/Boo=
ks/TextBooks
>
> =A0 =A0 =A0 =A0i.e. category paths delimited by ,
>
> =A0 =A0 =A0 =A0I want to store this field, so the Analyser tokenizes the =
document only on ',' charaters and not on the '/' characters
>
> =A0 =A0 =A0 =A0I am adding the field to the index using
>
> =A0 =A0 =A0 =A0Where the categoryPath is a String containing list of the =
items above.
>
> =A0 =A0 =A0 =A0doc.add(new Field("category_path",categoryPath,Field.Store=
.YES,Field.Index.ANALYZED));
>
> =A0 =A0 =A0 =A0I think I need to split the string my self, but how do I p=
ass this to Lucene, do I have to setup different fields ?
>
> =A0 =A0 =A0 =A0I need to keep the full path in the index, as I want to us=
e this when redirecting users, when clicking on the results.
>
> =A0 =A0 =A0 =A0Any help would be great.
>
> =A0 =A0 =A0 =A0Many thanks
>
> Regards
>
> Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:08:48 2011
Return-Path: <java-user-return-49325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59294 invoked from network); 6 Apr 2011 09:08:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 09:08:48 -0000
Received: (qmail 11737 invoked by uid 500); 6 Apr 2011 09:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11698 invoked by uid 500); 6 Apr 2011 09:08:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11690 invoked by uid 99); 6 Apr 2011 09:08:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:08:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:08:39 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro-2.local (s134194.dynamic.ppp.asahi-net.or.jp [220.157.134.194])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id DBD0DDF92D
	for <java-user@lucene.apache.org>; Wed,  6 Apr 2011 18:08:17 +0900 (JST)
Message-ID: <4D9C2D81.1080105@r.email.ne.jp>
Date: Wed, 06 Apr 2011 18:08:17 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting a phrase with "Single" <SPAN>
References: <1302066105336-2783747.post@n3.nabble.com>
In-Reply-To: <1302066105336-2783747.post@n3.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

(11/04/06 14:01), shrinath.m wrote:
> If there is a phrase in search, the highlighter highlights every word
> separately..
> Like this :
>
>
> I love Lucene
>
>
> Instead what I want is like this :
>
>
> I love Lucene
>

Not sure my mailer problem or not, I don't see the difference between above two.
But reading the context, you want <b>I love lucene</b> instead of
<b>I</b> <b>love</b> <b>lucene</b>, right?

FastVectorHighlighter can solve your problem.

https://builds.apache.org/hudson/job/Lucene-trunk/javadoc/all/org/apache/lucene/search/vectorhighlight/package-summary.html#package_description

Koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:08:55 2011
Return-Path: <java-user-return-49326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59339 invoked from network); 6 Apr 2011 09:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 09:08:55 -0000
Received: (qmail 13689 invoked by uid 500); 6 Apr 2011 09:08:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13646 invoked by uid 500); 6 Apr 2011 09:08:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13638 invoked by uid 99); 6 Apr 2011 09:08:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:08:52 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.208.49.57] (HELO smail2.alcatel.fr) (64.208.49.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:08:42 +0000
Received: from FRMRSSXCHHUB03.dc-m.alcatel-lucent.com (FRMRSSXCHHUB03.dc-m.alcatel-lucent.com [135.120.45.63])
	by smail2.alcatel.fr (8.14.3/8.14.3/ICT) with ESMTP id p3696LhQ011749
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NOT)
	for <java-user@lucene.apache.org>; Wed, 6 Apr 2011 11:08:17 +0200
Received: from FRMRSSXCHMBSD1.dc-m.alcatel-lucent.com ([135.120.45.51]) by
 FRMRSSXCHHUB03.dc-m.alcatel-lucent.com ([135.120.45.63]) with mapi; Wed, 6
 Apr 2011 11:08:11 +0200
From: "ZYWALEWSKI, DANIEL (DANIEL)" <daniel.zywalewski@alcatel-lucent.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 6 Apr 2011 11:08:10 +0200
Subject: Indexation takes a lot of time :(
Thread-Topic: Indexation takes a lot of time :(
Thread-Index: Acv0OiacY1T2u55fS12ie2d7anWpdg==
Message-ID: <DD3CD532C204E24992220E891AD05CA4472C8C0E34@FRMRSSXCHMBSD1.dc-m.alcatel-lucent.com>
Accept-Language: fr-FR, en-US
Content-Language: fr-FR
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: fr-FR, en-US
Content-Type: multipart/alternative;
	boundary="_000_DD3CD532C204E24992220E891AD05CA4472C8C0E34FRMRSSXCHMBSD_"
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.64 on 155.132.188.80
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_DD3CD532C204E24992220E891AD05CA4472C8C0E34FRMRSSXCHMBSD_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello Champions !!

I have a problem with indexation(or should I say its time); So the elements=
 to Index are represtented by my own class - DocumentToIndex that consists =
of Fields(one Field is a fieldName and fieldValue). All documentToIndex are=
 kept/stocked in ArrayList. When I start indexing firstly I open IndexWrite=
r then for each field of documentToIndex I take its value and name and I cr=
eate Lucene Field then added to the LuceneDocument; Once it's finished (cre=
ation of LuceneDocument I add it to index). After passing all documents I c=
lose IndexWriter; All this can be represented by code:


indexWriter =3D new IndexWriter(indexDirectory, indexAnalyzer, false, Index=
Writer.MaxFieldLength.UNLIMITED);

      for (DocumentToIndex documentToIndex : objectsToIndex) {
        Document indexedDocument =3D new Document();
        for (int i =3D 0; i < documentToIndex.getDocumentSize(); i++) {

          indexedDocument.add(new Field(documentToIndex.getDocumentField(i)=
.getName(),
                                        documentToIndex.getDocumentField(i)=
.getValue(), Field.Store.YES,
                                        Field.Index.ANALYZED));
        }

        indexWriter.addDocument(indexedDocument);

      }

indexWriter.close()

My problem is that it takes much time to index. For example to index 28310 =
documentToIndex I need about 15min. Do I miss something or it's normal? May=
be this code is not really optimized? I'll be really grateful for any hints=
 and tips;

Thanks in advance,
D


--_000_DD3CD532C204E24992220E891AD05CA4472C8C0E34FRMRSSXCHMBSD_--

From java-user-return-49327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:16:42 2011
Return-Path: <java-user-return-49327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63967 invoked from network); 6 Apr 2011 09:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 09:16:42 -0000
Received: (qmail 27566 invoked by uid 500); 6 Apr 2011 09:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27533 invoked by uid 500); 6 Apr 2011 09:16:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27525 invoked by uid 99); 6 Apr 2011 09:16:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:16:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:16:32 +0000
Received: by iwr19 with SMTP id 19so1756972iwr.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 02:16:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=oAEEFT2x/qYpLEgvC0fNr2ZrRa1dAypcvKFgKrokG8w=;
        b=ctLov2ZqCBOdzrnCjXvJSpC/SXaYMtKU5ciCEYqj1a7t6/NQFUzq9X4PXngdoqoTKn
         lzsfCzawHKZdVrfWr8QuDffnc3OZYaLTK3KmPC6YGVxoYVgzZUQbXYD+es1AYlroZkjJ
         RlrOwQGCb9yV7bzaR+kSa9+P7sgOR9Tn34FOU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=h29jxv1bzMjSmaQJZMjPeitej2lIUodzwPFNOlnJr627juqExsRQXQiKpRJZE6/J8e
         p91DWuCPBtNt/wCTp+3gJyqYs2k6r1h/iFFdrInI4tzPn4dhpSQy95J7LVsLIbkp9UPB
         CGDqMWpmgTDGcg6e3hgMNs1yDYjffeKq+p+oA=
Received: by 10.231.82.139 with SMTP id b11mr45783ibl.134.1302081371118; Wed,
 06 Apr 2011 02:16:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.205.143 with HTTP; Wed, 6 Apr 2011 02:15:51 -0700 (PDT)
In-Reply-To: <DD3CD532C204E24992220E891AD05CA4472C8C0E34@FRMRSSXCHMBSD1.dc-m.alcatel-lucent.com>
References: <DD3CD532C204E24992220E891AD05CA4472C8C0E34@FRMRSSXCHMBSD1.dc-m.alcatel-lucent.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 6 Apr 2011 10:15:51 +0100
Message-ID: <BANLkTi=t=S7cayEoCqaAQ+oZWocMLeikmw@mail.gmail.com>
Subject: Re: Indexation takes a lot of time :(
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

15 minutes for 28k docs does sound very slow.

In my experience it's usually the reading of the raw data from
database or network or wherever that turns out to be the problem.  You
could easily check that by commenting out the lucene calls in your
code.

See also http://wiki.apache.org/lucene-java/ImproveIndexingSpeed.


--
Ian.


On Wed, Apr 6, 2011 at 10:08 AM, ZYWALEWSKI, DANIEL (DANIEL)
<daniel.zywalewski@alcatel-lucent.com> wrote:
> Hello Champions !!
>
> I have a problem with indexation(or should I say its time); So the elemen=
ts to Index are represtented by my own class - DocumentToIndex that consist=
s of Fields(one Field is a fieldName and fieldValue). All documentToIndex a=
re kept/stocked in ArrayList. When I start indexing firstly I open IndexWri=
ter then for each field of documentToIndex I take its value and name and I =
create Lucene Field then added to the LuceneDocument; Once it's finished (c=
reation of LuceneDocument I add it to index). After passing all documents I=
 close IndexWriter; All this can be represented by code:
>
>
> indexWriter =3D new IndexWriter(indexDirectory, indexAnalyzer, false, Ind=
exWriter.MaxFieldLength.UNLIMITED);
>
> =A0 =A0 =A0for (DocumentToIndex documentToIndex : objectsToIndex) {
> =A0 =A0 =A0 =A0Document indexedDocument =3D new Document();
> =A0 =A0 =A0 =A0for (int i =3D 0; i < documentToIndex.getDocumentSize(); i=
++) {
>
> =A0 =A0 =A0 =A0 =A0indexedDocument.add(new Field(documentToIndex.getDocum=
entField(i).getName(),
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0documentToIndex.getDocumentField(i).getValue(), Field.Store.YES,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0Field.Index.ANALYZED));
> =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0indexWriter.addDocument(indexedDocument);
>
> =A0 =A0 =A0}
>
> indexWriter.close()
>
> My problem is that it takes much time to index. For example to index 2831=
0 documentToIndex I need about 15min. Do I miss something or it's normal? M=
aybe this code is not really optimized? I'll be really grateful for any hin=
ts and tips;
>
> Thanks in advance,
> D
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:32:24 2011
Return-Path: <java-user-return-49328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19146 invoked from network); 6 Apr 2011 09:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 09:32:24 -0000
Received: (qmail 42664 invoked by uid 500); 6 Apr 2011 09:32:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42631 invoked by uid 500); 6 Apr 2011 09:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42617 invoked by uid 99); 6 Apr 2011 09:32:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:32:22 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yuanwu.mail@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:32:15 +0000
Received: by iwr19 with SMTP id 19so1768558iwr.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 02:31:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:date:from:to:cc:references:subject:message-id
         :organization:x-mailer:mime-version:content-type;
        bh=GK5Uzc89jldFKip+qAbvYrcPafkLe03iqbExFpGXvwE=;
        b=o2+P1o9NzJPjTMEfERyDBQGe4OQMaPN8imYUyEJfQ0IZko9iCFfl+s9GEpnAgpBiTc
         CmW0e/L0aKBWTQ7Gxxusce7z8+vk0tq/RBZ1T39k5NnVWEYSe2qwbkA4+KfGxMt8qzJ8
         Xg4Vy+NUw4NAf395fNfzVlcGugN/LpGLtO/Jg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:cc:references:subject:message-id:organization:x-mailer
         :mime-version:content-type;
        b=wUZIi0Xyaqwal9Eui8H+aprWHG/0EWnmPZ4ONO9q0jr/5I58eX8uoXE9rMj03PIVLN
         3wLu1WKt4N3U+cGZDgTEfAjh/dN+ngenPDtcvso0oxlxCLZpk5qAPseuMA5txdLU7J6+
         uTZecar8Jzn3eg4D/NPIjm9RPgWR/6ia2ZXM0=
Received: by 10.43.52.195 with SMTP id vn3mr1293289icb.272.1302082314610;
        Wed, 06 Apr 2011 02:31:54 -0700 (PDT)
Received: from BITCOMPUTER ([211.68.2.10])
        by mx.google.com with ESMTPS id vr5sm237809icb.0.2011.04.06.02.31.49
        (version=SSLv3 cipher=OTHER);
        Wed, 06 Apr 2011 02:31:53 -0700 (PDT)
Date: Wed, 6 Apr 2011 17:31:57 +0800
From: "=?gb2312?B?1KzO5CBbR01haWxd?=" <yuanwu.mail@gmail.com>
To: "Michael McCandless" <lucene@mikemccandless.com>
Cc: "java-user" <java-user@lucene.apache.org>
References: <201104011133527349770@gmail.com>,
 <AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>,
 <201104011826576408113@gmail.com>,
 <AANLkTi=iEb=-BAyHpmigNi1q7NOmmi46Cw3S9iR53ot6@mail.gmail.com>,
 <201104021607211569827@gmail.com>
Subject: Re: Re: Re: A likely bug of TermsPosition.nextPosition
Message-ID: <201104061731542961939@gmail.com>
Organization: =?gb2312?B?sbG+qcDtuaS089GnvMbL47v6v8bRp7y8yvXRp9S6?=
X-mailer: Foxmail 6, 15, 201, 22 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon440156187252_====="

--=====003_Dragon440156187252_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

RGVhciBNaWtlOg0KDQpJIGhhdmUgcnVuIHRoZSBDaGVja0luZGV4IG9mIGJyYW5jaF8zeCwgYW5k
IHRoZSByZXN1bHQgcmVwb3J0IGlzIGxpc3RlZCBiZWxvdzoNCg0KW29yYWNsZUBzZXJ2ZXIgYmlu
XSQgamF2YSAtY2xhc3NwYXRoIC4vIG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkNoZWNrSW5kZXgg
L2RhdGEvSW5kZXgvVVJML0dlbmVyaWMvICAtZml4DQpOT1RFOiB0ZXN0aW5nIHdpbGwgYmUgbW9y
ZSB0aG9yb3VnaCBpZiB5b3UgcnVuIGphdmEgd2l0aCAnLWVhOm9yZy5hcGFjaGUubHVjZW5lLi4u
Jywgc28gYXNzZXJ0aW9ucyBhcmUgZW5hYmxlZA0KT3BlbmluZyBpbmRleCBAIC9kYXRhL0luZGV4
L1VSTC9HZW5lcmljLw0KU2VnbWVudHMgZmlsZT1zZWdtZW50c19heXVwIG51bVNlZ21lbnRzPTEg
dmVyc2lvbj1GT1JNQVRfRElBR05PU1RJQ1MgW0x1Y2VuZSAyLjldDQogIDEgb2YgMTogbmFtZT1f
YnltMCBkb2NDb3VudD0xMzQ0Mjc4DQogICAgY29tcG91bmQ9ZmFsc2UNCiAgICBoYXNQcm94PXRy
dWUNCiAgICBudW1GaWxlcz0xMQ0KICAgIHNpemUgKE1CKT0xNSw5NzkuNTkzDQogICAgZGlhZ25v
c3RpY3MgPSB7b3B0aW1pemU9dHJ1ZSwgbWVyZ2VGYWN0b3I9Mywgb3MudmVyc2lvbj0yLjYuMjcu
NDEtMTcwLjIuMTE3LiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBmYzEwLng4Nl82NCwgb3M9TGludXgsIG1lcmdlRG9jU3RvcmVzPXRy
dWUsIGx1Y2VuZS52ZXJzaW9uPTMuMC1kZXYsIHNvdXJjZT1tZXJnZSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG9zLmFyY2g9YW1k
NjQsIGphdmEudmVyc2lvbj0xLjYuMF8yMSwgamF2YS52ZW5kb3I9U3VuIE1pY3Jvc3lzdGVtcyBJ
bmMufQ0KICAgIG5vIGRlbGV0aW9ucw0KICAgIHRlc3Q6IG9wZW4gcmVhZGVyLi4uLi4uLi4uT0sN
CiAgICB0ZXN0OiBmaWVsZHMuLi4uLi4uLi4uLi4uLk9LIFsxMSBmaWVsZHNdDQogICAgdGVzdDog
ZmllbGQgbm9ybXMuLi4uLi4uLi5PSyBbMiBmaWVsZHNdDQogICAgdGVzdDogdGVybXMsIGZyZXEs
IHByb3guLi5PSyBbMTI2MzUwMCB0ZXJtczsgNjAxNzE1MDcyIHRlcm1zL2RvY3MgcGFpcnM7IDE1
MTM3ODA2MzEgdG9rZW5zXQ0KICAgIHRlc3Q6IHN0b3JlZCBmaWVsZHMuLi4uLi4uT0sgWzgwNjMx
NTEgdG90YWwgZmllbGQgY291bnQ7IGF2ZyA1Ljk5OCBmaWVsZHMgcGVyIGRvY10NCiAgICB0ZXN0
OiB0ZXJtIHZlY3RvcnMuLi4uLi4uLk9LIFsxMzQ0Mjc4IHRvdGFsIHZlY3RvciBjb3VudDsgYXZn
IDEgdGVybS9mcmVxIHZlY3RvciBmaWVsZHMgcGVyIGRvY10NCk5vIHByb2JsZW1zIHdlcmUgZGV0
ZWN0ZWQgd2l0aCB0aGlzIGluZGV4Lg0KDQoyMDExLTA0LTA2IA0KDQoNCg0K1KzO5CBbR01haWxd
IA0KDQoNCg0Kt6K8/sjLo7ogTWljaGFlbCBNY0NhbmRsZXNzIA0Kt6LLzcqxvOSjuiAyMDExLTA0
LTAyICAyMToxMTowNSANCsrVvP7Iy6O6INSszuQgW0dNYWlsXSANCrOty82juiBqYXZhLXVzZXIg
DQrW98zio7ogUmU6IFJlOiBSZTogQSBsaWtlbHkgYnVnIG9mIFRlcm1zUG9zaXRpb24ubmV4dFBv
c2l0aW9uIA0KIA0KU28geW91ciB0ZXN0IGNhc2Ugc3RpbGwgaGl0cyB0aGUgZXhjZXB0aW9uIGlu
IDMuMT8NCklmIHlvdSBmdWxseSByZWJ1aWxkIHlvdSBpbmRleCBpbiAzLjEsIGRvZXMgdGhlIGV4
Y2VwdGlvbiBzdGlsbCBvY2N1cj8NCklzIHRoZXJlIGFueSB3YXkgSSBjb3VsZCBnZXQgYWNjZXNz
IHRvIHRoaXMgaW5kZXg/DQpEbyBvdGhlciB0ZXJtcyBiZXNpZGVzICJcMSIgaGF2ZSB0aGUgcHJv
YmxlbT8NCkkganVzdCBjb21taXR0ZWQgYSBjaGFuZ2UgdG8gdGhlIDMueCBicmFuY2gNCihodHRw
czovL3N2bi5hcGFjaGUub3JnL3JlcG9zL2FzZi9sdWNlbmUvZGV2L2JyYW5jaGVzL2JyYW5jaF8z
eCkgLS0NCmFyZSB5b3UgYWJsZSB0byBjaGVja291dCB0aGlzIGJyYW5jaCwgYnVpbGQgaXQsIGFu
ZCBydW4gaXRzIENoZWNrSW5kZXgNCm9uIHlvdXIgaW5kZXg/ICBJJ20gYWxzbyBhdHRhY2hpbmcg
dGhlIHBhdGNoLi4uIGFuZCBJIGNvdWxkIGFsc28gc2VuZA0KeW91IHRoZSBwYXRjaGVkIEx1Y2Vu
ZSBjb3JlIEpBUiBpZiB5b3Ugd2FudC4NCkknZCBsaWtlIHRvIHNlZSBpZiB0aGF0IGNoYW5nZSB0
byBDaGVja0luZGV4IGRldGVjdHMgdGhlIHByb2JsZW0gd2l0aA0KeW91ciBpbmRleC4NCk1pa2UN
Cmh0dHA6Ly9ibG9nLm1pa2VtY2NhbmRsZXNzLmNvbQ0KMjAxMS80LzIg1KzO5CBbR01haWxdIDx5
dWFud3UubWFpbEBnbWFpbC5jb20+Og0KPiBEZWFyIE1pa2U6DQo+DQo+IFRoZSBpbmRleCB3YXMg
Y29uc3RydWN0ZWQgdXNpbmcgTHVjZW5lIDIuOS4gQWZ0ZXIgdGhlIHByb2JsZW0gb2NjdXJlZCwg
SQ0KPiBzd2l0Y2hlZCB0byByZWNlbnRseSByZWxlYXNlICBMdWNlbmUgMy4xLCBsZWF2aW5nIHRo
ZSBpbmRleCB1bnRvdWNoZWQuDQo+DQo+IFRoYW5rcyB0byB5b3VyIGhlbHANCj4NCj4gMjAxMS0w
NC0wMg0KPiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXw0KPiDUrM7kIFtHTWFpbF0N
Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCj4gt6K8/sjLo7ogTWljaGFlbCBN
Y0NhbmRsZXNzDQo+ILeiy83Ksbzko7ogMjAxMS0wNC0wMiAgMDA6MTM6MzUNCj4gytW8/sjLo7og
1KzO5CBbR01haWxdDQo+ILOty82juiBqYXZhLXVzZXINCj4g1vfM4qO6IFJlOiBSZTogQSBsaWtl
bHkgYnVnIG9mIFRlcm1zUG9zaXRpb24ubmV4dFBvc2l0aW9uDQo+IEhtbSBzbyBpdCdzIG5vdCBp
bmRleCBjb3JydXB0aW9uLiAgQ3VyaW91cy4NCj4gV2hpY2ggTHVjZW5lIHZlcnNpb24gYXJlIHlv
dSB1c2luZz8gIExvb2tzIGxpa2UgaXQncyAyLjksIGJ1dCBub3QNCj4gMi45LjQ/ICBDYW4geW91
IHRyeSAyLjkuNCBhbmQgc2VlIGlmIHlvdSBzdGlsbCBoaXQgdGhlIHByb2JsZW0/DQo+IENhbiB5
b3UgcG9zdCBhIHNtYWxsIHRlc3QgY2FzZSBzaG93aW5nIHRoZSBwcm9ibGVtLCBvbiB5b3VyIGlu
ZGV4Pw0KPiBNaWtlDQo+IGh0dHA6Ly9ibG9nLm1pa2VtY2NhbmRsZXNzLmNvbQ0KPiAyMDExLzQv
MSDUrM7kIFtHTWFpbF0gPHl1YW53dS5tYWlsQGdtYWlsLmNvbT46DQo+PiBIaSwgRGVhciBNaWtl
Og0KPj4NCj4+IGJlbG93cyBsaXN0IHRoZSByZXBvcnQgb2YgY2hlY2tJbmRleC4gT1MgaXMgRmVk
b3JhIExpbnV4Lg0KPj4NCj4+IFtvcmFjbGVAc2VydmVyIGJpbl0kIGphdmEgLWNsYXNzcGF0aCAu
LyBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5DaGVja0luZGV4IC9kYXRhL0luZGV4L1VSTC9HZW5l
cmljLyAtZml4DQo+Pg0KPj4gTk9URTogdGVzdGluZyB3aWxsIGJlIG1vcmUgdGhvcm91Z2ggaWYg
eW91IHJ1biBqYXZhIHdpdGggJy1lYTpvcmcuYXBhY2hlLmx1Y2VuZS4uLicsIHNvIGFzc2VydGlv
bnMgYXJlIGVuYWJsZWQNCj4+IE9wZW5pbmcgaW5kZXggQCAvR2VvR3JpZC9kYXRhL0luZGV4L1VS
TC9HZW5lcmljLw0KPj4gU2VnbWVudHMgZmlsZT1zZWdtZW50c19heXVwIG51bVNlZ21lbnRzPTEg
dmVyc2lvbj1GT1JNQVRfRElBR05PU1RJQ1MgW0x1Y2VuZSAyLjldDQo+PiAgIDEgb2YgMTogbmFt
ZT1fYnltMCBkb2NDb3VudD0xMzQ0Mjc4DQo+PiAgICAgY29tcG91bmQ9ZmFsc2UNCj4+ICAgICBo
YXNQcm94PXRydWUNCj4+ICAgICBudW1GaWxlcz0xMQ0KPj4gICAgIHNpemUgKE1CKT0xNSw5Nzku
NTkzDQo+PiAgICAgZGlhZ25vc3RpY3MgPSB7b3B0aW1pemU9dHJ1ZSwgbWVyZ2VGYWN0b3I9Mywg
b3MudmVyc2lvbj0yLjYuMjcuNDEtMTcwLjIuMTE3LmZjMTAueDg2XzY0LCBvcz1MaW51eCwgbWVy
Z2VEb2NTdG9yZXM9dHJ1ZSwgbHVjZW5lLnZlcnNpb249My4wLWRldiwgc291cmNlPW1lcmdlLCBv
cy5hcmNoPWFtZDY0LCBqYXZhLnZlcnNpb249MS42LjBfMjEsIGphdmEudmVuZG9yPVN1biBNaWNy
b3N5c3RlbXMgSW5jLn0NCj4+ICAgICBubyBkZWxldGlvbnMNCj4+ICAgICB0ZXN0OiBvcGVuIHJl
YWRlci4uLi4uLi4uLk9LDQo+PiAgICAgdGVzdDogZmllbGRzLi4uLi4uLi4uLi4uLi5PSyBbMTEg
ZmllbGRzXQ0KPj4gICAgIHRlc3Q6IGZpZWxkIG5vcm1zLi4uLi4uLi4uT0sgWzIgZmllbGRzXQ0K
Pj4gICAgIHRlc3Q6IHRlcm1zLCBmcmVxLCBwcm94Li4uDQo+PiBPSyBbMTI2MzUwMCB0ZXJtczsg
NjAxNzE1MDcyIHRlcm1zL2RvY3MgcGFpcnM7IDE1MTM3ODA2MzEgdG9rZW5zXQ0KPj4gICAgIHRl
c3Q6IHN0b3JlZCBmaWVsZHMuLi4uLi4uT0sgWzgwNjMxNTEgdG90YWwgZmllbGQgY291bnQ7IGF2
ZyA1Ljk5OCBmaWVsZHMgcGVyIGRvY10NCj4+ICAgICB0ZXN0OiB0ZXJtIHZlY3RvcnMuLi4uLi4u
Lk9LIFsxMzQ0Mjc4IHRvdGFsIHZlY3RvciBjb3VudDsgYXZnIDEgdGVybS9mcmVxIHZlY3RvciBm
aWVsZHMgcGVyIGRvY10NCj4+IE5vIHByb2JsZW1zIHdlcmUgZGV0ZWN0ZWQgd2l0aCB0aGlzIGlu
ZGV4Lg0KPj4NCj4+DQo+Pg0KPj4gMjAxMS0wNC0wMQ0KPj4gX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18NCj4+INSszuQgW0dNYWlsXQ0KPj4gX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18NCj4+ILeivP7Iy6O6IE1pY2hhZWwgTWNDYW5kbGVzcw0KPj4gt6LLzcqxvOSjuiAy
MDExLTA0LTAxICAxNzo1ODowOA0KPj4gytW8/sjLo7ogamF2YS11c2VyDQo+PiCzrcvNo7og1KzO
5CBbR01haWxdDQo+PiDW98zio7ogUmU6IEEgbGlrZWx5IGJ1ZyBvZiBUZXJtc1Bvc2l0aW9uLm5l
eHRQb3NpdGlvbg0KPj4gSG1tIHRoaXMgY291bGQgYmUgZnJvbSBhIGNvcnJ1cHRlZCBpbmRleC4N
Cj4+IFdoYXQgdmVyc2lvbiBvZiBMdWNlbmU/ICBXaGF0IE9TL2ZpbGVzeXN0ZW0/DQo+PiBDYW4g
eW91IHJ1biBDaGVja0luZGV4IGFuZCBwb3N0IHRoZSBvdXRwdXQ/DQo+PiBNaWtlDQo+PiBodHRw
Oi8vYmxvZy5taWtlbWNjYW5kbGVzcy5jb20NCj4+IDIwMTEvMy8zMSDUrM7kIFtHTWFpbF0gPHl1
YW53dS5tYWlsQGdtYWlsLmNvbT46DQo+Pj4gSGksIGRlYXIgZXhwZXJ0czoNCj4+Pg0KPj4+IFdo
ZW4gSW5kZXhSZWFkZXIudGVybXNQb3NpdGlvbnMgaXMgdXNlZCB0byBhY2Nlc3Mgc3BlY2lmaWMg
dGVybXMsIHRoZSBjYWxsIHRvIFRlcm1zUG9zaXRpb24ubmV4dFBvc2l0aW9uIHN1Y2Nlc3MgaWYg
VGVybXNQb3NpdGlvbi5uZXh0IGlzIHVzZWQuIEJ1dCBpZiBUZXJtc1Bvc2l0aW9uLnNraXBUbyBp
cyB1c2VkIGluc3RlYWQgb2YgVGVybXNQb3NpdGlvbi5uZXh0LCBhIGphdmEubGFuZy5JbGxlZ2Fs
QXJndW1lbnRFeGNlcHRpb24gd2lsbCBiZSB0aHJvd24sIGFzIGJlbGxvd3MuDQo+Pj4NCj4+PiAg
amF2YS5sYW5nLklsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjogTmVnYXRpdmUgcG9zaXRpb24NCj4+
PiAgICBhdCBzdW4ubmlvLmNoLkZpbGVDaGFubmVsSW1wbC5yZWFkKEZpbGVDaGFubmVsSW1wbC5q
YXZhOjYxMCkNCj4+PiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5OSU9GU0RpcmVjdG9y
eSROSU9GU0luZGV4SW5wdXQucmVhZEludGVybmFsKE5JT0ZTRGlyZWN0b3J5LmphdmE6MTYxKQ0K
Pj4+ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkJ1ZmZlcmVkSW5kZXhJbnB1dC5yZWZp
bGwoQnVmZmVyZWRJbmRleElucHV0LmphdmE6MjEzKQ0KPj4+ICAgIGF0IG9yZy5hcGFjaGUubHVj
ZW5lLnN0b3JlLkJ1ZmZlcmVkSW5kZXhJbnB1dC5yZWFkQnl0ZShCdWZmZXJlZEluZGV4SW5wdXQu
amF2YTozOSkNCj4+PiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5JbmRleElucHV0LnJl
YWRWSW50KEluZGV4SW5wdXQuamF2YTo5MikNCj4+PiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5z
dG9yZS5CdWZmZXJlZEluZGV4SW5wdXQucmVhZFZJbnQoQnVmZmVyZWRJbmRleElucHV0LmphdmE6
MTgxKQ0KPj4+ICAgIGF0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LlNlZ21lbnRUZXJtUG9zaXRp
b25zLnJlYWREZWx0YVBvc2l0aW9uKFNlZ21lbnRUZXJtUG9zaXRpb25zLmphdmE6NzUpDQo+Pj4g
ICAgYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguU2VnbWVudFRlcm1Qb3NpdGlvbnMuc2tpcFBv
c2l0aW9ucyhTZWdtZW50VGVybVBvc2l0aW9ucy5qYXZhOjEzMCkNCj4+PiAgICBhdCBvcmcuYXBh
Y2hlLmx1Y2VuZS5pbmRleC5TZWdtZW50VGVybVBvc2l0aW9ucy5sYXp5U2tpcChTZWdtZW50VGVy
bVBvc2l0aW9ucy5qYXZhOjE2OCkNCj4+PiAgICBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5T
ZWdtZW50VGVybVBvc2l0aW9ucy5uZXh0UG9zaXRpb24oU2VnbWVudFRlcm1Qb3NpdGlvbnMuamF2
YTo2OSkNCj4+Pg0KPj4+IEluIG15IGZ1cnRoZXIgc3R1ZHksIEkgZm91bmQgdGhhdCBpZiBkb2Np
ZCBleGVjZWVkIDEwNDQyNzgsIHRoZSBleGNlcHRpb24gb2NjdXJzIGV2ZXJ5dGltZSwgZm9yIHRo
ZSBzbWFsbCBvbmVzLCAgdGhlIGV4Y2VwdGlvbiBuZXZlciBvY2N1ci4gQlRXLCB0aGUgdG90YWwg
bnVtYmVyIG9mIGRvY3VtZW50cyBpcyBhYm91dCAxMzQ0Mjc4LCBhbmQgYXJlIG5ldmVyIGRlbGV0
ZWQuDQo+Pj4NCj4+PiBUaGFua3MuDQo+Pj4NCj4+PiAyMDExLTA0LTAxDQo+Pj4NCj4+Pg0KPj4+
DQo+Pj4gWXVhbiBXdSBbR01haWxdDQo+Pj4NCg==

--=====003_Dragon440156187252_=====--


From java-user-return-49329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:51:18 2011
Return-Path: <java-user-return-49329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96774 invoked from network); 6 Apr 2011 09:51:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 09:51:18 -0000
Received: (qmail 68901 invoked by uid 500); 6 Apr 2011 09:51:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68864 invoked by uid 500); 6 Apr 2011 09:51:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68856 invoked by uid 99); 6 Apr 2011 09:51:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:51:16 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:51:10 +0000
Received: by fxm7 with SMTP id 7so1395462fxm.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 02:50:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=3ArLbyGLwQ6IPP1b3VYUj0ppDn6TZxZPJ2BWQsBURqE=;
        b=Fc6DT8vuRruUb85gds/0eFDA6Zu1UfhloTvGhgezx9pe/ALUUOdwxoZ1Mga2qHcEGx
         6jOsMKi1x93Rc4Nb3/y45NMUdA4B7kdlCgk82Xr/uUSu46Y/AuCp6wyp/u2nAH59FxK4
         nyAD6oRe8KNGJ/z3khc+2MDE2jlb2Ai3+j9C4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oiqvfDpfrKhMq9OBsB6XWDeK6rqt5p+UR2YStwGKsTTWyyuSAg0/LPe3HazPcxiRZl
         76t3LHBNaZjubiz0CgEqc8V2Ytz9O1lfVaHwREjbHSIiTym06niyfQIROmpK5d2PEcMZ
         jvhzgPLj0DrNm232MJ9VlMG303+QHX9RRQ298=
MIME-Version: 1.0
Received: by 10.223.127.210 with SMTP id h18mr800187fas.77.1302083449693; Wed,
 06 Apr 2011 02:50:49 -0700 (PDT)
Received: by 10.223.121.146 with HTTP; Wed, 6 Apr 2011 02:50:49 -0700 (PDT)
In-Reply-To: <DD3CD532C204E24992220E891AD05CA4472C8C0E34@FRMRSSXCHMBSD1.dc-m.alcatel-lucent.com>
References: <DD3CD532C204E24992220E891AD05CA4472C8C0E34@FRMRSSXCHMBSD1.dc-m.alcatel-lucent.com>
Date: Wed, 6 Apr 2011 15:20:49 +0530
Message-ID: <BANLkTi=EnJxY0hyqZtRJ8iNDWqv010conw@mail.gmail.com>
Subject: Re: Indexation takes a lot of time :(
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0023545309707ca60404a03ced08
X-Virus-Checked: Checked by ClamAV on apache.org

--0023545309707ca60404a03ced08
Content-Type: text/plain; charset=ISO-8859-1

Hello daniel,

The code seems to be fine. I think you are calculating the time for entire
program which may read the data from external source and prepare the array
list. Just calculate time only for indexing.

Regards
Aditya
www.findbestopensource.com



On Wed, Apr 6, 2011 at 2:38 PM, ZYWALEWSKI, DANIEL (DANIEL) <
daniel.zywalewski@alcatel-lucent.com> wrote:

> Hello Champions !!
>
> I have a problem with indexation(or should I say its time); So the elements
> to Index are represtented by my own class - DocumentToIndex that consists of
> Fields(one Field is a fieldName and fieldValue). All documentToIndex are
> kept/stocked in ArrayList. When I start indexing firstly I open IndexWriter
> then for each field of documentToIndex I take its value and name and I
> create Lucene Field then added to the LuceneDocument; Once it's finished
> (creation of LuceneDocument I add it to index). After passing all documents
> I close IndexWriter; All this can be represented by code:
>
>
> indexWriter = new IndexWriter(indexDirectory, indexAnalyzer, false,
> IndexWriter.MaxFieldLength.UNLIMITED);
>
>      for (DocumentToIndex documentToIndex : objectsToIndex) {
>        Document indexedDocument = new Document();
>        for (int i = 0; i < documentToIndex.getDocumentSize(); i++) {
>
>          indexedDocument.add(new
> Field(documentToIndex.getDocumentField(i).getName(),
>
>  documentToIndex.getDocumentField(i).getValue(), Field.Store.YES,
>                                        Field.Index.ANALYZED));
>        }
>
>        indexWriter.addDocument(indexedDocument);
>
>      }
>
> indexWriter.close()
>
> My problem is that it takes much time to index. For example to index 28310
> documentToIndex I need about 15min. Do I miss something or it's normal?
> Maybe this code is not really optimized? I'll be really grateful for any
> hints and tips;
>
> Thanks in advance,
> D
>
>

--0023545309707ca60404a03ced08--

From java-user-return-49330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 09:54:08 2011
Return-Path: <java-user-return-49330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97672 invoked from network); 6 Apr 2011 09:54:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 09:54:08 -0000
Received: (qmail 74858 invoked by uid 500); 6 Apr 2011 09:54:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74810 invoked by uid 500); 6 Apr 2011 09:54:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74802 invoked by uid 99); 6 Apr 2011 09:54:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:54:05 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 09:54:00 +0000
Received: by fxm7 with SMTP id 7so1397198fxm.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 02:53:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Akz6zhGXwsOC3a3lGG8gPAIu7hL4VKl5sOio5nsaZzs=;
        b=x52Fx5vgO3Ikze1bVh0yCd6JeaBhZNZ+jv0arccftk2xFBQtyuwxy9wTOlpT49CJNz
         z5OkXyNZeX8b9viWWDjCIWXIg3+7x2HjPT7VkAfKp1rxrIAHOdJd+mrLY7MS0EQo41R7
         RWr2SgoepbN578DNn607ZTxPN3DZJyFiExtmA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xrrHhIEfQ+ZzSili0f7Sw2tTc1lM+zNquS4Dqbhq2gb7EdkbIP65jDdLrZeO8Fvut2
         3HTNHWXUbyhWDKH9SrJOlmTIaiS98JNXi6EIiSxQ6A3JeZXSv67t2MxkyyuXjDpHTnMb
         J0yjh48OzfPPg+enpVMg1OXfwdYuqS1J1n72Y=
MIME-Version: 1.0
Received: by 10.223.127.210 with SMTP id h18mr803129fas.77.1302083619734; Wed,
 06 Apr 2011 02:53:39 -0700 (PDT)
Received: by 10.223.121.146 with HTTP; Wed, 6 Apr 2011 02:53:39 -0700 (PDT)
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
Date: Wed, 6 Apr 2011 15:23:39 +0530
Message-ID: <BANLkTikFNKhzc-O2pQxg4-q5wMeqEV3s=Q@mail.gmail.com>
Subject: Re: Concurrent Issue
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0023545309709f471504a03cf7d9
X-Virus-Checked: Checked by ClamAV on apache.org

--0023545309709f471504a03cf7d9
Content-Type: text/plain; charset=ISO-8859-1

You might have closed the IndexReader object but trying to access the search
results.

Regards
Aditya
www.findbestopensource.com



On Tue, Apr 5, 2011 at 5:26 PM, Yogesh Dabhi <ydabhi@asite.com> wrote:

> Hi
>
>
>
> My application is cluster in jobss application servers & lucene
> directory was shared.
>
>
>
> Concurrently 5 user access same lucene directory for searching document
>
> That time I got bellow exception
>
> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
> closed
>
>
>
> is there a way to handle such error
>
>
>
> Thanks & Regards
>
> Yogesh
>
>

--0023545309709f471504a03cf7d9--

From java-user-return-49331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 10:03:26 2011
Return-Path: <java-user-return-49331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27971 invoked from network); 6 Apr 2011 10:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 10:03:26 -0000
Received: (qmail 83230 invoked by uid 500); 6 Apr 2011 10:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83180 invoked by uid 500); 6 Apr 2011 10:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83172 invoked by uid 99); 6 Apr 2011 10:03:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 10:03:23 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,T_FRT_ADULT2,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 10:03:18 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1Q7PZh-0004B6-Pz
	for java-user@lucene.apache.org; Wed, 06 Apr 2011 03:02:57 -0700
Date: Wed, 6 Apr 2011 03:02:57 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <BANLkTi=rNHyU=3-CHtA9VH4fipfGagtUHQ@mail.gmail.com>
In-Reply-To: <4D9C2D81.1080105@r.email.ne.jp>
References: <1302066105336-2783747.post@n3.nabble.com> <4D9C2D81.1080105@r.email.ne.jp>
Subject: Re: Highlighting a phrase with "Single" <SPAN>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5718_23866904.1302084177802"

------=_Part_5718_23866904.1302084177802
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Thats right :)
Thanks Koji :)

On Wed, Apr 6, 2011 at 3:31 PM, Koji Sekiguchi [via Lucene] <
ml-node+2784321-1329059645-376162@n3.nabble.com> wrote:

> (11/04/06 14:01), shrinath.m wrote:
>
> > If there is a phrase in search, the highlighter highlights every word
> > separately..
> > Like this :
> >
> >
> > I love Lucene
> >
> >
> > Instead what I want is like this :
> >
> >
> > I love Lucene
> >
>
> Not sure my mailer problem or not, I don't see the difference between above
> two.
> But reading the context, you want <b>I love lucene</b> instead of
> <b>I</b> <b>love</b> <b>lucene</b>, right?
>
> FastVectorHighlighter can solve your problem.
>
>
> https://builds.apache.org/hudson/job/Lucene-trunk/javadoc/all/org/apache/lucene/search/vectorhighlight/package-summary.html#package_description
>
> Koji
> --
> http://www.rondhuit.com/en/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2784321&i=0&by-user=t>
> For additional commands, e-mail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2784321&i=1&by-user=t>
>
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://lucene.472066.n3.nabble.com/Highlighting-a-phrase-with-Single-SPAN-tp2783747p2784321.html
>  To unsubscribe from Highlighting a phrase with "Single" <SPAN>, click
> here<http://lucene.472066.n3.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=2783747&code=c2hyaW5hdGgubUB3ZWJ5b2cuY29tfDI3ODM3NDd8LTIxMzY3ODQ0ODI=>.
>
>



-- 
Regards
Shrinath.M


--
View this message in context: http://lucene.472066.n3.nabble.com/Highlighting-a-phrase-with-Single-SPAN-tp2783747p2784394.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_5718_23866904.1302084177802--

From java-user-return-49332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 10:34:14 2011
Return-Path: <java-user-return-49332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33638 invoked from network); 6 Apr 2011 10:34:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 10:34:13 -0000
Received: (qmail 44934 invoked by uid 500); 6 Apr 2011 10:34:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44896 invoked by uid 500); 6 Apr 2011 10:34:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44888 invoked by uid 99); 6 Apr 2011 10:34:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 10:34:11 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.171.216.60] (HELO cust-smtp-192.fasthosts.net.uk) (213.171.216.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 10:34:06 +0000
Received: from [172.16.2.10] (unknown [193.128.105.2])
	by cust-smtp-192.fasthosts.net.uk (Postfix) with ESMTP id A2AEA7700B6;
	Wed,  6 Apr 2011 11:33:39 +0100 (BST)
From: Mark Wiltshire <mark@redalertconsultants.co.uk>
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-69--491211442
Subject: Re: Help with delimited text
Date: Wed, 6 Apr 2011 11:33:39 +0100
In-Reply-To: <BANLkTi=Agzu3qMmZ6jLwF7rpBa99K4w38A@mail.gmail.com>
To: java-user@lucene.apache.org, Ian Lea <ian.lea@gmail.com>
References: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk> <B03E3260-7C52-47E6-9BB6-B0A352012478@redalertconsultants.co.uk> <BANLkTi=Agzu3qMmZ6jLwF7rpBa99K4w38A@mail.gmail.com>
Message-Id: <3A5F0355-B832-42AA-9D4E-6334357EA282@redalertconsultants.co.uk>
X-Mailer: Apple Mail (2.1084)

--Apple-Mail-69--491211442
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Thanks Ian,

	I have managed to do that and through Luke I get My expected =
results.

	Here is now my Index Code.

                StringTokenizer st =3D buildSubjectArea(dbConnection, =
oid);
                int tokenCount =3D 0;
                while (st.hasMoreTokens()){
                	tokenCount++;
                	String categoryPath =3D st.nextToken();
                   =20
                    if (categoryPath.length() !=3D 0) {
                        ////doc.add(Field.Text("category", category));
                    	doc.add(new =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.NOT_ANALYZE=
D));
                       =20
                    }
                }=09

	Now using Luke with KeyworkAnalyser if I enter

		category_path:/Top/My Prods*

	I get my expected results back.
 =20

	But I cannot get this working in my search code.
	I am using this field to filter the results, i.e.

	If I want Top Books I want to filter by /Top/Books*, if I want =
Top CD's I want to filter by /Top/CD*

	Filter string is generated from mapping file which gives me a =
category path

	e.g. /Top/Books

	Searcher searcher =3D new IndexSearcher(FSDirectory.open(new =
File(index)));
	Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30);
	...
	Query  subjectFilterQuery =3D new TermQuery(new =
Term("category_path","/Top/Books*"));
	QueryWrapperFilter filter =3D new =
QueryWrapperFilter(subjectFilterQuery);
	TopDocs searchResult =3D =
searcher.search(query,filter,MAX_SEARCH_RESULTS_SIZE);=20

	If I debug the subjectFilterQuery and write out

			subjectFilterQuery.toString()

	I See

		"subjectFilterQuery.toString()"	category_path:/TOP/CD*
=09
	So it looks like the query is constructed correctly ?
	But this does not bring back any results ?
	You say I need to be consistent in Index and Query, am I missing =
something.

	Many thanks

Mark

On 6 Apr 2011, at 10:06, Ian Lea wrote:

You can add multiple values for a field to a single document.

Document doc =3D new Document();
String[] paths =3D whatever.split(",");
for (String p : paths) {
 doc.add(new Field("path", p, whatever ...);
}


For searching, assuming you only want to be able to wildcard on path
delimiters, you could index

/Top/My Prods/Book Prods/Text Books
/Top/My Prods/Book Prods
/Top/My Prods
/Top

which would let you search on any of them.

You'll want to pick or build an analyzer that behaves as you want wrt
case matching and not splitting on the /.  Sometime it can be easier
to replace a character e.g. / to _.  I think there is a lucene class
that can do that, maybe MappingCharFilter, if you don't want to do it
yourself.  You will of course need to be consistent and do the same
processing at index and search time.


--
Ian.



On Wed, Apr 6, 2011 at 7:55 AM, Mark Wiltshire
<mark@redalertconsultants.co.uk> wrote:
> To add more information
>=20
>        I am then wanting to search this field using part or all of the =
path using wildcards
>=20
>        i.e.
>=20
>        Search category_path with /Top/My Prods*
>=20
>=20
> Hi java-users
>=20
>        I need some help.
>=20
>        I am indexing categories into a single field category_path
>=20
>        Which may contain items such as
>=20
>        /Top/Books,/Top/My Prods/Book Prods/Text Books, =
/Maths/Books/TextBooks
>=20
>        i.e. category paths delimited by ,
>=20
>        I want to store this field, so the Analyser tokenizes the =
document only on ',' charaters and not on the '/' characters
>=20
>        I am adding the field to the index using
>=20
>        Where the categoryPath is a String containing list of the items =
above.
>=20
>        doc.add(new =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.ANALYZED));=

>=20
>        I think I need to split the string my self, but how do I pass =
this to Lucene, do I have to setup different fields ?
>=20
>        I need to keep the full path in the index, as I want to use =
this when redirecting users, when clicking on the results.
>=20
>        Any help would be great.
>=20
>        Many thanks
>=20
> Regards
>=20
> Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Regards

Mark

You can view my current Wolters Kluwer tasks at:
https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_kluwer

You can view my calendar at:		   You can subscribe to my =
calendar at:
http://ical.me.com/markjwiltshire/Work    =
webcal://ical.me.com/markjwiltshire/Work.ics







Mark Wiltshire							Red =
Alert Consultants LTD
Director - Technical Web Consultant						=
Flat 6
									 =
 168 Tower Bridge Road
										=
		    London
										=
	             SE1 3LS
mark@redalertconsultants.co.uk
iPhone email: markjwiltshire@me.com
IM: markjwiltshire@yahoo.com			    Desk:     0208 247 =
1547
http://www.redalertconsultants.co.uk	    Mobile: 07973 252 403





--Apple-Mail-69--491211442
Content-Type: multipart/related;
	type="text/html";
	boundary=Apple-Mail-70--491211442


--Apple-Mail-70--491211442
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space; =
">Thanks Ian,<div><br></div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>I have managed to do that and =
through Luke I get My expected results.</div><div><br></div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>Here is =
now my Index Code.</div><div><br></div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; ">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp;StringTokenizer st =3D buildSubjectArea(<span =
style=3D"color: #1000d1">dbConnection</span>, oid);</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; =
">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span =
style=3D"color: #9e0067">int</span> tokenCount =3D 0;</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; =
">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span =
style=3D"color: #9e0067">while</span> (st.hasMoreTokens()){</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; =
">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>tokenCount++;</div><div style=3D"margin-top: 0px; margin-right: =
0px; margin-bottom: 0px; margin-left: 0px; font: normal normal normal =
11px/normal Monaco; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; <span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>String categoryPath =3D st.nextToken();</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; =
">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp;</div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; font: normal normal normal =
11px/normal Monaco; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; <span style=3D"color: #9e0067">if</span> =
(categoryPath.length() !=3D 0) {</div><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: normal =
normal normal 11px/normal Monaco; color: rgb(56, 148, 115); "><span =
style=3D"color: #000000">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
</span>////doc.add(Field.Text("category", category));</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; font: normal normal normal 11px/normal Monaco; =
">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
<span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>doc.add(<span style=3D"color: #9e0067">new</span> Field(<span =
style=3D"color: #4200ff">"category_path"</span>,categoryPath,Field.<span =
style=3D"text-decoration: underline">Store</span>.YES,Field.<span =
style=3D"text-decoration: =
underline">Index</span>.NOT_ANALYZED));</div><p style=3D"margin: 0.0px =
0.0px 0.0px 0.0px; font: 11.0px Monaco; min-height: 15.0px">&nbsp;&nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp;<br class=3D"webkit-block-placeholder"></p><div style=3D"margin-top:=
 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font: =
normal normal normal 11px/normal Monaco; ">&nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</div><div><span =
class=3D"Apple-style-span" style=3D"font-family: Monaco; font-size: =
11px; ">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp;}</span><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span><br><div><div><br></div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>Now using Luke with =
KeyworkAnalyser if I enter</div><div><br></div><div><span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">		=
</span><span class=3D"Apple-style-span" style=3D"white-space: pre; =
">category_path:/Top/My Prods*</span></div><div><span =
class=3D"Apple-tab-span" =
style=3D"white-space:pre"><br></span></div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>I get my =
expected results back.</div><span class=3D"Apple-style-span" =
style=3D"white-space: pre;">&nbsp;&nbsp;</span></div><div><span =
class=3D"Apple-style-span" style=3D"white-space: =
pre;"><br></span></div><div><span class=3D"Apple-style-span" =
style=3D"white-space: pre;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>But I cannot get this working in =
my search code.</span></div><div><span class=3D"Apple-style-span" =
style=3D"white-space: pre;"><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>I am using this field to filter =
the results, i.e.</span></div><div><span class=3D"Apple-style-span" =
style=3D"white-space: pre;"><br></span></div><div><span =
class=3D"Apple-style-span" style=3D"white-space: pre;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>If I want =
Top Books I want to filter by /Top/Books*, if I want Top CD's I want to =
filter by /Top/CD*</span></div><div><span class=3D"Apple-style-span" =
style=3D"white-space: pre;"><br></span></div><div><span =
class=3D"Apple-style-span" style=3D"white-space: pre;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>Filter =
string is generated from mapping file which gives me a category =
path</span></div><div><span class=3D"Apple-style-span" =
style=3D"white-space: pre;"><br></span></div><div><span =
class=3D"Apple-style-span" style=3D"white-space: pre;"><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>e.g. =
/Top/Books</span></div><div><span class=3D"Apple-style-span" =
style=3D"white-space: pre;"><br></span></div><div><span =
class=3D"Apple-style-span" style=3D"font-family: Monaco; font-size: =
11px; "><span class=3D"Apple-tab-span" style=3D"white-space: pre; ">	=
</span>Searcher searcher =3D <span style=3D"color: #9e0067">new</span> =
IndexSearcher(FSDirectory.<span style=3D"text-decoration: =
underline">open</span>(<span style=3D"color: #9e0067">new</span> =
File(index)));</span></div><div><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; "><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span></span><span class=3D"Apple-style-span" style=3D"font-family: =
Monaco; font-size: 11px; ">Analyzer analyzer =3D <span =
style=3D"text-decoration: underline ; color: #9e0067">new</span><span =
style=3D"text-decoration: underline"> =
StandardAnalyzer(Version.</span><span style=3D"text-decoration: =
underline ; color: #1000d1">LUCENE_30</span><span =
style=3D"text-decoration: underline">)</span>;</span></div><div><span =
class=3D"Apple-style-span" style=3D"font-family: Monaco; font-size: =
11px; "><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>...</span></div><div><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; "><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span></span><span class=3D"Apple-style-span" style=3D"font-family: =
Monaco; font-size: 11px; ">Query</span>&nbsp;&nbsp;<span =
class=3D"Apple-style-span" style=3D"font-family: Monaco; font-size: =
11px; ">subjectFilterQuery =3D </span><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; "><span style=3D"color: =
#9e0067">new</span></span><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; "> TermQuery(</span><span =
class=3D"Apple-style-span" style=3D"font-family: Monaco; font-size: =
11px; "><span style=3D"color: #9e0067">new</span></span><span =
class=3D"Apple-style-span" style=3D"font-family: Monaco; font-size: =
11px; "> Term(</span><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; "><span style=3D"color: =
#4200ff">"category_path"</span></span><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; =
">,"/Top/Books*"</span><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; =
">));</span></div><div><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; "><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span></span><span class=3D"Apple-style-span" style=3D"font-family: =
Monaco; font-size: 11px; ">QueryWrapperFilter filter&nbsp;</span><span =
class=3D"Apple-style-span" style=3D"font-family: Monaco; font-size: =
11px; ">=3D <span style=3D"color: #9e0067">new</span> =
QueryWrapperFilter(subjectFilterQuery);</span></div><div><span =
class=3D"Apple-style-span" style=3D"font-family: Monaco; font-size: =
11px; "><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>TopDocs&nbsp;</span><span class=3D"Apple-style-span" =
style=3D"font-family: Monaco; font-size: 11px; ">searchResult =3D =
searcher.search(query,filter,<span style=3D"text-decoration: =
underline">MAX_SEARCH_RESULTS_SIZE</span>);&nbsp;</span></div><div><font =
class=3D"Apple-style-span" face=3D"Monaco" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 11px; "><font =
class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: =
medium;"><br></span></font></span></font></div><div><span =
class=3D"Apple-style-span" style=3D"white-space: pre; "><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span></span><span class=3D"Apple-style-span" style=3D"white-space: =
pre; ">If I debug the subjectFilterQuery and write =
out</span></div><div><font class=3D"Apple-style-span" face=3D"Monaco" =
size=3D"3"><span class=3D"Apple-style-span" style=3D"font-size: 11px; =
"><font class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: =
medium;"><br></span></font></span></font></div><div><font =
class=3D"Apple-style-span" face=3D"Monaco" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 11px; "><font =
class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: =
medium;"><span class=3D"Apple-tab-span" style=3D"white-space:pre">		=
	</span></span></font></span></font><span =
class=3D"Apple-style-span" style=3D"font-family: 'Lucida Grande'; =
font-size: 11px; ">subjectFilterQuery.toString()</span></div><div><span =
class=3D"Apple-style-span" style=3D"font-family: 'Lucida Grande'; =
font-size: 11px; "><br></span></div><div><font class=3D"Apple-style-span" =
face=3D"'Lucida Grande'" size=3D"3"><span class=3D"Apple-style-span" =
style=3D"font-size: 11px;"><div style=3D"font-family: Helvetica; =
font-size: medium; "><span class=3D"Apple-tab-span" style=3D"white-space: =
pre; ">	</span>I See</div><div><br></div></span></font></div><div><span =
class=3D"Apple-style-span" style=3D"font-family: 'Lucida Grande'; =
font-size: 11px; "><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">		=
</span>"subjectFilterQuery.toString()"<span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	=
</span>category_path:/TOP/CD*</div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	=
</span></div></span></div><div><div><span class=3D"Apple-tab-span" =
style=3D"white-space:pre">	</span>So it looks like the query is =
constructed correctly ?</div><div><div><font class=3D"Apple-style-span" =
face=3D"Monaco" size=3D"3"><span class=3D"Apple-style-span" =
style=3D"font-size: 11px; "><font class=3D"Apple-style-span" =
face=3D"Helvetica"><span class=3D"Apple-style-span" style=3D"white-space: =
pre; font-size: medium; "><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; ">	</span>But this does not bring back any =
results ?</span></font></span></font></div><div><font =
class=3D"Apple-style-span" face=3D"Monaco" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 11px; "><font =
class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: medium; =
"><span class=3D"Apple-tab-span" style=3D"white-space: pre; ">	=
</span>You say I need to be consistent in Index and Query, am I missing =
something.</span></font></span></font></div><div><font =
class=3D"Apple-style-span" face=3D"Monaco" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 11px; "><font =
class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: medium; =
"><br></span></font></span></font></div></div><div><font =
class=3D"Apple-style-span" face=3D"Monaco" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 11px; "><font =
class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: medium; =
"><span class=3D"Apple-tab-span" style=3D"white-space:pre">	=
</span>Many thanks</span></font></span></font></div><div><font =
class=3D"Apple-style-span" face=3D"Monaco" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 11px; "><font =
class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: medium; =
"><br></span></font></span></font></div><div><font =
class=3D"Apple-style-span" face=3D"Monaco" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 11px; "><font =
class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: medium; =
">Mark</span></font></span></font></div><div><font =
class=3D"Apple-style-span" face=3D"Monaco" size=3D"3"><span =
class=3D"Apple-style-span" style=3D"font-size: 11px; "><font =
class=3D"Apple-style-span" face=3D"Helvetica"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; font-size: medium; =
"><br></span></font></span></font></div><div>On 6 Apr 2011, at 10:06, =
Ian Lea wrote:</div><br class=3D"Apple-interchange-newline"><div>You can =
add multiple values for a field to a single document.<br><br>Document =
doc =3D new Document();<br>String[] paths =3D =
whatever.split(",");<br>for (String p : paths) {<br> &nbsp;doc.add(new =
Field("path", p, whatever ...);<br>}<br><br><br>For searching, assuming =
you only want to be able to wildcard on path<br>delimiters, you could =
index<br><br>/Top/My Prods/Book Prods/Text Books<br>/Top/My Prods/Book =
Prods<br>/Top/My Prods<br>/Top<br><br>which would let you search on any =
of them.<br><br>You'll want to pick or build an analyzer that behaves as =
you want wrt<br>case matching and not splitting on the /. &nbsp;Sometime =
it can be easier<br>to replace a character e.g. / to _. &nbsp;I think =
there is a lucene class<br>that can do that, maybe MappingCharFilter, if =
you don't want to do it<br>yourself. &nbsp;You will of course need to be =
consistent and do the same<br>processing at index and search =
time.<br><br><br>--<br>Ian.<br><br><br><br>On Wed, Apr 6, 2011 at 7:55 =
AM, Mark Wiltshire<br>&lt;<a =
href=3D"mailto:mark@redalertconsultants.co.uk">mark@redalertconsultants.co=
.uk</a>&gt; wrote:<br><blockquote type=3D"cite">To add more =
information<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I am then wanting to search this field using part or all of =
the path using wildcards<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;i.e.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Search category_path with /Top/My =
Prods*<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Hi =
java-users<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I need some help.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I am indexing categories into a single field =
category_path<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Which may contain items such as<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;/Top/Books,/Top/My Prods/Book Prods/Text Books, =
/Maths/Books/TextBooks<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;i.e. category paths delimited by =
,<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">&nbsp; &nbsp; &nbsp; &nbsp;I want to store this field, so =
the Analyser tokenizes the document only on ',' charaters and not on the =
'/' characters<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I am adding the field to the index =
using<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Where the categoryPath is a String containing list of the =
items above.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;doc.add(new =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.ANALYZED));=
<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">&nbsp; &nbsp; &nbsp; &nbsp;I think I need to split the =
string my self, but how do I pass this to Lucene, do I have to setup =
different fields ?<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I need to keep the full path in the index, as I want to use =
this when redirecting users, when clicking on the =
results.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Any help would be great.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Many thanks<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Regards<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Mark<br></blockquote><br>-----------------------------------=
----------------------------------<br>To unsubscribe, e-mail: <a =
href=3D"mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscr=
ibe@lucene.apache.org</a><br>For additional commands, e-mail: <a =
href=3D"mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apa=
che.org</a><br><br></div></div><br><div>
<span class=3D"Apple-style-span" style=3D"font-size: 12px; "><span =
class=3D"Apple-style-span" style=3D"border-collapse: separate; color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; orphans: 2; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><div><br =
class=3D"Apple-interchange-newline">Regards</div><div><br></div><div>Mark<=
/div><div><br></div><div><span class=3D"Apple-style-span" =
style=3D"font-size: medium; "><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; "><span =
class=3D"Apple-style-span" style=3D"font-size: 12px; ">You can view my =
current Wolters Kluwer tasks at</span>:</div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; "><font =
class=3D"Apple-style-span" color=3D"#144FAE" face=3D"'Century Gothic'" =
size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: 10px; =
"><u><a =
href=3D"https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_=
kluwer">https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_=
kluwer</a></u></span></font></div><div><font class=3D"Apple-style-span" =
size=3D"3"><span class=3D"Apple-style-span" style=3D"font-size: 12px; =
"><font class=3D"Apple-style-span" color=3D"#2350A9" face=3D"'Century =
Gothic'" size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: =
10px; "><br></span></font></span></font></div></span></div><span =
class=3D"Apple-style-span" style=3D"font-size: medium; "><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">You can view my calendar at:<span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">		=
</span>&nbsp;&nbsp; You can subscribe to my calendar at:</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; "><font class=3D"Apple-style-span" face=3D"'Century =
Gothic'" size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: =
16px; font-family: Helvetica; color: rgb(35, 80, 169); =
-webkit-text-decorations-in-effect: underline; "><span =
class=3D"Apple-style-span" style=3D"-webkit-text-decorations-in-effect: =
underline; "><a href=3D"http://ical.me.com/markjwiltshire/Work"><font =
class=3D"Apple-style-span" face=3D"'Century Gothic'" size=3D"2"><span =
class=3D"Apple-style-span" style=3D"font-size: 10px; =
">http://ical.me.com/markjwiltshire/Work</span></font></a></span>&nbsp;&nb=
sp; &nbsp;<span class=3D"Apple-style-span" =
style=3D"-webkit-text-decorations-in-effect: underline; "><font =
class=3D"Apple-style-span" face=3D"'Century Gothic'" size=3D"2"><span =
class=3D"Apple-style-span" style=3D"font-size: 10px; "><a =
href=3D"file://localhost/webcal/::ical.me.com:markjwiltshire:Work.ics">web=
cal://ical.me.com/markjwiltshire/Work.ics</a></span></font></span></span><=
/font></div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; "><font class=3D"Apple-style-span" =
size=3D"3"><span class=3D"Apple-style-span" style=3D"font-size: 12px; =
"><font class=3D"Apple-style-span" color=3D"#2350A9" face=3D"'Century =
Gothic'" size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: =
10px; =
"><br></span></font></span></font></div></span></span><span></span></span>=
<br =
class=3D"Apple-interchange-newline"><span></span><span></span><span><img =
height=3D"72" width=3D"217" id=3D"39b6cd49-d7fa-47d2-a86e-6d8f2e9ee27c" =
apple-width=3D"yes" apple-height=3D"yes" =
src=3D"cid:EDAC8228-5850-4719-AF01-ECED6ECCFD18@wolterskluwer.local"></spa=
n><span class=3D"Apple-style-span" style=3D"border-collapse: separate; =
color: rgb(0, 0, 0); font-family: Helvetica; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; orphans: 2; text-align: auto; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span =
class=3D"Apple-style-span" style=3D"font-size: 12px; "><span =
class=3D"Apple-style-span" style=3D"border-collapse: separate; color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: medium; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; orphans: 2; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: medium; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><div><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><b><font class=3D"Apple-style-span" =
color=3D"#004080"><br class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline">Mark =
Wiltshire</font></b></font><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; "><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><b><font class=3D"Apple-style-span" =
color=3D"#004080">		</font></b><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; "><b><font class=3D"Apple-style-span" =
color=3D"#004080">					=
</font></b></span><b><font class=3D"Apple-style-span" =
color=3D"#004080">Red Alert Consultants =
LTD</font></b></font></span></div><div><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"white-space: pre; "><font class=3D"Apple-style-span" =
color=3D"#004080">Director - Technical Web Consultant<span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">				=
		</span>Flat 6</font></span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
"><span class=3D"Apple-tab-span" style=3D"white-space: pre; ">			=
						</span>  168 Tower =
Bridge Road</span></font></div><div><font class=3D"Apple-style-span" =
color=3D"#004080" face=3D"'Century Gothic'" size=3D"4"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; "><span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">				=
								</span>  =
  London</span></font></div><div><span class=3D"Apple-style-span" =
style=3D"font-size: large; color: rgb(0, 64, 128); font-family: 'Century =
Gothic'; white-space: pre; "><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; ">							=
				</span>             SE1 =
3LS</span></div><div><font class=3D"Apple-style-span" color=3D"#004080" =
face=3D"'Century Gothic'" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"white-space: pre; "><a =
href=3D"mailto:mark@redalertconsultants.co.uk">mark@redalertconsultants.co=
.uk</a></span></font></div><div><font class=3D"Apple-style-span" =
color=3D"#004080" face=3D"'Century Gothic'" size=3D"4"><span =
class=3D"Apple-style-span" style=3D"font-size: 14px; white-space: pre; =
">iPhone email: <span class=3D"Apple-style-span" style=3D"color: rgb(23, =
64, 125); white-space: normal; "><a =
href=3D"mailto:markjwiltshire@me.com"><span style=3D"color: rgb(35, 80, =
169); =
">markjwiltshire@me.com</span></a></span></span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
">IM: <a =
href=3D"mailto:markjwiltshire@yahoo.com">markjwiltshire@yahoo.com</a><span=
 class=3D"Apple-tab-span" style=3D"white-space: pre; ">			=
</span>    Desk:     0208 247 1547</span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
"><span class=3D"Apple-style-span" style=3D"color: rgb(0, 0, 0); =
white-space: normal; "><a =
href=3D"http://www.redalertconsultants.co.uk/"><font =
class=3D"Apple-style-span" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"font-size: 14px; =
">http://www.redalertconsultants.co.uk</span></font></a></span><span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">	</span>    =
Mobile: 07973 252 403</span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century =
Gothic'"><span class=3D"Apple-style-span" style=3D"font-size: large; =
white-space: pre; "><span class=3D"Apple-style-span" style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: medium; white-space: =
normal; "><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; =
"><div><br></div></div></span></span></font></div></span></span><br =
class=3D"Apple-interchange-newline"></span></span><br =
class=3D"Apple-interchange-newline"></span></span>
</div>
<br></div></body></html>=

--Apple-Mail-70--491211442
Content-Transfer-Encoding: base64
Content-Disposition: inline;
	filename=RAC_logo2_small2.jpg
Content-Type: image/jpeg;
	name="RAC_logo2_small2.jpg"
Content-Id: <EDAC8228-5850-4719-AF01-ECED6ECCFD18@wolterskluwer.local>

/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEP
ERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4e
Hh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCABIANkDASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAYHAQIFBAMI/8QAORAAAQMEAAQEBAMHAwUAAAAA
AQIDBAAFBhEHEiExEyJBURQyYXEVgaEIFjNCUmKRI0OCNFOxwuH/xAAZAQEAAwEBAAAAAAAAAAAA
AAAAAgMEBQH/xAAyEQABAwMDAgQEBAcAAAAAAAABAAIRAyExBBJBBVETImGBFHGR8DKhseEjM0Jy
wdHx/9oADAMBAAIRAxEAPwD9lk6G6wFfSi/lqp+POd5thMZp+wWK2yYj/hx25UmQecyXFFKW0NDq
rQHN1IH+Ki9waJKu09B+oqCmyJPcwrY5qbqroC+PAjNrlJwBS+QFSOWSDzexUFEdvYV84PEXKrPl
tsx3PcWYg/ir3gQp9uk+NHW5reiFAKT+YqHigZCv+BeZDHBxHY9lau/pTm6brj5TkFtxmxSr1eJK
Y8OOnmUrWyfYAepPYAVD+H/EiZk2YybFLxmVaUCCmdGW+6kuKaKuVPiIH8MnuAeuhUi9ocGnJVVP
S1alN1Ro8oyrI3XOyS9QMfsUy9XNzwocNouuq9dD2+vpUVyviPAtF+cx+2Wm6ZBeGmg69FtzQV4C
T2K1EgJ3sdOp+lQHL8wi8UnLTw/tsadAlSrjzXuJKa5XY7DGlqCu40o8oB9ag+s0CAbrVpemVqjg
57SGZJ7DM/TCvK3S0TYDExtC0JebS4ErGlJBG9Eeh6199/StGwEpCQNa9K2J9u9XBc0xNkKtDtWC
sa3r9arziJmFwM79zcNSiVkklH+o4QS3b2j0LzhHYjfRPcn9ef8AsyzbpN4dui8XB+4SI9xkM+O8
sqUoJV7nr33VPjAv2BdA9OqN0h1LjFwI5vN/lZWXdrjDtVtfuNwkNxokdBW66s6ShI9TX1iSWZcV
qTHWHGXUBbax2UkjYNVxxuKr0LFgzDqkuXqckyeU9UxWvO4fz0kfnVhFcaDBKlqQxHYRskkJShIH
6ACpNfLiOAqqmnFOhTfPmdNvQWH1M/Rerm+lOb6VVkDiz+JZdaoFvx+U5ZrnIXGj3FxYR4ykgkrQ
33LY181TmDkdqmZJccfjvrVPtzbbkpPIQlAcBKfN23oE6o2qx2ClfQaihZ7eJ7wJi8Yva/K7JV07
brAXv0/WoPeeKuCWue5AmZBHS8jmSopClNhQBPKVgcvN07bqGcE87xS24g5KveWRU3G5TXprzL0g
rUxzq8qPXWkgfnuo+OzeGgq9vStUaDqxYQBEWN5n9IV3A7pXwhyGZcVqTHcS4y6gLbWOykkbBFfe
rlzcZSlKURKUpREpSlESlKURYX8tUhxbh3jiBxRt2GY/dm7YrHI4vL8tTAeS1KJ5WElJOubRWob9
OujV3q+WoviWKN2bJMiv7sn4mZe5KHFHw+Xwm0ICENjqd60Tv69ulQqN3DbwtOlrCg41OQLfM/sq
m4a3PiHk91vOI5Lnsmy320LS241HtscGS0ezqFKT12B6Aa2D61aFhwGyWy6ovMlydeLs2kpRNuMh
Tzje+/Ik+RH/ABAr45/w4s+V3CLd0SplmvkP+BdLcsNyEj+knXmT9D7n3rnw8Dy4lDV24n3mXGSe
qI8ZqO4segU4nZ++tVS1pbkSt9bUU643MeGTkRHziBcH1UGzGwZXxV4iOy8eu8a22LHnxEbektl5
D0kbK3EN/KooJABV02OlS0Wy3cJsJuF0juv3m/znUtqlSV8z02Us8raN+gBPyjsNmuRjeF8V7Pb3
cVg36xQLH8S64i5NNLXOKHHFLPQ+Tm83eu1k3DGW/jFkteO5A9EmWyf8cqZMSZCn3SFBTigo9VbU
SPaq2tN3wZ+8LZVr05ZQNUeGCLAZGZcYm54vHZeGDOY4Z42xaEN/judXlxUhxhv+JKkLI5lrIHkb
TvWzoaH3rxfs5WSY9ecrzS+PtTbtNuC4fxCEaRytaCwj+3m2ke4QD61N+H3D+2YoqRcHZMi73yZ/
1d0mHmec/tH9Kf7R7Cvvwyw9GFWWRa2rpLuCHpjslJf/ANsLO+RI30A/Ukn1qbaTtzSRYKirr6Io
VmUzLnRJjImTHYCBbn8lKlHR61WfEPLsmlXRWMcN40edc0JV8dLc6swTrygq+XnP9J39ql+b2i6X
y1JgW2/P2bncHxD7DYLqmtHmSgk+RR/q66r14vj9qxy0t260xkssp8yj3U4o91rV3Uo+pPWrXtc7
yiwXP0r6ND+K4BzuGnHzPf0A91UmEWPinjFhktt2rF2n3Cp+ZLkynXX5SzvalEA7Pt7V8/2brflq
8Liz2Lva41skzXn3Wfg1LeWechQ5isBPUex6VeLraVIKSAQRog1COFGKXPD7fdbPJkMP29c1x+Ap
G+dLazspUOwIPtVAobajSCcFdR3VhX0tYPDQ9xacZiZzOJHsuThciPdc7yjOLhIZahQFfhMJxxQC
UIbIU6rZ6dVnW/pXK4xNXjiBdYmE4lNZbZaZTNuclaz4PIro02eX5uYcx16gCuhi3Bu3W9Tab5e7
hfYrDq3WIT55YqVKUVcymx0WrZ7q39q1nYvxEtWZ3udiEmwN2+8qaUtcxtZdjFDYQAgJ6EdNgHp1
qBa809rhYm8Z++PktbNRpW6zxaFUEsb5dwhoiAM5IEnGe66fD7h6zjU1V7vd3XeryhjwUPrbDbUV
r+hpsdED7VX/AA9gXjiJlOUXPx3YONzbkfiXmVFLk9DY5G2kqHyoAG1EHZ3VkQcJn2/Fr1GRfX51
/uzCkO3GUTpKikgBKB0ShOzoCu/g1gYxnE7bY44QERGEoJQnQUr+ZX5nZqYoFxaIgBZXdUFNlV+8
PqOhoMQABckDAvEW9YBUG4sWKzqsmPYLbrZDZRc7g2yhKWh/osoHO6odN7KU63361P7PjlitKOS2
WeDEA/7TCU7/AMCuNxBxB7J12uXAvL1nuVrkF6NKbaDmtjlUkpJGwRXtwuxXe0Kku3jKJt8ef5de
K0httrW/kSkdN767J7CrGsioTt97LHV1Afo2NFW4mW3kknPbEcqQpAAA9K3pqlaFyUpSlESlKURK
UpREpSlEQ1is0oixrpWCNVtWFdtURanVeWbcbfB5fjJseNzfL4rgRv7brgcSMs/de0tiJH+Nu81w
R7dDB6vOn/1Hcn2qO2XhfbZkdy552hOR3qWnmdVI6tx9j+G0n+VI7A96qfUdO1gkrfQ0lPw/G1Di
1pxAknvFxYd/ZWS04242lxtQWhQ2FA7BFbCq0/Z8tV+tOKTmLzHlQ45num3xZCiVssb0B1JIG96/
+19Mmzy8ycqOMYJamLpMjq1cJcjmEaKdHyEjW1fY9KiNQAwOcInhWv6W92qfQouDg3+qQBHcmY/e
wVkVneqhWIZum6YJMyK6xRBdtxfROZCtpQtrfNo+o6VurPrXE4fwswuyHYLEtlDjcfXO6pSxtKEj
1JqQrMiZ4lUO6bqWvLNkkO2279h3UxOjWKiXC3MHc1sMm6OWpy2+DMcjBpxfMohOup6DR66I9CK1
zzL5FlmxbLY7Wu736alS48UK5EJQOhccX2SkfrTxm7N/BXh6fqBqDpi2HjNxaMycQO8qX9Pem6ge
Ns8UP3hiyMgl2L8LcQv4iNFbUFNK15dKPfrXVfydwcQouKRYqHgYS5cx7xNFgbAQNa67O69FURJE
JU0LmvLGODoEmDYAetlJ+goSAnZNRvPssi4nYzOdZMqU6sMw4iD55Dp6JQO/5n0r4ZzkL9k4fyLs
+x4FwXHShmMFcx+IWAlKAfXzHv8ASjqrWzPCjS0VapsIFnmB6n7OV6cMyljJ13VcSK83GgTnIaXl
kcr5RrmUn+3fT8q6LN8tTl/esLcxtdyZYD7jA+ZLZOgTUaxuA7gvDFhqNbHrhMjRw6/HY1zvPK6r
I39Sf8VAeHOVXeflN9yqLgl5nLuym0sOJU2hDbLY5QnmWQO4UTqs51BZta78Rzb/AEuq3pTdT49W
h/LZYeYCTIzJ5ElXtzDW6xzioLleZ3S04oy+LGuNf57wi2+3PPIcUtwn5iUEjlA2T19KgubqzzCI
FvuZzxdyvU+UhlNqcipLLy1HXKgDzJA99/8Amp1NSGcT39PvsqNH0apqSGl4aXEhsyZjMQCIHc2+
hV68wpzConlGUuYrjVvmXOOJM+S+xF8Bk653XCArX0HU/lXi4n8RrZhEEeIw5PuTrSnGYTPzFKQS
VqP8qBrvVjqzGglxwslHp2prva2k2dxIEcxn29cKc81c26X602ufAgz5rbEm4OlqI2re3VAbIH5V
8sbuq7vjcC7qiLjqlxkPlknZQVJB5d+tUq/ml2yHipAuH7gX19NibcZEVPKSiS5rzqUSEgBHv71G
rXawA9/mtPT+lVNU+oDYMBm4F+Mnk2X6B2Kcw3UFmZ5NtVik3XIcUuFqShSG4zKn2nnJTqzpKEht
R0d++q4i3eNN3aRcIzOO2JvnSpMF4qedUgkbC1joDr2r01hMC6pZ02qQXPc1oxJIgn0iZ9rDlWsO
tK1a34Y3W1XLnpSlKIlYVWawoboiqmzvNXT9oa/m6uALssCO3bGnFgDTqeZ1xI996Tup1kWUWCwR
vHul1ixwfkQVgrcPslI6qP0Arx5bw/xXKZrU68WwOy2klCH23VtOAH0KkEEj71tjuAYlYHA9bLNH
RIHaQ7t10f8ANZJ/WszGVGSBFyuxXr6OuGOeXS1oG0ARYcGeTfGSopfc2yYWWTdIllEGPNU3CszM
sFMl59xXKHFpHRCANnXcgddV64CrTw2xhq0Rd3G+SiXfAbPM/Nkr+ZavYb9T0AFSfM8UgZVAYiTp
EuP8O+mQy7FdLbiFgHRB/OtMVwuxY2tx+BHWuW7/ABZchxTrzn3Wok6+g0PpUTTq75n3/Wys+M0h
04bBF5LRgx+GXE4zNsnhVRxFSjCuGNsxa4yPEl3ueXLkqOnalpUvxHggdzvYQPuKkuLWCdcFt5nl
kUR2IEcmz2kJ2IbQT0UserpAH2qf3LHLPcbvCu06E0/Mgg/DOLBPh776G9b6V01NhSSlXUEaNRZp
SHkk24H36qdXrU6drGN85Li539xuG9pAAn2xM0hwxzWLbOH9ptVlQ1c71JLkmWnxOVmIlTilLceX
/KBvt3qXZRZpl2uUTM8PyWDGuCIngAu8rsSS1zc2iR1HXfUVLGcYsLFsk22PaYbMSUkofabZCUuA
jRB136VHBwjwQJCBaHPDGtNiY9yD/jz6rwUaoYGmDHtEKx/UdG/UOrsDmEk8B0g5BBIHyH5yvnw2
zaXkEm7Wu6w4zc61BPjPwXvGjO7BPlV6Hp8p61B8IziKLjfLvChPXfJb7NWiLAY0S0wz5Gy4rem0
9ySevXtVyWSw2iyQfgrTb40KP6tsthIJ9z7mvjYcXsNhU8qz2uJCU+rmdU02ApZ+p71Pwap2y7Eq
pvUNCw1ttIw7bAmBbM8wTBgdonlVThsKXL4v3K55reosiVZ4rXhtKWEMR3Xdn/TB9Ep6cx6kk/Su
1xLu1rd4jY9bbrPYi221IXdZanVhKSsaSyPqdknX2qZXPB8Wud9TfJ9liSbikJAecRvt22OxI9yK
3umGY1dL21erlaI0ucygIbddSVcoB2OhOu576qA09QMLRGZvzdXO6rp6moZWfNmbYAAgxHl9LkzF
iormeZIuPCy+3e0MTWGkp8BiTIa8NLoUQnxEevL5j1IHapdjTdqtVmt9nhyWChlhLbKQ4NrCU9wP
X3r33G1QrhbnrdMjtvRHkeG40pPlKfauNj+BYpYJnxlqs0aPJA5Q71UtI1rQKidD7VaGVA/dY2/6
uc7UaV+mNOC0gkgWM2AEmRi/HKrV7K4L2e3DI3o7tznxHV2uwWxnq4opOnXiP5UlWxzH0BrTDrBd
r5xrdumVTESptniIeUw2rbUZ13qhtA9kp6lXqSKtPH8Nxywzpc61WxiNJmLK3nANqJJ2QN9hv0HS
vVb8ctFvvc69RIiW7hPCRJe5lErCRodCdD8tVQ3SvJBeeZ+/yXTf1qhTa9unaRLNoJieJHoImYuS
ZPZVJxWydS+LNos0GA7c5VqZVIjRGxtLspwaQVn0SgbUTWM+xxeOcM73e8glomZFdy0xNmBPkbQp
aR4aB/KgDp9e5q2oONWeDfJl8jQmkXGby/EP6JUvQ0O56dh2r3XK3QrlDXDuEZmVHXrmadQFJOu3
Q1L4Vx3FxucenZQb1qlS8CnSYQ1m3d3dBkj0E/W04EQixZki53VFrxeGJ1ntzBE248xDSSEeVto/
7itgb9APevPwSlQUYN+My5sZMu7THpkpa3ANOKXoJ+mgEjX0qfw4EWHFREiMNMMIGkttoCUgfYVG
GOGODM3I3BvHYXjlwu+ZJUkKJ3sJJ0Dv2FW+HVBBmc/4WX4vRvp1KcFoMXEEmJzcZJBta2OVrmtu
tmZ21UCBkDUWfbJiH2347iFqjvo6pC0/n2NRzHM1yW15vAwzKhaLm/N5vCm2xw8yQlO9utHqneu4
6da71w4UYNOnPzHbQpD0hwuPFmU80HFHuSErArrYthGMYwtTljtEaI6oaW8AVOKH1WolR/zXhp1C
/dj77KbdVomac0jLxBgFoEE87gZieIgqRUpStS4aUpSiJSlKIlKUoiUpSiJSlKIlKUoiUpSiJSlK
IlKUoiUpSiJSlKIlKUoiUpSiJSlKIv/Z

--Apple-Mail-70--491211442--

--Apple-Mail-69--491211442--

From java-user-return-49333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 10:45:21 2011
Return-Path: <java-user-return-49333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55252 invoked from network); 6 Apr 2011 10:45:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 10:45:21 -0000
Received: (qmail 55957 invoked by uid 500); 6 Apr 2011 10:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55907 invoked by uid 500); 6 Apr 2011 10:45:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55899 invoked by uid 99); 6 Apr 2011 10:45:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 10:45:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 10:45:14 +0000
Received: by wwk4 with SMTP id 4so4117919wwk.5
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 03:44:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.9.20 with SMTP id j20mr875670wbj.116.1302086691944; Wed,
 06 Apr 2011 03:44:51 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Wed, 6 Apr 2011 03:44:51 -0700 (PDT)
In-Reply-To: <4D9C296A.8040101@fastmail.fm>
References: <4D9A168B.5020208@fastmail.fm>
	<BANLkTino475Uokk_DeF_--OqmZaXw6ZTLw@mail.gmail.com>
	<4D9A2332.5070405@fastmail.fm>
	<BANLkTiktyR6S1uZk0ZwF=XiegQKGJMe4GQ@mail.gmail.com>
	<4D9C296A.8040101@fastmail.fm>
Date: Wed, 6 Apr 2011 06:44:51 -0400
Message-ID: <BANLkTi=iEmPPKB3XWujLgOOJoq68Zga3jg@mail.gmail.com>
Subject: Re: Lucene Merge failing on Open Files
From: Michael McCandless <lucene@mikemccandless.com>
To: paul_t100@fastmail.fm
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Can you turn on IndexWriter's infoStream, get the failure to happen,
and post the resulting output?

How are you adding the multiple indices together?  Can you post the
code that does that?

The number of open file handles needed during indexing is a function
of how many merges are running and how large (how many segments) each
of those merges are.  Lucene in Action 2, chapter 11, has a cool graph
showing this... (and also file handle usage by IndexReader, reopening
periodically).

Mike

http://blog.mikemccandless.com

On Wed, Apr 6, 2011 at 4:50 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> On 04/04/2011 21:06, Simon Willnauer wrote:
>>
>> On Mon, Apr 4, 2011 at 9:59 PM, Paul Taylor<paul_t100@fastmail.fm> =A0wr=
ote:
>>>
>>> On 04/04/2011 20:13, Michael McCandless wrote:
>>>>
>>>> How are you merging these indices? =A0(IW.addIndexes?).
>>>>
>>>> Are you changing any of IW's defaults, eg mergeFactor?
>>>>
>>>> Mike
>>>
>>> Hi Mike
>>>
>>> I have
>>>
>>> indexWriter.setMaxBufferedDocs(10000);
>>> indexWriter.setMergeFactor(3000);
>>>
>> I didn't read though the entire email but MergeFactor 3000 doesn't
>> look right at all. You should try something between 5 and 30. I
>> haven't seen a mergeFactor> =A050 doing any good in a common env. Why do
>> you use such a large factor?
>>
>> simon
>>
> decreased merge factor to 10, and it still fails
> Is there way I can find out how many open file handles lucene will need ?
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 12:13:47 2011
Return-Path: <java-user-return-49334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46601 invoked from network); 6 Apr 2011 12:13:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 12:13:47 -0000
Received: (qmail 46799 invoked by uid 500); 6 Apr 2011 12:13:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46741 invoked by uid 500); 6 Apr 2011 12:13:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46733 invoked by uid 99); 6 Apr 2011 12:13:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 12:13:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 12:13:40 +0000
Received: by qwj9 with SMTP id 9so1080759qwj.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 05:13:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=lzA9Yi+aQMukXL8grlWAHVXHLCCrTyhY7E9xJoOfL/M=;
        b=X6jLvUuOgfJRA574Y+jm0NmywRDQQZFPI43G1kwy1y4hljtPzniuVNW3LnZ6K7+7af
         KKIbSLw4we+6Mp0afpfAcKS6uZW0cMQ0i45Um9+zx46PMQeF4jWWmxL2PgcfykRKPmNr
         W4gXjed2t+MahraS4oYLa4R4Y2IVyrqeJGAQ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mGQKjAongRonHu0Ekd3b4AW14mCk69TzjYKdHXsH5gFvmuiAsH1d+FITEmuZUutPbO
         ur3tVkn1ybZ9LmKLLJA6dYEfR8jLBBIfd8eNNX5ruNtSNZAiLgl9sLruC1+GvLbHTkzm
         GeyborYXDw3NFVFg69YIe9yEyUmaW+v9NL4D4=
MIME-Version: 1.0
Received: by 10.229.23.210 with SMTP id s18mr735887qcb.10.1302091997849; Wed,
 06 Apr 2011 05:13:17 -0700 (PDT)
Received: by 10.229.72.8 with HTTP; Wed, 6 Apr 2011 05:13:17 -0700 (PDT)
In-Reply-To: <BANLkTi=pwat3V-XpKwoFoF3FEdNJXO8XwA@mail.gmail.com>
References: <BANLkTinoA7nPPBBu5x+iZcxkK0qoJpLcsQ@mail.gmail.com>
	<BANLkTikM2KPVqzfUvev1rJNrSBfUAk0zAQ@mail.gmail.com>
	<BANLkTi=pwat3V-XpKwoFoF3FEdNJXO8XwA@mail.gmail.com>
Date: Wed, 6 Apr 2011 08:13:17 -0400
Message-ID: <BANLkTimrcN9GNPS2e1vPVsiT23EutXsJLw@mail.gmail.com>
Subject: Re: Question about open files
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163641725dff2ae304a03eea7c

--00163641725dff2ae304a03eea7c
Content-Type: text/plain; charset=ISO-8859-1

I suspect you're already aware of this, but I've
overlooked the obvious so many times I thought
I'd mention it...

A classic mistake is to assign a reader with reopen
and not close the old reader, see:
http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/IndexReader.html#reopen()

<http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/IndexReader.html#reopen()>
Erick.

On Tue, Apr 5, 2011 at 7:59 PM, Jean-Baptiste Reure
<jbreure@weborganic.com>wrote:

> We are using version 3.0.3. So you can confirm that closing the writer (and
> the reader created from that writer) should be enough to release the file
> handles?
> If that is the case, that means our application has a bug somewhere that i
> need to track down.
> Thanks,
> JB.
>
> On 5 April 2011 19:48, Ian Lea <ian.lea@gmail.com> wrote:
>
> > Which version of lucene are you using?  Something changed in the 3.x
> > release, and maybe 2.9.x, in the way that old file handles are closed.
> >  Previously it wasn't always necessary to explicitly close everything,
> > now it is.
> >
> > Your usage sounds fine to me.  When I've hit too many open files when
> > using 3.0.x it has always been because something, somewhere, wasn't
> > being closed.
> >
> >
> > --
> > Ian.
> >
> >
> > On Tue, Apr 5, 2011 at 8:49 AM, Jean-Baptiste Reure
> > <jbreure@weborganic.com> wrote:
> > > Hi all,
> > >
> > > I have been looking for information about this and found a few things
> > here
> > > and there but nothing very clear on when files are opened and closed by
> > > Lucene.
> > >
> > > We have an application that uses Lucene quite heavily in the following
> > > fashion: there are multiple indexes in use at all times. For each
> index,
> > a
> > > single IndexWriter object is constantly opened (and used to update the
> > > index) and a single IndexReader is also constantly opened. This Reader
> is
> > > created using the almost real-time reader of the IndexWriter. The
> Reader
> > is
> > > used to query the index and when the Writer updates an index, the
> > > corresponding reader is re-opened and the previous one is discarded
> when
> > all
> > > searches using it are finished. Periodically, the index is optimised if
> > it
> > > needs to be (if the writer has been used).
> > >
> > > This is all working perfectly fine but we've been running into an issue
> > > recently when we've add a lot of indexes on one server (more than a
> 1000
> > > indexes). This led to the "Too many open files" exception, so we
> > increased
> > > the number of open files allowed on that server but obviously, it's a
> > > temporary solution.
> > >
> > > So we decided to implement a mechanism that would keep only a maximum
> > number
> > > of indexes "open" at all times. When the maximum number is reached, the
> > > least recently used indexes are closed (closing the IndexWriter and the
> > > IndexReader), and if these indexes are needed again in the future, they
> > are
> > > "re-opened".
> > > This is functioning fine as well, as we can see ".lock" files appearing
> > and
> > > disappearing in the index directories, but handles on the segment files
> > are
> > > still in use.
> > >
> > > So my question is when are these file handles discarded? I was under
> the
> > > impression from reading the documentation that closing an IndexReader
> was
> > > enough to close the files associated with that reader but we went even
> > > further by closing the IndexWriter as well but to no avail. If it
> should
> > > work that way, it means we have a bug somewhere with readers not being
> > > closed properly but I couldn't find one last time I checked.
> > >
> > > Also, do you think it is the right way to go around the "too many open
> > > files" issue? Can you recommend using another method?
> > >
> > > Thanks for any help.
> > >
> > > JB Reure
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--00163641725dff2ae304a03eea7c--

From java-user-return-49335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 12:21:02 2011
Return-Path: <java-user-return-49335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61883 invoked from network); 6 Apr 2011 12:21:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 12:21:01 -0000
Received: (qmail 61075 invoked by uid 500); 6 Apr 2011 12:20:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61027 invoked by uid 500); 6 Apr 2011 12:20:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61019 invoked by uid 99); 6 Apr 2011 12:20:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 12:20:59 +0000
X-ASF-Spam-Status: No, hits=1.8 required=5.0
	tests=FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 12:20:52 +0000
Received: by qyk2 with SMTP id 2so2925824qyk.14
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 05:20:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=p6ZcLWTVFlnCnjBz8FXygMh2AIt5l4shVtT9Z/lkDPQ=;
        b=jRg2/p1NbCToC18vAlYraDKo3DeIaz7WvA2DpyeBR+L2190WNKJhLBkaYPQs0gRzAj
         gBW+pbRFULN0xHPfS328nnsAoZdE26UZ0OaTGzNacJcVgduvbiyCpm4CS9lGpZ71QP9v
         SOXgOoO0KOnvy6Onu2S5nawWUHmCb1UgaRdGk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=TN57q24atLoNLK7h8ER41GJU67n42oqlLzOb2Vuuce0eLDMBT8500RhzvzXJ1qV0gT
         /DKBXEEvlX4fBsxB++TRfip0S0KcU3G2lOpFOZjO6XZtUzOMqU1q98p0kEyLurWqw2uy
         QHtCgun8UQDvqXajnJWKkhkNgb6eE/6gst/cw=
MIME-Version: 1.0
Received: by 10.229.23.210 with SMTP id s18mr744810qcb.10.1302092430741; Wed,
 06 Apr 2011 05:20:30 -0700 (PDT)
Received: by 10.229.72.8 with HTTP; Wed, 6 Apr 2011 05:20:30 -0700 (PDT)
In-Reply-To: <3A5F0355-B832-42AA-9D4E-6334357EA282@redalertconsultants.co.uk>
References: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk>
	<B03E3260-7C52-47E6-9BB6-B0A352012478@redalertconsultants.co.uk>
	<BANLkTi=Agzu3qMmZ6jLwF7rpBa99K4w38A@mail.gmail.com>
	<3A5F0355-B832-42AA-9D4E-6334357EA282@redalertconsultants.co.uk>
Date: Wed, 6 Apr 2011 08:20:30 -0400
Message-ID: <BANLkTik+N0jObuVcbKNAu_xPtrcybA_Smw@mail.gmail.com>
Subject: Re: Help with delimited text
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/related; boundary=00163641725dcc907004a03f0409
X-Virus-Checked: Checked by ClamAV on apache.org

--00163641725dcc907004a03f0409
Content-Type: multipart/alternative; boundary=00163641725dcc906b04a03f0408

--00163641725dcc906b04a03f0408
Content-Type: text/plain; charset=ISO-8859-1

A TermQuery is really dumb. It doesn't do anything at all to the
input, it assumes you've done all that up front. Try parsing
a query rather than using TermQuery....

And I suspect you'll have problems with casing, but that's another
story....

Best
Erick

On Wed, Apr 6, 2011 at 6:33 AM, Mark Wiltshire <
mark@redalertconsultants.co.uk> wrote:

> Thanks Ian,
>
> I have managed to do that and through Luke I get My expected results.
>
> Here is now my Index Code.
>
>                 StringTokenizer st = buildSubjectArea(dbConnection, oid);
>                 int tokenCount = 0;
>                 while (st.hasMoreTokens()){
>                 tokenCount++;
>                 String categoryPath = st.nextToken();
>
>                     if (categoryPath.length() != 0) {
>                         ////doc.add(Field.Text("category", category));
>                     doc.add(new Field("category_path",categoryPath,Field.
> Store.YES,Field.Index.NOT_ANALYZED));
>
>
>                     }
>                 }
>
> Now using Luke with KeyworkAnalyser if I enter
>
> category_path:/Top/My Prods*
>
> I get my expected results back.
>
>
> But I cannot get this working in my search code.
> I am using this field to filter the results, i.e.
>
> If I want Top Books I want to filter by /Top/Books*, if I want Top CD's I
> want to filter by /Top/CD*
>
> Filter string is generated from mapping file which gives me a category path
>
> e.g. /Top/Books
>
> Searcher searcher = new IndexSearcher(FSDirectory.open(new File(index)));
> Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_30);
> ...
> Query  subjectFilterQuery = new TermQuery(new Term("category_path"
> ,"/Top/Books*"));
> QueryWrapperFilter filter = new QueryWrapperFilter(subjectFilterQuery);
> TopDocs searchResult = searcher.search(query,filter,
> MAX_SEARCH_RESULTS_SIZE);
>
> If I debug the subjectFilterQuery and write out
>
> subjectFilterQuery.toString()
>
> I See
>
> "subjectFilterQuery.toString()" category_path:/TOP/CD*
>  So it looks like the query is constructed correctly ?
> But this does not bring back any results ?
> You say I need to be consistent in Index and Query, am I missing something.
>
> Many thanks
>
> Mark
>
> On 6 Apr 2011, at 10:06, Ian Lea wrote:
>
> You can add multiple values for a field to a single document.
>
> Document doc = new Document();
> String[] paths = whatever.split(",");
> for (String p : paths) {
>  doc.add(new Field("path", p, whatever ...);
> }
>
>
> For searching, assuming you only want to be able to wildcard on path
> delimiters, you could index
>
> /Top/My Prods/Book Prods/Text Books
> /Top/My Prods/Book Prods
> /Top/My Prods
> /Top
>
> which would let you search on any of them.
>
> You'll want to pick or build an analyzer that behaves as you want wrt
> case matching and not splitting on the /.  Sometime it can be easier
> to replace a character e.g. / to _.  I think there is a lucene class
> that can do that, maybe MappingCharFilter, if you don't want to do it
> yourself.  You will of course need to be consistent and do the same
> processing at index and search time.
>
>
> --
> Ian.
>
>
>
> On Wed, Apr 6, 2011 at 7:55 AM, Mark Wiltshire
> <mark@redalertconsultants.co.uk> wrote:
>
> To add more information
>
>
>        I am then wanting to search this field using part or all of the path
> using wildcards
>
>
>        i.e.
>
>
>        Search category_path with /Top/My Prods*
>
>
>
> Hi java-users
>
>
>        I need some help.
>
>
>        I am indexing categories into a single field category_path
>
>
>        Which may contain items such as
>
>
>        /Top/Books,/Top/My Prods/Book Prods/Text Books,
> /Maths/Books/TextBooks
>
>
>        i.e. category paths delimited by ,
>
>
>        I want to store this field, so the Analyser tokenizes the document
> only on ',' charaters and not on the '/' characters
>
>
>        I am adding the field to the index using
>
>
>        Where the categoryPath is a String containing list of the items
> above.
>
>
>        doc.add(new
> Field("category_path",categoryPath,Field.Store.YES,Field.Index.ANALYZED));
>
>
>        I think I need to split the string my self, but how do I pass this
> to Lucene, do I have to setup different fields ?
>
>
>        I need to keep the full path in the index, as I want to use this
> when redirecting users, when clicking on the results.
>
>
>        Any help would be great.
>
>
>        Many thanks
>
>
> Regards
>
>
> Mark
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> Regards
>
> Mark
>
> You can view my current Wolters Kluwer tasks at:
> *https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_kluwer*
>
> You can view my calendar at:    You can subscribe to my calendar at:
> http://ical.me.com/markjwiltshire/Work
> webcal://ical.me.com/markjwiltshire/Work.ics
>
>
> *
>
>
>
> Mark Wiltshire** ** **Red Alert Consultants LTD*
> Director - Technical Web Consultant Flat 6
>  168 Tower Bridge Road
>  London
>  SE1 3LS
> mark@redalertconsultants.co.uk
> iPhone email: markjwiltshire@me.com
> IM: markjwiltshire@yahoo.com Desk: 0208 247 1547
> http://www.redalertconsultants.co.uk Mobile: 07973 252 403
>
>
>
>
>

--00163641725dcc906b04a03f0408
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

A TermQuery is really dumb. It doesn&#39;t do anything at all to the<div>in=
put, it assumes you&#39;ve done all that up front. Try parsing</div><div>a =
query rather than using TermQuery....</div><div><br></div><div>And I suspec=
t you&#39;ll have problems with casing, but that&#39;s another</div>
<div>story....</div><div><br></div><div>Best</div><div>Erick<br><br><div cl=
ass=3D"gmail_quote">On Wed, Apr 6, 2011 at 6:33 AM, Mark Wiltshire <span di=
r=3D"ltr">&lt;<a href=3D"mailto:mark@redalertconsultants.co.uk">mark@redale=
rtconsultants.co.uk</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex;"><div style=3D"word-wrap:break-word">Thanks =
Ian,<div><br></div><div><span style=3D"white-space:pre-wrap">	</span>I have=
 managed to do that and through Luke I get My expected results.</div>
<div><br></div><div><span style=3D"white-space:pre-wrap">	</span>Here is no=
w my Index Code.</div><div><br></div><div style=3D"margin-top:0px;margin-ri=
ght:0px;margin-bottom:0px;margin-left:0px">=A0=A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0StringTokenizer st =3D buildSubjectArea(<span style=3D"color:#1000d1">db=
Connection</span>, oid);</div>
<div style=3D"margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left=
:0px">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <span style=3D"color:#9e0067">int</sp=
an> tokenCount =3D 0;</div><div style=3D"margin-top:0px;margin-right:0px;ma=
rgin-bottom:0px;margin-left:0px">
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <span style=3D"color:#9e0067">while</span> =
(st.hasMoreTokens()){</div><div style=3D"margin-top:0px;margin-right:0px;ma=
rgin-bottom:0px;margin-left:0px">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <span styl=
e=3D"white-space:pre-wrap">	</span>tokenCount++;</div>
<div style=3D"margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left=
:0px">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <span style=3D"white-space:pre-wrap">=
	</span>String categoryPath =3D st.nextToken();</div><div style=3D"margin-t=
op:0px;margin-right:0px;margin-bottom:0px;margin-left:0px">
=A0=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</div><div style=3D"margin-top:0p=
x;margin-right:0px;margin-bottom:0px;margin-left:0px">=A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 <span style=3D"color:#9e0067">if</span> (categoryPath.l=
ength() !=3D 0) {</div><div style=3D"margin-top:0px;margin-right:0px;margin=
-bottom:0px;margin-left:0px;color:rgb(56, 148, 115)">
<span style=3D"color:#000000">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 </span>////doc.add(Field.Text(&quot;category&quot;, category));</div><d=
iv style=3D"margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0=
px">=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <span style=3D"white-space:pre-=
wrap">	</span>doc.add(<span style=3D"color:#9e0067">new</span> Field(<span =
style=3D"color:#4200ff">&quot;category_path&quot;</span>,categoryPath,Field=
.<span style=3D"text-decoration:underline">Store</span>.YES,Field.<span sty=
le=3D"text-decoration:underline">Index</span>.NOT_ANALYZED));</div>
<p style=3D"margin:0.0px 0.0px 0.0px 0.0px;font:11.0px Monaco;min-height:15=
.0px">=A0=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<br></p><div style=
=3D"margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px">=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 }</div><div>
<span style=3D"font-family:Monaco;font-size:11px">=A0=A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0}</span><span style=3D"white-space:pre-wrap">	</span><br><div><d=
iv><br></div><div><span style=3D"white-space:pre-wrap">	</span>Now using Lu=
ke with KeyworkAnalyser if I enter</div>
<div><br></div><div><span style=3D"white-space:pre-wrap">		</span><span sty=
le=3D"white-space:pre-wrap">category_path:/Top/My Prods*</span></div><div><=
span style=3D"white-space:pre-wrap"><br></span></div><div><span style=3D"wh=
ite-space:pre-wrap">	</span>I get my expected results back.</div>
<span style=3D"white-space:pre-wrap">=A0=A0</span></div><div><span style=3D=
"white-space:pre-wrap"><br></span></div><div><span style=3D"white-space:pre=
-wrap"><span style=3D"white-space:pre-wrap">	</span>But I cannot get this w=
orking in my search code.</span></div>
<div><span style=3D"white-space:pre-wrap"><span style=3D"white-space:pre-wr=
ap">	</span>I am using this field to filter the results, i.e.</span></div><=
div><span style=3D"white-space:pre-wrap"><br></span></div><div><span style=
=3D"white-space:pre-wrap"><span style=3D"white-space:pre-wrap">	</span>If I=
 want Top Books I want to filter by /Top/Books*, if I want Top CD&#39;s I w=
ant to filter by /Top/CD*</span></div>
<div><span style=3D"white-space:pre-wrap"><br></span></div><div><span style=
=3D"white-space:pre-wrap"><span style=3D"white-space:pre-wrap">	</span>Filt=
er string is generated from mapping file which gives me a category path</sp=
an></div>
<div><span style=3D"white-space:pre-wrap"><br></span></div><div><span style=
=3D"white-space:pre-wrap"><span style=3D"white-space:pre-wrap">	</span>e.g.=
 /Top/Books</span></div><div><span style=3D"white-space:pre-wrap"><br></spa=
n></div>
<div><span style=3D"font-family:Monaco;font-size:11px"><span style=3D"white=
-space:pre-wrap">	</span>Searcher searcher =3D <span style=3D"color:#9e0067=
">new</span> IndexSearcher(FSDirectory.<span style=3D"text-decoration:under=
line">open</span>(<span style=3D"color:#9e0067">new</span> File(index)));</=
span></div>
<div><span style=3D"font-family:Monaco;font-size:11px"><span style=3D"white=
-space:pre-wrap">	</span></span><span style=3D"font-family:Monaco;font-size=
:11px">Analyzer analyzer =3D <span style=3D"text-decoration:underline;color=
:#9e0067">new</span><span style=3D"text-decoration:underline"> StandardAnal=
yzer(Version.</span><span style=3D"text-decoration:underline;color:#1000d1"=
>LUCENE_30</span><span style=3D"text-decoration:underline">)</span>;</span>=
</div>
<div><span style=3D"font-family:Monaco;font-size:11px"><span style=3D"white=
-space:pre-wrap">	</span>...</span></div><div><span style=3D"font-family:Mo=
naco;font-size:11px"><span style=3D"white-space:pre-wrap">	</span></span><s=
pan style=3D"font-family:Monaco;font-size:11px">Query</span>=A0=A0<span sty=
le=3D"font-family:Monaco;font-size:11px">subjectFilterQuery =3D </span><spa=
n style=3D"font-family:Monaco;font-size:11px"><span style=3D"color:#9e0067"=
>new</span></span><span style=3D"font-family:Monaco;font-size:11px"> TermQu=
ery(</span><span style=3D"font-family:Monaco;font-size:11px"><span style=3D=
"color:#9e0067">new</span></span><span style=3D"font-family:Monaco;font-siz=
e:11px"> Term(</span><span style=3D"font-family:Monaco;font-size:11px"><spa=
n style=3D"color:#4200ff">&quot;category_path&quot;</span></span><span styl=
e=3D"font-family:Monaco;font-size:11px">,&quot;/Top/Books*&quot;</span><spa=
n style=3D"font-family:Monaco;font-size:11px">));</span></div>
<div><span style=3D"font-family:Monaco;font-size:11px"><span style=3D"white=
-space:pre-wrap">	</span></span><span style=3D"font-family:Monaco;font-size=
:11px">QueryWrapperFilter filter=A0</span><span style=3D"font-family:Monaco=
;font-size:11px">=3D <span style=3D"color:#9e0067">new</span> QueryWrapperF=
ilter(subjectFilterQuery);</span></div>
<div><span style=3D"font-family:Monaco;font-size:11px"><span style=3D"white=
-space:pre-wrap">	</span>TopDocs=A0</span><span style=3D"font-family:Monaco=
;font-size:11px">searchResult =3D searcher.search(query,filter,<span style=
=3D"text-decoration:underline">MAX_SEARCH_RESULTS_SIZE</span>);=A0</span></=
div>
<div><font face=3D"Monaco" size=3D"3"><span style=3D"font-size:11px"><font =
face=3D"Helvetica"><span style=3D"white-space:pre-wrap;font-size:medium"><b=
r></span></font></span></font></div><div><span style=3D"white-space:pre-wra=
p"><span style=3D"white-space:pre-wrap">	</span></span><span style=3D"white=
-space:pre-wrap">If I debug the subjectFilterQuery and write out</span></di=
v>
<div><font face=3D"Monaco" size=3D"3"><span style=3D"font-size:11px"><font =
face=3D"Helvetica"><span style=3D"white-space:pre-wrap;font-size:medium"><b=
r></span></font></span></font></div><div><font face=3D"Monaco" size=3D"3"><=
span style=3D"font-size:11px"><font face=3D"Helvetica"><span style=3D"white=
-space:pre-wrap;font-size:medium"><span style=3D"white-space:pre-wrap">			<=
/span></span></font></span></font><span style=3D"font-family:&#39;Lucida Gr=
ande&#39;;font-size:11px">subjectFilterQuery.toString()</span></div>
<div><span style=3D"font-family:&#39;Lucida Grande&#39;;font-size:11px"><br=
></span></div><div><font face=3D"&#39;Lucida Grande&#39;" size=3D"3"><span =
style=3D"font-size:11px"><div style=3D"font-family:Helvetica;font-size:medi=
um"><span style=3D"white-space:pre-wrap">	</span>I See</div>
<div><br></div></span></font></div><div><span style=3D"font-family:&#39;Luc=
ida Grande&#39;;font-size:11px"><div><span style=3D"white-space:pre-wrap">	=
	</span>&quot;subjectFilterQuery.toString()&quot;<span style=3D"white-space=
:pre-wrap">	</span>category_path:/TOP/CD*</div>
<div><span style=3D"white-space:pre-wrap">	</span></div></span></div><div><=
div><span style=3D"white-space:pre-wrap">	</span>So it looks like the query=
 is constructed correctly ?</div><div><div><font face=3D"Monaco" size=3D"3"=
><span style=3D"font-size:11px"><font face=3D"Helvetica"><span style=3D"whi=
te-space:pre-wrap;font-size:medium"><span style=3D"white-space:pre-wrap">	<=
/span>But this does not bring back any results ?</span></font></span></font=
></div>
<div><font face=3D"Monaco" size=3D"3"><span style=3D"font-size:11px"><font =
face=3D"Helvetica"><span style=3D"white-space:pre-wrap;font-size:medium"><s=
pan style=3D"white-space:pre-wrap">	</span>You say I need to be consistent =
in Index and Query, am I missing something.</span></font></span></font></di=
v>
<div><font face=3D"Monaco" size=3D"3"><span style=3D"font-size:11px"><font =
face=3D"Helvetica"><span style=3D"white-space:pre-wrap;font-size:medium"><b=
r></span></font></span></font></div></div><div><font face=3D"Monaco" size=
=3D"3"><span style=3D"font-size:11px"><font face=3D"Helvetica"><span style=
=3D"white-space:pre-wrap;font-size:medium"><span style=3D"white-space:pre-w=
rap">	</span>Many thanks</span></font></span></font></div>
<div><font face=3D"Monaco" size=3D"3"><span style=3D"font-size:11px"><font =
face=3D"Helvetica"><span style=3D"white-space:pre-wrap;font-size:medium"><b=
r></span></font></span></font></div><font color=3D"#888888"><div><font face=
=3D"Monaco" size=3D"3"><span style=3D"font-size:11px"><font face=3D"Helveti=
ca"><span style=3D"white-space:pre-wrap;font-size:medium">Mark</span></font=
></span></font></div>
</font><div><div></div><div class=3D"h5"><div><font face=3D"Monaco" size=3D=
"3"><span style=3D"font-size:11px"><font face=3D"Helvetica"><span style=3D"=
white-space:pre-wrap;font-size:medium"><br></span></font></span></font></di=
v><div>On 6 Apr 2011, at 10:06, Ian Lea wrote:</div>
<br><div>You can add multiple values for a field to a single document.<br><=
br>Document doc =3D new Document();<br>String[] paths =3D whatever.split(&q=
uot;,&quot;);<br>for (String p : paths) {<br> =A0doc.add(new Field(&quot;pa=
th&quot;, p, whatever ...);<br>
}<br><br><br>For searching, assuming you only want to be able to wildcard o=
n path<br>delimiters, you could index<br><br>/Top/My Prods/Book Prods/Text =
Books<br>/Top/My Prods/Book Prods<br>/Top/My Prods<br>/Top<br><br>which wou=
ld let you search on any of them.<br>
<br>You&#39;ll want to pick or build an analyzer that behaves as you want w=
rt<br>case matching and not splitting on the /. =A0Sometime it can be easie=
r<br>to replace a character e.g. / to _. =A0I think there is a lucene class=
<br>
that can do that, maybe MappingCharFilter, if you don&#39;t want to do it<b=
r>yourself. =A0You will of course need to be consistent and do the same<br>=
processing at index and search time.<br><br><br>--<br>Ian.<br><br><br><br>
On Wed, Apr 6, 2011 at 7:55 AM, Mark Wiltshire<br>&lt;<a href=3D"mailto:mar=
k@redalertconsultants.co.uk" target=3D"_blank">mark@redalertconsultants.co.=
uk</a>&gt; wrote:<br><blockquote type=3D"cite">To add more information<br><=
/blockquote>
<blockquote type=3D"cite"><br></blockquote><blockquote type=3D"cite">=A0 =
=A0 =A0 =A0I am then wanting to search this field using part or all of the =
path using wildcards<br></blockquote><blockquote type=3D"cite"><br></blockq=
uote><blockquote type=3D"cite">
=A0 =A0 =A0 =A0i.e.<br></blockquote><blockquote type=3D"cite"><br></blockqu=
ote><blockquote type=3D"cite">=A0 =A0 =A0 =A0Search category_path with /Top=
/My Prods*<br></blockquote><blockquote type=3D"cite"><br></blockquote><bloc=
kquote type=3D"cite">
<br></blockquote><blockquote type=3D"cite">Hi java-users<br></blockquote><b=
lockquote type=3D"cite"><br></blockquote><blockquote type=3D"cite">=A0 =A0 =
=A0 =A0I need some help.<br></blockquote><blockquote type=3D"cite"><br></bl=
ockquote><blockquote type=3D"cite">
=A0 =A0 =A0 =A0I am indexing categories into a single field category_path<b=
r></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote type=
=3D"cite">=A0 =A0 =A0 =A0Which may contain items such as<br></blockquote><b=
lockquote type=3D"cite">
<br></blockquote><blockquote type=3D"cite">=A0 =A0 =A0 =A0/Top/Books,/Top/M=
y Prods/Book Prods/Text Books, /Maths/Books/TextBooks<br></blockquote><bloc=
kquote type=3D"cite"><br></blockquote><blockquote type=3D"cite">=A0 =A0 =A0=
 =A0i.e. category paths delimited by ,<br>
</blockquote><blockquote type=3D"cite"><br></blockquote><blockquote type=3D=
"cite">=A0 =A0 =A0 =A0I want to store this field, so the Analyser tokenizes=
 the document only on &#39;,&#39; charaters and not on the &#39;/&#39; char=
acters<br>
</blockquote><blockquote type=3D"cite"><br></blockquote><blockquote type=3D=
"cite">=A0 =A0 =A0 =A0I am adding the field to the index using<br></blockqu=
ote><blockquote type=3D"cite"><br></blockquote><blockquote type=3D"cite">=
=A0 =A0 =A0 =A0Where the categoryPath is a String containing list of the it=
ems above.<br>
</blockquote><blockquote type=3D"cite"><br></blockquote><blockquote type=3D=
"cite">=A0 =A0 =A0 =A0doc.add(new Field(&quot;category_path&quot;,categoryP=
ath,Field.Store.YES,Field.Index.ANALYZED));<br></blockquote><blockquote typ=
e=3D"cite">
<br></blockquote><blockquote type=3D"cite">=A0 =A0 =A0 =A0I think I need to=
 split the string my self, but how do I pass this to Lucene, do I have to s=
etup different fields ?<br></blockquote><blockquote type=3D"cite"><br></blo=
ckquote>
<blockquote type=3D"cite">=A0 =A0 =A0 =A0I need to keep the full path in th=
e index, as I want to use this when redirecting users, when clicking on the=
 results.<br></blockquote><blockquote type=3D"cite"><br></blockquote><block=
quote type=3D"cite">
=A0 =A0 =A0 =A0Any help would be great.<br></blockquote><blockquote type=3D=
"cite"><br></blockquote><blockquote type=3D"cite">=A0 =A0 =A0 =A0Many thank=
s<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote ty=
pe=3D"cite">Regards<br>
</blockquote><blockquote type=3D"cite"><br></blockquote><blockquote type=3D=
"cite">Mark<br></blockquote><br>-------------------------------------------=
--------------------------<br>To unsubscribe, e-mail: <a href=3D"mailto:jav=
a-user-unsubscribe@lucene.apache.org" target=3D"_blank">java-user-unsubscri=
be@lucene.apache.org</a><br>
For additional commands, e-mail: <a href=3D"mailto:java-user-help@lucene.ap=
ache.org" target=3D"_blank">java-user-help@lucene.apache.org</a><br><br></d=
iv></div></div></div><br><div class=3D"im"><div>
<span style=3D"font-size:12px"><span style=3D"border-collapse:separate;colo=
r:rgb(0, 0, 0);font-family:Helvetica;font-size:12px;font-style:normal;font-=
variant:normal;font-weight:normal;letter-spacing:normal;line-height:normal;=
text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px"><d=
iv>
<br>Regards</div><div><br></div><div>Mark</div><div><br></div><div><span st=
yle=3D"font-size:medium"><div style=3D"margin-top:0px;margin-right:0px;marg=
in-bottom:0px;margin-left:0px"><span style=3D"font-size:12px">You can view =
my current Wolters Kluwer tasks at</span>:</div>
<div style=3D"margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left=
:0px"><font color=3D"#144FAE" face=3D"&#39;Century Gothic&#39;" size=3D"2">=
<span style=3D"font-size:10px"><u><a href=3D"https://secure.nozbe.com/nozbe=
/page/feed/get-markRAC.5625.wolters_kluwer" target=3D"_blank">https://secur=
e.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_kluwer</a></u></span><=
/font></div>
<div><font size=3D"3"><span style=3D"font-size:12px"><font color=3D"#2350A9=
" face=3D"&#39;Century Gothic&#39;" size=3D"2"><span style=3D"font-size:10p=
x"><br></span></font></span></font></div></span></div><span style=3D"font-s=
ize:medium"><div style=3D"margin-top:0px;margin-right:0px;margin-bottom:0px=
;margin-left:0px">
You can view my calendar at:<span style=3D"white-space:pre-wrap">		</span>=
=A0=A0 You can subscribe to my calendar at:</div><div style=3D"margin-top:0=
px;margin-right:0px;margin-bottom:0px;margin-left:0px"><font face=3D"&#39;C=
entury Gothic&#39;" size=3D"2"><span style=3D"font-size:16px;font-family:He=
lvetica;color:rgb(35, 80, 169)"><span><a href=3D"http://ical.me.com/markjwi=
ltshire/Work" target=3D"_blank"><font face=3D"&#39;Century Gothic&#39;" siz=
e=3D"2"><span style=3D"font-size:10px">http://ical.me.com/markjwiltshire/Wo=
rk</span></font></a></span>=A0=A0 =A0<span><font face=3D"&#39;Century Gothi=
c&#39;" size=3D"2"><span style=3D"font-size:10px"><a>webcal://ical.me.com/m=
arkjwiltshire/Work.ics</a></span></font></span></span></font></div>
<div style=3D"margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left=
:0px"><font size=3D"3"><span style=3D"font-size:12px"><font color=3D"#2350A=
9" face=3D"&#39;Century Gothic&#39;" size=3D"2"><span style=3D"font-size:10=
px"><br></span></font></span></font></div>
</span></span><span></span></span><br><span></span><span></span><span><img =
height=3D"72" width=3D"217" src=3D"cid:EDAC8228-5850-4719-AF01-ECED6ECCFD18=
@wolterskluwer.local"></span><span style=3D"border-collapse:separate;color:=
rgb(0, 0, 0);font-family:Helvetica;font-style:normal;font-variant:normal;fo=
nt-weight:normal;letter-spacing:normal;line-height:normal;text-align:auto;t=
ext-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;font=
-size:medium"><span style=3D"font-size:12px"><span style=3D"border-collapse=
:separate;color:rgb(0, 0, 0);font-family:Helvetica;font-size:medium;font-st=
yle:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;lin=
e-height:normal;text-indent:0px;text-transform:none;white-space:normal;word=
-spacing:0px"><span style=3D"font-size:12px"><span style=3D"border-collapse=
:separate;color:rgb(0, 0, 0);font-family:Helvetica;font-size:medium;font-st=
yle:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;lin=
e-height:normal;text-indent:0px;text-transform:none;white-space:normal;word=
-spacing:0px"><span style=3D"font-size:12px"><div>
<font face=3D"&#39;Century Gothic&#39;" size=3D"4"><b><font color=3D"#00408=
0"><br><br><br><br>Mark Wiltshire</font></b></font><span style=3D"white-spa=
ce:pre-wrap"><font face=3D"&#39;Century Gothic&#39;" size=3D"4"><b><font co=
lor=3D"#004080">		</font></b><span style=3D"white-space:pre-wrap"><b><font =
color=3D"#004080">					</font></b></span><b><font color=3D"#004080">Red Ale=
rt Consultants LTD</font></b></font></span></div>
<div><font face=3D"&#39;Century Gothic&#39;" size=3D"4"><span style=3D"whit=
e-space:pre-wrap"><font color=3D"#004080">Director - Technical Web Consulta=
nt<span style=3D"white-space:pre-wrap">						</span>Flat 6</font></span></f=
ont></div>
<div><font color=3D"#004080" face=3D"&#39;Century Gothic&#39;" size=3D"4"><=
span style=3D"white-space:pre-wrap"><span style=3D"white-space:pre-wrap">		=
							</span>  168 Tower Bridge Road</span></font></div><div><font color=
=3D"#004080" face=3D"&#39;Century Gothic&#39;" size=3D"4"><span style=3D"wh=
ite-space:pre-wrap"><span style=3D"white-space:pre-wrap">												</span=
>    London</span></font></div>
<div><span style=3D"font-size:large;color:rgb(0, 64, 128);font-family:&#39;=
Century Gothic&#39;;white-space:pre-wrap"><span style=3D"white-space:pre-wr=
ap">											</span>             SE1 3LS</span></div><div><font color=3D"=
#004080" face=3D"&#39;Century Gothic&#39;" size=3D"4"><span style=3D"white-=
space:pre-wrap"><a href=3D"mailto:mark@redalertconsultants.co.uk" target=3D=
"_blank">mark@redalertconsultants.co.uk</a></span></font></div>
<div><font color=3D"#004080" face=3D"&#39;Century Gothic&#39;" size=3D"4"><=
span style=3D"font-size:14px;white-space:pre-wrap">iPhone email: <span styl=
e=3D"color:rgb(23, 64, 125);white-space:normal"><a href=3D"mailto:markjwilt=
shire@me.com" target=3D"_blank"><span style=3D"color:rgb(35, 80, 169)">mark=
jwiltshire@me.com</span></a></span></span></font></div>
<div><font color=3D"#004080" face=3D"&#39;Century Gothic&#39;" size=3D"4"><=
span style=3D"white-space:pre-wrap">IM: <a href=3D"mailto:markjwiltshire@ya=
hoo.com" target=3D"_blank">markjwiltshire@yahoo.com</a><span style=3D"white=
-space:pre-wrap">			</span>    Desk:     <a href=3D"tel:0208%20247%201547" =
value=3D"+12082471547" target=3D"_blank">0208 247 1547</a></span></font></d=
iv>
<div><font color=3D"#004080" face=3D"&#39;Century Gothic&#39;" size=3D"4"><=
span style=3D"white-space:pre-wrap"><span style=3D"color:rgb(0, 0, 0);white=
-space:normal"><a href=3D"http://www.redalertconsultants.co.uk/" target=3D"=
_blank"><font size=3D"4"><span style=3D"font-size:14px">http://www.redalert=
consultants.co.uk</span></font></a></span><span style=3D"white-space:pre-wr=
ap">	</span>    Mobile: 07973 252 403</span></font></div>
<div><font color=3D"#004080" face=3D"&#39;Century Gothic&#39;"><span style=
=3D"font-size:large;white-space:pre-wrap"><span style=3D"color:rgb(0, 0, 0)=
;font-family:Helvetica;font-size:medium;white-space:normal"><div style=3D"m=
argin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px">
<div><br></div></div></span></span></font></div></span></span><br></span></=
span><br></span></span>
</div>
<br></div></div></div></blockquote></div><br></div>

--00163641725dcc906b04a03f0408--
--00163641725dcc907004a03f0409--

From java-user-return-49336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 13:50:39 2011
Return-Path: <java-user-return-49336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86427 invoked from network); 6 Apr 2011 13:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 13:50:38 -0000
Received: (qmail 79961 invoked by uid 500); 6 Apr 2011 13:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79918 invoked by uid 500); 6 Apr 2011 13:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79910 invoked by uid 99); 6 Apr 2011 13:50:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 13:50:36 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of piotr.pezik@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 13:50:30 +0000
Received: by wyb40 with SMTP id 40so1968267wyb.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 06:50:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:mime-version:content-type:subject:date
         :in-reply-to:to:references:message-id:x-mailer;
        bh=IOFPgacBO5mbTxn61kPFUP9Jhza779J6wrm5vFtCUbs=;
        b=AUafE1ST6ECPMmQTLCobNJPp+FvqxFpscClJLfe/JAAKnnpH7W6FEN7s2wFqsplh7y
         V7TO2k9MEiKZXsRN4i/2YIviOIFt+udMzxeRt0AzQPiFZhxqJl2YXHypp6deSWZfx65A
         7fmbICY6KGFCsq/A5S0GepWm26GZ8Pq7FCu8k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:mime-version:content-type:subject:date:in-reply-to:to
         :references:message-id:x-mailer;
        b=Y1tQ1d3u2lSZyBWwMauSSkISNwVMuT9a/wUXXWfBRRl/3CoKpWmzLzZlmem2yxCGlG
         qnnH0p9oK/0vSWPjaFJr2j1NngTHMnr+8r9aV0wBxtoTqOJ4GWsfTvbzroYMRBRVD+87
         QGtpJur0t2TyyvZ5o9dQsCyUO4QWIvqj9S79Y=
Received: by 10.227.139.89 with SMTP id d25mr1153061wbu.58.1302097808996;
        Wed, 06 Apr 2011 06:50:08 -0700 (PDT)
Received: from [10.0.1.4] (staticline17169.toya.net.pl [85.89.184.130])
        by mx.google.com with ESMTPS id x1sm382197wbh.53.2011.04.06.06.50.07
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 06 Apr 2011 06:50:08 -0700 (PDT)
From: Piotr Pezik <piotr.pezik@gmail.com>
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-22--479424773
Subject: Re: Concurrent Issue
Date: Wed, 6 Apr 2011 15:50:05 +0200
In-Reply-To: <BANLkTikO36A9xcLMXqZe8aNeA5=ogvS8Eg@mail.gmail.com>
To: java-user@lucene.apache.org
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com> <BANLkTikO36A9xcLMXqZe8aNeA5=ogvS8Eg@mail.gmail.com>
Message-Id: <5D8F33B7-8B0F-45D0-8134-4584023B5AF2@gmail.com>
X-Mailer: Apple Mail (2.1084)

--Apple-Mail-22--479424773
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Only to second this explanation.=20

I got the same exception in a web application with a single IndexReader, =
accessed by many threads.=20

The index gets updated every half hour or so, so I closed the old =
IndexReader and opened a new one every now and then.=20

Even though the method for obtaining the IndexReader was synchronized, =
with tens of thousands of queries a day,=20
I started getting the AlreadyClosed exception when one thread triggered =
the closure of the IndexReader which another thread was still using.



Piotr

=20
On 5 Apr 2011, at 15:46, Ian Lea wrote:

> You don't say exactly how you are dealing with the concurrent access
> (one shared Reader/Searcher? Each user with own Reader/Searcher?
> Something else?) but the underlying problem is that the reader has
> been closed while something else is still using it.  This can easily
> happen in a multi-threaded setup: thread A might close the reader
> while thread B is still using it.
>=20
> Options include
>=20
> not closing the old reader straight away when open a new one, but
> instead stash it somewhere and close it later when you can be
> confident nothing else will be using it.
>=20
> using the SearcherManager class from Lucene In Action 2nd edition, or
> an equivalent.
>=20
> catching the AlreadyClosed exception and restarting the search with a
> current reader
>=20
>=20
> --
> Ian.
>=20
>=20
> On Tue, Apr 5, 2011 at 12:56 PM, Yogesh Dabhi <ydabhi@asite.com> =
wrote:
>> Hi
>>=20
>>=20
>>=20
>> My application is cluster in jobss application servers & lucene
>> directory was shared.
>>=20
>>=20
>>=20
>> Concurrently 5 user access same lucene directory for searching =
document
>>=20
>> That time I got bellow exception
>>=20
>> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
>> closed
>>=20
>>=20
>>=20
>> is there a way to handle such error
>>=20
>>=20
>>=20
>> Thanks & Regards
>>=20
>> Yogesh
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


--Apple-Mail-22--479424773--

From java-user-return-49337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 19:12:35 2011
Return-Path: <java-user-return-49337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47482 invoked from network); 6 Apr 2011 19:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 19:12:35 -0000
Received: (qmail 84277 invoked by uid 500); 6 Apr 2011 19:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84238 invoked by uid 500); 6 Apr 2011 19:12:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84230 invoked by uid 99); 6 Apr 2011 19:12:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 19:12:32 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of solmyr72@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 19:12:25 +0000
Received: by iwr19 with SMTP id 19so2449501iwr.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 12:12:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=qYKg25pm1N5JqjYs/lIYtndry78CkfXPajwffcmM16A=;
        b=g1pXVZHwH4/iV9b9jioFRlbZm7KAChouBcan1N9w7mYLWVohL/k6WDNteDg5qng2wR
         rHZWFK1xLdU1AsrwHy3YLzTG7P+zOXeSTw+UIIquoQH5xILGsP3uuopEL2fgjL9MbU8s
         BHyw45fBOV/qL+Z9HOqZfMCFejfJUkYkHUbFY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=I91Vb1KeSKXMu5HgvJMTm3zWwF35zLdzXLUDac/V3c27dB9A7us3qHcXJjHSl/cGqG
         vCq1kmlg63mDy2OhQePTn1cGHnvxciA1GC8XLi8l2jPsckpTufDe1rdGlTb7BbmRM4Q/
         qjgnaPxaj4VrQWQXL72kbFX5DeZsg1zxmUkis=
MIME-Version: 1.0
Received: by 10.231.194.34 with SMTP id dw34mr1339504ibb.117.1302117123679;
 Wed, 06 Apr 2011 12:12:03 -0700 (PDT)
Received: by 10.231.206.81 with HTTP; Wed, 6 Apr 2011 12:12:03 -0700 (PDT)
Date: Wed, 6 Apr 2011 22:12:03 +0300
Message-ID: <BANLkTinncAihmrOOaMctX6StsitXD3xBLw@mail.gmail.com>
Subject: PhraseQuery with huge slop?
From: sol myr <solmyr72@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0050450162459ce74704a044c4a4
X-Virus-Checked: Checked by ClamAV on apache.org

--0050450162459ce74704a044c4a4
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I need to run and "AND" query, with a twist: giving higher ranking for
"exact match".
So when searching for  BIG BEN
- Give high rank for the Document  "BIG BEN is in London"
 - Lower rank for  "It's a BIG day for my dear friend BEN"

Following good advice from this list (thanks!), I used 2 separate
queries (the query "+BIG +BEN"  and the exact-phrase "BIG BEN").
Ending up with:
Query andQ=parser.parse("+big +ben");
Query phraseQ=parser.parse("\"big ben\"");
phraseQ.setBoost(5); // Prioritize exact match
// Combined main query:
BooleanQuery main=new BooleanQuery();
main.add(andQ, SHOULD);
main.add(phraseQ, SHOULD);

This works, but someone suggested an alternative: PhraseQuery with a very
large SLOP (to cover the entire document lenght).
Is this recommended? Does a large SLOP damage performance?
My documents currently have just several *hundreds* of words (but I'm
curious whether it will scale for *thousands* of words).

Thanks :)

--0050450162459ce74704a044c4a4--

From java-user-return-49338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 06 23:47:15 2011
Return-Path: <java-user-return-49338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49694 invoked from network); 6 Apr 2011 23:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 6 Apr 2011 23:47:15 -0000
Received: (qmail 46783 invoked by uid 500); 6 Apr 2011 23:47:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46749 invoked by uid 500); 6 Apr 2011 23:47:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46741 invoked by uid 99); 6 Apr 2011 23:47:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 23:47:12 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chrisspen@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Apr 2011 23:47:07 +0000
Received: by wyb40 with SMTP id 40so2723056wyb.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 16:46:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=fGFCpLUnqFCaptqVerJhLzK5wRIaioeZ6gjV4TbJiDE=;
        b=M3eyVTthllAkXMrFTI7A0Xpj7dt8UHQgq3U/4IpS0lqjdabiBBOr+plX8T7dRjcVqq
         u+th2nBaA1SG9GXkHwyOhb3sWExfxpxqhDrUUz8TJ08vgXsL+HMpPAYRmweQRsX5h7bd
         2FymoBuAnrkTZfBzIo1MyU8qfedGvjkH/ZJvg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Q6KNMhMb7K4JMO3FDOcUzjsb8lZga6tnscE469e9Q3gPQppg4CK4GpAratWFbTFbHT
         lnRlCiTXZoE/b2XZQJtgnMTvFuIZP58m4/S6NFuRACBzoIYB7IlClslEB6ST3tSi/tO4
         THSQLMv+A73klkBpqmm8OyrTKprTUTG/FhKpg=
MIME-Version: 1.0
Received: by 10.216.121.208 with SMTP id r58mr190866weh.61.1302133605901; Wed,
 06 Apr 2011 16:46:45 -0700 (PDT)
Received: by 10.216.93.19 with HTTP; Wed, 6 Apr 2011 16:46:45 -0700 (PDT)
Date: Wed, 6 Apr 2011 19:46:45 -0400
Message-ID: <BANLkTi=nGE5oL3eKy3y3E7agojiJf55_eg@mail.gmail.com>
Subject: Indexing Non-Textual Data
From: Chris Spencer <chrisspen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00261883adfc07b2d004a0489b08

--00261883adfc07b2d004a0489b08
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I'm new to Lucene, so forgive me if this is a newbie question. I have a
dataset composed of several thousand lists of 128 integer features, each
list associated with a class label. Would it be possible to use Lucene as a
classifier, by indexing the label with respect to these integer features,
and then classify a new list by finding the most similar labels with Lucene?

I'm specifically interested in doing so through the PyLucene API, so I've
been going through the PyLucene samples, but they only seem to involve
indexing text, not continuous features (understandably). Could anyone point
me to an example that indexes non-textual data?

I think the project Lire (http://www.semanticmetadata.net/lire/) is using
Lucene to do something similar to this, although with an emphasis on image
features. I've dug into their code a little, but I'm not a strong Java
programmer, so I'm not sure how they're pulling it off, nor how I might
translate this into the PyLucene API. In your opinion, is this a practical
use of Lucene?

Regards,
Chris

--00261883adfc07b2d004a0489b08--

From java-user-return-49339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 05:05:34 2011
Return-Path: <java-user-return-49339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93147 invoked from network); 7 Apr 2011 05:05:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 05:05:33 -0000
Received: (qmail 49594 invoked by uid 500); 7 Apr 2011 05:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49547 invoked by uid 500); 7 Apr 2011 05:05:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49536 invoked by uid 99); 7 Apr 2011 05:05:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 05:05:29 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.94.238.133] (HELO web130106.mail.mud.yahoo.com) (66.94.238.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Apr 2011 05:05:22 +0000
Received: (qmail 45703 invoked by uid 60001); 7 Apr 2011 05:04:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1302152698; bh=L/s8Gc5KkXhbvfy0BzdfaqRZR6uX/QtGtW6huoOcPP4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=u+bS5wadmzndsi9Wlh9rN3GLAya64P8n7Vj9I8xYjHRGUkaXio0oPeToRo9LNRlBAdSodglj1AYHB8zdKSVMLewWnAPfKnoAgaYqbkKvLkpb2Id1pyqvUcihVvHZ+tX5YEXgTYi7Wnn1jDutU7wx6unpeZvQG10B7dUhHqONHvE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=IELLb9rf07j4Mdx/8fcneb7wC+lYx7ra+ICEg5hqo5dWELkH5t0RHKo4npWuMGpjYSRHg3epiATxCqfqAccmxVfSd4xf8X44Ocs1UvSTk+Lq5TFbg6/MbqPfuoaFqN3ZDL3ZNCnYY8D4AZf/EHO0woHtZ9xRRb5Vo9Y+2F/Z6pM=;
Message-ID: <962010.45169.qm@web130106.mail.mud.yahoo.com>
X-YMail-OSG: UlP5AlcVM1n.x5GF.Q3f.hCcIxF5YObjxKzT3zl2m8YJhNm
 .NkikrT5UPrmkBlFAUWV777NvAMO.ifsLZO7nDPMZa57.Huq.wwTUHHXTDGB
 jBLKIfH0M30VvuQpjisrvlO_oNcl1uCvyzDEcf6t3SGClp9rf5H1GEGDnzF2
 0P3F7J5Cg.sjyOgxn1adLN2PhFID8afUMfehwvSucZjSMAIk6LNaXevOYcuj
 ioOc43KEV.tcuchxANA_ubiJqtQaLpNDXvOP49Xh87uZ4M4Q8LTwH4UccHWR
 EjZdliyw5rExcgkwnn6B8lREu1H3vZC.GcYcAfFXrgATgW8W9D3aoABeZ18E
 XfvopIZ_nneM5RJCWgWp9.fLtHNFlHQZCLknLp2Qd77DTRZjJ1uR_VSD_CeZ
 NuwNp6jzHf5ft
Received: from [74.73.25.254] by web130106.mail.mud.yahoo.com via HTTP; Wed, 06 Apr 2011 22:04:58 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.109.295617
References: <BANLkTi=nGE5oL3eKy3y3E7agojiJf55_eg@mail.gmail.com>
Date: Wed, 6 Apr 2011 22:04:58 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing Non-Textual Data
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTi=nGE5oL3eKy3y3E7agojiJf55_eg@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris,

Yes, people have done classification with Lucene before.  Have a look at 
http://search-lucene.com/?q=classifier&fc_project=Lucene for some discussions 
and actual code (in old JIRA issues)

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Chris Spencer <chrisspen@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wed, April 6, 2011 7:46:45 PM
> Subject: Indexing Non-Textual Data
> 
> Hi,
> 
> I'm new to Lucene, so forgive me if this is a newbie question. I have  a
> dataset composed of several thousand lists of 128 integer features,  each
> list associated with a class label. Would it be possible to use Lucene  as a
> classifier, by indexing the label with respect to these integer  features,
> and then classify a new list by finding the most similar labels  with Lucene?
> 
> I'm specifically interested in doing so through the PyLucene  API, so I've
> been going through the PyLucene samples, but they only seem to  involve
> indexing text, not continuous features (understandably). Could anyone  point
> me to an example that indexes non-textual data?
> 
> I think the  project Lire (http://www.semanticmetadata.net/lire/) is using
> Lucene to do something  similar to this, although with an emphasis on image
> features. I've dug into  their code a little, but I'm not a strong Java
> programmer, so I'm not sure  how they're pulling it off, nor how I might
> translate this into the PyLucene  API. In your opinion, is this a practical
> use of  Lucene?
> 
> Regards,
> Chris
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 05:41:08 2011
Return-Path: <java-user-return-49340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97637 invoked from network); 7 Apr 2011 05:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 05:41:08 -0000
Received: (qmail 71183 invoked by uid 500); 7 Apr 2011 05:41:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71110 invoked by uid 500); 7 Apr 2011 05:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71097 invoked by uid 99); 7 Apr 2011 05:41:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 05:41:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 05:40:58 +0000
Received: by vws7 with SMTP id 7so2562860vws.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 22:40:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.172.2 with SMTP id ay2mr714110vdc.50.1302154836257; Wed, 06
 Apr 2011 22:40:36 -0700 (PDT)
Received: by 10.220.62.73 with HTTP; Wed, 6 Apr 2011 22:40:36 -0700 (PDT)
In-Reply-To: <BANLkTimrcN9GNPS2e1vPVsiT23EutXsJLw@mail.gmail.com>
References: <BANLkTinoA7nPPBBu5x+iZcxkK0qoJpLcsQ@mail.gmail.com>
	<BANLkTikM2KPVqzfUvev1rJNrSBfUAk0zAQ@mail.gmail.com>
	<BANLkTi=pwat3V-XpKwoFoF3FEdNJXO8XwA@mail.gmail.com>
	<BANLkTimrcN9GNPS2e1vPVsiT23EutXsJLw@mail.gmail.com>
Date: Thu, 7 Apr 2011 15:40:36 +1000
Message-ID: <BANLkTimXXFmEuGSOwCYQOoEeH9UndDW58Q@mail.gmail.com>
Subject: Re: Question about open files
From: Jean-Baptiste Reure <jbreure@weborganic.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec53f2ae7752cd004a04d8c36
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec53f2ae7752cd004a04d8c36
Content-Type: text/plain; charset=UTF-8

I found what the problem was: we were closing the IndexSearcher but not the
underlying IndexReader (I wrongly assumed that closing one would close the
other).
Everything is working perfectly now, thanks for the help.

JB

On 6 April 2011 22:13, Erick Erickson <erickerickson@gmail.com> wrote:

> I suspect you're already aware of this, but I've
> overlooked the obvious so many times I thought
> I'd mention it...
>
> A classic mistake is to assign a reader with reopen
> and not close the old reader, see:
>
> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/IndexReader.html#reopen()
>
> <
> http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/index/IndexReader.html#reopen()
> >
> Erick.
>
> On Tue, Apr 5, 2011 at 7:59 PM, Jean-Baptiste Reure
> <jbreure@weborganic.com>wrote:
>
> > We are using version 3.0.3. So you can confirm that closing the writer
> (and
> > the reader created from that writer) should be enough to release the file
> > handles?
> > If that is the case, that means our application has a bug somewhere that
> i
> > need to track down.
> > Thanks,
> > JB.
> >
> > On 5 April 2011 19:48, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > Which version of lucene are you using?  Something changed in the 3.x
> > > release, and maybe 2.9.x, in the way that old file handles are closed.
> > >  Previously it wasn't always necessary to explicitly close everything,
> > > now it is.
> > >
> > > Your usage sounds fine to me.  When I've hit too many open files when
> > > using 3.0.x it has always been because something, somewhere, wasn't
> > > being closed.
> > >
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Tue, Apr 5, 2011 at 8:49 AM, Jean-Baptiste Reure
> > > <jbreure@weborganic.com> wrote:
> > > > Hi all,
> > > >
> > > > I have been looking for information about this and found a few things
> > > here
> > > > and there but nothing very clear on when files are opened and closed
> by
> > > > Lucene.
> > > >
> > > > We have an application that uses Lucene quite heavily in the
> following
> > > > fashion: there are multiple indexes in use at all times. For each
> > index,
> > > a
> > > > single IndexWriter object is constantly opened (and used to update
> the
> > > > index) and a single IndexReader is also constantly opened. This
> Reader
> > is
> > > > created using the almost real-time reader of the IndexWriter. The
> > Reader
> > > is
> > > > used to query the index and when the Writer updates an index, the
> > > > corresponding reader is re-opened and the previous one is discarded
> > when
> > > all
> > > > searches using it are finished. Periodically, the index is optimised
> if
> > > it
> > > > needs to be (if the writer has been used).
> > > >
> > > > This is all working perfectly fine but we've been running into an
> issue
> > > > recently when we've add a lot of indexes on one server (more than a
> > 1000
> > > > indexes). This led to the "Too many open files" exception, so we
> > > increased
> > > > the number of open files allowed on that server but obviously, it's a
> > > > temporary solution.
> > > >
> > > > So we decided to implement a mechanism that would keep only a maximum
> > > number
> > > > of indexes "open" at all times. When the maximum number is reached,
> the
> > > > least recently used indexes are closed (closing the IndexWriter and
> the
> > > > IndexReader), and if these indexes are needed again in the future,
> they
> > > are
> > > > "re-opened".
> > > > This is functioning fine as well, as we can see ".lock" files
> appearing
> > > and
> > > > disappearing in the index directories, but handles on the segment
> files
> > > are
> > > > still in use.
> > > >
> > > > So my question is when are these file handles discarded? I was under
> > the
> > > > impression from reading the documentation that closing an IndexReader
> > was
> > > > enough to close the files associated with that reader but we went
> even
> > > > further by closing the IndexWriter as well but to no avail. If it
> > should
> > > > work that way, it means we have a bug somewhere with readers not
> being
> > > > closed properly but I couldn't find one last time I checked.
> > > >
> > > > Also, do you think it is the right way to go around the "too many
> open
> > > > files" issue? Can you recommend using another method?
> > > >
> > > > Thanks for any help.
> > > >
> > > > JB Reure
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

--bcaec53f2ae7752cd004a04d8c36--

From java-user-return-49341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 06:08:52 2011
Return-Path: <java-user-return-49341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96641 invoked from network); 7 Apr 2011 06:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 06:08:51 -0000
Received: (qmail 84753 invoked by uid 500); 7 Apr 2011 06:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84722 invoked by uid 500); 7 Apr 2011 06:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84711 invoked by uid 99); 7 Apr 2011 06:08:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 06:08:49 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of findbestopensource@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 06:08:44 +0000
Received: by fxm7 with SMTP id 7so2414176fxm.35
        for <java-user@lucene.apache.org>; Wed, 06 Apr 2011 23:08:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=W4W6GINuiC8Nf0JAyhRueN798raIfiFepevYs2fI7Uc=;
        b=fhaXe4GIZhztCzUMH3jI7t5KLz6FMILAMNQz0ompfexpEo2n1V2tg56v4btRgKyRXe
         8L6zPRZAfgTC9v/Rvr6yxhNmt/3tw2YW2+kTp9FrRRUnFA9x4MoWyfTyC6utu0vVqjkD
         +i57dS96mTDe2EBSTVWRqD7gDT17qLZeZz9b4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CGfGIxMQajW4Pvznw/X9LmqHSYHjjtThr9VyCphSZYzg40zBRzgzjMKqnTGSr9Rvm3
         8tcDch9TCoprF9br6nGCf9y0/Z5+iQGWiYAwSbEA2MDBfZLfZGaUAGRBZXOA/QDLGFHf
         8aff+bLoMqA6ToYg2/d1QxN5UlL7H9uHrjgJc=
MIME-Version: 1.0
Received: by 10.223.98.141 with SMTP id q13mr441606fan.96.1302156503374; Wed,
 06 Apr 2011 23:08:23 -0700 (PDT)
Received: by 10.223.121.146 with HTTP; Wed, 6 Apr 2011 23:08:23 -0700 (PDT)
In-Reply-To: <5D8F33B7-8B0F-45D0-8134-4584023B5AF2@gmail.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
	<BANLkTikO36A9xcLMXqZe8aNeA5=ogvS8Eg@mail.gmail.com>
	<5D8F33B7-8B0F-45D0-8134-4584023B5AF2@gmail.com>
Date: Thu, 7 Apr 2011 11:38:23 +0530
Message-ID: <BANLkTinW9CG9Jp-iVAyPURSeUfcr6oTeeg@mail.gmail.com>
Subject: Re: Concurrent Issue
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174fed6cd35d6804a04defdd

--0015174fed6cd35d6804a04defdd
Content-Type: text/plain; charset=ISO-8859-1

You are trying to access the reader which is already closed by some other
thread.

1. Keep a reference count for the reader you create.
2. Have a common function through which all functions will retrieve Reader
objects
3. Once the index got changed, create a new reader, do warmup
4. When the new reader is ready then the common function should return this
for furture request and old reader should go in passive mode.
5. The old reader should be closed when the reference count is zero.

Regards
Aditya
www.findbestopensource.com


On Wed, Apr 6, 2011 at 7:20 PM, Piotr Pezik <piotr.pezik@gmail.com> wrote:

> Only to second this explanation.
>
> I got the same exception in a web application with a single IndexReader,
> accessed by many threads.
>
> The index gets updated every half hour or so, so I closed the old
> IndexReader and opened a new one every now and then.
>
> Even though the method for obtaining the IndexReader was synchronized, with
> tens of thousands of queries a day,
> I started getting the AlreadyClosed exception when one thread triggered the
> closure of the IndexReader which another thread was still using.
>
>
>
> Piotr
>
>
> On 5 Apr 2011, at 15:46, Ian Lea wrote:
>
> > You don't say exactly how you are dealing with the concurrent access
> > (one shared Reader/Searcher? Each user with own Reader/Searcher?
> > Something else?) but the underlying problem is that the reader has
> > been closed while something else is still using it.  This can easily
> > happen in a multi-threaded setup: thread A might close the reader
> > while thread B is still using it.
> >
> > Options include
> >
> > not closing the old reader straight away when open a new one, but
> > instead stash it somewhere and close it later when you can be
> > confident nothing else will be using it.
> >
> > using the SearcherManager class from Lucene In Action 2nd edition, or
> > an equivalent.
> >
> > catching the AlreadyClosed exception and restarting the search with a
> > current reader
> >
> >
> > --
> > Ian.
> >
> >
> > On Tue, Apr 5, 2011 at 12:56 PM, Yogesh Dabhi <ydabhi@asite.com> wrote:
> >> Hi
> >>
> >>
> >>
> >> My application is cluster in jobss application servers & lucene
> >> directory was shared.
> >>
> >>
> >>
> >> Concurrently 5 user access same lucene directory for searching document
> >>
> >> That time I got bellow exception
> >>
> >> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
> >> closed
> >>
> >>
> >>
> >> is there a way to handle such error
> >>
> >>
> >>
> >> Thanks & Regards
> >>
> >> Yogesh
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>

--0015174fed6cd35d6804a04defdd--

From java-user-return-49342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 07:18:56 2011
Return-Path: <java-user-return-49342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5130 invoked from network); 7 Apr 2011 07:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 07:18:56 -0000
Received: (qmail 28445 invoked by uid 500); 7 Apr 2011 07:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28398 invoked by uid 500); 7 Apr 2011 07:18:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28390 invoked by uid 99); 7 Apr 2011 07:18:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 07:18:50 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.171.216.60] (HELO cust-smtp-192.fasthosts.net.uk) (213.171.216.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 07:18:41 +0000
Received: from [172.16.2.10] (unknown [193.128.105.2])
	by cust-smtp-192.fasthosts.net.uk (Postfix) with ESMTP id AAA33770056;
	Thu,  7 Apr 2011 08:18:20 +0100 (BST)
Subject: Re: Help with delimited text
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-100--416530449
From: Mark Wiltshire <mark@redalertconsultants.co.uk>
In-Reply-To: <BANLkTi=4cGGL-gsESbUPVv2NXxnFnXH6fQ@mail.gmail.com>
Date: Thu, 7 Apr 2011 08:18:20 +0100
Cc: java-user@lucene.apache.org
Message-Id: <36F34C9B-90B2-4F9C-B1B4-81080064089E@redalertconsultants.co.uk>
References: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk> <B03E3260-7C52-47E6-9BB6-B0A352012478@redalertconsultants.co.uk> <BANLkTi=Agzu3qMmZ6jLwF7rpBa99K4w38A@mail.gmail.com> <3A5F0355-B832-42AA-9D4E-6334357EA282@redalertconsultants.co.uk> <BANLkTi=4cGGL-gsESbUPVv2NXxnFnXH6fQ@mail.gmail.com>
To: Ian Lea <ian.lea@gmail.com>
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-100--416530449
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hi Thanks Ian for you help on this, its driving me nuts :-)

	The StandardAnalyser is only used on the search query term being =
passed also.

	But In this case I am just adding a filter to the search.

	The actual category may be =
/Top/Books/Accountancy/10_Compliance/International

	And the filter will allow me so filter search by subject area, =
i.e.

	There is a drop down on the search page showing

	Books
	Online
	Software

	I translate this to a base category to then filter on.  i.e. =
Books =3D /Top/Books

	It performs filter on search, so only those living in =
/Top/Books/* categories (with *)
	are returned.

	I then want to use the actual category in the index to correctly =
display the item.

	Hope that makes sense.

	Many thanks

Mark
=09
On 6 Apr 2011, at 12:05, Ian Lea wrote:

> Query  subjectFilterQuery =3D new TermQuery(new =
Term("category_path","/Top/Books*"));

Try losing the asterisk.  Presumably the indexed term is "/Top/Books".

You don't appear to be using the StandardAnalyzer you create in your
code sample but if you did searches wouldn't work since "/Top/Books"
would certainly be lower cased.  You've got /TOP/CD in there as well -
don't know where that came from.  Unless you want case-sensitive
searching I'd downcase these paths in advance, and replace / with some
character that will be ignored by any analyzers you might be using.


--
Ian.


On Wed, Apr 6, 2011 at 11:33 AM, Mark Wiltshire
<mark@redalertconsultants.co.uk> wrote:
>=20
> Thanks Ian,
> I have managed to do that and through Luke I get My expected results.
> Here is now my Index Code.
>                 StringTokenizer st =3D buildSubjectArea(dbConnection, =
oid);
>                 int tokenCount =3D 0;
>                 while (st.hasMoreTokens()){
>                 tokenCount++;
>                 String categoryPath =3D st.nextToken();
>=20
>                     if (categoryPath.length() !=3D 0) {
>                         ////doc.add(Field.Text("category", category));
>                     doc.add(new =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.NOT_ANALYZE=
D));
>=20
>=20
>=20
>                     }
>                 }
>=20
> Now using Luke with KeyworkAnalyser if I enter
> category_path:/Top/My Prods*
> I get my expected results back.
>=20
> But I cannot get this working in my search code.
> I am using this field to filter the results, i.e.
> If I want Top Books I want to filter by /Top/Books*, if I want Top =
CD's I want to filter by /Top/CD*
> Filter string is generated from mapping file which gives me a category =
path
> e.g. /Top/Books
> Searcher searcher =3D new IndexSearcher(FSDirectory.open(new =
File(index)));
> Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30);
> ...
> Query  subjectFilterQuery =3D new TermQuery(new =
Term("category_path","/Top/Books*"));
> QueryWrapperFilter filter =3D new =
QueryWrapperFilter(subjectFilterQuery);
> TopDocs searchResult =3D =
searcher.search(query,filter,MAX_SEARCH_RESULTS_SIZE);
> If I debug the subjectFilterQuery and write out
> subjectFilterQuery.toString()
> I See
> "subjectFilterQuery.toString()" category_path:/TOP/CD*
> So it looks like the query is constructed correctly ?
> But this does not bring back any results ?
> You say I need to be consistent in Index and Query, am I missing =
something.
> Many thanks
> Mark
> On 6 Apr 2011, at 10:06, Ian Lea wrote:
> You can add multiple values for a field to a single document.
>=20
> Document doc =3D new Document();
> String[] paths =3D whatever.split(",");
> for (String p : paths) {
>  doc.add(new Field("path", p, whatever ...);
> }
>=20
>=20
> For searching, assuming you only want to be able to wildcard on path
> delimiters, you could index
>=20
> /Top/My Prods/Book Prods/Text Books
> /Top/My Prods/Book Prods
> /Top/My Prods
> /Top
>=20
> which would let you search on any of them.
>=20
> You'll want to pick or build an analyzer that behaves as you want wrt
> case matching and not splitting on the /.  Sometime it can be easier
> to replace a character e.g. / to _.  I think there is a lucene class
> that can do that, maybe MappingCharFilter, if you don't want to do it
> yourself.  You will of course need to be consistent and do the same
> processing at index and search time.
>=20
>=20
> --
> Ian.
>=20
>=20
>=20
> On Wed, Apr 6, 2011 at 7:55 AM, Mark Wiltshire
> <mark@redalertconsultants.co.uk> wrote:
>=20
> To add more information
>=20
>        I am then wanting to search this field using part or all of the =
path using wildcards
>=20
>        i.e.
>=20
>        Search category_path with /Top/My Prods*
>=20
>=20
> Hi java-users
>=20
>        I need some help.
>=20
>        I am indexing categories into a single field category_path
>=20
>        Which may contain items such as
>=20
>        /Top/Books,/Top/My Prods/Book Prods/Text Books, =
/Maths/Books/TextBooks
>=20
>        i.e. category paths delimited by ,
>=20
>        I want to store this field, so the Analyser tokenizes the =
document only on ',' charaters and not on the '/' characters
>=20
>        I am adding the field to the index using
>=20
>        Where the categoryPath is a String containing list of the items =
above.
>=20
>        doc.add(new =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.ANALYZED));=

>=20
>        I think I need to split the string my self, but how do I pass =
this to Lucene, do I have to setup different fields ?
>=20
>        I need to keep the full path in the index, as I want to use =
this when redirecting users, when clicking on the results.
>=20
>        Any help would be great.
>=20
>        Many thanks
>=20
> Regards
>=20
> Mark
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20






--Apple-Mail-100--416530449--

From java-user-return-49343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 08:31:24 2011
Return-Path: <java-user-return-49343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39068 invoked from network); 7 Apr 2011 08:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 08:31:23 -0000
Received: (qmail 9992 invoked by uid 500); 7 Apr 2011 08:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9857 invoked by uid 500); 7 Apr 2011 08:31:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9785 invoked by uid 99); 7 Apr 2011 08:31:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 08:31:20 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 08:31:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id E5301C2181
	for <java-user@lucene.apache.org>; Thu,  7 Apr 2011 10:30:51 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LmjUBgYL-hdj for <java-user@lucene.apache.org>;
	Thu,  7 Apr 2011 10:30:51 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id C0B6DC20AB
	for <java-user@lucene.apache.org>; Thu,  7 Apr 2011 10:30:51 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 7 Apr 2011 10:30:51 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 7 Apr 2011 10:30:50 +0200
Subject: Analyzer which creates terms of one to n words
Thread-Topic: Analyzer which creates terms of one to n words
Thread-Index: Acv0/hdhjIYE35gXQVyXRSBWitgJGQ==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C11359DC6A2@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Is there an analyzer which takes a text and creates search terms based on t=
he following rules:
- all single words
- "two words in a row"
- "three word in a row"
- ...
- "n words in a row"

The reason is the following:=20
I have an index which is now being analyzed using WhitespaceAnalyzer. Besid=
es that I have a so called "term index" which is populated with all (search=
) terms of the "real index". The "term index" is used to provide suggestion=
 for search terms. Typing a single search term workls perfectly. The proble=
m is that  when I type two words to narrow the suggestions no more possible=
 serach terms are found, BECAUSE the "term index" only has single words/ter=
ms.

Which analyzer should I use? Ngram? Or is there even an analyzer which does=
 the above?

Thanks for your advices!
Clemens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 09:05:55 2011
Return-Path: <java-user-return-49344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79652 invoked from network); 7 Apr 2011 09:05:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 09:05:55 -0000
Received: (qmail 53791 invoked by uid 500); 7 Apr 2011 09:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53450 invoked by uid 500); 7 Apr 2011 09:05:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53210 invoked by uid 99); 7 Apr 2011 09:05:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 09:05:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of itsadok@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 09:05:38 +0000
Received: by wyb40 with SMTP id 40so3074994wyb.35
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2011 02:05:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type;
        bh=OF9Tj7kqErmP1MgkcWL5qF9kScwCocNgTWsRAtj2Yic=;
        b=JAuJGxbsLVPa6SjSeN/31VBUZ93L9Rk6qBNe7/X5uR6oGpeKjkTtxR7uXleBm+ojhl
         hmaYvYBVeV19O0YPH2g80i2gHD6aOGS17npSOlieaalpXYz9gWpg93RwNpCbs1eeSErS
         Zz6FesTgsl+vi/9kZnZakvI6/xNTL+An8h58M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=je9AsW2BWC6DA4WtSV/Y0EyQ0xkMrvmOD7AlqQVLI360OmQ95Tue2nGJHhYE4rU3vq
         fC5Q5S59vwzZN/Sb1TyX0x0O/lUjq4tzT39v3K+pFwTLAnNZXLGnUJDiLAtoj/2yQWSG
         zE/BOyBqq1c6UZSX8vPrDlq3XQWmgRgQBRscM=
Received: by 10.227.21.217 with SMTP id k25mr607925wbb.135.1302167118230; Thu,
 07 Apr 2011 02:05:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.69.9 with HTTP; Thu, 7 Apr 2011 02:04:58 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DC6A2@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC6A2@Exchange2007.mysigndomain.corp>
From: Israel Tsadok <itsadok@gmail.com>
Date: Thu, 7 Apr 2011 12:04:58 +0300
Message-ID: <BANLkTikxovWWXSBGq-1PHBj0jw2AG=Wj8g@mail.gmail.com>
Subject: Re: Analyzer which creates terms of one to n words
To: java-user@lucene.apache.org
Cc: Clemens Wyss <clemensdev@mysign.ch>
Content-Type: multipart/alternative; boundary=0022158df21f85342204a0506873
X-Virus-Checked: Checked by ClamAV on apache.org

--0022158df21f85342204a0506873
Content-Type: text/plain; charset=ISO-8859-1

Take a look st
http://lucene.apache.org/java/3_0_3/api/contrib-analyzers/org/apache/lucene/analysis/shingle/package-summary.html

On Thu, Apr 7, 2011 at 11:30 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:

> Is there an analyzer which takes a text and creates search terms based on
> the following rules:
> - all single words
> - "two words in a row"
> - "three word in a row"
> - ...
> - "n words in a row"
>
> The reason is the following:
> I have an index which is now being analyzed using WhitespaceAnalyzer.
> Besides that I have a so called "term index" which is populated with all
> (search) terms of the "real index". The "term index" is used to provide
> suggestion for search terms. Typing a single search term workls perfectly.
> The problem is that  when I type two words to narrow the suggestions no more
> possible serach terms are found, BECAUSE the "term index" only has single
> words/terms.
>
> Which analyzer should I use? Ngram? Or is there even an analyzer which does
> the above?
>
> Thanks for your advices!
> Clemens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0022158df21f85342204a0506873--

From java-user-return-49345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 09:36:50 2011
Return-Path: <java-user-return-49345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73312 invoked from network); 7 Apr 2011 09:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 09:36:50 -0000
Received: (qmail 91567 invoked by uid 500); 7 Apr 2011 09:36:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91269 invoked by uid 500); 7 Apr 2011 09:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91261 invoked by uid 99); 7 Apr 2011 09:36:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 09:36:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of solmyr72@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 09:36:40 +0000
Received: by iym1 with SMTP id 1so3221684iym.35
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2011 02:36:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=/R0GIUqxDNw9w/mdFtqqW5v1aN/xN8YxnhebFEskryQ=;
        b=H+QuVec8ep4F5OCaFzsYVpT4F8CaFPg+tWAEXWNEtnQVZ/pL3zHPG/4rrL4xuI+Lvx
         ODiDHxV1YP6ylZC3OfenY9Ft4YOogHDLmEvEasrM2ad7nLF4nmKN+tbJRWMvVCVh4wr6
         XlSEsvX5pVwYN1nX4VyJ3OGqMRPmT4tDGZVwc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=QLJn24juj/4bOUo4XIJNbyOuuBlEPwQpNxbuKhwX2f7i5jwqnwfa0M0wbSUsigTKIl
         4nuIQawvsJFAduQ9t9j5HNnaHRF2KytSglA6rq0DTjdLfk8lUu1RZWyxHE0gN7J48z+R
         iy6eQaYOn7GgSqu7+G5iCblXGvzdOy1cSAOXk=
MIME-Version: 1.0
Received: by 10.42.1.12 with SMTP id 12mr1030555ice.366.1302168978975; Thu, 07
 Apr 2011 02:36:18 -0700 (PDT)
Received: by 10.231.206.81 with HTTP; Thu, 7 Apr 2011 02:36:18 -0700 (PDT)
Date: Thu, 7 Apr 2011 12:36:18 +0300
Message-ID: <BANLkTim4d-zqJbSWSge6JRtAQ+LKt2j=0w@mail.gmail.com>
Subject: PhraseQuery with huge "slop"?
From: sol myr <solmyr72@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I need to run and "AND" query with a twist: give higher ranking for
"exact match".
So when searching for  BIG BEN
- Give high rank for the Document  "BIG BEN is in London"
- Lower rank for  "It's a BIG day for my dear friend BEN"

Following good advice from this list, I combined 2 separate queries
(the query "+BIG +BEN"  and the exact-phrase "\"BIG BEN\"").
But someone suggested an alternative: PhraseQuery with a very large SLOP.
Such SLOP would cover all appearances of theses words in the document
(even far apart).
While the PrahseQuery would automatically give higher ranking when
words are close apart.

Does that make sense?

1) What SLOP is required if my documents are about 100 words each?
Is it simply SLOP=100, or would it be exponential ( like 100! )

2) Will I get reasonable performace?
Or would the large SLOP cause horrible performance degradation?

Thanks :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 10:19:45 2011
Return-Path: <java-user-return-49346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86732 invoked from network); 7 Apr 2011 10:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 10:19:44 -0000
Received: (qmail 48164 invoked by uid 500); 7 Apr 2011 10:19:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48034 invoked by uid 500); 7 Apr 2011 10:19:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48026 invoked by uid 99); 7 Apr 2011 10:19:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 10:19:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 10:19:37 +0000
Received: by iwr19 with SMTP id 19so3283586iwr.35
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2011 03:19:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=LYddQ+Xk6Vy3luEF7ufjik1hKoC6fsULrGrvYlCuJAA=;
        b=KX9sHVS+KvGYewzOrA67RQvavw7XZpJuEycX5q2wFphRjV0i3852ucwL59xwGAi4Tg
         rgPQUMPYWL+/1POLgJTcdlrYcjsoYTaukAztl3lYV1rm0fnwBzsiz/2U8BuQyMW+p8lq
         k+kNr35lcRcLG2Uk0TFZtsM0oR1wbn+ekmEp4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=XNZk4QErccjAdIGo5oJoDTVuUdfXNaXpxgeBGardht+CCHGZIF4G67I4vPzOE+I10/
         vAYjKrqD4+vpsW4vmgFhF7OFlVPvTMOzt/xYO453jKjPq7PuKN0cYd1oURT1IjNCNAoJ
         0uqp3We5wpUX37QodGW4muM+FGxvc/Z7ZVPds=
Received: by 10.43.59.72 with SMTP id wn8mr1193797icb.48.1302171557270; Thu,
 07 Apr 2011 03:19:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.205.143 with HTTP; Thu, 7 Apr 2011 03:18:57 -0700 (PDT)
In-Reply-To: <36F34C9B-90B2-4F9C-B1B4-81080064089E@redalertconsultants.co.uk>
References: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk>
 <B03E3260-7C52-47E6-9BB6-B0A352012478@redalertconsultants.co.uk>
 <BANLkTi=Agzu3qMmZ6jLwF7rpBa99K4w38A@mail.gmail.com> <3A5F0355-B832-42AA-9D4E-6334357EA282@redalertconsultants.co.uk>
 <BANLkTi=4cGGL-gsESbUPVv2NXxnFnXH6fQ@mail.gmail.com> <36F34C9B-90B2-4F9C-B1B4-81080064089E@redalertconsultants.co.uk>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 7 Apr 2011 11:18:57 +0100
Message-ID: <BANLkTikaewp+apTq9Yo4=T+nFr1gDJGOLw@mail.gmail.com>
Subject: Re: Help with delimited text
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Mark - I've uploaded some code to http://pastebin.com/mqSVcWUi that
indexes and searches file system paths.  It demonstrates what I've
been trying to suggest and may help you get your search up and
running.

--
Ian.

On Thu, Apr 7, 2011 at 8:18 AM, Mark Wiltshire
<mark@redalertconsultants.co.uk> wrote:
> Hi Thanks Ian for you help on this, its driving me nuts :-)
> The StandardAnalyser is only used on the search query term being passed
> also.
> But In this case I am just adding a filter to the search.
> The actual category may be
> /Top/Books/Accountancy/10_Compliance/International
> And the filter will allow me so filter search by subject area, i.e.
> There is a drop down on the search page showing
> Books
> Online
> Software
> I translate this to a base category to then filter on. =A0i.e. Books =3D
> /Top/Books
> It performs filter on search, so only those living in /Top/Books/*
> categories (with *)
> are returned.
> I then want to use the actual category in the index to correctly display =
the
> item.
> Hope that makes sense.
> Many thanks
> Mark
> On 6 Apr 2011, at 12:05, Ian Lea wrote:
>
> Query=A0=A0subjectFilterQuery =3D new TermQuery(new
> Term("category_path","/Top/Books*"));
>
> Try losing the asterisk.=A0 Presumably the indexed term is "/Top/Books".
>
> You don't appear to be using the StandardAnalyzer you create in your
> code sample but if you did searches wouldn't work since "/Top/Books"
> would certainly be lower cased. =A0You've got /TOP/CD in there as well -
> don't know where that came from. =A0Unless you want case-sensitive
> searching I'd downcase these paths in advance, and replace / with some
> character that will be ignored by any analyzers you might be using.
>
>
> --
> Ian.
>
>
> On Wed, Apr 6, 2011 at 11:33 AM, Mark Wiltshire
> <mark@redalertconsultants.co.uk> wrote:
>
> Thanks Ian,
>
> I have managed to do that and through Luke I get My expected results.
>
> Here is now my Index Code.
>
> =A0=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0StringTokenizer st =3D buildSubjectArea=
(dbConnection, oid);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 int tokenCount =3D 0;
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 while (st.hasMoreTokens()){
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 tokenCount++;
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 String categoryPath =3D st.nextToken();
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 if (categoryPath.length() !=3D 0)=
 {
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 ////doc.add(Field.Text("c=
ategory", category));
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 doc.add(new
> Field("category_path",categoryPath,Field.Store.YES,Field.Index.NOT_ANALYZ=
ED));
>
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
>
> =A0=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
>
> Now using Luke with KeyworkAnalyser if I enter
>
> category_path:/Top/My Prods*
>
> I get my expected results back.
>
> But I cannot get this working in my search code.
>
> I am using this field to filter the results, i.e.
>
> If I want Top Books I want to filter by /Top/Books*, if I want Top CD's I
> want to filter by /Top/CD*
>
> Filter string is generated from mapping file which gives me a category pa=
th
>
> e.g. /Top/Books
>
> Searcher searcher =3D new IndexSearcher(FSDirectory.open(new File(index))=
);
>
> Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30);
>
> ...
>
> Query=A0=A0subjectFilterQuery =3D new TermQuery(new
> Term("category_path","/Top/Books*"));
>
> QueryWrapperFilter filter=A0=3D new QueryWrapperFilter(subjectFilterQuery=
);
>
> TopDocs=A0searchResult =3D
> searcher.search(query,filter,MAX_SEARCH_RESULTS_SIZE);
>
> If I debug the subjectFilterQuery and write out
>
> subjectFilterQuery.toString()
>
> I See
>
> "subjectFilterQuery.toString()" category_path:/TOP/CD*
>
> So it looks like the query is constructed correctly ?
>
> But this does not bring back any results ?
>
> You say I need to be consistent in Index and Query, am I missing somethin=
g.
>
> Many thanks
>
> Mark
>
> On 6 Apr 2011, at 10:06, Ian Lea wrote:
>
> You can add multiple values for a field to a single document.
>
> Document doc =3D new Document();
>
> String[] paths =3D whatever.split(",");
>
> for (String p : paths) {
>
> =A0doc.add(new Field("path", p, whatever ...);
>
> }
>
>
> For searching, assuming you only want to be able to wildcard on path
>
> delimiters, you could index
>
> /Top/My Prods/Book Prods/Text Books
>
> /Top/My Prods/Book Prods
>
> /Top/My Prods
>
> /Top
>
> which would let you search on any of them.
>
> You'll want to pick or build an analyzer that behaves as you want wrt
>
> case matching and not splitting on the /. =A0Sometime it can be easier
>
> to replace a character e.g. / to _. =A0I think there is a lucene class
>
> that can do that, maybe MappingCharFilter, if you don't want to do it
>
> yourself. =A0You will of course need to be consistent and do the same
>
> processing at index and search time.
>
>
> --
>
> Ian.
>
>
>
> On Wed, Apr 6, 2011 at 7:55 AM, Mark Wiltshire
>
> <mark@redalertconsultants.co.uk> wrote:
>
> To add more information
>
> =A0 =A0 =A0 =A0I am then wanting to search this field using part or all o=
f the path
> using wildcards
>
> =A0 =A0 =A0 =A0i.e.
>
> =A0 =A0 =A0 =A0Search category_path with /Top/My Prods*
>
>
> Hi java-users
>
> =A0 =A0 =A0 =A0I need some help.
>
> =A0 =A0 =A0 =A0I am indexing categories into a single field category_path
>
> =A0 =A0 =A0 =A0Which may contain items such as
>
> =A0 =A0 =A0 =A0/Top/Books,/Top/My Prods/Book Prods/Text Books,
> /Maths/Books/TextBooks
>
> =A0 =A0 =A0 =A0i.e. category paths delimited by ,
>
> =A0 =A0 =A0 =A0I want to store this field, so the Analyser tokenizes the =
document
> only on ',' charaters and not on the '/' characters
>
> =A0 =A0 =A0 =A0I am adding the field to the index using
>
> =A0 =A0 =A0 =A0Where the categoryPath is a String containing list of the =
items
> above.
>
> =A0 =A0 =A0 =A0doc.add(new
> Field("category_path",categoryPath,Field.Store.YES,Field.Index.ANALYZED))=
;
>
> =A0 =A0 =A0 =A0I think I need to split the string my self, but how do I p=
ass this to
> Lucene, do I have to setup different fields ?
>
> =A0 =A0 =A0 =A0I need to keep the full path in the index, as I want to us=
e this when
> redirecting users, when clicking on the results.
>
> =A0 =A0 =A0 =A0Any help would be great.
>
> =A0 =A0 =A0 =A0Many thanks
>
> Regards
>
> Mark
>
> ---------------------------------------------------------------------
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 11:22:02 2011
Return-Path: <java-user-return-49347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90244 invoked from network); 7 Apr 2011 11:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 11:22:02 -0000
Received: (qmail 20023 invoked by uid 500); 7 Apr 2011 11:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19984 invoked by uid 500); 7 Apr 2011 11:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19976 invoked by uid 99); 7 Apr 2011 11:21:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 11:21:59 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.171.216.60] (HELO cust-smtp-192.fasthosts.net.uk) (213.171.216.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 11:21:55 +0000
Received: from [172.16.2.10] (unknown [193.128.105.2])
	by cust-smtp-192.fasthosts.net.uk (Postfix) with ESMTP id 19AB17700F0;
	Thu,  7 Apr 2011 12:21:31 +0100 (BST)
From: Mark Wiltshire <mark@redalertconsultants.co.uk>
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-132--401939361
Subject: Re: Help with delimited text
Date: Thu, 7 Apr 2011 12:21:31 +0100
In-Reply-To: <BANLkTikaewp+apTq9Yo4=T+nFr1gDJGOLw@mail.gmail.com>
To: java-user@lucene.apache.org, Ian Lea <ian.lea@gmail.com>
References: <174BA665-7F06-45C0-94C5-119A4CC7E367@redalertconsultants.co.uk> <B03E3260-7C52-47E6-9BB6-B0A352012478@redalertconsultants.co.uk> <BANLkTi=Agzu3qMmZ6jLwF7rpBa99K4w38A@mail.gmail.com> <3A5F0355-B832-42AA-9D4E-6334357EA282@redalertconsultants.co.uk> <BANLkTi=4cGGL-gsESbUPVv2NXxnFnXH6fQ@mail.gmail.com> <36F34C9B-90B2-4F9C-B1B4-81080064089E@redalertconsultants.co.uk> <BANLkTikaewp+apTq9Yo4=T+nFr1gDJGOLw@mail.gmail.com>
Message-Id: <060D4371-6BBB-42D3-86E3-ED5BFF0388F0@redalertconsultants.co.uk>
X-Mailer: Apple Mail (2.1084)

--Apple-Mail-132--401939361
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Thanks Ian, your a star :-)

R

Mark

On 7 Apr 2011, at 11:18, Ian Lea wrote:

Mark - I've uploaded some code to http://pastebin.com/mqSVcWUi that
indexes and searches file system paths.  It demonstrates what I've
been trying to suggest and may help you get your search up and
running.

--
Ian.

On Thu, Apr 7, 2011 at 8:18 AM, Mark Wiltshire
<mark@redalertconsultants.co.uk> wrote:
> Hi Thanks Ian for you help on this, its driving me nuts :-)
> The StandardAnalyser is only used on the search query term being =
passed
> also.
> But In this case I am just adding a filter to the search.
> The actual category may be
> /Top/Books/Accountancy/10_Compliance/International
> And the filter will allow me so filter search by subject area, i.e.
> There is a drop down on the search page showing
> Books
> Online
> Software
> I translate this to a base category to then filter on.  i.e. Books =3D
> /Top/Books
> It performs filter on search, so only those living in /Top/Books/*
> categories (with *)
> are returned.
> I then want to use the actual category in the index to correctly =
display the
> item.
> Hope that makes sense.
> Many thanks
> Mark
> On 6 Apr 2011, at 12:05, Ian Lea wrote:
>=20
> Query  subjectFilterQuery =3D new TermQuery(new
> Term("category_path","/Top/Books*"));
>=20
> Try losing the asterisk.  Presumably the indexed term is "/Top/Books".
>=20
> You don't appear to be using the StandardAnalyzer you create in your
> code sample but if you did searches wouldn't work since "/Top/Books"
> would certainly be lower cased.  You've got /TOP/CD in there as well -
> don't know where that came from.  Unless you want case-sensitive
> searching I'd downcase these paths in advance, and replace / with some
> character that will be ignored by any analyzers you might be using.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Wed, Apr 6, 2011 at 11:33 AM, Mark Wiltshire
> <mark@redalertconsultants.co.uk> wrote:
>=20
> Thanks Ian,
>=20
> I have managed to do that and through Luke I get My expected results.
>=20
> Here is now my Index Code.
>=20
>                 StringTokenizer st =3D buildSubjectArea(dbConnection, =
oid);
>=20
>                 int tokenCount =3D 0;
>=20
>                 while (st.hasMoreTokens()){
>=20
>                 tokenCount++;
>=20
>                 String categoryPath =3D st.nextToken();
>=20
>                     if (categoryPath.length() !=3D 0) {
>=20
>                         ////doc.add(Field.Text("category", category));
>=20
>                     doc.add(new
> =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.NOT_ANALYZE=
D));
>=20
>=20
>=20
>                     }
>=20
>                 }
>=20
> Now using Luke with KeyworkAnalyser if I enter
>=20
> category_path:/Top/My Prods*
>=20
> I get my expected results back.
>=20
> But I cannot get this working in my search code.
>=20
> I am using this field to filter the results, i.e.
>=20
> If I want Top Books I want to filter by /Top/Books*, if I want Top =
CD's I
> want to filter by /Top/CD*
>=20
> Filter string is generated from mapping file which gives me a category =
path
>=20
> e.g. /Top/Books
>=20
> Searcher searcher =3D new IndexSearcher(FSDirectory.open(new =
File(index)));
>=20
> Analyzer analyzer =3D new StandardAnalyzer(Version.LUCENE_30);
>=20
> ...
>=20
> Query  subjectFilterQuery =3D new TermQuery(new
> Term("category_path","/Top/Books*"));
>=20
> QueryWrapperFilter filter =3D new =
QueryWrapperFilter(subjectFilterQuery);
>=20
> TopDocs searchResult =3D
> searcher.search(query,filter,MAX_SEARCH_RESULTS_SIZE);
>=20
> If I debug the subjectFilterQuery and write out
>=20
> subjectFilterQuery.toString()
>=20
> I See
>=20
> "subjectFilterQuery.toString()" category_path:/TOP/CD*
>=20
> So it looks like the query is constructed correctly ?
>=20
> But this does not bring back any results ?
>=20
> You say I need to be consistent in Index and Query, am I missing =
something.
>=20
> Many thanks
>=20
> Mark
>=20
> On 6 Apr 2011, at 10:06, Ian Lea wrote:
>=20
> You can add multiple values for a field to a single document.
>=20
> Document doc =3D new Document();
>=20
> String[] paths =3D whatever.split(",");
>=20
> for (String p : paths) {
>=20
>  doc.add(new Field("path", p, whatever ...);
>=20
> }
>=20
>=20
> For searching, assuming you only want to be able to wildcard on path
>=20
> delimiters, you could index
>=20
> /Top/My Prods/Book Prods/Text Books
>=20
> /Top/My Prods/Book Prods
>=20
> /Top/My Prods
>=20
> /Top
>=20
> which would let you search on any of them.
>=20
> You'll want to pick or build an analyzer that behaves as you want wrt
>=20
> case matching and not splitting on the /.  Sometime it can be easier
>=20
> to replace a character e.g. / to _.  I think there is a lucene class
>=20
> that can do that, maybe MappingCharFilter, if you don't want to do it
>=20
> yourself.  You will of course need to be consistent and do the same
>=20
> processing at index and search time.
>=20
>=20
> --
>=20
> Ian.
>=20
>=20
>=20
> On Wed, Apr 6, 2011 at 7:55 AM, Mark Wiltshire
>=20
> <mark@redalertconsultants.co.uk> wrote:
>=20
> To add more information
>=20
>        I am then wanting to search this field using part or all of the =
path
> using wildcards
>=20
>        i.e.
>=20
>        Search category_path with /Top/My Prods*
>=20
>=20
> Hi java-users
>=20
>        I need some help.
>=20
>        I am indexing categories into a single field category_path
>=20
>        Which may contain items such as
>=20
>        /Top/Books,/Top/My Prods/Book Prods/Text Books,
> /Maths/Books/TextBooks
>=20
>        i.e. category paths delimited by ,
>=20
>        I want to store this field, so the Analyser tokenizes the =
document
> only on ',' charaters and not on the '/' characters
>=20
>        I am adding the field to the index using
>=20
>        Where the categoryPath is a String containing list of the items
> above.
>=20
>        doc.add(new
> =
Field("category_path",categoryPath,Field.Store.YES,Field.Index.ANALYZED));=

>=20
>        I think I need to split the string my self, but how do I pass =
this to
> Lucene, do I have to setup different fields ?
>=20
>        I need to keep the full path in the index, as I want to use =
this when
> redirecting users, when clicking on the results.
>=20
>        Any help would be great.
>=20
>        Many thanks
>=20
> Regards
>=20
> Mark
>=20
> ---------------------------------------------------------------------
>=20
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>=20
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Regards

Mark

You can view my current Wolters Kluwer tasks at:
https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_kluwer

You can view my calendar at:		   You can subscribe to my =
calendar at:
http://ical.me.com/markjwiltshire/Work    =
webcal://ical.me.com/markjwiltshire/Work.ics







Mark Wiltshire							Red =
Alert Consultants LTD
Director - Technical Web Consultant						=
Flat 6
									 =
 168 Tower Bridge Road
										=
		    London
										=
	             SE1 3LS
mark@redalertconsultants.co.uk
iPhone email: markjwiltshire@me.com
IM: markjwiltshire@yahoo.com			    Desk:     0208 247 =
1547
http://www.redalertconsultants.co.uk	    Mobile: 07973 252 403





--Apple-Mail-132--401939361
Content-Type: multipart/related;
	type="text/html";
	boundary=Apple-Mail-133--401939361


--Apple-Mail-133--401939361
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=us-ascii

<html><head></head><body style=3D"word-wrap: break-word; =
-webkit-nbsp-mode: space; -webkit-line-break: after-white-space; =
">Thanks Ian, your a star =
:-)<div><br></div><div>R</div><div><br></div><div>Mark</div><div><br><div>=
<div>On 7 Apr 2011, at 11:18, Ian Lea wrote:</div><br =
class=3D"Apple-interchange-newline"><div>Mark - I've uploaded some code =
to <a =
href=3D"http://pastebin.com/mqSVcWUi">http://pastebin.com/mqSVcWUi</a> =
that<br>indexes and searches file system paths. &nbsp;It demonstrates =
what I've<br>been trying to suggest and may help you get your search up =
and<br>running.<br><br>--<br>Ian.<br><br>On Thu, Apr 7, 2011 at 8:18 AM, =
Mark Wiltshire<br>&lt;<a =
href=3D"mailto:mark@redalertconsultants.co.uk">mark@redalertconsultants.co=
.uk</a>&gt; wrote:<br><blockquote type=3D"cite">Hi Thanks Ian for you =
help on this, its driving me nuts :-)<br></blockquote><blockquote =
type=3D"cite">The StandardAnalyser is only used on the search query term =
being passed<br></blockquote><blockquote =
type=3D"cite">also.<br></blockquote><blockquote type=3D"cite">But In =
this case I am just adding a filter to the =
search.<br></blockquote><blockquote type=3D"cite">The actual category =
may be<br></blockquote><blockquote =
type=3D"cite">/Top/Books/Accountancy/10_Compliance/International<br></bloc=
kquote><blockquote type=3D"cite">And the filter will allow me so filter =
search by subject area, i.e.<br></blockquote><blockquote =
type=3D"cite">There is a drop down on the search page =
showing<br></blockquote><blockquote =
type=3D"cite">Books<br></blockquote><blockquote =
type=3D"cite">Online<br></blockquote><blockquote =
type=3D"cite">Software<br></blockquote><blockquote type=3D"cite">I =
translate this to a base category to then filter on. &nbsp;i.e. Books =
=3D<br></blockquote><blockquote =
type=3D"cite">/Top/Books<br></blockquote><blockquote type=3D"cite">It =
performs filter on search, so only those living in =
/Top/Books/*<br></blockquote><blockquote type=3D"cite">categories (with =
*)<br></blockquote><blockquote type=3D"cite">are =
returned.<br></blockquote><blockquote type=3D"cite">I then want to use =
the actual category in the index to correctly display =
the<br></blockquote><blockquote =
type=3D"cite">item.<br></blockquote><blockquote type=3D"cite">Hope that =
makes sense.<br></blockquote><blockquote type=3D"cite">Many =
thanks<br></blockquote><blockquote =
type=3D"cite">Mark<br></blockquote><blockquote type=3D"cite">On 6 Apr =
2011, at 12:05, Ian Lea wrote:<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Query&nbsp;&nbsp;subjectFilterQuery =3D new =
TermQuery(new<br></blockquote><blockquote =
type=3D"cite">Term("category_path","/Top/Books*"));<br></blockquote><block=
quote type=3D"cite"><br></blockquote><blockquote type=3D"cite">Try =
losing the asterisk.&nbsp; Presumably the indexed term is =
"/Top/Books".<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">You don't =
appear to be using the StandardAnalyzer you create in =
your<br></blockquote><blockquote type=3D"cite">code sample but if you =
did searches wouldn't work since =
"/Top/Books"<br></blockquote><blockquote type=3D"cite">would certainly =
be lower cased. &nbsp;You've got /TOP/CD in there as well =
-<br></blockquote><blockquote type=3D"cite">don't know where that came =
from. &nbsp;Unless you want case-sensitive<br></blockquote><blockquote =
type=3D"cite">searching I'd downcase these paths in advance, and replace =
/ with some<br></blockquote><blockquote type=3D"cite">character that =
will be ignored by any analyzers you might be =
using.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">--<br></blockquote><blockquote =
type=3D"cite">Ian.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">On Wed, Apr 6, =
2011 at 11:33 AM, Mark Wiltshire<br></blockquote><blockquote =
type=3D"cite">&lt;<a =
href=3D"mailto:mark@redalertconsultants.co.uk">mark@redalertconsultants.co=
.uk</a>&gt; wrote:<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Thanks =
Ian,<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">I have managed =
to do that and through Luke I get My expected =
results.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Here is now my =
Index Code.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp;&nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;StringTokenizer st =3D =
buildSubjectArea(dbConnection, oid);<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int tokenCount =3D =
0;<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
while (st.hasMoreTokens()){<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
tokenCount++;<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; String categoryPath =3D =
st.nextToken();<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if =
(categoryPath.length() !=3D 0) {<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
////doc.add(Field.Text("category", =
category));<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
doc.add(new<br></blockquote><blockquote =
type=3D"cite">Field("category_path",categoryPath,Field.Store.YES,Field.Ind=
ex.NOT_ANALYZED));<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
}<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp;}<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Now using Luke =
with KeyworkAnalyser if I enter<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">category_path:/Top/My Prods*<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">I get my =
expected results back.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">But I cannot =
get this working in my search code.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">I am using this =
field to filter the results, i.e.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">If I want Top =
Books I want to filter by /Top/Books*, if I want Top CD's =
I<br></blockquote><blockquote type=3D"cite">want to filter by =
/Top/CD*<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Filter string =
is generated from mapping file which gives me a category =
path<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">e.g. =
/Top/Books<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Searcher =
searcher =3D new IndexSearcher(FSDirectory.open(new =
File(index)));<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Analyzer =
analyzer =3D new =
StandardAnalyzer(Version.LUCENE_30);<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">...<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Query&nbsp;&nbsp;subjectFilterQuery =3D new =
TermQuery(new<br></blockquote><blockquote =
type=3D"cite">Term("category_path","/Top/Books*"));<br></blockquote><block=
quote type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">QueryWrapperFilter filter&nbsp;=3D new =
QueryWrapperFilter(subjectFilterQuery);<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">TopDocs&nbsp;searchResult =3D<br></blockquote><blockquote =
type=3D"cite">searcher.search(query,filter,MAX_SEARCH_RESULTS_SIZE);<br></=
blockquote><blockquote type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">If I debug the subjectFilterQuery and write =
out<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote=
 type=3D"cite">subjectFilterQuery.toString()<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">I =
See<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote=
 type=3D"cite">"subjectFilterQuery.toString()" =
category_path:/TOP/CD*<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">So it looks =
like the query is constructed correctly ?<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">But this does =
not bring back any results ?<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">You say I need =
to be consistent in Index and Query, am I missing =
something.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Many =
thanks<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Mark<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">On 6 Apr 2011, =
at 10:06, Ian Lea wrote:<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">You can add =
multiple values for a field to a single =
document.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Document doc =3D =
new Document();<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">String[] paths =
=3D whatever.split(",");<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">for (String p : =
paths) {<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp;doc.add(new=
 Field("path", p, whatever ...);<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">}<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">For searching, =
assuming you only want to be able to wildcard on =
path<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">delimiters, you =
could index<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">/Top/My =
Prods/Book Prods/Text Books<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">/Top/My =
Prods/Book Prods<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">/Top/My =
Prods<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">/Top<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">which would let =
you search on any of them.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">You'll want to =
pick or build an analyzer that behaves as you want =
wrt<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote=
 type=3D"cite">case matching and not splitting on the /. &nbsp;Sometime =
it can be easier<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">to replace a =
character e.g. / to _. &nbsp;I think there is a lucene =
class<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">that can do =
that, maybe MappingCharFilter, if you don't want to do =
it<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">yourself. &nbsp;You will of course need to be consistent =
and do the same<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">processing at =
index and search time.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">--<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Ian.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">On Wed, Apr 6, =
2011 at 7:55 AM, Mark Wiltshire<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&lt;<a =
href=3D"mailto:mark@redalertconsultants.co.uk">mark@redalertconsultants.co=
.uk</a>&gt; wrote:<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">To add more =
information<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I am then wanting to search this field using part or all of =
the path<br></blockquote><blockquote type=3D"cite">using =
wildcards<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;i.e.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Search category_path with /Top/My =
Prods*<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">Hi =
java-users<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I need some help.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I am indexing categories into a single field =
category_path<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Which may contain items such as<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;/Top/Books,/Top/My Prods/Book Prods/Text =
Books,<br></blockquote><blockquote =
type=3D"cite">/Maths/Books/TextBooks<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;i.e. category paths delimited by =
,<br></blockquote><blockquote type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">&nbsp; &nbsp; &nbsp; &nbsp;I want to store this field, so =
the Analyser tokenizes the document<br></blockquote><blockquote =
type=3D"cite">only on ',' charaters and not on the '/' =
characters<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I am adding the field to the index =
using<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Where the categoryPath is a String containing list of the =
items<br></blockquote><blockquote =
type=3D"cite">above.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;doc.add(new<br></blockquote><blockquote =
type=3D"cite">Field("category_path",categoryPath,Field.Store.YES,Field.Ind=
ex.ANALYZED));<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I think I need to split the string my self, but how do I =
pass this to<br></blockquote><blockquote type=3D"cite">Lucene, do I have =
to setup different fields ?<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;I need to keep the full path in the index, as I want to use =
this when<br></blockquote><blockquote type=3D"cite">redirecting users, =
when clicking on the results.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Any help would be great.<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">&nbsp; &nbsp; =
&nbsp; &nbsp;Many thanks<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Regards<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">Mark<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite">------------------------------------------------------------=
---------<br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">To unsubscribe, =
e-mail: <a =
href=3D"mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscr=
ibe@lucene.apache.org</a><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote type=3D"cite">For additional =
commands, e-mail: <a =
href=3D"mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apa=
che.org</a><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><blockquote =
type=3D"cite"><br></blockquote><br>---------------------------------------=
------------------------------<br>To unsubscribe, e-mail: <a =
href=3D"mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscr=
ibe@lucene.apache.org</a><br>For additional commands, e-mail: <a =
href=3D"mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apa=
che.org</a><br><br></div></div><br><div>
<span class=3D"Apple-style-span" style=3D"border-collapse: separate; =
color: rgb(0, 0, 0); font-family: Helvetica; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; orphans: 2; text-align: auto; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span =
class=3D"Apple-style-span" style=3D"border-collapse: separate; color: =
rgb(0, 0, 0); font-family: Helvetica; font-style: normal; font-variant: =
normal; font-weight: normal; letter-spacing: normal; line-height: =
normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: =
normal; widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: =
0px; -webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span =
class=3D"Apple-style-span" style=3D"font-size: 12px; "><span =
class=3D"Apple-style-span" style=3D"border-collapse: separate; color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: medium; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; orphans: 2; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: medium; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: 12px; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: 12px; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><div><br =
class=3D"Apple-interchange-newline">Regards</div><div><br></div><div>Mark<=
/div><div><br></div><div><span class=3D"Apple-style-span" =
style=3D"font-size: medium; "><div style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; "><span =
class=3D"Apple-style-span" style=3D"font-size: 12px; ">You can view my =
current Wolters Kluwer tasks at</span>:</div><div style=3D"margin-top: =
0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; "><font =
class=3D"Apple-style-span" color=3D"#144FAE" face=3D"'Century Gothic'" =
size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: 10px; =
"><u><a =
href=3D"https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_=
kluwer">https://secure.nozbe.com/nozbe/page/feed/get-markRAC.5625.wolters_=
kluwer</a></u></span></font></div><div><font class=3D"Apple-style-span" =
size=3D"3"><span class=3D"Apple-style-span" style=3D"font-size: 12px; =
"><font class=3D"Apple-style-span" color=3D"#2350A9" face=3D"'Century =
Gothic'" size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: =
10px; "><br></span></font></span></font></div></span></div><span =
class=3D"Apple-style-span" style=3D"font-size: medium; "><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">You can view my calendar at:<span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">		=
</span>&nbsp;&nbsp; You can subscribe to my calendar at:</div><div =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; "><font class=3D"Apple-style-span" face=3D"'Century =
Gothic'" size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: =
16px; font-family: Helvetica; color: rgb(35, 80, 169); =
-webkit-text-decorations-in-effect: underline; "><span =
class=3D"Apple-style-span" style=3D"-webkit-text-decorations-in-effect: =
underline; "><a href=3D"http://ical.me.com/markjwiltshire/Work"><font =
class=3D"Apple-style-span" face=3D"'Century Gothic'" size=3D"2"><span =
class=3D"Apple-style-span" style=3D"font-size: 10px; =
">http://ical.me.com/markjwiltshire/Work</span></font></a></span>&nbsp;&nb=
sp; &nbsp;<span class=3D"Apple-style-span" =
style=3D"-webkit-text-decorations-in-effect: underline; "><font =
class=3D"Apple-style-span" face=3D"'Century Gothic'" size=3D"2"><span =
class=3D"Apple-style-span" style=3D"font-size: 10px; "><a =
href=3D"file://localhost/webcal/::ical.me.com:markjwiltshire:Work.ics">web=
cal://ical.me.com/markjwiltshire/Work.ics</a></span></font></span></span><=
/font></div><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; "><font class=3D"Apple-style-span" =
size=3D"3"><span class=3D"Apple-style-span" style=3D"font-size: 12px; =
"><font class=3D"Apple-style-span" color=3D"#2350A9" face=3D"'Century =
Gothic'" size=3D"2"><span class=3D"Apple-style-span" style=3D"font-size: =
10px; =
"><br></span></font></span></font></div></span></span><span></span></span>=
<br =
class=3D"Apple-interchange-newline"><span></span></span><span></span><span=
><img height=3D"72" width=3D"217" =
id=3D"eab41dec-d606-4715-8c9e-42c61e315682" apple-width=3D"yes" =
apple-height=3D"yes" =
src=3D"cid:EDAC8228-5850-4719-AF01-ECED6ECCFD18@wolterskluwer.local"></spa=
n><span class=3D"Apple-style-span" style=3D"border-collapse: separate; =
color: rgb(0, 0, 0); font-family: Helvetica; font-style: normal; =
font-variant: normal; font-weight: normal; letter-spacing: normal; =
line-height: normal; orphans: 2; text-align: auto; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span =
class=3D"Apple-style-span" style=3D"font-size: 12px; "><span =
class=3D"Apple-style-span" style=3D"border-collapse: separate; color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: medium; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; orphans: 2; text-indent: 0px; =
text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; =
-webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: =
0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><span class=3D"Apple-style-span" =
style=3D"border-collapse: separate; color: rgb(0, 0, 0); font-family: =
Helvetica; font-size: medium; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; =
widows: 2; word-spacing: 0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0px; "><span class=3D"Apple-style-span" =
style=3D"font-size: 12px; "><div><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><b><font class=3D"Apple-style-span" =
color=3D"#004080"><br class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline"><br =
class=3D"Apple-interchange-newline">Mark =
Wiltshire</font></b></font><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; "><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><b><font class=3D"Apple-style-span" =
color=3D"#004080">		</font></b><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; "><b><font class=3D"Apple-style-span" =
color=3D"#004080">					=
</font></b></span><b><font class=3D"Apple-style-span" =
color=3D"#004080">Red Alert Consultants =
LTD</font></b></font></span></div><div><font class=3D"Apple-style-span" =
face=3D"'Century Gothic'" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"white-space: pre; "><font class=3D"Apple-style-span" =
color=3D"#004080">Director - Technical Web Consultant<span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">				=
		</span>Flat 6</font></span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
"><span class=3D"Apple-tab-span" style=3D"white-space: pre; ">			=
						</span>  168 Tower =
Bridge Road</span></font></div><div><font class=3D"Apple-style-span" =
color=3D"#004080" face=3D"'Century Gothic'" size=3D"4"><span =
class=3D"Apple-style-span" style=3D"white-space: pre; "><span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">				=
								</span>  =
  London</span></font></div><div><span class=3D"Apple-style-span" =
style=3D"font-size: large; color: rgb(0, 64, 128); font-family: 'Century =
Gothic'; white-space: pre; "><span class=3D"Apple-tab-span" =
style=3D"white-space: pre; ">							=
				</span>             SE1 =
3LS</span></div><div><font class=3D"Apple-style-span" color=3D"#004080" =
face=3D"'Century Gothic'" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"white-space: pre; "><a =
href=3D"mailto:mark@redalertconsultants.co.uk">mark@redalertconsultants.co=
.uk</a></span></font></div><div><font class=3D"Apple-style-span" =
color=3D"#004080" face=3D"'Century Gothic'" size=3D"4"><span =
class=3D"Apple-style-span" style=3D"font-size: 14px; white-space: pre; =
">iPhone email: <span class=3D"Apple-style-span" style=3D"color: rgb(23, =
64, 125); white-space: normal; "><a =
href=3D"mailto:markjwiltshire@me.com"><span style=3D"color: rgb(35, 80, =
169); =
">markjwiltshire@me.com</span></a></span></span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
">IM: <a =
href=3D"mailto:markjwiltshire@yahoo.com">markjwiltshire@yahoo.com</a><span=
 class=3D"Apple-tab-span" style=3D"white-space: pre; ">			=
</span>    Desk:     0208 247 1547</span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century Gothic'" =
size=3D"4"><span class=3D"Apple-style-span" style=3D"white-space: pre; =
"><span class=3D"Apple-style-span" style=3D"color: rgb(0, 0, 0); =
white-space: normal; "><a =
href=3D"http://www.redalertconsultants.co.uk/"><font =
class=3D"Apple-style-span" size=3D"4"><span class=3D"Apple-style-span" =
style=3D"font-size: 14px; =
">http://www.redalertconsultants.co.uk</span></font></a></span><span =
class=3D"Apple-tab-span" style=3D"white-space: pre; ">	</span>    =
Mobile: 07973 252 403</span></font></div><div><font =
class=3D"Apple-style-span" color=3D"#004080" face=3D"'Century =
Gothic'"><span class=3D"Apple-style-span" style=3D"font-size: large; =
white-space: pre; "><span class=3D"Apple-style-span" style=3D"color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: medium; white-space: =
normal; "><div style=3D"margin-top: 0px; margin-right: 0px; =
margin-bottom: 0px; margin-left: 0px; =
"><div><br></div></div></span></span></font></div></span></span><br =
class=3D"Apple-interchange-newline"></span></span><br =
class=3D"Apple-interchange-newline"></span></span>
</span></span></span></span></span></span></div>
<br></div></body></html>=

--Apple-Mail-133--401939361
Content-Transfer-Encoding: base64
Content-Disposition: inline;
	filename=RAC_logo2_small2.jpg
Content-Type: image/jpeg;
	name="RAC_logo2_small2.jpg"
Content-Id: <EDAC8228-5850-4719-AF01-ECED6ECCFD18@wolterskluwer.local>

/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEP
ERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4e
Hh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCABIANkDASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAYHAQIFBAMI/8QAORAAAQMEAAQEBAMHAwUAAAAA
AQIDBAAFBhEHEiExEyJBURQyYXEVgaEIFjNCUmKRI0OCNFOxwuH/xAAZAQEAAwEBAAAAAAAAAAAA
AAAAAgMEBQH/xAAyEQABAwMDAgQEBAcAAAAAAAABAAIRAyExBBJBBVETImGBFHGR8DKhseEjM0Jy
wdHx/9oADAMBAAIRAxEAPwD9lk6G6wFfSi/lqp+POd5thMZp+wWK2yYj/hx25UmQecyXFFKW0NDq
rQHN1IH+Ki9waJKu09B+oqCmyJPcwrY5qbqroC+PAjNrlJwBS+QFSOWSDzexUFEdvYV84PEXKrPl
tsx3PcWYg/ir3gQp9uk+NHW5reiFAKT+YqHigZCv+BeZDHBxHY9lau/pTm6brj5TkFtxmxSr1eJK
Y8OOnmUrWyfYAepPYAVD+H/EiZk2YybFLxmVaUCCmdGW+6kuKaKuVPiIH8MnuAeuhUi9ocGnJVVP
S1alN1Ro8oyrI3XOyS9QMfsUy9XNzwocNouuq9dD2+vpUVyviPAtF+cx+2Wm6ZBeGmg69FtzQV4C
T2K1EgJ3sdOp+lQHL8wi8UnLTw/tsadAlSrjzXuJKa5XY7DGlqCu40o8oB9ag+s0CAbrVpemVqjg
57SGZJ7DM/TCvK3S0TYDExtC0JebS4ErGlJBG9Eeh6199/StGwEpCQNa9K2J9u9XBc0xNkKtDtWC
sa3r9arziJmFwM79zcNSiVkklH+o4QS3b2j0LzhHYjfRPcn9ef8AsyzbpN4dui8XB+4SI9xkM+O8
sqUoJV7nr33VPjAv2BdA9OqN0h1LjFwI5vN/lZWXdrjDtVtfuNwkNxokdBW66s6ShI9TX1iSWZcV
qTHWHGXUBbax2UkjYNVxxuKr0LFgzDqkuXqckyeU9UxWvO4fz0kfnVhFcaDBKlqQxHYRskkJShIH
6ACpNfLiOAqqmnFOhTfPmdNvQWH1M/Rerm+lOb6VVkDiz+JZdaoFvx+U5ZrnIXGj3FxYR4ykgkrQ
33LY181TmDkdqmZJccfjvrVPtzbbkpPIQlAcBKfN23oE6o2qx2ClfQaihZ7eJ7wJi8Yva/K7JV07
brAXv0/WoPeeKuCWue5AmZBHS8jmSopClNhQBPKVgcvN07bqGcE87xS24g5KveWRU3G5TXprzL0g
rUxzq8qPXWkgfnuo+OzeGgq9vStUaDqxYQBEWN5n9IV3A7pXwhyGZcVqTHcS4y6gLbWOykkbBFfe
rlzcZSlKURKUpREpSlESlKURYX8tUhxbh3jiBxRt2GY/dm7YrHI4vL8tTAeS1KJ5WElJOubRWob9
OujV3q+WoviWKN2bJMiv7sn4mZe5KHFHw+Xwm0ICENjqd60Tv69ulQqN3DbwtOlrCg41OQLfM/sq
m4a3PiHk91vOI5Lnsmy320LS241HtscGS0ezqFKT12B6Aa2D61aFhwGyWy6ovMlydeLs2kpRNuMh
Tzje+/Ik+RH/ABAr45/w4s+V3CLd0SplmvkP+BdLcsNyEj+knXmT9D7n3rnw8Dy4lDV24n3mXGSe
qI8ZqO4segU4nZ++tVS1pbkSt9bUU643MeGTkRHziBcH1UGzGwZXxV4iOy8eu8a22LHnxEbektl5
D0kbK3EN/KooJABV02OlS0Wy3cJsJuF0juv3m/znUtqlSV8z02Us8raN+gBPyjsNmuRjeF8V7Pb3
cVg36xQLH8S64i5NNLXOKHHFLPQ+Tm83eu1k3DGW/jFkteO5A9EmWyf8cqZMSZCn3SFBTigo9VbU
SPaq2tN3wZ+8LZVr05ZQNUeGCLAZGZcYm54vHZeGDOY4Z42xaEN/judXlxUhxhv+JKkLI5lrIHkb
TvWzoaH3rxfs5WSY9ecrzS+PtTbtNuC4fxCEaRytaCwj+3m2ke4QD61N+H3D+2YoqRcHZMi73yZ/
1d0mHmec/tH9Kf7R7Cvvwyw9GFWWRa2rpLuCHpjslJf/ANsLO+RI30A/Ukn1qbaTtzSRYKirr6Io
VmUzLnRJjImTHYCBbn8lKlHR61WfEPLsmlXRWMcN40edc0JV8dLc6swTrygq+XnP9J39ql+b2i6X
y1JgW2/P2bncHxD7DYLqmtHmSgk+RR/q66r14vj9qxy0t260xkssp8yj3U4o91rV3Uo+pPWrXtc7
yiwXP0r6ND+K4BzuGnHzPf0A91UmEWPinjFhktt2rF2n3Cp+ZLkynXX5SzvalEA7Pt7V8/2brflq
8Liz2Lva41skzXn3Wfg1LeWechQ5isBPUex6VeLraVIKSAQRog1COFGKXPD7fdbPJkMP29c1x+Ap
G+dLazspUOwIPtVAobajSCcFdR3VhX0tYPDQ9xacZiZzOJHsuThciPdc7yjOLhIZahQFfhMJxxQC
UIbIU6rZ6dVnW/pXK4xNXjiBdYmE4lNZbZaZTNuclaz4PIro02eX5uYcx16gCuhi3Bu3W9Tab5e7
hfYrDq3WIT55YqVKUVcymx0WrZ7q39q1nYvxEtWZ3udiEmwN2+8qaUtcxtZdjFDYQAgJ6EdNgHp1
qBa809rhYm8Z++PktbNRpW6zxaFUEsb5dwhoiAM5IEnGe66fD7h6zjU1V7vd3XeryhjwUPrbDbUV
r+hpsdED7VX/AA9gXjiJlOUXPx3YONzbkfiXmVFLk9DY5G2kqHyoAG1EHZ3VkQcJn2/Fr1GRfX51
/uzCkO3GUTpKikgBKB0ShOzoCu/g1gYxnE7bY44QERGEoJQnQUr+ZX5nZqYoFxaIgBZXdUFNlV+8
PqOhoMQABckDAvEW9YBUG4sWKzqsmPYLbrZDZRc7g2yhKWh/osoHO6odN7KU63361P7PjlitKOS2
WeDEA/7TCU7/AMCuNxBxB7J12uXAvL1nuVrkF6NKbaDmtjlUkpJGwRXtwuxXe0Kku3jKJt8ef5de
K0httrW/kSkdN767J7CrGsioTt97LHV1Afo2NFW4mW3kknPbEcqQpAAA9K3pqlaFyUpSlESlKURK
UpREpSlEQ1is0oixrpWCNVtWFdtURanVeWbcbfB5fjJseNzfL4rgRv7brgcSMs/de0tiJH+Nu81w
R7dDB6vOn/1Hcn2qO2XhfbZkdy552hOR3qWnmdVI6tx9j+G0n+VI7A96qfUdO1gkrfQ0lPw/G1Di
1pxAknvFxYd/ZWS04242lxtQWhQ2FA7BFbCq0/Z8tV+tOKTmLzHlQ45num3xZCiVssb0B1JIG96/
+19Mmzy8ycqOMYJamLpMjq1cJcjmEaKdHyEjW1fY9KiNQAwOcInhWv6W92qfQouDg3+qQBHcmY/e
wVkVneqhWIZum6YJMyK6xRBdtxfROZCtpQtrfNo+o6VurPrXE4fwswuyHYLEtlDjcfXO6pSxtKEj
1JqQrMiZ4lUO6bqWvLNkkO2279h3UxOjWKiXC3MHc1sMm6OWpy2+DMcjBpxfMohOup6DR66I9CK1
zzL5FlmxbLY7Wu736alS48UK5EJQOhccX2SkfrTxm7N/BXh6fqBqDpi2HjNxaMycQO8qX9Pem6ge
Ns8UP3hiyMgl2L8LcQv4iNFbUFNK15dKPfrXVfydwcQouKRYqHgYS5cx7xNFgbAQNa67O69FURJE
JU0LmvLGODoEmDYAetlJ+goSAnZNRvPssi4nYzOdZMqU6sMw4iD55Dp6JQO/5n0r4ZzkL9k4fyLs
+x4FwXHShmMFcx+IWAlKAfXzHv8ASjqrWzPCjS0VapsIFnmB6n7OV6cMyljJ13VcSK83GgTnIaXl
kcr5RrmUn+3fT8q6LN8tTl/esLcxtdyZYD7jA+ZLZOgTUaxuA7gvDFhqNbHrhMjRw6/HY1zvPK6r
I39Sf8VAeHOVXeflN9yqLgl5nLuym0sOJU2hDbLY5QnmWQO4UTqs51BZta78Rzb/AEuq3pTdT49W
h/LZYeYCTIzJ5ElXtzDW6xzioLleZ3S04oy+LGuNf57wi2+3PPIcUtwn5iUEjlA2T19KgubqzzCI
FvuZzxdyvU+UhlNqcipLLy1HXKgDzJA99/8Amp1NSGcT39PvsqNH0apqSGl4aXEhsyZjMQCIHc2+
hV68wpzConlGUuYrjVvmXOOJM+S+xF8Bk653XCArX0HU/lXi4n8RrZhEEeIw5PuTrSnGYTPzFKQS
VqP8qBrvVjqzGglxwslHp2prva2k2dxIEcxn29cKc81c26X602ufAgz5rbEm4OlqI2re3VAbIH5V
8sbuq7vjcC7qiLjqlxkPlknZQVJB5d+tUq/ml2yHipAuH7gX19NibcZEVPKSiS5rzqUSEgBHv71G
rXawA9/mtPT+lVNU+oDYMBm4F+Mnk2X6B2Kcw3UFmZ5NtVik3XIcUuFqShSG4zKn2nnJTqzpKEht
R0d++q4i3eNN3aRcIzOO2JvnSpMF4qedUgkbC1joDr2r01hMC6pZ02qQXPc1oxJIgn0iZ9rDlWsO
tK1a34Y3W1XLnpSlKIlYVWawoboiqmzvNXT9oa/m6uALssCO3bGnFgDTqeZ1xI996Tup1kWUWCwR
vHul1ixwfkQVgrcPslI6qP0Arx5bw/xXKZrU68WwOy2klCH23VtOAH0KkEEj71tjuAYlYHA9bLNH
RIHaQ7t10f8ANZJ/WszGVGSBFyuxXr6OuGOeXS1oG0ARYcGeTfGSopfc2yYWWTdIllEGPNU3CszM
sFMl59xXKHFpHRCANnXcgddV64CrTw2xhq0Rd3G+SiXfAbPM/Nkr+ZavYb9T0AFSfM8UgZVAYiTp
EuP8O+mQy7FdLbiFgHRB/OtMVwuxY2tx+BHWuW7/ABZchxTrzn3Wok6+g0PpUTTq75n3/Wys+M0h
04bBF5LRgx+GXE4zNsnhVRxFSjCuGNsxa4yPEl3ueXLkqOnalpUvxHggdzvYQPuKkuLWCdcFt5nl
kUR2IEcmz2kJ2IbQT0UserpAH2qf3LHLPcbvCu06E0/Mgg/DOLBPh776G9b6V01NhSSlXUEaNRZp
SHkk24H36qdXrU6drGN85Li539xuG9pAAn2xM0hwxzWLbOH9ptVlQ1c71JLkmWnxOVmIlTilLceX
/KBvt3qXZRZpl2uUTM8PyWDGuCIngAu8rsSS1zc2iR1HXfUVLGcYsLFsk22PaYbMSUkofabZCUuA
jRB136VHBwjwQJCBaHPDGtNiY9yD/jz6rwUaoYGmDHtEKx/UdG/UOrsDmEk8B0g5BBIHyH5yvnw2
zaXkEm7Wu6w4zc61BPjPwXvGjO7BPlV6Hp8p61B8IziKLjfLvChPXfJb7NWiLAY0S0wz5Gy4rem0
9ySevXtVyWSw2iyQfgrTb40KP6tsthIJ9z7mvjYcXsNhU8qz2uJCU+rmdU02ApZ+p71Pwap2y7Eq
pvUNCw1ttIw7bAmBbM8wTBgdonlVThsKXL4v3K55reosiVZ4rXhtKWEMR3Xdn/TB9Ep6cx6kk/Su
1xLu1rd4jY9bbrPYi221IXdZanVhKSsaSyPqdknX2qZXPB8Wud9TfJ9liSbikJAecRvt22OxI9yK
3umGY1dL21erlaI0ucygIbddSVcoB2OhOu576qA09QMLRGZvzdXO6rp6moZWfNmbYAAgxHl9LkzF
iormeZIuPCy+3e0MTWGkp8BiTIa8NLoUQnxEevL5j1IHapdjTdqtVmt9nhyWChlhLbKQ4NrCU9wP
X3r33G1QrhbnrdMjtvRHkeG40pPlKfauNj+BYpYJnxlqs0aPJA5Q71UtI1rQKidD7VaGVA/dY2/6
uc7UaV+mNOC0gkgWM2AEmRi/HKrV7K4L2e3DI3o7tznxHV2uwWxnq4opOnXiP5UlWxzH0BrTDrBd
r5xrdumVTESptniIeUw2rbUZ13qhtA9kp6lXqSKtPH8Nxywzpc61WxiNJmLK3nANqJJ2QN9hv0HS
vVb8ctFvvc69RIiW7hPCRJe5lErCRodCdD8tVQ3SvJBeeZ+/yXTf1qhTa9unaRLNoJieJHoImYuS
ZPZVJxWydS+LNos0GA7c5VqZVIjRGxtLspwaQVn0SgbUTWM+xxeOcM73e8glomZFdy0xNmBPkbQp
aR4aB/KgDp9e5q2oONWeDfJl8jQmkXGby/EP6JUvQ0O56dh2r3XK3QrlDXDuEZmVHXrmadQFJOu3
Q1L4Vx3FxucenZQb1qlS8CnSYQ1m3d3dBkj0E/W04EQixZki53VFrxeGJ1ntzBE248xDSSEeVto/
7itgb9APevPwSlQUYN+My5sZMu7THpkpa3ANOKXoJ+mgEjX0qfw4EWHFREiMNMMIGkttoCUgfYVG
GOGODM3I3BvHYXjlwu+ZJUkKJ3sJJ0Dv2FW+HVBBmc/4WX4vRvp1KcFoMXEEmJzcZJBta2OVrmtu
tmZ21UCBkDUWfbJiH2347iFqjvo6pC0/n2NRzHM1yW15vAwzKhaLm/N5vCm2xw8yQlO9utHqneu4
6da71w4UYNOnPzHbQpD0hwuPFmU80HFHuSErArrYthGMYwtTljtEaI6oaW8AVOKH1WolR/zXhp1C
/dj77KbdVomac0jLxBgFoEE87gZieIgqRUpStS4aUpSiJSlKIlKUoiUpSiJSlKIlKUoiUpSiJSlK
IlKUoiUpSiJSlKIlKUoiUpSiJSlKIv/Z

--Apple-Mail-133--401939361--

--Apple-Mail-132--401939361--

From java-user-return-49348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 12:05:21 2011
Return-Path: <java-user-return-49348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58179 invoked from network); 7 Apr 2011 12:05:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 12:05:21 -0000
Received: (qmail 72381 invoked by uid 500); 7 Apr 2011 12:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72349 invoked by uid 500); 7 Apr 2011 12:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72341 invoked by uid 99); 7 Apr 2011 12:05:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 12:05:19 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chrisspen@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 12:05:13 +0000
Received: by wwi18 with SMTP id 18so2086771wwi.5
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2011 05:04:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=EMKIEQrjoBPnMdiWdFfKRoAK8NRLyh1WBxsGk4zJ8ZU=;
        b=iWxIWbprWPbT82qeeylU/B/V0aLdLc7bhUmh9U4p6wy+c9su8wfLmwTSv8HjxGMuFQ
         hbHr4kUXnsBaioCC763T6jY0aGUshOZ4/32YCX1/+GL7efcNExAu6XkYE0Io1q7TyHSn
         RtMXKFu2XaCFY8GjfQQJKpuZs5Zr93iQa3pXU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=H3N33jxRjt2j7mp8tNs9Q3rBLA/0/8XLR+j85R5RsMTzhFeqXZ9QIQjl2wGAj2nBRc
         U+TwPppDNeI7litvBJMyHqmWWKj+KIGLs1hEnaWORQKNAFNXKIewYkyInzqclevaFCBz
         654B4Nvs38SoM2l3HIn/weWGVXu6XzztX3RKM=
MIME-Version: 1.0
Received: by 10.216.121.208 with SMTP id r58mr757596weh.61.1302177892631; Thu,
 07 Apr 2011 05:04:52 -0700 (PDT)
Received: by 10.216.93.19 with HTTP; Thu, 7 Apr 2011 05:04:52 -0700 (PDT)
In-Reply-To: <962010.45169.qm@web130106.mail.mud.yahoo.com>
References: <BANLkTi=nGE5oL3eKy3y3E7agojiJf55_eg@mail.gmail.com>
	<962010.45169.qm@web130106.mail.mud.yahoo.com>
Date: Thu, 7 Apr 2011 08:04:52 -0400
Message-ID: <BANLkTimPxf=ahDp4xe_0K7+7UU0R8dgtHg@mail.gmail.com>
Subject: Re: Indexing Non-Textual Data
From: Chris Spencer <chrisspen@gmail.com>
To: java-user@lucene.apache.org
Cc: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Content-Type: multipart/alternative; boundary=00261883adfcb99c1c04a052ea3a
X-Virus-Checked: Checked by ClamAV on apache.org

--00261883adfcb99c1c04a052ea3a
Content-Type: text/plain; charset=ISO-8859-1

My question wasn't just about classification. I'm asking, is there a way to
classify non-textual data with Lucene? Yes, I know how to Google, and I've
read the mailing list logs. All of those results only concern classifying
simple text, not arbitrary numeric features.

Regards,
Chris

On Thu, Apr 7, 2011 at 1:04 AM, Otis Gospodnetic <otis_gospodnetic@yahoo.com
> wrote:

> Hi Chris,
>
> Yes, people have done classification with Lucene before.  Have a look at
> http://search-lucene.com/?q=classifier&fc_project=Lucene for some
> discussions
> and actual code (in old JIRA issues)
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
> > From: Chris Spencer <chrisspen@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Wed, April 6, 2011 7:46:45 PM
> > Subject: Indexing Non-Textual Data
> >
> > Hi,
> >
> > I'm new to Lucene, so forgive me if this is a newbie question. I have  a
> > dataset composed of several thousand lists of 128 integer features,  each
> > list associated with a class label. Would it be possible to use Lucene
>  as a
> > classifier, by indexing the label with respect to these integer
>  features,
> > and then classify a new list by finding the most similar labels  with
> Lucene?
> >
> > I'm specifically interested in doing so through the PyLucene  API, so
> I've
> > been going through the PyLucene samples, but they only seem to  involve
> > indexing text, not continuous features (understandably). Could anyone
>  point
> > me to an example that indexes non-textual data?
> >
> > I think the  project Lire (http://www.semanticmetadata.net/lire/) is
> using
> > Lucene to do something  similar to this, although with an emphasis on
> image
> > features. I've dug into  their code a little, but I'm not a strong Java
> > programmer, so I'm not sure  how they're pulling it off, nor how I might
> > translate this into the PyLucene  API. In your opinion, is this a
> practical
> > use of  Lucene?
> >
> > Regards,
> > Chris
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00261883adfcb99c1c04a052ea3a--

From java-user-return-49349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 14:48:26 2011
Return-Path: <java-user-return-49349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92997 invoked from network); 7 Apr 2011 14:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 14:48:25 -0000
Received: (qmail 27207 invoked by uid 500); 7 Apr 2011 14:48:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27164 invoked by uid 500); 7 Apr 2011 14:48:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27156 invoked by uid 99); 7 Apr 2011 14:48:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 14:48:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 14:48:17 +0000
Received: by wyb40 with SMTP id 40so3453274wyb.35
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2011 07:47:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.9.20 with SMTP id j20mr986184wbj.116.1302187675584; Thu,
 07 Apr 2011 07:47:55 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Thu, 7 Apr 2011 07:47:55 -0700 (PDT)
In-Reply-To: <201104061731542961939@gmail.com>
References: <201104011133527349770@gmail.com>
	<AANLkTikaL3nrm-_DnAVzhZqVPOtCzOG27se73m5dUPT9@mail.gmail.com>
	<201104011826576408113@gmail.com>
	<AANLkTi=iEb=-BAyHpmigNi1q7NOmmi46Cw3S9iR53ot6@mail.gmail.com>
	<201104021607211569827@gmail.com>
	<201104061731542961939@gmail.com>
Date: Thu, 7 Apr 2011 10:47:55 -0400
Message-ID: <BANLkTi=VXE5p9fZA=qTDyub_YV=VYYAXPw@mail.gmail.com>
Subject: Re: Re: Re: A likely bug of TermsPosition.nextPosition
From: Michael McCandless <lucene@mikemccandless.com>
To: =?GB2312?B?1KzO5CBbR01haWxd?= <yuanwu.mail@gmail.com>
Cc: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

I committed another change to 3.x's CheckIndex (to also invoke
.nextPosition); can you run that and see if it can detect this?

Is there any way I can get this index?

One question: how large are your payloads, typically?

Does the exception still occur on the index fully rebuilt with 3.1?

Mike

http://blog.mikemccandless.com

2011/4/6 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
> Dear Mike:
>
> I have run the CheckIndex of branch_3x, and the result report is listed
> below:
>
> [oracle@server bin]$ java -classpath ./ org.apache.lucene.index.CheckInde=
x /data/Index/URL/Generic/  -fix
> NOTE: testing will be more thorough if you run java with '-ea:org.apache.=
lucene...', so assertions are enabled
> Opening index @ /data/Index/URL/Generic/
> Segments file=3Dsegments_ayup numSegments=3D1 version=3DFORMAT_DIAGNOSTIC=
S [Lucene 2.9]
>   1 of 1: name=3D_bym0 docCount=3D1344278
>     compound=3Dfalse
>     hasProx=3Dtrue
>     numFiles=3D11
>     size (MB)=3D15,979.593
>     diagnostics =3D {optimize=3Dtrue, mergeFactor=3D3, os.version=3D2.6.2=
7.41-170.2.117.                                                            =
 fc10.x86_64, os=3DLinux, mergeDocStores=3Dtrue, lucene.version=3D3.0-dev, =
source=3Dmerge                                                             =
, os.arch=3Damd64, java.version=3D1.6.0_21, java.vendor=3DSun Microsystems =
Inc.}
>     no deletions
>     test: open reader.........OK
>     test: fields..............OK [11 fields]
>     test: field norms.........OK [2 fields]
>     test: terms, freq, prox...OK [1263500 terms; 601715072 terms/docs pai=
rs; 1513780631 tokens]
>     test: stored fields.......OK [8063151 total field count; avg 5.998 fi=
elds per doc]
>     test: term vectors........OK [1344278 total vector count; avg 1 term/=
freq vector fields per doc]
> No problems were detected with this index.
>
> 2011-04-06
> ________________________________
> =D4=AC=CE=E4 [GMail]
> ________________________________
> =B7=A2=BC=FE=C8=CB=A3=BA Michael McCandless
> =B7=A2=CB=CD=CA=B1=BC=E4=A3=BA 2011-04-02  21:11:05
> =CA=D5=BC=FE=C8=CB=A3=BA =D4=AC=CE=E4 [GMail]
> =B3=AD=CB=CD=A3=BA java-user
> =D6=F7=CC=E2=A3=BA Re: Re: Re: A likely bug of TermsPosition.nextPosition
> So your test case still hits the exception in 3.1?
> If you fully rebuild you index in 3.1, does the exception still occur?
> Is there any way I could get access to this index?
> Do other terms besides "\1" have the problem?
> I just committed a change to the 3.x branch
> (https://svn.apache.org/repos/asf/lucene/dev/branches/branch_3x) --
> are you able to checkout this branch, build it, and run its CheckIndex
> on your index?  I'm also attaching the patch... and I could also send
> you the patched Lucene core JAR if you want.
> I'd like to see if that change to CheckIndex detects the problem with
> your index.
> Mike
> http://blog.mikemccandless.com
> 2011/4/2 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
>> Dear Mike:
>>
>> The index was constructed using Lucene 2.9. After the problem occured, I
>> switched to recently release  Lucene 3.1, leaving the index untouched.
>>
>> Thanks to your help
>>
>> 2011-04-02
>> ________________________________
>> =D4=AC=CE=E4 [GMail]
>> ________________________________
>> =B7=A2=BC=FE=C8=CB=A3=BA Michael McCandless
>> =B7=A2=CB=CD=CA=B1=BC=E4=A3=BA 2011-04-02  00:13:35
>> =CA=D5=BC=FE=C8=CB=A3=BA =D4=AC=CE=E4 [GMail]
>> =B3=AD=CB=CD=A3=BA java-user
>> =D6=F7=CC=E2=A3=BA Re: Re: A likely bug of TermsPosition.nextPosition
>> Hmm so it's not index corruption.  Curious.
>> Which Lucene version are you using?  Looks like it's 2.9, but not
>> 2.9.4?  Can you try 2.9.4 and see if you still hit the problem?
>> Can you post a small test case showing the problem, on your index?
>> Mike
>> http://blog.mikemccandless.com
>> 2011/4/1 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
>>> Hi, Dear Mike:
>>>
>>> belows list the report of checkIndex. OS is Fedora Linux.
>>>
>>> [oracle@server bin]$ java -classpath ./ org.apache.lucene.index.CheckIn=
dex /data/Index/URL/Generic/ -fix
>>>
>>> NOTE: testing will be more thorough if you run java with '-ea:org.apach=
e.lucene...', so assertions are enabled
>>> Opening index @ /GeoGrid/data/Index/URL/Generic/
>>> Segments file=3Dsegments_ayup numSegments=3D1 version=3DFORMAT_DIAGNOST=
ICS [Lucene 2.9]
>>>   1 of 1: name=3D_bym0 docCount=3D1344278
>>>     compound=3Dfalse
>>>     hasProx=3Dtrue
>>>     numFiles=3D11
>>>     size (MB)=3D15,979.593
>>>     diagnostics =3D {optimize=3Dtrue, mergeFactor=3D3, os.version=3D2.6=
.27.41-170.2.117.fc10.x86_64, os=3DLinux, mergeDocStores=3Dtrue, lucene.ver=
sion=3D3.0-dev, source=3Dmerge, os.arch=3Damd64, java.version=3D1.6.0_21, j=
ava.vendor=3DSun Microsystems Inc.}
>>>     no deletions
>>>     test: open reader.........OK
>>>     test: fields..............OK [11 fields]
>>>     test: field norms.........OK [2 fields]
>>>     test: terms, freq, prox...
>>> OK [1263500 terms; 601715072 terms/docs pairs; 1513780631 tokens]
>>>     test: stored fields.......OK [8063151 total field count; avg 5.998 =
fields per doc]
>>>     test: term vectors........OK [1344278 total vector count; avg 1 ter=
m/freq vector fields per doc]
>>> No problems were detected with this index.
>>>
>>>
>>>
>>> 2011-04-01
>>> ________________________________
>>> =D4=AC=CE=E4 [GMail]
>>> ________________________________
>>> =B7=A2=BC=FE=C8=CB=A3=BA Michael McCandless
>>> =B7=A2=CB=CD=CA=B1=BC=E4=A3=BA 2011-04-01  17:58:08
>>> =CA=D5=BC=FE=C8=CB=A3=BA java-user
>>> =B3=AD=CB=CD=A3=BA =D4=AC=CE=E4 [GMail]
>>> =D6=F7=CC=E2=A3=BA Re: A likely bug of TermsPosition.nextPosition
>>> Hmm this could be from a corrupted index.
>>> What version of Lucene?  What OS/filesystem?
>>> Can you run CheckIndex and post the output?
>>> Mike
>>> http://blog.mikemccandless.com
>>> 2011/3/31 =D4=AC=CE=E4 [GMail] <yuanwu.mail@gmail.com>:
>>>> Hi, dear experts:
>>>>
>>>> When IndexReader.termsPositions is used to access specific terms, the =
call to TermsPosition.nextPosition success if TermsPosition.next is used. B=
ut if TermsPosition.skipTo is used instead of TermsPosition.next, a java.la=
ng.IllegalArgumentException will be thrown, as bellows.
>>>>
>>>>  java.lang.IllegalArgumentException: Negative position
>>>>    at sun.nio.ch.FileChannelImpl.read(FileChannelImpl.java:610)
>>>>    at org.apache.lucene.store.NIOFSDirectory$NIOFSIndexInput.readInter=
nal(NIOFSDirectory.java:161)
>>>>    at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexI=
nput.java:213)
>>>>    at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedInde=
xInput.java:39)
>>>>    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:92)
>>>>    at org.apache.lucene.store.BufferedIndexInput.readVInt(BufferedInde=
xInput.java:181)
>>>>    at org.apache.lucene.index.SegmentTermPositions.readDeltaPosition(S=
egmentTermPositions.java:75)
>>>>    at org.apache.lucene.index.SegmentTermPositions.skipPositions(Segme=
ntTermPositions.java:130)
>>>>    at org.apache.lucene.index.SegmentTermPositions.lazySkip(SegmentTer=
mPositions.java:168)
>>>>    at org.apache.lucene.index.SegmentTermPositions.nextPosition(Segmen=
tTermPositions.java:69)
>>>>
>>>> In my further study, I found that if docid execeed 1044278, the except=
ion occurs everytime, for the small ones,  the exception never occur. BTW, =
the total number of documents is about 1344278, and are never deleted.
>>>>
>>>> Thanks.
>>>>
>>>> 2011-04-01
>>>>
>>>>
>>>>
>>>> Yuan Wu [GMail]
>>>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 22:33:54 2011
Return-Path: <java-user-return-49350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34119 invoked from network); 7 Apr 2011 22:33:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 22:33:54 -0000
Received: (qmail 6864 invoked by uid 500); 7 Apr 2011 22:33:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6822 invoked by uid 500); 7 Apr 2011 22:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6814 invoked by uid 99); 7 Apr 2011 22:33:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 22:33:52 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of siraj@jobdiva.com designates 64.18.2.26 as permitted sender)
Received: from [64.18.2.26] (HELO exprod7og124.obsmtp.com) (64.18.2.26)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Apr 2011 22:33:43 +0000
Received: from mail.jobdiva.com ([64.147.106.2]) (using TLSv1) by exprod7ob124.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTZ47r2vBbNEqvNvug/2jZuOAoc9bVzJF@postini.com; Thu, 07 Apr 2011 15:33:23 PDT
Received: from [10.10.9.18] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server id 8.1.436.0; Thu, 7 Apr 2011 18:40:32 -0400
Message-ID: <4D9E3B4F.7030108@jobdiva.com>
Date: Thu, 7 Apr 2011 18:31:43 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: Lucene Users Mailing List <java-user@lucene.apache.org>
Subject: ChainedFilter in Lucene 3.1.0
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

We have been using org.apache.lucene.search.ChaniedFilter in our 
application that uses lucene 3.0.3.  Today we downloaded version 3.1.0, 
but the code wont compile.  It says that it could not find 
ChainedFilter.  Did this class got moved to some other package?

thanks
-siraj

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 22:43:08 2011
Return-Path: <java-user-return-49351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59712 invoked from network); 7 Apr 2011 22:43:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 22:43:08 -0000
Received: (qmail 29407 invoked by uid 500); 7 Apr 2011 22:43:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29233 invoked by uid 500); 7 Apr 2011 22:43:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29225 invoked by uid 99); 7 Apr 2011 22:43:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 22:43:06 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of siraj@jobdiva.com designates 64.18.2.24 as permitted sender)
Received: from [64.18.2.24] (HELO exprod7og123.obsmtp.com) (64.18.2.24)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Apr 2011 22:42:56 +0000
Received: from mail.jobdiva.com ([64.147.106.2]) (using TLSv1) by exprod7ob123.postini.com ([64.18.6.12]) with SMTP
	ID DSNKTZ492M/8gG6Lq1JgINcZM7I4O8EhsluP@postini.com; Thu, 07 Apr 2011 15:42:36 PDT
Received: from [10.10.9.18] (12.111.23.142) by mail.jobdiva.com (10.10.30.148)
 with Microsoft SMTP Server id 8.1.436.0; Thu, 7 Apr 2011 18:49:38 -0400
Message-ID: <4D9E3D71.7050705@jobdiva.com>
Date: Thu, 7 Apr 2011 18:40:49 -0400
From: Siraj Haider <siraj@jobdiva.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101207 Thunderbird/3.1.7
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: ChainedFilter in Lucene 3.1.0
References: <4D9E3B4F.7030108@jobdiva.com>
In-Reply-To: <4D9E3B4F.7030108@jobdiva.com>
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am sorry, but the ChainedFilter was in lucene-misc-3.0.3.jar under 
org.apache.lucene.misc but could not find it under the same location in 
lucene-misc.3.1.0.jar.

On 4/7/2011 6:31 PM, Siraj Haider wrote:
> We have been using org.apache.lucene.search.ChaniedFilter in our
> application that uses lucene 3.0.3.  Today we downloaded version 3.1.0,
> but the code wont compile.  It says that it could not find
> ChainedFilter.  Did this class got moved to some other package?
>
> thanks
> -siraj
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 07 22:46:29 2011
Return-Path: <java-user-return-49352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73244 invoked from network); 7 Apr 2011 22:46:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 7 Apr 2011 22:46:28 -0000
Received: (qmail 32391 invoked by uid 500); 7 Apr 2011 22:46:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32302 invoked by uid 500); 7 Apr 2011 22:46:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32294 invoked by uid 99); 7 Apr 2011 22:46:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 22:46:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Apr 2011 22:46:21 +0000
Received: by bwz8 with SMTP id 8so3857475bwz.35
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2011 15:46:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=lMpTTiCOa/vSAVbBwKMECKa+89Ddn/cLU5nYoKfob6E=;
        b=JutQvWWGa+ONKoGIDteMsLNu49s5UWVhGGYZrDsMxiDDNqsuOtTvDzH8UTQ91BPA72
         1rmblnDg96wN13GhZwG9+wkohbA8T2Wyf/Zc7T0/waml6OlQh+4TB3herVzzxubpOp+l
         q96XF3a22/itNqInOcBVu01hPL7FvRS8Au2NM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=XG63O3K19QT+cJjaFrrQ28E5GGJgtMBLjsdmBCFnjlqMzNtgVKLMLm7a6cf6fPtXW/
         nxtYhSDfJotDskniRr1rCnJFafIEyYe3nPrB6t1xFyuCsL1y3X2UOqu6RKlv8d6K4f+T
         u+YNgizEz45IKo8GRKjQPSbv+vZ7jVw+R6HkI=
Received: by 10.204.45.152 with SMTP id e24mr1233628bkf.47.1302216360143; Thu,
 07 Apr 2011 15:46:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.76.14 with HTTP; Thu, 7 Apr 2011 15:45:40 -0700 (PDT)
In-Reply-To: <4D9E3D71.7050705@jobdiva.com>
References: <4D9E3B4F.7030108@jobdiva.com> <4D9E3D71.7050705@jobdiva.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 7 Apr 2011 18:45:40 -0400
Message-ID: <BANLkTimenSL_BR-b_aV6OL=nwmOJSpe5mQ@mail.gmail.com>
Subject: Re: ChainedFilter in Lucene 3.1.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Please read the CHANGES.txt and contrib/CHANGES.txt when upgrading,
this is really really really really important.

On Thu, Apr 7, 2011 at 6:40 PM, Siraj Haider <siraj@jobdiva.com> wrote:
> I am sorry, but the ChainedFilter was in lucene-misc-3.0.3.jar under
> org.apache.lucene.misc but could not find it under the same location in
> lucene-misc.3.1.0.jar.
>
> On 4/7/2011 6:31 PM, Siraj Haider wrote:
>>
>> We have been using org.apache.lucene.search.ChaniedFilter in our
>> application that uses lucene 3.0.3. =C2=A0Today we downloaded version 3.=
1.0,
>> but the code wont compile. =C2=A0It says that it could not find
>> ChainedFilter. =C2=A0Did this class got moved to some other package?
>>
>> thanks
>> -siraj
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 04:18:02 2011
Return-Path: <java-user-return-49353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31143 invoked from network); 8 Apr 2011 04:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 04:18:02 -0000
Received: (qmail 21704 invoked by uid 500); 8 Apr 2011 04:18:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21459 invoked by uid 500); 8 Apr 2011 04:18:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21447 invoked by uid 99); 8 Apr 2011 04:17:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 04:17:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HK_RANDOM_ENVFROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of teddyyyy123@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 04:17:52 +0000
Received: by yxd5 with SMTP id 5so1699825yxd.35
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2011 21:17:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=kYkh8Ah7yNT7U2PTfY/A+RsK9ipGT4rmsf1QE9RW/sI=;
        b=cFMUbxxt8VG80NBtpcpggyvdHrlC8O3V8EDNaTudjs4DQwoHq/+ztIVpgG8jbIkVhH
         ovdmtpOkMN9XvTQa4eb7+Hp2AeirnHo8hVJtkgooWKyYpP/KHPPRy9xoS+w9TCyEYf9Y
         tVqPio9u00yXyUtjJGblQjWWpjJLi3pgU0OcE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Y2a30PWLSRpX0ahZzlmalGplXpBr98BjUXMrHK4TUs+IxyXEMDe5jIPTa8JRY6F6Fv
         VrPCNXOxVCd4dWGgGW3nvptlEvWRtqyufqYIzI608k/mKwRuVHGmOEm7QyDujgMW2nOh
         cHceb+8X23TCERW/LtmwGBhiQQWUl00bFwAIc=
MIME-Version: 1.0
Received: by 10.236.190.232 with SMTP id e68mr2196156yhn.187.1302236251295;
 Thu, 07 Apr 2011 21:17:31 -0700 (PDT)
Received: by 10.236.109.138 with HTTP; Thu, 7 Apr 2011 21:17:31 -0700 (PDT)
Date: Thu, 7 Apr 2011 21:17:31 -0700
Message-ID: <BANLkTim0MUHGq3rPZTotsQHheCOYvKbr8g@mail.gmail.com>
Subject: some basic questions on how Lucene/search engines work
From: Yang <teddyyyy123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I'm new to lucene/search engine , and have been struggling with these
questions recently.
I'd appreciate a lot of you could shed some light on this.


let's say I do a query on

dog   greyhound

note that I did not quote them, i.e. this is not a phrase search.

what happens under the hood ?

which term does Lucene use to look up the inverted Index ?
I read somewhere that Lucene uses the term with the higher IDF (i.e.
the more distinguishing term), i.e. in this case
"greyhound", but what about dog? does Lucene traverse down the doclist
of  "dog" at all? if I provide multiple terms in my query,
generally how does Lucene decide how many doclists to travel down?


I read that Lucene uses a combination of "binary model" and  VSM, then
it seems that in the above case, it finds
the full doclist of dog , and that of "greyhound", (the binary model
part), then find the common docs from the two doclists,
then order them by scores ( the VSM part).  is it true that the FULL
doclists are fetched first? or is some pruning done on the individual
doclists? I see the
talk in http://www.slideshare.net/abial/eurocon2010  that talks about
pruning and tiered search, but is this the default behavior of Lucene?
how are the doclists sorted? (by  idf ?? --- sorry I'm just beginning
to sift through a lot of docs online, somehow got this impression but
can't form a precise conclusion)



also generally, could you please provide some good articles on how
lucene/search engines work? I've read the "anatomy of a search engine"
(google Sergey Brin & Larry Page paper),
"introduction to information retrieval (Manning et al ) "  , "Lucene
in action" ....


Thanks
Yang

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 05:34:01 2011
Return-Path: <java-user-return-49354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88961 invoked from network); 8 Apr 2011 05:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 05:34:01 -0000
Received: (qmail 58803 invoked by uid 500); 8 Apr 2011 05:33:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58759 invoked by uid 500); 8 Apr 2011 05:33:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58748 invoked by uid 99); 8 Apr 2011 05:33:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 05:33:55 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of umesh.iitk@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 05:33:50 +0000
Received: by bwz8 with SMTP id 8so4118882bwz.35
        for <java-user@lucene.apache.org>; Thu, 07 Apr 2011 22:33:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=dEWrGdNiLvUDN9H4UEyLuFI6uYbOFS4mHjQcl8Ah4ek=;
        b=mRtBMQEJLC2O1DV3KzVTLuyPVjrXoWX0+EwPMRjsr6VB3ySGpdYqREtcH1YFuLULqZ
         wzRxjSj4rZb05rAa5YlRGHAdY/s0ufpJFovbMFuH31z24UFyIGZV5cZZNknV7BTmRPvj
         ixu5v7t9UCDYIjf2vdZ3DmmNZyI8Jyzauxmes=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=F1rdkNiajecAhH/agdWlhiV7ItZ38w+XXajVEWx8E89paLzlcbmUDEwcjEORE6k9Jx
         randR4m6LHI2m59Q7u8tLAfnIVmQpq7p7X1qGHY8L1GNItBTMnNjvlDFr6NQwzPAi2TU
         yiqYqH7xN696RA4cWLId0mjH51wHOxxR0tVNM=
Received: by 10.204.32.9 with SMTP id a9mr1544654bkd.182.1302240809140; Thu,
 07 Apr 2011 22:33:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.169.129 with HTTP; Thu, 7 Apr 2011 22:33:09 -0700 (PDT)
In-Reply-To: <BANLkTinW9CG9Jp-iVAyPURSeUfcr6oTeeg@mail.gmail.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
 <BANLkTikO36A9xcLMXqZe8aNeA5=ogvS8Eg@mail.gmail.com> <5D8F33B7-8B0F-45D0-8134-4584023B5AF2@gmail.com>
 <BANLkTinW9CG9Jp-iVAyPURSeUfcr6oTeeg@mail.gmail.com>
From: Umesh Prasad <umesh.iitk@gmail.com>
Date: Fri, 8 Apr 2011 11:03:09 +0530
Message-ID: <BANLkTikFTQnwTD_DFxzxvnL3JSNh674jTw@mail.gmail.com>
Subject: Re: Concurrent Issue
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325556532d7424804a0619004

--000325556532d7424804a0619004
Content-Type: text/plain; charset=ISO-8859-1

Building on Aditya's comments.

1. Lucene in Action has a SearchManager class which does most of 1-5 and
manages indexreaders.
2. Reference counting is not the best approach, it is too low level and
error prone. Instead
  Use ReadWriteLock
<http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html>manage
index ( or do reference counting for u)

A ReadWriteLock maintains a pair of associated
locks<http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html>,
one for read-only operations and one for writing. The read
lock<http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html#readLock%28%29>may
be held simultaneously by multiple reader threads, so long as there
are
no writers. The write
lock<http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html#writeLock%28%29>is
exclusive.

So basically, you wrap the lucene's searcher into your SearchManager class,
which exposes its own API for search and forwards the requests to underlying
searcher.

 The search and reopen will sync up by using ReadWriteLock . search takes
readlock and reopen takes writelock and that will take care of any open
search results etc.

PS:  To speed up the reopening of index use indexreader.reopen() instead of
closing it off and then open again. It is much faster. (Documented)
Thanks & Regards
Umesh Prasad

On Thu, Apr 7, 2011 at 11:38 AM, findbestopensource <
findbestopensource@gmail.com> wrote:

> You are trying to access the reader which is already closed by some other
> thread.
>
> 1. Keep a reference count for the reader you create.
> 2. Have a common function through which all functions will retrieve Reader
> objects
> 3. Once the index got changed, create a new reader, do warmup
> 4. When the new reader is ready then the common function should return this
> for furture request and old reader should go in passive mode.
> 5. The old reader should be closed when the reference count is zero.
>
>


> Regards
> Aditya
> www.findbestopensource.com
>
>
> On Wed, Apr 6, 2011 at 7:20 PM, Piotr Pezik <piotr.pezik@gmail.com> wrote:
>
> > Only to second this explanation.
> >
> > I got the same exception in a web application with a single IndexReader,
> > accessed by many threads.
> >
> > The index gets updated every half hour or so, so I closed the old
> > IndexReader and opened a new one every now and then.
> >
> > Even though the method for obtaining the IndexReader was synchronized,
> with
> > tens of thousands of queries a day,
> > I started getting the AlreadyClosed exception when one thread triggered
> the
> > closure of the IndexReader which another thread was still using.
> >
> >
> >
> > Piotr
> >
> >
> > On 5 Apr 2011, at 15:46, Ian Lea wrote:
> >
> > > You don't say exactly how you are dealing with the concurrent access
> > > (one shared Reader/Searcher? Each user with own Reader/Searcher?
> > > Something else?) but the underlying problem is that the reader has
> > > been closed while something else is still using it.  This can easily
> > > happen in a multi-threaded setup: thread A might close the reader
> > > while thread B is still using it.
> > >
> > > Options include
> > >
> > > not closing the old reader straight away when open a new one, but
> > > instead stash it somewhere and close it later when you can be
> > > confident nothing else will be using it.
> > >
> > > using the SearcherManager class from Lucene In Action 2nd edition, or
> > > an equivalent.
> > >
> > > catching the AlreadyClosed exception and restarting the search with a
> > > current reader
> > >
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Tue, Apr 5, 2011 at 12:56 PM, Yogesh Dabhi <ydabhi@asite.com>
> wrote:
> > >> Hi
> > >>
> > >>
> > >>
> > >> My application is cluster in jobss application servers & lucene
> > >> directory was shared.
> > >>
> > >>
> > >>
> > >> Concurrently 5 user access same lucene directory for searching
> document
> > >>
> > >> That time I got bellow exception
> > >>
> > >> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
> > >> closed
> > >>
> > >>
> > >>
> > >> is there a way to handle such error
> > >>
> > >>
> > >>
> > >> Thanks & Regards
> > >>
> > >> Yogesh
> > >>
> > >>
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
>



-- 
---
Thanks & Regards
Umesh Prasad

--000325556532d7424804a0619004--

From java-user-return-49355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 10:21:52 2011
Return-Path: <java-user-return-49355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23513 invoked from network); 8 Apr 2011 10:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 10:21:52 -0000
Received: (qmail 54262 invoked by uid 500); 8 Apr 2011 10:21:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54201 invoked by uid 500); 8 Apr 2011 10:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54193 invoked by uid 99); 8 Apr 2011 10:21:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 10:21:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,T_FRT_BELOW2
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 10:21:45 +0000
Received: by wyb40 with SMTP id 40so4503112wyb.35
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 03:21:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.9.80 with SMTP id k16mr2170822wbk.202.1302258082399; Fri,
 08 Apr 2011 03:21:22 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Fri, 8 Apr 2011 03:21:22 -0700 (PDT)
In-Reply-To: <BANLkTinW9CG9Jp-iVAyPURSeUfcr6oTeeg@mail.gmail.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
	<BANLkTikO36A9xcLMXqZe8aNeA5=ogvS8Eg@mail.gmail.com>
	<5D8F33B7-8B0F-45D0-8134-4584023B5AF2@gmail.com>
	<BANLkTinW9CG9Jp-iVAyPURSeUfcr6oTeeg@mail.gmail.com>
Date: Fri, 8 Apr 2011 06:21:22 -0400
Message-ID: <BANLkTi=GNkQwF7PwF6apNsd6MnKMXuL1jw@mail.gmail.com>
Subject: Re: Concurrent Issue
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: findbestopensource <findbestopensource@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Actually, you shouldn't need a separate ReadWriteLock.

SearcherManager (from LIA2's source code, freely downloadable from
http://www.manning.com/hatcher3, with Apache License 2.0) handles the
reference counting (so a reader is never closed while any search from
other threads are stil in flight), and also handles reopening and
warming in the background.

You pass it either an IndexWriter (in which case it pulls
near-real-time readers), or a Directory (in which case it opens a
"normal" IndexReader and then uses reopen).

All the app has to do is tell SearcherManager when to reopen.

Mike

http://blog.mikemccandless.com

On Thu, Apr 7, 2011 at 2:08 AM, findbestopensource
<findbestopensource@gmail.com> wrote:
> You are trying to access the reader which is already closed by some other
> thread.
>
> 1. Keep a reference count for the reader you create.
> 2. Have a common function through which all functions will retrieve Reade=
r
> objects
> 3. Once the index got changed, create a new reader, do warmup
> 4. When the new reader is ready then the common function should return th=
is
> for furture request and old reader should go in passive mode.
> 5. The old reader should be closed when the reference count is zero.
>
> Regards
> Aditya
> www.findbestopensource.com
>
>
> On Wed, Apr 6, 2011 at 7:20 PM, Piotr Pezik <piotr.pezik@gmail.com> wrote=
:
>
>> Only to second this explanation.
>>
>> I got the same exception in a web application with a single IndexReader,
>> accessed by many threads.
>>
>> The index gets updated every half hour or so, so I closed the old
>> IndexReader and opened a new one every now and then.
>>
>> Even though the method for obtaining the IndexReader was synchronized, w=
ith
>> tens of thousands of queries a day,
>> I started getting the AlreadyClosed exception when one thread triggered =
the
>> closure of the IndexReader which another thread was still using.
>>
>>
>>
>> Piotr
>>
>>
>> On 5 Apr 2011, at 15:46, Ian Lea wrote:
>>
>> > You don't say exactly how you are dealing with the concurrent access
>> > (one shared Reader/Searcher? Each user with own Reader/Searcher?
>> > Something else?) but the underlying problem is that the reader has
>> > been closed while something else is still using it. =A0This can easily
>> > happen in a multi-threaded setup: thread A might close the reader
>> > while thread B is still using it.
>> >
>> > Options include
>> >
>> > not closing the old reader straight away when open a new one, but
>> > instead stash it somewhere and close it later when you can be
>> > confident nothing else will be using it.
>> >
>> > using the SearcherManager class from Lucene In Action 2nd edition, or
>> > an equivalent.
>> >
>> > catching the AlreadyClosed exception and restarting the search with a
>> > current reader
>> >
>> >
>> > --
>> > Ian.
>> >
>> >
>> > On Tue, Apr 5, 2011 at 12:56 PM, Yogesh Dabhi <ydabhi@asite.com> wrote=
:
>> >> Hi
>> >>
>> >>
>> >>
>> >> My application is cluster in jobss application servers & lucene
>> >> directory was shared.
>> >>
>> >>
>> >>
>> >> Concurrently 5 user access same lucene directory for searching docume=
nt
>> >>
>> >> That time I got bellow exception
>> >>
>> >> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
>> >> closed
>> >>
>> >>
>> >>
>> >> is there a way to handle such error
>> >>
>> >>
>> >>
>> >> Thanks & Regards
>> >>
>> >> Yogesh
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 10:55:14 2011
Return-Path: <java-user-return-49356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41980 invoked from network); 8 Apr 2011 10:55:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 10:55:14 -0000
Received: (qmail 92907 invoked by uid 500); 8 Apr 2011 10:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92866 invoked by uid 500); 8 Apr 2011 10:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92857 invoked by uid 99); 8 Apr 2011 10:55:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 10:55:11 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of piotr.pezik@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 10:55:04 +0000
Received: by wwi18 with SMTP id 18so2888140wwi.5
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 03:54:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:subject:mime-version:content-type:from
         :in-reply-to:date:cc:message-id:references:to:x-mailer;
        bh=eXqr7QRfBw0+7elWaUesfaIEFNlBvTTAXGncyoY7xYs=;
        b=RfgWXlMfQJG1eULWtHpG4WAHYfyI10Eg2aM7EeyQXsWdWVYUpnvozhdx3JTW+qqnTh
         NfEccjaGScVdHr9laylsY9Ronkyq0cKJ41iPj1fJplsaJCjrjg6kxT77mNi50MLchnIJ
         tUDPBnBIdlFdeoUv7Cgdv9HL05Kj3Lc481+dU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:mime-version:content-type:from:in-reply-to:date:cc
         :message-id:references:to:x-mailer;
        b=TYK3emYwvHfhyjdKZf7wYZF6G4y/3pdR9IuDDYp1fwEBiu5S2NIQhM3ookadJuE+ou
         jNTx4PmvyNq3ArgtFCG1tMxZJLp0TEUG7DgeOGDGKpAbsjAt1SZGmNd968Ce3AWSi5wH
         H8N5fAULfG4NIJCkpzDuA0wtaL0uZaztFcubo=
Received: by 10.227.153.145 with SMTP id k17mr2073697wbw.18.1302260084575;
        Fri, 08 Apr 2011 03:54:44 -0700 (PDT)
Received: from user-46-113-140-7.play-internet.pl ([46.113.140.7])
        by mx.google.com with ESMTPS id y29sm1624163wbd.4.2011.04.08.03.54.42
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 08 Apr 2011 03:54:44 -0700 (PDT)
Subject: Re: Concurrent Issue
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-14--317150447
From: Piotr Pezik <piotr.pezik@gmail.com>
In-Reply-To: <BANLkTi=GNkQwF7PwF6apNsd6MnKMXuL1jw@mail.gmail.com>
Date: Fri, 8 Apr 2011 12:54:40 +0200
Cc: findbestopensource <findbestopensource@gmail.com>
Message-Id: <61B9B5E2-2A5A-4001-B2E0-30072D0F912A@gmail.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com> <BANLkTikO36A9xcLMXqZe8aNeA5=ogvS8Eg@mail.gmail.com> <5D8F33B7-8B0F-45D0-8134-4584023B5AF2@gmail.com> <BANLkTinW9CG9Jp-iVAyPURSeUfcr6oTeeg@mail.gmail.com> <BANLkTi=GNkQwF7PwF6apNsd6MnKMXuL1jw@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-14--317150447
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Thanks for the tips.=20

Does the LIA SearcherManager provide/manage access to the IndexReader as =
well?=20

In other words, is it as easy as:=20

searcher.getIndexReader()

?

I need some of the the Reader methods in addition to the Searcher ones.

Piotr

On 8 Apr 2011, at 12:21, Michael McCandless wrote:

> Actually, you shouldn't need a separate ReadWriteLock.
>=20
> SearcherManager (from LIA2's source code, freely downloadable from
> http://www.manning.com/hatcher3, with Apache License 2.0) handles the
> reference counting (so a reader is never closed while any search from
> other threads are stil in flight), and also handles reopening and
> warming in the background.
>=20
> You pass it either an IndexWriter (in which case it pulls
> near-real-time readers), or a Directory (in which case it opens a
> "normal" IndexReader and then uses reopen).
>=20
> All the app has to do is tell SearcherManager when to reopen.
>=20
> Mike
>=20
> http://blog.mikemccandless.com
>=20
> On Thu, Apr 7, 2011 at 2:08 AM, findbestopensource
> <findbestopensource@gmail.com> wrote:
>> You are trying to access the reader which is already closed by some =
other
>> thread.
>>=20
>> 1. Keep a reference count for the reader you create.
>> 2. Have a common function through which all functions will retrieve =
Reader
>> objects
>> 3. Once the index got changed, create a new reader, do warmup
>> 4. When the new reader is ready then the common function should =
return this
>> for furture request and old reader should go in passive mode.
>> 5. The old reader should be closed when the reference count is zero.
>>=20
>> Regards
>> Aditya
>> www.findbestopensource.com
>>=20
>>=20
>> On Wed, Apr 6, 2011 at 7:20 PM, Piotr Pezik <piotr.pezik@gmail.com> =
wrote:
>>=20
>>> Only to second this explanation.
>>>=20
>>> I got the same exception in a web application with a single =
IndexReader,
>>> accessed by many threads.
>>>=20
>>> The index gets updated every half hour or so, so I closed the old
>>> IndexReader and opened a new one every now and then.
>>>=20
>>> Even though the method for obtaining the IndexReader was =
synchronized, with
>>> tens of thousands of queries a day,
>>> I started getting the AlreadyClosed exception when one thread =
triggered the
>>> closure of the IndexReader which another thread was still using.
>>>=20
>>>=20
>>>=20
>>> Piotr
>>>=20
>>>=20
>>> On 5 Apr 2011, at 15:46, Ian Lea wrote:
>>>=20
>>>> You don't say exactly how you are dealing with the concurrent =
access
>>>> (one shared Reader/Searcher? Each user with own Reader/Searcher?
>>>> Something else?) but the underlying problem is that the reader has
>>>> been closed while something else is still using it.  This can =
easily
>>>> happen in a multi-threaded setup: thread A might close the reader
>>>> while thread B is still using it.
>>>>=20
>>>> Options include
>>>>=20
>>>> not closing the old reader straight away when open a new one, but
>>>> instead stash it somewhere and close it later when you can be
>>>> confident nothing else will be using it.
>>>>=20
>>>> using the SearcherManager class from Lucene In Action 2nd edition, =
or
>>>> an equivalent.
>>>>=20
>>>> catching the AlreadyClosed exception and restarting the search with =
a
>>>> current reader
>>>>=20
>>>>=20
>>>> --
>>>> Ian.
>>>>=20
>>>>=20
>>>> On Tue, Apr 5, 2011 at 12:56 PM, Yogesh Dabhi <ydabhi@asite.com> =
wrote:
>>>>> Hi
>>>>>=20
>>>>>=20
>>>>>=20
>>>>> My application is cluster in jobss application servers & lucene
>>>>> directory was shared.
>>>>>=20
>>>>>=20
>>>>>=20
>>>>> Concurrently 5 user access same lucene directory for searching =
document
>>>>>=20
>>>>> That time I got bellow exception
>>>>>=20
>>>>> org.apache.lucene.store.AlreadyClosedException: this IndexReader =
is
>>>>> closed
>>>>>=20
>>>>>=20
>>>>>=20
>>>>> is there a way to handle such error
>>>>>=20
>>>>>=20
>>>>>=20
>>>>> Thanks & Regards
>>>>>=20
>>>>> Yogesh
>>>>>=20
>>>>>=20
>>>>=20
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>=20
>>>=20
>>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


--Apple-Mail-14--317150447--

From java-user-return-49357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 12:01:11 2011
Return-Path: <java-user-return-49357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45595 invoked from network); 8 Apr 2011 12:01:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 12:01:11 -0000
Received: (qmail 63018 invoked by uid 500); 8 Apr 2011 12:01:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62977 invoked by uid 500); 8 Apr 2011 12:01:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62968 invoked by uid 99); 8 Apr 2011 12:01:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 12:01:06 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 12:01:00 +0000
Received: by fxm7 with SMTP id 7so3761573fxm.35
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 05:00:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=7A+CmVz/S3pL3ZRiWa20/FQhhjTh9Wj06O/v6qT0u0U=;
        b=i67V7HxCfifMmmlUikZfVeuL2l1JConD/0nzOmK/FxPcQ5jMR4SRQ/akXyzQ5eGX8H
         7iEchBmFU2ioS0fbiTUz4ahOaxlGwGrE5JjWPam/7TWLtd4JLurMGiMyCi35OJLbWx0q
         NES3KoUVoeuadgHwLxz90WwfEk5L5GG1RwTZ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ufraQujLVR/gUCBiFcFiC9MWrRzgRsVsxpI9uhyqrXP0zjLpIciVBSG5r4RyeP11B9
         fhhRkgUY4Y3Ecqd656IchQXXrz9kekUX5Yu5YJW7AXowdQS4B4zKy54RGrJohoL13OUn
         sRsU+AaQDpbSlIY4T1KZUpXCfp9M8UbC02Ozk=
MIME-Version: 1.0
Received: by 10.223.1.73 with SMTP id 9mr2222382fae.44.1302264038831; Fri, 08
 Apr 2011 05:00:38 -0700 (PDT)
Received: by 10.223.16.215 with HTTP; Fri, 8 Apr 2011 05:00:38 -0700 (PDT)
Date: Fri, 8 Apr 2011 14:00:38 +0200
Message-ID: <BANLkTik=Hk5kNcAuTv=tiyv0Ch404sBd4w@mail.gmail.com>
Subject: Indexing 1 doc only ?
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a8997036ca04a066f96d

--20cf3054a8997036ca04a066f96d
Content-Type: text/plain; charset=ISO-8859-1

Is there a way to update only 1 doc in the index rather than index the
entire collection everytime there is a change ?

Given a specific field (I use as ID) of my indexed doc, how can I select it
and update its other fields ?

thanks

--20cf3054a8997036ca04a066f96d--

From java-user-return-49358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 12:20:18 2011
Return-Path: <java-user-return-49358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7254 invoked from network); 8 Apr 2011 12:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 12:20:18 -0000
Received: (qmail 92193 invoked by uid 500); 8 Apr 2011 12:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92151 invoked by uid 500); 8 Apr 2011 12:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92143 invoked by uid 99); 8 Apr 2011 12:20:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 12:20:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of danica.damljanovic@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 12:20:09 +0000
Received: by vxa37 with SMTP id 37so4067790vxa.35
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 05:19:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=lVSmv0Q31PMvhL/R4qY6UqsY211AaupmiUgwcU8e/vY=;
        b=HA57jHOdNQh+0OkVCmUX/MvEvl5lOAinOQo4Zx2x+jt9aI5VPMDYVOcOH+m4k93+59
         yIA/dUP80f36wsPVgZ8Q3y8HEcNffTshYpr0vGNy2EXEIpmDzIdnCLnPTeG0g6PWwzjy
         +PpvqqTbR1nscKVzdq6lRBxdKRzs/YpMyiwic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=T2sVH+WTDqfMpEr5A5qsscyh/BakYuJUKcUIHryL8Rs+oj2517Fh1rkz6JCneL9qjY
         MlB5i2QrTqqh0DxUyQAX5+kI/Ih/62qeNuQSglB/whbOV3O8nauzvoe7v7JwkVL49TTW
         1RuMDqek76WBwLwNpdMnrZwUPRQHbg/criq8w=
MIME-Version: 1.0
Received: by 10.52.94.228 with SMTP id df4mr3044186vdb.239.1302265188749; Fri,
 08 Apr 2011 05:19:48 -0700 (PDT)
Received: by 10.52.158.198 with HTTP; Fri, 8 Apr 2011 05:19:48 -0700 (PDT)
In-Reply-To: <BANLkTik=Hk5kNcAuTv=tiyv0Ch404sBd4w@mail.gmail.com>
References: <BANLkTik=Hk5kNcAuTv=tiyv0Ch404sBd4w@mail.gmail.com>
Date: Fri, 8 Apr 2011 13:19:48 +0100
Message-ID: <BANLkTim1pfDLjt8M5XBNf-EmDOuB1em82g@mail.gmail.com>
Subject: Re: Indexing 1 doc only ?
From: Danica Damljanovic <danica.damljanovic@gmail.com>
To: java-user@lucene.apache.org
Cc: Patrick Diviacco <patrick.diviacco@gmail.com>
Content-Type: multipart/alternative; boundary=20cf3071c8a4fa919b04a0673dcb
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3071c8a4fa919b04a0673dcb
Content-Type: text/plain; charset=ISO-8859-1

If I am not mistaken Lucene Q&A mentions that you  can update a document by
1. deleting it 2. adding the new one. Given that you have the ID this looks
straightforward.

Danica

On 8 April 2011 13:00, Patrick Diviacco <patrick.diviacco@gmail.com> wrote:

> Is there a way to update only 1 doc in the index rather than index the
> entire collection everytime there is a change ?
>
> Given a specific field (I use as ID) of my indexed doc, how can I select it
> and update its other fields ?
>
> thanks
>



-- 
Best,
Danica Damljanovic
-- 
Research Associate
GATE team http://gate.ac.uk
Natural Language Processing Group
University of Sheffield
http://www.dcs.shef.ac.uk/~danica

--20cf3071c8a4fa919b04a0673dcb--

From java-user-return-49359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 12:55:42 2011
Return-Path: <java-user-return-49359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38016 invoked from network); 8 Apr 2011 12:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 12:55:42 -0000
Received: (qmail 26934 invoked by uid 500); 8 Apr 2011 12:55:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26895 invoked by uid 500); 8 Apr 2011 12:55:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26887 invoked by uid 99); 8 Apr 2011 12:55:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 12:55:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,T_FRT_BELOW2
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 12:55:35 +0000
Received: by wyb40 with SMTP id 40so4648632wyb.35
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 05:55:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.10.213 with SMTP id q21mr2227993wbq.144.1302267313154;
 Fri, 08 Apr 2011 05:55:13 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Fri, 8 Apr 2011 05:55:13 -0700 (PDT)
In-Reply-To: <61B9B5E2-2A5A-4001-B2E0-30072D0F912A@gmail.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E78@indiaserv01.asite.asitehq.com>
	<BANLkTikO36A9xcLMXqZe8aNeA5=ogvS8Eg@mail.gmail.com>
	<5D8F33B7-8B0F-45D0-8134-4584023B5AF2@gmail.com>
	<BANLkTinW9CG9Jp-iVAyPURSeUfcr6oTeeg@mail.gmail.com>
	<BANLkTi=GNkQwF7PwF6apNsd6MnKMXuL1jw@mail.gmail.com>
	<61B9B5E2-2A5A-4001-B2E0-30072D0F912A@gmail.com>
Date: Fri, 8 Apr 2011 08:55:13 -0400
Message-ID: <BANLkTi=VTCbUUXhYbP9yAwW6=sht=hYZeQ@mail.gmail.com>
Subject: Re: Concurrent Issue
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Piotr Pezik <piotr.pezik@gmail.com>, 
	findbestopensource <findbestopensource@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Yes, once you get the searcher you're free to access its underlying
IndexReader.  Just don't close it!

And, be sure you call SearcherManager.release in a finally clause!
Else the reader will not be closed...

Mike

http://blog.mikemccandless.com

On Fri, Apr 8, 2011 at 6:54 AM, Piotr Pezik <piotr.pezik@gmail.com> wrote:
> Thanks for the tips.
>
> Does the LIA SearcherManager provide/manage access to the IndexReader as =
well?
>
> In other words, is it as easy as:
>
> searcher.getIndexReader()
>
> ?
>
> I need some of the the Reader methods in addition to the Searcher ones.
>
> Piotr
>
> On 8 Apr 2011, at 12:21, Michael McCandless wrote:
>
>> Actually, you shouldn't need a separate ReadWriteLock.
>>
>> SearcherManager (from LIA2's source code, freely downloadable from
>> http://www.manning.com/hatcher3, with Apache License 2.0) handles the
>> reference counting (so a reader is never closed while any search from
>> other threads are stil in flight), and also handles reopening and
>> warming in the background.
>>
>> You pass it either an IndexWriter (in which case it pulls
>> near-real-time readers), or a Directory (in which case it opens a
>> "normal" IndexReader and then uses reopen).
>>
>> All the app has to do is tell SearcherManager when to reopen.
>>
>> Mike
>>
>> http://blog.mikemccandless.com
>>
>> On Thu, Apr 7, 2011 at 2:08 AM, findbestopensource
>> <findbestopensource@gmail.com> wrote:
>>> You are trying to access the reader which is already closed by some oth=
er
>>> thread.
>>>
>>> 1. Keep a reference count for the reader you create.
>>> 2. Have a common function through which all functions will retrieve Rea=
der
>>> objects
>>> 3. Once the index got changed, create a new reader, do warmup
>>> 4. When the new reader is ready then the common function should return =
this
>>> for furture request and old reader should go in passive mode.
>>> 5. The old reader should be closed when the reference count is zero.
>>>
>>> Regards
>>> Aditya
>>> www.findbestopensource.com
>>>
>>>
>>> On Wed, Apr 6, 2011 at 7:20 PM, Piotr Pezik <piotr.pezik@gmail.com> wro=
te:
>>>
>>>> Only to second this explanation.
>>>>
>>>> I got the same exception in a web application with a single IndexReade=
r,
>>>> accessed by many threads.
>>>>
>>>> The index gets updated every half hour or so, so I closed the old
>>>> IndexReader and opened a new one every now and then.
>>>>
>>>> Even though the method for obtaining the IndexReader was synchronized,=
 with
>>>> tens of thousands of queries a day,
>>>> I started getting the AlreadyClosed exception when one thread triggere=
d the
>>>> closure of the IndexReader which another thread was still using.
>>>>
>>>>
>>>>
>>>> Piotr
>>>>
>>>>
>>>> On 5 Apr 2011, at 15:46, Ian Lea wrote:
>>>>
>>>>> You don't say exactly how you are dealing with the concurrent access
>>>>> (one shared Reader/Searcher? Each user with own Reader/Searcher?
>>>>> Something else?) but the underlying problem is that the reader has
>>>>> been closed while something else is still using it. =A0This can easil=
y
>>>>> happen in a multi-threaded setup: thread A might close the reader
>>>>> while thread B is still using it.
>>>>>
>>>>> Options include
>>>>>
>>>>> not closing the old reader straight away when open a new one, but
>>>>> instead stash it somewhere and close it later when you can be
>>>>> confident nothing else will be using it.
>>>>>
>>>>> using the SearcherManager class from Lucene In Action 2nd edition, or
>>>>> an equivalent.
>>>>>
>>>>> catching the AlreadyClosed exception and restarting the search with a
>>>>> current reader
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>>
>>>>> On Tue, Apr 5, 2011 at 12:56 PM, Yogesh Dabhi <ydabhi@asite.com> wrot=
e:
>>>>>> Hi
>>>>>>
>>>>>>
>>>>>>
>>>>>> My application is cluster in jobss application servers & lucene
>>>>>> directory was shared.
>>>>>>
>>>>>>
>>>>>>
>>>>>> Concurrently 5 user access same lucene directory for searching docum=
ent
>>>>>>
>>>>>> That time I got bellow exception
>>>>>>
>>>>>> org.apache.lucene.store.AlreadyClosedException: this IndexReader is
>>>>>> closed
>>>>>>
>>>>>>
>>>>>>
>>>>>> is there a way to handle such error
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks & Regards
>>>>>>
>>>>>> Yogesh
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 14:44:43 2011
Return-Path: <java-user-return-49360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86240 invoked from network); 8 Apr 2011 14:44:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 14:44:43 -0000
Received: (qmail 83121 invoked by uid 500); 8 Apr 2011 14:44:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83073 invoked by uid 500); 8 Apr 2011 14:44:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83065 invoked by uid 99); 8 Apr 2011 14:44:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 14:44:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.bamford@talktalk.net designates 62.24.128.243 as permitted sender)
Received: from [62.24.128.243] (HELO out1.ip07ir2.opaltelecom.net) (62.24.128.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 14:44:30 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ArAHAGMen03O3uJ3/2dsb2JhbACZAIwsgWDBRoVtBA
X-IronPort-AV: E=Sophos;i="4.63,323,1299456000"; 
   d="scan'208";a="485711182"
Received: from frr3-l27.sis.aol.com (HELO FRR3-L27) ([206.222.226.119])
  by out1.ip07ir2.opaltelecom.net with ESMTP; 08 Apr 2011 15:44:09 +0100
To: java-user@lucene.apache.org
Subject: Rewriting an index without losing 'hidden' data
Date: Fri, 08 Apr 2011 10:44:09 -0400
X-MB-Message-Source: WebUI
X-MB-Message-Type: User
MIME-Version: 1.0
From: Chris Bamford <chris.bamford@talktalk.net>
Content-Type: multipart/alternative; 
 boundary="--------MB_8CDC4128DEA8B31_AF8_1E88E_FRR3-L27.sysops.aol.com"
X-Mailer: Webmail 33490-STANDARD
Received: from 135.196.24.203 by FRR3-L27.sysops.aol.com (206.222.226.119) with HTTP (WebMailUI); Fri, 08 Apr 2011 10:44:09 -0400
Message-Id: <8CDC4128DA32269-AF8-8189@FRR3-L27.sysops.aol.com>
X-Virus-Checked: Checked by ClamAV on apache.org

----------MB_8CDC4128DEA8B31_AF8_1E88E_FRR3-L27.sysops.aol.com
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

Hi,=20=0A=0AI=20recently=20discovered=20that=20I=20need=20to=20add=20a=20single=20=
field=20to=20every=20document=20in=20an=20existing=20(very=20large)=20index.=20=20=
Reindexing=20from=20scratch=20is=20not=20an=20option=20I=20want=20to=20consider=20=
right=20now,=20so=20I=20wrote=20a=20utility=20to=20add=20the=20field=20by=20rewr=
iting=20the=20index=20-=20but=20this=20seemed=20to=20lose=20some=20of=20the=20fi=
elds=20(indexed,=20but=20not=20stored?).=20=20In=20fact,=20it=20shrunk=20a=2012G=
b=20index=20down=20to=204.2Gb=20-=20clearly=20not=20what=20I=20wanted.=20=20:-)=0A=
What=20am=20I=20doing=20wrong?=0A=0AMy=20technique=20was:=0A=0A=20=20Analyzer=20=
analyser=20=3D=20new=20StandardAnalyzer();=0A=20=20IndexSearcher=20searcher=20=3D=
=20new=20IndexSearcher(indexPath);=0A=20=20IndexWriter=20indexWriter=20=3D=20new=
=20IndexWriter(indexPath,=20analyser);=0A=20=20Hits=20hits=20=3D=20matchAllDocum=
entsFromIndex(searcher);=0A=0A=20=20for=20(int=20i=3D0;=20i=20<=20hits.length();=
=20i++)=20{=0A=20=20=20=20=20=20=20=20=20=20Document=20doc=20=3D=20hits.doc(i);=0A=
=20=20=20=20=20=20=20=20=20=20String=20id=20=3D=20doc.get("unique-id");=0A=20=20=
=20=20=20=20=20=20=20=20doc.add(new=20Field("newField",=20newValue,=20Field.Stor=
e.YES,=20Field.Index.UN_TOKENIZED));=0A=20=20=20=20=20=20=20=20=20=20indexWriter=
.updateDocument(new=20Term("unique-id",=20id),=20doc);=0A=20=20}=0A=0A=20=20sear=
cher.close();=0A=20=20indexWriter.optimize();=20=0A=20=20indexWriter.close();=0A=
=0ANote=20that=20my=20matchAllDocumentsFromIndex()=20does=20get=20the=20right=20=
number=20of=20hits=20from=20the=20index=20-=20i.e.=20the=20same=20number=20as=20=
held=20in=20the=20index.=0A=0A=0A=20Thanks=20for=20any=20ideas!=0ABTW=20I=20am=20=
using=20Lucene=202.3.2.=0A=0A-=20Chris=0A=0A=20=0A=0A=0A
----------MB_8CDC4128DEA8B31_AF8_1E88E_FRR3-L27.sysops.aol.com--


From java-user-return-49361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 14:48:27 2011
Return-Path: <java-user-return-49361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16327 invoked from network); 8 Apr 2011 14:48:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 14:48:26 -0000
Received: (qmail 94118 invoked by uid 500); 8 Apr 2011 14:48:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94068 invoked by uid 500); 8 Apr 2011 14:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94060 invoked by uid 99); 8 Apr 2011 14:48:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 14:48:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of krjeschke@omniti.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 14:48:18 +0000
Received: by wyb40 with SMTP id 40so4796956wyb.35
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 07:47:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.61.9 with SMTP id v9mr2036717wec.67.1302274078103; Fri, 08
 Apr 2011 07:47:58 -0700 (PDT)
Received: by 10.216.242.141 with HTTP; Fri, 8 Apr 2011 07:47:58 -0700 (PDT)
Date: Fri, 8 Apr 2011 10:47:58 -0400
Message-ID: <BANLkTimj8juunfGYp71R2vEoNfuyuarQxA@mail.gmail.com>
Subject: Surge 2011 CFP Deadline Extended
From: Katherine Jeschke <krjeschke@omniti.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0ce0d178d35ae204a0694f24
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0ce0d178d35ae204a0694f24
Content-Type: text/plain; charset=ISO-8859-1

OmniTI is pleased to announce that the CFP deadline for Surge 2011, the
Scalability and Performance Conference, (Baltimore: Sept 28-30, 2011) has
been extended to 23:59:59 EDT, April 17, 2011. The event focuses upon case
studies that demonstrate successes (and failures) in Web applications and
Internet architectures. New this year: Hack Day and Unconference on
September 28th.

For information about topics: http://omniti.com/surge/2011. Get inspired by
the 2010 sessions, now online at (http://omniti.com/surge/2010)

2010 attendees compared Surge to the early days of Velocity, and our
speakers received 3.5-4 out of 4 stars for quality of presentation and
quality of content! Nearly 90% of first-year attendees are planning to come
again in 2011.

For more information about the CFP or sponsorship of the event, please
contact us: surge (AT) omniti (DOT) com.


-- 
Katherine Jeschke
Marketing Director
OmniTI Computer Consulting, Inc.
7070 Samuel Morse Drive, Ste.150
Columbia, MD 21046
O: 410/872-4910, 222
C: 443/643-6140
omniti.com
circonus.com

--000e0ce0d178d35ae204a0694f24--

From java-user-return-49362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 14:58:21 2011
Return-Path: <java-user-return-49362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33111 invoked from network); 8 Apr 2011 14:58:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 14:58:21 -0000
Received: (qmail 11856 invoked by uid 500); 8 Apr 2011 14:58:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11812 invoked by uid 500); 8 Apr 2011 14:58:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11801 invoked by uid 99); 8 Apr 2011 14:58:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 14:58:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 14:58:13 +0000
Received: by qyk30 with SMTP id 30so3025236qyk.14
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 07:57:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=UhRx1gxPH3HXdYMRcTOsEjQ/WBYjpu370ZOYUoRdwec=;
        b=Yarj4CAW92ngE1Qlc/uvaBPtHFZzJ3V4XVGlD9kIfHsfmXPL6Xc8/aAUaJsqC1P/ZC
         8qJm2LHitw7WdGz+LjoeDPFXNeeuewmqqdYUTF/tSVxOdor4QRFD5nf76hcnyI49zab4
         kxYmD4bx3S7pyFYtaiEl+nN4onemHkX5ADDxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ZlogtotKuqwnHTL9CrWPL3VDbQLEcoLBVbJOVrjAwCqa7agfdWheFfZT1RJrxZU/wX
         rirz2HxDAN8T2FDGh40Zf+Qzb4aRjRoGib6+hElVX9uY8ibTz924dJob1d2xV02CV1VN
         5G/hA5kk8UN7DBbEwD0S7gdcdyDVj8GYbJsFA=
MIME-Version: 1.0
Received: by 10.229.106.34 with SMTP id v34mr1907941qco.111.1302274672107;
 Fri, 08 Apr 2011 07:57:52 -0700 (PDT)
Received: by 10.229.69.158 with HTTP; Fri, 8 Apr 2011 07:57:52 -0700 (PDT)
Date: Fri, 8 Apr 2011 07:57:52 -0700
Message-ID: <BANLkTiku=8jYOM3U8kZaFnyNXucaE=K8pA@mail.gmail.com>
Subject: Lucene Util question
From: Jason Rutherglen <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Is http://code.google.com/a/apache-extras.org/p/luceneutil/ designed
to replace or augment the contrib benchmark?  For example it looks
like SearchPerfTest would be useful for executing queries over a
pre-built index.  Though there's no indexing tool in the code tree?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 15:01:30 2011
Return-Path: <java-user-return-49363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41362 invoked from network); 8 Apr 2011 15:01:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 15:01:27 -0000
Received: (qmail 20055 invoked by uid 500); 8 Apr 2011 15:01:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20013 invoked by uid 500); 8 Apr 2011 15:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20005 invoked by uid 99); 8 Apr 2011 15:01:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 15:01:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 15:01:19 +0000
Received: by iym1 with SMTP id 1so5045635iym.35
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 08:00:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=6sRWhyphSqjbps5HeKHN2MRwio+Mi+ZTgBCJXou+arc=;
        b=Fe76z1kpKtPhN442chmZPPiMh9vyz/cfNLvZoXISSdIkdsNKruc+3Z69+m3xAZ+AlP
         v9wz5TWNEGVOBZECLxE/9oyrnIujVQM0WYSBt6I9cS9lhmwpvlOjMxYjFNqM0lDuhtJV
         vCLfDzMuKSuIQKa62yxIUWMSfQwoVnVuhxkiY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=sGUgYyYM0pLfAu7gR59KczCv0rBGf4GH7lTTBkZ+A5Vz3ToQjKokTAAHAlLtCdx7GJ
         w1+SUtTg2su3oHYOKwNCYovjgLdxdLwh7NKbJQBiFlekJT/TDDmx9WrusXXVUNIUxEzu
         NmQKB+m/RG1XR/Bh4IYQDtmY+JHtdDIEM2Fcs=
Received: by 10.231.117.37 with SMTP id o37mr2145085ibq.184.1302274859245;
 Fri, 08 Apr 2011 08:00:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.205.143 with HTTP; Fri, 8 Apr 2011 08:00:39 -0700 (PDT)
In-Reply-To: <8CDC4128DA32269-AF8-8189@FRR3-L27.sysops.aol.com>
References: <8CDC4128DA32269-AF8-8189@FRR3-L27.sysops.aol.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 8 Apr 2011 16:00:39 +0100
Message-ID: <BANLkTi=nUatSA3Y78NX88KrO39BZSvyNFg@mail.gmail.com>
Subject: Re: Rewriting an index without losing 'hidden' data
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Unfortunately you just can't do this.  Might be possible if all fields
were stored but evidently they are not in your index.  For unstored
fields, the Document object will not contain the data that was passed
in when the doc was originally added.

I believe there might be a way of recreating some of the missing data
via TermFreqVector but that has always sounded dodgy and lossy to me.

The safest way is to reindex, however painful it might be.  Maybe you
could take the opportunity to upgrade lucene at the same time!


--
Ian.


On Fri, Apr 8, 2011 at 3:44 PM, Chris Bamford
<chris.bamford@talktalk.net> wrote:
> Hi,
>
> I recently discovered that I need to add a single field to every document=
 in an existing (very large) index. =A0Reindexing from scratch is not an op=
tion I want to consider right now, so I wrote a utility to add the field by=
 rewriting the index - but this seemed to lose some of the fields (indexed,=
 but not stored?). =A0In fact, it shrunk a 12Gb index down to 4.2Gb - clear=
ly not what I wanted. =A0:-)
> What am I doing wrong?
>
> My technique was:
>
> =A0Analyzer analyser =3D new StandardAnalyzer();
> =A0IndexSearcher searcher =3D new IndexSearcher(indexPath);
> =A0IndexWriter indexWriter =3D new IndexWriter(indexPath, analyser);
> =A0Hits hits =3D matchAllDocumentsFromIndex(searcher);
>
> =A0for (int i=3D0; i < hits.length(); i++) {
> =A0 =A0 =A0 =A0 =A0Document doc =3D hits.doc(i);
> =A0 =A0 =A0 =A0 =A0String id =3D doc.get("unique-id");
> =A0 =A0 =A0 =A0 =A0doc.add(new Field("newField", newValue, Field.Store.YE=
S, Field.Index.UN_TOKENIZED));
> =A0 =A0 =A0 =A0 =A0indexWriter.updateDocument(new Term("unique-id", id), =
doc);
> =A0}
>
> =A0searcher.close();
> =A0indexWriter.optimize();
> =A0indexWriter.close();
>
> Note that my matchAllDocumentsFromIndex() does get the right number of hi=
ts from the index - i.e. the same number as held in the index.
>
>
> =A0Thanks for any ideas!
> BTW I am using Lucene 2.3.2.
>
> - Chris
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 15:46:42 2011
Return-Path: <java-user-return-49364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 906 invoked from network); 8 Apr 2011 15:46:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 15:46:42 -0000
Received: (qmail 1926 invoked by uid 500); 8 Apr 2011 15:46:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1886 invoked by uid 500); 8 Apr 2011 15:46:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1878 invoked by uid 99); 8 Apr 2011 15:46:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 15:46:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.bamford@talktalk.net designates 62.24.128.239 as permitted sender)
Received: from [62.24.128.239] (HELO out1.ip03ir2.opaltelecom.net) (62.24.128.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 15:46:32 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ap0EACctn03O3uJ3/2dsb2JhbACCX6JNgWDAT4VtBJR1
X-IronPort-AV: E=Sophos;i="4.63,324,1299456000"; 
   d="scan'208";a="343566807"
Received: from frr3-l27.sis.aol.com (HELO FRR3-L27) ([206.222.226.119])
  by out1.ip03ir2.opaltelecom.net with ESMTP; 08 Apr 2011 16:46:10 +0100
To: java-user@lucene.apache.org
Subject: Re: Rewriting an index without losing 'hidden' data
Date: Fri, 08 Apr 2011 11:46:10 -0400
In-Reply-To: <BANLkTi=nUatSA3Y78NX88KrO39BZSvyNFg@mail.gmail.com>
X-MB-Message-Source: WebUI
MIME-Version: 1.0
From: Chris Bamford <chris.bamford@talktalk.net>
X-MB-Message-Type: User
Content-Type: multipart/alternative; 
 boundary="--------MB_8CDC41B37A16FCD_AF8_1EBD2_FRR3-L27.sysops.aol.com"
X-Mailer: Webmail 33490-STANDARD
Received: from 135.196.24.203 by FRR3-L27.sysops.aol.com (206.222.226.119) with HTTP (WebMailUI); Fri, 08 Apr 2011 11:46:10 -0400
Message-Id: <8CDC41B37508195-AF8-8275@FRR3-L27.sysops.aol.com>

----------MB_8CDC41B37A16FCD_AF8_1EBD2_FRR3-L27.sysops.aol.com
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

=0A=20Thanks=20Ian,=20=20its=20as=20I=20feared!=0AI=20shall=20have=20to=20reinde=
x=20(and=20upgrade!).=0A=0ACheers,=0A=0A-=20Chris=0A=0A=20=0A=0A=0A=20=0A=0A=20=0A=
=0A-----Original=20Message-----=0AFrom:=20Ian=20Lea=20<ian.lea@gmail.com>=0ATo:=20=
java-user@lucene.apache.org=0ASent:=20Fri,=208=20Apr=202011=2016:00=0ASubject:=20=
Re:=20Rewriting=20an=20index=20without=20losing=20'hidden'=20data=0A=0A=0AUnfort=
unately=20you=20just=20can't=20do=20this.=20=20Might=20be=20possible=20if=20all=20=
fields=0Awere=20stored=20but=20evidently=20they=20are=20not=20in=20your=20index.=
=20=20For=20unstored=0Afields,=20the=20Document=20object=20will=20not=20contain=20=
the=20data=20that=20was=20passed=0Ain=20when=20the=20doc=20was=20originally=20ad=
ded.=0A=0AI=20believe=20there=20might=20be=20a=20way=20of=20recreating=20some=20=
of=20the=20missing=20data=0Avia=20TermFreqVector=20but=20that=20has=20always=20s=
ounded=20dodgy=20and=20lossy=20to=20me.=0A=0AThe=20safest=20way=20is=20to=20rein=
dex,=20however=20painful=20it=20might=20be.=20=20Maybe=20you=0Acould=20take=20th=
e=20opportunity=20to=20upgrade=20lucene=20at=20the=20same=20time!=0A=0A=0A--=0AI=
an.=0A=0A=0AOn=20Fri,=20Apr=208,=202011=20at=203:44=20PM,=20Chris=20Bamford=0A<c=
hris.bamford@talktalk.net>=20wrote:=0A>=20Hi,=0A>=0A>=20I=20recently=20discovere=
d=20that=20I=20need=20to=20add=20a=20single=20field=20to=20every=20document=20in=
=20=0Aan=20existing=20(very=20large)=20index.=20=20Reindexing=20from=20scratch=20=
is=20not=20an=20option=20I=20want=20=0Ato=20consider=20right=20now,=20so=20I=20w=
rote=20a=20utility=20to=20add=20the=20field=20by=20rewriting=20the=20=0Aindex=20=
-=20but=20this=20seemed=20to=20lose=20some=20of=20the=20fields=20(indexed,=20but=
=20not=20stored?).=20=0A=20In=20fact,=20it=20shrunk=20a=2012Gb=20index=20down=20=
to=204.2Gb=20-=20clearly=20not=20what=20I=20wanted.=20=20:-)=0A>=20What=20am=20I=
=20doing=20wrong?=0A>=0A>=20My=20technique=20was:=0A>=0A>=20=20Analyzer=20analys=
er=20=3D=20new=20StandardAnalyzer();=0A>=20=20IndexSearcher=20searcher=20=3D=20n=
ew=20IndexSearcher(indexPath);=0A>=20=20IndexWriter=20indexWriter=20=3D=20new=20=
IndexWriter(indexPath,=20analyser);=0A>=20=20Hits=20hits=20=3D=20matchAllDocumen=
tsFromIndex(searcher);=0A>=0A>=20=20for=20(int=20i=3D0;=20i=20<=20hits.length();=
=20i++)=20{=0A>=20=20=20=20=20=20=20=20=20=20Document=20doc=20=3D=20hits.doc(i);=
=0A>=20=20=20=20=20=20=20=20=20=20String=20id=20=3D=20doc.get("unique-id");=0A>=20=
=20=20=20=20=20=20=20=20=20doc.add(new=20Field("newField",=20newValue,=20Field.S=
tore.YES,=20=0AField.Index.UN_TOKENIZED));=0A>=20=20=20=20=20=20=20=20=20=20inde=
xWriter.updateDocument(new=20Term("unique-id",=20id),=20doc);=0A>=20=20}=0A>=0A>=
=20=20searcher.close();=0A>=20=20indexWriter.optimize();=0A>=20=20indexWriter.cl=
ose();=0A>=0A>=20Note=20that=20my=20matchAllDocumentsFromIndex()=20does=20get=20=
the=20right=20number=20of=20hits=20=0Afrom=20the=20index=20-=20i.e.=20the=20same=
=20number=20as=20held=20in=20the=20index.=0A>=0A>=0A>=20=20Thanks=20for=20any=20=
ideas!=0A>=20BTW=20I=20am=20using=20Lucene=202.3.2.=0A>=0A>=20-=20Chris=0A>=0A>=0A=
>=0A>=0A>=0A=0A-----------------------------------------------------------------=
----=0ATo=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org=0AF=
or=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.org=0A=0A=0A=
=20=0A
----------MB_8CDC41B37A16FCD_AF8_1EBD2_FRR3-L27.sysops.aol.com--


From java-user-return-49365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 16:09:24 2011
Return-Path: <java-user-return-49365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87845 invoked from network); 8 Apr 2011 16:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 16:09:24 -0000
Received: (qmail 51253 invoked by uid 500); 8 Apr 2011 16:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51218 invoked by uid 500); 8 Apr 2011 16:09:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51210 invoked by uid 99); 8 Apr 2011 16:09:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 16:09:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 16:09:16 +0000
Received: by wyb40 with SMTP id 40so4912176wyb.35
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 09:08:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.72.7 with SMTP id k7mr2390127wbj.115.1302278935531; Fri,
 08 Apr 2011 09:08:55 -0700 (PDT)
Received: by 10.227.144.131 with HTTP; Fri, 8 Apr 2011 09:08:55 -0700 (PDT)
In-Reply-To: <BANLkTi=nUatSA3Y78NX88KrO39BZSvyNFg@mail.gmail.com>
References: <8CDC4128DA32269-AF8-8189@FRR3-L27.sysops.aol.com>
	<BANLkTi=nUatSA3Y78NX88KrO39BZSvyNFg@mail.gmail.com>
Date: Fri, 8 Apr 2011 12:08:55 -0400
Message-ID: <BANLkTik+kGrE35Fhs7xWiFi6qeEK=AP1dQ@mail.gmail.com>
Subject: Re: Rewriting an index without losing 'hidden' data
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Ian Lea <ian.lea@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortunately, updateDocument replaces the *entire* previous document
with the new one.

The ability to update a single indexed field (either replace that
field entirely, or, change only certain token occurrences within it),
while leaving all other indexed fields in the document unaffected, has
been a long requested big missing feature in Lucene.  We call it
"incremental field updates".

There have been some healthy discussions on the dev list, that have
worked out a good rough design (eg see
http://markmail.org/thread/lsfjhpiblzymkfcn).  Also, recent
improvements in how buffered deletes are handled should make it alot
easier for updates to "piggyback" using that same packet stream
approach.  So... I think there is hope some day that we'll get this
into Lucene.

Mike

http://blog.mikemccandless.com

On Fri, Apr 8, 2011 at 11:00 AM, Ian Lea <ian.lea@gmail.com> wrote:
> Unfortunately you just can't do this. =A0Might be possible if all fields
> were stored but evidently they are not in your index. =A0For unstored
> fields, the Document object will not contain the data that was passed
> in when the doc was originally added.
>
> I believe there might be a way of recreating some of the missing data
> via TermFreqVector but that has always sounded dodgy and lossy to me.
>
> The safest way is to reindex, however painful it might be. =A0Maybe you
> could take the opportunity to upgrade lucene at the same time!
>
>
> --
> Ian.
>
>
> On Fri, Apr 8, 2011 at 3:44 PM, Chris Bamford
> <chris.bamford@talktalk.net> wrote:
>> Hi,
>>
>> I recently discovered that I need to add a single field to every documen=
t in an existing (very large) index. =A0Reindexing from scratch is not an o=
ption I want to consider right now, so I wrote a utility to add the field b=
y rewriting the index - but this seemed to lose some of the fields (indexed=
, but not stored?). =A0In fact, it shrunk a 12Gb index down to 4.2Gb - clea=
rly not what I wanted. =A0:-)
>> What am I doing wrong?
>>
>> My technique was:
>>
>> =A0Analyzer analyser =3D new StandardAnalyzer();
>> =A0IndexSearcher searcher =3D new IndexSearcher(indexPath);
>> =A0IndexWriter indexWriter =3D new IndexWriter(indexPath, analyser);
>> =A0Hits hits =3D matchAllDocumentsFromIndex(searcher);
>>
>> =A0for (int i=3D0; i < hits.length(); i++) {
>> =A0 =A0 =A0 =A0 =A0Document doc =3D hits.doc(i);
>> =A0 =A0 =A0 =A0 =A0String id =3D doc.get("unique-id");
>> =A0 =A0 =A0 =A0 =A0doc.add(new Field("newField", newValue, Field.Store.Y=
ES, Field.Index.UN_TOKENIZED));
>> =A0 =A0 =A0 =A0 =A0indexWriter.updateDocument(new Term("unique-id", id),=
 doc);
>> =A0}
>>
>> =A0searcher.close();
>> =A0indexWriter.optimize();
>> =A0indexWriter.close();
>>
>> Note that my matchAllDocumentsFromIndex() does get the right number of h=
its from the index - i.e. the same number as held in the index.
>>
>>
>> =A0Thanks for any ideas!
>> BTW I am using Lucene 2.3.2.
>>
>> - Chris
>>
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 08 16:20:10 2011
Return-Path: <java-user-return-49366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7947 invoked from network); 8 Apr 2011 16:20:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 8 Apr 2011 16:20:10 -0000
Received: (qmail 68671 invoked by uid 500); 8 Apr 2011 16:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68631 invoked by uid 500); 8 Apr 2011 16:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68623 invoked by uid 99); 8 Apr 2011 16:20:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 16:20:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Apr 2011 16:20:01 +0000
Received: by yia28 with SMTP id 28so1935556yia.35
        for <java-user@lucene.apache.org>; Fri, 08 Apr 2011 09:19:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.81.112 with SMTP id l76mr2990719yhe.481.1302279579857;
 Fri, 08 Apr 2011 09:19:39 -0700 (PDT)
Received: by 10.236.103.146 with HTTP; Fri, 8 Apr 2011 09:19:39 -0700 (PDT)
In-Reply-To: <BANLkTiku=8jYOM3U8kZaFnyNXucaE=K8pA@mail.gmail.com>
References: <BANLkTiku=8jYOM3U8kZaFnyNXucaE=K8pA@mail.gmail.com>
Date: Fri, 8 Apr 2011 12:19:39 -0400
Message-ID: <BANLkTimk43xarMJtfoFpkq11_++G9aVGsw@mail.gmail.com>
Subject: Re: Lucene Util question
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Jason Rutherglen <jason.rutherglen@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It augments contrib/benchmark.

It's really more singularly focused on specific benchmarks for
indexing, searching, NRT performance, and you obviously have to know
Python to make use of it.

Whereas contrib/benchmark is far more powerful -- the algorithms
language give you lots of freedom on what to "run", plus, it can do
other things beyond benchmarking, eg evaluate search relevance, create
line files, do deletions, etc.

It does have an indexer tool, here:
http://code.google.com/a/apache-extras.org/p/luceneutil/source/browse/perf/=
Indexer.java

Mike

http://blog.mikemccandless.com

On Fri, Apr 8, 2011 at 10:57 AM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> Is http://code.google.com/a/apache-extras.org/p/luceneutil/ designed
> to replace or augment the contrib benchmark? =A0For example it looks
> like SearchPerfTest would be useful for executing queries over a
> pre-built index. =A0Though there's no indexing tool in the code tree?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 10 08:35:29 2011
Return-Path: <java-user-return-49367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99390 invoked from network); 10 Apr 2011 08:35:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Apr 2011 08:35:29 -0000
Received: (qmail 74268 invoked by uid 500); 10 Apr 2011 08:35:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74200 invoked by uid 500); 10 Apr 2011 08:35:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74190 invoked by uid 99); 10 Apr 2011 08:35:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Apr 2011 08:35:24 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Apr 2011 08:35:19 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mailformailinglists@yahoo.de>)
	id 1Q8q6k-0003rJ-3c
	for java-user@lucene.apache.org; Sun, 10 Apr 2011 01:34:58 -0700
Date: Sun, 10 Apr 2011 01:34:58 -0700 (PDT)
From: Em <mailformailinglists@yahoo.de>
To: java-user@lucene.apache.org
Message-ID: <1302424498091-2801878.post@n3.nabble.com>
Subject: NRT consistency
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello list,

I am currently trying to understand Lucene's Near-Real-Time-Feature which
was covered in "Lucene in Action, Second Edition".

Let's say I got a distributed system with a master and a slave.

In Solr replication is solved by checking for any differences in the
index-directory and to consume those differences to keep indices consistent.

How is this possible within a NRT-System? Is there any possibility to
consume snapshots of the internal buffer of the index writer to send them to
the slave?

Regards,
Em

--
View this message in context: http://lucene.472066.n3.nabble.com/NRT-consistency-tp2801878p2801878.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 10 17:35:24 2011
Return-Path: <java-user-return-49368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16260 invoked from network); 10 Apr 2011 17:35:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Apr 2011 17:35:23 -0000
Received: (qmail 10574 invoked by uid 500); 10 Apr 2011 17:35:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10528 invoked by uid 500); 10 Apr 2011 17:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10520 invoked by uid 99); 10 Apr 2011 17:35:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Apr 2011 17:35:20 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Apr 2011 17:35:15 +0000
Received: by wwi18 with SMTP id 18so4092913wwi.5
        for <java-user@lucene.apache.org>; Sun, 10 Apr 2011 10:34:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.178.5 with SMTP id bk5mr4468289wbb.173.1302456894392; Sun,
 10 Apr 2011 10:34:54 -0700 (PDT)
Received: by 10.227.143.67 with HTTP; Sun, 10 Apr 2011 10:34:54 -0700 (PDT)
In-Reply-To: <1302424498091-2801878.post@n3.nabble.com>
References: <1302424498091-2801878.post@n3.nabble.com>
Date: Sun, 10 Apr 2011 13:34:54 -0400
Message-ID: <BANLkTinj8UxS3tm_Hw-VOTGm7VqztP5s5A@mail.gmail.com>
Subject: Re: NRT consistency
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Em <mailformailinglists@yahoo.de>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

That's a neat question (how to replicate index changes from opening a
new NRT reader).

The good news, the segments are flushed "like normal", so they can be
replicated to the mirror(s).

But the bad news is, the segments file is not written to disk -- it's
held only in RAM (inside IW and shared to the IR that's opened), as a
SegmentInfos instance, so somehow replication would have to get this
in-memory segments file over to the mirrors, too.

Mike

http://blog.mikemccandless.com

On Sun, Apr 10, 2011 at 4:34 AM, Em <mailformailinglists@yahoo.de> wrote:
> Hello list,
>
> I am currently trying to understand Lucene's Near-Real-Time-Feature which
> was covered in "Lucene in Action, Second Edition".
>
> Let's say I got a distributed system with a master and a slave.
>
> In Solr replication is solved by checking for any differences in the
> index-directory and to consume those differences to keep indices consistent.
>
> How is this possible within a NRT-System? Is there any possibility to
> consume snapshots of the internal buffer of the index writer to send them to
> the slave?
>
> Regards,
> Em
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/NRT-consistency-tp2801878p2801878.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Apr 10 18:38:42 2011
Return-Path: <java-user-return-49369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16130 invoked from network); 10 Apr 2011 18:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 10 Apr 2011 18:38:42 -0000
Received: (qmail 44532 invoked by uid 500); 10 Apr 2011 18:38:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44495 invoked by uid 500); 10 Apr 2011 18:38:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44487 invoked by uid 99); 10 Apr 2011 18:38:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Apr 2011 18:38:40 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [173.164.230.50] (HELO mailhost.transaxtions.com) (173.164.230.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 10 Apr 2011 18:38:35 +0000
Received: (qmail 9106 invoked from network); 10 Apr 2011 11:30:22 -0700
Received: from unknown (HELO ?192.168.1.120?) (192.168.1.120)
  by mymailhost.transaxtions.com with SMTP; 10 Apr 2011 11:30:22 -0700
Message-ID: <4DA1F922.7040300@transaxtions.com>
Date: Sun, 10 Apr 2011 11:38:26 -0700
From: Nagendra Nagarajayya <nnagarajayya@transaxtions.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Lightning/1.0b2 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Announce] Solr with Near Real Time (NRT) Functionality
Content-Type: multipart/alternative;
 boundary="------------090908030703080500040102"

--------------090908030703080500040102
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi!

I would like to announce Solr with RankingAlgorithm has Near Real Time 
functionality now. The NRT functionality allows you to add documents 
without the IndexSearchers being closed or caches being cleared. A 
commit is not needed with the document update. Searches can run 
concurrently with document updates. No changes are needed except for 
enabling the NRT through solrconfig.xml.

A lock-free concurrent time managed access is used to eliminate locking 
between the IndexWriter and the IndexSearchers to speed up the 
performance. The performance is about  262 TPS (document adds) on a dual 
core intel system with 2GB heap with searches in parallel. The 
performance at the moment is limited by how fast IndexWriter.getReader() 
performs.

I have a white paper that describes NRT in details, allows you to 
download the tweets, schema and solrconfig.xml files used for testing. 
You can access the white paper from here:

http://solr-ra.tgels.com/papers/solr-ra_real_time_search.pdf

You can download Solr with RankingAlgorithm (Solr-RA) from here:

http://solr-ra.tgels.com

Please give this a try and let me know if you see any problems.

Regards,
- NN


--------------090908030703080500040102--

From java-user-return-49370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 15:48:03 2011
Return-Path: <java-user-return-49370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15116 invoked from network); 11 Apr 2011 15:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Apr 2011 15:48:02 -0000
Received: (qmail 70015 invoked by uid 500); 11 Apr 2011 15:48:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69963 invoked by uid 500); 11 Apr 2011 15:47:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69955 invoked by uid 99); 11 Apr 2011 15:47:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 15:47:59 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 15:47:53 +0000
Received: by vws7 with SMTP id 7so6515710vws.35
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2011 08:47:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=9ihf3XKKQ8ZUhaI+xgnxdBJAiVQm+FxxlK83pEMVQNQ=;
        b=B2LvjZcGr7SGZT1f0HrcOc63+XXiVsvG1iFyHPiZGkZiKeMMsybo1kuqXiN7q+oVwh
         vGbfWzV9/FcUs1NgzcLX42cRY7l2ZfL5Dbtd1Ey1cIxDL8uZxHshvUZ8N/CpQuMn5H2N
         Jeo7x5kxakIuJbt2wuEKBwFFqYv2zBds5LH6g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=Wxt37IZwHXyz5d+EItm+GMXnRftVlE/R9m0YsRXckbR4fuuKDSSOpqRiV6cDa/D+FK
         aRhfKy/Z3+8OUAz1ybBN+OD/hwCEU4P/CfnBIlpXXJtV175NNQ6pnaYHLDG2MwsYoDqT
         FinHAFNs2QDB8ERQ/va4p+3y1rjSR2iNmiLvU=
Received: by 10.220.18.197 with SMTP id x5mr1476393vca.265.1302536850278;
        Mon, 11 Apr 2011 08:47:30 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c63c22.dyn.optonline.net [68.198.60.34])
        by mx.google.com with ESMTPS id b11sm1199021vcx.21.2011.04.11.08.47.27
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 11 Apr 2011 08:47:27 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Difference between regular Highlighter and Fast Vector Highlighter ?
From: Mark Miller <markrmiller@gmail.com>
In-Reply-To: <1301661155888-2763162.post@n3.nabble.com>
Date: Mon, 11 Apr 2011 11:47:26 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <97204158-2604-47FD-B422-A2C93DEA2F81@gmail.com>
References: <1301661155888-2763162.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

The general and short answer is:

Highlighter: highlights more query types, has a fairly rich API, doesn't =
scale well to very large documents (though =
https://issues.apache.org/jira/browse/LUCENE-2939 is going to help a lot =
here) - does not require that you store term vectors, but is faster if =
you do.

FVH: works with fewer query types and requires that you store term =
vectors - but scales better than the std Highlighter to very large =
documents

- Mark Miller
lucidimagination.com

Lucene/Solr User Conference
May 25-26, San Francisco
www.lucenerevolution.org

On Apr 1, 2011, at 8:32 AM, shrinath.m wrote:

> I was wondering whats the difference between the Lucene's 2 =
implementation of
> highlighters...=20
> I saw the javadoc of FVH, but it only says "another implementation of =
Lucene
> Highlighter" ...
>=20
> Can someone throw some more light on this ?=20
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/Difference-between-regular-Highlighter-=
and-Fast-Vector-Highlighter-tp2763162p2763162.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 15:52:38 2011
Return-Path: <java-user-return-49371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33135 invoked from network); 11 Apr 2011 15:52:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Apr 2011 15:52:38 -0000
Received: (qmail 79017 invoked by uid 500); 11 Apr 2011 15:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78970 invoked by uid 500); 11 Apr 2011 15:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78962 invoked by uid 99); 11 Apr 2011 15:52:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 15:52:36 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 15:52:30 +0000
Received: by vxa37 with SMTP id 37so6542144vxa.35
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2011 08:52:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=rs365tgLHmPrK48n1y57HdHhLfufsJl17SpKmTk1LvI=;
        b=tErDSH1usuaae+yY0mrXGSeNF1USlKKow0IzQqWS7ae9e9249rtiKKLdXyhjXnis/Z
         hDcPQCBKeYW/hcJaS+2mCZe9P9ODKdz8YVzrrG1AzLa+oiCAqGuyRlFCI4Gr8uzu5ZyH
         jT+g1VAsIEOsReMVeeG69ORkR76yzCXB21xb0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=DUR/jyfnazP+/CXLgzSmEVQE/OEc1+tqdA26nXkdZXQPhqAp8Ji7EJumL07fyabopU
         1dx9tpRiCMJkz0ZFQ16HW+WWsVNCx8zhfeADLMDXgH/gZgnd/KV7MJ8SF+4xtWg+J2A1
         BkN/hmOc+NtFikgfNsbLJaA9wY4gvLDU8uE2k=
Received: by 10.52.169.37 with SMTP id ab5mr7824557vdc.283.1302537128934;
        Mon, 11 Apr 2011 08:52:08 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c63c22.dyn.optonline.net [68.198.60.34])
        by mx.google.com with ESMTPS id n5sm1203196vcs.34.2011.04.11.08.52.06
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 11 Apr 2011 08:52:06 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: NRT consistency
From: Mark Miller <markrmiller@gmail.com>
In-Reply-To: <1302424498091-2801878.post@n3.nabble.com>
Date: Mon, 11 Apr 2011 11:52:05 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com>
References: <1302424498091-2801878.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)


On Apr 10, 2011, at 4:34 AM, Em wrote:

> Hello list,
>=20
> I am currently trying to understand Lucene's Near-Real-Time-Feature =
which
> was covered in "Lucene in Action, Second Edition".
>=20
> Let's say I got a distributed system with a master and a slave.
>=20
> In Solr replication is solved by checking for any differences in the
> index-directory and to consume those differences to keep indices =
consistent.
>=20
> How is this possible within a NRT-System? Is there any possibility to
> consume snapshots of the internal buffer of the index writer to send =
them to
> the slave?

I think for near real time, Solr index replication may not be =
appropriate. Though I think it would be cool to use Andrzej's mythical =
single pass index splitter to create a single+ doc segment that could be =
shipped around.

Most likely, a system that just sends each doc to each replica is =
probably going to work a lot better. Introduces other issues of course - =
some of which we hope to alleviate with further SolrCloud work.

>=20
> Regards,
> Em
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/NRT-consistency-tp2801878p2801878.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

- Mark Miller
lucidimagination.com

Lucene/Solr User Conference
May 25-26, San Francisco
www.lucenerevolution.org






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 17:05:54 2011
Return-Path: <java-user-return-49372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87640 invoked from network); 11 Apr 2011 17:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Apr 2011 17:05:54 -0000
Received: (qmail 1280 invoked by uid 500); 11 Apr 2011 17:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1214 invoked by uid 500); 11 Apr 2011 17:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1206 invoked by uid 99); 11 Apr 2011 17:05:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 17:05:52 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 17:05:46 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mailformailinglists@yahoo.de>)
	id 1Q9KYF-0007Wy-VA
	for java-user@lucene.apache.org; Mon, 11 Apr 2011 10:05:23 -0700
Date: Mon, 11 Apr 2011 10:05:23 -0700 (PDT)
From: Em <mailformailinglists@yahoo.de>
To: java-user@lucene.apache.org
Message-ID: <1302541523958-2807475.post@n3.nabble.com>
In-Reply-To: <7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com>
References: <1302424498091-2801878.post@n3.nabble.com> <7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com>
Subject: Re: NRT consistency
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you both!

Mark, could you explain what you mean? I never heard from such an
index-splitter. BTW: The idea of having a segment per document sounds a lot
like an exception for too many FileDescriptors :)

Mike, as you said, the segments are flushed like normal.
Let's say my server dies for whatever reason, when restarting it and
reopening the index-writer: Does the IW deletes the flushed file, because it
is not mentioned in the segmentInfo - file or how does Lucene handle this
internally?

Regards,
Em

--
View this message in context: http://lucene.472066.n3.nabble.com/NRT-consistency-tp2801878p2807475.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 17:11:47 2011
Return-Path: <java-user-return-49373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88932 invoked from network); 11 Apr 2011 17:11:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Apr 2011 17:11:47 -0000
Received: (qmail 8819 invoked by uid 500); 11 Apr 2011 17:11:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8779 invoked by uid 500); 11 Apr 2011 17:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8771 invoked by uid 99); 11 Apr 2011 17:11:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 17:11:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 17:11:40 +0000
Received: by wwk4 with SMTP id 4so3203010wwk.5
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2011 10:11:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.72.7 with SMTP id k7mr5483974wbj.115.1302541878612; Mon,
 11 Apr 2011 10:11:18 -0700 (PDT)
Received: by 10.227.143.67 with HTTP; Mon, 11 Apr 2011 10:11:18 -0700 (PDT)
In-Reply-To: <1302541523958-2807475.post@n3.nabble.com>
References: <1302424498091-2801878.post@n3.nabble.com>
	<7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com>
	<1302541523958-2807475.post@n3.nabble.com>
Date: Mon, 11 Apr 2011 13:11:18 -0400
Message-ID: <BANLkTim0-w=djbeSgttXWwV=n5g=Eq4wOQ@mail.gmail.com>
Subject: Re: NRT consistency
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Em <mailformailinglists@yahoo.de>
Content-Type: text/plain; charset=ISO-8859-1

On Mon, Apr 11, 2011 at 1:05 PM, Em <mailformailinglists@yahoo.de> wrote:

> Mike, as you said, the segments are flushed like normal.
> Let's say my server dies for whatever reason, when restarting it and
> reopening the index-writer: Does the IW deletes the flushed file, because it
> is not mentioned in the segmentInfo - file or how does Lucene handle this
> internally?

Right, it deletes all such segments, back until the last successful commit().

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 11 18:41:56 2011
Return-Path: <java-user-return-49374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95036 invoked from network); 11 Apr 2011 18:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 11 Apr 2011 18:41:56 -0000
Received: (qmail 54887 invoked by uid 500); 11 Apr 2011 18:41:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54853 invoked by uid 500); 11 Apr 2011 18:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54845 invoked by uid 99); 11 Apr 2011 18:41:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Apr 2011 18:41:53 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.94.238.146] (HELO web130110.mail.mud.yahoo.com) (66.94.238.146)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Apr 2011 18:41:47 +0000
Received: (qmail 81080 invoked by uid 60001); 11 Apr 2011 18:41:26 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1302547286; bh=Sh00Jps0wKEwhri67so0BpR9eavVLs46wI3O0zTW6w4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=28nF3g5OgpZWooAwArFYT+9JaS5hHzwBbUkrH1LuhFDRp9Ip9dn0CADW7BxXgrX9ynAkJZ1BC23BCoVQx5y1K+sy9zO9Sc603/34RNhEAMDG6MXEIZ5hY1QMY4/hTYTsxERm+Y1LV3rOP9f9eD3PChIjvzux9b+UQ3ppRKgTGFI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=6TmOVPdaKKIaRjnbOHHnhz4uJcd5LYVcajQOaAsF2H3APAL+4Dez3/RSaHIFifoT3WiW/lwQgy25voz3dvrQRg9cwtoQjfbMNggSxHrPrbW8/jiJPdkp8F/5YG4qwEYDOkgV6TisOmekc5v9ghlPY12vA1ICvd8D0386LzFrlEc=;
Message-ID: <211644.72135.qm@web130110.mail.mud.yahoo.com>
X-YMail-OSG: hRHtP2QVM1kkgjGef2OzGMkJ3s_20yN6zPI94Y7HJYGvOIW
 AF.uOJbbUatYqTy67hvXU4AHEvK2Lpbrbx4OUT6LHDMCApvkFWO04GdFSx8m
 EqVKTCfqOsfmxASNcfn6XJxC4_b_Xn6PUkBEdv85qASjL.MRtiGtXbt070WH
 JnCjLFhT09qthSJm7.SwxC.xKdCzBEqmFv4bCMSVc.ARfG3HLb0ZDq0Kjhto
 eRqiJinnN3WpdH67U40XLai92bH9aHYO6WWS6wWpMjqzjLe7xynU8knIfy5c
 Q4KrMgCzj23ecRXCVSrTR.YD3xZsBGx1NFZDQlBKee7dYDN9VFYQPhKx5Rif
 7We8zWqnK.uDSmd9bRORXa87zXXHivrjA99TMgN63kt5NyydtT0X9Z1MpkDg
 zlM28aTNZmGbh
Received: from [184.75.0.187] by web130110.mail.mud.yahoo.com via HTTP; Mon, 11 Apr 2011 11:41:26 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.109.295617
References: <1302424498091-2801878.post@n3.nabble.com> <7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com>
Date: Mon, 11 Apr 2011 11:41:26 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: NRT consistency
To: java-user@lucene.apache.org
In-Reply-To: <7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

I think what's being described here is a lot like what I *think* ElasticSearch 
does, where there is no single master and index changed made to any node get 
propagated to N-1 other nodes (N=number of index replicas).  I'm not sure how it 
deals with situations where "incompatible" index changes are made to the same 
index via 2 different nodes at the same time.  Is that what vector clocks are 
about?

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, April 11, 2011 11:52:05 AM
> Subject: Re: NRT consistency
> 
> 
> On Apr 10, 2011, at 4:34 AM, Em wrote:
> 
> > Hello list,
> > 
> > I am currently trying to understand Lucene's Near-Real-Time-Feature  which
> > was covered in "Lucene in Action, Second Edition".
> > 
> > Let's say I got a distributed system with a master and a slave.
> > 
> > In Solr replication is solved by checking for any differences in  the
> > index-directory and to consume those differences to keep indices  
consistent.
> > 
> > How is this possible within a NRT-System? Is there  any possibility to
> > consume snapshots of the internal buffer of the index  writer to send them 
to
> > the slave?
> 
> I think for near real time,  Solr index replication may not be appropriate. 
>Though I think it would be cool  to use Andrzej's mythical single pass index 
>splitter to create a single+ doc  segment that could be shipped around.
> 
> Most likely, a system that just  sends each doc to each replica is probably 
>going to work a lot better.  Introduces other issues of course - some of which 
>we hope to alleviate with  further SolrCloud work.
> 
> > 
> > Regards,
> > Em
> > 
> > --
> > View this message in context: 
>http://lucene.472066.n3.nabble.com/NRT-consistency-tp2801878p2801878.html
> >  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> > 
> >  ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> - Mark Miller
> lucidimagination.com
> 
> Lucene/Solr User  Conference
> May 25-26, San  Francisco
> www.lucenerevolution.org
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 00:00:05 2011
Return-Path: <java-user-return-49375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22699 invoked from network); 12 Apr 2011 00:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 00:00:04 -0000
Received: (qmail 13193 invoked by uid 500); 12 Apr 2011 00:00:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13155 invoked by uid 500); 12 Apr 2011 00:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 53790 invoked by uid 99); 11 Apr 2011 08:48:16 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mentalmantle@hotmail.com designates 65.55.111.79 as permitted sender)
X-Originating-IP: [77.246.171.42]
X-Originating-Email: [mentalmantle@hotmail.com]
Message-ID: <BLU132-DS396922F775C8B5031377FCFA80@phx.gbl>
From: "Chris Mantle" <mentalmantle@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Can't perform exact match...?
Date: Mon, 11 Apr 2011 09:47:39 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0117_01CBF82D.7EEA6B60"
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3508.1109
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3508.1109
X-OriginalArrivalTime: 11 Apr 2011 08:47:41.0280 (UTC) FILETIME=[1E1BAE00:01CBF825]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0117_01CBF82D.7EEA6B60
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable

Hi, I=E2=80=99m having some trouble with Lucene at the moment. I have a =
number of unique identifiers that I need to search through. =
They=E2=80=99re in many different forms, eg. =E2=80=9CM=E2=80=9D, =
=E2=80=9CMO=E2=80=9D, =E2=80=9C:MOFB=E2=80=9D, =
=E2=80=9CFH..L-O=E2=80=9D, etc. All I need to do is an exact prefix =
search: at the moment, if I type in =E2=80=98M=E2=80=99, I get =
=E2=80=9CM=E2=80=9D, =E2=80=9CMO=E2=80=9D and =E2=80=9C:MOFB=E2=80=9D, =
and I=E2=80=99d like to avoid getting =E2=80=9C:MOFB=E2=80=9D until the =
user actually types in =E2=80=98:M=E2=80=99.

This is with a StandardAnalyzer and a PrefixQuery. I=E2=80=99ve tried =
many different combinations of analyzer and query. If I use a =
WhitespaceAnalyzer or a KeywordAnalyzer, I see that tokens are generated =
in a form that I=E2=80=99d expect (=E2=80=9C:MOFB=E2=80=9D instead of =
=E2=80=9Cmofb=E2=80=9D, for instance), but I can=E2=80=99t search with a =
wildcard: searching with =E2=80=98M*=E2=80=99 returns nothing; =
=E2=80=98M=E2=80=99 returns =E2=80=9CM=E2=80=9D alone. I=E2=80=99ve also =
tried using ANALYSED and NOT_ANALYSED indexing to no avail.

Can anyone advise me on how to remedy this? There must be something =
I=E2=80=99m missing here...

Thanks,
- Chris M.
------=_NextPart_000_0117_01CBF82D.7EEA6B60--


From java-user-return-49376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 01:46:14 2011
Return-Path: <java-user-return-49376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79484 invoked from network); 12 Apr 2011 01:46:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 01:46:14 -0000
Received: (qmail 15713 invoked by uid 500); 12 Apr 2011 01:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15663 invoked by uid 500); 12 Apr 2011 01:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15655 invoked by uid 99); 12 Apr 2011 01:46:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 01:46:12 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zh.milo@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 01:46:07 +0000
Received: by pwi14 with SMTP id 14so3357544pwi.35
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2011 18:45:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=CfGeLf905wF34l/q11XDGm8dlD6r0Ialxyq+/1JbRbQ=;
        b=nK6igeQLjB29oVQmPh7kVqDrjqBH0n+ltnKwC9xyil+TjorJ3zDw3zOQR0PadKWzk5
         kdyCDdrIug0XIogUj81k9vN+GetuOFUjfy3IzPpmYVmulqhd3q/jskweH5FHa49iLhhK
         lDHFmvEvC8J328rEBGRD3t/bnTXyPX3V6etXs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fbR6nWe4HXFH7Z8uupOIi97+WQR5IK1mJPsS087wuyEtIqmVjkH/N1ML3b4Dh7MAwq
         nXUOUgqjZGGgUAccuLMDPC9LrGXCP8UcrU5NliyxLoHql9oV0IW9WJpEh3hY2LYiPd32
         djViSgajAJIxHRw0dXdDKKAgKIbCSHCs0H+xs=
MIME-Version: 1.0
Received: by 10.142.214.2 with SMTP id m2mr1045217wfg.330.1302572747246; Mon,
 11 Apr 2011 18:45:47 -0700 (PDT)
Received: by 10.68.47.170 with HTTP; Mon, 11 Apr 2011 18:45:46 -0700 (PDT)
Received: by 10.68.47.170 with HTTP; Mon, 11 Apr 2011 18:45:46 -0700 (PDT)
In-Reply-To: <7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com>
References: <1302424498091-2801878.post@n3.nabble.com>
	<7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com>
Date: Tue, 12 Apr 2011 09:45:46 +0800
Message-ID: <BANLkTi=4NRLj4Sd6cUJC3_hO42x_gkBCYw@mail.gmail.com>
Subject: Re: NRT consistency
From: =?GB2312?B?1cWzyQ==?= <zh.milo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2e75ce4cca504a0aed969

--000e0cd2e75ce4cca504a0aed969
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Something like dynamo's pattern, in the near real time searching, we should
make N =3D W.

=D4=DA 2011 4 11 23:52=A3=AC"Mark Miller" <markrmiller@gmail.com>=D0=B4=B5=
=C0=A3=BA
>
> On Apr 10, 2011, at 4:34 AM, Em wrote:
>
>> Hello list,
>>
>> I am currently trying to understand Lucene's Near-Real-Time-Feature whic=
h
>> was covered in "Lucene in Action, Second Edition".
>>
>> Let's say I got a distributed system with a master and a slave.
>>
>> In Solr replication is solved by checking for any differences in the
>> index-directory and to consume those differences to keep indices
consistent.
>>
>> How is this possible within a NRT-System? Is there any possibility to
>> consume snapshots of the internal buffer of the index writer to send the=
m
to
>> the slave?
>
> I think for near real time, Solr index replication may not be appropriate=
.
Though I think it would be cool to use Andrzej's mythical single pass index
splitter to create a single+ doc segment that could be shipped around.
>
> Most likely, a system that just sends each doc to each replica is probabl=
y
going to work a lot better. Introduces other issues of course - some of
which we hope to alleviate with further SolrCloud work.
>
>>
>> Regards,
>> Em
>>
>> --
>> View this message in context:
http://lucene.472066.n3.nabble.com/NRT-consistency-tp2801878p2801878.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> - Mark Miller
> lucidimagination.com
>
> Lucene/Solr User Conference
> May 25-26, San Francisco
> www.lucenerevolution.org
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--000e0cd2e75ce4cca504a0aed969--

From java-user-return-49377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 04:59:15 2011
Return-Path: <java-user-return-49377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93855 invoked from network); 12 Apr 2011 04:59:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 04:59:14 -0000
Received: (qmail 67739 invoked by uid 500); 12 Apr 2011 04:59:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67705 invoked by uid 500); 12 Apr 2011 04:59:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67697 invoked by uid 99); 12 Apr 2011 04:59:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 04:59:10 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 04:59:04 +0000
Received: by vws7 with SMTP id 7so7468116vws.35
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2011 21:58:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=7Zj+5tSiCRO77aMyloHtTzmM9pWWfN53DeGQpVa4Z8k=;
        b=TF/aDRWTwE4n2W60pW++e7rbjEl5LYwJUA1lFQTpXeXu7G542TzwOwkgl5ZCmtlWdd
         DfvAzKJXGl2iri/uw741Rc266WHONpPd4kR+HXm108lofZecCFJG0pu1NSM3J16/MrFt
         clJDQ4/NshxeU8N9q5bsF5kIaoRou8sRzWlCM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=hRak186RlfnbafLSpcR7OBYNSO463eLPujJTslgE/kUf5DuYvFwWLTMWn2co8N4I+r
         FDOAAybbbbkV7FHYtWRmpLHgCrmUpTEzgAnf/YPn3og02rTQN/WmOELo9QlYzkIR8reL
         I9PLp6FgG8QlEeIxiMUfAToEtZcq7Vqey5bPk=
Received: by 10.220.66.217 with SMTP id o25mr1652499vci.167.1302584323597;
        Mon, 11 Apr 2011 21:58:43 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c63c22.dyn.optonline.net [68.198.60.34])
        by mx.google.com with ESMTPS id k7sm472940vcs.18.2011.04.11.21.58.41
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 11 Apr 2011 21:58:42 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: NRT consistency
From: Mark Miller <markrmiller@gmail.com>
In-Reply-To: <1302541523958-2807475.post@n3.nabble.com>
Date: Tue, 12 Apr 2011 00:58:40 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <95600192-4D91-439C-9BAE-E09782EAC21F@gmail.com>
References: <1302424498091-2801878.post@n3.nabble.com> <7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com> <1302541523958-2807475.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)


On Apr 11, 2011, at 1:05 PM, Em wrote:

> Thank you both!
>=20
> Mark, could you explain what you mean? I never heard from such an
> index-splitter. BTW: The idea of having a segment per document sounds =
a lot
> like an exception for too many FileDescriptors :)

This is just an idea for rebalancing I suppose - an index splitter lets =
you split up an index - there is a multi pass splitter in contrib. So if =
you wanted to move a few documents around (to rebalance after a couple =
servers go down perhaps), you might split out another index (just the =
docs you want to move), and then ship off that already analyzed and =
indexed bunch of documents to other servers.

>=20
> Mike, as you said, the segments are flushed like normal.
> Let's say my server dies for whatever reason, when restarting it and
> reopening the index-writer: Does the IW deletes the flushed file, =
because it
> is not mentioned in the segmentInfo - file or how does Lucene handle =
this
> internally?
>=20
> Regards,
> Em
>=20
> --
> View this message in context: =
http://lucene.472066.n3.nabble.com/NRT-consistency-tp2801878p2807475.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

- Mark Miller
lucidimagination.com

Lucene/Solr User Conference
May 25-26, San Francisco
www.lucenerevolution.org






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 05:00:46 2011
Return-Path: <java-user-return-49378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98139 invoked from network); 12 Apr 2011 05:00:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 05:00:46 -0000
Received: (qmail 70469 invoked by uid 500); 12 Apr 2011 05:00:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70369 invoked by uid 500); 12 Apr 2011 05:00:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70355 invoked by uid 99); 12 Apr 2011 05:00:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 05:00:41 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 05:00:35 +0000
Received: by vxa37 with SMTP id 37so7141335vxa.35
        for <java-user@lucene.apache.org>; Mon, 11 Apr 2011 22:00:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=zn1BIecqhkuJy278kaQIMvvr1S70+jZli+iMzTlXip4=;
        b=eFffsWq4OPsY9im6aUsywUp48cdUp5d+dggmKp1+DKFANyTf4N4S+/gG16mzFtSPiU
         rE2kGZCttjlkjqOY2yzSoYoV4lIYC+eM/UCcakSMeLELP2J3NfyVgN6ut4FRYnHXqgdd
         f1jdW4l0aWvGI27pubkofofEK4il6xvXvV37w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=fHeE79dwZtDfwxegNZBsHpHU1aMfZcPt1HZvvgQdexij3eYSGeJpBKbVFtty/QFIFh
         MujPzAJD0gDNZGRwMwgPkWeBJVlDJatzocqBb5G2KsmKymwc7OYLULj4c4XPx6oEDXec
         ZDnu18hioNOEGrItBm39pofQ72kL0ILC22Mu0=
Received: by 10.52.89.41 with SMTP id bl9mr1892652vdb.188.1302584414199;
        Mon, 11 Apr 2011 22:00:14 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c63c22.dyn.optonline.net [68.198.60.34])
        by mx.google.com with ESMTPS id h23sm2300420vbz.21.2011.04.11.22.00.11
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 11 Apr 2011 22:00:12 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: NRT consistency
From: Mark Miller <markrmiller@gmail.com>
In-Reply-To: <211644.72135.qm@web130110.mail.mud.yahoo.com>
Date: Tue, 12 Apr 2011 01:00:10 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <D2756ECE-AC8F-4999-9842-B1FD88054AB6@gmail.com>
References: <1302424498091-2801878.post@n3.nabble.com> <7BFE584C-C0D9-4A77-9B2E-718758E45190@gmail.com> <211644.72135.qm@web130110.mail.mud.yahoo.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org


On Apr 11, 2011, at 2:41 PM, Otis Gospodnetic wrote:

> I think what's being described here is a lot like what I *think* =
ElasticSearch=20
> does, where there is no single master and index changed made to any =
node get=20
> propagated to N-1 other nodes (N=3Dnumber of index replicas).  I'm not =
sure how it=20
> deals with situations where "incompatible" index changes are made to =
the same=20
> index via 2 different nodes at the same time.  Is that what vector =
clocks are=20
> about?

Right - you have to have some sort of conflict detection/resolution - =
Amazon Dynamo uses vector clocks for this.

>=20
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>=20
>=20
>=20
> ----- Original Message ----
>> From: Mark Miller <markrmiller@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Mon, April 11, 2011 11:52:05 AM
>> Subject: Re: NRT consistency
>>=20
>>=20
>> On Apr 10, 2011, at 4:34 AM, Em wrote:
>>=20
>>> Hello list,
>>>=20
>>> I am currently trying to understand Lucene's Near-Real-Time-Feature  =
which
>>> was covered in "Lucene in Action, Second Edition".
>>>=20
>>> Let's say I got a distributed system with a master and a slave.
>>>=20
>>> In Solr replication is solved by checking for any differences in  =
the
>>> index-directory and to consume those differences to keep indices =20
> consistent.
>>>=20
>>> How is this possible within a NRT-System? Is there  any possibility =
to
>>> consume snapshots of the internal buffer of the index  writer to =
send them=20
> to
>>> the slave?
>>=20
>> I think for near real time,  Solr index replication may not be =
appropriate.=20
>> Though I think it would be cool  to use Andrzej's mythical single =
pass index=20
>> splitter to create a single+ doc  segment that could be shipped =
around.
>>=20
>> Most likely, a system that just  sends each doc to each replica is =
probably=20
>> going to work a lot better.  Introduces other issues of course - some =
of which=20
>> we hope to alleviate with  further SolrCloud work.
>>=20
>>>=20
>>> Regards,
>>> Em
>>>=20
>>> --
>>> View this message in context:=20
>> =
http://lucene.472066.n3.nabble.com/NRT-consistency-tp2801878p2801878.html
>>> Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
>>>=20
>>> =
---------------------------------------------------------------------
>>> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>=20
>>=20
>> - Mark Miller
>> lucidimagination.com
>>=20
>> Lucene/Solr User  Conference
>> May 25-26, San  Francisco
>> www.lucenerevolution.org
>>=20
>>=20
>>=20
>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For  additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

- Mark Miller
lucidimagination.com

Lucene/Solr User Conference
May 25-26, San Francisco
www.lucenerevolution.org






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 08:05:36 2011
Return-Path: <java-user-return-49379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40066 invoked from network); 12 Apr 2011 08:05:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 08:05:35 -0000
Received: (qmail 12056 invoked by uid 500); 12 Apr 2011 08:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11566 invoked by uid 500); 12 Apr 2011 08:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11535 invoked by uid 99); 12 Apr 2011 08:05:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 08:05:25 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 08:05:20 +0000
Received: by vws7 with SMTP id 7so7558080vws.35
        for <multiple recipients>; Tue, 12 Apr 2011 01:04:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:date:message-id:subject
         :from:to:content-type;
        bh=J8lQmC4Qx7JgrWfzdhqIiwwA3ra5lxzUvKzlliSBV3Q=;
        b=Ee8MRia/43SQ6rlGrtQSUUyHYoLELtuRlTjHAtCraP0ugDkawSl+OjqaQkYfH37siA
         d6UR0J9Piz7urlP7didbtof6rVJyHuNP3SNNXDhjQeTo23l0sGAbgBRCqljcQmt9uhwb
         222R49ze1vORrolPlMf5ZV3Ojm7j4mRNHDfyk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:date:message-id:subject:from:to:content-type;
        b=UkmkrPGfNq3u/t3xphJo9PjCIw3ORMcVZdZ5Rqe9oMdhn5KyoB5jEJOSn6ukXJEOK3
         90MKCEJMqnK/OsaYarQhOSFchrfDtC5/+WRCuzp1mOgMumaiq8SYn0gakxIZngQiOpkn
         FpGSQM0VedekEqqdh9B1zs9JR+IVbh6pQO3I0=
MIME-Version: 1.0
Received: by 10.52.179.69 with SMTP id de5mr9163676vdc.304.1302595499641; Tue,
 12 Apr 2011 01:04:59 -0700 (PDT)
Received: by 10.52.165.35 with HTTP; Tue, 12 Apr 2011 01:04:59 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
Date: Tue, 12 Apr 2011 10:04:59 +0200
Message-ID: <BANLkTimuVHDggEXTPNpZPnKxwh2Enb6ZHA@mail.gmail.com>
Subject: Berlin Buzzwords - conference schedule released
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user <java-user@lucene.apache.org>, general@lucene.apache.org, 
	lucy-user@incubator.apache.org, solr-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hey folks,

The Berlin Buzzwords team recently released the schedule for
the conference on high scalability. The conference focuses on the
topics search,
data analysis and NoSQL. It is to take place on June 6/7th 2011 in Berlin.

We are looking forward to two awesome keynote speakers who shaped the world of
open source data analysis: Doug Cutting, founder of Apache Lucene and
Hadoop) as
well as Ted Dunning (Chief Application Architect at MapR Technologies
and active
developer at Apache Hadoop and Mahout).

This year the program has been extended by one additional track. The first
conference day focuses on the topics Apache Lucene, NoSQL, messaging and data
mining. Speakers include Jakob Homan from Yahoo! who will give in introduction
to the new Hadoop security features, Daniel Einspanjer is going to show how
NoSQL and Hadoop are being used at Mozilla Socorro. In addition Chris
Male gives
a presentation on how to integrate Solr with J2EE applications.

The second day features presentations by Jonathan Gray on Facebook's use of
HBase in their Messaging architecture, Dawid Weiss, Simon Willnauer
and Uwe Schindler are
showing the latest Apache Lucene developments, Mark Miller provides
insights into Solr Performance
and Mathias Stearn is discussing MongoDB scalability questions.

"For our developers Berlin Buzzwords is a great chance to introduce our open
source project Couchbase (based on Apache CouchDB and Memcached), get in touch
with interested users and discuss their technical questions on site." says Jan
Lehnardt, Co-Founder of Couchbase (merged CouchOne and Membase (formerly
Northscale) [1].

Registration is open, regular tickets are available for 440,- Euro. There is a
group discount. Prizes include coffee break and lunch catering.

After the conference there will be trainings on topics related to Berlin
Buzzwords such as Enterprise Search with Apache Lucene and Solr [2]. For the
very first time we will also have community organised hackathons, that give
Berlin Buzzwords visitors the opportunity to work together with the projects'
developers on interesting tasks.

Berlin Buzzwords is produced by newthinking communications in
collaboration with Isabel Drost (Member of the Apache Software
Foundation, PMC member Apache community development and co-founder of
Apache Mahout), Jan Lehnardt (PMC Chair Apache CouchDB) and Simon
Willnauer (PMC member Apache Lucene).

[1] http://www.heise.de/open/meldung/NoSQL-CouchOne-und-Membase-fusionieren-zu -
Couchbase-1185227.html
[2] http://www.jteam.nl/training/2-day-training-Lucene-Solr.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 13:08:21 2011
Return-Path: <java-user-return-49380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27645 invoked from network); 12 Apr 2011 13:08:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 13:08:20 -0000
Received: (qmail 74086 invoked by uid 500); 12 Apr 2011 13:08:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73983 invoked by uid 500); 12 Apr 2011 13:08:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73964 invoked by uid 99); 12 Apr 2011 13:08:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 13:08:17 +0000
X-ASF-Spam-Status: No, hits=0.2 required=5.0
	tests=ASF_LIST_OPS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [182.71.53.3] (HELO mail.otssolutions.com) (182.71.53.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 13:08:12 +0000
Received: from MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a]) by
 MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a%11]) with mapi; Tue, 12 Apr
 2011 18:35:19 +0530
From: Ranjit Kumar <Ranjit.Kumar@otssolutions.com>
To: "java-user-help@lucene.apache.org" <java-user-help@lucene.apache.org>,
	"java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: lucene 3.0.3 | searching problem with *.docx file
Thread-Topic: lucene 3.0.3 | searching problem with *.docx file
Thread-Index: Acv5Ej//ky/4e4GDSfa9Mvb9CBrNhQ==
Date: Tue, 12 Apr 2011 13:05:09 +0000
Message-ID: <AD21521D44870544AC66F4FDFC0A474C4DDE5FB3@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: multipart/alternative;
	boundary="_000_AD21521D44870544AC66F4FDFC0A474C4DDE5FB3MAILotssolution_"
MIME-Version: 1.0

--_000_AD21521D44870544AC66F4FDFC0A474C4DDE5FB3MAILotssolution_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I am creating index with help of StandardAnalyzer for *.docx file it's fine=
. But at the time of searching it do not gives result for these *.docx file=
.

any help or suggestion will be appreciated!!!


Thanks & Regards,
Ranjit Kumar
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Pr=
ivate, Confidential and Privileged. This e-mail and any files and attachmen=
ts transmitted with it are confidential and/or privileged. They are intende=
d solely for the use of the intended recipient. The content of this e-mail =
and any file or attachment transmitted with it may have been changed or alt=
ered without the consent of the author. If you are not the intended recipie=
nt, please note that any review, dissemination, disclosure, alteration, pri=
nting, circulation or Transmission of this e-mail and/or any file or attach=
ment transmitted with it, is prohibited and may be unlawful. If you have re=
ceived this e-mail or any file or attachment transmitted with it in error p=
lease notify OTS Solutions at info@otssolutions.com =3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

--_000_AD21521D44870544AC66F4FDFC0A474C4DDE5FB3MAILotssolution_--

From java-user-return-49381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 13:43:14 2011
Return-Path: <java-user-return-49381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25074 invoked from network); 12 Apr 2011 13:43:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 13:43:14 -0000
Received: (qmail 38241 invoked by uid 500); 12 Apr 2011 13:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38201 invoked by uid 500); 12 Apr 2011 13:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38192 invoked by uid 99); 12 Apr 2011 13:43:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 13:43:11 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 13:43:04 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id A8D1FC22C1
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2011 15:42:43 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5LytSCD4L26Z for <java-user@lucene.apache.org>;
	Tue, 12 Apr 2011 15:42:43 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 96D65C323A
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2011 14:46:33 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 12 Apr 2011 14:46:33 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 12 Apr 2011 14:46:31 +0200
Subject: German*Filter, Analyzer "cutting" off letters from (french) words...
Thread-Topic: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Index: Acv5D6R+QUnA+SigQ8yJDDkMeBpsMw==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I try to apply German*Filter and or Analyzer on my index. My index contains=
 wine names such as "Petite Arvine" ( I know, that's french ;) ). Whenever =
 one oft he German*Filter or German*Analyzer is in play the terms for "Peti=
te Arvine" are reduced to
"Petit"
and
"Arvin"
Why so? Where have the e's gone?

Thanks for your help
Clemens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 14:17:12 2011
Return-Path: <java-user-return-49382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33783 invoked from network); 12 Apr 2011 14:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 14:17:12 -0000
Received: (qmail 89618 invoked by uid 500); 12 Apr 2011 14:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89569 invoked by uid 500); 12 Apr 2011 14:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89561 invoked by uid 99); 12 Apr 2011 14:17:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 14:17:09 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 14:17:02 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p3CEGfd2017226
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2011 10:16:41 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Tue, 12 Apr 2011
 10:16:41 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 12 Apr 2011 10:16:57 -0400
Subject: RE: lucene 3.0.3 | searching problem with *.docx file
Thread-Topic: lucene 3.0.3 | searching problem with *.docx file
Thread-Index: Acv5Ej//ky/4e4GDSfa9Mvb9CBrNhQACdphQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147FA33CF8C0@suex07-mbx-03.ad.syr.edu>
References: <AD21521D44870544AC66F4FDFC0A474C4DDE5FB3@MAIL.otssolutions.com>
In-Reply-To: <AD21521D44870544AC66F4FDFC0A474C4DDE5FB3@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-12_06:2011-04-12,2011-04-12,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgUmFuaml0LA0KDQpEbyB5b3Uga25vdyBhYm91dCBMdWtlPyAgSXQgd2lsbCBsZXQgeW91IHNl
ZSB3aGF0J3MgaW4geW91ciBpbmRleCwgYW5kIG11Y2ggbW9yZToNCg0KICAgIGh0dHA6Ly9jb2Rl
Lmdvb2dsZS5jb20vcC9sdWtlLw0KDQpTdGV2ZQ0KDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0t
LS0tDQo+IEZyb206IFJhbmppdCBLdW1hciBbbWFpbHRvOlJhbmppdC5LdW1hckBvdHNzb2x1dGlv
bnMuY29tXQ0KPiBTZW50OiBUdWVzZGF5LCBBcHJpbCAxMiwgMjAxMSA5OjA1IEFNDQo+IFRvOiBq
YXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZzsgamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUu
b3JnDQo+IFN1YmplY3Q6IGx1Y2VuZSAzLjAuMyB8IHNlYXJjaGluZyBwcm9ibGVtIHdpdGggKi5k
b2N4IGZpbGUNCj4gDQo+IEhpLA0KPiANCj4gSSBhbSBjcmVhdGluZyBpbmRleCB3aXRoIGhlbHAg
b2YgU3RhbmRhcmRBbmFseXplciBmb3IgKi5kb2N4IGZpbGUgaXQncw0KPiBmaW5lLiBCdXQgYXQg
dGhlIHRpbWUgb2Ygc2VhcmNoaW5nIGl0IGRvIG5vdCBnaXZlcyByZXN1bHQgZm9yIHRoZXNlICou
ZG9jeA0KPiBmaWxlLg0KPiANCj4gYW55IGhlbHAgb3Igc3VnZ2VzdGlvbiB3aWxsIGJlIGFwcHJl
Y2lhdGVkISEhDQo+IA0KPiANCj4gVGhhbmtzICYgUmVnYXJkcywNCj4gUmFuaml0IEt1bWFyDQo+
ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09DQo+ID09PT09PT09PT09PT09PT09PT09PT09PT0gUHJpdmF0ZSwg
Q29uZmlkZW50aWFsIGFuZCBQcml2aWxlZ2VkLiBUaGlzIGUtDQo+IG1haWwgYW5kIGFueSBmaWxl
cyBhbmQgYXR0YWNobWVudHMgdHJhbnNtaXR0ZWQgd2l0aCBpdCBhcmUgY29uZmlkZW50aWFsDQo+
IGFuZC9vciBwcml2aWxlZ2VkLiBUaGV5IGFyZSBpbnRlbmRlZCBzb2xlbHkgZm9yIHRoZSB1c2Ug
b2YgdGhlIGludGVuZGVkDQo+IHJlY2lwaWVudC4gVGhlIGNvbnRlbnQgb2YgdGhpcyBlLW1haWwg
YW5kIGFueSBmaWxlIG9yIGF0dGFjaG1lbnQNCj4gdHJhbnNtaXR0ZWQgd2l0aCBpdCBtYXkgaGF2
ZSBiZWVuIGNoYW5nZWQgb3IgYWx0ZXJlZCB3aXRob3V0IHRoZSBjb25zZW50DQo+IG9mIHRoZSBh
dXRob3IuIElmIHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCByZWNpcGllbnQsIHBsZWFzZSBub3Rl
IHRoYXQgYW55DQo+IHJldmlldywgZGlzc2VtaW5hdGlvbiwgZGlzY2xvc3VyZSwgYWx0ZXJhdGlv
biwgcHJpbnRpbmcsIGNpcmN1bGF0aW9uIG9yDQo+IFRyYW5zbWlzc2lvbiBvZiB0aGlzIGUtbWFp
bCBhbmQvb3IgYW55IGZpbGUgb3IgYXR0YWNobWVudCB0cmFuc21pdHRlZCB3aXRoDQo+IGl0LCBp
cyBwcm9oaWJpdGVkIGFuZCBtYXkgYmUgdW5sYXdmdWwuIElmIHlvdSBoYXZlIHJlY2VpdmVkIHRo
aXMgZS1tYWlsIG9yDQo+IGFueSBmaWxlIG9yIGF0dGFjaG1lbnQgdHJhbnNtaXR0ZWQgd2l0aCBp
dCBpbiBlcnJvciBwbGVhc2Ugbm90aWZ5IE9UUw0KPiBTb2x1dGlvbnMgYXQgaW5mb0BvdHNzb2x1
dGlvbnMuY29tDQo+ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQo+ID09PT09PT09PT09PT09PT09PT09PT09
PT0NCg==


From java-user-return-49383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 14:22:42 2011
Return-Path: <java-user-return-49383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52441 invoked from network); 12 Apr 2011 14:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 14:22:42 -0000
Received: (qmail 5478 invoked by uid 500); 12 Apr 2011 14:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5399 invoked by uid 500); 12 Apr 2011 14:22:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5391 invoked by uid 99); 12 Apr 2011 14:22:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 14:22:39 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 14:22:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id AFC43C2185
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2011 16:22:11 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id TJN-JUDV9JPE for <java-user@lucene.apache.org>;
	Tue, 12 Apr 2011 16:22:11 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id C45C5C2243
	for <java-user@lucene.apache.org>; Tue, 12 Apr 2011 16:12:48 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 12 Apr 2011 16:12:48 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 12 Apr 2011 16:12:47 +0200
Subject: GermanFilter, Analyzer cutting off letters...
Thread-Topic: GermanFilter, Analyzer cutting off letters...
Thread-Index: Acv5G7FJwpacpjwoQ7OktkFqxElA8w==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C11359DC973@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

-- hopefully not a double post, I retried sending this post after  5h --
=20
I try to apply German*Filter and or Analyzer on my index.=20
My index contains wine names such as "Petite Arvine" ( I know, that's frenc=
h ;) ).
Whenever one oft he German*Filter or German*Analyzer is in play the terms
for "Petite Arvine" are reduced to
"Petit"
 and
"Arvin"
Why so? Where have the e's gone?

Thanks for your help
Clemens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 14:41:52 2011
Return-Path: <java-user-return-49384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22725 invoked from network); 12 Apr 2011 14:41:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 14:41:52 -0000
Received: (qmail 40216 invoked by uid 500); 12 Apr 2011 14:41:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40165 invoked by uid 500); 12 Apr 2011 14:41:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40145 invoked by uid 99); 12 Apr 2011 14:41:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 14:41:49 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 14:41:44 +0000
Received: by qyk2 with SMTP id 2so2318990qyk.14
        for <java-user@lucene.apache.org>; Tue, 12 Apr 2011 07:41:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=1m4WBIdQw01kjiLoA5VJNYLnNU7Bmm3dZtFP7L0QT0g=;
        b=Naj229LSZ02ImT7Hfd8ihDFZ8L5wsPAyhywB+tvBzdKBuPrWbKH53Pk0gW/HZlj3w9
         RTMcMqEdwUnJrW5z3nuiv1t3ySm0oKzhVAIm3GZwIL0vBmz3tis6MbhTCEPQ8L6tU6j2
         xYz+y36M6ZPmfn2gsj+8vAjc4t8cf2i4MuHY8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YDN9lEGdtqmeKf1XSzv2rc9LJX9D81y2FXOxxmGF8m6EZYwpthuMTUZuahPGTXMExx
         15To6Ogq1OfLWQRSpzG2DxjB12o6c9gWKX3nDeMAAP4m7olM52vgMDBk0f/Ja/NaGkT1
         sncb+OniP5r2iSvyao9BIvdt25jgtY9d3FtjU=
MIME-Version: 1.0
Received: by 10.229.35.1 with SMTP id n1mr5273328qcd.84.1302619283558; Tue, 12
 Apr 2011 07:41:23 -0700 (PDT)
Received: by 10.229.120.81 with HTTP; Tue, 12 Apr 2011 07:41:23 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
Date: Tue, 12 Apr 2011 10:41:23 -0400
Message-ID: <BANLkTins3Uh=tH6Swdf7VX3_kqGcoCWoMQ@mail.gmail.com>
Subject: Re: German*Filter, Analyzer "cutting" off letters from (french) words...
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368319a0ac915404a0b9af95

--0016368319a0ac915404a0b9af95
Content-Type: text/plain; charset=ISO-8859-1

I don't quite get why the German analyzer would do this, but
all the Filters I see are stemmers and I expect they'd
reduce the words as you indicate.

What version of Lucene are you using?

Best
Erick

On Tue, Apr 12, 2011 at 8:46 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:

> I try to apply German*Filter and or Analyzer on my index. My index contains
> wine names such as "Petite Arvine" ( I know, that's french ;) ). Whenever
>  one oft he German*Filter or German*Analyzer is in play the terms for
> "Petite Arvine" are reduced to
> "Petit"
> and
> "Arvin"
> Why so? Where have the e's gone?
>
> Thanks for your help
> Clemens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016368319a0ac915404a0b9af95--

From java-user-return-49385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 15:03:22 2011
Return-Path: <java-user-return-49385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90191 invoked from network); 12 Apr 2011 15:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 15:03:22 -0000
Received: (qmail 82076 invoked by uid 500); 12 Apr 2011 15:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82043 invoked by uid 500); 12 Apr 2011 15:03:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82035 invoked by uid 99); 12 Apr 2011 15:03:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 15:03:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 15:03:13 +0000
Received: by fxm7 with SMTP id 7so7325721fxm.35
        for <java-user@lucene.apache.org>; Tue, 12 Apr 2011 08:02:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=jy7GH2snJALGqLKsbquUzrkeXpHOWWqbwOxkgjAMwR0=;
        b=rGAXFLRFiw63+HzqvQw4UH0XcBkDezJu94PUTYYWQ2KdBtDd0QYu3p++SDORYa2CAQ
         ol+0/TabjKVP+EhklyRjfcqpxRFjf6BJMbyIYgF5feCu2cPl+N25gA4R0HJ8VEgpuHJa
         6BmdQDY3+IaFIF5TjsmSTL/0sWJo5aLCFXS7E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=vEfgj5Ar3n2KaXwTKQig3RCy+Y0XNxUenRa5aVww5+X0qxmgVRFJ16yV8Hu01DHThv
         4y5Lr28mo+aX5oHFOX7+LWkW7D22YT3d2onbDBlLRCXDVjtrnzE82R2QSfWPZII30TRc
         kN2qVx3E+wr8iMz4KeHfxnRNBY/50AirRHIKc=
Received: by 10.223.77.4 with SMTP id e4mr1265788fak.51.1302620573188; Tue, 12
 Apr 2011 08:02:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.72.149 with HTTP; Tue, 12 Apr 2011 08:02:33 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 12 Apr 2011 11:02:33 -0400
Message-ID: <BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
Subject: Re: German*Filter, Analyzer "cutting" off letters from (french) words...
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Apr 12, 2011 at 8:46 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> Why so? Where have the e's gone?
>

the e is being stemmed as its a german suffix... all of the german
stemming algorithms remove final -e, as do all the french stemming
algorithms.

so i don't understand your problem.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Apr 12 18:43:01 2011
Return-Path: <java-user-return-49386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31549 invoked from network); 12 Apr 2011 18:43:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 12 Apr 2011 18:43:00 -0000
Received: (qmail 75663 invoked by uid 500); 12 Apr 2011 18:42:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75626 invoked by uid 500); 12 Apr 2011 18:42:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75618 invoked by uid 99); 12 Apr 2011 18:42:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 18:42:58 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Apr 2011 18:42:51 +0000
Received: by qwj9 with SMTP id 9so5512595qwj.35
        for <java-user@lucene.apache.org>; Tue, 12 Apr 2011 11:42:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=1aeVxcn5FKi2SnnpjaPKbim1nd7D/6icpqqEfa8liSs=;
        b=lf+W4ZT4/gT6sgcJrASxwWeGcp5Ip0p2uuLkjtjRYJNaSBbfNWhoEmP7AYVSJYhb+r
         jg1ak1+Qw4JAa9sJitNA1e1wGgZ/9u7OuSs6y1SFVYecgwCVbkcnRs1OdBiO7Q84mzYf
         2RTqJlA7pVjlB/Qa7M/S/KynsPeqFkpn/EouI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=dQkj84esVH7+J9OQPosnSN68LWLZXsMbLwcsI2MUHO+YWKVhtwiWx1wLslFmtVfNte
         vqLtYengAKS7EaIJYP6HhxC9IFGUGve+QagnIH8o+DTogeMnF5ldtcQOpt7RqgzXxH0V
         1tYTuInmWjH7yBlPLq6G5K3tkCgYSaOGPuLqI=
MIME-Version: 1.0
Received: by 10.229.26.195 with SMTP id f3mr5438381qcc.8.1302633750466; Tue,
 12 Apr 2011 11:42:30 -0700 (PDT)
Received: by 10.229.120.81 with HTTP; Tue, 12 Apr 2011 11:42:30 -0700 (PDT)
In-Reply-To: <AD21521D44870544AC66F4FDFC0A474C4DDE5FB3@MAIL.otssolutions.com>
References: <AD21521D44870544AC66F4FDFC0A474C4DDE5FB3@MAIL.otssolutions.com>
Date: Tue, 12 Apr 2011 14:42:30 -0400
Message-ID: <BANLkTiniDxVj2dJSULKpO2AKcf_Cx381=w@mail.gmail.com>
Subject: Re: lucene 3.0.3 | searching problem with *.docx file
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646d4bcf811ba04a0bd0d97
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646d4bcf811ba04a0bd0d97
Content-Type: text/plain; charset=ISO-8859-1

You've given us anything to go on here, except "it doesn't work". You might
review this page:
http://wiki.apache.org/solr/UsingMailingLists

Best
Erick

On Tue, Apr 12, 2011 at 9:05 AM, Ranjit Kumar <Ranjit.Kumar@otssolutions.com
> wrote:

> Hi,
>
> I am creating index with help of StandardAnalyzer for *.docx file it's
> fine. But at the time of searching it do not gives result for these *.docx
> file.
>
> any help or suggestion will be appreciated!!!
>
>
> Thanks & Regards,
> Ranjit Kumar
> ===================================================================================================
> Private, Confidential and Privileged. This e-mail and any files and
> attachments transmitted with it are confidential and/or privileged. They are
> intended solely for the use of the intended recipient. The content of this
> e-mail and any file or attachment transmitted with it may have been changed
> or altered without the consent of the author. If you are not the intended
> recipient, please note that any review, dissemination, disclosure,
> alteration, printing, circulation or Transmission of this e-mail and/or any
> file or attachment transmitted with it, is prohibited and may be unlawful.
> If you have received this e-mail or any file or attachment transmitted with
> it in error please notify OTS Solutions at info@otssolutions.com===================================================================================================
>

--00163646d4bcf811ba04a0bd0d97--

From java-user-return-49387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 07:51:54 2011
Return-Path: <java-user-return-49387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21339 invoked from network); 13 Apr 2011 07:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 07:51:54 -0000
Received: (qmail 60262 invoked by uid 500); 13 Apr 2011 07:51:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60161 invoked by uid 500); 13 Apr 2011 07:51:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60125 invoked by uid 99); 13 Apr 2011 07:51:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 07:51:51 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 07:51:44 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 5EB44C2173
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 09:51:24 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id eQLF5MaTm4Ov for <java-user@lucene.apache.org>;
	Wed, 13 Apr 2011 09:51:24 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 2F090C2114
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 09:51:24 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Wed, 13 Apr 2011 09:51:24 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 13 Apr 2011 09:51:23 +0200
Subject: AW: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Topic: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Index: Acv5IsUJ9DJ2nHZqRoaz14b2hRPukAAjGWxA
Message-ID: <E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
 <BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
In-Reply-To: <BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

V2hhdCBJIHJlYWxseSB3YW50IHRvIGRvIGlzIGlnbm9yZSBnZXJtYW4gc3RvcCB3b3JkcyBzdWNo
IGFzICJkZXIiLCAiZGllIiwgImRhcyIsICJlaW4iLC4uLg0KDQo+IC0tLS0tVXJzcHLDvG5nbGlj
aGUgTmFjaHJpY2h0LS0tLS0NCj4gVm9uOiBSb2JlcnQgTXVpciBbbWFpbHRvOnJjbXVpckBnbWFp
bC5jb21dDQo+IEdlc2VuZGV0OiBEaWVuc3RhZywgMTIuIEFwcmlsIDIwMTEgMTc6MDMNCj4gQW46
IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBCZXRyZWZmOiBSZTogR2VybWFuKkZpbHRl
ciwgQW5hbHl6ZXIgImN1dHRpbmciIG9mZiBsZXR0ZXJzIGZyb20gKGZyZW5jaCkNCj4gd29yZHMu
Li4NCj4gDQo+IE9uIFR1ZSwgQXByIDEyLCAyMDExIGF0IDg6NDYgQU0sIENsZW1lbnMgV3lzcyA8
Y2xlbWVuc2RldkBteXNpZ24uY2g+DQo+IHdyb3RlOg0KPiA+IFdoeSBzbz8gV2hlcmUgaGF2ZSB0
aGUgZSdzIGdvbmU/DQo+ID4NCj4gDQo+IHRoZSBlIGlzIGJlaW5nIHN0ZW1tZWQgYXMgaXRzIGEg
Z2VybWFuIHN1ZmZpeC4uLiBhbGwgb2YgdGhlIGdlcm1hbiBzdGVtbWluZw0KPiBhbGdvcml0aG1z
IHJlbW92ZSBmaW5hbCAtZSwgYXMgZG8gYWxsIHRoZSBmcmVuY2ggc3RlbW1pbmcgYWxnb3JpdGht
cy4NCj4gDQo+IHNvIGkgZG9uJ3QgdW5kZXJzdGFuZCB5b3VyIHByb2JsZW0uDQo+IA0KPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJl
QGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-49388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 08:51:45 2011
Return-Path: <java-user-return-49388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17091 invoked from network); 13 Apr 2011 08:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 08:51:45 -0000
Received: (qmail 42784 invoked by uid 500); 13 Apr 2011 08:51:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42731 invoked by uid 500); 13 Apr 2011 08:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42702 invoked by uid 99); 13 Apr 2011 08:51:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 08:51:39 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 08:51:33 +0000
Received: by vxa37 with SMTP id 37so428479vxa.35
        for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 01:51:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=yEjspCF2Hw5w+ZY4zwHwif/8/4u3MniLB1dx6/JVFdA=;
        b=wr6eiuqB29pkQAppIPVld47DyGNKmqdGdWx2uaTIchBgrpZYtem/OiTyrHeWRTJ7Oc
         k2wZRBCJkth85FRQWr9v4XaM04SMfGpuRifuUpRlljUFjKBbYa7i4dBq3ZR4z4DMkXZC
         oLHEx9qhqccpzLu0+HoBysEse1aCBAUanE4xg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=YpgwLN3ONOdgucHsKYUm5O4FKzd6niNfGH4aUlEX5uiX9HCpsUa3MWpATbUk92ntmK
         tiOfBoovPsZFe+kPTJhdxzrUbtSHaWux+vFSAq1t+Y8eH7iKnhI55iWtQoPbIOJgNZ7P
         qvw0HUm76cgBoEkDrnSktOmfazkTbXfeJ2xoE=
MIME-Version: 1.0
Received: by 10.52.18.15 with SMTP id s15mr9471710vdd.224.1302684672179; Wed,
 13 Apr 2011 01:51:12 -0700 (PDT)
Received: by 10.52.165.35 with HTTP; Wed, 13 Apr 2011 01:51:12 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
	<BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
Date: Wed, 13 Apr 2011 10:51:12 +0200
Message-ID: <BANLkTi=o_SXauV-soc8vm6jBdGmf56ehUA@mail.gmail.com>
Subject: Re: German*Filter, Analyzer "cutting" off letters from (french) words...
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Cc: Clemens Wyss <clemensdev@mysign.ch>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Apr 13, 2011 at 9:51 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> What I really want to do is ignore german stop words such as "der", "die"=
, "das", "ein",...

GermanAnalyzer takes a stemExclusionSet if you put those terms into
this set the stemmer will not touch them. This should be in 3.1 I
think

public GermanAnalyzer(Version matchVersion, Set<?> stopwords, Set<?>
stemExclusionSet)

simon

>
>> -----Urspr=C3=BCngliche Nachricht-----
>> Von: Robert Muir [mailto:rcmuir@gmail.com]
>> Gesendet: Dienstag, 12. April 2011 17:03
>> An: java-user@lucene.apache.org
>> Betreff: Re: German*Filter, Analyzer "cutting" off letters from (french)
>> words...
>>
>> On Tue, Apr 12, 2011 at 8:46 AM, Clemens Wyss <clemensdev@mysign.ch>
>> wrote:
>> > Why so? Where have the e's gone?
>> >
>>
>> the e is being stemmed as its a german suffix... all of the german stemm=
ing
>> algorithms remove final -e, as do all the french stemming algorithms.
>>
>> so i don't understand your problem.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 09:17:58 2011
Return-Path: <java-user-return-49389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81253 invoked from network); 13 Apr 2011 09:17:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 09:17:58 -0000
Received: (qmail 79764 invoked by uid 500); 13 Apr 2011 09:17:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79137 invoked by uid 500); 13 Apr 2011 09:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79127 invoked by uid 99); 13 Apr 2011 09:17:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 09:17:49 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 09:17:44 +0000
Received: by vws7 with SMTP id 7so451920vws.35
        for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 02:17:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=ni4d4iNtNo4/hnLFf0iwsJdLmejzwQ6Pfv/tsJKcHd8=;
        b=xweH1Ged4YY5RSK42OgcvysilYahpdEjXHPcbZvSOunmdwXyP+v2FpMp5ZsqhU5HOp
         8LPvee1JEspzumZGM/Y0Riw1fpsq23SPaU8ncY6AxlmJxB1gNX0HhVZ5mFMTQE2Q2hIP
         LsKblWgLuc5OFUhscOrZqFnjlPUiblvLibxl8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=gZeEwNRPGut+is9sxIEoJeJussNEfpLVLeZctSDICBb96CDmyB/3st48Tx114Q98uV
         Gq4xM6TrK/PR56HWTliZ1CDGpN4I96gfWD4Zk7fDPlacW9huiLz8JlBbz1JfHHCvFqXp
         5jIewGTgDBfVcJx5FVQv72G/YtK5GMaJhtqwk=
MIME-Version: 1.0
Received: by 10.52.18.103 with SMTP id v7mr1758397vdd.64.1302686243889; Wed,
 13 Apr 2011 02:17:23 -0700 (PDT)
Received: by 10.52.165.35 with HTTP; Wed, 13 Apr 2011 02:17:23 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DC9E8@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
	<BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
	<BANLkTi=o_SXauV-soc8vm6jBdGmf56ehUA@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DC9E8@Exchange2007.mysigndomain.corp>
Date: Wed, 13 Apr 2011 11:17:23 +0200
Message-ID: <BANLkTik1kd0iMveobAm8pWZ9LtfxvEybLw@mail.gmail.com>
Subject: Re: German*Filter, Analyzer "cutting" off letters from (french) words...
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: Clemens Wyss <clemensdev@mysign.ch>
Cc: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Apr 13, 2011 at 11:03 AM, Clemens Wyss <clemensdev@mysign.ch> wrote=
:
> I tried:
> Set<String> stemsToBeIgnored =3D new HashSet<String>(Arrays.asList( "e" )=
);
> GermanAnalyzer ga =3D new GermanAnalyzer( Version.LUCENE_31, GermanAnalyz=
er.getDefaultStopSet(), stemsToBeIgnored );

try Arrays.asList("der", "die", "das", "ein");

or do I get you wrong....

simon
>
> But the e's are still "removed"...
>
>> -----Urspr=C3=BCngliche Nachricht-----
>> Von: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
>> Gesendet: Mittwoch, 13. April 2011 10:51
>> An: java-user@lucene.apache.org
>> Cc: Clemens Wyss
>> Betreff: Re: German*Filter, Analyzer "cutting" off letters from (french)
>> words...
>>
>> On Wed, Apr 13, 2011 at 9:51 AM, Clemens Wyss <clemensdev@mysign.ch>
>> wrote:
>> > What I really want to do is ignore german stop words such as "der", "d=
ie",
>> "das", "ein",...
>>
>> GermanAnalyzer takes a stemExclusionSet if you put those terms into this
>> set the stemmer will not touch them. This should be in 3.1 I think
>>
>> public GermanAnalyzer(Version matchVersion, Set<?> stopwords, Set<?>
>> stemExclusionSet)
>>
>> simon
>>
>> >
>> >> -----Urspr=C3=BCngliche Nachricht-----
>> >> Von: Robert Muir [mailto:rcmuir@gmail.com]
>> >> Gesendet: Dienstag, 12. April 2011 17:03
>> >> An: java-user@lucene.apache.org
>> >> Betreff: Re: German*Filter, Analyzer "cutting" off letters from
>> >> (french) words...
>> >>
>> >> On Tue, Apr 12, 2011 at 8:46 AM, Clemens Wyss
>> <clemensdev@mysign.ch>
>> >> wrote:
>> >> > Why so? Where have the e's gone?
>> >> >
>> >>
>> >> the e is being stemmed as its a german suffix... all of the german
>> >> stemming algorithms remove final -e, as do all the french stemming
>> algorithms.
>> >>
>> >> so i don't understand your problem.
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 10:19:00 2011
Return-Path: <java-user-return-49390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77416 invoked from network); 13 Apr 2011 10:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 10:19:00 -0000
Received: (qmail 38677 invoked by uid 500); 13 Apr 2011 10:18:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38639 invoked by uid 500); 13 Apr 2011 10:18:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38631 invoked by uid 99); 13 Apr 2011 10:18:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 10:18:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 10:18:52 +0000
Received: by bwz8 with SMTP id 8so718612bwz.35
        for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 03:18:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=DE/sQR4q0OWxXJfcua4Cf3guwm12YyVV4uj8DguSOf4=;
        b=BjWO0MGZySkoMe+lu88tzHRnrvyUE4dzXudbW38/osTb/GI/n4Ao5zpynyCgugGX+r
         oGkXtzZcAYqv3uGeqQmKtkcQ8nt/1AZ4BxyxzV0lOzOZvNzJpO89nves0xvnxPSWKBFf
         osiim1o1RZ8S3mGmRJsX77jfO5gcLrC+rwiHg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=p4BoxWuPFUJPVda89KPec1h3gOtqDZ2csgM/i4rm0MVv6vvFy/rst8Y4ZJ8JFqhp3r
         cYySmmHdSv1W3QY/HOB70yhrr2DMNY/T3qvKCWzlGNY1WZzpDvvt3imCePqUiNuuvQvC
         lnRAHu019F3REyUbkTp/taniE3vvpzbSIlYRk=
Received: by 10.204.45.152 with SMTP id e24mr6791029bkf.47.1302689911111; Wed,
 13 Apr 2011 03:18:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.76.14 with HTTP; Wed, 13 Apr 2011 03:11:00 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
 <BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 13 Apr 2011 06:11:00 -0400
Message-ID: <BANLkTi=Dejok50UzYfNy3VZ+mSgcoGXtKA@mail.gmail.com>
Subject: Re: German*Filter, Analyzer "cutting" off letters from (french) words...
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

If you only want to ignore german stopwords, you don't need to use the
german analyzer with german stemming. you can just use
StandardAnalyzer with your own stopwords set!

On Wed, Apr 13, 2011 at 3:51 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> What I really want to do is ignore german stop words such as "der", "die"=
, "das", "ein",...
>
>> -----Urspr=C3=BCngliche Nachricht-----
>> Von: Robert Muir [mailto:rcmuir@gmail.com]
>> Gesendet: Dienstag, 12. April 2011 17:03
>> An: java-user@lucene.apache.org
>> Betreff: Re: German*Filter, Analyzer "cutting" off letters from (french)
>> words...
>>
>> On Tue, Apr 12, 2011 at 8:46 AM, Clemens Wyss <clemensdev@mysign.ch>
>> wrote:
>> > Why so? Where have the e's gone?
>> >
>>
>> the e is being stemmed as its a german suffix... all of the german stemm=
ing
>> algorithms remove final -e, as do all the french stemming algorithms.
>>
>> so i don't understand your problem.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 11:34:05 2011
Return-Path: <java-user-return-49391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30546 invoked from network); 13 Apr 2011 11:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 11:34:04 -0000
Received: (qmail 9921 invoked by uid 500); 13 Apr 2011 11:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9887 invoked by uid 500); 13 Apr 2011 11:34:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9879 invoked by uid 99); 13 Apr 2011 11:34:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 11:34:02 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 11:33:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id CB02BC2173
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 13:33:35 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hlwt2qEQVuo0 for <java-user@lucene.apache.org>;
	Wed, 13 Apr 2011 13:33:35 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id A7B17C2114
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 13:33:35 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Wed, 13 Apr 2011 13:33:35 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 13 Apr 2011 13:33:34 +0200
Subject: AW: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Topic: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Index: Acv5xDWWLCTgZkd1S/efiwKWFyy28gACG9WA
Message-ID: <E594BA962D832C49A3CF858DAA3A696C11359DCA01@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
 <BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
 <BANLkTi=Dejok50UzYfNy3VZ+mSgcoGXtKA@mail.gmail.com>
In-Reply-To: <BANLkTi=Dejok50UzYfNy3VZ+mSgcoGXtKA@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

VGhpcyBpcyB3aGF0IEkgd2FzIGxvb2tpbmcgZm9yLCB0aGFua3MNCg0KPiAtLS0tLVVyc3Byw7xu
Z2xpY2hlIE5hY2hyaWNodC0tLS0tDQo+IFZvbjogUm9iZXJ0IE11aXIgW21haWx0bzpyY211aXJA
Z21haWwuY29tXQ0KPiBHZXNlbmRldDogTWl0dHdvY2gsIDEzLiBBcHJpbCAyMDExIDEyOjExDQo+
IEFuOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gQmV0cmVmZjogUmU6IEdlcm1hbipG
aWx0ZXIsIEFuYWx5emVyICJjdXR0aW5nIiBvZmYgbGV0dGVycyBmcm9tIChmcmVuY2gpDQo+IHdv
cmRzLi4uDQo+IA0KPiBJZiB5b3Ugb25seSB3YW50IHRvIGlnbm9yZSBnZXJtYW4gc3RvcHdvcmRz
LCB5b3UgZG9uJ3QgbmVlZCB0byB1c2UgdGhlDQo+IGdlcm1hbiBhbmFseXplciB3aXRoIGdlcm1h
biBzdGVtbWluZy4geW91IGNhbiBqdXN0IHVzZSBTdGFuZGFyZEFuYWx5emVyDQo+IHdpdGggeW91
ciBvd24gc3RvcHdvcmRzIHNldCENCj4gDQo+IE9uIFdlZCwgQXByIDEzLCAyMDExIGF0IDM6NTEg
QU0sIENsZW1lbnMgV3lzcyA8Y2xlbWVuc2RldkBteXNpZ24uY2g+DQo+IHdyb3RlOg0KPiA+IFdo
YXQgSSByZWFsbHkgd2FudCB0byBkbyBpcyBpZ25vcmUgZ2VybWFuIHN0b3Agd29yZHMgc3VjaCBh
cyAiZGVyIiwgImRpZSIsDQo+ICJkYXMiLCAiZWluIiwuLi4NCj4gPg0KPiA+PiAtLS0tLVVyc3By
w7xuZ2xpY2hlIE5hY2hyaWNodC0tLS0tDQo+ID4+IFZvbjogUm9iZXJ0IE11aXIgW21haWx0bzpy
Y211aXJAZ21haWwuY29tXQ0KPiA+PiBHZXNlbmRldDogRGllbnN0YWcsIDEyLiBBcHJpbCAyMDEx
IDE3OjAzDQo+ID4+IEFuOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4gQmV0cmVm
ZjogUmU6IEdlcm1hbipGaWx0ZXIsIEFuYWx5emVyICJjdXR0aW5nIiBvZmYgbGV0dGVycyBmcm9t
DQo+ID4+IChmcmVuY2gpIHdvcmRzLi4uDQo+ID4+DQo+ID4+IE9uIFR1ZSwgQXByIDEyLCAyMDEx
IGF0IDg6NDYgQU0sIENsZW1lbnMgV3lzcw0KPiA8Y2xlbWVuc2RldkBteXNpZ24uY2g+DQo+ID4+
IHdyb3RlOg0KPiA+PiA+IFdoeSBzbz8gV2hlcmUgaGF2ZSB0aGUgZSdzIGdvbmU/DQo+ID4+ID4N
Cj4gPj4NCj4gPj4gdGhlIGUgaXMgYmVpbmcgc3RlbW1lZCBhcyBpdHMgYSBnZXJtYW4gc3VmZml4
Li4uIGFsbCBvZiB0aGUgZ2VybWFuDQo+ID4+IHN0ZW1taW5nIGFsZ29yaXRobXMgcmVtb3ZlIGZp
bmFsIC1lLCBhcyBkbyBhbGwgdGhlIGZyZW5jaCBzdGVtbWluZw0KPiBhbGdvcml0aG1zLg0KPiA+
Pg0KPiA+PiBzbyBpIGRvbid0IHVuZGVyc3RhbmQgeW91ciBwcm9ibGVtLg0KPiA+Pg0KPiA+PiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NCj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4NCj4gPg0KPiANCj4g
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
OiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-49392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 11:43:45 2011
Return-Path: <java-user-return-49392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53313 invoked from network); 13 Apr 2011 11:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 11:43:44 -0000
Received: (qmail 22379 invoked by uid 500); 13 Apr 2011 11:43:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22245 invoked by uid 500); 13 Apr 2011 11:43:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22237 invoked by uid 99); 13 Apr 2011 11:43:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 11:43:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO homiemail-a20.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 11:43:37 +0000
Received: from homiemail-a20.g.dreamhost.com (localhost [127.0.0.1])
	by homiemail-a20.g.dreamhost.com (Postfix) with ESMTP id 3B3A07EC065
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 04:43:16 -0700 (PDT)
Received: from [10.24.157.223] (h-67-101-114-10.snfccasy.static.covad.net [67.101.114.10])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	(Authenticated sender: trainer@lucenebootcamp.com)
	by homiemail-a20.g.dreamhost.com (Postfix) with ESMTPSA id 0F2F97EC064
	for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 04:43:15 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: some basic questions on how Lucene/search engines work
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <BANLkTim0MUHGq3rPZTotsQHheCOYvKbr8g@mail.gmail.com>
Date: Wed, 13 Apr 2011 04:43:15 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <7E1B75C5-E553-4334-B8CD-147C61AA8C0D@apache.org>
References: <BANLkTim0MUHGq3rPZTotsQHheCOYvKbr8g@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)


On Apr 7, 2011, at 9:17 PM, Yang wrote:

> I'm new to lucene/search engine , and have been struggling with these
> questions recently.
> I'd appreciate a lot of you could shed some light on this.
>=20
>=20
> let's say I do a query on
>=20
> dog   greyhound
>=20
> note that I did not quote them, i.e. this is not a phrase search.
>=20
> what happens under the hood ?

A lot and it is really beyond the scope of an email, but...

Assuming dog and greyhound are not removed by analysis, it will go to =
the inverted index and look up each of the terms and the documents for =
each of the terms and score them (see BooleanQuery for how it combines =
them).  I would suggest setting up a really simple program that does =
this query and then just step through the code.  You may even want to =
start a little simpler with a single term.

>=20
> which term does Lucene use to look up the inverted Index ?

Both


> I read somewhere that Lucene uses the term with the higher IDF (i.e.
> the more distinguishing term), i.e. in this case
> "greyhound", but what about dog? does Lucene traverse down the doclist
> of  "dog" at all?

Yes, it does.

> if I provide multiple terms in my query,
> generally how does Lucene decide how many doclists to travel down?
>=20

I don't believe we currently do any pruning, so all will be visited.

>=20
> I read that Lucene uses a combination of "binary model"

I would say "Boolean Model"

> and  VSM, then
> it seems that in the above case, it finds
> the full doclist of dog , and that of "greyhound", (the binary model
> part), then find the common docs from the two doclists,
> then order them by scores ( the VSM part).

Yes, assuming an AND combines them.  If it's an OR, then it will union =
the lists. =20

>  is it true that the FULL
> doclists are fetched first? or is some pruning done on the individual
> doclists?

All docs that contain the word are scored and can potentially be =
returned if you have enough time/memory (not recommended)

> I see the
> talk in http://www.slideshare.net/abial/eurocon2010  that talks about
> pruning and tiered search, but is this the default behavior of Lucene?

That is more advanced and is something you can do w/ Lucene, but is not =
out of the box.

> how are the doclists sorted? (by  idf ?? --- sorry I'm just beginning
> to sift through a lot of docs online, somehow got this impression but
> can't form a precise conclusion)
>=20

It depends on the query, etc.  Have a look at the Scoring page on the =
website for more info.

>=20
>=20
> also generally, could you please provide some good articles on how
> lucene/search engines work? I've read the "anatomy of a search engine"
> (google Sergey Brin & Larry Page paper),
> "introduction to information retrieval (Manning et al ) "  , "Lucene
> in action" ....

I'd start w/ Lucene in Action 2nd ed.  Brin and Page paper is good.  As =
is the Manning book, Baeza Yates, Grossman, etc.  I believe we have a =
resources page on our Wiki that lists out a lot of books and talks.

I would recommend, however, just trying out small examples of different =
queries and stepping through the code if you really want to know the =
guts of Lucene.

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem docs using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 13:15:45 2011
Return-Path: <java-user-return-49393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65392 invoked from network); 13 Apr 2011 13:15:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 13:15:44 -0000
Received: (qmail 74231 invoked by uid 500); 13 Apr 2011 13:15:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74173 invoked by uid 500); 13 Apr 2011 13:15:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74165 invoked by uid 99); 13 Apr 2011 13:15:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 13:15:42 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pulkitsinghal@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 13:15:36 +0000
Received: by vxa37 with SMTP id 37so632767vxa.35
        for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 06:15:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=1+T+KwcSyLL5iGs8j1bfekkSvkUu2pooAu9xMFq4KSg=;
        b=REoC56YXI04JJTZDQF+2KoKOnEa3WObAqINKh6MZZNMKIvDMauSnAxtlTKmkYstiA4
         8MdDsYaMF7I/Tkr4WfWYgb8o3zEYxAS+Y6cjK19OS83lvZG6FEvh7hQJyfprWgidDxCH
         Ui3GlerfzAg8p7c6OpM84kh/AwvXAfgAqou3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=nNbakuasOfexlcwBZuRY2m7tLPNj1mDYR2fIHAyyEgHzqlb3KJlN8wd+/cWqQbchcC
         7qRR1FqVrY7y8BCaRhyQxNA3b56d2PoF67XVymt56s62EyLHP5kbK3ysD57GKdPsibLK
         +weaIq9ZGiDoLEF55sw/QscVXyxK8y24htOt4=
MIME-Version: 1.0
Received: by 10.220.186.195 with SMTP id ct3mr2293359vcb.84.1302700515317;
 Wed, 13 Apr 2011 06:15:15 -0700 (PDT)
Received: by 10.220.178.11 with HTTP; Wed, 13 Apr 2011 06:15:15 -0700 (PDT)
Date: Wed, 13 Apr 2011 09:15:15 -0400
Message-ID: <BANLkTinR5sDHinamagf4M-dwxY_RK6QoLg@mail.gmail.com>
Subject: Update Document based on Query instead of Term
From: Pulkit Singhal <pulkitsinghal@gmail.com>
To: Lucene <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8

Lucene's IndexWriter allows users to update documents by Term via this
method signature:
void updateDocument(Term term, Document doc)

But what about updating them by Query? Like so:
void updateDocument(Query query, Document doc)

1) How can this be done? As far as I know there is no such method
signature right now. In my data there is no way for me to uniquely
identify a document for update without matching more that one term, so
I really need to use a Query.
2) Would it be better to change the initial underlying indexing
process such that the multiple fields (that can identify a unique
document) will be concatenated into one string and indexed? Then that
field can be used for identification when doing updates? Is this the
common practice?
3) Or, would it be better to use the Query I have to search for the
docID that the Lucene index assigns to the data inside it and then try
to update based on that? Will I get in trouble here somehow?

Any tips are appreciated.

Thanks!
- Pulkit

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 13:36:04 2011
Return-Path: <java-user-return-49394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40749 invoked from network); 13 Apr 2011 13:36:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 13:36:04 -0000
Received: (qmail 12003 invoked by uid 500); 13 Apr 2011 13:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11889 invoked by uid 500); 13 Apr 2011 13:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11881 invoked by uid 99); 13 Apr 2011 13:36:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 13:36:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 13:35:56 +0000
Received: by vxa37 with SMTP id 37so657677vxa.35
        for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 06:35:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=Y/ZKPOOWjS8VleS3EzNJODvBxmGguv9XsSAuBlC8qoM=;
        b=S5zpc0dX706GPzmzVNQBN542kWuo0AtivyI3vwON6Z5Ao+7jIGgpl9XJ86Sue3IZTA
         I00qR10wC1PbLnRFsjL0380uxmQWlItFtflakow6MKSSk8iK9Z00ItGqvhkKmKM+2X2q
         6K8221hKxh/qegzbP0ZPL+pdl/46q8tSzwmzo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=IJxhwVqSawzDKv5EuWnXN3DunQcEc9ggwqEzVCvuVXUcSnp+gtVs/B+Y8g9C79WA2a
         LiAr/6tJv94DcXBcgh8XJgYPNus5pu4fkhawflVSkHwH3DlPM0puRRFhWErpyro5QO1A
         72axfSa0GEZJwKB5svCtNrlz7cy5sShxM+7Ag=
Received: by 10.52.68.106 with SMTP id v10mr11587791vdt.242.1302701735250;
 Wed, 13 Apr 2011 06:35:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.156.230 with HTTP; Wed, 13 Apr 2011 06:35:15 -0700 (PDT)
In-Reply-To: <BANLkTinR5sDHinamagf4M-dwxY_RK6QoLg@mail.gmail.com>
References: <BANLkTinR5sDHinamagf4M-dwxY_RK6QoLg@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 13 Apr 2011 19:05:15 +0530
Message-ID: <BANLkTikW4gOQqyYqcs7FzJTEoPCrgNLE3A@mail.gmail.com>
Subject: Re: Update Document based on Query instead of Term
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307cff1a2d8d3104a0cce25b

--20cf307cff1a2d8d3104a0cce25b
Content-Type: text/plain; charset=ISO-8859-1

So Update basically is nothing but delete and add (a fresh doc). You could
just go ahead at using the deletedocument(Query query) function and then
adding the new document? That is the general approach for such cases and it
works just about fine.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Wed, Apr 13, 2011 at 6:45 PM, Pulkit Singhal <pulkitsinghal@gmail.com>wrote:

> Lucene's IndexWriter allows users to update documents by Term via this
> method signature:
> void updateDocument(Term term, Document doc)
>
> But what about updating them by Query? Like so:
> void updateDocument(Query query, Document doc)
>
> 1) How can this be done? As far as I know there is no such method
> signature right now. In my data there is no way for me to uniquely
> identify a document for update without matching more that one term, so
> I really need to use a Query.
> 2) Would it be better to change the initial underlying indexing
> process such that the multiple fields (that can identify a unique
> document) will be concatenated into one string and indexed? Then that
> field can be used for identification when doing updates? Is this the
> common practice?
> 3) Or, would it be better to use the Query I have to search for the
> docID that the Lucene index assigns to the data inside it and then try
> to update based on that? Will I get in trouble here somehow?
>
> Any tips are appreciated.
>
> Thanks!
> - Pulkit
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf307cff1a2d8d3104a0cce25b--

From java-user-return-49395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 13:51:49 2011
Return-Path: <java-user-return-49395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3397 invoked from network); 13 Apr 2011 13:51:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 13:51:48 -0000
Received: (qmail 42450 invoked by uid 500); 13 Apr 2011 13:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42395 invoked by uid 500); 13 Apr 2011 13:51:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42289 invoked by uid 99); 13 Apr 2011 13:51:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 13:51:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [91.121.16.47] (HELO ns23917.ovh.net) (91.121.16.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 13:51:38 +0000
Received: (qmail 29403 invoked by uid 508); 13 Apr 2011 14:03:07 -0000
Received: from unknown (HELO spotter-dclnx.intra.spotter.com) (88.182.17.109)
  by ns23917.ovh.net with AES256-SHA encrypted SMTP; 13 Apr 2011 14:03:07 -0000
Received: from techno by spotter-dclnx.intra.spotter.com with local (Exim 4.72)
	(envelope-from <dcausse@spotter.com>)
	id 1QA0TV-00048S-NT
	for java-user@lucene.apache.org; Wed, 13 Apr 2011 15:51:17 +0200
Date: Wed, 13 Apr 2011 15:51:17 +0200
From: David Causse <dcausse@spotter.com>
To: java-user@lucene.apache.org
Subject: Re: Update Document based on Query instead of Term
Message-ID: <20110413135117.GA5912@spotter-dclnx>
Mail-Followup-To: David Causse <dcausse@spotter.com>,
	java-user@lucene.apache.org
References: <BANLkTinR5sDHinamagf4M-dwxY_RK6QoLg@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <BANLkTinR5sDHinamagf4M-dwxY_RK6QoLg@mail.gmail.com>
User-Agent: Mutt/1.5.20 (2009-06-14)
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Apr 13, 2011 at 09:15:15AM -0400, Pulkit Singhal wrote:
> Lucene's IndexWriter allows users to update documents by Term via this
> method signature:
> void updateDocument(Term term, Document doc)
> 
> But what about updating them by Query? Like so:
> void updateDocument(Query query, Document doc)

Hi,

as updateDocument(Term t, Document d) is just a delete + add, you can
use :
IndexWriter.delete(Query query);
IndexWriter.add(Document d);

Regards.

-- 
David Causse
Spotter
http://www.spotter.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Apr 13 15:53:00 2011
Return-Path: <java-user-return-49396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10136 invoked from network); 13 Apr 2011 15:53:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 13 Apr 2011 15:53:00 -0000
Received: (qmail 12229 invoked by uid 500); 13 Apr 2011 15:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12187 invoked by uid 500); 13 Apr 2011 15:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12179 invoked by uid 99); 13 Apr 2011 15:52:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 15:52:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HK_RANDOM_ENVFROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of teddyyyy123@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Apr 2011 15:52:53 +0000
Received: by gxk7 with SMTP id 7so411660gxk.35
        for <java-user@lucene.apache.org>; Wed, 13 Apr 2011 08:52:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=08bu3nKux1//oMGx9ALLGYSClxko168c9IDcM3MEOqg=;
        b=kjxbDhaFQV5gBox5wklC8okEiOAug/3vtwlKym4veO2dgvUefCLpL6+AELIxV6OsBb
         hs+Z57LypaMvKCC0Wo1/fBG1SuK9fdRVsoLDU8LPans9QTlj6flzb/aBKLoDiFKCTYE+
         Nc0i22GXPdurwE81mshGuGdivYAe2o99b1TBQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Hrrw2njPeZt9VnzN0MzLaYhWAbfU5duP5VJSgmkWYDhwTptfHfuFA9orF0pqrLZmIB
         dfIzKTfDm7Doqmy5WS0ne6rc0QBedpHhLMGulXS+CRwrJtmb6kc0omqu/8bcZl1XqwaO
         cxwOenv1sEc9Q2Iw3xoYPpjWGieh33bi20GIA=
MIME-Version: 1.0
Received: by 10.236.77.137 with SMTP id d9mr1380130yhe.187.1302709952918; Wed,
 13 Apr 2011 08:52:32 -0700 (PDT)
Received: by 10.236.95.16 with HTTP; Wed, 13 Apr 2011 08:52:32 -0700 (PDT)
In-Reply-To: <7E1B75C5-E553-4334-B8CD-147C61AA8C0D@apache.org>
References: <BANLkTim0MUHGq3rPZTotsQHheCOYvKbr8g@mail.gmail.com>
	<7E1B75C5-E553-4334-B8CD-147C61AA8C0D@apache.org>
Date: Wed, 13 Apr 2011 08:52:32 -0700
Message-ID: <BANLkTinWHCqAprmaT8Cpo_RUDQqg1dJMDg@mail.gmail.com>
Subject: Re: some basic questions on how Lucene/search engines work
From: Yang <teddyyyy123@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

thanks a lot for the detailed info!

On Wed, Apr 13, 2011 at 4:43 AM, Grant Ingersoll <gsingers@apache.org> wrot=
e:
>
> On Apr 7, 2011, at 9:17 PM, Yang wrote:
>
>> I'm new to lucene/search engine , and have been struggling with these
>> questions recently.
>> I'd appreciate a lot of you could shed some light on this.
>>
>>
>> let's say I do a query on
>>
>> dog =A0 greyhound
>>
>> note that I did not quote them, i.e. this is not a phrase search.
>>
>> what happens under the hood ?
>
> A lot and it is really beyond the scope of an email, but...
>
> Assuming dog and greyhound are not removed by analysis, it will go to the=
 inverted index and look up each of the terms and the documents for each of=
 the terms and score them (see BooleanQuery for how it combines them). =A0I=
 would suggest setting up a really simple program that does this query and =
then just step through the code. =A0You may even want to start a little sim=
pler with a single term.
>
>>
>> which term does Lucene use to look up the inverted Index ?
>
> Both
>
>
>> I read somewhere that Lucene uses the term with the higher IDF (i.e.
>> the more distinguishing term), i.e. in this case
>> "greyhound", but what about dog? does Lucene traverse down the doclist
>> of =A0"dog" at all?
>
> Yes, it does.
>
>> if I provide multiple terms in my query,
>> generally how does Lucene decide how many doclists to travel down?
>>
>
> I don't believe we currently do any pruning, so all will be visited.
>
>>
>> I read that Lucene uses a combination of "binary model"
>
> I would say "Boolean Model"
>
>> and =A0VSM, then
>> it seems that in the above case, it finds
>> the full doclist of dog , and that of "greyhound", (the binary model
>> part), then find the common docs from the two doclists,
>> then order them by scores ( the VSM part).
>
> Yes, assuming an AND combines them. =A0If it's an OR, then it will union =
the lists.
>
>> =A0is it true that the FULL
>> doclists are fetched first? or is some pruning done on the individual
>> doclists?
>
> All docs that contain the word are scored and can potentially be returned=
 if you have enough time/memory (not recommended)
>
>> I see the
>> talk in http://www.slideshare.net/abial/eurocon2010 =A0that talks about
>> pruning and tiered search, but is this the default behavior of Lucene?
>
> That is more advanced and is something you can do w/ Lucene, but is not o=
ut of the box.
>
>> how are the doclists sorted? (by =A0idf ?? --- sorry I'm just beginning
>> to sift through a lot of docs online, somehow got this impression but
>> can't form a precise conclusion)
>>
>
> It depends on the query, etc. =A0Have a look at the Scoring page on the w=
ebsite for more info.
>
>>
>>
>> also generally, could you please provide some good articles on how
>> lucene/search engines work? I've read the "anatomy of a search engine"
>> (google Sergey Brin & Larry Page paper),
>> "introduction to information retrieval (Manning et al ) " =A0, "Lucene
>> in action" ....
>
> I'd start w/ Lucene in Action 2nd ed. =A0Brin and Page paper is good. =A0=
As is the Manning book, Baeza Yates, Grossman, etc. =A0I believe we have a =
resources page on our Wiki that lists out a lot of books and talks.
>
> I would recommend, however, just trying out small examples of different q=
ueries and stepping through the code if you really want to know the guts of=
 Lucene.
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
> Search the Lucene ecosystem docs using Solr/Lucene:
> http://www.lucidimagination.com/search
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 09:30:06 2011
Return-Path: <java-user-return-49397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38801 invoked from network); 14 Apr 2011 09:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 09:30:06 -0000
Received: (qmail 20627 invoked by uid 500); 14 Apr 2011 09:30:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20179 invoked by uid 500); 14 Apr 2011 09:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20168 invoked by uid 99); 14 Apr 2011 09:29:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 09:29:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.75.116.14] (HELO mail.wehay.com) (217.75.116.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 09:29:49 +0000
Received: from [192.168.24.69] ([217.75.116.61])
	(authenticated bits=0)
	by mail.wehay.com (8.14.3/8.14.4) with ESMTP id p3E9TOQl012259
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 11:29:26 +0200
Message-ID: <4DA6BE6D.9030109@thorntothehorn.org>
Date: Thu, 14 Apr 2011 19:29:17 +1000
From: Antony Bowesman <adb@thorntothehorn.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: Index time boost question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I have a test case written for 2.3.2 that tested an index time boost on a field 
of 0.0F and then did a search using Hits and got 0 results.

I'm now in the process of upgrading to 2.9.4 and am removing all use of Hits in 
my test cases and using a Collector instead.  Now the test case fails as it gets 
one result with a score of 0.0.

Is it correct that the Collector will collect hits with 0 score.  If so, I need 
to change my test case.

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 11:36:59 2011
Return-Path: <java-user-return-49398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71986 invoked from network); 14 Apr 2011 11:36:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 11:36:59 -0000
Received: (qmail 3189 invoked by uid 500); 14 Apr 2011 11:36:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3147 invoked by uid 500); 14 Apr 2011 11:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3139 invoked by uid 99); 14 Apr 2011 11:36:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 11:36:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.75.116.14] (HELO mail.wehay.com) (217.75.116.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 11:36:49 +0000
Received: from [192.168.24.69] ([217.75.116.61])
	(authenticated bits=0)
	by mail.wehay.com (8.14.3/8.14.4) with ESMTP id p3EBaOld023256
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 13:36:27 +0200
Message-ID: <4DA6DC31.6030102@thorntothehorn.org>
Date: Thu, 14 Apr 2011 21:36:17 +1000
From: Antony Bowesman <adb@thorntothehorn.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: NullPointerException in FieldSortedHitQueue
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Upgrading from 2.3.2 to 2.9.4 I get NPE as below

Caused by: java.lang.NullPointerException
	at 
org.apache.lucene.search.FieldSortedHitQueue$1.createValue(FieldSortedHitQueue.java:224)
	at org.apache.lucene.search.FieldCacheImpl$Cache.get(FieldCacheImpl.java:224)
	at 
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:176)
	at org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56)

I have a SortField that is created something like

new SortField(fieldName, comparator)

which generates a custom SortField, but in the call to Comparators.get() fails 
because createValue in FieldSortedHitQueue calls

         case SortField.CUSTOM:
           comparator = factory.newComparator (reader, fieldname);

and factory is null.

Is this a bug?  I know FSHQ is deprecated, but presumably it should still work 
with a SortField containing a comparator?

Thanks
Antony

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 11:45:25 2011
Return-Path: <java-user-return-49399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82497 invoked from network); 14 Apr 2011 11:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 11:45:25 -0000
Received: (qmail 23034 invoked by uid 500); 14 Apr 2011 11:45:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22992 invoked by uid 500); 14 Apr 2011 11:45:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22984 invoked by uid 99); 14 Apr 2011 11:45:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 11:45:22 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 11:45:16 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1QAKyk-00076Y-F3
	for java-user@lucene.apache.org; Thu, 14 Apr 2011 04:44:54 -0700
Date: Thu, 14 Apr 2011 04:44:54 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <1302781494458-2819970.post@n3.nabble.com>
Subject: switching between Query parsers
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Consider this case : 

Lucene index contains documents with these fields : 
title
author
publisher

I have coded my app to use MultiFieldQueryParser so that it queries all
fields. 
Now if user types something like "author:tom" in search box, how do I make
it go with only that field ? 


--
View this message in context: http://lucene.472066.n3.nabble.com/switching-between-Query-parsers-tp2819970p2819970.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 15:57:08 2011
Return-Path: <java-user-return-49400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44451 invoked from network); 14 Apr 2011 15:57:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 15:57:08 -0000
Received: (qmail 18197 invoked by uid 500); 14 Apr 2011 15:57:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18158 invoked by uid 500); 14 Apr 2011 15:57:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18150 invoked by uid 99); 14 Apr 2011 15:57:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 15:57:05 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmuguruza@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 15:56:58 +0000
Received: by pve37 with SMTP id 37so1011866pve.35
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 08:56:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=CFUa22WnUaONzQrrS5i9jySkM57mz12EcksKiw6YTuU=;
        b=wBM2PyHAVoFoIfwA/DMX71uM1q5Mm6ocvow4ajv8EcxNPMU2tyCHp7Fu8GwGPeplAb
         EOYoRyifi/6UA8EvI2yz1hSCzOj0ICipZy+ZOywdItupyEsHgj12PaC/79dORH+ps2Pu
         Qv21nTmFbjfnqvfG1Wzgq4OiLx5BYBrhD0qYU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=D9Rxzj0ziY1IrppEsMGx+AkG0dhuK7d5+fv6tmyS+iW3XsWIolS0++m4Z0FyiDhI5U
         bC6Oku/72joXCGDdrFFiJtefKrBba9Wi/jiA2qJzUtRc0HFW8tArcYLJ8NmQkLvYRCGs
         FeUsu3kLwszxeOJaWLRyeFjxm/F84zU1INgGE=
Received: by 10.68.43.5 with SMTP id s5mr593974pbl.162.1302796597061; Thu, 14
 Apr 2011 08:56:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.63.226 with HTTP; Thu, 14 Apr 2011 08:56:07 -0700 (PDT)
From: jm <jmuguruza@gmail.com>
Date: Thu, 14 Apr 2011 17:56:07 +0200
Message-ID: <BANLkTimNeQZKpVp7SL4yCZFRrEYpkDHiHg@mail.gmail.com>
Subject: speed of CheckIndex
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec539604c61e87904a0e2f897
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec539604c61e87904a0e2f897
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I need to collect some diagnostic info from customer sites, so I would like
to get info on the status of lucene indexes...but I don't want the process
of collecting to take very long.

So I am considering Checkindex. I tested in a small index (60k docs) and it
took 12 seconds. A site usually has up to 100 indexes (indexes have 6
fields) so running it for every index like this is unfeasible.

Is there a way to make is faster (even if it verifies less things?). Is the
time Checkindex will take proportional to number of docs? I am on Lucene 3.1

thanks

--bcaec539604c61e87904a0e2f897--

From java-user-return-49401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 17:34:22 2011
Return-Path: <java-user-return-49401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86094 invoked from network); 14 Apr 2011 17:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 17:34:21 -0000
Received: (qmail 81704 invoked by uid 500); 14 Apr 2011 17:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81656 invoked by uid 500); 14 Apr 2011 17:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81648 invoked by uid 99); 14 Apr 2011 17:34:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 17:34:19 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 17:34:13 +0000
Received: by qwj9 with SMTP id 9so1507104qwj.35
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 10:33:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=+5ROkix5t9TwnK9TK/+Ho36iTjSkC7zXCf8+LzWFE+8=;
        b=PIq5CcD2K7Xi/KxjNIy8sJoY45KED8Zc+lX6YiRQr93egapcyFFWt0Vxmptt9g1WQg
         zvh6cH+Cn5k3vaxeolf8xYpBsIYS5cEm1BNF//MrT1ja8+ufeVPGeS+fnY0EpJpBv/j9
         0omqhndOcd/kG3LSNr4DTg12yoXZyB7PIKa6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iHwr72O8CKSNSkHas17Ce/4tSfGpy0U4He2Lf6/449ZDPEvkUyUY457Yz6SnzPalsr
         oZR8Zjy/3Jwrqnnf9bEZlMiveXTj0IlmLLr1Zx2Xm3LUW7V2N+9BPXE74cpq4O7WctAh
         7bMXP/CqvHBg2OmoX+8pPh5ROvsyMw4Vu23fw=
MIME-Version: 1.0
Received: by 10.229.35.1 with SMTP id n1mr776091qcd.84.1302802432218; Thu, 14
 Apr 2011 10:33:52 -0700 (PDT)
Received: by 10.229.120.81 with HTTP; Thu, 14 Apr 2011 10:33:52 -0700 (PDT)
In-Reply-To: <BANLkTimNeQZKpVp7SL4yCZFRrEYpkDHiHg@mail.gmail.com>
References: <BANLkTimNeQZKpVp7SL4yCZFRrEYpkDHiHg@mail.gmail.com>
Date: Thu, 14 Apr 2011 13:33:52 -0400
Message-ID: <BANLkTi=oaSkPv6QrCFKcHFn+bxur-ovzUg@mail.gmail.com>
Subject: Re: speed of CheckIndex
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368319a02f580f04a0e4545d

--0016368319a02f580f04a0e4545d
Content-Type: text/plain; charset=ISO-8859-1

What information do you need? Could you just ping the stats component
and parse the results (basically the info on the admin/stats page).

Best
Erick

On Thu, Apr 14, 2011 at 11:56 AM, jm <jmuguruza@gmail.com> wrote:

> Hi,
>
> I need to collect some diagnostic info from customer sites, so I would like
> to get info on the status of lucene indexes...but I don't want the process
> of collecting to take very long.
>
> So I am considering Checkindex. I tested in a small index (60k docs) and it
> took 12 seconds. A site usually has up to 100 indexes (indexes have 6
> fields) so running it for every index like this is unfeasible.
>
> Is there a way to make is faster (even if it verifies less things?). Is the
> time Checkindex will take proportional to number of docs? I am on Lucene
> 3.1
>
> thanks
>

--0016368319a02f580f04a0e4545d--

From java-user-return-49402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 19:15:05 2011
Return-Path: <java-user-return-49402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21512 invoked from network); 14 Apr 2011 19:15:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 19:15:04 -0000
Received: (qmail 29882 invoked by uid 500); 14 Apr 2011 19:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29847 invoked by uid 500); 14 Apr 2011 19:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29839 invoked by uid 99); 14 Apr 2011 19:15:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 19:15:02 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.212.180 as permitted sender)
Received: from [209.85.212.180] (HELO mail-px0-f180.google.com) (209.85.212.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 19:14:56 +0000
Received: by pxj25 with SMTP id 25so880011pxj.11
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 12:14:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type;
        bh=ryOMzLSHeeZ3AKH+cSg8Uy5R947SrN8fKFDSwFH3+aI=;
        b=B0AbUT4VXa/gPyL/OdpWW9pg9BlckC8YVHkMQz3sW8jsr5wLhUYDu5C/Gj6ABPrEq7
         pr7Ov2ktbudgmquYR5GcZ8wxDJlZZmqWRvexPlOlHiH45qwjbSZ1p2ZO6l8OUPYUFrUa
         ZlsjCzFSBHCLlwb7PiRzLxyZzkTNSqpIFLSf8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=FfPhfYh0EbWqstq/wtzJAJMZYRzDqncUrcuxLMlCjRv2YE7MnTRka6U5MPMTZx/O20
         3+UkFKSYIrKaxYm1jqs4ZgA/A0JLjLyJQo+/KUC+/AraMTRWXrWyc7/LWhpTs9rt9fgj
         vPv7hnfbqcza3WPhHriCjM8FKQGo1vUBkHsDk=
Received: by 10.68.10.195 with SMTP id k3mr749963pbb.296.1302808476078; Thu,
 14 Apr 2011 12:14:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.63.226 with HTTP; Thu, 14 Apr 2011 12:14:06 -0700 (PDT)
In-Reply-To: <BANLkTi=oaSkPv6QrCFKcHFn+bxur-ovzUg@mail.gmail.com>
References: <BANLkTimNeQZKpVp7SL4yCZFRrEYpkDHiHg@mail.gmail.com> <BANLkTi=oaSkPv6QrCFKcHFn+bxur-ovzUg@mail.gmail.com>
From: jm <jmuguruza@gmail.com>
Date: Thu, 14 Apr 2011 21:14:06 +0200
Message-ID: <BANLkTind+0eRE93abB=hXgwd30+XuvNufA@mail.gmail.com>
Subject: Re: speed of CheckIndex
To: java-user@lucene.apache.org
Cc: Erick Erickson <erickerickson@gmail.com>
Content-Type: multipart/alternative; boundary=bcaec52155236d533104a0e5bcc2

--bcaec52155236d533104a0e5bcc2
Content-Type: text/plain; charset=ISO-8859-1

Thanks Erick, but I guess what you refer to lives in Solr right? I am using
plain Lucene.

On Thu, Apr 14, 2011 at 7:33 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> What information do you need? Could you just ping the stats component
> and parse the results (basically the info on the admin/stats page).
>
> Best
> Erick
>
> On Thu, Apr 14, 2011 at 11:56 AM, jm <jmuguruza@gmail.com> wrote:
>
> > Hi,
> >
> > I need to collect some diagnostic info from customer sites, so I would
> like
> > to get info on the status of lucene indexes...but I don't want the
> process
> > of collecting to take very long.
> >
> > So I am considering Checkindex. I tested in a small index (60k docs) and
> it
> > took 12 seconds. A site usually has up to 100 indexes (indexes have 6
> > fields) so running it for every index like this is unfeasible.
> >
> > Is there a way to make is faster (even if it verifies less things?). Is
> the
> > time Checkindex will take proportional to number of docs? I am on Lucene
> > 3.1
> >
> > thanks
> >
>

--bcaec52155236d533104a0e5bcc2--

From java-user-return-49403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 19:21:16 2011
Return-Path: <java-user-return-49403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43838 invoked from network); 14 Apr 2011 19:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 19:21:16 -0000
Received: (qmail 44749 invoked by uid 500); 14 Apr 2011 19:21:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44709 invoked by uid 500); 14 Apr 2011 19:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44701 invoked by uid 99); 14 Apr 2011 19:21:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 19:21:14 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 19:21:08 +0000
Received: by vxa37 with SMTP id 37so2557177vxa.35
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 12:20:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=ENsEETPVsKiKE1Sa5i9GI373U/I2ruEcQxNfu0L/RmA=;
        b=CNUhttHtvv1pgh7/7j1l2F838NJ+4U9/h+R0LN71T78oY7cV4PeYbb/ISA6YyJqFOO
         10FfF6/pwlJsTON9Fwrj0tcOxFZhh1vg3/Q4gelk1D9TeAI5W91VfW6rXBJeOnj1ytak
         Vt66rFOU15ZDHD71W5+3iMalWqcqsN5oBaST4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=qbvKGjQYTEM94G+QklLjBJytLHATJEVgIskPLbnJbbyoJQANart8SUCTZrJvVOnSao
         mEb+wdhQcyFaLCg0CUP7l0INTftVkkUV7qsn/Ry5RPSIN1X0AnWDsOqAOcKEVE5tI69m
         awtx3/FESnvfniTPTWdM0TUptLISmvHgdJh4Y=
MIME-Version: 1.0
Received: by 10.52.173.200 with SMTP id bm8mr1728301vdc.24.1302808847159; Thu,
 14 Apr 2011 12:20:47 -0700 (PDT)
Received: by 10.52.165.35 with HTTP; Thu, 14 Apr 2011 12:20:47 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <BANLkTind+0eRE93abB=hXgwd30+XuvNufA@mail.gmail.com>
References: <BANLkTimNeQZKpVp7SL4yCZFRrEYpkDHiHg@mail.gmail.com>
	<BANLkTi=oaSkPv6QrCFKcHFn+bxur-ovzUg@mail.gmail.com>
	<BANLkTind+0eRE93abB=hXgwd30+XuvNufA@mail.gmail.com>
Date: Thu, 14 Apr 2011 21:20:47 +0200
Message-ID: <BANLkTinj+OhSsTMRe=o=QHpWfr9kfT3x9A@mail.gmail.com>
Subject: Re: speed of CheckIndex
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

what kind of diagnostics are you looking for?

simon

On Thu, Apr 14, 2011 at 9:14 PM, jm <jmuguruza@gmail.com> wrote:
> Thanks Erick, but I guess what you refer to lives in Solr right? I am using
> plain Lucene.
>
> On Thu, Apr 14, 2011 at 7:33 PM, Erick Erickson <erickerickson@gmail.com>wrote:
>
>> What information do you need? Could you just ping the stats component
>> and parse the results (basically the info on the admin/stats page).
>>
>> Best
>> Erick
>>
>> On Thu, Apr 14, 2011 at 11:56 AM, jm <jmuguruza@gmail.com> wrote:
>>
>> > Hi,
>> >
>> > I need to collect some diagnostic info from customer sites, so I would
>> like
>> > to get info on the status of lucene indexes...but I don't want the
>> process
>> > of collecting to take very long.
>> >
>> > So I am considering Checkindex. I tested in a small index (60k docs) and
>> it
>> > took 12 seconds. A site usually has up to 100 indexes (indexes have 6
>> > fields) so running it for every index like this is unfeasible.
>> >
>> > Is there a way to make is faster (even if it verifies less things?). Is
>> the
>> > time Checkindex will take proportional to number of docs? I am on Lucene
>> > 3.1
>> >
>> > thanks
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 20:12:18 2011
Return-Path: <java-user-return-49404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18528 invoked from network); 14 Apr 2011 20:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 20:12:17 -0000
Received: (qmail 13897 invoked by uid 500); 14 Apr 2011 20:12:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13855 invoked by uid 500); 14 Apr 2011 20:12:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13847 invoked by uid 99); 14 Apr 2011 20:12:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 20:12:15 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmuguruza@gmail.com designates 209.85.212.180 as permitted sender)
Received: from [209.85.212.180] (HELO mail-px0-f180.google.com) (209.85.212.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 20:12:09 +0000
Received: by pxj25 with SMTP id 25so901727pxj.11
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 13:11:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type;
        bh=CAIrfsGKv0wShlZSdpGPjAD+3c755LBvLZgPM3mLZ4k=;
        b=W1vliYVwMx7KYaadIErDozuY2+njVzsXNNr4acsJABPgVithEf0g1H1i3KPpaYvXMG
         Zp0e+XszMfYUVAxT3cCzIDATaV+GNlreAXUrcEH5lFStdhsMeBWxLXR16qb7KwhV9M/J
         g9vrxHFx//FSgN58BTtfLH0Gbt8FrGaZq4MQo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=v8Uh9QjbI4W30d3undPFb68pDHDRCez4r2oEoZ1TevXZycwaw6yMHs1ut3aVz1fYXY
         nh+whLbVOGoHeAaKyC+7rPP2slzkv0zdco6iQvDKVCgqY+Z45CF2OzH35mr3fa03xPoA
         oIVyXQBjmiiuDNwBVZziRdKbs5hhxpaLmPG58=
Received: by 10.68.24.198 with SMTP id w6mr791602pbf.363.1302811902488; Thu,
 14 Apr 2011 13:11:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.63.226 with HTTP; Thu, 14 Apr 2011 12:59:33 -0700 (PDT)
In-Reply-To: <BANLkTinj+OhSsTMRe=o=QHpWfr9kfT3x9A@mail.gmail.com>
References: <BANLkTimNeQZKpVp7SL4yCZFRrEYpkDHiHg@mail.gmail.com>
 <BANLkTi=oaSkPv6QrCFKcHFn+bxur-ovzUg@mail.gmail.com> <BANLkTind+0eRE93abB=hXgwd30+XuvNufA@mail.gmail.com>
 <BANLkTinj+OhSsTMRe=o=QHpWfr9kfT3x9A@mail.gmail.com>
From: jm <jmuguruza@gmail.com>
Date: Thu, 14 Apr 2011 21:59:33 +0200
Message-ID: <BANLkTinBctaahWJnVLxmM-fvFWXTJMooLg@mail.gmail.com>
Subject: Re: speed of CheckIndex
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Cc: Simon Willnauer <simon.willnauer@googlemail.com>
Content-Type: multipart/alternative; boundary=bcaec5215cc9a82ef604a0e688ae
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec5215cc9a82ef604a0e688ae
Content-Type: text/plain; charset=ISO-8859-1

mostly status of the indexes, whether there is some corruption or all is ok.

On Thu, Apr 14, 2011 at 9:20 PM, Simon Willnauer <
simon.willnauer@googlemail.com> wrote:

> what kind of diagnostics are you looking for?
>
> simon
>
> On Thu, Apr 14, 2011 at 9:14 PM, jm <jmuguruza@gmail.com> wrote:
> > Thanks Erick, but I guess what you refer to lives in Solr right? I am
> using
> > plain Lucene.
> >
> > On Thu, Apr 14, 2011 at 7:33 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
> >
> >> What information do you need? Could you just ping the stats component
> >> and parse the results (basically the info on the admin/stats page).
> >>
> >> Best
> >> Erick
> >>
> >> On Thu, Apr 14, 2011 at 11:56 AM, jm <jmuguruza@gmail.com> wrote:
> >>
> >> > Hi,
> >> >
> >> > I need to collect some diagnostic info from customer sites, so I would
> >> like
> >> > to get info on the status of lucene indexes...but I don't want the
> >> process
> >> > of collecting to take very long.
> >> >
> >> > So I am considering Checkindex. I tested in a small index (60k docs)
> and
> >> it
> >> > took 12 seconds. A site usually has up to 100 indexes (indexes have 6
> >> > fields) so running it for every index like this is unfeasible.
> >> >
> >> > Is there a way to make is faster (even if it verifies less things?).
> Is
> >> the
> >> > time Checkindex will take proportional to number of docs? I am on
> Lucene
> >> > 3.1
> >> >
> >> > thanks
> >> >
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec5215cc9a82ef604a0e688ae--

From java-user-return-49405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 21:21:55 2011
Return-Path: <java-user-return-49405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37597 invoked from network); 14 Apr 2011 21:21:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 21:21:55 -0000
Received: (qmail 89992 invoked by uid 500); 14 Apr 2011 21:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89857 invoked by uid 500); 14 Apr 2011 21:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89849 invoked by uid 99); 14 Apr 2011 21:21:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 21:21:53 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hari.zlatan@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 21:21:45 +0000
Received: by bwz8 with SMTP id 8so2979446bwz.35
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 14:21:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=Z5Gvd4XZQ9Wx2o4mCh1/s3E5R82nI3hamTiegec1W7Q=;
        b=FbOTpPrANjdtw7m4edgn0VgrRnraMa5OY1cpDOSnKJeRuGU8joskbLAde5lOouu9aZ
         LHzOA+1dhwi+lu8VCoKHojoX+KuidogMLhyyKjaoi04lcgUl+TCwD+jUDb3Tbb4cOgUU
         vOml1YE4b+3+u8dFATiZfkqHLzeXPXZxyQDts=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=cqqWpZXy6cjiUCqPihp9AFaNaCsNGbZSwZtVDh34h4wytYOkK0+k8hsZV3vKmiTGpL
         BDB/WkGZQJVPm+l2NTe3Dp723bQNQYWYQB5uAQdJtUdQC8nhgYjOepZUvuscAPoX/Lt8
         HOebemjIWnbOJFHqP8VaZ7UVDorNAySKI/pVk=
MIME-Version: 1.0
Received: by 10.204.83.212 with SMTP id g20mr995064bkl.55.1302816085237; Thu,
 14 Apr 2011 14:21:25 -0700 (PDT)
Received: by 10.204.154.201 with HTTP; Thu, 14 Apr 2011 14:21:25 -0700 (PDT)
Date: Thu, 14 Apr 2011 17:21:25 -0400
Message-ID: <BANLkTi=LXs_4kHOA=rRyyb_PxMP=Hvn-3w@mail.gmail.com>
Subject: Applying a sample data set to lucene
From: hari narayanan <hari.zlatan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6da934bf7e18b04a0e78178
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6da934bf7e18b04a0e78178
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am new to lucene... and i would like to see its working by applying it to
a sample data set .... Can some one tell me from where i can download a data
set so that i can test them using lucene?

Thanks,
Hari

--0016e6da934bf7e18b04a0e78178--

From java-user-return-49406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Apr 14 23:16:17 2011
Return-Path: <java-user-return-49406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10443 invoked from network); 14 Apr 2011 23:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 14 Apr 2011 23:16:17 -0000
Received: (qmail 94737 invoked by uid 500); 14 Apr 2011 23:16:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94690 invoked by uid 500); 14 Apr 2011 23:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94682 invoked by uid 99); 14 Apr 2011 23:16:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 23:16:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Apr 2011 23:16:07 +0000
Received: by qyk30 with SMTP id 30so1771425qyk.14
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 16:15:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=p6tm2laj4PS6T8GBMy2cWDiR11Ef3eu/2WHZHrgP6eU=;
        b=DmxraTOSXLC58qm5A3Y9st6siLfZfQR/Y0y7+S8ySYbgBRhRj9Cdut4MWPjX7vItNu
         L1xjHIErO5vQZDK6D/TLDUYqR0GZRVxb7wLzFl2WatjIbvsmvPfAsdyuNldOnQySlvpy
         k0NzAEcrn8OjD6QRTCIlrPt1+bZELr7v1rArs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=URgGB5vqwuVI7DyzvhCx2EDkSFB8gBcm2sJUaPafB6Orml8+0aRKMIlxWVPbycaylT
         r+8z1ap7KJeh1vx2L+mfnHz5bjJGRlBkQ1ouyvKsYd/vnfP9obkt+g9wCmTJjcIe7IZS
         9mB/TPjCEjk2nbN1OLTeziVJXAX/4xEl1O6g8=
MIME-Version: 1.0
Received: by 10.229.17.11 with SMTP id q11mr1043056qca.46.1302822946488; Thu,
 14 Apr 2011 16:15:46 -0700 (PDT)
Received: by 10.229.120.81 with HTTP; Thu, 14 Apr 2011 16:15:46 -0700 (PDT)
In-Reply-To: <BANLkTi=LXs_4kHOA=rRyyb_PxMP=Hvn-3w@mail.gmail.com>
References: <BANLkTi=LXs_4kHOA=rRyyb_PxMP=Hvn-3w@mail.gmail.com>
Date: Thu, 14 Apr 2011 19:15:46 -0400
Message-ID: <BANLkTi=Fb3YdKJbjZAqQEYsZw9BYaePoSA@mail.gmail.com>
Subject: Re: Applying a sample data set to lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175d0238ee428004a0e91a62
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175d0238ee428004a0e91a62
Content-Type: text/plain; charset=ISO-8859-1

I would not go there first. There are examples out there to, for instance,
index Wikipedia but that is, IMO, too complex for just starting to get
your feet wet.

I think you'd be better off looking at the Lucene demo code and
trying to understand/modify that as a starting point, see:
http://lucene.apache.org/java/3_1_0/gettingstarted.html

Once you understand how that works, you'll be ready to tackle
more complex Lucene implementations.

<http://lucene.apache.org/java/3_1_0/gettingstarted.html>Best
Erick

On Thu, Apr 14, 2011 at 5:21 PM, hari narayanan <hari.zlatan@gmail.com>wrote:

> Hi,
>
> I am new to lucene... and i would like to see its working by applying it to
> a sample data set .... Can some one tell me from where i can download a
> data
> set so that i can test them using lucene?
>
> Thanks,
> Hari
>

--0015175d0238ee428004a0e91a62--

From java-user-return-49407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 01:03:36 2011
Return-Path: <java-user-return-49407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77159 invoked from network); 15 Apr 2011 01:03:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Apr 2011 01:03:36 -0000
Received: (qmail 66512 invoked by uid 500); 15 Apr 2011 01:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66459 invoked by uid 500); 15 Apr 2011 01:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66451 invoked by uid 99); 15 Apr 2011 01:03:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 01:03:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.249.20.60] (HELO billthecat.sdsc.edu) (132.249.20.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 01:03:26 +0000
Received: from [192.168.11.28] (c-67-180-28-210.hsd1.ca.comcast.net [67.180.28.210])
	(authenticated bits=0)
	by billthecat.sdsc.edu (8.14.2/8.14.1/SDSCrelay/16) with ESMTP id p3F134CL008241
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 18:03:05 -0700 (PDT)
Message-ID: <4DA79940.1000503@sdsc.edu>
Date: Thu, 14 Apr 2011 18:02:56 -0700
From: Christopher Condit <condit@sdsc.edu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: best practice for reusing documents with multi-valued fields
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I know that it's best practice to reuse the Document object when
indexing, but I'm curious how multi-valued fields affect this. I tried
this before indexing each document:

doc.removeFields(myMultiValuedField);
for (String fieldName: fieldNames) {
  Field field= doc.getField(field);
  if (null != field) {
    field.setValue("");
  } else {
    System.out.println("null field");
  }
}

And it seems that the null fields (which I had removed) are just
accumulating. Is there a better way to reuse a document with
multi-valued fields?

Thanks,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 06:49:09 2011
Return-Path: <java-user-return-49408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13632 invoked from network); 15 Apr 2011 06:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Apr 2011 06:49:09 -0000
Received: (qmail 56820 invoked by uid 500); 15 Apr 2011 06:49:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56028 invoked by uid 500); 15 Apr 2011 06:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56019 invoked by uid 99); 15 Apr 2011 06:49:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 06:49:03 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 06:48:57 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id C1F4BC2181
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2011 08:48:35 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id h56CmAQr-YLg for <java-user@lucene.apache.org>;
	Fri, 15 Apr 2011 08:48:35 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 9B308C2123
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2011 08:48:35 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Fri, 15 Apr 2011 08:48:35 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 15 Apr 2011 08:48:34 +0200
Subject: AW: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Topic: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Index: Acv5xDWWLCTgZkd1S/efiwKWFyy28gACG9WAAFsVuHA=
Message-ID: <E594BA962D832C49A3CF858DAA3A696C11359DCBC6@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
 <BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
 <BANLkTi=Dejok50UzYfNy3VZ+mSgcoGXtKA@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C11359DCA01@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DCA01@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

RG9lcyB0aGUgU3RhbmRhcmRBbmFseXplciBsb3dlcmNhc2UgaXRzIHRlcm1zPw0KDQo+IC0tLS0t
VXJzcHLDvG5nbGljaGUgTmFjaHJpY2h0LS0tLS0NCj4gVm9uOiBDbGVtZW5zIFd5c3MgW21haWx0
bzpjbGVtZW5zZGV2QG15c2lnbi5jaF0NCj4gR2VzZW5kZXQ6IE1pdHR3b2NoLCAxMy4gQXByaWwg
MjAxMSAxMzozNA0KPiBBbjogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEJldHJlZmY6
IEFXOiBHZXJtYW4qRmlsdGVyLCBBbmFseXplciAiY3V0dGluZyIgb2ZmIGxldHRlcnMgZnJvbSAo
ZnJlbmNoKQ0KPiB3b3Jkcy4uLg0KPiANCj4gVGhpcyBpcyB3aGF0IEkgd2FzIGxvb2tpbmcgZm9y
LCB0aGFua3MNCj4gDQo+ID4gLS0tLS1VcnNwcsO8bmdsaWNoZSBOYWNocmljaHQtLS0tLQ0KPiA+
IFZvbjogUm9iZXJ0IE11aXIgW21haWx0bzpyY211aXJAZ21haWwuY29tXQ0KPiA+IEdlc2VuZGV0
OiBNaXR0d29jaCwgMTMuIEFwcmlsIDIwMTEgMTI6MTENCj4gPiBBbjogamF2YS11c2VyQGx1Y2Vu
ZS5hcGFjaGUub3JnDQo+ID4gQmV0cmVmZjogUmU6IEdlcm1hbipGaWx0ZXIsIEFuYWx5emVyICJj
dXR0aW5nIiBvZmYgbGV0dGVycyBmcm9tDQo+ID4gKGZyZW5jaCkgd29yZHMuLi4NCj4gPg0KPiA+
IElmIHlvdSBvbmx5IHdhbnQgdG8gaWdub3JlIGdlcm1hbiBzdG9wd29yZHMsIHlvdSBkb24ndCBu
ZWVkIHRvIHVzZSB0aGUNCj4gPiBnZXJtYW4gYW5hbHl6ZXIgd2l0aCBnZXJtYW4gc3RlbW1pbmcu
IHlvdSBjYW4ganVzdCB1c2UNCj4gPiBTdGFuZGFyZEFuYWx5emVyIHdpdGggeW91ciBvd24gc3Rv
cHdvcmRzIHNldCENCj4gPg0KPiA+IE9uIFdlZCwgQXByIDEzLCAyMDExIGF0IDM6NTEgQU0sIENs
ZW1lbnMgV3lzcw0KPiA8Y2xlbWVuc2RldkBteXNpZ24uY2g+DQo+ID4gd3JvdGU6DQo+ID4gPiBX
aGF0IEkgcmVhbGx5IHdhbnQgdG8gZG8gaXMgaWdub3JlIGdlcm1hbiBzdG9wIHdvcmRzIHN1Y2gg
YXMgImRlciIsDQo+ID4gPiAiZGllIiwNCj4gPiAiZGFzIiwgImVpbiIsLi4uDQo+ID4gPg0KPiA+
ID4+IC0tLS0tVXJzcHLDvG5nbGljaGUgTmFjaHJpY2h0LS0tLS0NCj4gPiA+PiBWb246IFJvYmVy
dCBNdWlyIFttYWlsdG86cmNtdWlyQGdtYWlsLmNvbV0NCj4gPiA+PiBHZXNlbmRldDogRGllbnN0
YWcsIDEyLiBBcHJpbCAyMDExIDE3OjAzDQo+ID4gPj4gQW46IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiA+ID4+IEJldHJlZmY6IFJlOiBHZXJtYW4qRmlsdGVyLCBBbmFseXplciAiY3V0
dGluZyIgb2ZmIGxldHRlcnMgZnJvbQ0KPiA+ID4+IChmcmVuY2gpIHdvcmRzLi4uDQo+ID4gPj4N
Cj4gPiA+PiBPbiBUdWUsIEFwciAxMiwgMjAxMSBhdCA4OjQ2IEFNLCBDbGVtZW5zIFd5c3MNCj4g
PiA8Y2xlbWVuc2RldkBteXNpZ24uY2g+DQo+ID4gPj4gd3JvdGU6DQo+ID4gPj4gPiBXaHkgc28/
IFdoZXJlIGhhdmUgdGhlIGUncyBnb25lPw0KPiA+ID4+ID4NCj4gPiA+Pg0KPiA+ID4+IHRoZSBl
IGlzIGJlaW5nIHN0ZW1tZWQgYXMgaXRzIGEgZ2VybWFuIHN1ZmZpeC4uLiBhbGwgb2YgdGhlIGdl
cm1hbg0KPiA+ID4+IHN0ZW1taW5nIGFsZ29yaXRobXMgcmVtb3ZlIGZpbmFsIC1lLCBhcyBkbyBh
bGwgdGhlIGZyZW5jaCBzdGVtbWluZw0KPiA+IGFsZ29yaXRobXMuDQo+ID4gPj4NCj4gPiA+PiBz
byBpIGRvbid0IHVuZGVyc3RhbmQgeW91ciBwcm9ibGVtLg0KPiA+ID4+DQo+ID4gPj4gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KPiA+ID4+IC0tIFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPg0KPiA+ID4NCj4g
Pg0KPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNl
ci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-49409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 06:56:23 2011
Return-Path: <java-user-return-49409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22932 invoked from network); 15 Apr 2011 06:56:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Apr 2011 06:56:22 -0000
Received: (qmail 66102 invoked by uid 500); 15 Apr 2011 06:56:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66021 invoked by uid 500); 15 Apr 2011 06:56:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66005 invoked by uid 99); 15 Apr 2011 06:56:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 06:56:17 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 06:56:11 +0000
Received: by wyb40 with SMTP id 40so3221532wyb.35
        for <java-user@lucene.apache.org>; Thu, 14 Apr 2011 23:55:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=dWHaRZ9HoETV6/qmk56gRIYAY9i+t/8Qtw0bRR7RxAQ=;
        b=hBq4BsUXL8GO+e2x5gMc37xwuamLQAFpElVJCp+Qxx2z/PJd9/mQfu1WYUCKMizt5K
         iDbuT5l4tw2F5e5bRJvhf7ZJpQGt6n9sgrlQytP5kRlZV1WpN5tnqbfQZPn19hFRnWPx
         i843xYpKBOUDuX7qAZBU9z74p8XyJ1ktOS3p0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=OKmjF9Akkq6q2s1HiK7vzaQx5R08/hTji+T91Jx1/0UoOf7I7Q52mm4mbRTBNzpK76
         1hoKvV7jHeLqtTFw1vbMYVrb/AKKGjKBBIzkzr/x/ia25RZoIsWg31kv8eirPf7c35ap
         pNVutx7K+Uu+s/uY5/QppOmNzcjI5PEo/LfCE=
MIME-Version: 1.0
Received: by 10.227.39.66 with SMTP id f2mr1678752wbe.2.1302850550993; Thu, 14
 Apr 2011 23:55:50 -0700 (PDT)
Received: by 10.227.146.134 with HTTP; Thu, 14 Apr 2011 23:55:50 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DCBC6@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
	<BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
	<BANLkTi=Dejok50UzYfNy3VZ+mSgcoGXtKA@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DCA01@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C11359DCBC6@Exchange2007.mysigndomain.corp>
Date: Fri, 15 Apr 2011 08:55:50 +0200
Message-ID: <BANLkTi=BOSmvTt4c4OPwXFgZQEfym6BeBA@mail.gmail.com>
Subject: Re: German*Filter, Analyzer "cutting" off letters from (french) words...
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Apr 15, 2011 at 8:48 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> Does the StandardAnalyzer lowercase its terms?
yes!

simon
>
>> -----Urspr=C3=BCngliche Nachricht-----
>> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> Gesendet: Mittwoch, 13. April 2011 13:34
>> An: java-user@lucene.apache.org
>> Betreff: AW: German*Filter, Analyzer "cutting" off letters from (french)
>> words...
>>
>> This is what I was looking for, thanks
>>
>> > -----Urspr=C3=BCngliche Nachricht-----
>> > Von: Robert Muir [mailto:rcmuir@gmail.com]
>> > Gesendet: Mittwoch, 13. April 2011 12:11
>> > An: java-user@lucene.apache.org
>> > Betreff: Re: German*Filter, Analyzer "cutting" off letters from
>> > (french) words...
>> >
>> > If you only want to ignore german stopwords, you don't need to use the
>> > german analyzer with german stemming. you can just use
>> > StandardAnalyzer with your own stopwords set!
>> >
>> > On Wed, Apr 13, 2011 at 3:51 AM, Clemens Wyss
>> <clemensdev@mysign.ch>
>> > wrote:
>> > > What I really want to do is ignore german stop words such as "der",
>> > > "die",
>> > "das", "ein",...
>> > >
>> > >> -----Urspr=C3=BCngliche Nachricht-----
>> > >> Von: Robert Muir [mailto:rcmuir@gmail.com]
>> > >> Gesendet: Dienstag, 12. April 2011 17:03
>> > >> An: java-user@lucene.apache.org
>> > >> Betreff: Re: German*Filter, Analyzer "cutting" off letters from
>> > >> (french) words...
>> > >>
>> > >> On Tue, Apr 12, 2011 at 8:46 AM, Clemens Wyss
>> > <clemensdev@mysign.ch>
>> > >> wrote:
>> > >> > Why so? Where have the e's gone?
>> > >> >
>> > >>
>> > >> the e is being stemmed as its a german suffix... all of the german
>> > >> stemming algorithms remove final -e, as do all the french stemming
>> > algorithms.
>> > >>
>> > >> so i don't understand your problem.
>> > >>
>> > >> -------------------------------------------------------------------
>> > >> -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 10:11:24 2011
Return-Path: <java-user-return-49410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74737 invoked from network); 15 Apr 2011 10:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Apr 2011 10:11:24 -0000
Received: (qmail 70909 invoked by uid 500); 15 Apr 2011 10:11:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70856 invoked by uid 500); 15 Apr 2011 10:11:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70848 invoked by uid 99); 15 Apr 2011 10:11:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 10:11:21 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 10:11:17 +0000
Received: by vxa37 with SMTP id 37so3195084vxa.35
        for <java-user@lucene.apache.org>; Fri, 15 Apr 2011 03:10:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=LgoV1KdC+7+L0gAGgbKaDNp+bdDggl+NUcvsnjuIwaU=;
        b=eoY+OlF7aSpmNB1KdzbG3a9I7bUq8hJG5OHwQt3aDfqjmD/0WJs+3VFR1JxvWYaoNw
         VZGxI/mCw3I/vffs8yApFqqgqKdmAOdAYYKFfgtUx6+aZeAxfGwfMVtvrP2T+9tGh9WQ
         s5e051W5578WSy1dXovV+/vHUkWvKFLDQZLFw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=Qyz4qFMjyX+mPYWv36JXnQeCpBsKmPc1kndZYp8FFgHQ6u7JpgnFsqXoz9+DKfkKA/
         3SjQsI5l/r3PHzzzhAbY2DTy9CLPqjW6voJZ6siB0J50E7uBIy/uKdhLNduV1E45SPvh
         rFFkmvU/qKWgRHw7T1laRDs4SnfjQTP7Gjut0=
MIME-Version: 1.0
Received: by 10.52.18.15 with SMTP id s15mr1179729vdd.224.1302862255914; Fri,
 15 Apr 2011 03:10:55 -0700 (PDT)
Received: by 10.52.165.35 with HTTP; Fri, 15 Apr 2011 03:10:55 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <BANLkTi=EnJxY0hyqZtRJ8iNDWqv010conw@mail.gmail.com>
References: <DD3CD532C204E24992220E891AD05CA4472C8C0E34@FRMRSSXCHMBSD1.dc-m.alcatel-lucent.com>
	<BANLkTi=EnJxY0hyqZtRJ8iNDWqv010conw@mail.gmail.com>
Date: Fri, 15 Apr 2011 12:10:55 +0200
Message-ID: <BANLkTi=PnCWroa-Q=dJYkBP9SPoeDm8PTg@mail.gmail.com>
Subject: Re: Indexation takes a lot of time :(
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Cc: findbestopensource <findbestopensource@gmail.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Apr 6, 2011 at 11:50 AM, findbestopensource
<findbestopensource@gmail.com> wrote:
> Hello daniel,
>
> The code seems to be fine. I think you are calculating the time for entir=
e
> program which may read the data from external source and prepare the arra=
y
> list. Just calculate time only for indexing.
>
> Regards
> Aditya
> www.findbestopensource.com
>
>
>
> On Wed, Apr 6, 2011 at 2:38 PM, ZYWALEWSKI, DANIEL (DANIEL) <
> daniel.zywalewski@alcatel-lucent.com> wrote:
>
>> Hello Champions !!
>>
>> I have a problem with indexation(or should I say its time); So the eleme=
nts
>> to Index are represtented by my own class - DocumentToIndex that consist=
s of
>> Fields(one Field is a fieldName and fieldValue). All documentToIndex are
>> kept/stocked in ArrayList. When I start indexing firstly I open IndexWri=
ter
>> then for each field of documentToIndex I take its value and name and I
>> create Lucene Field then added to the LuceneDocument; Once it's finished
>> (creation of LuceneDocument I add it to index). After passing all docume=
nts
>> I close IndexWriter; All this can be represented by code:
>>
>>
>> indexWriter =3D new IndexWriter(indexDirectory, indexAnalyzer, false,
>> IndexWriter.MaxFieldLength.UNLIMITED);
>>
>> =C2=A0 =C2=A0 =C2=A0for (DocumentToIndex documentToIndex : objectsToInde=
x) {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0Document indexedDocument =3D new Document();
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0for (int i =3D 0; i < documentToIndex.getDocu=
mentSize(); i++) {
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0indexedDocument.add(new
>> Field(documentToIndex.getDocumentField(i).getName(),
>>
>> =C2=A0documentToIndex.getDocumentField(i).getValue(), Field.Store.YES,
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Field.=
Index.ANALYZED));
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0indexWriter.addDocument(indexedDocument);
>>
>> =C2=A0 =C2=A0 =C2=A0}
>>
>> indexWriter.close()
>>
>> My problem is that it takes much time to index. For example to index 283=
10
>> documentToIndex I need about 15min. Do I miss something or it's normal?
>> Maybe this code is not really optimized? I'll be really grateful for any
>> hints and tips;
>>
>> Thanks in advance,
>> D

I think you code is fine you really need to look into what you are
measuring... in an idea situation you can index up to 60k documents
per second with lucene given your hardware is fast and you can get the
data quick enough out of your database. look here

http://blog.jteam.nl/2011/04/01/gimme-all-resources-you-have-i-can-use-them=
/

or here

http://blog.mikemccandless.com/2010/09/lucenes-indexing-is-fast.html

for some insights!

Simon
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 16:09:02 2011
Return-Path: <java-user-return-49411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54430 invoked from network); 15 Apr 2011 16:09:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Apr 2011 16:09:01 -0000
Received: (qmail 87290 invoked by uid 500); 15 Apr 2011 16:08:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87231 invoked by uid 500); 15 Apr 2011 16:08:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87223 invoked by uid 99); 15 Apr 2011 16:08:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 16:08:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.60] (HELO billthecat.sdsc.edu) (132.249.20.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 16:08:51 +0000
Received: from [192.168.11.51] (c-67-180-28-210.hsd1.ca.comcast.net [67.180.28.210])
	(authenticated bits=0)
	by billthecat.sdsc.edu (8.14.2/8.14.1/SDSCrelay/16) with ESMTP id p3FG8RN0005434
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO);
	Fri, 15 Apr 2011 09:08:27 -0700 (PDT)
Message-ID: <4DA86D72.1000205@sdsc.edu>
Date: Fri, 15 Apr 2011 09:08:18 -0700
From: Christopher Condit <condit@sdsc.edu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Chris Mantle <mentalmantle@hotmail.com>
Subject: Re: Can't perform exact match...?
References: <BLU132-DS396922F775C8B5031377FCFA80@phx.gbl>
In-Reply-To: <BLU132-DS396922F775C8B5031377FCFA80@phx.gbl>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/11/2011 1:47 AM, Chris Mantle wrote:
> Hi, Im having some trouble with Lucene at the moment. I have a number of unique identifiers that I need to search through. Theyre in many different forms, eg. M, MO, :MOFB, FH..L-O, etc. All I need to do is an exact prefix search: at the moment, if I type in M, I get M, MO and :MOFB, and Id like to avoid getting :MOFB until the user actually types in :M.
> 
> This is with a StandardAnalyzer and a PrefixQuery. Ive tried many different combinations of analyzer and query. If I use a WhitespaceAnalyzer or a KeywordAnalyzer, I see that tokens are generated in a form that Id expect (:MOFB instead of mofb, for instance), but I cant search with a wildcard: searching with M* returns nothing; M returns M alone. Ive also tried using ANALYSED and NOT_ANALYSED indexing to no avail.
>
> Can anyone advise me on how to remedy this? There must be something Im missing here...

I'm not sure why the WhitespaceAnalyzer isn't working for you (perhaps
someone else knows), but here's one that does:
http://www.pastie.org/1797909

I just wrapped a WhitespaceTokenizer in a LowerCaseFilter and it has the
desired effect.

Good luck,
-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 17:37:30 2011
Return-Path: <java-user-return-49412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51441 invoked from network); 15 Apr 2011 17:37:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Apr 2011 17:37:29 -0000
Received: (qmail 51444 invoked by uid 500); 15 Apr 2011 17:37:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51410 invoked by uid 500); 15 Apr 2011 17:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 44670 invoked by uid 99); 14 Apr 2011 18:11:43 -0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AkcCAFA4p01cD0/Y/2dsb2JhbAAMmDDQK4VuBA
X-IronPort-AV: E=Sophos;i="4.64,212,1301871600"; 
   d="scan'208";a="496907860"
Message-ID: <4DA738C1.5070807@bammers.net>
Date: Thu, 14 Apr 2011 19:11:13 +0100
From: Chris Bamford <chris@bammers.net>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.14) Gecko/20110223 Thunderbird/3.1.8
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Parallel access to TermPositions API
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I need to load a huge amount of TermPositions in a short space of time 
(millions of Documents, sub-second).
Does the IndexReader's API support multiple accesses to allow several 
parallel threads to consume a chunk each?

Thanks for any ideas / pointers.

- Chris



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Apr 15 17:46:26 2011
Return-Path: <java-user-return-49413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66433 invoked from network); 15 Apr 2011 17:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 15 Apr 2011 17:46:26 -0000
Received: (qmail 66214 invoked by uid 500); 15 Apr 2011 17:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66174 invoked by uid 500); 15 Apr 2011 17:46:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66166 invoked by uid 99); 15 Apr 2011 17:46:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 17:46:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.97.32.66] (HELO smtp-out-03.comm2000.it) (212.97.32.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Apr 2011 17:46:16 +0000
Received: from [192.168.0.4] (250.188.173.62.dsl.static.ip.kpnqwest.it [62.173.188.250])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by smtp-out-03.comm2000.it (Postfix) with ESMTP id DA05E4D990
	for <java-user@lucene.apache.org>; Fri, 15 Apr 2011 19:45:55 +0200 (CEST)
Message-ID: <4DA8844F.5010000@fissore.org>
Date: Fri, 15 Apr 2011 19:45:51 +0200
From: Federico Fissore <federico@fissore.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.14) Gecko/20110223 Thunderbird/3.1.8
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Parallel access to TermPositions API
References: <4DA738C1.5070807@bammers.net>
In-Reply-To: <4DA738C1.5070807@bammers.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Chris Bamford, il 14/04/2011 20:11, ha scritto:
> Hi,
>
> I need to load a huge amount of TermPositions in a short space of time
> (millions of Documents, sub-second).
> Does the IndexReader's API support multiple accesses to allow several
> parallel threads to consume a chunk each?
>

AFAIK, you cannot share one instance of TermPositions, but each of your 
thread may have its own dedicated instance, so each will start with a 
different call to skipTo or seek before consuming

Anyway the I/O will be a problem: you can have a 16 way server, but if 
your index is on one harddrive, that will be your bottleneck

HTH

Federico

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 15:44:07 2011
Return-Path: <java-user-return-49414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27637 invoked from network); 16 Apr 2011 15:44:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Apr 2011 15:44:06 -0000
Received: (qmail 19230 invoked by uid 500); 16 Apr 2011 15:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19174 invoked by uid 500); 16 Apr 2011 15:44:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19166 invoked by uid 99); 16 Apr 2011 15:44:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Apr 2011 15:44:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [76.13.9.28] (HELO web65408.mail.ac4.yahoo.com) (76.13.9.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Apr 2011 15:43:56 +0000
Received: (qmail 72022 invoked by uid 60001); 16 Apr 2011 15:43:34 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1302968614; bh=syXXZ5INO/Ks/PteAiY1ivRE+6I+VxmjGLhPATgHfWk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=5HxfTOnjsNLcITGaUs3K5/3SYI4Pcx99NO8HOgoiPwjcexmD5auUfQy8gE/a9GS//Iz8I+Ue5yO6P0L2iZot/cL387g8epoBr6Wz0npxI1hsNnO9mLFBzseoq6nplL8aXvBjnKX8Nerz4YZKPU+hZJ/8ti//lkrMAQ9RxfPaJa0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=R55edB+WhH8nfcbJbeVJbuqQ58r0LhPhQWAXGVHuvC8vecYhkrbr2jjzNKIlhHywyAKpn9uvsj2wRcS6OMLk2xjfcw9qqmm2yjKCaXeYl2aNkvk4glB7k4mYZg0kXf1N6pdJQRVOnpcJ3dbXy3ZfsC0Omxh1FBIuN+014R3aczE=;
Message-ID: <291446.69552.qm@web65408.mail.ac4.yahoo.com>
X-YMail-OSG: vJLLwXIVM1mIXrqXAVmYP9lmba8JoA71tHt7N6UK9YYiZ1n
 iayffvsOl7rq7oLzGAyqPZTjSvu0fESCSUJghuGPy915oFPUfrNbBUCHgqmN
 9gT7f6HiQQ32WRl2UCmfc.ysAmXMF8mSx.YnvnHbhEqhOQk3RtsCqJ7FF4sM
 tyahpu0T7rCpWVRzHRzxCuQY4rg0MhVj1iXwqPYkuP3UvQGChebSw62tITin
 vx8oSptZabuAwL.qEO.AVw5OXGLxifj6dDv0MgriHUaAlMQoGZqKhRcSiNRr
 3adqj1iD4gypjLZuhnDUvx83jduyy1gjMYHbh4Y9.FTXrNZkjcrxwK4wevHF
 H_duuWNwWJG7qtMV3z2Heqi_7F89xOUM2RCutgKZyft8.YocouYnBTyYrRkV
 Nck_ZNJbZj2PSUA--
Received: from [141.217.48.130] by web65408.mail.ac4.yahoo.com via HTTP; Sat, 16 Apr 2011 08:43:34 PDT
X-Mailer: YahooMailWebService/0.8.110.299900
Date: Sat, 16 Apr 2011 08:43:34 -0700 (PDT)
From: HAIDUC SONIA <haiduc_sonia@yahoo.com>
Reply-To: HAIDUC SONIA <haiduc_sonia@yahoo.com>
Subject: Choosing boosting in Lucene
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1844727407-1302968614=:69552"

--0-1844727407-1302968614=:69552
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,=0A=0AI have a few questions about boosting in Lucene. I am running a=
 research=0Aproject where I have, for each document, 4 fields: f1, f2, f3, =
f4. I also=0Ahave a set of queries for my corpus, and I know the relevant d=
ocuments for=0Aeach of these queries. What I want to study is how boosting =
affects the=0Asearch results of these queries. Basically, I want to show th=
at by boosting=0Asome of these fields the results are better (I hope).=0AI =
have, though, a few essential questions that I cannot figure out and I=0Awo=
uld really appreciate some help...=0A=0A1. Is there any difference between =
boosting the fields at index time and=0Aboosting the terms in the queries w=
hich appear in these fields at search=0Atime?=A0=0AAgain, I know beforehand=
 the set of queries and also the terms in these=0Aqueries which appear in t=
he documents in the corpus in each of the fields.=0A=0A2. In what range are=
 boosting values usually chosen? I.e., should I choose=0Aboosts in a 0.5-2 =
range (say 0.5, 1, 1.5, 2), like I have seen in soem=0Aexamples, or is it t=
he same if I choose boosts in a range like 50-200=0A(respectively 50, 100, =
150, 200)?=A0=0A=0A3. How sensitive is boosting in Lucene? For example, if =
I know approximately=0Athe importance of each field, and I want to assign b=
oosting values=0Aaccordingly, what would be good differences between the va=
lues of the=0Aboosting factor for the different fields? More precisely, if =
the importance=0Aorder is f1<f2<f3<f4, will it matter if I choose the boost=
s as (1,2,3,4), or=0A(1, 5, 10, 15)?=0A=0A4. Is there any method besides tr=
ial and error for finding the boosts for=0Aeach field that work the best fo=
r a particular corpus?=A0=0A=0AThank you very much,=0ACristina=0A
--0-1844727407-1302968614=:69552--

From java-user-return-49415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Apr 16 15:54:58 2011
Return-Path: <java-user-return-49415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72211 invoked from network); 16 Apr 2011 15:54:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 16 Apr 2011 15:54:57 -0000
Received: (qmail 30524 invoked by uid 500); 16 Apr 2011 15:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30464 invoked by uid 500); 16 Apr 2011 15:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30456 invoked by uid 99); 16 Apr 2011 15:54:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Apr 2011 15:54:55 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of johngouf85@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Apr 2011 15:54:47 +0000
Received: by eya28 with SMTP id 28so1477441eya.35
        for <java-user@lucene.apache.org>; Sat, 16 Apr 2011 08:54:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=50eYNknX6UbCanYElBUj8yCJOrczxfXgHMgTFrj9uRA=;
        b=lZ1cJsSLdftrOknDmIbb0Bbs7oXh1hLa3cUl3N08ofpTiaBhTdmyi3hdAxGUWv6zQe
         hH+7yXzNTAFetT4RRdzTdnUFkAAmjHUN9iItGOIstLkxQcrZsCKDYBnMJg+mKrfjQwG0
         szAH/MB2rD95xzfJ0zizJNgRv4FIeRXRIP39k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=NiWPW/MofcC4WP6mH0mwHq5MA4+tPqp9wI/3s9Ordo/jCRvV2YoYRvtJLb5oDYVwzq
         MV97uEg0rbt2dmoSOQpXV0NwccsicQuRPM8Jv+k4DU3S79DfNgNvciuXd3qDdN4+j2mA
         BFcq9N2nkQW6Fax2ieE0rbBC3o/ETZ+jVVYIw=
Received: by 10.213.20.213 with SMTP id g21mr3268039ebb.44.1302969267344; Sat,
 16 Apr 2011 08:54:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.213.113.194 with HTTP; Sat, 16 Apr 2011 08:54:07 -0700 (PDT)
In-Reply-To: <291446.69552.qm@web65408.mail.ac4.yahoo.com>
References: <291446.69552.qm@web65408.mail.ac4.yahoo.com>
From: Yiannis Gkoufas <johngouf85@gmail.com>
Date: Sat, 16 Apr 2011 18:54:07 +0300
Message-ID: <BANLkTincZV1EFJQ-3T7ttxHCXt1Nnsh0mA@mail.gmail.com>
Subject: Re: Choosing boosting in Lucene
To: java-user@lucene.apache.org, HAIDUC SONIA <haiduc_sonia@yahoo.com>
Content-Type: multipart/alternative; boundary=0015174a0bf45554ea04a10b2c64
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174a0bf45554ea04a10b2c64
Content-Type: text/plain; charset=ISO-8859-1

On Sat, Apr 16, 2011 at 6:43 PM, HAIDUC SONIA <haiduc_sonia@yahoo.com>wrote:

> Hello,
>
> I have a few questions about boosting in Lucene. I am running a research
> project where I have, for each document, 4 fields: f1, f2, f3, f4. I also
> have a set of queries for my corpus, and I know the relevant documents for
> each of these queries. What I want to study is how boosting affects the
> search results of these queries. Basically, I want to show that by boosting
> some of these fields the results are better (I hope).
> I have, though, a few essential questions that I cannot figure out and I
> would really appreciate some help...
>
> 1. Is there any difference between boosting the fields at index time and
> boosting the terms in the queries which appear in these fields at search
> time?
>

I have noticed that for some queries the results are the same, for others
not. It should be the same, if someone knows why is it happening it would be
very useful.


> Again, I know beforehand the set of queries and also the terms in these
> queries which appear in the documents in the corpus in each of the fields.
>
> 2. In what range are boosting values usually chosen? I.e., should I choose
> boosts in a 0.5-2 range (say 0.5, 1, 1.5, 2), like I have seen in soem
> examples, or is it the same if I choose boosts in a range like 50-200
> (respectively 50, 100, 150, 200)?
>

After running numerous tests I have concluded that a boost factor up to 20
makes sense.


>
> 3. How sensitive is boosting in Lucene? For example, if I know
> approximately
> the importance of each field, and I want to assign boosting values
> accordingly, what would be good differences between the values of the
> boosting factor for the different fields? More precisely, if the importance
> order is f1<f2<f3<f4, will it matter if I choose the boosts as (1,2,3,4),
> or
> (1, 5, 10, 15)?
>

Yes, that is certain.


>
> 4. Is there any method besides trial and error for finding the boosts for
> each field that work the best for a particular corpus?
>

In order to get the best boosts for my tests, I tried brute-forcing it.
In theory, you can experiment with vector space models, modified perceptron.


>
> Thank you very much,
> Cristina
>

Best Regards,
Yiannis

--0015174a0bf45554ea04a10b2c64--

From java-user-return-49416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 07:09:32 2011
Return-Path: <java-user-return-49416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35055 invoked from network); 18 Apr 2011 07:09:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Apr 2011 07:09:32 -0000
Received: (qmail 44081 invoked by uid 500); 18 Apr 2011 07:09:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42799 invoked by uid 500); 18 Apr 2011 07:09:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42790 invoked by uid 99); 18 Apr 2011 07:09:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 07:09:19 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 07:09:13 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id DFDD1C214C
	for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 09:08:50 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0FVUx0OhrHVt for <java-user@lucene.apache.org>;
	Mon, 18 Apr 2011 09:08:50 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id B45AEC2127
	for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 09:08:50 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Mon, 18 Apr 2011 09:08:50 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 18 Apr 2011 09:08:49 +0200
Subject: AW: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Topic: German*Filter, Analyzer "cutting" off letters from (french)
 words...
Thread-Index: Acv7OjyF+1KlB8YoR4yAJcju80nE+QCXP5Dw
Message-ID: <E594BA962D832C49A3CF858DAA3A696C11359DCCAF@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
	<BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
	<BANLkTi=Dejok50UzYfNy3VZ+mSgcoGXtKA@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DCA01@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C11359DCBC6@Exchange2007.mysigndomain.corp>
 <BANLkTi=BOSmvTt4c4OPwXFgZQEfym6BeBA@mail.gmail.com>
In-Reply-To: <BANLkTi=BOSmvTt4c4OPwXFgZQEfym6BeBA@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

V2hhdCBpcyB0aGUgYmVzdCB3YXkgdG8gImF2b2lkIiB0aGUgbG93ZXJjYXNpbmcgKGFuZCBzdGls
bCBiZWluZyBhYmxlIHRvIGV4Y2x1ZGUgc3RvcCB3b3Jkcyk/DQoNCj4gLS0tLS1VcnNwcsO8bmds
aWNoZSBOYWNocmljaHQtLS0tLQ0KPiBWb246IFNpbW9uIFdpbGxuYXVlciBbbWFpbHRvOnNpbW9u
LndpbGxuYXVlckBnb29nbGVtYWlsLmNvbV0NCj4gR2VzZW5kZXQ6IEZyZWl0YWcsIDE1LiBBcHJp
bCAyMDExIDA4OjU2DQo+IEFuOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gQmV0cmVm
ZjogUmU6IEdlcm1hbipGaWx0ZXIsIEFuYWx5emVyICJjdXR0aW5nIiBvZmYgbGV0dGVycyBmcm9t
IChmcmVuY2gpDQo+IHdvcmRzLi4uDQo+IA0KPiBPbiBGcmksIEFwciAxNSwgMjAxMSBhdCA4OjQ4
IEFNLCBDbGVtZW5zIFd5c3MgPGNsZW1lbnNkZXZAbXlzaWduLmNoPg0KPiB3cm90ZToNCj4gPiBE
b2VzIHRoZSBTdGFuZGFyZEFuYWx5emVyIGxvd2VyY2FzZSBpdHMgdGVybXM/DQo+IHllcyENCj4g
DQo+IHNpbW9uDQo+ID4NCj4gPj4gLS0tLS1VcnNwcsO8bmdsaWNoZSBOYWNocmljaHQtLS0tLQ0K
PiA+PiBWb246IENsZW1lbnMgV3lzcyBbbWFpbHRvOmNsZW1lbnNkZXZAbXlzaWduLmNoXQ0KPiA+
PiBHZXNlbmRldDogTWl0dHdvY2gsIDEzLiBBcHJpbCAyMDExIDEzOjM0DQo+ID4+IEFuOiBqYXZh
LXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4gQmV0cmVmZjogQVc6IEdlcm1hbipGaWx0ZXIs
IEFuYWx5emVyICJjdXR0aW5nIiBvZmYgbGV0dGVycyBmcm9tDQo+ID4+IChmcmVuY2gpIHdvcmRz
Li4uDQo+ID4+DQo+ID4+IFRoaXMgaXMgd2hhdCBJIHdhcyBsb29raW5nIGZvciwgdGhhbmtzDQo+
ID4+DQo+ID4+ID4gLS0tLS1VcnNwcsO8bmdsaWNoZSBOYWNocmljaHQtLS0tLQ0KPiA+PiA+IFZv
bjogUm9iZXJ0IE11aXIgW21haWx0bzpyY211aXJAZ21haWwuY29tXQ0KPiA+PiA+IEdlc2VuZGV0
OiBNaXR0d29jaCwgMTMuIEFwcmlsIDIwMTEgMTI6MTENCj4gPj4gPiBBbjogamF2YS11c2VyQGx1
Y2VuZS5hcGFjaGUub3JnDQo+ID4+ID4gQmV0cmVmZjogUmU6IEdlcm1hbipGaWx0ZXIsIEFuYWx5
emVyICJjdXR0aW5nIiBvZmYgbGV0dGVycyBmcm9tDQo+ID4+ID4gKGZyZW5jaCkgd29yZHMuLi4N
Cj4gPj4gPg0KPiA+PiA+IElmIHlvdSBvbmx5IHdhbnQgdG8gaWdub3JlIGdlcm1hbiBzdG9wd29y
ZHMsIHlvdSBkb24ndCBuZWVkIHRvIHVzZQ0KPiA+PiA+IHRoZSBnZXJtYW4gYW5hbHl6ZXIgd2l0
aCBnZXJtYW4gc3RlbW1pbmcuIHlvdSBjYW4ganVzdCB1c2UNCj4gPj4gPiBTdGFuZGFyZEFuYWx5
emVyIHdpdGggeW91ciBvd24gc3RvcHdvcmRzIHNldCENCj4gPj4gPg0KPiA+PiA+IE9uIFdlZCwg
QXByIDEzLCAyMDExIGF0IDM6NTEgQU0sIENsZW1lbnMgV3lzcw0KPiA+PiA8Y2xlbWVuc2RldkBt
eXNpZ24uY2g+DQo+ID4+ID4gd3JvdGU6DQo+ID4+ID4gPiBXaGF0IEkgcmVhbGx5IHdhbnQgdG8g
ZG8gaXMgaWdub3JlIGdlcm1hbiBzdG9wIHdvcmRzIHN1Y2ggYXMNCj4gPj4gPiA+ICJkZXIiLCAi
ZGllIiwNCj4gPj4gPiAiZGFzIiwgImVpbiIsLi4uDQo+ID4+ID4gPg0KPiA+PiA+ID4+IC0tLS0t
VXJzcHLDvG5nbGljaGUgTmFjaHJpY2h0LS0tLS0NCj4gPj4gPiA+PiBWb246IFJvYmVydCBNdWly
IFttYWlsdG86cmNtdWlyQGdtYWlsLmNvbV0NCj4gPj4gPiA+PiBHZXNlbmRldDogRGllbnN0YWcs
IDEyLiBBcHJpbCAyMDExIDE3OjAzDQo+ID4+ID4gPj4gQW46IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiA+PiA+ID4+IEJldHJlZmY6IFJlOiBHZXJtYW4qRmlsdGVyLCBBbmFseXplciAi
Y3V0dGluZyIgb2ZmIGxldHRlcnMgZnJvbQ0KPiA+PiA+ID4+IChmcmVuY2gpIHdvcmRzLi4uDQo+
ID4+ID4gPj4NCj4gPj4gPiA+PiBPbiBUdWUsIEFwciAxMiwgMjAxMSBhdCA4OjQ2IEFNLCBDbGVt
ZW5zIFd5c3MNCj4gPj4gPiA8Y2xlbWVuc2RldkBteXNpZ24uY2g+DQo+ID4+ID4gPj4gd3JvdGU6
DQo+ID4+ID4gPj4gPiBXaHkgc28/IFdoZXJlIGhhdmUgdGhlIGUncyBnb25lPw0KPiA+PiA+ID4+
ID4NCj4gPj4gPiA+Pg0KPiA+PiA+ID4+IHRoZSBlIGlzIGJlaW5nIHN0ZW1tZWQgYXMgaXRzIGEg
Z2VybWFuIHN1ZmZpeC4uLiBhbGwgb2YgdGhlDQo+ID4+ID4gPj4gZ2VybWFuIHN0ZW1taW5nIGFs
Z29yaXRobXMgcmVtb3ZlIGZpbmFsIC1lLCBhcyBkbyBhbGwgdGhlIGZyZW5jaA0KPiA+PiA+ID4+
IHN0ZW1taW5nDQo+ID4+ID4gYWxnb3JpdGhtcy4NCj4gPj4gPiA+Pg0KPiA+PiA+ID4+IHNvIGkg
ZG9uJ3QgdW5kZXJzdGFuZCB5b3VyIHByb2JsZW0uDQo+ID4+ID4gPj4NCj4gPj4gPiA+PiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tDQo+ID4+ID4gPj4gLS0tDQo+ID4+ID4gPj4gLS0gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDoN
Cj4gPj4gPiA+PiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4g
PiA+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOg0KPiA+PiA+ID4+IGphdmEtdXNl
ci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4+ID4gPg0KPiA+PiA+ID4NCj4gPj4gPg0KPiA+
PiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0NCj4gPj4gPiAtLSBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4gPiBGb3IgYWRkaXRpb25hbCBj
b21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+DQo+
ID4NCj4gDQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-49417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 09:19:56 2011
Return-Path: <java-user-return-49417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39789 invoked from network); 18 Apr 2011 09:19:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Apr 2011 09:19:56 -0000
Received: (qmail 70147 invoked by uid 500); 18 Apr 2011 09:19:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68809 invoked by uid 500); 18 Apr 2011 09:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68730 invoked by uid 99); 18 Apr 2011 09:18:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 09:18:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.75.116.14] (HELO mail.wehay.com) (217.75.116.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 09:18:40 +0000
Received: from [192.168.24.69] ([217.75.116.61])
	(authenticated bits=0)
	by mail.wehay.com (8.14.3/8.14.4) with ESMTP id p3I9IGDb028460
	for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 11:18:19 +0200
Message-ID: <4DAC01C9.1000501@thorntothehorn.org>
Date: Mon, 18 Apr 2011 19:18:01 +1000
From: Antony Bowesman <adb@thorntothehorn.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: What doc id to use on IndexReader with SetNextReader
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Migrating some code from 2.3.2 to 2.9.4 and I have custom Collectors.

Now there are multiple calls to collect and each call needs to adjust the passed 
doc id by docBase as given in SetNextReader.

However, if you want to fetch the document in the collector, what 
docId/IndexReader combination should be used.

Given that

collect(int doc)
setNextReader(IndexReader reader, int docBase)

I have tested the following two which seem to get the same document

Document d = searcher.getIndexReader.document(doc + docBase)
Document d = reader.document(doc)

Is this guaranteed to always be the case and how the APIs should be used?

Thanks
Antony

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 09:29:23 2011
Return-Path: <java-user-return-49418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70400 invoked from network); 18 Apr 2011 09:29:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Apr 2011 09:29:22 -0000
Received: (qmail 83372 invoked by uid 500); 18 Apr 2011 09:29:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82756 invoked by uid 500); 18 Apr 2011 09:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82744 invoked by uid 99); 18 Apr 2011 09:29:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 09:29:11 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 09:29:03 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id BE2E2D36009
	for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 11:28:41 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id rH7vGJXy0jvR for <java-user@lucene.apache.org>;
	Mon, 18 Apr 2011 11:28:35 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 504DAD36006
	for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 11:28:35 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4DAC01C9.1000501@thorntothehorn.org>
In-Reply-To: <4DAC01C9.1000501@thorntothehorn.org>
Subject: RE: What doc id to use on IndexReader with SetNextReader
Date: Mon, 18 Apr 2011 11:28:51 +0200
Message-ID: <004801cbfdab$07f4cdb0$17de6910$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQH5Cu6m14PzJHnpVLOPC1mSCnZ6OpQJPxGg
Content-language: de

Hi,

> Document d = searcher.getIndexReader.document(doc + docBase)

This is of course working, but somehow useless as it transforms the ID two
times and that slows down a little bit. Inside collectors you should *only*
use the IndexReader and Scorer given by the setNextReader / setScorer calls.

> Document d = reader.document(doc)

This is the correct way to do it.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 09:44:15 2011
Return-Path: <java-user-return-49419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17963 invoked from network); 18 Apr 2011 09:44:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Apr 2011 09:44:14 -0000
Received: (qmail 334 invoked by uid 500); 18 Apr 2011 09:44:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 171 invoked by uid 500); 18 Apr 2011 09:44:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 163 invoked by uid 99); 18 Apr 2011 09:44:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 09:44:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.75.116.14] (HELO mail.wehay.com) (217.75.116.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 09:44:02 +0000
Received: from [192.168.24.69] ([217.75.116.61])
	(authenticated bits=0)
	by mail.wehay.com (8.14.3/8.14.4) with ESMTP id p3I9hdWA030975
	for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 11:43:41 +0200
Message-ID: <4DAC07BC.1050706@thorntothehorn.org>
Date: Mon, 18 Apr 2011 19:43:24 +1000
From: Antony Bowesman <adb@thorntothehorn.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: What doc id to use on IndexReader with SetNextReader
References: <4DAC01C9.1000501@thorntothehorn.org> <004801cbfdab$07f4cdb0$17de6910$@thetaphi.de>
In-Reply-To: <004801cbfdab$07f4cdb0$17de6910$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Uwe, I assumed as much.

On 18/04/2011 7:28 PM, Uwe Schindler wrote:
>> Document d = reader.document(doc)
>
> This is the correct way to do it.
>
> Uwe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 09:49:50 2011
Return-Path: <java-user-return-49420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62082 invoked from network); 18 Apr 2011 09:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Apr 2011 09:49:49 -0000
Received: (qmail 9774 invoked by uid 500); 18 Apr 2011 09:49:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9617 invoked by uid 500); 18 Apr 2011 09:49:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9602 invoked by uid 99); 18 Apr 2011 09:49:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 09:49:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 09:49:38 +0000
Received: by vws7 with SMTP id 7so5464395vws.35
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 02:49:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=SSZ/HRTq1OW1jr+vYNsx1ZEERV7ltTil6YLkJqyTamk=;
        b=w/xnZD0RNBwI/CJLvmjd16NkHMVypanwMTPX0xPm5EurNMqlRkOr2qIeHc/uDWeOWJ
         Q6pPYS7zN8IGi/78OVM510OauSXrAVJWbybOp4U8UruO02qpdq+k+4rP2lEx6xhBL8ys
         UYcNB2wc7VCrbg7G9md+3/+PvzoeOIf5whosM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=oa3869VGhpMhJ9n8tpKfNNZifUAG6R0DuIRwInqUA7GSAt8UD0QP9+JxZWBu5S72fd
         alb/KsVeIaYi0FKUaKlxqy0sFcPiVSgTyUypPXy5OcfyiYkY9I33FKZ3v7YMM4gK6M3C
         i3cfnnGjaCB9pjFeL9RkpZeyz4Pf7wcfDl6go=
Received: by 10.52.71.99 with SMTP id t3mr6462975vdu.176.1303120157291; Mon,
 18 Apr 2011 02:49:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.164.166 with HTTP; Mon, 18 Apr 2011 02:41:03 -0700 (PDT)
In-Reply-To: <291446.69552.qm@web65408.mail.ac4.yahoo.com>
References: <291446.69552.qm@web65408.mail.ac4.yahoo.com>
From: Anshum <anshumg@gmail.com>
Date: Mon, 18 Apr 2011 15:11:03 +0530
Message-ID: <BANLkTin79p98hnKzGhtSMAungKbAqEUe3g@mail.gmail.com>
Subject: Re: Choosing boosting in Lucene
To: java-user@lucene.apache.org, HAIDUC SONIA <haiduc_sonia@yahoo.com>
Content-Type: multipart/alternative; boundary=20cf307f375e1334df04a12e4e4b
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf307f375e1334df04a12e4e4b
Content-Type: text/plain; charset=ISO-8859-1

Hi Cristina,
Lucene scores each doc per search based on its scoring formula. As there is
a lot of query related normalizing and other component, the scores for docs
change as the query changes.
About understanding how boosting affects the score in detail, you may read
about *lucene scoring* at
http://lucene.apache.org/java/3_1_0/scoring.html
And the *scoring formula* at:
http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/search/Similarity.html

Talking about the difference between index time and search time boost, score
time boost is term level and generally speaking, index level boost is
field/doc level.
Also, having a look at the scoring formula in the Similarity class (link
provided above) you'd be in a  better position to understand the difference
(and there is some).
You should also use the *IndexSearcher's explain method*
http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/search/IndexSearcher.html#explain(org.apache.lucene.search.Query,
int)

Choosing the boost is again about what is it that you desire, these are
subjective questions. You should try different sets and have a look at the
score using the explain function to figure out what fits you the best.
Relevance or an apt method about boost values, can again be figured out
using varying the boost *via* *trial and error*. That is pretty much a
general practice.

Hope this helps you figuring out a reasonable solution and boost values.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Sat, Apr 16, 2011 at 9:13 PM, HAIDUC SONIA <haiduc_sonia@yahoo.com>wrote:

> Hello,
>
> I have a few questions about boosting in Lucene. I am running a research
> project where I have, for each document, 4 fields: f1, f2, f3, f4. I also
> have a set of queries for my corpus, and I know the relevant documents for
> each of these queries. What I want to study is how boosting affects the
> search results of these queries. Basically, I want to show that by boosting
> some of these fields the results are better (I hope).
> I have, though, a few essential questions that I cannot figure out and I
> would really appreciate some help...
>
> 1. Is there any difference between boosting the fields at index time and
> boosting the terms in the queries which appear in these fields at search
> time?
> Again, I know beforehand the set of queries and also the terms in these
> queries which appear in the documents in the corpus in each of the fields.
>
> 2. In what range are boosting values usually chosen? I.e., should I choose
> boosts in a 0.5-2 range (say 0.5, 1, 1.5, 2), like I have seen in soem
> examples, or is it the same if I choose boosts in a range like 50-200
> (respectively 50, 100, 150, 200)?
>
> 3. How sensitive is boosting in Lucene? For example, if I know
> approximately
> the importance of each field, and I want to assign boosting values
> accordingly, what would be good differences between the values of the
> boosting factor for the different fields? More precisely, if the importance
> order is f1<f2<f3<f4, will it matter if I choose the boosts as (1,2,3,4),
> or
> (1, 5, 10, 15)?
>
> 4. Is there any method besides trial and error for finding the boosts for
> each field that work the best for a particular corpus?
>
> Thank you very much,
> Cristina
>

--20cf307f375e1334df04a12e4e4b--

From java-user-return-49421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 11:36:10 2011
Return-Path: <java-user-return-49421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8373 invoked from network); 18 Apr 2011 11:36:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Apr 2011 11:36:10 -0000
Received: (qmail 36791 invoked by uid 500); 18 Apr 2011 11:36:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36755 invoked by uid 500); 18 Apr 2011 11:36:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36747 invoked by uid 99); 18 Apr 2011 11:36:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 11:36:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 11:36:00 +0000
Received: by qwj9 with SMTP id 9so3500484qwj.35
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 04:35:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=wsLCq+pg5CBekbRHtOpqHBw3FoplRpPnbbAdnfPqVXg=;
        b=uLEywjxWUhX5msVLk6CsYekf40SKfDX5biyJmDcijXZEp8H6k0mUJ/Scv+p6SKD/Yf
         gWsu1ofnTCjdtMl6Q/ZX0Y3XvqjKFM7J1EEwFVnZuRrj2Dwe/Si3vx+w7bnLensSYJBH
         vkDl9dmbQx9D5IG4Y8eZxERX0XRDobIiwDivg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=NxVst5Vqi85VVuPQsvwoc2Y1pQVZbJGnoKJxaIxzn1CJ6bg+0rPWGn8TmKcSkNldhe
         LrMTsM2RPSKi3Y0ungLkEi9WjvHqNPt4s2EwWSCywr0XVKSiI9u6lHaCeXl2lLuwP6O8
         5f0CO+eOf5L46hdaGu525MzMrmkJ4YLYUnD8o=
MIME-Version: 1.0
Received: by 10.229.35.1 with SMTP id n1mr3392910qcd.84.1303126539431; Mon, 18
 Apr 2011 04:35:39 -0700 (PDT)
Received: by 10.229.120.81 with HTTP; Mon, 18 Apr 2011 04:35:39 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C11359DCCAF@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C11359DC961@Exchange2007.mysigndomain.corp>
	<BANLkTinwHpEvgTpPBsSL-=24-F3EQdhYdw@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DC9D1@Exchange2007.mysigndomain.corp>
	<BANLkTi=Dejok50UzYfNy3VZ+mSgcoGXtKA@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DCA01@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C11359DCBC6@Exchange2007.mysigndomain.corp>
	<BANLkTi=BOSmvTt4c4OPwXFgZQEfym6BeBA@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C11359DCCAF@Exchange2007.mysigndomain.corp>
Date: Mon, 18 Apr 2011 07:35:39 -0400
Message-ID: <BANLkTiksHnMac-sNvvF-aW8vnUt+zy=fSw@mail.gmail.com>
Subject: Re: German*Filter, Analyzer "cutting" off letters from (french) words...
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You can easily string together your own tokenizer and any number of filters
to create an analyzer that does exactly what you need. Lucene In Action
shows an example for creating your own analyzer by assembling
the standard parts....

Best
Erick

On Mon, Apr 18, 2011 at 3:08 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> What is the best way to "avoid" the lowercasing (and still being able to =
exclude stop words)?
>
>> -----Urspr=FCngliche Nachricht-----
>> Von: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
>> Gesendet: Freitag, 15. April 2011 08:56
>> An: java-user@lucene.apache.org
>> Betreff: Re: German*Filter, Analyzer "cutting" off letters from (french)
>> words...
>>
>> On Fri, Apr 15, 2011 at 8:48 AM, Clemens Wyss <clemensdev@mysign.ch>
>> wrote:
>> > Does the StandardAnalyzer lowercase its terms?
>> yes!
>>
>> simon
>> >
>> >> -----Urspr=FCngliche Nachricht-----
>> >> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> >> Gesendet: Mittwoch, 13. April 2011 13:34
>> >> An: java-user@lucene.apache.org
>> >> Betreff: AW: German*Filter, Analyzer "cutting" off letters from
>> >> (french) words...
>> >>
>> >> This is what I was looking for, thanks
>> >>
>> >> > -----Urspr=FCngliche Nachricht-----
>> >> > Von: Robert Muir [mailto:rcmuir@gmail.com]
>> >> > Gesendet: Mittwoch, 13. April 2011 12:11
>> >> > An: java-user@lucene.apache.org
>> >> > Betreff: Re: German*Filter, Analyzer "cutting" off letters from
>> >> > (french) words...
>> >> >
>> >> > If you only want to ignore german stopwords, you don't need to use
>> >> > the german analyzer with german stemming. you can just use
>> >> > StandardAnalyzer with your own stopwords set!
>> >> >
>> >> > On Wed, Apr 13, 2011 at 3:51 AM, Clemens Wyss
>> >> <clemensdev@mysign.ch>
>> >> > wrote:
>> >> > > What I really want to do is ignore german stop words such as
>> >> > > "der", "die",
>> >> > "das", "ein",...
>> >> > >
>> >> > >> -----Urspr=FCngliche Nachricht-----
>> >> > >> Von: Robert Muir [mailto:rcmuir@gmail.com]
>> >> > >> Gesendet: Dienstag, 12. April 2011 17:03
>> >> > >> An: java-user@lucene.apache.org
>> >> > >> Betreff: Re: German*Filter, Analyzer "cutting" off letters from
>> >> > >> (french) words...
>> >> > >>
>> >> > >> On Tue, Apr 12, 2011 at 8:46 AM, Clemens Wyss
>> >> > <clemensdev@mysign.ch>
>> >> > >> wrote:
>> >> > >> > Why so? Where have the e's gone?
>> >> > >> >
>> >> > >>
>> >> > >> the e is being stemmed as its a german suffix... all of the
>> >> > >> german stemming algorithms remove final -e, as do all the french
>> >> > >> stemming
>> >> > algorithms.
>> >> > >>
>> >> > >> so i don't understand your problem.
>> >> > >>
>> >> > >> ----------------------------------------------------------------
>> >> > >> ---
>> >> > >> -- To unsubscribe, e-mail:
>> >> > >> java-user-unsubscribe@lucene.apache.org
>> >> > >> For additional commands, e-mail:
>> >> > >> java-user-help@lucene.apache.org
>> >> > >
>> >> > >
>> >> >
>> >> > -------------------------------------------------------------------
>> >> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Apr 18 16:16:17 2011
Return-Path: <java-user-return-49422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23421 invoked from network); 18 Apr 2011 16:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.3)
  by minotaur.apache.org with SMTP; 18 Apr 2011 16:16:17 -0000
Received: (qmail 89413 invoked by uid 500); 18 Apr 2011 16:16:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89381 invoked by uid 500); 18 Apr 2011 16:16:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89373 invoked by uid 99); 18 Apr 2011 16:16:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 16:16:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mindas@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 16:16:07 +0000
Received: by qwj9 with SMTP id 9so3709734qwj.35
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 09:15:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=E/cbL6QTAi5l5hy6dreEj9KdAAfYA12vaalMrRYGn48=;
        b=Df+yy/tKU3xwB9PdGl7+MqaJ1mfK4hbjsdsUTlnSsjJb10uZnIvyBqVkCtDqTHcdAG
         cYUBKsrJblXCgptH3EjbTBUKXkqlB5Qs7jUgzcJ40loFZzfaBFYVkyNIX0XcebwHSylG
         SfVKc7WKBFMAA5Lih3QMVvfqIBq5Lh9391Rb0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=WilSQOmTHdEVnB+der4Mra7vfJHxS36uGRJWaqEgrYySPtWxZU1XKrlhNjSEmML1nm
         2qPAZpKDorKZG8UBFYfB9fnkAYzj92Gj9D5xgH/jcw7tqyh1gtHPFvEPSNI4CDktFJKb
         h7S22YCPZFh+BzguhzO53Qs2yntvXRzFpM524=
MIME-Version: 1.0
Received: by 10.229.45.3 with SMTP id c3mr3472746qcf.249.1303143346327; Mon,
 18 Apr 2011 09:15:46 -0700 (PDT)
Received: by 10.229.77.214 with HTTP; Mon, 18 Apr 2011 09:15:46 -0700 (PDT)
Date: Mon, 18 Apr 2011 17:15:46 +0100
Message-ID: <BANLkTikH-d_HeOKwwhfdA61VA+WpNWT_EQ@mail.gmail.com>
Subject: StandardTokenizer question
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Given the code is running under Lucene 3.0.1

8<------------------------------------------------------------------------------
import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.StopAnalyzer;
import org.apache.lucene.analysis.StopFilter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardTokenizer;
import org.apache.lucene.analysis.tokenattributes.TermAttribute;
import org.apache.lucene.util.Version;

public class MyAnalyzer extends Analyzer {

    public TokenStream tokenStream(String fieldName, Reader reader) {
        return
                new StopFilter(
                        true,
                        new StandardTokenizer(Version.LUCENE_30, reader),
                        StopAnalyzer.ENGLISH_STOP_WORDS_SET
                );
    }

    private static void printTokens(String string) throws IOException {
        TokenStream ts = new MyAnalyzer().tokenStream("default", new
StringReader(string));
        TermAttribute termAtt = ts.getAttribute(TermAttribute.class);
        while(ts.incrementToken()) {
            System.out.print(termAtt.term());
            System.out.print(" ");
        }
        System.out.println();
    }

    public static void main(String[] args) throws IOException {
        printTokens("one_two_three");           // prints "one two three"
        printTokens("four4_five5_six6");        // prints "four4_five5_six6"
        printTokens("seven7_eight_nine");       // prints "seven7_eight nine"
        printTokens("ten_eleven11_twelve");     // prints "ten_eleven11_twelve"
    }
}

8<------------------------------------------------------------------------------

I can understand why "one_two_three" and "four4_five5_six6" are
tokenized as they are, as this is explained in the StandardTokenizer
class header Javadoc. But the other two cases are more subtle and I'm
not quite sure I get the idea.

If appearance of "7" after "seven" makes it joint token with "eight"
but separate to "nine", why is "ten" glued to "eleven11"?

Is there any standard and/or easy way to make StandardTokenizer always
split on the underscore?

Thanks in advance.

m.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 12:56:23 2011
Return-Path: <java-user-return-49429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06E8A1A1E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 12:56:23 +0000 (UTC)
Received: (qmail 72298 invoked by uid 500); 19 Apr 2011 12:49:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72255 invoked by uid 500); 19 Apr 2011 12:49:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72247 invoked by uid 99); 19 Apr 2011 12:49:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 12:49:02 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 12:48:57 +0000
Received: by fxm7 with SMTP id 7so5851983fxm.35
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 05:48:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=RbhrSb4VcECDnhMvqV/ROivgWx185yGPG+Qis0EpIy0=;
        b=w8MqqqFHyU6/O0Q+QXvas+7z/QBiuxiLEZBLueV0bFfcZuxI+WYqLBT9PAOizoQri5
         9YsiXcMY9ks/XmpEGrmr+B56Ovrd9ynRhYMIjyDIwyORC71UeK/T886vtGz/+/H/NcLR
         T6Iyg99sDkjt0OwBU17mXXiOsXdTmBmKZsoyM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Oa3FQCQpRXfWVDS85coE7jSH2lI5cb9tcZVnWgtbK9+aiFevfr+7h+gzAwkofNkdUJ
         gfJ18RzO4mU0o8H418K2PtHO1ZZkKRRtGPpepLywrmHdCvsIVX3Ua6GL7qWdf/251dct
         9CMmr1bYPU2Bc3/8lTUN0M+1w4RhbXlanNNdk=
MIME-Version: 1.0
Received: by 10.223.76.147 with SMTP id c19mr795978fak.55.1303217315663; Tue,
 19 Apr 2011 05:48:35 -0700 (PDT)
Received: by 10.223.95.153 with HTTP; Tue, 19 Apr 2011 05:48:35 -0700 (PDT)
Date: Tue, 19 Apr 2011 14:48:35 +0200
Message-ID: <BANLkTi=mQ=9ZQEESABMSq-iEoBSSNRNevg@mail.gmail.com>
Subject: java.lang.IncompatibleClassChangeError with BM25BooleanQuery
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c3fb02a514504a144edec

--0015174c3fb02a514504a144edec
Content-Type: text/plain; charset=ISO-8859-1

Hi, I get this error:

Exception in thread "main" java.lang.IncompatibleClassChangeError:
Implementing class
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
at NVoting.<init>(NVoting.java:143)
at Main.main(Main.java:8)


on this line:

booleanQuery.add(new BM25BooleanQuery(current_tags[i],
"tags",
new StandardAnalyzer(org.apache.lucene.util.Version.LUCENE_31)),
BooleanClause.Occur.SHOULD);

I'm using an implementation of BM25 Okapi retrieval system:
http://nlp.uned.es/~jperezi/Lucene-BM25

Can you help me to fix the issue ? I'm using Lucene 3.1
thanks

--0015174c3fb02a514504a144edec--

From java-user-return-49423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 13:06:35 2011
Return-Path: <java-user-return-49423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 092B91546
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 13:06:35 +0000 (UTC)
Received: (qmail 81328 invoked by uid 500); 18 Apr 2011 20:58:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81290 invoked by uid 500); 18 Apr 2011 20:58:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81280 invoked by uid 99); 18 Apr 2011 20:58:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 20:58:34 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.212.180 as permitted sender)
Received: from [209.85.212.180] (HELO mail-px0-f180.google.com) (209.85.212.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 20:58:29 +0000
Received: by pxj25 with SMTP id 25so2945973pxj.11
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 13:58:08 -0700 (PDT)
Received: by 10.68.9.6 with SMTP id v6mr646079pba.398.1303160288490;
        Mon, 18 Apr 2011 13:58:08 -0700 (PDT)
Received: from mail-px0-f180.google.com (mail-px0-f180.google.com [209.85.212.180])
        by mx.google.com with ESMTPS id h7sm2515295pbg.74.2011.04.18.13.58.06
        (version=SSLv3 cipher=OTHER);
        Mon, 18 Apr 2011 13:58:07 -0700 (PDT)
Received: by pxj25 with SMTP id 25so2945948pxj.11
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 13:58:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.55.201 with SMTP id u9mr7275790pbp.328.1303160286279; Mon,
 18 Apr 2011 13:58:06 -0700 (PDT)
Received: by 10.68.62.231 with HTTP; Mon, 18 Apr 2011 13:58:06 -0700 (PDT)
In-Reply-To: <1302781494458-2819970.post@n3.nabble.com>
References: <1302781494458-2819970.post@n3.nabble.com>
Date: Tue, 19 Apr 2011 06:58:06 +1000
Message-ID: <BANLkTimXZ5ZgtKM9pSBKcAe-idU2mXHSPQ@mail.gmail.com>
Subject: Re: switching between Query parsers
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Thu, Apr 14, 2011 at 9:44 PM, shrinath.m <shrinath.m@webyog.com> wrote:
> Consider this case :
>
> Lucene index contains documents with these fields :
> title
> author
> publisher
>
> I have coded my app to use MultiFieldQueryParser so that it queries all fields.
> Now if user types something like "author:tom" in search box, how do I make
> it go with only that field ?

That should already be happening.  MultiFieldQueryParser only applies
the multiple fields when no field is specified.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 13:10:05 2011
Return-Path: <java-user-return-49430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8200F1C09
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 13:10:05 +0000 (UTC)
Received: (qmail 11202 invoked by uid 500); 19 Apr 2011 13:10:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11162 invoked by uid 500); 19 Apr 2011 13:10:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11154 invoked by uid 99); 19 Apr 2011 13:10:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 13:10:03 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 13:09:58 +0000
Received: by fxm7 with SMTP id 7so5871283fxm.35
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 06:09:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=KUxYnsg3B/i+taHa9FcZEk1JJYpJnElAjomTNgAQr+I=;
        b=XQubpEOYnlYDRlXrHVmQeMkA/jaIJb81orJOWgMDsuj4lp3x8QbOJR6qrgTYWIqI6p
         pOdsYIYuv7Fr8ikT6vjW7dBzQUegiEeUGhBzzuH7hOUOvNuWZwEQKpvIrDC1LtxiSdQB
         1dRXPnwtsyZZgfDGjGFZYspqEiubUHqwBe2IM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Mai8Bm5uaPl9AULp8nqbTc9lbAYdiWwXnWb6e2yqtnOUc0JVyxschdvqtY01xEGCKV
         1BEHGQNSiotCXM0qXq+WOP68d3i8Juh4g7hcb5WsDluNPW+m5dFVPb83MyQikCYdvfuD
         wIiMa9AZc5ds7STRpzjm7m/4JPHFQCecEKHIE=
MIME-Version: 1.0
Received: by 10.223.99.153 with SMTP id u25mr822068fan.112.1303218577196; Tue,
 19 Apr 2011 06:09:37 -0700 (PDT)
Received: by 10.223.95.153 with HTTP; Tue, 19 Apr 2011 06:09:37 -0700 (PDT)
In-Reply-To: <BANLkTi=mQ=9ZQEESABMSq-iEoBSSNRNevg@mail.gmail.com>
References: <BANLkTi=mQ=9ZQEESABMSq-iEoBSSNRNevg@mail.gmail.com>
Date: Tue, 19 Apr 2011 15:09:37 +0200
Message-ID: <BANLkTikQdY9XASmj926RpeBZvVsspxaQQQ@mail.gmail.com>
Subject: Re: java.lang.IncompatibleClassChangeError with BM25BooleanQuery
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174beb465bc77904a14538ba

--0015174beb465bc77904a14538ba
Content-Type: text/plain; charset=ISO-8859-1

I've also tried to use older Lucene versions such as:
 Lucene 3.1 and Lucene 2.9.4 with no luck.

Thanks



On 19 April 2011 14:48, Patrick Diviacco <patrick.diviacco@gmail.com> wrote:

> Hi, I get this error:
>
> Exception in thread "main" java.lang.IncompatibleClassChangeError:
> Implementing class
> at java.lang.ClassLoader.defineClass1(Native Method)
>  at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632)
> at java.lang.ClassLoader.defineClass(ClassLoader.java:616)
>  at
> java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
> at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
>  at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
> at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
>  at java.security.AccessController.doPrivileged(Native Method)
> at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
>  at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
> at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
>  at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
> at NVoting.<init>(NVoting.java:143)
>  at Main.main(Main.java:8)
>
>
> on this line:
>
> booleanQuery.add(new BM25BooleanQuery(current_tags[i],
>  "tags",
> new StandardAnalyzer(org.apache.lucene.util.Version.LUCENE_31)),
>  BooleanClause.Occur.SHOULD);
>
> I'm using an implementation of BM25 Okapi retrieval system:
> http://nlp.uned.es/~jperezi/Lucene-BM25
>
> Can you help me to fix the issue ? I'm using Lucene 3.1
> thanks
>

--0015174beb465bc77904a14538ba--

From java-user-return-49424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 13:11:19 2011
Return-Path: <java-user-return-49424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0DD771094
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 13:11:19 +0000 (UTC)
Received: (qmail 91809 invoked by uid 500); 18 Apr 2011 21:03:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91663 invoked by uid 500); 18 Apr 2011 21:03:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91655 invoked by uid 99); 18 Apr 2011 21:03:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 21:03:17 +0000
X-ASF-Spam-Status: No, hits=3.9 required=5.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Apr 2011 21:03:11 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <madhuri_1820@yahoo.com>)
	id 1QBvas-0004Dl-Rr
	for java-user@lucene.apache.org; Mon, 18 Apr 2011 14:02:50 -0700
From: madhuri_1820@yahoo.com
To: java-user@lucene.apache.org
Message-ID: <18982477.7778.1303160570858.JavaMail.nabble@ben.nabble.com>
Subject: Calculate document lucene score after the search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Mon, 18 Apr 2011 14:02:50 -0700

Hi,

I am trying to find the actual lucene score of the document after the search. I have set different boost values to fields. I am using document.getBoost(), to find the score but I am getting document boost as 1 for all the documents.

Is there any way I can calculate the actual score of the document.

Thanks,
Madhu.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 13:23:49 2011
Return-Path: <java-user-return-49426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3D3582B46
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 13:23:49 +0000 (UTC)
Received: (qmail 77999 invoked by uid 500); 19 Apr 2011 06:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77965 invoked by uid 500); 19 Apr 2011 06:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77956 invoked by uid 99); 19 Apr 2011 06:11:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 06:11:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.212.180 as permitted sender)
Received: from [209.85.212.180] (HELO mail-px0-f180.google.com) (209.85.212.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 06:11:37 +0000
Received: by pxj25 with SMTP id 25so3200156pxj.11
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 23:11:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:x-originating-ip:date:message-id
         :subject:from:to:content-type;
        bh=7JrDSsuwwuH57WJlphoKs6uJ64sFlVikwGjsB4Udn0Q=;
        b=iDIpK9nc7AEdh+WafctwwimNS9Dn4taZMgtLznGOPxd2/NvZ58u7gq9mo/fcnOrZ8U
         UPsDdsAfy81sf84zyOwPXbjTOJtUzHp8w+p4mp60hWsEpie33iIl03Z6mgN4BUTlWJ0O
         78haz59mWFId7ZJNlue3wN/fPH7dKFnIJCB7o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:x-originating-ip:date:message-id:subject:from:to
         :content-type;
        b=n8zEYOopJvdXcCkq7exLrxqf1vR0XrQ60MVLMRuk/GeMc9WuY/uD+3Rp1VUPO2rpR6
         8LuG/Wn0r4rO6aXOgZwwTG3rvz1jOHC91bB5taxvAbbP/g2/3rUHP5xhG0guFfMnVO0y
         t52Yn7XUO0SPjTauEQW6i/VVk9QhdrU02qnb4=
Received: by 10.68.54.102 with SMTP id i6mr4557863pbp.111.1303193475870;
        Mon, 18 Apr 2011 23:11:15 -0700 (PDT)
Received: from mail-pz0-f53.google.com (mail-pz0-f53.google.com [209.85.210.53])
        by mx.google.com with ESMTPS id d3sm2722220pbh.73.2011.04.18.23.11.13
        (version=SSLv3 cipher=OTHER);
        Mon, 18 Apr 2011 23:11:14 -0700 (PDT)
Received: by pzk3 with SMTP id 3so3201549pzk.12
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 23:11:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.23.65 with SMTP id k1mr8693011pbf.414.1303193473133; Mon,
 18 Apr 2011 23:11:13 -0700 (PDT)
Received: by 10.68.44.33 with HTTP; Mon, 18 Apr 2011 23:11:13 -0700 (PDT)
X-Originating-IP: [216.218.222.20]
Date: Tue, 19 Apr 2011 14:11:13 +0800
Message-ID: <BANLkTikxcM0RkgkAct=RGhqwHCtDVWz-UQ@mail.gmail.com>
Subject: How to make search distributed and scalable
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec52156ef0a2bc404a13f6034
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec52156ef0a2bc404a13f6034
Content-Type: text/plain; charset=UTF-8

Hi, buddies,
     I'm reading something about solr and elastic-search, the thing i have
been curious is how to make search engine distributed(using something like
hadoop?).

       I readed something about shards and replication tech mentioned in the
user guide, but what is lacked for the open source projects like solr and
elastic-search is the detailed essay about the architecture and the design
of the system, instead, they only provide full user guide.

      Of course, i'm a user of this kind of system, however, i want to get
more about the insight.

could anyone here provide me more materials to get me clear about the
distributed architecture of such open source search engines?

Thanks~

---
Weiwei Wang
gtalk: ww.wang.cs@gmail.com

--bcaec52156ef0a2bc404a13f6034--

From java-user-return-49428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 13:29:55 2011
Return-Path: <java-user-return-49428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3B5141AA2
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 13:29:55 +0000 (UTC)
Received: (qmail 66186 invoked by uid 500); 19 Apr 2011 11:40:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66129 invoked by uid 500); 19 Apr 2011 11:40:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66115 invoked by uid 99); 19 Apr 2011 11:40:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 11:40:33 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 11:40:27 +0000
Received: by fxm7 with SMTP id 7so5799621fxm.35
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 04:40:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=u15M2rYwUDP1gkJgl03LJ5HEUSenqFypT/ykBFudVVA=;
        b=kbxJCmV3NY23oyM5kMJIaFWMOacAP6J+imPnooJLG2Vg5960UVdWWgAz/cLvYocrOU
         QS4TtZ9iTYQl0VrL7snshOx6dxbipMY3LqG/L4kdV9/41kKNyzwPv0xgFi6fDkqJxXDE
         Pg3NaTF0vMRnXO4aoQBoAb+VnAUYGZZr9BPD0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=RBmP340Fk1N6907nOIn0RDSPKTq1srG8mNNNwUkPTG51jwftF2yJtTrzS3nvkIw8MK
         JHYJWGk9q/RTJHOsqr/U87eNvHA12Cu9bYr7xp5C5m9zhV/ENQm0Tyetsdhs4xboMObX
         rh91CEThOTmvkITHJSbi+9WtXfd+K1yhaP1dk=
MIME-Version: 1.0
Received: by 10.223.85.195 with SMTP id p3mr721222fal.0.1303213206785; Tue, 19
 Apr 2011 04:40:06 -0700 (PDT)
Received: by 10.223.95.153 with HTTP; Tue, 19 Apr 2011 04:40:06 -0700 (PDT)
Date: Tue, 19 Apr 2011 13:40:06 +0200
Message-ID: <BANLkTin+m8zA1ZTMaHdBmA++7tCZuj6vVw@mail.gmail.com>
Subject: Question about passing tags to BM25BooleanQuery
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a69741d0a104a143f87a
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3054a69741d0a104a143f87a
Content-Type: text/plain; charset=ISO-8859-1

I'm using BM25 Okapi Query form here:
http://nlp.uned.es/~jperezi/Lucene-BM25/

I've a quick question. I've a list of tags: "tag1 tag2 tag3" and I'm
currently passing them to the query in this way:

BM25BooleanQuery okapiQuery = new BM25BooleanQuery("tag1 tag2 tag3",
"tags",
new WhitespaceAnalyzer(org.apache.lucene.util.Version.LUCENE_40));

Are them considered individually, or should I concatenate
multiple BM25BooleanQuery into a BooleanQuery ?

thanks.

This is the constructor doc:

public BM25BooleanQuery(java.lang.String query,
                        java.lang.String field,
                        Analyzer analyzer)
                 throws ParseException,
                        java.io.IOException

--20cf3054a69741d0a104a143f87a--

From java-user-return-49427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 14:09:22 2011
Return-Path: <java-user-return-49427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 087C51BB0
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 14:09:22 +0000 (UTC)
Received: (qmail 19678 invoked by uid 500); 19 Apr 2011 06:57:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19615 invoked by uid 500); 19 Apr 2011 06:57:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19586 invoked by uid 99); 19 Apr 2011 06:57:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 06:57:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 06:57:12 +0000
Received: by vws7 with SMTP id 7so6658538vws.35
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 23:56:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=IHgOXwQcgaaFgXroIJ2lhRNPu4M7pW4Fxk7PIPCcaAs=;
        b=FXXjOTWoGiC0u9O2zneY3/K8teK6Vy+Ccea1mBBdvGxYXIbmrxFBKZJnrSqxiR4ivD
         5evvC7J+YWGSXrF55/GA6oQCPaLylAAwuYOb+vq49v6l7jNjEGsMNOPvaGbpirwDYBLs
         CJSOohnyKcOAqWPY2nRRm5D2IJhGJ5OzvKEHc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=FBOj4XtZYTZ8Foya3YfOA7aL7OWqze1IWAZbHNnpf1Sb1jY178l2UwjQbhEGpeBcek
         tqI5CqvtCEEl+krJENou/wF6AffvkAApxvSiKWguC26fFeiRgp5tCXWdXEPiIX1j0SZs
         xbrm7yuSxN6fUe91ScwodiadMCg2B2EssY4dk=
Received: by 10.52.101.194 with SMTP id fi2mr5547583vdb.16.1303196211451; Mon,
 18 Apr 2011 23:56:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.164.166 with HTTP; Mon, 18 Apr 2011 23:56:31 -0700 (PDT)
In-Reply-To: <4DA79940.1000503@sdsc.edu>
References: <4DA79940.1000503@sdsc.edu>
From: Anshum <anshumg@gmail.com>
Date: Tue, 19 Apr 2011 12:26:31 +0530
Message-ID: <BANLkTin4NatF0dF5En1a7D8JT011MgCaXg@mail.gmail.com>
Subject: Re: best practice for reusing documents with multi-valued fields
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec548a40b41973e04a1400377
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec548a40b41973e04a1400377
Content-Type: text/plain; charset=ISO-8859-1

Hi Chris,
So doc.removeFields works fine, just tried it again. You could try using an
approach on the lines of the one mentioned below.

*--snip--*
IndexWriter iw = new IndexWriter(indexDir, new
StandardAnalyzer(Version.LUCENE_30),true, MaxFieldLength.UNLIMITED);
 Document doc = new Document();
doc.add(getField(FIELD1, "aa"));
 doc.add(getField(FIELD1, "bb"));
doc.add(getField(FIELD2, "cc"));
 iw.addDocument(doc);
doc.removeFields("field1");
doc.add(getField(FIELD1, "aaa"));
        doc.add(getField(FIELD1, "bbb"));
        doc.add(getField(FIELD2, "ccc"));
        iw.addDocument(doc);
        IndexReader ir = iw.getReader();
        IndexSearcher is = new IndexSearcher(ir);

        BooleanQuery query = new BooleanQuery();
        query.add(new TermQuery(new Term("field1", "aa")), Occur.MUST);
        ScoreDoc[] sd = is.search(query, 10).scoreDocs;
        for(ScoreDoc scoreDoc:sd){
              System.out.println(ir.document(scoreDoc.doc));
        }
        is.close();
        ir.close();
        iw.close();

*--Snip--*



--
Anshum Gupta
http://ai-cafe.blogspot.com


On Fri, Apr 15, 2011 at 6:32 AM, Christopher Condit <condit@sdsc.edu> wrote:

> I know that it's best practice to reuse the Document object when
> indexing, but I'm curious how multi-valued fields affect this. I tried
> this before indexing each document:
>
> doc.removeFields(myMultiValuedField);
> for (String fieldName: fieldNames) {
>  Field field= doc.getField(field);
>  if (null != field) {
>    field.setValue("");
>  } else {
>    System.out.println("null field");
>  }
> }
>
> And it seems that the null fields (which I had removed) are just
> accumulating. Is there a better way to reuse a document with
> multi-valued fields?
>
> Thanks,
> -Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec548a40b41973e04a1400377--

From java-user-return-49431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 14:11:02 2011
Return-Path: <java-user-return-49431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B246310B0
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 14:11:02 +0000 (UTC)
Received: (qmail 73263 invoked by uid 500); 19 Apr 2011 14:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73213 invoked by uid 500); 19 Apr 2011 14:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73205 invoked by uid 99); 19 Apr 2011 14:11:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 14:11:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 14:10:54 +0000
Received: by fxm7 with SMTP id 7so5935848fxm.35
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 07:10:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=CR8/56PlfobGF9UOAHBaFp2j1dBMUA0ZrDkWlU0/RCI=;
        b=DvIrAcC0mZ6IW/vMMpMZ8v6CevioR0NqI/jz4EGCtssuHD+xuMMTcIZ1WJkt3t0w5N
         RnaQxsK1glnxrJbIdkPGOhNshf8R0wRYwcyQgl4kyGhdKRDbr/Wn/rdqYuGP6n9wXlym
         gCFvFFWkWZ0TkMQgT3p4kgifI8QTjymjy+9vc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=hkR1F9UqPwmwaHvY+wXsXV1v5vWNoiiG3Y3V5K05YI96VGaiqFcm4uxL/yee7XuOkw
         MQC9Zbb0dkrwsZ3e2aUSst4TGT3bTkv7MDZ4LMwZ0BiekcPbyqP47y4jyhsUmbSsbypo
         MSUJr2vZqrStReGs7zLlZsBRNSYb/iV+/j+Ko=
MIME-Version: 1.0
Received: by 10.223.99.153 with SMTP id u25mr890951fan.112.1303222234273; Tue,
 19 Apr 2011 07:10:34 -0700 (PDT)
Received: by 10.223.95.153 with HTTP; Tue, 19 Apr 2011 07:10:34 -0700 (PDT)
Date: Tue, 19 Apr 2011 16:10:34 +0200
Message-ID: <BANLkTimXJ42grB7cSjEy98nJGuGg_pKS3A@mail.gmail.com>
Subject: Lucene: Indexsearcher: java.lang.UnsupportedOperationException
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174beb4656579a04a1461283
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174beb4656579a04a1461283
Content-Type: text/plain; charset=ISO-8859-1

I get the following error message: java.lang.UnsupportedOperationException

with Lucene search method: topDocs = searcher.search(booleanQuery, null,
100);

I'm using an old version of Lucene: Lucene 2.4.1 (I cannot upgrade!)
Can you help me to understand why I get such error ?

thanks
This is the complete code: http://pastie.org/1811677

--0015174beb4656579a04a1461283--

From java-user-return-49425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 14:47:48 2011
Return-Path: <java-user-return-49425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B9731E23
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 14:47:48 +0000 (UTC)
Received: (qmail 40260 invoked by uid 500); 19 Apr 2011 03:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40207 invoked by uid 500); 19 Apr 2011 03:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40197 invoked by uid 99); 19 Apr 2011 03:34:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 03:34:26 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 03:34:20 +0000
Received: by vws7 with SMTP id 7so6563139vws.35
        for <java-user@lucene.apache.org>; Mon, 18 Apr 2011 20:34:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=HGEdRKAkje6iJFnkuwZCSRs9uuvtrng5NfzAI4aMZ+s=;
        b=NA8yngcCvOBNBw4/SGG3ihs9TVZeQQgmW25OShPLCXTiTQaz3Rp8xRWbd6spwzJACk
         WDuf0NxOKm6JCKdGnV8bbPBUFUQvBFDpORmlW7nkx37per578/RzpLg8IzAic7bvW6on
         tD2yyNKPo5CqzSQnl5fRdE9sP4SOSxNwgs6BQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=lxEAXQK28xcej+IeSbd32ps5ww3sVfCDAdcsfuP5IPn9wZc0Cv6VyBQB4nf/b/78fc
         lgrI2M7xw2kq53ecrlY0EtuWRoGUguq8yRBirxbLzeSUjU7xv2mvTfW46F5vhom+B8cQ
         XMA+FmhLBpAtDZygf3mM3dJ6kaNVHWB4RMZzU=
Received: by 10.52.99.194 with SMTP id es2mr439122vdb.216.1303184040056; Mon,
 18 Apr 2011 20:34:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.164.166 with HTTP; Mon, 18 Apr 2011 20:33:40 -0700 (PDT)
In-Reply-To: <18982477.7778.1303160570858.JavaMail.nabble@ben.nabble.com>
References: <18982477.7778.1303160570858.JavaMail.nabble@ben.nabble.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 19 Apr 2011 09:03:40 +0530
Message-ID: <BANLkTinbFf54RQ9nywk0UTJWAuYoGvyJEw@mail.gmail.com>
Subject: Re: Calculate document lucene score after the search
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071c708c8da8104a13d2d55

--20cf3071c708c8da8104a13d2d55
Content-Type: text/plain; charset=ISO-8859-1

Hi Madhu,
You could use IndexSearcher.explain(..) to explain the result and get the
detailed breakup of the score. That should probably help you with
understanding the boost and score as calculated by lucene for your app.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Apr 19, 2011 at 2:32 AM, <madhuri_1820@yahoo.com> wrote:

> Hi,
>
> I am trying to find the actual lucene score of the document after the
> search. I have set different boost values to fields. I am using
> document.getBoost(), to find the score but I am getting document boost as 1
> for all the documents.
>
> Is there any way I can calculate the actual score of the document.
>
> Thanks,
> Madhu.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf3071c708c8da8104a13d2d55--

From java-user-return-49432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 20:00:00 2011
Return-Path: <java-user-return-49432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 321FB1395
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 20:00:00 +0000 (UTC)
Received: (qmail 91543 invoked by uid 500); 19 Apr 2011 19:59:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91505 invoked by uid 500); 19 Apr 2011 19:59:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91497 invoked by uid 99); 19 Apr 2011 19:59:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 19:59:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.35.1.28] (HELO fsuj26.rz.uni-jena.de) (141.35.1.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 19:59:51 +0000
Received: from lc08.rz.uni-jena.de (lc08.rz.uni-jena.de [141.35.1.23])
	by fsuj26.rz.uni-jena.de (8.13.8/8.13.8) with ESMTP id p3JJxSGA010970
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 21:59:28 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=uni-jena.de;
	s=dkim-2011; t=1303243168;
	bh=NPHdFUYkFdi54NrrlgonDEe01cJi7baibmsPicOvNx0=;
	h=Message-ID:Date:From:To:Subject;
	b=lJ3RgsCgUqpWr+mdfExUWPVMpav2/ExPrtlINdGmol3rj5DUQP06jl41xjjWvZZ2F
	 zmO9jgmTLT97fqGW6Gdeh6JA+I/g2y3anpEBXH+/8746lmf/LpX9LmSd7CrGSOEqZQ
	 EnNBRUD4kQAdVb1QKvaA4GqgUFd7VCmJvMPokVCg=
Received: from [141.35.141.140] (autokino.coling.uni-jena.de [141.35.141.140])
	(authenticated id=erik.faessler@uni-jena.de bits=0)
	by lc08.rz.uni-jena.de (8.13.8/8.13.8) with ESMTP id p3JJxRl2008590
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 21:59:28 +0200
Message-ID: <4DADE99F.40805@uni-jena.de>
Date: Tue, 19 Apr 2011 21:59:27 +0200
From: =?ISO-8859-15?Q?Erik_F=E4=DFler?= <erik.faessler@uni-jena.de>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.9) Gecko/20100914 SUSE/3.1.4 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Solr 1.4.1: Weird query results
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

  Hallo there,

my issue qualifies as newbie question I guess, but I'm really a bit 
confused. I have an index which has not been created by Solr. Perhaps 
that's already the point although I fail to see why this should be an 
issue with my problem.

I use the admin interface to check which results particular queries 
bring in. My index documents have a field "text" which holds the 
document text. This text has only been white space tokenized. So in my 
schema, the type for this field is "text_ws". My schema says 
"<defaultSearchField>text</defaultSearchField>".

When I now search for, say, 'marine' (without quotes), I don't get any 
search results. But when I search '"marine"' (that is, embraced by 
double quotes) I get my document hits. Alternatively, I can prepend the 
field name: 'text:marine' and will also get my results.

Similar with this phrase query: "marine mussels", where "In marine 
mussels of the genus" is a text snippet of a document. The phrase 
"marine mussels" won't give any hits. Searching for 'text:"marine 
mussels"' will give me the exact document containing this text snippet.

I'm sure this has quite a simple explanation but I'm unable to find it 
right now ;-) Perhaps you can help with that.

Thanks a lot!

Best regards,

     Erik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 21:57:06 2011
Return-Path: <java-user-return-49433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7C906101A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 21:57:06 +0000 (UTC)
Received: (qmail 27974 invoked by uid 500); 19 Apr 2011 21:57:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27863 invoked by uid 500); 19 Apr 2011 21:57:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27855 invoked by uid 99); 19 Apr 2011 21:57:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 21:57:04 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 21:56:59 +0000
Received: by qyk30 with SMTP id 30so112630qyk.14
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 14:56:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=XglRq4AJas69SU/IEE3MG+ecxdA6S2xeO+NxlXO5bxs=;
        b=WvuBK1mL7mKeFS2Nz+l1wXPXtFGZcCcj1f05/LC9feuhBgAvsWtzHITAvpfVE7m4dt
         cBGuHPMjUH57Lus12O8Sx9DGp9hyQDeDH+Dp+GqSFWF6081LzsRpNHA0uGrWQkgo2U2z
         lFfoab6e5szw1jeWgoEgCba1GoWyr9rj+DCqE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=bY7S1JC5XRfYFmkiXYnUJAkH0xRLw9lalIRTnYt9NclRJfAj/ZLvLpLmvrk7ooNmyd
         ML5x6AjOBbY1Qwbf0qOydvLZSi3kZG1d69Pdw4uT2urO+JxFdvhA8ENJpfEaUb9cTT7U
         n+sutnOxy17rTPPvirVanw3KHvZ56KwRzaWAc=
MIME-Version: 1.0
Received: by 10.229.17.11 with SMTP id q11mr4798434qca.46.1303250198651; Tue,
 19 Apr 2011 14:56:38 -0700 (PDT)
Received: by 10.229.120.81 with HTTP; Tue, 19 Apr 2011 14:56:38 -0700 (PDT)
In-Reply-To: <4DADE99F.40805@uni-jena.de>
References: <4DADE99F.40805@uni-jena.de>
Date: Tue, 19 Apr 2011 17:56:38 -0400
Message-ID: <BANLkTi=j_6pbZKfwmqBYyU1D3ryijRnVWg@mail.gmail.com>
Subject: Re: Solr 1.4.1: Weird query results
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hmmmm, I don't see the problem either. It *sounds* like you don't really
have the default search field defined the way you think you do. Did you res=
tart
Solr after making that change?

I'm assuming that when you say "not created by Solr" you mean that it's cre=
ated
by Lucene. What version of Lucene and Solr are you using if that's true?

You can test this by appending "&debugQuery=3Don" to your query or checking
the "debug enable" checkbox in the full query interface from the admin page=
.
That should show you exactly what is being searched. You might also want
to look at the analysis page for your field and see how your query
is tokenized.

But, like I said, this looks like it should work. If you can post the resul=
ts of
adding &debugQuery=3Don and your actual <fieldType> definition for "text_ws=
" your
<field> declaration for "text" and the <defaultSearchField>  from your sche=
ma
that would help. I can't tell you how many times something that's eluded me
for hours is obvious to someone else :)..

Best
Erick



On Tue, Apr 19, 2011 at 3:59 PM, Erik F=E4=DFler <erik.faessler@uni-jena.de=
> wrote:
> =A0Hallo there,
>
> my issue qualifies as newbie question I guess, but I'm really a bit
> confused. I have an index which has not been created by Solr. Perhaps tha=
t's
> already the point although I fail to see why this should be an issue with=
 my
> problem.
>
> I use the admin interface to check which results particular queries bring
> in. My index documents have a field "text" which holds the document text.
> This text has only been white space tokenized. So in my schema, the type =
for
> this field is "text_ws". My schema says
> "<defaultSearchField>text</defaultSearchField>".
>
> When I now search for, say, 'marine' (without quotes), I don't get any
> search results. But when I search '"marine"' (that is, embraced by double
> quotes) I get my document hits. Alternatively, I can prepend the field na=
me:
> 'text:marine' and will also get my results.
>
> Similar with this phrase query: "marine mussels", where "In marine mussel=
s
> of the genus" is a text snippet of a document. The phrase "marine mussels=
"
> won't give any hits. Searching for 'text:"marine mussels"' will give me t=
he
> exact document containing this text snippet.
>
> I'm sure this has quite a simple explanation but I'm unable to find it ri=
ght
> now ;-) Perhaps you can help with that.
>
> Thanks a lot!
>
> Best regards,
>
> =A0 =A0Erik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 19 23:08:00 2011
Return-Path: <java-user-return-49434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 13DBC1FC7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 19 Apr 2011 23:08:00 +0000 (UTC)
Received: (qmail 90477 invoked by uid 500); 19 Apr 2011 23:07:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90417 invoked by uid 500); 19 Apr 2011 23:07:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90409 invoked by uid 99); 19 Apr 2011 23:07:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 23:07:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Apr 2011 23:07:53 +0000
Received: by qyk30 with SMTP id 30so145547qyk.14
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 16:07:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=EDfz0kcvTk5LW3pjgO28uOnqzcpNmiGJaf3clTw9v5c=;
        b=ht9p7qa5EBAOZXucd4leOm/Koo0DTDpWUe00fsCefkz4NFWNc7GFqGbzmQrIHQw44F
         DGEk8eXbjv5/rt1QC5rq13xFimunTbSX3eIU0wRy1pNKUl6AH+HjtdI/yyML0s92CtqI
         /+FvmVxvudVNVSi44ZIFrEX09accYZAIpPShM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Mya7H1JeDJKksne6gdasJ/WnwB4U/NWmbESgdHUueU/noDUBsEUP2pAUBxiNQteUmu
         kKVQqUPjhv+mAvZzGdCrUiSy9svFaELxOuIuM26izZnADp343ZbnDJHYab+RaxkiUEO8
         v6KRg2VpXKE6nQbYtFodYxmTbrn3kil0HedUc=
MIME-Version: 1.0
Received: by 10.229.47.4 with SMTP id l4mr4620774qcf.45.1303254452159; Tue, 19
 Apr 2011 16:07:32 -0700 (PDT)
Received: by 10.229.84.140 with HTTP; Tue, 19 Apr 2011 16:07:32 -0700 (PDT)
In-Reply-To: <BANLkTi=j_6pbZKfwmqBYyU1D3ryijRnVWg@mail.gmail.com>
References: <4DADE99F.40805@uni-jena.de>
	<BANLkTi=j_6pbZKfwmqBYyU1D3ryijRnVWg@mail.gmail.com>
Date: Tue, 19 Apr 2011 16:07:32 -0700
Message-ID: <BANLkTinjH-0V4Vj=NeiZ5t4LtxJaT=Vh1g@mail.gmail.com>
Subject: Re: Solr 1.4.1: Weird query results
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Look at the "text" definition stack. Does it have the same analyzer
and filter that you used to make the index, and in the same order?

The specific problem is that the "text" field includes a stemmer, and
your code probably did not. And so "marine" is stored as, maybe
'marin'.  To check this out, look at the 'schema browser' page off the
admin page. This will show you all of the indexed terms in each field.
Also look at the Analysis page: this lets you see how text is parsed
and changed in the analysis stack.

On Tue, Apr 19, 2011 at 2:56 PM, Erick Erickson <erickerickson@gmail.com> w=
rote:
> Hmmmm, I don't see the problem either. It *sounds* like you don't really
> have the default search field defined the way you think you do. Did you r=
estart
> Solr after making that change?
>
> I'm assuming that when you say "not created by Solr" you mean that it's c=
reated
> by Lucene. What version of Lucene and Solr are you using if that's true?
>
> You can test this by appending "&debugQuery=3Don" to your query or checki=
ng
> the "debug enable" checkbox in the full query interface from the admin pa=
ge.
> That should show you exactly what is being searched. You might also want
> to look at the analysis page for your field and see how your query
> is tokenized.
>
> But, like I said, this looks like it should work. If you can post the res=
ults of
> adding &debugQuery=3Don and your actual <fieldType> definition for "text_=
ws" your
> <field> declaration for "text" and the <defaultSearchField> =C2=A0from yo=
ur schema
> that would help. I can't tell you how many times something that's eluded =
me
> for hours is obvious to someone else :)..
>
> Best
> Erick
>
>
>
> On Tue, Apr 19, 2011 at 3:59 PM, Erik F=C3=A4=C3=9Fler <erik.faessler@uni=
-jena.de> wrote:
>> =C2=A0Hallo there,
>>
>> my issue qualifies as newbie question I guess, but I'm really a bit
>> confused. I have an index which has not been created by Solr. Perhaps th=
at's
>> already the point although I fail to see why this should be an issue wit=
h my
>> problem.
>>
>> I use the admin interface to check which results particular queries brin=
g
>> in. My index documents have a field "text" which holds the document text=
.
>> This text has only been white space tokenized. So in my schema, the type=
 for
>> this field is "text_ws". My schema says
>> "<defaultSearchField>text</defaultSearchField>".
>>
>> When I now search for, say, 'marine' (without quotes), I don't get any
>> search results. But when I search '"marine"' (that is, embraced by doubl=
e
>> quotes) I get my document hits. Alternatively, I can prepend the field n=
ame:
>> 'text:marine' and will also get my results.
>>
>> Similar with this phrase query: "marine mussels", where "In marine musse=
ls
>> of the genus" is a text snippet of a document. The phrase "marine mussel=
s"
>> won't give any hits. Searching for 'text:"marine mussels"' will give me =
the
>> exact document containing this text snippet.
>>
>> I'm sure this has quite a simple explanation but I'm unable to find it r=
ight
>> now ;-) Perhaps you can help with that.
>>
>> Thanks a lot!
>>
>> Best regards,
>>
>> =C2=A0 =C2=A0Erik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 20 03:26:03 2011
Return-Path: <java-user-return-49435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E037E14
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 20 Apr 2011 03:26:03 +0000 (UTC)
Received: (qmail 61106 invoked by uid 500); 20 Apr 2011 03:26:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60982 invoked by uid 500); 20 Apr 2011 03:26:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60974 invoked by uid 99); 20 Apr 2011 03:25:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 03:25:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 03:25:53 +0000
Received: by vxa37 with SMTP id 37so439311vxa.35
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 20:25:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=FgQhHGzH1kltaQHVj2mbIM4McmDuAoOz63KeT9T6u7I=;
        b=ti3TRWvwudt5Gvzw9xRzlWBpGnPuIcSLHrJm54G1QhdgGtly3QlbADCri3EjgTj2Gg
         xLUxMQsdlLvFLO8OBK2SflwVn4+DroPJKhaN1OD4LCHbXr0h/WdsfeHqBkI3Nx2fQM0L
         n6/PBQ5agFNU1qbfv+QhPwmPU+08xLXtyG13I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=IbvkoodrhTDk+LBWpzNngSRyAqseQXQwHq7G1SavrsTqhZb50b20y5L1KomwLWqZnW
         eCvlsXF1OeWR3EzbiBk3wBz/LeH8cdD/E9+STypNmON6iv2QowRmmqAqkOGooeJPcoIZ
         mP9PbE+l89cvKnVcWYfiS3E2nCCAQXYDS5+Jg=
Received: by 10.52.157.196 with SMTP id wo4mr4717633vdb.136.1303269932157;
 Tue, 19 Apr 2011 20:25:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.164.166 with HTTP; Tue, 19 Apr 2011 20:25:09 -0700 (PDT)
In-Reply-To: <BANLkTimXJ42grB7cSjEy98nJGuGg_pKS3A@mail.gmail.com>
References: <BANLkTimXJ42grB7cSjEy98nJGuGg_pKS3A@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 20 Apr 2011 08:55:09 +0530
Message-ID: <BANLkTikciK-9=Hv6F1brOMOb=z_FC5munA@mail.gmail.com>
Subject: Re: Lucene: Indexsearcher: java.lang.UnsupportedOperationException
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec53f94ff5a4dd804a1512ddf
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec53f94ff5a4dd804a1512ddf
Content-Type: text/plain; charset=ISO-8859-1

Could you also print and send the entire stack-trace?
Also, the query.toString()

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Apr 19, 2011 at 7:40 PM, Patrick Diviacco <
patrick.diviacco@gmail.com> wrote:

> I get the following error message: java.lang.UnsupportedOperationException
>
> with Lucene search method: topDocs = searcher.search(booleanQuery, null,
> 100);
>
> I'm using an old version of Lucene: Lucene 2.4.1 (I cannot upgrade!)
> Can you help me to understand why I get such error ?
>
> thanks
> This is the complete code: http://pastie.org/1811677
>

--bcaec53f94ff5a4dd804a1512ddf--

From java-user-return-49436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 20 06:52:06 2011
Return-Path: <java-user-return-49436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E520A49B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 20 Apr 2011 06:52:05 +0000 (UTC)
Received: (qmail 17772 invoked by uid 500); 20 Apr 2011 06:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17734 invoked by uid 500); 20 Apr 2011 06:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17723 invoked by uid 99); 20 Apr 2011 06:52:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 06:52:03 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 06:51:56 +0000
Received: by fxm7 with SMTP id 7so476911fxm.35
        for <java-user@lucene.apache.org>; Tue, 19 Apr 2011 23:51:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=1b8KdrSLkUzSHA5N0DAcmEnm2W8vPjNZGXPdPIQq1Wg=;
        b=pEKtaLSplZVCXlfAZ9LoTzU8a7Xk1G+LLVmSIRtLCvKKFtGkDqISTyu/W82Wm2KRBh
         FCQNdroJi13Vs32oTsRsmhZ56/DJrk/7MARsi60Q0SwVoqo0H+iiJdffkeyrs9zRSu6H
         kHHYM9acIDQDTgOHEUa8uAkpEYVTxN3PxLFkQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sWobtRDLj+NKJGZTaOity43xYP0GEGxJCdo1BHrOdlUho3odXLXmUnpMTKJJH8X5pt
         k39DTKkNO0RZrvQeJdplqyv8iYNg4WVr0jtC86lhCpnwDTdaeyf4M8Jd+pcwmZVHeEoW
         2LG0E33fk0Xf5DA3L2q/yhVjew3u4XG4dIC6g=
MIME-Version: 1.0
Received: by 10.223.85.195 with SMTP id p3mr1695139fal.0.1303282296561; Tue,
 19 Apr 2011 23:51:36 -0700 (PDT)
Received: by 10.223.95.153 with HTTP; Tue, 19 Apr 2011 23:51:36 -0700 (PDT)
In-Reply-To: <BANLkTikciK-9=Hv6F1brOMOb=z_FC5munA@mail.gmail.com>
References: <BANLkTimXJ42grB7cSjEy98nJGuGg_pKS3A@mail.gmail.com>
	<BANLkTikciK-9=Hv6F1brOMOb=z_FC5munA@mail.gmail.com>
Date: Wed, 20 Apr 2011 08:51:36 +0200
Message-ID: <BANLkTinZ8RaPqNMcbhG5brUHHfn8bnK68w@mail.gmail.com>
Subject: Re: Lucene: Indexsearcher: java.lang.UnsupportedOperationException
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a69754213f04a1540ec6
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3054a69754213f04a1540ec6
Content-Type: text/plain; charset=ISO-8859-1

java.lang.UnsupportedOperationException
at org.apache.lucene.search.Query.createWeight(Query.java:88)
at
org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(BooleanQuery.java:185)
at org.apache.lucene.search.BooleanQuery.createWeight(BooleanQuery.java:360)
at org.apache.lucene.search.Query.weight(Query.java:95)
at org.apache.lucene.search.Searcher.createWeight(Searcher.java:185)
at org.apache.lucene.search.Searcher.search(Searcher.java:136)
at NVoting.<init>(NVoting.java:159)
at Main.main(Main.java:8)





On 20 April 2011 05:25, Anshum <anshumg@gmail.com> wrote:

> Could you also print and send the entire stack-trace?
> Also, the query.toString()
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Apr 19, 2011 at 7:40 PM, Patrick Diviacco <
> patrick.diviacco@gmail.com> wrote:
>
> > I get the following error message:
> java.lang.UnsupportedOperationException
> >
> > with Lucene search method: topDocs = searcher.search(booleanQuery, null,
> > 100);
> >
> > I'm using an old version of Lucene: Lucene 2.4.1 (I cannot upgrade!)
> > Can you help me to understand why I get such error ?
> >
> > thanks
> > This is the complete code: http://pastie.org/1811677
> >
>

--20cf3054a69754213f04a1540ec6--

From java-user-return-49437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 20 08:17:47 2011
Return-Path: <java-user-return-49437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 407B8832
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 20 Apr 2011 08:17:47 +0000 (UTC)
Received: (qmail 1561 invoked by uid 500); 20 Apr 2011 08:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1519 invoked by uid 500); 20 Apr 2011 08:17:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1511 invoked by uid 99); 20 Apr 2011 08:17:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 08:17:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.35.1.28] (HELO fsuj26.rz.uni-jena.de) (141.35.1.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 08:17:33 +0000
Received: from lc08.rz.uni-jena.de (lc08.rz.uni-jena.de [141.35.1.23])
	by fsuj26.rz.uni-jena.de (8.13.8/8.13.8) with ESMTP id p3K8HBoQ023198
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2011 10:17:11 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=uni-jena.de;
	s=dkim-2011; t=1303287431;
	bh=LzSuacKN/G7bTBaR17/1JoDwj0J3jsHFhyyHVYTy1m8=;
	h=Message-ID:Date:From:To:Subject;
	b=QB4ekUi9uwe1mm0OTiGZ6HYITUk14XZT2GeY15YPZywHHIxk/t1WX9acNYC3Ee3ni
	 aej/LwFQS/YR1RHyeMhmDYQLwB8CnLUHco9hXnk/otfp+gPVBiZ58nEtjFKtdnRBqm
	 tW+zsvJYpN9899vK0+fZboDjJ2/ZAQldzsnljV+4=
Received: from [141.35.141.140] (autokino.coling.uni-jena.de [141.35.141.140])
	(authenticated id=erik.faessler@uni-jena.de bits=0)
	by lc08.rz.uni-jena.de (8.13.8/8.13.8) with ESMTP id p3K8HBCJ028233
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2011 10:17:11 +0200
Message-ID: <4DAE9687.5080802@uni-jena.de>
Date: Wed, 20 Apr 2011 10:17:11 +0200
From: =?UTF-8?B?RXJpayBGw6TDn2xlcg==?= <erik.faessler@uni-jena.de>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.9) Gecko/20100914 SUSE/3.1.4 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Solr 1.4.1: Weird query results
References: <4DADE99F.40805@uni-jena.de>	<BANLkTi=j_6pbZKfwmqBYyU1D3ryijRnVWg@mail.gmail.com> <BANLkTinjH-0V4Vj=NeiZ5t4LtxJaT=Vh1g@mail.gmail.com>
In-Reply-To: <BANLkTinjH-0V4Vj=NeiZ5t4LtxJaT=Vh1g@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

  Thank you very much for your answers :-) First of all, I just noticed 
I sent the question unintentionally to the Lucene list while it's more 
of a Solr issue. I will answer here all the same to not confuse things. 
My apologies ;)

First to Erick's suggestions. The default field has been "text" for a 
longer time so I did not make a change to that field yesterday but it 
had been this field before already.
With "not created by Solr" I exactly mean it has been created using 
Lucene directly. This could be an issue indeed as Lucene 2.3.1 has been 
used to create the index, where Solr 1.4.1 uses Lucene 2.9.3. But it 
seemed to work fine so far (but perhaps that's just wrong, I don't know 
yet).

I tried your hint with appending "&debugQuery=on". Guess what: With that 
appended I get my hits. No kidding, appending the debug option gives my 
30 document hits, deleting it from my browser's address bar leaves me 
behind with 0 hits (?!).
Adress bar strings are:
No hits:
http://localhost:8983/solr/select/?q=marine&version=2.2&start=0&rows=10&indent=on
30 hits:
http://localhost:8983/solr/select/?q=marine&version=2.2&start=0&rows=10&indent=on&debugQuery=on

Here's the debug output concerning the query:

<str name="rawquerystring">marine</str>
<str name="querystring">marine</str>
<str name="parsedquery">text:marine</str>
<str name="parsedquery_toString">text:marine</str>

Seems fine. This is expected because I already tried the analysis 
interface to check whether the correct terms are searched for.
Here my schema snippets:

FieldType "text_ws":
<fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">
<analyzer>
<tokenizer class="solr.WhitespaceTokenizerFactory"/>
</analyzer>
</fieldType>
(Solr 1.4.1. default)

Field "text":
<field name="text" type="text_ws" indexed="true" stored="true" 
termVectors="true" termPositions="true" />

Default search field:
<defaultSearchField>text</defaultSearchField>

I guess this also answers the hints given by Lance. Writing this down, I 
get the feeling the first thing I should do is to update my index to 
match the Lucene version used by Solr. This seems to be the most obvious 
hint (but as Luke can handle all version I thought using this index with 
Solr should be fine, too). Although it's really quite strange that 
appending the debug option changes my search results. Oh my, probably I 
did just miss some basic about how to usr Solr ;)
Your opinion? Changing the index to another Lucene version isn't exactly 
the fastest and easiest thing so I'd like to strike out all other 
possibilities before :)

Best regards,

     Erik


Am 20.04.2011 01:07, schrieb Lance Norskog:
> Look at the "text" definition stack. Does it have the same analyzer
> and filter that you used to make the index, and in the same order?
>
> The specific problem is that the "text" field includes a stemmer, and
> your code probably did not. And so "marine" is stored as, maybe
> 'marin'.  To check this out, look at the 'schema browser' page off the
> admin page. This will show you all of the indexed terms in each field.
> Also look at the Analysis page: this lets you see how text is parsed
> and changed in the analysis stack.
>
> On Tue, Apr 19, 2011 at 2:56 PM, Erick Erickson<erickerickson@gmail.com>  wrote:
>> Hmmmm, I don't see the problem either. It *sounds* like you don't really
>> have the default search field defined the way you think you do. Did you restart
>> Solr after making that change?
>>
>> I'm assuming that when you say "not created by Solr" you mean that it's created
>> by Lucene. What version of Lucene and Solr are you using if that's true?
>>
>> You can test this by appending "&debugQuery=on" to your query or checking
>> the "debug enable" checkbox in the full query interface from the admin page.
>> That should show you exactly what is being searched. You might also want
>> to look at the analysis page for your field and see how your query
>> is tokenized.
>>
>> But, like I said, this looks like it should work. If you can post the results of
>> adding&debugQuery=on and your actual<fieldType>  definition for "text_ws" your
>> <field>  declaration for "text" and the<defaultSearchField>    from your schema
>> that would help. I can't tell you how many times something that's eluded me
>> for hours is obvious to someone else :)..
>>
>> Best
>> Erick
>>
>>
>>
>> On Tue, Apr 19, 2011 at 3:59 PM, Erik Fler<erik.faessler@uni-jena.de>  wrote:
>>>   Hallo there,
>>>
>>> my issue qualifies as newbie question I guess, but I'm really a bit
>>> confused. I have an index which has not been created by Solr. Perhaps that's
>>> already the point although I fail to see why this should be an issue with my
>>> problem.
>>>
>>> I use the admin interface to check which results particular queries bring
>>> in. My index documents have a field "text" which holds the document text.
>>> This text has only been white space tokenized. So in my schema, the type for
>>> this field is "text_ws". My schema says
>>> "<defaultSearchField>text</defaultSearchField>".
>>>
>>> When I now search for, say, 'marine' (without quotes), I don't get any
>>> search results. But when I search '"marine"' (that is, embraced by double
>>> quotes) I get my document hits. Alternatively, I can prepend the field name:
>>> 'text:marine' and will also get my results.
>>>
>>> Similar with this phrase query: "marine mussels", where "In marine mussels
>>> of the genus" is a text snippet of a document. The phrase "marine mussels"
>>> won't give any hits. Searching for 'text:"marine mussels"' will give me the
>>> exact document containing this text snippet.
>>>
>>> I'm sure this has quite a simple explanation but I'm unable to find it right
>>> now ;-) Perhaps you can help with that.
>>>
>>> Thanks a lot!
>>>
>>> Best regards,
>>>
>>>     Erik
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 20 08:41:11 2011
Return-Path: <java-user-return-49438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2F7861BBA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 20 Apr 2011 08:41:11 +0000 (UTC)
Received: (qmail 42182 invoked by uid 500); 20 Apr 2011 08:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42110 invoked by uid 500); 20 Apr 2011 08:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41906 invoked by uid 99); 20 Apr 2011 08:41:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 08:41:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.35.1.28] (HELO fsuj26.rz.uni-jena.de) (141.35.1.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 08:40:58 +0000
Received: from mailsmtp1.rz.uni-jena.de (smtp.uni-jena.de [141.35.1.18])
	by fsuj26.rz.uni-jena.de (8.13.8/8.13.8) with ESMTP id p3K8ebwn026021
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2011 10:40:37 +0200
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=uni-jena.de;
	s=dkim-2011; t=1303288837;
	bh=qoemjj4KcBzpwYfT3/I57k6RI0hhHSGPzjETV02b1bE=;
	h=Message-ID:Date:From:To:Subject;
	b=YU4e39Jr+Y9s8ssB6rSLDua2eEbcSovBpUp4cxOPThjrCq3V6aKtET2fsNe9aSjiV
	 vv7cERgLVoLiRh2V5Df2KPmUdUolkw6f5w4XzvPkRaOPh9xbCIQynxTJLjR5YZug9B
	 3HuhRhr3rv8IQQn5ZPCSKPfp3xBp6Yv0BRnVyGXE=
Received: from [141.35.141.140] (autokino.coling.uni-jena.de [141.35.141.140])
	(authenticated id=erik.faessler@uni-jena.de bits=0)
	by mailsmtp1.rz.uni-jena.de (8.13.1/8.13.1) with ESMTP id p3K8eaNH010029
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 20 Apr 2011 10:40:37 +0200
Message-ID: <4DAE9C04.9020403@uni-jena.de>
Date: Wed, 20 Apr 2011 10:40:36 +0200
From: =?UTF-8?B?RXJpayBGw6TDn2xlcg==?= <erik.faessler@uni-jena.de>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.9) Gecko/20100914 SUSE/3.1.4 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Solr 1.4.1: Weird query results
References: <4DADE99F.40805@uni-jena.de>	<BANLkTi=j_6pbZKfwmqBYyU1D3ryijRnVWg@mail.gmail.com> <BANLkTinjH-0V4Vj=NeiZ5t4LtxJaT=Vh1g@mail.gmail.com> <4DAE9687.5080802@uni-jena.de>
In-Reply-To: <4DAE9687.5080802@uni-jena.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

  Oooops, I have to take something back: The index *has* been created 
with Lucene 2.9.3! Sorry for confusing that, I am using two different 
index versions, the older for productive purposes and the newer for what 
I am developing currently. I just checked  back with Luke, he 
acknowledges that the index used with my Solr instance has format -9 
(Lucene 2.9).
So that's not the matter, I guess...still ideas?! ;)

Am 20.04.2011 10:17, schrieb Erik Fler:
>  Thank you very much for your answers :-) First of all, I just noticed 
> I sent the question unintentionally to the Lucene list while it's more 
> of a Solr issue. I will answer here all the same to not confuse 
> things. My apologies ;)
>
> First to Erick's suggestions. The default field has been "text" for a 
> longer time so I did not make a change to that field yesterday but it 
> had been this field before already.
> With "not created by Solr" I exactly mean it has been created using 
> Lucene directly. This could be an issue indeed as Lucene 2.3.1 has 
> been used to create the index, where Solr 1.4.1 uses Lucene 2.9.3. But 
> it seemed to work fine so far (but perhaps that's just wrong, I don't 
> know yet).
>
> I tried your hint with appending "&debugQuery=on". Guess what: With 
> that appended I get my hits. No kidding, appending the debug option 
> gives my 30 document hits, deleting it from my browser's address bar 
> leaves me behind with 0 hits (?!).
> Adress bar strings are:
> No hits:
> http://localhost:8983/solr/select/?q=marine&version=2.2&start=0&rows=10&indent=on 
>
> 30 hits:
> http://localhost:8983/solr/select/?q=marine&version=2.2&start=0&rows=10&indent=on&debugQuery=on 
>
>
> Here's the debug output concerning the query:
>
> <str name="rawquerystring">marine</str>
> <str name="querystring">marine</str>
> <str name="parsedquery">text:marine</str>
> <str name="parsedquery_toString">text:marine</str>
>
> Seems fine. This is expected because I already tried the analysis 
> interface to check whether the correct terms are searched for.
> Here my schema snippets:
>
> FieldType "text_ws":
> <fieldType name="text_ws" class="solr.TextField" 
> positionIncrementGap="100">
> <analyzer>
> <tokenizer class="solr.WhitespaceTokenizerFactory"/>
> </analyzer>
> </fieldType>
> (Solr 1.4.1. default)
>
> Field "text":
> <field name="text" type="text_ws" indexed="true" stored="true" 
> termVectors="true" termPositions="true" />
>
> Default search field:
> <defaultSearchField>text</defaultSearchField>
>
> I guess this also answers the hints given by Lance. Writing this down, 
> I get the feeling the first thing I should do is to update my index to 
> match the Lucene version used by Solr. This seems to be the most 
> obvious hint (but as Luke can handle all version I thought using this 
> index with Solr should be fine, too). Although it's really quite 
> strange that appending the debug option changes my search results. Oh 
> my, probably I did just miss some basic about how to usr Solr ;)
> Your opinion? Changing the index to another Lucene version isn't 
> exactly the fastest and easiest thing so I'd like to strike out all 
> other possibilities before :)
>
> Best regards,
>
>     Erik
>
>
> Am 20.04.2011 01:07, schrieb Lance Norskog:
>> Look at the "text" definition stack. Does it have the same analyzer
>> and filter that you used to make the index, and in the same order?
>>
>> The specific problem is that the "text" field includes a stemmer, and
>> your code probably did not. And so "marine" is stored as, maybe
>> 'marin'.  To check this out, look at the 'schema browser' page off the
>> admin page. This will show you all of the indexed terms in each field.
>> Also look at the Analysis page: this lets you see how text is parsed
>> and changed in the analysis stack.
>>
>> On Tue, Apr 19, 2011 at 2:56 PM, Erick 
>> Erickson<erickerickson@gmail.com>  wrote:
>>> Hmmmm, I don't see the problem either. It *sounds* like you don't 
>>> really
>>> have the default search field defined the way you think you do. Did 
>>> you restart
>>> Solr after making that change?
>>>
>>> I'm assuming that when you say "not created by Solr" you mean that 
>>> it's created
>>> by Lucene. What version of Lucene and Solr are you using if that's 
>>> true?
>>>
>>> You can test this by appending "&debugQuery=on" to your query or 
>>> checking
>>> the "debug enable" checkbox in the full query interface from the 
>>> admin page.
>>> That should show you exactly what is being searched. You might also 
>>> want
>>> to look at the analysis page for your field and see how your query
>>> is tokenized.
>>>
>>> But, like I said, this looks like it should work. If you can post 
>>> the results of
>>> adding&debugQuery=on and your actual<fieldType>  definition for 
>>> "text_ws" your
>>> <field>  declaration for "text" and the<defaultSearchField>    from 
>>> your schema
>>> that would help. I can't tell you how many times something that's 
>>> eluded me
>>> for hours is obvious to someone else :)..
>>>
>>> Best
>>> Erick
>>>
>>>
>>>
>>> On Tue, Apr 19, 2011 at 3:59 PM, Erik 
>>> Fler<erik.faessler@uni-jena.de>  wrote:
>>>>   Hallo there,
>>>>
>>>> my issue qualifies as newbie question I guess, but I'm really a bit
>>>> confused. I have an index which has not been created by Solr. 
>>>> Perhaps that's
>>>> already the point although I fail to see why this should be an 
>>>> issue with my
>>>> problem.
>>>>
>>>> I use the admin interface to check which results particular queries 
>>>> bring
>>>> in. My index documents have a field "text" which holds the document 
>>>> text.
>>>> This text has only been white space tokenized. So in my schema, the 
>>>> type for
>>>> this field is "text_ws". My schema says
>>>> "<defaultSearchField>text</defaultSearchField>".
>>>>
>>>> When I now search for, say, 'marine' (without quotes), I don't get any
>>>> search results. But when I search '"marine"' (that is, embraced by 
>>>> double
>>>> quotes) I get my document hits. Alternatively, I can prepend the 
>>>> field name:
>>>> 'text:marine' and will also get my results.
>>>>
>>>> Similar with this phrase query: "marine mussels", where "In marine 
>>>> mussels
>>>> of the genus" is a text snippet of a document. The phrase "marine 
>>>> mussels"
>>>> won't give any hits. Searching for 'text:"marine mussels"' will 
>>>> give me the
>>>> exact document containing this text snippet.
>>>>
>>>> I'm sure this has quite a simple explanation but I'm unable to find 
>>>> it right
>>>> now ;-) Perhaps you can help with that.
>>>>
>>>> Thanks a lot!
>>>>
>>>> Best regards,
>>>>
>>>>     Erik
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 20 11:48:00 2011
Return-Path: <java-user-return-49439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8FB3516CA
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 20 Apr 2011 11:48:00 +0000 (UTC)
Received: (qmail 13162 invoked by uid 500); 20 Apr 2011 11:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13111 invoked by uid 500); 20 Apr 2011 11:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13103 invoked by uid 99); 20 Apr 2011 11:47:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 11:47:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 11:47:50 +0000
Received: by qwj9 with SMTP id 9so459251qwj.35
        for <java-user@lucene.apache.org>; Wed, 20 Apr 2011 04:47:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=RSYbLqrG8aML6YD9X1QQAsMtqNHKB8pyUfrphjTGkU0=;
        b=kpRlKb260N7wPO1/pU/HLA84XCm2/4r5swdhIUM8tQLHC1PlSiU7A9zoBV4Sp+7F5R
         Ee/rs0eyo1fG8qPQnKlWwMjQaiI2NNr4ZpZYE+zL1dXRc7CHFzsFD7eb/iXlQeKQlrHw
         ksxz8oIouKJrYN1g7w1Qf+xjOcJE5+YOKCZvE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Pa7kSZpOA//U+oV6cSaweMRlStw7LTYR2CIxa7+67YPAMAzD8J1u1TJCnk5pGED9FK
         FKA1YQ0qq2vDV/cmtLGp1cRn4B0EFbM0kWGFX3Du5SDjC0BtXsrB5Por3Mdd+BYNBiq1
         nVjf96VWGDa/NoosWl5g4wcIXeNqpqv8D+yRA=
MIME-Version: 1.0
Received: by 10.229.35.1 with SMTP id n1mr5268158qcd.84.1303300049699; Wed, 20
 Apr 2011 04:47:29 -0700 (PDT)
Received: by 10.229.120.81 with HTTP; Wed, 20 Apr 2011 04:47:29 -0700 (PDT)
In-Reply-To: <4DAE9C04.9020403@uni-jena.de>
References: <4DADE99F.40805@uni-jena.de>
	<BANLkTi=j_6pbZKfwmqBYyU1D3ryijRnVWg@mail.gmail.com>
	<BANLkTinjH-0V4Vj=NeiZ5t4LtxJaT=Vh1g@mail.gmail.com>
	<4DAE9687.5080802@uni-jena.de>
	<4DAE9C04.9020403@uni-jena.de>
Date: Wed, 20 Apr 2011 07:47:29 -0400
Message-ID: <BANLkTikx-Mbx7w_t-vRKjTXuO-Z57QzHWw@mail.gmail.com>
Subject: Re: Solr 1.4.1: Weird query results
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This is all very strange. I guess I only have a few suggestions:

> It might be worth getting a copy of Luke. Under th "tools" menu
   there's a "checkindex" option that may show you something. You
   can also use Luke to query your index and examine it. That said,
   Luke uses Lucene, not Solr so I rather expect it to show you that
   everything's fine...

> Is there any chance at all you have some older jars mixed in?
   Frankly this is just me resorting to mysticism because that
   doesn't seem very likely to cause appending &debugQuery=3Don
   to change the search results! I'd expect much worse
   problems.

> As you said, re-indexing should fix things up. But there's no reason
   that I know of that this should be necessary given what you describe.

good luck, because I'm stumped!
Erick

On Wed, Apr 20, 2011 at 4:40 AM, Erik F=E4=DFler <erik.faessler@uni-jena.de=
> wrote:
> =A0Oooops, I have to take something back: The index *has* been created wi=
th
> Lucene 2.9.3! Sorry for confusing that, I am using two different index
> versions, the older for productive purposes and the newer for what I am
> developing currently. I just checked =A0back with Luke, he acknowledges t=
hat
> the index used with my Solr instance has format -9 (Lucene 2.9).
> So that's not the matter, I guess...still ideas?! ;)
>
> Am 20.04.2011 10:17, schrieb Erik F=E4=DFler:
>>
>> =A0Thank you very much for your answers :-) First of all, I just noticed=
 I
>> sent the question unintentionally to the Lucene list while it's more of =
a
>> Solr issue. I will answer here all the same to not confuse things. My
>> apologies ;)
>>
>> First to Erick's suggestions. The default field has been "text" for a
>> longer time so I did not make a change to that field yesterday but it ha=
d
>> been this field before already.
>> With "not created by Solr" I exactly mean it has been created using Luce=
ne
>> directly. This could be an issue indeed as Lucene 2.3.1 has been used to
>> create the index, where Solr 1.4.1 uses Lucene 2.9.3. But it seemed to w=
ork
>> fine so far (but perhaps that's just wrong, I don't know yet).
>>
>> I tried your hint with appending "&debugQuery=3Don". Guess what: With th=
at
>> appended I get my hits. No kidding, appending the debug option gives my =
30
>> document hits, deleting it from my browser's address bar leaves me behin=
d
>> with 0 hits (?!).
>> Adress bar strings are:
>> No hits:
>>
>> http://localhost:8983/solr/select/?q=3Dmarine&version=3D2.2&start=3D0&ro=
ws=3D10&indent=3Don
>> 30 hits:
>>
>> http://localhost:8983/solr/select/?q=3Dmarine&version=3D2.2&start=3D0&ro=
ws=3D10&indent=3Don&debugQuery=3Don
>>
>> Here's the debug output concerning the query:
>>
>> <str name=3D"rawquerystring">marine</str>
>> <str name=3D"querystring">marine</str>
>> <str name=3D"parsedquery">text:marine</str>
>> <str name=3D"parsedquery_toString">text:marine</str>
>>
>> Seems fine. This is expected because I already tried the analysis
>> interface to check whether the correct terms are searched for.
>> Here my schema snippets:
>>
>> FieldType "text_ws":
>> <fieldType name=3D"text_ws" class=3D"solr.TextField"
>> positionIncrementGap=3D"100">
>> <analyzer>
>> <tokenizer class=3D"solr.WhitespaceTokenizerFactory"/>
>> </analyzer>
>> </fieldType>
>> (Solr 1.4.1. default)
>>
>> Field "text":
>> <field name=3D"text" type=3D"text_ws" indexed=3D"true" stored=3D"true"
>> termVectors=3D"true" termPositions=3D"true" />
>>
>> Default search field:
>> <defaultSearchField>text</defaultSearchField>
>>
>> I guess this also answers the hints given by Lance. Writing this down, I
>> get the feeling the first thing I should do is to update my index to mat=
ch
>> the Lucene version used by Solr. This seems to be the most obvious hint =
(but
>> as Luke can handle all version I thought using this index with Solr shou=
ld
>> be fine, too). Although it's really quite strange that appending the deb=
ug
>> option changes my search results. Oh my, probably I did just miss some b=
asic
>> about how to usr Solr ;)
>> Your opinion? Changing the index to another Lucene version isn't exactly
>> the fastest and easiest thing so I'd like to strike out all other
>> possibilities before :)
>>
>> Best regards,
>>
>> =A0 =A0Erik
>>
>>
>> Am 20.04.2011 01:07, schrieb Lance Norskog:
>>>
>>> Look at the "text" definition stack. Does it have the same analyzer
>>> and filter that you used to make the index, and in the same order?
>>>
>>> The specific problem is that the "text" field includes a stemmer, and
>>> your code probably did not. And so "marine" is stored as, maybe
>>> 'marin'. =A0To check this out, look at the 'schema browser' page off th=
e
>>> admin page. This will show you all of the indexed terms in each field.
>>> Also look at the Analysis page: this lets you see how text is parsed
>>> and changed in the analysis stack.
>>>
>>> On Tue, Apr 19, 2011 at 2:56 PM, Erick Erickson<erickerickson@gmail.com=
>
>>> =A0wrote:
>>>>
>>>> Hmmmm, I don't see the problem either. It *sounds* like you don't real=
ly
>>>> have the default search field defined the way you think you do. Did yo=
u
>>>> restart
>>>> Solr after making that change?
>>>>
>>>> I'm assuming that when you say "not created by Solr" you mean that it'=
s
>>>> created
>>>> by Lucene. What version of Lucene and Solr are you using if that's tru=
e?
>>>>
>>>> You can test this by appending "&debugQuery=3Don" to your query or
>>>> checking
>>>> the "debug enable" checkbox in the full query interface from the admin
>>>> page.
>>>> That should show you exactly what is being searched. You might also wa=
nt
>>>> to look at the analysis page for your field and see how your query
>>>> is tokenized.
>>>>
>>>> But, like I said, this looks like it should work. If you can post the
>>>> results of
>>>> adding&debugQuery=3Don and your actual<fieldType> =A0definition for
>>>> "text_ws" your
>>>> <field> =A0declaration for "text" and the<defaultSearchField> =A0 =A0f=
rom your
>>>> schema
>>>> that would help. I can't tell you how many times something that's elud=
ed
>>>> me
>>>> for hours is obvious to someone else :)..
>>>>
>>>> Best
>>>> Erick
>>>>
>>>>
>>>>
>>>> On Tue, Apr 19, 2011 at 3:59 PM, Erik F=E4=DFler<erik.faessler@uni-jen=
a.de>
>>>> =A0wrote:
>>>>>
>>>>> =A0Hallo there,
>>>>>
>>>>> my issue qualifies as newbie question I guess, but I'm really a bit
>>>>> confused. I have an index which has not been created by Solr. Perhaps
>>>>> that's
>>>>> already the point although I fail to see why this should be an issue
>>>>> with my
>>>>> problem.
>>>>>
>>>>> I use the admin interface to check which results particular queries
>>>>> bring
>>>>> in. My index documents have a field "text" which holds the document
>>>>> text.
>>>>> This text has only been white space tokenized. So in my schema, the
>>>>> type for
>>>>> this field is "text_ws". My schema says
>>>>> "<defaultSearchField>text</defaultSearchField>".
>>>>>
>>>>> When I now search for, say, 'marine' (without quotes), I don't get an=
y
>>>>> search results. But when I search '"marine"' (that is, embraced by
>>>>> double
>>>>> quotes) I get my document hits. Alternatively, I can prepend the fiel=
d
>>>>> name:
>>>>> 'text:marine' and will also get my results.
>>>>>
>>>>> Similar with this phrase query: "marine mussels", where "In marine
>>>>> mussels
>>>>> of the genus" is a text snippet of a document. The phrase "marine
>>>>> mussels"
>>>>> won't give any hits. Searching for 'text:"marine mussels"' will give =
me
>>>>> the
>>>>> exact document containing this text snippet.
>>>>>
>>>>> I'm sure this has quite a simple explanation but I'm unable to find i=
t
>>>>> right
>>>>> now ;-) Perhaps you can help with that.
>>>>>
>>>>> Thanks a lot!
>>>>>
>>>>> Best regards,
>>>>>
>>>>> =A0 =A0Erik
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 20 12:36:42 2011
Return-Path: <java-user-return-49440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CE1D11215
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 20 Apr 2011 12:36:42 +0000 (UTC)
Received: (qmail 73899 invoked by uid 500); 20 Apr 2011 12:36:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73851 invoked by uid 500); 20 Apr 2011 12:36:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73842 invoked by uid 99); 20 Apr 2011 12:36:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 12:36:40 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS,T_FRT_BELOW2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ydabhi@asite.com designates 202.131.102.148 as permitted sender)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 12:36:32 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CBFF57.86FABE55"
Subject: Locking Issue  with Concurrency 
Date: Wed, 20 Apr 2011 18:02:52 +0530
Message-ID: <BE4EDD1665A8004A853E8BDC62C2F1580D2E98@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Locking Issue  with Concurrency 
Thread-Index: Acv/V3HJ2F7uRc0+QCKCAKsG89GGXw==
From: "Yogesh Dabhi" <ydabhi@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CBFF57.86FABE55
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

=20

Three Instance of My application & they access common lucene directory

=20

Instance1 jdk64 ,64 os

Instance2 jdk64 ,64 os

Instance3 jdk32 ,32 os

=20

When I access folder from Instance1 I got bellow error

=20

An unexpected network error occurred

=20

I see the index folder there is one .lock file

=20

But for other two Instances its working fine=20

=20

Before locking all thing working fine

=20

is there a way to handle such error

=20

=20

=20

Thanks & Regards

Yogesh


------_=_NextPart_001_01CBFF57.86FABE55--

From java-user-return-49441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 20 12:56:03 2011
Return-Path: <java-user-return-49441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D29281016
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 20 Apr 2011 12:56:03 +0000 (UTC)
Received: (qmail 57821 invoked by uid 500); 20 Apr 2011 12:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57788 invoked by uid 500); 20 Apr 2011 12:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57780 invoked by uid 99); 20 Apr 2011 12:56:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 12:56:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Apr 2011 12:55:55 +0000
Received: by qyk30 with SMTP id 30so512084qyk.14
        for <java-user@lucene.apache.org>; Wed, 20 Apr 2011 05:55:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=JEZEzyzI7NuZIiVIrAuicS0z72Xlj+bE+JZ+PmQ4b1I=;
        b=AHFYWT1U+73MBna1yq9KH2ya/OPbyp7Cb+ErB1iB2YfBM5hdow7b1asnmKEZAMWR6x
         8ZTuGJhRasbKouhNF0g8NvXOkrWVCc4jCJLMsJbMHnS8NsEcTofxvqgPgQ6feKa29XiU
         qeKjhynMQ38AQrntSPwY1twd9uvj2xH9w1tXI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ouXeTG1fx8bXVTPifzaP0N4lwRy1mwLoERVe0prDclRo93m4U49ZJ/BhLZVOrUsmB9
         4jrKXgWSUcCkjtEyenVYqZA+MGdzukKNoilbMaiH9LZP+fY4bbTQdEhC8blSDA0YpzPi
         wHV+5tL7VIDqqwFr2C1OKtQt9pAPZdyAlBS+s=
MIME-Version: 1.0
Received: by 10.229.17.11 with SMTP id q11mr5317918qca.46.1303304135224; Wed,
 20 Apr 2011 05:55:35 -0700 (PDT)
Received: by 10.229.120.81 with HTTP; Wed, 20 Apr 2011 05:55:35 -0700 (PDT)
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2E98@indiaserv01.asite.asitehq.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E98@indiaserv01.asite.asitehq.com>
Date: Wed, 20 Apr 2011 08:55:35 -0400
Message-ID: <BANLkTink=aXKTVy6ti1vEqbt_mfK6PMAVg@mail.gmail.com>
Subject: Re: Locking Issue with Concurrency
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

What do you mean by "access"? Are you trying to write to the
common index with more than one of your machines?

Best
Erick

On Wed, Apr 20, 2011 at 8:32 AM, Yogesh Dabhi <ydabhi@asite.com> wrote:
>
>
> Three Instance of My application & they access common lucene directory
>
>
>
> Instance1 jdk64 ,64 os
>
> Instance2 jdk64 ,64 os
>
> Instance3 jdk32 ,32 os
>
>
>
> When I access folder from Instance1 I got bellow error
>
>
>
> An unexpected network error occurred
>
>
>
> I see the index folder there is one .lock file
>
>
>
> But for other two Instances its working fine
>
>
>
> Before locking all thing working fine
>
>
>
> is there a way to handle such error
>
>
>
>
>
>
>
> Thanks & Regards
>
> Yogesh
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 21 01:48:24 2011
Return-Path: <java-user-return-49442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0BE85621
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 21 Apr 2011 01:48:24 +0000 (UTC)
Received: (qmail 19249 invoked by uid 500); 21 Apr 2011 01:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19200 invoked by uid 500); 21 Apr 2011 01:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19192 invoked by uid 99); 21 Apr 2011 01:48:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 01:48:21 +0000
X-ASF-Spam-Status: No, hits=1.8 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kimkokkonen@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 01:48:12 +0000
Received: by iwr19 with SMTP id 19so1685928iwr.35
        for <java-user@lucene.apache.org>; Wed, 20 Apr 2011 18:47:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=FuQ7R1UhlvyZnOhpciMJvS6G9pwT/sql2cCO/z55BuY=;
        b=N9FIbxpkvwL79MyLImmwy+D60MvrLT04lAchUS6whvJ+0jNBDg7bd7QBN8uMrVyw0V
         n8Ira6/Sr6l6Z+USRQkqvudzYrWuEqoLhqvyW4lz1EMDeqa5TMGvy6BvbPvJfStaxCQj
         uZ5H05pwoJIIlnb0KihlwbiHRN0lKe7IRNMac=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=mtyBQ8tOEBk57l4zKNdwDMilcqijA+Dsdq+CLupG8KfgxBVhPj1APMEWp5nenKhQGl
         BBLkfMgYOcSMmTrYUpw//Dgh5ME3oFWt9tkcL/dxGqmKMyMZTQ1boIBbuH/6THW9Rp55
         w+PATr+CfIRvBx1ShUJAOHBBPJpmHkJ7ehTQE=
Received: by 10.42.158.199 with SMTP id i7mr9774068icx.395.1303350471813;
        Wed, 20 Apr 2011 18:47:51 -0700 (PDT)
Received: from [192.168.0.2] (97-122-195-188.hlrn.qwest.net [97.122.195.188])
        by mx.google.com with ESMTPS id t1sm564365ibm.55.2011.04.20.18.47.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 20 Apr 2011 18:47:50 -0700 (PDT)
Message-ID: <4DAF8CC5.4040102@gmail.com>
Date: Wed, 20 Apr 2011 19:47:49 -0600
From: Kim Kokkonen <kimkokkonen@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org, ww.wang.cs@gmail.com
Subject: Re: How to make search distributed and scalable
References: <BANLkTikxcM0RkgkAct=RGhqwHCtDVWz-UQ@mail.gmail.com>
In-Reply-To: <BANLkTikxcM0RkgkAct=RGhqwHCtDVWz-UQ@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You might check out katta, which nicely combines lucene and hadoop:

http://katta.sourceforge.net/

This page has some architectural talks:

http://katta.sourceforge.net/about/talks

-Kim


On 4/19/2011 12:11 AM, Weiwei Wang wrote:
> Hi, buddies,
>       I'm reading something about solr and elastic-search, the thing i have
> been curious is how to make search engine distributed(using something like
> hadoop?).
>
>         I readed something about shards and replication tech mentioned in the
> user guide, but what is lacked for the open source projects like solr and
> elastic-search is the detailed essay about the architecture and the design
> of the system, instead, they only provide full user guide.
>
>        Of course, i'm a user of this kind of system, however, i want to get
> more about the insight.
>
> could anyone here provide me more materials to get me clear about the
> distributed architecture of such open source search engines?
>
> Thanks~
>
> ---
> Weiwei Wang
> gtalk: ww.wang.cs@gmail.com
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 21 07:19:21 2011
Return-Path: <java-user-return-49443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 509A022B1
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 21 Apr 2011 07:19:21 +0000 (UTC)
Received: (qmail 62747 invoked by uid 500); 21 Apr 2011 07:19:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62509 invoked by uid 500); 21 Apr 2011 07:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62500 invoked by uid 99); 21 Apr 2011 07:19:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 07:19:15 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of ydabhi@asite.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 07:19:10 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <ydabhi@asite.com>)
	id 1QCoA5-0002Bh-BK
	for java-user@lucene.apache.org; Thu, 21 Apr 2011 00:18:49 -0700
Date: Thu, 21 Apr 2011 00:18:49 -0700 (PDT)
From: yogesh <ydabhi@asite.com>
To: java-user@lucene.apache.org
Message-ID: <1303370329343-2846120.post@n3.nabble.com>
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2E98@indiaserv01.asite.asitehq.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2E98@indiaserv01.asite.asitehq.com>
Subject: Re: Locking Issue  with Concurrency
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

i search the data i got error An unexpected network error occurred 

--
View this message in context: http://lucene.472066.n3.nabble.com/Locking-Issue-with-Concurrency-tp2842509p2846120.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 21 08:57:40 2011
Return-Path: <java-user-return-49444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 14A1F2F67
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 21 Apr 2011 08:57:40 +0000 (UTC)
Received: (qmail 53872 invoked by uid 500); 21 Apr 2011 08:57:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53836 invoked by uid 500); 21 Apr 2011 08:57:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53828 invoked by uid 99); 21 Apr 2011 08:57:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 08:57:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 08:57:30 +0000
Received: by bwz8 with SMTP id 8so2120921bwz.35
        for <java-user@lucene.apache.org>; Thu, 21 Apr 2011 01:57:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=lP7lBtVsnGSLZfE5OS8n4kWyVADxS5bfq+12nMLkZ3s=;
        b=JGhoSDIAHl4/SKXfAoZfUlStiYtaNZAxatTaBKYqtHMf51Ex/RywrIRau38cyTwNrV
         UT8gtn2nDatnlrfipqycHAtU6Aeb/xgHL1pQwchX4kVktCxImgnRs+9NMOc5Nla44XPP
         71xSdGIvosS49LpHJizYNBDwUDK2kpJ8a+smA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=BGFc+nLFdN8prhFPi+mO5KSgCx3Uraf9ileV1QIxzlJLdmT1xfJGqyZwm9j8a6hd5n
         caK6081czAWSGhy1fy+bPW4RfoQqdcdsEpjM/K+Z4tatdP7a0cNPcF9EqyQJLpMZZV+B
         3GEx0fzTkJ2/WG5dyNiHJo9xIpm+D3YFW6hpM=
MIME-Version: 1.0
Received: by 10.204.20.147 with SMTP id f19mr1561080bkb.163.1303376229391;
 Thu, 21 Apr 2011 01:57:09 -0700 (PDT)
Received: by 10.204.81.203 with HTTP; Thu, 21 Apr 2011 01:57:09 -0700 (PDT)
Date: Thu, 21 Apr 2011 10:57:09 +0200
Message-ID: <BANLkTikMK0XQVfBCdj9WBH7g4KcXT_vLFA@mail.gmail.com>
Subject: termFreqVector is always null ?
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325554fbe295f6f04a169edbc

--000325554fbe295f6f04a169edbc
Content-Type: text/plain; charset=ISO-8859-1

Hi,

for any document, the termFreqVector is always null.
I'm sure the documents are in the collection and the field exist. So where
is the problem ?

for (int i = 0; i < reader.numDocs(); i++){
    TermFreqVector tfv = reader.getTermFreqVector(i, "tags");

thanks

--000325554fbe295f6f04a169edbc--

From java-user-return-49445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 21 09:03:18 2011
Return-Path: <java-user-return-49445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B49E2066
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 21 Apr 2011 09:03:18 +0000 (UTC)
Received: (qmail 64665 invoked by uid 500); 21 Apr 2011 09:03:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64614 invoked by uid 500); 21 Apr 2011 09:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 48596 invoked by uid 99); 21 Apr 2011 05:10:24 -0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,T_FRT_COCK
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
MIME-Version: 1.0
X-Originating-IP: [216.218.222.20]
In-Reply-To: <4DAF8CC5.4040102@gmail.com>
References: <BANLkTikxcM0RkgkAct=RGhqwHCtDVWz-UQ@mail.gmail.com>
	<4DAF8CC5.4040102@gmail.com>
Date: Thu, 21 Apr 2011 13:09:53 +0800
Message-ID: <BANLkTiniVo-E9LHWL9=eCeMXjqxKydJejA@mail.gmail.com>
Subject: Re: How to make search distributed and scalable
From: Weiwei Wang <wangweiwei@dianxinos.me>
To: Kim Kokkonen <kimkokkonen@gmail.com>
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5314e896d5c4904a166c096
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec5314e896d5c4904a166c096
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

thanks, dude, i will take a look at it

2011/4/21 Kim Kokkonen <kimkokkonen@gmail.com>

> You might check out katta, which nicely combines lucene and hadoop:
>
> http://katta.sourceforge.net/
>
> This page has some architectural talks:
>
> http://katta.sourceforge.net/about/talks
>
> -Kim
>
>
>
> On 4/19/2011 12:11 AM, Weiwei Wang wrote:
>
>> Hi, buddies,
>>      I'm reading something about solr and elastic-search, the thing i ha=
ve
>> been curious is how to make search engine distributed(using something li=
ke
>> hadoop?).
>>
>>        I readed something about shards and replication tech mentioned in
>> the
>> user guide, but what is lacked for the open source projects like solr an=
d
>> elastic-search is the detailed essay about the architecture and the desi=
gn
>> of the system, instead, they only provide full user guide.
>>
>>       Of course, i'm a user of this kind of system, however, i want to g=
et
>> more about the insight.
>>
>> could anyone here provide me more materials to get me clear about the
>> distributed architecture of such open source search engines?
>>
>> Thanks~
>>
>> ---
>> Weiwei Wang
>> gtalk: ww.wang.cs@gmail.com
>>
>>
>


--=20

=E7=8E=8B=E5=B7=8D=E5=B7=8D Alex Wang
=E8=BD=AF=E4=BB=B6=E5=B7=A5=E7=A8=8B=E5=B8=88 Software Engineer
Cel. +86 18911288489
=09
=E7=82=B9=E5=BF=83 =E7=A7=BB=E5=8A=A8=E4=BA=92=E8=81=94=E7=BD=91=E8=A7=A3=
=E5=86=B3=E6=96=B9=E6=A1=88
Tapas Mobile
www.dianxinos.com

=E5=8C=97=E4=BA=AC=E5=B8=82=E6=B5=B7=E6=B7=80=E5=8C=BA=E5=8C=97=E5=9B=9B=E7=
=8E=AF=E8=A5=BF=E8=B7=AF66=E5=8F=B7 =E7=AC=AC=E4=B8=89=E6=9E=81=E5=A4=A7=E5=
=8E=A6B=E5=BA=A718=E5=B1=82   100080
Disanji Tower Block B  F18, #66 North 4th Ring Road West,
Haidian District, Beijing 100080 China

This message is intended for the use of the addressee and may contain
privileged and/or confidential information.  If you are not the
intended recipient, please note that any dissemination, distribution
or copying of the information contained in this message is strictly
unauthorized and prohibited.  If you have received this message in
error, please notify the sender by reply e-mail and delete the message
from your system.  Any statements in this message which do not relate
to the business of Tapas are neither given nor endorsed by Tapas.

--bcaec5314e896d5c4904a166c096--

From java-user-return-49446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 21 09:09:09 2011
Return-Path: <java-user-return-49446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A16A42641
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 21 Apr 2011 09:09:09 +0000 (UTC)
Received: (qmail 75534 invoked by uid 500); 21 Apr 2011 09:09:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75487 invoked by uid 500); 21 Apr 2011 09:09:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75479 invoked by uid 99); 21 Apr 2011 09:09:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 09:09:07 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 09:09:00 +0000
Received: by bwz8 with SMTP id 8so2130457bwz.35
        for <java-user@lucene.apache.org>; Thu, 21 Apr 2011 02:08:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=K9WEJV7v9dqtBzHuZ2rqF2lTeK3TquUTwS6MqLCyLz8=;
        b=BJzEHegd0TdPbWUofunIX/7u4CrGw/995ffKmRdl2WODg9znZrcejD8PzXXMdXlc8E
         +KxJIAFKS1HfX0TyPWAC8GKqMM8sgZsD2qiqRT6eBXC7yPKd2qgouSVSfhbIYtzKmt4o
         DXcE8YpkHXZC37dIsjzX1WohX8nU8T85gATpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Q8eTWGXjpBx9TiwZvYG6MtA3SC9PCO++C6QxoxAHeb9LnBwW6raWXE0vHTamP1Wsul
         wj7npBmAoj4bMIFSkmv49uQgmbQll5riPtJPgRGJGM+B/Hd37cGf8PQUNGyTSbqD40G+
         V02SI3rll2S+sFlAwZ6RY69zGkBFNa/5Mzq6s=
MIME-Version: 1.0
Received: by 10.204.20.147 with SMTP id f19mr1573224bkb.163.1303376919213;
 Thu, 21 Apr 2011 02:08:39 -0700 (PDT)
Received: by 10.204.81.203 with HTTP; Thu, 21 Apr 2011 02:08:39 -0700 (PDT)
In-Reply-To: <BANLkTikMK0XQVfBCdj9WBH7g4KcXT_vLFA@mail.gmail.com>
References: <BANLkTikMK0XQVfBCdj9WBH7g4KcXT_vLFA@mail.gmail.com>
Date: Thu, 21 Apr 2011 11:08:39 +0200
Message-ID: <BANLkTik_RFtfHDtwLTXzhfxA6CPhcCs3oA@mail.gmail.com>
Subject: Re: termFreqVector is always null ?
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325554fbe473a8504a16a1619

--000325554fbe473a8504a16a1619
Content-Type: text/plain; charset=ISO-8859-1

Nevermind, I've solved by indexing the fields with with Field.TermVector.YES

doc.add(new Field("tags", "foo bar", Store.NO, Index.ANALYZED,
        Field.TermVector.YES));



On 21 April 2011 10:57, Patrick Diviacco <patrick.diviacco@gmail.com> wrote:

> Hi,
>
> for any document, the termFreqVector is always null.
> I'm sure the documents are in the collection and the field exist. So where
> is the problem ?
>
> for (int i = 0; i < reader.numDocs(); i++){
>     TermFreqVector tfv = reader.getTermFreqVector(i, "tags");
>
> thanks
>

--000325554fbe473a8504a16a1619--

From java-user-return-49447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 21 15:03:17 2011
Return-Path: <java-user-return-49447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CEC5B235E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 21 Apr 2011 15:03:17 +0000 (UTC)
Received: (qmail 2410 invoked by uid 500); 21 Apr 2011 15:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2364 invoked by uid 500); 21 Apr 2011 15:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2355 invoked by uid 99); 21 Apr 2011 15:03:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 15:03:14 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Apr 2011 15:03:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id AAAEEC2171
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2011 17:02:46 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id HEVaeU1435mU for <java-user@lucene.apache.org>;
	Thu, 21 Apr 2011 17:02:46 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 841DBC2114
	for <java-user@lucene.apache.org>; Thu, 21 Apr 2011 17:02:46 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 21 Apr 2011 17:02:46 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 21 Apr 2011 17:02:45 +0200
Subject: "Umlaute" getting lost
Thread-Topic: "Umlaute" getting lost
Thread-Index: AcwANSpa8bZeAqKqTMK2253VpMDS2A==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51733@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I keep my search terms in a dedicated RAMDirectory (the termIndex).=20
In there I palce all the term of my real index. When putting the terms into=
 the=20
termIndex I can still see [using the debugger] the Umlaute (=E4=F6=FC). Unf=
ortunately when searching the=20
termIndex the documents no more contain these Umlaute.

Populating the termIndex:
termIndex =3D new RAMDirectory();
IndexWriterConfig config =3D new IndexWriterConfig( Version.LUCENE_31, new =
TermAnalyzer( locale ) );
termIndexWriter =3D new IndexWriter( termIndex, config );
TermEnum tEnum =3D realIndexReader.terms();
while ( tEnum.next() )
{
	Term t =3D tEnum.term();
	String termText =3D t.text();
	Document termDocument =3D new Document();
	Field field =3D new Field( FIELDNAME_TERM, termText, Field.Store.YES, Fiel=
d.Index.ANALYZED );
	termDocument.add( field );
	// and add term into the index
	termIndexWriter.addDocument( termDocument );
}
termIndexWriter.commit();
termIndexWriter.optimize();
termIndexWriter.close();

termIndexReader =3D IndexReader.open( termIndex, true );
---------- searching terms
Query q =3D fuzzy ? new FuzzyQuery( new Term( FIELDNAME_TERM, termFilter.to=
LowerCase() ) ) :
					new WildcardQuery( new Term( FIELDNAME_TERM, "*" + termFilter.toLowerC=
ase() + "*" ) );
TopDocs topDocs =3D new IndexSearcher( getTermIndexReader() ).search( q, 10=
0 );			=09
for ( ScoreDoc hit : topDocs.scoreDocs )
{
	Document doc =3D getTermIndexReader().document( hit.doc );
	String indexTerm =3D doc.get( FIELDNAME_TERM );
	if ( !returnValue.contains( indexTerm  ) )
	{
		returnValue.add( indexTerm );
	}
}
----------
The TermAbnalyzer is the same analyzer as the main index analyzer with the =
exception that a LowerCaseFilter is applied.
I have unit tests for my Umlaute which work as expected.=20
Unfortunately this is not the case when I debug my real app...
What could possibly cause the "loss"?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 01:52:36 2011
Return-Path: <java-user-return-49448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA5062D0E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 01:52:35 +0000 (UTC)
Received: (qmail 77269 invoked by uid 500); 22 Apr 2011 01:52:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77222 invoked by uid 500); 22 Apr 2011 01:52:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77214 invoked by uid 99); 22 Apr 2011 01:52:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 01:52:33 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 01:52:26 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1QD5XR-0008PT-9j
	for java-user@lucene.apache.org; Thu, 21 Apr 2011 18:52:05 -0700
Date: Thu, 21 Apr 2011 18:52:05 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1303437125295-2849776.post@n3.nabble.com>
Subject: New codecs keep Freq skip/omit Pos
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello everybody,

I am currently testing several new Lucene 4.0 codec implementations to
compare with an own solution.
The difference is that I am only indexing frequencies and not positions. I
would like to have this for the other codecs. I know there was already a
post for this topic
http://lucene.472066.n3.nabble.com/Omit-positions-but-not-TF-td599710.html. 

I just wanted to ask if there has something changed especially for the new
codecs.
I had a look at the FixedPostingWriterImpl and PostingsConsumer. Are those
they right places for adapting Pos/Freq handling? What would happen if I
just skip writing postions/payloads? Would it mess up the index? 

The written files have different endings like pyl, skp, pos, doc etc. Gives
me "not counting" the pos file a correct index size estimation for W Freqs
W/O Pos? Or where exactly are term positions written?

Regards
Alex

PS: Some results with the current codecs if someone is interested. I indexed
10% of Wikipedia(english).
Each version is indexed as document.

Docs	240179
Versions	8467927
Distinct Terms	3501214
total Terms	1520008204
Avg. Versions	35.25
Avg. Terms per Version	179.50
Avg. Terms per Doc	6328.65

PforDelta W Freq W Pos	       20.6 GB
PforDelta W/O Freq W/O Pos	         1.6 GB
Standard 4.0 W Freq W Pos	       28.1 GB
Standard 4.0 W/O Freq W/O Pos	 6.2 GB
Pfor W Freq W Pos	                  22 GB
Pfor W/O Freq W/O Pos	         3.1 GB

Performance follows ;)


--
View this message in context: http://lucene.472066.n3.nabble.com/New-codecs-keep-Freq-skip-omit-Pos-tp2849776p2849776.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 02:22:06 2011
Return-Path: <java-user-return-49449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EE525CA1
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 02:22:06 +0000 (UTC)
Received: (qmail 94432 invoked by uid 500); 22 Apr 2011 02:22:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94385 invoked by uid 500); 22 Apr 2011 02:22:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94377 invoked by uid 99); 22 Apr 2011 02:22:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 02:22:04 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 02:21:58 +0000
Received: by bwz8 with SMTP id 8so415447bwz.35
        for <java-user@lucene.apache.org>; Thu, 21 Apr 2011 19:21:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=mbWwuBsEzPVLLCjZPAzVawKj89E3L60k1G0rKDPr8NY=;
        b=PuV3QijVEWk7Cz2D0BJVimncJOEcT+7hx3CSEut0b1vM232LB3zVqvyrmU4dVQPo/t
         dGpap1wkhe6T9JdW60Wgr8fHJYjxqSy6y0wW49Lv65Xn8383jzn4aHgBDN1bU3i+H1yH
         +dwAG878ZaaB6yP7lq6C4uf1lS2B51RRvsMh8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rgTs7seFF1+InHJA7AMGxu5Ce8HmCpXgKr3wOPX3gtbpAhst4nyVJwnY4wxodO1Ayd
         ZPCVCk0fCxT/9NDN22ZpA368IasYpilU2q1+8fH+3r/67PAtp9LuTuHUvmsHthrBlPIr
         8ogX8Uan8aY5maMbE9jU5MkIXwDsYGvj335Gc=
Received: by 10.204.153.207 with SMTP id l15mr503214bkw.111.1303438898077;
 Thu, 21 Apr 2011 19:21:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Thu, 21 Apr 2011 19:21:18 -0700 (PDT)
In-Reply-To: <1303437125295-2849776.post@n3.nabble.com>
References: <1303437125295-2849776.post@n3.nabble.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 21 Apr 2011 22:21:18 -0400
Message-ID: <BANLkTi=JiY-siKS7usxUHjZTn=iXfXw-gg@mail.gmail.com>
Subject: Re: New codecs keep Freq skip/omit Pos
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Apr 21, 2011 at 9:52 PM, Alex vB <mail@avomberg.de> wrote:
> Hello everybody,
>
> I am currently testing several new Lucene 4.0 codec implementations to
> compare with an own solution.
> The difference is that I am only indexing frequencies and not positions. I
> would like to have this for the other codecs. I know there was already a
> post for this topic
> http://lucene.472066.n3.nabble.com/Omit-positions-but-not-TF-td599710.html.
>
> I just wanted to ask if there has something changed especially for the new
> codecs.
> I had a look at the FixedPostingWriterImpl and PostingsConsumer. Are those
> they right places for adapting Pos/Freq handling? What would happen if I
> just skip writing postions/payloads? Would it mess up the index?

Unless lots of things are changed about the code :)

All of the code here currently assumes omitTF means omitTFAP (freqs
and positions are omitted). So for it to work it would be good to have
an omitP, and if omitTF=true then omitP is also set to true, but omitP
can be true and omitTF = false. Every place that currently checks if
(omitTF) would need to be evaluated, to determine if it should really
be "if (omitP)" instead. For example, when setting up blockreaders for
a bulkpostingsenum with positions, we would set the positions block
reader to null when omitP = true instead of when omitTF=true.

The Fixed layout is very experimental and messy at the moment, it
might be easier to ignore it and start with Sep (when creating a
FixedIntBlock codec, you can easily choose which layout, just choose
SepPostingsWriter etc instead of FixedPostingsWriter).

The reason I say its probably easier, is that Sep makes much less
assumptions/optimizations and would be easier to modify: it creates
separate .doc, .frq, and .pos files which can all be different block
sizes or even different compression algorithms.

On the other hand, the whole point of the Fixed layout is to take
advantage of the fact that block size is the same across doc, freq,
and pos (it interleaves doc and freq into .doc), and to work the
postings somewhat in "parallel" using skipBlock() when possible. So
this one would be more difficult at the moment due to its nature.

>
> The written files have different endings like pyl, skp, pos, doc etc. Gives
> me "not counting" the pos file a correct index size estimation for W Freqs
> W/O Pos? Or where exactly are term positions written?
>

Well its not totally just subtracting the .pos file, for example there
are pointers to the .pos file in the terms dictionary, skipdata for
the .pos file, etc etc that will be smaller if there is no pos file
(as they dont need to exist)... but these are more things that have to
also be modified to support omitting positions without omitting
frequencies, and I havent even thought about all the other places (i
am sure there are many!).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 02:47:14 2011
Return-Path: <java-user-return-49450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F2C05EA9
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 02:47:13 +0000 (UTC)
Received: (qmail 6700 invoked by uid 500); 22 Apr 2011 02:47:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6302 invoked by uid 500); 22 Apr 2011 02:47:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6294 invoked by uid 99); 22 Apr 2011 02:47:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 02:47:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 02:47:04 +0000
Received: by bwz8 with SMTP id 8so428532bwz.35
        for <java-user@lucene.apache.org>; Thu, 21 Apr 2011 19:46:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=2zcufV/FM8wGZPp18xKdiZF5cOuozj2ufqlZT9tug5g=;
        b=Td2QBLs5QMCsqw5MUIDtxU4fURGKBlvkc8zblnXep4zogyJOdb+PoWX/49dmKfD0CQ
         wJF11NhDhCMpxudtXt9SV6EosGF4xN/sjN5gdJCD4Jgpi3zk4YHdzgFOI26yERBE6tAm
         6rrPaskKMFrZP86XbgMwHTm0r/3nvjar6sui0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=srvqsF43ljaf8jKdUWVEAk/IBoAvWkJhhOy0anRWN1+AdC65m6hhYIAFZkBstZarwM
         MBFzoZ9kmZMF+i79Kfmpjs0Fsh0FRzMObz69FrQh299zVzr2ghdGSwPxIQzyls3MD+DS
         LDC+UA3jJMeHE92Hnwz7A3kEswadgV+U17Wek=
Received: by 10.204.153.207 with SMTP id l15mr516512bkw.111.1303440404621;
 Thu, 21 Apr 2011 19:46:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Thu, 21 Apr 2011 19:46:24 -0700 (PDT)
In-Reply-To: <1303437125295-2849776.post@n3.nabble.com>
References: <1303437125295-2849776.post@n3.nabble.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 21 Apr 2011 22:46:24 -0400
Message-ID: <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com>
Subject: Re: New codecs keep Freq skip/omit Pos
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Apr 21, 2011 at 9:52 PM, Alex vB <mail@avomberg.de> wrote:
>
> PforDelta W Freq W Pos =C2=A0 =C2=A0 =C2=A0 =C2=A0 20.6 GB
> PforDelta W/O Freq W/O Pos =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 1.6 GB
> Standard 4.0 W Freq W Pos =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A028.1 GB
> Standard 4.0 W/O Freq W/O Pos =C2=A0 =C2=A06.2 GB
> Pfor W Freq W Pos =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 22 GB
> Pfor W/O Freq W/O Pos =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A03.1 GB
>

Hi, can you provide some more details on these index size numbers?
* which one is PforDelta versus Pfor? We have 2 PFOR-delta impls,
PatchedFrameOfRef and PatchedFrameOfRef2, that are slightly
different... I'm pretty curious about the huge size differential
between the two though (e.g. 1.6GB versus 3.1GB, can you give more
info/breakdown of file sizes?
* are you using a stopfilter at index time or are you indexing all
terms including stopwords?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 16:19:23 2011
Return-Path: <java-user-return-49451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 819A73168
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 16:19:23 +0000 (UTC)
Received: (qmail 30884 invoked by uid 500); 22 Apr 2011 16:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25480 invoked by uid 500); 22 Apr 2011 16:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99651 invoked by uid 99); 22 Apr 2011 16:03:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 16:03:53 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 16:03:48 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1QDIpK-0003i1-Nr
	for java-user@lucene.apache.org; Fri, 22 Apr 2011 09:03:26 -0700
Date: Fri, 22 Apr 2011 09:03:26 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1303488206731-2851809.post@n3.nabble.com>
In-Reply-To: <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com>
References: <1303437125295-2849776.post@n3.nabble.com> <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com>
Subject: Re: New codecs keep Freq skip/omit Pos
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello Robert,

thank you for the answers! :)
Currently I used PatchedFrameOfRef and PatchedFrameOfRef2. Therefore both
implementations are PForDelta! Sorry my mistake.

PatchedFrameOfRef2: PforDelta W/O Freq W/O Pos               1.6 GB 
PatchedFrameOfRef :  Pfor W/O Freq W/O Pos                      3.1 GB 

Here are some numbers:
PatchedFrameOfRef2 w/o POS w/o FREQ
segements.gen  20 Bytes
_43.fdt  8,1 MB
_43.fdx  64,4 MB
_43.fnm  20 Bytes
_43_0.skp  182,6 MB
_43_0.tib  32,3 MB
_43_0.tiv  1,0 MB
segements_2  268 Bytes
_43_0.doc  1,3 GB

PatchedFrameOfRef w/o POS w/o FREQ
segements.gen  20 Bytes
_43.fdt  8,1 MB
_43.fdx  64,4 MB
_43.fnm  20 Bytes
_43_0.skp  182,6 MB
_43_0.tib  32,3 MB
_43_0.tiv  1,1 MB
segements_2  267 Bytes
_43_0.doc  2,8 GB

During indexing I use StandardAnalyzer (StandardFilter, LowerCaseFilter,
StopFilter). 
Can I get somewhere more information for Codec creation or is there just
"grubbing" through the code? 

My own implementation needs 2,8 GB of space including FREQ but not POS. This
is why I am asking because I want somehow compare the result. Compared to 20
GB it is very nice and compared to 1,6 GB it is very bad ;).

Regards
Alex


--
View this message in context: http://lucene.472066.n3.nabble.com/New-codecs-keep-Freq-skip-omit-Pos-tp2849776p2851809.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 16:25:07 2011
Return-Path: <java-user-return-49452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C40E010A7
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 16:25:07 +0000 (UTC)
Received: (qmail 8693 invoked by uid 500); 22 Apr 2011 16:25:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8651 invoked by uid 500); 22 Apr 2011 16:25:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8643 invoked by uid 99); 22 Apr 2011 16:25:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 16:25:05 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 16:24:58 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1QDJ9p-0005Ae-Li
	for java-user@lucene.apache.org; Fri, 22 Apr 2011 09:24:37 -0700
Date: Fri, 22 Apr 2011 09:24:37 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1303489477665-2851898.post@n3.nabble.com>
In-Reply-To: <1303488206731-2851809.post@n3.nabble.com>
References: <1303437125295-2849776.post@n3.nabble.com> <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com> <1303488206731-2851809.post@n3.nabble.com>
Subject: Re: New codecs keep Freq skip/omit Pos
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I also indexed one time with Lucene 3.0. Are those sizes really completely
the same?

Standard 4.0 W Freq W Pos	28.1 GB
Standard 4.0 W/O Freq W/O Pos	6.2 GB
Standard 3.0 W Freq W Pos	28.1 GB
Standard 3.0 WO Freq WO Pos	6.2 GB

Regards
Alex


--
View this message in context: http://lucene.472066.n3.nabble.com/New-codecs-keep-Freq-skip-omit-Pos-tp2849776p2851898.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 16:30:31 2011
Return-Path: <java-user-return-49453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C82FA1DA4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 16:30:31 +0000 (UTC)
Received: (qmail 19583 invoked by uid 500); 22 Apr 2011 16:30:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19546 invoked by uid 500); 22 Apr 2011 16:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19538 invoked by uid 99); 22 Apr 2011 16:30:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 16:30:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 16:30:22 +0000
Received: by bwz8 with SMTP id 8so885050bwz.35
        for <java-user@lucene.apache.org>; Fri, 22 Apr 2011 09:30:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=M8qhNEn1AYU7f6U89uHtsd6s98TpxDFST2E4JajqaWs=;
        b=vAbU0RABrVKhPur+LZKyR4sdPViQv4tP7tGs2gzu6ZwKE6tmZXYW70YWZhNnRlwrg7
         zF4OZS/1pn90PLu6SImsczcSug2oFUhUO0K3yVxGEK+AnPColFz7LqK8F+WXqNo0HbrX
         mN3J2PM6y+F7QASpA1ErVSBKW5x4ifW/ypGK0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=PTfUXKUfuSGpFMGycvcZvKWI/mo3Ais1l1M3IVcq2FyGFnmSPEsEYsVzhiNXqUn4ES
         R5XiL5esrOfh9t8tEswBeBf/knKg1EoX9uPCvuyTv+wAjXiITjXXcfZ4mpXmBVAWbO37
         bj9UrzqMdITgQ/t1Jk7IJ6arUNQfoTcmEFoXc=
Received: by 10.204.84.166 with SMTP id j38mr1062233bkl.84.1303489802166; Fri,
 22 Apr 2011 09:30:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Fri, 22 Apr 2011 09:29:42 -0700 (PDT)
In-Reply-To: <1303488206731-2851809.post@n3.nabble.com>
References: <1303437125295-2849776.post@n3.nabble.com> <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com>
 <1303488206731-2851809.post@n3.nabble.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Fri, 22 Apr 2011 12:29:42 -0400
Message-ID: <BANLkTin1Fp2W-ezsEPJjxscWjfzCB2bERA@mail.gmail.com>
Subject: Re: New codecs keep Freq skip/omit Pos
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Apr 22, 2011 at 12:03 PM, Alex vB <mail@avomberg.de> wrote:
> During indexing I use StandardAnalyzer (StandardFilter, LowerCaseFilter,
> StopFilter).
> Can I get somewhere more information for Codec creation or is there just
> "grubbing" through the code?

try the following patch to switch PFOR1 and PFOR2 over to Sep, so that
they create separate .doc and .frq files.
then you can compare the compression of the freqs against your
implementation (again the .skp/.tib/.tiv will be larger due to using
Sep codec and due to having pos pointers, but try to ignore that)


Index: lucene/src/java/org/apache/lucene/index/codecs/pfordelta/PatchedFrameOfRefCodec.java
===================================================================
--- lucene/src/java/org/apache/lucene/index/codecs/pfordelta/PatchedFrameOfRefCodec.java	(revision
1095422)
+++ lucene/src/java/org/apache/lucene/index/codecs/pfordelta/PatchedFrameOfRefCodec.java	(working
copy)
@@ -30,6 +30,8 @@
 import org.apache.lucene.index.codecs.FieldsProducer;
 import org.apache.lucene.index.codecs.fixed.FixedPostingsReaderImpl;
 import org.apache.lucene.index.codecs.fixed.FixedPostingsWriterImpl;
+import org.apache.lucene.index.codecs.sep.SepPostingsReaderImpl;
+import org.apache.lucene.index.codecs.sep.SepPostingsWriterImpl;
 import org.apache.lucene.index.codecs.standard.StandardCodec;
 import org.apache.lucene.index.codecs.BlockTermsWriter;
 import org.apache.lucene.index.codecs.BlockTermsReader;
@@ -48,7 +50,7 @@

   @Override
   public FieldsConsumer fieldsConsumer(SegmentWriteState state)
throws IOException {
-    PostingsWriterBase postingsWriter = new
FixedPostingsWriterImpl(state, new PForDeltaFactory(128));
+    PostingsWriterBase postingsWriter = new
SepPostingsWriterImpl(state, new PForDeltaFactory(128));

     boolean success = false;
     TermsIndexWriterBase indexWriter;
@@ -79,7 +81,7 @@

   @Override
   public FieldsProducer fieldsProducer(SegmentReadState state) throws
IOException {
-    PostingsReaderBase postingsReader = new FixedPostingsReaderImpl(state.dir,
+    PostingsReaderBase postingsReader = new SepPostingsReaderImpl(state.dir,

state.segmentInfo,

state.readBufferSize,
                                                                   new
PForDeltaFactory(128),
@@ -125,14 +127,14 @@

   @Override
   public void files(Directory dir, SegmentInfo segmentInfo, String
id, Set<String> files) {
-    FixedPostingsReaderImpl.files(segmentInfo, id, files);
+    SepPostingsReaderImpl.files(segmentInfo, id, files);
     BlockTermsReader.files(dir, segmentInfo, id, files);
     VariableGapTermsIndexReader.files(dir, segmentInfo, id, files);
   }

   @Override
   public void getExtensions(Set<String> extensions) {
-    FixedPostingsWriterImpl.getExtensions(extensions);
+    SepPostingsWriterImpl.getExtensions(extensions);
     BlockTermsReader.getExtensions(extensions);
     VariableGapTermsIndexReader.getIndexExtensions(extensions);
   }
Index: lucene/src/java/org/apache/lucene/index/codecs/pfordelta2/PForDeltaFixedIntBlockCodec.java
===================================================================
--- lucene/src/java/org/apache/lucene/index/codecs/pfordelta2/PForDeltaFixedIntBlockCodec.java	(revision
1095422)
+++ lucene/src/java/org/apache/lucene/index/codecs/pfordelta2/PForDeltaFixedIntBlockCodec.java	(working
copy)
@@ -41,6 +41,8 @@
 import org.apache.lucene.index.codecs.VariableGapTermsIndexReader;
 import org.apache.lucene.index.codecs.VariableGapTermsIndexWriter;
 import org.apache.lucene.index.codecs.sep.IntStreamFactory;
+import org.apache.lucene.index.codecs.sep.SepPostingsReaderImpl;
+import org.apache.lucene.index.codecs.sep.SepPostingsWriterImpl;
 import org.apache.lucene.index.codecs.standard.StandardCodec;
 import org.apache.lucene.store.*;
 import org.apache.lucene.util.BytesRef;
@@ -168,7 +170,7 @@

   @Override
   public FieldsConsumer fieldsConsumer(SegmentWriteState state)
throws IOException {
-    PostingsWriterBase postingsWriter = new
FixedPostingsWriterImpl(state, new PForDeltaIntFactory());
+    PostingsWriterBase postingsWriter = new
SepPostingsWriterImpl(state, new PForDeltaIntFactory());

     boolean success = false;
     TermsIndexWriterBase indexWriter;
@@ -199,7 +201,7 @@

   @Override
   public FieldsProducer fieldsProducer(SegmentReadState state) throws
IOException {
-    PostingsReaderBase postingsReader = new FixedPostingsReaderImpl(state.dir,
+    PostingsReaderBase postingsReader = new SepPostingsReaderImpl(state.dir,

state.segmentInfo,

state.readBufferSize,

new PForDeltaIntFactory(), state.codecId);
@@ -244,14 +246,14 @@

   @Override
   public void files(Directory dir, SegmentInfo segmentInfo, String
codecId, Set<String> files) {
-    FixedPostingsReaderImpl.files(segmentInfo, codecId, files);
+    SepPostingsReaderImpl.files(segmentInfo, codecId, files);
     BlockTermsReader.files(dir, segmentInfo, codecId, files);
     VariableGapTermsIndexReader.files(dir, segmentInfo, codecId, files);
   }

   @Override
   public void getExtensions(Set<String> extensions) {
-    FixedPostingsWriterImpl.getExtensions(extensions);
+    SepPostingsWriterImpl.getExtensions(extensions);
     BlockTermsReader.getExtensions(extensions);
     VariableGapTermsIndexReader.getIndexExtensions(extensions);
   }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 16:33:17 2011
Return-Path: <java-user-return-49454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 132051EB3
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 16:33:17 +0000 (UTC)
Received: (qmail 23567 invoked by uid 500); 22 Apr 2011 16:33:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23520 invoked by uid 500); 22 Apr 2011 16:33:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23510 invoked by uid 99); 22 Apr 2011 16:33:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 16:33:14 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 16:33:09 +0000
Received: by bwz8 with SMTP id 8so887117bwz.35
        for <java-user@lucene.apache.org>; Fri, 22 Apr 2011 09:32:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=lxHuYL2Skq+xO+wRU7+u3PajK+p3nwq6x9OzMU5iKGI=;
        b=E6Aqp653XISgKKhNoAABfT2j/I9GQYPo0f9ZgsuHjTYtTyEIpslmMVg/KBQgo6QlHw
         3rR0HdNu1kSa/RMQxAjkuUH4PevRhEG4KU1N0vY6c5G3KzphI2MeISlBI7Atwn27J41E
         1XHWga1MjglVOZ0cOoyM1uCoj6WseJ+BA5cS4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=XfeQbWBoWMyLa0S90rqGPvwqWCTXElCs73vXnuNNe5vhy7Oh4iEFaPbbr1Oh2lotG9
         ncMgIkvCCcxPUFS69X0vyXPqt2bYJ28TxA7PW2yI6yXfAtZuwIE9/wOQXazyEKtdkuhC
         jPW1bHcLoyx5Vsw10T92DmctPXuU+5uYv2LOI=
Received: by 10.204.153.207 with SMTP id l15mr1039907bkw.111.1303489968249;
 Fri, 22 Apr 2011 09:32:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Fri, 22 Apr 2011 09:32:28 -0700 (PDT)
In-Reply-To: <1303489477665-2851898.post@n3.nabble.com>
References: <1303437125295-2849776.post@n3.nabble.com> <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com>
 <1303488206731-2851809.post@n3.nabble.com> <1303489477665-2851898.post@n3.nabble.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Fri, 22 Apr 2011 12:32:28 -0400
Message-ID: <BANLkTim2McU4E1C+YhM26Tk=NKZ671n_qw@mail.gmail.com>
Subject: Re: New codecs keep Freq skip/omit Pos
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Fri, Apr 22, 2011 at 12:24 PM, Alex vB <mail@avomberg.de> wrote:
> I also indexed one time with Lucene 3.0. Are those sizes really completel=
y
> the same?
>
> Standard 4.0 W Freq W Pos =C2=A0 =C2=A0 =C2=A0 28.1 GB
> Standard 4.0 W/O Freq W/O Pos =C2=A0 6.2 GB
> Standard 3.0 W Freq W Pos =C2=A0 =C2=A0 =C2=A0 28.1 GB
> Standard 3.0 WO Freq WO Pos =C2=A0 =C2=A0 6.2 GB
>

They shouldn't be *completely* the same, but for your test (where the
terms dictionary etc is relatively small), they should be very close?

Standard 4.0 is still using the same underlying vByte compression, etc
as the 3.0 index format, though it has some major changes in other
places (e.g. terms dict)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 17:44:00 2011
Return-Path: <java-user-return-49455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CD35DF6
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 17:44:00 +0000 (UTC)
Received: (qmail 32985 invoked by uid 500); 22 Apr 2011 17:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32945 invoked by uid 500); 22 Apr 2011 17:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32937 invoked by uid 99); 22 Apr 2011 17:43:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 17:43:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FROM_MISSP_EH_MATCH,HTML_MESSAGE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zest159@naver.com designates 114.111.32.52 as permitted sender)
Received: from [114.111.32.52] (HELO twsmtp27-2.nm.naver.com) (114.111.32.52)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Apr 2011 17:43:49 +0000
Received: (qmail 22039 invoked from network); 22 Apr 2011 17:43:25 -0000
Received: from 114.111.40.49 (HELO localhost) (114.111.40.49)
  by twsmtp27-2.nm.naver.com with SMTP; 22 Apr 2011 17:43:25 -0000
MIME-Version: 1.0
Message-Id: <f15d3e1ace572afc1677c72d7c43f38e@tweb19-2.nm>
Content-Type: multipart/alternative;
	boundary="-------Boundary-Naver=_83992f72671e425029a17dd38cd217f5"
From: =?EUC-KR?B?udqzsr/r?=<zest159@naver.com>
Subject: =?EUC-KR?B?THVjZW5lIFNwYXRpYWwgU2VhcmNoIFByb2JsZW06IHNlYXJj?= 
	=?EUC-KR?B?aCByYWRpdXMgdGhyZXNob2xkPw==?= 
Reply-To: =?EUC-KR?B?udqzsr/r?=<zest159@naver.com>
Importance: normal
X-Priority: 3 (Normal)
Date: Sat, 23 Apr 2011 02:43:25 +0900
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

---------Boundary-Naver=_83992f72671e425029a17dd38cd217f5
Content-Type: text/plain;
	 charset="EUC-KR"
Content-Transfer-Encoding: base64

CkhlbGxvLApJIGFtIHRyeWluZyB0byBhZGQgc3BhdGlhbCBzZWFyY2ggZnVuY3Rpb25hbGl0eSB0
byBteSBhcHBsaWNhdGlvbiwgYnV0IGhhdmluZyBhIHRyb3VibGUgcmVnYXJkaW5nIGx1Y2VuZSdz
IHNwYXRpYWwgc2VhcmNoLgpJdCdzIHZlcnkgc2ltcGxlIGZ1bmN0aW9uYWxpdHk6IHNlYXJjaGlu
ZyBhbGwgaXRlbXMgd2l0aGluIGdpdmVuIHJhZGl1cyBmcm9tIGdpdmVuIHN0YXJ0aW5nIHBvaW50
LgpNeSBjdXJyZW50IHN0YXJ0aW5nIGxvY2F0aW9uIGlzIDM3LjUwNDYwMiwxMjcuMDQ5MDMxLgpX
aGVuIEkgc2V0IHNlYXJjaCByYWRpdXMgbGVzcyB0aGFuIDEwIG1pbGVzLCBzZWFyY2ggcmVzdWx0
cyBhcmUgb2theS4gVGhlIHNob3J0ZXIgdGhlIHNlYXJjaCByYWRpdXMgYmVjb21lcywgdGhlIGxl
c3MgdGhlIHNlYXJjaCByZXN1bHRzIGFyZS4KQnV0IGFmdGVyIHNlYXJjaCByYWRpdXMgYmVjb21l
cyBsYXJnZXIgdGhhbiAxMCBtaWxlcywgbm90aGluZyBpcyBzZWFyY2hlZC4KQW5kIHRoaXMgdGhy
ZXNob2xkIHZhbHVlLCBpbiB0aGlzIGNhc2UgMTAgbWlsZXMsIGNoYW5nZXMgYWNjb3JkaW5nIHRv
IHdoZXJlIEkgc2V0IHRoZSBzdGFydGluZyBwb2ludC4KVGhhdCBpcywgaWYgc2VhcmNoIHJhZGl1
cyBiZWNvbWVzIGxhcmdlciB0aGFuIGJlZm9yZSwgYXQgbGVhc3QgdGhlIHNhbWUgbnVtYmVyIG9m
IGl0ZW1zIHNob3VsZCBiZSByZXR1cm5lZCBhcyBiZWZvcmUsIGJ1dCBpdCBpcyBub3QuCkFmdGVy
IHNvbWUgcG9pbnQsIG5vdGhpbmcgcmV0dXJucyBhbmQgc3BhdGlhbCBzZWFyY2ggZG9lcyBub3Qg
c2VlbSB0byB3b3JrIHByb3Blcmx5LgpUaGUgd2VpcmQgdGhpbmcgaXMgdGhhdCBpZiBJIGNoYW5n
ZSB0aGUgc3RhcnRpbmcgbG9jYXRpb24gdG8gc29tZXBsYWNlIGluIFVTIG9yIEdlcm1hbnksIG5v
IHN1Y2ggcHJvYmxlbSBoYXBwZW5zLgpJJ20gY3VycmVudGx5IHVzaW5nIGx1Y2VuZSAyLjkuNCBm
b3Igc29tZSByZWFzb24sIGFuZCBjaGVja2VkIHRoZSBhYm92ZSBwcm9ibGVtIHdpdGggdGhlIHRl
c3QgY2xhc3MsIGphdmEub3JnLmFwYWNoZS5sdWNlbmUuc3BhdGlhbC50aWVyLlRlc3RDYXJ0ZXNp
YW4uCkRvZXMgYW55b25lIGtub3cgdGhlIHJlYXNvbiB3aHkgbHVjZW5lIHdvcmtzIHRoaXMgd2F5
LCBhbmQgaG93IGNhbiBJIHNvbHZlIHRoaXMgcHJvYmxlbT8KVGhhbmtzLApOYXRoYW4K

---------Boundary-Naver=_83992f72671e425029a17dd38cd217f5--


From java-user-return-49456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 18:04:32 2011
Return-Path: <java-user-return-49456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 511081723
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 18:04:32 +0000 (UTC)
Received: (qmail 61369 invoked by uid 500); 22 Apr 2011 18:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61332 invoked by uid 500); 22 Apr 2011 18:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61324 invoked by uid 99); 22 Apr 2011 18:04:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 18:04:30 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FROM_MISSP_EH_MATCH,HTML_FONT_FACE_BAD,HTML_MESSAGE,RFC_ABUSE_POST,SPF_PASS,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zest159@naver.com designates 114.111.32.43 as permitted sender)
Received: from [114.111.32.43] (HELO twsmtp18-2.nm.naver.com) (114.111.32.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Apr 2011 18:04:19 +0000
Received: (qmail 3732 invoked from network); 22 Apr 2011 18:03:53 -0000
Received: from 114.111.40.61 (HELO localhost) (114.111.40.61)
  by twsmtp18-2.nm.naver.com with SMTP; 22 Apr 2011 18:03:53 -0000
MIME-Version: 1.0
Message-Id: <a24eeef08febfccba17a986d3f99c913@tweb31-2.nm>
Content-Type: multipart/alternative;
	boundary="-------Boundary-Naver=_a4656d3db93672c123a71282a5f8b455"
From: =?EUC-KR?B?udqzsr/r?=<zest159@naver.com>
Subject: =?EUC-KR?B?UmU6IEx1Y2VuZSBTcGF0aWFsIFNlYXJjaCBQcm9ibGVtOiBz?= 
	=?EUC-KR?B?ZWFyY2ggcmFkaXVzIHRocmVzaG9sZD8=?= 
Reply-To: =?EUC-KR?B?udqzsr/r?=<zest159@naver.com>
Importance: normal
X-Priority: 3 (Normal)
Date: Sat, 23 Apr 2011 03:03:53 +0900
To: <java-user@lucene.apache.org>
in-reply-to: <f15d3e1ace572afc1677c72d7c43f38e@tweb19-2.nm>
references: <f15d3e1ace572afc1677c72d7c43f38e@tweb19-2.nm>
X-Virus-Checked: Checked by ClamAV on apache.org

---------Boundary-Naver=_a4656d3db93672c123a71282a5f8b455
Content-Type: text/plain;
	 charset="EUC-KR"
Content-Transfer-Encoding: base64

CkJlbG93IGlzIFRlc3RDYXJ0ZXNpYW4gY2xhc3MuIEluIHRoaXMgY2xhc3MsIEkgY2hhbmdlZCBz
dGFydGluZyBwb3NpdGlvbiBhbmQgcHJlZGVmaW5lZCBwb3NpdGlvbnMgaW4gYWRkRGF0YSBtZXRo
b2QgdG8gYmUgYXJvdW5kIDM3LjUwNDYwMiwxMjcuMDQ5MDMxLgpUaGUgcHJvYmxlbSBpcyB0aGF0
IGFzIEkgaW5jcmVhc2UgdGhlIHNlYXJjaCByYWRpdXMsIGFmdGVyIHNvbWUgdGhyZXNob2xkLCBz
cGF0aWFsIHNlYXJjaCByZXR1cm5zIG5vdGhpbmcgd2hlbiBpdCBzaG91bGQgcmV0dXJuIGF0IGxl
YXN0IHRoZSBzYW1lIG51bWJlciBvZiBpdGVtcyBhcyBiZWZvcmUuClRoYW5rcy4KLyoqCiAqIExp
Y2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUg
b3IgbW9yZQogKiBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNF
IGZpbGUgZGlzdHJpYnV0ZWQgd2l0aAogKiB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt
YXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuCiAqIFRoZSBBU0YgbGljZW5zZXMg
dGhpcyBmaWxlIHRvIFlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wCiAq
ICh0aGUgIkxpY2Vuc2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29t
cGxpYW5jZSB3aXRoCiAqIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhl
IExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0Ut
Mi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8g
aW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMg
ZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S
IENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNl
ZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz
aW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIGph
dmEub3JnLmFwYWNoZS5sdWNlbmUuc3BhdGlhbC50aWVyOwppbXBvcnQgamF2YS5pby5JT0V4Y2Vw
dGlvbjsKaW1wb3J0IGphdmEudXRpbC5MaW5rZWRMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7
CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3RDYXNlOwpp
bXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMuV2hpdGVzcGFjZUFuYWx5emVyOwppbXBv
cnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7CmltcG9ydCBvcmcuYXBhY2hl
Lmx1Y2VuZS5kb2N1bWVudC5GaWVsZDsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4Lklu
ZGV4V3JpdGVyOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXI7Cmlt
cG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5UZXJtOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNl
bmUuc2VhcmNoLkhpdHM7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guSW5kZXhTZWFy
Y2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5RdWVyeTsKaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLnNlYXJjaC5Tb3J0OwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNo
LlNvcnRGaWVsZDsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5UZXJtUXVlcnk7Cmlt
cG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guZnVuY3Rpb24uQ3VzdG9tU2NvcmVRdWVyeTsK
aW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5mdW5jdGlvbi5DdXN0b21TY29yZVByb3Zp
ZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLmZ1bmN0aW9uLkZpZWxkU2NvcmVR
dWVyeTsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5mdW5jdGlvbi5GaWVsZFNjb3Jl
UXVlcnkuVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnV0aWwuTnVtZXJpY1V0aWxzOwpp
bXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc3BhdGlhbC5nZW9oYXNoLkdlb0hhc2hVdGlsczsKaW1w
b3J0IG9yZy5hcGFjaGUubHVjZW5lLnNwYXRpYWwudGllci5wcm9qZWN0aW9ucy5DYXJ0ZXNpYW5U
aWVyUGxvdHRlcjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNwYXRpYWwudGllci5wcm9qZWN0
aW9ucy5JUHJvamVjdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc3BhdGlhbC50aWVyLnBy
b2plY3Rpb25zLlNpbnVzb2lkYWxQcm9qZWN0b3I7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5z
dG9yZS5EaXJlY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5SQU1EaXJlY3Rv
cnk7Ci8qKgogKgogKi8KcHVibGljIGNsYXNzIFRlc3RDYXJ0ZXNpYW4gZXh0ZW5kcyBUZXN0Q2Fz
ZXsKIC8qKgogKiBAcGFyYW0gYXJncwogKi8KIAogcHJpdmF0ZSBEaXJlY3RvcnkgZGlyZWN0b3J5
OwogcHJpdmF0ZSBJbmRleFNlYXJjaGVyIHNlYXJjaGVyOwogLy8gcmVzdG9uIHZhCiBwcml2YXRl
IGRvdWJsZSBsYXQgPSAzOC45NjkzOTg7IAogcHJpdmF0ZSBkb3VibGUgbG5nPSAtNzcuMzg2Mzk4
OwogcHJpdmF0ZSBTdHJpbmcgbGF0RmllbGQgPSAibGF0IjsKIHByaXZhdGUgU3RyaW5nIGxuZ0Zp
ZWxkID0gImxuZyI7CiBwcml2YXRlIExpc3QgY3RwcyA9IG5ldyBMaW5rZWRMaXN0KCk7CiBwcml2
YXRlIFN0cmluZyBnZW9IYXNoUHJlZml4ID0gIl9nZW9IYXNoXyI7CiAKIHByaXZhdGUgSVByb2pl
Y3RvciBwcm9qZWN0ID0gbmV3IFNpbnVzb2lkYWxQcm9qZWN0b3IoKTsKIAogcHJvdGVjdGVkIHZv
aWQgc2V0VXAoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogZGlyZWN0b3J5ID0gbmV3IFJBTURpcmVj
dG9yeSgpOwogSW5kZXhXcml0ZXIgd3JpdGVyID0gbmV3IEluZGV4V3JpdGVyKGRpcmVjdG9yeSwg
bmV3IFdoaXRlc3BhY2VBbmFseXplcigpLCB0cnVlKTsKIAogc2V0VXBQbG90dGVyKCAyLCAxNSk7
CiAKIGFkZERhdGEod3JpdGVyKTsKIAogfQogCiAKIHByaXZhdGUgdm9pZCBzZXRVcFBsb3R0ZXIo
aW50IGJhc2UsIGludCB0b3ApIHsKIAogZm9yICg7IGJhc2UgJmx0Oz0gdG9wOyBiYXNlICsrKXsK
IGN0cHMuYWRkKG5ldyBDYXJ0ZXNpYW5UaWVyUGxvdHRlcihiYXNlLHByb2plY3QsCiBDYXJ0ZXNp
YW5UaWVyUGxvdHRlci5ERUZBTFRfRklFTERfUFJFRklYKSk7CiB9CiB9CiAKIHByaXZhdGUgdm9p
ZCBhZGRQb2ludChJbmRleFdyaXRlciB3cml0ZXIsIFN0cmluZyBuYW1lLCBkb3VibGUgbGF0LCBk
b3VibGUgbG5nKSB0aHJvd3MgSU9FeGNlcHRpb257CiAKIERvY3VtZW50IGRvYyA9IG5ldyBEb2N1
bWVudCgpOwogCiBkb2MuYWRkKG5ldyBGaWVsZCgibmFtZSIsIG5hbWUsRmllbGQuU3RvcmUuWUVT
LCBGaWVsZC5JbmRleC5UT0tFTklaRUQpKTsKIAogLy8gY29udmVydCB0aGUgbGF0IC8gbG9uZyB0
byBsdWNlbmUgZmllbGRzCiBkb2MuYWRkKG5ldyBGaWVsZChsYXRGaWVsZCwgTnVtZXJpY1V0aWxz
LmRvdWJsZVRvUHJlZml4Q29kZWQobGF0KSxGaWVsZC5TdG9yZS5ZRVMsIEZpZWxkLkluZGV4LlVO
X1RPS0VOSVpFRCkpOwogZG9jLmFkZChuZXcgRmllbGQobG5nRmllbGQsIE51bWVyaWNVdGlscy5k
b3VibGVUb1ByZWZpeENvZGVkKGxuZyksRmllbGQuU3RvcmUuWUVTLCBGaWVsZC5JbmRleC5VTl9U
T0tFTklaRUQpKTsKIAogLy8gYWRkIGEgZGVmYXVsdCBtZXRhIGZpZWxkIHRvIG1ha2Ugc2VhcmNo
aW5nIGFsbCBkb2N1bWVudHMgZWFzeSAKIGRvYy5hZGQobmV3IEZpZWxkKCJtZXRhZmlsZSIsICJk
b2MiLEZpZWxkLlN0b3JlLllFUywgRmllbGQuSW5kZXguVE9LRU5JWkVEKSk7CiAKIGludCBjdHBz
aXplID0gY3Rwcy5zaXplKCk7CiBmb3IgKGludCBpID0wOyBpICZsdDsgY3Rwc2l6ZTsgaSsrKXsK
IENhcnRlc2lhblRpZXJQbG90dGVyIGN0cCA9IGN0cHMuZ2V0KGkpOwogZG9jLmFkZChuZXcgRmll
bGQoY3RwLmdldFRpZXJGaWVsZE5hbWUoKSwgCiBOdW1lcmljVXRpbHMuZG91YmxlVG9QcmVmaXhD
b2RlZChjdHAuZ2V0VGllckJveElkKGxhdCxsbmcpKSwKIEZpZWxkLlN0b3JlLllFUywgCiBGaWVs
ZC5JbmRleC5OT19OT1JNUykpOwogCiBkb2MuYWRkKG5ldyBGaWVsZChnZW9IYXNoUHJlZml4LCBH
ZW9IYXNoVXRpbHMuZW5jb2RlKGxhdCxsbmcpLCAKIEZpZWxkLlN0b3JlLllFUywgCiBGaWVsZC5J
bmRleC5OT19OT1JNUykpOwogfQogd3JpdGVyLmFkZERvY3VtZW50KGRvYyk7CiAKIH0KIAogCiAK
IHByaXZhdGUgdm9pZCBhZGREYXRhKEluZGV4V3JpdGVyIHdyaXRlcikgdGhyb3dzIElPRXhjZXB0
aW9uIHsKIGFkZFBvaW50KHdyaXRlciwiTWNDb3JtaWNrICZhbXA7IFNjaG1pY2sncyBTZWFmb29k
IFJlc3RhdXJhbnQiLDM4Ljk1NzkwMDAsLTc3LjM1NzIwMDApOwogYWRkUG9pbnQod3JpdGVyLCJK
aW1teSdzIE9sZCBUb3duIFRhdmVybiIsMzguOTY5MDAwMCwtNzcuMzg2MjAwMCk7CiBhZGRQb2lu
dCh3cml0ZXIsIk5lZCBEZXZpbmUncyIsMzguOTUxMDAwMCwtNzcuNDEwNzAwMCk7CiBhZGRQb2lu
dCh3cml0ZXIsIk9sZCBCcm9ndWUgSXJpc2ggUHViIiwzOC45OTU1MDAwLC03Ny4yODg0MDAwKTsK
IGFkZFBvaW50KHdyaXRlciwiQWxmIExheWxhaCBXYSBMYXlsYWgiLDM4Ljg5NTYwMDAsLTc3LjQy
NTgwMDApOwogYWRkUG9pbnQod3JpdGVyLCJTdWxseSdzIFJlc3RhdXJhbnQgJmFtcDsgU3VwcGVy
IiwzOC45MDAzMDAwLC03Ny40NDY3MDAwKTsKIGFkZFBvaW50KHdyaXRlciwiVEdJRnJpZGF5Iiwz
OC44NzI1MDAwLC03Ny4zODI5MDAwKTsKIGFkZFBvaW50KHdyaXRlciwiUG90b21hYyBTd2luZyBE
YW5jZSBDbHViIiwzOC45MDI3MDAwLC03Ny4yNjM5MDAwKTsKIGFkZFBvaW50KHdyaXRlciwiV2hp
dGUgVGlnZXIgUmVzdGF1cmFudCIsMzguOTAyNzAwMCwtNzcuMjYzODAwMCk7CiBhZGRQb2ludCh3
cml0ZXIsIkphbW1pbicgSmF2YSIsMzguOTAzOTAwMCwtNzcuMjYyMjAwMCk7CiBhZGRQb2ludCh3
cml0ZXIsIlBvdG9tYWMgU3dpbmcgRGFuY2UgQ2x1YiIsMzguOTAyNzAwMCwtNzcuMjYzOTAwMCk7
CiBhZGRQb2ludCh3cml0ZXIsIldpc2VBY3JlcyBDb21lZHkgQ2x1YiIsMzguOTI0ODAwMCwtNzcu
MjM0NDAwMCk7CiBhZGRQb2ludCh3cml0ZXIsIkdsZW4gRWNobyBTcGFuaXNoIEJhbGxyb29tIiwz
OC45NjkxMDAwLC03Ny4xNDAwMDAwKTsKIGFkZFBvaW50KHdyaXRlciwiV2hpdGxvdydzIG9uIFdp
bHNvbiIsMzguODg4OTAwMCwtNzcuMDkyNjAwMCk7CiBhZGRQb2ludCh3cml0ZXIsIklvdGEgQ2x1
YiBhbmQgQ2FmZSIsMzguODg5MDAwMCwtNzcuMDkyMzAwMCk7CiBhZGRQb2ludCh3cml0ZXIsIkhp
bHRvbiBXYXNoaW5ndG9uIEVtYmFzc3kgUm93IiwzOC45MTAzMDAwLC03Ny4wNDUxMDAwKTsKIGFk
ZFBvaW50KHdyaXRlciwiSG9yc2VGZWF0aGVycywgQmFyICYgR3JpbGwiLCAzOS4wMTIyMDAwMDAw
MDAwMSwgLTc3LjM5NDIpOwogCiB3cml0ZXIuY29tbWl0KCk7CiB3cml0ZXIuY2xvc2UoKTsKIH0K
IAogcHVibGljIHZvaWQgdGVzdFJhbmdlKCkgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnZhbGlkR2Vv
RXhjZXB0aW9uIHsKIHNlYXJjaGVyID0gbmV3IEluZGV4U2VhcmNoZXIoZGlyZWN0b3J5KTsKIGZp
bmFsIGRvdWJsZVtdIG1pbGVzVG9UZXN0ID0gbmV3IGRvdWJsZVtdIHs2LjAsIDAuNSwgMC4wMDEs
IDAuMH07CiBmaW5hbCBpbnRbXSBleHBlY3RlZCA9IG5ldyBpbnRbXSB7NywgMSwgMCwgMH07CiBm
b3IoaW50IHg9MDt4Zm9udD4KIAogZmluYWwgZG91YmxlIG1pbGVzID0gbWlsZXNUb1Rlc3RbeF07
CiAKIC8vIGNyZWF0ZSBhIGRpc3RhbmNlIHF1ZXJ5CiBmaW5hbCBEaXN0YW5jZVF1ZXJ5QnVpbGRl
ciBkcSA9IG5ldyBEaXN0YW5jZVF1ZXJ5QnVpbGRlcihsYXQsIGxuZywgbWlsZXMsIAogbGF0Rmll
bGQsIGxuZ0ZpZWxkLCBDYXJ0ZXNpYW5UaWVyUGxvdHRlci5ERUZBTFRfRklFTERfUFJFRklYLCB0
cnVlKTsKIAogU3lzdGVtLm91dC5wcmludGxuKGRxKTsKIC8vY3JlYXRlIGEgdGVybSBxdWVyeSB0
byBzZWFyY2ggYWdhaW5zdCBhbGwgZG9jdW1lbnRzCiBRdWVyeSB0cSA9IG5ldyBUZXJtUXVlcnko
bmV3IFRlcm0oIm1ldGFmaWxlIiwgImRvYyIpKTsKIAogRmllbGRTY29yZVF1ZXJ5IGZzUXVlcnkg
PSBuZXcgRmllbGRTY29yZVF1ZXJ5KCJnZW9fZGlzdGFuY2UiLCBUeXBlLkZMT0FUKTsKIAogQ3Vz
dG9tU2NvcmVRdWVyeSBjdXN0b21TY29yZSA9IG5ldyBDdXN0b21TY29yZVF1ZXJ5KGRxLmdldFF1
ZXJ5KHRxKSxmc1F1ZXJ5KXsKIEBPdmVycmlkZQogcHJvdGVjdGVkIEN1c3RvbVNjb3JlUHJvdmlk
ZXIgZ2V0Q3VzdG9tU2NvcmVQcm92aWRlcihJbmRleFJlYWRlciByZWFkZXIpIHsKIHJldHVybiBu
ZXcgQ3VzdG9tU2NvcmVQcm92aWRlcihyZWFkZXIpIHsKIEBPdmVycmlkZSAvLyBUT0RPOiBicm9r
ZW4sIGFzIHJlYWRlciBpcyBub3QgdXNlZCEKIHB1YmxpYyBmbG9hdCBjdXN0b21TY29yZShpbnQg
ZG9jLCBmbG9hdCBzdWJRdWVyeVNjb3JlLCBmbG9hdCB2YWxTcmNTY29yZSl7CiAvL1N5c3RlbS5v
dXQucHJpbnRsbihkb2MpOwogaWYgKGRxLmRpc3RhbmNlRmlsdGVyLmdldERpc3RhbmNlKGRvYykg
PT0gbnVsbCkKIHJldHVybiAwOwogCiBkb3VibGUgZGlzdGFuY2UgPSBkcS5kaXN0YW5jZUZpbHRl
ci5nZXREaXN0YW5jZShkb2MpOwogLy8gYm9vc3Qgc2NvcmUgc2hvdWxkbid0IGV4Y2VlZCAxCiBp
ZiAoZGlzdGFuY2UgJmx0OyAxLjBkKQogZGlzdGFuY2UgPSAxLjBkOwogLy9ib29zdCBieSBkaXN0
YW5jZSBpcyBpbnZlcnRseSBwcm9wb3J0aW9uYWwgdG8KIC8vIHRvIGRpc3RhbmNlIGZyb20gY2Vu
dGVyIHBvaW50IHRvIGxvY2F0aW9uCiBmbG9hdCBzY29yZSA9IG5ldyBGbG9hdCgobWlsZXMgLSBk
aXN0YW5jZSkgLyBtaWxlcyApLmZsb2F0VmFsdWUoKTsKIHJldHVybiBzY29yZSAqIHN1YlF1ZXJ5
U2NvcmU7CiB9CiB9OwogfQogfTsKIC8vIENyZWF0ZSBhIGRpc3RhbmNlIHNvcnQKIC8vIEFzIHRo
ZSByYWRpdXMgZmlsdGVyIGhhcyBwZXJmb3JtZWQgdGhlIGRpc3RhbmNlIGNhbGN1bGF0aW9ucwog
Ly8gYWxyZWFkeSwgcGFzcyBpbiB0aGUgZmlsdGVyIHRvIHJldXNlIHRoZSByZXN1bHRzLgogLy8g
CiBEaXN0YW5jZUZpZWxkQ29tcGFyYXRvclNvdXJjZSBkc29ydCA9IG5ldyBEaXN0YW5jZUZpZWxk
Q29tcGFyYXRvclNvdXJjZShkcS5kaXN0YW5jZUZpbHRlcik7CiBTb3J0IHNvcnQgPSBuZXcgU29y
dChuZXcgU29ydEZpZWxkKCJmb28iLCBkc29ydCxmYWxzZSkpOwogCiAvLyBQZXJmb3JtIHRoZSBz
ZWFyY2gsIHVzaW5nIHRoZSB0ZXJtIHF1ZXJ5LCB0aGUgc2VyaWFsIGNoYWluIGZpbHRlciwgYW5k
IHRoZQogLy8gZGlzdGFuY2Ugc29ydAogSGl0cyBoaXRzID0gc2VhcmNoZXIuc2VhcmNoKGN1c3Rv
bVNjb3JlLG51bGwsc29ydCk7CiBpbnQgcmVzdWx0cyA9IGhpdHMubGVuZ3RoKCk7CiAKIC8vIEdl
dCBhIGxpc3Qgb2YgZGlzdGFuY2VzIAogTWFwIGRpc3RhbmNlcyA9IGRxLmRpc3RhbmNlRmlsdGVy
LmdldERpc3RhbmNlcygpOwogCiAvLyBkaXN0YW5jZXMgY2FsY3VsYXRlZCBmcm9tIGZpbHRlciBm
aXJzdCBwYXNzIG11c3QgYmUgbGVzcyB0aGFuIHRvdGFsCiAvLyBkb2NzLCBmcm9tIHRoZSBhYm92
ZSB0ZXN0IG9mIDIwIGl0ZW1zLCAxMiB3aWxsIGNvbWUgZnJvbSB0aGUgYm91bmRhcnkgYm94CiAv
LyBmaWx0ZXIsIGJ1dCBvbmx5IDUgYXJlIGFjdHVhbGx5IGluIHRoZSByYWRpdXMgb2YgdGhlIHJl
c3VsdHMuCiAKIC8vIE5vdGUgQm91bmRhcnkgQm94IGZpbHRlcmluZywgaXMgbm90IGFjY3VyYXRl
IGVub3VnaCBmb3IgbW9zdCBzeXN0ZW1zLgogCiAKIFN5c3RlbS5vdXQucHJpbnRsbigiRGlzdGFu
Y2UgRmlsdGVyIGZpbHRlcmVkOiAiICsgZGlzdGFuY2VzLnNpemUoKSk7CiBTeXN0ZW0ub3V0LnBy
aW50bG4oIlJlc3VsdHM6ICIgKyByZXN1bHRzKTsKIFN5c3RlbS5vdXQucHJpbnRsbigiPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT0iKTsKIFN5c3RlbS5vdXQucHJpbnRsbigiRGlzdGFuY2Vz
IHNob3VsZCBiZSA3ICIrIGRpc3RhbmNlcy5zaXplKCkpOwogU3lzdGVtLm91dC5wcmludGxuKCJS
ZXN1bHRzIHNob3VsZCBiZSA3ICIrIHJlc3VsdHMpOwogYXNzZXJ0RXF1YWxzKGV4cGVjdGVkW3hd
LCBkaXN0YW5jZXMuc2l6ZSgpKTsgLy8gZml4ZWQgYSBzdG9yZSBvZiBvbmx5IG5lZWRlZCBkaXN0
YW5jZXMKIGFzc2VydEVxdWFscyhleHBlY3RlZFt4XSwgcmVzdWx0cyk7CiBkb3VibGUgbGFzdERp
c3RhbmNlID0gMDsKIGZvcihpbnQgaSA9MCA7IGkgJmx0OyByZXN1bHRzOyBpKyspewogRG9jdW1l
bnQgZCA9IGhpdHMuZG9jKGkpOwogCiBTdHJpbmcgbmFtZSA9IGQuZ2V0KCJuYW1lIik7CiBkb3Vi
bGUgcnNMYXQgPSBOdW1lcmljVXRpbHMucHJlZml4Q29kZWRUb0RvdWJsZShkLmdldChsYXRGaWVs
ZCkpOwogZG91YmxlIHJzTG5nID0gTnVtZXJpY1V0aWxzLnByZWZpeENvZGVkVG9Eb3VibGUoZC5n
ZXQobG5nRmllbGQpKTsgCiBEb3VibGUgZ2VvX2Rpc3RhbmNlID0gZGlzdGFuY2VzLmdldChoaXRz
LmlkKGkpKTsKIAogZG91YmxlIGRpc3RhbmNlID0gRGlzdGFuY2VVdGlscy5nZXRJbnN0YW5jZSgp
LmdldERpc3RhbmNlTWkobGF0LCBsbmcsIHJzTGF0LCByc0xuZyk7CiBkb3VibGUgbGxtID0gRGlz
dGFuY2VVdGlscy5nZXRJbnN0YW5jZSgpLmdldExMTURpc3RhbmNlKGxhdCwgbG5nLCByc0xhdCwg
cnNMbmcpOwogU3lzdGVtLm91dC5wcmludGxuKCJOYW1lOiAiKyBuYW1lICsiLCBEaXN0YW5jZSAi
KyBkaXN0YW5jZSk7IC8vKHJlcywgb3J0aG8sIGhhcnZlc2luZSk6IisgZGlzdGFuY2UgKyIgfCIr
IGdlb19kaXN0YW5jZSArInwiKyBsbG0gKyIgfCBzY29yZSAiKyBoaXRzLnNjb3JlKGkpKTsKIGFz
c2VydFRydWUoTWF0aC5hYnMoKGRpc3RhbmNlIC0gbGxtKSkgJmx0OyAxKTsKIGFzc2VydFRydWUo
KGRpc3RhbmNlICZsdDsgbWlsZXMgKSk7CiBhc3NlcnRUcnVlKGdlb19kaXN0YW5jZSA+IGxhc3RE
aXN0YW5jZSk7CiBsYXN0RGlzdGFuY2UgPSBnZW9fZGlzdGFuY2U7CiB9CiB9CiB9CiAKIAogCiBw
dWJsaWMgdm9pZCB0ZXN0R2VvSGFzaFJhbmdlKCkgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnZhbGlk
R2VvRXhjZXB0aW9uIHsKIHNlYXJjaGVyID0gbmV3IEluZGV4U2VhcmNoZXIoZGlyZWN0b3J5KTsK
IAogZmluYWwgZG91YmxlW10gbWlsZXNUb1Rlc3QgPSBuZXcgZG91YmxlW10gezYuMCwgMC41LCAw
LjAwMSwgMC4wfTsKIGZpbmFsIGludFtdIGV4cGVjdGVkID0gbmV3IGludFtdIHs3LCAxLCAwLCAw
fTsKIGZvcihpbnQgeD0wO3hmb250PgogZmluYWwgZG91YmxlIG1pbGVzID0gbWlsZXNUb1Rlc3Rb
eF07CiAKIC8vIGNyZWF0ZSBhIGRpc3RhbmNlIHF1ZXJ5CiBmaW5hbCBEaXN0YW5jZVF1ZXJ5QnVp
bGRlciBkcSA9IG5ldyBEaXN0YW5jZVF1ZXJ5QnVpbGRlcihsYXQsIGxuZywgbWlsZXMsIAogZ2Vv
SGFzaFByZWZpeCwgQ2FydGVzaWFuVGllclBsb3R0ZXIuREVGQUxUX0ZJRUxEX1BSRUZJWCwgdHJ1
ZSk7CiAKIFN5c3RlbS5vdXQucHJpbnRsbihkcSk7CiAvL2NyZWF0ZSBhIHRlcm0gcXVlcnkgdG8g
c2VhcmNoIGFnYWluc3QgYWxsIGRvY3VtZW50cwogUXVlcnkgdHEgPSBuZXcgVGVybVF1ZXJ5KG5l
dyBUZXJtKCJtZXRhZmlsZSIsICJkb2MiKSk7CiAKIEZpZWxkU2NvcmVRdWVyeSBmc1F1ZXJ5ID0g
bmV3IEZpZWxkU2NvcmVRdWVyeSgiZ2VvX2Rpc3RhbmNlIiwgVHlwZS5GTE9BVCk7CiBDdXN0b21T
Y29yZVF1ZXJ5IGN1c3RvbVNjb3JlID0gbmV3IEN1c3RvbVNjb3JlUXVlcnkodHEsZnNRdWVyeSl7
CiBAT3ZlcnJpZGUKIHByb3RlY3RlZCBDdXN0b21TY29yZVByb3ZpZGVyIGdldEN1c3RvbVNjb3Jl
UHJvdmlkZXIoSW5kZXhSZWFkZXIgcmVhZGVyKSB7CiByZXR1cm4gbmV3IEN1c3RvbVNjb3JlUHJv
dmlkZXIocmVhZGVyKSB7CiBAT3ZlcnJpZGUgLy8gVE9ETzogYnJva2VuLCBhcyByZWFkZXIgaXMg
bm90IHVzZWQhCiBwdWJsaWMgZmxvYXQgY3VzdG9tU2NvcmUoaW50IGRvYywgZmxvYXQgc3ViUXVl
cnlTY29yZSwgZmxvYXQgdmFsU3JjU2NvcmUpewogLy9TeXN0ZW0ub3V0LnByaW50bG4oZG9jKTsK
IGlmIChkcS5kaXN0YW5jZUZpbHRlci5nZXREaXN0YW5jZShkb2MpID09IG51bGwpCiByZXR1cm4g
MDsKIAogZG91YmxlIGRpc3RhbmNlID0gZHEuZGlzdGFuY2VGaWx0ZXIuZ2V0RGlzdGFuY2UoZG9j
KTsKIC8vIGJvb3N0IHNjb3JlIHNob3VsZG4ndCBleGNlZWQgMQogaWYgKGRpc3RhbmNlICZsdDsg
MS4wZCkKIGRpc3RhbmNlID0gMS4wZDsKIC8vYm9vc3QgYnkgZGlzdGFuY2UgaXMgaW52ZXJ0bHkg
cHJvcG9ydGlvbmFsIHRvCiAvLyB0byBkaXN0YW5jZSBmcm9tIGNlbnRlciBwb2ludCB0byBsb2Nh
dGlvbgogZmxvYXQgc2NvcmUgPSAoZmxvYXQpICggKG1pbGVzIC0gZGlzdGFuY2UpIC8gbWlsZXMg
KTsKIHJldHVybiBzY29yZSAqIHN1YlF1ZXJ5U2NvcmU7CiB9CiB9OwogfQogfTsKIC8vIENyZWF0
ZSBhIGRpc3RhbmNlIHNvcnQKIC8vIEFzIHRoZSByYWRpdXMgZmlsdGVyIGhhcyBwZXJmb3JtZWQg
dGhlIGRpc3RhbmNlIGNhbGN1bGF0aW9ucwogLy8gYWxyZWFkeSwgcGFzcyBpbiB0aGUgZmlsdGVy
IHRvIHJldXNlIHRoZSByZXN1bHRzLgogLy8gCiBEaXN0YW5jZUZpZWxkQ29tcGFyYXRvclNvdXJj
ZSBkc29ydCA9IG5ldyBEaXN0YW5jZUZpZWxkQ29tcGFyYXRvclNvdXJjZShkcS5kaXN0YW5jZUZp
bHRlcik7CiBTb3J0IHNvcnQgPSBuZXcgU29ydChuZXcgU29ydEZpZWxkKCJmb28iLCBkc29ydCkp
OwogCiAvLyBQZXJmb3JtIHRoZSBzZWFyY2gsIHVzaW5nIHRoZSB0ZXJtIHF1ZXJ5LCB0aGUgc2Vy
aWFsIGNoYWluIGZpbHRlciwgYW5kIHRoZQogLy8gZGlzdGFuY2Ugc29ydAogSGl0cyBoaXRzID0g
c2VhcmNoZXIuc2VhcmNoKGN1c3RvbVNjb3JlLCBkcS5nZXRGaWx0ZXIoKSk7IC8vLHNvcnQpOwog
aW50IHJlc3VsdHMgPSBoaXRzLmxlbmd0aCgpOwogCiAvLyBHZXQgYSBsaXN0IG9mIGRpc3RhbmNl
cyAKIE1hcCBkaXN0YW5jZXMgPSBkcS5kaXN0YW5jZUZpbHRlci5nZXREaXN0YW5jZXMoKTsKIAog
Ly8gZGlzdGFuY2VzIGNhbGN1bGF0ZWQgZnJvbSBmaWx0ZXIgZmlyc3QgcGFzcyBtdXN0IGJlIGxl
c3MgdGhhbiB0b3RhbAogLy8gZG9jcywgZnJvbSB0aGUgYWJvdmUgdGVzdCBvZiAyMCBpdGVtcywg
MTIgd2lsbCBjb21lIGZyb20gdGhlIGJvdW5kYXJ5IGJveAogLy8gZmlsdGVyLCBidXQgb25seSA1
IGFyZSBhY3R1YWxseSBpbiB0aGUgcmFkaXVzIG9mIHRoZSByZXN1bHRzLgogCiAvLyBOb3RlIEJv
dW5kYXJ5IEJveCBmaWx0ZXJpbmcsIGlzIG5vdCBhY2N1cmF0ZSBlbm91Z2ggZm9yIG1vc3Qgc3lz
dGVtcy4KIAogCiBTeXN0ZW0ub3V0LnByaW50bG4oIkRpc3RhbmNlIEZpbHRlciBmaWx0ZXJlZDog
IiArIGRpc3RhbmNlcy5zaXplKCkpOwogU3lzdGVtLm91dC5wcmludGxuKCJSZXN1bHRzOiAiICsg
cmVzdWx0cyk7CiBTeXN0ZW0ub3V0LnByaW50bG4oIj09PT09PT09PT09PT09PT09PT09PT09PT09
PT09Iik7CiBTeXN0ZW0ub3V0LnByaW50bG4oIkRpc3RhbmNlcyBzaG91bGQgYmUgMTQgIisgZGlz
dGFuY2VzLnNpemUoKSk7CiBTeXN0ZW0ub3V0LnByaW50bG4oIlJlc3VsdHMgc2hvdWxkIGJlIDcg
IisgcmVzdWx0cyk7CiBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRbeF0sIGRpc3RhbmNlcy5zaXplKCkp
OwogYXNzZXJ0RXF1YWxzKGV4cGVjdGVkW3hdLCByZXN1bHRzKTsKIAogZm9yKGludCBpID0wIDsg
aSAmbHQ7IHJlc3VsdHM7IGkrKyl7CiBEb2N1bWVudCBkID0gaGl0cy5kb2MoaSk7CiAKIFN0cmlu
ZyBuYW1lID0gZC5nZXQoIm5hbWUiKTsKIGRvdWJsZSByc0xhdCA9IE51bWVyaWNVdGlscy5wcmVm
aXhDb2RlZFRvRG91YmxlKGQuZ2V0KGxhdEZpZWxkKSk7CiBkb3VibGUgcnNMbmcgPSBOdW1lcmlj
VXRpbHMucHJlZml4Q29kZWRUb0RvdWJsZShkLmdldChsbmdGaWVsZCkpOyAKIERvdWJsZSBnZW9f
ZGlzdGFuY2UgPSBkaXN0YW5jZXMuZ2V0KGhpdHMuaWQoaSkpOwogCiBkb3VibGUgZGlzdGFuY2Ug
PSBEaXN0YW5jZVV0aWxzLmdldEluc3RhbmNlKCkuZ2V0RGlzdGFuY2VNaShsYXQsIGxuZywgcnNM
YXQsIHJzTG5nKTsKIGRvdWJsZSBsbG0gPSBEaXN0YW5jZVV0aWxzLmdldEluc3RhbmNlKCkuZ2V0
TExNRGlzdGFuY2UobGF0LCBsbmcsIHJzTGF0LCByc0xuZyk7CiBTeXN0ZW0ub3V0LnByaW50bG4o
Ik5hbWU6ICIrIG5hbWUgKyIsIERpc3RhbmNlIChyZXMsIG9ydGhvLCBoYXJ2ZXNpbmUpOiIrIGRp
c3RhbmNlICsiIHwiKyBnZW9fZGlzdGFuY2UgKyJ8IisgbGxtICsiIHwgc2NvcmUgIisgaGl0cy5z
Y29yZShpKSk7CiBhc3NlcnRUcnVlKE1hdGguYWJzKChkaXN0YW5jZSAtIGxsbSkpICZsdDsgMSk7
CiBhc3NlcnRUcnVlKChkaXN0YW5jZSAmbHQ7IG1pbGVzICkpOwogCiB9CiB9CiB9Cn0KLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0KRnJvbTogIrnas7K/6yImbHQ7emVzdDE1OUBuYXZlci5jb20m
Z3Q7IApUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnCkNjOiAKU2VudDogMTEtMDQtMjMo
xeQpIDAyOjQzOjI1ClN1YmplY3Q6IEx1Y2VuZSBTcGF0aWFsIFNlYXJjaCBQcm9ibGVtOiBzZWFy
Y2ggcmFkaXVzIHRocmVzaG9sZD8KSGVsbG8sCkkgYW0gdHJ5aW5nIHRvIGFkZCBzcGF0aWFsIHNl
YXJjaCBmdW5jdGlvbmFsaXR5IHRvIG15IGFwcGxpY2F0aW9uLCBidXQgaGF2aW5nIGEgdHJvdWJs
ZSByZWdhcmRpbmcgbHVjZW5lJ3Mgc3BhdGlhbCBzZWFyY2guCkl0J3MgdmVyeSBzaW1wbGUgZnVu
Y3Rpb25hbGl0eTogc2VhcmNoaW5nIGFsbCBpdGVtcyB3aXRoaW4gZ2l2ZW4gcmFkaXVzIGZyb20g
Z2l2ZW4gc3RhcnRpbmcgcG9pbnQuCk15IGN1cnJlbnQgc3RhcnRpbmcgbG9jYXRpb24gaXMgMzcu
NTA0NjAyLDEyNy4wNDkwMzEuCldoZW4gSSBzZXQgc2VhcmNoIHJhZGl1cyBsZXNzIHRoYW4gMTAg
bWlsZXMsIHNlYXJjaCByZXN1bHRzIGFyZSBva2F5LiBUaGUgc2hvcnRlciB0aGUgc2VhcmNoIHJh
ZGl1cyBiZWNvbWVzLCB0aGUgbGVzcyB0aGUgc2VhcmNoIHJlc3VsdHMgYXJlLgpCdXQgYWZ0ZXIg
c2VhcmNoIHJhZGl1cyBiZWNvbWVzIGxhcmdlciB0aGFuIDEwIG1pbGVzLCBub3RoaW5nIGlzIHNl
YXJjaGVkLgpBbmQgdGhpcyB0aHJlc2hvbGQgdmFsdWUsIGluIHRoaXMgY2FzZSAxMCBtaWxlcywg
Y2hhbmdlcyBhY2NvcmRpbmcgdG8gd2hlcmUgSSBzZXQgdGhlIHN0YXJ0aW5nIHBvaW50LgpUaGF0
IGlzLCBpZiBzZWFyY2ggcmFkaXVzIGJlY29tZXMgbGFyZ2VyIHRoYW4gYmVmb3JlLCBhdCBsZWFz
dCB0aGUgc2FtZSBudW1iZXIgb2YgaXRlbXMgc2hvdWxkIGJlIHJldHVybmVkIGFzIGJlZm9yZSwg
YnV0IGl0IGlzIG5vdC4KQWZ0ZXIgc29tZSBwb2ludCwgbm90aGluZyByZXR1cm5zIGFuZCBzcGF0
aWFsIHNlYXJjaCBkb2VzIG5vdCBzZWVtIHRvIHdvcmsgcHJvcGVybHkuClRoZSB3ZWlyZCB0aGlu
ZyBpcyB0aGF0IGlmIEkgY2hhbmdlIHRoZSBzdGFydGluZyBsb2NhdGlvbiB0byBzb21lcGxhY2Ug
aW4gVVMgb3IgR2VybWFueSwgbm8gc3VjaCBwcm9ibGVtIGhhcHBlbnMuCkknbSBjdXJyZW50bHkg
dXNpbmcgbHVjZW5lIDIuOS40IGZvciBzb21lIHJlYXNvbiwgYW5kIGNoZWNrZWQgdGhlIGFib3Zl
IHByb2JsZW0gd2l0aCB0aGUgdGVzdCBjbGFzcywgamF2YS5vcmcuYXBhY2hlLmx1Y2VuZS5zcGF0
aWFsLnRpZXIuVGVzdENhcnRlc2lhbi4KRG9lcyBhbnlvbmUga25vdyB0aGUgcmVhc29uIHdoeSBs
dWNlbmUgd29ya3MgdGhpcyB3YXksIGFuZCBob3cgY2FuIEkgc29sdmUgdGhpcyBwcm9ibGVtPwpU
aGFua3MsCk5hdGhhbgo=

---------Boundary-Naver=_a4656d3db93672c123a71282a5f8b455--


From java-user-return-49457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 22 18:31:49 2011
Return-Path: <java-user-return-49457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1A6E21214
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 22 Apr 2011 18:31:49 +0000 (UTC)
Received: (qmail 2432 invoked by uid 500); 22 Apr 2011 18:31:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2376 invoked by uid 500); 22 Apr 2011 18:31:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2368 invoked by uid 99); 22 Apr 2011 18:31:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 18:31:46 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Apr 2011 18:31:41 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1QDL8S-0005um-8J
	for java-user@lucene.apache.org; Fri, 22 Apr 2011 11:31:20 -0700
Date: Fri, 22 Apr 2011 11:31:20 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1303497080249-2852370.post@n3.nabble.com>
In-Reply-To: <BANLkTim2McU4E1C+YhM26Tk=NKZ671n_qw@mail.gmail.com>
References: <1303437125295-2849776.post@n3.nabble.com> <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com> <1303488206731-2851809.post@n3.nabble.com> <1303489477665-2851898.post@n3.nabble.com> <BANLkTim2McU4E1C+YhM26Tk=NKZ671n_qw@mail.gmail.com>
Subject: Re: New codecs keep Freq skip/omit Pos
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Wow cool ,

I will give that a try!

Thank you!!

Alex

--
View this message in context: http://lucene.472066.n3.nabble.com/New-codecs-keep-Freq-skip-omit-Pos-tp2849776p2852370.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 23 02:03:45 2011
Return-Path: <java-user-return-49458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C6B122B39
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 23 Apr 2011 02:03:45 +0000 (UTC)
Received: (qmail 23498 invoked by uid 500); 23 Apr 2011 02:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23464 invoked by uid 500); 23 Apr 2011 02:03:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23456 invoked by uid 99); 23 Apr 2011 02:03:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Apr 2011 02:03:43 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zest159@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Apr 2011 02:03:33 +0000
Received: by iwr19 with SMTP id 19so1269508iwr.35
        for <java-user@lucene.apache.org>; Fri, 22 Apr 2011 19:03:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=Gb/eC45Jet1wgeUyohgzOApaj6KK864OdZpv4d8HrrI=;
        b=O+6IN5Vi8q1pWrX5iU/aquv1c3KKuR6/ldEGABEA2/vAEgyut0j+YiHLL1mkaKeuCz
         E+2+8mhzpCEHdcD5UsrlOMSv8Duv2HDccXZCOx6cVlOaE5fRx3YWQh7KN/26PuGt3frF
         RSFAPMnbHthYFLOhJdlfvBgBtz3lN8W4VH9f8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=EkDBHgaepS72AC0vLFziyYh1B5yuqoeploXP4UMLQgKn5UlSsYueE769CfWMALTEQ+
         bkEm+czYDCd16kMTHTV+0w+WEfaRzl1bQlP73oJHr2/Kr7j6Z7UIm8VU2ZzCNwLiPF1J
         3BqXThTvP22eq7ruzANzr9eOdv/s0D0SedfFA=
MIME-Version: 1.0
Received: by 10.231.186.11 with SMTP id cq11mr1237851ibb.43.1303524191366;
 Fri, 22 Apr 2011 19:03:11 -0700 (PDT)
Received: by 10.231.206.130 with HTTP; Fri, 22 Apr 2011 19:03:11 -0700 (PDT)
Date: Sat, 23 Apr 2011 11:03:11 +0900
Message-ID: <BANLkTimbaLaDvjGjaTTA0feOkpb_if_8VQ@mail.gmail.com>
Subject: Lucene Spatial Search Problem: search radius threshold?
From: Namyong Park <zest159@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636b2ad3761ef1f04a18c60a4
X-Virus-Checked: Checked by ClamAV on apache.org

--001636b2ad3761ef1f04a18c60a4
Content-Type: text/plain; charset=ISO-8859-1

Hello,


I am trying to add spatial search functionality to my application, but
having a trouble regarding lucene's spatial search.

It's very simple functionality: searching all items within given radius from
given starting point.


My current starting location is 37.504602,127.049031.

When I set search radius less than 10 miles, search results are okay. The
shorter the search radius becomes, the less the search results are.

But after search radius becomes larger than 10 miles, nothing is searched.

And this threshold value, in this case 10 miles, changes according to where
I set the starting point.


That is, if search radius becomes larger than before, at least the same
number of items should be returned as before, but it is not.

After some point, nothing returns and spatial search does not seem to work
properly.

The weird thing is that if I change the starting location to someplace in US
or Germany, no such problem happens.


I'm currently using lucene 2.9.4 for some reason, and checked the above
problem with the test class,
java.org.apache.lucene.spatial.tier.TestCartesian which is attached below.

In this class, I changed starting position and predefined positions
in addData method to be around 37.504602,127.049031.

Again, the problem is that as I increase the search radius, after some
threshold, spatial search returns nothing when it should return at least the
same number of items as before.


Does anyone know the reason why lucene works this way, and how can I solve
this problem?


Thanks,

Nathan


----------------------------------------------------------------------------------------------------------------------------------------------

/**

 * Licensed to the Apache Software Foundation (ASF) under one or more

 * contributor license agreements.  See the NOTICE file distributed with

 * this work for additional information regarding copyright ownership.

 * The ASF licenses this file to You under the Apache License, Version 2.0

 * (the "License"); you may not use this file except in compliance with

 * the License.  You may obtain a copy of the License at

 *

 *     http://www.apache.org/licenses/LICENSE-2.0

 *

 * Unless required by applicable law or agreed to in writing, software

 * distributed under the License is distributed on an "AS IS" BASIS,

 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.

 * See the License for the specific language governing permissions and

 * limitations under the License.

 */

package org.apache.lucene.spatial.tier;


import java.io.IOException;

import java.util.LinkedList;

import java.util.List;

import java.util.Map;


import junit.framework.TestCase;


import org.apache.lucene.analysis.WhitespaceAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;

import org.apache.lucene.index.IndexWriter;

import org.apache.lucene.index.IndexReader;

import org.apache.lucene.index.Term;

import org.apache.lucene.search.Hits;

import org.apache.lucene.search.IndexSearcher;

import org.apache.lucene.search.Query;

import org.apache.lucene.search.Sort;

import org.apache.lucene.search.SortField;

import org.apache.lucene.search.TermQuery;

import org.apache.lucene.search.function.CustomScoreQuery;

import org.apache.lucene.search.function.CustomScoreProvider;

import org.apache.lucene.search.function.FieldScoreQuery;

import org.apache.lucene.search.function.FieldScoreQuery.Type;

import org.apache.lucene.util.NumericUtils;

import org.apache.lucene.spatial.geohash.GeoHashUtils;

import org.apache.lucene.spatial.tier.projections.CartesianTierPlotter;

import org.apache.lucene.spatial.tier.projections.IProjector;

import org.apache.lucene.spatial.tier.projections.SinusoidalProjector;

import org.apache.lucene.store.Directory;

import org.apache.lucene.store.RAMDirectory;



/**

 *

 */

public class TestCartesian extends TestCase{


  /**

   * @param args

   */



  private Directory directory;

  private IndexSearcher searcher;

  // reston va

  private double lat = 38.969398;

  private double lng= -77.386398;

  private String latField = "lat";

  private String lngField = "lng";

  private List<CartesianTierPlotter> ctps = new
LinkedList<CartesianTierPlotter>();

  private String geoHashPrefix = "_geoHash_";



  private IProjector project = new SinusoidalProjector();





  protected void setUp() throws IOException {

    directory = new RAMDirectory();


    IndexWriter writer = new IndexWriter(directory, new
WhitespaceAnalyzer(), true);



    setUpPlotter( 2, 15);



    addData(writer);



  }





  private void setUpPlotter(int base, int top) {



    for (; base <= top; base ++){

      ctps.add(new CartesianTierPlotter(base,project,

          CartesianTierPlotter.DEFALT_FIELD_PREFIX));

    }

  }



  private void addPoint(IndexWriter writer, String name, double lat, double
lng) throws IOException{



    Document doc = new Document();



    doc.add(new Field("name", name,Field.Store.YES, Field.Index.TOKENIZED));



    // convert the lat / long to lucene fields

    doc.add(new Field(latField,
NumericUtils.doubleToPrefixCoded(lat),Field.Store.YES,
Field.Index.UN_TOKENIZED));

    doc.add(new Field(lngField,
NumericUtils.doubleToPrefixCoded(lng),Field.Store.YES,
Field.Index.UN_TOKENIZED));



    // add a default meta field to make searching all documents easy

    doc.add(new Field("metafile", "doc",Field.Store.YES,
Field.Index.TOKENIZED));



    int ctpsize = ctps.size();

    for (int i =0; i < ctpsize; i++){

      CartesianTierPlotter ctp = ctps.get(i);

      doc.add(new Field(ctp.getTierFieldName(),

          NumericUtils.doubleToPrefixCoded(ctp.getTierBoxId(lat,lng)),

          Field.Store.YES,

          Field.Index.NO_NORMS));



      doc.add(new Field(geoHashPrefix, GeoHashUtils.encode(lat,lng),

      Field.Store.YES,

      Field.Index.NO_NORMS));

    }

    writer.addDocument(doc);



  }







  private void addData(IndexWriter writer) throws IOException {

    addPoint(writer,"McCormick &amp; Schmick's Seafood
Restaurant",38.9579000,-77.3572000);

    addPoint(writer,"Jimmy's Old Town Tavern",38.9690000,-77.3862000);

    addPoint(writer,"Ned Devine's",38.9510000,-77.4107000);

    addPoint(writer,"Old Brogue Irish Pub",38.9955000,-77.2884000);

    addPoint(writer,"Alf Laylah Wa Laylah",38.8956000,-77.4258000);

    addPoint(writer,"Sully's Restaurant &amp;
Supper",38.9003000,-77.4467000);

    addPoint(writer,"TGIFriday",38.8725000,-77.3829000);

    addPoint(writer,"Potomac Swing Dance Club",38.9027000,-77.2639000);

    addPoint(writer,"White Tiger Restaurant",38.9027000,-77.2638000);

    addPoint(writer,"Jammin' Java",38.9039000,-77.2622000);

    addPoint(writer,"Potomac Swing Dance Club",38.9027000,-77.2639000);

    addPoint(writer,"WiseAcres Comedy Club",38.9248000,-77.2344000);

    addPoint(writer,"Glen Echo Spanish Ballroom",38.9691000,-77.1400000);

    addPoint(writer,"Whitlow's on Wilson",38.8889000,-77.0926000);

    addPoint(writer,"Iota Club and Cafe",38.8890000,-77.0923000);

    addPoint(writer,"Hilton Washington Embassy Row",38.9103000,-77.0451000);

    addPoint(writer,"HorseFeathers, Bar & Grill", 39.01220000000001,
-77.3942);



    writer.commit();

    writer.close();

  }



  public void testRange() throws IOException, InvalidGeoException {

    searcher = new IndexSearcher(directory);


    final double[] milesToTest = new double[] {6.0, 0.5, 0.001, 0.0};

    final int[] expected = new int[] {7, 1, 0, 0};


    for(int x=0;x<expected.length;x++) {



      final double miles = milesToTest[x];



      // create a distance query

      final DistanceQueryBuilder dq = new DistanceQueryBuilder(lat, lng,
miles,

                                                               latField,
lngField, CartesianTierPlotter.DEFALT_FIELD_PREFIX, true);



      System.out.println(dq);

      //create a term query to search against all documents

      Query tq = new TermQuery(new Term("metafile", "doc"));



      FieldScoreQuery fsQuery = new FieldScoreQuery("geo_distance",
Type.FLOAT);



      CustomScoreQuery customScore = new
CustomScoreQuery(dq.getQuery(tq),fsQuery){

        @Override

        protected CustomScoreProvider getCustomScoreProvider(IndexReader
reader) {

          return new CustomScoreProvider(reader) {

            @Override // TODO: broken, as reader is not used!

            public float customScore(int doc, float subQueryScore, float
valSrcScore){

              //System.out.println(doc);

              if (dq.distanceFilter.getDistance(doc) == null)

                return 0;



              double distance = dq.distanceFilter.getDistance(doc);

              // boost score shouldn't exceed 1

              if (distance < 1.0d)

                distance = 1.0d;

              //boost by distance is invertly proportional to

              // to distance from center point to location

              float score = new Float((miles - distance) / miles
).floatValue();

              return score * subQueryScore;

            }

          };

        }

      };

      // Create a distance sort

      // As the radius filter has performed the distance calculations

      // already, pass in the filter to reuse the results.

      //

      DistanceFieldComparatorSource dsort = new
DistanceFieldComparatorSource(dq.distanceFilter);

      Sort sort = new Sort(new SortField("foo", dsort,false));



      // Perform the search, using the term query, the serial chain filter,
and the

      // distance sort

      Hits hits = searcher.search(customScore,null,sort);


      int results = hits.length();



      // Get a list of distances

      Map<Integer,Double> distances = dq.distanceFilter.getDistances();



      // distances calculated from filter first pass must be less than total

      // docs, from the above test of 20 items, 12 will come from the
boundary box

      // filter, but only 5 are actually in the radius of the results.



      // Note Boundary Box filtering, is not accurate enough for most
systems.





      System.out.println("Distance Filter filtered: " + distances.size());

      System.out.println("Results: " + results);

      System.out.println("=============================");

      System.out.println("Distances should be 7 "+ distances.size());

      System.out.println("Results should be 7 "+ results);


      assertEquals(expected[x], distances.size()); // fixed a store of only
needed distances

      assertEquals(expected[x], results);

      double lastDistance = 0;

      for(int i =0 ; i < results; i++){

        Document d = hits.doc(i);



        String name = d.get("name");

        double rsLat = NumericUtils.prefixCodedToDouble(d.get(latField));

        double rsLng = NumericUtils.prefixCodedToDouble(d.get(lngField));

        Double geo_distance = distances.get(hits.id(i));



        double distance = DistanceUtils.getInstance().getDistanceMi(lat,
lng, rsLat, rsLng);

        double llm = DistanceUtils.getInstance().getLLMDistance(lat, lng,
rsLat, rsLng);

        System.out.println("Name: "+ name +", Distance "+ distance); //(res,
ortho, harvesine):"+ distance +" |"+ geo_distance +"|"+ llm +" | score "+
hits.score(i));

        assertTrue(Math.abs((distance - llm)) < 1);

        assertTrue((distance < miles ));

        assertTrue(geo_distance > lastDistance);

        lastDistance = geo_distance;

      }

    }

  }







  public void testGeoHashRange() throws IOException, InvalidGeoException {

    searcher = new IndexSearcher(directory);



    final double[] milesToTest = new double[] {6.0, 0.5, 0.001, 0.0};

    final int[] expected = new int[] {7, 1, 0, 0};


    for(int x=0;x<expected.length;x++) {

      final double miles = milesToTest[x];



      // create a distance query

      final DistanceQueryBuilder dq = new DistanceQueryBuilder(lat, lng,
miles,


geoHashPrefix, CartesianTierPlotter.DEFALT_FIELD_PREFIX, true);



      System.out.println(dq);

      //create a term query to search against all documents

      Query tq = new TermQuery(new Term("metafile", "doc"));



      FieldScoreQuery fsQuery = new FieldScoreQuery("geo_distance",
Type.FLOAT);

      CustomScoreQuery customScore = new CustomScoreQuery(tq,fsQuery){

        @Override

        protected CustomScoreProvider getCustomScoreProvider(IndexReader
reader) {

          return new CustomScoreProvider(reader) {

            @Override // TODO: broken, as reader is not used!

            public float customScore(int doc, float subQueryScore, float
valSrcScore){

              //System.out.println(doc);

              if (dq.distanceFilter.getDistance(doc) == null)

                return 0;



              double distance = dq.distanceFilter.getDistance(doc);

              // boost score shouldn't exceed 1

              if (distance < 1.0d)

                distance = 1.0d;

              //boost by distance is invertly proportional to

              // to distance from center point to location

              float score = (float) ( (miles - distance) / miles );

              return score * subQueryScore;

            }

          };

        }

      };

      // Create a distance sort

      // As the radius filter has performed the distance calculations

      // already, pass in the filter to reuse the results.

      //

      DistanceFieldComparatorSource dsort = new
DistanceFieldComparatorSource(dq.distanceFilter);

      Sort sort = new Sort(new SortField("foo", dsort));



      // Perform the search, using the term query, the serial chain filter,
and the

      // distance sort

      Hits hits = searcher.search(customScore, dq.getFilter()); //,sort);


      int results = hits.length();



      // Get a list of distances

      Map<Integer,Double> distances = dq.distanceFilter.getDistances();



      // distances calculated from filter first pass must be less than total

      // docs, from the above test of 20 items, 12 will come from the
boundary box

      // filter, but only 5 are actually in the radius of the results.



      // Note Boundary Box filtering, is not accurate enough for most
systems.





      System.out.println("Distance Filter filtered: " + distances.size());

      System.out.println("Results: " + results);

      System.out.println("=============================");

      System.out.println("Distances should be 14 "+ distances.size());

      System.out.println("Results should be 7 "+ results);


      assertEquals(expected[x], distances.size());

      assertEquals(expected[x], results);



      for(int i =0 ; i < results; i++){

        Document d = hits.doc(i);



        String name = d.get("name");

        double rsLat = NumericUtils.prefixCodedToDouble(d.get(latField));

        double rsLng = NumericUtils.prefixCodedToDouble(d.get(lngField));

        Double geo_distance = distances.get(hits.id(i));



        double distance = DistanceUtils.getInstance().getDistanceMi(lat,
lng, rsLat, rsLng);

        double llm = DistanceUtils.getInstance().getLLMDistance(lat, lng,
rsLat, rsLng);

        System.out.println("Name: "+ name +", Distance (res, ortho,
harvesine):"+ distance +" |"+ geo_distance +"|"+ llm +" | score "+
hits.score(i));

        assertTrue(Math.abs((distance - llm)) < 1);

        assertTrue((distance < miles ));



      }

    }

  }

}

--001636b2ad3761ef1f04a18c60a4--

From java-user-return-49459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 23 18:06:30 2011
Return-Path: <java-user-return-49459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B77CF2A5A
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 23 Apr 2011 18:06:30 +0000 (UTC)
Received: (qmail 26059 invoked by uid 500); 23 Apr 2011 18:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26000 invoked by uid 500); 23 Apr 2011 18:06:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25992 invoked by uid 99); 23 Apr 2011 18:06:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Apr 2011 18:06:27 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=HTML_MESSAGE,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Apr 2011 18:06:22 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1QDhDV-0005c5-IP
	for java-user@lucene.apache.org; Sat, 23 Apr 2011 11:06:01 -0700
Date: Sat, 23 Apr 2011 11:06:01 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1303581961564-2855554.post@n3.nabble.com>
In-Reply-To: <1303497080249-2852370.post@n3.nabble.com>
References: <1303437125295-2849776.post@n3.nabble.com> <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com> <1303488206731-2851809.post@n3.nabble.com> <1303489477665-2851898.post@n3.nabble.com> <BANLkTim2McU4E1C+YhM26Tk=NKZ671n_qw@mail.gmail.com> <1303497080249-2852370.post@n3.nabble.com>
Subject: Re: New codecs keep Freq skip/omit Pos
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10937_7526164.1303581961565"

------=_Part_10937_7526164.1303581961565
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi Robert,


the adapted codec is running but it seems to be incredible slow. Will take
some time ;)
Here are some performance results:


 
	 
	 
		
 
				Indexing scheme 
				Index Size 
				Avg. Query performance 
				Max. Query Performance 
		 
		
 
				PforDelta2 W Freq W Pos 
				20.6 GB (3,3 GB w/o .pos) 
				81.97 ms 
				1295 ms 
		 
		
 
				PforDelta2 W/O Freq W/O Pos 
				1.6 GB 
				63.33 ms 
				766 ms 
		 
		
 
				Standard 4.0 W Freq W Pos 
				28.1 GB (8,1 GB w/o .prx) 
				77.71 ms 
				978 ms 
		 
		
 
				Standard 4.0 W/O Freq W/O Pos 
				6.2 GB 
				59.93 ms 
				718 ms 
		 
		
 
				Standard 3.0 W Freq W Pos 
				28.1 GB (8,1 GB w/o .prx) 
				71.41 ms 
				978 ms 
		 
		
 
				Standard 3.0 WO Freq WO Pos 
				6.2 GB 
				72.72 ms 
				 845 ms 
		 
		
 
				PforDelta W Freq W Pos 
				22 GB (5 GB w/o .pos) 
				67.98 ms 
				783 ms 
		 
		
 
				PforDelta W/O Freq W/O Pos 
				3.1 GB 
				56.08 ms 
				596 ms 
		 
		
 
				Huffman BL10 W Freq W/O Pos 
				2.6 GB 
				216.29 ms (Mem 14 ms) 
				1338 ms 
		 
 
 
I am a little bit curious about the Lucene 3.0 performance results because
the larger index seems to
work faster?!? I already ran the test several times. Are my results
realistic at all? I thought PForDelta/2 would outperform the standard index
implementations in query processing. 


The last result is my own implementation. I am still looking to get it
smaller because I think I can improve compression further. For indexing I
use PForDelta2 in combination with payloads. Those are causing the higher
runtimes. In memory it looks nice. The gap between my solution and PForDelta
is already 700 MB. I would say it is an improvement. :D I will have a look
at it again after I got an index with your adapted implementation.


I still have another question. The basic idea in my implementation is to
create a "Two-Level" index structure. It is specialized for versioned
document collections. On the first level I create a posting list entry for a
document whenever a term occurs in one or more of its versions. The second
level holds corresponding term frequency informations. Is it possible to
build such a structure by creating a codec? For query processing it should
filter per boolean query on the first level and only fetch information from
the second level when the document is in the intersection of the first
level. At the moment I use payloads to "simulate" a two-level structure.
Normally all payloads corresponding to a query get fetched, right?


If this structure would be possible there are several more implementations
with promising results (Two-Level Diff/MSA in this paper
http://cis.poly.edu/suel/papers/version.pdf).

Regards Alex



--
View this message in context: http://lucene.472066.n3.nabble.com/New-codecs-keep-Freq-skip-omit-Pos-tp2849776p2855554.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_10937_7526164.1303581961565--

From java-user-return-49460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 23 18:25:43 2011
Return-Path: <java-user-return-49460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7272E2169
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 23 Apr 2011 18:25:43 +0000 (UTC)
Received: (qmail 36218 invoked by uid 500); 23 Apr 2011 18:25:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36169 invoked by uid 500); 23 Apr 2011 18:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36161 invoked by uid 99); 23 Apr 2011 18:25:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Apr 2011 18:25:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Apr 2011 18:25:35 +0000
Received: by bwz8 with SMTP id 8so1615411bwz.35
        for <java-user@lucene.apache.org>; Sat, 23 Apr 2011 11:25:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=vttUbzCGWeaakRXhnHicKyD8tIuvsgQAp/EPSsaVrTk=;
        b=jluO3S+XbH8TY9nxdsXIyDxjiLI0NkLMGTB94KA+hlhyUOfcxhUeBCoPPzsWQTiuCl
         QO4FWumKk0iMDwzl8jeSm1SQW5o0CVa1LK6RwhiPxr2StFKuX36kIJYRGAH+FKjNVtvm
         mnIveHqv6KsBWZRXJd2uBFvJhILH9lwUEX4xk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=JQy1G6I+JH65sd7k1E0tM2vf1lEca3XDUPiyS+tbVtesIuCYOucXwRXY9MHVu0UxGO
         4yIKNA7QKB4DXk9pHrVOviD/PwS9fuf3NobX4Y2a8OTk+x+48owQrNZmU+QmrW0P0HdF
         +4kUXpDx6R3QS/wzYp3AAsIqDQiuvNtYHYR1c=
Received: by 10.204.84.166 with SMTP id j38mr1934362bkl.84.1303583114265; Sat,
 23 Apr 2011 11:25:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Sat, 23 Apr 2011 11:24:54 -0700 (PDT)
In-Reply-To: <1303581961564-2855554.post@n3.nabble.com>
References: <1303437125295-2849776.post@n3.nabble.com> <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com>
 <1303488206731-2851809.post@n3.nabble.com> <1303489477665-2851898.post@n3.nabble.com>
 <BANLkTim2McU4E1C+YhM26Tk=NKZ671n_qw@mail.gmail.com> <1303497080249-2852370.post@n3.nabble.com>
 <1303581961564-2855554.post@n3.nabble.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Sat, 23 Apr 2011 14:24:54 -0400
Message-ID: <BANLkTikE-yNNm9RNKHkv1Krt-Do3S104UA@mail.gmail.com>
Subject: Re: New codecs keep Freq skip/omit Pos
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Sat, Apr 23, 2011 at 2:06 PM, Alex vB <mail@avomberg.de> wrote:
>
> I am a little bit curious about the Lucene 3.0 performance results because
> the larger index seems to
> work faster?!? I already ran the test several times. Are my results
> realistic at all? I thought PForDelta/2 would outperform the standard index
> implementations in query processing.

it depends upon the type of query.. what queries are you using for
this benchmarking and how are you benchmarking?
FYI: for benchmarking standard query types with wikipedia you might be
interested in http://code.google.com/a/apache-extras.org/p/luceneutil/

> The last result is my own implementation. I am still looking to get it
> smaller because I think I can improve compression further. For indexing I
> use PForDelta2 in combination with payloads. Those are causing the higher
> runtimes. In memory it looks nice. The gap between my solution and PForDelta
> is already 700 MB. I would say it is an improvement. :D I will have a look
> at it again after I got an index with your adapted implementation.

wait, you are indexing payloads for your tests with these other codecs
when it says "W POS" ?

keep in mind that even adding a single payload to your index slows
down the decompression of the positions tremendously, because payload
lengths are intertwined with the positions. For block codecs payloads
really need to be done differently so that blocks of positions are
really just blocks of positions. This hasn't yet been fixed for the
sep nor the fixed layouts, so if you add any payloads, and then
benchmark positional queries then the results are not realistic.

> Normally all payloads corresponding to a query get fetched, right?

No they do not, only if you use a payload based query such as
PayloadTermQuery. Normal non-positional queries like TermQuery and
even normal positional queries like PhraseQuery don't fetch payloads
at all...

>From the description of what you are doing I don't understand how
payloads fit in because they are per-position? But, I haven't had the
time to digest the paper you sent yet.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 23 20:40:12 2011
Return-Path: <java-user-return-49461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0A6B1258E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 23 Apr 2011 20:40:12 +0000 (UTC)
Received: (qmail 89043 invoked by uid 500); 23 Apr 2011 20:40:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89002 invoked by uid 500); 23 Apr 2011 20:40:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88994 invoked by uid 99); 23 Apr 2011 20:40:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Apr 2011 20:40:09 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Apr 2011 20:40:04 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1QDjcG-0007lR-2O
	for java-user@lucene.apache.org; Sat, 23 Apr 2011 13:39:44 -0700
Date: Sat, 23 Apr 2011 13:39:44 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1303591184068-2856054.post@n3.nabble.com>
In-Reply-To: <BANLkTikE-yNNm9RNKHkv1Krt-Do3S104UA@mail.gmail.com>
References: <1303437125295-2849776.post@n3.nabble.com> <BANLkTi=YZGnLWj6jBiHLPixhCG8Mrc4-Tw@mail.gmail.com> <1303488206731-2851809.post@n3.nabble.com> <1303489477665-2851898.post@n3.nabble.com> <BANLkTim2McU4E1C+YhM26Tk=NKZ671n_qw@mail.gmail.com> <1303497080249-2852370.post@n3.nabble.com> <1303581961564-2855554.post@n3.nabble.com> <BANLkTikE-yNNm9RNKHkv1Krt-Do3S104UA@mail.gmail.com>
Subject: Re: New codecs keep Freq skip/omit Pos
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

> it depends upon the type of query.. what queries are you using for
> this benchmarking and how are you benchmarking?
> FYI: for benchmarking standard query types with wikipedia you might be
> interested in http://code.google.com/a/apache-extras.org/p/luceneutil/

I have 10000 queries from a AOL data set where the followed link lead to
wikipedia.
I benchmark by warming up the indexSearcher with 5000 and perform the test
with the remaining 5000 queries. I just measure the time needed to execute
the queries. I use QueryParser.

> wait, you are indexing payloads for your tests with these other codecs
> when it says "W POS" ?

No only my last implementation uses payloads. All others not. Therefore I
use a payload aware query for Huffman.

> keep in mind that even adding a single payload to your index slows
> down the decompression of the positions tremendously, because payload
> lengths are intertwined with the positions. For block codecs payloads
> really need to be done differently so that blocks of positions are
> really just blocks of positions. This hasn't yet been fixed for the
> sep nor the fixed layouts, so if you add any payloads, and then
> benchmark positional queries then the results are not realistic.

Oh I know that payloads slow down query processing but I wasn't aware of the
block codec problem. I suggest you mean with not realistic they will be
slower? Some numbers for Huffman:
20 Bytes segements.gen
234.6 KB fdt
1.8 MB fdx
20 bytes fnm
626.1 MB pos
1.7 GB pyl
17.8 MB skp
39.8 MB tib
2028.5 KB tiv
268 Bytes Segments_2
214.6 MB doc

I used here for query processing PayloadQueryParser and adapt the similarity
according to my payloads.

> No they do not, only if you use a payload based query such as
> PayloadTermQuery. Normal non-positional queries like TermQuery and
> even normal positional queries like PhraseQuery don't fetch payloads
> at all...

Sorry my question was misleading. I already focused on a payload aware
query. When I use one how exactly are the payload informations fetched from
disk? For example if a query needs to read two posting lists. Are all
payloads fetched for them directly or is Lucene at first making a boolean
intersection and then retrieves the payloads for documents within that
intersection?

> From the description of what you are doing I don't understand how
> payloads fit in because they are per-position? But, I haven't had the
> time to digest the paper you sent yet.

I will try to summarize it and how I adapted it to Lucene. 

I already mentioned the idea of two levels for versioned document
collections. When I parse Wikipedia I unite for one article all terms of all
versions. From this word bag I extract each distinct term and index it with
Lucene into one document. Frequency information is now "lost" for the first
level but will be stored on the second. This is what I meant with " The
first level contains a posting for a document when a term occurs at least in
one version". For example if an article has two versions like version1: "a b
b" and version2: "a a a c c" only 'a','b' and 'c' are indexed.

For the second level I collected term frequency information during my
parsing step. Those frequencies are stored as a vector in version order. For
the above example the frequency vector for 'a' would be [1,3].  I store
these vectors as payloads which I see as the "second level". Every distinct
term on first level receives a single frequency vector on its first
position. So I somehow abuse payloads.

For query processing I now need to retrieve the docs and payloads. It would
be optimal to process the posting lists first ignoring payloads and then
fetch payloads (frequency information) for the remaining docs. The term
frequency is then used for ranking purposes. At the moment I pick for
ranking the highest value from the freq vector which corresponds to the most
matching version.

Regards
Alex

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--
View this message in context: http://lucene.472066.n3.nabble.com/New-codecs-keep-Freq-skip-omit-Pos-tp2849776p2856054.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 03:19:50 2011
Return-Path: <java-user-return-49462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 814611043
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 03:19:50 +0000 (UTC)
Received: (qmail 83387 invoked by uid 500); 24 Apr 2011 03:19:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82882 invoked by uid 500); 24 Apr 2011 03:19:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82874 invoked by uid 99); 24 Apr 2011 03:19:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 03:19:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 03:19:39 +0000
Received: by vxa37 with SMTP id 37so1950720vxa.35
        for <java-user@lucene.apache.org>; Sat, 23 Apr 2011 20:19:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=sOkC7lD4fm+egNhg6GtSb61oGWYsNljxGcUfz8Ziy1Y=;
        b=qT8DVE/Ykl2ZnR7VO4TYU4aprsMHkGUKqgPnb5FJ3bb3DxM6tVMtbzPrByyYohZEh/
         QHS/mcQpkw5v09254d4KU4hEwcrYzxtVmV/Jyx/IfzjMn+MofFSdPBa8rX6mqQoHNpur
         mjHgW47NGf+LR8mEJRI0jqlDqFVlylkSsRwTg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=HbzNYmYEVp0AxK6BOPK2lc6WWFIkcUaAASYvZ+2kWQ1RSWqllI1RBZEWNfCrPW5GrC
         2vGuvcHJbXtQDCZ2neSnzIMGHVAhRREjl0lR4rWN9B5X/SzOSAOiyh6kGzv+J4E/eyVK
         hurd7chFKunITnKZqdVAFk7ucijw8SbvV18iE=
MIME-Version: 1.0
Received: by 10.52.70.82 with SMTP id k18mr4113849vdu.286.1303615157860; Sat,
 23 Apr 2011 20:19:17 -0700 (PDT)
Received: by 10.52.168.134 with HTTP; Sat, 23 Apr 2011 20:19:17 -0700 (PDT)
Date: Sun, 24 Apr 2011 11:19:17 +0800
Message-ID: <BANLkTi=4PLqemPzARr6o2EhiNQW+pZPzLg@mail.gmail.com>
Subject: ICU Chinese words
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307cfff468778a04a1a18ebb

--20cf307cfff468778a04a1a18ebb
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

hi=A3=ACall
      I'm working on a Chinese contact search project, I need to transform
the Chinese words to its Pinyin form.

e.g.
 =D6=D0=B9=FA--> zhongguo

The problem I encounter is that for some chinese words which have more than
one transforms, like. =BC=D6-> jia, =BC=D6->gu, ...

I already used the ICUTransformFilter(Han->Latin/Names)=A3=AChow could i ge=
t all
the transforms instead just one of them?

Thanks~

--=20
=CD=F5=CE=A1=CE=A1
Cell: 18911288489
MSN: ww.wang.cs@gmail.com
Blog: http://whisper.eyesay.org
=CE=A7=B2=B1:http://t.sina.com/lolorosa

--20cf307cfff468778a04a1a18ebb--

From java-user-return-49463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 03:47:09 2011
Return-Path: <java-user-return-49463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46CA2C96
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 03:47:09 +0000 (UTC)
Received: (qmail 90325 invoked by uid 500); 24 Apr 2011 03:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90180 invoked by uid 500); 24 Apr 2011 03:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90168 invoked by uid 99); 24 Apr 2011 03:47:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 03:47:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 03:46:57 +0000
Received: by fxm7 with SMTP id 7so1590519fxm.35
        for <java-user@lucene.apache.org>; Sat, 23 Apr 2011 20:46:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=zVQ+IWBr7t7NbaNxpxXtFQCjBIwG1XBRVJO5+KoBzjo=;
        b=JgTcZOWyfOJT3S3V+rTWgI0FNg9G+5pD8U0vdX3l+5QWIFdRB12KpDdzr0g2yrmgf3
         +y60FPywiMyemQdBVtRo7l6Ihshcoguve9Bog2zASbdn6GgqruMXQIhk8sJCb++QAepO
         qwllDS4yeA8b7zjJMqzs0JEWGhHXfV5n7j37M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=BD640lMT/lIotREosBv3SMzy9H4JeizK65bEmkI+02/6cq0Bw/AIHw1BI//8ujCw8A
         HzDt0JGKzLb+Via1D58/0NG2VXzXZ3/x30qG86NJZvGTQjdGMyIV35YNgtt4EJy/W3GG
         nv6CvygwXzKf2Pdg71ue76z63VIkuKmsIY2pw=
Received: by 10.223.55.78 with SMTP id t14mr2939632fag.43.1303616795977; Sat,
 23 Apr 2011 20:46:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.98.198 with HTTP; Sat, 23 Apr 2011 20:45:52 -0700 (PDT)
In-Reply-To: <BANLkTi=4PLqemPzARr6o2EhiNQW+pZPzLg@mail.gmail.com>
References: <BANLkTi=4PLqemPzARr6o2EhiNQW+pZPzLg@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Sat, 23 Apr 2011 23:45:52 -0400
Message-ID: <BANLkTinX9f3CJazeub7Yovuv8iZJTKsH+g@mail.gmail.com>
Subject: Re: ICU Chinese words
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2011/4/23 Weiwei Wang <ww.wang.cs@gmail.com>:
> hi=EF=BC=8Call
> =C2=A0 =C2=A0 =C2=A0I'm working on a Chinese contact search project, I ne=
ed to transform
> the Chinese words to its Pinyin form.
>
> e.g.
> =C2=A0=E4=B8=AD=E5=9B=BD--> zhongguo
>
> The problem I encounter is that for some chinese words which have more th=
an
> one transforms, like. =E8=B4=BE-> jia, =E8=B4=BE->gu, ...
>
> I already used the ICUTransformFilter(Han->Latin/Names)=EF=BC=8Chow could=
 i get all
> the transforms instead just one of them?
>

Maybe use the unihan database (e.g. generate synonyms or something
from it, or make a special filter) ?

http://www.unicode.org/cgi-bin/GetUnihanData.pl?codepoint=3D%E8%B4%BE
kMandarin	JIA3 GU3 JIA4

you can download this as a zip file.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 06:30:36 2011
Return-Path: <java-user-return-49464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6A1781413
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 06:30:36 +0000 (UTC)
Received: (qmail 30270 invoked by uid 500); 24 Apr 2011 06:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29913 invoked by uid 500); 24 Apr 2011 06:30:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29905 invoked by uid 99); 24 Apr 2011 06:30:32 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 06:30:32 +0000
Received: from localhost (HELO [192.168.100.45]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 06:30:32 +0000
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: "Umlaute" getting lost
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51733@Exchange2007.mysigndomain.corp>
Date: Sun, 24 Apr 2011 08:30:23 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <B73F2E12-2B65-477F-A55F-E683F00C8615@apache.org>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51733@Exchange2007.mysigndomain.corp>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)


On Apr 21, 2011, at 5:02 PM, Clemens Wyss wrote:

> I keep my search terms in a dedicated RAMDirectory (the termIndex).=20
> In there I palce all the term of my real index. When putting the terms =
into the=20
> termIndex I can still see [using the debugger] the Umlaute (=E4=F6=FC). =
Unfortunately when searching the=20
> termIndex the documents no more contain these Umlaute.
>=20
> Populating the termIndex:
> termIndex =3D new RAMDirectory();
> IndexWriterConfig config =3D new IndexWriterConfig( Version.LUCENE_31, =
new TermAnalyzer( locale ) );
> termIndexWriter =3D new IndexWriter( termIndex, config );
> TermEnum tEnum =3D realIndexReader.terms();
> while ( tEnum.next() )
> {
> 	Term t =3D tEnum.term();
> 	String termText =3D t.text();
> 	Document termDocument =3D new Document();
> 	Field field =3D new Field( FIELDNAME_TERM, termText, =
Field.Store.YES, Field.Index.ANALYZED );
> 	termDocument.add( field );
> 	// and add term into the index
> 	termIndexWriter.addDocument( termDocument );
> }
> termIndexWriter.commit();
> termIndexWriter.optimize();
> termIndexWriter.close();
>=20
> termIndexReader =3D IndexReader.open( termIndex, true );
> ---------- searching terms
> Query q =3D fuzzy ? new FuzzyQuery( new Term( FIELDNAME_TERM, =
termFilter.toLowerCase() ) ) :
> 					new WildcardQuery( new Term( =
FIELDNAME_TERM, "*" + termFilter.toLowerCase() + "*" ) );
> TopDocs topDocs =3D new IndexSearcher( getTermIndexReader() ).search( =
q, 100 );			=09
> for ( ScoreDoc hit : topDocs.scoreDocs )
> {
> 	Document doc =3D getTermIndexReader().document( hit.doc );
> 	String indexTerm =3D doc.get( FIELDNAME_TERM );
> 	if ( !returnValue.contains( indexTerm  ) )
> 	{
> 		returnValue.add( indexTerm );
> 	}
> }
> ----------
> The TermAbnalyzer is the same analyzer as the main index analyzer with =
the exception that a LowerCaseFilter is applied.

What is the Analyzer for the Main Index?  What is the tokenizer and =
token filters used?

Out of curiosity, what is the problem you are trying to solve?

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 11:14:49 2011
Return-Path: <java-user-return-49465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 437F214A9
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 11:14:49 +0000 (UTC)
Received: (qmail 68003 invoked by uid 500); 24 Apr 2011 11:14:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67936 invoked by uid 500); 24 Apr 2011 11:14:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67928 invoked by uid 99); 24 Apr 2011 11:14:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 11:14:46 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of wenlei.zhouwl@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 11:14:38 +0000
Received: by bwz8 with SMTP id 8so1935590bwz.35
        for <java-user@lucene.apache.org>; Sun, 24 Apr 2011 04:14:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=H6Nzl9imNCrdj4LHfpgNBWnrVjtA0036jgB3oD6/5uI=;
        b=x9P5qNaFAy66vsBSusOzKrvelGcmWEWRdUOGcFEfqr7B7HjGUxcvS5AuTF1EYSyA7A
         NCbYMriLZz9DZqokpt5zf1iJaXMnAmK2T5kMry+So955/gxQgYgI4IBLgW1XMElf2QPR
         7STkyTpkRyn48W63abOAlfcCBHLmpnBP81X4Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=FviMUfoFFPEa6ZWwma08b7t4demPy88VHwFFohTwtf3SPVocrAvK9tH7C5/zqETBRW
         lZOTS8ppMZ8r9QvKdFf10kPvmpbabEzxK4hnvxq9uOavzhDoONzpBzmHq8qvYUQAc7FF
         YJKkj3tqKmT3jc02UdOjgR7s/w9UQPBLV5Zds=
MIME-Version: 1.0
Received: by 10.204.233.14 with SMTP id jw14mr2568509bkb.40.1303643658627;
 Sun, 24 Apr 2011 04:14:18 -0700 (PDT)
Received: by 10.204.52.70 with HTTP; Sun, 24 Apr 2011 04:14:18 -0700 (PDT)
Date: Sun, 24 Apr 2011 19:14:18 +0800
Message-ID: <BANLkTinVZNKpNwS2F3Ht0tvuXRSb6sYvGw@mail.gmail.com>
Subject: lucene PorterStemmer
From: wenlei zhou <wenlei.zhouwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=485b3979da842faaa604a1a831e4
X-Virus-Checked: Checked by ClamAV on apache.org

--485b3979da842faaa604a1a831e4
Content-Type: text/plain; charset=ISO-8859-1

Hi, guys
I want to stem some English text.
For example:

String stemTerm(String term){
   ...
}

We can get the stemmed term of the input term.

Does any one knows how to use lucene to achieve this target?

Sincerely,
Zhou Wenlei

--485b3979da842faaa604a1a831e4--

From java-user-return-49466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 11:24:37 2011
Return-Path: <java-user-return-49466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1AAF1130B
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 11:24:37 +0000 (UTC)
Received: (qmail 86171 invoked by uid 500); 24 Apr 2011 11:24:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86131 invoked by uid 500); 24 Apr 2011 11:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86123 invoked by uid 99); 24 Apr 2011 11:24:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 11:24:34 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 11:24:28 +0000
Received: by vws7 with SMTP id 7so2096050vws.35
        for <java-user@lucene.apache.org>; Sun, 24 Apr 2011 04:24:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=XW1VrRi4uLLsDXI+GI8bJPF3OpaMtbUj/gR7JTZgLbc=;
        b=FJCYHSbVzsqVbyHnK9wXQlSrzHP6jnXMBNO9SFu7QS+KAsjQ2wOUYtB4AaADEDpNRl
         BRU3VzQSMTE8d7YA2NWRCY9/5znafhhTzonXMOcVyE6ATlNqajdgTO4HCVQ06qJ/8v+1
         G8nMQXpJmUukL4yrKo/e4QZA387QDVuyO5eb4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Ogx+WDEbWIwSpp7jX/86B8gRrGevV06fcGsg04Pn0HRoeJrd9kEtkb3WzYNHr8tyS/
         pTkYnsBTKz8dhkfzHBNkwZk3eMPocLsAfYAGy/SauhihkfdmDOQswBDZ1+R9CwzD2Hi5
         0F8/NxOkREE52AkS+v+PvI9z0gus8uY5ex3ps=
MIME-Version: 1.0
Received: by 10.52.167.230 with SMTP id zr6mr4553919vdb.6.1303644247608; Sun,
 24 Apr 2011 04:24:07 -0700 (PDT)
Received: by 10.52.168.134 with HTTP; Sun, 24 Apr 2011 04:24:07 -0700 (PDT)
Received: by 10.52.168.134 with HTTP; Sun, 24 Apr 2011 04:24:07 -0700 (PDT)
In-Reply-To: <BANLkTinVZNKpNwS2F3Ht0tvuXRSb6sYvGw@mail.gmail.com>
References: <BANLkTinVZNKpNwS2F3Ht0tvuXRSb6sYvGw@mail.gmail.com>
Date: Sun, 24 Apr 2011 19:24:07 +0800
Message-ID: <BANLkTinCBMJet1f=A2EuuJODbw8Spp0d5Q@mail.gmail.com>
Subject: Re: lucene PorterStemmer
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec53f8ec14acf0304a1a854c1

--bcaec53f8ec14acf0304a1a854c1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

search lucene snowball
=E5=9C=A8 2011-4-24 =E4=B8=8B=E5=8D=887:14=EF=BC=8C"wenlei zhou" <wenlei.zh=
ouwl@gmail.com>=E5=86=99=E9=81=93=EF=BC=9A
>
> Hi, guys
> I want to stem some English text.
> For example:
>
> String stemTerm(String term){
>   ...
> }
>
> We can get the stemmed term of the input term.
>
> Does any one knows how to use lucene to achieve this target?
>
> Sincerely,
> Zhou Wenlei

--bcaec53f8ec14acf0304a1a854c1--

From java-user-return-49467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 11:30:09 2011
Return-Path: <java-user-return-49467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD2B31576
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 11:30:09 +0000 (UTC)
Received: (qmail 93176 invoked by uid 500); 24 Apr 2011 11:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93119 invoked by uid 500); 24 Apr 2011 11:30:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93111 invoked by uid 99); 24 Apr 2011 11:30:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 11:30:07 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wenlei.zhouwl@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 11:30:00 +0000
Received: by bwz8 with SMTP id 8so1940667bwz.35
        for <java-user@lucene.apache.org>; Sun, 24 Apr 2011 04:29:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=zky+S7r0VnncqK2PKTGFeWdX6Utw2ag01uQusN+CHaM=;
        b=f1LheqCpo/Zb+61T3zEzPCMkqaG6FRBjMeYyt8N6L/THXr3CH76SiX4I980Pm7q0AB
         RBkyfcOE6ENVjqVqasqIR/epo50fVzJY46MRkAxhxInp03VLOaoWbPAOEvYivnJ/k/Ys
         2phY5Z0mLwWNAdklKfEcr0HSdwOyNKwP6GqYY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=s04vD+Y6WwSsgoDgG34/5baELf/TWKoLBkIdvxAFSa/WUJjwQMjIgnPRS0WhWu6KiW
         9UVEkgwjCBXyXQZxyCFkXsM0+SRZWLRFhNP3ZjV6THGGQ1kFvGB1Q9FP1aFkFXwoLHVI
         YB3/u8vWAp5b9sH/GCY/0AVrFy2utCXeobqAQ=
MIME-Version: 1.0
Received: by 10.204.233.14 with SMTP id jw14mr2576869bkb.40.1303644579290;
 Sun, 24 Apr 2011 04:29:39 -0700 (PDT)
Received: by 10.204.52.70 with HTTP; Sun, 24 Apr 2011 04:29:39 -0700 (PDT)
In-Reply-To: <BANLkTinCBMJet1f=A2EuuJODbw8Spp0d5Q@mail.gmail.com>
References: <BANLkTinVZNKpNwS2F3Ht0tvuXRSb6sYvGw@mail.gmail.com>
	<BANLkTinCBMJet1f=A2EuuJODbw8Spp0d5Q@mail.gmail.com>
Date: Sun, 24 Apr 2011 19:29:39 +0800
Message-ID: <BANLkTi=B_rDto8GPBprF-UqMN10bpKqmMw@mail.gmail.com>
Subject: Re: lucene PorterStemmer
From: wenlei zhou <wenlei.zhouwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=485b3979da840fdc6304a1a868d4

--485b3979da840fdc6304a1a868d4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, WeiWei

I find that org.tartarus.snowball.ext.PorterStemmer maybe can be used.
However, there is no example which can tell me how to use it. Can you give
me a example?

Regards,
Zhou Wenlei

On 24 April 2011 19:24, Weiwei Wang <ww.wang.cs@gmail.com> wrote:

> search lucene snowball
> =E5=9C=A8 2011-4-24 =E4=B8=8B=E5=8D=887:14=EF=BC=8C"wenlei zhou" <wenlei.=
zhouwl@gmail.com>=E5=86=99=E9=81=93=EF=BC=9A
> >
> > Hi, guys
> > I want to stem some English text.
> > For example:
> >
> > String stemTerm(String term){
> >   ...
> > }
> >
> > We can get the stemmed term of the input term.
> >
> > Does any one knows how to use lucene to achieve this target?
> >
> > Sincerely,
> > Zhou Wenlei
>

--485b3979da840fdc6304a1a868d4--

From java-user-return-49468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 12:31:54 2011
Return-Path: <java-user-return-49468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7AA01AA4
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 12:31:54 +0000 (UTC)
Received: (qmail 13135 invoked by uid 500); 24 Apr 2011 12:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13084 invoked by uid 500); 24 Apr 2011 12:31:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13076 invoked by uid 99); 24 Apr 2011 12:31:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 12:31:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wenlei.zhouwl@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 12:31:46 +0000
Received: by bwz8 with SMTP id 8so1963476bwz.35
        for <java-user@lucene.apache.org>; Sun, 24 Apr 2011 05:31:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=cPqBxzuUhIqsN+ntNULxk9+BDKs7BidhS0Jwa42IbzA=;
        b=UsBDby48YjRnB/dwgxcJSvOIyl7H4eCXHJHMoEyAWcgFwLoS+LndPy6sJyQvW9tkqZ
         VoUPUEsoDMWZdeVtFVfOD4nzZd3SmTqf7dZ/gPt7tKoV3cwRcF0jzcNsxATxcZTjkr14
         ThDeBdIIvZflfZFvgKQIEogHp9FAYsJRCxIFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=aD0US7LX3PQ50Ac2kokFYuUFjOUL7G0y9XAtbLjo3XdjhgqmvE1vOr3XiwVcn+HD+f
         W7Dmn1gSXwfWe0icp+0LPAo9RAzcZOVfvC8bN1ZZZKC9Q2JnDS0osqQiWZBVcyJ7U7c8
         jP7v+u+m1Dp3/+5IYFH0tUYt70UsWM+08je4w=
MIME-Version: 1.0
Received: by 10.204.10.81 with SMTP id o17mr2502239bko.94.1303648284330; Sun,
 24 Apr 2011 05:31:24 -0700 (PDT)
Received: by 10.204.52.70 with HTTP; Sun, 24 Apr 2011 05:31:24 -0700 (PDT)
In-Reply-To: <BANLkTi=B_rDto8GPBprF-UqMN10bpKqmMw@mail.gmail.com>
References: <BANLkTinVZNKpNwS2F3Ht0tvuXRSb6sYvGw@mail.gmail.com>
	<BANLkTinCBMJet1f=A2EuuJODbw8Spp0d5Q@mail.gmail.com>
	<BANLkTi=B_rDto8GPBprF-UqMN10bpKqmMw@mail.gmail.com>
Date: Sun, 24 Apr 2011 20:31:24 +0800
Message-ID: <BANLkTikAhdhKW7uhPMJyTfLXN1-pQjYKRg@mail.gmail.com>
Subject: Re: lucene PorterStemmer
From: wenlei zhou <wenlei.zhouwl@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cd794e64a3f04a1a9441e

--0015175cd794e64a3f04a1a9441e
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi, WeiWei
I have found the answer~~ Thank you very much!

regards,
Zhou Wenlei

On 24 April 2011 19:29, wenlei zhou <wenlei.zhouwl@gmail.com> wrote:

> Hi, WeiWei
>
> I find that org.tartarus.snowball.ext.PorterStemmer maybe can be used.
> However, there is no example which can tell me how to use it. Can you giv=
e
> me a example?
>
> Regards,
> Zhou Wenlei
>
>
> On 24 April 2011 19:24, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
>
>> search lucene snowball
>> =E5=9C=A8 2011-4-24 =E4=B8=8B=E5=8D=887:14=EF=BC=8C"wenlei zhou" <wenlei=
.zhouwl@gmail.com>=E5=86=99=E9=81=93=EF=BC=9A
>> >
>> > Hi, guys
>> > I want to stem some English text.
>> > For example:
>> >
>> > String stemTerm(String term){
>> >   ...
>> > }
>> >
>> > We can get the stemmed term of the input term.
>> >
>> > Does any one knows how to use lucene to achieve this target?
>> >
>> > Sincerely,
>> > Zhou Wenlei
>>
>
>

--0015175cd794e64a3f04a1a9441e--

From java-user-return-49469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 19:17:52 2011
Return-Path: <java-user-return-49469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CC9AE1ED0
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 19:17:52 +0000 (UTC)
Received: (qmail 15207 invoked by uid 500); 24 Apr 2011 19:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15165 invoked by uid 500); 24 Apr 2011 19:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15157 invoked by uid 99); 24 Apr 2011 19:17:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 19:17:50 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 19:17:45 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <nero_24@web.de>)
	id 1QE4o8-0001qm-Ed
	for java-user@lucene.apache.org; Sun, 24 Apr 2011 12:17:24 -0700
Date: Sun, 24 Apr 2011 12:17:24 -0700 (PDT)
From: tales <nero_24@web.de>
To: java-user@lucene.apache.org
Message-ID: <1303672644441-2858378.post@n3.nabble.com>
Subject: General Questions and some Problems
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello everyone,

my name is Lars. I'm new to Java and especially to Lucene. For your
understanding I tell you in short what I'm about to do:

I'm a student from Germany and currently I'm working at our library as a
student worker. I'm study Bioinformatics/Biosystemengineering and because of
that the leader of our library asked me to help him out with some technical
things on our homepage. We currently only have a MySQL based search script
for our users and now want to add a fulltextsearch to higher the performance
of the searching results for our users. So my idea was it to use Lucene,
what I think is the best way. I don't want to use the Zend framework for
that. I need to program with Java in any way. I want to build a small
program working in the background with a frontend for the users. 

Now what I did until here:

1. I downloaded Lucene 3.1.0 core (I think it's actually the newest?)
2. I searched for a small tutorial on the web to get into the material and
found the page http://www.lucenetutorial.com
3. I copy-pasted the example code from the page to see if I'm able to run
the code exactly

Here is my first problem: I'm not able to compile the code. The problem lies
in the imported packages. I tried to compile the code with the following
commandline:

javac TextFileIndexer.java -classpath
../Lucene/lucene-core-3.1.0/org/apache/lucene

i tried multiple path to the lucene package but the result was ever the
same:


TextFileIndexer.java:3: package org.apache.lucene.analysis.standard does not
exist
import org.apache.lucene.analysis.standard.StandardAnalyzer;
                                          ^
TextFileIndexer.java:4: package org.apache.lucene.document does not exist
import org.apache.lucene.document.Document;
                                 ^
TextFileIndexer.java:5: package org.apache.lucene.document does not exist
import org.apache.lucene.document.Field;
                                 ^
TextFileIndexer.java:6: package org.apache.lucene.index does not exist
import org.apache.lucene.index.IndexWriter;
                              ^
TextFileIndexer.java:17: cannot find symbol
symbol  : class IndexWriter
location: class com.lucenetutorial.apps.TextFileIndexer
	private IndexWriter writer;
	        ^
TextFileIndexer.java:69: cannot find symbol
symbol  : class IndexWriter
location: class com.lucenetutorial.apps.TextFileIndexer
		writer = new IndexWriter(indexDir, new StandardAnalyzer(), true,
IndexWriter.MaxFieldLength.LIMITED); 
		             ^
TextFileIndexer.java:69: cannot find symbol
symbol  : class StandardAnalyzer
location: class com.lucenetutorial.apps.TextFileIndexer
		writer = new IndexWriter(indexDir, new StandardAnalyzer(), true,
IndexWriter.MaxFieldLength.LIMITED); 
		                                       ^
TextFileIndexer.java:69: package IndexWriter does not exist
		writer = new IndexWriter(indexDir, new StandardAnalyzer(), true,
IndexWriter.MaxFieldLength.LIMITED); 
		                                                                           
^
TextFileIndexer.java:89: cannot find symbol
symbol  : class Document
location: class com.lucenetutorial.apps.TextFileIndexer
				Document doc = new Document();
				^
TextFileIndexer.java:89: cannot find symbol
symbol  : class Document
location: class com.lucenetutorial.apps.TextFileIndexer
				Document doc = new Document();
				                   ^
TextFileIndexer.java:95: cannot find symbol
symbol  : class Field
location: class com.lucenetutorial.apps.TextFileIndexer
				doc.add(new Field("contents", fr));
				            ^
TextFileIndexer.java:100: cannot find symbol
symbol  : class Field
location: class com.lucenetutorial.apps.TextFileIndexer
				doc.add(new Field("path", fileName,
				            ^
TextFileIndexer.java:101: package Field does not exist
								  Field.Store.YES,
								       ^
TextFileIndexer.java:102: package Field does not exist
								  Field.Index.NOT_ANALYZED));
								       ^
14 errors


So my questions:

Can you please help me little bit and tell me why I'm not able to compile
the code?
And tell me if Lucene is the best way for that task oder should I use a
Lucene port like Solr?
What files do I need to give with when I wrote an application using Lucene?

Thank you very much for your help.

Best regards

Lars

P.S.:

Here the code of the TextFileIndexer.java:

package com.lucenetutorial.apps;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;

import java.io.*;
import java.util.ArrayList;

/**
 * This terminal application creates an Apache Lucene index in a folder and
adds files into this index
 * based on the input of the user.
 */
public class TextFileIndexer {

  private IndexWriter writer;
  private ArrayList<File> queue = new ArrayList<File>();

  public static void main(String[] args) throws IOException {
    System.out.println("Enter the path where the index will be created: ");

    BufferedReader br = new BufferedReader(
            new InputStreamReader(System.in));
    String s = br.readLine();

    TextFileIndexer indexer = null;
    try {
      indexer = new TextFileIndexer(s);
    } catch (Exception ex) {
      System.out.println("Cannot create index..." + ex.getMessage());
      System.exit(-1);
    }

    //===================================================
    //read input from user until he enters q for quit
    //===================================================
    while (!s.equalsIgnoreCase("q")) {
      try {
        System.out.println("Enter the file or folder name to add into the
index (q=quit):");
        System.out.println("[Acceptable file types: .xml, .html, .html,
.txt]");
        s = br.readLine();
        if (s.equalsIgnoreCase("q")) {
          break;
        }

        //try to add file into the index
        indexer.indexFileOrDirectory(s);
      } catch (Exception e) {
        System.out.println("Error indexing " + s + " : " + e.getMessage());
      }
    }

    //===================================================
    //after adding, we always have to call the
    //closeIndex, otherwise the index is not created    
    //===================================================
    indexer.closeIndex();
  }

  /**
   * Constructor
   * @param indexDir the name of the folder in which the index should be
created
   * @throws java.io.IOException
   */
  TextFileIndexer(String indexDir) throws IOException {
    // the boolean true parameter means to create a new index everytime, 
    // potentially overwriting any existing files there.
    writer = new IndexWriter(indexDir, new StandardAnalyzer(), true,
IndexWriter.MaxFieldLength.LIMITED); 
  }

  /**
   * Indexes a file or directory
   * @param fileName the name of a text file or a folder we wish to add to
the index
   * @throws java.io.IOException
   */
  public void indexFileOrDirectory(String fileName) throws IOException {
    //===================================================
    //gets the list of files in a folder (if user has submitted
    //the name of a folder) or gets a single file name (is user
    //has submitted only the file name) 
    //===================================================
    listFiles(new File(fileName));
    
    int originalNumDocs = writer.numDocs();
    for (File f : queue) {
      FileReader fr = null;
      try {
        Document doc = new Document();

        //===================================================
        // add contents of file
        //===================================================
        fr = new FileReader(f);
        doc.add(new Field("contents", fr));

        //===================================================
        //adding second field which contains the path of the file
        //===================================================
        doc.add(new Field("path", fileName,
                Field.Store.YES,
                Field.Index.NOT_ANALYZED));

        writer.addDocument(doc);
        System.out.println("Added: " + f);
      } catch (Exception e) {
        System.out.println("Could not add: " + f);
      } finally {
        fr.close();
      }
    }
    
    int newNumDocs = writer.numDocs();
    System.out.println("");
    System.out.println("************************");
    System.out.println((newNumDocs - originalNumDocs) + " documents
added.");
    System.out.println("************************");

    queue.clear();
  }

  private void listFiles(File file) {
    if (!file.exists()) {
      System.out.println(file + " does not exist.");
    }
    if (file.isDirectory()) {
      for (File f : file.listFiles()) {
        listFiles(f);
      }
    } else {
      String filename = file.getName().toLowerCase();
      //===================================================
      // Only index text files
      //===================================================
      if (filename.endsWith(".htm") || filename.endsWith(".html") || 
              filename.endsWith(".xml") || filename.endsWith(".txt")) {
        queue.add(file);
      } else {
        System.out.println("Skipped " + filename);
      }
    }
  }

  /**
   * Close the index.
   * @throws java.io.IOException
   */
  public void closeIndex() throws IOException {
    writer.optimize();
    writer.close();
  }
}

--
View this message in context: http://lucene.472066.n3.nabble.com/General-Questions-and-some-Problems-tp2858378p2858378.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 22:07:37 2011
Return-Path: <java-user-return-49470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B9666C45
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 22:07:37 +0000 (UTC)
Received: (qmail 89377 invoked by uid 500); 24 Apr 2011 22:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89338 invoked by uid 500); 24 Apr 2011 22:07:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89330 invoked by uid 99); 24 Apr 2011 22:07:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 22:07:35 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 22:07:29 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <nero_24@web.de>)
	id 1QE7SN-0003Vk-V5
	for java-user@lucene.apache.org; Sun, 24 Apr 2011 15:07:07 -0700
Date: Sun, 24 Apr 2011 15:07:07 -0700 (PDT)
From: tales <nero_24@web.de>
To: java-user@lucene.apache.org
Message-ID: <1303682827956-2858950.post@n3.nabble.com>
In-Reply-To: <1303672644441-2858378.post@n3.nabble.com>
References: <1303672644441-2858378.post@n3.nabble.com>
Subject: Re: General Questions and some Problems
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

bump

--
View this message in context: http://lucene.472066.n3.nabble.com/General-Questions-and-some-Problems-tp2858378p2858950.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 22:09:00 2011
Return-Path: <java-user-return-49471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B618C64
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 22:09:00 +0000 (UTC)
Received: (qmail 91418 invoked by uid 500); 24 Apr 2011 22:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91379 invoked by uid 500); 24 Apr 2011 22:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91370 invoked by uid 99); 24 Apr 2011 22:08:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 22:08:58 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 22:08:52 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <nero_24@web.de>)
	id 1QE7Tj-0003aH-D5
	for java-user@lucene.apache.org; Sun, 24 Apr 2011 15:08:31 -0700
Date: Sun, 24 Apr 2011 15:08:31 -0700 (PDT)
From: tales <nero_24@web.de>
To: java-user@lucene.apache.org
Message-ID: <1303682911398-2858957.post@n3.nabble.com>
In-Reply-To: <1303672644441-2858378.post@n3.nabble.com>
References: <1303672644441-2858378.post@n3.nabble.com>
Subject: Re: General Questions and some Problems
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

test

--
View this message in context: http://lucene.472066.n3.nabble.com/General-Questions-and-some-Problems-tp2858378p2858957.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Apr 24 22:21:42 2011
Return-Path: <java-user-return-49472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CA6E7F2
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 24 Apr 2011 22:21:42 +0000 (UTC)
Received: (qmail 94351 invoked by uid 500); 24 Apr 2011 22:21:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94311 invoked by uid 500); 24 Apr 2011 22:21:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94303 invoked by uid 99); 24 Apr 2011 22:21:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Apr 2011 22:21:39 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.139.213.162] (HELO nm19-vm0.bullet.mail.bf1.yahoo.com) (98.139.213.162)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 24 Apr 2011 22:21:31 +0000
Received: from [98.139.212.153] by nm19.bullet.mail.bf1.yahoo.com with NNFMP; 24 Apr 2011 22:21:09 -0000
Received: from [98.139.213.5] by tm10.bullet.mail.bf1.yahoo.com with NNFMP; 24 Apr 2011 22:21:09 -0000
Received: from [127.0.0.1] by smtp105.mail.bf1.yahoo.com with NNFMP; 24 Apr 2011 22:21:09 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.de; s=s1024; t=1303683669; bh=toi7QMUMiBHtYjIklz1SpbGtrG++szloAKU5VyMwZCw=; h=X-Yahoo-Newman-Id:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding; b=LQXjql+LUbAgTuwi6jhHxdv121fx9hX+2+Cc7NUnacfpiHugS/yHi0YmlKacZ2Rz4GVh2/cCZvyJykC1mm2zZwm17+epPrrlS3YVKjzx1BtF/xCCCMZLINhXIVAoDz5yEMuoKmOikB0/99EI486zk2Pi91zxCCU0Tx56/MOckcU=
X-Yahoo-Newman-Id: 727801.73645.bm@smtp105.mail.bf1.yahoo.com
Received: from [192.168.0.2] (mailformailinglists@79.242.168.144 with plain)
        by smtp105.mail.bf1.yahoo.com with SMTP; 24 Apr 2011 15:21:09 -0700 PDT
X-Yahoo-SMTP: PsU70jWswBCjvY7DVEwAV7Ld71kq2utxAu93BRGFPho-
X-YMail-OSG: COSZNksVM1lVgohGI5igRPhRsGVNRg2vx.8bY5eoyF5sArY
 7XdaFqoVSJsd_pB4H4OgkgL1250IgraFOPcNhsfaJoLmZxR0PAV10kOrzfyi
 h.q6LT2jSW9HFRWN99AXHlXB6fbaSYV_C2SiEo3b_LUO.2kFgvbG6IZ4B0im
 0y3vpFJFNbx7.PXF6ki9qJ7uOUgmatNzt80QgCY4Zy.UGhV12Y1w1MjPb2hk
 TBfqDo0IJeEcwlKM0itauuWonKtn5dXzZZgPD94kI4Oh3ucj8I2MIf6JZ_Gs
 Ap9CYuMZdAZzkLzhRO.SL7IsfZV_G8CrCZ.0OaUKnOsrav9OO
X-Yahoo-Newman-Property: ymail-3
Message-ID: <4DB4A24D.8050504@yahoo.de>
Date: Mon, 25 Apr 2011 00:21:01 +0200
From: Em <mailformailinglists@yahoo.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: General Questions and some Problems
References: <1303672644441-2858378.post@n3.nabble.com>
In-Reply-To: <1303672644441-2858378.post@n3.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Lars,

in short, without completly reading through your code, I suggest you to
use Solr. Solr is better for beginners like you with little experience
in Lucene and Java and gives you many built-in options, from caches to
facets - out of the box.

Everything you need to use Solr is a Servlet-container (I prefer Tomcat
over Jetty for production, but some people even say that Jetty is okay)
and that's it.

Regards,
Em

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Apr 25 10:12:27 2011
Return-Path: <java-user-return-49473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D4A425B2
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 25 Apr 2011 10:12:27 +0000 (UTC)
Received: (qmail 29911 invoked by uid 500); 25 Apr 2011 10:12:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29856 invoked by uid 500); 25 Apr 2011 10:12:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29848 invoked by uid 99); 25 Apr 2011 10:12:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Apr 2011 10:12:24 +0000
X-ASF-Spam-Status: No, hits=3.4 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Apr 2011 10:12:20 +0000
Received: by wwi18 with SMTP id 18so1436492wwi.5
        for <java-user@lucene.apache.org>; Mon, 25 Apr 2011 03:11:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=agqpTI+z7yVNx0jVfdvq80axpbsE4OdtYrLiwoI2Wh0=;
        b=pYi12WY4JgZTjuMxq3bCgG9ev7Z+5cx5BRvZmz6SA/p4ALySqt6ONXUzdUJi3DUK/F
         xNykR7uzGCE0WXMGXcG8f8uwmchI/O1clti+8Yyei/33A62dXzr2XZKs+HUkKd1OprzZ
         t2yIOScrvpCuq+53CO+A4L0EV64MwMXJdncVc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=PuKqKzvHuWPMC6wDik/Viwz2rMaKlbRGfOnSnsY/htLghTn7XpkUbUX6/oyybREdVR
         G8udeft9Rcon30+XYDxEVIjnXH/cbykNaX+glny3k/ZfORkseErFitkbGPsAdM6lNpFb
         7mw4vHhQj9iO1hT6m6bDGWL2iALGm396DtsdI=
MIME-Version: 1.0
Received: by 10.227.169.140 with SMTP id z12mr3791729wby.89.1303726318531;
 Mon, 25 Apr 2011 03:11:58 -0700 (PDT)
Received: by 10.227.146.134 with HTTP; Mon, 25 Apr 2011 03:11:58 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1303672644441-2858378.post@n3.nabble.com>
References: <1303672644441-2858378.post@n3.nabble.com>
Date: Mon, 25 Apr 2011 12:11:58 +0200
Message-ID: <BANLkTimm-xNrC1UA=UQX3_kuCe1nQLr2aQ@mail.gmail.com>
Subject: Re: General Questions and some Problems
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I briefly read through and it seems that the classpath is wrong, it should =
be:

javac TextFileIndexer.java -classpath
../Lucene/lucene-core-3.1.0/

provided this is the directory including org/apache/lucene/*.class | **/*.c=
lass

simon

On Sun, Apr 24, 2011 at 9:17 PM, tales <nero_24@web.de> wrote:
> Hello everyone,
>
> my name is Lars. I'm new to Java and especially to Lucene. For your
> understanding I tell you in short what I'm about to do:
>
> I'm a student from Germany and currently I'm working at our library as a
> student worker. I'm study Bioinformatics/Biosystemengineering and because=
 of
> that the leader of our library asked me to help him out with some technic=
al
> things on our homepage. We currently only have a MySQL based search scrip=
t
> for our users and now want to add a fulltextsearch to higher the performa=
nce
> of the searching results for our users. So my idea was it to use Lucene,
> what I think is the best way. I don't want to use the Zend framework for
> that. I need to program with Java in any way. I want to build a small
> program working in the background with a frontend for the users.
>
> Now what I did until here:
>
> 1. I downloaded Lucene 3.1.0 core (I think it's actually the newest?)
> 2. I searched for a small tutorial on the web to get into the material an=
d
> found the page http://www.lucenetutorial.com
> 3. I copy-pasted the example code from the page to see if I'm able to run
> the code exactly
>
> Here is my first problem: I'm not able to compile the code. The problem l=
ies
> in the imported packages. I tried to compile the code with the following
> commandline:
>
> javac TextFileIndexer.java -classpath
> ../Lucene/lucene-core-3.1.0/org/apache/lucene
>
> i tried multiple path to the lucene package but the result was ever the
> same:
>
>
> TextFileIndexer.java:3: package org.apache.lucene.analysis.standard does =
not
> exist
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0^
> TextFileIndexer.java:4: package org.apache.lucene.document does not exist
> import org.apache.lucene.document.Document;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
> TextFileIndexer.java:5: package org.apache.lucene.document does not exist
> import org.apache.lucene.document.Field;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
> TextFileIndexer.java:6: package org.apache.lucene.index does not exist
> import org.apache.lucene.index.IndexWriter;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0^
> TextFileIndexer.java:17: cannot find symbol
> symbol =C2=A0: class IndexWriter
> location: class com.lucenetutorial.apps.TextFileIndexer
> =C2=A0 =C2=A0 =C2=A0 =C2=A0private IndexWriter writer;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0^
> TextFileIndexer.java:69: cannot find symbol
> symbol =C2=A0: class IndexWriter
> location: class com.lucenetutorial.apps.TextFileIndexer
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0writer =3D new Ind=
exWriter(indexDir, new StandardAnalyzer(), true,
> IndexWriter.MaxFieldLength.LIMITED);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 ^
> TextFileIndexer.java:69: cannot find symbol
> symbol =C2=A0: class StandardAnalyzer
> location: class com.lucenetutorial.apps.TextFileIndexer
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0writer =3D new Ind=
exWriter(indexDir, new StandardAnalyzer(), true,
> IndexWriter.MaxFieldLength.LIMITED);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
> TextFileIndexer.java:69: package IndexWriter does not exist
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0writer =3D new Ind=
exWriter(indexDir, new StandardAnalyzer(), true,
> IndexWriter.MaxFieldLength.LIMITED);
>
> ^
> TextFileIndexer.java:89: cannot find symbol
> symbol =C2=A0: class Document
> location: class com.lucenetutorial.apps.TextFileIndexer
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Document doc =3D new Document();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0^
> TextFileIndexer.java:89: cannot find symbol
> symbol =C2=A0: class Document
> location: class com.lucenetutorial.apps.TextFileIndexer
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Document doc =3D new Document();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 ^
> TextFileIndexer.java:95: cannot find symbol
> symbol =C2=A0: class Field
> location: class com.lucenetutorial.apps.TextFileIndexer
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0doc.add(new Field("contents", fr));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0^
> TextFileIndexer.java:100: cannot find symbol
> symbol =C2=A0: class Field
> location: class com.lucenetutorial.apps.TextFileIndexer
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0doc.add(new Field("path", fileName,
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0^
> TextFileIndexer.java:101: package Field does not exist
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0Field.Store.YES,
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 ^
> TextFileIndexer.java:102: package Field does not exist
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0Field.Index.NOT_ANALYZED));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 ^
> 14 errors
>
>
> So my questions:
>
> Can you please help me little bit and tell me why I'm not able to compile
> the code?
> And tell me if Lucene is the best way for that task oder should I use a
> Lucene port like Solr?
> What files do I need to give with when I wrote an application using Lucen=
e?
>
> Thank you very much for your help.
>
> Best regards
>
> Lars
>
> P.S.:
>
> Here the code of the TextFileIndexer.java:
>
> package com.lucenetutorial.apps;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexWriter;
>
> import java.io.*;
> import java.util.ArrayList;
>
> /**
> =C2=A0* This terminal application creates an Apache Lucene index in a fol=
der and
> adds files into this index
> =C2=A0* based on the input of the user.
> =C2=A0*/
> public class TextFileIndexer {
>
> =C2=A0private IndexWriter writer;
> =C2=A0private ArrayList<File> queue =3D new ArrayList<File>();
>
> =C2=A0public static void main(String[] args) throws IOException {
> =C2=A0 =C2=A0System.out.println("Enter the path where the index will be c=
reated: ");
>
> =C2=A0 =C2=A0BufferedReader br =3D new BufferedReader(
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0new InputStreamReader(System.in)=
);
> =C2=A0 =C2=A0String s =3D br.readLine();
>
> =C2=A0 =C2=A0TextFileIndexer indexer =3D null;
> =C2=A0 =C2=A0try {
> =C2=A0 =C2=A0 =C2=A0indexer =3D new TextFileIndexer(s);
> =C2=A0 =C2=A0} catch (Exception ex) {
> =C2=A0 =C2=A0 =C2=A0System.out.println("Cannot create index..." + ex.getM=
essage());
> =C2=A0 =C2=A0 =C2=A0System.exit(-1);
> =C2=A0 =C2=A0}
>
> =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0//read input from user until he enters q for quit
> =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0while (!s.equalsIgnoreCase("q")) {
> =C2=A0 =C2=A0 =C2=A0try {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("Enter the file or folder n=
ame to add into the
> index (q=3Dquit):");
> =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("[Acceptable file types: .x=
ml, .html, .html,
> .txt]");
> =C2=A0 =C2=A0 =C2=A0 =C2=A0s =3D br.readLine();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0if (s.equalsIgnoreCase("q")) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0break;
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//try to add file into the index
> =C2=A0 =C2=A0 =C2=A0 =C2=A0indexer.indexFileOrDirectory(s);
> =C2=A0 =C2=A0 =C2=A0} catch (Exception e) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("Error indexing " + s + " :=
 " + e.getMessage());
> =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0}
>
> =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0//after adding, we always have to call the
> =C2=A0 =C2=A0//closeIndex, otherwise the index is not created
> =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0indexer.closeIndex();
> =C2=A0}
>
> =C2=A0/**
> =C2=A0 * Constructor
> =C2=A0 * @param indexDir the name of the folder in which the index should=
 be
> created
> =C2=A0 * @throws java.io.IOException
> =C2=A0 */
> =C2=A0TextFileIndexer(String indexDir) throws IOException {
> =C2=A0 =C2=A0// the boolean true parameter means to create a new index ev=
erytime,
> =C2=A0 =C2=A0// potentially overwriting any existing files there.
> =C2=A0 =C2=A0writer =3D new IndexWriter(indexDir, new StandardAnalyzer(),=
 true,
> IndexWriter.MaxFieldLength.LIMITED);
> =C2=A0}
>
> =C2=A0/**
> =C2=A0 * Indexes a file or directory
> =C2=A0 * @param fileName the name of a text file or a folder we wish to a=
dd to
> the index
> =C2=A0 * @throws java.io.IOException
> =C2=A0 */
> =C2=A0public void indexFileOrDirectory(String fileName) throws IOExceptio=
n {
> =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0//gets the list of files in a folder (if user has submitted
> =C2=A0 =C2=A0//the name of a folder) or gets a single file name (is user
> =C2=A0 =C2=A0//has submitted only the file name)
> =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0listFiles(new File(fileName));
>
> =C2=A0 =C2=A0int originalNumDocs =3D writer.numDocs();
> =C2=A0 =C2=A0for (File f : queue) {
> =C2=A0 =C2=A0 =C2=A0FileReader fr =3D null;
> =C2=A0 =C2=A0 =C2=A0try {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0Document doc =3D new Document();
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0 =C2=A0 =C2=A0// add contents of file
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0 =C2=A0 =C2=A0fr =3D new FileReader(f);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0doc.add(new Field("contents", fr));
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//adding second field which contains the path =
of the file
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0 =C2=A0 =C2=A0doc.add(new Field("path", fileName,
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Field.Store.YES,
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Field.Index.NOT_AN=
ALYZED));
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0writer.addDocument(doc);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("Added: " + f);
> =C2=A0 =C2=A0 =C2=A0} catch (Exception e) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("Could not add: " + f);
> =C2=A0 =C2=A0 =C2=A0} finally {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0fr.close();
> =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0}
>
> =C2=A0 =C2=A0int newNumDocs =3D writer.numDocs();
> =C2=A0 =C2=A0System.out.println("");
> =C2=A0 =C2=A0System.out.println("************************");
> =C2=A0 =C2=A0System.out.println((newNumDocs - originalNumDocs) + " docume=
nts
> added.");
> =C2=A0 =C2=A0System.out.println("************************");
>
> =C2=A0 =C2=A0queue.clear();
> =C2=A0}
>
> =C2=A0private void listFiles(File file) {
> =C2=A0 =C2=A0if (!file.exists()) {
> =C2=A0 =C2=A0 =C2=A0System.out.println(file + " does not exist.");
> =C2=A0 =C2=A0}
> =C2=A0 =C2=A0if (file.isDirectory()) {
> =C2=A0 =C2=A0 =C2=A0for (File f : file.listFiles()) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0listFiles(f);
> =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0} else {
> =C2=A0 =C2=A0 =C2=A0String filename =3D file.getName().toLowerCase();
> =C2=A0 =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0 =C2=A0// Only index text files
> =C2=A0 =C2=A0 =C2=A0//=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D
> =C2=A0 =C2=A0 =C2=A0if (filename.endsWith(".htm") || filename.endsWith(".=
html") ||
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0filename.endsWith(".xml")=
 || filename.endsWith(".txt")) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0queue.add(file);
> =C2=A0 =C2=A0 =C2=A0} else {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0System.out.println("Skipped " + filename);
> =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0}
> =C2=A0}
>
> =C2=A0/**
> =C2=A0 * Close the index.
> =C2=A0 * @throws java.io.IOException
> =C2=A0 */
> =C2=A0public void closeIndex() throws IOException {
> =C2=A0 =C2=A0writer.optimize();
> =C2=A0 =C2=A0writer.close();
> =C2=A0}
> }
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/General-=
Questions-and-some-Problems-tp2858378p2858378.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Apr 25 10:13:42 2011
Return-Path: <java-user-return-49474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 212A025D0
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 25 Apr 2011 10:13:42 +0000 (UTC)
Received: (qmail 32600 invoked by uid 500); 25 Apr 2011 10:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32561 invoked by uid 500); 25 Apr 2011 10:13:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32553 invoked by uid 99); 25 Apr 2011 10:13:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Apr 2011 10:13:40 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Apr 2011 10:13:34 +0000
Received: by wwi18 with SMTP id 18so1436931wwi.5
        for <java-user@lucene.apache.org>; Mon, 25 Apr 2011 03:13:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=qoahHgnc9wQDhrE6+wEKBgnAC9f3uSKTO2BzLtTFO8g=;
        b=b5C+sfcZb4qfsUqm/zzAX6G4Y6E6hCCmTZauXxGMuikVRAfC/l5E300kwd5o8I7HfW
         MHT1yz02NHe98mOWJIEZCqp+FYAi2CJVNpvFKzgE5ftlIIUPj8v1D7GStmKFJbEy3Pbr
         JcNM8Z2/v0bNS9Hoi5K+I98NQUKjFL8VJPJLU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        b=iKdlZOQ1ScVfqiOqnkEfamDTe15dKQxPYdve7GnkXajkT/XCfahsBJFqUNr6w+pDE9
         6YA+lkPlWqh5oaHqCLIl65LYhNoHRZl6FgBPmGzygjgK9kcqpPlG6AyJh/C4aQAbLMus
         MtJhfYVAbIaSAr+VhigXioaeJUTT0h/Ohp5cE=
MIME-Version: 1.0
Received: by 10.227.172.7 with SMTP id j7mr3710412wbz.60.1303726393262; Mon,
 25 Apr 2011 03:13:13 -0700 (PDT)
Received: by 10.227.146.134 with HTTP; Mon, 25 Apr 2011 03:13:13 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <B73F2E12-2B65-477F-A55F-E683F00C8615@apache.org>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51733@Exchange2007.mysigndomain.corp>
	<B73F2E12-2B65-477F-A55F-E683F00C8615@apache.org>
Date: Mon, 25 Apr 2011 12:13:13 +0200
Message-ID: <BANLkTikkkLPeB+QKfOwcBO3-XJc8-_BM+w@mail.gmail.com>
Subject: Re: "Umlaute" getting lost
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, Apr 24, 2011 at 8:30 AM, Grant Ingersoll <gsingers@apache.org> wrot=
e:
>
> On Apr 21, 2011, at 5:02 PM, Clemens Wyss wrote:
>
>> I keep my search terms in a dedicated RAMDirectory (the termIndex).
>> In there I palce all the term of my real index. When putting the terms i=
nto the
>> termIndex I can still see [using the debugger] the Umlaute (=C3=A4=C3=B6=
=C3=BC). Unfortunately when searching the
>> termIndex the documents no more contain these Umlaute.
>>
>> Populating the termIndex:
>> termIndex =3D new RAMDirectory();
>> IndexWriterConfig config =3D new IndexWriterConfig( Version.LUCENE_31, n=
ew TermAnalyzer( locale ) );
>> termIndexWriter =3D new IndexWriter( termIndex, config );
>> TermEnum tEnum =3D realIndexReader.terms();
>> while ( tEnum.next() )
>> {
>> =C2=A0 =C2=A0 =C2=A0 Term t =3D tEnum.term();
>> =C2=A0 =C2=A0 =C2=A0 String termText =3D t.text();
>> =C2=A0 =C2=A0 =C2=A0 Document termDocument =3D new Document();
>> =C2=A0 =C2=A0 =C2=A0 Field field =3D new Field( FIELDNAME_TERM, termText=
, Field.Store.YES, Field.Index.ANALYZED );
>> =C2=A0 =C2=A0 =C2=A0 termDocument.add( field );
>> =C2=A0 =C2=A0 =C2=A0 // and add term into the index
>> =C2=A0 =C2=A0 =C2=A0 termIndexWriter.addDocument( termDocument );
>> }
>> termIndexWriter.commit();
>> termIndexWriter.optimize();
>> termIndexWriter.close();
>>
>> termIndexReader =3D IndexReader.open( termIndex, true );
>> ---------- searching terms
>> Query q =3D fuzzy ? new FuzzyQuery( new Term( FIELDNAME_TERM, termFilter=
.toLowerCase() ) ) :
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 new Wildcard=
Query( new Term( FIELDNAME_TERM, "*" + termFilter.toLowerCase() + "*" ) );
>> TopDocs topDocs =3D new IndexSearcher( getTermIndexReader() ).search( q,=
 100 );
>> for ( ScoreDoc hit : topDocs.scoreDocs )
>> {
>> =C2=A0 =C2=A0 =C2=A0 Document doc =3D getTermIndexReader().document( hit=
.doc );
>> =C2=A0 =C2=A0 =C2=A0 String indexTerm =3D doc.get( FIELDNAME_TERM );
>> =C2=A0 =C2=A0 =C2=A0 if ( !returnValue.contains( indexTerm =C2=A0) )
>> =C2=A0 =C2=A0 =C2=A0 {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 returnValue.add( indexT=
erm );
>> =C2=A0 =C2=A0 =C2=A0 }
>> }
>> ----------
>> The TermAbnalyzer is the same analyzer as the main index analyzer with t=
he exception that a LowerCaseFilter is applied.
>
> What is the Analyzer for the Main Index? =C2=A0What is the tokenizer and =
token filters used?

in other words, can you provide what TermAnalyzer is composed of?


simon
>
> Out of curiosity, what is the problem you are trying to solve?
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Apr 25 17:58:44 2011
Return-Path: <java-user-return-49475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9236D2760
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 25 Apr 2011 17:58:44 +0000 (UTC)
Received: (qmail 63879 invoked by uid 500); 25 Apr 2011 17:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63831 invoked by uid 500); 25 Apr 2011 17:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63823 invoked by uid 99); 25 Apr 2011 17:58:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Apr 2011 17:58:42 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of softwarevisualization@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Apr 2011 17:58:36 +0000
Received: by bwz8 with SMTP id 8so3094094bwz.35
        for <java-user@lucene.apache.org>; Mon, 25 Apr 2011 10:58:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=8N0cmz08ZV7+6XwMzuZMBM7LgZz6Zy7baDKbJoZzgBI=;
        b=v1NcrB8FxmfulPRtsFNbL+Y3RqEtliIZlM4Xrph9nYd+S7U9+pugjLtohBxS9idLvx
         qB92SPxQ6jEEnd9+x+ozTkrWQzRjbtHs0E78OmBvRfvHzqt1BTvLymTyCFZBuXeyiwn4
         /aLdAzqy/QJF0cSNN4kyfTQpc0LjAK0JB2TgA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=LPLlnHnOkbXlPLCsGisRcZencHW76NYpLVgCwimvRIFKir87XtRXQpz7QB9bo9EJmT
         Hnb0vJltAihILQJhzT6og3snnr25YGhyLrJNOkSBnDOH5RRXDwrveGgL/kXebyPIitdr
         8eC4LDwZ3ofQIOg1gizsNYdeKQ39rOaIX//7M=
MIME-Version: 1.0
Received: by 10.204.118.211 with SMTP id w19mr3821677bkq.83.1303754294544;
 Mon, 25 Apr 2011 10:58:14 -0700 (PDT)
Received: by 10.204.146.152 with HTTP; Mon, 25 Apr 2011 10:58:14 -0700 (PDT)
Reply-To: softwarevisualization@gmail.com
In-Reply-To: <BANLkTikAhdhKW7uhPMJyTfLXN1-pQjYKRg@mail.gmail.com>
References: <BANLkTinVZNKpNwS2F3Ht0tvuXRSb6sYvGw@mail.gmail.com>
	<BANLkTinCBMJet1f=A2EuuJODbw8Spp0d5Q@mail.gmail.com>
	<BANLkTi=B_rDto8GPBprF-UqMN10bpKqmMw@mail.gmail.com>
	<BANLkTikAhdhKW7uhPMJyTfLXN1-pQjYKRg@mail.gmail.com>
Date: Mon, 25 Apr 2011 13:58:14 -0400
Message-ID: <BANLkTikkFUs=tJukRrJa1FqL+SsUHN2uZg@mail.gmail.com>
Subject: Re: lucene PorterStemmer
From: software visualization <softwarevisualization@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dd993a99ca8804a1c1f3b3

--0016e6dd993a99ca8804a1c1f3b3
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Can you  share the answer you found?

On Sun, Apr 24, 2011 at 8:31 AM, wenlei zhou <wenlei.zhouwl@gmail.com>wrote=
:

> Hi, WeiWei
> I have found the answer~~ Thank you very much!
>
> regards,
> Zhou Wenlei
>
> On 24 April 2011 19:29, wenlei zhou <wenlei.zhouwl@gmail.com> wrote:
>
> > Hi, WeiWei
> >
> > I find that org.tartarus.snowball.ext.PorterStemmer maybe can be used.
> > However, there is no example which can tell me how to use it. Can you
> give
> > me a example?
> >
> > Regards,
> > Zhou Wenlei
> >
> >
> > On 24 April 2011 19:24, Weiwei Wang <ww.wang.cs@gmail.com> wrote:
> >
> >> search lucene snowball
> >> =E5=9C=A8 2011-4-24 =E4=B8=8B=E5=8D=887:14=EF=BC=8C"wenlei zhou" <wenl=
ei.zhouwl@gmail.com>=E5=86=99=E9=81=93=EF=BC=9A
> >> >
> >> > Hi, guys
> >> > I want to stem some English text.
> >> > For example:
> >> >
> >> > String stemTerm(String term){
> >> >   ...
> >> > }
> >> >
> >> > We can get the stemmed term of the input term.
> >> >
> >> > Does any one knows how to use lucene to achieve this target?
> >> >
> >> > Sincerely,
> >> > Zhou Wenlei
> >>
> >
> >
>

--0016e6dd993a99ca8804a1c1f3b3--

From java-user-return-49476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Apr 25 19:29:35 2011
Return-Path: <java-user-return-49476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F9FB2EFC
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 25 Apr 2011 19:29:35 +0000 (UTC)
Received: (qmail 69835 invoked by uid 500); 25 Apr 2011 19:29:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69700 invoked by uid 500); 25 Apr 2011 19:29:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 26270 invoked by uid 99); 24 Apr 2011 06:08:20 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of grant@lucidimagination.com designates 38.102.63.183 as permitted sender)
From: Grant Ingersoll <grant@lucidimagination.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Lucene Rev Stump the Chump
Date: Sun, 24 Apr 2011 08:07:50 +0200
Message-Id: <D2631868-98EE-453D-B654-A1E300ED22BE@lucidimagination.com>
To: java-user@lucene.apache.org,
 solr-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)

Hey everyone,

As you no doubt by now know, Lucene Revolution, the second annual =
Lucene/Solr conference sponsored by Lucid Imagination, is happening out =
in San Francisco at the end of May.  There are a lot of really great =
talks and speakers from across the spectrum  (check out =
lucenerevolution.org if you haven't already) on how people tackled and =
solved tough problems across the Lucene/Solr space.=20

Now, it's time for  _your_ toughest, most challenging Solr/Lucene =
questions.  Back by popular demand at this year's Revolution conference, =
I'll be on the hot seat for "Stump The Chump!" -- where I'll =
spontaneously field Solr/Lucene questions I've never seen before in =
front of a hundreds of people.=20

But in order to be a success, we need your =
questions/problems/challenges.  Please email a description of your =
Lucene/Solr problem to info@lucenerevolution.org (don't reply here, as I =
don't want to see it ahead of time)

You can read more details online at http://bit.ly/stump-grant =20

Even if you won't be able to make it to San Francisco, please send in =
any good questions you would be interested to see me tackle under the =
spotlight.  We'll record the session on video and post it online shortly =
after the conference (we're exploring a webcast -- still TBD).=20

Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Apr 25 21:23:01 2011
Return-Path: <java-user-return-49477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A56112FE9
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 25 Apr 2011 21:23:01 +0000 (UTC)
Received: (qmail 7672 invoked by uid 500); 25 Apr 2011 21:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7405 invoked by uid 500); 25 Apr 2011 21:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 3673 invoked by uid 99); 25 Apr 2011 21:14:39 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
From: Martin Schoeberl <masca@imm.dtu.dk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Mon, 25 Apr 2011 23:09:43 +0200
Subject: JTRES 2011 Call for Papers
To: Martin Schoeberl <masca@imm.dtu.dk>
Message-Id: <65BC0A4A-A135-41A9-845D-8BD8DCE8FC58@imm.dtu.dk>
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)
X-IMM_DTU-MailScanner-Information: Please contact ITSUPPORT for more information
X-IMM_DTU-MailScanner-ID: p3PLA5ms019262
X-IMM_DTU-MailScanner: Found to be clean
X-IMM_DTU-MailScanner-SpamCheck: not spam, SpamAssassin (cached,
	score=-5.599, required 6, autolearn=not spam, BAYES_00 -2.60,
	IMM_FROM_OK1 -3.00)
X-IMM_DTU-MailScanner-From: masca@imm.dtu.dk
X-Old-Spam-Status: No


======================================================================

                        CALL FOR PAPERS

		      The 9th Workshop on
       Java Technologies for Real-Time and Embedded System
                           JTRES 2011

		       September 26-28th 2011
                       Kings Mannor, York. UK

          http://www.artist-embedded.org/artist/JTRES-2011

======================================================================

Overview
--------

Over 90 percent of all microprocessors are now used for real-time and
embedded applications, and the behavior of many of these applications
is constrained by the physical world. Higher-level programming
languages and middleware are needed to robustly and productively
design, implement, compose, integrate, validate, and enforce
real-time constraints along with conventional functional requirements
and reusable components. It is essential that the production of
real-time embedded systems can take advantage of languages, tools,
and methods that enable higher software productivity. The Java
programming language has become an attractive choice because of its
safety, productivity, its relatively low maintenance costs, and the
availability of well trained developers.

Although it features good software engineering characteristics,
standard Java is unsuitable for developing real-time embedded
systems, mainly due to under-specification of thread scheduling and
the presence of garbage collection. These problems are addressed by
the Real-Time Specification for Java (RTSJ). The intent of this
specification is the development of real-time applications by
providing several additions such as extending the Java memory model
and providing stronger semantics in thread scheduling.

Interest in real-time Java in both the research community and
industry has recently increased significantly, because of its
challenges and its potential impact on the development of embedded
and real-time applications. The goal of the proposed workshop is to
gather researchers working on real-time and embedded Java to identify
the challenging problems that still need to be solved in order to
assure the success of real-time Java as a technology, and to report
results and experiences gained by researchers.

The following two topics are of special interest:

    * Multiprocessor and distributed real-time Java
    * Verification and validation of real-time Java programs

Nowadays, real-time systems demand more functionality than in
previous years. Consequently the execution platforms are often
multiprocessors or distributed systems. Although the Real-Time
Specification for Java has addressed some multiprocessor issues,
other issues are still outstanding. Furthermore, defining the
appropriate RTSJ abstractions for distributed real-time programming
is still an open topic.

Real-time programs are often components of safety-critical systems. 
Such applications requires thorough validation through testing and 
analysis. In this context there is much research within the areas of 
model checking, abstract interpretation, and other analysis techniques 
that apply to real-time Java in general and in particular the specialised 
Safety Critical Java (SCJ) profile.

Submission Requirements
-----------------------

Participants are expected to submit a paper of at most 10 pages (ACM
Conference Format, i.e., two-columns, 10 point font - see formatting
instructions at http://www.acm.org/sigs/publications/proceedings-templates). 
Accepted papers will be published in the ACM International Conference
Proceedings Series via the ACM Digital Library and have to be presented by
one author at the JTRES.  Papers should be submitted through Easychair. 
Please use the submission link:
 
https://www.easychair.org/account/signin.cgi?conf=jtres2011


Papers describing open source projects shall include a description
how to obtain the source and how to run the experiments in the
appendix. The source version for the published paper will be hosted
at the JTRES web site.

Accepted papers will be invited for submission to a special issue of the
Journal on Concurrency and Computation: Practice and Experience.

Topics of interest to this workshop include, but are not limited to:

    * New real-time programming paradigms and language features

    * Industrial experience and practitioner reports

    * Open source solutions for real-time Java

    * Real-time design patterns and programming idioms

    * High-integrity and safety critical system support

    * Java-based real-time operating systems and processors

    * Extensions to the RTSJ

    * Virtual machines and execution environments

    * Memory management and real-time garbage collection

    * Compiler analysis and implementation techniques

    * Scheduling frameworks, feasibility analysis, and timing analysis

    * Reproduction studies

    * Multiprocessor and distributed real-time Java


Important Dates
---------------

    * Paper Submission:                June 26,   2011 
    * Notification of Acceptance:      August 4,  2011
    * Camera Ready Paper Due:          August 20, 2011
    * Workshop:                 September 26-28th 2011


Program Chair:
--------------

    Anders P. Ravn, University of Aalborg, Denmark


Workshop Chair:
--------------

    Andy Wellings, University of York 


Steering Committee:
-------------------

    Andy Wellings, University of York
    Angelo Corsaro, PrismTech
    Corrado Santoro, University of Catania
    Doug Lea, State University of New York at Oswego
    Gregory Bollella, Oracle
    Jan Vitek, Purdue University
    Peter Dibble, TimeSys


Program Committee:
------------------
    
    Ted Baker, Florida State University
    Angelo Corsaro, PrismTech
    Peter Dibble, TimeSys
    Rene R. Hansen, Aalborg University
    Theresa Higuera, Universidad Complutense de Madrid
    Tomas Kalibera, University of Kent
    Christoph Kirsch, University of Salzburg
    Gary T. Leavens, University of Central Florida
    Doug Locke, LC Systems Services
    Kelvin Nilsen, Aonix
    Marek Prochazka, European Space Agency
    Anders Ravn, Aalborg University
    Corrado Santoro, University of Catania
    Martin Schoeberl, Technical University of Denmark
    Fridtjof Siebert, Aicas
    Jan Vitek, Purdue University
    Andy Wellings, University of York
    Lukasz Ziarek, Fiji Systems


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 06:12:26 2011
Return-Path: <java-user-return-49478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 99D201C28
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 06:12:26 +0000 (UTC)
Received: (qmail 42692 invoked by uid 500); 26 Apr 2011 06:12:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42500 invoked by uid 500); 26 Apr 2011 06:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42486 invoked by uid 99); 26 Apr 2011 06:12:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 06:12:21 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 06:12:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 561EAC2129
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 08:11:54 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Iyx6Pjfc4va5 for <java-user@lucene.apache.org>;
	Tue, 26 Apr 2011 08:11:53 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id D8C3FC2127
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 08:11:53 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 26 Apr 2011 08:11:53 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 26 Apr 2011 08:11:51 +0200
Subject: AW: "Umlaute" getting lost
Thread-Topic: "Umlaute" getting lost
Thread-Index: AcwDMXTklpLdx1u/RE6o/73t2NKB7wApn6hg
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A5177F@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51733@Exchange2007.mysigndomain.corp>
	<B73F2E12-2B65-477F-A55F-E683F00C8615@apache.org>
 <BANLkTikkkLPeB+QKfOwcBO3-XJc8-_BM+w@mail.gmail.com>
In-Reply-To: <BANLkTikkkLPeB+QKfOwcBO3-XJc8-_BM+w@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VGVybUFuYWx5emVyIyB0b2tlblN0cmVhbSAoIGZpbmFsIFN0cmluZyBmaWVsZE5hbWUsIGZpbmFs
IFJlYWRlciByZWFkZXIgKQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUb2tl
blN0cmVhbSB0ID0gbmV3IFdoaXRlc3BhY2VBbmFseXplciggVmVyc2lvbi5MVUNFTkVfMzEgKS50
b2tlblN0cmVhbSggZmllbGROYW1lLCBjZik7DQp0ID0gbmV3IFN0b3BGaWx0ZXIoIFZlcnNpb24u
TFVDRU5FXzMxLCB0LCBzdG9wV29yZFNldCwgdHJ1ZSApOw0KdCA9IG5ldyBTaGluZ2xlQW5hbHl6
ZXJXcmFwcGVyKCB0LCA0ICkudG9rZW5TdHJlYW0oIGZpZWxkTmFtZSwgcmVhZGVyICk7DQp0ID0g
bmV3IExvd2VyQ2FzZUZpbHRlciggVmVyc2lvbi5MVUNFTkVfMzEsIHQgKTsNCnJldHVybiB0Ow0K
DQpUaHgNCkNsZW1lbnMNCg0KPiAtLS0tLVVyc3Byw7xuZ2xpY2hlIE5hY2hyaWNodC0tLS0tDQo+
IFZvbjogU2ltb24gV2lsbG5hdWVyIFttYWlsdG86c2ltb24ud2lsbG5hdWVyQGdvb2dsZW1haWwu
Y29tXQ0KPiBHZXNlbmRldDogTW9udGFnLCAyNS4gQXByaWwgMjAxMSAxMjoxMw0KPiBBbjogamF2
YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEJldHJlZmY6IFJlOiAiVW1sYXV0ZSIgZ2V0dGlu
ZyBsb3N0DQo+IA0KPiBPbiBTdW4sIEFwciAyNCwgMjAxMSBhdCA4OjMwIEFNLCBHcmFudCBJbmdl
cnNvbGwgPGdzaW5nZXJzQGFwYWNoZS5vcmc+DQo+IHdyb3RlOg0KPiA+DQo+ID4gT24gQXByIDIx
LCAyMDExLCBhdCA1OjAyIFBNLCBDbGVtZW5zIFd5c3Mgd3JvdGU6DQo+ID4NCj4gPj4gSSBrZWVw
IG15IHNlYXJjaCB0ZXJtcyBpbiBhIGRlZGljYXRlZCBSQU1EaXJlY3RvcnkgKHRoZSB0ZXJtSW5k
ZXgpLg0KPiA+PiBJbiB0aGVyZSBJIHBhbGNlIGFsbCB0aGUgdGVybSBvZiBteSByZWFsIGluZGV4
LiBXaGVuIHB1dHRpbmcgdGhlDQo+ID4+IHRlcm1zIGludG8gdGhlIHRlcm1JbmRleCBJIGNhbiBz
dGlsbCBzZWUgW3VzaW5nIHRoZSBkZWJ1Z2dlcl0gdGhlDQo+ID4+IFVtbGF1dGUgKMOkw7bDvCku
IFVuZm9ydHVuYXRlbHkgd2hlbiBzZWFyY2hpbmcgdGhlIHRlcm1JbmRleCB0aGUNCj4gZG9jdW1l
bnRzIG5vIG1vcmUgY29udGFpbiB0aGVzZSBVbWxhdXRlLg0KPiA+Pg0KPiA+PiBQb3B1bGF0aW5n
IHRoZSB0ZXJtSW5kZXg6DQo+ID4+IHRlcm1JbmRleCA9IG5ldyBSQU1EaXJlY3RvcnkoKTsNCj4g
Pj4gSW5kZXhXcml0ZXJDb25maWcgY29uZmlnID0gbmV3IEluZGV4V3JpdGVyQ29uZmlnKCBWZXJz
aW9uLkxVQ0VORV8zMSwNCj4gPj4gbmV3IFRlcm1BbmFseXplciggbG9jYWxlICkgKTsgdGVybUlu
ZGV4V3JpdGVyID0gbmV3IEluZGV4V3JpdGVyKA0KPiA+PiB0ZXJtSW5kZXgsIGNvbmZpZyApOyBU
ZXJtRW51bSB0RW51bSA9IHJlYWxJbmRleFJlYWRlci50ZXJtcygpOyB3aGlsZQ0KPiA+PiAoIHRF
bnVtLm5leHQoKSApIHsNCj4gPj4gwqAgwqAgwqAgVGVybSB0ID0gdEVudW0udGVybSgpOw0KPiA+
PiDCoCDCoCDCoCBTdHJpbmcgdGVybVRleHQgPSB0LnRleHQoKTsNCj4gPj4gwqAgwqAgwqAgRG9j
dW1lbnQgdGVybURvY3VtZW50ID0gbmV3IERvY3VtZW50KCk7DQo+ID4+IMKgIMKgIMKgIEZpZWxk
IGZpZWxkID0gbmV3IEZpZWxkKCBGSUVMRE5BTUVfVEVSTSwgdGVybVRleHQsDQo+ID4+IEZpZWxk
LlN0b3JlLllFUywgRmllbGQuSW5kZXguQU5BTFlaRUQgKTsNCj4gPj4gwqAgwqAgwqAgdGVybURv
Y3VtZW50LmFkZCggZmllbGQgKTsNCj4gPj4gwqAgwqAgwqAgLy8gYW5kIGFkZCB0ZXJtIGludG8g
dGhlIGluZGV4DQo+ID4+IMKgIMKgIMKgIHRlcm1JbmRleFdyaXRlci5hZGREb2N1bWVudCggdGVy
bURvY3VtZW50ICk7IH0NCj4gPj4gdGVybUluZGV4V3JpdGVyLmNvbW1pdCgpOyB0ZXJtSW5kZXhX
cml0ZXIub3B0aW1pemUoKTsNCj4gPj4gdGVybUluZGV4V3JpdGVyLmNsb3NlKCk7DQo+ID4+DQo+
ID4+IHRlcm1JbmRleFJlYWRlciA9IEluZGV4UmVhZGVyLm9wZW4oIHRlcm1JbmRleCwgdHJ1ZSAp
Ow0KPiA+PiAtLS0tLS0tLS0tIHNlYXJjaGluZyB0ZXJtcw0KPiA+PiBRdWVyeSBxID0gZnV6enkg
PyBuZXcgRnV6enlRdWVyeSggbmV3IFRlcm0oIEZJRUxETkFNRV9URVJNLA0KPiB0ZXJtRmlsdGVy
LnRvTG93ZXJDYXNlKCkgKSApIDoNCj4gPj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAg
wqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgbmV3IFdpbGRjYXJkUXVlcnkoIG5ldyBUZXJtKA0K
PiA+PiBGSUVMRE5BTUVfVEVSTSwgIioiICsgdGVybUZpbHRlci50b0xvd2VyQ2FzZSgpICsgIioi
ICkgKTsgVG9wRG9jcw0KPiA+PiB0b3BEb2NzID0gbmV3IEluZGV4U2VhcmNoZXIoIGdldFRlcm1J
bmRleFJlYWRlcigpICkuc2VhcmNoKCBxLCAxMDAgKTsNCj4gPj4gZm9yICggU2NvcmVEb2MgaGl0
IDogdG9wRG9jcy5zY29yZURvY3MgKSB7DQo+ID4+IMKgIMKgIMKgIERvY3VtZW50IGRvYyA9IGdl
dFRlcm1JbmRleFJlYWRlcigpLmRvY3VtZW50KCBoaXQuZG9jICk7DQo+ID4+IMKgIMKgIMKgIFN0
cmluZyBpbmRleFRlcm0gPSBkb2MuZ2V0KCBGSUVMRE5BTUVfVEVSTSApOw0KPiA+PiDCoCDCoCDC
oCBpZiAoICFyZXR1cm5WYWx1ZS5jb250YWlucyggaW5kZXhUZXJtIMKgKSApDQo+ID4+IMKgIMKg
IMKgIHsNCj4gPj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgcmV0dXJuVmFsdWUuYWRkKCBpbmRleFRl
cm0gKTsNCj4gPj4gwqAgwqAgwqAgfQ0KPiA+PiB9DQo+ID4+IC0tLS0tLS0tLS0NCj4gPj4gVGhl
IFRlcm1BYm5hbHl6ZXIgaXMgdGhlIHNhbWUgYW5hbHl6ZXIgYXMgdGhlIG1haW4gaW5kZXggYW5h
bHl6ZXIgd2l0aA0KPiB0aGUgZXhjZXB0aW9uIHRoYXQgYSBMb3dlckNhc2VGaWx0ZXIgaXMgYXBw
bGllZC4NCj4gPg0KPiA+IFdoYXQgaXMgdGhlIEFuYWx5emVyIGZvciB0aGUgTWFpbiBJbmRleD8g
wqBXaGF0IGlzIHRoZSB0b2tlbml6ZXIgYW5kIHRva2VuDQo+IGZpbHRlcnMgdXNlZD8NCj4gDQo+
IGluIG90aGVyIHdvcmRzLCBjYW4geW91IHByb3ZpZGUgd2hhdCBUZXJtQW5hbHl6ZXIgaXMgY29t
cG9zZWQgb2Y/DQo+IA0KPiANCj4gc2ltb24NCj4gPg0KPiA+IE91dCBvZiBjdXJpb3NpdHksIHdo
YXQgaXMgdGhlIHByb2JsZW0geW91IGFyZSB0cnlpbmcgdG8gc29sdmU/DQo+ID4NCj4gPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+IEdyYW50IEluZ2Vyc29sbA0KPiA+IGh0dHA6Ly93
d3cubHVjaWRpbWFnaW5hdGlvbi5jb20vDQo+ID4NCj4gPg0KPiA+IC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4NCj4gPg0KPiANCj4gLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRv
IHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hl
Lm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-49479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 06:16:21 2011
Return-Path: <java-user-return-49479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 150AD123F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 06:16:21 +0000 (UTC)
Received: (qmail 46619 invoked by uid 500); 26 Apr 2011 06:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46589 invoked by uid 500); 26 Apr 2011 06:16:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46580 invoked by uid 99); 26 Apr 2011 06:16:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 06:16:17 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 06:16:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 04D90C2129
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 08:15:48 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 9713iButSQ8V for <java-user@lucene.apache.org>;
	Tue, 26 Apr 2011 08:15:47 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id B1867C2127
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 08:15:47 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 26 Apr 2011 08:15:47 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 26 Apr 2011 08:15:46 +0200
Subject: AW: "Umlaute" getting lost
Thread-Topic: "Umlaute" getting lost
Thread-Index: AcwCSSA6NfIiNbCqSwmgBO2cLGXWNwBj8m5w
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51784@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51733@Exchange2007.mysigndomain.corp>
 <B73F2E12-2B65-477F-A55F-E683F00C8615@apache.org>
In-Reply-To: <B73F2E12-2B65-477F-A55F-E683F00C8615@apache.org>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

>Out of curiosity, what is the problem you are trying to solve?
I am trying to provide suggestions for search terms/word, such as google do=
es. When the user starts typing the search term, I look up my TermIndex to =
provide possible search terms which fit the characters provided...

Thx
Clemens

> -----Urspr=FCngliche Nachricht-----
> Von: Grant Ingersoll [mailto:gsingers@apache.org]
> Gesendet: Sonntag, 24. April 2011 08:30
> An: java-user@lucene.apache.org
> Betreff: Re: "Umlaute" getting lost
>=20
>=20
> On Apr 21, 2011, at 5:02 PM, Clemens Wyss wrote:
>=20
> > I keep my search terms in a dedicated RAMDirectory (the termIndex).
> > In there I palce all the term of my real index. When putting the terms
> > into the termIndex I can still see [using the debugger] the Umlaute
> > (=E4=F6=FC). Unfortunately when searching the termIndex the documents n=
o
> more contain these Umlaute.
> >
> > Populating the termIndex:
> > termIndex =3D new RAMDirectory();
> > IndexWriterConfig config =3D new IndexWriterConfig( Version.LUCENE_31,
> > new TermAnalyzer( locale ) ); termIndexWriter =3D new IndexWriter(
> > termIndex, config ); TermEnum tEnum =3D realIndexReader.terms(); while =
(
> > tEnum.next() ) {
> > 	Term t =3D tEnum.term();
> > 	String termText =3D t.text();
> > 	Document termDocument =3D new Document();
> > 	Field field =3D new Field( FIELDNAME_TERM, termText, Field.Store.YES,
> Field.Index.ANALYZED );
> > 	termDocument.add( field );
> > 	// and add term into the index
> > 	termIndexWriter.addDocument( termDocument ); }
> > termIndexWriter.commit(); termIndexWriter.optimize();
> > termIndexWriter.close();
> >
> > termIndexReader =3D IndexReader.open( termIndex, true );
> > ---------- searching terms
> > Query q =3D fuzzy ? new FuzzyQuery( new Term( FIELDNAME_TERM,
> termFilter.toLowerCase() ) ) :
> > 					new WildcardQuery( new Term(
> FIELDNAME_TERM, "*" + termFilter.toLowerCase() + "*" ) );
> > TopDocs topDocs =3D new IndexSearcher( getTermIndexReader() ).search( q=
,
> 100 );
> > for ( ScoreDoc hit : topDocs.scoreDocs ) {
> > 	Document doc =3D getTermIndexReader().document( hit.doc );
> > 	String indexTerm =3D doc.get( FIELDNAME_TERM );
> > 	if ( !returnValue.contains( indexTerm  ) )
> > 	{
> > 		returnValue.add( indexTerm );
> > 	}
> > }
> > ----------
> > The TermAbnalyzer is the same analyzer as the main index analyzer with
> the exception that a LowerCaseFilter is applied.
>=20
> What is the Analyzer for the Main Index?  What is the tokenizer and token
> filters used?
>=20
> Out of curiosity, what is the problem you are trying to solve?
>=20
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 11:49:44 2011
Return-Path: <java-user-return-49480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 417841627
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 11:49:44 +0000 (UTC)
Received: (qmail 72657 invoked by uid 500); 26 Apr 2011 11:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72601 invoked by uid 500); 26 Apr 2011 11:49:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72593 invoked by uid 99); 26 Apr 2011 11:49:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 11:49:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 11:49:36 +0000
Received: by yia28 with SMTP id 28so259609yia.35
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 04:49:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=naYnjMIZ5gdZEHrBLbnxyGUPGhuZXrHHfkhj4Nv6ziU=;
        b=E310PNl6cq2g+72t5g0Fpq/SLc6Q7g/Whe2oH6MhuBdb21xxhRUXRLV6o3fAuk/dak
         e18I8zDA7z7D/9lxXoeNbpni5StQJ6XaeMXwKwR1vOteS4zYUqWO/fteyGtyx0WyMGrD
         sT3+EiG7O4HZoO1hZh7j+WE2/rlUTQLlzl/n4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Cu3A0hzwbi/93PKOC+puh4WlmE2lOd3ynRTkPRS9z/G5hMv49cDuQsI7t3yRDoGRkp
         KnYrvWoe17WHEOrp7Se+E/yOOMBw6yIXA0e8e8C8Q35tzAkN4wYKh1tnC7kDctQsHHoQ
         LtDTjZmtmv8CbmPCIV3kKOZwGzXtBjaLTlQ0g=
MIME-Version: 1.0
Received: by 10.236.76.161 with SMTP id b21mr837045yhe.222.1303818556023; Tue,
 26 Apr 2011 04:49:16 -0700 (PDT)
Received: by 10.147.83.15 with HTTP; Tue, 26 Apr 2011 04:49:15 -0700 (PDT)
Date: Tue, 26 Apr 2011 04:49:15 -0700
Message-ID: <BANLkTi=uRcy5JA7VK0y6NZc2chZW5H1ZXg@mail.gmail.com>
Subject: Clustering with Lucene?
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

  I've been researching about clustering with Lucene. Here is what
I've found so far,

1) Lucene clustering with Carrot2 -
http://download.carrot2.org/head/manual/#section.getting-started.lucene
   - but, this seems suitable for only smaller size index (few hundred
documents) -  http://download.carrot2.org/head/manual/#section.advanced-topics.fine-tuning.choosing-algorithm

2) Lucene clustering with Mahout -
http://www.lucidimagination.com/blog/2010/03/16/integrating-apache-mahout-with-apache-lucene-and-solr-part-i-of-3
   - I'm not very sure if this is ready for prime time yet, there
seems to be very few examples on how to do this. Has anyone tried this
with large index size (millions of documents)?

3) Some clustering library in Lucene's contribution folder -
https://issues.apache.org/jira/browse/LUCENE-1421
   - this doesn't seem to be officially supported and last update to
it was an year back. Has anyone tried this?

4) Lucene clustering with Terracotta -
http://orionl.blogspot.com/2006/11/clustering-lucene.html
  - I'm not sure how to do this, there doesn't seem to be much
activity around this.

We got large indexes - over 500 million records, we usually partition
our index after 20 million records. There are total of 20 fields in
our index, of which we are trying to cluster 5 fields. Is there any
clustering solution for Lucene that would work for us? Carrot2 looked
the most active and promising, but it's clearly recommended for a
small index size. Any other suggestions?

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 11:57:39 2011
Return-Path: <java-user-return-49481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3B9CE1793
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 11:57:39 +0000 (UTC)
Received: (qmail 82341 invoked by uid 500); 26 Apr 2011 11:57:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82289 invoked by uid 500); 26 Apr 2011 11:57:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82281 invoked by uid 99); 26 Apr 2011 11:57:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 11:57:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 11:57:31 +0000
Received: by bwz8 with SMTP id 8so694836bwz.35
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 04:57:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=A1+xt0lT4JVA1HJb1FnkKuTpN3TR+WFIqckUlcgt8dY=;
        b=OWY3+pQr6VdelubgWSMIikWDPhp8ZK30Y/7vpsQOQqbR2Q00eVHCN8YG95ULwgX+0N
         uSkD4Pk8edDM+LRq2HDQ4KxgZBq7ppMUqLutWSNntKNum1HjFyIprjgtwdZSdeZukAQC
         mw27aMo9Ka7TPatqHbjp7wZX/Ga0OFxxORWtc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=TVmxIrsE+6Vmqhcjxhr0ViQejSJlrgybfZWTdcl67SXDtmMMf7wNcQpajOMUJr8+NH
         FU4eG8j1ski+ozcMeFnNJAE/pLv3FWs7wuufGPJD45eB3WNfyUb1qwL8lAk7IxhU2O/R
         cw3sN+SLTzYIvdN2WZbvA50IKQfYtvoLEoD0I=
Received: by 10.204.154.194 with SMTP id p2mr599125bkw.58.1303819028348; Tue,
 26 Apr 2011 04:57:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Tue, 26 Apr 2011 04:56:48 -0700 (PDT)
In-Reply-To: <BANLkTi=uRcy5JA7VK0y6NZc2chZW5H1ZXg@mail.gmail.com>
References: <BANLkTi=uRcy5JA7VK0y6NZc2chZW5H1ZXg@mail.gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Tue, 26 Apr 2011 13:56:48 +0200
Message-ID: <BANLkTimneub2ZOwiQzOp_rh=x36iib1UUw@mail.gmail.com>
Subject: Re: Clustering with Lucene?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Can you shed some more light on what you're trying to achieve (what is
the purpose of clustering -- are clusters to be utilized for front-end
user interface, further data mining analysis, etc.)?

With the sizes you report Carrot2 won't work for you, I'm afraid, but
Mahout may. Still, there's plenty of algorithms and preprocessing
options to consider, so if you provide more background somebody may
push you in the right direction.

Dawid

On Tue, Apr 26, 2011 at 1:49 PM, vivek sar <vivextra@gmail.com> wrote:
> Hi,
>
> =C2=A0I've been researching about clustering with Lucene. Here is what
> I've found so far,
>
> 1) Lucene clustering with Carrot2 -
> http://download.carrot2.org/head/manual/#section.getting-started.lucene
> =C2=A0 - but, this seems suitable for only smaller size index (few hundre=
d
> documents) - =C2=A0http://download.carrot2.org/head/manual/#section.advan=
ced-topics.fine-tuning.choosing-algorithm
>
> 2) Lucene clustering with Mahout -
> http://www.lucidimagination.com/blog/2010/03/16/integrating-apache-mahout=
-with-apache-lucene-and-solr-part-i-of-3
> =C2=A0 - I'm not very sure if this is ready for prime time yet, there
> seems to be very few examples on how to do this. Has anyone tried this
> with large index size (millions of documents)?
>
> 3) Some clustering library in Lucene's contribution folder -
> https://issues.apache.org/jira/browse/LUCENE-1421
> =C2=A0 - this doesn't seem to be officially supported and last update to
> it was an year back. Has anyone tried this?
>
> 4) Lucene clustering with Terracotta -
> http://orionl.blogspot.com/2006/11/clustering-lucene.html
> =C2=A0- I'm not sure how to do this, there doesn't seem to be much
> activity around this.
>
> We got large indexes - over 500 million records, we usually partition
> our index after 20 million records. There are total of 20 fields in
> our index, of which we are trying to cluster 5 fields. Is there any
> clustering solution for Lucene that would work for us? Carrot2 looked
> the most active and promising, but it's clearly recommended for a
> small index size. Any other suggestions?
>
> Thanks,
> -vivek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 12:47:07 2011
Return-Path: <java-user-return-49482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AFCB81F2E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 12:47:07 +0000 (UTC)
Received: (qmail 37316 invoked by uid 500); 26 Apr 2011 12:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37259 invoked by uid 500); 26 Apr 2011 12:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37251 invoked by uid 99); 26 Apr 2011 12:47:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 12:47:05 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.149.197] (HELO na3sys009aog107.obsmtp.com) (74.125.149.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 12:46:57 +0000
Received: from mailgw1.sciquest.com ([71.16.107.53]) (using TLSv1) by na3sys009aob107.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTba+qz/piljHMaJLZSpBhHFS8BDj/z8j@postini.com; Tue, 26 Apr 2011 05:46:37 PDT
Received: from SRV-WIN-MAIL01.cary.sciquest.com (srv-win-mail01.cary.sciquest.com [10.0.0.28])
	by mailgw1.sciquest.com (8.13.8/8.13.8/mailgw-20090919) with ESMTP id p3QCkRqn001108
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 08:46:27 -0400
Received: from SRV-WIN-MAIL01.cary.sciquest.com ([10.0.0.28]) by
 srv-win-mail01 ([10.0.0.28]) with mapi; Tue, 26 Apr 2011 08:46:27 -0400
From: Alexey Lef <alexey@sciquest.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 26 Apr 2011 08:46:21 -0400
Subject: IndexReader.close() behavior
Thread-Topic: IndexReader.close() behavior
Thread-Index: AcwED/GIPjNQuoK4Sb2sBX0PCu1adg==
Message-ID: <27BFBC3607BD86489D06533C7F4401B1102FDB7956@srv-win-mail01>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

VGhpcyBpcyB0aGUgY29kZSBpbiBJbmRleFJlYWRlci5jbG9zZSgpOg0KDQogIHB1YmxpYyBmaW5h
bCBzeW5jaHJvbml6ZWQgdm9pZCBjbG9zZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgaWYg
KCFjbG9zZWQpIHsNCiAgICAgIGRlY1JlZigpOw0KICAgICAgY2xvc2VkID0gdHJ1ZTsNCiAgICB9
DQogIH0NCg0KV2hhdCBzdHJpa2VzIG1lIGFzIG9kZCBpcyB0aGF0IOKAnGNsb3NlZOKAnSB2YXJp
YWJsZSBpcyBzZXQgdG8gdHJ1ZSByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGluZGV4IHdhcyBh
Y3R1YWxseSBjbG9zZWQgdXNpbmcgZG9DbG9zZSgpLiBJdCBpcyBjYXVzaW5nIGEgYml0IG9mIGEg
cHJvYmxlbSBpbiB0aGUgZm9sbG93aW5nIHNldHVwLg0KDQpXZSBoYXZlIG1hbnkgaW5kZXhlcy4g
U29tZSBvZiB0aGVzZSBpbmRleGVzIGFyZSBrZXB0IG9wZW4gYW5kIEluZGV4UmVhZGVyIGlzIHJl
dXNlZCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgc29tZSBhcmUgb3BlbiBqdXN0IGZvciBhIHNp
bmdsZSBzZWFyY2guIFNvbWUgb2YgdGhlbSBhcmUgY29tYmluZWQgdG9nZXRoZXIgYXQgdGhlIHNl
YXJjaCB0aW1lIGRlcGVuZGluZyBvbiB0aGUgdXNlciBwZXJmb3JtaW5nIHRoZSBzZWFyY2guIEZv
ciBldmVyeSBzZWFyY2gsIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSByZWxldmFudCBJbmRleFJlYWRl
ciwgd2UgY3JlYXRlIGEgbmV3IE11bHRpUmVhZGVyIGluc3RhbmNlIGFuZCBjbG9zZSBpdCBvbmNl
IHRoZSBzZWFyY2ggaXMgZG9uZS4gU2luY2UgcmVmZXJlbmNlIGNvdW50aW5nIGlzIGFscmVhZHkg
YnVpbHQgaW50byB0aGUgSW5kZXhSZWFkZXIsIEkgZmlndXJlZCBJIGNhbiBqdXN0IGNhbGwgaW5j
UmVmKCkgd2hlbiB1c2luZyBhIGNhY2hlZCBJbmRleFJlYWRlciBhbmQgdGhlbiBjYWxsIGNsb3Nl
KCkgb3IgbGV0IE11bHRpUmVhZGVyIGNhbGwgY2xvc2UoKSBvbiBpdCBvbmNlIGl0IGlzIGRvbmUu
IFRoZSBwcm9ibGVtIGlzIG9ubHkgdGhlIGZpcnN0IGNsb3NlKCkgY2FsbHMgZGVjUmVmKCksc3Vi
c2VxdWVudCBjYWxscyBkbyBub3RoaW5nLCBhbmQgaWYgdGhlcmUgd2VyZSBtdWx0aXBsZSBpbmNS
ZWYoKSBjYWxscywgdGhlIEluZGV4UmVhZGVyIGVuZHMgdXAgYmVpbmcgbGVmdCBvcGVuLg0KDQpJ
IHRob3VnaHQgb2YgdXNpbmcgZGVjUmVmKCkgaW5zdGVhZCBvZiBjbG9zZSgpIGJ1dCBNdWx0aVJl
YWRlciBkb2VzbuKAmXQgaGF2ZSBhbiBvcHRpb24gb2YgY2FsbGluZyBkZWNSZWYoKSBvbiBzdWJy
ZWFkZXJzLCBvbmx5IGNsb3NlKCkuDQoNClRoZSBmb2xsb3dpbmcgY2hhbmdlIHRvIEluZGV4UmVh
ZGVyLmNsb3NlKCkgZml4ZXMgdGhlIHByb2JsZW06DQoNCiAgcHVibGljIGZpbmFsIHN5bmNocm9u
aXplZCB2b2lkIGNsb3NlKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICBpZiAocmVmQ291bnQu
Z2V0KCkgPiAwKSB7DQogICAgICBkZWNSZWYoKTsNCiAgICB9DQogIH0NCg0KSXQgc2VlbXMgbW9y
ZSBsb2dpY2FsLiBBbHNvIGl0IGlzIG5vdyBjb25zaXN0ZW50IHdpdGggZW5zdXJlT3BlbigpIG1l
dGhvZC4NCg0KQW0gSSBtaXNzaW5nIHNvbWV0aGluZyBoZXJlPyBJcyB0aGVyZSBhIGdvb2QgcmVh
c29uIHRvIHByZXZlbnQgY2xvc2UoKSBmcm9tIGRvaW5nIGFueXRoaW5nIGFmdGVyIHRoZSBmaXJz
dCBjYWxsIGV2ZW4gaWYgdGhlIEluZGV4UmVhZGVyIHdhcyBub3QgYWN0dWFsbHkgY2xvc2VkPyBE
b2VzIGl0IGV2ZW4gbmVlZCB0byBiZSBzeW5jaHJvbml6ZWQgaWYgZGVjUmVmKCkgZG9lcyBhbGwg
dGhlIHdvcms/DQoNClRoYW5rcywNCg0KQWxleGV5DQoNCg0K


From java-user-return-49483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 13:58:27 2011
Return-Path: <java-user-return-49483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B2D511B7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 13:58:27 +0000 (UTC)
Received: (qmail 52569 invoked by uid 500); 26 Apr 2011 13:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52457 invoked by uid 500); 26 Apr 2011 13:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52438 invoked by uid 99); 26 Apr 2011 13:58:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 13:58:24 +0000
X-ASF-Spam-Status: No, hits=0.2 required=5.0
	tests=ASF_LIST_OPS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [182.71.53.3] (HELO mail.otssolutions.com) (182.71.53.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 13:58:19 +0000
Received: from MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a]) by
 MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a%11]) with mapi; Tue, 26 Apr
 2011 19:25:25 +0530
From: Ranjit Kumar <Ranjit.Kumar@otssolutions.com>
To: "java-user-help@lucene.apache.org" <java-user-help@lucene.apache.org>,
	"java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: lucene 3.0.3 | QueryParser | MultiFieldQueryParser 
Thread-Topic: lucene 3.0.3 | QueryParser | MultiFieldQueryParser 
Thread-Index: AcwEGYtb980m/6A+QXSR/yPTXl4D+g==
Date: Tue, 26 Apr 2011 13:55:04 +0000
Message-ID: <AD21521D44870544AC66F4FDFC0A474C5356C332@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: multipart/alternative;
	boundary="_000_AD21521D44870544AC66F4FDFC0A474C5356C332MAILotssolution_"
MIME-Version: 1.0

--_000_AD21521D44870544AC66F4FDFC0A474C5356C332MAILotssolution_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have created my own custom analyzer and uses jFlex to made search for c#,=
 .net, c++ etc.

While I am trying to search c#, .net, c++ QueryParser parse .net to .net an=
d C++ to C++. So it works fine. But in case of C# QueryParser parse it to C=
 which makes trouble for me.

Also tried to use MultiFieldQueryParser but it also do the same.

Any help or suggestion will be appreciated!!!


Thanks & Regards,
Ranjit Kumar

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Pr=
ivate, Confidential and Privileged. This e-mail and any files and attachmen=
ts transmitted with it are confidential and/or privileged. They are intende=
d solely for the use of the intended recipient. The content of this e-mail =
and any file or attachment transmitted with it may have been changed or alt=
ered without the consent of the author. If you are not the intended recipie=
nt, please note that any review, dissemination, disclosure, alteration, pri=
nting, circulation or Transmission of this e-mail and/or any file or attach=
ment transmitted with it, is prohibited and may be unlawful. If you have re=
ceived this e-mail or any file or attachment transmitted with it in error p=
lease notify OTS Solutions at info@otssolutions.com =3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

--_000_AD21521D44870544AC66F4FDFC0A474C5356C332MAILotssolution_--

From java-user-return-49484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 14:22:40 2011
Return-Path: <java-user-return-49484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 56C2E1B2E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 14:22:40 +0000 (UTC)
Received: (qmail 90909 invoked by uid 500); 26 Apr 2011 14:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90868 invoked by uid 500); 26 Apr 2011 14:22:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90860 invoked by uid 99); 26 Apr 2011 14:22:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 14:22:38 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 14:22:29 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p3QEM7lM007415
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 10:22:08 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Tue, 26 Apr 2011
 10:22:08 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 26 Apr 2011 10:21:19 -0400
Subject: RE: lucene 3.0.3 | QueryParser | MultiFieldQueryParser 
Thread-Topic: lucene 3.0.3 | QueryParser | MultiFieldQueryParser 
Thread-Index: AcwEGYtb980m/6A+QXSR/yPTXl4D+gAAO/FQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE70D3@suex07-mbx-03.ad.syr.edu>
References: <AD21521D44870544AC66F4FDFC0A474C5356C332@MAIL.otssolutions.com>
In-Reply-To: <AD21521D44870544AC66F4FDFC0A474C5356C332@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-26_05:2011-04-26,2011-04-26,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgUmFuaml0LA0KDQpJIHN1c3BlY3QgdGhlIHByb2JsZW0gaXMgbm90IFF1ZXJ5UGFyc2VyLCBz
aW5jZSB0aGUgPFRFUk0+IGRlZmluaXRpb24gaW5jbHVkZXMgdGhlICcjJyBjaGFyYWN0ZXIgKGZy
b20gPGh0dHA6Ly9zdm4uYXBhY2hlLm9yZy92aWV3dmMvbHVjZW5lL2phdmEvdGFncy9sdWNlbmVf
M18wXzMvc3JjL2phdmEvb3JnL2FwYWNoZS9sdWNlbmUvcXVlcnlQYXJzZXIvUXVlcnlQYXJzZXIu
amo/dmlldz1tYXJrdXAjbDExMzY+KToNCg0KCXwgPCNfVEVSTV9TVEFSVF9DSEFSOiAoIH5bICIg
IiwgIlx0IiwgIlxuIiwgIlxyIiwgIlx1MzAwMCIsICIrIiwgIi0iLA0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIiEiLCAiKCIsICIpIiwgIjoiLCAiXiIsICJbIiwgIl0iLCAiXCIi
LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInsiLCAifSIsICJ+IiwgIioiLCAi
PyIsICJcXCIgXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDxfRVNDQVBFRF9DSEFS
PiApID4NCgl8IDwjX1RFUk1fQ0hBUjogKCA8X1RFUk1fU1RBUlRfQ0hBUj4gfCA8X0VTQ0FQRURf
Q0hBUj4gfCAiLSIgfCAiKyIgKSA+DQoJLi4uDQoJfCA8VEVSTTogPF9URVJNX1NUQVJUX0NIQVI+
ICg8X1RFUk1fQ0hBUj4pKiA+DQoNCkFyZSB5b3Ugc3VyZSB0aGF0IHlvdXIgY3VzdG9tIEpGbGV4
IEFuYWx5emVyIGlzIG5vdCBiZWluZyBnaXZlbiAnQyMnIGFuZCB0aGVuIHN0cmlwcGluZyBvZmYg
dGhlICcjJz8NCg0KWW91IGNvdWxkIHdvcmsgYXJvdW5kIHRoaXMgaXNzdWUgYnkgcHJlLXByb2Nl
c3NpbmcgeW91ciBxdWVyeSAoYW5kIHlvdXIgZG9jdW1lbnRzKSB0byByZXBsYWNlIEMjIHdpdGgg
Y3NoYXJwIG9yIHNvbWV0aGluZyBsaWtlIGl0IHRoYXQgd291bGQgbm90IGJlIGJyb2tlbiB1cC4N
Cg0KU3RldmUNCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBSYW5qaXQg
S3VtYXIgW21haWx0bzpSYW5qaXQuS3VtYXJAb3Rzc29sdXRpb25zLmNvbV0NCj4gU2VudDogVHVl
c2RheSwgQXByaWwgMjYsIDIwMTEgOTo1NSBBTQ0KPiBUbzogamF2YS11c2VyLWhlbHBAbHVjZW5l
LmFwYWNoZS5vcmc7IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBsdWNl
bmUgMy4wLjMgfCBRdWVyeVBhcnNlciB8IE11bHRpRmllbGRRdWVyeVBhcnNlcg0KPiANCj4gSGks
DQo+IA0KPiBJIGhhdmUgY3JlYXRlZCBteSBvd24gY3VzdG9tIGFuYWx5emVyIGFuZCB1c2VzIGpG
bGV4IHRvIG1hZGUgc2VhcmNoIGZvcg0KPiBjIywgLm5ldCwgYysrIGV0Yy4NCj4gDQo+IFdoaWxl
IEkgYW0gdHJ5aW5nIHRvIHNlYXJjaCBjIywgLm5ldCwgYysrIFF1ZXJ5UGFyc2VyIHBhcnNlIC5u
ZXQgdG8gLm5ldA0KPiBhbmQgQysrIHRvIEMrKy4gU28gaXQgd29ya3MgZmluZS4gQnV0IGluIGNh
c2Ugb2YgQyMgUXVlcnlQYXJzZXIgcGFyc2UgaXQNCj4gdG8gQyB3aGljaCBtYWtlcyB0cm91Ymxl
IGZvciBtZS4NCj4gDQo+IEFsc28gdHJpZWQgdG8gdXNlIE11bHRpRmllbGRRdWVyeVBhcnNlciBi
dXQgaXQgYWxzbyBkbyB0aGUgc2FtZS4NCj4gDQo+IEFueSBoZWxwIG9yIHN1Z2dlc3Rpb24gd2ls
bCBiZSBhcHByZWNpYXRlZCEhIQ0KPiANCj4gDQo+IFRoYW5rcyAmIFJlZ2FyZHMsDQo+IFJhbmpp
dCBLdW1hcg0KPiANCj4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KPiA9PT09PT09PT09PT09PT09PT09PT09
PT09PSBQcml2YXRlLCBDb25maWRlbnRpYWwgYW5kIFByaXZpbGVnZWQuIFRoaXMgZS0NCj4gbWFp
bCBhbmQgYW55IGZpbGVzIGFuZCBhdHRhY2htZW50cyB0cmFuc21pdHRlZCB3aXRoIGl0IGFyZSBj
b25maWRlbnRpYWwNCj4gYW5kL29yIHByaXZpbGVnZWQuIFRoZXkgYXJlIGludGVuZGVkIHNvbGVs
eSBmb3IgdGhlIHVzZSBvZiB0aGUgaW50ZW5kZWQNCj4gcmVjaXBpZW50LiBUaGUgY29udGVudCBv
ZiB0aGlzIGUtbWFpbCBhbmQgYW55IGZpbGUgb3IgYXR0YWNobWVudA0KPiB0cmFuc21pdHRlZCB3
aXRoIGl0IG1heSBoYXZlIGJlZW4gY2hhbmdlZCBvciBhbHRlcmVkIHdpdGhvdXQgdGhlIGNvbnNl
bnQNCj4gb2YgdGhlIGF1dGhvci4gSWYgeW91IGFyZSBub3QgdGhlIGludGVuZGVkIHJlY2lwaWVu
dCwgcGxlYXNlIG5vdGUgdGhhdA0KPiBhbnkgcmV2aWV3LCBkaXNzZW1pbmF0aW9uLCBkaXNjbG9z
dXJlLCBhbHRlcmF0aW9uLCBwcmludGluZywgY2lyY3VsYXRpb24NCj4gb3IgVHJhbnNtaXNzaW9u
IG9mIHRoaXMgZS1tYWlsIGFuZC9vciBhbnkgZmlsZSBvciBhdHRhY2htZW50IHRyYW5zbWl0dGVk
DQo+IHdpdGggaXQsIGlzIHByb2hpYml0ZWQgYW5kIG1heSBiZSB1bmxhd2Z1bC4gSWYgeW91IGhh
dmUgcmVjZWl2ZWQgdGhpcyBlLQ0KPiBtYWlsIG9yIGFueSBmaWxlIG9yIGF0dGFjaG1lbnQgdHJh
bnNtaXR0ZWQgd2l0aCBpdCBpbiBlcnJvciBwbGVhc2Ugbm90aWZ5DQo+IE9UUyBTb2x1dGlvbnMg
YXQgaW5mb0BvdHNzb2x1dGlvbnMuY29tDQo+ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCj4gPT09PT09PT09
PT09PT09PT09PT09PT09PT0NCg==


From java-user-return-49485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 15:49:29 2011
Return-Path: <java-user-return-49485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 56809170F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 15:49:29 +0000 (UTC)
Received: (qmail 33567 invoked by uid 500); 26 Apr 2011 15:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33517 invoked by uid 500); 26 Apr 2011 15:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33509 invoked by uid 99); 26 Apr 2011 15:49:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 15:49:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haichengyl@sina.com designates 202.108.3.165 as permitted sender)
Received: from [202.108.3.165] (HELO smtp3-76.sina.com.cn) (202.108.3.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 15:49:20 +0000
Received: from irxd5-182.sinamail.sina.com.cn (unknown [10.55.5.182])
	by smtp3-76.sina.com.cn (SINAMAIL) with ESMTP id 2BAFBC7D413
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 23:48:57 +0800 (CST)
X-Originating-IP: [124.93.248.16]
Received: from unknown (HELO PC-201010190046) ([124.93.248.16])
  by irxd5-182.sinamail.sina.com.cn with ESMTP; 26 Apr 2011 23:48:57 +0800
Date: Tue, 26 Apr 2011 23:48:57 +0800
From: "haichengyl" <haichengyl@sina.com>
To: "java-user" <java-user@lucene.apache.org>
References: <AD21521D44870544AC66F4FDFC0A474C5356C332@MAIL.otssolutions.com>
Subject: Re: lucene 3.0.3 | QueryParser | MultiFieldQueryParser
Message-ID: <201104262348569848325@sina.com>
X-mailer: Foxmail 6, 15, 201, 23 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon185684126586_====="

--=====003_Dragon185684126586_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

aGVscCB0byBnaXZlIHNvbWUgZGV0YWlsIGluZm8gDQoNCg0KMjAxMS0wNC0yNiANCg0KDQoNCmhh
aWNoZW5neWwgDQoNCg0KDQq3orz+yMujuiBSYW5qaXQgS3VtYXIgDQq3osvNyrG85KO6IDIwMTEt
MDQtMjYgIDIxOjU1OjA0IA0KytW8/sjLo7ogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5v
cmc7IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZyANCrOty82juiANCtb3zOKjuiBsdWNlbmUg
My4wLjMgfCBRdWVyeVBhcnNlciB8IE11bHRpRmllbGRRdWVyeVBhcnNlciANCiANCkhpLA0KSSBo
YXZlIGNyZWF0ZWQgbXkgb3duIGN1c3RvbSBhbmFseXplciBhbmQgdXNlcyBqRmxleCB0byBtYWRl
IHNlYXJjaCBmb3IgYyMsIC5uZXQsIGMrKyBldGMuDQpXaGlsZSBJIGFtIHRyeWluZyB0byBzZWFy
Y2ggYyMsIC5uZXQsIGMrKyBRdWVyeVBhcnNlciBwYXJzZSAubmV0IHRvIC5uZXQgYW5kIEMrKyB0
byBDKysuIFNvIGl0IHdvcmtzIGZpbmUuIEJ1dCBpbiBjYXNlIG9mIEMjIFF1ZXJ5UGFyc2VyIHBh
cnNlIGl0IHRvIEMgd2hpY2ggbWFrZXMgdHJvdWJsZSBmb3IgbWUuDQpBbHNvIHRyaWVkIHRvIHVz
ZSBNdWx0aUZpZWxkUXVlcnlQYXJzZXIgYnV0IGl0IGFsc28gZG8gdGhlIHNhbWUuDQpBbnkgaGVs
cCBvciBzdWdnZXN0aW9uIHdpbGwgYmUgYXBwcmVjaWF0ZWQhISENClRoYW5rcyAmIFJlZ2FyZHMs
DQpSYW5qaXQgS3VtYXINCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PSBQcml2YXRlLCBDb25maWRlbnRpYWwgYW5kIFByaXZpbGVnZWQuIFRoaXMgZS1tYWlsIGFuZCBh
bnkgZmlsZXMgYW5kIGF0dGFjaG1lbnRzIHRyYW5zbWl0dGVkIHdpdGggaXQgYXJlIGNvbmZpZGVu
dGlhbCBhbmQvb3IgcHJpdmlsZWdlZC4gVGhleSBhcmUgaW50ZW5kZWQgc29sZWx5IGZvciB0aGUg
dXNlIG9mIHRoZSBpbnRlbmRlZCByZWNpcGllbnQuIFRoZSBjb250ZW50IG9mIHRoaXMgZS1tYWls
IGFuZCBhbnkgZmlsZSBvciBhdHRhY2htZW50IHRyYW5zbWl0dGVkIHdpdGggaXQgbWF5IGhhdmUg
YmVlbiBjaGFuZ2VkIG9yIGFsdGVyZWQgd2l0aG91dCB0aGUgY29uc2VudCBvZiB0aGUgYXV0aG9y
LiBJZiB5b3UgYXJlIG5vdCB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LCBwbGVhc2Ugbm90ZSB0aGF0
IGFueSByZXZpZXcsIGRpc3NlbWluYXRpb24sIGRpc2Nsb3N1cmUsIGFsdGVyYXRpb24sIHByaW50
aW5nLCBjaXJjdWxhdGlvbiBvciBUcmFuc21pc3Npb24gb2YgdGhpcyBlLW1haWwgYW5kL29yIGFu
eSBmaWxlIG9yIGF0dGFjaG1lbnQgdHJhbnNtaXR0ZWQgd2l0aCBpdCwgaXMgcHJvaGliaXRlZCBh
bmQgbWF5IGJlIHVubGF3ZnVsLiBJZiB5b3UgaGF2ZSByZWNlaXZlZCB0aGlzIGUtbWFpbCBvciBh
bnkgZmlsZSBvciBhdHRhY2htZW50IHRyYW5zbWl0dGVkIHdpdGggaXQgaW4gZXJyb3IgcGxlYXNl
IG5vdGlmeSBPVFMgU29sdXRpb25zIGF0IGluZm9Ab3Rzc29sdXRpb25zLmNvbSA9PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg==

--=====003_Dragon185684126586_=====--


From java-user-return-49486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 15:50:00 2011
Return-Path: <java-user-return-49486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C2241767
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 15:50:00 +0000 (UTC)
Received: (qmail 36355 invoked by uid 500); 26 Apr 2011 15:49:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36315 invoked by uid 500); 26 Apr 2011 15:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36307 invoked by uid 99); 26 Apr 2011 15:49:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 15:49:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haichengyl@sina.com designates 202.108.3.165 as permitted sender)
Received: from [202.108.3.165] (HELO smtp3-73.sina.com.cn) (202.108.3.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 15:49:51 +0000
Received: from irxd5-182.sinamail.sina.com.cn (unknown [10.55.5.182])
	by smtp3-73.sina.com.cn (SINAMAIL) with ESMTP id 2BB8EABD9EE
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 23:49:29 +0800 (CST)
X-Originating-IP: [124.93.248.16]
Received: from unknown (HELO PC-201010190046) ([124.93.248.16])
  by irxd5-182.sinamail.sina.com.cn with ESMTP; 26 Apr 2011 23:49:29 +0800
Date: Tue, 26 Apr 2011 23:49:29 +0800
From: "haichengyl" <haichengyl@sina.com>
To: "java-user" <java-user@lucene.apache.org>
References: <AD21521D44870544AC66F4FDFC0A474C5356C332@MAIL.otssolutions.com>
Subject: Re: lucene 3.0.3 | QueryParser | MultiFieldQueryParser
Message-ID: <201104262349293434564@sina.com>
X-mailer: Foxmail 6, 15, 201, 23 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon487880344318_====="

--=====003_Dragon487880344318_=====
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64

aG9wZSB0byBzZW50IHNvbWUgZGV0YWlsIGFib3V0IGl0Lg0KDQoNCjIwMTEtMDQtMjYgDQoNCg0K
DQpoYWljaGVuZ3lsIA0KDQoNCg0Kt6K8/sjLo7ogUmFuaml0IEt1bWFyIA0Kt6LLzcqxvOSjuiAy
MDExLTA0LTI2ICAyMTo1NTowNCANCsrVvP7Iy6O6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnOyBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcgDQqzrcvNo7ogDQrW98zio7ogbHVj
ZW5lIDMuMC4zIHwgUXVlcnlQYXJzZXIgfCBNdWx0aUZpZWxkUXVlcnlQYXJzZXIgDQogDQpIaSwN
CkkgaGF2ZSBjcmVhdGVkIG15IG93biBjdXN0b20gYW5hbHl6ZXIgYW5kIHVzZXMgakZsZXggdG8g
bWFkZSBzZWFyY2ggZm9yIGMjLCAubmV0LCBjKysgZXRjLg0KV2hpbGUgSSBhbSB0cnlpbmcgdG8g
c2VhcmNoIGMjLCAubmV0LCBjKysgUXVlcnlQYXJzZXIgcGFyc2UgLm5ldCB0byAubmV0IGFuZCBD
KysgdG8gQysrLiBTbyBpdCB3b3JrcyBmaW5lLiBCdXQgaW4gY2FzZSBvZiBDIyBRdWVyeVBhcnNl
ciBwYXJzZSBpdCB0byBDIHdoaWNoIG1ha2VzIHRyb3VibGUgZm9yIG1lLg0KQWxzbyB0cmllZCB0
byB1c2UgTXVsdGlGaWVsZFF1ZXJ5UGFyc2VyIGJ1dCBpdCBhbHNvIGRvIHRoZSBzYW1lLg0KQW55
IGhlbHAgb3Igc3VnZ2VzdGlvbiB3aWxsIGJlIGFwcHJlY2lhdGVkISEhDQpUaGFua3MgJiBSZWdh
cmRzLA0KUmFuaml0IEt1bWFyDQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT0gUHJpdmF0ZSwgQ29uZmlkZW50aWFsIGFuZCBQcml2aWxlZ2VkLiBUaGlzIGUtbWFpbCBh
bmQgYW55IGZpbGVzIGFuZCBhdHRhY2htZW50cyB0cmFuc21pdHRlZCB3aXRoIGl0IGFyZSBjb25m
aWRlbnRpYWwgYW5kL29yIHByaXZpbGVnZWQuIFRoZXkgYXJlIGludGVuZGVkIHNvbGVseSBmb3Ig
dGhlIHVzZSBvZiB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LiBUaGUgY29udGVudCBvZiB0aGlzIGUt
bWFpbCBhbmQgYW55IGZpbGUgb3IgYXR0YWNobWVudCB0cmFuc21pdHRlZCB3aXRoIGl0IG1heSBo
YXZlIGJlZW4gY2hhbmdlZCBvciBhbHRlcmVkIHdpdGhvdXQgdGhlIGNvbnNlbnQgb2YgdGhlIGF1
dGhvci4gSWYgeW91IGFyZSBub3QgdGhlIGludGVuZGVkIHJlY2lwaWVudCwgcGxlYXNlIG5vdGUg
dGhhdCBhbnkgcmV2aWV3LCBkaXNzZW1pbmF0aW9uLCBkaXNjbG9zdXJlLCBhbHRlcmF0aW9uLCBw
cmludGluZywgY2lyY3VsYXRpb24gb3IgVHJhbnNtaXNzaW9uIG9mIHRoaXMgZS1tYWlsIGFuZC9v
ciBhbnkgZmlsZSBvciBhdHRhY2htZW50IHRyYW5zbWl0dGVkIHdpdGggaXQsIGlzIHByb2hpYml0
ZWQgYW5kIG1heSBiZSB1bmxhd2Z1bC4gSWYgeW91IGhhdmUgcmVjZWl2ZWQgdGhpcyBlLW1haWwg
b3IgYW55IGZpbGUgb3IgYXR0YWNobWVudCB0cmFuc21pdHRlZCB3aXRoIGl0IGluIGVycm9yIHBs
ZWFzZSBub3RpZnkgT1RTIFNvbHV0aW9ucyBhdCBpbmZvQG90c3NvbHV0aW9ucy5jb20gPT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQo=

--=====003_Dragon487880344318_=====--


From java-user-return-49487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 17:50:26 2011
Return-Path: <java-user-return-49487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C3B41346
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 17:50:26 +0000 (UTC)
Received: (qmail 24898 invoked by uid 500); 26 Apr 2011 17:50:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24793 invoked by uid 500); 26 Apr 2011 17:50:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24785 invoked by uid 99); 26 Apr 2011 17:50:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 17:50:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 17:50:18 +0000
Received: by wwi18 with SMTP id 18so672816wwi.5
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 10:49:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.173.4 with SMTP id n4mr1105641wbz.132.1303840197623; Tue,
 26 Apr 2011 10:49:57 -0700 (PDT)
Received: by 10.227.3.16 with HTTP; Tue, 26 Apr 2011 10:49:57 -0700 (PDT)
In-Reply-To: <27BFBC3607BD86489D06533C7F4401B1102FDB7956@srv-win-mail01>
References: <27BFBC3607BD86489D06533C7F4401B1102FDB7956@srv-win-mail01>
Date: Tue, 26 Apr 2011 13:49:57 -0400
Message-ID: <BANLkTikg5z03TXWiVKsROp5XMXFCPiEweQ@mail.gmail.com>
Subject: Re: IndexReader.close() behavior
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

The code is tricky, but it's intentional.

We always set closed to true to guard against double close, ie, it's
fine to double-close an IndexReader, ie doing so will not "steal"
references from other places that have incRef'd the reader.

Can you pass closeSubReaders=3Dfalse when you create your MultiReader?
This way, the MultiReader incRefs on init and decRefs on close.

But: what Lucene version are you using...?

Mike

http://blog.mikemccandless.com

On Tue, Apr 26, 2011 at 8:46 AM, Alexey Lef <alexey@sciquest.com> wrote:
> This is the code in IndexReader.close():
>
> =A0public final synchronized void close() throws IOException {
> =A0 =A0if (!closed) {
> =A0 =A0 =A0decRef();
> =A0 =A0 =A0closed =3D true;
> =A0 =A0}
> =A0}
>
> What strikes me as odd is that =93closed=94 variable is set to true regar=
dless of whether the index was actually closed using doClose(). It is causi=
ng a bit of a problem in the following setup.
>
> We have many indexes. Some of these indexes are kept open and IndexReader=
 is reused for performance reasons, some are open just for a single search.=
 Some of them are combined together at the search time depending on the use=
r performing the search. For every search, if there are multiple relevant I=
ndexReader, we create a new MultiReader instance and close it once the sear=
ch is done. Since reference counting is already built into the IndexReader,=
 I figured I can just call incRef() when using a cached IndexReader and the=
n call close() or let MultiReader call close() on it once it is done. The p=
roblem is only the first close() calls decRef(),subsequent calls do nothing=
, and if there were multiple incRef() calls, the IndexReader ends up being =
left open.
>
> I thought of using decRef() instead of close() but MultiReader doesn=92t =
have an option of calling decRef() on subreaders, only close().
>
> The following change to IndexReader.close() fixes the problem:
>
> =A0public final synchronized void close() throws IOException {
> =A0 =A0if (refCount.get() > 0) {
> =A0 =A0 =A0decRef();
> =A0 =A0}
> =A0}
>
> It seems more logical. Also it is now consistent with ensureOpen() method=
.
>
> Am I missing something here? Is there a good reason to prevent close() fr=
om doing anything after the first call even if the IndexReader was not actu=
ally closed? Does it even need to be synchronized if decRef() does all the =
work?
>
> Thanks,
>
> Alexey
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 18:42:38 2011
Return-Path: <java-user-return-49488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 778861052
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 18:42:38 +0000 (UTC)
Received: (qmail 7919 invoked by uid 500); 26 Apr 2011 18:42:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7862 invoked by uid 500); 26 Apr 2011 18:42:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7853 invoked by uid 99); 26 Apr 2011 18:42:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 18:42:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 18:42:31 +0000
Received: by yxd5 with SMTP id 5so255088yxd.35
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 11:42:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=WTM6UXAwUg2p+TMIwa4S6JE2TGsLTqqiXD8ahYHOzNQ=;
        b=jh9xpScBLsS2YOplYx0jEfn2CTEvE665v/XcyjglOMtLfBWBCYUlb8cej9Cashx3k6
         W1urcoMma48tqKragq3UzfzqH5UhqUHE2irxSmZ+HYir1p26iuqfeyLFgdLbs5e3x1f7
         CQvuSMHlMX7KPAdmjQmrLyJxsfKp3RN5PDwnk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=NCAFKRdH93VHUKfsA4HoBBmOMD/in0XiGBI7xtadP90YltNOPs5DIojYzMd9Ofm6GO
         e7orxJnQtatSfVgyrZSzc4QMmSoy1gkV+Tzz08FpPKvzjwLq87DlCA4PbFsqW7fMvb3W
         +HEjBC3+rmk2bftt1+Ks9ngOT1w7fgVrWq42E=
MIME-Version: 1.0
Received: by 10.236.31.103 with SMTP id l67mr1391743yha.21.1303843330764; Tue,
 26 Apr 2011 11:42:10 -0700 (PDT)
Received: by 10.147.83.15 with HTTP; Tue, 26 Apr 2011 11:42:10 -0700 (PDT)
In-Reply-To: <BANLkTimneub2ZOwiQzOp_rh=x36iib1UUw@mail.gmail.com>
References: <BANLkTi=uRcy5JA7VK0y6NZc2chZW5H1ZXg@mail.gmail.com>
	<BANLkTimneub2ZOwiQzOp_rh=x36iib1UUw@mail.gmail.com>
Date: Tue, 26 Apr 2011 11:42:10 -0700
Message-ID: <BANLkTimuCHaCvnmpHBbfJTFdkzQr9du_Bg@mail.gmail.com>
Subject: Re: Clustering with Lucene?
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks Dawid for the reply. Here is what we are trying to do,

1) We index around 20 fields, of that we want to have grouping option
for five of them. For ex., user can search on name of the city and we
should have option to group by products available in that city (and
vice-versa).
2) We also need an aggregation facility, which would allow to
aggregate certain field value from that group. For ex., sum the qty
for all the products in a category. The aggregation may not be part of
clustering, but could be something add-on to it.

Any suggestions on what algorithm or even Mahout may help in this scenario.

Thanks,
-vivek

On Tue, Apr 26, 2011 at 4:56 AM, Dawid Weiss <dawid.weiss@gmail.com> wrote:
> Can you shed some more light on what you're trying to achieve (what is
> the purpose of clustering -- are clusters to be utilized for front-end
> user interface, further data mining analysis, etc.)?
>
> With the sizes you report Carrot2 won't work for you, I'm afraid, but
> Mahout may. Still, there's plenty of algorithms and preprocessing
> options to consider, so if you provide more background somebody may
> push you in the right direction.
>
> Dawid
>
> On Tue, Apr 26, 2011 at 1:49 PM, vivek sar <vivextra@gmail.com> wrote:
>> Hi,
>>
>> =A0I've been researching about clustering with Lucene. Here is what
>> I've found so far,
>>
>> 1) Lucene clustering with Carrot2 -
>> http://download.carrot2.org/head/manual/#section.getting-started.lucene
>> =A0 - but, this seems suitable for only smaller size index (few hundred
>> documents) - =A0http://download.carrot2.org/head/manual/#section.advance=
d-topics.fine-tuning.choosing-algorithm
>>
>> 2) Lucene clustering with Mahout -
>> http://www.lucidimagination.com/blog/2010/03/16/integrating-apache-mahou=
t-with-apache-lucene-and-solr-part-i-of-3
>> =A0 - I'm not very sure if this is ready for prime time yet, there
>> seems to be very few examples on how to do this. Has anyone tried this
>> with large index size (millions of documents)?
>>
>> 3) Some clustering library in Lucene's contribution folder -
>> https://issues.apache.org/jira/browse/LUCENE-1421
>> =A0 - this doesn't seem to be officially supported and last update to
>> it was an year back. Has anyone tried this?
>>
>> 4) Lucene clustering with Terracotta -
>> http://orionl.blogspot.com/2006/11/clustering-lucene.html
>> =A0- I'm not sure how to do this, there doesn't seem to be much
>> activity around this.
>>
>> We got large indexes - over 500 million records, we usually partition
>> our index after 20 million records. There are total of 20 fields in
>> our index, of which we are trying to cluster 5 fields. Is there any
>> clustering solution for Lucene that would work for us? Carrot2 looked
>> the most active and promising, but it's clearly recommended for a
>> small index size. Any other suggestions?
>>
>> Thanks,
>> -vivek
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 18:47:33 2011
Return-Path: <java-user-return-49489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 13F2516BD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 18:47:33 +0000 (UTC)
Received: (qmail 17876 invoked by uid 500); 26 Apr 2011 18:47:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17826 invoked by uid 500); 26 Apr 2011 18:47:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17818 invoked by uid 99); 26 Apr 2011 18:47:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 18:47:30 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of deepak.konidena@cornell.edu designates 128.253.83.165 as permitted sender)
Received: from [128.253.83.165] (HELO limestone5.mail.cornell.edu) (128.253.83.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 18:47:24 +0000
X-CornellRouted: This message has been Routed already.
Received: from exchange.cornell.edu (cashub03.exchange.cornell.edu [10.16.197.22])
	by limestone5.mail.cornell.edu (8.14.4/8.14.4) with ESMTP id p3QIl22R007074
	for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 14:47:02 -0400 (EDT)
Received: from mbxa.exchange.cornell.edu ([169.254.1.138]) by
 CASHUB03.exchange.cornell.edu ([10.16.197.22]) with mapi; Tue, 26 Apr 2011
 14:46:56 -0400
From: Deepak Konidena <deepak.konidena@cornell.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 26 Apr 2011 14:46:54 -0400
Subject: Reg: Query behavior
Thread-Topic: Query behavior
Thread-Index: AcwEQlDY8Cqq9gh3REiXD28dU+a17Q==
Message-ID: <C9DC8B5E.9AB%bk392@cornell.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
user-agent: Microsoft-MacOutlook/14.2.0.101115
acceptlanguage: en-US
x-additional-recipients-added: 1
Content-Type: multipart/alternative;
	boundary="_000_C9DC8B5E9ABbk392cornelledu_"
MIME-Version: 1.0

--_000_C9DC8B5E9ABbk392cornelledu_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

Currently when I type in Arcos Bioscience in my lucene search, it returns a=
ll those documents with
either Arcos or Bioscience at the top of the search results and the actual =
document containing

"Arcos Bioscience" somewhere in the middle/bottom.

The desired behavior is to rank those documents that contain the terms Arco=
s and Bioscience next
to each other higher than those that contain either of the terms or contain=
 both the terms but which far
away from each other.

When I search the same term with quotes "Arcos Bioscience" in the term, it =
gives the exact document that
contains the term and nothing else.

In general, how would I modify the system in such a way that the documents =
containing "exact term" are shown
first and also the documents with either "exact" or "term" are shown later =
(without just showing one result).

Thanks
Deepak Konidena.



--_000_C9DC8B5E9ABbk392cornelledu_--

From java-user-return-49490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 19:00:12 2011
Return-Path: <java-user-return-49490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B7731206
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 19:00:12 +0000 (UTC)
Received: (qmail 47530 invoked by uid 500); 26 Apr 2011 19:00:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47341 invoked by uid 500); 26 Apr 2011 19:00:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47333 invoked by uid 99); 26 Apr 2011 19:00:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 19:00:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sujit.pal@comcast.net designates 76.96.62.40 as permitted sender)
Received: from [76.96.62.40] (HELO qmta04.westchester.pa.mail.comcast.net) (76.96.62.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 18:59:59 +0000
Received: from omta18.westchester.pa.mail.comcast.net ([76.96.62.90])
	by qmta04.westchester.pa.mail.comcast.net with comcast
	id cGuG1g0061wpRvQ54JzfHr; Tue, 26 Apr 2011 18:59:39 +0000
Received: from [10.1.1.36] ([208.106.108.2])
	by omta18.westchester.pa.mail.comcast.net with comcast
	id cJzW1g00K038EM43eJzYmv; Tue, 26 Apr 2011 18:59:37 +0000
Subject: Re: Reg: Query behavior
From: Sujit Pal <sujit.pal@comcast.net>
Reply-To: sujit.pal@comcast.net
To: java-user@lucene.apache.org
In-Reply-To: <C9DC8B5E.9AB%bk392@cornell.edu>
References: <C9DC8B5E.9AB%bk392@cornell.edu>
Content-Type: text/plain
Organization: Personal
Date: Tue, 26 Apr 2011 11:59:28 -0700
Message-Id: <1303844368.30402.114.camel@lysdexic.healthline.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.3) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Deepak,

Would something like this work in your case?

"Arcos Bioscience"^2.0 "Arcos" "Bioscience"

ie, a BooleanQuery with the full phrase boosted OR'd with a query on
each word?

-sujit

On Tue, 2011-04-26 at 14:46 -0400, Deepak Konidena wrote:
> Hi,
> 
> Currently when I type in Arcos Bioscience in my lucene search, it returns all those documents with
> either Arcos or Bioscience at the top of the search results and the actual document containing
> 
> "Arcos Bioscience" somewhere in the middle/bottom.
> 
> The desired behavior is to rank those documents that contain the terms Arcos and Bioscience next
> to each other higher than those that contain either of the terms or contain both the terms but which far
> away from each other.
> 
> When I search the same term with quotes "Arcos Bioscience" in the term, it gives the exact document that
> contains the term and nothing else.
> 
> In general, how would I modify the system in such a way that the documents containing "exact term" are shown
> first and also the documents with either "exact" or "term" are shown later (without just showing one result).
> 
> Thanks
> Deepak Konidena.
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 19:16:17 2011
Return-Path: <java-user-return-49491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0273611D4
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 19:16:17 +0000 (UTC)
Received: (qmail 72919 invoked by uid 500); 26 Apr 2011 19:16:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72835 invoked by uid 500); 26 Apr 2011 19:16:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72827 invoked by uid 99); 26 Apr 2011 19:16:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 19:16:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 19:16:06 +0000
Received: by bwz8 with SMTP id 8so1338492bwz.35
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 12:15:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=Gjdq9wdVSQPDI3O98wxs9Lhn5nAwM+s3ywvxZIA+/HY=;
        b=vdUMke+j1eELQpqN+4S7fnD8UJwDyWo9Lgyl9fcN3pyNTypheN0s+1XwS1auNcXR6y
         qoZM72dCsusYXEmhzxDe99M51g/qsEIjXuop5F+1wvKHTS25efWR7dsK0CyWDrpT5veo
         XY6Ys8qBDgbSJ3Xlnjbahgq0dMPQhdNXznMUo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ESYIYV33JBhAoLs3ted+FGYm/NQW9dg1pvZkye5AhCPDfDkrgQeGiCyC0oworBLZfO
         fWfsQ+eoI1Gh7nN8K0jsu2gj7zma/mLKZpp0M7qRglKeoI75CjcY0qs3/kFOkg42/7Uc
         a1plAerkdbMM42KOPfTrgGr68ZimDsPo9gVCw=
Received: by 10.204.126.73 with SMTP id b9mr1065804bks.193.1303844558154; Tue,
 26 Apr 2011 12:02:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Tue, 26 Apr 2011 12:02:18 -0700 (PDT)
In-Reply-To: <BANLkTimuCHaCvnmpHBbfJTFdkzQr9du_Bg@mail.gmail.com>
References: <BANLkTi=uRcy5JA7VK0y6NZc2chZW5H1ZXg@mail.gmail.com>
 <BANLkTimneub2ZOwiQzOp_rh=x36iib1UUw@mail.gmail.com> <BANLkTimuCHaCvnmpHBbfJTFdkzQr9du_Bg@mail.gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Tue, 26 Apr 2011 21:02:18 +0200
Message-ID: <BANLkTimPA8UchV_O8hH6G2_z2iGCz7Duzw@mail.gmail.com>
Subject: Re: Clustering with Lucene?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d96f65bb2cea04a1d6f7ed
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d96f65bb2cea04a1d6f7ed
Content-Type: text/plain; charset=UTF-8

> 1) We index around 20 fields, of that we want to have grouping option
> for five of them. For ex., user can search on name of the city and we
> should have option to group by products available in that city (and
> vice-versa).
>

Are these fields stricly defined or free text? Because if they are
product/dictionary fields then what you're looking for is not text
clustering, but faceting and the solution is to use either SOLR or its
components for doing exactly this.


> 2) We also need an aggregation facility, which would allow to
> aggregate certain field value from that group. For ex., sum the qty
> for all the products in a category. The aggregation may not be part of
> clustering, but could be something add-on to it.
>

This definitely looks like faceting. Take a look at Solr's faceting
functionality -- I think this will solve your problem.

Dawid

--0016e6d96f65bb2cea04a1d6f7ed--

From java-user-return-49492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 22:22:44 2011
Return-Path: <java-user-return-49492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E92011E1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 22:22:44 +0000 (UTC)
Received: (qmail 63360 invoked by uid 500); 26 Apr 2011 22:22:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63325 invoked by uid 500); 26 Apr 2011 22:22:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63317 invoked by uid 99); 26 Apr 2011 22:22:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 22:22:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 22:22:36 +0000
Received: by qwj9 with SMTP id 9so713486qwj.35
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 15:22:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=adfLT4dQLIsKgNIBhgCJpk04Alfc+0d7nIvu9PtevJU=;
        b=lKIHrWEC2M76e8qeF6apvKJV9K+FyHpBO+RMjjN2Byra43KlgRZgWbyVqvjz92edbx
         5Tvrbm0IDy4i50TuxeuBVmx/qr9D/RKj0K65kXhLaxpi77/39BVSdB00wpJGY1kA0pGP
         y1HC40RnTtLerm+vwEBq1iovGtBX1ROLGwd3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OS/iJJADW821WcGPAI0jmb2JMcgugHUg1gfrofK287h6YjnHQMqays02W3Oep6qPSv
         BtPrer5RACbtV1TEyadQpslI1Cn9JdzsZo7GGH2C4kL1+3bkfW1Q6AwDVmAWh8N5MK8u
         nSM+geaHzNBdO5AZW6kKCjv6GI2VgiKaUMzTQ=
MIME-Version: 1.0
Received: by 10.229.5.209 with SMTP id 17mr1053472qcw.85.1303856535125; Tue,
 26 Apr 2011 15:22:15 -0700 (PDT)
Received: by 10.229.245.81 with HTTP; Tue, 26 Apr 2011 15:22:15 -0700 (PDT)
In-Reply-To: <1303844368.30402.114.camel@lysdexic.healthline.com>
References: <C9DC8B5E.9AB%bk392@cornell.edu>
	<1303844368.30402.114.camel@lysdexic.healthline.com>
Date: Tue, 26 Apr 2011 18:22:15 -0400
Message-ID: <BANLkTi=zBzPCAT33qjLhmEFGVptftPcrOw@mail.gmail.com>
Subject: Re: Reg: Query behavior
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org, sujit.pal@comcast.net
Content-Type: text/plain; charset=ISO-8859-1

You can also specify a large slop in your phrase (e.g.
"arcos biosciences"~500 which will take distance into
account when scoring, although it may not be enough
to rank the document where you want. Sujit's comment
is probably a better place to start.

Best
Erick

On Tue, Apr 26, 2011 at 2:59 PM, Sujit Pal <sujit.pal@comcast.net> wrote:
> Hi Deepak,
>
> Would something like this work in your case?
>
> "Arcos Bioscience"^2.0 "Arcos" "Bioscience"
>
> ie, a BooleanQuery with the full phrase boosted OR'd with a query on
> each word?
>
> -sujit
>
> On Tue, 2011-04-26 at 14:46 -0400, Deepak Konidena wrote:
>> Hi,
>>
>> Currently when I type in Arcos Bioscience in my lucene search, it returns all those documents with
>> either Arcos or Bioscience at the top of the search results and the actual document containing
>>
>> "Arcos Bioscience" somewhere in the middle/bottom.
>>
>> The desired behavior is to rank those documents that contain the terms Arcos and Bioscience next
>> to each other higher than those that contain either of the terms or contain both the terms but which far
>> away from each other.
>>
>> When I search the same term with quotes "Arcos Bioscience" in the term, it gives the exact document that
>> contains the term and nothing else.
>>
>> In general, how would I modify the system in such a way that the documents containing "exact term" are shown
>> first and also the documents with either "exact" or "term" are shown later (without just showing one result).
>>
>> Thanks
>> Deepak Konidena.
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Apr 26 23:35:32 2011
Return-Path: <java-user-return-49493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 012261F33
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 26 Apr 2011 23:35:32 +0000 (UTC)
Received: (qmail 56281 invoked by uid 500); 26 Apr 2011 23:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56242 invoked by uid 500); 26 Apr 2011 23:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56234 invoked by uid 99); 26 Apr 2011 23:35:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 23:35:29 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Apr 2011 23:35:24 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <mail@avomberg.de>)
	id 1QErmY-0002Fz-Je
	for java-user@lucene.apache.org; Tue, 26 Apr 2011 16:35:02 -0700
Date: Tue, 26 Apr 2011 16:35:02 -0700 (PDT)
From: Alex vB <mail@avomberg.de>
To: java-user@lucene.apache.org
Message-ID: <1303860902600-2868144.post@n3.nabble.com>
Subject: Lucene query processing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello everybody,

As far as I know Lucene processes documents DAAT. Depending on the query
either the intersection or union is calculated. For the intersection only
documents occurring in all posting lists are scored. In the union case every
document is scored which makes it a more expensive operation. 

Lucene stores its index into several files. Depending on the query different
files might be accessed for scoring. For example a payload query needs to
read paylods from .pos.

What is not clear for me how term frequencies or payloads are processed.
Assuming I store term frequencies I need to set
setOmitTermFreqAndPositions(false). 
1) Which queries include term frequencies? I assume all queries if term
frequencies are stored?
2) Why is fetching payloads so much more expensive than getting term
frequencies. Both are stored in seperated files and therefore demand a disk
seek.
3) What for a value contains tf if I set setOmitTermFreqAndPositions(true)?
Allways 1?
4) How are term freqs, payloads read from disk? In bulk for all remaining
docs at once or every time a document gets scored?

Regards
Alex



--
View this message in context: http://lucene.472066.n3.nabble.com/Lucene-query-processing-tp2868144p2868144.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 27 04:08:21 2011
Return-Path: <java-user-return-49494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9429426D3
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 27 Apr 2011 04:08:21 +0000 (UTC)
Received: (qmail 47683 invoked by uid 500); 27 Apr 2011 04:08:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46918 invoked by uid 500); 27 Apr 2011 04:08:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46775 invoked by uid 99); 27 Apr 2011 04:08:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 04:08:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 04:08:06 +0000
Received: by vws7 with SMTP id 7so1567414vws.35
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 21:07:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=pDzEE0UZcg1BIF3sGm/KjneKRET5IXhdGcFuKA7Y8UA=;
        b=vf5dh5tDwsUblhNAVjesUs8ckoBkrX2A/XoWb60tR47YFKopzVDz9wZV/OPxRhlx/z
         TlG/MO4xB27lWGSgSYJp+V2lA/mIiwp6i76NnP9z/rOGVMIgmthycY6qYaha6E4P0gIO
         ghZ6v0IQGGhcjuUt2Na5THE/Br0q4/AshIir8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Bu1FeuDUG+TL3JUGSPu4YifPjKbsqLFGvR8RN/uNvHgvoA1sRqt72YpcEgZxgmfLIa
         XcJPz37QrgYdtgzGsvO7k+DEzT8nwoz5CdFagEA6hotl8R25VWgCDKe9GTKc0pqua6QX
         mX+9Hk9TkBS5p5UUQhJdKPNP5eTwpmIqP6mfw=
MIME-Version: 1.0
Received: by 10.52.179.103 with SMTP id df7mr389171vdc.148.1303877266035; Tue,
 26 Apr 2011 21:07:46 -0700 (PDT)
Received: by 10.52.167.196 with HTTP; Tue, 26 Apr 2011 21:07:45 -0700 (PDT)
In-Reply-To: <BANLkTimPA8UchV_O8hH6G2_z2iGCz7Duzw@mail.gmail.com>
References: <BANLkTi=uRcy5JA7VK0y6NZc2chZW5H1ZXg@mail.gmail.com>
	<BANLkTimneub2ZOwiQzOp_rh=x36iib1UUw@mail.gmail.com>
	<BANLkTimuCHaCvnmpHBbfJTFdkzQr9du_Bg@mail.gmail.com>
	<BANLkTimPA8UchV_O8hH6G2_z2iGCz7Duzw@mail.gmail.com>
Date: Tue, 26 Apr 2011 21:07:45 -0700
Message-ID: <BANLkTinHEprXHpVkGZRFrTFoYhTh03351Q@mail.gmail.com>
Subject: Re: Clustering with Lucene?
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Thanks Dawid. I was trying to give some example, but this is not
exactly our text. Our fields include things like "user name", "IP
Address", "Application Name", "Port 3", "Byte Count" - all network
related stuff. So, if user searches on certain IP address then we
would need to group the result by user, application, i.e. show me all
the users who have used this IP, what applications have been used on
that IP etc. These are definitely not dictionary fields.

I'm looking at faceting right now - checking if this would work with
Lucene (as we can not change to Solr at this point). What's the main
difference between clustering and faceting?

Thanks,
-vivek

On Tue, Apr 26, 2011 at 12:02 PM, Dawid Weiss <dawid.weiss@gmail.com> wrote:
>> 1) We index around 20 fields, of that we want to have grouping option
>> for five of them. For ex., user can search on name of the city and we
>> should have option to group by products available in that city (and
>> vice-versa).
>>
>
> Are these fields stricly defined or free text? Because if they are
> product/dictionary fields then what you're looking for is not text
> clustering, but faceting and the solution is to use either SOLR or its
> components for doing exactly this.
>
>
>> 2) We also need an aggregation facility, which would allow to
>> aggregate certain field value from that group. For ex., sum the qty
>> for all the products in a category. The aggregation may not be part of
>> clustering, but could be something add-on to it.
>>
>
> This definitely looks like faceting. Take a look at Solr's faceting
> functionality -- I think this will solve your problem.
>
> Dawid
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 27 06:20:08 2011
Return-Path: <java-user-return-49495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A49E520B5
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 27 Apr 2011 06:20:08 +0000 (UTC)
Received: (qmail 38315 invoked by uid 500); 27 Apr 2011 06:20:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38280 invoked by uid 500); 27 Apr 2011 06:20:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38272 invoked by uid 99); 27 Apr 2011 06:20:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 06:20:06 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 06:19:59 +0000
Received: by bwz8 with SMTP id 8so1926049bwz.35
        for <java-user@lucene.apache.org>; Tue, 26 Apr 2011 23:19:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=ELZda1ozZkBeD7Fwh7K1Y+1C4qZPqe98PHtCfK9azhg=;
        b=A6VpJEDCIjSlKiAqdPC5mnfQmr4WUotMHIWtJLlLyV4E33eNEahzxoU0VPlNpFEBv3
         antoYvXdQjQvDGpGPHveIYur491mPwyG2WelJ8CxuYn3ZJByGBQbC8yUJCAWX/5ZDg68
         xlmGAcWzNbosyxNFmjMiritHzSVpM3kQ0BgnI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=tNjlP2OS+qmECbKaCWcrQptqtAiSco6U21m5yMWyS5zTYJJflgvsUFj+LC5TkP0cn6
         AvBhj5OydL/H1jE7HTL4aEzKDNdFFA802oCtluyirf8jeR8Qp+6ilRcCpjnU8RDpXVPR
         W1gHsqWPI/5TbFMkSqJBQfx1lUVJUKJhCjSQY=
Received: by 10.204.228.130 with SMTP id je2mr476152bkb.166.1303885178109;
 Tue, 26 Apr 2011 23:19:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Tue, 26 Apr 2011 23:19:18 -0700 (PDT)
In-Reply-To: <BANLkTinHEprXHpVkGZRFrTFoYhTh03351Q@mail.gmail.com>
References: <BANLkTi=uRcy5JA7VK0y6NZc2chZW5H1ZXg@mail.gmail.com>
 <BANLkTimneub2ZOwiQzOp_rh=x36iib1UUw@mail.gmail.com> <BANLkTimuCHaCvnmpHBbfJTFdkzQr9du_Bg@mail.gmail.com>
 <BANLkTimPA8UchV_O8hH6G2_z2iGCz7Duzw@mail.gmail.com> <BANLkTinHEprXHpVkGZRFrTFoYhTh03351Q@mail.gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Wed, 27 Apr 2011 08:19:18 +0200
Message-ID: <BANLkTi=1f7L0nMG4LR3b01+hRrGyH2J3+w@mail.gmail.com>
Subject: Re: Clustering with Lucene?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=485b3970d4a2de7f1e04a1e06cc8

--485b3970d4a2de7f1e04a1e06cc8
Content-Type: text/plain; charset=UTF-8

They may not be dictionary, but they is a limited number of term entries and
they seem regular. Your inquiries indicate you need a faceting feature (or
even an sql-like set of queries backed up by a fast index...), probably with
some pruning.

Clustering is an unsupervised process that attempts to find latent
relationships between concepts in text (and describe these somehow).
Faceting is, ehm... "flattening" of your search result with respect to some
category for which the dictionary of terms is relatively limited. Any
product categories (with counts) that you see in search results on Amazon or
other sites like these are facets.

Dawid

On Wed, Apr 27, 2011 at 6:07 AM, vivek sar <vivextra@gmail.com> wrote:

> Thanks Dawid. I was trying to give some example, but this is not
> exactly our text. Our fields include things like "user name", "IP
> Address", "Application Name", "Port 3", "Byte Count" - all network
> related stuff. So, if user searches on certain IP address then we
> would need to group the result by user, application, i.e. show me all
> the users who have used this IP, what applications have been used on
> that IP etc. These are definitely not dictionary fields.
>
> I'm looking at faceting right now - checking if this would work with
> Lucene (as we can not change to Solr at this point). What's the main
> difference between clustering and faceting?
>
> Thanks,
> -vivek
>
> On Tue, Apr 26, 2011 at 12:02 PM, Dawid Weiss <dawid.weiss@gmail.com>
> wrote:
> >> 1) We index around 20 fields, of that we want to have grouping option
> >> for five of them. For ex., user can search on name of the city and we
> >> should have option to group by products available in that city (and
> >> vice-versa).
> >>
> >
> > Are these fields stricly defined or free text? Because if they are
> > product/dictionary fields then what you're looking for is not text
> > clustering, but faceting and the solution is to use either SOLR or its
> > components for doing exactly this.
> >
> >
> >> 2) We also need an aggregation facility, which would allow to
> >> aggregate certain field value from that group. For ex., sum the qty
> >> for all the products in a category. The aggregation may not be part of
> >> clustering, but could be something add-on to it.
> >>
> >
> > This definitely looks like faceting. Take a look at Solr's faceting
> > functionality -- I think this will solve your problem.
> >
> > Dawid
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--485b3970d4a2de7f1e04a1e06cc8--

From java-user-return-49496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 27 07:27:12 2011
Return-Path: <java-user-return-49496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 543D42516
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 27 Apr 2011 07:27:12 +0000 (UTC)
Received: (qmail 8529 invoked by uid 500); 27 Apr 2011 07:27:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8000 invoked by uid 500); 27 Apr 2011 07:27:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7955 invoked by uid 99); 27 Apr 2011 07:26:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 07:26:59 +0000
X-ASF-Spam-Status: No, hits=0.2 required=5.0
	tests=ASF_LIST_OPS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [182.71.53.3] (HELO mail.otssolutions.com) (182.71.53.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 07:26:51 +0000
Received: from MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a]) by
 MAIL.otssolutions.com ([fe80::cde4:3636:c426:275a%11]) with mapi; Wed, 27 Apr
 2011 12:53:41 +0530
From: Ranjit Kumar <Ranjit.Kumar@otssolutions.com>
To: "java-user-help@lucene.apache.org" <java-user-help@lucene.apache.org>,
	"java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: lucene 3.0.3 | QueryParser | MultiFieldQueryParser
Thread-Topic: Re: lucene 3.0.3 | QueryParser | MultiFieldQueryParser
Thread-Index: AcwErAhpqJnUPzCZQFeVki8NE+EHXQ==
Date: Wed, 27 Apr 2011 07:23:40 +0000
Message-ID: <AD21521D44870544AC66F4FDFC0A474C53576CD8@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Content-Type: multipart/alternative;
	boundary="_000_AD21521D44870544AC66F4FDFC0A474C53576CD8MAILotssolution_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_AD21521D44870544AC66F4FDFC0A474C53576CD8MAILotssolution_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
while creating index with the help of  lucene standardAnalyzer, we cannot m=
ake difference between c, c++ and c# as lucene do not create index for c++ =
and c#. To make the difference between these term I need to change the gram=
mar of lucene with the help of jFlex, it force me to create my own custom a=
nalyzer.

While I am searching for single term like c# I get correct result (also in =
the case of c++) So, lucene make index for C++ and c# . Also do not need to=
 use any Parser. Hence,  jFlex doing it work properly.
But, when I am trying to search for multiple Boolean query like c# AND .net=
  I need to use  MultiFieldQueryParser to get correct result(document). The=
n Parser stripping off # but do not dot(.) so query became c AND .net
Also, I have made changes for c#.net, vb.net, .net all these work properly =
with MultiFieldQueryParser except c#

Thanks & Regards,
Ranjit Kumar
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D Pr=
ivate, Confidential and Privileged. This e-mail and any files and attachmen=
ts transmitted with it are confidential and/or privileged. They are intende=
d solely for the use of the intended recipient. The content of this e-mail =
and any file or attachment transmitted with it may have been changed or alt=
ered without the consent of the author. If you are not the intended recipie=
nt, please note that any review, dissemination, disclosure, alteration, pri=
nting, circulation or Transmission of this e-mail and/or any file or attach=
ment transmitted with it, is prohibited and may be unlawful. If you have re=
ceived this e-mail or any file or attachment transmitted with it in error p=
lease notify OTS Solutions at info@otssolutions.com =3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

--_000_AD21521D44870544AC66F4FDFC0A474C53576CD8MAILotssolution_--

From java-user-return-49497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 27 15:37:39 2011
Return-Path: <java-user-return-49497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E09F262E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 27 Apr 2011 15:37:39 +0000 (UTC)
Received: (qmail 72810 invoked by uid 500); 27 Apr 2011 15:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72762 invoked by uid 500); 27 Apr 2011 15:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72754 invoked by uid 99); 27 Apr 2011 15:37:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 15:37:37 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 15:37:29 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p3RFb71q011461
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 27 Apr 2011 11:37:07 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Wed, 27 Apr 2011
 11:37:07 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 27 Apr 2011 11:37:06 -0400
Subject: RE: lucene 3.0.3 | QueryParser | MultiFieldQueryParser
Thread-Topic: lucene 3.0.3 | QueryParser | MultiFieldQueryParser
Thread-Index: AcwErAhpqJnUPzCZQFeVki8NE+EHXQAQfhiQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE712C@suex07-mbx-03.ad.syr.edu>
References: <AD21521D44870544AC66F4FDFC0A474C53576CD8@MAIL.otssolutions.com>
In-Reply-To: <AD21521D44870544AC66F4FDFC0A474C53576CD8@MAIL.otssolutions.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-27_07:2011-04-27,2011-04-27,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

UmFuaml0LA0KDQpUaGUgcHJvYmxlbSBpcyBkZWZpbml0ZWx5IHRoZSBhbmFseXplciB5b3UgYXJl
IHBhc3NpbmcgdG8gUXVlcnlQYXJzZXIgb3IgTXVsdGlGaWVsZFF1ZXJ5UGFyc2VyLCBhbmQgbm90
IHRoZSBwYXJzZXIgaXRzZWxmLg0KDQpUaGUgZm9sbG93aW5nIHRlc3RzIHN1Y2NlZWQgdXNpbmcg
S2V5d29yZEFuYWx5emVyLCB3aGljaCBpcyBhIHBhc3MtdGhyb3VnaCBhbmFseXplciAodGhlIG91
dHB1dCBpcyB0aGUgc2FtZSBhcyB0aGUgaW5wdXQpOg0KDQogIHB1YmxpYyB2b2lkIHRlc3RTaGFy
cFFQKCkgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgQW5hbHl6ZXIgYW5hbHl6ZXIgPSBuZXcgS2V5
d29yZEFuYWx5emVyKCk7DQogICAgUXVlcnlQYXJzZXIgcXAgPSBuZXcgUXVlcnlQYXJzZXINCiAg
ICAgICAgKFZlcnNpb24uTFVDRU5FXzMwLCAiZGVmYXVsdF9maWVsZCIsIGFuYWx5emVyKTsNCiAg
ICBhc3NlcnRFcXVhbHMoIitjIyArLm5ldCIsIHFwLnBhcnNlDQogICAgICAgICgiYyMgQU5EIC5u
ZXQiKS50b1N0cmluZygiZGVmYXVsdF9maWVsZCIpKTsNCiAgfSANCg0KICBwdWJsaWMgdm9pZCB0
ZXN0U2hhcnBNRlFQKCkgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgQW5hbHl6ZXIgYW5hbHl6ZXIg
PSBuZXcgS2V5d29yZEFuYWx5emVyKCk7DQogICAgU3RyaW5nW10gZmllbGRzID0geyAib25lIiwg
InR3byJ9Ow0KICAgIE11bHRpRmllbGRRdWVyeVBhcnNlciBtZnFwID0gbmV3IE11bHRpRmllbGRR
dWVyeVBhcnNlcg0KICAgICAgICAoVmVyc2lvbi5MVUNFTkVfMzAsIGZpZWxkcywgYW5hbHl6ZXIp
Ow0KICAgIGFzc2VydEVxdWFscygiKyhvbmU6YyMgdHdvOmMjKSArKG9uZToubmV0IHR3bzoubmV0
KSIsIA0KICAgICAgICAgICAgICAgICBtZnFwLnBhcnNlKCJjIyBBTkQgLm5ldCIpLnRvU3RyaW5n
KCkpOw0KICB9DQoNClN0ZXZlDQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJv
bTogUmFuaml0IEt1bWFyIFttYWlsdG86UmFuaml0Lkt1bWFyQG90c3NvbHV0aW9ucy5jb21dDQo+
IFNlbnQ6IFdlZG5lc2RheSwgQXByaWwgMjcsIDIwMTEgMzoyNCBBTQ0KPiBUbzogamF2YS11c2Vy
LWhlbHBAbHVjZW5lLmFwYWNoZS5vcmc7IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBT
dWJqZWN0OiBSZTogbHVjZW5lIDMuMC4zIHwgUXVlcnlQYXJzZXIgfCBNdWx0aUZpZWxkUXVlcnlQ
YXJzZXINCj4gDQo+IEhpLA0KPiB3aGlsZSBjcmVhdGluZyBpbmRleCB3aXRoIHRoZSBoZWxwIG9m
ICBsdWNlbmUgc3RhbmRhcmRBbmFseXplciwgd2UgY2Fubm90DQo+IG1ha2UgZGlmZmVyZW5jZSBi
ZXR3ZWVuIGMsIGMrKyBhbmQgYyMgYXMgbHVjZW5lIGRvIG5vdCBjcmVhdGUgaW5kZXggZm9yDQo+
IGMrKyBhbmQgYyMuIFRvIG1ha2UgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVzZSB0ZXJtIEkg
bmVlZCB0byBjaGFuZ2UNCj4gdGhlIGdyYW1tYXIgb2YgbHVjZW5lIHdpdGggdGhlIGhlbHAgb2Yg
akZsZXgsIGl0IGZvcmNlIG1lIHRvIGNyZWF0ZSBteQ0KPiBvd24gY3VzdG9tIGFuYWx5emVyLg0K
PiANCj4gV2hpbGUgSSBhbSBzZWFyY2hpbmcgZm9yIHNpbmdsZSB0ZXJtIGxpa2UgYyMgSSBnZXQg
Y29ycmVjdCByZXN1bHQgKGFsc28NCj4gaW4gdGhlIGNhc2Ugb2YgYysrKSBTbywgbHVjZW5lIG1h
a2UgaW5kZXggZm9yIEMrKyBhbmQgYyMgLiBBbHNvIGRvIG5vdA0KPiBuZWVkIHRvIHVzZSBhbnkg
UGFyc2VyLiBIZW5jZSwgIGpGbGV4IGRvaW5nIGl0IHdvcmsgcHJvcGVybHkuDQo+IEJ1dCwgd2hl
biBJIGFtIHRyeWluZyB0byBzZWFyY2ggZm9yIG11bHRpcGxlIEJvb2xlYW4gcXVlcnkgbGlrZSBj
IyBBTkQNCj4gLm5ldCAgSSBuZWVkIHRvIHVzZSAgTXVsdGlGaWVsZFF1ZXJ5UGFyc2VyIHRvIGdl
dCBjb3JyZWN0DQo+IHJlc3VsdChkb2N1bWVudCkuIFRoZW4gUGFyc2VyIHN0cmlwcGluZyBvZmYg
IyBidXQgZG8gbm90IGRvdCguKSBzbyBxdWVyeQ0KPiBiZWNhbWUgYyBBTkQgLm5ldA0KPiBBbHNv
LCBJIGhhdmUgbWFkZSBjaGFuZ2VzIGZvciBjIy5uZXQsIHZiLm5ldCwgLm5ldCBhbGwgdGhlc2Ug
d29yaw0KPiBwcm9wZXJseSB3aXRoIE11bHRpRmllbGRRdWVyeVBhcnNlciBleGNlcHQgYyMNCj4g
DQo+IFRoYW5rcyAmIFJlZ2FyZHMsDQo+IFJhbmppdCBLdW1hcg0KPiA9PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
DQo+ID09PT09PT09PT09PT09PT09PT09PT09PT09IFByaXZhdGUsIENvbmZpZGVudGlhbCBhbmQg
UHJpdmlsZWdlZC4gVGhpcyBlLQ0KPiBtYWlsIGFuZCBhbnkgZmlsZXMgYW5kIGF0dGFjaG1lbnRz
IHRyYW5zbWl0dGVkIHdpdGggaXQgYXJlIGNvbmZpZGVudGlhbA0KPiBhbmQvb3IgcHJpdmlsZWdl
ZC4gVGhleSBhcmUgaW50ZW5kZWQgc29sZWx5IGZvciB0aGUgdXNlIG9mIHRoZSBpbnRlbmRlZA0K
PiByZWNpcGllbnQuIFRoZSBjb250ZW50IG9mIHRoaXMgZS1tYWlsIGFuZCBhbnkgZmlsZSBvciBh
dHRhY2htZW50DQo+IHRyYW5zbWl0dGVkIHdpdGggaXQgbWF5IGhhdmUgYmVlbiBjaGFuZ2VkIG9y
IGFsdGVyZWQgd2l0aG91dCB0aGUgY29uc2VudA0KPiBvZiB0aGUgYXV0aG9yLiBJZiB5b3UgYXJl
IG5vdCB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LCBwbGVhc2Ugbm90ZSB0aGF0DQo+IGFueSByZXZp
ZXcsIGRpc3NlbWluYXRpb24sIGRpc2Nsb3N1cmUsIGFsdGVyYXRpb24sIHByaW50aW5nLCBjaXJj
dWxhdGlvbg0KPiBvciBUcmFuc21pc3Npb24gb2YgdGhpcyBlLW1haWwgYW5kL29yIGFueSBmaWxl
IG9yIGF0dGFjaG1lbnQgdHJhbnNtaXR0ZWQNCj4gd2l0aCBpdCwgaXMgcHJvaGliaXRlZCBhbmQg
bWF5IGJlIHVubGF3ZnVsLiBJZiB5b3UgaGF2ZSByZWNlaXZlZCB0aGlzIGUtDQo+IG1haWwgb3Ig
YW55IGZpbGUgb3IgYXR0YWNobWVudCB0cmFuc21pdHRlZCB3aXRoIGl0IGluIGVycm9yIHBsZWFz
ZSBub3RpZnkNCj4gT1RTIFNvbHV0aW9ucyBhdCBpbmZvQG90c3NvbHV0aW9ucy5jb20NCj4gPT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PQ0KPiA9PT09PT09PT09PT09PT09PT09PT09PT09PQ0K


From java-user-return-49498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 27 18:29:12 2011
Return-Path: <java-user-return-49498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 89CF4231A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 27 Apr 2011 18:29:12 +0000 (UTC)
Received: (qmail 52687 invoked by uid 500); 27 Apr 2011 18:29:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52644 invoked by uid 500); 27 Apr 2011 18:29:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52636 invoked by uid 99); 27 Apr 2011 18:29:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 18:29:10 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 18:29:03 +0000
Received: from ([10.160.3.174])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.63197751;
	Wed, 27 Apr 2011 14:28:39 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht02.corp.local
 ([10.160.3.174]) with mapi; Wed, 27 Apr 2011 14:28:39 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 27 Apr 2011 14:28:34 -0400
Subject: Immutable OpenBitSet?
Thread-Topic: Immutable OpenBitSet?
Thread-Index: AcwFCOsdTQKrPU5DRfu1ntZ1lFVXGQ==
Message-ID: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-puzzleid: {9F72F0C3-72F0-472A-AA45-6A7F7C521F21}
x-cr-hashedpuzzle: ATgv AfHo BakL C6VS Eob/ E2G5 Fciu FlV4 GKCS Ia9b I3qb
 J09m KEn7 KPNY KxlU
 LErQ;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{9F72F0C3-72F0-472A-AA45-6A7F7C521F21};agBvAGgAbgAuAG4AYQBkAGUAcgBAAGMAZQBuAGcAYQBnAGUALgBjAG8AbQA=;Wed,
 27 Apr 2011 18:28:35
 GMT;SQBtAG0AdQB0AGEAYgBsAGUAIABPAHAAZQBuAEIAaQB0AFMAZQB0AD8A
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_70EA5691BD59734784FF872CD1B9747A28500DFDA8OHCINMBX01cor_"
MIME-Version: 1.0

--_000_70EA5691BD59734784FF872CD1B9747A28500DFDA8OHCINMBX01cor_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,

We have an application that relies heavily on caching OpenBitSets for reuse=
 across multiple threads, and therefore multiple threads.  I am looking int=
o ways for making this both efficient and thread safe.  In Java, the Immuta=
ble pattern is the most efficient way to make a cached object thread safe, =
because it does not require synchronization overhead.  Unfortunately, this =
would require an implementation of OpenBitSet with the 'bits' and 'wlen' fi=
elds declared as final, and all mutator methods throwing unsupported.  I ca=
n certainly extend the class to override the methods, but the fields cannot=
 be overridden as final.

Are there any suggestions of the forum?  Possibly other Lucene classes to s=
olve this problem?  Or other solutions?

I'm just looking for ideas.  Thanks.

-John

--_000_70EA5691BD59734784FF872CD1B9747A28500DFDA8OHCINMBX01cor_--

From java-user-return-49499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 27 19:36:04 2011
Return-Path: <java-user-return-49499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D921E22B7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 27 Apr 2011 19:36:04 +0000 (UTC)
Received: (qmail 49666 invoked by uid 500); 27 Apr 2011 19:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49620 invoked by uid 500); 27 Apr 2011 19:36:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49612 invoked by uid 99); 27 Apr 2011 19:36:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 19:36:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 19:35:58 +0000
Received: by wyb40 with SMTP id 40so2424129wyb.35
        for <java-user@lucene.apache.org>; Wed, 27 Apr 2011 12:35:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.29.27 with SMTP id o27mr2551846wbc.16.1303932936044; Wed,
 27 Apr 2011 12:35:36 -0700 (PDT)
Received: by 10.227.3.16 with HTTP; Wed, 27 Apr 2011 12:35:36 -0700 (PDT)
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
Date: Wed, 27 Apr 2011 15:35:36 -0400
Message-ID: <BANLkTimVmXwm4babp8VnCmFXv=Z1jup1CA@mail.gmail.com>
Subject: Re: Immutable OpenBitSet?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

This would be very useful to have, but I don't think Lucene has it
now.  Maybe Solr does?  If not, please submit a patch :)

Or, maybe try http://sna-projects.com/kamikaze?  I think the focus
there is compressed docID sets (in RAM), so I'm not sure you'll find
something there... but, maybe?

Mike

http://blog.mikemccandless.com

On Wed, Apr 27, 2011 at 2:28 PM, Nader, John P <john.nader@cengage.com> wro=
te:
> Hello,
>
> We have an application that relies heavily on caching OpenBitSets for reu=
se across multiple threads, and therefore multiple threads. =A0I am looking=
 into ways for making this both efficient and thread safe. =A0In Java, the =
Immutable pattern is the most efficient way to make a cached object thread =
safe, because it does not require synchronization overhead. =A0Unfortunatel=
y, this would require an implementation of OpenBitSet with the 'bits' and '=
wlen' fields declared as final, and all mutator methods throwing unsupporte=
d. =A0I can certainly extend the class to override the methods, but the fie=
lds cannot be overridden as final.
>
> Are there any suggestions of the forum? =A0Possibly other Lucene classes =
to solve this problem? =A0Or other solutions?
>
> I'm just looking for ideas. =A0Thanks.
>
> -John
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 27 21:12:14 2011
Return-Path: <java-user-return-49500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BCBD620D4
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 27 Apr 2011 21:12:14 +0000 (UTC)
Received: (qmail 89527 invoked by uid 500); 27 Apr 2011 21:12:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89489 invoked by uid 500); 27 Apr 2011 21:12:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89480 invoked by uid 99); 27 Apr 2011 21:12:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 21:12:12 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.97.32.67] (HELO smtp-out-04.comm2000.it) (212.97.32.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 21:12:05 +0000
Received: from [192.168.0.4] (250.188.173.62.dsl.static.ip.kpnqwest.it [62.173.188.250])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by smtp-out-04.comm2000.it (Postfix) with ESMTP id 41AB34D63D
	for <java-user@lucene.apache.org>; Wed, 27 Apr 2011 23:11:55 +0200 (CEST)
Message-ID: <4DB8868E.8010002@fissore.org>
Date: Wed, 27 Apr 2011 23:11:42 +0200
From: Federico Fissore <federico@fissore.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.14) Gecko/20110223 Thunderbird/3.1.8
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Immutable OpenBitSet?
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nader, John P, il 27/04/2011 20:28, ha scritto:
> Hello,
>
> We have an application that relies heavily on caching OpenBitSets for reuse across multiple threads, and therefore multiple threads.
[...]


You don't need synchronization if you just read from an openbitset. And 
if you need to modify it, you can achieve thread safeness even with 
thread confinement.

BTW (shameless plug) if you are going to operate on large sets of 
bitsets, you should probably take a look at
https://github.com/ffissore/Parallel-Bitset-Operations
we are integrating it into some of our searchers

HTH

federico

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Apr 27 22:24:55 2011
Return-Path: <java-user-return-49501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 033432C45
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 27 Apr 2011 22:24:55 +0000 (UTC)
Received: (qmail 97779 invoked by uid 500); 27 Apr 2011 22:24:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97732 invoked by uid 500); 27 Apr 2011 22:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97724 invoked by uid 99); 27 Apr 2011 22:24:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 22:24:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.53] (HELO thomsonlearning.com) (69.32.146.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Apr 2011 22:24:48 +0000
Received: from ([10.160.3.175])
	by ohciniron02.thomsonlearning.com with ESMTP with TLS id 5502562.86443248;
	Wed, 27 Apr 2011 18:24:24 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht03.corp.local
 ([10.160.3.175]) with mapi; Wed, 27 Apr 2011 18:24:24 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 27 Apr 2011 18:24:20 -0400
Subject: RE: Immutable OpenBitSet?
Thread-Topic: Immutable OpenBitSet?
Thread-Index: AcwFH/bGer6vsfC4T3m7rBjr8jxpBgACFjxQ
Message-ID: <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
 <4DB8868E.8010002@fissore.org>
In-Reply-To: <4DB8868E.8010002@fissore.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-puzzleid: {EBCABE6B-02EC-45DC-8F2E-DBDAEBE7851A}
x-cr-hashedpuzzle: ACZN Ag8V BKcM CEEE Cgsp Cqow Cq1R DkgM EKT1 FJxT FUGA
 GmH8 HUDm IkUX JISp
 JdrR;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{EBCABE6B-02EC-45DC-8F2E-DBDAEBE7851A};agBvAGgAbgAuAG4AYQBkAGUAcgBAAGMAZQBuAGcAYQBnAGUALgBjAG8AbQA=;Wed,
 27 Apr 2011 22:24:20
 GMT;UgBFADoAIABJAG0AbQB1AHQAYQBiAGwAZQAgAE8AcABlAG4AQgBpAHQAUwBlAHQAPwA=
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thanks.  Your project looks interesting.  We've got some duplicate home-gro=
wn stuff here that is similar.

As far as thread-safety, if one thread initializes an OpenBitSet's by setti=
ng one or bits and then hands that off to another thread, the other thread =
may see partial results.  The long[] is not protected by read/write synchro=
nization, nor does it get any of the guarantees of final.  This is problema=
tic for caching bit sets.

My idea for an optimal and guaranteed thread-safe implementation would be a=
 class nearly identical to OpenBitSet except:
 - Only implements read operation (gets, tests, compares, etc.)
 - Is constructed from an already initialized long[] or another OpenBitSet.=
=09
 - declares its reference to bits and wlen as final.

There are a few problems with implementing equals, since that directly acce=
sses the non-final field on OpenBitSet.


-----Original Message-----
From: Federico Fissore [mailto:federico@fissore.org]=20
Sent: Wednesday, April 27, 2011 5:12 PM
To: java-user@lucene.apache.org
Subject: Re: Immutable OpenBitSet?

Nader, John P, il 27/04/2011 20:28, ha scritto:
> Hello,
>
> We have an application that relies heavily on caching OpenBitSets for reu=
se across multiple threads, and therefore multiple threads.
[...]


You don't need synchronization if you just read from an openbitset. And=20
if you need to modify it, you can achieve thread safeness even with=20
thread confinement.

BTW (shameless plug) if you are going to operate on large sets of=20
bitsets, you should probably take a look at
https://github.com/ffissore/Parallel-Bitset-Operations
we are integrating it into some of our searchers

HTH

federico

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 06:44:57 2011
Return-Path: <java-user-return-49502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 568D8AFE
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 06:44:57 +0000 (UTC)
Received: (qmail 46744 invoked by uid 500); 28 Apr 2011 06:44:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46505 invoked by uid 500); 28 Apr 2011 06:44:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46490 invoked by uid 99); 28 Apr 2011 06:44:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 06:44:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 06:44:47 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A055C45ECA3
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 08:44:24 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id p92PVu0HV7JG for <java-user@lucene.apache.org>;
	Thu, 28 Apr 2011 08:44:19 +0200 (CEST)
Received: from VEGA (port-92-196-119-3.dynamic.qsc.de [92.196.119.3])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 6822545EBAB
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 08:44:19 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local> <4DB8868E.8010002@fissore.org> <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
Subject: RE: Immutable OpenBitSet?
Date: Thu, 28 Apr 2011 08:44:24 +0200
Message-ID: <002201cc056f$b6e71cd0$24b55670$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMxmWqaxmtJlNFI4GO5PHDqBRNaoAKIeb2gApgsu66RfqU90A==
Content-Language: de

There are solutions to solve the initialization problem. The JVM guarantees
that an object is consistent after the ctor is run, so you can do the
initialization like this (please note the double {{}}, which is an inline
ctor, this is also often seen for unmodifiable HashSets):

final OpenBitSet mybits = new OpenBitSet(size) {{
	fastSet(1); fastSet(2);...
}};

The same is often used for HashSets:

final Set<String> myFinalUnmodifiableSet = Collections.unmodifiableSet(new
HashSet<String>() {{
	add(a); add(b); add(c);...
}});

The only thing we don't have a is a unmodifiable wrapper for OpenBitSet, but
in the above example its only there to prevent modification, but for theread
safety it has no effect (the HashSet contents do not get final by that).

In general you cannot make the bits array final at all (you can make the
reference to it final, but not the contents).
You may also review Michael Busch's talk on last Lucene Revolution / Berlin
Buzzwords on Twitter's Lucene-based Realtime Search, he explains some tricks
to make arrays threadsafe without too much locking.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Nader, John P [mailto:john.nader@cengage.com]
> Sent: Thursday, April 28, 2011 12:24 AM
> To: java-user@lucene.apache.org
> Subject: RE: Immutable OpenBitSet?
> 
> Thanks.  Your project looks interesting.  We've got some duplicate home-
> grown stuff here that is similar.
> 
> As far as thread-safety, if one thread initializes an OpenBitSet's by
setting
> one or bits and then hands that off to another thread, the other thread
may
> see partial results.  The long[] is not protected by read/write
synchronization,
> nor does it get any of the guarantees of final.  This is problematic for
caching
> bit sets.
> 
> My idea for an optimal and guaranteed thread-safe implementation would
> be a class nearly identical to OpenBitSet except:
>  - Only implements read operation (gets, tests, compares, etc.)
>  - Is constructed from an already initialized long[] or another
OpenBitSet.
>  - declares its reference to bits and wlen as final.
> 
> There are a few problems with implementing equals, since that directly
> accesses the non-final field on OpenBitSet.
> 
> 
> -----Original Message-----
> From: Federico Fissore [mailto:federico@fissore.org]
> Sent: Wednesday, April 27, 2011 5:12 PM
> To: java-user@lucene.apache.org
> Subject: Re: Immutable OpenBitSet?
> 
> Nader, John P, il 27/04/2011 20:28, ha scritto:
> > Hello,
> >
> > We have an application that relies heavily on caching OpenBitSets for
reuse
> across multiple threads, and therefore multiple threads.
> [...]
> 
> 
> You don't need synchronization if you just read from an openbitset. And if
> you need to modify it, you can achieve thread safeness even with thread
> confinement.
> 
> BTW (shameless plug) if you are going to operate on large sets of bitsets,
you
> should probably take a look at
https://github.com/ffissore/Parallel-Bitset-
> Operations
> we are integrating it into some of our searchers
> 
> HTH
> 
> federico
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 06:57:48 2011
Return-Path: <java-user-return-49503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 897443218
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 06:57:48 +0000 (UTC)
Received: (qmail 56813 invoked by uid 500); 28 Apr 2011 06:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56774 invoked by uid 500); 28 Apr 2011 06:57:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56763 invoked by uid 99); 28 Apr 2011 06:57:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 06:57:44 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 06:57:37 +0000
Received: by bwz8 with SMTP id 8so3481418bwz.35
        for <java-user@lucene.apache.org>; Wed, 27 Apr 2011 23:57:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=JU9kMEY9rHI010HY8aS3ao130aT20w8Rk6sGgwF2rwM=;
        b=r5ZtuvmOvYxV0pudvXQH3C8UBEr9K9RybLcoZFlsM3zO2wRUiYZ+uGfUbaPC8eqXQE
         +nqCEEYBuyp75CBE9kPtPQ3texl4CDx5nXB+o1oVl0OTLxu3c5lwCsgHLYJrF7xF39Hx
         8y3a6rG7k07LQ6WjNNz/Ky0M7LgcPxV00xNNI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=O4G2JdN0EzUqnLrjGkfp3BDNQ2JnCN/R+jxdigGBM6Uzmlf/umacciHB2DUBUsln1d
         GCQTz/NaITneQQ1bqwY0a8AQDhVr5XvOXTe9cIrIv0KhCm9eSz1xKjfKrDDAbsP1Atxa
         4Xpj2gbBk9qAfePVw2viTRmbgUjzZWPhpM5BQ=
Received: by 10.204.126.73 with SMTP id b9mr2903771bks.193.1303973836183; Wed,
 27 Apr 2011 23:57:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Wed, 27 Apr 2011 23:56:56 -0700 (PDT)
In-Reply-To: <002201cc056f$b6e71cd0$24b55670$@thetaphi.de>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
 <4DB8868E.8010002@fissore.org> <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
 <002201cc056f$b6e71cd0$24b55670$@thetaphi.de>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Thu, 28 Apr 2011 08:56:56 +0200
Message-ID: <BANLkTinL3vAHxCX6V2-86Z-BsEGhxTd88w@mail.gmail.com>
Subject: Re: Immutable OpenBitSet?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d96f654d592804a1f51129

--0016e6d96f654d592804a1f51129
Content-Type: text/plain; charset=UTF-8

There are solutions to solve the initialization problem. The JVM guarantees
> that an object is consistent after the ctor is run, so you can do the
> initialization like this (please note the double {{}}, which is an inline
> ctor, this is also often seen for unmodifiable HashSets):
>
> final OpenBitSet mybits = new OpenBitSet(size) {{
>        fastSet(1); fastSet(2);...
> }};
>

To  complete Uwe's hint: note the object is assigned to a final field -- JVM
guarantees publication safety in correlation with final fields or static
initializer (which in turn result from class loading spec). If you Google
for safe publication you'll find a lot of information about this.

Dawid

--0016e6d96f654d592804a1f51129--

From java-user-return-49504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 07:09:29 2011
Return-Path: <java-user-return-49504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B73D3946
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 07:09:29 +0000 (UTC)
Received: (qmail 65314 invoked by uid 500); 28 Apr 2011 07:09:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64532 invoked by uid 500); 28 Apr 2011 07:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64524 invoked by uid 99); 28 Apr 2011 07:08:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 07:08:57 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.18.95.80] (HELO aa001msb.fastweb.it) (85.18.95.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 07:08:48 +0000
Received: from [192.168.1.160] (83.103.113.106) by aa001msb.fastweb.it (8.5.016.6)
        id 4DB196100048D0B2 for java-user@lucene.apache.org; Thu, 28 Apr 2011 09:08:27 +0200
Message-ID: <4DB9126B.8090806@fissore.org>
Date: Thu, 28 Apr 2011 09:08:27 +0200
From: Federico Fissore <federico@fissore.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.14) Gecko/20110223 Thunderbird/3.1.8
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Immutable OpenBitSet?
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local> <4DB8868E.8010002@fissore.org> <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nader, John P, il 28/04/2011 00:24, ha scritto:
> Thanks.  Your project looks interesting.  We've got some duplicate home-grown stuff here that is similar.
>
> As far as thread-safety, if one thread initializes an OpenBitSet's by setting one or bits and then hands that off to another thread, the other thread may see partial results.
[...]


I see your point. As Uwe said, you can safe publish an object 
initialized by a static initializer.
 From Java Concurrency in Practice, page 52, you read

--
To publish an object safely, both the reference to the object and the 
objects state must be made visible to other threads at the same time. A
properly constructed object can be safely published by:
 Initializing an object reference from a static initializer;
 Storing a reference to it into a volatile field or AtomicReference;
 Storing a reference to it into a final field of a properly constructed
object; or
 Storing a reference to it into a field that is properly guarded by a
lock.
--

The last point means that if your bitset cache is backed by a 
synchronized collection, the JVM will guarantee the safe publication 
even of a non-thread-safe objects

federico

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 08:13:53 2011
Return-Path: <java-user-return-49505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4EE70402
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 08:13:53 +0000 (UTC)
Received: (qmail 30244 invoked by uid 500); 28 Apr 2011 08:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30188 invoked by uid 500); 28 Apr 2011 08:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30180 invoked by uid 99); 28 Apr 2011 08:13:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 08:13:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 08:13:42 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0BA11D36006
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 10:13:17 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id HmTqjcaIFxwA for <java-user@lucene.apache.org>;
	Thu, 28 Apr 2011 10:13:07 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B16B1D36005
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 10:13:07 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local> <4DB8868E.8010002@fissore.org> <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local> <4DB9126B.8090806@fissore.org>
In-Reply-To: <4DB9126B.8090806@fissore.org>
Subject: RE: Immutable OpenBitSet?
Date: Thu, 28 Apr 2011 10:13:13 +0200
Message-ID: <005901cc057c$1f4a5330$5ddef990$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMxmWqaxmtJlNFI4GO5PHDqBRNaoAKIeb2gApgsu64BVWwlkpF0Ek2A
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

In general a *newly* created object that was not yet seen by any other
thread is always safe. This is why I said, set all bits in the ctor. This is
easy to understand: Before the ctor returns, the object's contents and all
references like arrays are not seen by any other thread (that's guaranteed).

But in general, this is also true for any factory method: e.g. when
Filter.getDocIdSet() creates an OpenBitSet and returns it, the whole BitSet
is invisible to any other thread before it's "publihsed" by returning from
this method. So after the method returns it first gets visible. Inside the
getDocIdSet method its still private and therefore invisible to any other
thread. So the pattern of Filters creating DocIdSets is perfectly valid (and
works, as you see with CachingWrapperFilter). There is no need to
explicitely make OpenBitSets immutable. The only thing you should ensure is
that you don't modify them - and that the reason behind making it final.

As Federico said before, you should read the famous book about Java
Concurrency:
http://www.amazon.com/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Federico Fissore [mailto:federico@fissore.org]
> Sent: Thursday, April 28, 2011 9:08 AM
> To: java-user@lucene.apache.org
> Subject: Re: Immutable OpenBitSet?
> 
> Nader, John P, il 28/04/2011 00:24, ha scritto:
> > Thanks.  Your project looks interesting.  We've got some duplicate home-
> grown stuff here that is similar.
> >
> > As far as thread-safety, if one thread initializes an OpenBitSet's by
setting
> one or bits and then hands that off to another thread, the other thread
may
> see partial results.
> [...]
> 
> 
> I see your point. As Uwe said, you can safe publish an object initialized
by a
> static initializer.
>  From Java Concurrency in Practice, page 52, you read
> 
> --
> To publish an object safely, both the reference to the object and the
object's
> state must be made visible to other threads at the same time. A properly
> constructed object can be safely published by:
> . Initializing an object reference from a static initializer; . Storing a
reference
> to it into a volatile field or AtomicReference; . Storing a reference to
it into a
> final field of a properly constructed object; or . Storing a reference to
it into a
> field that is properly guarded by a lock.
> --
> 
> The last point means that if your bitset cache is backed by a synchronized
> collection, the JVM will guarantee the safe publication even of a
non-thread-
> safe objects
> 
> federico
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 08:27:58 2011
Return-Path: <java-user-return-49506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 015863192
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 08:27:58 +0000 (UTC)
Received: (qmail 45363 invoked by uid 500); 28 Apr 2011 08:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45320 invoked by uid 500); 28 Apr 2011 08:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45312 invoked by uid 99); 28 Apr 2011 08:27:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 08:27:55 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 08:27:49 +0000
Received: by bwz8 with SMTP id 8so3546427bwz.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 01:27:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=AfaEdni+6frzvjqm60lUE2nAFnHKZ8OlWvOAtw4GaPo=;
        b=WTSPfZmWIQUCfNNsw14w8bJpM+8j3z2xlbAn1qlxknXKD3bpfkb2egokTvhYlAEtNJ
         O+rtSY38FVOWiTpThPlClbSiBm6kdJtOBuk1/gAHgZYcVrj8IuT0GuSlQDd29KcQ7796
         qScwF3iqKM+QbWknTNPbWX9iqugS+bIpZIZ9c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Wdwfg5TKjO6lyO44Rik9ERwK9AcULmtanNTwrxdkTlEpcP0EP9icS6xWb9xWYnSu7A
         VYJaJXYBlKdipQhmPNFQdj3mp2g7QNzYy8cOBAVKoa5/DRXYceL8OQGc0UKiMt3b1WnP
         6nZVmMBr66HRjWqoAfLc3+c/W5C38zuBq04jQ=
Received: by 10.204.164.2 with SMTP id c2mr1161521bky.85.1303979248129; Thu,
 28 Apr 2011 01:27:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Thu, 28 Apr 2011 01:27:08 -0700 (PDT)
In-Reply-To: <005901cc057c$1f4a5330$5ddef990$@thetaphi.de>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
 <4DB8868E.8010002@fissore.org> <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
 <4DB9126B.8090806@fissore.org> <005901cc057c$1f4a5330$5ddef990$@thetaphi.de>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Thu, 28 Apr 2011 10:27:08 +0200
Message-ID: <BANLkTinFC6p4KqkpF479svDsVtjv5Ew8BQ@mail.gmail.com>
Subject: Re: Immutable OpenBitSet?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51ba011e117c404a1f65397

--bcaec51ba011e117c404a1f65397
Content-Type: text/plain; charset=UTF-8

> In general a *newly* created object that was not yet seen by any other
> thread is always safe. This is why I said, set all bits in the ctor. This
> is
> easy to understand: Before the ctor returns, the object's contents and all
> references like arrays are not seen by any other thread (that's
> guaranteed).
>

Yes, this is obvious, but simply having a static factory method like this:

public static MyComplexObject create() {
  return new MyComplexObject();
}

does not make the returned object consistent for multithreaded use simply
because nothing has been said about how this object is handed over to other
threads. If it's field-sharing (without volatiles and finals) then the
assigned reference (and whatever content it allocated) may be seen properly
on hardware architectures ensuring memory consistency, but can fail on other
architectures with relaxed caches requiring explicit memory barriers.

Like I said though -- incorrect programs work on most jvms anyway (either
because the hardware fixes the problem or the jvm is not aggressive enough
in the optimizations it could make).

Dawid

--bcaec51ba011e117c404a1f65397--

From java-user-return-49507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 11:49:54 2011
Return-Path: <java-user-return-49507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 432D53259
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 11:49:54 +0000 (UTC)
Received: (qmail 79004 invoked by uid 500); 28 Apr 2011 11:49:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78960 invoked by uid 500); 28 Apr 2011 11:49:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78952 invoked by uid 99); 28 Apr 2011 11:49:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 11:49:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 11:49:45 +0000
Received: by fxm7 with SMTP id 7so3060205fxm.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 04:49:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=m1I/FZNmrsPXlYQyydWOTh2BuK/q7LfCDIAMTpz0JQI=;
        b=jphL1ZVYI0zYfFASgHeBtA80HwJ//+Hf3obtuT7pnDudD2PM8EUZqKiQ322us1rAej
         kNCaqcrNvZ1nopZ+EFE/Qg8l3NPKSJfM3/iCHB2nBqhKRYHGKzzKb6GcC+CzaQF4/Ssl
         6I5Fa0MjYQMkKXJzr19LMYhgJtzQa9/SAttIs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=k6klADYWilTKHWHrj4JZeS2b/2RJD4mOA8gRviBzdMG4p4RSWV8GIB3Oi8Ie95PUip
         ClPQVcr+5BU/DTeDustaRdWMpsVnpG8j7gryH6UDx8Z94z0W+ZWC0tk1etH6DJQgopnF
         ewpifl+NXMEHB6DKhjHYajsBIM82bjnt9K7rM=
MIME-Version: 1.0
Received: by 10.223.54.213 with SMTP id r21mr553180fag.54.1303991365578; Thu,
 28 Apr 2011 04:49:25 -0700 (PDT)
Received: by 10.223.147.70 with HTTP; Thu, 28 Apr 2011 04:49:25 -0700 (PDT)
Date: Thu, 28 Apr 2011 13:49:25 +0200
Message-ID: <BANLkTimfKUhnjtrH440c5xQTR_5V1GccsQ@mail.gmail.com>
Subject: Are Okapi BM25 scores normalized into 0 and 1 ?
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151747359422b00304a1f92684
X-Virus-Checked: Checked by ClamAV on apache.org

--00151747359422b00304a1f92684
Content-Type: text/plain; charset=ISO-8859-1

Is Okapi BM25 (its implementation in Lucene:
nlp.uned.es/~jperezi/Lucene-BM25) returning back normalized query scores (in
between 0 and 1) ?

According to Okapi formula the final score should be normalized. Could you
give some information about that ?

thanks

--00151747359422b00304a1f92684--

From java-user-return-49508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 12:45:29 2011
Return-Path: <java-user-return-49508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C6F43B8E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 12:45:29 +0000 (UTC)
Received: (qmail 38915 invoked by uid 500); 28 Apr 2011 12:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38861 invoked by uid 500); 28 Apr 2011 12:45:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38853 invoked by uid 99); 28 Apr 2011 12:45:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 12:45:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trejkaz@trypticon.org designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 12:45:20 +0000
Received: by pwi16 with SMTP id 16so1746501pwi.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 05:44:58 -0700 (PDT)
Received: by 10.68.4.199 with SMTP id m7mr3756686pbm.370.1303994698890;
        Thu, 28 Apr 2011 05:44:58 -0700 (PDT)
Received: from mail-pw0-f48.google.com (mail-pw0-f48.google.com [209.85.160.48])
        by mx.google.com with ESMTPS id q19sm1199117pbt.88.2011.04.28.05.44.57
        (version=SSLv3 cipher=OTHER);
        Thu, 28 Apr 2011 05:44:58 -0700 (PDT)
Received: by pwi16 with SMTP id 16so1746477pwi.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 05:44:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.38.102 with SMTP id f6mr3243534pbk.261.1303994697049; Thu,
 28 Apr 2011 05:44:57 -0700 (PDT)
Received: by 10.68.62.231 with HTTP; Thu, 28 Apr 2011 05:44:56 -0700 (PDT)
In-Reply-To: <005901cc057c$1f4a5330$5ddef990$@thetaphi.de>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
	<4DB8868E.8010002@fissore.org>
	<70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
	<4DB9126B.8090806@fissore.org>
	<005901cc057c$1f4a5330$5ddef990$@thetaphi.de>
Date: Thu, 28 Apr 2011 22:44:56 +1000
Message-ID: <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com>
Subject: Re: Immutable OpenBitSet?
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Apr 28, 2011 at 6:13 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> In general a *newly* created object that was not yet seen by any other
> thread is always safe. This is why I said, set all bits in the ctor. This is
> easy to understand: Before the ctor returns, the object's contents and all
> references like arrays are not seen by any other thread (that's guaranteed).

Section 17.5 of the JLS gives the following example:

    class FinalFieldExample {
      final int x;
      int y;
      static FinalFieldExample f;
      public FinalFieldExample() {
        x = 3;
        y = 4;
      }
      static void writer() {
        f = new FinalFieldExample();
      }
      static void reader() {
        if (f != null) {
          int i = f.x; // guaranteed to see 3
          int j = f.y; // could see 0
        }
      }
    }

Essentially, there is no guarantee that the work in the constructor
has been completed when another thread gets a reference to the object.
 To make the guarantee, use the final keyword.

It seems like this contradicts the claim above, but maybe I'm missing something.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 13:00:35 2011
Return-Path: <java-user-return-49509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 964EB329B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 13:00:33 +0000 (UTC)
Received: (qmail 52779 invoked by uid 500); 28 Apr 2011 13:00:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52735 invoked by uid 500); 28 Apr 2011 13:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52727 invoked by uid 99); 28 Apr 2011 13:00:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 13:00:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 13:00:24 +0000
Received: by bwz8 with SMTP id 8so3791715bwz.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 06:00:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=9EsQAchFQtwGq4fddGALDOpQXpE0oZJU6QOJUmKdh8k=;
        b=ZrYiO0lLVBZdmABlAwHPac5JJhyJtpN7HtoNnrYRtRbcm9cGI/YvORudqqskmo1h0H
         eafZR2bV5EOPwyXxT0b1jhVjvXXMLuBmyMpNrmPmzAOsU7TadZCiqPN2WCQmh6F7f3Og
         jWkboEr3/ycScUacFwzTTL6FDutdaMzyqsW7Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=pyQNPl/ns8Sql4v4k1PLLqHuyrsPcIm5SsE61AwZHsrYit9LbUjZo/oEc3DDRdvJdi
         Nu/80Cz8lPMH2UgY8bI+Kv5TnXf3F0zaGePDbSpmnwUU954SKJ/2PnAc3zKhpigTntiF
         VMQm59TkvKvhgOVc+46SLSr6BCmEdNnLRDdbk=
Received: by 10.204.126.73 with SMTP id b9mr3303275bks.193.1303995603283; Thu,
 28 Apr 2011 06:00:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Thu, 28 Apr 2011 05:59:43 -0700 (PDT)
In-Reply-To: <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
 <4DB8868E.8010002@fissore.org> <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
 <4DB9126B.8090806@fissore.org> <005901cc057c$1f4a5330$5ddef990$@thetaphi.de> <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Thu, 28 Apr 2011 14:59:43 +0200
Message-ID: <BANLkTik+OSBz6470S9iYuMg9NNEpnsRWgA@mail.gmail.com>
Subject: Re: Immutable OpenBitSet?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d96f65b8eecb04a1fa22dc

--0016e6d96f65b8eecb04a1fa22dc
Content-Type: text/plain; charset=UTF-8

>      static void writer() {
>        f = new FinalFieldExample();
>      }
>      static void reader() {
>        if (f != null) {
>          int i = f.x; // guaranteed to see 3
>          int j = f.y; // could see 0
>        }
>      }
>    }
>

In this snippet of code there's not even a guarantee that reader() will see
the change to field f... I used to create puzzlers for students around spin
loops that got optimized away by hotspot to never again reference the
(condition) field because the code never mutated it inside the loop. So
something like this:

while (f == null) {}

should get jitted into this:

while (true) {}

D.

--0016e6d96f65b8eecb04a1fa22dc--

From java-user-return-49510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 13:15:29 2011
Return-Path: <java-user-return-49510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 996A1388A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 13:15:29 +0000 (UTC)
Received: (qmail 83637 invoked by uid 500); 28 Apr 2011 13:15:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83551 invoked by uid 500); 28 Apr 2011 13:15:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83543 invoked by uid 99); 28 Apr 2011 13:15:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 13:15:27 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tanujjain.mail@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 13:15:19 +0000
Received: by iwr19 with SMTP id 19so3455962iwr.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 06:14:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=J2OctY+qq6r7oz7QP3cNEIlNCJmLa8IPLClhE8MKwg4=;
        b=G4W0Nr7ppdXXSzOkTOQ+L4pgqfQD8BjVgA4KSaOk67AhwpLfnqmFCIvOuWeaKl9vqZ
         r5F7VV6ytk9lg+vr+9GdSehlZJNK5LK8A7FRELlkTtfAfWuNu1CtCPhEfH3a0mSMH+uW
         /hfRMb1jqnCk2qrGYIMLKN7weHgVEDsNV2FBU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=wH6iP2zKP+eCYTvAgDBStv79JMUN3jztpHEQgEoS3kU8ZpSzFmOdLy5GgtfciHxFw8
         CQH3WubCfqFjviHlZKhxfZeUl3VvpNwNuO5vQ2ZZIYoZOyq7UmLyeiLKPuSajPN3eFl1
         vPGQMEE1Tp4kkZPKFiVY2ZVxpnl2XPzfiLn7w=
Received: by 10.231.49.1 with SMTP id t1mr2691160ibf.135.1303996499162; Thu,
 28 Apr 2011 06:14:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.39.202 with HTTP; Thu, 28 Apr 2011 06:14:19 -0700 (PDT)
From: Tanuj Jain <tanujjain.mail@gmail.com>
Date: Thu, 28 Apr 2011 18:44:19 +0530
Message-ID: <BANLkTikWPN363Rwhge-s1Pd28WdJNSwToA@mail.gmail.com>
Subject: lucene 3.1 contrib packages source code download
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015176f1bec1ef6d704a1fa581a

--0015176f1bec1ef6d704a1fa581a
Content-Type: text/plain; charset=UTF-8

Hi,
Can anyone please tell where I could download *packages
org.apache.lucene.analysis.* *so that I could use them in lucene 3.1
version.
I have *deprecated version* for the above mentioned package. Please tell
from where I could get the contrib packages *source code* for lucene 3.1.
Is there any official website for that? If any please tell.

:)

--0015176f1bec1ef6d704a1fa581a--

From java-user-return-49511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 13:26:14 2011
Return-Path: <java-user-return-49511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5BC8D3F6E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 13:26:14 +0000 (UTC)
Received: (qmail 6576 invoked by uid 500); 28 Apr 2011 13:26:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6532 invoked by uid 500); 28 Apr 2011 13:26:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6524 invoked by uid 99); 28 Apr 2011 13:26:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 13:26:12 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of johngouf85@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 13:26:04 +0000
Received: by fxm7 with SMTP id 7so3156406fxm.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 06:25:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=bt1JKGZjGqW0idJOc5f1oMU8HWRGRWl8yWCEpeqEOgQ=;
        b=U5oJZqXCDXudjZlL5clMBUrMxwQ/9iBX57eDIeAydSNg70lPxprzNWln7lsJN2D5+/
         U/I+Zp8RDzYUSvqExe8mqBiSdJ8TAoqpB6B2jXI4EsSK9zWHZVXEy0NwmmGxsKNL9kg7
         dluh8Td0MQ6jw+mU1/z/0XI7+iAN7saYxjBiQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=p3aqB0Ir+fsI97YTMR5KS8JDzgYk9atk51X0JSSHq9/fkDRW30gtKDWY2SifrVIY0v
         3dra+sPp3pAMVJMAR625uKgckbO3+dviUtamTPzAivkP3cE0Ava4H4dc8KSwGvF0x5pa
         BS7532jmiYYwxXwgUBTyg87e0fmGZnKkm7vlo=
Received: by 10.223.67.210 with SMTP id s18mr3871982fai.41.1303997143206; Thu,
 28 Apr 2011 06:25:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.97.11 with HTTP; Thu, 28 Apr 2011 06:18:23 -0700 (PDT)
In-Reply-To: <BANLkTikWPN363Rwhge-s1Pd28WdJNSwToA@mail.gmail.com>
References: <BANLkTikWPN363Rwhge-s1Pd28WdJNSwToA@mail.gmail.com>
From: Yiannis Gkoufas <johngouf85@gmail.com>
Date: Thu, 28 Apr 2011 16:18:23 +0300
Message-ID: <BANLkTindBGKWNvALLHmJrL+tmhN6xU4+Dg@mail.gmail.com>
Subject: Re: lucene 3.1 contrib packages source code download
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a65b824a9c04a1fa7e2c
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3054a65b824a9c04a1fa7e2c
Content-Type: text/plain; charset=ISO-8859-1

Hi Tanuj!

If you are familiar with subversion this is the place
http://wiki.apache.org/lucene-java/SourceRepository

Regards,
Yiannis

On Thu, Apr 28, 2011 at 4:14 PM, Tanuj Jain <tanujjain.mail@gmail.com>wrote:

> Hi,
> Can anyone please tell where I could download *packages
> org.apache.lucene.analysis.* *so that I could use them in lucene 3.1
> version.
> I have *deprecated version* for the above mentioned package. Please tell
> from where I could get the contrib packages *source code* for lucene 3.1.
> Is there any official website for that? If any please tell.
>
> :)
>

--20cf3054a65b824a9c04a1fa7e2c--

From java-user-return-49512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 13:33:16 2011
Return-Path: <java-user-return-49512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4FE533DF0
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 13:33:16 +0000 (UTC)
Received: (qmail 17369 invoked by uid 500); 28 Apr 2011 13:33:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17299 invoked by uid 500); 28 Apr 2011 13:33:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17291 invoked by uid 99); 28 Apr 2011 13:33:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 13:33:14 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 13:33:02 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 32136D36005
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 15:32:42 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id P-9q0CFooBrD for <java-user@lucene.apache.org>;
	Thu, 28 Apr 2011 15:32:37 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id DB301D36002
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 15:32:36 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>	<4DB8868E.8010002@fissore.org>	<70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>	<4DB9126B.8090806@fissore.org>	<005901cc057c$1f4a5330$5ddef990$@thetaphi.de> <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com>
In-Reply-To: <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com>
Subject: RE: Immutable OpenBitSet?
Date: Thu, 28 Apr 2011 15:32:42 +0200
Message-ID: <00ac01cc05a8$c0f6b4e0$42e41ea0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMxmWqaxmtJlNFI4GO5PHDqBRNaoAKIeb2gApgsu64BVWwlkgIJ6QmGAnzU0HaRUDbOYA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

This is all not a problem, if the reference to the newly created object =
is passed e.g. into a synchronized cache (like it is done in =
CachingWrapperFilter). When entering the synchronized method that adds =
the reference to the object to the cache (in the filter case =
it=E2=80=99s the OpenBitSet created shortly before), a memory barrier =
will make the complete object with all its references published to all.

So:

bs =3D new OpenBitSet();
bs.fastSet(something);
synchronized (cacheLock) {
	cache.put(rederKey, bs);
}

Is safe as after the synchronized, the memory barrier causes safe =
publish. This is what also Federico Fissore said.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Trejkaz [mailto:trejkaz@trypticon.org]
> Sent: Thursday, April 28, 2011 2:45 PM
> To: java-user@lucene.apache.org
> Subject: Re: Immutable OpenBitSet?
>=20
> On Thu, Apr 28, 2011 at 6:13 PM, Uwe Schindler <uwe@thetaphi.de> =
wrote:
> > In general a *newly* created object that was not yet seen by any =
other
> > thread is always safe. This is why I said, set all bits in the ctor.
> > This is easy to understand: Before the ctor returns, the object's
> > contents and all references like arrays are not seen by any other =
thread
> (that's guaranteed).
>=20
> Section 17.5 of the JLS gives the following example:
>=20
>     class FinalFieldExample {
>       final int x;
>       int y;
>       static FinalFieldExample f;
>       public FinalFieldExample() {
>         x =3D 3;
>         y =3D 4;
>       }
>       static void writer() {
>         f =3D new FinalFieldExample();
>       }
>       static void reader() {
>         if (f !=3D null) {
>           int i =3D f.x; // guaranteed to see 3
>           int j =3D f.y; // could see 0
>         }
>       }
>     }
>=20
> Essentially, there is no guarantee that the work in the constructor =
has been
> completed when another thread gets a reference to the object.
>  To make the guarantee, use the final keyword.
>=20
> It seems like this contradicts the claim above, but maybe I'm missing
> something.
>=20
> TX
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 14:05:48 2011
Return-Path: <java-user-return-49513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 322713476
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 14:05:48 +0000 (UTC)
Received: (qmail 57493 invoked by uid 500); 28 Apr 2011 14:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57447 invoked by uid 500); 28 Apr 2011 14:05:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57436 invoked by uid 99); 28 Apr 2011 14:05:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 14:05:45 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 14:05:39 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id AA855D36005
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 16:05:17 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id O+2UEdILBERr for <java-user@lucene.apache.org>;
	Thu, 28 Apr 2011 16:05:12 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 7AF0AD36002
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 16:05:12 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local> <4DB8868E.8010002@fissore.org> <70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local> <4DB9126B.8090806@fissore.org> <005901cc057c$1f4a5330$5ddef990$@thetaphi.de> <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com> <BANLkTik+OSBz6470S9iYuMg9NNEpnsRWgA@mail.gmail.com>
In-Reply-To: <BANLkTik+OSBz6470S9iYuMg9NNEpnsRWgA@mail.gmail.com>
Subject: RE: Immutable OpenBitSet?
Date: Thu, 28 Apr 2011 16:05:18 +0200
Message-ID: <00b701cc05ad$4e7037c0$eb50a740$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMxmWqaxmtJlNFI4GO5PHDqBRNaoAKIeb2gApgsu64BVWwlkgIJ6QmGAnzU0HYBUQzhHZFFtxWA
Content-Language: de

The missing safe publish of the reference to the object is the problem =
here. Once you have published "f" safely between writer and reader, all =
contents and references to other objects inside the FinalFieldExample =
are visible.

The final modifier on this only assures in the case of no safe publish, =
that if for some reason the reader actually sees the object reference =
f!=3Dnull you then see the value of f.x. But as this is broken, you =
would never do this - the reader could even simply see null. Because of =
this you have to safe publish f, and then also f.x and f.x are correct =
(and then it does not matter if final or not).

To fix the example, make reader and writer synchronized, then f is =
published in a safe way (alternatively make f volatile). And that is =
what e.g. CachingWrapperFilter does (it puts the OpenBitSet into a =
synchronized map) - see my last mail.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Dawid Weiss [mailto:dawid.weiss@gmail.com]
> Sent: Thursday, April 28, 2011 3:00 PM
> To: java-user@lucene.apache.org
> Subject: Re: Immutable OpenBitSet?
>=20
> >      static void writer() {
> >        f =3D new FinalFieldExample();
> >      }
> >      static void reader() {
> >        if (f !=3D null) {
> >          int i =3D f.x; // guaranteed to see 3
> >          int j =3D f.y; // could see 0
> >        }
> >      }
> >    }
> >
>=20
> In this snippet of code there's not even a guarantee that reader() =
will see the
> change to field f... I used to create puzzlers for students around =
spin loops
> that got optimized away by hotspot to never again reference the
> (condition) field because the code never mutated it inside the loop. =
So
> something like this:
>=20
> while (f =3D=3D null) {}
>=20
> should get jitted into this:
>=20
> while (true) {}
>=20
> D.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 14:21:55 2011
Return-Path: <java-user-return-49514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7CF1C3BF7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 14:21:55 +0000 (UTC)
Received: (qmail 85272 invoked by uid 500); 28 Apr 2011 14:21:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85223 invoked by uid 500); 28 Apr 2011 14:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85204 invoked by uid 99); 28 Apr 2011 14:21:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 14:21:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 14:21:47 +0000
Received: from ([10.160.3.176])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.63255489;
	Thu, 28 Apr 2011 10:21:23 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht04.corp.local
 ([10.160.3.176]) with mapi; Thu, 28 Apr 2011 10:21:23 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 28 Apr 2011 10:21:22 -0400
Subject: RE: Immutable OpenBitSet?
Thread-Topic: Immutable OpenBitSet?
Thread-Index: AcwFoilsg/huuQ8yQoerE8gJEShPZgAC9/fQ
Message-ID: <70EA5691BD59734784FF872CD1B9747A28500E00AB@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>
	<4DB8868E.8010002@fissore.org>
	<70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>
	<4DB9126B.8090806@fissore.org>	<005901cc057c$1f4a5330$5ddef990$@thetaphi.de>
 <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com>
In-Reply-To: <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

SSBhZ3JlZSB0aGF0IFRyZWprYXoncyBleGFtcGxlIGlzIGNvcnJlY3QgYW5kIGNvbnNpc3RlbnQg
d2l0aCBib3RoIHRoZSBKTFMgc3BlYyBhbmQgIkphdmEgQ29uY3VycmVuY3kgaW4gUHJhY3RpY2Ui
LCBieSBHb2V0ei4gIA0KDQpXaXRob3V0IHN5bmNocm9uaXphdGlvbiwgdGhlIGZpbmFsIGtleXdv
cmQgaXMgbmVjZXNzYXJ5IHRvIGVuc3VyZSBhbGwgdmFsdWVzIHNldCBvbiBhIGxvbmdbXSBpbiBh
IGNvbnN0cnVjdG9yIGFyZSBzZWVuIGJ5IG90aGVyIHRocmVhZHMgaW4gdGhlIHN0YXRlIHRoZXkg
d2VyZSB3aGVuIHRoZSBjb25zdHJ1Y3RvciBjb21wbGV0ZWQuICBUaGlzIGtleXdvcmQgYWxsb3dz
IGphdmEgdG8gaW5zZXJ0IHRoZSBhcHByb3ByaWF0ZSByZWFkIGJhcnJpZXJzIG9uIHRoZSBmaXJz
dCByZWFkIG9mIHRoZSBvYmplY3QsIHdpdGhvdXQgdGhlIG92ZXJoZWFkIG9mIHJlYWQgYmFycmll
cnMgcmVwZWF0ZWRseSBvbiBldmVyeSByZWFkIG9mIHRoZSBvYmplY3QuDQoNClRoZSBvYmplY3Qg
Y29uc3RydWN0aW9uIGd1YXJhbnRlZXMgYXJlIG5vdCBlbm91Z2ggZm9yIHRoZSBsb25nW10gYmVj
YXVzZSB0aGVzZSBvbmx5IGd1YXJhbnRlZSB5b3Ugd2lsbCBzZWUgdGhlIGluaXRpYWwgYXJyYXkg
b2YgemVybydzLiAgVG8gZ3VhcmFudGVlIHNhZmV0eSBvbiB0aGUgc3Vic2VxdWVudCB3cml0ZXMg
dG8gdGhlIGxvbmdbXSBkdXJpbmcgdGhlIE9wZW5CaXRTZXQgY29uc3RydWN0b3IsIHRoZSBmaW5h
bCBrZXl3b3JkIGVuc3VyZSB0aG9zZSB3cml0ZXMgd2lsbCBiZSBmbHVzaGVkIHRvIG1haW4gbWVt
b3J5IHdoZW4gY29uc3RydWN0aW9uIGNvbXBsZXRlcyBwcmlvciB0byBhbnkgb3RoZXIgdGhyZWFk
IGdldHRpbmcgYSByZWZlcmVuY2UgdG8gdGhlIG9iamVjdC4NCg0KQSB2YWx1ZSBob2xkZXIgdGhh
dCBob2xkcyBhIGZpbmFsIHJlZmVyZW5jZSB0byB0aGUgT3BlbkJpdFNldCBpcyBkZWZpbml0ZWx5
IGFuIG9wdGlvbiBhcyBpdCBvZmZlcnMgdGhhdCBzYW1lIHByb3RlY3Rpb24uDQoNCg0KLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IFRyZWprYXogW21haWx0bzp0cmVqa2F6QHRyeXB0
aWNvbi5vcmddIA0KU2VudDogVGh1cnNkYXksIEFwcmlsIDI4LCAyMDExIDg6NDUgQU0NClRvOiBq
YXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IFJlOiBJbW11dGFibGUgT3BlbkJp
dFNldD8NCg0KT24gVGh1LCBBcHIgMjgsIDIwMTEgYXQgNjoxMyBQTSwgVXdlIFNjaGluZGxlciA8
dXdlQHRoZXRhcGhpLmRlPiB3cm90ZToNCj4gSW4gZ2VuZXJhbCBhICpuZXdseSogY3JlYXRlZCBv
YmplY3QgdGhhdCB3YXMgbm90IHlldCBzZWVuIGJ5IGFueSBvdGhlcg0KPiB0aHJlYWQgaXMgYWx3
YXlzIHNhZmUuIFRoaXMgaXMgd2h5IEkgc2FpZCwgc2V0IGFsbCBiaXRzIGluIHRoZSBjdG9yLiBU
aGlzIGlzDQo+IGVhc3kgdG8gdW5kZXJzdGFuZDogQmVmb3JlIHRoZSBjdG9yIHJldHVybnMsIHRo
ZSBvYmplY3QncyBjb250ZW50cyBhbmQgYWxsDQo+IHJlZmVyZW5jZXMgbGlrZSBhcnJheXMgYXJl
IG5vdCBzZWVuIGJ5IGFueSBvdGhlciB0aHJlYWQgKHRoYXQncyBndWFyYW50ZWVkKS4NCg0KU2Vj
dGlvbiAxNy41IG9mIHRoZSBKTFMgZ2l2ZXMgdGhlIGZvbGxvd2luZyBleGFtcGxlOg0KDQogICAg
Y2xhc3MgRmluYWxGaWVsZEV4YW1wbGUgew0KICAgICAgZmluYWwgaW50IHg7DQogICAgICBpbnQg
eTsNCiAgICAgIHN0YXRpYyBGaW5hbEZpZWxkRXhhbXBsZSBmOw0KICAgICAgcHVibGljIEZpbmFs
RmllbGRFeGFtcGxlKCkgew0KICAgICAgICB4ID0gMzsNCiAgICAgICAgeSA9IDQ7DQogICAgICB9
DQogICAgICBzdGF0aWMgdm9pZCB3cml0ZXIoKSB7DQogICAgICAgIGYgPSBuZXcgRmluYWxGaWVs
ZEV4YW1wbGUoKTsNCiAgICAgIH0NCiAgICAgIHN0YXRpYyB2b2lkIHJlYWRlcigpIHsNCiAgICAg
ICAgaWYgKGYgIT0gbnVsbCkgew0KICAgICAgICAgIGludCBpID0gZi54OyAvLyBndWFyYW50ZWVk
IHRvIHNlZSAzDQogICAgICAgICAgaW50IGogPSBmLnk7IC8vIGNvdWxkIHNlZSAwDQogICAgICAg
IH0NCiAgICAgIH0NCiAgICB9DQoNCkVzc2VudGlhbGx5LCB0aGVyZSBpcyBubyBndWFyYW50ZWUg
dGhhdCB0aGUgd29yayBpbiB0aGUgY29uc3RydWN0b3INCmhhcyBiZWVuIGNvbXBsZXRlZCB3aGVu
IGFub3RoZXIgdGhyZWFkIGdldHMgYSByZWZlcmVuY2UgdG8gdGhlIG9iamVjdC4NCiBUbyBtYWtl
IHRoZSBndWFyYW50ZWUsIHVzZSB0aGUgZmluYWwga2V5d29yZC4NCg0KSXQgc2VlbXMgbGlrZSB0
aGlzIGNvbnRyYWRpY3RzIHRoZSBjbGFpbSBhYm92ZSwgYnV0IG1heWJlIEknbSBtaXNzaW5nIHNv
bWV0aGluZy4NCg0KVFgNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBq
YXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-49515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 14:32:20 2011
Return-Path: <java-user-return-49515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 301593733
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 14:32:20 +0000 (UTC)
Received: (qmail 3824 invoked by uid 500); 28 Apr 2011 14:32:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3747 invoked by uid 500); 28 Apr 2011 14:32:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3739 invoked by uid 99); 28 Apr 2011 14:32:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 14:32:18 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 14:32:11 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 41D4BD36005
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 16:31:50 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8N0-9m7s2dcp for <java-user@lucene.apache.org>;
	Thu, 28 Apr 2011 16:31:44 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3F7E3D36002
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 16:31:44 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <70EA5691BD59734784FF872CD1B9747A28500DFDA8@OHCINMBX01.corp.local>	<4DB8868E.8010002@fissore.org>	<70EA5691BD59734784FF872CD1B9747A28500DFF31@OHCINMBX01.corp.local>	<4DB9126B.8090806@fissore.org>	<005901cc057c$1f4a5330$5ddef990$@thetaphi.de> <BANLkTinMWLj8-f16qKSa0uSOE4zMDc8ttw@mail.gmail.com> <70EA5691BD59734784FF872CD1B9747A28500E00AB@OHCINMBX01.corp.local>
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A28500E00AB@OHCINMBX01.corp.local>
Subject: RE: Immutable OpenBitSet?
Date: Thu, 28 Apr 2011 16:31:49 +0200
Message-ID: <00b801cc05b1$032c7fe0$09857fa0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMxmWqaxmtJlNFI4GO5PHDqBRNaoAKIeb2gApgsu64BVWwlkgIJ6QmGAnzU0HYB0vAzH5FBsP4Q
Content-Language: de

That was exactly what I demonstrated in another mail on this thread:

final OpenBitSet mybits =3D new OpenBitSet(size) {{
	fastSet(1); fastSet(2);...
}};

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Nader, John P [mailto:john.nader@cengage.com]
> Sent: Thursday, April 28, 2011 4:21 PM
> To: java-user@lucene.apache.org
> Subject: RE: Immutable OpenBitSet?
>=20
> I agree that Trejkaz's example is correct and consistent with both the =
JLS spec
> and "Java Concurrency in Practice", by Goetz.
>=20
> Without synchronization, the final keyword is necessary to ensure all =
values
> set on a long[] in a constructor are seen by other threads in the =
state they
> were when the constructor completed.  This keyword allows java to =
insert
> the appropriate read barriers on the first read of the object, without =
the
> overhead of read barriers repeatedly on every read of the object.
>=20
> The object construction guarantees are not enough for the long[] =
because
> these only guarantee you will see the initial array of zero's.  To =
guarantee
> safety on the subsequent writes to the long[] during the OpenBitSet
> constructor, the final keyword ensure those writes will be flushed to =
main
> memory when construction completes prior to any other thread getting a
> reference to the object.
>=20
> A value holder that holds a final reference to the OpenBitSet is =
definitely an
> option as it offers that same protection.
>=20
>=20
> -----Original Message-----
> From: Trejkaz [mailto:trejkaz@trypticon.org]
> Sent: Thursday, April 28, 2011 8:45 AM
> To: java-user@lucene.apache.org
> Subject: Re: Immutable OpenBitSet?
>=20
> On Thu, Apr 28, 2011 at 6:13 PM, Uwe Schindler <uwe@thetaphi.de> =
wrote:
> > In general a *newly* created object that was not yet seen by any =
other
> > thread is always safe. This is why I said, set all bits in the ctor.
> > This is easy to understand: Before the ctor returns, the object's
> > contents and all references like arrays are not seen by any other =
thread
> (that's guaranteed).
>=20
> Section 17.5 of the JLS gives the following example:
>=20
>     class FinalFieldExample {
>       final int x;
>       int y;
>       static FinalFieldExample f;
>       public FinalFieldExample() {
>         x =3D 3;
>         y =3D 4;
>       }
>       static void writer() {
>         f =3D new FinalFieldExample();
>       }
>       static void reader() {
>         if (f !=3D null) {
>           int i =3D f.x; // guaranteed to see 3
>           int j =3D f.y; // could see 0
>         }
>       }
>     }
>=20
> Essentially, there is no guarantee that the work in the constructor =
has been
> completed when another thread gets a reference to the object.
>  To make the guarantee, use the final keyword.
>=20
> It seems like this contradicts the claim above, but maybe I'm missing
> something.
>=20
> TX
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 20:26:42 2011
Return-Path: <java-user-return-49516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 95B6B3159
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 20:26:42 +0000 (UTC)
Received: (qmail 51466 invoked by uid 500); 28 Apr 2011 20:26:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51425 invoked by uid 500); 28 Apr 2011 20:26:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51417 invoked by uid 99); 28 Apr 2011 20:26:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 20:26:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 20:26:34 +0000
Received: by qyk2 with SMTP id 2so3216448qyk.14
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 13:26:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=j82hEwDn56kM2lmPu7L3gWr8MTFWCPifQTyu+2LcoT8=;
        b=lJAtXuwPg+rqpWUGXXNfGbZ0VGgQlB6wXQfPASNKC7/w52VAaKZDpg4Iojf4AFiAC6
         fxSdGq+namKS4PbcQUtUPM1TAvVrNa4qn1IYSZ9v3kzGwvihn826+hLLuO2/jHAbo87g
         JtJg6XOarP6mzTRzsUKjDEMrT4N0xgnklXDZg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KAdaRvlBE9fDekgbSUAVGxaylT7E5Kskpw5MEnuCxx8LWrSkf0xPPkR4lIhIuoESB/
         1o4tpZdHjqzUlUvZmGrXNu2dz6db4BacXIJDj5EPBRSxlY5m/0AlIytxUHafV2MhhMtG
         8hfSPUUDI36lnrMh7BghF/Y/JKxUef/ZTt44E=
MIME-Version: 1.0
Received: by 10.229.77.139 with SMTP id g11mr3187761qck.9.1304022373220; Thu,
 28 Apr 2011 13:26:13 -0700 (PDT)
Received: by 10.229.245.81 with HTTP; Thu, 28 Apr 2011 13:26:13 -0700 (PDT)
In-Reply-To: <BANLkTikWPN363Rwhge-s1Pd28WdJNSwToA@mail.gmail.com>
References: <BANLkTikWPN363Rwhge-s1Pd28WdJNSwToA@mail.gmail.com>
Date: Thu, 28 Apr 2011 16:26:13 -0400
Message-ID: <BANLkTikE617rjy+6fbix=f=e=0caq7Dr7Q@mail.gmail.com>
Subject: Re: lucene 3.1 contrib packages source code download
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Are you sure you need to? They may simply have moved. Which ones
are you using? If you tell us maybe we can suggest where to find them.

Best
Erick

On Thu, Apr 28, 2011 at 9:14 AM, Tanuj Jain <tanujjain.mail@gmail.com> wrote:
> Hi,
> Can anyone please tell where I could download *packages
> org.apache.lucene.analysis.* *so that I could use them in lucene 3.1
> version.
> I have *deprecated version* for the above mentioned package. Please tell
> from where I could get the contrib packages *source code* for lucene 3.1.
> Is there any official website for that? If any please tell.
>
> :)
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 20:55:59 2011
Return-Path: <java-user-return-49517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B8CAB3B4C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 20:55:59 +0000 (UTC)
Received: (qmail 31375 invoked by uid 500); 28 Apr 2011 20:55:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31331 invoked by uid 500); 28 Apr 2011 20:55:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31318 invoked by uid 99); 28 Apr 2011 20:55:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 20:55:56 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of johngouf85@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 20:55:50 +0000
Received: by fxm7 with SMTP id 7so3709022fxm.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 13:55:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=p+urrbqN4IUFAW/Aw1rqPp7SRvunqpq6/tZG93cYMB0=;
        b=pC4MFjNgK/EyVKz52WGO4xApfZRp9VwOuYk4tv2saPKpPMVaUvP10cDPBqrnvEXG7e
         mzqx+n+D8OftzYjDiq70NbNUTzQ4rSqKcvUQPxAd1eJhQLU7fixhi8H27AeKlTlUy6CN
         lfxIQ/Wtek5Cfj7h/aB0XrN97gbVcfOp52Uv4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=L/8ZGETZ/hRfrekU0CiUPOKnzUsg39Jz/MqKj0w4iRvU9OO+MjZaRnfoF7rcgSk121
         Lab+1izHq2+LD3+TM2gakijOPW49iL3WP5sMzjZphcTp46y4FRVAqiKwKokcndcD+9nb
         UvgZg45bOCF+c4wQbr3CE9UhyTmK1sx4utlQs=
Received: by 10.223.75.133 with SMTP id y5mr639325faj.136.1304024129173; Thu,
 28 Apr 2011 13:55:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.97.11 with HTTP; Thu, 28 Apr 2011 13:55:09 -0700 (PDT)
In-Reply-To: <BANLkTikE617rjy+6fbix=f=e=0caq7Dr7Q@mail.gmail.com>
References: <BANLkTikWPN363Rwhge-s1Pd28WdJNSwToA@mail.gmail.com> <BANLkTikE617rjy+6fbix=f=e=0caq7Dr7Q@mail.gmail.com>
From: Yiannis Gkoufas <johngouf85@gmail.com>
Date: Thu, 28 Apr 2011 23:55:09 +0300
Message-ID: <BANLkTi=gHBEFCGj0fVFXcZ_2JH7pW6YLcA@mail.gmail.com>
Subject: Re: lucene 3.1 contrib packages source code download
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c4174ff776904a200c66d

--0015174c4174ff776904a200c66d
Content-Type: text/plain; charset=ISO-8859-1

Can you check here ---->
http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/contrib/
 <http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/contrib/>Isn't
this what you are looking for?

On Thu, Apr 28, 2011 at 11:26 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Are you sure you need to? They may simply have moved. Which ones
> are you using? If you tell us maybe we can suggest where to find them.
>
> Best
> Erick
>
> On Thu, Apr 28, 2011 at 9:14 AM, Tanuj Jain <tanujjain.mail@gmail.com>
> wrote:
> > Hi,
> > Can anyone please tell where I could download *packages
> > org.apache.lucene.analysis.* *so that I could use them in lucene 3.1
> > version.
> > I have *deprecated version* for the above mentioned package. Please tell
> > from where I could get the contrib packages *source code* for lucene 3.1.
> > Is there any official website for that? If any please tell.
> >
> > :)
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174c4174ff776904a200c66d--

From java-user-return-49518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 21:17:55 2011
Return-Path: <java-user-return-49518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 03A743F20
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 21:17:54 +0000 (UTC)
Received: (qmail 66851 invoked by uid 500); 28 Apr 2011 21:17:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66798 invoked by uid 500); 28 Apr 2011 21:17:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66790 invoked by uid 99); 28 Apr 2011 21:17:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 21:17:52 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.94.238.136] (HELO web130109.mail.mud.yahoo.com) (66.94.238.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Apr 2011 21:17:45 +0000
Received: (qmail 33627 invoked by uid 60001); 28 Apr 2011 21:17:23 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304025443; bh=MfAyURqGhFlrOL03ywa4Z6v2XUoA08GQuhx0kLkVFnA=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=NpbdLK44vPGvuWMsI2fpqP7yNuIfY4n0ZN+fR8Do2biEtEPBa25xDTip6Gzn0HYUxD8yH0kEV8hqz4ywIxVArg+ZVZCET/QvGJm4NY+B3zCtCXIgsfxxpL2ochp4gro/6eYsh2o8D/1PMZYjj+2qRitf6pAXuExuXiUUXdhZwc0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=hpeXc3/wwYSsJ3W1pNDl0xHm8NDvVvWeqrBWMcKnDa42JHv/Mzz5z5bqhAvgNLJbXnQyCbMpnT1sM8clyfdX6ifPjNfkqvK45cZJhPtK36Xjo1dlNqvQ4xIlrcflkjWXN1KbBlB2uR4BU7BRS4OnaudMZ0h2/2NbIgxhHwrfjLU=;
Message-ID: <439878.18653.qm@web130109.mail.mud.yahoo.com>
X-YMail-OSG: BI.iFlsVM1nBOHnsSuIHh7Qlu9QnWVXGyZpWPDRH.JA9OP4
 IH5ATu91yK56NClAj76UYNKuiMVmgbEshbt44Jk8g1pmN17nv89PdMtPuDQG
 F6DRo_rCGzNg5JvFfJmiFlTFM.gm_ZD.BpYakDm4qWHJXz.GmZOK4Fagz32B
 iGGxG0VLgJkvAkez82CNn1zVgdNpTjyvek_5Xvv_gK27OADclSKT5X_G7qVB
 d5dv8q7x13pWQMHFcCPvebau84yrKr4TI8x93GWANiS6hxqxb9dEzUz5k7FF
 a0LxkLpDVqMAgJR7Y7yAzDUGE6TiV3kMe7fOTVKV_e7J39CyplA8HUpxO.ZK
 TTyWctcYHPw.gZvWYUCpQCuiFUdzwTpfu86tF32C6P77WStodubNFuAO.EHA
 fuecOQ5MoQ1W5
Received: from [184.75.0.187] by web130109.mail.mud.yahoo.com via HTTP; Thu, 28 Apr 2011 14:17:23 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
Date: Thu, 28 Apr 2011 14:17:23 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: SorterTemplate.quickSort causes StackOverflowError
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm looking at some code that uses MemoryIndex (Lucene 3.1) and that's 
exhibiting a strange behaviour - it slows down over time.
The MemoryIndex contains 1 doc, of course, and executes a set of a few thousand 
queries against it.  The set of queries does not change - the same set of 
queries gets executed on all incoming documents.
This code runs very quickly..... in the beginning.   But with time is gets 
slower and slower.... and slower..... and then I get this:

4/28/11 10:32:52 PM (S) SolrException.log : java.lang.StackOverflowError
    at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
    at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
    at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)

I haven't profiled this code yet (remote server, firewall in between, can't use 
YourKit...), but does the above look familiar to anyone?
I've looked at the code and obviously there is the recursive call that's 
problematic here - it looks like the recursion just gets deeper and deeper and 
"gets stuck", eventually getting too deep for the JVM's taste.

Thanks,
Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 21:30:05 2011
Return-Path: <java-user-return-49519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 00F963CA2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 21:30:05 +0000 (UTC)
Received: (qmail 85025 invoked by uid 500); 28 Apr 2011 21:30:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84978 invoked by uid 500); 28 Apr 2011 21:30:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84965 invoked by uid 99); 28 Apr 2011 21:30:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 21:30:02 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmuguruza@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 21:29:56 +0000
Received: by bwz8 with SMTP id 8so4518131bwz.35
        for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 14:29:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=D3nGqdhTmVHNTBiOmhL201SzGwNJ2YNcHuEKEPvplEk=;
        b=N/KUN90LIjc84kIWtQXih1sQY3/4VLM1JeLBVjpq5jbDqlpTqmY+5GsX2CMEZO/kYJ
         ajI+CA0uiDvQUTr+4d/VVYLpXSwlcQaIPQrArVHI6ed4Pc6bKUkRFIj+QMqz+2TpnMpk
         v4VJ7LEca3vAnW0y1zRycjijYXLBgUJ9ZTCzI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=HrwhoR0Y5qI3jrjYIe82usytz/iqj4jyPb4K9noZqx8mSQaZKEupJOBgHYYNyaWZMw
         iuQ96x/fGQvLXEfM0FM0luEPY4xbxbOYlo2xSpubyug1Q7hUgYFNGxCwp6go6i99Dqni
         7QJtq1goeWTIzlJrKb79wNmNaYuSjAoIA9B44=
Received: by 10.204.19.18 with SMTP id y18mr1161644bka.179.1304026176202; Thu,
 28 Apr 2011 14:29:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.70.197 with HTTP; Thu, 28 Apr 2011 14:29:06 -0700 (PDT)
In-Reply-To: <439878.18653.qm@web130109.mail.mud.yahoo.com>
References: <439878.18653.qm@web130109.mail.mud.yahoo.com>
From: jm <jmuguruza@gmail.com>
Date: Thu, 28 Apr 2011 23:29:06 +0200
Message-ID: <BANLkTi=A4cu3rMKXaxC678sbHdLYaFHDLA@mail.gmail.com>
Subject: Re: SorterTemplate.quickSort causes StackOverflowError
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555aefe02a7e604a2014160
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555aefe02a7e604a2014160
Content-Type: text/plain; charset=ISO-8859-1

Hi Otis,

I have exactly the same scenario, also on 3.1, the only difference is I have
less queries, like 20 or 30.

Yesterday this code processed over 1 million incoming docs (in
a synthetic test), and did not get any error...

Not very helpful maybe but just so you get some other feedback.

javier
On Thu, Apr 28, 2011 at 11:17 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi,
>
> I'm looking at some code that uses MemoryIndex (Lucene 3.1) and that's
> exhibiting a strange behaviour - it slows down over time.
> The MemoryIndex contains 1 doc, of course, and executes a set of a few
> thousand
> queries against it.  The set of queries does not change - the same set of
> queries gets executed on all incoming documents.
> This code runs very quickly..... in the beginning.   But with time is gets
> slower and slower.... and slower..... and then I get this:
>
> 4/28/11 10:32:52 PM (S) SolrException.log : java.lang.StackOverflowError
>    at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
>    at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
>    at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
>
> I haven't profiled this code yet (remote server, firewall in between, can't
> use
> YourKit...), but does the above look familiar to anyone?
> I've looked at the code and obviously there is the recursive call that's
> problematic here - it looks like the recursion just gets deeper and deeper
> and
> "gets stuck", eventually getting too deep for the JVM's taste.
>
> Thanks,
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00032555aefe02a7e604a2014160--

From java-user-return-49520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 21:36:43 2011
Return-Path: <java-user-return-49520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9383734C2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 21:36:43 +0000 (UTC)
Received: (qmail 96950 invoked by uid 500); 28 Apr 2011 21:36:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96904 invoked by uid 500); 28 Apr 2011 21:36:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96896 invoked by uid 99); 28 Apr 2011 21:36:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 21:36:41 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 21:36:34 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 72C3445F820
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 23:36:14 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id w8nvgq5QidEI for <java-user@lucene.apache.org>;
	Thu, 28 Apr 2011 23:36:08 +0200 (CEST)
Received: from VEGA (port-92-196-119-3.dynamic.qsc.de [92.196.119.3])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 96C1B45F5FD
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 23:36:08 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <439878.18653.qm@web130109.mail.mud.yahoo.com>
In-Reply-To: <439878.18653.qm@web130109.mail.mud.yahoo.com>
Subject: RE: SorterTemplate.quickSort causes StackOverflowError
Date: Thu, 28 Apr 2011 23:36:13 +0200
Message-ID: <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHj9lHgQ9gDlUYanBfW8YTZWxaCKpRD6ldg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis,

Can you reproduce this somehow and send test code? I could look into it. I
don't expect the error in the quicksort algorithm itself as this one is used
e.g. BytesRefHash / TermsHash, if there is a bug we would have seen it long
time ago.

I have not seen this before, but I suspect a problem in this very strange
comparator in MemoryIndex (which is very broken, if you look at its code -
it can compare Strings with Map.Entry and so on, brrrr), maybe the
comparator is not stable? In this case, quicksort can easily loop endless
and stack overflow. In Lucene 3.0 this used stock java sort (which is
mergesort), maybe replace the ArrayUtils.quickSort my ArrayUtils.mergeSort()
and see if problem is still there?

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Thursday, April 28, 2011 11:17 PM
> To: java-user@lucene.apache.org
> Subject: SorterTemplate.quickSort causes StackOverflowError
> 
> Hi,
> 
> I'm looking at some code that uses MemoryIndex (Lucene 3.1) and that's
> exhibiting a strange behaviour - it slows down over time.
> The MemoryIndex contains 1 doc, of course, and executes a set of a few
> thousand queries against it.  The set of queries does not change - the
same
> set of queries gets executed on all incoming documents.
> This code runs very quickly..... in the beginning.   But with time is gets
> slower and slower.... and slower..... and then I get this:
> 
> 4/28/11 10:32:52 PM (S) SolrException.log : java.lang.StackOverflowError
>     at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
>     at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
>     at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> 
> I haven't profiled this code yet (remote server, firewall in between,
can't use
> YourKit...), but does the above look familiar to anyone?
> I've looked at the code and obviously there is the recursive call that's
> problematic here - it looks like the recursion just gets deeper and deeper
and
> "gets stuck", eventually getting too deep for the JVM's taste.
> 
> Thanks,
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene ecosystem
> search :: http://search-lucene.com/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 21:48:59 2011
Return-Path: <java-user-return-49521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3ABEF3D78
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 21:48:59 +0000 (UTC)
Received: (qmail 16286 invoked by uid 500); 28 Apr 2011 21:48:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16244 invoked by uid 500); 28 Apr 2011 21:48:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16236 invoked by uid 99); 28 Apr 2011 21:48:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 21:48:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.94.238.133] (HELO web130106.mail.mud.yahoo.com) (66.94.238.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Apr 2011 21:48:50 +0000
Received: (qmail 26531 invoked by uid 60001); 28 Apr 2011 21:48:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304027307; bh=BKhU2h8JGSqRP3QHa/jxUOh5aVJBg6+EWoraXD//UaY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=MgjmA3DVl9Xw1bPmh0YacnaW9EiuegQ8YYFLW/GKIr/2omwKPuhTtSWI/fFxFCpSYvaPTF1icPC/cGgEuMlZt0/l97Fj6esSGZeOlBzzOVXfaqH7q5nwqU/HdY7VWilEiCI7gP0XfoBLqp9DqBfsuQ1l7nmK4Ehbu9m+P4nGEs4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=CElDhGba3cBjWWVkdES88vs32TQuv5So1bXz3/MfYcsLDdvJplcKCQWLw1qvQB1jAhiuPrudvxsMl35B71jIoz3j6U511c+D339x35gB9qFPYQCr5vH1mW0pWlnLl3YRh7XjDB0NDCk0UHj2cAhkhHUzRcM9idab4Hdp6ZHUzNw=;
Message-ID: <968451.10722.qm@web130106.mail.mud.yahoo.com>
X-YMail-OSG: zFSCGTEVM1k.pLvSh5U8AJ8zX.MFvLNUsPENIm5nwG931Ap
 P2Miei6SUmhiYeiLr9sKBXb2viiKOSYtk94iWZoTbCcdUW9UWpVMEjtsfSGY
 2w6HouyInalCzEhYEHWb40u7jlYAByaWsSHn0yioM.76mUiYXR96FtzFmNmU
 q6JtN51oIN18uPCgccM0Dbiux8MSi_8Urn7KoDBLHkUwbHwi1w6sjNHgvQXu
 tgg3m0GiT0qRSYILIHROgNfIx3oO0cm0M.9gTdg35jydENrNXUPYXo3htF7L
 bTkzI2m1Fn5x6bf.edWK_662_CMyfJ2R42D1rce1ZduzIDAlcV8V9MV6Ny76
 Rt0syhycg.M_V8OncUzzCnq_I8.5bQwx90TIrwWX9Qvk4W67stkCbGWm9lA2
 GESI8J.BK4h_6NA--
Received: from [184.75.0.187] by web130106.mail.mud.yahoo.com via HTTP; Thu, 28 Apr 2011 14:48:27 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
References: <439878.18653.qm@web130109.mail.mud.yahoo.com> <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de>
Date: Thu, 28 Apr 2011 14:48:27 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: SorterTemplate.quickSort causes StackOverflowError
To: java-user@lucene.apache.org
In-Reply-To: <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for confirming, Javier! :)

Uwe, I assume you are referring to this line 528 in MemoryIndex?

    528     if (size > 1) ArrayUtil.quickSort(entries, termComparator);

And this funky Comparator from MemoryIndex:

    208   private static final Comparator<Object> termComparator = new 
Comparator<Object>() {
    209     @SuppressWarnings("unchecked")
    210     public int compare(Object o1, Object o2) {
    211       if (o1 instanceof Map.Entry<?,?>) o1 = ((Map.Entry<?,?>) 
o1).getKey();
    212       if (o2 instanceof Map.Entry<?,?>) o2 = ((Map.Entry<?,?>) 
o2).getKey();
    213       if (o1 == o2) return 0;
    214       return ((Comparable) o1).compareTo((Comparable) o2);
    215     }
    216   };

Will try, thanks!

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Uwe Schindler <uwe@thetaphi.de>
> To: java-user@lucene.apache.org
> Sent: Thu, April 28, 2011 5:36:13 PM
> Subject: RE: SorterTemplate.quickSort causes StackOverflowError
> 
> Hi Otis,
> 
> Can you reproduce this somehow and send test code? I could look  into it. I
> don't expect the error in the quicksort algorithm itself as this  one is used
> e.g. BytesRefHash / TermsHash, if there is a bug we would have  seen it long
> time ago.
> 
> I have not seen this before, but I suspect a  problem in this very strange
> comparator in MemoryIndex (which is very broken,  if you look at its code -
> it can compare Strings with Map.Entry and so on,  brrrr), maybe the
> comparator is not stable? In this case, quicksort can  easily loop endless
> and stack overflow. In Lucene 3.0 this used stock java  sort (which is
> mergesort), maybe replace the ArrayUtils.quickSort my  ArrayUtils.mergeSort()
> and see if problem is still  there?
> 
> Uwe
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213  Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
> > -----Original  Message-----
> > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> >  Sent: Thursday, April 28, 2011 11:17 PM
> > To: java-user@lucene.apache.org
> >  Subject: SorterTemplate.quickSort causes StackOverflowError
> > 
> >  Hi,
> > 
> > I'm looking at some code that uses MemoryIndex (Lucene 3.1)  and that's
> > exhibiting a strange behaviour - it slows down over  time.
> > The MemoryIndex contains 1 doc, of course, and executes a set of a  few
> > thousand queries against it.  The set of queries does not  change - the
> same
> > set of queries gets executed on all incoming  documents.
> > This code runs very quickly..... in the beginning.   But  with time is gets
> > slower and slower.... and slower..... and then I get  this:
> > 
> > 4/28/11 10:32:52 PM (S) SolrException.log :  java.lang.StackOverflowError
> >     at
> >  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >      at
> >  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >      at
> >  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > 
> > I haven't profiled this code yet (remote server, firewall in  between,
> can't use
> > YourKit...), but does the above look familiar to  anyone?
> > I've looked at the code and obviously there is the recursive  call that's
> > problematic here - it looks like the recursion just gets  deeper and deeper
> and
> > "gets stuck", eventually getting too deep for  the JVM's taste.
> > 
> > Thanks,
> > Otis
> > ----
> >  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene ecosystem
> >  search :: http://search-lucene.com/
> > 
> > 
> >  ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Apr 28 21:55:14 2011
Return-Path: <java-user-return-49522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E500A30DE
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 28 Apr 2011 21:55:13 +0000 (UTC)
Received: (qmail 27373 invoked by uid 500); 28 Apr 2011 21:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27199 invoked by uid 500); 28 Apr 2011 21:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27191 invoked by uid 99); 28 Apr 2011 21:55:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 21:55:11 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Apr 2011 21:55:04 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C154F45F838
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 23:54:44 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Bllqez0FkZ3l for <java-user@lucene.apache.org>;
	Thu, 28 Apr 2011 23:54:39 +0200 (CEST)
Received: from VEGA (port-92-196-119-3.dynamic.qsc.de [92.196.119.3])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 028C045F820
	for <java-user@lucene.apache.org>; Thu, 28 Apr 2011 23:54:38 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <439878.18653.qm@web130109.mail.mud.yahoo.com> <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de> <968451.10722.qm@web130106.mail.mud.yahoo.com>
In-Reply-To: <968451.10722.qm@web130106.mail.mud.yahoo.com>
Subject: RE: SorterTemplate.quickSort causes StackOverflowError
Date: Thu, 28 Apr 2011 23:54:44 +0200
Message-ID: <00de01cc05ee$e2a41060$a7ec3120$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHj9lHgQ9gDlUYanBfW8YTZWxaCKgKo44HMAfYDCEmUHvjfMA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

> Thanks for confirming, Javier! :)
> 
> Uwe, I assume you are referring to this line 528 in MemoryIndex?
> 
>     528     if (size > 1) ArrayUtil.quickSort(entries, termComparator);
> 
> And this funky Comparator from MemoryIndex:
> 
>     208   private static final Comparator<Object> termComparator = new
> Comparator<Object>() {
>     209     @SuppressWarnings("unchecked")
>     210     public int compare(Object o1, Object o2) {
>     211       if (o1 instanceof Map.Entry<?,?>) o1 = ((Map.Entry<?,?>)
> o1).getKey();
>     212       if (o2 instanceof Map.Entry<?,?>) o2 = ((Map.Entry<?,?>)
> o2).getKey();
>     213       if (o1 == o2) return 0;
>     214       return ((Comparable) o1).compareTo((Comparable) o2);
>     215     }
>     216   };
> 
> Will try, thanks!

Yeah, simply try with mergeSort in line 528. If that helps, this comparator
is buggy.

Uwe


> ----- Original Message ----
> > From: Uwe Schindler <uwe@thetaphi.de>
> > To: java-user@lucene.apache.org
> > Sent: Thu, April 28, 2011 5:36:13 PM
> > Subject: RE: SorterTemplate.quickSort causes StackOverflowError
> >
> > Hi Otis,
> >
> > Can you reproduce this somehow and send test code? I could look  into
> > it. I don't expect the error in the quicksort algorithm itself as this
> > one is used e.g. BytesRefHash / TermsHash, if there is a bug we would
> > have  seen it long time ago.
> >
> > I have not seen this before, but I suspect a  problem in this very
> > strange comparator in MemoryIndex (which is very broken,  if you look
> > at its code - it can compare Strings with Map.Entry and so on,
> > brrrr), maybe the comparator is not stable? In this case, quicksort
> > can  easily loop endless and stack overflow. In Lucene 3.0 this used
> > stock java  sort (which is mergesort), maybe replace the
> > ArrayUtils.quickSort my  ArrayUtils.mergeSort() and see if problem is
still
> there?
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213  Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> > > -----Original  Message-----
> > > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  Sent: Thursday, April 28, 2011 11:17 PM
> > > To: java-user@lucene.apache.org
> > >  Subject: SorterTemplate.quickSort causes StackOverflowError
> > >
> > >  Hi,
> > >
> > > I'm looking at some code that uses MemoryIndex (Lucene 3.1)  and
> > > that's exhibiting a strange behaviour - it slows down over  time.
> > > The MemoryIndex contains 1 doc, of course, and executes a set of a
> > > few thousand queries against it.  The set of queries does not
> > > change - the
> > same
> > > set of queries gets executed on all incoming  documents.
> > > This code runs very quickly..... in the beginning.   But  with time is
gets
> > > slower and slower.... and slower..... and then I get  this:
> > >
> > > 4/28/11 10:32:52 PM (S) SolrException.log :
java.lang.StackOverflowError
> > >     at
> > >
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >      at
> > >
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >      at
> > >
> > > org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:
> > > 104)
> > >
> > > I haven't profiled this code yet (remote server, firewall in
> > > between,
> > can't use
> > > YourKit...), but does the above look familiar to  anyone?
> > > I've looked at the code and obviously there is the recursive  call
> > > that's problematic here - it looks like the recursion just gets
> > > deeper and deeper
> > and
> > > "gets stuck", eventually getting too deep for  the JVM's taste.
> > >
> > > Thanks,
> > > Otis
> > > ----
> > >  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene
> > > ecosystem  search :: http://search-lucene.com/
> > >
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 07:31:18 2011
Return-Path: <java-user-return-49523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 19A7D2BA4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 07:31:18 +0000 (UTC)
Received: (qmail 46683 invoked by uid 500); 29 Apr 2011 07:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46093 invoked by uid 500); 29 Apr 2011 07:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 45691 invoked by uid 99); 29 Apr 2011 07:29:35 -0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of svonec@gmail.com designates 209.85.210.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=+aUOQlPFpoMuKw72PaPf0jiVJgXqXh3zsg5gemOCJa8=;
        b=woTtRUGtuXK+kejU8XhzvgTkbaBUhnFGfZb5+s5nNiIox0lodGZhxcoumxW2HjBUMp
         67GJtQQfwFHLhEOaoEYDIAIuvtoRVKOzTyeY0blAvds0cAiEQdEqyqNqA8TGjRRtyPLw
         ZUrkgypi9FVyUFkd96NQl7JSzjCPgRokY7N0M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Czz8U7AoLoVjPg+f19966appmChO6ibNm5uDgYWf13HbNVAs2+2b0VUediG/hWpmng
         L0/loGf+O56cU1eqJcDK9Td+M7FoCMcR9YgfdLvHm8q1guAJ4zbCjsDd+RQtwhcvxR9w
         2Au14tfGRs+oRWUif8f466eIHWSGx1ZiG3QRg=
MIME-Version: 1.0
Date: Fri, 29 Apr 2011 09:29:06 +0200
Message-ID: <BANLkTim+EorGsQ1WxGzJHGaH7mjBM_Aa7A@mail.gmail.com>
Subject: document with parent-child relationship
From: svonec@gmail.com
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I need an advice on how to create an document that has parent-child
relationship. Here is an example:

"low pressure" -> "engine"
                      -> "wheel"
                      -> ....

"low pressure" string is the parent and "engine" and "wheel" are
children. I'd like to be able to search strings such as "low pressure
in engine" or just "low" or "engine" and the result should be an ID of
the parent. How do I create fields in the lucene document to express
this relationship?

Any advice appreciated.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 09:12:23 2011
Return-Path: <java-user-return-49524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 28E9E29D7
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 09:12:23 +0000 (UTC)
Received: (qmail 34383 invoked by uid 500); 29 Apr 2011 09:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34351 invoked by uid 500); 29 Apr 2011 09:12:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34343 invoked by uid 99); 29 Apr 2011 09:12:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 09:12:20 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of harshcode@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 09:12:12 +0000
Received: by iwr19 with SMTP id 19so4609597iwr.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 02:11:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=wJ+5RY4MPzLZ0PIRYLilMBVSEUXGfC2WRrg5o6QfRts=;
        b=bm/Lt4GAkAFY0XrmV4fqicR+mgsfoK2kYz09wKKoWVb1uYAKRgSA3spPwPy9clGkd9
         7JBnGvqE2LEcWDRR+MbQKFHKlFsC4rMVnoxnxn3uSmpzo6aS3w3oG/TPXFDDuIAuP+20
         Iaxky0cFhmDJerXUEGR++wcCcDM4ZXli59Gm4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iPaN9NcAS7NYq2UPh6pWjRZKHiWdzuwl5DpGu20Tv8Uaz1xGJhl2rmKi1WB+fbth5y
         JaQ5+vVqj5V0CceCB7fXE/d/plE0FZU/Z95HTTFuzdduPtdN3GNqJ+Lj2zAjG2HXlMIK
         LT+oK7d8EXC7m43CERPSDiYe9hh3vQl35vxKQ=
MIME-Version: 1.0
Received: by 10.42.155.136 with SMTP id u8mr5610317icw.403.1304068311872; Fri,
 29 Apr 2011 02:11:51 -0700 (PDT)
Received: by 10.42.230.66 with HTTP; Fri, 29 Apr 2011 02:11:51 -0700 (PDT)
In-Reply-To: <BANLkTim+EorGsQ1WxGzJHGaH7mjBM_Aa7A@mail.gmail.com>
References: <BANLkTim+EorGsQ1WxGzJHGaH7mjBM_Aa7A@mail.gmail.com>
Date: Fri, 29 Apr 2011 14:41:51 +0530
Message-ID: <BANLkTikm6dY6pR3Hg4w-=TfbmRdBr73OLQ@mail.gmail.com>
Subject: Re: document with parent-child relationship
From: harsh srivastava <harshcode@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e817a7df34a04a20b1021
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba6e817a7df34a04a20b1021
Content-Type: text/plain; charset=ISO-8859-1

Hi,

You can create three fields for a document to index e.g.

Fields =>                     parent_id   parent_text        child_text
Contents =>                1              low pressure       engine wheel,
etc
                                  2              Electronics         laptop
pc ...


Hope it helps.

Harsh


On Fri, Apr 29, 2011 at 12:59 PM, <svonec@gmail.com> wrote:

> Hello,
>
> I need an advice on how to create an document that has parent-child
> relationship. Here is an example:
>
> "low pressure" -> "engine"
>                      -> "wheel"
>                      -> ....
>
> "low pressure" string is the parent and "engine" and "wheel" are
> children. I'd like to be able to search strings such as "low pressure
> in engine" or just "low" or "engine" and the result should be an ID of
> the parent. How do I create fields in the lucene document to express
> this relationship?
>
> Any advice appreciated.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--90e6ba6e817a7df34a04a20b1021--

From java-user-return-49525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 11:09:39 2011
Return-Path: <java-user-return-49525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0BC532515
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 11:09:39 +0000 (UTC)
Received: (qmail 44769 invoked by uid 500); 29 Apr 2011 11:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44729 invoked by uid 500); 29 Apr 2011 11:09:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44720 invoked by uid 99); 29 Apr 2011 11:09:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:09:36 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.29 as permitted sender)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:09:28 +0000
Received: from compute2.internal (compute2.nyi.mail.srv.osa [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 15FFC20A56
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 07:09:08 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Fri, 29 Apr 2011 07:09:08 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=00IEc/F0X7WsXmwg6p8nSJdbW9Y=; b=kg1UUX5co9tR3N63LeO/hSNaN/lkw0jq4Y82XMySDmDWcACHNklykLyA6Ecs8cOdOmcxCFs1HoKs4L3/XZ9pbLeaxAmBZYn/jmhBg+qGQQJnoXYHP2CZ/X9ZmRrvM6vKgmK1P6kPFWu9YlyiD844SNJY4VrXKdFPy2cPljTKink=
X-Sasl-enc: S9DS8IQICe/tO56FwKJSroF3sgDqRkoHsE2M6fUNak3x 1304075347
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id A51B840A807
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 07:09:07 -0400 (EDT)
Message-ID: <4DBA9C51.6030609@fastmail.fm>
Date: Fri, 29 Apr 2011 12:09:05 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 3.0.3 with debug information
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a built debug version of lucene 3.0.3 so I can profile it 
properly to find what part of the search is taking the time.

Note:Ive already profiled by application and determined that it is the 
lucene/Search that is taking the time, I also had another attempt using 
luke but find it incredibly buggy and of little use.

thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 11:20:48 2011
Return-Path: <java-user-return-49526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E57DB2B8A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 11:20:47 +0000 (UTC)
Received: (qmail 53176 invoked by uid 500); 29 Apr 2011 11:20:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53132 invoked by uid 500); 29 Apr 2011 11:20:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53124 invoked by uid 99); 29 Apr 2011 11:20:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:20:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of patrick.diviacco@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:20:39 +0000
Received: by fxm7 with SMTP id 7so4232340fxm.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 04:20:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=bmSXH8/JntaGEVTPo/YoxvzLaZ4x+uqPHp6DGe4uwpY=;
        b=ZJQ/hZqISCbku4q7uULOmGONsdOPvWMiz/HO6tF5ZyjJC5bx0i1QuxSALaEgKRpYy+
         3DE8Zcj7rN7dFiLwhNmlITk+CGomvqs/PHHJOhZhpgI3f4oqAuilwy4sM6SWDd+WkSlg
         Az7dJQ8Lw1OqZ1vhqqbiigiWnI8UwgjcA26vo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=O3ZFpJS5KfpxcpbtVgcSsyzmOQAXPMmaaZxOvR6o3bp/ZZlkfZ1TCENNP8as2wGhzm
         vMMP1gs3LG4cpumxFH5sbElS8+7BVk/7vdZhuQuQAiDY/e4aEx/vxlNr5QV5YFAUrgTK
         BvSHfqSGNidA600QL3I3IU2e0YxjARktluzmE=
MIME-Version: 1.0
Received: by 10.223.106.78 with SMTP id w14mr3283043fao.35.1304076017924; Fri,
 29 Apr 2011 04:20:17 -0700 (PDT)
Received: by 10.223.122.141 with HTTP; Fri, 29 Apr 2011 04:20:17 -0700 (PDT)
In-Reply-To: <BANLkTimfKUhnjtrH440c5xQTR_5V1GccsQ@mail.gmail.com>
References: <BANLkTimfKUhnjtrH440c5xQTR_5V1GccsQ@mail.gmail.com>
Date: Fri, 29 Apr 2011 13:20:17 +0200
Message-ID: <BANLkTinjwd2-Dc54-vLzPpOrAj_fcjTAjg@mail.gmail.com>
Subject: Re: Are Okapi BM25 scores normalized into 0 and 1 ?
From: Patrick Diviacco <patrick.diviacco@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e2ffbcefc5804a20cdbe2
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368e2ffbcefc5804a20cdbe2
Content-Type: text/plain; charset=ISO-8859-1

Can anybody provide me some information about it ? Even a small clue, I'm
kinda stuck on this and the owner of the libraries do not answer emails.

Thanks


On 28 April 2011 13:49, Patrick Diviacco <patrick.diviacco@gmail.com> wrote:

> Is Okapi BM25 (its implementation in Lucene:
> nlp.uned.es/~jperezi/Lucene-BM25) returning back normalized query scores
> (in between 0 and 1) ?
>
> According to Okapi formula the final score should be normalized. Could you
> give some information about that ?
>
> thanks
>
>
>

--0016368e2ffbcefc5804a20cdbe2--

From java-user-return-49527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 11:41:19 2011
Return-Path: <java-user-return-49527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C511E624
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 11:41:19 +0000 (UTC)
Received: (qmail 70178 invoked by uid 500); 29 Apr 2011 11:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70134 invoked by uid 500); 29 Apr 2011 11:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70126 invoked by uid 99); 29 Apr 2011 11:41:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:41:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.94.238.133] (HELO web130106.mail.mud.yahoo.com) (66.94.238.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 29 Apr 2011 11:41:12 +0000
Received: (qmail 42589 invoked by uid 60001); 29 Apr 2011 11:40:51 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304077251; bh=Fp0oUtWFz6qzGtMMQdpDop1Sl6AYJY9+D7hE7YYANpY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=QZEJHBb+agfEyPtWS455XgQCPe6F2GIsURgcGaxEx0brKWRXo2fzGRKYg8DQawXSWJhKNpo9tNQBCZdRMoDD2c5Y7yH5iH/F1Q6lD6BfrOfHyY8aBZytF3H4DQUIAR/JmWi/LXua03PXK87dM1UuLrO/yGz/IjtqjvnjNhrm9kM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=y5oRmmmoH91hv+5/KrX3eoLsSDvRyDe5rxEiqhzNhfAw7Csh77IMEHDMn6d1jM67oUvOdpNp2TlnrEmPx8KDLa99GhsF+9wXK+OPpToHdXu0iJhqjN+MAWb0IdfIzCyr8womyZtBfoWMDOosgiV4Ny81AGT6E/RH7f5v8ojPiMw=;
Message-ID: <729840.58746.qm@web130106.mail.mud.yahoo.com>
X-YMail-OSG: 0b4uq0kVM1kt.QbcWPRQTpvD8eOvG.ri_1zEECHBbSzZC87
 9285_P2nt.nLgCxNWBOsSpHFyDQcOohBBpBvnHsQRuV0yyMGO3pi25mYjaHy
 5TJSmbZLebOeXi9_B9dvq6OQAsUlQUHUn1aURNMApqcELDzxnnSt7hdjNL4N
 MOuSfKXB1.XNEXIrqlh9xDxvwRfz1Up5XNPfsO4ydjQhy5rQ_0qaO4NGcKBT
 tftakIabJVP6vX10NvFJnEsFmEEk7_JmVwZC8Hcs_kX1BAeX_kndK3bb8RVO
 Jx2wDcXLFGhNN2joR3ZrY8MehC5p1HY4HumFvT2cnSe4YepFD9SSLMRdQ.ps
 oV8F.lelySg3fjHVHD1mLc8FbGTu4mjKYi_WF66Py2yKS0p9REmyX7Lj7dyp
 7Xppy2YX.5psQ
Received: from [74.73.25.254] by web130106.mail.mud.yahoo.com via HTTP; Fri, 29 Apr 2011 04:40:51 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
References: <439878.18653.qm@web130109.mail.mud.yahoo.com> <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de> <968451.10722.qm@web130106.mail.mud.yahoo.com> <00de01cc05ee$e2a41060$a7ec3120$@thetaphi.de>
Date: Fri, 29 Apr 2011 04:40:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: SorterTemplate.quickSort causes StackOverflowError
To: java-user@lucene.apache.org
In-Reply-To: <00de01cc05ee$e2a41060$a7ec3120$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hi,

OK, so it looks like it's not MemoryIndex and its Comparator that are funky.  
After switching from quickSort call in MemoryIndex to mergeSort, the problem 
persists:

'1205215856@qtp-684754483-7' Id=18, RUNNABLE on lock=, total cpu 
time=497060.0000ms user time=495210.0000msat 
org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:105) 

at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104) 
at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104) 
at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
So something else is calling quickSort when it gets stuck.  Weirdly, when I get 
a thread dump and get the above, I don't see the original caller.  Maybe because 
the stack is already too deep and the printout is limited to N lines per call 
stack?

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Uwe Schindler <uwe@thetaphi.de>
> To: java-user@lucene.apache.org
> Sent: Thu, April 28, 2011 5:54:44 PM
> Subject: RE: SorterTemplate.quickSort causes StackOverflowError
> 
> > Thanks for confirming, Javier! :)
> > 
> > Uwe, I assume you are  referring to this line 528 in MemoryIndex?
> > 
> >      528     if (size > 1) ArrayUtil.quickSort(entries,  termComparator);
> > 
> > And this funky Comparator from  MemoryIndex:
> > 
> >     208   private static final  Comparator<Object> termComparator = new
> > Comparator<Object>()  {
> >     209      @SuppressWarnings("unchecked")
> >     210     public  int compare(Object o1, Object o2) {
> >     211        if (o1 instanceof Map.Entry<?,?>) o1 =  ((Map.Entry<?,?>)
> > o1).getKey();
> >     212        if (o2 instanceof Map.Entry<?,?>) o2 =  ((Map.Entry<?,?>)
> > o2).getKey();
> >     213        if (o1 == o2) return 0;
> >     214        return ((Comparable) o1).compareTo((Comparable) o2);
> >      215     }
> >     216   };
> > 
> >  Will try, thanks!
> 
> Yeah, simply try with mergeSort in line 528. If that  helps, this comparator
> is buggy.
> 
> Uwe
> 
> 
> > ----- Original  Message ----
> > > From: Uwe Schindler <uwe@thetaphi.de>
> > > To: java-user@lucene.apache.org
> >  > Sent: Thu, April 28, 2011 5:36:13 PM
> > > Subject: RE:  SorterTemplate.quickSort causes StackOverflowError
> > >
> > > Hi  Otis,
> > >
> > > Can you reproduce this somehow and send test  code? I could look  into
> > > it. I don't expect the error in the  quicksort algorithm itself as this
> > > one is used e.g. BytesRefHash /  TermsHash, if there is a bug we would
> > > have  seen it long time  ago.
> > >
> > > I have not seen this before, but I suspect  a  problem in this very
> > > strange comparator in MemoryIndex  (which is very broken,  if you look
> > > at its code - it can  compare Strings with Map.Entry and so on,
> > > brrrr), maybe the  comparator is not stable? In this case, quicksort
> > > can  easily  loop endless and stack overflow. In Lucene 3.0 this used
> > > stock  java  sort (which is mergesort), maybe replace the
> > >  ArrayUtils.quickSort my  ArrayUtils.mergeSort() and see if problem  is
> still
> > there?
> > >
> > > Uwe
> > >
> >  > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63,  D-28213  Bremen
> > > http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> >  >
> > > > -----Original  Message-----
> > > > From:  Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> >  > >  Sent: Thursday, April 28, 2011 11:17 PM
> > > > To: java-user@lucene.apache.org
> >  > >  Subject: SorterTemplate.quickSort causes  StackOverflowError
> > > >
> > > >  Hi,
> > >  >
> > > > I'm looking at some code that uses MemoryIndex (Lucene  3.1)  and
> > > > that's exhibiting a strange behaviour - it  slows down over  time.
> > > > The MemoryIndex contains 1 doc, of  course, and executes a set of a
> > > > few thousand queries against  it.  The set of queries does not
> > > > change - the
> >  > same
> > > > set of queries gets executed on all incoming   documents.
> > > > This code runs very quickly..... in the  beginning.   But  with time is
> gets
> > > > slower and  slower.... and slower..... and then I get  this:
> > > >
> >  > > 4/28/11 10:32:52 PM (S) SolrException.log  :
> java.lang.StackOverflowError
> > > >     at
> >  > >
> >  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >  > >      at
> > > >
> >  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >  > >      at
> > > >
> > > >  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:
> >  > > 104)
> > > >
> > > > I haven't profiled this code  yet (remote server, firewall in
> > > > between,
> > > can't  use
> > > > YourKit...), but does the above look familiar to   anyone?
> > > > I've looked at the code and obviously there is the  recursive  call
> > > > that's problematic here - it looks like  the recursion just gets
> > > > deeper and deeper
> > >  and
> > > > "gets stuck", eventually getting too deep for  the  JVM's taste.
> > > >
> > > > Thanks,
> > > >  Otis
> > > > ----
> > > >  Sematext :: http://sematext.com/ :: Solr -  Lucene - Nutch Lucene
> > > > ecosystem  search :: http://search-lucene.com/
> > > >
> > > >
> > >  >
> > > >  --------------------------------------------------------------------
> >  > > - To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> > >
> > >
> > >  ---------------------------------------------------------------------
> >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> > >
> > 
> >  ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 11:48:26 2011
Return-Path: <java-user-return-49528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 00E642C8E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 11:48:26 +0000 (UTC)
Received: (qmail 79210 invoked by uid 500); 29 Apr 2011 11:48:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79150 invoked by uid 500); 29 Apr 2011 11:48:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79142 invoked by uid 99); 29 Apr 2011 11:48:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:48:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.126.187] (HELO moutng.kundenserver.de) (212.227.126.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:48:16 +0000
Received: from [192.168.178.137] (srbk-4d0b9036.pool.mediaWays.net [77.11.144.54])
	by mrelayeu.kundenserver.de (node=mrbap1) with ESMTP (Nemesis)
	id 0MTMxT-1QPQnE1fWB-00S17n; Fri, 29 Apr 2011 13:47:55 +0200
Subject: Re: Are Okapi BM25 scores normalized into 0 and 1 ?
Mime-Version: 1.0 (Apple Message framework v1078)
Content-Type: text/plain; charset=iso-8859-1
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <BANLkTinjwd2-Dc54-vLzPpOrAj_fcjTAjg@mail.gmail.com>
Date: Fri, 29 Apr 2011 13:47:54 +0200
Cc: Patrick Diviacco <patrick.diviacco@gmail.com>
Content-Transfer-Encoding: quoted-printable
Message-Id: <E4B31F12-0EED-4922-B45D-C8DAB5A2B481@hoplahup.net>
References: <BANLkTimfKUhnjtrH440c5xQTR_5V1GccsQ@mail.gmail.com> <BANLkTinjwd2-Dc54-vLzPpOrAj_fcjTAjg@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)
X-Provags-ID: V02:K0:knI05Tg7mAJXvI8UNrg17hWoL+Lt3ToFsrQ7/eBzkqd
 ZfZkxei6Toj9Hz2q0Gpvex0oPnTERMva9xLO1B0vMZiJB2Q7gM
 pMjRiJ+ihexJCoMailz/1/lVMg6Sq1OH1xr7Tw00lX/VopoLGM
 bvyuzmWKjzRuVLI/e1WvORrGyCAQDJzUYtrnkunbjymXZnjP6n
 Gm2JIL4jHoyu5ApLZp8ieIGAEQwyqvnw90Ahfnp3h4=
X-Virus-Checked: Checked by ClamAV on apache.org

Patrick if the question is about the code snippert at the page you =
mention, which I copy below, I believe the answer is no and the author =
is aware of it since he is adding a comment about not-normalized in the =
second example.

ScoreDocs and TopDocs are not returning normalized scores.
Normalized scores tend to be rare in Lucene nowadays, I believe earlier =
strategy was to divide by max-score when the latter was bigger than 1.

paul

	IndexSearcher searcher =3D new IndexSearcher("IndexPath");

	//Load average length
	BM25Parameters.load(avgLengthPath);
	BM25BooleanQuery query =3D new BM25BooleanQuery("This is my =
Query",=20
		"Search-Field",
		new StandardAnalyzer());
=09
	TopDocs top =3D searcher.search(query, null, 10);
	ScoreDoc[] docs =3D top.scoreDocs;
=09
	//Print results
	for (int i =3D 0; i $<$ top.scoreDocs.length; i++) {
	      System.out.println(docs[i].doc + ":"+docs[i].score);
	}


Le 29 avr. 2011 =E0 13:20, Patrick Diviacco a =E9crit :

> Can anybody provide me some information about it ? Even a small clue, =
I'm
> kinda stuck on this and the owner of the libraries do not answer =
emails.
>=20
> Thanks
>=20
>=20
> On 28 April 2011 13:49, Patrick Diviacco <patrick.diviacco@gmail.com> =
wrote:
>=20
>> Is Okapi BM25 (its implementation in Lucene:
>> nlp.uned.es/~jperezi/Lucene-BM25) returning back normalized query =
scores
>> (in between 0 and 1) ?
>>=20
>> According to Okapi formula the final score should be normalized. =
Could you
>> give some information about that ?
>>=20
>> thanks
>>=20
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 11:50:59 2011
Return-Path: <java-user-return-49529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 080022D64
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 11:50:59 +0000 (UTC)
Received: (qmail 85014 invoked by uid 500); 29 Apr 2011 11:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84965 invoked by uid 500); 29 Apr 2011 11:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84957 invoked by uid 99); 29 Apr 2011 11:50:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:50:56 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmuguruza@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:50:50 +0000
Received: by bwz8 with SMTP id 8so5114635bwz.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 04:50:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=MWl4mRszBq62+hwux2rkQlsD/1pB9iwxCxDufaLs6VU=;
        b=sxaE8xm4axvzP4KDzjOg8kx7XXU1PsiqN/FU5iZlgscv4JQ1MHIzrW3jbdIa5aIFUn
         wGcXsvHJOWyA9IF0N3OZllROxBtJYXN2iwFiw4yDDD7t+Mj4IPfRqzvnHJ/G3jv3ngPy
         k8ssbBupfcDATu6lXfCCcYAWxKC673EIhSa8o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=iptHZfADc5FlVrZDvJmmapcqyw0VJcoJEfjBD2NcXrgS52Acp5mIuLVsmAM8c0KBp1
         TGVZMA1S2SSh5co6dRMEIiudrWx0hWgWlJuhht1jhyM93Z1/n8Ip7cOBiG9njtj0+Wxc
         tlnW6DBUOYuft3QH3NXljXGG+zuC8rLO5AZWI=
Received: by 10.204.39.68 with SMTP id f4mr687932bke.17.1304077830235; Fri, 29
 Apr 2011 04:50:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.70.197 with HTTP; Fri, 29 Apr 2011 04:50:00 -0700 (PDT)
In-Reply-To: <729840.58746.qm@web130106.mail.mud.yahoo.com>
References: <439878.18653.qm@web130109.mail.mud.yahoo.com> <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de>
 <968451.10722.qm@web130106.mail.mud.yahoo.com> <00de01cc05ee$e2a41060$a7ec3120$@thetaphi.de>
 <729840.58746.qm@web130106.mail.mud.yahoo.com>
From: jm <jmuguruza@gmail.com>
Date: Fri, 29 Apr 2011 13:50:00 +0200
Message-ID: <BANLkTikM41KA2MW97D2MVi+M6H6Nvyv=pA@mail.gmail.com>
Subject: Re: SorterTemplate.quickSort causes StackOverflowError
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5555712d4a5fb04a20d47b4
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec5555712d4a5fb04a20d47b4
Content-Type: text/plain; charset=ISO-8859-1

maybe http://youdebug.kenai.com/ could be useful. If you are lucky you could
get it to set a breakpoint when the recursive call has reached depth X.

On Fri, Apr 29, 2011 at 1:40 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi,
>
> OK, so it looks like it's not MemoryIndex and its Comparator that are
> funky.
> After switching from quickSort call in MemoryIndex to mergeSort, the
> problem
> persists:
>
> '1205215856@qtp-684754483-7' Id=18, RUNNABLE on lock=, total cpu
> time=497060.0000ms user time=495210.0000msat
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:105)
>
> at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> So something else is calling quickSort when it gets stuck.  Weirdly, when I
> get
> a thread dump and get the above, I don't see the original caller.  Maybe
> because
> the stack is already too deep and the printout is limited to N lines per
> call
> stack?
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
> > From: Uwe Schindler <uwe@thetaphi.de>
> > To: java-user@lucene.apache.org
> > Sent: Thu, April 28, 2011 5:54:44 PM
> > Subject: RE: SorterTemplate.quickSort causes StackOverflowError
> >
> > > Thanks for confirming, Javier! :)
> > >
> > > Uwe, I assume you are  referring to this line 528 in MemoryIndex?
> > >
> > >      528     if (size > 1) ArrayUtil.quickSort(entries,
>  termComparator);
> > >
> > > And this funky Comparator from  MemoryIndex:
> > >
> > >     208   private static final  Comparator<Object> termComparator = new
> > > Comparator<Object>()  {
> > >     209      @SuppressWarnings("unchecked")
> > >     210     public  int compare(Object o1, Object o2) {
> > >     211        if (o1 instanceof Map.Entry<?,?>) o1 =
>  ((Map.Entry<?,?>)
> > > o1).getKey();
> > >     212        if (o2 instanceof Map.Entry<?,?>) o2 =
>  ((Map.Entry<?,?>)
> > > o2).getKey();
> > >     213        if (o1 == o2) return 0;
> > >     214        return ((Comparable) o1).compareTo((Comparable) o2);
> > >      215     }
> > >     216   };
> > >
> > >  Will try, thanks!
> >
> > Yeah, simply try with mergeSort in line 528. If that  helps, this
> comparator
> > is buggy.
> >
> > Uwe
> >
> >
> > > ----- Original  Message ----
> > > > From: Uwe Schindler <uwe@thetaphi.de>
> > > > To: java-user@lucene.apache.org
> > >  > Sent: Thu, April 28, 2011 5:36:13 PM
> > > > Subject: RE:  SorterTemplate.quickSort causes StackOverflowError
> > > >
> > > > Hi  Otis,
> > > >
> > > > Can you reproduce this somehow and send test  code? I could look
>  into
> > > > it. I don't expect the error in the  quicksort algorithm itself as
> this
> > > > one is used e.g. BytesRefHash /  TermsHash, if there is a bug we
> would
> > > > have  seen it long time  ago.
> > > >
> > > > I have not seen this before, but I suspect  a  problem in this very
> > > > strange comparator in MemoryIndex  (which is very broken,  if you
> look
> > > > at its code - it can  compare Strings with Map.Entry and so on,
> > > > brrrr), maybe the  comparator is not stable? In this case, quicksort
> > > > can  easily  loop endless and stack overflow. In Lucene 3.0 this used
> > > > stock  java  sort (which is mergesort), maybe replace the
> > > >  ArrayUtils.quickSort my  ArrayUtils.mergeSort() and see if problem
>  is
> > still
> > > there?
> > > >
> > > > Uwe
> > > >
> > >  > -----
> > > > Uwe Schindler
> > > > H.-H.-Meier-Allee 63,  D-28213  Bremen
> > > > http://www.thetaphi.de
> > > > eMail: uwe@thetaphi.de
> > > >
> > >  >
> > > > > -----Original  Message-----
> > > > > From:  Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  > >  Sent: Thursday, April 28, 2011 11:17 PM
> > > > > To: java-user@lucene.apache.org
> > >  > >  Subject: SorterTemplate.quickSort causes  StackOverflowError
> > > > >
> > > > >  Hi,
> > > >  >
> > > > > I'm looking at some code that uses MemoryIndex (Lucene  3.1)  and
> > > > > that's exhibiting a strange behaviour - it  slows down over  time.
> > > > > The MemoryIndex contains 1 doc, of  course, and executes a set of a
> > > > > few thousand queries against  it.  The set of queries does not
> > > > > change - the
> > >  > same
> > > > > set of queries gets executed on all incoming   documents.
> > > > > This code runs very quickly..... in the  beginning.   But  with
> time is
> > gets
> > > > > slower and  slower.... and slower..... and then I get  this:
> > > > >
> > >  > > 4/28/11 10:32:52 PM (S) SolrException.log  :
> > java.lang.StackOverflowError
> > > > >     at
> > >  > >
> > >
>  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  > >      at
> > > > >
> > >
>  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  > >      at
> > > > >
> > > > >
>  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:
> > >  > > 104)
> > > > >
> > > > > I haven't profiled this code  yet (remote server, firewall in
> > > > > between,
> > > > can't  use
> > > > > YourKit...), but does the above look familiar to   anyone?
> > > > > I've looked at the code and obviously there is the  recursive  call
> > > > > that's problematic here - it looks like  the recursion just gets
> > > > > deeper and deeper
> > > >  and
> > > > > "gets stuck", eventually getting too deep for  the  JVM's taste.
> > > > >
> > > > > Thanks,
> > > > >  Otis
> > > > > ----
> > > > >  Sematext :: http://sematext.com/ :: Solr -  Lucene - Nutch Lucene
> > > > > ecosystem  search :: http://search-lucene.com/
> > > > >
> > > > >
> > > >  >
> > > > >
>  --------------------------------------------------------------------
> > >  > > - To  unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > >  > >  For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >  >
> > > >
> > > >
> > > >
>  ---------------------------------------------------------------------
> > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > For  additional commands, e-mail: java-user-help@lucene.apache.org
> > >  >
> > > >
> > >
> > >  ---------------------------------------------------------------------
> > > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec5555712d4a5fb04a20d47b4--

From java-user-return-49530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 11:52:28 2011
Return-Path: <java-user-return-49530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B0752E00
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 11:52:28 +0000 (UTC)
Received: (qmail 89421 invoked by uid 500); 29 Apr 2011 11:52:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89285 invoked by uid 500); 29 Apr 2011 11:52:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89276 invoked by uid 99); 29 Apr 2011 11:52:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:52:26 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 11:52:19 +0000
Received: by bwz8 with SMTP id 8so5115777bwz.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 04:51:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=HrURVfq5BpfxY82mfO7BRqVXIOQMly/e4lS8DrWregQ=;
        b=UYnfAJTcQj6QotgH4lORdizxpW7Pki5zngQY6HFOtMOhIrxgFH+HhuQ8rWq7XLa262
         bXPYpQuTUvjbnm6yGnKR0267ZUzcmPY8OzN7cJYe6HpPh7NPhgBm5gb/a8DhSWboWRwn
         PD2RdSOSmh8YtYn4g/Ex56uSMz/WBhaQ07ih4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=RLhe1qcav3Mc7EsoqnT/nChN9cwaaXFtXDi6wNP4W18nxvRk5TUTvD1AHe+j5BVcNL
         3XxFVT1SQQHwapR5Ugx0uPbCitHS9WCzm1MeHBMirHPbDL8NTFFqLlZUjPgtgqWg6iPI
         nEPQkG1QYgBgfgJ3YFScvKe7yQsbDS2uU5g8k=
Received: by 10.204.154.194 with SMTP id p2mr2156759bkw.58.1304077919083; Fri,
 29 Apr 2011 04:51:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Fri, 29 Apr 2011 04:51:39 -0700 (PDT)
In-Reply-To: <729840.58746.qm@web130106.mail.mud.yahoo.com>
References: <439878.18653.qm@web130109.mail.mud.yahoo.com> <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de>
 <968451.10722.qm@web130106.mail.mud.yahoo.com> <00de01cc05ee$e2a41060$a7ec3120$@thetaphi.de>
 <729840.58746.qm@web130106.mail.mud.yahoo.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Fri, 29 Apr 2011 13:51:39 +0200
Message-ID: <BANLkTimNbT9MkasD-rAczxQFZze7u_XZNw@mail.gmail.com>
Subject: Re: SorterTemplate.quickSort causes StackOverflowError
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175df02e205dc704a20d4d91
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175df02e205dc704a20d4d91
Content-Type: text/plain; charset=UTF-8

Don't know if this helps, but debugging stuff like this I simply add a
(manually inserted or aspectj-injected) recursion count, add a breakpoint
inside an if checking for recursion count >> X and run the vm with an
attached socket debugger. This lets you run at (nearly) full speed and once
you hit the breakpoint, inspect the stack, variables, etc...

Dawid

On Fri, Apr 29, 2011 at 1:40 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi,
>
> OK, so it looks like it's not MemoryIndex and its Comparator that are
> funky.
> After switching from quickSort call in MemoryIndex to mergeSort, the
> problem
> persists:
>
> '1205215856@qtp-684754483-7' Id=18, RUNNABLE on lock=, total cpu
> time=497060.0000ms user time=495210.0000msat
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:105)
>
> at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> at org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> So something else is calling quickSort when it gets stuck.  Weirdly, when I
> get
> a thread dump and get the above, I don't see the original caller.  Maybe
> because
> the stack is already too deep and the printout is limited to N lines per
> call
> stack?
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
> > From: Uwe Schindler <uwe@thetaphi.de>
> > To: java-user@lucene.apache.org
> > Sent: Thu, April 28, 2011 5:54:44 PM
> > Subject: RE: SorterTemplate.quickSort causes StackOverflowError
> >
> > > Thanks for confirming, Javier! :)
> > >
> > > Uwe, I assume you are  referring to this line 528 in MemoryIndex?
> > >
> > >      528     if (size > 1) ArrayUtil.quickSort(entries,
>  termComparator);
> > >
> > > And this funky Comparator from  MemoryIndex:
> > >
> > >     208   private static final  Comparator<Object> termComparator = new
> > > Comparator<Object>()  {
> > >     209      @SuppressWarnings("unchecked")
> > >     210     public  int compare(Object o1, Object o2) {
> > >     211        if (o1 instanceof Map.Entry<?,?>) o1 =
>  ((Map.Entry<?,?>)
> > > o1).getKey();
> > >     212        if (o2 instanceof Map.Entry<?,?>) o2 =
>  ((Map.Entry<?,?>)
> > > o2).getKey();
> > >     213        if (o1 == o2) return 0;
> > >     214        return ((Comparable) o1).compareTo((Comparable) o2);
> > >      215     }
> > >     216   };
> > >
> > >  Will try, thanks!
> >
> > Yeah, simply try with mergeSort in line 528. If that  helps, this
> comparator
> > is buggy.
> >
> > Uwe
> >
> >
> > > ----- Original  Message ----
> > > > From: Uwe Schindler <uwe@thetaphi.de>
> > > > To: java-user@lucene.apache.org
> > >  > Sent: Thu, April 28, 2011 5:36:13 PM
> > > > Subject: RE:  SorterTemplate.quickSort causes StackOverflowError
> > > >
> > > > Hi  Otis,
> > > >
> > > > Can you reproduce this somehow and send test  code? I could look
>  into
> > > > it. I don't expect the error in the  quicksort algorithm itself as
> this
> > > > one is used e.g. BytesRefHash /  TermsHash, if there is a bug we
> would
> > > > have  seen it long time  ago.
> > > >
> > > > I have not seen this before, but I suspect  a  problem in this very
> > > > strange comparator in MemoryIndex  (which is very broken,  if you
> look
> > > > at its code - it can  compare Strings with Map.Entry and so on,
> > > > brrrr), maybe the  comparator is not stable? In this case, quicksort
> > > > can  easily  loop endless and stack overflow. In Lucene 3.0 this used
> > > > stock  java  sort (which is mergesort), maybe replace the
> > > >  ArrayUtils.quickSort my  ArrayUtils.mergeSort() and see if problem
>  is
> > still
> > > there?
> > > >
> > > > Uwe
> > > >
> > >  > -----
> > > > Uwe Schindler
> > > > H.-H.-Meier-Allee 63,  D-28213  Bremen
> > > > http://www.thetaphi.de
> > > > eMail: uwe@thetaphi.de
> > > >
> > >  >
> > > > > -----Original  Message-----
> > > > > From:  Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  > >  Sent: Thursday, April 28, 2011 11:17 PM
> > > > > To: java-user@lucene.apache.org
> > >  > >  Subject: SorterTemplate.quickSort causes  StackOverflowError
> > > > >
> > > > >  Hi,
> > > >  >
> > > > > I'm looking at some code that uses MemoryIndex (Lucene  3.1)  and
> > > > > that's exhibiting a strange behaviour - it  slows down over  time.
> > > > > The MemoryIndex contains 1 doc, of  course, and executes a set of a
> > > > > few thousand queries against  it.  The set of queries does not
> > > > > change - the
> > >  > same
> > > > > set of queries gets executed on all incoming   documents.
> > > > > This code runs very quickly..... in the  beginning.   But  with
> time is
> > gets
> > > > > slower and  slower.... and slower..... and then I get  this:
> > > > >
> > >  > > 4/28/11 10:32:52 PM (S) SolrException.log  :
> > java.lang.StackOverflowError
> > > > >     at
> > >  > >
> > >
>  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  > >      at
> > > > >
> > >
>  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  > >      at
> > > > >
> > > > >
>  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:
> > >  > > 104)
> > > > >
> > > > > I haven't profiled this code  yet (remote server, firewall in
> > > > > between,
> > > > can't  use
> > > > > YourKit...), but does the above look familiar to   anyone?
> > > > > I've looked at the code and obviously there is the  recursive  call
> > > > > that's problematic here - it looks like  the recursion just gets
> > > > > deeper and deeper
> > > >  and
> > > > > "gets stuck", eventually getting too deep for  the  JVM's taste.
> > > > >
> > > > > Thanks,
> > > > >  Otis
> > > > > ----
> > > > >  Sematext :: http://sematext.com/ :: Solr -  Lucene - Nutch Lucene
> > > > > ecosystem  search :: http://search-lucene.com/
> > > > >
> > > > >
> > > >  >
> > > > >
>  --------------------------------------------------------------------
> > >  > > - To  unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > >  > >  For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >  >
> > > >
> > > >
> > > >
>  ---------------------------------------------------------------------
> > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > For  additional commands, e-mail: java-user-help@lucene.apache.org
> > >  >
> > > >
> > >
> > >  ---------------------------------------------------------------------
> > > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175df02e205dc704a20d4d91--

From java-user-return-49531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 13:54:45 2011
Return-Path: <java-user-return-49531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6A2BE2DE5
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 13:54:45 +0000 (UTC)
Received: (qmail 72014 invoked by uid 500); 29 Apr 2011 13:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71972 invoked by uid 500); 29 Apr 2011 13:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71964 invoked by uid 99); 29 Apr 2011 13:54:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 13:54:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prvs=1100cd6f43=chris@mainsequence.net designates 207.54.164.6 as permitted sender)
Received: from [207.54.164.6] (HELO mainsequence.net) (207.54.164.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 13:54:33 +0000
Received: from 127.0.0.1 ([64.152.144.98])
	by mainsequence.net (mainsequence.net)
	(MDaemon PRO v10.1.1)
	with ESMTP id md50015370451.msg
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 09:54:07 -0400
X-Spam-Processed: mainsequence.net, Fri, 29 Apr 2011 09:54:07 -0400
	(not processed: message from trusted or authenticated source)
X-MDRemoteIP: 64.152.144.98
X-Return-Path: prvs=1100cd6f43=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <chris@mainsequence.net>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: ComplexPhraseQueryParser with multiple fields
Date: Fri, 29 Apr 2011 13:54:42 -0000
Message-Id: <740221930626904@mail.mainsequence.net>
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCR Emu of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCR Emu of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcr8C53AF5D4B384CDAB3FE6CF832786C1Asection1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_pcr8C53AF5D4B384CDAB3FE6CF832786C1Asection1-b1
Content-Type: text/plain; charset="ISO-2022-JP"
Content-Transfer-Encoding: 7bit

Hi,
I've just started using the ComplexPhraseQueryParser and it works great with one field but is there a way for it to work with multiple fields?  For example, right now the query:
job_title: "sales man*" AND NOT contact_name: "Chris Salem"
throws this exception 
Caused by: org.apache.lucene.queryParser.ParseException: Cannot have clause for field "job_title" nested in phrase for field "contact_name"
What is the best way to work around this?
Sincerely,
Chris Salem

------=_pcr8C53AF5D4B384CDAB3FE6CF832786C1Asection1-b1--




From java-user-return-49532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 14:09:46 2011
Return-Path: <java-user-return-49532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A73A42615
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 14:09:46 +0000 (UTC)
Received: (qmail 88298 invoked by uid 500); 29 Apr 2011 14:09:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88253 invoked by uid 500); 29 Apr 2011 14:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88244 invoked by uid 99); 29 Apr 2011 14:09:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 14:09:44 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 14:09:40 +0000
Received: by vxa37 with SMTP id 37so4377606vxa.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 07:09:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=h2QqmYxbSYwU/q8wA5Eao5hrUGsApHlxcPNNMwykpf8=;
        b=D8z2B3Y5T0JWJ4FQIA7MpRm6KPbML4f6iWlkat2zoti/FO6BnIku6Ih9qnIlN3qb2u
         Z1Ondw4B17BfixJGWswmA24YKtVK9sadIaBUhegQ7/uZqk8OS4FUIWnE07gomLwDmptt
         p1+ga0u643RwBujwurUb71XHxX4EKZg3E690o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=AowAj5fZn4mv1FHTRbwimpMGyGPVliJz1T1EsApI6gu1idwiwm50YW/5/DdhMx6sx/
         10Keo1VvC8t3dGsyy1uEOVuhwXeY0V9Arhf4EjeQiW+XErNkF9+9cvYrgEcuDx8yO4/X
         1xn9EcDaZlizD6PxnC/VeiiQYxdmdEF+k8i7o=
MIME-Version: 1.0
Received: by 10.52.96.234 with SMTP id dv10mr752681vdb.19.1304086158391; Fri,
 29 Apr 2011 07:09:18 -0700 (PDT)
Received: by 10.52.101.196 with HTTP; Fri, 29 Apr 2011 07:09:18 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <4DBA9C51.6030609@fastmail.fm>
References: <4DBA9C51.6030609@fastmail.fm>
Date: Fri, 29 Apr 2011 16:09:18 +0200
Message-ID: <BANLkTi=xwmnve=525zk5_8JqoZ-KR50qNw@mail.gmail.com>
Subject: Re: Lucene 3.0.3 with debug information
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=UTF-8

Hey paul,

you can simply checkout the tag or download the sources right?
http://svn.apache.org/repos/asf/lucene/java/tags/lucene_3_0_3/
or http://ftp.download-by.net/apache//lucene/java/3.0.3/

simon

On Fri, Apr 29, 2011 at 1:09 PM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> Is there a built debug version of lucene 3.0.3 so I can profile it properly
> to find what part of the search is taking the time.
>
> Note:Ive already profiled by application and determined that it is the
> lucene/Search that is taking the time, I also had another attempt using luke
> but find it incredibly buggy and of little use.
>
> thanks Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 14:18:25 2011
Return-Path: <java-user-return-49533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B67424B5
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 14:18:25 +0000 (UTC)
Received: (qmail 99545 invoked by uid 500); 29 Apr 2011 14:18:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99492 invoked by uid 500); 29 Apr 2011 14:18:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99484 invoked by uid 99); 29 Apr 2011 14:18:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 14:18:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 14:18:15 +0000
Received: by bwz8 with SMTP id 8so5284969bwz.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 07:17:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type;
        bh=0Jt7fnaLn2B/bYnUFNKC5VKXq6WG42f6PdI9RzQI+RI=;
        b=i9VINykElkJrPA4PDenZV2J7yTsviFYoU5APJvYvNm35rX7cV7Toz3pBMp5gjqBM4R
         eZ1RPd8lCGtZYS7saZvk5kw8yxc9Zdr9eBskjvcIdDrdkPy7o35uNvA6+tgocyC1NhkA
         taazOr/Yyl9CCp3i89AQAHADqBa9wWFGWivEs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=dUbfRdqu40L0Zh3BUzLbTzq1YCpT8sDgR0W85zW/lHkxC0E+QqWpdrV9LuVe7vJODX
         zOe2To0+mde6obq60i08vZ+Ngozlmz0i3XZVzHwwXT58kb3gkHjgDk2hd5+NVv/R61+3
         8TxlSHHcNjBFDNdHXZya6Llzi+rMCUCihKD+M=
Received: by 10.204.126.73 with SMTP id b9mr4646681bks.193.1304086675207; Fri,
 29 Apr 2011 07:17:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Fri, 29 Apr 2011 07:17:35 -0700 (PDT)
In-Reply-To: <BANLkTi=xwmnve=525zk5_8JqoZ-KR50qNw@mail.gmail.com>
References: <4DBA9C51.6030609@fastmail.fm> <BANLkTi=xwmnve=525zk5_8JqoZ-KR50qNw@mail.gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Fri, 29 Apr 2011 16:17:35 +0200
Message-ID: <BANLkTikrMoKdOTg8ypGCp8_Q01+2JD3noA@mail.gmail.com>
Subject: Re: Lucene 3.0.3 with debug information
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Cc: paul_t100@fastmail.fm
Content-Type: multipart/alternative; boundary=0016e6d96f6508352d04a20f571c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d96f6508352d04a20f571c
Content-Type: text/plain; charset=UTF-8

> lucene/Search that is taking the time, I also had another attempt using
> luke
> > but find it incredibly buggy and of little use
>

Can you expand on this too? What kind of "incredible bugs" did you see?
Without feedback there is little progress, so bug reports count.

Dawid

--0016e6d96f6508352d04a20f571c--

From java-user-return-49534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 15:04:29 2011
Return-Path: <java-user-return-49534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1EF682097
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 15:04:29 +0000 (UTC)
Received: (qmail 95479 invoked by uid 500); 29 Apr 2011 15:04:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95442 invoked by uid 500); 29 Apr 2011 15:04:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95434 invoked by uid 99); 29 Apr 2011 15:04:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 15:04:26 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 15:04:18 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p3TF3uCM008490
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 11:03:57 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Fri, 29 Apr 2011
 11:03:57 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 29 Apr 2011 11:03:55 -0400
Subject: RE: Lucene 3.0.3 with debug information
Thread-Topic: Lucene 3.0.3 with debug information
Thread-Index: AcwGXfHT/vtLWbWxTEq8sUc7Aj+cOAAELIIg
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE7194@suex07-mbx-03.ad.syr.edu>
References: <4DBA9C51.6030609@fastmail.fm>
In-Reply-To: <4DBA9C51.6030609@fastmail.fm>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-29_07:2011-04-29,2011-04-29,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgUGF1bCwNCg0KV2hhdCBkaWQgeW91IGZpbmQgYWJvdXQgTHVrZSB0aGF0J3MgYnVnZ3k/ICBC
dWcgcmVwb3J0cyBhcmUgdmVyeSB1c2VmdWw7IHBsZWFzZSBjb250cmlidXRlIGluIHRoaXMgd2F5
Lg0KDQpUaGUgb2ZmaWNpYWwgTHVjZW5lIDMuMC4zIGRpc3RyaWJ1dGlvbiBqYXJzIHdlcmUgY29t
cGlsZWQgdXNpbmcgdGhlIC1nIGNtZGxpbmUgYXJndW1lbnQgdG8gamF2YWMgLSBieSBkZWZhdWx0
LCB0aG91Z2gsIG9ubHkgbGluZSBudW1iZXIgYW5kIHNvdXJjZSBmaWxlIGluZm9ybWF0aW9uIGlz
IGdlbmVyYXRlZC4gIElmIHlvdSB3YW50IGxvY2FsIHZhcmlhYmxlIGluZm9ybWF0aW9uIHRvbywg
eW91IGNvdWxkIGRvd25sb2FkIHRoZSBzb3VyY2UgYW5kIG1ha2UgeW91ciBvd24gZGVidWctZW5h
YmxlZCBqYXIocyksIHJpZ2h0PzoNCg0KMC4gSW5zdGFsbCBBbnQgMS43LjE6IDxodHRwOi8vYXJj
aGl2ZS5hcGFjaGUub3JnL2Rpc3QvYW50L2JpbmFyaWVzLz4NCg0KMS4gc3ZuIGNoZWNrb3V0IGh0
dHA6Ly9zdm4uYXBhY2hlLm9yZy9yZXBvcy9hc2YvbHVjZW5lL2phdmEvdGFncy9sdWNlbmVfM18w
XzMNCg0KMi4gQWRkICdkZWJ1Z2xldmVsPSJsaW5lcyxzb3VyY2UsdmFycyInIHRvIHRoZSAiY29t
cGlsZSIgPG1hY3JvZGVmPiBpbiBjb21tb24tYnVpbGQueG1sIDxodHRwOi8vc3ZuLmFwYWNoZS5v
cmcvdmlld3ZjL2x1Y2VuZS9qYXZhL3RhZ3MvbHVjZW5lXzNfMF8zL2NvbW1vbi1idWlsZC54bWw/
cmV2aXNpb249MTA0MDk5NCZ2aWV3PW1hcmt1cCNsNTM2PiBpbiB0aGUgPGphdmFjPiB0YXNrIGlu
dm9jYXRpb24sIGUuZy46DQoNCjU0NTogCTxqYXZhYw0KNTQ2OgkgIGVuY29kaW5nPSIke2J1aWxk
LmVuY29kaW5nfSINCjU0NzogCSAgc3JjZGlyPSJAe3NyY2Rpcn0iDQo1NDg6IAkgIGRlc3RkaXI9
IkB7ZGVzdGRpcn0iDQo1NDk6CSAgZGVwcmVjYXRpb249IiR7amF2YWMuZGVwcmVjYXRpb259Ig0K
NTUwOgkgIGRlYnVnPSIke2phdmFjLmRlYnVnfSINCkFkZCAtLT4gZGVidWdsZXZlbD0ibGluZXMs
c291cmNlLHZhcnMiDQogICAgICAgIC4uLg0KDQozLiBydW4gImFudCBjbGVhbiBqYXIiIGZyb20g
dGhlIGNvbW1hbmQgbGluZS4gIFRoZSBMdWNlbmUgY29yZSBqYXIgd2lsbCBiZSBpbiB0aGUgYnVp
bGQvIGRpcmVjdG9yeS4gIChJZiB5b3UgbmVlZCBvbmUgb2YgdGhlIGNvbnRyaWIgamFycywgcnVu
ICJhbnQgcGFja2FnZSIgaW5zdGVhZC4pDQoNClN0ZXZlDQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCj4gRnJvbTogUGF1bCBUYXlsb3IgW21haWx0bzpwYXVsX3QxMDBAZmFzdG1haWwu
Zm1dDQo+IFNlbnQ6IEZyaWRheSwgQXByaWwgMjksIDIwMTEgNzowOSBBTQ0KPiBUbzogamF2YS11
c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IEx1Y2VuZSAzLjAuMyB3aXRoIGRlYnVn
IGluZm9ybWF0aW9uDQo+IA0KPiBJcyB0aGVyZSBhIGJ1aWx0IGRlYnVnIHZlcnNpb24gb2YgbHVj
ZW5lIDMuMC4zIHNvIEkgY2FuIHByb2ZpbGUgaXQNCj4gcHJvcGVybHkgdG8gZmluZCB3aGF0IHBh
cnQgb2YgdGhlIHNlYXJjaCBpcyB0YWtpbmcgdGhlIHRpbWUuDQo+IA0KPiBOb3RlOkl2ZSBhbHJl
YWR5IHByb2ZpbGVkIGJ5IGFwcGxpY2F0aW9uIGFuZCBkZXRlcm1pbmVkIHRoYXQgaXQgaXMgdGhl
DQo+IGx1Y2VuZS9TZWFyY2ggdGhhdCBpcyB0YWtpbmcgdGhlIHRpbWUsIEkgYWxzbyBoYWQgYW5v
dGhlciBhdHRlbXB0IHVzaW5nDQo+IGx1a2UgYnV0IGZpbmQgaXQgaW5jcmVkaWJseSBidWdneSBh
bmQgb2YgbGl0dGxlIHVzZS4NCj4gDQo+IHRoYW5rcyBQYXVsDQo+IA0KPiAtLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0N
Cj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5h
cGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-49535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 17:13:10 2011
Return-Path: <java-user-return-49535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7D5C12C89
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 17:13:10 +0000 (UTC)
Received: (qmail 2017 invoked by uid 500); 29 Apr 2011 17:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1971 invoked by uid 500); 29 Apr 2011 17:13:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1963 invoked by uid 99); 29 Apr 2011 17:13:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 17:13:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.94.239.42] (HELO web130122.mail.mud.yahoo.com) (66.94.239.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 29 Apr 2011 17:12:59 +0000
Received: (qmail 32889 invoked by uid 60001); 29 Apr 2011 17:12:38 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304097158; bh=ELHUSYQowRp9b/fbry0r5FGJZBOtSMMYz3kF+SRWmy0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=My1790lXg/3M+LUefOVCvEiaUtyD3iS4nWwftaeNun8x3ILQUG4BvRvzlUEgTSmqPEAGKz/9fcmiRu1ANgq8b5wr/p0z0THbbDmbJJryr8ZZZIRQw/+iEA3zTrh96k6Z7Yqy1/KI6JRGmjcvmdn0As1D9pXb8wsXgfHVck6Utws=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=m6ZMQgXvlG9M062ni/QfdEchZusStH1/BiQCNMUI3HNifs1kdtkJUAK2/Ao6D6JghLRa33pd84axYe+se4xJoDogOTT68EA3RpXOOwuOlFh6TiNxkb0LQtYl+X3wHPVV2QrV/Ls3LUE1AKrVaP9oRZmBi2QQqTSF84hRvwICNLI=;
Message-ID: <5705.30604.qm@web130122.mail.mud.yahoo.com>
X-YMail-OSG: tpsDolYVM1nOlF.llh55kUD3qHipwp5qGzC0vNpHgOZ6AgP
 _TESQ.TlzCHXWX9GGez78ahJsP6APRSDvhfB6H.pmYxPxZkiu2F49hhDJAzZ
 jllfAnipSMqcXtY.OL6HiLsj9g96IptMEKudBjD4BbDTl52pzXwkyb0KoOQo
 aU2A2N7b.FKeIptBTAL8zdrqvGNpr2chrzCCwGiN31XNBzBW2f9rbDeibftn
 b2J1b5NsNsGse_8P.11Be5ZJpgjZ.PUqIiSlLq683ukpvVSetx8aQRZpGydz
 EykLuZhIdLlMTf_xTm.045S8EjhtuT0lkP50v91AEh_eZKGfuSJIylZ4662j
 S5zNTjbcs6irVIBfBYwPrXrgkopF3qI_QHZYMOribjD_Dd.2AAnfhZ7BvCXK
 e9o1.2FHIItS8
Received: from [184.75.0.187] by web130122.mail.mud.yahoo.com via HTTP; Fri, 29 Apr 2011 10:12:37 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
References: <439878.18653.qm@web130109.mail.mud.yahoo.com> <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de> <968451.10722.qm@web130106.mail.mud.yahoo.com> <00de01cc05ee$e2a41060$a7ec3120$@thetaphi.de> <729840.58746.qm@web130106.mail.mud.yahoo.com> <BANLkTimNbT9MkasD-rAczxQFZze7u_XZNw@mail.gmail.com>
Date: Fri, 29 Apr 2011 10:12:37 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: SorterTemplate.quickSort causes StackOverflowError
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTimNbT9MkasD-rAczxQFZze7u_XZNw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Yeah, that's what we were going to do, but instead we did:
* changed MemoryIndex to use ArrayUtil.mergeSort
* ran the up and did a thread dump that shows that SorterTemplate.quickSort in 
deep recursion again!
* looked for other places where this call is made - found it in 
MultiPhraseQuery$MultiPhraseWeight and changed that call from 
ArrayUtil.quickSort to ArrayUtil.mergeSort
* now we no longer see SorterTemplate.quickSort in deep recursion when we do a 
thread dump
* we now occasionally catch SorterTemplate.mergeSort in our thread dumps, but 
only a few levels deep, which looks healthy

I don't think we'll be able to reproduce this easily - this happens with 
MemoryIndex and a few thousand stored queries that are confidential customer 
data :(

I'll be back if after a while mergeSort starts behaving the same as quickSort.

Thanks!
Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Dawid Weiss <dawid.weiss@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Fri, April 29, 2011 7:51:39 AM
> Subject: Re: SorterTemplate.quickSort causes StackOverflowError
> 
> Don't know if this helps, but debugging stuff like this I simply add  a
> (manually inserted or aspectj-injected) recursion count, add a  breakpoint
> inside an if checking for recursion count >> X and run the  vm with an
> attached socket debugger. This lets you run at (nearly) full speed  and once
> you hit the breakpoint, inspect the stack, variables,  etc...
> 
> Dawid
> 
> On Fri, Apr 29, 2011 at 1:40 PM, Otis Gospodnetic  <
> otis_gospodnetic@yahoo.com>  wrote:
> 
> > Hi,
> >
> > OK, so it looks like it's not MemoryIndex  and its Comparator that are
> > funky.
> > After switching from  quickSort call in MemoryIndex to mergeSort, the
> > problem
> >  persists:
> >
> > '1205215856@qtp-684754483-7' Id=18, RUNNABLE on lock=,  total cpu
> > time=497060.0000ms user time=495210.0000msat
> >  org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:105)
> >
> >  at  
org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >  at  
org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >  at  
org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >  So something else is calling quickSort when it gets stuck.  Weirdly, when  
I
> > get
> > a thread dump and get the above, I don't see the original  caller.  Maybe
> > because
> > the stack is already too deep and  the printout is limited to N lines per
> > call
> >  stack?
> >
> > Otis
> > ----
> > Sematext :: http://sematext.com/ :: Solr -  Lucene - Nutch
> > Lucene ecosystem search :: http://search-lucene.com/
> >
> >
> >
> > ----- Original  Message ----
> > > From: Uwe Schindler <uwe@thetaphi.de>
> > > To: java-user@lucene.apache.org
> >  > Sent: Thu, April 28, 2011 5:54:44 PM
> > > Subject: RE:  SorterTemplate.quickSort causes StackOverflowError
> > >
> > >  > Thanks for confirming, Javier! :)
> > > >
> > > > Uwe,  I assume you are  referring to this line 528 in MemoryIndex?
> > >  >
> > > >      528     if (size > 1)  ArrayUtil.quickSort(entries,
> >  termComparator);
> > >  >
> > > > And this funky Comparator from  MemoryIndex:
> >  > >
> > > >     208   private static final   Comparator<Object> termComparator = new
> > > >  Comparator<Object>()  {
> > > >     209       @SuppressWarnings("unchecked")
> > > >      210     public  int compare(Object o1, Object o2) {
> > >  >     211        if (o1 instanceof  Map.Entry<?,?>) o1 =
> >  ((Map.Entry<?,?>)
> > >  > o1).getKey();
> > > >     212         if (o2 instanceof Map.Entry<?,?>) o2 =
> >   ((Map.Entry<?,?>)
> > > > o2).getKey();
> > > >      213        if (o1 == o2) return 0;
> > >  >     214        return ((Comparable)  o1).compareTo((Comparable) o2);
> > > >      215      }
> > > >     216   };
> > >  >
> > > >  Will try, thanks!
> > >
> > > Yeah,  simply try with mergeSort in line 528. If that  helps, this
> >  comparator
> > > is buggy.
> > >
> > > Uwe
> >  >
> > >
> > > > ----- Original  Message ----
> >  > > > From: Uwe Schindler <uwe@thetaphi.de>
> > > > > To: java-user@lucene.apache.org
> >  > >  > Sent: Thu, April 28, 2011 5:36:13 PM
> > > >  > Subject: RE:  SorterTemplate.quickSort causes  StackOverflowError
> > > > >
> > > > > Hi   Otis,
> > > > >
> > > > > Can you reproduce this  somehow and send test  code? I could look
> >  into
> > >  > > it. I don't expect the error in the  quicksort algorithm itself  as
> > this
> > > > > one is used e.g. BytesRefHash /   TermsHash, if there is a bug we
> > would
> > > > > have   seen it long time  ago.
> > > > >
> > > > > I  have not seen this before, but I suspect  a  problem in this  very
> > > > > strange comparator in MemoryIndex  (which is  very broken,  if you
> > look
> > > > > at its code - it  can  compare Strings with Map.Entry and so on,
> > > > >  brrrr), maybe the  comparator is not stable? In this case,  quicksort
> > > > > can  easily  loop endless and stack  overflow. In Lucene 3.0 this used
> > > > > stock  java   sort (which is mergesort), maybe replace the
> > > > >   ArrayUtils.quickSort my  ArrayUtils.mergeSort() and see if  problem
> >  is
> > > still
> > > > there?
> >  > > >
> > > > > Uwe
> > > > >
> > >  >  > -----
> > > > > Uwe Schindler
> > > >  > H.-H.-Meier-Allee 63,  D-28213  Bremen
> > > > > http://www.thetaphi.de
> >  > > > eMail: uwe@thetaphi.de
> > > > >
> >  > >  >
> > > > > > -----Original   Message-----
> > > > > > From:  Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> >  > >  > >  Sent: Thursday, April 28, 2011 11:17 PM
> >  > > > > To: java-user@lucene.apache.org
> >  > >  > >  Subject: SorterTemplate.quickSort causes   StackOverflowError
> > > > > >
> > > > > >   Hi,
> > > > >  >
> > > > > > I'm looking at  some code that uses MemoryIndex (Lucene  3.1)  and
> > > >  > > that's exhibiting a strange behaviour - it  slows down over   time.
> > > > > > The MemoryIndex contains 1 doc, of   course, and executes a set of a
> > > > > > few thousand queries  against  it.  The set of queries does not
> > > > > >  change - the
> > > >  > same
> > > > > > set  of queries gets executed on all incoming   documents.
> > > >  > > This code runs very quickly..... in the  beginning.    But  with
> > time is
> > > gets
> > > > > >  slower and  slower.... and slower..... and then I get  this:
> >  > > > >
> > > >  > > 4/28/11 10:32:52 PM (S)  SolrException.log  :
> > > java.lang.StackOverflowError
> > >  > > >     at
> > > >  > >
> > >  >
> >   org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >  > >  > >      at
> > > > >  >
> > > >
> >   org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> >  > >  > >      at
> > > > >  >
> > > > > >
> >   org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:
> >  > >  > > 104)
> > > > > >
> > > >  > > I haven't profiled this code  yet (remote server, firewall  in
> > > > > > between,
> > > > > can't   use
> > > > > > YourKit...), but does the above look familiar  to   anyone?
> > > > > > I've looked at the code and  obviously there is the  recursive  call
> > > > > >  that's problematic here - it looks like  the recursion just gets
> >  > > > > deeper and deeper
> > > > >  and
> >  > > > > "gets stuck", eventually getting too deep for   the  JVM's taste.
> > > > > >
> > > > > >  Thanks,
> > > > > >  Otis
> > > > > >  ----
> > > > > >  Sematext :: http://sematext.com/ :: Solr  -  Lucene - Nutch Lucene
> > > > > > ecosystem  search  :: http://search-lucene.com/
> > > > > >
> > > >  > >
> > > > >  >
> > > > >  >
> >   --------------------------------------------------------------------
> >  > >  > > - To  unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> >  > >  > >  For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >  > >  >
> > > > >
> > > > >
> > >  > >
> >   ---------------------------------------------------------------------
> >  > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > >  > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >  > >  >
> > > > >
> > > >
> > >  >   ---------------------------------------------------------------------
> >  > > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> > >
> > >
> > >  ---------------------------------------------------------------------
> >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> > >
> >
> >  ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 19:54:36 2011
Return-Path: <java-user-return-49536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B57B295F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 19:54:36 +0000 (UTC)
Received: (qmail 21256 invoked by uid 500); 29 Apr 2011 19:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21212 invoked by uid 500); 29 Apr 2011 19:54:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21204 invoked by uid 99); 29 Apr 2011 19:54:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 19:54:33 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 19:54:26 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 403E0D36005
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 21:54:06 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3A7t1RCkC1VC for <java-user@lucene.apache.org>;
	Fri, 29 Apr 2011 21:54:00 +0200 (CEST)
Received: from VEGA (port-92-196-119-3.dynamic.qsc.de [92.196.119.3])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 115D6D36002
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 21:53:59 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <439878.18653.qm@web130109.mail.mud.yahoo.com> <00d701cc05ec$4cdacc10$e6906430$@thetaphi.de> <968451.10722.qm@web130106.mail.mud.yahoo.com> <00de01cc05ee$e2a41060$a7ec3120$@thetaphi.de> <729840.58746.qm@web130106.mail.mud.yahoo.com> <BANLkTimNbT9MkasD-rAczxQFZze7u_XZNw@mail.gmail.com> <5705.30604.qm@web130122.mail.mud.yahoo.com>
In-Reply-To: <5705.30604.qm@web130122.mail.mud.yahoo.com>
Subject: RE: SorterTemplate.quickSort causes StackOverflowError
Date: Fri, 29 Apr 2011 21:54:07 +0200
Message-ID: <006c01cc06a7$33c7f7f0$9b57e7d0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHj9lHgQ9gDlUYanBfW8YTZWxaCKgKo44HMAfYDCEkAoTkmLQIR7TBbAkLOwHgBfhGPopPsyBHA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis,

Thanks for trying out. From what I see, the problem is at all not in
MemoryIndex, so I suggest that you replace the mergeSort by quicksort again
(for MemoryIndex, see below). The problem seem to be the comparators that's
are in those Queries, which have no tie-breaker. MergeSort can handle them
better, because mergeSort is stable in comparison to quicksort.

I did some testing with random data and did not get a stack overflow at all
(with standard terms / integers). A integer sort showed that even 200
million integers sorted a) much faster with quickSort and did not stack
overflow (in reality, for good comparators, integers should at most do 31
recursions, but only with 2^31 integers in an array!!!), so quickSort is
fine for strings and integers.

Mike McCandless did some tests in TermsHash/BytesRefHash (Lucene Core), that
showed that quicksort is 20% faster than mergeSort. The code is similar to
MemoryIndex, so this is why I suggest to not change MemoryIndex at all. From
your description of the issue its also unlikely that MemoryIndex is causing
this, because sorting is only done on building the index, not when queries
are running! So the bad guys are the PhraseQueries. We should fix them ASAP,
as this may affect other users, too.

More on https://issues.apache.org/jira/browse/LUCENE-3054,
Thanks Robert!

I will review later, I am heavy busy at the moment.
Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Friday, April 29, 2011 7:13 PM
> To: java-user@lucene.apache.org
> Subject: Re: SorterTemplate.quickSort causes StackOverflowError
> 
> Hi,
> 
> Yeah, that's what we were going to do, but instead we did:
> * changed MemoryIndex to use ArrayUtil.mergeSort
> * ran the up and did a thread dump that shows that
> SorterTemplate.quickSort in deep recursion again!
> * looked for other places where this call is made - found it in
> MultiPhraseQuery$MultiPhraseWeight and changed that call from
> ArrayUtil.quickSort to ArrayUtil.mergeSort
> * now we no longer see SorterTemplate.quickSort in deep recursion when
> we do a thread dump
> * we now occasionally catch SorterTemplate.mergeSort in our thread dumps,
> but only a few levels deep, which looks healthy
> 
> I don't think we'll be able to reproduce this easily - this happens with
> MemoryIndex and a few thousand stored queries that are confidential
> customer data :(
> 
> I'll be back if after a while mergeSort starts behaving the same as
quickSort.
> 
> Thanks!
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene ecosystem
> search :: http://search-lucene.com/
> 
> 
> 
> ----- Original Message ----
> > From: Dawid Weiss <dawid.weiss@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Fri, April 29, 2011 7:51:39 AM
> > Subject: Re: SorterTemplate.quickSort causes StackOverflowError
> >
> > Don't know if this helps, but debugging stuff like this I simply add
> > a (manually inserted or aspectj-injected) recursion count, add a
> > breakpoint inside an if checking for recursion count >> X and run the
> > vm with an attached socket debugger. This lets you run at (nearly)
> > full speed  and once you hit the breakpoint, inspect the stack,
variables,
> etc...
> >
> > Dawid
> >
> > On Fri, Apr 29, 2011 at 1:40 PM, Otis Gospodnetic  <
> > otis_gospodnetic@yahoo.com>  wrote:
> >
> > > Hi,
> > >
> > > OK, so it looks like it's not MemoryIndex  and its Comparator that
> > > are funky.
> > > After switching from  quickSort call in MemoryIndex to mergeSort,
> > > the problem
> > >  persists:
> > >
> > > '1205215856@qtp-684754483-7' Id=18, RUNNABLE on lock=,  total cpu
> > > time=497060.0000ms user time=495210.0000msat
> > >
> > > org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:
> > > 105)
> > >
> > >  at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  at
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  So something else is calling quickSort when it gets stuck.
> > > Weirdly, when
> I
> > > get
> > > a thread dump and get the above, I don't see the original  caller.
> > > Maybe because the stack is already too deep and  the printout is
> > > limited to N lines per call  stack?
> > >
> > > Otis
> > > ----
> > > Sematext :: http://sematext.com/ :: Solr -  Lucene - Nutch Lucene
> > > ecosystem search :: http://search-lucene.com/
> > >
> > >
> > >
> > > ----- Original  Message ----
> > > > From: Uwe Schindler <uwe@thetaphi.de>
> > > > To: java-user@lucene.apache.org
> > >  > Sent: Thu, April 28, 2011 5:54:44 PM
> > > > Subject: RE:  SorterTemplate.quickSort causes StackOverflowError
> > > >
> > > >  > Thanks for confirming, Javier! :)
> > > > >
> > > > > Uwe,  I assume you are  referring to this line 528 in MemoryIndex?
> > > >  >
> > > > >      528     if (size > 1)  ArrayUtil.quickSort(entries,
> > >  termComparator);
> > > >  >
> > > > > And this funky Comparator from  MemoryIndex:
> > >  > >
> > > > >     208   private static final   Comparator<Object> termComparator
=
> new
> > > > >  Comparator<Object>()  {
> > > > >     209       @SuppressWarnings("unchecked")
> > > > >      210     public  int compare(Object o1, Object o2) {
> > > >  >     211        if (o1 instanceof  Map.Entry<?,?>) o1 =
> > >  ((Map.Entry<?,?>)
> > > >  > o1).getKey();
> > > > >     212         if (o2 instanceof Map.Entry<?,?>) o2 =
> > >   ((Map.Entry<?,?>)
> > > > > o2).getKey();
> > > > >      213        if (o1 == o2) return 0;
> > > >  >     214        return ((Comparable)  o1).compareTo((Comparable)
o2);
> > > > >      215      }
> > > > >     216   };
> > > >  >
> > > > >  Will try, thanks!
> > > >
> > > > Yeah,  simply try with mergeSort in line 528. If that  helps, this
> > >  comparator
> > > > is buggy.
> > > >
> > > > Uwe
> > >  >
> > > >
> > > > > ----- Original  Message ----
> > >  > > > From: Uwe Schindler <uwe@thetaphi.de>
> > > > > > To: java-user@lucene.apache.org
> > >  > >  > Sent: Thu, April 28, 2011 5:36:13 PM
> > > > >  > Subject: RE:  SorterTemplate.quickSort causes
> > > > > StackOverflowError
> > > > > >
> > > > > > Hi   Otis,
> > > > > >
> > > > > > Can you reproduce this  somehow and send test  code? I could
> > > > > > look
> > >  into
> > > >  > > it. I don't expect the error in the  quicksort algorithm
> > > > itself  as
> > > this
> > > > > > one is used e.g. BytesRefHash /   TermsHash, if there is a bug
we
> > > would
> > > > > > have   seen it long time  ago.
> > > > > >
> > > > > > I  have not seen this before, but I suspect  a  problem in
> > > > > > this  very strange comparator in MemoryIndex  (which is  very
> > > > > > broken,  if you
> > > look
> > > > > > at its code - it  can  compare Strings with Map.Entry and so
> > > > > > on,  brrrr), maybe the  comparator is not stable? In this
> > > > > > case,  quicksort can  easily  loop endless and stack  overflow.
In
> Lucene 3.0 this used
> > > > > > stock  java   sort (which is mergesort), maybe replace the
> > > > > >   ArrayUtils.quickSort my  ArrayUtils.mergeSort() and see if
> > > > > > problem
> > >  is
> > > > still
> > > > > there?
> > >  > > >
> > > > > > Uwe
> > > > > >
> > > >  >  > -----
> > > > > > Uwe Schindler
> > > > >  > H.-H.-Meier-Allee 63,  D-28213  Bremen
> > > > > > http://www.thetaphi.de
> > >  > > > eMail: uwe@thetaphi.de
> > > > > >
> > >  > >  >
> > > > > > > -----Original   Message-----
> > > > > > > From:  Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  > >  > >  Sent: Thursday, April 28, 2011 11:17 PM  > > > > To:
> > > java-user@lucene.apache.org
> > >  > >  > >  Subject: SorterTemplate.quickSort causes
StackOverflowError
> > > > > > >
> > > > > > >   Hi,
> > > > > >  >
> > > > > > > I'm looking at  some code that uses MemoryIndex (Lucene
> > > > > > > 3.1)  and
> > > > >  > > that's exhibiting a strange behaviour - it  slows down over
time.
> > > > > > > The MemoryIndex contains 1 doc, of   course, and executes a
set
> of a
> > > > > > > few thousand queries  against  it.  The set of queries does
> > > > > > > not  change - the
> > > > >  > same
> > > > > > > set  of queries gets executed on all incoming   documents.
> > > > >  > > This code runs very quickly..... in the  beginning.    But
with
> > > time is
> > > > gets
> > > > > > >  slower and  slower.... and slower..... and then I get  this:
> > >  > > > >
> > > > >  > > 4/28/11 10:32:52 PM (S)  SolrException.log  :
> > > > java.lang.StackOverflowError
> > > >  > > >     at
> > > > >  > >
> > > >  >
> > >
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  > >  > >      at
> > > > > >  >
> > > > >
> > >
> org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:104)
> > >  > >  > >      at
> > > > > >  >
> > > > > > >
> > >   org.apache.lucene.util.SorterTemplate.quickSort(SorterTemplate.java:
> > >  > >  > > 104)
> > > > > > >
> > > > >  > > I haven't profiled this code  yet (remote server, firewall
> > > > > in
> > > > > > > between,
> > > > > > can't   use
> > > > > > > YourKit...), but does the above look familiar  to   anyone?
> > > > > > > I've looked at the code and  obviously there is the
> > > > > > > recursive  call  that's problematic here - it looks like
> > > > > > > the recursion just gets
> > >  > > > > deeper and deeper
> > > > > >  and
> > >  > > > > "gets stuck", eventually getting too deep for   the  JVM's
taste.
> > > > > > >
> > > > > > >  Thanks,
> > > > > > >  Otis
> > > > > > >  ----
> > > > > > >  Sematext :: http://sematext.com/ :: Solr  -  Lucene - Nutch
> > > > > > > Lucene ecosystem  search  :: http://search-lucene.com/
> > > > > > >
> > > > >  > >
> > > > > >  >
> > > > > >  >
> > >
> > > --------------------------------------------------------------------
> > >  > >  > > - To  unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > >  > >  >
> > > > > >
> > > > > >
> > > >  > >
> > >
> > > --------------------------------------------------------------------
> > > -  > >  > To  unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > For  additional commands, e-mail:
> > > java-user-help@lucene.apache.org  > >  >
> > > > > >
> > > > >
> > > >  >
---------------------------------------------------------------------
> > >  > > To  unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  For additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >
> > > >
> > > >
> > > >
> > > > ------------------------------------------------------------------
> > > > ---
> > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > For  additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >
> > > >
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 20:14:45 2011
Return-Path: <java-user-return-49537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B907420EA
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 20:14:45 +0000 (UTC)
Received: (qmail 43404 invoked by uid 500); 29 Apr 2011 20:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43368 invoked by uid 500); 29 Apr 2011 20:14:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43360 invoked by uid 99); 29 Apr 2011 20:14:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:14:43 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:14:36 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id E4BCF2084B
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 16:14:15 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Fri, 29 Apr 2011 16:14:15 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=09aP9hvGyWqVjipMy1oQAyNPC2M=; b=HFJuqp1wJtTMCjrNwFa4L+DnipvjnrGhlPucjkyel3zbfE5IcVm16gE3bLvKP6pdtMcpkWI56l0SgT3Duh1EfE/LtefST5eBYEzA0Pdd5VZLgWpfCX6Z78tz5EdJsw9aTxJXAkig/RJPP9/fx0qHtNMARVPGnGVUNs7Q5lkozyg=
X-Sasl-enc: U6i9vrs0NJ0qA3Ln5PgP3tWlrKfssdBlzc/87PV+inh9 1304108055
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 7DE754446E4
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 16:14:15 -0400 (EDT)
Message-ID: <4DBB1C16.6050407@fastmail.fm>
Date: Fri, 29 Apr 2011 21:14:14 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 3.0.3 with debug information
References: <4DBA9C51.6030609@fastmail.fm> <2D127F11DC79714E9B6A43AC9458147FB3CE7194@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FB3CE7194@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 29/04/2011 16:03, Steven A Rowe wrote:
> Hi Paul,
>
> What did you find about Luke that's buggy?  Bug reports are very useful; please contribute in this way.
Please see previous post, in summary mistake on my part.
> The official Lucene 3.0.3 distribution jars were compiled using the -g cmdline argument to javac - by default, though, only line number and source file information is generated.  If you want local variable information too, you could download the source and make your own debug-enabled jar(s), right?:
>
Hmm maybe that is enough, Im not sure. I'm profiling with 
YourkitProfiler and it doesnt show anything within the lucene classes so 
I assumed this meant they didnt contain the neccessary debugging info 
but I would have thought that -g is all I need

thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 20:20:02 2011
Return-Path: <java-user-return-49538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34BB426D0
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 20:20:02 +0000 (UTC)
Received: (qmail 51420 invoked by uid 500); 29 Apr 2011 20:19:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51372 invoked by uid 500); 29 Apr 2011 20:19:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51364 invoked by uid 99); 29 Apr 2011 20:19:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:19:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:19:54 +0000
Received: by ewy22 with SMTP id 22so1860614ewy.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 13:19:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:from
         :date:x-google-sender-auth:message-id:subject:to:content-type;
        bh=9pptP+owd2IHgMThFUEn5JEU9TVAnuloP0uC69tZO3s=;
        b=a9CDlU2n0specnLT1QFcnBOGhuXmVbH9xdL32VzqpMXV3xu3Fpo9JpXdcHJpnoAsfm
         1x5FvikBX1U8xDepr6pUtlhNVkNfu7+2FRdNk9EI0WcfbbDaNJEPlagFyYQlgenAGpJt
         8H7SMfcR3ckCofwLKxkaMCoeoECI8xBAc/OiE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        b=hqe8jWJyJ8jakaiCBbDmhMofXPKaJjvxkZJqq0oCdSQ7lbyzDveMtjr/q/cgkNdtic
         KTi+x2BWIM+jj4TdY0Jzim04wN4ZlpU1syKRZ4WM2sWmaQTM7HZHKHW8mpzUiIYdltD2
         gLvrtWSVgoipVNcAo/Yq8mo9xUPSWMUn8VpEM=
Received: by 10.213.14.209 with SMTP id h17mr2392056eba.23.1304108372118; Fri,
 29 Apr 2011 13:19:32 -0700 (PDT)
MIME-Version: 1.0
Sender: dawid.weiss@gmail.com
Received: by 10.213.35.6 with HTTP; Fri, 29 Apr 2011 13:19:12 -0700 (PDT)
In-Reply-To: <4DBB1B58.7050103@fastmail.fm>
References: <4DBA9C51.6030609@fastmail.fm> <BANLkTi=xwmnve=525zk5_8JqoZ-KR50qNw@mail.gmail.com>
 <BANLkTikrMoKdOTg8ypGCp8_Q01+2JD3noA@mail.gmail.com> <4DBB1B58.7050103@fastmail.fm>
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
Date: Fri, 29 Apr 2011 22:19:12 +0200
X-Google-Sender-Auth: iFUrvsSTKQ0UHt2fYt69sKaDVJc
Message-ID: <BANLkTikL-D0dSNRJUjnERaQWmj+uY0HLUg@mail.gmail.com>
Subject: Re: Lucene 3.0.3 with debug information
To: paul_t100@fastmail.fm, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c164644ccde04a2146408

--0015174c164644ccde04a2146408
Content-Type: text/plain; charset=UTF-8

Instead of profiling, provide some more info about the following:

- what are the problematic (slow) queries -- are they generated from the
code, are they parsed from text? What are they? Certain query types are
slow(er) than other query types.

- what is the index built from? Natural language (text)? Something else?

If you describe the above folks may tell you right away why your queries are
slow -- people on this list continue to amaze me with the insight they have
even without looking at the code ;)

Dawid

On Fri, Apr 29, 2011 at 10:11 PM, Paul Taylor <paul_t100@fastmail.fm> wrote:

>  On 29/04/2011 15:17, Dawid Weiss wrote:
>
>
>
>  > lucene/Search that is taking the time, I also had another attempt using
>> luke
>> > but find it incredibly buggy and of little use
>>
>
>  Can you expand on this too? What kind of "incredible bugs" did you see?
> Without feedback there is little progress, so bug reports count.
>
> Dawid
>
> Sorry, I'll withdraw that. I was getting all kinds of stacktraces and
> exceptions when I tried to do searches but the problem was my fault. Because
> I wanted to use my own analyzer  I had a shells script that added it to the
> classpath when I ran luke, however I had put it before the ant jar and my
> jar built with maven also included lucene 3.0.3 and because luke 1.0.1 is
> packaged with 3.0.0 it was confusing it, but I didnt realize this until I
> notice done exception complained a lucene method was missing.
>
> But having got it working I cannot see anything to help me work out why the
> queries are taking too long, is it useful for this or just for refining your
> queries ?
>
> Paul
>

--0015174c164644ccde04a2146408--

From java-user-return-49539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 20:25:53 2011
Return-Path: <java-user-return-49539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2235A2743
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 20:25:53 +0000 (UTC)
Received: (qmail 55101 invoked by uid 500); 29 Apr 2011 20:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55057 invoked by uid 500); 29 Apr 2011 20:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55049 invoked by uid 99); 29 Apr 2011 20:25:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:25:50 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:25:42 +0000
Received: from compute5.internal (compute5.nyi.mail.srv.osa [10.202.2.45])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 529E720D5E
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 16:25:22 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute5.internal (MEProxy); Fri, 29 Apr 2011 16:25:22 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=IkrPPC3cTeQeQrdqqv6rX4hjbRg=; b=C4pXcsaJP1V0mQoIK7iehrLwf+2FaYOxWsKELMOGV+QM0gJUH59Nk4uIcE0iHnnxodF9deF2GrN5hgszzLrC1xwJu4lcPDIJoWtZE7DqOM1ze6gLBbtyMjofDU78RDHNj5mwm3maHFdoFlQDX0qU6e5S0D1OntdrZTloPuWdu3w=
X-Sasl-enc: JAz6/PChSegZv2NnQmvZXRxxSAOAtRLULMICFJ50XI9C 1304108722
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id E2AA544891A
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 16:25:21 -0400 (EDT)
Message-ID: <4DBB1EB0.6010000@fastmail.fm>
Date: Fri, 29 Apr 2011 21:25:20 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene 3.0.3 with debug information
References: <4DBA9C51.6030609@fastmail.fm> <2D127F11DC79714E9B6A43AC9458147FB3CE7194@suex07-mbx-03.ad.syr.edu> <4DBB1C16.6050407@fastmail.fm>
In-Reply-To: <4DBB1C16.6050407@fastmail.fm>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 29/04/2011 21:14, Paul Taylor wrote:
>
> Hmm maybe that is enough, Im not sure. I'm profiling with 
> YourkitProfiler and it doesnt show anything within the lucene classes 
> so I assumed this meant they didnt contain the neccessary debugging 
> info but I would have thought that -g is all I need
>
> thanks Paul
Aah, not using the filter correctly in Yourkit Profiler properly, 
getting the info now

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 20:43:25 2011
Return-Path: <java-user-return-49540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 284FE20A9
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 20:43:25 +0000 (UTC)
Received: (qmail 65404 invoked by uid 500); 29 Apr 2011 20:43:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65368 invoked by uid 500); 29 Apr 2011 20:43:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65360 invoked by uid 99); 29 Apr 2011 20:43:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:43:22 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:43:13 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p3TKgpaI015643
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 16:42:51 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Fri, 29 Apr 2011
 16:42:51 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 29 Apr 2011 16:42:49 -0400
Subject: RE: Lucene 3.0.3 with debug information
Thread-Topic: Lucene 3.0.3 with debug information
Thread-Index: AcwGqhiLaWcfJB5HTAudl+3egm7FvwAAb5zA
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE71B0@suex07-mbx-03.ad.syr.edu>
References: <4DBA9C51.6030609@fastmail.fm>
 <2D127F11DC79714E9B6A43AC9458147FB3CE7194@suex07-mbx-03.ad.syr.edu>
 <4DBB1C16.6050407@fastmail.fm>
In-Reply-To: <4DBB1C16.6050407@fastmail.fm>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-29_07:2011-04-29,2011-04-29,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgUGF1bCwNCg0KT24gNC8yOS8yMDExIGF0IDQ6MTQgUE0sIFBhdWwgVGF5bG9yIHdyb3RlOg0K
PiBPbiAyOS8wNC8yMDExIDE2OjAzLCBTdGV2ZW4gQSBSb3dlIHdyb3RlOg0KPiA+IFdoYXQgZGlk
IHlvdSBmaW5kIGFib3V0IEx1a2UgdGhhdCdzIGJ1Z2d5PyAgQnVnIHJlcG9ydHMgYXJlIHZlcnkN
Cj4gPiB1c2VmdWw7IHBsZWFzZSBjb250cmlidXRlIGluIHRoaXMgd2F5Lg0KPg0KPiBQbGVhc2Ug
c2VlIHByZXZpb3VzIHBvc3QsIGluIHN1bW1hcnkgbWlzdGFrZSBvbiBteSBwYXJ0Lg0KDQpPa2F5
Li4uIFdoaWNoIHByZXZpb3VzIHBvc3Q/ICBJIHNlYXJjaGVkIGZvciBwb3N0cyBieSB5b3UgdG8g
THVjZW5lIG1haWxpbmcgbGlzdHMsIGFuZCBmb3VuZCBubyBtZW50aW9uIG9mIEx1a2Ugb3RoZXIg
dGhhbiB0aGUgb25lIGNvbXBsYWluaW5nIGFib3V0IGJ1Z3M/DQoNClN0ZXZlDQoNCg==


From java-user-return-49541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 20:46:10 2011
Return-Path: <java-user-return-49541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B1E402A40
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 20:46:10 +0000 (UTC)
Received: (qmail 72448 invoked by uid 500); 29 Apr 2011 20:46:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72408 invoked by uid 500); 29 Apr 2011 20:46:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72400 invoked by uid 99); 29 Apr 2011 20:46:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:46:08 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 20:46:01 +0000
Received: by mail-bw0-f48.google.com with SMTP id 8so259639bwz.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 13:45:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:from
         :date:x-google-sender-auth:message-id:subject:to:cc:content-type;
        bh=u97yxO1cLNf6vzWiuQZ+OQaNrrOD37y+xEK0Hh9Z+5I=;
        b=l/rDY2kTDg24i9uZhknCm0zsZCNR1tBQYHzPd3UANQWmMnEWKCok7ssAhvs/KPc6U3
         rCOU0SunIURQmbpUzgnkqgZtlPBbyrli6ias0bb5XkeulpzMaAveZqIi+vOY1fHhxn1/
         znTNHK5gsbv+xuuX6XyIwHxdiHePTC99gPrNY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:cc:content-type;
        b=RaT3HEsn3Y36Wa+l+AHej56GoOaryGFat2dHbPla9dXR7LO07xGGemA1Sah78K8IMC
         zsPmntwr94nkJV5f5cx4+Rkq4eTOlblwc9jtl0KgUcxWC5CKap2PXy9adMYSjgoSWpBw
         uQy1o+UKNKOGAC2pk+39EHXx7jiZ1UIJRx28M=
Received: by 10.204.25.20 with SMTP id x20mr5036151bkb.112.1304109940197; Fri,
 29 Apr 2011 13:45:40 -0700 (PDT)
MIME-Version: 1.0
Sender: dawid.weiss@gmail.com
Received: by 10.204.5.91 with HTTP; Fri, 29 Apr 2011 13:45:20 -0700 (PDT)
In-Reply-To: <4DBB1B58.7050103@fastmail.fm>
References: <4DBA9C51.6030609@fastmail.fm> <BANLkTi=xwmnve=525zk5_8JqoZ-KR50qNw@mail.gmail.com>
 <BANLkTikrMoKdOTg8ypGCp8_Q01+2JD3noA@mail.gmail.com> <4DBB1B58.7050103@fastmail.fm>
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
Date: Fri, 29 Apr 2011 22:45:20 +0200
X-Google-Sender-Auth: sd59TP2aFZheWgOphYNPjDFn3nY
Message-ID: <BANLkTimwYShUX8qAh3eJWo56i2MD585JuQ@mail.gmail.com>
Subject: Lucene 3.0.3 with debug information
To: java-user@lucene.apache.org
Cc: Steven A Rowe <sarowe@syr.edu>
Content-Type: multipart/alternative; boundary=00032555b222bbcaf304a214c187
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555b222bbcaf304a214c187
Content-Type: text/plain; charset=UTF-8

This is the e-mail you're looking for, Steven (it wasn't forwarded to the
list, apparently).

Dawid

---------- Forwarded message ----------
From: Paul Taylor <paul_t100@fastmail.fm>
Date: Fri, Apr 29, 2011 at 10:11 PM
Subject: Re: Lucene 3.0.3 with debug information
To: Dawid Weiss <dawid.weiss@gmail.com>


 On 29/04/2011 15:17, Dawid Weiss wrote:



 > lucene/Search that is taking the time, I also had another attempt using
> luke
> > but find it incredibly buggy and of little use
>

 Can you expand on this too? What kind of "incredible bugs" did you see?
Without feedback there is little progress, so bug reports count.

Dawid

Sorry, I'll withdraw that. I was getting all kinds of stacktraces and
exceptions when I tried to do searches but the problem was my fault. Because
I wanted to use my own analyzer  I had a shells script that added it to the
classpath when I ran luke, however I had put it before the ant jar and my
jar built with maven also included lucene 3.0.3 and because luke 1.0.1 is
packaged with 3.0.0 it was confusing it, but I didnt realize this until I
notice done exception complained a lucene method was missing.

But having got it working I cannot see anything to help me work out why the
queries are taking too long, is it useful for this or just for refining your
queries ?

Paul

--00032555b222bbcaf304a214c187--

From java-user-return-49542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 21:15:15 2011
Return-Path: <java-user-return-49542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 809052097
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 21:15:15 +0000 (UTC)
Received: (qmail 8788 invoked by uid 500); 29 Apr 2011 21:15:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8748 invoked by uid 500); 29 Apr 2011 21:15:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8740 invoked by uid 99); 29 Apr 2011 21:15:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 21:15:13 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.211.3.202] (HELO itcs-ehub-02.adsroot.itcs.umich.edu) (141.211.3.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 21:15:05 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.232]) by
 itcs-ehub-02.adsroot.itcs.umich.edu ([141.211.3.202]) with mapi; Fri, 29 Apr
 2011 17:14:43 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 29 Apr 2011 17:14:43 -0400
Subject: Link to nightly build test reports on main Lucene site needs
 updating
Thread-Topic: Link to nightly build test reports on main Lucene site needs
 updating
Thread-Index: AcwGsnVmQZmuATKVRL+iIGfX2A9kaA==
Message-ID: <47316FE3F6BA0D4DADF99663512552680B0F373B01@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_47316FE3F6BA0D4DADF99663512552680B0F373B01ITCSECLS1VS3a_"
MIME-Version: 1.0

--_000_47316FE3F6BA0D4DADF99663512552680B0F373B01ITCSECLS1VS3a_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,

I went to look at the "Hudson nightly builds" and tried to follow the link =
from the main Lucene page
http://lucene.apache.org/java/docs/developer-resources.html#Nightly


The links  to the Clover Test Coverage Reports  point to http://hudson.zone=
s.apache.org/hudson/view/Lucene/job/Lucene-trunk/lastSuccessfulBuild/clover=
/  but apparently hudson.zones.apache.org is no longer being used.  I think=
 the link should point to somewhere on  https://builds.apache.org/hudson/jo=
b/Lucene-trunk/.
Is this the right list to alert whoever maintains the main Lucene pages on =
lucene.apache.org?
Tom



--_000_47316FE3F6BA0D4DADF99663512552680B0F373B01ITCSECLS1VS3a_--

From java-user-return-49543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 21:21:38 2011
Return-Path: <java-user-return-49543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 310322614
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 21:21:38 +0000 (UTC)
Received: (qmail 17027 invoked by uid 500); 29 Apr 2011 21:21:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16983 invoked by uid 500); 29 Apr 2011 21:21:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16975 invoked by uid 99); 29 Apr 2011 21:21:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 21:21:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 21:21:30 +0000
Received: by wyb40 with SMTP id 40so4996378wyb.35
        for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 14:21:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.55.68 with SMTP id t4mr1353817wbg.78.1304112068887; Fri,
 29 Apr 2011 14:21:08 -0700 (PDT)
Received: by 10.227.3.16 with HTTP; Fri, 29 Apr 2011 14:21:08 -0700 (PDT)
In-Reply-To: <4DBB1EB0.6010000@fastmail.fm>
References: <4DBA9C51.6030609@fastmail.fm>
	<2D127F11DC79714E9B6A43AC9458147FB3CE7194@suex07-mbx-03.ad.syr.edu>
	<4DBB1C16.6050407@fastmail.fm>
	<4DBB1EB0.6010000@fastmail.fm>
Date: Fri, 29 Apr 2011 17:21:08 -0400
Message-ID: <BANLkTi=s1wgx8QWH7oQ_4=2fX=+hWUZ0hQ@mail.gmail.com>
Subject: Re: Lucene 3.0.3 with debug information
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1

On Fri, Apr 29, 2011 at 4:25 PM, Paul Taylor <paul_t100@fastmail.fm> wrote:

>> Hmm maybe that is enough, Im not sure. I'm profiling with YourkitProfiler
>> and it doesnt show anything within the lucene classes so I assumed this
>> meant they didnt contain the neccessary debugging info but I would have
>> thought that -g is all I need
>>
>> thanks Paul
>
> Aah, not using the filter correctly in Yourkit Profiler properly, getting
> the info now

Right, YourKit filters out org.apache.* by default ;)  I find it amusing!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 21:24:15 2011
Return-Path: <java-user-return-49544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F6392640
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 21:24:15 +0000 (UTC)
Received: (qmail 19427 invoked by uid 500); 29 Apr 2011 21:24:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19373 invoked by uid 500); 29 Apr 2011 21:24:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19362 invoked by uid 99); 29 Apr 2011 21:24:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 21:24:13 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 21:24:04 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p3TLNgMY026874
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 17:23:43 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Fri, 29 Apr 2011
 17:23:42 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 29 Apr 2011 17:23:40 -0400
Subject: RE: Lucene 3.0.3 with debug information
Thread-Topic: Lucene 3.0.3 with debug information
Thread-Index: AcwGrmcXXcqvS3+XQ+SUJYYZCCjaXQABULEg
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE71B2@suex07-mbx-03.ad.syr.edu>
References: <4DBA9C51.6030609@fastmail.fm>
 <BANLkTi=xwmnve=525zk5_8JqoZ-KR50qNw@mail.gmail.com>
 <BANLkTikrMoKdOTg8ypGCp8_Q01+2JD3noA@mail.gmail.com>
 <4DBB1B58.7050103@fastmail.fm>
 <BANLkTimwYShUX8qAh3eJWo56i2MD585JuQ@mail.gmail.com>
In-Reply-To: <BANLkTimwYShUX8qAh3eJWo56i2MD585JuQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_2D127F11DC79714E9B6A43AC9458147FB3CE71B2suex07mbx03adsy_"
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-04-29_08:2011-04-29,2011-04-29,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_2D127F11DC79714E9B6A43AC9458147FB3CE71B2suex07mbx03adsy_
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

VGhhbmtzIERhd2lkLiDigJMgU3RldmUNCg0KRnJvbTogZGF3aWQud2Vpc3NAZ21haWwuY29tIFtt
YWlsdG86ZGF3aWQud2Vpc3NAZ21haWwuY29tXSBPbiBCZWhhbGYgT2YgRGF3aWQgV2Vpc3MNClNl
bnQ6IEZyaWRheSwgQXByaWwgMjksIDIwMTEgNDo0NSBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUu
YXBhY2hlLm9yZw0KQ2M6IFN0ZXZlbiBBIFJvd2UNClN1YmplY3Q6IEx1Y2VuZSAzLjAuMyB3aXRo
IGRlYnVnIGluZm9ybWF0aW9uDQoNCg0KVGhpcyBpcyB0aGUgZS1tYWlsIHlvdSdyZSBsb29raW5n
IGZvciwgU3RldmVuIChpdCB3YXNuJ3QgZm9yd2FyZGVkIHRvIHRoZSBsaXN0LCBhcHBhcmVudGx5
KS4NCg0KRGF3aWQNCi0tLS0tLS0tLS0gRm9yd2FyZGVkIG1lc3NhZ2UgLS0tLS0tLS0tLQ0KRnJv
bTogUGF1bCBUYXlsb3IgPHBhdWxfdDEwMEBmYXN0bWFpbC5mbTxtYWlsdG86cGF1bF90MTAwQGZh
c3RtYWlsLmZtPj4NCkRhdGU6IEZyaSwgQXByIDI5LCAyMDExIGF0IDEwOjExIFBNDQpTdWJqZWN0
OiBSZTogTHVjZW5lIDMuMC4zIHdpdGggZGVidWcgaW5mb3JtYXRpb24NClRvOiBEYXdpZCBXZWlz
cyA8ZGF3aWQud2Vpc3NAZ21haWwuY29tPG1haWx0bzpkYXdpZC53ZWlzc0BnbWFpbC5jb20+Pg0K
DQpPbiAyOS8wNC8yMDExIDE1OjE3LCBEYXdpZCBXZWlzcyB3cm90ZToNCg0KPiBsdWNlbmUvU2Vh
cmNoIHRoYXQgaXMgdGFraW5nIHRoZSB0aW1lLCBJIGFsc28gaGFkIGFub3RoZXIgYXR0ZW1wdCB1
c2luZyBsdWtlDQo+IGJ1dCBmaW5kIGl0IGluY3JlZGlibHkgYnVnZ3kgYW5kIG9mIGxpdHRsZSB1
c2UNCg0KQ2FuIHlvdSBleHBhbmQgb24gdGhpcyB0b28/IFdoYXQga2luZCBvZiAiaW5jcmVkaWJs
ZSBidWdzIiBkaWQgeW91IHNlZT8gV2l0aG91dCBmZWVkYmFjayB0aGVyZSBpcyBsaXR0bGUgcHJv
Z3Jlc3MsIHNvIGJ1ZyByZXBvcnRzIGNvdW50Lg0KDQpEYXdpZA0KU29ycnksIEknbGwgd2l0aGRy
YXcgdGhhdC4gSSB3YXMgZ2V0dGluZyBhbGwga2luZHMgb2Ygc3RhY2t0cmFjZXMgYW5kIGV4Y2Vw
dGlvbnMgd2hlbiBJIHRyaWVkIHRvIGRvIHNlYXJjaGVzIGJ1dCB0aGUgcHJvYmxlbSB3YXMgbXkg
ZmF1bHQuIEJlY2F1c2UgSSB3YW50ZWQgdG8gdXNlIG15IG93biBhbmFseXplciAgSSBoYWQgYSBz
aGVsbHMgc2NyaXB0IHRoYXQgYWRkZWQgaXQgdG8gdGhlIGNsYXNzcGF0aCB3aGVuIEkgcmFuIGx1
a2UsIGhvd2V2ZXIgSSBoYWQgcHV0IGl0IGJlZm9yZSB0aGUgYW50IGphciBhbmQgbXkgamFyIGJ1
aWx0IHdpdGggbWF2ZW4gYWxzbyBpbmNsdWRlZCBsdWNlbmUgMy4wLjMgYW5kIGJlY2F1c2UgbHVr
ZSAxLjAuMSBpcyBwYWNrYWdlZCB3aXRoIDMuMC4wIGl0IHdhcyBjb25mdXNpbmcgaXQsIGJ1dCBJ
IGRpZG50IHJlYWxpemUgdGhpcyB1bnRpbCBJIG5vdGljZSBkb25lIGV4Y2VwdGlvbiBjb21wbGFp
bmVkIGEgbHVjZW5lIG1ldGhvZCB3YXMgbWlzc2luZy4NCg0KQnV0IGhhdmluZyBnb3QgaXQgd29y
a2luZyBJIGNhbm5vdCBzZWUgYW55dGhpbmcgdG8gaGVscCBtZSB3b3JrIG91dCB3aHkgdGhlIHF1
ZXJpZXMgYXJlIHRha2luZyB0b28gbG9uZywgaXMgaXQgdXNlZnVsIGZvciB0aGlzIG9yIGp1c3Qg
Zm9yIHJlZmluaW5nIHlvdXIgcXVlcmllcyA/DQoNClBhdWwNCg0K

--_000_2D127F11DC79714E9B6A43AC9458147FB3CE71B2suex07mbx03adsy_--

From java-user-return-49545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Apr 29 23:23:54 2011
Return-Path: <java-user-return-49545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3DF382824
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 29 Apr 2011 23:23:54 +0000 (UTC)
Received: (qmail 17659 invoked by uid 500); 29 Apr 2011 23:23:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17612 invoked by uid 500); 29 Apr 2011 23:23:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17604 invoked by uid 99); 29 Apr 2011 23:23:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 23:23:51 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.113.200.5] (HELO homiemail-a49.g.dreamhost.com) (208.113.200.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Apr 2011 23:23:46 +0000
Received: from homiemail-a49.g.dreamhost.com (localhost [127.0.0.1])
	by homiemail-a49.g.dreamhost.com (Postfix) with ESMTP id 424825E0058
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 16:23:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; c=nofws; d=getopt.org; h=message-id:date
	:from:mime-version:to:subject:content-type:
	content-transfer-encoding; q=dns; s=getopt.org; b=jqMI5DbdSy7ubA
	Jb3oHt82FCTESHSBqYqMZ3pFPfwUQ1Y7phQEuUAnd5GxEGksug6NmjLnjJmcVBVV
	4EsYD/1sS6dtQL4ad+Jxqgn++FdrV2CmwQnzk9MzThTsckHarKdzuoYWEigSDQx8
	1sz/RL8/ZGveObCFnm4Bj1TW7TTjo=
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed; d=getopt.org; h=message-id
	:date:from:mime-version:to:subject:content-type:
	content-transfer-encoding; s=getopt.org; bh=zX9Fpx8rnHPiNaVAh2EY
	RyamgiM=; b=FEUdq+WJbU83LlSWqsev06bC2gPGoIttk+jUzpoaYL9WPMgf/5Aj
	GUJwlHwvooUannaB7m/DZnHFNI1eY1OlnYBwkdtGgmH+703mSMd1yc65k/SV5xgV
	IVbxmf4sUh1mdYpktktSnIXfJRD154UjA4WBd69EngkuqVLGtBFbYpc=
Received: from abacus.local (unknown [81.219.54.251])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	(Authenticated sender: ab@getopt.org)
	by homiemail-a49.g.dreamhost.com (Postfix) with ESMTPSA id C87095E0057
	for <java-user@lucene.apache.org>; Fri, 29 Apr 2011 16:23:19 -0700 (PDT)
Message-ID: <4DBB4865.3010706@getopt.org>
Date: Sat, 30 Apr 2011 01:23:17 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [ANN] Luke 3.1.0 released
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I'm happy to announce the release of Luke 3.1.0. This release is based 
on Lucene 3.1.0. Binaries and source code are available from the 
project's page at Google Code:

http://code.google.com/p/luke/

Changes in version 3.1.0 (released on 2011.04.30):

* Issue 35: Lucene 3.1 compatible luke version (oss.akk)
* Issue 36: XMLExporter generating invalid XML, when special characters 
are present in a TermVector field (Craig.Stires)
* Issue 17: Recent changes to DocReconstructor sometimes cause null ref 
(solrtrey)
* Issue 19: Custom directory implementation must be inherited from 
FSDirectory (mitja.lenic)
* Issue 21: luke tarball needs to extract to a "luke" directory 
(bevan.koopman, Photodeus)
* Issue 33: Term Positions increment incorrect (karolina.bernat)
* Issue 27: Cannot add or edit documents using StandardAnalyzer 
(dean.thrasher)

Thank you for contributing bug reports, patches and comments.

Happy Luke-ing!

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 30 03:21:06 2011
Return-Path: <java-user-return-49546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 790B53AAD
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 30 Apr 2011 03:21:06 +0000 (UTC)
Received: (qmail 25921 invoked by uid 500); 30 Apr 2011 03:21:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25608 invoked by uid 500); 30 Apr 2011 03:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25600 invoked by uid 99); 30 Apr 2011 03:21:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 03:21:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.94.238.131] (HELO web130104.mail.mud.yahoo.com) (66.94.238.131)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 30 Apr 2011 03:20:54 +0000
Received: (qmail 63548 invoked by uid 60001); 30 Apr 2011 03:20:33 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304133633; bh=PTfd93aNTlJjFQW9xMdNxsSGKQvgoRKX3g8xLE40A0s=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=Fd+PRHsKUGf4GaGyjE8XjX02mGbBPoZCP0ZA9/M7Sfsy4gfenCicsoUucVU7pu7U5wuHdG7ur/Jl7Qbb5tdOH1SkL/PNppdpQbLywZAXj75ZDUXMg8rAPtb3YU2cRJfT7eJ6v5nzAf2eJyiZaxQMMbZI5pMvt/s0p2HFANV3M20=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=C7BUcHru/zALIUQwxA8qzFPPZwyZwceSK3l4HxmtO5vZobUBtgZXjzCCic5r4hHPlRc86ZOpowi4SM7HlfehWp1pq0sZZ54MNywdz2sTJ4Cg7BDl91+vI7YQMFWA+VtPe5RY/EEzE/gIwFJATAMQ/vIsXOb4h7v57Oe8ZVK/sFQ=;
Message-ID: <212979.61165.qm@web130104.mail.mud.yahoo.com>
X-YMail-OSG: RblzDrgVM1kvfLgG9hf0T5gmYYKdK.TXlxPj43y9x6HuCls
 rpVNGbXbkAlkSq5UkVLz6F.QLDcRsacF4CYikBSd_0SqRNJGxjUtP.zcufJW
 7Iq7yr7Ek5byL3kgz2yVmjWABCX3IV2iRfWLEH5QvtjXDQsl1VUVqaQQS3xI
 N0SX993FwGBc5qLq8yAXx32GGagcu3Z0WpWFppZSe3TvuaULl8YGUytGkD2N
 2w62lN9kDJjeYNQWiGg6HoxDqh2x2i_l5qYoi6VX6z.T1IiyulpO8gQUGX6q
 hP0YopVASETbiD_G4aRHSC7.Hov6vgtcl.r7vQlN3cigXf_8VnJbFDf4rPEU
 99aYBDOIB2I27xoQc4nwceoSmQVSfzoIS0Yupvp98g4L72W2H2o7.6T8-
Received: from [74.73.25.254] by web130104.mail.mud.yahoo.com via HTTP; Fri, 29 Apr 2011 20:20:33 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
Date: Fri, 29 Apr 2011 20:20:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Reusing Query instances
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Is there any reason why one would *not* want to reuse Query instances?

I'm using MemoryIndex with a fixed set of queries and I'm executing them all on 
each new document that comes in.  Because each document needs to have many tens 
of thousands of queries executed against it, I thought I'd just run all queries 
through QueryParser once at the beginning, and then just reuse Query instances 
on each incoming document.  What I've noticed is that my fixed set of queries 
takes longer and longer to execute as time passes (more and more time is spent 
inside memoryIndex.search(....) somewhere).  The problem is not heap/memory - 
there is no crazy GCing and the heap is not full, but the CPU is 100% busy.

I should note that queries I'm dealing with are ugly and big, using lots of 
wildcards, but trailing and prefix ones (and this is Lucene 3.1, so no faster 
Wildcard impl).
I should also emphasize that at this point I only *suspect* that maaaybe the 
gradual slowdown I'm seeing has something to do with the fact that I'm reusing 
Query instances.

Is there any reason why one should not reuse Query instances?

Thanks,
Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 30 07:45:59 2011
Return-Path: <java-user-return-49547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B069938C6
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 30 Apr 2011 07:45:59 +0000 (UTC)
Received: (qmail 99497 invoked by uid 500); 30 Apr 2011 07:45:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99134 invoked by uid 500); 30 Apr 2011 07:45:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99126 invoked by uid 99); 30 Apr 2011 07:45:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 07:45:49 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 07:45:40 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 0437B45FCB4
	for <java-user@lucene.apache.org>; Sat, 30 Apr 2011 09:45:20 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pGPX-QK73tC2 for <java-user@lucene.apache.org>;
	Sat, 30 Apr 2011 09:45:16 +0200 (CEST)
Received: from VEGA (port-92-196-119-3.dynamic.qsc.de [92.196.119.3])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A752345FCB1
	for <java-user@lucene.apache.org>; Sat, 30 Apr 2011 09:45:16 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <212979.61165.qm@web130104.mail.mud.yahoo.com>
In-Reply-To: <212979.61165.qm@web130104.mail.mud.yahoo.com>
Subject: RE: Reusing Query instances
Date: Sat, 30 Apr 2011 09:45:24 +0200
Message-ID: <009701cc070a$912bdca0$b38395e0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHwt6JC5I4koeeZCIj5Z4T8Dy4cB5Qso0Jw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis,

> Is there any reason why one would *not* want to reuse Query instances?

Definitely not!
 
> I'm using MemoryIndex with a fixed set of queries and I'm executing them
all
> on each new document that comes in.  Because each document needs to
> have many tens of thousands of queries executed against it, I thought I'd
just
> run all queries through QueryParser once at the beginning, and then just
> reuse Query instances on each incoming document.  What I've noticed is
that
> my fixed set of queries takes longer and longer to execute as time passes
> (more and more time is spent inside memoryIndex.search(....) somewhere).
> The problem is not heap/memory - there is no crazy GCing and the heap is
> not full, but the CPU is 100% busy.

You should still generate some dumps when its gets slow.

In general, reusing queries is perfectly fine, as the queries itself are
only a hull for the query parameters and factories for new rewritten queries
(if needed) and factories for Weights/Scorers. Of course, you should not
reuse rewritten queries, as they largely depend on the underlying index
(which changes on each request).

> I should note that queries I'm dealing with are ugly and big, using lots
of
> wildcards, but trailing and prefix ones (and this is Lucene 3.1, so no
faster
> Wildcard impl).
> I should also emphasize that at this point I only *suspect* that maaaybe
the
> gradual slowdown I'm seeing has something to do with the fact that I'm
> reusing Query instances.

Did this somehow change with 3.1 or was this the same in 3.0? In fact for
each query execution, a BitSet is allocated per segment, but as you use
MemoryIndex, the BitSet is one slot *g* (so its not an issue). For memory
index, it's more important that the term dictionary / positions is optimized
so PhraseQueries and Wildcard queries can quickly execute on the term index.
As said before, the queries from query parser are only used to rewrite
against, producing index, specific queries. The reuse pattern is ok and
wanted.

Some other question: Can you temporary replace memoryindex by another simple
one-doc impl (RAMDirectory), just to test if it also slows down then? I
don't like MemoryIndex at all (I know, it was not the bad guy for your stack
overflow).

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 30 15:28:46 2011
Return-Path: <java-user-return-49548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4116832D3
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 30 Apr 2011 15:28:46 +0000 (UTC)
Received: (qmail 75807 invoked by uid 500); 30 Apr 2011 15:28:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75711 invoked by uid 500); 30 Apr 2011 15:28:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75702 invoked by uid 99); 30 Apr 2011 15:28:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 15:28:43 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yethura.thet@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 15:28:37 +0000
Received: by vxa37 with SMTP id 37so5401878vxa.35
        for <java-user@lucene.apache.org>; Sat, 30 Apr 2011 08:28:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=m05ZhT4hIWulnnWR0Bb2MIWdF0bhvNWgVK7whTFvwrk=;
        b=jq4/m10Ka+h4hx8M12CQcgFJeb0O0xY2e7MLGUrQsGoKOHwV06UBEjv7aQ3Y9dgMi6
         YcaCae5PUe2hRRG6IyTlGrwtxt74ymvA16+N6kQPaMHGW1mTtE6RRTHBrvxor78tdQ3n
         /V4GhiFoM79ftAKrMiJds2G/kDT4bJF4Tfaj4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=PK6CtVt35sYwEsIjvJbKPqWQZU6uxbZJ1kfOYJDy7SOCtnbHvYxPxJTVFt4u/RTG2Z
         AaGe69UNCHxQISSyEXcteCXoMdAMWuInWIcS+vPXmfB56enb8vDPxQ7LUAJF2iUYADXv
         s1caL++lPe8PM2biHxdsejxRiOzAtdAq387J8=
MIME-Version: 1.0
Received: by 10.52.0.69 with SMTP id 5mr4980369vdc.96.1304177296496; Sat, 30
 Apr 2011 08:28:16 -0700 (PDT)
Received: by 10.52.169.10 with HTTP; Sat, 30 Apr 2011 08:28:16 -0700 (PDT)
Date: Sat, 30 Apr 2011 23:28:16 +0800
Message-ID: <BANLkTi=1TPdGp1R+j1ib3KY=NpFFiwepag@mail.gmail.com>
Subject: clearAttributes() not clearing in Tokenizer class
From: Ye T Thet <yethura.thet@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf304346fe7b5a5704a22470c1

--20cf304346fe7b5a5704a22470c1
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

I am using Lucene 3.0.3. I noticed when I called clearAttributes() from my
Tokenizer, the attributes in my TermAttribute object are not being cleared.

I found the issue tracking here at
https://issues.apache.org/jira/browse/LUCENE-3042. The status is fixed. It
looks like the patch would fix the problem I am facing.

I am new to SVN and open source projects. So I am clueless on how to get the
fix. Is there anywhere I can get the binary that contain the fix?

Or any other pointer relating to the issue?

Thanks,

Ye Thura

--20cf304346fe7b5a5704a22470c1--

From java-user-return-49549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 30 16:57:04 2011
Return-Path: <java-user-return-49549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8AF073F71
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 30 Apr 2011 16:57:04 +0000 (UTC)
Received: (qmail 17316 invoked by uid 500); 30 Apr 2011 16:57:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17273 invoked by uid 500); 30 Apr 2011 16:57:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17265 invoked by uid 99); 30 Apr 2011 16:57:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 16:57:02 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 16:56:54 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 6E3F145FCBB
	for <java-user@lucene.apache.org>; Sat, 30 Apr 2011 18:56:34 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mMIHLhZzYLwJ for <java-user@lucene.apache.org>;
	Sat, 30 Apr 2011 18:56:29 +0200 (CEST)
Received: from VEGA (port-92-196-119-3.dynamic.qsc.de [92.196.119.3])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3AF9545FC9D
	for <java-user@lucene.apache.org>; Sat, 30 Apr 2011 18:56:29 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTi=1TPdGp1R+j1ib3KY=NpFFiwepag@mail.gmail.com>
In-Reply-To: <BANLkTi=1TPdGp1R+j1ib3KY=NpFFiwepag@mail.gmail.com>
Subject: RE: clearAttributes() not clearing in Tokenizer class
Date: Sat, 30 Apr 2011 18:56:37 +0200
Message-ID: <00b901cc0757$9238b1c0$b6aa1540$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQLrHr2KwBSDiwp5sEviAjr3pCyFg5I4cKhw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

You can checkout the latest 3.0 branch at
https://svn.apache.org/repos/asf/lucene/java/branches/lucene_3_0 using SVN
and compile it with ANT (the patch was committed there, too).

Alternatively use Lucene 3.1, but you still need the latest branch revision
(https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_1), as
there was no Lucene Version released until now with that fix included.

Alternatively, the patch supplied in the mentioned issue (see under files)
can be applied to the released version 3.1 (just download the source
release, apply patch and compile).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ye T Thet [mailto:yethura.thet@gmail.com]
> Sent: Saturday, April 30, 2011 5:28 PM
> To: java-user@lucene.apache.org
> Subject: clearAttributes() not clearing in Tokenizer class
> 
> Hi All,
> 
> I am using Lucene 3.0.3. I noticed when I called clearAttributes() from my
> Tokenizer, the attributes in my TermAttribute object are not being
cleared.
> 
> I found the issue tracking here at
> https://issues.apache.org/jira/browse/LUCENE-3042. The status is fixed. It
> looks like the patch would fix the problem I am facing.
> 
> I am new to SVN and open source projects. So I am clueless on how to get
> the fix. Is there anywhere I can get the binary that contain the fix?
> 
> Or any other pointer relating to the issue?
> 
> Thanks,
> 
> Ye Thura


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Apr 30 19:42:06 2011
Return-Path: <java-user-return-49550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C16AC37CD
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 30 Apr 2011 19:42:06 +0000 (UTC)
Received: (qmail 81481 invoked by uid 500); 30 Apr 2011 19:42:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81379 invoked by uid 500); 30 Apr 2011 19:42:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81364 invoked by uid 99); 30 Apr 2011 19:42:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 19:42:02 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Apr 2011 19:41:58 +0000
Received: by vxa37 with SMTP id 37so5525493vxa.35
        for <multiple recipients>; Sat, 30 Apr 2011 12:41:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=uQfbTOYYU03Z43hahTyZwAV+I3LP2hQFQpidkjd4PIQ=;
        b=oZ/4F9YaQkVumWdZIN9gaZHyWlBxK/vB+utBsSpFVXY5I0/FJKsvaFaUVldZSZAzKi
         rHvsscIxveCUHzZA1uiPMwGYGso9p7cPLq4BUaDLMCDbz5YTnrYFIlFWC99WtrVzuu01
         UikbXwy97GUM5EZsEtjLF9CIkjbeFqlh7LZKY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=WSylJv40eD3Yzmuhhc69tBvBWWNctyCTO3amG/OGEEHMpS6YD1VssbOXqNeoqIonp2
         2o8EAQCJEY+uta4bo8gE1t6BTGr5YFsaQYZy0lqpkUmliUa+s/tjOICURcrJO8A3ZbmN
         ze4uZAU4TTm1Ky9HmdyghAXWIkUtyq/L7L6X8=
MIME-Version: 1.0
Received: by 10.52.74.165 with SMTP id u5mr1581894vdv.259.1304192495283; Sat,
 30 Apr 2011 12:41:35 -0700 (PDT)
Received: by 10.52.101.196 with HTTP; Sat, 30 Apr 2011 12:41:35 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <47316FE3F6BA0D4DADF99663512552680B0F373B01@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <47316FE3F6BA0D4DADF99663512552680B0F373B01@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
Date: Sat, 30 Apr 2011 21:41:35 +0200
Message-ID: <BANLkTinbDc_=nyA_HJauBu6VDnDn2Fm-Uw@mail.gmail.com>
Subject: Re: Link to nightly build test reports on main Lucene site needs updating
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Cc: dev@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

thanks tom,
I cced dev@l.a.o

simon

On Fri, Apr 29, 2011 at 11:14 PM, Burton-West, Tom <tburtonw@umich.edu> wro=
te:
> Hello,
>
> I went to look at the "Hudson nightly builds" and tried to follow the lin=
k from the main Lucene page
> http://lucene.apache.org/java/docs/developer-resources.html#Nightly
>
>
> The links =C2=A0to the Clover Test Coverage Reports =C2=A0point to http:/=
/hudson.zones.apache.org/hudson/view/Lucene/job/Lucene-trunk/lastSuccessful=
Build/clover/ =C2=A0but apparently hudson.zones.apache.org is no longer bei=
ng used. =C2=A0I think the link should point to somewhere on =C2=A0https://=
builds.apache.org/hudson/job/Lucene-trunk/.
> Is this the right list to alert whoever maintains the main Lucene pages o=
n lucene.apache.org?
> Tom
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


